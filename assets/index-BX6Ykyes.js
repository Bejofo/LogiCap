const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Controls-CWObQk11.js","./Icon-DDcSontl.js","./DrawerController-De6Fl6E8.js","./DrawerController-CDtfjO5V.css"])))=>i.map(i=>d[i]);
var Cs=Object.defineProperty;var qr=e=>{throw TypeError(e)};var Ns=(e,t,n)=>t in e?Cs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ur=(e,t,n)=>Ns(e,typeof t!="symbol"?t+"":t,n),dr=(e,t,n)=>t.has(e)||qr("Cannot "+n);var pn=(e,t,n)=>(dr(e,t,"read from private field"),n?n.call(e):t.get(e)),ao=(e,t,n)=>t.has(e)?qr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),fr=(e,t,n,r)=>(dr(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Vr=(e,t,n)=>(dr(e,t,"access private method"),n);import{HeadlessCircuit as Ci}from"custom_digitaljs";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const Zr=!1;var Ao=Array.isArray,As=Array.prototype.indexOf,Ir=Array.from,Ni=Object.defineProperty,wn=Object.getOwnPropertyDescriptor,Ai=Object.getOwnPropertyDescriptors,Ms=Object.prototype,ks=Array.prototype,Pr=Object.getPrototypeOf;function co(e){return typeof e=="function"}const xn=()=>{};function Is(e){return e()}function wo(e){for(var t=0;t<e.length;t++)e[t]()}const Ue=2,Mi=4,Zo=8,Dr=16,En=32,Mo=64,Wo=128,Ke=256,Xo=512,Se=1024,Cn=2048,Kn=4096,Sn=8192,Jo=16384,Ps=32768,Qo=65536,ki=1<<17,Ds=1<<19,Ii=1<<20,fn=Symbol("$state"),Pi=Symbol("legacy props"),Ls=Symbol("");function Di(e){return e===this.v}function Lr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Or(e){return!Lr(e,this.v)}function Os(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ts(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Rs(e){throw new Error("https://svelte.dev/e/effect_orphan")}function zs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Li(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Bs(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ws(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Xs(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Gs(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function Ys(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let no=!1,Fs=!1;function js(){no=!0}const Tr=1,Rr=2,Oi=4,$s=8,Hs=16,Ks=1,qs=2,Us=4,Vs=8,Zs=16,Ti=1,Js=2,Le=Symbol();function Ri(){throw new Error("https://svelte.dev/e/invalid_default_snippet")}function oo(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let It=null;function Jr(e){It=e}function Dt(e){return zi().get(e)}function Ht(e,t){return zi().set(e,t),t}function Vt(e,t=!1,n){It={p:It,c:null,e:null,m:!1,s:e,x:null,l:null},no&&!t&&(It.l={s:null,u:null,r1:[],r2:He(!1)})}function Zt(e){const t=It;if(t!==null){e!==void 0&&(t.x=e);const l=t.e;if(l!==null){var n=oe,r=Qt;t.e=null;try{for(var i=0;i<l.length;i++){var s=l[i];Tn(s.effect),On(s.reaction),Hn(s.fn)}}finally{Tn(n),On(r)}}It=t.p,t.m=!0}return e||{}}function ko(){return!no||It!==null&&It.l===null}function zi(e){return It===null&&oo(),It.c??(It.c=new Map(Qs(It)||void 0))}function Qs(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function He(e,t){var n={f:0,v:e,reactions:null,equals:Di,rv:0,wv:0};return n}function tr(e,t=!1){var r;const n=He(e);return t||(n.equals=Or),no&&It!==null&&It.l!==null&&((r=It.l).s??(r.s=[])).push(n),n}function w(e,t=!1){return tl(tr(e,t))}function tl(e){return Qt!==null&&!nn&&(Qt.f&Ue)!==0&&(hn===null?dl([e]):hn.push(e)),e}function mn(e,t){return y(e,ue(()=>o(e))),t}function y(e,t){return Qt!==null&&!nn&&ko()&&(Qt.f&(Ue|Dr))!==0&&(hn===null||!hn.includes(e))&&Ys(),xo(e,t)}function xo(e,t){return e.equals(t)||(e.v,e.v=t,e.wv=Ji(),Bi(e,Cn),ko()&&oe!==null&&(oe.f&Se)!==0&&(oe.f&(En|Mo))===0&&(_n===null?fl([e]):_n.push(e))),t}function Bi(e,t){var n=e.reactions;if(n!==null)for(var r=ko(),i=n.length,s=0;s<i;s++){var l=n[s],a=l.f;(a&Cn)===0&&(!r&&l===oe||(rn(l,t),(a&(Se|Ke))!==0&&((a&Ue)!==0?Bi(l,Kn):sr(l))))}}let el=!1;function Vn(e,t=null,n){if(typeof e!="object"||e===null||fn in e)return e;const r=Pr(e);if(r!==Ms&&r!==ks)return e;var i=new Map,s=Ao(e),l=He(0);s&&i.set("length",He(e.length));var a;return new Proxy(e,{defineProperty(c,u,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Ws();var h=i.get(u);return h===void 0?(h=He(d.value),i.set(u,h)):y(h,Vn(d.value,a)),!0},deleteProperty(c,u){var d=i.get(u);if(d===void 0)u in c&&i.set(u,He(Le));else{if(s&&typeof u=="string"){var h=i.get("length"),f=Number(u);Number.isInteger(f)&&f<h.v&&y(h,f)}y(d,Le),Qr(l)}return!0},get(c,u,d){var g;if(u===fn)return e;var h=i.get(u),f=u in c;if(h===void 0&&(!f||(g=wn(c,u))!=null&&g.writable)&&(h=He(Vn(f?c[u]:Le,a)),i.set(u,h)),h!==void 0){var m=o(h);return m===Le?void 0:m}return Reflect.get(c,u,d)},getOwnPropertyDescriptor(c,u){var d=Reflect.getOwnPropertyDescriptor(c,u);if(d&&"value"in d){var h=i.get(u);h&&(d.value=o(h))}else if(d===void 0){var f=i.get(u),m=f==null?void 0:f.v;if(f!==void 0&&m!==Le)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return d},has(c,u){var m;if(u===fn)return!0;var d=i.get(u),h=d!==void 0&&d.v!==Le||Reflect.has(c,u);if(d!==void 0||oe!==null&&(!h||(m=wn(c,u))!=null&&m.writable)){d===void 0&&(d=He(h?Vn(c[u],a):Le),i.set(u,d));var f=o(d);if(f===Le)return!1}return h},set(c,u,d,h){var C;var f=i.get(u),m=u in c;if(s&&u==="length")for(var g=d;g<f.v;g+=1){var b=i.get(g+"");b!==void 0?y(b,Le):g in c&&(b=He(Le),i.set(g+"",b))}f===void 0?(!m||(C=wn(c,u))!=null&&C.writable)&&(f=He(void 0),y(f,Vn(d,a)),i.set(u,f)):(m=f.v!==Le,y(f,Vn(d,a)));var _=Reflect.getOwnPropertyDescriptor(c,u);if(_!=null&&_.set&&_.set.call(h,d),!m){if(s&&typeof u=="string"){var v=i.get("length"),E=Number(u);Number.isInteger(E)&&E>=v.v&&y(v,E+1)}Qr(l)}return!0},ownKeys(c){o(l);var u=Reflect.ownKeys(c).filter(f=>{var m=i.get(f);return m===void 0||m.v!==Le});for(var[d,h]of i)h.v!==Le&&!(d in c)&&u.push(d);return u},setPrototypeOf(){Xs()}})}function Qr(e,t=1){y(e,e.v+t)}function ti(e){return e!==null&&typeof e=="object"&&fn in e?e[fn]:e}function Xu(e,t){return Object.is(ti(e),ti(t))}var Zn,Wi,Xi,Gi;function nl(){if(Zn===void 0){Zn=window,Wi=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype;Xi=wn(t,"firstChild").get,Gi=wn(t,"nextSibling").get,e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function zr(e=""){return document.createTextNode(e)}function yn(e){return Xi.call(e)}function er(e){return Gi.call(e)}function bt(e,t){return yn(e)}function ut(e,t){{var n=yn(e);return n instanceof Comment&&n.data===""?er(n):n}}function U(e,t=1,n=!1){let r=e;for(;t--;)r=er(r);return r}function ol(e){e.textContent=""}function en(e){var t=Ue|Cn,n=Qt!==null&&(Qt.f&Ue)!==0?Qt:null;return oe===null||n!==null&&(n.f&Ke)!==0?t|=Ke:oe.f|=Ii,{ctx:It,deps:null,effects:null,equals:Di,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??oe}}function Oe(e){const t=en(e);return t.equals=Or,t}function Yi(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ln(t[n])}}function rl(e){for(var t=e.parent;t!==null;){if((t.f&Ue)===0)return t;t=t.parent}return null}function il(e){var t,n=oe;Tn(rl(e));try{Yi(e),t=ts(e)}finally{Tn(n)}return t}function Fi(e){var t=il(e),n=(Dn||(e.f&Ke)!==0)&&e.deps!==null?Kn:Se;rn(e,n),e.equals(t)||(e.v=t,e.wv=Ji())}function ji(e){oe===null&&Qt===null&&Rs(),Qt!==null&&(Qt.f&Ke)!==0&&oe===null&&Ts(),Xr&&Os()}function sl(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function ro(e,t,n,r=!0){var i=(e&Mo)!==0,s=oe,l={ctx:It,deps:null,nodes_start:null,nodes_end:null,f:e|Cn,first:null,fn:t,last:null,next:null,parent:i?null:s,prev:null,teardown:null,transitions:null,wv:0};if(n)try{ir(l),l.f|=Ps}catch(u){throw Ln(l),u}else t!==null&&sr(l);var a=n&&l.deps===null&&l.first===null&&l.nodes_start===null&&l.teardown===null&&(l.f&(Ii|Wo))===0;if(!a&&!i&&r&&(s!==null&&sl(l,s),Qt!==null&&(Qt.f&Ue)!==0)){var c=Qt;(c.effects??(c.effects=[])).push(l)}return l}function Br(e){const t=ro(Zo,null,!1);return rn(t,Se),t.teardown=e,t}function Go(e){ji();var t=oe!==null&&(oe.f&En)!==0&&It!==null&&!It.m;if(t){var n=It;(n.e??(n.e=[])).push({fn:e,effect:oe,reaction:Qt})}else{var r=Hn(e);return r}}function ll(e){return ji(),io(e)}function al(e){const t=ro(Mo,e,!0);return(n={})=>new Promise(r=>{n.outro?So(t,()=>{Ln(t),r(void 0)}):(Ln(t),r(void 0))})}function Hn(e){return ro(Mi,e,!1)}function S(e,t){var n=It,r={effect:null,ran:!1};n.l.r1.push(r),r.effect=io(()=>{e(),!r.ran&&(r.ran=!0,y(n.l.r2,!0),ue(t))})}function Ae(){var e=It;io(()=>{if(o(e.l.r2)){for(var t of e.l.r1){var n=t.effect;(n.f&Se)!==0&&rn(n,Kn),so(n)&&ir(n),t.ran=!1}e.l.r2.v=!1}})}function io(e){return ro(Zo,e,!0)}function Bt(e,t=[],n=en){const r=t.map(n);return nr(()=>e(...r.map(o)))}function nr(e,t=0){return ro(Zo|Dr|t,e,!0)}function Qn(e,t=!0){return ro(Zo|En,e,!0,t)}function $i(e){var t=e.teardown;if(t!==null){const n=Xr,r=Qt;ni(!0),On(null);try{t.call(null)}finally{ni(n),On(r)}}}function Hi(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var r=n.next;Ln(n,t),n=r}}function cl(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&En)===0&&Ln(t),t=n}}function Ln(e,t=!0){var n=!1;if((t||(e.f&Ds)!==0)&&e.nodes_start!==null){for(var r=e.nodes_start,i=e.nodes_end;r!==null;){var s=r===i?null:er(r);r.remove(),r=s}n=!0}Hi(e,t&&!n),Ho(e,0),rn(e,Jo);var l=e.transitions;if(l!==null)for(const c of l)c.stop();$i(e);var a=e.parent;a!==null&&a.first!==null&&Ki(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Ki(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function So(e,t){var n=[];Wr(e,n,!0),qi(n,()=>{Ln(e),t&&t()})}function qi(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function Wr(e,t,n){if((e.f&Sn)===0){if(e.f^=Sn,e.transitions!==null)for(const l of e.transitions)(l.is_global||n)&&t.push(l);for(var r=e.first;r!==null;){var i=r.next,s=(r.f&Qo)!==0||(r.f&En)!==0;Wr(r,t,s?n:!1),r=i}}}function Yo(e){Ui(e,!0)}function Ui(e,t){if((e.f&Sn)!==0){e.f^=Sn,(e.f&Se)===0&&(e.f^=Se),so(e)&&(rn(e,Cn),sr(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&Qo)!==0||(n.f&En)!==0;Ui(n,i?t:!1),n=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let Eo=[],xr=[];function Vi(){var e=Eo;Eo=[],wo(e)}function ul(){var e=xr;xr=[],wo(e)}function or(e){Eo.length===0&&queueMicrotask(Vi),Eo.push(e)}function ei(){Eo.length>0&&Vi(),xr.length>0&&ul()}let Ro=!1,Fo=!1,jo=null,zo=!1,Xr=!1;function ni(e){Xr=e}let mo=[];let Qt=null,nn=!1;function On(e){Qt=e}let oe=null;function Tn(e){oe=e}let hn=null;function dl(e){hn=e}let Ne=null,Xe=0,_n=null;function fl(e){_n=e}let Zi=1,$o=0,Dn=!1,In=null;function Ji(){return++Zi}function so(e){var h;var t=e.f;if((t&Cn)!==0)return!0;if((t&Kn)!==0){var n=e.deps,r=(t&Ke)!==0;if(n!==null){var i,s,l=(t&Xo)!==0,a=r&&oe!==null&&!Dn,c=n.length;if(l||a){var u=e,d=u.parent;for(i=0;i<c;i++)s=n[i],(l||!((h=s==null?void 0:s.reactions)!=null&&h.includes(u)))&&(s.reactions??(s.reactions=[])).push(u);l&&(u.f^=Xo),a&&d!==null&&(d.f&Ke)===0&&(u.f^=Ke)}for(i=0;i<c;i++)if(s=n[i],so(s)&&Fi(s),s.wv>e.wv)return!0}(!r||oe!==null&&!Dn)&&rn(e,Se)}return!1}function hl(e,t){for(var n=t;n!==null;){if((n.f&Wo)!==0)try{n.fn(e);return}catch{n.f^=Wo}n=n.parent}throw Ro=!1,e}function gl(e){return(e.f&Jo)===0&&(e.parent===null||(e.parent.f&Wo)===0)}function rr(e,t,n,r){if(Ro){if(n===null&&(Ro=!1),gl(t))throw e;return}n!==null&&(Ro=!0);{hl(e,t);return}}function Qi(e,t,n=!0){var r=e.reactions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];(s.f&Ue)!==0?Qi(s,t,!1):t===s&&(n?rn(s,Cn):(s.f&Se)!==0&&rn(s,Kn),sr(s))}}function ts(e){var m;var t=Ne,n=Xe,r=_n,i=Qt,s=Dn,l=hn,a=It,c=nn,u=e.f;Ne=null,Xe=0,_n=null,Dn=(u&Ke)!==0&&(nn||!zo||Qt===null),Qt=(u&(En|Mo))===0?e:null,hn=null,Jr(e.ctx),nn=!1,$o++;try{var d=(0,e.fn)(),h=e.deps;if(Ne!==null){var f;if(Ho(e,Xe),h!==null&&Xe>0)for(h.length=Xe+Ne.length,f=0;f<Ne.length;f++)h[Xe+f]=Ne[f];else e.deps=h=Ne;if(!Dn)for(f=Xe;f<h.length;f++)((m=h[f]).reactions??(m.reactions=[])).push(e)}else h!==null&&Xe<h.length&&(Ho(e,Xe),h.length=Xe);if(ko()&&_n!==null&&!nn&&h!==null&&(e.f&(Ue|Kn|Cn))===0)for(f=0;f<_n.length;f++)Qi(_n[f],e);return i!==null&&$o++,d}finally{Ne=t,Xe=n,_n=r,Qt=i,Dn=s,hn=l,Jr(a),nn=c}}function vl(e,t){let n=t.reactions;if(n!==null){var r=As.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&Ue)!==0&&(Ne===null||!Ne.includes(t))&&(rn(t,Kn),(t.f&(Ke|Xo))===0&&(t.f^=Xo),Yi(t),Ho(t,0))}function Ho(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)vl(e,n[r])}function ir(e){var t=e.f;if((t&Jo)===0){rn(e,Se);var n=oe,r=It,i=zo;oe=e,zo=!0;try{(t&Dr)!==0?cl(e):Hi(e),$i(e);var s=ts(e);e.teardown=typeof s=="function"?s:null,e.wv=Zi;var l=e.deps,a;Zr&&Fs&&e.f&Cn}catch(c){rr(c,e,n,r||e.ctx)}finally{zo=i,oe=n}}}function pl(){try{zs()}catch(e){if(jo!==null)rr(e,jo,null);else throw e}}function es(){try{for(var e=0;mo.length>0;){e++>1e3&&pl();var t=mo,n=t.length;mo=[];for(var r=0;r<n;r++){var i=t[r];(i.f&Se)===0&&(i.f^=Se);var s=_l(i);ml(s)}}}finally{Fo=!1,jo=null}}function ml(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];if((r.f&(Jo|Sn))===0)try{so(r)&&(ir(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?Ki(r):r.fn=null))}catch(i){rr(i,r,null,r.ctx)}}}function sr(e){Fo||(Fo=!0,queueMicrotask(es));for(var t=jo=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(Mo|En))!==0){if((n&Se)===0)return;t.f^=Se}}mo.push(t)}function _l(e){for(var t=[],n=e.first;n!==null;){var r=n.f,i=(r&En)!==0,s=i&&(r&Se)!==0;if(!s&&(r&Sn)===0){if((r&Mi)!==0)t.push(n);else if(i)n.f^=Se;else{var l=Qt;try{Qt=n,so(n)&&ir(n)}catch(u){rr(u,n,null,n.ctx)}finally{Qt=l}}var a=n.first;if(a!==null){n=a;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}return t}function yl(e){var t;for(ei();mo.length>0;)Fo=!0,es(),ei();return t}async function bl(){await Promise.resolve(),yl()}function o(e){var t=e.f,n=(t&Ue)!==0;if(In!==null&&In.add(e),Qt!==null&&!nn){hn!==null&&hn.includes(e)&&Gs();var r=Qt.deps;e.rv<$o&&(e.rv=$o,Ne===null&&r!==null&&r[Xe]===e?Xe++:Ne===null?Ne=[e]:(!Dn||!Ne.includes(e))&&Ne.push(e))}else if(n&&e.deps===null&&e.effects===null){var i=e,s=i.parent;s!==null&&(s.f&Ke)===0&&(i.f^=Ke)}return n&&(i=e,so(i)&&Fi(i)),e.v}function wl(e){var t=In;In=new Set;var n=In,r;try{if(ue(e),t!==null)for(r of In)t.add(r)}finally{In=t}return n}function Gu(e){var t=wl(()=>ue(e));for(var n of t)if((n.f&ki)!==0)for(const r of n.deps||[])(r.f&Ue)===0&&xo(r,r.v);else xo(n,n.v)}function ue(e){var t=nn;try{return nn=!0,e()}finally{nn=t}}const xl=-7169;function rn(e,t){e.f=e.f&xl|t}function st(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(fn in e)Sr(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&fn in n&&Sr(n)}}}function Sr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Sr(e[r],t)}catch{}const n=Pr(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Ai(n);for(let i in r){const s=r[i].get;if(s)try{s.call(e)}catch{}}}}}function Sl(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const El=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Cl(e){return El.includes(e)}const Nl={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Al(e){return e=e.toLowerCase(),Nl[e]??e}const Ml=["touchstart","touchmove"];function kl(e){return Ml.includes(e)}function Il(e,t){if(t){const n=document.body;e.autofocus=!0,or(()=>{document.activeElement===n&&e.focus()})}}let oi=!1;function Pl(){oi||(oi=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function ns(e){var t=Qt,n=oe;On(null),Tn(null);try{return e()}finally{On(t),Tn(n)}}function Dl(e,t,n,r=n){e.addEventListener(t,()=>ns(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),Pl()}const os=new Set,Er=new Set;function rs(e,t,n,r={}){function i(s){if(r.capture||go.call(t,s),!s.cancelBubble)return ns(()=>n==null?void 0:n.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?or(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function Rt(e,t,n,r,i){var s={capture:r,passive:i},l=rs(e,t,n,s);(t===document.body||t===window||t===document)&&Br(()=>{t.removeEventListener(e,l,s)})}function is(e){for(var t=0;t<e.length;t++)os.add(e[t]);for(var n of Er)n(e)}function go(e){var E;var t=this,n=t.ownerDocument,r=e.type,i=((E=e.composedPath)==null?void 0:E.call(e))||[],s=i[0]||e.target,l=0,a=e.__root;if(a){var c=i.indexOf(a);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var u=i.indexOf(t);if(u===-1)return;c<=u&&(l=c)}if(s=i[l]||e.target,s!==t){Ni(e,"currentTarget",{configurable:!0,get(){return s||n}});var d=Qt,h=oe;On(null),Tn(null);try{for(var f,m=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var b=s["__"+r];if(b!==void 0&&(!s.disabled||e.target===s))if(Ao(b)){var[_,...v]=b;_.apply(s,[e,...v])}else b.call(s,e)}catch(C){f?m.push(C):f=C}if(e.cancelBubble||g===t||g===null)break;s=g}if(f){for(let C of m)queueMicrotask(()=>{throw C});throw f}}finally{e.__root=t,delete e.currentTarget,On(d),Tn(h)}}}function ss(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function Co(e,t){var n=oe;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function zt(e,t){var n=(t&Ti)!==0,r=(t&Js)!==0,i,s=!e.startsWith("<!>");return()=>{i===void 0&&(i=ss(s?e:"<!>"+e),n||(i=yn(i)));var l=r||Wi?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=yn(l),c=l.lastChild;Co(a,c)}else Co(l,l);return l}}function Ve(e,t,n="svg"){var r=!e.startsWith("<!>"),i=(t&Ti)!==0,s=`<${n}>${r?e:"<!>"+e}</${n}>`,l;return()=>{if(!l){var a=ss(s),c=yn(a);if(i)for(l=document.createDocumentFragment();yn(c);)l.appendChild(yn(c));else l=yn(c)}var u=l.cloneNode(!0);if(i){var d=yn(u),h=u.lastChild;Co(d,h)}else Co(u,u);return u}}function kt(){var e=document.createDocumentFragment(),t=document.createComment(""),n=zr();return e.append(t,n),Co(t,n),e}function O(e,t){e!==null&&e.before(t)}function Gr(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function Ll(e,t){return Ol(e,t)}const qn=new Map;function Ol(e,{target:t,anchor:n,props:r={},events:i,context:s,intro:l=!0}){nl();var a=new Set,c=h=>{for(var f=0;f<h.length;f++){var m=h[f];if(!a.has(m)){a.add(m);var g=kl(m);t.addEventListener(m,go,{passive:g});var b=qn.get(m);b===void 0?(document.addEventListener(m,go,{passive:g}),qn.set(m,1)):qn.set(m,b+1)}}};c(Ir(os)),Er.add(c);var u=void 0,d=al(()=>{var h=n??t.appendChild(zr());return Qn(()=>{if(s){Vt({});var f=It;f.c=s}i&&(r.$$events=i),u=e(h,r)||{},s&&Zt()}),()=>{var g;for(var f of a){t.removeEventListener(f,go);var m=qn.get(f);--m===0?(document.removeEventListener(f,go),qn.delete(f)):qn.set(f,m)}Er.delete(c),h!==n&&((g=h.parentNode)==null||g.removeChild(h))}});return Tl.set(u,d),u}let Tl=new WeakMap;function Mt(e,t,n=!1){var r=e,i=null,s=null,l=Le,a=n?Qo:0,c=!1;const u=(h,f=!0)=>{c=!0,d(f,h)},d=(h,f)=>{l!==(l=h)&&(l?(i?Yo(i):f&&(i=Qn(()=>f(r))),s&&So(s,()=>{s=null})):(s?Yo(s):f&&(s=Qn(()=>f(r))),i&&So(i,()=>{i=null})))};nr(()=>{c=!1,t(u),c||d(null,null)},a)}function jn(e,t){return t}function Rl(e,t,n,r){for(var i=[],s=t.length,l=0;l<s;l++)Wr(t[l].e,i,!0);var a=s>0&&i.length===0&&n!==null;if(a){var c=n.parentNode;ol(c),c.append(n),r.clear(),kn(e,t[0].prev,t[s-1].next)}qi(i,()=>{for(var u=0;u<s;u++){var d=t[u];a||(r.delete(d.k),kn(e,d.prev,d.next)),Ln(d.e,!a)}})}function on(e,t,n,r,i,s=null){var l=e,a={flags:t,items:new Map,first:null},c=(t&Oi)!==0;if(c){var u=e;l=u.appendChild(zr())}var d=null,h=!1,f=Oe(()=>{var m=n();return Ao(m)?m:m==null?[]:Ir(m)});nr(()=>{var m=o(f),g=m.length;h&&g===0||(h=g===0,zl(m,a,l,i,t,r,n),s!==null&&(g===0?d?Yo(d):d=Qn(()=>s(l)):d!==null&&So(d,()=>{d=null})),o(f))})}function zl(e,t,n,r,i,s,l){var $,nt,j,z;var a=(i&$s)!==0,c=(i&(Tr|Rr))!==0,u=e.length,d=t.items,h=t.first,f=h,m,g=null,b,_=[],v=[],E,C,x,P;if(a)for(P=0;P<u;P+=1)E=e[P],C=s(E,P),x=d.get(C),x!==void 0&&(($=x.a)==null||$.measure(),(b??(b=new Set)).add(x));for(P=0;P<u;P+=1){if(E=e[P],C=s(E,P),x=d.get(C),x===void 0){var L=f?f.e.nodes_start:n;g=Wl(L,t,g,g===null?t.first:g.next,E,C,P,r,i,l),d.set(C,g),_=[],v=[],f=g.next;continue}if(c&&Bl(x,E,P,i),(x.e.f&Sn)!==0&&(Yo(x.e),a&&((nt=x.a)==null||nt.unfix(),(b??(b=new Set)).delete(x))),x!==f){if(m!==void 0&&m.has(x)){if(_.length<v.length){var G=v[0],B;g=G.prev;var J=_[0],H=_[_.length-1];for(B=0;B<_.length;B+=1)ri(_[B],G,n);for(B=0;B<v.length;B+=1)m.delete(v[B]);kn(t,J.prev,H.next),kn(t,g,J),kn(t,H,G),f=G,g=H,P-=1,_=[],v=[]}else m.delete(x),ri(x,f,n),kn(t,x.prev,x.next),kn(t,x,g===null?t.first:g.next),kn(t,g,x),g=x;continue}for(_=[],v=[];f!==null&&f.k!==C;)(f.e.f&Sn)===0&&(m??(m=new Set)).add(f),v.push(f),f=f.next;if(f===null)continue;x=f}_.push(x),g=x,f=x.next}if(f!==null||m!==void 0){for(var mt=m===void 0?[]:Ir(m);f!==null;)(f.e.f&Sn)===0&&mt.push(f),f=f.next;var gt=mt.length;if(gt>0){var et=(i&Oi)!==0&&u===0?n:null;if(a){for(P=0;P<gt;P+=1)(j=mt[P].a)==null||j.measure();for(P=0;P<gt;P+=1)(z=mt[P].a)==null||z.fix()}Rl(t,mt,et,d)}}a&&or(()=>{var ot;if(b!==void 0)for(x of b)(ot=x.a)==null||ot.apply()}),oe.first=t.first&&t.first.e,oe.last=g&&g.e}function Bl(e,t,n,r){(r&Tr)!==0&&xo(e.v,t),(r&Rr)!==0?xo(e.i,n):e.i=n}function Wl(e,t,n,r,i,s,l,a,c,u){var d=(c&Tr)!==0,h=(c&Hs)===0,f=d?h?tr(i):He(i):i,m=(c&Rr)===0?l:He(l),g={i:m,v:f,k:s,a:null,e:null,prev:n,next:r};try{return g.e=Qn(()=>a(e,f,m,u),el),g.e.prev=n&&n.e,g.e.next=r&&r.e,n===null?t.first=g:(n.next=g,n.e.next=g.e),r!==null&&(r.prev=g,r.e.prev=g.e),g}finally{}}function ri(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==r;){var l=er(s);i.before(s),s=l}}function kn(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Gt(e,t,n,r,i){var a;var s=(a=t.$$slots)==null?void 0:a[n],l=!1;s===!0&&(s=t[n==="default"?"children":n],l=!0),s===void 0?i!==null&&i(e):s(e,l?()=>r:r)}function Yr(e){const t={};e.children&&(t.default=!0);for(const n in e.$$slots)t[n]=!0;return t}function uo(e,t,n){var r=e,i,s;nr(()=>{i!==(i=t())&&(s&&(So(s),s=null),i&&(s=Qn(()=>n(r,i))))},Qo)}function Fn(e,t,n){Hn(()=>{var r=ue(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var i=!1,s={};io(()=>{var l=n();st(l),i&&Lr(s,l)&&(s=l,r.update(l))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function ls(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=ls(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Xl(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=ls(e))&&(r&&(r+=" "),r+=t);return r}function Gl(e){return typeof e=="object"?Xl(e):e??""}const ii=[...` 	
\r\f \v\uFEFF`];function Yl(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,l=0;(l=r.indexOf(i,l))>=0;){var a=l+s;(l===0||ii.includes(r[l-1]))&&(a===r.length||ii.includes(r[a]))?r=(l===0?"":r.substring(0,l))+r.substring(a+1):l=a}}return r===""?null:r}function me(e,t,n,r,i,s){var l=e.__className;if(l!==n){var a=Yl(n,r,s);a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a),e.__className=n}else if(s)for(var c in s){var u=!!s[c];(i==null||u!==!!i[c])&&e.classList.toggle(c,u)}return s}const fo=Symbol("class");function Fl(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function T(e,t,n,r){var i=e.__attributes??(e.__attributes={});i[t]!==(i[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[Ls]=n),n==null?e.removeAttribute(t):typeof n!="string"&&cs(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function as(e,t,n,r,i=!1,s=!1,l=!1){var a=t||{},c=e.tagName==="OPTION";for(var u in t)u in n||(n[u]=null);n.class?n.class=Gl(n.class):n[fo]&&(n.class=null);var d=cs(e),h=e.__attributes??(e.__attributes={});for(const E in n){let C=n[E];if(c&&E==="value"&&C==null){e.value=e.__value="",a[E]=C;continue}if(E==="class"){var f=e.namespaceURI==="http://www.w3.org/1999/xhtml";me(e,f,C,r,t==null?void 0:t[fo],n[fo]),a[E]=C,a[fo]=n[fo];continue}var m=a[E];if(C!==m){a[E]=C;var g=E[0]+E[1];if(g!=="$$"){if(g==="on"){const x={},P="$$"+E;let L=E.slice(2);var b=Cl(L);if(Sl(L)&&(L=L.slice(0,-7),x.capture=!0),!b&&m){if(C!=null)continue;e.removeEventListener(L,a[P],x),a[P]=null}if(C!=null)if(b)e[`__${L}`]=C,is([L]);else{let G=function(B){a[E].call(this,B)};a[P]=rs(L,e,G,x)}else b&&(e[`__${L}`]=void 0)}else if(E==="style"&&C!=null)e.style.cssText=C+"";else if(E==="autofocus")Il(e,!!C);else if(!s&&(E==="__value"||E==="value"&&C!=null))e.value=e.__value=C;else if(E==="selected"&&c)Fl(e,C);else{var _=E;i||(_=Al(_));var v=_==="defaultValue"||_==="defaultChecked";if(C==null&&!s&&!v)if(h[E]=null,_==="value"||_==="checked"){let x=e;const P=t===void 0;if(_==="value"){let L=x.defaultValue;x.removeAttribute(_),x.defaultValue=L,x.value=x.__value=P?L:null}else{let L=x.defaultChecked;x.removeAttribute(_),x.defaultChecked=L,x.checked=P?L:!1}}else e.removeAttribute(E);else v||d.includes(_)&&(s||typeof C!="string")?e[_]=C:typeof C!="function"&&T(e,_,C)}E==="style"&&"__styles"in e&&(e.__styles={})}}}return a}var si=new Map;function cs(e){var t=si.get(e.nodeName);if(t)return t;si.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=Ai(r);for(var s in n)n[s].set&&t.push(s);r=Pr(r)}return t}function F(e,t,n,r){var i=e.__styles??(e.__styles={});i[t]!==n&&(i[t]=n,n==null?e.style.removeProperty(t):e.style.setProperty(t,n,""))}function jl(e,t,n=t){var r=ko();Dl(e,"input",i=>{var s=i?e.defaultValue:e.value;if(s=hr(e)?gr(s):s,n(s),r&&s!==(s=t())){var l=e.selectionStart,a=e.selectionEnd;e.value=s??"",a!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(a,e.value.length))}}),ue(t)==null&&e.value&&n(hr(e)?gr(e.value):e.value),io(()=>{var i=t();hr(e)&&i===gr(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function hr(e){var t=e.type;return t==="number"||t==="range"}function gr(e){return e===""?null:+e}function Fr(e,t,n){var r=wn(e,t);r&&r.set&&(e[t]=n,Br(()=>{e[t]=null}))}var Pn,Jn,No,Uo,us;const Vo=class Vo{constructor(t){ao(this,Uo);ao(this,Pn,new WeakMap);ao(this,Jn);ao(this,No);fr(this,No,t)}observe(t,n){var r=pn(this,Pn).get(t)||new Set;return r.add(n),pn(this,Pn).set(t,r),Vr(this,Uo,us).call(this).observe(t,pn(this,No)),()=>{var i=pn(this,Pn).get(t);i.delete(n),i.size===0&&(pn(this,Pn).delete(t),pn(this,Jn).unobserve(t))}}};Pn=new WeakMap,Jn=new WeakMap,No=new WeakMap,Uo=new WeakSet,us=function(){return pn(this,Jn)??fr(this,Jn,new ResizeObserver(t=>{for(var n of t){Vo.entries.set(n.target,n);for(var r of pn(this,Pn).get(n.target)||[])r(n)}}))},Ur(Vo,"entries",new WeakMap);let Cr=Vo;var $l=new Cr({box:"border-box"});function li(e,t,n){var r=$l.observe(e,()=>n(e[t]));Hn(()=>(ue(()=>n(e[t])),r))}function ai(e,t){return e===t||(e==null?void 0:e[fn])===t}function to(e={},t,n,r){return Hn(()=>{var i,s;return io(()=>{i=s,s=[],ue(()=>{e!==n(...s)&&(t(e,...s),i&&ai(n(...i),e)&&t(null,...i))})}),()=>{or(()=>{s&&ai(n(...s),e)&&t(null,...s)})}}),e}function _o(e){return function(...t){var n=t[0];n.target===this&&(e==null||e.apply(this,t))}}function dn(e){return function(...t){var n=t[0];return n.stopPropagation(),e==null?void 0:e.apply(this,t)}}function Ge(e){return function(...t){var n=t[0];return n.preventDefault(),e==null?void 0:e.apply(this,t)}}function se(e=!1){const t=It,n=t.l.u;if(!n)return;let r=()=>st(t.s);if(e){let i=0,s={};const l=en(()=>{let a=!1;const c=t.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],a=!0);return a&&i++,i});r=()=>o(l)}n.b.length&&ll(()=>{ci(t,r),wo(n.b)}),Go(()=>{const i=ue(()=>n.m.map(Is));return()=>{for(const s of i)typeof s=="function"&&s()}}),n.a.length&&Go(()=>{ci(t,r),wo(n.a)})}function ci(e,t){if(e.l.s)for(const n of e.l.s)o(n);t()}function ce(e,t){var s;var n=(s=e.$$events)==null?void 0:s[t.type],r=Ao(n)?n.slice():n==null?[]:[n];for(var i of r)i.call(this,t)}function jr(e,t,n){if(e==null)return t(void 0),n&&n(void 0),xn;const r=ue(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Un=[];function Ko(e,t){return{subscribe:N(e,t).subscribe}}function N(e,t=xn){let n=null;const r=new Set;function i(a){if(Lr(e,a)&&(e=a,n)){const c=!Un.length;for(const u of r)u[1](),Un.push(u,e);if(c){for(let u=0;u<Un.length;u+=2)Un[u][0](Un[u+1]);Un.length=0}}}function s(a){i(a(e))}function l(a,c=xn){const u=[a,c];return r.add(u),r.size===1&&(n=t(i,s)||xn),a(e),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:l}}function yo(e,t,n){const r=!Array.isArray(e),i=r?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=t.length<2;return Ko(n,(l,a)=>{let c=!1;const u=[];let d=0,h=xn;const f=()=>{if(d)return;h();const g=t(r?u[0]:u,l,a);s?l(g):h=typeof g=="function"?g:xn},m=i.map((g,b)=>jr(g,_=>{u[b]=_,d&=~(1<<b),c&&f()},()=>{d|=1<<b}));return c=!0,f(),function(){wo(m),h(),c=!1}})}function R(e){let t;return jr(e,n=>t=n)(),t}let Do=!1,Nr=Symbol();function A(e,t,n){const r=n[t]??(n[t]={store:null,source:tr(void 0),unsubscribe:xn});if(r.store!==e&&!(Nr in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=xn;else{var i=!0;r.unsubscribe=jr(e,s=>{i?r.source.v=s:y(r.source,s)}),i=!1}return e&&Nr in n?R(e):o(r.source)}function bn(e,t,n){let r=n[t];return r&&r.store!==e&&(r.unsubscribe(),r.unsubscribe=xn),e}function q(e,t){return e.set(t),t}function we(){const e={};function t(){Br(()=>{for(var n in e)e[n].unsubscribe();Ni(e,Nr,{enumerable:!1,value:!0})})}return[e,t]}function bo(e,t,n){return e.set(n),t}function Hl(e,t,n=1){return e.set(t+n),t}function Kl(e,t,n=1){const r=t+n;return e.set(r),r}function ql(e){var t=Do;try{return Do=!1,[e(),Do]}finally{Do=t}}const Ul={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function ds(e,t,n){return new Proxy({props:e,exclude:t},Ul)}const Vl={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(co(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];co(i)&&(i=i());const s=wn(i,t);if(s&&s.set)return s.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(co(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=wn(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===fn||t===Pi)return!1;for(let n of e.props)if(co(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props){co(n)&&(n=n());for(const r in n)t.includes(r)||t.push(r)}return t}};function $r(...e){return new Proxy({props:e},Vl)}function p(e,t,n,r){var G;var i=(n&Ks)!==0,s=!no||(n&qs)!==0,l=(n&Vs)!==0,a=(n&Zs)!==0,c=!1,u;l?[u,c]=ql(()=>e[t]):u=e[t];var d=fn in e||Pi in e,h=l&&(((G=wn(e,t))==null?void 0:G.set)??(d&&t in e&&(B=>e[t]=B)))||void 0,f=r,m=!0,g=!1,b=()=>(g=!0,m&&(m=!1,a?f=ue(r):f=r),f);u===void 0&&r!==void 0&&(h&&s&&Bs(),u=b(),h&&h(u));var _;if(s)_=()=>{var B=e[t];return B===void 0?b():(m=!0,g=!1,B)};else{var v=(i?en:Oe)(()=>e[t]);v.f|=ki,_=()=>{var B=o(v);return B!==void 0&&(f=void 0),B===void 0?f:B}}if((n&Us)===0)return _;if(h){var E=e.$$legacy;return function(B,J){return arguments.length>0?((!s||!J||E||c)&&h(J?_():B),B):_()}}var C=!1,x=!1,P=tr(u),L=en(()=>{var B=_(),J=o(P);return C?(C=!1,x=!0,J):(x=!1,P.v=B)});return i||(L.equals=Or),function(B,J){if(In!==null&&(C=x,_(),o(P)),arguments.length>0){const H=J?o(L):s&&l?Vn(B):B;return L.equals(H)||(C=!0,y(P,H),g&&f!==void 0&&(f=H),ue(()=>o(L))),B}return o(L)}}function Ze(e){It===null&&oo(),no&&It.l!==null?Hr(It).m.push(e):Go(()=>{const t=ue(e);if(typeof t=="function")return t})}function lr(e){It===null&&oo(),Ze(()=>()=>ue(e))}function Zl(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function eo(){const e=It;return e===null&&oo(),(t,n,r)=>{var s;const i=(s=e.s.$$events)==null?void 0:s[t];if(i){const l=Ao(i)?i.slice():[i],a=Zl(t,n,r);for(const c of l)c.call(e.x,a);return!a.defaultPrevented}return!0}}function Jl(e){It===null&&oo(),It.l===null&&Li(),Hr(It).b.push(e)}function fs(e){It===null&&oo(),It.l===null&&Li(),Hr(It).a.push(e)}function Hr(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Ql="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ql);js();const ta="modulepreload",ea=function(e,t){return new URL(e,t).href},ui={},ho=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const l=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=ea(u,r),u in ui)return;ui[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let g=l.length-1;g>=0;g--){const b=l[g];if(b.href===u&&(!d||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":ta,d||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((g,b)=>{m.addEventListener("load",g),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(l){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=l,window.dispatchEvent(a),!a.defaultPrevented)throw l}return i.then(l=>{for(const a of l||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};function na(e,t){const n=e.clientX-t.clientX,r=e.clientY-t.clientY;return Math.sqrt(n*n+r*r)}function oa(){const e=()=>Math.floor(Math.random()*256),t=e(),n=e(),r=e();return`rgb(${t},${n},${r})`}const ra={"(":"round","[":"square","([":"stadium","[[":"subroutine","[(":"cylindrical","((":"circle","{":"rhombus","{{":"hexagon"},di={"-":"straight","~":"bezier"},hs={"(":")","[":"]","{":"}"},ia=/[-=~]*>(?:\s*\|(.+?)\|)?/g,sa=e=>{const t=e.split(`
`),n={parentNodes:[],nodeList:{}};for(const r of t){const{parentNodes:i,childNodes:s,edge:l}=la(r);for(const a of i){n.nodeList[a.id]||n.parentNodes.push(a);for(const c of s){if(n.nodeList[a.id]){if(n.nodeList[c.id]&&n.nodeList[c.id].children.some(({node:u})=>u.id===a.id))throw new Error("Circular reference detected");n.nodeList[a.id].children.push({node:n.nodeList[c.id]||c,...l})}else a.children.push({node:n.nodeList[c.id]||c,...l}),n.nodeList[a.id]=a;n.nodeList[c.id]?n.nodeList[c.id].parents.push({node:n.nodeList[a.id]||a}):(c.parents.push({node:n.nodeList[a.id]||a}),n.nodeList[c.id]=c),n.parentNodes=n.parentNodes.filter(u=>u.id!==c.id)}}}return n},la=e=>{const t=[],n=[],r=e.trim();let i="";const s=r.match(ia);if(s)i=s[0];else throw new Error("Invalid edge");const[l,a]=r.split(i);for(const u of l.split("&"))t.push(fi(u));for(const u of a.split("&"))n.push(fi(u));const c=aa(i);return{parentNodes:t,childNodes:n,edge:c}},fi=e=>{e=e.trim();const t=e[0],n=e.slice(1);let r="",i="";const s="Default",l={shape:""},a=[];for(let c=0;c<n.length;c++)if(ca(n[c]))a.push(n[c]);else if(hs[a[a.length-1]]===n[c]){i=ra[a.join("")];break}else r+=n[c];return l.shape=i,l.content=r,{id:t,data:l,type:s,children:[],parents:[],depth:0,nesting:0}},aa=e=>{e=e.trim();let t="";const[n,r]=e.split("|"),i=n[0];if(i in di)t=di[i];else throw new Error("Not a valid edge type");return r?{shape:t,content:r.trim(),length:Math.floor((n.trim().length-1)/2)}:{shape:t,length:Math.floor((n.trim().length-1)/2)}};function ca(e){return e in hs}function ua(){return Math.random().toString(36).substring(7)}function da(e,t){const n=Math.sign(e.x).toString(),r=Math.sign(e.y).toString(),i=Math.sign(t.x).toString(),s=Math.sign(t.y).toString();return`${n}${r}${i}${s}`}function fa(e,t){return{1001:`a ${e} ${e} 0 0 1 ${e} ${e}`,"0110":`a ${e} ${e} 0 0 0 ${e} ${e}`,"100-1":`a ${e} ${e} 0 0 0 ${e} -${e}`,"0-110":`a ${e} ${e} 0 0 1 ${e} -${e}`,"-1001":`a ${e} ${e} 0 0 0 -${e} ${e}`,"01-10":`a ${e} ${e} 0 0 1 -${e} ${e}`,"-100-1":`a ${e} ${e} 0 0 1 -${e} -${e}`,"0-1-10":`a ${e} ${e} 0 0 0 -${e} -${e}`}[t]||""}function hi(e,t){const n=t*(Math.PI/180),r=e.x*Math.cos(n)-e.y*Math.sin(n),i=e.x*Math.sin(n)+e.y*Math.cos(n);return{x:r,y:i}}const gi=(e,t,n,r)=>e+` l ${t} ${n} `+r,Te=N({x:0,y:0}),Ar=N(0),qe=N(!1),Mr=N(!1),gs=Ko({x:0,y:0},e=>{const t=s=>{e({x:s.clientX,y:s.clientY})},n=s=>{if(s.touches.length===2){const l=na(s.touches[0],s.touches[1]);Ar.set(l);const a={x:s.touches[0].clientX,y:s.touches[0].clientY};e(a)}else if(s.touches.length===1){const l=s.touches[0].clientX,a=s.touches[0].clientY;e({x:l,y:a}),qe.set(!0)}},r=s=>{n(s),window.addEventListener("touchend",i),window.addEventListener("touchmove",n)},i=()=>{qe.set(!1),Ar.set(0),window.removeEventListener("touchmove",n)};return document.addEventListener("mousemove",t),window.addEventListener("touchstart",r,!0),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("touchstart",r),window.removeEventListener("touchmove",n),window.removeEventListener("touchend",i)}});var ha=zt("<div><div></div></div>");function ga(e,t){Vt(t,!1);const[n,r]=we(),i=()=>A(P,"$groups",n),s=()=>A(gs,"$cursorPositionRaw",n),l=()=>A(o(a),"$selectedNodes",n),a=w(),c=w(),u=w(),d=w(),h=w(),f=w(),m=w(),g=w(),b=w();let _=p(t,"graph",8),v=p(t,"anchor",8),E=p(t,"adding",8,!1),C=p(t,"creating",8,!1),x=p(t,"color",8,null);const{groups:P}=_();let L,G=w();Ze(B);function B(){L=Array.from(document.querySelectorAll(".svelvet-node")).map(nt=>{const{top:j,left:z,width:ot,height:dt}=nt.getBoundingClientRect();return{id:nt.id,top:j,left:z,width:ot,height:dt}})}function J(){if(!L)return;const $=L.reduce((nt,j)=>{if(o(h)+v().left<=j.left&&o(d)+v().top<=j.top&&o(h)+v().left+Math.abs(o(u))>=j.left+j.width&&o(d)+v().top+Math.abs(o(c))>=j.top+j.height){const z=j.id,ot=_().nodes.get(z);if(!ot)return nt;nt.push(ot)}return nt},[]);E()?$.forEach(nt=>{l().add(nt)}):q(o(a),new Set($)),q(o(a),l())}S(()=>i(),()=>{bn(y(a,i().selected.nodes),"$selectedNodes",n)}),S(()=>(s(),st(v())),()=>{y(c,s().y-v().y-v().top)}),S(()=>(s(),st(v())),()=>{y(u,s().x-v().x-v().left)}),S(()=>(st(v()),o(c)),()=>{y(d,Math.min(v().y,v().y+o(c)))}),S(()=>(st(v()),o(u)),()=>{y(h,Math.min(v().x,v().x+o(u)))}),S(()=>o(d),()=>{y(f,`${o(d)}px`)}),S(()=>o(h),()=>{y(m,`${o(h)}px`)}),S(()=>o(c),()=>{y(g,`${Math.abs(o(c))}px`)}),S(()=>o(u),()=>{y(b,`${Math.abs(o(u))}px`)}),S(()=>(o(u),o(c)),()=>{(o(u)||o(c))&&J()}),Ae(),se();var H=ha();let mt;var gt=bt(H);let et;to(gt,$=>y(G,$),()=>o(G)),Bt(()=>{mt=me(H,1,"selection-border svelte-10ds4jd",null,mt,{creating:C()}),F(H,"--prop-selection-box-color",x()),F(H,"height",o(g)),F(H,"width",o(b)),F(H,"top",o(f)),F(H,"left",o(m)),et=me(gt,1,"selection-box svelte-10ds4jd",null,et,{creating:C()})}),O(e,H),Zt(),r()}const va=3,pa=.1,ma=10,_a=100,ya=50,ba="#000",wa="#fff",xa="12px",Sa=22,Ea=1.4,Ca=40,vo={north:{x:0,y:-1},south:{x:0,y:1},east:{x:1,y:0},west:{x:-1,y:0},self:{x:0,y:0}};var Na=Ve('<circle class="background-dot svelte-rryw83"></circle>'),Aa=Ve('<line class="background-line svelte-rryw83"></line><line class="background-line svelte-rryw83"></line>',1),Ma=Ve('<circle class="background-dot svelte-rryw83"></circle>'),ka=Ve('<line class="background-line svelte-rryw83"></line><line class="background-line svelte-rryw83"></line>',1),Ia=Ve('<pattern id="graph-coarse-pattern" patternUnits="userSpaceOnUse"><!></pattern>'),Pa=Ve('<rect width="100%" height="100%" fill="url(#graph-coarse-pattern)"></rect>'),Da=zt('<div id="background-wrapper" class="svelte-rryw83"><svg class="svelte-rryw83"><defs><pattern id="graph-pattern" patternUnits="userSpaceOnUse"><!></pattern><!></defs><rect width="100%" height="100%" fill="url(#graph-pattern)"></rect><!></svg></div>');function La(e,t){Vt(t,!1);const[n,r]=we(),i=()=>A(L,"$translationStore",n),s=()=>A(P,"$scaleStore",n),l=w(),a=w(),c=w(),u=w(),d=w(),h=Dt("graph");let f=p(t,"style",8,"dots"),m=p(t,"gridWidth",8,Sa),g=p(t,"dotSize",8,Ea),b=p(t,"bgColor",8,null),_=p(t,"dotColor",8,null),v=p(t,"opacityThreshold",8,3),E=p(t,"majorGrid",8,0),C=p(t,"minOpacity",8,.4);const x=h.transforms,P=x.scale,L=x.translation;let G=w(),B=w(),J=w(),H=w(),mt=w(),gt=w(1),et=w(1);S(()=>i(),()=>{y(l,i())}),S(()=>s(),()=>{y(a,s())}),S(()=>(o(a),st(m())),()=>{y(c,o(a)*m())}),S(()=>(o(a),st(g())),()=>{y(u,o(a)*g()/2)}),S(()=>o(c),()=>{y(d,o(c)/2)}),S(()=>(o(B),o(G),o(J),o(u),o(a),o(l),st(v()),st(C())),()=>{var ht,X;y(B,((ht=o(G))==null?void 0:ht.offsetWidth)||0),y(J,((X=o(G))==null?void 0:X.offsetHeight)||0),y(H,(o(B)+o(u))*(1-o(a))/2+o(l).x),y(mt,(o(J)+o(u))*(1-o(a))/2+o(l).y),y(gt,o(a)>v()?1:o(a)/v()+C()),y(et,o(a)>v()/3?1:o(a)/(v()/3)+C())}),Ae(),se();var $=Da(),nt=bt($),j=bt(nt),z=bt(j),ot=bt(z);{var dt=ht=>{var X=Na();Bt(()=>{T(X,"r",o(u)),T(X,"cx",o(d)),T(X,"cy",o(d)),F(X,"--calculated-dot-color",_())}),O(ht,X)},D=ht=>{var X=kt(),K=ut(X);{var Wt=ct=>{var Y=Aa(),wt=ut(Y);T(wt,"y1",0);var xt=U(wt);T(xt,"x1",0),Bt(()=>{T(wt,"x1",o(d)),T(wt,"x2",o(d)),T(wt,"y2",o(c)),T(wt,"stroke-width",o(u)),F(wt,"--calculated-dot-color",_()),T(xt,"y1",o(d)),T(xt,"y2",o(d)),T(xt,"x2",o(c)),T(xt,"stroke-width",o(u)),F(xt,"--calculated-dot-color",_())}),O(ct,Y)};Mt(K,ct=>{f()==="lines"&&ct(Wt)},!0)}O(ht,X)};Mt(ot,ht=>{f()==="dots"?ht(dt):ht(D,!1)})}var At=U(z);{var vt=ht=>{var X=Ia(),K=bt(X);{var Wt=Y=>{var wt=Ma();Bt(()=>{T(wt,"r",o(u)*2),T(wt,"cx",o(d)),T(wt,"cy",o(d)),F(wt,"--calculated-dot-color",_())}),O(Y,wt)},ct=Y=>{var wt=kt(),xt=ut(wt);{var _t=pt=>{var yt=ka(),ft=ut(yt);T(ft,"y1",0);var Kt=U(ft);T(Kt,"x1",0),Bt(()=>{T(ft,"x1",o(d)),T(ft,"x2",o(d)),T(ft,"y2",o(c)*E()),T(ft,"stroke-width",o(u)*1.2),F(ft,"--calculated-dot-color",_()),T(Kt,"y1",o(d)),T(Kt,"y2",o(d)),T(Kt,"x2",o(c)*E()),T(Kt,"stroke-width",o(u)*1.2),F(Kt,"--calculated-dot-color",_())}),O(pt,yt)};Mt(xt,pt=>{f()==="lines"&&pt(_t)},!0)}O(Y,wt)};Mt(K,Y=>{f()==="dots"?Y(Wt):Y(ct,!1)})}Bt(()=>{T(X,"x",o(H)),T(X,"y",o(mt)),T(X,"width",o(c)*E()),T(X,"height",o(c)*E())}),O(ht,X)};Mt(At,ht=>{E()>0&&ht(vt)})}var k=U(j),Pt=U(k);{var Yt=ht=>{var X=Pa();Bt(()=>T(X,"opacity",o(et))),O(ht,X)};Mt(Pt,ht=>{E()>0&&ht(Yt)})}to($,ht=>y(G,ht),()=>o(G)),Bt(()=>{F($,"--calculated-background-color",b()),T(z,"x",o(H)),T(z,"y",o(mt)),T(z,"width",o(c)),T(z,"height",o(c)),T(k,"opacity",o(gt))}),O(e,$),Zt(),r()}var Oa=zt('<div role="button" tabindex="0" class="bounding-box-border svelte-1e5jg43"><div class="bounding-box svelte-1e5jg43"></div></div>');function Ta(e,t){Vt(t,!1);const[n,r]=we(),i=()=>A(d(),"$position",n),s=()=>A(m,"$width",n),l=()=>A(g,"$height",n),a=()=>A(h(),"$color",n),c=w();let u=p(t,"dimensions",8),d=p(t,"position",8),h=p(t,"color",8),f=p(t,"groupName",8);const{width:m,height:g}=u(),b=eo();function _(){b("groupClick",{groupName:f()})}S(()=>st(f()),()=>{y(c,`${f()}-bounding-box`)}),Ae(),se();var v=Oa(),E=bt(v);Bt(()=>{T(v,"id",o(c)),T(v,"style",`border: solid 4px ${a()??""};`),F(v,"top",`${i().y}px`),F(v,"left",`${i().x}px`),F(v,"width",`${s()}px`),F(v,"height",`${l()}px`),F(E,"background-color",a())}),Rt("contextmenu",v,Ge(dn(function(C){ce.call(this,t,C)}))),Rt("mousedown",v,Ge(dn(_))),O(e,v),Zt(),r()}function Ra(e,t){Vt(t,!1);const[n,r]=we(),i=()=>A(l,"$groupBoxes",n),l=Dt("graph").groupBoxes;se();var a=kt(),c=ut(a);on(c,1,()=>Array.from(i()),([u,d])=>u,(u,d)=>{let h=()=>o(d)[0];Ta(u,$r(()=>o(d)[1],{get groupName(){return h()},$$events:{groupClick(m){ce.call(this,t,m)}}}))}),O(e,a),Zt(),r()}function vr(e){const t=e.style.width,n=e.style.height;e.style.width="fit-content",e.style.height="fit-content";const r=e.offsetWidth,i=e.offsetHeight;return e.style.width=t,e.style.height=n,[r,i]}function vs(e,t,n,r,i){const s={x:0,y:0},l=r.x-i.left-i.width/2,a=r.y-i.top-i.height/2,c=(l-n.x)/e,u=(a-n.y)/e;return s.x=l-c*t,s.y=a-u*t,s}function ps(e,t,n){const r=t*n,i=e-r;return Number(Math.max(pa,Math.min(va,i)).toFixed(9))}const Io=(e,t,n,r,i,s,l)=>{const{clientX:a,clientY:c}=e,u=s,d=a-n,h=c-t,f=l.x,m=l.y,g=r*(1-s)/2,b=i*(1-s)/2,_=d-f-g,v=h-m-b,E=_/u,C=v/u;return{x:E,y:C}};function za(e,t,n){const{top:r,left:i,width:s,height:l}=R(e),a=R(t.scale),c=R(t.translation);return{scaled:Io({clientX:n.x,clientY:n.y},r,i,s,l,a,c),scale:a}}function Ba(e,t,n){const{scale:r,translation:i}=n,s=R(r),l=R(i),a=t.x-e.x,c=t.y-e.y,u=l.x+a*s,d=l.y+c*s;return{x:u,y:d}}function Wa(e,t){return e.x*t.x+e.y*t.y}function Xa(e,t,n){const r=[],i=t.x-e.x,s=t.y-e.y,l=Ya(e.direction,t.direction),a=Wa(e.direction,t.direction)===0,c=Ga(e,t),u=ie(e.direction,-1,-1),d=ie(t.direction,-1,-1),h={x:Math.abs(e.direction.y),y:Math.abs(e.direction.x)},f=ie(e.direction,i-n*e.direction.x*(a?1:l?0:2),s-n*e.direction.y*(a?1:l?0:2)),m=ie(t.direction,i+n*t.direction.x*(a?1:l?0:2),s+n*t.direction.y*(a?1:l?0:2)),g=Math.sign(f.x)===-1||Math.sign(f.y)===-1,b=Math.sign(m.x)===1||Math.sign(m.y)===1,_=Math.abs(i),v=Math.abs(s),E=ie(e.direction,n,n),C=ie(d,n,n),x=ie(t.direction,n,n),P=ie(e.direction,_,v),L=ie(d,_,v),G=ie(e.direction,_/2,v/2),B=ie(d,_/2,v/2),J=ie(h,i,s),H=!c&&!b&&!g,mt=e.x+E.x,gt=e.y+E.y,et=t.x+x.x,$=t.y+x.y;if(g&&r.push(E),c&&!b&&!g)r.push(P),r.push(L);else if(l)g||r.push(ie(e.direction,n+_,n+v)),r.push(J),b||r.push(ie(d,n+_,n+v));else if(H)r.push(G),r.push(J),r.push(B);else if(g&&b)if(a){const nt=Math.abs(mt-et),j=Math.abs(gt-$);r.push(ie(t.direction,_<n*2?t.direction.x*(i+t.direction.x*n):_+n,v<n*2?t.direction.y*(s+t.direction.y*n):v+n)),r.push(ie(u,nt,j))}else{const nt=Math.abs(mt-et),j=Math.abs(gt-$);r.push(ie(h,i/2,s/2)),r.push(ie(t.direction,nt,j)),r.push(ie(h,i/2,s/2))}else if(g){const nt=Math.abs(mt-t.x),j=Math.abs(gt-t.y);r.push(ie(d,_<n*2?_-n:_/2,v<n*2?v-n:v/2)),r.push(ie(u,nt,j)),r.push(ie(d,Math.max(n,_/2),Math.max(n,v/2)))}else if(b){const nt=Math.abs(et-e.x),j=Math.abs($-e.y);r.push(ie(e.direction,Math.max(n,_/2),Math.max(n,v/2))),r.push(ie(t.direction,nt,j)),r.push(ie(e.direction,_<n*2?_-n:_/2,v<n*2?v-n:v/2))}return b&&r.push(C),r}function Ga(e,t){const{x:n,y:r}=e.direction,{x:i,y:s}=t.direction,l=t.x-e.x,a=t.y-e.y;return n*s===i*r?!1:Math.sign(a)===Math.sign(r+s)!=(Math.sign(l)===Math.sign(n+i))}function ie(e,t,n){return{x:e.x*t,y:e.y*n}}function Ya(e,t){return e.x===t.x&&e.y===t.y}function Fa(e,t){const{width:n,height:r}=e,{top:i,left:s,right:l,bottom:a}=t,c=l-s,u=a-i;if(!c||!u)return{x:null,y:null,scale:null};const d=s+c/2,h=i+u/2,f=Math.min(n/c,r/u)*.8,m=n/2,g=r/2,b=m-d,_=g-h;return{x:b*f,y:_*f,scale:f}}const Lo=(e,t,n)=>Math.min(Math.abs(e||t)/2,n);function pr(e,t){const r=e.getTotalLength()*t;return e.getPointAtLength(r)}function qo(){const e=new Map,{subscribe:t,set:n,update:r}=N(e);return{subscribe:t,set:n,update:r,add:(s,l)=>(r(a=>(a.set(l,s),a)),e),get:s=>e.get(s)||null,getAll:()=>Array.from(e.values()),delete:s=>{let l=!1;return r(a=>(a.delete(s),l=!0,a)),l},count:()=>e.size}}function ja(e){const{id:t,inputs:n,outputs:r,resizable:i,dimensions:s,editable:l,direction:a,zIndex:c,position:u,selectionColor:d,borderWidth:h,edge:f}=e,{bgColor:m,borderColor:g,rotation:b,borderRadius:_,connections:v,textColor:E,locked:C,group:x}=e,P=qo(),L=(J="self")=>{R(P).forEach(H=>{(J==="self"||R(H.direction)===J)&&H.recalculatePosition()})};return{id:typeof t=="string"&&t.slice(0,2)==="N-"?t:`N-${t}`,position:N({x:(u==null?void 0:u.x)||0,y:(u==null?void 0:u.y)||0}),dimensions:{width:N((s==null?void 0:s.width)||0),height:N((s==null?void 0:s.height)||(s==null?void 0:s.width))},group:N(x||null),locked:N(C||!1),inputs:N(n),outputs:N(r),recalculateAnchors:L,rotation:N(b||0),moving:N(!1),resizingWidth:N(!1),resizingHeight:N(!1),rotating:N(!1),editable:N(l||!1),resizable:N(i),anchors:P,zIndex:N(c||2),collapsed:N(!1),edge:f||null,borderRadius:N(_),bgColor:N(m||null),direction:N(a),label:N(e.label||""),borderColor:N(g||null),borderWidth:N(h),selectionColor:N(d||null),textColor:N(E||null),connections:N(v)}}function $a(e,t){const n=[e,t].sort();return`${n[0]}+${n[1]}`}function vi(e,t,n){var a,c,u,d,h;const{source:r,target:i}=e,l={id:r.id&&i.id?$a(r.id,i.id):"cursor",target:e.target,source:e.source,component:t,type:N((n==null?void 0:n.type)||null),color:(n==null?void 0:n.color)||N(null),width:N((n==null?void 0:n.width)||0),animated:N((n==null?void 0:n.animated)||!1),rendered:N(!1),start:(n==null?void 0:n.start)||null,end:(n==null?void 0:n.end)||null};if(n!=null&&n.disconnect&&(l.disconnect=!0),n!=null&&n.label){const f={text:N(n==null?void 0:n.label.text),color:N(((a=n==null?void 0:n.label)==null?void 0:a.color)||ba),textColor:N(((c=n==null?void 0:n.label)==null?void 0:c.textColor)||wa),fontSize:N(((u=n==null?void 0:n.label)==null?void 0:u.fontSize)||xa),dimensions:{width:N(((d=n==null?void 0:n.label.dimensions)==null?void 0:d.width)||_a),height:N(((h=n==null?void 0:n.label.dimensions)==null?void 0:h.height)||ya)},borderRadius:N((n==null?void 0:n.label.borderRadius)||ma)};l.label=f}return l}function Ha(){const e=new Map,t=new Set,{subscribe:n,set:r,update:i}=N(e),s={subscribe:n,set:r,update:i,add:(l,a)=>{if(typeof a!="string"){const c=Array.from(a),u=c[0],d=c[1];if(u.connected.update(h=>h.add(d)),d.connected.update(h=>h.add(u)),s.match(...Array.from(a)).length)return;t.forEach(h=>h(l,"connection"))}i(c=>(c.set(a,l),c))},getAll:()=>Array.from(e.values()),get:l=>e.get(l)||null,match:(...l)=>Array.from(e.keys()).filter(a=>a==="cursor"?!1:l.every(c=>c?a.has(c):!0)),fetch:(l,a)=>{const c=Array.from(e.keys()).filter(u=>u==="cursor"?!1:[l,a].every(d=>d?u.has(d):!0))[0];return e.get(c)||null},delete:l=>{if(typeof l!="string"){const c=Array.from(l),u=c[0],d=c[1];u.connected.update(h=>(h.delete(d),h)),d.connected.update(h=>(h.delete(u),h))}let a=!1;return i(c=>{const u=c.get(l);return u&&(c.delete(l),a=!0,typeof l!="string"&&t.forEach(d=>d(u,"disconnection"))),c}),a},onEdgeChange:l=>(t.add(l),()=>t.delete(l)),count:()=>e.size};return s}function Ka(e,t,n,r){return yo([e,t,n,r],([s,l,a,c])=>{const u={clientX:s.x,clientY:s.y};return Io(u,l.top,l.left,l.width,l.height,c,a)})}function qa(e,t,n,r){const i=N({top:1/0,left:1/0,right:-1/0,bottom:-1/0}),s=N({top:1/0,left:1/0,right:-1/0,bottom:-1/0});let l,a=R(t),c=R(n),u=R(r),d=a.width/c,h=a.height/c;function f(){const{x:g,y:b}=Io({clientX:a.left,clientY:a.top},a.top,a.left,a.width,a.height,c,u),_=R(s);i.set({top:Math.min(_.top,b),left:Math.min(_.left,g),right:Math.max(_.right,g+d),bottom:Math.max(_.bottom,h+b)})}function m(g=!1){let b=1/0,_=1/0,v=-1/0,E=-1/0;for(const C of e.getAll()){console.log("dentro del for, este es e node:",C);const{x,y:P}=R(C.position),L=R(C.dimensions.width),G=R(C.dimensions.height);_=Math.min(_,x),b=Math.min(b,P),v=Math.max(v,x+L),E=Math.max(E,P+G)}s.set({top:b,left:_,right:v,bottom:E}),f(),g&&(l=requestAnimationFrame(()=>m(g)))}return e.subscribe(()=>{console.log("dentro del nodes.subscribe...........Aqui no estan llegando los nodes"),m()}),Mr.subscribe(g=>{g&&m(g),g||cancelAnimationFrame(l)}),qe.subscribe(g=>{g&&m(g),g||cancelAnimationFrame(l)}),t.subscribe(()=>{a=R(t),d=a.width/c,h=a.height/c,f()}),n.subscribe(()=>{c=R(n),d=a.width/c,h=a.height/c,f()}),r.subscribe(()=>{u=R(r),f()}),{graphBounds:i,nodeBounds:s}}function Ua(e,t,n){const{width:r,height:i,top:s,left:l}=e,a={clientX:r/2,clientY:i/2};return Io(a,s,l,r,i,n,t)}function ms(e,t){const{zoom:n,editable:r,translation:i,direction:s,locked:l,edge:a,nodes:c}=t,u=N({x:(i==null?void 0:i.x)||0,y:(i==null?void 0:i.y)||0}),d=N({top:0,left:0,width:0,height:0,bottom:0,right:0}),h=N(n),f=N(!1),m=qo(),g=qa(m,d,h,u),b=yo([d,u,h],([v,E,C])=>Ua(v,E,C));return{id:e,nodes:m,edges:Ha(),transforms:{translation:u,scale:h},maxZIndex:N(2),dimensions:d,bounds:g,center:b,mounted:f,direction:s||"LR",editable:r||!1,edge:a||null,editing:N(null),cursor:Ka(gs,d,u,h),locked:N(l||!1),groups:N({selected:{parent:N(null),nodes:N(new Set)},hidden:{parent:N(null),nodes:N(new Set)}}),groupBoxes:qo(),activeGroup:N(null),initialNodePositions:N([])}}function Va(e,t,n,r,i,s,l,a,c,u,d,h){const{width:f,height:m}=i,{x:g,y:b}=r,_=R(t.position),v=N({x:g-_.x+f/2,y:b-_.y+m/2}),E=yo([t.position,v],([J,H])=>({x:J.x+H.x,y:J.y+H.y})),C=e.transforms,x=e.dimensions,P=N(c||"self"),L=()=>{const J=document.getElementById(n),H=R(P),mt=vo[H];if(!J)return;const{x:gt,y:et,width:$,height:nt}=J.getBoundingClientRect(),j=R(v),z=R(E),{scaled:ot,scale:dt}=za(x,C,{x:gt,y:et}),D=ot.x-z.x,At=ot.y-z.y;v.set({x:j.x+D+$/dt/2+mt.x*$/dt/2,y:j.y+At+nt/dt/2+mt.y*nt/dt/2})},G=yo([t.moving,t.resizingWidth,t.resizingHeight,t.rotating],([J,H,mt,gt])=>J||H||mt||gt),B=yo([t.rotation],([J])=>J);return{id:n,position:E,offset:v,direction:P,dynamic:N(u||!1),type:a,edge:l,moving:G,mounted:N(!1),recalculatePosition:L,connected:N(new Set),store:s||null,inputKey:d||null,edgeColor:h||N(null),rotation:B,node:t}}const mr=qo(),Oo={width:200,height:100};function Bo(e,t){return{x:Math.round(e/Oo.width)*Oo.width,y:Math.round(t/Oo.height)*Oo.height}}const To=10;function _s(e){const t=R(e);return Array.from(t).map(r=>R(r.position))}function pi(e,t){console.log("moveNodes called");let n;const r=R(e.groups),i=R(e.activeGroup);if(console.log("Graph Groups:",r),console.log("Active Group:",i),!i)return;const s=r[i].nodes;if(!s)return;const l=R(e.initialNodePositions),{x:a,y:c}=R(Te),u=Array.from(R(s)),d=R(e.groupBoxes);console.log("Group Boxes:",d),u.forEach(f=>f.moving.set(!0)),h();function h(){const f=R(e.cursor);let m=f.x-a,g=f.y-c;if(t){const _=Bo(m,g);m=_.x,g=_.y}const b={x:m,y:g};u.forEach((_,v)=>{const{group:E,position:C}=_,x=l[v];let P;if(i==="selected"){const L=R(E);L&&(P=d.get(L))}if(!P)Za(x,b,C);else{const L=R(_.dimensions.width),G=R(_.dimensions.height),B=bs(P,L,G);ys(x,b,C,B)}}),R(qe)?n=requestAnimationFrame(h):cancelAnimationFrame(n)}}function Za(e,t,n){n.set({x:e.x+t.x,y:e.y+t.y})}function ys(e,t,n,r){n.set({x:Math.min(Math.max(r.left,e.x+t.x),r.right),y:Math.min(Math.max(r.top,e.y+t.y),r.bottom)})}function bs(e,t,n){const{x:r,y:i}=R(e.position);return console.log("Group Box Position:",{x:r,y:i}),{left:r+To,right:r+R(e.dimensions.width)-t-To,top:i+To,bottom:i+R(e.dimensions.height)-n-To}}function mi(e=1,t,n,r=.1){const i=R(t),{width:s,height:l,top:a,left:c}=i,u=n.scale,d=R(n.translation),h=R(u),f=ps(h,e,r),m=vs(h,f,d,{x:s/2+c,y:l/2+a},i);u.set(f),n.translation.set(m)}var Ja=zt('<div class="svelvet-graph-wrapper svelte-19pa6i0" role="presentation"><!></div>');function Qa(e,t){Vt(t,!1);const[n,r]=we(),i=()=>A(f,"$translation",n),s=()=>A(h,"$scale",n),l=()=>A(m,"$cursor",n),a=w(),c=w(),u=Dt("graph"),d=u.transforms,h=d.scale,f=d.translation,m=u.cursor;let g=p(t,"isMovable",8),b=w(),_=w(!1);function v(){q(f,Ba(R(Te),l(),d)),y(b,requestAnimationFrame(v))}S(()=>i(),()=>{y(a,i())}),S(()=>(o(a),s()),()=>{y(c,`translate(${o(a).x}px, ${o(a).y}px) scale(${s()})`)}),S(()=>(st(g()),o(_),o(b)),()=>{g()&&!o(_)?(y(_,!0),y(b,requestAnimationFrame(v))):(!g()||!o(_))&&(y(_,!1),cancelAnimationFrame(o(b)))}),Ae(),se();var E=Ja(),C=bt(E);Gt(C,t,"default",{},null),Bt(()=>F(E,"transform",o(c))),Rt("contextmenu",E,_o(Ge(function(x){ce.call(this,t,x)}))),Rt("click",E,_o(Ge(function(x){ce.call(this,t,x)}))),Rt("touchstart",E,_o(Ge(function(x){ce.call(this,t,x)}))),O(e,E),Zt(),r()}var tc=zt("<!> <!>",1);function ec(e,t){Vt(t,!1);const[n,r]=we(),i=()=>A(h,"$activeGroup",n),s=()=>A(qe,"$tracking",n),l=()=>A(g,"$cursor",n),a=()=>A(f,"$groups",n);console.log("Componente GraphRenderer.svelte");const c=Dt("graph"),u=Dt("snapTo");let d=p(t,"isMovable",8);const h=c.activeGroup,f=c.groups,m=c.initialNodePositions,g=c.cursor;function b(_){q(qe,!0);const{groupName:v}=_.detail;q(h,v),q(Te,l()),q(m,_s(a()[v].nodes))}S(()=>(i(),s(),pi),()=>{i()&&s()&&pi(c,u)}),Ae(),se(),Qa(e,{get isMovable(){return d()},children:(_,v)=>{var E=tc(),C=ut(E);Gt(C,t,"default",{},null);var x=U(C,2);Ra(x,{$$events:{groupClick:b}}),O(_,E)},$$slots:{default:!0}}),Zt(),r()}const nc=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],oc=new Set(nc),_i=e=>oc.has(e);var rc=zt('<input type="text">');function ic(e,t){Vt(t,!1);const[n,r]=we(),i=()=>A(l,"$textStore",n);let s=p(t,"placeholder",8);const l=Dt("textStore");se();var a=rc();Bt(()=>T(a,"placeholder",s())),Rt("keydown",a,dn(function(c){ce.call(this,t,c)})),Rt("click",a,dn(function(c){ce.call(this,t,c)})),Rt("mousedown",a,dn(function(c){ce.call(this,t,c)})),jl(a,i,c=>q(l,c)),O(e,a),Zt(),r()}const sc=new Set(["INPUT","SELECT","BUTTON","TEXTAREA"]);var lc=zt("<div><!></div>"),ac=zt('<div role="button"><!> <div class="anchors left svelte-1iknrz0"><!></div> <div class="anchors right svelte-1iknrz0"><!></div> <div class="anchors top svelte-1iknrz0"><!></div> <div class="anchors bottom svelte-1iknrz0"><!></div></div>');function cc(e,t){Vt(t,!1);const[n,r]=we(),i=()=>A(ht(),"$groups",n),s=()=>A(Kt,"$position",n),l=()=>A(Ie,"$selectedNodes",n),a=()=>A(Re,"$hiddenNodes",n),c=()=>A(be,"$resized",n),u=()=>A(z,"$duplicate",n),d=()=>A(K(),"$centerPoint",n),h=()=>A(ve,"$widthStore",n),f=()=>A(de,"$heightStore",n),m=()=>A(Te,"$initialClickPosition",n),g=()=>A(ot,"$graphDOMElement",n),b=()=>A(Et,"$zIndex",n),_=()=>A(X(),"$maxZIndex",n),v=()=>A(Yt(),"$locked",n),E=()=>A(rt,"$nodeLock",n),C=()=>A(tt,"$editable",n),x=()=>A(te,"$group",n),P=()=>A(Me,"$rotation",n),L=()=>A(Ft,"$bgColor",n),G=()=>A(jt,"$textColor",n),B=()=>A(Ee,"$borderColor",n),J=()=>A(Q,"$selectionColor",n),H=()=>A(Jt,"$borderRadius",n),mt=()=>A(at,"$borderWidth",n),gt=w(),et=w(),$=w(),nt=w(),j=Dt("mounted"),z=Dt("duplicate"),ot=Dt("graphDOMElement"),dt=eo();let D=p(t,"node",8),At=p(t,"isDefault",8),vt=p(t,"useDefaults",8),k=p(t,"center",8),Pt=p(t,"nodeStore",8),Yt=p(t,"locked",8),ht=p(t,"groups",8),X=p(t,"maxZIndex",8),K=p(t,"centerPoint",8),Wt=p(t,"cursor",8),ct=p(t,"initialNodePositions",8),Y=p(t,"activeGroup",8),wt=p(t,"editing",8),xt=p(t,"dimensionsProvided",8,!1),_t=p(t,"title",8);const pt=N(0),yt=N(null),ft=D().id,Kt=D().position,ve=D().dimensions.width,de=D().dimensions.height,Q=D().selectionColor,tt=D().editable,rt=D().locked,Et=D().zIndex,Ft=D().bgColor,Jt=D().borderRadius,jt=D().textColor,te=D().group,Ee=D().borderColor,at=D().borderWidth,Me=D().rotation,{selected:ke,hidden:ye}=i(),Re=ye.nodes,Ie=ke.nodes,be=N(!1);Ht("node",D()),Ht("anchorsMounted",pt),Ht("resized",be),Ht("nodeConnectEvent",yt),Ze(()=>{if(k()){const Lt={x:d().x-h()/2,y:d().y-f()/2};D().position.set(Lt),qe.set(!0),qe.set(!1)}j.update(Lt=>Lt+1)}),lr(()=>{o(et)&&(l().delete(D()),q(Ie,l())),j.update(Lt=>Lt-1)});function sn(){o(et)?(D()&&l().delete(D()),q(Ie,l())):(D()&&l().add(D()),q(Ie,l()))}function $t(Lt){q(Te,R(Wt())),g().focus(),b()!==_()&&b()!==1/0&&q(Et,Kl(X(),_()));const Ot=Lt.target;if(!sc.has(Ot.tagName)&&(Lt.preventDefault(),dt("nodeClicked",{node:D(),e:Lt}),!(v()||E()))){if("touches"in Lt){if(Lt.touches&&Lt.touches.length>1)return}else Lt.button===2&&C()&&q(wt(),D());q(qe,!0),ee(Lt)}}function ee(Lt){let Ot,Pe,Ce=!1;const fe=x();fe&&(Ot=i()[fe],Pe=R(Ot.parent),Ce=Pe===D()),Ce?q(Y(),fe):q(Y(),"selected"),!Lt.shiftKey&&o(et)?q(Y(),"selected"):(!Lt.shiftKey&&!o(et)&&!Lt.shiftKey&&(l().clear(),q(Ie,l())),sn()),q(ct(),_s(i().selected.nodes))}function ln(){Pt().delete(ft)}function Je(Lt){const Ot=R(Wt()),Pe=Ot.x-m().x,Ce=Ot.y-m().y;Math.abs(Pe)+Math.abs(Ce)<4&&dt("nodeReleased",{e:Lt,node:D()}),q(yt,Lt)}function Ye(Lt){return Lt.addEventListener("mousedown",$t),Lt.addEventListener("touchstart",$t),{destroy(){Lt.removeEventListener("mousedown",$t),Lt.removeEventListener("touchstart",$t)}}}S(()=>s(),()=>{y(gt,s())}),S(()=>(l(),st(D())),()=>{y(et,l().has(D()))}),S(()=>(a(),st(D())),()=>{y($,a().has(D()))}),S(()=>(st(xt()),c()),()=>{y(nt,xt()||c())}),S(()=>(o(et),u(),st(D())),()=>{o(et)&&u()&&dt("duplicate",D())}),Ae(),se();var Qe=kt(),Nn=ut(Qe);{var Rn=Lt=>{var Ot=ac();T(Ot,"id",ft);let Pe;T(Ot,"tabindex",0);var Ce=bt(Ot);{var fe=V=>{var St=lc();F(St,"width","fit-content"),F(St,"height","fit-content");var Xt=bt(St);Gt(Xt,t,"default",{grabHandle:Ye,get selected(){return o(et)},destroy:ln},null),li(St,"clientHeight",Ut=>q(de,Ut)),li(St,"clientWidth",Ut=>q(ve,Ut)),O(V,St)},An=V=>{var St=kt(),Xt=ut(St);Gt(Xt,t,"default",{grabHandle:Ye,get selected(){return o(et)},destroy:ln},null),O(V,St)};Mt(Ce,V=>{o(nt)?V(An,!1):V(fe)})}var gn=U(Ce,2),_e=bt(gn);Gt(_e,t,"anchorWest",{},null);var ze=U(gn,2),De=bt(ze);Gt(De,t,"anchorEast",{},null);var Be=U(ze,2),M=bt(Be);Gt(M,t,"anchorNorth",{},null);var Z=U(Be,2),it=bt(Z);Gt(it,t,"anchorSouth",{},null),Hn(()=>Rt("contextmenu",Ot,Ge(dn(function(V){ce.call(this,t,V)})))),Hn(()=>Rt("mouseup",Ot,Je)),Fn(Ot,V=>Ye==null?void 0:Ye(V)),Bt(()=>{Pe=me(Ot,1,"svelvet-node svelte-1iknrz0",null,Pe,{selected:o(et),locked:v()||E()}),T(Ot,"title",_t()),F(Ot,"top",`${o(gt).y??""}px`),F(Ot,"left",`${o(gt).x??""}px`),F(Ot,"z-index",b()),F(Ot,"width",o(nt)?h()+"px":"fit-content"),F(Ot,"height",o(nt)?f()+"px":"fit-content"),F(Ot,"transform",`rotate(${P()??""}deg)`),F(Ot,"--prop-background-color",L()||(At()||vt()?null:"transparent")),F(Ot,"--prop-text-color",G()),F(Ot,"--prop-border-color",B()),F(Ot,"--prop-selection-color",J()),F(Ot,"--prop-border-radius",H()?`${H()}px`:At()||vt()?null:"0px"),F(Ot,"--prop-border-width",mt()||(At()||vt()?null:"0px")),T(gn,"id",`anchors-west-${D().id}`),T(ze,"id",`anchors-east-${D().id}`),T(Be,"id",`anchors-north-${D().id}`),T(Z,"id",`anchors-south-${D().id}`)}),O(Lt,Ot)};Mt(Nn,Lt=>{o($)||Lt(Rn)})}O(e,Qe),Zt(),r()}var uc=zt("<div></div> <div></div>",1),dc=zt("<div></div> <div></div>",1),fc=zt("<div></div>"),hc=zt("<div></div>"),gc=zt("<!> <!> <!> <!>",1);function vc(e,t){Vt(t,!1);const[n,r]=we(),i=()=>A(z,"$position",n),s=()=>A(k,"$widthStore",n),l=()=>A(vt,"$heightStore",n),a=()=>A(dt,"$resizingHeight",n),c=()=>A(Pt,"$cursor",n),u=()=>A(At,"$nodeRotation",n),d=()=>A(ot,"$resizingWidth",n),h=()=>A(D,"$rotating",n),f=()=>A(Te,"$initialClickPosition",n),m=w(),g=w(),b=w(),_=Dt("graph"),v=Dt("node"),E=Dt("resized");let C=p(t,"width",8,!1),x=p(t,"height",8,!1),P=p(t,"rotation",8,!1),L=p(t,"minHeight",12,0),G=p(t,"minWidth",12,0),B,J=C(),H=C(),mt=x(),gt=x(),et=C()&&x(),$=0,nt=0,j=w(R(v.position));const z=v.position,ot=v.resizingWidth,dt=v.resizingHeight,D=v.rotating,At=v.rotation,vt=v.dimensions.height,k=v.dimensions.width,Pt=_.cursor;let Yt=w(),ht=w(),X=w(1);Ze(()=>{try{B=document.querySelector(`#${v.id}`),B&&(Q=>(G(Q[0]),L(Q[1])))(vr(B))}catch(Q){console.error(Q)}});function K(Q,tt){const rt=Ft=>{Ft.stopPropagation(),Ft.preventDefault(),tt.left||tt.top?y(X,-1):y(X,1),Mr.set(!0),q(Te,R(Pt)),y(Yt,s()),y(ht,l()),y(j,i()),tt.both?q(ot,!0):q(ot,!1),q(ot,tt.left||tt.right||tt.both||!1),q(dt,tt.top||tt.bottom||tt.both||!1),B&&(Jt=>(G(Jt[0]),L(Jt[1])))(vr(B)),window.addEventListener("mouseup",Et)},Et=()=>{q(ot,!1),q(dt,!1),Mr.set(!1),window.removeEventListener("mouseup",Et)};return Q.addEventListener("mousedown",rt),{destroy(){Q.removeEventListener("mousedown",rt)}}}function Wt(Q){const tt=Et=>{Et.stopPropagation(),Et.preventDefault(),$=u(),q(Te,R(Pt));const Ft=f().x-o(b).x,Jt=f().y-o(b).y;nt=Math.atan2(Jt,Ft),q(D,!0),window.addEventListener("mouseup",rt)},rt=()=>{q(D,!1),window.removeEventListener("mouseup",rt)};return Q.addEventListener("mousedown",tt),{destroy(){Q.removeEventListener("mousedown",tt)}}}function ct(){const Q=R(Pt),tt=Q.x-o(b).x,rt=Q.y-o(b).y,Et=Math.atan2(rt,tt),Ft=nt-Et;return $-Y(Ft)}function Y(Q){return Q*(180/Math.PI)}Jl(()=>{B&&(Q=>(G(Q[0]),L(Q[1])))(vr(B)),s()<G()&&E.set(!1),l()<L()&&E.set(!1)}),S(()=>(h(),c()),()=>{h()&&(c(),q(At,ct()))}),S(()=>(a(),c(),st(L()),o(ht),o(X),o(j),u()),()=>{if(a()){const Q=R(Te),tt=c(),rt=Math.max(L(),o(ht)+(tt.y-Q.y)*o(X));rt>L()?(E.set(!0),q(vt,rt)):E.set(!1),o(X)===-1&&q(z,{x:o(j).x,y:o(j).y+tt.y-Q.y}),u()!==0&&v.position.update(Et=>({y:o(j).y-(rt-o(ht))/2,x:Et.x}))}}),S(()=>(d(),c(),st(G()),o(Yt),o(X),o(j),u()),()=>{if(d()){const Q=R(Te),tt=c(),rt=Math.max(G(),o(Yt)+(tt.x-Q.x)*o(X));rt>G()?(E.set(!0),q(k,rt)):E.set(!1),o(X)===-1&&q(z,{x:o(j).x+tt.x-Q.x,y:o(j).y}),u()!==0&&v.position.update(Et=>({x:o(j).x-(rt-o(Yt))/2,y:Et.y}))}}),S(()=>i(),()=>{y(m,i().x)}),S(()=>i(),()=>{y(g,i().y)}),S(()=>(o(m),s(),o(g),l()),()=>{y(b,{x:o(m)+s()/2,y:o(g)+l()/2})}),Ae(),se();var wt=gc(),xt=ut(wt);{var _t=Q=>{var tt=uc(),rt=ut(tt);let Et;Fn(rt,(jt,te)=>K==null?void 0:K(jt,te),()=>({left:J}));var Ft=U(rt,2);let Jt;Fn(Ft,(jt,te)=>K==null?void 0:K(jt,te),()=>({right:H})),Bt(()=>{Et=me(rt,1,"left svelte-1ryxg7v",null,Et,{width:C()}),Jt=me(Ft,1,"right svelte-1ryxg7v",null,Jt,{width:C()})}),O(Q,tt)};Mt(xt,Q=>{C()&&Q(_t)})}var pt=U(xt,2);{var yt=Q=>{var tt=dc(),rt=ut(tt);let Et;Fn(rt,(jt,te)=>K==null?void 0:K(jt,te),()=>({top:mt}));var Ft=U(rt,2);let Jt;Fn(Ft,(jt,te)=>K==null?void 0:K(jt,te),()=>({bottom:gt})),Bt(()=>{Et=me(rt,1,"top svelte-1ryxg7v",null,Et,{height:x()}),Jt=me(Ft,1,"bottom svelte-1ryxg7v",null,Jt,{height:x()})}),O(Q,tt)};Mt(pt,Q=>{x()&&Q(yt)})}var ft=U(pt,2);{var Kt=Q=>{var tt=fc();me(tt,1,"svelte-1ryxg7v",null,{},{both:et}),Fn(tt,(rt,Et)=>K==null?void 0:K(rt,Et),()=>({both:et})),O(Q,tt)};Mt(ft,Q=>{et&&Q(Kt)})}var ve=U(ft,2);{var de=Q=>{var tt=hc();let rt;Fn(tt,Et=>Wt==null?void 0:Wt(Et)),Bt(()=>rt=me(tt,1,"svelte-1ryxg7v",null,rt,{rotation:P()})),O(Q,tt)};Mt(ve,Q=>{P()&&Q(de)})}O(e,wt),Zt(),r()}var pc=zt("<div></div>");function mc(e,t){let n=p(t,"output",8),r=p(t,"input",8),i=p(t,"connecting",8),s=p(t,"connected",8),l=p(t,"hovering",8),a=p(t,"bgColor",8);var c=pc();let u;Bt(()=>{u=me(c,1,"svelvet-anchor svelte-19t6skv",null,u,{output:n(),input:r(),connected:s(),connecting:i(),hovering:l()}),F(c,"--prop-anchor-color",a())}),O(e,c)}let _r;function _c(e){const t=e.parentNode;if(!t)return;t.removeChild(e);const n=document.querySelector(".svelvet-graph-wrapper");n&&n.appendChild(e)}var yc=Ve('<defs><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="12.5" refY="5" orient="auto"><polygon class="arrow svelte-ppcocz" points="0 0, 15 5, 0 10"></polygon></marker><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="0" refY="5" orient="auto"><polygon class="arrow svelte-ppcocz" points="0 5, 15 0, 15 10"></polygon></marker></defs>'),bc=Ve("<path></path>"),wc=zt('<div class="default-label svelte-ppcocz"> </div>'),xc=Ve('<foreignObject width="100%" height="100%" class="svelte-ppcocz"><span class="label-wrapper svelte-ppcocz"><!></span></foreignObject>'),Sc=Ve('<svg class="edges-wrapper svelte-ppcocz"><!><path role="presentation"></path><!><!></svg>');function yi(e,t){var an,vn;const n=Yr(t);Vt(t,!1);const[r,i]=we(),s=()=>A(Lt,"$sourceDynamic",r),l=()=>A(Ot,"$targetDynamic",r),a=()=>A(o(G),"$edgeColor",r),c=()=>A(o(B),"$edgeLabel",r),u=()=>A(Nn,"$sourcePositionStore",r),d=()=>A(Rn,"$targetPositionStore",r),h=()=>A(fe,"$sourceNodePositionStore",r),f=()=>A(An,"$targetNodePositionStore",r),m=()=>A(ln,"$sourceDirection",r),g=()=>A(Ye,"$sourceRotation",r),b=()=>A(Je,"$targetDirection",r),_=()=>A(Qe,"$targetRotation",r),v=()=>A(gn,"$edgeType",r),E=()=>A(Pe,"$sourceMoving",r),C=()=>A(Ce,"$targetMoving",r),x=()=>A(o(xt),"$sourceZIndex",r),P=()=>A(o(_t),"$targetZIndex",r),L=w(),G=w(),B=w(),J=w(),H=w(),mt=w(),gt=w(),et=w(),$=w(),nt=w(),j=w(),z=w(),ot=w(),dt=w(),D=w(),At=w(),vt=w(),k=w(),Pt=w(),Yt=w(),ht=w(),X=w(),K=w(),Wt=w(),ct=w(),Y=w(),wt=w(),xt=w(),_t=w(),pt=w(),yt=w(),ft=Dt("edgeStore"),Kt=Dt("edgeStyle"),ve=Dt("endStyles"),de=Dt("raiseEdgesOnSelect"),Q=Dt("edgesAboveNode");let tt=p(t,"edge",24,()=>Dt("edge")),rt=p(t,"straight",8,Kt==="straight"),Et=p(t,"step",8,Kt==="step"),Ft=p(t,"start",24,()=>ve[0]),Jt=p(t,"end",24,()=>ve[1]),jt=p(t,"animate",8,!1),te=p(t,"label",8,""),Ee=p(t,"enableHover",8,!1),at=p(t,"edgeClick",8,null),Me=p(t,"labelPosition",8,.5),ke=p(t,"width",8,null),ye=p(t,"color",8,null),Re=p(t,"labelColor",8,null),Ie=p(t,"textColor",8,null),be=p(t,"cornerRadius",8,8),sn=p(t,"targetColor",8,null);const $t=tt().source,ee=tt().target,ln=$t.direction,Je=ee.direction,Ye=$t.rotation,Qe=ee.rotation,Nn=$t.position,Rn=ee.position,Lt=$t.dynamic,Ot=ee.dynamic,Pe=$t.moving,Ce=ee.moving,fe=(an=$t.node)==null?void 0:an.position,An=(vn=ee.node)==null?void 0:vn.position,gn=tt().type,_e=tt().id;let ze=w(),De=w(),Be=w({x:0,y:0}),M=w(!1),Z=w(!1),it=w(!1),V=w(!1),St=w(!1),Xt=w();tt().rendered.set(!0),Ze(()=>{setTimeout(()=>{o(De)&&y(Be,pr(o(De),Me()))},0),_c(o(Xt))}),fs(()=>{o(De)&&y(Be,pr(o(De),Me()))}),lr(()=>{o(Xt).remove(),cancelAnimationFrame(_r)});function Ut(){o(M)&&(o(De)&&y(Be,pr(o(De),Me())),_r=requestAnimationFrame(Ut))}function he(){if($t.id===null||ee.id===null)return;const pe=ft.match($t,ee);ft.delete(pe[0]),$t==null||$t.connected.update(re=>(ee&&re.delete(ee),re)),ee==null||ee.connected.update(re=>($t&&re.delete($t),re))}S(()=>(s(),l()),()=>{y(L,s()||l())}),S(()=>{},()=>{bn(y(G,($t==null?void 0:$t.edgeColor)||(ee==null?void 0:ee.edgeColor)||null),"$edgeColor",r)}),S(()=>st(tt()),()=>{var pe;bn(y(B,(pe=tt().label)==null?void 0:pe.text),"$edgeLabel",r)}),S(()=>(st(ye()),a()),()=>{y(J,ye()||a()||null)}),S(()=>(st(te()),c()),()=>{y(H,te()||c()||"")}),S(()=>o(H),()=>{y(mt,o(H)||n.label)}),S(()=>u(),()=>{y(gt,u())}),S(()=>d(),()=>{y(et,d())}),S(()=>h(),()=>{y($,h())}),S(()=>f(),()=>{y(nt,f())}),S(()=>o(gt),()=>{y(j,o(gt).x)}),S(()=>o(gt),()=>{y(z,o(gt).y)}),S(()=>o(et),()=>{y(ot,o(et).x)}),S(()=>o(et),()=>{y(dt,o(et).y)}),S(()=>(o(ot),o(j)),()=>{y(D,o(ot)-o(j))}),S(()=>(o(dt),o(z)),()=>{y(At,o(dt)-o(z))}),S(()=>o(D),()=>{y(vt,Math.abs(o(D)))}),S(()=>o(At),()=>{y(k,Math.abs(o(At)))}),S(()=>o(vt),()=>{y(Pt,Math.max(30,Math.min(600,o(vt)/2)))}),S(()=>o(k),()=>{y(Yt,Math.max(30,Math.min(600,o(k)/2)))}),S(()=>(o(L),o(nt),o($),o(it),o(V),R),()=>{if(o(L)&&$t.node&&ee.node){const pe=o(nt).x-o($).x,re=o(nt).y-o($).y;y(it,re>0),y(V,pe>0);let le,Fe;if(o(it)){const ne=R($t.node.dimensions.height),Tt=o($).y+ne;le=o(nt).y-Tt}else{const ne=R(ee.node.dimensions.height),Tt=o(nt).y+ne;le=o($).y-Tt}if(o(V)){const ne=R($t.node.dimensions.width),Tt=o($).x+ne;Fe=o(nt).x-Tt}else{const ne=R(ee.node.dimensions.width),Tt=o(nt).x+ne;Fe=o($).x-Tt}y(Z,le>Fe)}}),S(()=>(o(L),o(Z),o(it),o(V),s(),l()),()=>{if(o(L)){let pe,re;o(Z)?(pe=o(it)?"south":"north",re=o(it)?"north":"south"):(pe=o(V)?"east":"west",re=o(V)?"west":"east"),s()&&q(ln,pe),l()&&q(Je,re)}}),S(()=>(m(),g()),()=>{y(ht,hi(vo[m()],g()||0))}),S(()=>(b(),_()),()=>{y(X,hi(vo[b()],_()||0))}),S(()=>(o(j),o(ht),o(Pt)),()=>{y(K,o(j)+o(ht).x*o(Pt))}),S(()=>(o(z),o(ht),o(Yt)),()=>{y(Wt,o(z)+o(ht).y*o(Yt))}),S(()=>(o(ot),o(X),o(Pt)),()=>{y(ct,o(ot)+o(X).x*o(Pt))}),S(()=>(o(dt),o(X),o(Yt)),()=>{y(Y,o(dt)+o(X).y*o(Yt))}),S(()=>(o(K),o(Wt),o(ct),o(Y)),()=>{y(wt,`C ${o(K)}, ${o(Wt)} ${o(ct)}, ${o(Y)}`)}),S(()=>(st(Et()),v(),o(j),o(z),st(rt()),o(wt),o(ot),o(dt)),()=>{(!Et()||_e==="cursor"||v()==="bezier")&&y(ze,`M ${o(j)}, ${o(z)} ${rt()?"":o(wt)} ${o(ot)}, ${o(dt)}`)}),S(()=>(o(mt),o(M),E(),C()),()=>{o(mt)&&!o(M)&&(E()||C()||_e==="cursor")?(y(M,!0),Ut()):o(M)&&!E()&&!C()&&_e!=="cursor"&&(y(M,!1),cancelAnimationFrame(_r))}),S(()=>(st(Et()),v(),o(j),o(z),m(),o(ot),o(dt),b(),st(be()),gi),()=>{if(Et()&&_e!=="cursor"&&!(v()&&v()==="bezier")){const pe={x:o(j),y:o(z),direction:vo[m()]},re={x:o(ot),y:o(dt),direction:vo[b()]},le=Xa(pe,re,Ca),Fe=(ne,Tt,cn)=>{if(Tt<le.length-1){const Wn=da(ne,le[Tt+1]);return fa(cn,Wn)}return""};y(ze,le.reduce((ne,Tt,cn)=>{const Wn=Math.sign(Tt.x),I=Math.sign(Tt.y);let W=Tt.x,lt=Tt.y,Ct="";if(be()){const Nt=le[cn+1]||{x:0,y:0},qt=le[cn-1]||{x:0,y:0},ae=Lo(Tt.x,Nt.x,be()),We=Lo(Nt.y,Tt.y,be()),je=Lo(qt.x,Tt.x,be()),Mn=Lo(qt.y,Tt.y,be()),tn=Math.min(je,Mn),$e=Math.min(ae,We);Tt.x?W=Tt.x-($e+tn)*Wn:lt=Tt.y-($e+tn)*I,Ct=Fe(Tt,cn,$e)}return gi(ne,W,lt,Ct)},`M ${o(j)}, ${o(z)}`))}}),S(()=>{},()=>{bn(y(xt,$t.node.zIndex||0),"$sourceZIndex",r)}),S(()=>{},()=>{bn(y(_t,ee.node.zIndex||0),"$targetZIndex",r)}),S(()=>(x(),P()),()=>{y(pt,Math.max(x(),P()))}),S(()=>(o(pt),x(),P()),()=>{y(yt,Q==="all"?1e5:Q?o(pt):de===!0?o(pt)-1:de==="source"?x()-1:de==="target"?P()-1:0)}),Ae(),se();var ge=kt(),xe=ut(ge);{var zn=pe=>{var re=Sc(),le=bt(re);{var Fe=W=>{var lt=yc(),Ct=bt(lt);T(Ct,"id",_e+"-end-arrow");var Nt=bt(Ct),qt=U(Ct);T(qt,"id",_e+"-start-arrow");var ae=bt(qt);Bt(()=>{F(Nt,"--prop-edge-color",o(J)),F(ae,"--prop-edge-color",o(J))}),O(W,lt)};Mt(le,W=>{(Ft()||Jt())&&W(Fe)})}var ne=U(le);T(ne,"id",_e+"-target");let Tt;to(ne,W=>y(De,W),()=>o(De));var cn=U(ne);Gt(cn,t,"default",{get path(){return o(ze)},destroy:he,get hovering(){return o(St)}},W=>{var lt=bc();T(lt,"id",_e);let Ct;Bt(()=>{Ct=me(lt,0,"edge svelte-ppcocz",null,Ct,{animate:jt()}),T(lt,"d",o(ze)),T(lt,"marker-end",Jt()==="arrow"?`url(#${_e+"-end-arrow"})`:""),T(lt,"marker-start",Ft()==="arrow"?`url(#${_e+"-start-arrow"})`:""),F(lt,"--prop-edge-color",o(J)),F(lt,"--prop-stroke-width",ke()?ke()+"px":null)}),O(W,lt)});var Wn=U(cn);{var I=W=>{var lt=xc(),Ct=bt(lt),Nt=bt(Ct);Gt(Nt,t,"label",{destroy:he,get hovering(){return o(St)}},qt=>{var ae=wc(),We=bt(ae);Bt(()=>{F(ae,"--prop-label-color",Re()),F(ae,"--prop-label-text-color",Ie()),Gr(We,o(H))}),O(qt,ae)}),Bt(()=>{T(lt,"x",o(Be).x),T(lt,"y",o(Be).y)}),O(W,lt)};Mt(Wn,W=>{o(mt)&&W(I)})}to(re,W=>y(Xt,W),()=>o(Xt)),Bt(()=>{F(re,"z-index",o(yt)),Tt=me(ne,0,"target svelte-ppcocz",null,Tt,{cursor:_e==="cursor"||!at()&&!Ee()}),T(ne,"d",o(ze)),F(ne,"cursor",at()||o(St)?"pointer":"move"),F(ne,"--prop-target-edge-color",at()||o(St)?sn()||null:"transparent")}),Rt("mousedown",ne,function(...W){var lt;(lt=at())==null||lt.apply(this,W)}),Rt("mouseenter",ne,()=>y(St,!0)),Rt("mouseleave",ne,()=>y(St,!1)),O(pe,re)};Mt(xe,pe=>{$t&&ee&&pe(zn)})}O(e,ge),Fr(t,"destroy",he);var Bn=Zt({destroy:he});return i(),Bn}function bi(e,t){Vt(t,!1);let n=p(t,"edge",8);Ht("edge",n()),se();var r=kt(),i=ut(r);Gt(i,t,"default",{},null),O(e,r),Zt()}let yr;const un=N(null);function Ec(e,t,n){if(t==="self")return;const r=e.parentNode;if(!r)return;r.removeChild(e);const i=document.querySelector(`#anchors-${t}-${n.id}`);i&&(i.appendChild(e),e&&n.recalculateAnchors())}var Cc=zt('<div role="button" tabindex="0"><!></div> <!> <!>',1);function po(e,t){Vt(t,!1);const[n,r]=we(),i=()=>A(un,"$connectingFrom",n),s=()=>A(te,"$nodeLevelConnections",n),l=()=>A(et,"$anchorsMounted",n),a=()=>A(o(E),"$dynamicDirection",n),c=()=>A(B,"$mounted",n),u=()=>A(gt,"$nodeConnectEvent",n),d=()=>A(Et,"$anchors",n),h=()=>A(o(v),"$connectedAnchors",n),f=()=>A(Ft,"$resizingWidth",n),m=()=>A(Jt,"$resizingHeight",n),g=()=>A(jt,"$rotating",n),b=()=>A(vt(),"$inputsStore",n),_=w(),v=w(),E=w(),C=Dt("dynamic"),x=Dt("node"),P=Dt("edgeStore"),L=Dt("cursorAnchor"),G=Dt("direction"),B=Dt("mounted"),J=Dt("graph"),H=Dt("nodeStore"),mt=Dt("graphEdge"),gt=Dt("nodeConnectEvent"),et=Dt("anchorsMounted"),$=Dt("flowchart")||void 0;let nt=p(t,"bgColor",8,null),j=p(t,"id",8,0),z=p(t,"input",8,!1),ot=p(t,"output",8,!1),dt=p(t,"multiple",24,()=>ot()?!0:!z()),D=p(t,"dynamic",8,C||!1),At=p(t,"edge",8,null),vt=p(t,"inputsStore",8,null),k=p(t,"key",8,null),Pt=p(t,"outputStore",8,null),Yt=p(t,"connections",28,()=>[]),ht=p(t,"edgeColor",24,()=>N(null)),X=p(t,"edgeLabel",8,""),K=p(t,"locked",8,!1),Wt=p(t,"nodeConnect",8,!1),ct=p(t,"edgeStyle",8,null),Y=p(t,"endStyles",24,()=>[null,null]),wt=p(t,"invisible",8,!1),xt=p(t,"direction",24,()=>G==="TD"?z()?"north":"south":z()?"west":"east"),_t=p(t,"title",8,"");const pt=eo(),yt=eo();let ft=w(),Kt=w(!1),ve=w(!1),de=w(0),Q=z()===ot()?null:z()?"input":"output",tt=w([]);const rt=x.edge,Et=x.anchors,Ft=x.resizingWidth,Jt=x.resizingHeight,jt=x.rotating,te=x.connections,Ee=`A-${j()||Et.count()+1}/${x.id}`,at=Va(J,x,Ee,{x:0,y:0},{width:0,height:0},vt()||Pt()||null,At()||rt||mt||null,Q,xt(),D(),k(),ht());Et.add(at,at.id),Ze(()=>{var Z;o(ft)&&at.recalculatePosition();const M=Array.from(R(x.anchors)).reduce((it,[,V])=>(V.type==="output"&&it++,it),0);if((Z=s())!=null&&Z.length&&!z()){const it=[];let V=null;s().forEach((St,Xt)=>{St&&(V===null&&(V=Xt),(Xt-V)%M===0?(o(tt).push(St),it.push(null)):it.push(St))}),q(te,it)}Hl(et,l())}),fs(()=>{o(ft)&&at.recalculatePosition()}),lr(()=>{Qe(),cancelAnimationFrame(yr)});function Me(M){var he;P.delete("cursor");const Z={x:M.changedTouches[0].clientX,y:M.changedTouches[0].clientY},it=document.elementFromPoint(Z.x,Z.y);if(!it)return;const V=it.parentElement;if(!V)return;const St=V.id,Xt=St.split("/")[1],Ut=(he=H.get(Xt))==null?void 0:he.anchors.get(St);Ut&&(P.delete("cursor"),ke(at,Ut,M))}function ke(M,Z,it){const V=$t(M,Z);V&&ee(),it.shiftKey||Je(V)}function ye(M){var Z;if("changedTouches"in M&&o(_)){Me(M);return}if(!o(_)){if((Z=h())!=null&&Z.size&&!dt()){P.delete("cursor"),M.shiftKey||Je(!1);return}i()&&sn(M)}}function Re(M){var Z;if(!K()){if((Z=h())!=null&&Z.size&&!dt()&&!i())return Nn();if(!i())return Ie();sn(M)}}function Ie(){z()===ot()?(q(un,{anchor:at,store:null,key:null}),be(at,L)):z()?(q(un,{anchor:at,store:vt(),key:k()}),be(L,at)):ot()&&(q(un,{anchor:at,store:Pt(),key:null}),be(at,L))}function be(M,Z,it=!1){const V={color:ht(),label:{text:X()}};it&&(V.disconnect=!0),ct()&&(V.type=ct()),Y()[0]&&(V.start=Y()[0]),Y()[1]&&(V.start=Y()[1]);const St=vi({source:M,target:Z},(M==null?void 0:M.edge)||null,V);P.add(St,"cursor")}function sn(M){if(P.delete("cursor"),!i())return;const Z=i().anchor.type;if(i().anchor===at||Z===at.type&&Z){Je(!1);return}at.recalculatePosition();let it,V;z()===ot()?Z==="input"?(it=at,V=i().anchor):(it=i().anchor,V=at):z()?(it=i().anchor,V=at):(it=at,V=i().anchor),ke(it,V,M)}function $t(M,Z){if(M===Z||R(M.connected).has(at))return!1;const it={color:ht(),label:{text:X()}};if($){const St=M.node.id.slice(2),Xt=$.nodeList[St];if(Xt){const Ut=Z.node.id.slice(2),he=Xt.children.filter(ge=>ge.node.id===Ut)[0];if(he){const ge=he;it.label={text:ge.content}}}}ct()&&(it.type=ct()),Y()[0]&&(it.start=Y()[0]),Y()[1]&&(it.start=Y()[1]);const V=vi({source:M,target:Z},(M==null?void 0:M.edge)||null,it);return!M.node||!Z.node?!1:(P.add(V,new Set([M,Z,M.node,Z.node])),!0)}function ee(){if(z()&&i()&&i().store)b()&&k()&&vt()&&typeof vt().set=="function"&&typeof vt().update=="function"&&bo(vt(),ue(b)[k()]=i().store,ue(b));else if(ot()&&i()&&i().store){const{store:M,key:Z}=i();M&&Z&&typeof M.update=="function"&&M.update(it=>(Pt()&&(it[Z]=Pt()),it))}}function ln(){b()&&k()&&b()[k()]&&bo(vt(),ue(b)[k()]=N(R(b()[k()])),ue(b))}function Je(M){(M||!u())&&(q(un,null),q(gt,null))}function Ye(){o(Kt)&&(o(ft)&&at.recalculatePosition(),yr=requestAnimationFrame(Ye))}function Qe(){P.delete("cursor"),P.match(at).forEach(Z=>P.delete(Z)),Je(!1),ln()}function Nn(){if(R(at.connected).size>1)return;const M=Array.from(R(at.connected))[0];if(M.type!=="input")if(Qe(),M.type==="output"){be(M,L,!0),ln();const Z=M.store;q(un,{anchor:M,store:Z,key:null})}else be(M,L,!0),q(un,{anchor:M,store:null,key:null})}function Rn(){o(tt).forEach((M,Z)=>{if(!M)return;Pe(M)&&Yt(Yt()[Z]=null,!0)}),y(tt,o(tt).filter(M=>M!==null))}function Lt(){Yt().forEach(M=>{M&&Pe(M)})}function Ot(M){const Z=`N-${M[0]}`,it=H.get(Z);if(!it)return;const V=it.anchors.get(`A-${M[1]}/N-${M[0]}`);if(!V)return;const St=P.match(at,V);St&&P.delete(St[0])}const Pe=M=>{let Z,it,V=null;Array.isArray(M)?(Z=M[0].toString(),it=M[1].toString()):(Z=M.toString(),it=null);const St=`N-${Z}`,Xt=H.get(St);if(!Xt)return!1;if(it){const Ut=`A-${it}/${St}`;V=Xt.anchors.get(Ut)||null}else{const Ut=R(Xt.anchors),he=Array.from(Ut.values());if(!he.length)return!1;V=he.reduce((ge,xe)=>!ge&&xe.type==="output"?null:xe.type==="output"?ge:!ge||R(xe.connected).size<R(ge.connected).size?xe:ge,null)}if(!V)return!1;if($t(at,V),V.store&&(vt()||Pt())){if(z()&&V.type==="output")b()&&k()&&vt()&&typeof vt().set=="function"&&typeof vt().update=="function"&&bo(vt(),ue(b)[k()]=V.store,ue(b));else if(ot()&&V.type==="input"){const{store:Ut,inputKey:he}=V;Ut&&he&&typeof Ut.update=="function"&&Ut.update(ge=>(Pt()&&(ge[he]=Pt()),ge))}}return!0};S(()=>i(),()=>{var M;y(_,((M=i())==null?void 0:M.anchor)===at)}),S(()=>{},()=>{bn(y(v,at&&at.connected),"$connectedAnchors",n)}),S(()=>{},()=>{bn(y(E,at==null?void 0:at.direction),"$dynamicDirection",n)}),S(()=>(st(D()),o(ft),a()),()=>{D()&&o(ft)&&Ec(o(ft),a(),x)}),S(()=>(c(),st(Yt())),()=>{c()===H.count()&&Yt().length&&Lt()}),S(()=>(st(Wt()),u()),()=>{Wt()&&u()&&ye(u())}),S(()=>(c(),o(tt)),()=>{c()===H.count()&&o(tt).length&&Rn()}),S(()=>(o(ft),d(),h(),a()),()=>{o(ft)&&(d(),h(),a(),at.recalculatePosition())}),S(()=>(o(Kt),f(),m(),g()),()=>{!o(Kt)&&(f()||m()||g())?(y(Kt,!0),Ye()):!f()&&!m()&&o(Kt)&&!g()&&(y(Kt,!1),cancelAnimationFrame(yr))}),S(()=>(h(),o(de)),()=>{if(h()){if(h().size<o(de))yt("disconnection",{node:x,anchor:at});else if(h().size>o(de)){const M=Array.from(h()),Z=M[M.length-1];pt("connection",{node:x,anchor:at,connectedNode:Z.node,connectedAnchor:Z})}y(de,h().size)}}),Ae(),se();var Ce=Cc(),fe=ut(Ce);let An;var gn=bt(fe);Gt(gn,t,"default",{get linked(){var M;return((M=h())==null?void 0:M.size)>=1},get hovering(){return o(ve)},get connecting(){return o(_)}},M=>{var Z=kt(),it=ut(Z);{var V=St=>{const Xt=Oe(()=>{var Ut;return((Ut=h())==null?void 0:Ut.size)>=1});mc(St,{get output(){return ot()},get input(){return z()},get connecting(){return o(_)},get hovering(){return o(ve)},get bgColor(){return nt()},get connected(){return o(Xt)}})};Mt(it,St=>{wt()||St(V)})}O(M,Z)}),to(fe,M=>y(ft,M),()=>o(ft));var _e=U(fe,2);on(_e,1,()=>Array.from(h()),M=>M.id,(M,Z,it,V)=>{var St=kt();const Xt=Oe(()=>P.fetch(at,o(Z)));var Ut=ut(St);{var he=ge=>{const xe=Oe(()=>o(Xt).component);bi(ge,{get edge(){return o(Xt)},children:(zn,Bn)=>{var an=kt(),vn=ut(an);Gt(vn,t,"edge",{},pe=>{var re=kt(),le=ut(re);{var Fe=Tt=>{o(xe)(Tt,{})},ne=Tt=>{yi(Tt,{})};Mt(le,Tt=>{o(xe)?Tt(Fe):Tt(ne,!1)})}O(pe,re)}),O(zn,an)},$$slots:{default:!0}})};Mt(Ut,ge=>{o(Xt)&&o(Xt).source===at&&ge(he)})}O(M,St)});var ze=U(_e,2);{var De=M=>{var Z=kt();const it=Oe(()=>P.get("cursor"));var V=ut(Z);{var St=Xt=>{const Ut=Oe(()=>o(it).component);bi(Xt,{get edge(){return o(it)},children:(he,ge)=>{var xe=kt(),zn=ut(xe);Gt(zn,t,"edge",{},Bn=>{var an=kt(),vn=ut(an);{var pe=le=>{o(Ut)(le,{})},re=le=>{yi(le,{})};Mt(vn,le=>{o(Ut)?le(pe):le(re,!1)})}O(Bn,an)}),O(he,xe)},$$slots:{default:!0}})};Mt(V,Xt=>{o(it)&&Xt(St)})}O(M,Z)};Mt(ze,M=>{o(_)&&M(De)})}Bt(()=>{T(fe,"id",at==null?void 0:at.id),An=me(fe,1,"anchor-wrapper svelte-bazd6o",null,An,{locked:K()}),T(fe,"title",_t()||"")}),Rt("mouseenter",fe,()=>y(ve,!0)),Rt("mouseleave",fe,()=>y(ve,!1)),Rt("mousedown",fe,Ge(dn(Re))),Rt("mouseup",fe,dn(ye)),Rt("touchstart",fe,Ge(dn(Re))),Rt("touchend",fe,dn(ye)),O(e,Ce),Fr(t,"disconnect",Ot);var Be=Zt({disconnect:Ot});return r(),Be}var Nc=zt("<!> <!>",1),Ac=zt("<div></div> <div></div>",1),Mc=zt('<div><!> <p class="svelte-j5bq7k"> </p> <!></div>');function kc(e,t){Vt(t,!1);const[n,r]=we(),i=()=>A(g,"$borderRadius",n),s=()=>A(_,"$inputs",n),l=()=>A(v,"$outputs",n),a=()=>A(b,"$textColor",n),c=()=>A(m,"$label",n),u=()=>A(E,"$resizable",n),d=Dt("dynamic"),h=Dt("node");let f=p(t,"selected",8);const m=h.label,g=h.borderRadius,b=h.textColor,_=h.inputs,v=h.outputs,E=h.resizable,C=R(h.direction);let x=C==="TD",P=C==="TD",L=C!=="TD",G=C!=="TD";se();var B=Mc();let J;var H=bt(B);{var mt=z=>{var ot=Nc(),dt=ut(ot);on(dt,1,()=>({length:s()}),jn,(At,vt)=>{po(At,{$$events:{connection(k){ce.call(this,t,k)},disconnection(k){ce.call(this,t,k)}}})});var D=U(dt,2);on(D,1,()=>({length:l()}),jn,(At,vt)=>{po(At,{$$events:{connection(k){ce.call(this,t,k)},disconnection(k){ce.call(this,t,k)}}})}),O(z,ot)},gt=z=>{var ot=Ac(),dt=ut(ot);me(dt,1,"input-anchors svelte-j5bq7k",null,{},{top:x,left:L}),on(dt,5,()=>({length:s()}),jn,(At,vt)=>{po(At,{input:!0,direction:x?"north":"west",$$events:{connection(k){ce.call(this,t,k)},disconnection(k){ce.call(this,t,k)}}})});var D=U(dt,2);me(D,1,"output-anchors svelte-j5bq7k",null,{},{bottom:P,right:G}),on(D,5,()=>({length:l()}),jn,(At,vt)=>{po(At,{output:!0,direction:x?"south":"east",$$events:{connection(k){ce.call(this,t,k)},disconnection(k){ce.call(this,t,k)}}})}),O(z,ot)};Mt(H,z=>{d?z(mt):z(gt,!1)})}var et=U(H,2),$=bt(et),nt=U(et,2);{var j=z=>{vc(z,{width:!0,height:!0,rotation:!0})};Mt(nt,z=>{u()&&z(j)})}Bt(()=>{J=me(B,1,"default-node svelte-j5bq7k",null,J,{selected:f()}),F(B,"border-radius",`${i()??""}px`),F(et,"color",a()),Gr($,c())}),O(e,B),Zt(),r()}function Kr(e,t){const n=Yr(t);Vt(t,!1);const[r,i]=we(),s=()=>A(o(a),"$nodePosition",r),l=()=>A(vt,"$nodes",r),a=w(),c=Dt("graph"),u=Dt("group");let d=p(t,"position",28,()=>({x:0,y:0})),h=p(t,"drop",8,!1),f=p(t,"dimensions",8,null),m=p(t,"id",8,0),g=p(t,"bgColor",8,null),b=p(t,"borderRadius",8,null),_=p(t,"borderColor",8,null),v=p(t,"borderWidth",8,null),E=p(t,"selectionColor",8,null),C=p(t,"textColor",8,null),x=p(t,"resizable",8,!1),P=p(t,"label",8,""),L=p(t,"inputs",8,1),G=p(t,"outputs",8,1),B=p(t,"width",8,null),J=p(t,"height",8,null),H=p(t,"TD",8,!1),mt=p(t,"LR",8,!1),gt=p(t,"zIndex",8,1),et=p(t,"editable",8,!0),$=p(t,"locked",8,!1),nt=p(t,"rotation",8,0),j=p(t,"edge",8,null),z=p(t,"connections",24,()=>[]),ot=p(t,"useDefaults",8,!1),dt=p(t,"center",8,!1),D=p(t,"dynamic",8,!1),At=p(t,"title",8,"");const vt=c.nodes;Ht("dynamic",D());let k=w(),Pt=w(!0);Ze(()=>{const Y=H()?"TD":mt()?"LR":c.direction,wt=c.groupBoxes.get(u),xt=c.nodes.count()+1;y(Pt,!n.default),(n.anchorWest||n.anchorEast||n.anchorNorth||n.anchorSouth)&&y(Pt,!1);const _t=f()?f():B()||J()?{width:B()||J()||200,height:J()||B()||100}:o(Pt)?{width:200,height:100}:{width:0,height:0},pt={id:m()||xt,position:h()==="cursor"?{x:R(c.cursor).x,y:R(c.cursor).y}:wt?{x:R(wt.position).x+d().x,y:R(wt.position).y+d().y}:d(),dimensions:_t,editable:et()||c.editable,label:P(),group:u,resizable:x(),inputs:L(),outputs:G(),zIndex:gt(),direction:Y,locked:$(),rotation:nt()};z().length&&(pt.connections=z()),v()&&(pt.borderWidth=v()),b()&&(pt.borderRadius=b()),_()&&(pt.borderColor=_()),E()&&(pt.selectionColor=E()),C()&&(pt.textColor=C()),g()&&(pt.bgColor=g()),j()&&(pt.edge=j()),y(k,ja(pt)),wt&&c.groups.update(yt=>{const ft=R(yt[u].nodes);return yt[u].nodes.set(new Set([...ft,o(k)])),yt}),c.nodes.add(o(k),o(k).id)}),lr(()=>{c.nodes.delete(o(k).id)});function Yt(Y){o(k)&&o(k).connections.set([Y])}function ht(Y){if(!o(k))return;(Array.isArray(Y)?Y:[Y]).forEach(xt=>{const[_t,pt]=Array.isArray(xt)?xt:[xt,null],yt=`N-${_t}`,ft=c.nodes.get(yt);if(!ft)return;let Kt=null;const ve=pt?`A-${pt}/${yt}`:null;ve&&(Kt=ft.anchors.get(ve));const de=c.edges.match(o(k),ft,Kt);de.length&&c.edges.delete(de[de.length-1])})}Ht("connect",Yt),Ht("disconnect",ht);let X=w(d());S(()=>(o(k),st(z())),()=>{o(k)&&o(k).connections.set(z())}),S(()=>(o(k),st(g())),()=>{o(k)&&o(k).bgColor.set(g())}),S(()=>(o(k),st(P())),()=>{o(k)&&o(k).label.set(P())}),S(()=>(o(k),st(C())),()=>{o(k)&&o(k).textColor.set(C())}),S(()=>(o(k),st(_())),()=>{o(k)&&o(k).borderColor.set(_())}),S(()=>(o(k),st(E())),()=>{o(k)&&o(k).selectionColor.set(E())}),S(()=>(o(k),st(x())),()=>{o(k)&&o(k).resizable.set(x())}),S(()=>(o(k),st(et())),()=>{o(k)&&o(k).editable.set(et())}),S(()=>(o(k),st($())),()=>{o(k)&&o(k).locked.set($())}),S(()=>(o(k),st(L())),()=>{o(k)&&o(k).inputs.set(L())}),S(()=>(o(k),st(G())),()=>{o(k)&&o(k).outputs.set(G())}),S(()=>(o(k),st(gt())),()=>{o(k)&&o(k).zIndex.set(gt())}),S(()=>o(k),()=>{var Y;bn(y(a,o(k)&&((Y=o(k))==null?void 0:Y.position)),"$nodePosition",r)}),S(()=>(o(k),o(X),s(),st(d())),()=>{if(o(k)){const{x:Y,y:wt}=o(X),{x:xt,y:_t}=s(),{x:pt,y:yt}=d();(pt!==xt||yt!==_t)&&(pt!==Y||yt!==wt?(y(X,d()),o(k).position.set(d())):(y(X,s()),d(s())))}}),S(()=>(o(k),st(L())),()=>{o(k)&&o(k).inputs.set(L())}),S(()=>(o(k),st(G())),()=>{o(k)&&o(k).outputs.set(G())}),Ae(),se();var K=kt(),Wt=ut(K);{var ct=Y=>{const wt=Oe(()=>dt()||h()==="center"),xt=Oe(()=>!!f()||!!B()||!!J()||o(Pt)||!1);cc(Y,{get node(){return o(k)},get center(){return o(wt)},get isDefault(){return o(Pt)},get useDefaults(){return ot()},get dimensionsProvided(){return o(xt)},get nodeStore(){return c.nodes},get locked(){return c.locked},get groups(){return c.groups},get title(){return At()},get maxZIndex(){return c.maxZIndex},get centerPoint(){return c.center},get cursor(){return c.cursor},get activeGroup(){return c.activeGroup},get editing(){return c.editing},get initialNodePositions(){return c.initialNodePositions},$$events:{nodeClicked(_t){ce.call(this,t,_t)},nodeMount(_t){ce.call(this,t,_t)},nodeReleased(_t){ce.call(this,t,_t)},duplicate(_t){ce.call(this,t,_t)}},children:Ri,$$slots:{default:(_t,pt)=>{const yt=Oe(()=>pt.destroy),ft=Oe(()=>pt.selected),Kt=Oe(()=>pt.grabHandle);var ve=kt(),de=ut(ve);Gt(de,t,"default",{get selected(){return o(ft)},get grabHandle(){return o(Kt)},disconnect:ht,connect:Yt,get node(){return o(k)},get destroy(){return o(yt)}},Q=>{var tt=kt(),rt=ut(tt);{var Et=Ft=>{kc(Ft,{get selected(){return o(ft)},$$events:{connection(Jt){ce.call(this,t,Jt)},disconnection(Jt){ce.call(this,t,Jt)}}})};Mt(rt,Ft=>{o(Pt)&&Ft(Et)})}O(Q,tt)}),O(_t,ve)},anchorWest:(_t,pt)=>{var yt=kt(),ft=ut(yt);Gt(ft,t,"anchorWest",{},null),O(_t,yt)},anchorEast:(_t,pt)=>{var yt=kt(),ft=ut(yt);Gt(ft,t,"anchorEast",{},null),O(_t,yt)},anchorNorth:(_t,pt)=>{var yt=kt(),ft=ut(yt);Gt(ft,t,"anchorNorth",{},null),O(_t,yt)},anchorSouth:(_t,pt)=>{var yt=kt(),ft=ut(yt);Gt(ft,t,"anchorSouth",{},null),O(_t,yt)}}})};Mt(Wt,Y=>{o(k)&&l().get(o(k).id)&&Y(ct)})}O(e,K),Zt(),i()}var Ic=zt('<div class="editor svelte-1nv0yho"><span style="color:white; font-size:45px">Editor</span> <button style="position:absolute; top:10px;right:10px;">X</button> <!> <button>Delete Node</button> <button>Resize Node</button></div>');function Pc(e,t){Vt(t,!1);const n=w();let r=p(t,"editing",8);const i=Dt("graph");Ht("graph",i),Ht("textStore",r().label),Ht("colorStore",r().bgColor);let s=w({x:150,y:50});function l(u){u.preventDefault(),y(s,{x:u.clientX,y:u.clientY}),i.editing.set(r())}function a(){i.nodes.delete(r().id),i.editing.set(null)}function c(){const u=r().id,d=i.nodes.get(u);if(d){const h=d.dimensions.width,f=d.dimensions.height,m=prompt("Enter new width (for example:250):",h?h.toString():""),g=prompt("Enter new height (for example:200):",f?f.toString():"");if(m===null||g===null)return;d.dimensions.width.set(parseInt(m,10)||0),d.dimensions.height.set(parseInt(g,10)||0),d.resizingWidth.set(!0),d.resizingHeight.set(!0)}}S(()=>{},()=>{y(n,i.cursor)}),Ae(),se(),Kr(e,{zIndex:1/0,get position(){return o(s)},bgColor:"white",id:"editor",children:(u,d)=>{var h=Ic(),f=U(bt(h),2),m=U(f,2);ic(m,{placeholder:"Node Label"});var g=U(m,2),b=U(g,2);Rt("click",f,()=>i.editing.set(null)),Rt("click",g,a),Rt("click",b,c),Rt("contextmenu",h,l),O(u,h)},$$slots:{default:!0}}),Zt()}var Dc=zt("<!> <!>",1),Lc=zt('<section role="presentation" class="svelvet-wrapper svelte-13nq7cv"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></section>');function Oc(e,t){Vt(t,!1);const[n,r]=we(),i=()=>A(_t,"$groups",n),s=()=>A(wt,"$dimensionsStore",n),l=()=>A(de,"$nodeBounds",n),a=()=>A(Wt,"$graphDOMElement",n),c=()=>A(Te,"$initialClickPosition",n),u=()=>A(yt,"$selected",n),d=()=>A(ft,"$activeGroup",n),h=()=>A(un,"$connectingFrom",n),f=()=>A(Ar,"$touchDistance",n),m=()=>A(Y,"$scale",n),g=()=>A(xt,"$translation",n),b=()=>A(ve,"$editing",n),_=w();let v=p(t,"graph",8),E=p(t,"width",8),C=p(t,"height",8),x=p(t,"minimap",12,!1),P=p(t,"controls",12,!1),L=p(t,"toggle",8,!1),G=p(t,"fixedZoom",8,!1),B=p(t,"pannable",8,!0),J=p(t,"disableSelection",8,!1),H=p(t,"ZOOM_INCREMENT",8,.1),mt=p(t,"PAN_INCREMENT",8,50),gt=p(t,"PAN_TIME",8,250),et=p(t,"MAX_SCALE",8,3),$=p(t,"MIN_SCALE",8,.2),nt=p(t,"selectionColor",8),j=p(t,"backgroundExists",8),z=p(t,"fitView",8,!1),ot=p(t,"trackpadPan",8),dt=p(t,"modifier",8),D=p(t,"theme",12,"light"),At=p(t,"title",8),vt=p(t,"drawer",12,!1),k=p(t,"contrast",8,!1);console.log("Initial Graph drawer prop:",vt());let Pt;const Yt=eo(),ht={},X=N(!1),K=N(0),Wt=N(null),ct=v().cursor,Y=v().transforms.scale,wt=v().dimensions,xt=v().transforms.translation,_t=v().groups,pt=v().groupBoxes,yt=i().selected.nodes,ft=v().activeGroup,Kt=v().initialNodePositions,ve=v().editing,de=v().bounds.nodeBounds;let Q=0,tt=1,rt=w({x:0,y:0,top:0,left:0}),Et=w(!1),Ft=w(!1),Jt=w(!1),jt=w(!1),te=!1,Ee=w(!1),at,Me=w(null),ke=w(null),ye=w(null),Re=w(null),Ie=w(null);const be={id:null,position:v().cursor,offset:N({x:0,y:0}),connected:N(new Set),dynamic:N(!1),edge:null,edgeColor:N(null),direction:N("self"),inputKey:null,type:"output",moving:Ko(!1),store:null,mounted:N(!0),rotation:Ko(0),node:{zIndex:N(1/0),rotating:N(!1),position:v().cursor,dimensions:{width:N(0),height:N(0)}}};Ht("graphDOMElement",Wt),Ht("cursorAnchor",be),Ht("duplicate",X),Ht("graph",v()),Ht("transforms",v().transforms),Ht("dimensions",v().dimensions),Ht("locked",v().locked),Ht("groups",v().groups),Ht("bounds",v().bounds),Ht("edgeStore",v().edges),Ht("nodeStore",v().nodes),Ht("mounted",K),Ze(()=>{console.log("Graph component mounted with drawer1:",vt()),Qe()});async function sn(){await bl(),qe.set(!0);const{x:I,y:W,scale:lt}=Fa(at,l());I!==null&&W!==null&&lt!==null&&(v().transforms.scale.set(lt),xt.set({x:I,y:W})),qe.set(!1),y(Ee,!0)}async function $t(){y(ke,(await ho(async()=>{const{default:I}=await Promise.resolve().then(()=>tu);return{default:I}},void 0,import.meta.url)).default)}async function ee(){y(Me,(await ho(async()=>{const{default:I}=await import("./ThemeToggle-BG_zs4yA.js");return{default:I}},[],import.meta.url)).default)}async function ln(){y(ye,(await ho(async()=>{const{default:I}=await import("./Controls-CWObQk11.js");return{default:I}},__vite__mapDeps([0,1]),import.meta.url)).default)}async function Je(){y(Re,(await ho(async()=>{const{default:I}=await import("./DrawerController-De6Fl6E8.js");return{default:I}},__vite__mapDeps([2,1,3]),import.meta.url)).default)}async function Ye(){y(Ie,(await ho(async()=>{const{default:I}=await import("./ContrastTheme-BEszoGBW.js");return{default:I}},[],import.meta.url)).default)}function Qe(){if(!a())return;const I=a().getBoundingClientRect();at={top:I.top,left:I.left,bottom:I.bottom,right:I.right,width:I.width,height:I.height},v().dimensions.set(at),z()==="resize"&&sn()}function Nn(I){var lt,Ct;if(o(Ft)){const qt=`${ua()}/${v().id}`,ae=R(ct),We=ae.x-c().x,je=ae.y-c().y,Mn=Math.min(c().y,c().y+je),tn=Math.min(c().x,c().x+We),$e={width:N(Math.abs(We)),height:N(Math.abs(je))},lo=N({x:tn,y:Mn}),Xn={group:N(qt),dimensions:$e,position:lo,color:N(oa()),moving:N(!1)};pt.add(Xn,qt),Array.from(u()).forEach(Gn=>{Gn.group.set(qt)}),_t.update(Gn=>{const cr={parent:N(Xn),nodes:N(new Set([...u(),Xn]))};return Gn[qt]=cr,Gn}),q(yt,new Set),y(Ft,!1),y(Et,!1)}d()&&Array.from(R(i()[d()].nodes)).forEach(qt=>{const ae=Bo(R(qt.position).x,R(qt.position).y);qt.position.set(ae),qt.moving.set(!1)});const W=v().edges.get("cursor");W&&(v().edges.delete("cursor"),W.disconnect||Yt("edgeDrop",{cursor:R(ct),source:{node:(lt=h())==null?void 0:lt.anchor.node.id.slice(2),anchor:(Ct=h())==null?void 0:Ct.anchor.id.split("/")[0].slice(2)}})),q(ft,null),q(Te,{x:0,y:0}),q(Kt,[]),y(Et,!1),y(jt,!1),q(qe,!1),I.shiftKey||un.set(null),mn(rt,o(rt).y=0),mn(rt,o(rt).x=0)}function Rn(I){if(!B()&&!(I.shiftKey||I.metaKey)||I.button===2)return;a()&&a().focus();const{clientX:W,clientY:lt}=I;if(q(Te,R(ct)),I.shiftKey||I.metaKey){I.preventDefault(),y(Et,!0);const{top:Ct,left:Nt}=o(_);mn(rt,o(rt).y=lt-Ct),mn(rt,o(rt).x=W-Nt),mn(rt,o(rt).top=Ct),mn(rt,o(rt).left=Nt),I.shiftKey&&I.metaKey?y(Ft,!0):y(Ft,!1),I.metaKey&&!I.shiftKey?y(Jt,!0):y(Jt,!1)}else y(jt,!0),q(yt,new Set),q(yt,u())}function Lt(I){q(yt,new Set),q(yt,u()),q(Te,R(ct)),y(jt,!0),I.touches.length===2&&(Pe(),Q=f(),tt=m())}function Ot(){y(jt,!1),te=!1}function Pe(){te||(te=!0,Pt=requestAnimationFrame(Ce))}function Ce(){if(!te){cancelAnimationFrame(Pt);return}const W=f()/Q;q(Y,tt*W),Pt=requestAnimationFrame(Ce)}function fe(I){const{key:W,code:lt}=I,Ct=I.target;if(!(Ct.tagName=="INPUT"||Ct.tagName=="TEXTAREA")){if(lt==="KeyA"&&I[`${dt()}Key`]){const Nt=v().nodes.getAll().filter(qt=>!R(qt.locked));q(yt,new Set(Nt))}else if(_i(W))Be(W,I);else if(W==="=")mi(-1,v().dimensions,v().transforms,H());else if(W==="-")mi(1,v().dimensions,v().transforms,H());else if(W==="0")sn();else if(W==="Control")i().selected.nodes.set(new Set);else if(lt==="KeyD"&&I[`${dt()}Key`])X.set(!0),setTimeout(()=>{X.set(!1)},100);else if(W==="Tab"&&(I.altKey||I.ctrlKey))gn();else if(W==="l")D(D()==="light"?"dark":"light");else if(W==="d")vt(!vt());else if(W==="m")x(!x());else if(W==="c")P(!P());else if(W==="e"){const Nt=Array.from(u())[0];v().editing.set(Nt)}else return;I.preventDefault()}}function An(I){var je;I.preventDefault();const W=(je=a())==null?void 0:je.getBoundingClientRect();if(!W)return;const lt=I.clientX-W.left,Ct=I.clientY-W.top,{x:Nt,y:qt}=Bo(lt,Ct);if(console.log(`Dropped Node at Snapped Position: (${Nt}, ${qt})`),!We)return;const ae={id:`node-${Date.now()}`,rotation:N(0),position:N({x:Nt,y:qt}),moving:N(!1),label:N("New Node"),dimensions:{width:N(200),height:N(100)},inputs:N(2),outputs:N(2),anchors:N([]),group:N(null),collapsed:N(!1),resizingWidth:N(!1),resizingHeight:N(!1),rotating:N(!1),editable:N(!0),locked:N(!1),recalculateAnchors:Mn=>{},resizable:N(!0),zIndex:N(1),edge:null,direction:N("TD"),borderRadius:N(5),borderWidth:N(1),connections:N([]),bgColor:N("#007bff"),borderColor:N("#000"),selectionColor:N("#ff0000"),textColor:N("#fff")};let We=null;v().nodes.add(ae,ae.id),We=null}function gn(){const I=v().nodes.getAll(),W=I.findIndex(Ct=>u().has(Ct)),lt=W+1;u().delete(I[W]),u().add(I[lt])}function _e(I){const{key:W}=I;_i(W)?(clearInterval(ht[W]),delete ht[W]):W==="Shift"&&un.set(null)}function ze(I){if(G())return;const W=I.shiftKey?.15:1,{clientX:lt,clientY:Ct,deltaY:Nt}=I,qt=g(),ae={x:lt,y:Ct};if((ot()||I.metaKey)&&Nt%1===0){q(xt,{x:bo(xt,ue(g).x-=I.deltaX,ue(g)),y:bo(xt,ue(g).y-=I.deltaY,ue(g))});return}if(m()>=et()&&Nt<0||m()<=$()&&Nt>0)return;const We=Math.min(.009*W*Math.abs(Nt),.08),je=ps(m(),Math.sign(Nt),We),Mn=vs(m(),je,qt,ae,at);Y.set(je),xt.set(Mn)}function De(I){I.preventDefault()}function Be(I,W){const lt=W.shiftKey?2:1,Ct=I==="ArrowLeft"||I==="ArrowUp"?1:-1,Nt=I==="ArrowLeft"||I==="ArrowRight",qt=Nt?g().x:g().y,ae=qt+Ct*mt()*lt;if(!ht[I]){const We=performance.now();let je=setInterval(()=>{const Mn=performance.now()-We;if(u().size===0){const tn=qt+(ae-qt)*(Mn/gt());xt.set({x:Nt?tn:g().x,y:Nt?g().y:tn})}else{const tn={x:Nt?-Ct*2:0,y:Nt?0:-Ct*2};Array.from(u()).forEach($e=>{const lo=R($e.position);let Xn;const Gn=R($e.group),cr=R(v().groupBoxes);if(Gn&&(Xn=cr.get(Gn)),Xn){const Po=R($e.dimensions.width),ur=R($e.dimensions.height),Es=bs(Xn,Po,ur);ys(lo,tn,$e.position,Es)}else{const Po={x:lo.x+tn.x,y:lo.y+tn.y},ur=Bo(Po.x,Po.y);$e.position.set(ur)}})}},2);ht[I]=je}}S(()=>s(),()=>{y(_,s())}),S(()=>st(D()),()=>{D()&&document.documentElement.setAttribute("svelvet-theme",D())}),S(()=>(o(Ee),st(z())),()=>{!o(Ee)&&z()&&sn()}),S(()=>(st(L()),o(Me)),()=>{L()&&!o(Me)&&ee()}),S(()=>(st(x()),o(ke)),()=>{x()&&!o(ke)&&$t()}),S(()=>(st(P()),o(ye)),()=>{P()&&!o(ye)&&ln()}),S(()=>(st(vt()),o(Re)),()=>{vt()&&!o(Re)&&Je()}),S(()=>(st(k()),o(Ie)),()=>{k()&&!o(Ie)&&Ye()}),S(()=>st(vt()),()=>{console.log("Reactive Graph drawer prop:",vt())}),Ae(),se();var M=Lc();Rt("touchend",Zn,Nn),Rt("mouseup",Zn,Nn),Rt("resize",Zn,Qe),Rt("scroll",Zn,Qe),T(M,"tabindex",0);var Z=bt(M);ec(Z,{get isMovable(){return o(jt)},children:(I,W)=>{var lt=Dc(),Ct=ut(lt);{var Nt=ae=>{Pc(ae,{get editing(){return b()}})};Mt(Ct,ae=>{b()&&ae(Nt)})}var qt=U(Ct,2);Gt(qt,t,"default",{},null),O(I,lt)},$$slots:{default:!0}});var it=U(Z,2);{var V=I=>{var W=kt(),lt=ut(W);Gt(lt,t,"background",{},null),O(I,W)},St=I=>{La(I,{})};Mt(it,I=>{j()?I(V):I(St,!1)})}var Xt=U(it,2);{var Ut=I=>{var W=kt(),lt=ut(W);uo(lt,()=>o(ke),(Ct,Nt)=>{Nt(Ct,{})}),O(I,W)};Mt(Xt,I=>{x()&&I(Ut)})}var he=U(Xt,2);{var ge=I=>{var W=kt(),lt=ut(W);uo(lt,()=>o(ye),(Ct,Nt)=>{Nt(Ct,{})}),O(I,W)};Mt(he,I=>{P()&&I(ge)})}var xe=U(he,2);{var zn=I=>{var W=kt(),lt=ut(W);uo(lt,()=>o(Me),(Ct,Nt)=>{Nt(Ct,{})}),O(I,W)};Mt(xe,I=>{L()&&I(zn)})}var Bn=U(xe,2);{var an=I=>{var W=kt(),lt=ut(W);uo(lt,()=>o(Re),(Ct,Nt)=>{Nt(Ct,{})}),O(I,W)};Mt(Bn,I=>{vt()&&I(an)})}var vn=U(Bn,2);{var pe=I=>{var W=kt(),lt=ut(W);uo(lt,()=>o(Ie),(Ct,Nt)=>{Nt(Ct,{})}),O(I,W)};Mt(vn,I=>{k()&&I(pe)})}var re=U(vn,2);Gt(re,t,"minimap",{},null);var le=U(re,2);Gt(le,t,"drawer",{},null);var Fe=U(le,2);Gt(Fe,t,"controls",{},null);var ne=U(Fe,2);Gt(ne,t,"toggle",{},null);var Tt=U(ne,2);Gt(Tt,t,"contrast",{},null);var cn=U(Tt,2);{var Wn=I=>{ga(I,{get creating(){return o(Ft)},get anchor(){return o(rt)},get graph(){return v()},get adding(){return o(Jt)},get color(){return nt()}})};Mt(cn,I=>{o(Et)&&!J()&&I(Wn)})}to(M,I=>q(Wt,I),()=>a()),Bt(()=>{T(M,"id",v().id),T(M,"title",At()),F(M,"width",E()?E()+"px":"100%"),F(M,"height",C()?C()+"px":"100%"),F(M,"cursor",B()?"move":"default")}),Rt("wheel",M,Ge(ze)),Rt("mousedown",M,_o(Ge(Rn))),Rt("touchend",M,Ge(Ot)),Rt("touchstart",M,_o(Ge(Lt))),Rt("keydown",M,fe),Rt("keyup",M,_e),Rt("dragover",M,Ge(De)),Rt("drop",M,An),O(e,M),Zt(),r()}function Tc(e){e.parentNodes.forEach(s=>Rc(s));const[t,n]=zc(e);Bc(t,e),Wc(t);for(let s=0;s<10;s++){let l=!1;for(let a=0;a<=n;a++)if(t[a])for(let c=0;c<t[a].length;c++){const u=t[a][c],d=Gc(t,u,c);d&&($n(t[a],c,d),l=!0)}if(!l)break}const r=Yc(t);for(let s=0;s<10&&Fc(t,r);s++);for(let s=0;s<2;s++){let l=!1;for(let a=0;a<=n;a++)for(let c=0;c<t[a].length;c++){const u=t[a][c],d=Xc(t,u,c);d&&($n(t[a],c,d),l=!0)}if(!l)break}const i=[];for(let s=0;s<=n;s++)i.push(t[s]);return i}function Rc(e,t=0,n=0){const r=[],i=(s,l=0,a=0)=>{s.depth=Math.max(s.depth,l),s.nesting=Math.max(s.nesting,a),r.push(s);for(const c of s.children){const{node:u,length:d}=c;i(u,d+l,a+1)}};i(e,t,n);for(const s of r)if(s.children.length){s.nesting=s.children[0].node.nesting-1,s.depth=s.children[0].node.depth-s.children[0].length;for(const l of s.children)s.nesting=Math.min(s.nesting,l.node.nesting-1),s.depth=Math.min(s.depth,l.node.depth-l.length)}}function zc(e){let t=0;const n={};for(const r in e.nodeList){const{depth:i,parents:s,children:l,type:a,data:c}=e.nodeList[r];t=Math.max(t,i),n[i]||(n[i]=[]);const u={id:r,label:c.content,children:[],parents:[],layer:i,type:a.trim()};c.props&&(u.propsId=c.props.trim());for(const d of s)u.parents.push(d.node.id);for(const d of l)u.children.push(d.node.id);n[i].push(u)}return[n,t]}function Bc(e,t){for(const n in t.nodeList)for(const r of t.nodeList[n].children)if(r.node.depth-1>t.nodeList[n].depth){const i=t.nodeList[n].depth+1,s=r.node.depth-1,l=[];let a=0;for(let c=i;c<=s;c++){const u={id:`GHOST_${r.node.id}_${a}`,label:"",children:[],parents:[],layer:c,ignore:!0};l.push(u),a++}for(const c of r.node.parents)l[0].parents.push(c.node.id);l[l.length-1].children.push(r.node.id);for(let c=0;c<l.length-1;c++)l[c].children.push(`GHOST_${r.node.id}_${c+1}`);for(let c=s;c>=i;c--)l.length>0&&e[c].push(l[0]);for(const c of e[t.nodeList[n].depth])c.id===n&&(c.children.push(l[0].id),c.children=c.children.filter(u=>u!==r.node.id))}}function Wc(e){let t=0;for(const n in e)t=Math.max(e[n].length,t);for(const n in e)if(e[n].length<t){const r=Array.from({length:t-e[n].length},()=>({id:"NULL_NODE",children:[],parents:[],layer:parseInt(n),ignore:!0}));e[n]=e[n].concat(r)}}function wi(e,t,n){let r=0,i=0;for(const s of t.parents){for(let l=0;l<e[t.layer-1].length;l++)if(s===e[t.layer-1][l].id){r+=Math.abs(n-l);break}i++}for(const s of t.children){for(let l=0;l<e[t.layer+1].length;l++)if(s===e[t.layer+1][l].id){r+=Math.abs(n-l);break}i++}return isNaN(r/i)?0:r/i}function xi(e,t,n){let r=0,i=0;for(const s of t.parents){for(let l=0;l<e[t.layer-1].length;l++)if(s===e[t.layer-1][l].id){r+=Math.abs(n-l);break}i++}return isNaN(r/i)?0:r/i}function Si(e,t,n){let r=0,i=0;for(const s of t.children){for(let l=0;l<e[t.layer+1].length;l++)if(s===e[t.layer+1][l].id){r+=Math.abs(n-l);break}i++}return isNaN(r/i)?0:r/i}function Xc(e,t,n){const r=kr(e,t.layer);let i=0;t.layer===0?i=Si(e,t,n):i=xi(e,t,n);let s=i,l=n;for(let a=0;a<e[t.layer].length;a++)if(e[t.layer][a].id==="NULL_NODE"){$n(e[t.layer],n,a);const u=kr(e,t.layer);let d=0;t.layer===0?d=Si(e,t,a):d=xi(e,t,a),u<=r&&d<s&&(s=d,l=a),$n(e[t.layer],a,n)}return l===n?null:l}function Gc(e,t,n){const r={};let i=1/0,s=0;for(let l=0;l<e[t.layer].length;l++){const a=wi(e,t,l),c=wi(e,e[t.layer][l],n);r[l]=a+c}for(const l in r)r[l]<i&&(i=r[l],s=parseInt(l));return s===n?null:s}function $n(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Yc(e){const t=[];for(const n in e)for(const r of e[n])t.push(r);return t.sort((n,r)=>r.parents.length+r.children.length-(n.parents.length+n.children.length))}function kr(e,t){let n=0;for(let r=0;r<e[t].length;r++){const i=e[t][r],s=[],l=[];if(e[t-1])for(let a=r+1;a<e[t-1].length;a++)i.parents.includes(e[t-1][a].id)&&s.push(a);if(e[t+1])for(let a=r+1;a<e[t+1].length;a++)i.children.includes(e[t+1][a].id)&&l.push(a);for(let a=r+1;a<e[t].length;a++){const c=e[t][a];if(s.length)for(let u=0;u<e[t-1].length;u++)c.parents.includes(e[t-1][u].id)&&s.forEach(d=>{u<d&&n++});if(l.length)for(let u=0;u<e[t+1].length;u++)c.children.includes(e[t+1][u].id)&&l.forEach(d=>{u<d&&n++})}}return n}function Fc(e,t){let n=!1;for(const r of t){if(r.children.length+r.parents.length===0)return n;let i=0;for(let a=0;a<e[r.layer].length;a++)if(e[r.layer][a].id===r.id){i=a;break}let s=1/0,l=i;for(let a=0;a<e[r.layer].length;a++){$n(e[r.layer],i,a);const c=kr(e,r.layer);c<s&&(s=c,l=a),$n(e[r.layer],a,i)}l!==i&&($n(e[r.layer],i,l),n=!0)}return n}function jc(e,t){Vt(t,!1);let n=p(t,"mermaid",8,""),r=p(t,"mermaidConfig",24,()=>({}));const i=sa(n());Ht("flowchart",i);const s=Tc(i),l=Dt("graph"),a=100,c=100;let u;Ze(()=>{l.nodes.subscribe(m=>u=Object.fromEntries(m));let f=0;for(const m of s){let g=0,b=-1/0;for(const _ of m)_.ignore||(u[`N-${_.id}`].position.update(()=>({x:g,y:f})),u[`N-${_.id}`].dimensions.width.subscribe(v=>g+=v),u[`N-${_.id}`].dimensions.height.subscribe(v=>b=Math.max(b,v))),g+=a;f+=b+c}}),se();var d=kt(),h=ut(d);on(h,1,()=>s,jn,(f,m)=>{var g=kt(),b=ut(g);on(b,1,()=>o(m),jn,(_,v)=>{var E=kt(),C=ut(E);{var x=P=>{const L=Oe(()=>o(v).children.map(G=>[G,"1"]));Kr(P,$r({get label(){return o(v).label},get id(){return o(v).id},TD:!0},()=>r()[o(v).id],{get connections(){return o(L)}}))};Mt(C,P=>{o(v).ignore||P(x)})}O(_,E)}),O(f,g)}),O(e,d),Zt()}function $c(e){var r,i;const t=JSON.parse(e);return ms(t.id,{...t,editable:t.editable,direction:t.direction,locked:t.locked,zoom:((r=t.transforms)==null?void 0:r.scale)??1,translation:((i=t.transforms)==null?void 0:i.translation)??{x:0,y:0},edge:t.edge})}var Hc=zt("<!> <!>",1),Kc=zt('<div class="svelvet-temp svelte-lsy29y"></div>');function qc(e,t){const n=Yr(t);Vt(t,!1);const r=w(),i=w();let s=p(t,"mermaid",8,""),l=p(t,"theme",8,"light"),a=p(t,"id",8,0),c=p(t,"snapTo",8,0),u=p(t,"zoom",8,1),d=p(t,"TD",8,!1),h=p(t,"editable",8,!0),f=p(t,"locked",8,!1),m=p(t,"width",8,0),g=p(t,"height",8,0),b=p(t,"minimap",8,!1),_=p(t,"controls",8,!1),v=p(t,"toggle",8,!1),E=p(t,"drawer",8,!1),C=p(t,"contrast",8,!1),x=p(t,"fitView",8,!1),P=p(t,"selectionColor",8,"lightblue"),L=p(t,"edgeStyle",8,"bezier"),G=p(t,"endStyles",24,()=>[null,null]),B=p(t,"edge",8,null),J=p(t,"disableSelection",8,!1),H=p(t,"mermaidConfig",24,()=>({})),mt=p(t,"translation",24,()=>({x:0,y:0})),gt=p(t,"trackpadPan",8,!1),et=p(t,"modifier",8,"meta"),$=p(t,"raiseEdgesOnSelect",8,!1),nt=p(t,"edgesAboveNode",8,!1),j=p(t,"title",8,""),z=p(t,"fixedZoom",8,!1),ot=p(t,"pannable",8,!0);const dt=eo();let D=w(null),At=d()?"TD":"LR";Ht("snapTo",c()),Ht("edgeStyle",L()),Ht("endStyles",G()),Ht("graphEdge",B()),Ht("raiseEdgesOnSelect",$()),Ht("edgesAboveNode",nt()),Ht("graph",o(D)),Ze(()=>{console.log("Graph component mounted with drawer:",E());const X=localStorage.getItem("state");if(console.log("stateObject during onMount:",X),X)y(D,$c(X)),console.log("This is the graph set using reloadStore",o(D)),mr.add(o(D),o(D).id),console.log("graphStore updated",o(D));else{let K=`G-${a()||mr.count()+1}`;y(D,ms(K,{zoom:u(),direction:At,editable:h(),locked:f(),translation:mt()})),mr.add(o(D),K)}});function vt(X,K){if(!o(D))return;const Wt=`N-${X[0]}`,ct=o(D).nodes.get(Wt);if(!ct)return;const Y=ct.anchors.get(`A-${X[1]}/N-${X[0]}`);if(!Y)return;const wt=`N-${K[0]}`,xt=o(D).nodes.get(wt);if(!xt)return;const _t=xt.anchors.get(`A-${K[1]}/N-${K[0]}`);if(!_t)return;const pt=o(D).edges.match(Y,_t);pt&&o(D).edges.delete(pt[0])}S(()=>{},()=>{y(r,n.background)}),S(()=>o(D),()=>{y(i,o(D)&&o(D).edges)}),S(()=>(o(D),st(u())),()=>{o(D)&&o(D).transforms.scale.set(u())}),S(()=>o(i),()=>{o(i)&&o(i).onEdgeChange((X,K)=>{dt(K,{sourceAnchor:X.source,targetAnchor:X.target,sourceNode:X.source.node,targetNode:X.target.node})})}),Ae(),se();var k=kt(),Pt=ut(k);{var Yt=X=>{Oc(X,{get width(){return m()},get height(){return g()},get toggle(){return v()},get backgroundExists(){return o(r)},get minimap(){return b()},get graph(){return o(D)},get fitView(){return x()},get fixedZoom(){return z()},get pannable(){return ot()},get theme(){return l()},get drawer(){return E()},get controls(){return _()},get selectionColor(){return P()},get disableSelection(){return J()},get trackpadPan(){return gt()},get modifier(){return et()},get title(){return j()},get contrast(){return C()},$$events:{edgeDrop(K){ce.call(this,t,K)}},children:(K,Wt)=>{var ct=Hc(),Y=ut(ct);{var wt=_t=>{jc(_t,{get mermaid(){return s()},get mermaidConfig(){return H()}})};Mt(Y,_t=>{s().length&&_t(wt)})}var xt=U(Y,2);Gt(xt,t,"default",{},null),O(K,ct)},$$slots:{default:!0,minimap:(K,Wt)=>{var ct=kt(),Y=ut(ct);Gt(Y,t,"minimap",{},null),O(K,ct)},controls:(K,Wt)=>{var ct=kt(),Y=ut(ct);Gt(Y,t,"controls",{},null),O(K,ct)},background:(K,Wt)=>{var ct=kt(),Y=ut(ct);Gt(Y,t,"background",{},null),O(K,ct)},toggle:(K,Wt)=>{var ct=kt(),Y=ut(ct);Gt(Y,t,"toggle",{},null),O(K,ct)},drawer:(K,Wt)=>{var ct=kt(),Y=ut(ct);Gt(Y,t,"drawer",{},null),O(K,ct)},contrast:(K,Wt)=>{var ct=kt(),Y=ut(ct);Gt(Y,t,"contrast",{},null),O(K,ct)}}})},ht=X=>{var K=Kc();Bt(()=>{F(K,"width",m()?m()+"px":"100%"),F(K,"height",g()?g()+"px":"100%")}),O(X,K)};Mt(Pt,X=>{o(D)?X(Yt):X(ht,!1)})}return O(e,k),Fr(t,"disconnect",vt),Zt({disconnect:vt})}var Uc=zt("<button></button>");function Vc(e,t){Vt(t,!1);const[n,r]=we(),i=()=>A(L,"$position",n),s=()=>A(H,"$rotation",n),l=()=>A(o(m),"$zIndex",n),a=()=>A(J,"$borderRadius",n),c=()=>A(B,"$bgColor",n),u=()=>A(mt,"$width",n),d=()=>A(gt,"$height",n),h=w(),f=w(),m=w(),g=w();let b=p(t,"node",8),_=p(t,"hidden",8,!1),v=p(t,"toggleHidden",8),E=p(t,"top",8),C=p(t,"left",8),x=p(t,"nodeColor",8,null),P=p(t,"hideable",8);const{position:L,dimensions:G,bgColor:B,borderRadius:J,rotation:H}=b(),{width:mt,height:gt}=G;let et=w(null);Ze(()=>{var j;try{const z=(j=document.querySelector(`#${b().id}`))==null?void 0:j.firstChild;z&&y(et,window.getComputedStyle(z).backgroundColor)}catch(z){console.error(z)}}),S(()=>i(),()=>{y(h,i())}),S(()=>s(),()=>{y(f,s())}),S(()=>st(b()),()=>{bn(y(m,b().zIndex),"$zIndex",n)}),S(()=>o(et),()=>{y(g,o(et)==="rgba(0, 0, 0, 0)")}),Ae(),se();var $=Uc();let nt;Bt(()=>{nt=me($,1,"minimap-node svelte-1hs9omb",null,nt,{hidden:_(),hideable:P()}),F($,"z-index",l()),F($,"border-radius",`${a()??""}px`),F($,"--prop-background-color",x()||c()||!o(g)&&o(et)||null),F($,"width",`${u()??""}px`),F($,"height",`${d()??""}px`),F($,"transform",`rotate(${o(f)??""}deg)`),F($,"top",`${o(h).y-E()}px`),F($,"left",`${o(h).x-C()}px`)}),Rt("click",$,()=>{P()&&v()(b())}),O(e,$),Zt(),r()}var Zc=zt('<div class="mini-bounding-box svelte-aoq4g"></div>');function Jc(e,t){Vt(t,!1);const[n,r]=we(),i=()=>A(u(),"$position",n),s=()=>A(g,"$width",n),l=()=>A(b,"$height",n),a=()=>A(d(),"$color",n);let c=p(t,"dimensions",8),u=p(t,"position",8),d=p(t,"color",8),h=p(t,"groupName",8),f=p(t,"top",8),m=p(t,"left",8);const{width:g,height:b}=c();se();var _=Zc();Bt(()=>{T(_,"id",`mini-${h()}-bounding-box`),T(_,"style",`border: solid 4px ${a()??""};`),F(_,"top",`${i().y-f()}px`),F(_,"left",`${i().x-m()}px`),F(_,"width",`${s()}px`),F(_,"height",`${l()}px`),F(_,"background-color",a())}),O(e,_),Zt(),r()}var Qc=zt('<div><div class="node-wrapper svelte-1qxvbux"><!> <!></div> <div class="overlay svelte-1qxvbux"></div></div>');function ws(e,t){Vt(t,!1);const[n,r]=we(),i=()=>A(ct,"$graphBounds",n),s=()=>A(wt,"$groups",n),l=()=>A(_t,"$dimensions",n),a=()=>A(yt,"$scale",n),c=()=>A(ft,"$translation",n),u=()=>A(pt,"$hidden",n),d=()=>A(Y,"$nodes",n),h=()=>A(Kt,"$groupBoxes",n),f=w(),m=w(),g=w(),b=w(),_=w(),v=w(),E=w(),C=w(),x=w(),P=w(),L=w(),G=w(),B=w(),J=w(),H=w(),mt=w(),gt=w(),et=w(),$=w(),nt=w(),j=w(),z=w(),ot=w();let dt=Dt("graph"),D=p(t,"width",8,100),At=p(t,"height",24,D),vt=p(t,"mapColor",8,null),k=p(t,"nodeColor",8,null),Pt=p(t,"borderColor",8,null),Yt=p(t,"corner",8,"SE"),ht=p(t,"hideable",8,!1);const X=.9,K=D()*X,Wt=At()*X,ct=dt.bounds.graphBounds,Y=dt.nodes,wt=dt.groups,xt=dt.transforms,_t=dt.dimensions,pt=s().hidden.nodes,yt=xt.scale,ft=xt.translation,Kt=dt.groupBoxes,ve={clientX:0,clientY:0};function de(jt){u().has(jt)?u().delete(jt):u().add(jt),q(pt,u())}S(()=>i(),()=>{y(f,i())}),S(()=>o(f),()=>{y(m,o(f).top)}),S(()=>o(f),()=>{y(g,o(f).left)}),S(()=>o(f),()=>{y(b,o(f).right)}),S(()=>o(f),()=>{y(_,o(f).bottom)}),S(()=>l(),()=>{y(v,l().width)}),S(()=>l(),()=>{y(E,l().height)}),S(()=>(o(b),o(g)),()=>{y(C,o(b)-o(g))}),S(()=>(o(_),o(m)),()=>{y(x,o(_)-o(m))}),S(()=>(o(C),o(x)),()=>{y(P,o(C)/o(x))}),S(()=>(st(D()),st(At())),()=>{y(L,D()/At())}),S(()=>(o(v),o(E),a(),c()),()=>{y(G,Io(ve,0,0,o(v),o(E),a(),c()))}),S(()=>(o(v),o(C),a()),()=>{y(B,o(v)/o(C)/a())}),S(()=>(o(E),o(x),a()),()=>{y(J,o(E)/o(x)/a())}),S(()=>(o(G),o(m),o(x)),()=>{y(H,(o(G).y-o(m))/o(x))}),S(()=>(o(G),o(g),o(C)),()=>{y(mt,(o(G).x-o(g))/o(C))}),S(()=>(o(P),o(L)),()=>{y(et,o(P)>=o(L))}),S(()=>(o(et),o(C),o(x)),()=>{y($,o(et)?K/o(C):Wt/o(x))}),S(()=>(o(x),o($)),()=>{y(ot,o(x)*o($))}),S(()=>(st(At()),o(ot)),()=>{y(j,(At()-o(ot))/2)}),S(()=>(o(C),o($)),()=>{y(z,o(C)*o($))}),S(()=>(st(D()),o(z)),()=>{y(nt,(D()-o(z))/2)}),S(()=>(o(j),o(H),o(ot),o(nt),o(mt),o(z),o(B),o(J)),()=>{y(gt,`
		top: ${o(j)+o(H)*o(ot)}px;
		left: ${o(nt)+o(mt)*o(z)}px;
		width: ${o(B)*o(z)}px;
		height: ${o(J)*o(ot)}px;`)}),Ae(),se();var Q=Qc();let tt;var rt=bt(Q),Et=bt(rt);on(Et,1,()=>Array.from(d().entries()),([jt,te])=>jt,(jt,te)=>{let Ee=()=>o(te)[1];var at=kt(),Me=ut(at);{var ke=ye=>{const Re=Oe(()=>u().has(Ee()));Vc(ye,{get node(){return Ee()},get top(){return o(m)},get left(){return o(g)},get nodeColor(){return k()},get hidden(){return o(Re)},toggleHidden:de,get hideable(){return ht()}})};Mt(Me,ye=>{Ee().id!=="N-editor"&&ye(ke)})}O(jt,at)});var Ft=U(Et,2);on(Ft,1,()=>Array.from(h().entries()),([jt,te])=>jt,(jt,te)=>{let Ee=()=>o(te)[0];Jc(jt,$r(()=>o(te)[1],{get top(){return o(m)},get left(){return o(g)},get groupName(){return Ee()}}))});var Jt=U(rt,2);Bt(()=>{tt=me(Q,1,"minimap-wrapper svelte-1qxvbux",null,tt,{SW:Yt()==="SW",NE:Yt()==="NE",SE:Yt()==="SE",NW:Yt()==="NW"}),F(Q,"width",`${D()??""}px`),F(Q,"height",`${(At()?At():D())??""}px`),F(Q,"--prop-minimap-border-color",Pt()),F(Q,"--prop-minimap-background-color",vt()),F(rt,"width",`${o(C)??""}px`),F(rt,"height",`${o(x)??""}px`),F(rt,"transform",`scale(${o($)??""})`),T(Jt,"style",o(gt))}),O(e,Q),Zt(),r()}const tu=Object.freeze(Object.defineProperty({__proto__:null,default:ws},Symbol.toStringTag,{value:"Module"})),eu={devices:{},connectors:[],subcircuits:{}};let Yn=null;function nu(){let e=null;return{start:(t,n)=>{e!==null&&clearTimeout(e),e=setTimeout(()=>{e=null,t()},n)},cancel:()=>{e!==null&&(clearTimeout(e),e=null)}}}const Ei=nu();let ar=N(eu);function xs(e,t,n=100){if(Yn===null)return Yn=e,Ei.start(()=>{Yn=null,console.warn("Timeout waiting for the second connection")},n),!1;{Ei.cancel(),"from"in e=="from"in Yn&&console.warn("both parts of connection are the same, ie: 2 inputs or 2 outputs");const r="from"in e?e:Yn,i="to"in e?e:Yn,s={...r,...i};t(s),Yn=null}}function ou(e){xs(e,n=>{ar.update(r=>(r.connectors.push(n),r))})}function ru(e){xs(e,n=>{ar.update(r=>{const i=r.connectors.findIndex(s=>JSON.stringify(s)===JSON.stringify(n));return i!==-1&&r.connectors.splice(i,1),r})})}var iu=zt("<div></div>");function su(e,t){Vt(t,!0);let n=t.portName.startsWith("input")?"input":"output";function r(l,a){const c={id:l,port:a};return a.startsWith("input")?{to:c}:{from:c}}Go(()=>{if(t.linked&&(n==="input"||n==="output")){const l=r(t.nodeId,t.portName);return ou(l)}else if(!t.linked){const l=r(t.nodeId,t.portName);return ru(l)}});var i=iu();let s;Bt(()=>s=me(i,1,`custom_anchor ${(n==="input"?"input":"output")??""}`,"svelte-lxodbs",s,{linked:t.linked,hovering:t.hovering,connecting:t.connecting})),O(e,i),Zt()}var lu=zt("<div><!></div>");function br(e,t){Vt(t,!0);let n=p(t,"location",19,()=>["left","top"]),r="";n()[0]=="left"?n()[1]=="top"?r="input1":n()[1]=="bot"&&(r="input2"):n()[0]=="right"&&(r="output");const i=`${t.id}_${r}`;var s=lu(),l=bt(s);const a=en(()=>n()[0]==="left"?"west":"east"),c=en(()=>t.io==="input"),u=en(()=>t.io==="output");po(l,{id:i,get direction(){return o(a)},get input(){return o(c)},get output(){return o(u)},multiple:!1,children:Ri,$$slots:{default:(d,h)=>{const f=en(()=>h.linked),m=en(()=>h.hovering),g=en(()=>h.connecting);su(d,{get connecting(){return o(g)},get linked(){return o(f)},portName:r,get nodeId(){return t.id},get hovering(){return o(m)}})}}}),Bt(()=>me(s,1,`${n()[0]??""} ${n()[1]??""}`,"svelte-12b90ve")),O(e,s),Zt()}const au="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%20512%20512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23000000'%20d='M105%20105v302h151c148%200%20148-302%200-302H105zm-89%2046v18h71v-18H16zm368.8%2096c.2%206%20.2%2012%200%2018H496v-18H384.8zM16%20343v18h71v-18H16z'/%3e%3c/svg%3e";var cu=zt('<img alt="AND Gate"> <!> <!> <!>',1);function wr(e,t){Vt(t,!0);let n=p(t,"width",3,80),r=p(t,"height",3,50);const i=localStorage.getItem("and_node_num");let s=0;i===null?localStorage.setItem("and_node_num","1"):(s=parseInt(i,10)+1,localStorage.setItem("and_node_num",s.toString()));const l=`And_${s}`;localStorage.setItem(`And_Gate_${s}`,s.toString());const a={type:"And",label:l};ar.update(c=>(c.devices[l]=a,c)),Kr(e,{drop:"cursor",id:l,center:!0,children:(c,u)=>{var d=cu(),h=ut(d);T(h,"src",au);var f=U(h,2);br(f,{location:["left","bot"],id:l,io:"input"});var m=U(f,2);br(m,{location:["left","top"],id:l,io:"input"});var g=U(m,2);br(g,{location:["right","mid"],id:l,io:"output"}),Bt(()=>{T(h,"width",n()),T(h,"height",r())}),O(c,d)},$$slots:{default:!0}}),Zt()}const uu=""+new URL("line_26-7GG_ennq.svg",import.meta.url).href;var du=Ve('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21a9 9 0 0 1-.5-17.986V3c-.354.966-.5 1.911-.5 3a9 9 0 0 0 9 9c.239 0 .254.018.488 0A9 9 0 0 1 12 21"></path></svg>');function fu(e,t){const n=ds(t,["$$slots","$$events","$$legacy"]);var r=du();let i;Bt(()=>i=as(r,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n},void 0,!0)),O(e,r)}var hu=Ve('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5V3m0 18v-2M7.05 7.05L5.636 5.636m12.728 12.728L16.95 16.95M5 12H3m18 0h-2M7.05 16.95l-1.414 1.414M18.364 5.636L16.95 7.05M16 12a4 4 0 1 1-8 0a4 4 0 0 1 8 0"></path></svg>');function gu(e,t){const n=ds(t,["$$slots","$$events","$$legacy"]);var r=hu();let i;Bt(()=>i=as(r,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n},void 0,!0)),O(e,r)}var vu=zt('<div class="side_menu_header svelte-1sikknw"><h2 class="svelte-1sikknw"><span class="l_cap svelte-1sikknw">L</span><span class="o_cap svelte-1sikknw">o</span><span class="g_cap svelte-1sikknw">g</span><span class="i_cap svelte-1sikknw">i</span><span class="c_cap svelte-1sikknw">c</span><span class="a_cap svelte-1sikknw" style="margin-left:4px;">A</span><span class="p_cap svelte-1sikknw">P</span></h2> <!></div>');function pu(e,t){Vt(t,!1);let n=w(!1);Ze(()=>{y(n,localStorage.getItem("theme")==="dark"),i()});function r(){y(n,!o(n)),localStorage.setItem("theme",o(n)?"dark":"light"),i()}function i(){o(n)?document.body.className="dark":document.body.className="light"}se();var s=vu(),l=U(bt(s),2);{var a=u=>{gu(u,{onclick:r,style:"color:var(--neon-purple); width:28px;height:28px;margin-top: 5px;margin-right: -8px;"})},c=u=>{fu(u,{onclick:r,style:"color:grey !important; width:28px;height:28px;margin-top: 5px;margin-right: -8px;"})};Mt(l,u=>{o(n)?u(a):u(c,!1)})}O(e,s),Zt()}const mu=""+new URL("And-Bv0qjo0z.webp",import.meta.url).href,_u=""+new URL("Buffer-ChkS8anx.webp",import.meta.url).href,yu=""+new URL("Or-CH567Eff.webp",import.meta.url).href,bu=""+new URL("Nor-DNThgpQV.webp",import.meta.url).href,wu=""+new URL("Xor-DHDhnzlp.webp",import.meta.url).href,xu=""+new URL("Xnor-Dc-K_l5c.webp",import.meta.url).href,Su=""+new URL("Nand-BlFkpy7B.webp",import.meta.url).href,Eu=""+new URL("Not-BTmZFMBI.webp",import.meta.url).href;var Cu=zt('<ol class="side_menu_group svelte-35uz8b"><li class="svelte-35uz8b"><img style="width: 82px;margin-top: 3px;" alt="And logic gate, hand-drawn"> Not</li> <li class="svelte-35uz8b"><img style="width: 82px;margin-bottom:-6px;margin-top: 3px;" alt="And logic gate, hand-drawn"> Repeater</li> <li class="svelte-35uz8b"><img style="width: 82px;margin-bottom:-6px;margin-top: 3px;" alt="And logic gate, hand-drawn"> And</li> <li class="svelte-35uz8b"><img style="width: 82px;margin-bottom:-6px;margin-top: 3px;" alt="And logic gate, hand-drawn"> Nand</li> <li class="svelte-35uz8b"><img style="width: 82px;margin-bottom:-6px;margin-top: 3px;" alt="And logic gate, hand-drawn"> Or</li> <li class="svelte-35uz8b"><img style="width: 82px;margin-bottom:-6px;margin-top: 3px;" alt="And logic gate, hand-drawn"> Nor</li> <li class="svelte-35uz8b"><img style="width: 82px;margin-bottom:-6px;margin-top: 3px;" alt="And logic gate, hand-drawn"> Xor</li> <li class="svelte-35uz8b"><img style="width: 82px;margin-bottom:-6px;margin-top: 3px;" alt="And logic gate, hand-drawn"> Xnor</li></ol>');function Nu(e,t){let n=p(t,"zIndex",3,0);var r=Cu(),i=bt(r),s=bt(i);T(s,"src",Eu);var l=U(i,2),a=bt(l);T(a,"src",_u);var c=U(l,2),u=bt(c);T(u,"src",mu);var d=U(c,2),h=bt(d);T(h,"src",Su);var f=U(d,2),m=bt(f);T(m,"src",yu);var g=U(f,2),b=bt(g);T(b,"src",bu);var _=U(g,2),v=bt(_);T(v,"src",wu);var E=U(_,2),C=bt(E);T(C,"src",xu),Bt(()=>{T(r,"style",`z-index:${n()};`),T(r,"id",`section_${n()??""}`)}),O(e,r)}const Au={Gates:{svg:void 0,groupElements:["And","Or","Nor","Not","Xor","Nand","Repeater","Xnor"]},Arithmetic:{svg:void 0,groupElements:["And","Or","Nor","Not","Xor","Nand","Repeater","Xnor"]},Multiplexers:{svg:void 0,groupElements:["And","Or","Nor","Not","Xor","Nand","Repeater","Xnor"]},Memory:{svg:void 0,groupElements:["And","Or","Nor","Not","Xor","Nand","Repeater","Xnor"]},Utils:{svg:void 0,groupElements:["And","Or","Nor","Not","Xor","Nand","Repeater","Xnor"]}};var Mu=zt('<li class="svelte-inpn74"><div class="menu_group_section svelte-inpn74"><button class="svelte-inpn74"><span style="margin-left:5%;"> </span></button> <img class="sketch_bar svelte-inpn74"></div> <!></li>'),ku=zt('<nav class="side_menu noselect svelte-inpn74" aria-label="Side Menu"><div class="side_menu_header svelte-inpn74"><!> <img class="wiggle_bar svelte-inpn74" alt="sketched line bottom border for main app bar"></div> <ul class="svelte-inpn74"></ul></nav>');function Iu(e,t){Vt(t,!1);const n=w(Au),r=Object.keys(o(n)),i=[15,23,24,25,27,17,19,21,29];function s(g){return Math.floor(Math.random()*g)+1}let l=localStorage.getItem("randomLineSelectionStore");function a(g){return`/src/assets/svg/sketchLineSvg/line_${g}.svg`}if(l===null){const g=r.map(b=>{const _=s(i.length-1),v=i[_],E=a(v);return mn(n,o(n)[b].svg=E),i.splice(_,1),v});localStorage.setItem("randomLineSelectionStore",JSON.stringify(g))}else JSON.parse(l).forEach((b,_)=>{const v=r[_],E=a(parseInt(b,10));mn(n,o(n)[v].svg=E)});let c=w(Array(r.length).fill(!1));se();var u=ku(),d=bt(u),h=bt(d);pu(h,{});var f=U(h,2);T(f,"src",uu);var m=U(d,2);on(m,5,()=>r,jn,(g,b,_)=>{var v=Mu();T(v,"id",`menu_group_${_??""}`);var E=bt(v),C=bt(E);C.__mousedown=()=>{mn(c,o(c)[_]=!o(c)[_])};var x=bt(C),P=bt(x),L=U(C,2),G=U(E,2);Nu(G,{zIndex:_,get showSubMenu(){return o(c)[_]}}),Bt(()=>{T(v,"style",o(c)[_]?"transition: max-height .4s ease-in; max-height:405px":"transition: max-height .4s ease-out; max-height:75px"),Gr(P,o(b)),T(L,"src",o(n)[o(b)].svg),T(L,"alt",`sketched line bottom border for main app bar section ${o(b)??""}`)}),O(g,v)}),O(e,u),Zt()}is(["mousedown"]);const Pu={dev0:{type:"Not",label:"notGate1",bits:1,inputs:1,outputs:1},dev1:{type:"NumDisplay",label:"outputDisplay",net:"O",bits:1},dev2:{type:"Clock",label:"clock"}},Du=[{to:{id:"dev0",port:"in"},from:{id:"dev2",port:"out"},name:"clk"},{to:{id:"dev1",port:"in"},from:{id:"dev0",port:"out"},name:"connect"}],Lu={},Ss={devices:Pu,connectors:Du,subcircuits:Lu};function Ou(e,t){Vt(t,!1);let n=new Ci(Ss),r=!1,i=null,s="";function l(){r=!r,console.log(`Simulation running: ${r}`),r?c():clearInterval(i)}function a(){let d=n.getLabelIndex().devices,h={};return Object.entries(d).forEach(f=>{var g,b,_,v,E,C,x,P;let m=f[1];if((b=(g=m.attributes)==null?void 0:g.inputSignals)!=null&&b.in){let L=(_=m.attributes.inputSignals.in._avec)==null?void 0:_["0"],G=(v=m.attributes.inputSignals.in._bvec)==null?void 0:v["0"];h[m.attributes.label+" Input Sig"]={_avec:L,_bvec:G}}if((C=(E=m.attributes)==null?void 0:E.outputSignals)!=null&&C.out){let L=(x=m.attributes.outputSignals.out._avec)==null?void 0:x["0"],G=(P=m.attributes.outputSignals.out._bvec)==null?void 0:P["0"];h[m.attributes.label+" Output Sig"]={_avec:L,_bvec:G}}}),JSON.stringify(h,null,2)}function c(){i=setInterval(()=>{if(!r)return;n.updateGates();let u=a();u!=s&&(console.log(`Tick: ${n.tick}`),console.log(u)),s=u})}window.addEventListener("keydown",u=>{u.key==="r"&&l()}),se(),Zt()}var Tu=zt("<!> <!> <!>",1),Ru=zt('<main class="svelte-1cyzjz0"><!> <!> <!></main>');function zu(e,t){Vt(t,!1),new Ci(Ss),ar.subscribe(l=>{}),se();var n=Ru(),r=bt(n);Iu(r,{});var i=U(r,2);qc(i,{theme:"LogiCap",TD:!0,controls:!0,editable:!1,children:(l,a)=>{var c=Tu(),u=ut(c);wr(u,{nodeStartPos:20,width:80,height:50});var d=U(u,2);wr(d,{nodeStartPos:200,width:80,height:50});var h=U(d,2);wr(h,{nodeStartPos:200,width:80,height:50}),O(l,c)},$$slots:{default:!0,minimap:(l,a)=>{ws(l,{width:100,corner:"NE",slot:"minimap"})}}});var s=U(i,2);Ou(s,{}),O(e,n),Zt()}Ll(zu,{target:document.getElementById("app")});export{mi as A,qe as B,Fa as C,Dl as D,Hn as E,Xu as F,Gu as G,jl as H,Ge as I,to as J,N as K,lr as L,ut as M,mn as N,Bo as O,Ve as P,uo as Q,T as R,on as S,p as a,mr as b,o as c,U as d,bt as e,Bt as f,R as g,me as h,se as i,F as j,Gr as k,Rt as l,w as m,dn as n,Ze as o,Vt as p,O as q,Zt as r,y as s,zt as t,Dt as u,A as v,Gt as w,Mt as x,Oe as y,we as z};
