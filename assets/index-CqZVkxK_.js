const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Controls-C6yviW-A.js","./Icon-DJg2DRqe.js","./DrawerController-D-F3tNtd.js","./DrawerController-CDtfjO5V.css"])))=>i.map(i=>d[i]);
var ms=Object.defineProperty;var Hr=e=>{throw TypeError(e)};var _s=(e,t,n)=>t in e?ms(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Kr=(e,t,n)=>_s(e,typeof t!="symbol"?t+"":t,n),cr=(e,t,n)=>t.has(e)||Hr("Cannot "+n);var pn=(e,t,n)=>(cr(e,t,"read from private field"),n?n.call(e):t.get(e)),ao=(e,t,n)=>t.has(e)?Hr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ur=(e,t,n,r)=>(cr(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),qr=(e,t,n)=>(cr(e,t,"access private method"),n);import{HeadlessCircuit as ys}from"custom_digitaljs";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const Ur=!1;var No=Array.isArray,bs=Array.prototype.indexOf,Ar=Array.from,Ci=Object.defineProperty,bn=Object.getOwnPropertyDescriptor,Ei=Object.getOwnPropertyDescriptors,ws=Object.prototype,xs=Array.prototype,Mr=Object.getPrototypeOf;function co(e){return typeof e=="function"}const wn=()=>{};function Ss(e){return e()}function bo(e){for(var t=0;t<e.length;t++)e[t]()}const Ve=2,Ni=4,$o=8,Pr=16,Sn=32,Ao=64,Bo=128,qe=256,Wo=512,Se=1024,Cn=2048,Kn=4096,xn=8192,Zo=16384,Cs=32768,Jo=65536,Ai=1<<17,Es=1<<19,Mi=1<<20,dn=Symbol("$state"),Pi=Symbol("legacy props"),Ns=Symbol("");function Ii(e){return e===this.v}function Ir(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Dr(e){return!Ir(e,this.v)}function As(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ms(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ps(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Is(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Di(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Ds(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ls(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ks(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Rs(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function Os(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let no=!1,Ts=!1;function zs(){no=!0}const Lr=1,kr=2,Li=4,Bs=8,Ws=16,Xs=1,Gs=2,Ys=4,Fs=8,js=16,ki=1,Hs=2,ke=Symbol();function Ri(){throw new Error("https://svelte.dev/e/invalid_default_snippet")}function oo(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Pt=null;function Vr(e){Pt=e}function Dt(e){return Oi().get(e)}function Kt(e,t){return Oi().set(e,t),t}function ne(e,t=!1,n){Pt={p:Pt,c:null,e:null,m:!1,s:e,x:null,l:null},no&&!t&&(Pt.l={s:null,u:null,r1:[],r2:Ke(!1)})}function oe(e){const t=Pt;if(t!==null){e!==void 0&&(t.x=e);const l=t.e;if(l!==null){var n=ee,r=Zt;t.e=null;try{for(var i=0;i<l.length;i++){var s=l[i];Rn(s.effect),kn(s.reaction),Hn(s.fn)}}finally{Rn(n),kn(r)}}Pt=t.p,t.m=!0}return e||{}}function Mo(){return!no||Pt!==null&&Pt.l===null}function Oi(e){return Pt===null&&oo(),Pt.c??(Pt.c=new Map(Ks(Pt)||void 0))}function Ks(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function Ke(e,t){var n={f:0,v:e,reactions:null,equals:Ii,rv:0,wv:0};return n}function Qo(e,t=!1){var r;const n=Ke(e);return t||(n.equals=Dr),no&&Pt!==null&&Pt.l!==null&&((r=Pt.l).s??(r.s=[])).push(n),n}function b(e,t=!1){return qs(Qo(e,t))}function qs(e){return Zt!==null&&!tn&&(Zt.f&Ve)!==0&&(fn===null?rl([e]):fn.push(e)),e}function qn(e,t){return _(e,ce(()=>o(e))),t}function _(e,t){return Zt!==null&&!tn&&Mo()&&(Zt.f&(Ve|Pr))!==0&&(fn===null||!fn.includes(e))&&Os(),wo(e,t)}function wo(e,t){return e.equals(t)||(e.v,e.v=t,e.wv=$i(),Ti(e,Cn),Mo()&&ee!==null&&(ee.f&Se)!==0&&(ee.f&(Sn|Ao))===0&&(mn===null?il([e]):mn.push(e))),t}function Ti(e,t){var n=e.reactions;if(n!==null)for(var r=Mo(),i=n.length,s=0;s<i;s++){var l=n[s],a=l.f;(a&Cn)===0&&(!r&&l===ee||(en(l,t),(a&(Se|qe))!==0&&((a&Ve)!==0?Ti(l,Kn):rr(l))))}}let Us=!1;function Fn(e,t=null,n){if(typeof e!="object"||e===null||dn in e)return e;const r=Mr(e);if(r!==ws&&r!==xs)return e;var i=new Map,s=No(e),l=Ke(0);s&&i.set("length",Ke(e.length));var a;return new Proxy(e,{defineProperty(c,u,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Ls();var h=i.get(u);return h===void 0?(h=Ke(d.value),i.set(u,h)):_(h,Fn(d.value,a)),!0},deleteProperty(c,u){var d=i.get(u);if(d===void 0)u in c&&i.set(u,Ke(ke));else{if(s&&typeof u=="string"){var h=i.get("length"),f=Number(u);Number.isInteger(f)&&f<h.v&&_(h,f)}_(d,ke),$r(l)}return!0},get(c,u,d){var v;if(u===dn)return e;var h=i.get(u),f=u in c;if(h===void 0&&(!f||(v=bn(c,u))!=null&&v.writable)&&(h=Ke(Fn(f?c[u]:ke,a)),i.set(u,h)),h!==void 0){var m=o(h);return m===ke?void 0:m}return Reflect.get(c,u,d)},getOwnPropertyDescriptor(c,u){var d=Reflect.getOwnPropertyDescriptor(c,u);if(d&&"value"in d){var h=i.get(u);h&&(d.value=o(h))}else if(d===void 0){var f=i.get(u),m=f==null?void 0:f.v;if(f!==void 0&&m!==ke)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return d},has(c,u){var m;if(u===dn)return!0;var d=i.get(u),h=d!==void 0&&d.v!==ke||Reflect.has(c,u);if(d!==void 0||ee!==null&&(!h||(m=bn(c,u))!=null&&m.writable)){d===void 0&&(d=Ke(h?Fn(c[u],a):ke),i.set(u,d));var f=o(d);if(f===ke)return!1}return h},set(c,u,d,h){var P;var f=i.get(u),m=u in c;if(s&&u==="length")for(var v=d;v<f.v;v+=1){var x=i.get(v+"");x!==void 0?_(x,ke):v in c&&(x=Ke(ke),i.set(v+"",x))}f===void 0?(!m||(P=bn(c,u))!=null&&P.writable)&&(f=Ke(void 0),_(f,Fn(d,a)),i.set(u,f)):(m=f.v!==ke,_(f,Fn(d,a)));var y=Reflect.getOwnPropertyDescriptor(c,u);if(y!=null&&y.set&&y.set.call(h,d),!m){if(s&&typeof u=="string"){var p=i.get("length"),I=Number(u);Number.isInteger(I)&&I>=p.v&&_(p,I+1)}$r(l)}return!0},ownKeys(c){o(l);var u=Reflect.ownKeys(c).filter(f=>{var m=i.get(f);return m===void 0||m.v!==ke});for(var[d,h]of i)h.v!==ke&&!(d in c)&&u.push(d);return u},setPrototypeOf(){ks()}})}function $r(e,t=1){_(e,e.v+t)}function Zr(e){return e!==null&&typeof e=="object"&&dn in e?e[dn]:e}function Cu(e,t){return Object.is(Zr(e),Zr(t))}var $n,zi,Bi,Wi;function Vs(){if($n===void 0){$n=window,zi=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype;Bi=bn(t,"firstChild").get,Wi=bn(t,"nextSibling").get,e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function Rr(e=""){return document.createTextNode(e)}function _n(e){return Bi.call(e)}function tr(e){return Wi.call(e)}function bt(e,t){return _n(e)}function dt(e,t){{var n=_n(e);return n instanceof Comment&&n.data===""?tr(n):n}}function F(e,t=1,n=!1){let r=e;for(;t--;)r=tr(r);return r}function $s(e){e.textContent=""}function Qe(e){var t=Ve|Cn,n=Zt!==null&&(Zt.f&Ve)!==0?Zt:null;return ee===null||n!==null&&(n.f&qe)!==0?t|=qe:ee.f|=Mi,{ctx:Pt,deps:null,effects:null,equals:Ii,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??ee}}function Re(e){const t=Qe(e);return t.equals=Dr,t}function Xi(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ln(t[n])}}function Zs(e){for(var t=e.parent;t!==null;){if((t.f&Ve)===0)return t;t=t.parent}return null}function Js(e){var t,n=ee;Rn(Zs(e));try{Xi(e),t=Ji(e)}finally{Rn(n)}return t}function Gi(e){var t=Js(e),n=(Dn||(e.f&qe)!==0)&&e.deps!==null?Kn:Se;en(e,n),e.equals(t)||(e.v=t,e.wv=$i())}function Yi(e){ee===null&&Zt===null&&Ps(),Zt!==null&&(Zt.f&qe)!==0&&ee===null&&Ms(),Br&&As()}function Qs(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function ro(e,t,n,r=!0){var i=(e&Ao)!==0,s=ee,l={ctx:Pt,deps:null,nodes_start:null,nodes_end:null,f:e|Cn,first:null,fn:t,last:null,next:null,parent:i?null:s,prev:null,teardown:null,transitions:null,wv:0};if(n)try{or(l),l.f|=Cs}catch(u){throw Ln(l),u}else t!==null&&rr(l);var a=n&&l.deps===null&&l.first===null&&l.nodes_start===null&&l.teardown===null&&(l.f&(Mi|Bo))===0;if(!a&&!i&&r&&(s!==null&&Qs(l,s),Zt!==null&&(Zt.f&Ve)!==0)){var c=Zt;(c.effects??(c.effects=[])).push(l)}return l}function Or(e){const t=ro($o,null,!1);return en(t,Se),t.teardown=e,t}function Xo(e){Yi();var t=ee!==null&&(ee.f&Sn)!==0&&Pt!==null&&!Pt.m;if(t){var n=Pt;(n.e??(n.e=[])).push({fn:e,effect:ee,reaction:Zt})}else{var r=Hn(e);return r}}function tl(e){return Yi(),io(e)}function el(e){const t=ro(Ao,e,!0);return(n={})=>new Promise(r=>{n.outro?xo(t,()=>{Ln(t),r(void 0)}):(Ln(t),r(void 0))})}function Hn(e){return ro(Ni,e,!1)}function w(e,t){var n=Pt,r={effect:null,ran:!1};n.l.r1.push(r),r.effect=io(()=>{e(),!r.ran&&(r.ran=!0,_(n.l.r2,!0),ce(t))})}function Ae(){var e=Pt;io(()=>{if(o(e.l.r2)){for(var t of e.l.r1){var n=t.effect;(n.f&Se)!==0&&en(n,Kn),so(n)&&or(n),t.ran=!1}e.l.r2.v=!1}})}function io(e){return ro($o,e,!0)}function Xt(e,t=[],n=Qe){const r=t.map(n);return er(()=>e(...r.map(o)))}function er(e,t=0){return ro($o|Pr|t,e,!0)}function Qn(e,t=!0){return ro($o|Sn,e,!0,t)}function Fi(e){var t=e.teardown;if(t!==null){const n=Br,r=Zt;Qr(!0),kn(null);try{t.call(null)}finally{Qr(n),kn(r)}}}function ji(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var r=n.next;Ln(n,t),n=r}}function nl(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Sn)===0&&Ln(t),t=n}}function Ln(e,t=!0){var n=!1;if((t||(e.f&Es)!==0)&&e.nodes_start!==null){for(var r=e.nodes_start,i=e.nodes_end;r!==null;){var s=r===i?null:tr(r);r.remove(),r=s}n=!0}ji(e,t&&!n),Ho(e,0),en(e,Zo);var l=e.transitions;if(l!==null)for(const c of l)c.stop();Fi(e);var a=e.parent;a!==null&&a.first!==null&&Hi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Hi(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function xo(e,t){var n=[];Tr(e,n,!0),Ki(n,()=>{Ln(e),t&&t()})}function Ki(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function Tr(e,t,n){if((e.f&xn)===0){if(e.f^=xn,e.transitions!==null)for(const l of e.transitions)(l.is_global||n)&&t.push(l);for(var r=e.first;r!==null;){var i=r.next,s=(r.f&Jo)!==0||(r.f&Sn)!==0;Tr(r,t,s?n:!1),r=i}}}function Go(e){qi(e,!0)}function qi(e,t){if((e.f&xn)!==0){e.f^=xn,(e.f&Se)===0&&(e.f^=Se),so(e)&&(en(e,Cn),rr(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&Jo)!==0||(n.f&Sn)!==0;qi(n,i?t:!1),n=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let So=[],yr=[];function Ui(){var e=So;So=[],bo(e)}function ol(){var e=yr;yr=[],bo(e)}function zr(e){So.length===0&&queueMicrotask(Ui),So.push(e)}function Jr(){So.length>0&&Ui(),yr.length>0&&ol()}let Oo=!1,Yo=!1,Fo=null,To=!1,Br=!1;function Qr(e){Br=e}let po=[];let Zt=null,tn=!1;function kn(e){Zt=e}let ee=null;function Rn(e){ee=e}let fn=null;function rl(e){fn=e}let Ne=null,Xe=0,mn=null;function il(e){mn=e}let Vi=1,jo=0,Dn=!1,Pn=null;function $i(){return++Vi}function so(e){var h;var t=e.f;if((t&Cn)!==0)return!0;if((t&Kn)!==0){var n=e.deps,r=(t&qe)!==0;if(n!==null){var i,s,l=(t&Wo)!==0,a=r&&ee!==null&&!Dn,c=n.length;if(l||a){var u=e,d=u.parent;for(i=0;i<c;i++)s=n[i],(l||!((h=s==null?void 0:s.reactions)!=null&&h.includes(u)))&&(s.reactions??(s.reactions=[])).push(u);l&&(u.f^=Wo),a&&d!==null&&(d.f&qe)===0&&(u.f^=qe)}for(i=0;i<c;i++)if(s=n[i],so(s)&&Gi(s),s.wv>e.wv)return!0}(!r||ee!==null&&!Dn)&&en(e,Se)}return!1}function sl(e,t){for(var n=t;n!==null;){if((n.f&Bo)!==0)try{n.fn(e);return}catch{n.f^=Bo}n=n.parent}throw Oo=!1,e}function ll(e){return(e.f&Zo)===0&&(e.parent===null||(e.parent.f&Bo)===0)}function nr(e,t,n,r){if(Oo){if(n===null&&(Oo=!1),ll(t))throw e;return}n!==null&&(Oo=!0);{sl(e,t);return}}function Zi(e,t,n=!0){var r=e.reactions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];(s.f&Ve)!==0?Zi(s,t,!1):t===s&&(n?en(s,Cn):(s.f&Se)!==0&&en(s,Kn),rr(s))}}function Ji(e){var m;var t=Ne,n=Xe,r=mn,i=Zt,s=Dn,l=fn,a=Pt,c=tn,u=e.f;Ne=null,Xe=0,mn=null,Dn=(u&qe)!==0&&(tn||!To||Zt===null),Zt=(u&(Sn|Ao))===0?e:null,fn=null,Vr(e.ctx),tn=!1,jo++;try{var d=(0,e.fn)(),h=e.deps;if(Ne!==null){var f;if(Ho(e,Xe),h!==null&&Xe>0)for(h.length=Xe+Ne.length,f=0;f<Ne.length;f++)h[Xe+f]=Ne[f];else e.deps=h=Ne;if(!Dn)for(f=Xe;f<h.length;f++)((m=h[f]).reactions??(m.reactions=[])).push(e)}else h!==null&&Xe<h.length&&(Ho(e,Xe),h.length=Xe);if(Mo()&&mn!==null&&!tn&&h!==null&&(e.f&(Ve|Kn|Cn))===0)for(f=0;f<mn.length;f++)Zi(mn[f],e);return i!==null&&jo++,d}finally{Ne=t,Xe=n,mn=r,Zt=i,Dn=s,fn=l,Vr(a),tn=c}}function al(e,t){let n=t.reactions;if(n!==null){var r=bs.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&Ve)!==0&&(Ne===null||!Ne.includes(t))&&(en(t,Kn),(t.f&(qe|Wo))===0&&(t.f^=Wo),Xi(t),Ho(t,0))}function Ho(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)al(e,n[r])}function or(e){var t=e.f;if((t&Zo)===0){en(e,Se);var n=ee,r=Pt,i=To;ee=e,To=!0;try{(t&Pr)!==0?nl(e):ji(e),Fi(e);var s=Ji(e);e.teardown=typeof s=="function"?s:null,e.wv=Vi;var l=e.deps,a;Ur&&Ts&&e.f&Cn}catch(c){nr(c,e,n,r||e.ctx)}finally{To=i,ee=n}}}function cl(){try{Is()}catch(e){if(Fo!==null)nr(e,Fo,null);else throw e}}function Qi(){try{for(var e=0;po.length>0;){e++>1e3&&cl();var t=po,n=t.length;po=[];for(var r=0;r<n;r++){var i=t[r];(i.f&Se)===0&&(i.f^=Se);var s=dl(i);ul(s)}}}finally{Yo=!1,Fo=null}}function ul(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];if((r.f&(Zo|xn))===0)try{so(r)&&(or(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?Hi(r):r.fn=null))}catch(i){nr(i,r,null,r.ctx)}}}function rr(e){Yo||(Yo=!0,queueMicrotask(Qi));for(var t=Fo=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(Ao|Sn))!==0){if((n&Se)===0)return;t.f^=Se}}po.push(t)}function dl(e){var t=[],n=e.first;t:for(;n!==null;){var r=n.f,i=(r&Sn)!==0,s=i&&(r&Se)!==0,l=n.next;if(!s&&(r&xn)===0){if((r&Ni)!==0)t.push(n);else if(i)n.f^=Se;else{var a=Zt;try{Zt=n,so(n)&&or(n)}catch(d){nr(d,n,null,n.ctx)}finally{Zt=a}}var c=n.first;if(c!==null){n=c;continue}}if(l===null){let d=n.parent;for(;d!==null;){if(e===d)break t;var u=d.next;if(u!==null){n=u;continue t}d=d.parent}}n=l}return t}function fl(e){var t;for(Jr();po.length>0;)Yo=!0,Qi(),Jr();return t}async function hl(){await Promise.resolve(),fl()}function o(e){var t=e.f,n=(t&Ve)!==0;if(Pn!==null&&Pn.add(e),Zt!==null&&!tn){fn!==null&&fn.includes(e)&&Rs();var r=Zt.deps;e.rv<jo&&(e.rv=jo,Ne===null&&r!==null&&r[Xe]===e?Xe++:Ne===null?Ne=[e]:(!Dn||!Ne.includes(e))&&Ne.push(e))}else if(n&&e.deps===null&&e.effects===null){var i=e,s=i.parent;s!==null&&(s.f&qe)===0&&(i.f^=qe)}return n&&(i=e,so(i)&&Gi(i)),e.v}function gl(e){var t=Pn;Pn=new Set;var n=Pn,r;try{if(ce(e),t!==null)for(r of Pn)t.add(r)}finally{Pn=t}return n}function Eu(e){var t=gl(()=>ce(e));for(var n of t)if((n.f&Ai)!==0)for(const r of n.deps||[])(r.f&Ve)===0&&wo(r,r.v);else wo(n,n.v)}function ce(e){var t=tn;try{return tn=!0,e()}finally{tn=t}}const vl=-7169;function en(e,t){e.f=e.f&vl|t}function st(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(dn in e)br(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&dn in n&&br(n)}}}function br(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{br(e[r],t)}catch{}const n=Mr(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Ei(n);for(let i in r){const s=r[i].get;if(s)try{s.call(e)}catch{}}}}}const pl=["touchstart","touchmove"];function ml(e){return pl.includes(e)}let ti=!1;function _l(){ti||(ti=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function ts(e){var t=Zt,n=ee;kn(null),Rn(null);try{return e()}finally{kn(t),Rn(n)}}function yl(e,t,n,r=n){e.addEventListener(t,()=>ts(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),_l()}const es=new Set,wr=new Set;function bl(e,t,n,r={}){function i(s){if(r.capture||ho.call(t,s),!s.cancelBubble)return ts(()=>n==null?void 0:n.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?zr(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function Tt(e,t,n,r,i){var s={capture:r,passive:i},l=bl(e,t,n,s);(t===document.body||t===window||t===document)&&Or(()=>{t.removeEventListener(e,l,s)})}function wl(e){for(var t=0;t<e.length;t++)es.add(e[t]);for(var n of wr)n(e)}function ho(e){var I;var t=this,n=t.ownerDocument,r=e.type,i=((I=e.composedPath)==null?void 0:I.call(e))||[],s=i[0]||e.target,l=0,a=e.__root;if(a){var c=i.indexOf(a);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var u=i.indexOf(t);if(u===-1)return;c<=u&&(l=c)}if(s=i[l]||e.target,s!==t){Ci(e,"currentTarget",{configurable:!0,get(){return s||n}});var d=Zt,h=ee;kn(null),Rn(null);try{for(var f,m=[];s!==null;){var v=s.assignedSlot||s.parentNode||s.host||null;try{var x=s["__"+r];if(x!==void 0&&(!s.disabled||e.target===s))if(No(x)){var[y,...p]=x;y.apply(s,[e,...p])}else x.call(s,e)}catch(P){f?m.push(P):f=P}if(e.cancelBubble||v===t||v===null)break;s=v}if(f){for(let P of m)queueMicrotask(()=>{throw P});throw f}}finally{e.__root=t,delete e.currentTarget,kn(d),Rn(h)}}}function ns(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function Co(e,t){var n=ee;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function zt(e,t){var n=(t&ki)!==0,r=(t&Hs)!==0,i,s=!e.startsWith("<!>");return()=>{i===void 0&&(i=ns(s?e:"<!>"+e),n||(i=_n(i)));var l=r||zi?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=_n(l),c=l.lastChild;Co(a,c)}else Co(l,l);return l}}function hn(e,t,n="svg"){var r=!e.startsWith("<!>"),i=(t&ki)!==0,s=`<${n}>${r?e:"<!>"+e}</${n}>`,l;return()=>{if(!l){var a=ns(s),c=_n(a);if(i)for(l=document.createDocumentFragment();_n(c);)l.appendChild(_n(c));else l=_n(c)}var u=l.cloneNode(!0);if(i){var d=_n(u),h=u.lastChild;Co(d,h)}else Co(u,u);return u}}function Mt(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Rr();return e.append(t,n),Co(t,n),e}function O(e,t){e!==null&&e.before(t)}function os(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function xl(e,t){return Sl(e,t)}const Un=new Map;function Sl(e,{target:t,anchor:n,props:r={},events:i,context:s,intro:l=!0}){Vs();var a=new Set,c=h=>{for(var f=0;f<h.length;f++){var m=h[f];if(!a.has(m)){a.add(m);var v=ml(m);t.addEventListener(m,ho,{passive:v});var x=Un.get(m);x===void 0?(document.addEventListener(m,ho,{passive:v}),Un.set(m,1)):Un.set(m,x+1)}}};c(Ar(es)),wr.add(c);var u=void 0,d=el(()=>{var h=n??t.appendChild(Rr());return Qn(()=>{if(s){ne({});var f=Pt;f.c=s}i&&(r.$$events=i),u=e(h,r)||{},s&&oe()}),()=>{var v;for(var f of a){t.removeEventListener(f,ho);var m=Un.get(f);--m===0?(document.removeEventListener(f,ho),Un.delete(f)):Un.set(f,m)}wr.delete(c),h!==n&&((v=h.parentNode)==null||v.removeChild(h))}});return Cl.set(u,d),u}let Cl=new WeakMap;function Lt(e,t,n=!1){var r=e,i=null,s=null,l=ke,a=n?Jo:0,c=!1;const u=(h,f=!0)=>{c=!0,d(f,h)},d=(h,f)=>{l!==(l=h)&&(l?(i?Go(i):f&&(i=Qn(()=>f(r))),s&&xo(s,()=>{s=null})):(s?Go(s):f&&(s=Qn(()=>f(r))),i&&xo(i,()=>{i=null})))};er(()=>{c=!1,t(u),c||d(null,null)},a)}function Zn(e,t){return t}function El(e,t,n,r){for(var i=[],s=t.length,l=0;l<s;l++)Tr(t[l].e,i,!0);var a=s>0&&i.length===0&&n!==null;if(a){var c=n.parentNode;$s(c),c.append(n),r.clear(),Mn(e,t[0].prev,t[s-1].next)}Ki(i,()=>{for(var u=0;u<s;u++){var d=t[u];a||(r.delete(d.k),Mn(e,d.prev,d.next)),Ln(d.e,!a)}})}function cn(e,t,n,r,i,s=null){var l=e,a={flags:t,items:new Map,first:null},c=(t&Li)!==0;if(c){var u=e;l=u.appendChild(Rr())}var d=null,h=!1,f=Re(()=>{var m=n();return No(m)?m:m==null?[]:Ar(m)});er(()=>{var m=o(f),v=m.length;h&&v===0||(h=v===0,Nl(m,a,l,i,t,r,n),s!==null&&(v===0?d?Go(d):d=Qn(()=>s(l)):d!==null&&xo(d,()=>{d=null})),o(f))})}function Nl(e,t,n,r,i,s,l){var G,$,Y,k;var a=(i&Bs)!==0,c=(i&(Lr|kr))!==0,u=e.length,d=t.items,h=t.first,f=h,m,v=null,x,y=[],p=[],I,P,C,D;if(a)for(D=0;D<u;D+=1)I=e[D],P=s(I,D),C=d.get(P),C!==void 0&&((G=C.a)==null||G.measure(),(x??(x=new Set)).add(C));for(D=0;D<u;D+=1){if(I=e[D],P=s(I,D),C=d.get(P),C===void 0){var X=f?f.e.nodes_start:n;v=Ml(X,t,v,v===null?t.first:v.next,I,P,D,r,i,l),d.set(P,v),y=[],p=[],f=v.next;continue}if(c&&Al(C,I,D,i),(C.e.f&xn)!==0&&(Go(C.e),a&&(($=C.a)==null||$.unfix(),(x??(x=new Set)).delete(C))),C!==f){if(m!==void 0&&m.has(C)){if(y.length<p.length){var q=p[0],z;v=q.prev;var J=y[0],K=y[y.length-1];for(z=0;z<y.length;z+=1)ei(y[z],q,n);for(z=0;z<p.length;z+=1)m.delete(p[z]);Mn(t,J.prev,K.next),Mn(t,v,J),Mn(t,K,q),f=q,v=K,D-=1,y=[],p=[]}else m.delete(C),ei(C,f,n),Mn(t,C.prev,C.next),Mn(t,C,v===null?t.first:v.next),Mn(t,v,C),v=C;continue}for(y=[],p=[];f!==null&&f.k!==P;)(f.e.f&xn)===0&&(m??(m=new Set)).add(f),p.push(f),f=f.next;if(f===null)continue;C=f}y.push(C),v=C,f=C.next}if(f!==null||m!==void 0){for(var gt=m===void 0?[]:Ar(m);f!==null;)(f.e.f&xn)===0&&gt.push(f),f=f.next;var ct=gt.length;if(ct>0){var Q=(i&Li)!==0&&u===0?n:null;if(a){for(D=0;D<ct;D+=1)(Y=gt[D].a)==null||Y.measure();for(D=0;D<ct;D+=1)(k=gt[D].a)==null||k.fix()}El(t,gt,Q,d)}}a&&zr(()=>{var ot;if(x!==void 0)for(C of x)(ot=C.a)==null||ot.apply()}),ee.first=t.first&&t.first.e,ee.last=v&&v.e}function Al(e,t,n,r){(r&Lr)!==0&&wo(e.v,t),(r&kr)!==0?wo(e.i,n):e.i=n}function Ml(e,t,n,r,i,s,l,a,c,u){var d=(c&Lr)!==0,h=(c&Ws)===0,f=d?h?Qo(i):Ke(i):i,m=(c&kr)===0?l:Ke(l),v={i:m,v:f,k:s,a:null,e:null,prev:n,next:r};try{return v.e=Qn(()=>a(e,f,m,u),Us),v.e.prev=n&&n.e,v.e.next=r&&r.e,n===null?t.first=v:(n.next=v,n.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function ei(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==r;){var l=tr(s);i.before(s),s=l}}function Mn(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Gt(e,t,n,r,i){var a;var s=(a=t.$$slots)==null?void 0:a[n],l=!1;s===!0&&(s=t[n==="default"?"children":n],l=!0),s===void 0?i!==null&&i(e):s(e,l?()=>r:r)}function Wr(e){const t={};e.children&&(t.default=!0);for(const n in e.$$slots)t[n]=!0;return t}function uo(e,t,n){var r=e,i,s;er(()=>{i!==(i=t())&&(s&&(xo(s),s=null),i&&(s=Qn(()=>n(r,i))))},Jo)}function Yn(e,t,n){Hn(()=>{var r=ce(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var i=!1,s={};io(()=>{var l=n();st(l),i&&Ir(s,l)&&(s=l,r.update(l))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}const ni=[...` 	
\r\f \v\uFEFF`];function Pl(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,l=0;(l=r.indexOf(i,l))>=0;){var a=l+s;(l===0||ni.includes(r[l-1]))&&(a===r.length||ni.includes(r[a]))?r=(l===0?"":r.substring(0,l))+r.substring(a+1):l=a}}return r===""?null:r}function me(e,t,n,r,i,s){var l=e.__className;if(l!==n){var a=Pl(n,r,s);a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a),e.__className=n}else if(s){i??(i={});for(var c in s){var u=!!s[c];u!==!!i[c]&&e.classList.toggle(c,u)}}return s}function T(e,t,n,r){var i=e.__attributes??(e.__attributes={});i[t]!==(i[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[Ns]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Il(e).includes(t)?e[t]=n:e.setAttribute(t,n))}var oi=new Map;function Il(e){var t=oi.get(e.nodeName);if(t)return t;oi.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=Ei(r);for(var s in n)n[s].set&&t.push(s);r=Mr(r)}return t}function H(e,t,n,r){var i=e.__styles??(e.__styles={});i[t]!==n&&(i[t]=n,n==null?e.style.removeProperty(t):e.style.setProperty(t,n,""))}function Dl(e,t,n=t){var r=Mo();yl(e,"input",i=>{var s=i?e.defaultValue:e.value;if(s=dr(e)?fr(s):s,n(s),r&&s!==(s=t())){var l=e.selectionStart,a=e.selectionEnd;e.value=s??"",a!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(a,e.value.length))}}),ce(t)==null&&e.value&&n(dr(e)?fr(e.value):e.value),io(()=>{var i=t();dr(e)&&i===fr(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function dr(e){var t=e.type;return t==="number"||t==="range"}function fr(e){return e===""?null:+e}function Xr(e,t,n){var r=bn(e,t);r&&r.set&&(e[t]=n,Or(()=>{e[t]=null}))}var In,Jn,Eo,Uo,rs;const Vo=class Vo{constructor(t){ao(this,Uo);ao(this,In,new WeakMap);ao(this,Jn);ao(this,Eo);ur(this,Eo,t)}observe(t,n){var r=pn(this,In).get(t)||new Set;return r.add(n),pn(this,In).set(t,r),qr(this,Uo,rs).call(this).observe(t,pn(this,Eo)),()=>{var i=pn(this,In).get(t);i.delete(n),i.size===0&&(pn(this,In).delete(t),pn(this,Jn).unobserve(t))}}};In=new WeakMap,Jn=new WeakMap,Eo=new WeakMap,Uo=new WeakSet,rs=function(){return pn(this,Jn)??ur(this,Jn,new ResizeObserver(t=>{for(var n of t){Vo.entries.set(n.target,n);for(var r of pn(this,In).get(n.target)||[])r(n)}}))},Kr(Vo,"entries",new WeakMap);let xr=Vo;var Ll=new xr({box:"border-box"});function ri(e,t,n){var r=Ll.observe(e,()=>n(e[t]));Hn(()=>(ce(()=>n(e[t])),r))}function ii(e,t){return e===t||(e==null?void 0:e[dn])===t}function to(e={},t,n,r){return Hn(()=>{var i,s;return io(()=>{i=s,s=[],ce(()=>{e!==n(...s)&&(t(e,...s),i&&ii(n(...i),e)&&t(null,...i))})}),()=>{zr(()=>{s&&ii(n(...s),e)&&t(null,...s)})}}),e}function mo(e){return function(...t){var n=t[0];n.target===this&&(e==null||e.apply(this,t))}}function un(e){return function(...t){var n=t[0];return n.stopPropagation(),e==null?void 0:e.apply(this,t)}}function Ge(e){return function(...t){var n=t[0];return n.preventDefault(),e==null?void 0:e.apply(this,t)}}function pe(e=!1){const t=Pt,n=t.l.u;if(!n)return;let r=()=>st(t.s);if(e){let i=0,s={};const l=Qe(()=>{let a=!1;const c=t.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],a=!0);return a&&i++,i});r=()=>o(l)}n.b.length&&tl(()=>{si(t,r),bo(n.b)}),Xo(()=>{const i=ce(()=>n.m.map(Ss));return()=>{for(const s of i)typeof s=="function"&&s()}}),n.a.length&&Xo(()=>{si(t,r),bo(n.a)})}function si(e,t){if(e.l.s)for(const n of e.l.s)o(n);t()}function ae(e,t){var s;var n=(s=e.$$events)==null?void 0:s[t.type],r=No(n)?n.slice():n==null?[]:[n];for(var i of r)i.call(this,t)}function Gr(e,t,n){if(e==null)return t(void 0),n&&n(void 0),wn;const r=ce(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Vn=[];function Ko(e,t){return{subscribe:S(e,t).subscribe}}function S(e,t=wn){let n=null;const r=new Set;function i(a){if(Ir(e,a)&&(e=a,n)){const c=!Vn.length;for(const u of r)u[1](),Vn.push(u,e);if(c){for(let u=0;u<Vn.length;u+=2)Vn[u][0](Vn[u+1]);Vn.length=0}}}function s(a){i(a(e))}function l(a,c=wn){const u=[a,c];return r.add(u),r.size===1&&(n=t(i,s)||wn),a(e),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:l}}function _o(e,t,n){const r=!Array.isArray(e),i=r?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=t.length<2;return Ko(n,(l,a)=>{let c=!1;const u=[];let d=0,h=wn;const f=()=>{if(d)return;h();const v=t(r?u[0]:u,l,a);s?l(v):h=typeof v=="function"?v:wn},m=i.map((v,x)=>Gr(v,y=>{u[x]=y,d&=~(1<<x),c&&f()},()=>{d|=1<<x}));return c=!0,f(),function(){bo(m),h(),c=!1}})}function R(e){let t;return Gr(e,n=>t=n)(),t}let Do=!1,Sr=Symbol();function E(e,t,n){const r=n[t]??(n[t]={store:null,source:Qo(void 0),unsubscribe:wn});if(r.store!==e&&!(Sr in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=wn;else{var i=!0;r.unsubscribe=Gr(e,s=>{i?r.source.v=s:_(r.source,s)}),i=!1}return e&&Sr in n?R(e):o(r.source)}function yn(e,t,n){let r=n[t];return r&&r.store!==e&&(r.unsubscribe(),r.unsubscribe=wn),e}function V(e,t){return e.set(t),t}function we(){const e={};function t(){Or(()=>{for(var n in e)e[n].unsubscribe();Ci(e,Sr,{enumerable:!1,value:!0})})}return[e,t]}function yo(e,t,n){return e.set(n),t}function kl(e,t,n=1){return e.set(t+n),t}function Rl(e,t,n=1){const r=t+n;return e.set(r),r}function Ol(e){var t=Do;try{return Do=!1,[e(),Do]}finally{Do=t}}const Tl={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(co(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];co(i)&&(i=i());const s=bn(i,t);if(s&&s.set)return s.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(co(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=bn(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===dn||t===Pi)return!1;for(let n of e.props)if(co(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props){co(n)&&(n=n());for(const r in n)t.includes(r)||t.push(r)}return t}};function Yr(...e){return new Proxy({props:e},Tl)}function g(e,t,n,r){var q;var i=(n&Xs)!==0,s=!no||(n&Gs)!==0,l=(n&Fs)!==0,a=(n&js)!==0,c=!1,u;l?[u,c]=Ol(()=>e[t]):u=e[t];var d=dn in e||Pi in e,h=l&&(((q=bn(e,t))==null?void 0:q.set)??(d&&t in e&&(z=>e[t]=z)))||void 0,f=r,m=!0,v=!1,x=()=>(v=!0,m&&(m=!1,a?f=ce(r):f=r),f);u===void 0&&r!==void 0&&(h&&s&&Ds(),u=x(),h&&h(u));var y;if(s)y=()=>{var z=e[t];return z===void 0?x():(m=!0,v=!1,z)};else{var p=(i?Qe:Re)(()=>e[t]);p.f|=Ai,y=()=>{var z=o(p);return z!==void 0&&(f=void 0),z===void 0?f:z}}if((n&Ys)===0)return y;if(h){var I=e.$$legacy;return function(z,J){return arguments.length>0?((!s||!J||I||c)&&h(J?y():z),z):y()}}var P=!1,C=!1,D=Qo(u),X=Qe(()=>{var z=y(),J=o(D);return P?(P=!1,C=!0,J):(C=!1,D.v=z)});return i||(X.equals=Dr),function(z,J){if(Pn!==null&&(P=C,y(),o(D)),arguments.length>0){const K=J?o(X):s&&l?Fn(z):z;return X.equals(K)||(P=!0,_(D,K),v&&f!==void 0&&(f=K),ce(()=>o(X))),z}return o(X)}}function nn(e){Pt===null&&oo(),no&&Pt.l!==null?Fr(Pt).m.push(e):Xo(()=>{const t=ce(e);if(typeof t=="function")return t})}function ir(e){Pt===null&&oo(),nn(()=>()=>ce(e))}function zl(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function eo(){const e=Pt;return e===null&&oo(),(t,n,r)=>{var s;const i=(s=e.s.$$events)==null?void 0:s[t];if(i){const l=No(i)?i.slice():[i],a=zl(t,n,r);for(const c of l)c.call(e.x,a);return!a.defaultPrevented}return!0}}function Bl(e){Pt===null&&oo(),Pt.l===null&&Di(),Fr(Pt).b.push(e)}function is(e){Pt===null&&oo(),Pt.l===null&&Di(),Fr(Pt).a.push(e)}function Fr(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Wl="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Wl);zs();const Xl="modulepreload",Gl=function(e,t){return new URL(e,t).href},li={},fo=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const l=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=Gl(u,r),u in li)return;li[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let v=l.length-1;v>=0;v--){const x=l[v];if(x.href===u&&(!d||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Xl,d||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((v,x)=>{m.addEventListener("load",v),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(l){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=l,window.dispatchEvent(a),!a.defaultPrevented)throw l}return i.then(l=>{for(const a of l||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};function Yl(e,t){const n=e.clientX-t.clientX,r=e.clientY-t.clientY;return Math.sqrt(n*n+r*r)}function Fl(){const e=()=>Math.floor(Math.random()*256),t=e(),n=e(),r=e();return`rgb(${t},${n},${r})`}const jl={"(":"round","[":"square","([":"stadium","[[":"subroutine","[(":"cylindrical","((":"circle","{":"rhombus","{{":"hexagon"},ai={"-":"straight","~":"bezier"},ss={"(":")","[":"]","{":"}"},Hl=/[-=~]*>(?:\s*\|(.+?)\|)?/g,Kl=e=>{const t=e.split(`
`),n={parentNodes:[],nodeList:{}};for(const r of t){const{parentNodes:i,childNodes:s,edge:l}=ql(r);for(const a of i){n.nodeList[a.id]||n.parentNodes.push(a);for(const c of s){if(n.nodeList[a.id]){if(n.nodeList[c.id]&&n.nodeList[c.id].children.some(({node:u})=>u.id===a.id))throw new Error("Circular reference detected");n.nodeList[a.id].children.push({node:n.nodeList[c.id]||c,...l})}else a.children.push({node:n.nodeList[c.id]||c,...l}),n.nodeList[a.id]=a;n.nodeList[c.id]?n.nodeList[c.id].parents.push({node:n.nodeList[a.id]||a}):(c.parents.push({node:n.nodeList[a.id]||a}),n.nodeList[c.id]=c),n.parentNodes=n.parentNodes.filter(u=>u.id!==c.id)}}}return n},ql=e=>{const t=[],n=[],r=e.trim();let i="";const s=r.match(Hl);if(s)i=s[0];else throw new Error("Invalid edge");const[l,a]=r.split(i);for(const u of l.split("&"))t.push(ci(u));for(const u of a.split("&"))n.push(ci(u));const c=Ul(i);return{parentNodes:t,childNodes:n,edge:c}},ci=e=>{e=e.trim();const t=e[0],n=e.slice(1);let r="",i="";const s="Default",l={shape:""},a=[];for(let c=0;c<n.length;c++)if(Vl(n[c]))a.push(n[c]);else if(ss[a[a.length-1]]===n[c]){i=jl[a.join("")];break}else r+=n[c];return l.shape=i,l.content=r,{id:t,data:l,type:s,children:[],parents:[],depth:0,nesting:0}},Ul=e=>{e=e.trim();let t="";const[n,r]=e.split("|"),i=n[0];if(i in ai)t=ai[i];else throw new Error("Not a valid edge type");return r?{shape:t,content:r.trim(),length:Math.floor((n.trim().length-1)/2)}:{shape:t,length:Math.floor((n.trim().length-1)/2)}};function Vl(e){return e in ss}function $l(){return Math.random().toString(36).substring(7)}function Zl(e,t){const n=Math.sign(e.x).toString(),r=Math.sign(e.y).toString(),i=Math.sign(t.x).toString(),s=Math.sign(t.y).toString();return`${n}${r}${i}${s}`}function Jl(e,t){return{1001:`a ${e} ${e} 0 0 1 ${e} ${e}`,"0110":`a ${e} ${e} 0 0 0 ${e} ${e}`,"100-1":`a ${e} ${e} 0 0 0 ${e} -${e}`,"0-110":`a ${e} ${e} 0 0 1 ${e} -${e}`,"-1001":`a ${e} ${e} 0 0 0 -${e} ${e}`,"01-10":`a ${e} ${e} 0 0 1 -${e} ${e}`,"-100-1":`a ${e} ${e} 0 0 1 -${e} -${e}`,"0-1-10":`a ${e} ${e} 0 0 0 -${e} -${e}`}[t]||""}function ui(e,t){const n=t*(Math.PI/180),r=e.x*Math.cos(n)-e.y*Math.sin(n),i=e.x*Math.sin(n)+e.y*Math.cos(n);return{x:r,y:i}}const di=(e,t,n,r)=>e+` l ${t} ${n} `+r,Oe=S({x:0,y:0}),Cr=S(0),Ue=S(!1),Er=S(!1),ls=Ko({x:0,y:0},e=>{const t=s=>{e({x:s.clientX,y:s.clientY})},n=s=>{if(s.touches.length===2){const l=Yl(s.touches[0],s.touches[1]);Cr.set(l);const a={x:s.touches[0].clientX,y:s.touches[0].clientY};e(a)}else if(s.touches.length===1){const l=s.touches[0].clientX,a=s.touches[0].clientY;e({x:l,y:a}),Ue.set(!0)}},r=s=>{n(s),window.addEventListener("touchend",i),window.addEventListener("touchmove",n)},i=()=>{Ue.set(!1),Cr.set(0),window.removeEventListener("touchmove",n)};return document.addEventListener("mousemove",t),window.addEventListener("touchstart",r,!0),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("touchstart",r),window.removeEventListener("touchmove",n),window.removeEventListener("touchend",i)}});var Ql=zt("<div><div></div></div>");function ta(e,t){ne(t,!1);const[n,r]=we(),i=()=>E(D,"$groups",n),s=()=>E(ls,"$cursorPositionRaw",n),l=()=>E(o(a),"$selectedNodes",n),a=b(),c=b(),u=b(),d=b(),h=b(),f=b(),m=b(),v=b(),x=b();let y=g(t,"graph",8),p=g(t,"anchor",8),I=g(t,"adding",8,!1),P=g(t,"creating",8,!1),C=g(t,"color",8,null);const{groups:D}=y();let X,q=b();nn(z);function z(){X=Array.from(document.querySelectorAll(".svelvet-node")).map($=>{const{top:Y,left:k,width:ot,height:ft}=$.getBoundingClientRect();return{id:$.id,top:Y,left:k,width:ot,height:ft}})}function J(){if(!X)return;const G=X.reduce(($,Y)=>{if(o(h)+p().left<=Y.left&&o(d)+p().top<=Y.top&&o(h)+p().left+Math.abs(o(u))>=Y.left+Y.width&&o(d)+p().top+Math.abs(o(c))>=Y.top+Y.height){const k=Y.id,ot=y().nodes.get(k);if(!ot)return $;$.push(ot)}return $},[]);I()?G.forEach($=>{l().add($)}):V(o(a),new Set(G)),V(o(a),l())}w(()=>i(),()=>{yn(_(a,i().selected.nodes),"$selectedNodes",n)}),w(()=>(s(),st(p())),()=>{_(c,s().y-p().y-p().top)}),w(()=>(s(),st(p())),()=>{_(u,s().x-p().x-p().left)}),w(()=>(st(p()),o(c)),()=>{_(d,Math.min(p().y,p().y+o(c)))}),w(()=>(st(p()),o(u)),()=>{_(h,Math.min(p().x,p().x+o(u)))}),w(()=>o(d),()=>{_(f,`${o(d)}px`)}),w(()=>o(h),()=>{_(m,`${o(h)}px`)}),w(()=>o(c),()=>{_(v,`${Math.abs(o(c))}px`)}),w(()=>o(u),()=>{_(x,`${Math.abs(o(u))}px`)}),w(()=>(o(u),o(c)),()=>{(o(u)||o(c))&&J()}),Ae(),pe();var K=Ql();let gt;var ct=bt(K);let Q;to(ct,G=>_(q,G),()=>o(q)),Xt(()=>{gt=me(K,1,"selection-border svelte-10ds4jd",null,gt,{creating:P()}),H(K,"--prop-selection-box-color",C()),H(K,"height",o(v)),H(K,"width",o(x)),H(K,"top",o(f)),H(K,"left",o(m)),Q=me(ct,1,"selection-box svelte-10ds4jd",null,Q,{creating:P()})}),O(e,K),oe(),r()}const ea=3,na=.1,oa=10,ra=100,ia=50,sa="#000",la="#fff",aa="12px",ca=22,ua=1.4,da=40,go={north:{x:0,y:-1},south:{x:0,y:1},east:{x:1,y:0},west:{x:-1,y:0},self:{x:0,y:0}};var fa=hn('<circle class="background-dot svelte-rryw83"></circle>'),ha=hn('<line class="background-line svelte-rryw83"></line><line class="background-line svelte-rryw83"></line>',1),ga=hn('<circle class="background-dot svelte-rryw83"></circle>'),va=hn('<line class="background-line svelte-rryw83"></line><line class="background-line svelte-rryw83"></line>',1),pa=hn('<pattern id="graph-coarse-pattern" patternUnits="userSpaceOnUse"><!></pattern>'),ma=hn('<rect width="100%" height="100%" fill="url(#graph-coarse-pattern)"></rect>'),_a=zt('<div id="background-wrapper" class="svelte-rryw83"><svg class="svelte-rryw83"><defs><pattern id="graph-pattern" patternUnits="userSpaceOnUse"><!></pattern><!></defs><rect width="100%" height="100%" fill="url(#graph-pattern)"></rect><!></svg></div>');function ya(e,t){ne(t,!1);const[n,r]=we(),i=()=>E(X,"$translationStore",n),s=()=>E(D,"$scaleStore",n),l=b(),a=b(),c=b(),u=b(),d=b(),h=Dt("graph");let f=g(t,"style",8,"dots"),m=g(t,"gridWidth",8,ca),v=g(t,"dotSize",8,ua),x=g(t,"bgColor",8,null),y=g(t,"dotColor",8,null),p=g(t,"opacityThreshold",8,3),I=g(t,"majorGrid",8,0),P=g(t,"minOpacity",8,.4);const C=h.transforms,D=C.scale,X=C.translation;let q=b(),z=b(),J=b(),K=b(),gt=b(),ct=b(1),Q=b(1);w(()=>i(),()=>{_(l,i())}),w(()=>s(),()=>{_(a,s())}),w(()=>(o(a),st(m())),()=>{_(c,o(a)*m())}),w(()=>(o(a),st(v())),()=>{_(u,o(a)*v()/2)}),w(()=>o(c),()=>{_(d,o(c)/2)}),w(()=>(o(z),o(q),o(J),o(u),o(a),o(l),st(p()),st(P())),()=>{var vt,W;_(z,((vt=o(q))==null?void 0:vt.offsetWidth)||0),_(J,((W=o(q))==null?void 0:W.offsetHeight)||0),_(K,(o(z)+o(u))*(1-o(a))/2+o(l).x),_(gt,(o(J)+o(u))*(1-o(a))/2+o(l).y),_(ct,o(a)>p()?1:o(a)/p()+P()),_(Q,o(a)>p()/3?1:o(a)/(p()/3)+P())}),Ae(),pe();var G=_a(),$=bt(G),Y=bt($),k=bt(Y),ot=bt(k);{var ft=vt=>{var W=fa();Xt(()=>{T(W,"r",o(u)),T(W,"cx",o(d)),T(W,"cy",o(d)),H(W,"--calculated-dot-color",y())}),O(vt,W)},L=vt=>{var W=Mt(),U=dt(W);{var Bt=ut=>{var j=ha(),wt=dt(j);T(wt,"y1",0);var xt=F(wt);T(xt,"x1",0),Xt(()=>{T(wt,"x1",o(d)),T(wt,"x2",o(d)),T(wt,"y2",o(c)),T(wt,"stroke-width",o(u)),H(wt,"--calculated-dot-color",y()),T(xt,"y1",o(d)),T(xt,"y2",o(d)),T(xt,"x2",o(c)),T(xt,"stroke-width",o(u)),H(xt,"--calculated-dot-color",y())}),O(ut,j)};Lt(U,ut=>{f()==="lines"&&ut(Bt)},!0)}O(vt,W)};Lt(ot,vt=>{f()==="dots"?vt(ft):vt(L,!1)})}var At=F(k);{var pt=vt=>{var W=pa(),U=bt(W);{var Bt=j=>{var wt=ga();Xt(()=>{T(wt,"r",o(u)*2),T(wt,"cx",o(d)),T(wt,"cy",o(d)),H(wt,"--calculated-dot-color",y())}),O(j,wt)},ut=j=>{var wt=Mt(),xt=dt(wt);{var _t=mt=>{var yt=va(),ht=dt(yt);T(ht,"y1",0);var qt=F(ht);T(qt,"x1",0),Xt(()=>{T(ht,"x1",o(d)),T(ht,"x2",o(d)),T(ht,"y2",o(c)*I()),T(ht,"stroke-width",o(u)*1.2),H(ht,"--calculated-dot-color",y()),T(qt,"y1",o(d)),T(qt,"y2",o(d)),T(qt,"x2",o(c)*I()),T(qt,"stroke-width",o(u)*1.2),H(qt,"--calculated-dot-color",y())}),O(mt,yt)};Lt(xt,mt=>{f()==="lines"&&mt(_t)},!0)}O(j,wt)};Lt(U,j=>{f()==="dots"?j(Bt):j(ut,!1)})}Xt(()=>{T(W,"x",o(K)),T(W,"y",o(gt)),T(W,"width",o(c)*I()),T(W,"height",o(c)*I())}),O(vt,W)};Lt(At,vt=>{I()>0&&vt(pt)})}var A=F(Y),It=F(A);{var Yt=vt=>{var W=ma();Xt(()=>T(W,"opacity",o(Q))),O(vt,W)};Lt(It,vt=>{I()>0&&vt(Yt)})}to(G,vt=>_(q,vt),()=>o(q)),Xt(()=>{H(G,"--calculated-background-color",x()),T(k,"x",o(K)),T(k,"y",o(gt)),T(k,"width",o(c)),T(k,"height",o(c)),T(A,"opacity",o(ct))}),O(e,G),oe(),r()}var ba=zt('<div role="button" tabindex="0" class="bounding-box-border svelte-1e5jg43"><div class="bounding-box svelte-1e5jg43"></div></div>');function wa(e,t){ne(t,!1);const[n,r]=we(),i=()=>E(d(),"$position",n),s=()=>E(m,"$width",n),l=()=>E(v,"$height",n),a=()=>E(h(),"$color",n),c=b();let u=g(t,"dimensions",8),d=g(t,"position",8),h=g(t,"color",8),f=g(t,"groupName",8);const{width:m,height:v}=u(),x=eo();function y(){x("groupClick",{groupName:f()})}w(()=>st(f()),()=>{_(c,`${f()}-bounding-box`)}),Ae(),pe();var p=ba(),I=bt(p);Xt(()=>{T(p,"id",o(c)),T(p,"style",`border: solid 4px ${a()??""};`),H(p,"top",`${i().y}px`),H(p,"left",`${i().x}px`),H(p,"width",`${s()}px`),H(p,"height",`${l()}px`),H(I,"background-color",a())}),Tt("contextmenu",p,Ge(un(function(P){ae.call(this,t,P)}))),Tt("mousedown",p,Ge(un(y))),O(e,p),oe(),r()}function xa(e,t){ne(t,!1);const[n,r]=we(),i=()=>E(l,"$groupBoxes",n),l=Dt("graph").groupBoxes;pe();var a=Mt(),c=dt(a);cn(c,1,()=>Array.from(i()),([u,d])=>u,(u,d)=>{let h=()=>o(d)[0];wa(u,Yr(()=>o(d)[1],{get groupName(){return h()},$$events:{groupClick(m){ae.call(this,t,m)}}}))}),O(e,a),oe(),r()}function hr(e){const t=e.style.width,n=e.style.height;e.style.width="fit-content",e.style.height="fit-content";const r=e.offsetWidth,i=e.offsetHeight;return e.style.width=t,e.style.height=n,[r,i]}function as(e,t,n,r,i){const s={x:0,y:0},l=r.x-i.left-i.width/2,a=r.y-i.top-i.height/2,c=(l-n.x)/e,u=(a-n.y)/e;return s.x=l-c*t,s.y=a-u*t,s}function cs(e,t,n){const r=t*n,i=e-r;return Number(Math.max(na,Math.min(ea,i)).toFixed(9))}const Po=(e,t,n,r,i,s,l)=>{const{clientX:a,clientY:c}=e,u=s,d=a-n,h=c-t,f=l.x,m=l.y,v=r*(1-s)/2,x=i*(1-s)/2,y=d-f-v,p=h-m-x,I=y/u,P=p/u;return{x:I,y:P}};function Sa(e,t,n){const{top:r,left:i,width:s,height:l}=R(e),a=R(t.scale),c=R(t.translation);return{scaled:Po({clientX:n.x,clientY:n.y},r,i,s,l,a,c),scale:a}}function Ca(e,t,n){const{scale:r,translation:i}=n,s=R(r),l=R(i),a=t.x-e.x,c=t.y-e.y,u=l.x+a*s,d=l.y+c*s;return{x:u,y:d}}function Ea(e,t){return e.x*t.x+e.y*t.y}function Na(e,t,n){const r=[],i=t.x-e.x,s=t.y-e.y,l=Ma(e.direction,t.direction),a=Ea(e.direction,t.direction)===0,c=Aa(e,t),u=ie(e.direction,-1,-1),d=ie(t.direction,-1,-1),h={x:Math.abs(e.direction.y),y:Math.abs(e.direction.x)},f=ie(e.direction,i-n*e.direction.x*(a?1:l?0:2),s-n*e.direction.y*(a?1:l?0:2)),m=ie(t.direction,i+n*t.direction.x*(a?1:l?0:2),s+n*t.direction.y*(a?1:l?0:2)),v=Math.sign(f.x)===-1||Math.sign(f.y)===-1,x=Math.sign(m.x)===1||Math.sign(m.y)===1,y=Math.abs(i),p=Math.abs(s),I=ie(e.direction,n,n),P=ie(d,n,n),C=ie(t.direction,n,n),D=ie(e.direction,y,p),X=ie(d,y,p),q=ie(e.direction,y/2,p/2),z=ie(d,y/2,p/2),J=ie(h,i,s),K=!c&&!x&&!v,gt=e.x+I.x,ct=e.y+I.y,Q=t.x+C.x,G=t.y+C.y;if(v&&r.push(I),c&&!x&&!v)r.push(D),r.push(X);else if(l)v||r.push(ie(e.direction,n+y,n+p)),r.push(J),x||r.push(ie(d,n+y,n+p));else if(K)r.push(q),r.push(J),r.push(z);else if(v&&x)if(a){const $=Math.abs(gt-Q),Y=Math.abs(ct-G);r.push(ie(t.direction,y<n*2?t.direction.x*(i+t.direction.x*n):y+n,p<n*2?t.direction.y*(s+t.direction.y*n):p+n)),r.push(ie(u,$,Y))}else{const $=Math.abs(gt-Q),Y=Math.abs(ct-G);r.push(ie(h,i/2,s/2)),r.push(ie(t.direction,$,Y)),r.push(ie(h,i/2,s/2))}else if(v){const $=Math.abs(gt-t.x),Y=Math.abs(ct-t.y);r.push(ie(d,y<n*2?y-n:y/2,p<n*2?p-n:p/2)),r.push(ie(u,$,Y)),r.push(ie(d,Math.max(n,y/2),Math.max(n,p/2)))}else if(x){const $=Math.abs(Q-e.x),Y=Math.abs(G-e.y);r.push(ie(e.direction,Math.max(n,y/2),Math.max(n,p/2))),r.push(ie(t.direction,$,Y)),r.push(ie(e.direction,y<n*2?y-n:y/2,p<n*2?p-n:p/2))}return x&&r.push(P),r}function Aa(e,t){const{x:n,y:r}=e.direction,{x:i,y:s}=t.direction,l=t.x-e.x,a=t.y-e.y;return n*s===i*r?!1:Math.sign(a)===Math.sign(r+s)!=(Math.sign(l)===Math.sign(n+i))}function ie(e,t,n){return{x:e.x*t,y:e.y*n}}function Ma(e,t){return e.x===t.x&&e.y===t.y}function Pa(e,t){const{width:n,height:r}=e,{top:i,left:s,right:l,bottom:a}=t,c=l-s,u=a-i;if(!c||!u)return{x:null,y:null,scale:null};const d=s+c/2,h=i+u/2,f=Math.min(n/c,r/u)*.8,m=n/2,v=r/2,x=m-d,y=v-h;return{x:x*f,y:y*f,scale:f}}const Lo=(e,t,n)=>Math.min(Math.abs(e||t)/2,n);function gr(e,t){const r=e.getTotalLength()*t;return e.getPointAtLength(r)}function qo(){const e=new Map,{subscribe:t,set:n,update:r}=S(e);return{subscribe:t,set:n,update:r,add:(s,l)=>(r(a=>(a.set(l,s),a)),e),get:s=>e.get(s)||null,getAll:()=>Array.from(e.values()),delete:s=>{let l=!1;return r(a=>(a.delete(s),l=!0,a)),l},count:()=>e.size}}function Ia(e){const{id:t,inputs:n,outputs:r,resizable:i,dimensions:s,editable:l,direction:a,zIndex:c,position:u,selectionColor:d,borderWidth:h,edge:f}=e,{bgColor:m,borderColor:v,rotation:x,borderRadius:y,connections:p,textColor:I,locked:P,group:C}=e,D=qo(),X=(J="self")=>{R(D).forEach(K=>{(J==="self"||R(K.direction)===J)&&K.recalculatePosition()})};return{id:typeof t=="string"&&t.slice(0,2)==="N-"?t:`N-${t}`,position:S({x:(u==null?void 0:u.x)||0,y:(u==null?void 0:u.y)||0}),dimensions:{width:S((s==null?void 0:s.width)||0),height:S((s==null?void 0:s.height)||(s==null?void 0:s.width))},group:S(C||null),locked:S(P||!1),inputs:S(n),outputs:S(r),recalculateAnchors:X,rotation:S(x||0),moving:S(!1),resizingWidth:S(!1),resizingHeight:S(!1),rotating:S(!1),editable:S(l||!1),resizable:S(i),anchors:D,zIndex:S(c||2),collapsed:S(!1),edge:f||null,borderRadius:S(y),bgColor:S(m||null),direction:S(a),label:S(e.label||""),borderColor:S(v||null),borderWidth:S(h),selectionColor:S(d||null),textColor:S(I||null),connections:S(p)}}function Da(e,t){const n=[e,t].sort();return`${n[0]}+${n[1]}`}function fi(e,t,n){var a,c,u,d,h;const{source:r,target:i}=e,l={id:r.id&&i.id?Da(r.id,i.id):"cursor",target:e.target,source:e.source,component:t,type:S((n==null?void 0:n.type)||null),color:(n==null?void 0:n.color)||S(null),width:S((n==null?void 0:n.width)||0),animated:S((n==null?void 0:n.animated)||!1),rendered:S(!1),start:(n==null?void 0:n.start)||null,end:(n==null?void 0:n.end)||null};if(n!=null&&n.disconnect&&(l.disconnect=!0),n!=null&&n.label){const f={text:S(n==null?void 0:n.label.text),color:S(((a=n==null?void 0:n.label)==null?void 0:a.color)||sa),textColor:S(((c=n==null?void 0:n.label)==null?void 0:c.textColor)||la),fontSize:S(((u=n==null?void 0:n.label)==null?void 0:u.fontSize)||aa),dimensions:{width:S(((d=n==null?void 0:n.label.dimensions)==null?void 0:d.width)||ra),height:S(((h=n==null?void 0:n.label.dimensions)==null?void 0:h.height)||ia)},borderRadius:S((n==null?void 0:n.label.borderRadius)||oa)};l.label=f}return l}function La(){const e=new Map,t=new Set,{subscribe:n,set:r,update:i}=S(e),s={subscribe:n,set:r,update:i,add:(l,a)=>{if(typeof a!="string"){const c=Array.from(a),u=c[0],d=c[1];if(u.connected.update(h=>h.add(d)),d.connected.update(h=>h.add(u)),s.match(...Array.from(a)).length)return;t.forEach(h=>h(l,"connection"))}i(c=>(c.set(a,l),c))},getAll:()=>Array.from(e.values()),get:l=>e.get(l)||null,match:(...l)=>Array.from(e.keys()).filter(a=>a==="cursor"?!1:l.every(c=>c?a.has(c):!0)),fetch:(l,a)=>{const c=Array.from(e.keys()).filter(u=>u==="cursor"?!1:[l,a].every(d=>d?u.has(d):!0))[0];return e.get(c)||null},delete:l=>{if(typeof l!="string"){const c=Array.from(l),u=c[0],d=c[1];u.connected.update(h=>(h.delete(d),h)),d.connected.update(h=>(h.delete(u),h))}let a=!1;return i(c=>{const u=c.get(l);return u&&(c.delete(l),a=!0,typeof l!="string"&&t.forEach(d=>d(u,"disconnection"))),c}),a},onEdgeChange:l=>(t.add(l),()=>t.delete(l)),count:()=>e.size};return s}function ka(e,t,n,r){return _o([e,t,n,r],([s,l,a,c])=>{const u={clientX:s.x,clientY:s.y};return Po(u,l.top,l.left,l.width,l.height,c,a)})}function Ra(e,t,n,r){const i=S({top:1/0,left:1/0,right:-1/0,bottom:-1/0}),s=S({top:1/0,left:1/0,right:-1/0,bottom:-1/0});let l,a=R(t),c=R(n),u=R(r),d=a.width/c,h=a.height/c;function f(){const{x:v,y:x}=Po({clientX:a.left,clientY:a.top},a.top,a.left,a.width,a.height,c,u),y=R(s);i.set({top:Math.min(y.top,x),left:Math.min(y.left,v),right:Math.max(y.right,v+d),bottom:Math.max(y.bottom,h+x)})}function m(v=!1){let x=1/0,y=1/0,p=-1/0,I=-1/0;for(const P of e.getAll()){console.log("dentro del for, este es e node:",P);const{x:C,y:D}=R(P.position),X=R(P.dimensions.width),q=R(P.dimensions.height);y=Math.min(y,C),x=Math.min(x,D),p=Math.max(p,C+X),I=Math.max(I,D+q)}s.set({top:x,left:y,right:p,bottom:I}),f(),v&&(l=requestAnimationFrame(()=>m(v)))}return e.subscribe(()=>{console.log("dentro del nodes.subscribe...........Aqui no estan llegando los nodes"),m()}),Er.subscribe(v=>{v&&m(v),v||cancelAnimationFrame(l)}),Ue.subscribe(v=>{v&&m(v),v||cancelAnimationFrame(l)}),t.subscribe(()=>{a=R(t),d=a.width/c,h=a.height/c,f()}),n.subscribe(()=>{c=R(n),d=a.width/c,h=a.height/c,f()}),r.subscribe(()=>{u=R(r),f()}),{graphBounds:i,nodeBounds:s}}function Oa(e,t,n){const{width:r,height:i,top:s,left:l}=e,a={clientX:r/2,clientY:i/2};return Po(a,s,l,r,i,n,t)}function us(e,t){const{zoom:n,editable:r,translation:i,direction:s,locked:l,edge:a,nodes:c}=t,u=S({x:(i==null?void 0:i.x)||0,y:(i==null?void 0:i.y)||0}),d=S({top:0,left:0,width:0,height:0,bottom:0,right:0}),h=S(n),f=S(!1),m=qo(),v=Ra(m,d,h,u),x=_o([d,u,h],([p,I,P])=>Oa(p,I,P));return{id:e,nodes:m,edges:La(),transforms:{translation:u,scale:h},maxZIndex:S(2),dimensions:d,bounds:v,center:x,mounted:f,direction:s||"LR",editable:r||!1,edge:a||null,editing:S(null),cursor:ka(ls,d,u,h),locked:S(l||!1),groups:S({selected:{parent:S(null),nodes:S(new Set)},hidden:{parent:S(null),nodes:S(new Set)}}),groupBoxes:qo(),activeGroup:S(null),initialNodePositions:S([])}}function Ta(e,t,n,r,i,s,l,a,c,u,d,h){const{width:f,height:m}=i,{x:v,y:x}=r,y=R(t.position),p=S({x:v-y.x+f/2,y:x-y.y+m/2}),I=_o([t.position,p],([J,K])=>({x:J.x+K.x,y:J.y+K.y})),P=e.transforms,C=e.dimensions,D=S(c||"self"),X=()=>{const J=document.getElementById(n),K=R(D),gt=go[K];if(!J)return;const{x:ct,y:Q,width:G,height:$}=J.getBoundingClientRect(),Y=R(p),k=R(I),{scaled:ot,scale:ft}=Sa(C,P,{x:ct,y:Q}),L=ot.x-k.x,At=ot.y-k.y;p.set({x:Y.x+L+G/ft/2+gt.x*G/ft/2,y:Y.y+At+$/ft/2+gt.y*$/ft/2})},q=_o([t.moving,t.resizingWidth,t.resizingHeight,t.rotating],([J,K,gt,ct])=>J||K||gt||ct),z=_o([t.rotation],([J])=>J);return{id:n,position:I,offset:p,direction:D,dynamic:S(u||!1),type:a,edge:l,moving:q,mounted:S(!1),recalculatePosition:X,connected:S(new Set),store:s||null,inputKey:d||null,edgeColor:h||S(null),rotation:z,node:t}}const vr=qo(),ko={width:200,height:100};function zo(e,t){return{x:Math.round(e/ko.width)*ko.width,y:Math.round(t/ko.height)*ko.height}}const Ro=10;function ds(e){const t=R(e);return Array.from(t).map(r=>R(r.position))}function hi(e,t){console.log("moveNodes called");let n;const r=R(e.groups),i=R(e.activeGroup);if(console.log("Graph Groups:",r),console.log("Active Group:",i),!i)return;const s=r[i].nodes;if(!s)return;const l=R(e.initialNodePositions),{x:a,y:c}=R(Oe),u=Array.from(R(s)),d=R(e.groupBoxes);console.log("Group Boxes:",d),u.forEach(f=>f.moving.set(!0)),h();function h(){const f=R(e.cursor);let m=f.x-a,v=f.y-c;if(t){const y=zo(m,v);m=y.x,v=y.y}const x={x:m,y:v};u.forEach((y,p)=>{const{group:I,position:P}=y,C=l[p];let D;if(i==="selected"){const X=R(I);X&&(D=d.get(X))}if(!D)za(C,x,P);else{const X=R(y.dimensions.width),q=R(y.dimensions.height),z=hs(D,X,q);fs(C,x,P,z)}}),R(Ue)?n=requestAnimationFrame(h):cancelAnimationFrame(n)}}function za(e,t,n){n.set({x:e.x+t.x,y:e.y+t.y})}function fs(e,t,n,r){n.set({x:Math.min(Math.max(r.left,e.x+t.x),r.right),y:Math.min(Math.max(r.top,e.y+t.y),r.bottom)})}function hs(e,t,n){const{x:r,y:i}=R(e.position);return console.log("Group Box Position:",{x:r,y:i}),{left:r+Ro,right:r+R(e.dimensions.width)-t-Ro,top:i+Ro,bottom:i+R(e.dimensions.height)-n-Ro}}function gi(e=1,t,n,r=.1){const i=R(t),{width:s,height:l,top:a,left:c}=i,u=n.scale,d=R(n.translation),h=R(u),f=cs(h,e,r),m=as(h,f,d,{x:s/2+c,y:l/2+a},i);u.set(f),n.translation.set(m)}var Ba=zt('<div class="svelvet-graph-wrapper svelte-19pa6i0" role="presentation"><!></div>');function Wa(e,t){ne(t,!1);const[n,r]=we(),i=()=>E(f,"$translation",n),s=()=>E(h,"$scale",n),l=()=>E(m,"$cursor",n),a=b(),c=b(),u=Dt("graph"),d=u.transforms,h=d.scale,f=d.translation,m=u.cursor;let v=g(t,"isMovable",8),x=b(),y=b(!1);function p(){V(f,Ca(R(Oe),l(),d)),_(x,requestAnimationFrame(p))}w(()=>i(),()=>{_(a,i())}),w(()=>(o(a),s()),()=>{_(c,`translate(${o(a).x}px, ${o(a).y}px) scale(${s()})`)}),w(()=>(st(v()),o(y),o(x)),()=>{v()&&!o(y)?(_(y,!0),_(x,requestAnimationFrame(p))):(!v()||!o(y))&&(_(y,!1),cancelAnimationFrame(o(x)))}),Ae(),pe();var I=Ba(),P=bt(I);Gt(P,t,"default",{},null),Xt(()=>H(I,"transform",o(c))),Tt("contextmenu",I,mo(Ge(function(C){ae.call(this,t,C)}))),Tt("click",I,mo(Ge(function(C){ae.call(this,t,C)}))),Tt("touchstart",I,mo(Ge(function(C){ae.call(this,t,C)}))),O(e,I),oe(),r()}var Xa=zt("<!> <!>",1);function Ga(e,t){ne(t,!1);const[n,r]=we(),i=()=>E(h,"$activeGroup",n),s=()=>E(Ue,"$tracking",n),l=()=>E(v,"$cursor",n),a=()=>E(f,"$groups",n);console.log("Componente GraphRenderer.svelte");const c=Dt("graph"),u=Dt("snapTo");let d=g(t,"isMovable",8);const h=c.activeGroup,f=c.groups,m=c.initialNodePositions,v=c.cursor;function x(y){V(Ue,!0);const{groupName:p}=y.detail;V(h,p),V(Oe,l()),V(m,ds(a()[p].nodes))}w(()=>(i(),s(),hi),()=>{i()&&s()&&hi(c,u)}),Ae(),pe(),Wa(e,{get isMovable(){return d()},children:(y,p)=>{var I=Xa(),P=dt(I);Gt(P,t,"default",{},null);var C=F(P,2);xa(C,{$$events:{groupClick:x}}),O(y,I)},$$slots:{default:!0}}),oe(),r()}const Ya=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],Fa=new Set(Ya),vi=e=>Fa.has(e);var ja=zt('<input type="text">');function Ha(e,t){ne(t,!1);const[n,r]=we(),i=()=>E(l,"$textStore",n);let s=g(t,"placeholder",8);const l=Dt("textStore");pe();var a=ja();Xt(()=>T(a,"placeholder",s())),Tt("keydown",a,un(function(c){ae.call(this,t,c)})),Tt("click",a,un(function(c){ae.call(this,t,c)})),Tt("mousedown",a,un(function(c){ae.call(this,t,c)})),Dl(a,i,c=>V(l,c)),O(e,a),oe(),r()}const Ka=new Set(["INPUT","SELECT","BUTTON","TEXTAREA"]);var qa=zt("<div><!></div>"),Ua=zt('<div role="button"><!> <div class="anchors left svelte-1iknrz0"><!></div> <div class="anchors right svelte-1iknrz0"><!></div> <div class="anchors top svelte-1iknrz0"><!></div> <div class="anchors bottom svelte-1iknrz0"><!></div></div>');function Va(e,t){ne(t,!1);const[n,r]=we(),i=()=>E(vt(),"$groups",n),s=()=>E(qt,"$position",n),l=()=>E(Ie,"$selectedNodes",n),a=()=>E(Te,"$hiddenNodes",n),c=()=>E(be,"$resized",n),u=()=>E(k,"$duplicate",n),d=()=>E(U(),"$centerPoint",n),h=()=>E(ge,"$widthStore",n),f=()=>E(ue,"$heightStore",n),m=()=>E(Oe,"$initialClickPosition",n),v=()=>E(ot,"$graphDOMElement",n),x=()=>E(Ct,"$zIndex",n),y=()=>E(W(),"$maxZIndex",n),p=()=>E(Yt(),"$locked",n),I=()=>E(rt,"$nodeLock",n),P=()=>E(nt,"$editable",n),C=()=>E(Jt,"$group",n),D=()=>E(Me,"$rotation",n),X=()=>E(Ft,"$bgColor",n),q=()=>E(jt,"$textColor",n),z=()=>E(Ce,"$borderColor",n),J=()=>E(et,"$selectionColor",n),K=()=>E($t,"$borderRadius",n),gt=()=>E(at,"$borderWidth",n),ct=b(),Q=b(),G=b(),$=b(),Y=Dt("mounted"),k=Dt("duplicate"),ot=Dt("graphDOMElement"),ft=eo();let L=g(t,"node",8),At=g(t,"isDefault",8),pt=g(t,"useDefaults",8),A=g(t,"center",8),It=g(t,"nodeStore",8),Yt=g(t,"locked",8),vt=g(t,"groups",8),W=g(t,"maxZIndex",8),U=g(t,"centerPoint",8),Bt=g(t,"cursor",8),ut=g(t,"initialNodePositions",8),j=g(t,"activeGroup",8),wt=g(t,"editing",8),xt=g(t,"dimensionsProvided",8,!1),_t=g(t,"title",8);const mt=S(0),yt=S(null),ht=L().id,qt=L().position,ge=L().dimensions.width,ue=L().dimensions.height,et=L().selectionColor,nt=L().editable,rt=L().locked,Ct=L().zIndex,Ft=L().bgColor,$t=L().borderRadius,jt=L().textColor,Jt=L().group,Ce=L().borderColor,at=L().borderWidth,Me=L().rotation,{selected:Pe,hidden:ye}=i(),Te=ye.nodes,Ie=Pe.nodes,be=S(!1);Kt("node",L()),Kt("anchorsMounted",mt),Kt("resized",be),Kt("nodeConnectEvent",yt),nn(()=>{if(A()){const kt={x:d().x-h()/2,y:d().y-f()/2};L().position.set(kt),Ue.set(!0),Ue.set(!1)}Y.update(kt=>kt+1)}),ir(()=>{o(Q)&&(l().delete(L()),V(Ie,l())),Y.update(kt=>kt-1)});function on(){o(Q)?(L()&&l().delete(L()),V(Ie,l())):(L()&&l().add(L()),V(Ie,l()))}function Ht(kt){V(Oe,R(Bt())),v().focus(),x()!==y()&&x()!==1/0&&V(Ct,Rl(W(),y()));const Rt=kt.target;if(!Ka.has(Rt.tagName)&&(kt.preventDefault(),ft("nodeClicked",{node:L(),e:kt}),!(p()||I()))){if("touches"in kt){if(kt.touches&&kt.touches.length>1)return}else kt.button===2&&P()&&V(wt(),L());V(Ue,!0),Qt(kt)}}function Qt(kt){let Rt,De,Ee=!1;const de=C();de&&(Rt=i()[de],De=R(Rt.parent),Ee=De===L()),Ee?V(j(),de):V(j(),"selected"),!kt.shiftKey&&o(Q)?V(j(),"selected"):(!kt.shiftKey&&!o(Q)&&!kt.shiftKey&&(l().clear(),V(Ie,l())),on()),V(ut(),ds(i().selected.nodes))}function rn(){It().delete(ht)}function $e(kt){const Rt=R(Bt()),De=Rt.x-m().x,Ee=Rt.y-m().y;Math.abs(De)+Math.abs(Ee)<4&&ft("nodeReleased",{e:kt,node:L()}),V(yt,kt)}function Ye(kt){return kt.addEventListener("mousedown",Ht),kt.addEventListener("touchstart",Ht),{destroy(){kt.removeEventListener("mousedown",Ht),kt.removeEventListener("touchstart",Ht)}}}w(()=>s(),()=>{_(ct,s())}),w(()=>(l(),st(L())),()=>{_(Q,l().has(L()))}),w(()=>(a(),st(L())),()=>{_(G,a().has(L()))}),w(()=>(st(xt()),c()),()=>{_($,xt()||c())}),w(()=>(o(Q),u(),st(L())),()=>{o(Q)&&u()&&ft("duplicate",L())}),Ae(),pe();var Ze=Mt(),En=dt(Ze);{var On=kt=>{var Rt=Ua();T(Rt,"id",ht);let De;T(Rt,"tabindex",0);var Ee=bt(Rt);{var de=Z=>{var St=qa();H(St,"width","fit-content"),H(St,"height","fit-content");var Wt=bt(St);Gt(Wt,t,"default",{grabHandle:Ye,get selected(){return o(Q)},destroy:rn},null),ri(St,"clientHeight",Vt=>V(ue,Vt)),ri(St,"clientWidth",Vt=>V(ge,Vt)),O(Z,St)},Nn=Z=>{var St=Mt(),Wt=dt(St);Gt(Wt,t,"default",{grabHandle:Ye,get selected(){return o(Q)},destroy:rn},null),O(Z,St)};Lt(Ee,Z=>{o($)?Z(Nn,!1):Z(de)})}var gn=F(Ee,2),_e=bt(gn);Gt(_e,t,"anchorWest",{},null);var ze=F(gn,2),Le=bt(ze);Gt(Le,t,"anchorEast",{},null);var Be=F(ze,2),N=bt(Be);Gt(N,t,"anchorNorth",{},null);var tt=F(Be,2),it=bt(tt);Gt(it,t,"anchorSouth",{},null),Hn(()=>Tt("contextmenu",Rt,Ge(un(function(Z){ae.call(this,t,Z)})))),Hn(()=>Tt("mouseup",Rt,$e)),Yn(Rt,Z=>Ye==null?void 0:Ye(Z)),Xt(()=>{De=me(Rt,1,"svelvet-node svelte-1iknrz0",null,De,{selected:o(Q),locked:p()||I()}),T(Rt,"title",_t()),H(Rt,"top",`${o(ct).y??""}px`),H(Rt,"left",`${o(ct).x??""}px`),H(Rt,"z-index",x()),H(Rt,"width",o($)?h()+"px":"fit-content"),H(Rt,"height",o($)?f()+"px":"fit-content"),H(Rt,"transform",`rotate(${D()??""}deg)`),H(Rt,"--prop-background-color",X()||(At()||pt()?null:"transparent")),H(Rt,"--prop-text-color",q()),H(Rt,"--prop-border-color",z()),H(Rt,"--prop-selection-color",J()),H(Rt,"--prop-border-radius",K()?`${K()}px`:At()||pt()?null:"0px"),H(Rt,"--prop-border-width",gt()||(At()||pt()?null:"0px")),T(gn,"id",`anchors-west-${L().id}`),T(ze,"id",`anchors-east-${L().id}`),T(Be,"id",`anchors-north-${L().id}`),T(tt,"id",`anchors-south-${L().id}`)}),O(kt,Rt)};Lt(En,kt=>{o(G)||kt(On)})}O(e,Ze),oe(),r()}var $a=zt("<div></div> <div></div>",1),Za=zt("<div></div> <div></div>",1),Ja=zt("<div></div>"),Qa=zt("<div></div>"),tc=zt("<!> <!> <!> <!>",1);function ec(e,t){ne(t,!1);const[n,r]=we(),i=()=>E(k,"$position",n),s=()=>E(A,"$widthStore",n),l=()=>E(pt,"$heightStore",n),a=()=>E(ft,"$resizingHeight",n),c=()=>E(It,"$cursor",n),u=()=>E(At,"$nodeRotation",n),d=()=>E(ot,"$resizingWidth",n),h=()=>E(L,"$rotating",n),f=()=>E(Oe,"$initialClickPosition",n),m=b(),v=b(),x=b(),y=Dt("graph"),p=Dt("node"),I=Dt("resized");let P=g(t,"width",8,!1),C=g(t,"height",8,!1),D=g(t,"rotation",8,!1),X=g(t,"minHeight",12,0),q=g(t,"minWidth",12,0),z,J=P(),K=P(),gt=C(),ct=C(),Q=P()&&C(),G=0,$=0,Y=b(R(p.position));const k=p.position,ot=p.resizingWidth,ft=p.resizingHeight,L=p.rotating,At=p.rotation,pt=p.dimensions.height,A=p.dimensions.width,It=y.cursor;let Yt=b(),vt=b(),W=b(1);nn(()=>{try{z=document.querySelector(`#${p.id}`),z&&(et=>(q(et[0]),X(et[1])))(hr(z))}catch(et){console.error(et)}});function U(et,nt){const rt=Ft=>{Ft.stopPropagation(),Ft.preventDefault(),nt.left||nt.top?_(W,-1):_(W,1),Er.set(!0),V(Oe,R(It)),_(Yt,s()),_(vt,l()),_(Y,i()),nt.both?V(ot,!0):V(ot,!1),V(ot,nt.left||nt.right||nt.both||!1),V(ft,nt.top||nt.bottom||nt.both||!1),z&&($t=>(q($t[0]),X($t[1])))(hr(z)),window.addEventListener("mouseup",Ct)},Ct=()=>{V(ot,!1),V(ft,!1),Er.set(!1),window.removeEventListener("mouseup",Ct)};return et.addEventListener("mousedown",rt),{destroy(){et.removeEventListener("mousedown",rt)}}}function Bt(et){const nt=Ct=>{Ct.stopPropagation(),Ct.preventDefault(),G=u(),V(Oe,R(It));const Ft=f().x-o(x).x,$t=f().y-o(x).y;$=Math.atan2($t,Ft),V(L,!0),window.addEventListener("mouseup",rt)},rt=()=>{V(L,!1),window.removeEventListener("mouseup",rt)};return et.addEventListener("mousedown",nt),{destroy(){et.removeEventListener("mousedown",nt)}}}function ut(){const et=R(It),nt=et.x-o(x).x,rt=et.y-o(x).y,Ct=Math.atan2(rt,nt),Ft=$-Ct;return G-j(Ft)}function j(et){return et*(180/Math.PI)}Bl(()=>{z&&(et=>(q(et[0]),X(et[1])))(hr(z)),s()<q()&&I.set(!1),l()<X()&&I.set(!1)}),w(()=>(h(),c()),()=>{h()&&(c(),V(At,ut()))}),w(()=>(a(),c(),st(X()),o(vt),o(W),o(Y),u()),()=>{if(a()){const et=R(Oe),nt=c(),rt=Math.max(X(),o(vt)+(nt.y-et.y)*o(W));rt>X()?(I.set(!0),V(pt,rt)):I.set(!1),o(W)===-1&&V(k,{x:o(Y).x,y:o(Y).y+nt.y-et.y}),u()!==0&&p.position.update(Ct=>({y:o(Y).y-(rt-o(vt))/2,x:Ct.x}))}}),w(()=>(d(),c(),st(q()),o(Yt),o(W),o(Y),u()),()=>{if(d()){const et=R(Oe),nt=c(),rt=Math.max(q(),o(Yt)+(nt.x-et.x)*o(W));rt>q()?(I.set(!0),V(A,rt)):I.set(!1),o(W)===-1&&V(k,{x:o(Y).x+nt.x-et.x,y:o(Y).y}),u()!==0&&p.position.update(Ct=>({x:o(Y).x-(rt-o(Yt))/2,y:Ct.y}))}}),w(()=>i(),()=>{_(m,i().x)}),w(()=>i(),()=>{_(v,i().y)}),w(()=>(o(m),s(),o(v),l()),()=>{_(x,{x:o(m)+s()/2,y:o(v)+l()/2})}),Ae(),pe();var wt=tc(),xt=dt(wt);{var _t=et=>{var nt=$a(),rt=dt(nt);let Ct;Yn(rt,(jt,Jt)=>U==null?void 0:U(jt,Jt),()=>({left:J}));var Ft=F(rt,2);let $t;Yn(Ft,(jt,Jt)=>U==null?void 0:U(jt,Jt),()=>({right:K})),Xt(()=>{Ct=me(rt,1,"left svelte-1ryxg7v",null,Ct,{width:P()}),$t=me(Ft,1,"right svelte-1ryxg7v",null,$t,{width:P()})}),O(et,nt)};Lt(xt,et=>{P()&&et(_t)})}var mt=F(xt,2);{var yt=et=>{var nt=Za(),rt=dt(nt);let Ct;Yn(rt,(jt,Jt)=>U==null?void 0:U(jt,Jt),()=>({top:gt}));var Ft=F(rt,2);let $t;Yn(Ft,(jt,Jt)=>U==null?void 0:U(jt,Jt),()=>({bottom:ct})),Xt(()=>{Ct=me(rt,1,"top svelte-1ryxg7v",null,Ct,{height:C()}),$t=me(Ft,1,"bottom svelte-1ryxg7v",null,$t,{height:C()})}),O(et,nt)};Lt(mt,et=>{C()&&et(yt)})}var ht=F(mt,2);{var qt=et=>{var nt=Ja();me(nt,1,"svelte-1ryxg7v",null,{},{both:Q}),Yn(nt,(rt,Ct)=>U==null?void 0:U(rt,Ct),()=>({both:Q})),O(et,nt)};Lt(ht,et=>{Q&&et(qt)})}var ge=F(ht,2);{var ue=et=>{var nt=Qa();let rt;Yn(nt,Ct=>Bt==null?void 0:Bt(Ct)),Xt(()=>rt=me(nt,1,"svelte-1ryxg7v",null,rt,{rotation:D()})),O(et,nt)};Lt(ge,et=>{D()&&et(ue)})}O(e,wt),oe(),r()}var nc=zt("<div></div>");function oc(e,t){let n=g(t,"output",8),r=g(t,"input",8),i=g(t,"connecting",8),s=g(t,"connected",8),l=g(t,"hovering",8),a=g(t,"bgColor",8);var c=nc();let u;Xt(()=>{u=me(c,1,"svelvet-anchor svelte-19t6skv",null,u,{output:n(),input:r(),connected:s(),connecting:i(),hovering:l()}),H(c,"--prop-anchor-color",a())}),O(e,c)}let pr;function rc(e){const t=e.parentNode;if(!t)return;t.removeChild(e);const n=document.querySelector(".svelvet-graph-wrapper");n&&n.appendChild(e)}var ic=hn('<defs><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="12.5" refY="5" orient="auto"><polygon class="arrow svelte-ppcocz" points="0 0, 15 5, 0 10"></polygon></marker><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="0" refY="5" orient="auto"><polygon class="arrow svelte-ppcocz" points="0 5, 15 0, 15 10"></polygon></marker></defs>'),sc=hn("<path></path>"),lc=zt('<div class="default-label svelte-ppcocz"> </div>'),ac=hn('<foreignObject width="100%" height="100%" class="svelte-ppcocz"><span class="label-wrapper svelte-ppcocz"><!></span></foreignObject>'),cc=hn('<svg class="edges-wrapper svelte-ppcocz"><!><path role="presentation"></path><!><!></svg>');function pi(e,t){var sn,vn;const n=Wr(t);ne(t,!1);const[r,i]=we(),s=()=>E(kt,"$sourceDynamic",r),l=()=>E(Rt,"$targetDynamic",r),a=()=>E(o(q),"$edgeColor",r),c=()=>E(o(z),"$edgeLabel",r),u=()=>E(En,"$sourcePositionStore",r),d=()=>E(On,"$targetPositionStore",r),h=()=>E(de,"$sourceNodePositionStore",r),f=()=>E(Nn,"$targetNodePositionStore",r),m=()=>E(rn,"$sourceDirection",r),v=()=>E(Ye,"$sourceRotation",r),x=()=>E($e,"$targetDirection",r),y=()=>E(Ze,"$targetRotation",r),p=()=>E(gn,"$edgeType",r),I=()=>E(De,"$sourceMoving",r),P=()=>E(Ee,"$targetMoving",r),C=()=>E(o(xt),"$sourceZIndex",r),D=()=>E(o(_t),"$targetZIndex",r),X=b(),q=b(),z=b(),J=b(),K=b(),gt=b(),ct=b(),Q=b(),G=b(),$=b(),Y=b(),k=b(),ot=b(),ft=b(),L=b(),At=b(),pt=b(),A=b(),It=b(),Yt=b(),vt=b(),W=b(),U=b(),Bt=b(),ut=b(),j=b(),wt=b(),xt=b(),_t=b(),mt=b(),yt=b(),ht=Dt("edgeStore"),qt=Dt("edgeStyle"),ge=Dt("endStyles"),ue=Dt("raiseEdgesOnSelect"),et=Dt("edgesAboveNode");let nt=g(t,"edge",24,()=>Dt("edge")),rt=g(t,"straight",8,qt==="straight"),Ct=g(t,"step",8,qt==="step"),Ft=g(t,"start",24,()=>ge[0]),$t=g(t,"end",24,()=>ge[1]),jt=g(t,"animate",8,!1),Jt=g(t,"label",8,""),Ce=g(t,"enableHover",8,!1),at=g(t,"edgeClick",8,null),Me=g(t,"labelPosition",8,.5),Pe=g(t,"width",8,null),ye=g(t,"color",8,null),Te=g(t,"labelColor",8,null),Ie=g(t,"textColor",8,null),be=g(t,"cornerRadius",8,8),on=g(t,"targetColor",8,null);const Ht=nt().source,Qt=nt().target,rn=Ht.direction,$e=Qt.direction,Ye=Ht.rotation,Ze=Qt.rotation,En=Ht.position,On=Qt.position,kt=Ht.dynamic,Rt=Qt.dynamic,De=Ht.moving,Ee=Qt.moving,de=(sn=Ht.node)==null?void 0:sn.position,Nn=(vn=Qt.node)==null?void 0:vn.position,gn=nt().type,_e=nt().id;let ze=b(),Le=b(),Be=b({x:0,y:0}),N=b(!1),tt=b(!1),it=b(!1),Z=b(!1),St=b(!1),Wt=b();nt().rendered.set(!0),nn(()=>{setTimeout(()=>{o(Le)&&_(Be,gr(o(Le),Me()))},0),rc(o(Wt))}),is(()=>{o(Le)&&_(Be,gr(o(Le),Me()))}),ir(()=>{o(Wt).remove(),cancelAnimationFrame(pr)});function Vt(){o(N)&&(o(Le)&&_(Be,gr(o(Le),Me())),pr=requestAnimationFrame(Vt))}function fe(){if(Ht.id===null||Qt.id===null)return;const ve=ht.match(Ht,Qt);ht.delete(ve[0]),Ht==null||Ht.connected.update(re=>(Qt&&re.delete(Qt),re)),Qt==null||Qt.connected.update(re=>(Ht&&re.delete(Ht),re))}w(()=>(s(),l()),()=>{_(X,s()||l())}),w(()=>{},()=>{yn(_(q,(Ht==null?void 0:Ht.edgeColor)||(Qt==null?void 0:Qt.edgeColor)||null),"$edgeColor",r)}),w(()=>st(nt()),()=>{var ve;yn(_(z,(ve=nt().label)==null?void 0:ve.text),"$edgeLabel",r)}),w(()=>(st(ye()),a()),()=>{_(J,ye()||a()||null)}),w(()=>(st(Jt()),c()),()=>{_(K,Jt()||c()||"")}),w(()=>o(K),()=>{_(gt,o(K)||n.label)}),w(()=>u(),()=>{_(ct,u())}),w(()=>d(),()=>{_(Q,d())}),w(()=>h(),()=>{_(G,h())}),w(()=>f(),()=>{_($,f())}),w(()=>o(ct),()=>{_(Y,o(ct).x)}),w(()=>o(ct),()=>{_(k,o(ct).y)}),w(()=>o(Q),()=>{_(ot,o(Q).x)}),w(()=>o(Q),()=>{_(ft,o(Q).y)}),w(()=>(o(ot),o(Y)),()=>{_(L,o(ot)-o(Y))}),w(()=>(o(ft),o(k)),()=>{_(At,o(ft)-o(k))}),w(()=>o(L),()=>{_(pt,Math.abs(o(L)))}),w(()=>o(At),()=>{_(A,Math.abs(o(At)))}),w(()=>o(pt),()=>{_(It,Math.max(30,Math.min(600,o(pt)/2)))}),w(()=>o(A),()=>{_(Yt,Math.max(30,Math.min(600,o(A)/2)))}),w(()=>(o(X),o($),o(G),o(it),o(Z),R),()=>{if(o(X)&&Ht.node&&Qt.node){const ve=o($).x-o(G).x,re=o($).y-o(G).y;_(it,re>0),_(Z,ve>0);let se,Fe;if(o(it)){const te=R(Ht.node.dimensions.height),Ot=o(G).y+te;se=o($).y-Ot}else{const te=R(Qt.node.dimensions.height),Ot=o($).y+te;se=o(G).y-Ot}if(o(Z)){const te=R(Ht.node.dimensions.width),Ot=o(G).x+te;Fe=o($).x-Ot}else{const te=R(Qt.node.dimensions.width),Ot=o($).x+te;Fe=o(G).x-Ot}_(tt,se>Fe)}}),w(()=>(o(X),o(tt),o(it),o(Z),s(),l()),()=>{if(o(X)){let ve,re;o(tt)?(ve=o(it)?"south":"north",re=o(it)?"north":"south"):(ve=o(Z)?"east":"west",re=o(Z)?"west":"east"),s()&&V(rn,ve),l()&&V($e,re)}}),w(()=>(m(),v()),()=>{_(vt,ui(go[m()],v()||0))}),w(()=>(x(),y()),()=>{_(W,ui(go[x()],y()||0))}),w(()=>(o(Y),o(vt),o(It)),()=>{_(U,o(Y)+o(vt).x*o(It))}),w(()=>(o(k),o(vt),o(Yt)),()=>{_(Bt,o(k)+o(vt).y*o(Yt))}),w(()=>(o(ot),o(W),o(It)),()=>{_(ut,o(ot)+o(W).x*o(It))}),w(()=>(o(ft),o(W),o(Yt)),()=>{_(j,o(ft)+o(W).y*o(Yt))}),w(()=>(o(U),o(Bt),o(ut),o(j)),()=>{_(wt,`C ${o(U)}, ${o(Bt)} ${o(ut)}, ${o(j)}`)}),w(()=>(st(Ct()),p(),o(Y),o(k),st(rt()),o(wt),o(ot),o(ft)),()=>{(!Ct()||_e==="cursor"||p()==="bezier")&&_(ze,`M ${o(Y)}, ${o(k)} ${rt()?"":o(wt)} ${o(ot)}, ${o(ft)}`)}),w(()=>(o(gt),o(N),I(),P()),()=>{o(gt)&&!o(N)&&(I()||P()||_e==="cursor")?(_(N,!0),Vt()):o(N)&&!I()&&!P()&&_e!=="cursor"&&(_(N,!1),cancelAnimationFrame(pr))}),w(()=>(st(Ct()),p(),o(Y),o(k),m(),o(ot),o(ft),x(),st(be()),di),()=>{if(Ct()&&_e!=="cursor"&&!(p()&&p()==="bezier")){const ve={x:o(Y),y:o(k),direction:go[m()]},re={x:o(ot),y:o(ft),direction:go[x()]},se=Na(ve,re,da),Fe=(te,Ot,ln)=>{if(Ot<se.length-1){const Bn=Zl(te,se[Ot+1]);return Jl(ln,Bn)}return""};_(ze,se.reduce((te,Ot,ln)=>{const Bn=Math.sign(Ot.x),M=Math.sign(Ot.y);let B=Ot.x,lt=Ot.y,Et="";if(be()){const Nt=se[ln+1]||{x:0,y:0},Ut=se[ln-1]||{x:0,y:0},le=Lo(Ot.x,Nt.x,be()),We=Lo(Nt.y,Ot.y,be()),je=Lo(Ut.x,Ot.x,be()),An=Lo(Ut.y,Ot.y,be()),Je=Math.min(je,An),He=Math.min(le,We);Ot.x?B=Ot.x-(He+Je)*Bn:lt=Ot.y-(He+Je)*M,Et=Fe(Ot,ln,He)}return di(te,B,lt,Et)},`M ${o(Y)}, ${o(k)}`))}}),w(()=>{},()=>{yn(_(xt,Ht.node.zIndex||0),"$sourceZIndex",r)}),w(()=>{},()=>{yn(_(_t,Qt.node.zIndex||0),"$targetZIndex",r)}),w(()=>(C(),D()),()=>{_(mt,Math.max(C(),D()))}),w(()=>(o(mt),C(),D()),()=>{_(yt,et==="all"?1e5:et?o(mt):ue===!0?o(mt)-1:ue==="source"?C()-1:ue==="target"?D()-1:0)}),Ae(),pe();var he=Mt(),xe=dt(he);{var Tn=ve=>{var re=cc(),se=bt(re);{var Fe=B=>{var lt=ic(),Et=bt(lt);T(Et,"id",_e+"-end-arrow");var Nt=bt(Et),Ut=F(Et);T(Ut,"id",_e+"-start-arrow");var le=bt(Ut);Xt(()=>{H(Nt,"--prop-edge-color",o(J)),H(le,"--prop-edge-color",o(J))}),O(B,lt)};Lt(se,B=>{(Ft()||$t())&&B(Fe)})}var te=F(se);T(te,"id",_e+"-target");let Ot;to(te,B=>_(Le,B),()=>o(Le));var ln=F(te);Gt(ln,t,"default",{get path(){return o(ze)},destroy:fe,get hovering(){return o(St)}},B=>{var lt=sc();T(lt,"id",_e);let Et;Xt(()=>{Et=me(lt,0,"edge svelte-ppcocz",null,Et,{animate:jt()}),T(lt,"d",o(ze)),T(lt,"marker-end",$t()==="arrow"?`url(#${_e+"-end-arrow"})`:""),T(lt,"marker-start",Ft()==="arrow"?`url(#${_e+"-start-arrow"})`:""),H(lt,"--prop-edge-color",o(J)),H(lt,"--prop-stroke-width",Pe()?Pe()+"px":null)}),O(B,lt)});var Bn=F(ln);{var M=B=>{var lt=ac(),Et=bt(lt),Nt=bt(Et);Gt(Nt,t,"label",{destroy:fe,get hovering(){return o(St)}},Ut=>{var le=lc(),We=bt(le);Xt(()=>{H(le,"--prop-label-color",Te()),H(le,"--prop-label-text-color",Ie()),os(We,o(K))}),O(Ut,le)}),Xt(()=>{T(lt,"x",o(Be).x),T(lt,"y",o(Be).y)}),O(B,lt)};Lt(Bn,B=>{o(gt)&&B(M)})}to(re,B=>_(Wt,B),()=>o(Wt)),Xt(()=>{H(re,"z-index",o(yt)),Ot=me(te,0,"target svelte-ppcocz",null,Ot,{cursor:_e==="cursor"||!at()&&!Ce()}),T(te,"d",o(ze)),H(te,"cursor",at()||o(St)?"pointer":"move"),H(te,"--prop-target-edge-color",at()||o(St)?on()||null:"transparent")}),Tt("mousedown",te,function(...B){var lt;(lt=at())==null||lt.apply(this,B)}),Tt("mouseenter",te,()=>_(St,!0)),Tt("mouseleave",te,()=>_(St,!1)),O(ve,re)};Lt(xe,ve=>{Ht&&Qt&&ve(Tn)})}O(e,he),Xr(t,"destroy",fe);var zn=oe({destroy:fe});return i(),zn}function mi(e,t){ne(t,!1);let n=g(t,"edge",8);Kt("edge",n()),pe();var r=Mt(),i=dt(r);Gt(i,t,"default",{},null),O(e,r),oe()}let mr;const an=S(null);function uc(e,t,n){if(t==="self")return;const r=e.parentNode;if(!r)return;r.removeChild(e);const i=document.querySelector(`#anchors-${t}-${n.id}`);i&&(i.appendChild(e),e&&n.recalculateAnchors())}var dc=zt('<div role="button" tabindex="0"><!></div> <!> <!>',1);function vo(e,t){ne(t,!1);const[n,r]=we(),i=()=>E(an,"$connectingFrom",n),s=()=>E(Jt,"$nodeLevelConnections",n),l=()=>E(Q,"$anchorsMounted",n),a=()=>E(o(I),"$dynamicDirection",n),c=()=>E(z,"$mounted",n),u=()=>E(ct,"$nodeConnectEvent",n),d=()=>E(Ct,"$anchors",n),h=()=>E(o(p),"$connectedAnchors",n),f=()=>E(Ft,"$resizingWidth",n),m=()=>E($t,"$resizingHeight",n),v=()=>E(jt,"$rotating",n),x=()=>E(pt(),"$inputsStore",n),y=b(),p=b(),I=b(),P=Dt("dynamic"),C=Dt("node"),D=Dt("edgeStore"),X=Dt("cursorAnchor"),q=Dt("direction"),z=Dt("mounted"),J=Dt("graph"),K=Dt("nodeStore"),gt=Dt("graphEdge"),ct=Dt("nodeConnectEvent"),Q=Dt("anchorsMounted"),G=Dt("flowchart")||void 0;let $=g(t,"bgColor",8,null),Y=g(t,"id",8,0),k=g(t,"input",8,!1),ot=g(t,"output",8,!1),ft=g(t,"multiple",24,()=>ot()?!0:!k()),L=g(t,"dynamic",8,P||!1),At=g(t,"edge",8,null),pt=g(t,"inputsStore",8,null),A=g(t,"key",8,null),It=g(t,"outputStore",8,null),Yt=g(t,"connections",28,()=>[]),vt=g(t,"edgeColor",24,()=>S(null)),W=g(t,"edgeLabel",8,""),U=g(t,"locked",8,!1),Bt=g(t,"nodeConnect",8,!1),ut=g(t,"edgeStyle",8,null),j=g(t,"endStyles",24,()=>[null,null]),wt=g(t,"invisible",8,!1),xt=g(t,"direction",24,()=>q==="TD"?k()?"north":"south":k()?"west":"east"),_t=g(t,"title",8,"");const mt=eo(),yt=eo();let ht=b(),qt=b(!1),ge=b(!1),ue=b(0),et=k()===ot()?null:k()?"input":"output",nt=b([]);const rt=C.edge,Ct=C.anchors,Ft=C.resizingWidth,$t=C.resizingHeight,jt=C.rotating,Jt=C.connections,Ce=`A-${Y()||Ct.count()+1}/${C.id}`,at=Ta(J,C,Ce,{x:0,y:0},{width:0,height:0},pt()||It()||null,At()||rt||gt||null,et,xt(),L(),A(),vt());Ct.add(at,at.id),nn(()=>{var tt;o(ht)&&at.recalculatePosition();const N=Array.from(R(C.anchors)).reduce((it,[,Z])=>(Z.type==="output"&&it++,it),0);if((tt=s())!=null&&tt.length&&!k()){const it=[];let Z=null;s().forEach((St,Wt)=>{St&&(Z===null&&(Z=Wt),(Wt-Z)%N===0?(o(nt).push(St),it.push(null)):it.push(St))}),V(Jt,it)}kl(Q,l())}),is(()=>{o(ht)&&at.recalculatePosition()}),ir(()=>{Ze(),cancelAnimationFrame(mr)});function Me(N){var fe;D.delete("cursor");const tt={x:N.changedTouches[0].clientX,y:N.changedTouches[0].clientY},it=document.elementFromPoint(tt.x,tt.y);if(!it)return;const Z=it.parentElement;if(!Z)return;const St=Z.id,Wt=St.split("/")[1],Vt=(fe=K.get(Wt))==null?void 0:fe.anchors.get(St);Vt&&(D.delete("cursor"),Pe(at,Vt,N))}function Pe(N,tt,it){const Z=Ht(N,tt);Z&&Qt(),it.shiftKey||$e(Z)}function ye(N){var tt;if("changedTouches"in N&&o(y)){Me(N);return}if(!o(y)){if((tt=h())!=null&&tt.size&&!ft()){D.delete("cursor"),N.shiftKey||$e(!1);return}i()&&on(N)}}function Te(N){var tt;if(!U()){if((tt=h())!=null&&tt.size&&!ft()&&!i())return En();if(!i())return Ie();on(N)}}function Ie(){k()===ot()?(V(an,{anchor:at,store:null,key:null}),be(at,X)):k()?(V(an,{anchor:at,store:pt(),key:A()}),be(X,at)):ot()&&(V(an,{anchor:at,store:It(),key:null}),be(at,X))}function be(N,tt,it=!1){const Z={color:vt(),label:{text:W()}};it&&(Z.disconnect=!0),ut()&&(Z.type=ut()),j()[0]&&(Z.start=j()[0]),j()[1]&&(Z.start=j()[1]);const St=fi({source:N,target:tt},(N==null?void 0:N.edge)||null,Z);D.add(St,"cursor")}function on(N){if(D.delete("cursor"),!i())return;const tt=i().anchor.type;if(i().anchor===at||tt===at.type&&tt){$e(!1);return}at.recalculatePosition();let it,Z;k()===ot()?tt==="input"?(it=at,Z=i().anchor):(it=i().anchor,Z=at):k()?(it=i().anchor,Z=at):(it=at,Z=i().anchor),Pe(it,Z,N)}function Ht(N,tt){if(N===tt||R(N.connected).has(at))return!1;const it={color:vt(),label:{text:W()}};if(G){const St=N.node.id.slice(2),Wt=G.nodeList[St];if(Wt){const Vt=tt.node.id.slice(2),fe=Wt.children.filter(he=>he.node.id===Vt)[0];if(fe){const he=fe;it.label={text:he.content}}}}ut()&&(it.type=ut()),j()[0]&&(it.start=j()[0]),j()[1]&&(it.start=j()[1]);const Z=fi({source:N,target:tt},(N==null?void 0:N.edge)||null,it);return!N.node||!tt.node?!1:(D.add(Z,new Set([N,tt,N.node,tt.node])),!0)}function Qt(){if(k()&&i()&&i().store)x()&&A()&&pt()&&typeof pt().set=="function"&&typeof pt().update=="function"&&yo(pt(),ce(x)[A()]=i().store,ce(x));else if(ot()&&i()&&i().store){const{store:N,key:tt}=i();N&&tt&&typeof N.update=="function"&&N.update(it=>(It()&&(it[tt]=It()),it))}}function rn(){x()&&A()&&x()[A()]&&yo(pt(),ce(x)[A()]=S(R(x()[A()])),ce(x))}function $e(N){(N||!u())&&(V(an,null),V(ct,null))}function Ye(){o(qt)&&(o(ht)&&at.recalculatePosition(),mr=requestAnimationFrame(Ye))}function Ze(){D.delete("cursor"),D.match(at).forEach(tt=>D.delete(tt)),$e(!1),rn()}function En(){if(R(at.connected).size>1)return;const N=Array.from(R(at.connected))[0];if(N.type!=="input")if(Ze(),N.type==="output"){be(N,X,!0),rn();const tt=N.store;V(an,{anchor:N,store:tt,key:null})}else be(N,X,!0),V(an,{anchor:N,store:null,key:null})}function On(){o(nt).forEach((N,tt)=>{if(!N)return;De(N)&&Yt(Yt()[tt]=null,!0)}),_(nt,o(nt).filter(N=>N!==null))}function kt(){Yt().forEach(N=>{N&&De(N)})}function Rt(N){const tt=`N-${N[0]}`,it=K.get(tt);if(!it)return;const Z=it.anchors.get(`A-${N[1]}/N-${N[0]}`);if(!Z)return;const St=D.match(at,Z);St&&D.delete(St[0])}const De=N=>{let tt,it,Z=null;Array.isArray(N)?(tt=N[0].toString(),it=N[1].toString()):(tt=N.toString(),it=null);const St=`N-${tt}`,Wt=K.get(St);if(!Wt)return!1;if(it){const Vt=`A-${it}/${St}`;Z=Wt.anchors.get(Vt)||null}else{const Vt=R(Wt.anchors),fe=Array.from(Vt.values());if(!fe.length)return!1;Z=fe.reduce((he,xe)=>!he&&xe.type==="output"?null:xe.type==="output"?he:!he||R(xe.connected).size<R(he.connected).size?xe:he,null)}if(!Z)return!1;if(Ht(at,Z),Z.store&&(pt()||It())){if(k()&&Z.type==="output")x()&&A()&&pt()&&typeof pt().set=="function"&&typeof pt().update=="function"&&yo(pt(),ce(x)[A()]=Z.store,ce(x));else if(ot()&&Z.type==="input"){const{store:Vt,inputKey:fe}=Z;Vt&&fe&&typeof Vt.update=="function"&&Vt.update(he=>(It()&&(he[fe]=It()),he))}}return!0};w(()=>i(),()=>{var N;_(y,((N=i())==null?void 0:N.anchor)===at)}),w(()=>{},()=>{yn(_(p,at&&at.connected),"$connectedAnchors",n)}),w(()=>{},()=>{yn(_(I,at==null?void 0:at.direction),"$dynamicDirection",n)}),w(()=>(st(L()),o(ht),a()),()=>{L()&&o(ht)&&uc(o(ht),a(),C)}),w(()=>(c(),st(Yt())),()=>{c()===K.count()&&Yt().length&&kt()}),w(()=>(st(Bt()),u()),()=>{Bt()&&u()&&ye(u())}),w(()=>(c(),o(nt)),()=>{c()===K.count()&&o(nt).length&&On()}),w(()=>(o(ht),d(),h(),a()),()=>{o(ht)&&(d(),h(),a(),at.recalculatePosition())}),w(()=>(o(qt),f(),m(),v()),()=>{!o(qt)&&(f()||m()||v())?(_(qt,!0),Ye()):!f()&&!m()&&o(qt)&&!v()&&(_(qt,!1),cancelAnimationFrame(mr))}),w(()=>(h(),o(ue)),()=>{if(h()){if(h().size<o(ue))yt("disconnection",{node:C,anchor:at});else if(h().size>o(ue)){const N=Array.from(h()),tt=N[N.length-1];mt("connection",{node:C,anchor:at,connectedNode:tt.node,connectedAnchor:tt})}_(ue,h().size)}}),Ae(),pe();var Ee=dc(),de=dt(Ee);let Nn;var gn=bt(de);Gt(gn,t,"default",{get linked(){var N;return((N=h())==null?void 0:N.size)>=1},get hovering(){return o(ge)},get connecting(){return o(y)}},N=>{var tt=Mt(),it=dt(tt);{var Z=St=>{const Wt=Re(()=>{var Vt;return((Vt=h())==null?void 0:Vt.size)>=1});oc(St,{get output(){return ot()},get input(){return k()},get connecting(){return o(y)},get hovering(){return o(ge)},get bgColor(){return $()},get connected(){return o(Wt)}})};Lt(it,St=>{wt()||St(Z)})}O(N,tt)}),to(de,N=>_(ht,N),()=>o(ht));var _e=F(de,2);cn(_e,1,()=>Array.from(h()),N=>N.id,(N,tt,it,Z)=>{var St=Mt();const Wt=Re(()=>D.fetch(at,o(tt)));var Vt=dt(St);{var fe=he=>{const xe=Re(()=>o(Wt).component);mi(he,{get edge(){return o(Wt)},children:(Tn,zn)=>{var sn=Mt(),vn=dt(sn);Gt(vn,t,"edge",{},ve=>{var re=Mt(),se=dt(re);{var Fe=Ot=>{o(xe)(Ot,{})},te=Ot=>{pi(Ot,{})};Lt(se,Ot=>{o(xe)?Ot(Fe):Ot(te,!1)})}O(ve,re)}),O(Tn,sn)},$$slots:{default:!0}})};Lt(Vt,he=>{o(Wt)&&o(Wt).source===at&&he(fe)})}O(N,St)});var ze=F(_e,2);{var Le=N=>{var tt=Mt();const it=Re(()=>D.get("cursor"));var Z=dt(tt);{var St=Wt=>{const Vt=Re(()=>o(it).component);mi(Wt,{get edge(){return o(it)},children:(fe,he)=>{var xe=Mt(),Tn=dt(xe);Gt(Tn,t,"edge",{},zn=>{var sn=Mt(),vn=dt(sn);{var ve=se=>{o(Vt)(se,{})},re=se=>{pi(se,{})};Lt(vn,se=>{o(Vt)?se(ve):se(re,!1)})}O(zn,sn)}),O(fe,xe)},$$slots:{default:!0}})};Lt(Z,Wt=>{o(it)&&Wt(St)})}O(N,tt)};Lt(ze,N=>{o(y)&&N(Le)})}Xt(()=>{T(de,"id",at==null?void 0:at.id),Nn=me(de,1,"anchor-wrapper svelte-bazd6o",null,Nn,{locked:U()}),T(de,"title",_t()||"")}),Tt("mouseenter",de,()=>_(ge,!0)),Tt("mouseleave",de,()=>_(ge,!1)),Tt("mousedown",de,Ge(un(Te))),Tt("mouseup",de,un(ye)),Tt("touchstart",de,Ge(un(Te))),Tt("touchend",de,un(ye)),O(e,Ee),Xr(t,"disconnect",Rt);var Be=oe({disconnect:Rt});return r(),Be}var fc=zt("<!> <!>",1),hc=zt("<div></div> <div></div>",1),gc=zt('<div><!> <p class="svelte-j5bq7k"> </p> <!></div>');function vc(e,t){ne(t,!1);const[n,r]=we(),i=()=>E(v,"$borderRadius",n),s=()=>E(y,"$inputs",n),l=()=>E(p,"$outputs",n),a=()=>E(x,"$textColor",n),c=()=>E(m,"$label",n),u=()=>E(I,"$resizable",n),d=Dt("dynamic"),h=Dt("node");let f=g(t,"selected",8);const m=h.label,v=h.borderRadius,x=h.textColor,y=h.inputs,p=h.outputs,I=h.resizable,P=R(h.direction);let C=P==="TD",D=P==="TD",X=P!=="TD",q=P!=="TD";pe();var z=gc();let J;var K=bt(z);{var gt=k=>{var ot=fc(),ft=dt(ot);cn(ft,1,()=>({length:s()}),Zn,(At,pt)=>{vo(At,{$$events:{connection(A){ae.call(this,t,A)},disconnection(A){ae.call(this,t,A)}}})});var L=F(ft,2);cn(L,1,()=>({length:l()}),Zn,(At,pt)=>{vo(At,{$$events:{connection(A){ae.call(this,t,A)},disconnection(A){ae.call(this,t,A)}}})}),O(k,ot)},ct=k=>{var ot=hc(),ft=dt(ot);me(ft,1,"input-anchors svelte-j5bq7k",null,{},{top:C,left:X}),cn(ft,5,()=>({length:s()}),Zn,(At,pt)=>{vo(At,{input:!0,direction:C?"north":"west",$$events:{connection(A){ae.call(this,t,A)},disconnection(A){ae.call(this,t,A)}}})});var L=F(ft,2);me(L,1,"output-anchors svelte-j5bq7k",null,{},{bottom:D,right:q}),cn(L,5,()=>({length:l()}),Zn,(At,pt)=>{vo(At,{output:!0,direction:C?"south":"east",$$events:{connection(A){ae.call(this,t,A)},disconnection(A){ae.call(this,t,A)}}})}),O(k,ot)};Lt(K,k=>{d?k(gt):k(ct,!1)})}var Q=F(K,2),G=bt(Q),$=F(Q,2);{var Y=k=>{ec(k,{width:!0,height:!0,rotation:!0})};Lt($,k=>{u()&&k(Y)})}Xt(()=>{J=me(z,1,"default-node svelte-j5bq7k",null,J,{selected:f()}),H(z,"border-radius",`${i()??""}px`),H(Q,"color",a()),os(G,c())}),O(e,z),oe(),r()}function jr(e,t){const n=Wr(t);ne(t,!1);const[r,i]=we(),s=()=>E(o(a),"$nodePosition",r),l=()=>E(pt,"$nodes",r),a=b(),c=Dt("graph"),u=Dt("group");let d=g(t,"position",28,()=>({x:0,y:0})),h=g(t,"drop",8,!1),f=g(t,"dimensions",8,null),m=g(t,"id",8,0),v=g(t,"bgColor",8,null),x=g(t,"borderRadius",8,null),y=g(t,"borderColor",8,null),p=g(t,"borderWidth",8,null),I=g(t,"selectionColor",8,null),P=g(t,"textColor",8,null),C=g(t,"resizable",8,!1),D=g(t,"label",8,""),X=g(t,"inputs",8,1),q=g(t,"outputs",8,1),z=g(t,"width",8,null),J=g(t,"height",8,null),K=g(t,"TD",8,!1),gt=g(t,"LR",8,!1),ct=g(t,"zIndex",8,1),Q=g(t,"editable",8,!0),G=g(t,"locked",8,!1),$=g(t,"rotation",8,0),Y=g(t,"edge",8,null),k=g(t,"connections",24,()=>[]),ot=g(t,"useDefaults",8,!1),ft=g(t,"center",8,!1),L=g(t,"dynamic",8,!1),At=g(t,"title",8,"");const pt=c.nodes;Kt("dynamic",L());let A=b(),It=b(!0);nn(()=>{const j=K()?"TD":gt()?"LR":c.direction,wt=c.groupBoxes.get(u),xt=c.nodes.count()+1;_(It,!n.default),(n.anchorWest||n.anchorEast||n.anchorNorth||n.anchorSouth)&&_(It,!1);const _t=f()?f():z()||J()?{width:z()||J()||200,height:J()||z()||100}:o(It)?{width:200,height:100}:{width:0,height:0},mt={id:m()||xt,position:h()==="cursor"?{x:R(c.cursor).x,y:R(c.cursor).y}:wt?{x:R(wt.position).x+d().x,y:R(wt.position).y+d().y}:d(),dimensions:_t,editable:Q()||c.editable,label:D(),group:u,resizable:C(),inputs:X(),outputs:q(),zIndex:ct(),direction:j,locked:G(),rotation:$()};k().length&&(mt.connections=k()),p()&&(mt.borderWidth=p()),x()&&(mt.borderRadius=x()),y()&&(mt.borderColor=y()),I()&&(mt.selectionColor=I()),P()&&(mt.textColor=P()),v()&&(mt.bgColor=v()),Y()&&(mt.edge=Y()),_(A,Ia(mt)),wt&&c.groups.update(yt=>{const ht=R(yt[u].nodes);return yt[u].nodes.set(new Set([...ht,o(A)])),yt}),c.nodes.add(o(A),o(A).id)}),ir(()=>{c.nodes.delete(o(A).id)});function Yt(j){o(A)&&o(A).connections.set([j])}function vt(j){if(!o(A))return;(Array.isArray(j)?j:[j]).forEach(xt=>{const[_t,mt]=Array.isArray(xt)?xt:[xt,null],yt=`N-${_t}`,ht=c.nodes.get(yt);if(!ht)return;let qt=null;const ge=mt?`A-${mt}/${yt}`:null;ge&&(qt=ht.anchors.get(ge));const ue=c.edges.match(o(A),ht,qt);ue.length&&c.edges.delete(ue[ue.length-1])})}Kt("connect",Yt),Kt("disconnect",vt);let W=b(d());w(()=>(o(A),st(k())),()=>{o(A)&&o(A).connections.set(k())}),w(()=>(o(A),st(v())),()=>{o(A)&&o(A).bgColor.set(v())}),w(()=>(o(A),st(D())),()=>{o(A)&&o(A).label.set(D())}),w(()=>(o(A),st(P())),()=>{o(A)&&o(A).textColor.set(P())}),w(()=>(o(A),st(y())),()=>{o(A)&&o(A).borderColor.set(y())}),w(()=>(o(A),st(I())),()=>{o(A)&&o(A).selectionColor.set(I())}),w(()=>(o(A),st(C())),()=>{o(A)&&o(A).resizable.set(C())}),w(()=>(o(A),st(Q())),()=>{o(A)&&o(A).editable.set(Q())}),w(()=>(o(A),st(G())),()=>{o(A)&&o(A).locked.set(G())}),w(()=>(o(A),st(X())),()=>{o(A)&&o(A).inputs.set(X())}),w(()=>(o(A),st(q())),()=>{o(A)&&o(A).outputs.set(q())}),w(()=>(o(A),st(ct())),()=>{o(A)&&o(A).zIndex.set(ct())}),w(()=>o(A),()=>{var j;yn(_(a,o(A)&&((j=o(A))==null?void 0:j.position)),"$nodePosition",r)}),w(()=>(o(A),o(W),s(),st(d())),()=>{if(o(A)){const{x:j,y:wt}=o(W),{x:xt,y:_t}=s(),{x:mt,y:yt}=d();(mt!==xt||yt!==_t)&&(mt!==j||yt!==wt?(_(W,d()),o(A).position.set(d())):(_(W,s()),d(s())))}}),w(()=>(o(A),st(X())),()=>{o(A)&&o(A).inputs.set(X())}),w(()=>(o(A),st(q())),()=>{o(A)&&o(A).outputs.set(q())}),Ae(),pe();var U=Mt(),Bt=dt(U);{var ut=j=>{const wt=Re(()=>ft()||h()==="center"),xt=Re(()=>!!f()||!!z()||!!J()||o(It)||!1);Va(j,{get node(){return o(A)},get center(){return o(wt)},get isDefault(){return o(It)},get useDefaults(){return ot()},get dimensionsProvided(){return o(xt)},get nodeStore(){return c.nodes},get locked(){return c.locked},get groups(){return c.groups},get title(){return At()},get maxZIndex(){return c.maxZIndex},get centerPoint(){return c.center},get cursor(){return c.cursor},get activeGroup(){return c.activeGroup},get editing(){return c.editing},get initialNodePositions(){return c.initialNodePositions},$$events:{nodeClicked(_t){ae.call(this,t,_t)},nodeMount(_t){ae.call(this,t,_t)},nodeReleased(_t){ae.call(this,t,_t)},duplicate(_t){ae.call(this,t,_t)}},children:Ri,$$slots:{default:(_t,mt)=>{const yt=Re(()=>mt.destroy),ht=Re(()=>mt.selected),qt=Re(()=>mt.grabHandle);var ge=Mt(),ue=dt(ge);Gt(ue,t,"default",{get selected(){return o(ht)},get grabHandle(){return o(qt)},disconnect:vt,connect:Yt,get node(){return o(A)},get destroy(){return o(yt)}},et=>{var nt=Mt(),rt=dt(nt);{var Ct=Ft=>{vc(Ft,{get selected(){return o(ht)},$$events:{connection($t){ae.call(this,t,$t)},disconnection($t){ae.call(this,t,$t)}}})};Lt(rt,Ft=>{o(It)&&Ft(Ct)})}O(et,nt)}),O(_t,ge)},anchorWest:(_t,mt)=>{var yt=Mt(),ht=dt(yt);Gt(ht,t,"anchorWest",{},null),O(_t,yt)},anchorEast:(_t,mt)=>{var yt=Mt(),ht=dt(yt);Gt(ht,t,"anchorEast",{},null),O(_t,yt)},anchorNorth:(_t,mt)=>{var yt=Mt(),ht=dt(yt);Gt(ht,t,"anchorNorth",{},null),O(_t,yt)},anchorSouth:(_t,mt)=>{var yt=Mt(),ht=dt(yt);Gt(ht,t,"anchorSouth",{},null),O(_t,yt)}}})};Lt(Bt,j=>{o(A)&&l().get(o(A).id)&&j(ut)})}O(e,U),oe(),i()}var pc=zt('<div class="editor svelte-1nv0yho"><span style="color:white; font-size:45px">Editor</span> <button style="position:absolute; top:10px;right:10px;">X</button> <!> <button>Delete Node</button> <button>Resize Node</button></div>');function mc(e,t){ne(t,!1);const n=b();let r=g(t,"editing",8);const i=Dt("graph");Kt("graph",i),Kt("textStore",r().label),Kt("colorStore",r().bgColor);let s=b({x:150,y:50});function l(u){u.preventDefault(),_(s,{x:u.clientX,y:u.clientY}),i.editing.set(r())}function a(){i.nodes.delete(r().id),i.editing.set(null)}function c(){const u=r().id,d=i.nodes.get(u);if(d){const h=d.dimensions.width,f=d.dimensions.height,m=prompt("Enter new width (for example:250):",h?h.toString():""),v=prompt("Enter new height (for example:200):",f?f.toString():"");if(m===null||v===null)return;d.dimensions.width.set(parseInt(m,10)||0),d.dimensions.height.set(parseInt(v,10)||0),d.resizingWidth.set(!0),d.resizingHeight.set(!0)}}w(()=>{},()=>{_(n,i.cursor)}),Ae(),pe(),jr(e,{zIndex:1/0,get position(){return o(s)},bgColor:"white",id:"editor",children:(u,d)=>{var h=pc(),f=F(bt(h),2),m=F(f,2);Ha(m,{placeholder:"Node Label"});var v=F(m,2),x=F(v,2);Tt("click",f,()=>i.editing.set(null)),Tt("click",v,a),Tt("click",x,c),Tt("contextmenu",h,l),O(u,h)},$$slots:{default:!0}}),oe()}var _c=zt("<!> <!>",1),yc=zt('<section role="presentation" class="svelvet-wrapper svelte-13nq7cv"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></section>');function bc(e,t){ne(t,!1);const[n,r]=we(),i=()=>E(_t,"$groups",n),s=()=>E(wt,"$dimensionsStore",n),l=()=>E(ue,"$nodeBounds",n),a=()=>E(Bt,"$graphDOMElement",n),c=()=>E(Oe,"$initialClickPosition",n),u=()=>E(yt,"$selected",n),d=()=>E(ht,"$activeGroup",n),h=()=>E(an,"$connectingFrom",n),f=()=>E(Cr,"$touchDistance",n),m=()=>E(j,"$scale",n),v=()=>E(xt,"$translation",n),x=()=>E(ge,"$editing",n),y=b();let p=g(t,"graph",8),I=g(t,"width",8),P=g(t,"height",8),C=g(t,"minimap",12,!1),D=g(t,"controls",12,!1),X=g(t,"toggle",8,!1),q=g(t,"fixedZoom",8,!1),z=g(t,"pannable",8,!0),J=g(t,"disableSelection",8,!1),K=g(t,"ZOOM_INCREMENT",8,.1),gt=g(t,"PAN_INCREMENT",8,50),ct=g(t,"PAN_TIME",8,250),Q=g(t,"MAX_SCALE",8,3),G=g(t,"MIN_SCALE",8,.2),$=g(t,"selectionColor",8),Y=g(t,"backgroundExists",8),k=g(t,"fitView",8,!1),ot=g(t,"trackpadPan",8),ft=g(t,"modifier",8),L=g(t,"theme",12,"light"),At=g(t,"title",8),pt=g(t,"drawer",12,!1),A=g(t,"contrast",8,!1);console.log("Initial Graph drawer prop:",pt());let It;const Yt=eo(),vt={},W=S(!1),U=S(0),Bt=S(null),ut=p().cursor,j=p().transforms.scale,wt=p().dimensions,xt=p().transforms.translation,_t=p().groups,mt=p().groupBoxes,yt=i().selected.nodes,ht=p().activeGroup,qt=p().initialNodePositions,ge=p().editing,ue=p().bounds.nodeBounds;let et=0,nt=1,rt=b({x:0,y:0,top:0,left:0}),Ct=b(!1),Ft=b(!1),$t=b(!1),jt=b(!1),Jt=!1,Ce=b(!1),at,Me=b(null),Pe=b(null),ye=b(null),Te=b(null),Ie=b(null);const be={id:null,position:p().cursor,offset:S({x:0,y:0}),connected:S(new Set),dynamic:S(!1),edge:null,edgeColor:S(null),direction:S("self"),inputKey:null,type:"output",moving:Ko(!1),store:null,mounted:S(!0),rotation:Ko(0),node:{zIndex:S(1/0),rotating:S(!1),position:p().cursor,dimensions:{width:S(0),height:S(0)}}};Kt("graphDOMElement",Bt),Kt("cursorAnchor",be),Kt("duplicate",W),Kt("graph",p()),Kt("transforms",p().transforms),Kt("dimensions",p().dimensions),Kt("locked",p().locked),Kt("groups",p().groups),Kt("bounds",p().bounds),Kt("edgeStore",p().edges),Kt("nodeStore",p().nodes),Kt("mounted",U),nn(()=>{console.log("Graph component mounted with drawer1:",pt()),Ze()});async function on(){await hl(),Ue.set(!0);const{x:M,y:B,scale:lt}=Pa(at,l());M!==null&&B!==null&&lt!==null&&(p().transforms.scale.set(lt),xt.set({x:M,y:B})),Ue.set(!1),_(Ce,!0)}async function Ht(){_(Pe,(await fo(async()=>{const{default:M}=await Promise.resolve().then(()=>Xc);return{default:M}},void 0,import.meta.url)).default)}async function Qt(){_(Me,(await fo(async()=>{const{default:M}=await import("./ThemeToggle-BiuIOd6o.js");return{default:M}},[],import.meta.url)).default)}async function rn(){_(ye,(await fo(async()=>{const{default:M}=await import("./Controls-C6yviW-A.js");return{default:M}},__vite__mapDeps([0,1]),import.meta.url)).default)}async function $e(){_(Te,(await fo(async()=>{const{default:M}=await import("./DrawerController-D-F3tNtd.js");return{default:M}},__vite__mapDeps([2,1,3]),import.meta.url)).default)}async function Ye(){_(Ie,(await fo(async()=>{const{default:M}=await import("./ContrastTheme-ozdBOF93.js");return{default:M}},[],import.meta.url)).default)}function Ze(){if(!a())return;const M=a().getBoundingClientRect();at={top:M.top,left:M.left,bottom:M.bottom,right:M.right,width:M.width,height:M.height},p().dimensions.set(at),k()==="resize"&&on()}function En(M){var lt,Et;if(o(Ft)){const Ut=`${$l()}/${p().id}`,le=R(ut),We=le.x-c().x,je=le.y-c().y,An=Math.min(c().y,c().y+je),Je=Math.min(c().x,c().x+We),He={width:S(Math.abs(We)),height:S(Math.abs(je))},lo=S({x:Je,y:An}),Wn={group:S(Ut),dimensions:He,position:lo,color:S(Fl()),moving:S(!1)};mt.add(Wn,Ut),Array.from(u()).forEach(Xn=>{Xn.group.set(Ut)}),_t.update(Xn=>{const lr={parent:S(Wn),nodes:S(new Set([...u(),Wn]))};return Xn[Ut]=lr,Xn}),V(yt,new Set),_(Ft,!1),_(Ct,!1)}d()&&Array.from(R(i()[d()].nodes)).forEach(Ut=>{const le=zo(R(Ut.position).x,R(Ut.position).y);Ut.position.set(le),Ut.moving.set(!1)});const B=p().edges.get("cursor");B&&(p().edges.delete("cursor"),B.disconnect||Yt("edgeDrop",{cursor:R(ut),source:{node:(lt=h())==null?void 0:lt.anchor.node.id.slice(2),anchor:(Et=h())==null?void 0:Et.anchor.id.split("/")[0].slice(2)}})),V(ht,null),V(Oe,{x:0,y:0}),V(qt,[]),_(Ct,!1),_(jt,!1),V(Ue,!1),M.shiftKey||an.set(null),qn(rt,o(rt).y=0),qn(rt,o(rt).x=0)}function On(M){if(!z()&&!(M.shiftKey||M.metaKey)||M.button===2)return;a()&&a().focus();const{clientX:B,clientY:lt}=M;if(V(Oe,R(ut)),M.shiftKey||M.metaKey){M.preventDefault(),_(Ct,!0);const{top:Et,left:Nt}=o(y);qn(rt,o(rt).y=lt-Et),qn(rt,o(rt).x=B-Nt),qn(rt,o(rt).top=Et),qn(rt,o(rt).left=Nt),M.shiftKey&&M.metaKey?_(Ft,!0):_(Ft,!1),M.metaKey&&!M.shiftKey?_($t,!0):_($t,!1)}else _(jt,!0),V(yt,new Set),V(yt,u())}function kt(M){V(yt,new Set),V(yt,u()),V(Oe,R(ut)),_(jt,!0),M.touches.length===2&&(De(),et=f(),nt=m())}function Rt(){_(jt,!1),Jt=!1}function De(){Jt||(Jt=!0,It=requestAnimationFrame(Ee))}function Ee(){if(!Jt){cancelAnimationFrame(It);return}const B=f()/et;V(j,nt*B),It=requestAnimationFrame(Ee)}function de(M){const{key:B,code:lt}=M,Et=M.target;if(!(Et.tagName=="INPUT"||Et.tagName=="TEXTAREA")){if(lt==="KeyA"&&M[`${ft()}Key`]){const Nt=p().nodes.getAll().filter(Ut=>!R(Ut.locked));V(yt,new Set(Nt))}else if(vi(B))Be(B,M);else if(B==="=")gi(-1,p().dimensions,p().transforms,K());else if(B==="-")gi(1,p().dimensions,p().transforms,K());else if(B==="0")on();else if(B==="Control")i().selected.nodes.set(new Set);else if(lt==="KeyD"&&M[`${ft()}Key`])W.set(!0),setTimeout(()=>{W.set(!1)},100);else if(B==="Tab"&&(M.altKey||M.ctrlKey))gn();else if(B==="l")L(L()==="light"?"dark":"light");else if(B==="d")pt(!pt());else if(B==="m")C(!C());else if(B==="c")D(!D());else if(B==="e"){const Nt=Array.from(u())[0];p().editing.set(Nt)}else return;M.preventDefault()}}function Nn(M){var je;M.preventDefault();const B=(je=a())==null?void 0:je.getBoundingClientRect();if(!B)return;const lt=M.clientX-B.left,Et=M.clientY-B.top,{x:Nt,y:Ut}=zo(lt,Et);if(console.log(`Dropped Node at Snapped Position: (${Nt}, ${Ut})`),!We)return;const le={id:`node-${Date.now()}`,rotation:S(0),position:S({x:Nt,y:Ut}),moving:S(!1),label:S("New Node"),dimensions:{width:S(200),height:S(100)},inputs:S(2),outputs:S(2),anchors:S([]),group:S(null),collapsed:S(!1),resizingWidth:S(!1),resizingHeight:S(!1),rotating:S(!1),editable:S(!0),locked:S(!1),recalculateAnchors:An=>{},resizable:S(!0),zIndex:S(1),edge:null,direction:S("TD"),borderRadius:S(5),borderWidth:S(1),connections:S([]),bgColor:S("#007bff"),borderColor:S("#000"),selectionColor:S("#ff0000"),textColor:S("#fff")};let We=null;p().nodes.add(le,le.id),We=null}function gn(){const M=p().nodes.getAll(),B=M.findIndex(Et=>u().has(Et)),lt=B+1;u().delete(M[B]),u().add(M[lt])}function _e(M){const{key:B}=M;vi(B)?(clearInterval(vt[B]),delete vt[B]):B==="Shift"&&an.set(null)}function ze(M){if(q())return;const B=M.shiftKey?.15:1,{clientX:lt,clientY:Et,deltaY:Nt}=M,Ut=v(),le={x:lt,y:Et};if((ot()||M.metaKey)&&Nt%1===0){V(xt,{x:yo(xt,ce(v).x-=M.deltaX,ce(v)),y:yo(xt,ce(v).y-=M.deltaY,ce(v))});return}if(m()>=Q()&&Nt<0||m()<=G()&&Nt>0)return;const We=Math.min(.009*B*Math.abs(Nt),.08),je=cs(m(),Math.sign(Nt),We),An=as(m(),je,Ut,le,at);j.set(je),xt.set(An)}function Le(M){M.preventDefault()}function Be(M,B){const lt=B.shiftKey?2:1,Et=M==="ArrowLeft"||M==="ArrowUp"?1:-1,Nt=M==="ArrowLeft"||M==="ArrowRight",Ut=Nt?v().x:v().y,le=Ut+Et*gt()*lt;if(!vt[M]){const We=performance.now();let je=setInterval(()=>{const An=performance.now()-We;if(u().size===0){const Je=Ut+(le-Ut)*(An/ct());xt.set({x:Nt?Je:v().x,y:Nt?v().y:Je})}else{const Je={x:Nt?-Et*2:0,y:Nt?0:-Et*2};Array.from(u()).forEach(He=>{const lo=R(He.position);let Wn;const Xn=R(He.group),lr=R(p().groupBoxes);if(Xn&&(Wn=lr.get(Xn)),Wn){const Io=R(He.dimensions.width),ar=R(He.dimensions.height),ps=hs(Wn,Io,ar);fs(lo,Je,He.position,ps)}else{const Io={x:lo.x+Je.x,y:lo.y+Je.y},ar=zo(Io.x,Io.y);He.position.set(ar)}})}},2);vt[M]=je}}w(()=>s(),()=>{_(y,s())}),w(()=>st(L()),()=>{L()&&document.documentElement.setAttribute("svelvet-theme",L())}),w(()=>(o(Ce),st(k())),()=>{!o(Ce)&&k()&&on()}),w(()=>(st(X()),o(Me)),()=>{X()&&!o(Me)&&Qt()}),w(()=>(st(C()),o(Pe)),()=>{C()&&!o(Pe)&&Ht()}),w(()=>(st(D()),o(ye)),()=>{D()&&!o(ye)&&rn()}),w(()=>(st(pt()),o(Te)),()=>{pt()&&!o(Te)&&$e()}),w(()=>(st(A()),o(Ie)),()=>{A()&&!o(Ie)&&Ye()}),w(()=>st(pt()),()=>{console.log("Reactive Graph drawer prop:",pt())}),Ae(),pe();var N=yc();Tt("touchend",$n,En),Tt("mouseup",$n,En),Tt("resize",$n,Ze),Tt("scroll",$n,Ze),T(N,"tabindex",0);var tt=bt(N);Ga(tt,{get isMovable(){return o(jt)},children:(M,B)=>{var lt=_c(),Et=dt(lt);{var Nt=le=>{mc(le,{get editing(){return x()}})};Lt(Et,le=>{x()&&le(Nt)})}var Ut=F(Et,2);Gt(Ut,t,"default",{},null),O(M,lt)},$$slots:{default:!0}});var it=F(tt,2);{var Z=M=>{var B=Mt(),lt=dt(B);Gt(lt,t,"background",{},null),O(M,B)},St=M=>{ya(M,{})};Lt(it,M=>{Y()?M(Z):M(St,!1)})}var Wt=F(it,2);{var Vt=M=>{var B=Mt(),lt=dt(B);uo(lt,()=>o(Pe),(Et,Nt)=>{Nt(Et,{})}),O(M,B)};Lt(Wt,M=>{C()&&M(Vt)})}var fe=F(Wt,2);{var he=M=>{var B=Mt(),lt=dt(B);uo(lt,()=>o(ye),(Et,Nt)=>{Nt(Et,{})}),O(M,B)};Lt(fe,M=>{D()&&M(he)})}var xe=F(fe,2);{var Tn=M=>{var B=Mt(),lt=dt(B);uo(lt,()=>o(Me),(Et,Nt)=>{Nt(Et,{})}),O(M,B)};Lt(xe,M=>{X()&&M(Tn)})}var zn=F(xe,2);{var sn=M=>{var B=Mt(),lt=dt(B);uo(lt,()=>o(Te),(Et,Nt)=>{Nt(Et,{})}),O(M,B)};Lt(zn,M=>{pt()&&M(sn)})}var vn=F(zn,2);{var ve=M=>{var B=Mt(),lt=dt(B);uo(lt,()=>o(Ie),(Et,Nt)=>{Nt(Et,{})}),O(M,B)};Lt(vn,M=>{A()&&M(ve)})}var re=F(vn,2);Gt(re,t,"minimap",{},null);var se=F(re,2);Gt(se,t,"drawer",{},null);var Fe=F(se,2);Gt(Fe,t,"controls",{},null);var te=F(Fe,2);Gt(te,t,"toggle",{},null);var Ot=F(te,2);Gt(Ot,t,"contrast",{},null);var ln=F(Ot,2);{var Bn=M=>{ta(M,{get creating(){return o(Ft)},get anchor(){return o(rt)},get graph(){return p()},get adding(){return o($t)},get color(){return $()}})};Lt(ln,M=>{o(Ct)&&!J()&&M(Bn)})}to(N,M=>V(Bt,M),()=>a()),Xt(()=>{T(N,"id",p().id),T(N,"title",At()),H(N,"width",I()?I()+"px":"100%"),H(N,"height",P()?P()+"px":"100%"),H(N,"cursor",z()?"move":"default")}),Tt("wheel",N,Ge(ze)),Tt("mousedown",N,mo(Ge(On))),Tt("touchend",N,Ge(Rt)),Tt("touchstart",N,mo(Ge(kt))),Tt("keydown",N,de),Tt("keyup",N,_e),Tt("dragover",N,Ge(Le)),Tt("drop",N,Nn),O(e,N),oe(),r()}function wc(e){e.parentNodes.forEach(s=>xc(s));const[t,n]=Sc(e);Cc(t,e),Ec(t);for(let s=0;s<10;s++){let l=!1;for(let a=0;a<=n;a++)if(t[a])for(let c=0;c<t[a].length;c++){const u=t[a][c],d=Ac(t,u,c);d&&(jn(t[a],c,d),l=!0)}if(!l)break}const r=Mc(t);for(let s=0;s<10&&Pc(t,r);s++);for(let s=0;s<2;s++){let l=!1;for(let a=0;a<=n;a++)for(let c=0;c<t[a].length;c++){const u=t[a][c],d=Nc(t,u,c);d&&(jn(t[a],c,d),l=!0)}if(!l)break}const i=[];for(let s=0;s<=n;s++)i.push(t[s]);return i}function xc(e,t=0,n=0){const r=[],i=(s,l=0,a=0)=>{s.depth=Math.max(s.depth,l),s.nesting=Math.max(s.nesting,a),r.push(s);for(const c of s.children){const{node:u,length:d}=c;i(u,d+l,a+1)}};i(e,t,n);for(const s of r)if(s.children.length){s.nesting=s.children[0].node.nesting-1,s.depth=s.children[0].node.depth-s.children[0].length;for(const l of s.children)s.nesting=Math.min(s.nesting,l.node.nesting-1),s.depth=Math.min(s.depth,l.node.depth-l.length)}}function Sc(e){let t=0;const n={};for(const r in e.nodeList){const{depth:i,parents:s,children:l,type:a,data:c}=e.nodeList[r];t=Math.max(t,i),n[i]||(n[i]=[]);const u={id:r,label:c.content,children:[],parents:[],layer:i,type:a.trim()};c.props&&(u.propsId=c.props.trim());for(const d of s)u.parents.push(d.node.id);for(const d of l)u.children.push(d.node.id);n[i].push(u)}return[n,t]}function Cc(e,t){for(const n in t.nodeList)for(const r of t.nodeList[n].children)if(r.node.depth-1>t.nodeList[n].depth){const i=t.nodeList[n].depth+1,s=r.node.depth-1,l=[];let a=0;for(let c=i;c<=s;c++){const u={id:`GHOST_${r.node.id}_${a}`,label:"",children:[],parents:[],layer:c,ignore:!0};l.push(u),a++}for(const c of r.node.parents)l[0].parents.push(c.node.id);l[l.length-1].children.push(r.node.id);for(let c=0;c<l.length-1;c++)l[c].children.push(`GHOST_${r.node.id}_${c+1}`);for(let c=s;c>=i;c--)l.length>0&&e[c].push(l[0]);for(const c of e[t.nodeList[n].depth])c.id===n&&(c.children.push(l[0].id),c.children=c.children.filter(u=>u!==r.node.id))}}function Ec(e){let t=0;for(const n in e)t=Math.max(e[n].length,t);for(const n in e)if(e[n].length<t){const r=Array.from({length:t-e[n].length},()=>({id:"NULL_NODE",children:[],parents:[],layer:parseInt(n),ignore:!0}));e[n]=e[n].concat(r)}}function _i(e,t,n){let r=0,i=0;for(const s of t.parents){for(let l=0;l<e[t.layer-1].length;l++)if(s===e[t.layer-1][l].id){r+=Math.abs(n-l);break}i++}for(const s of t.children){for(let l=0;l<e[t.layer+1].length;l++)if(s===e[t.layer+1][l].id){r+=Math.abs(n-l);break}i++}return isNaN(r/i)?0:r/i}function yi(e,t,n){let r=0,i=0;for(const s of t.parents){for(let l=0;l<e[t.layer-1].length;l++)if(s===e[t.layer-1][l].id){r+=Math.abs(n-l);break}i++}return isNaN(r/i)?0:r/i}function bi(e,t,n){let r=0,i=0;for(const s of t.children){for(let l=0;l<e[t.layer+1].length;l++)if(s===e[t.layer+1][l].id){r+=Math.abs(n-l);break}i++}return isNaN(r/i)?0:r/i}function Nc(e,t,n){const r=Nr(e,t.layer);let i=0;t.layer===0?i=bi(e,t,n):i=yi(e,t,n);let s=i,l=n;for(let a=0;a<e[t.layer].length;a++)if(e[t.layer][a].id==="NULL_NODE"){jn(e[t.layer],n,a);const u=Nr(e,t.layer);let d=0;t.layer===0?d=bi(e,t,a):d=yi(e,t,a),u<=r&&d<s&&(s=d,l=a),jn(e[t.layer],a,n)}return l===n?null:l}function Ac(e,t,n){const r={};let i=1/0,s=0;for(let l=0;l<e[t.layer].length;l++){const a=_i(e,t,l),c=_i(e,e[t.layer][l],n);r[l]=a+c}for(const l in r)r[l]<i&&(i=r[l],s=parseInt(l));return s===n?null:s}function jn(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Mc(e){const t=[];for(const n in e)for(const r of e[n])t.push(r);return t.sort((n,r)=>r.parents.length+r.children.length-(n.parents.length+n.children.length))}function Nr(e,t){let n=0;for(let r=0;r<e[t].length;r++){const i=e[t][r],s=[],l=[];if(e[t-1])for(let a=r+1;a<e[t-1].length;a++)i.parents.includes(e[t-1][a].id)&&s.push(a);if(e[t+1])for(let a=r+1;a<e[t+1].length;a++)i.children.includes(e[t+1][a].id)&&l.push(a);for(let a=r+1;a<e[t].length;a++){const c=e[t][a];if(s.length)for(let u=0;u<e[t-1].length;u++)c.parents.includes(e[t-1][u].id)&&s.forEach(d=>{u<d&&n++});if(l.length)for(let u=0;u<e[t+1].length;u++)c.children.includes(e[t+1][u].id)&&l.forEach(d=>{u<d&&n++})}}return n}function Pc(e,t){let n=!1;for(const r of t){if(r.children.length+r.parents.length===0)return n;let i=0;for(let a=0;a<e[r.layer].length;a++)if(e[r.layer][a].id===r.id){i=a;break}let s=1/0,l=i;for(let a=0;a<e[r.layer].length;a++){jn(e[r.layer],i,a);const c=Nr(e,r.layer);c<s&&(s=c,l=a),jn(e[r.layer],a,i)}l!==i&&(jn(e[r.layer],i,l),n=!0)}return n}function Ic(e,t){ne(t,!1);let n=g(t,"mermaid",8,""),r=g(t,"mermaidConfig",24,()=>({}));const i=Kl(n());Kt("flowchart",i);const s=wc(i),l=Dt("graph"),a=100,c=100;let u;nn(()=>{l.nodes.subscribe(m=>u=Object.fromEntries(m));let f=0;for(const m of s){let v=0,x=-1/0;for(const y of m)y.ignore||(u[`N-${y.id}`].position.update(()=>({x:v,y:f})),u[`N-${y.id}`].dimensions.width.subscribe(p=>v+=p),u[`N-${y.id}`].dimensions.height.subscribe(p=>x=Math.max(x,p))),v+=a;f+=x+c}}),pe();var d=Mt(),h=dt(d);cn(h,1,()=>s,Zn,(f,m)=>{var v=Mt(),x=dt(v);cn(x,1,()=>o(m),Zn,(y,p)=>{var I=Mt(),P=dt(I);{var C=D=>{const X=Re(()=>o(p).children.map(q=>[q,"1"]));jr(D,Yr({get label(){return o(p).label},get id(){return o(p).id},TD:!0},()=>r()[o(p).id],{get connections(){return o(X)}}))};Lt(P,D=>{o(p).ignore||D(C)})}O(y,I)}),O(f,v)}),O(e,d),oe()}function Dc(e){var r,i;const t=JSON.parse(e);return us(t.id,{...t,editable:t.editable,direction:t.direction,locked:t.locked,zoom:((r=t.transforms)==null?void 0:r.scale)??1,translation:((i=t.transforms)==null?void 0:i.translation)??{x:0,y:0},edge:t.edge})}var Lc=zt("<!> <!>",1),kc=zt('<div class="svelvet-temp svelte-lsy29y"></div>');function Rc(e,t){const n=Wr(t);ne(t,!1);const r=b(),i=b();let s=g(t,"mermaid",8,""),l=g(t,"theme",8,"light"),a=g(t,"id",8,0),c=g(t,"snapTo",8,0),u=g(t,"zoom",8,1),d=g(t,"TD",8,!1),h=g(t,"editable",8,!0),f=g(t,"locked",8,!1),m=g(t,"width",8,0),v=g(t,"height",8,0),x=g(t,"minimap",8,!1),y=g(t,"controls",8,!1),p=g(t,"toggle",8,!1),I=g(t,"drawer",8,!1),P=g(t,"contrast",8,!1),C=g(t,"fitView",8,!1),D=g(t,"selectionColor",8,"lightblue"),X=g(t,"edgeStyle",8,"bezier"),q=g(t,"endStyles",24,()=>[null,null]),z=g(t,"edge",8,null),J=g(t,"disableSelection",8,!1),K=g(t,"mermaidConfig",24,()=>({})),gt=g(t,"translation",24,()=>({x:0,y:0})),ct=g(t,"trackpadPan",8,!1),Q=g(t,"modifier",8,"meta"),G=g(t,"raiseEdgesOnSelect",8,!1),$=g(t,"edgesAboveNode",8,!1),Y=g(t,"title",8,""),k=g(t,"fixedZoom",8,!1),ot=g(t,"pannable",8,!0);const ft=eo();let L=b(null),At=d()?"TD":"LR";Kt("snapTo",c()),Kt("edgeStyle",X()),Kt("endStyles",q()),Kt("graphEdge",z()),Kt("raiseEdgesOnSelect",G()),Kt("edgesAboveNode",$()),Kt("graph",o(L)),nn(()=>{console.log("Graph component mounted with drawer:",I());const W=localStorage.getItem("state");if(console.log("stateObject during onMount:",W),W)_(L,Dc(W)),console.log("This is the graph set using reloadStore",o(L)),vr.add(o(L),o(L).id),console.log("graphStore updated",o(L));else{let U=`G-${a()||vr.count()+1}`;_(L,us(U,{zoom:u(),direction:At,editable:h(),locked:f(),translation:gt()})),vr.add(o(L),U)}});function pt(W,U){if(!o(L))return;const Bt=`N-${W[0]}`,ut=o(L).nodes.get(Bt);if(!ut)return;const j=ut.anchors.get(`A-${W[1]}/N-${W[0]}`);if(!j)return;const wt=`N-${U[0]}`,xt=o(L).nodes.get(wt);if(!xt)return;const _t=xt.anchors.get(`A-${U[1]}/N-${U[0]}`);if(!_t)return;const mt=o(L).edges.match(j,_t);mt&&o(L).edges.delete(mt[0])}w(()=>{},()=>{_(r,n.background)}),w(()=>o(L),()=>{_(i,o(L)&&o(L).edges)}),w(()=>(o(L),st(u())),()=>{o(L)&&o(L).transforms.scale.set(u())}),w(()=>o(i),()=>{o(i)&&o(i).onEdgeChange((W,U)=>{ft(U,{sourceAnchor:W.source,targetAnchor:W.target,sourceNode:W.source.node,targetNode:W.target.node})})}),Ae(),pe();var A=Mt(),It=dt(A);{var Yt=W=>{bc(W,{get width(){return m()},get height(){return v()},get toggle(){return p()},get backgroundExists(){return o(r)},get minimap(){return x()},get graph(){return o(L)},get fitView(){return C()},get fixedZoom(){return k()},get pannable(){return ot()},get theme(){return l()},get drawer(){return I()},get controls(){return y()},get selectionColor(){return D()},get disableSelection(){return J()},get trackpadPan(){return ct()},get modifier(){return Q()},get title(){return Y()},get contrast(){return P()},$$events:{edgeDrop(U){ae.call(this,t,U)}},children:(U,Bt)=>{var ut=Lc(),j=dt(ut);{var wt=_t=>{Ic(_t,{get mermaid(){return s()},get mermaidConfig(){return K()}})};Lt(j,_t=>{s().length&&_t(wt)})}var xt=F(j,2);Gt(xt,t,"default",{},null),O(U,ut)},$$slots:{default:!0,minimap:(U,Bt)=>{var ut=Mt(),j=dt(ut);Gt(j,t,"minimap",{},null),O(U,ut)},controls:(U,Bt)=>{var ut=Mt(),j=dt(ut);Gt(j,t,"controls",{},null),O(U,ut)},background:(U,Bt)=>{var ut=Mt(),j=dt(ut);Gt(j,t,"background",{},null),O(U,ut)},toggle:(U,Bt)=>{var ut=Mt(),j=dt(ut);Gt(j,t,"toggle",{},null),O(U,ut)},drawer:(U,Bt)=>{var ut=Mt(),j=dt(ut);Gt(j,t,"drawer",{},null),O(U,ut)},contrast:(U,Bt)=>{var ut=Mt(),j=dt(ut);Gt(j,t,"contrast",{},null),O(U,ut)}}})},vt=W=>{var U=kc();Xt(()=>{H(U,"width",m()?m()+"px":"100%"),H(U,"height",v()?v()+"px":"100%")}),O(W,U)};Lt(It,W=>{o(L)?W(Yt):W(vt,!1)})}return O(e,A),Xr(t,"disconnect",pt),oe({disconnect:pt})}var Oc=zt("<button></button>");function Tc(e,t){ne(t,!1);const[n,r]=we(),i=()=>E(X,"$position",n),s=()=>E(K,"$rotation",n),l=()=>E(o(m),"$zIndex",n),a=()=>E(J,"$borderRadius",n),c=()=>E(z,"$bgColor",n),u=()=>E(gt,"$width",n),d=()=>E(ct,"$height",n),h=b(),f=b(),m=b(),v=b();let x=g(t,"node",8),y=g(t,"hidden",8,!1),p=g(t,"toggleHidden",8),I=g(t,"top",8),P=g(t,"left",8),C=g(t,"nodeColor",8,null),D=g(t,"hideable",8);const{position:X,dimensions:q,bgColor:z,borderRadius:J,rotation:K}=x(),{width:gt,height:ct}=q;let Q=b(null);nn(()=>{var Y;try{const k=(Y=document.querySelector(`#${x().id}`))==null?void 0:Y.firstChild;k&&_(Q,window.getComputedStyle(k).backgroundColor)}catch(k){console.error(k)}}),w(()=>i(),()=>{_(h,i())}),w(()=>s(),()=>{_(f,s())}),w(()=>st(x()),()=>{yn(_(m,x().zIndex),"$zIndex",n)}),w(()=>o(Q),()=>{_(v,o(Q)==="rgba(0, 0, 0, 0)")}),Ae(),pe();var G=Oc();let $;Xt(()=>{$=me(G,1,"minimap-node svelte-1hs9omb",null,$,{hidden:y(),hideable:D()}),H(G,"z-index",l()),H(G,"border-radius",`${a()??""}px`),H(G,"--prop-background-color",C()||c()||!o(v)&&o(Q)||null),H(G,"width",`${u()??""}px`),H(G,"height",`${d()??""}px`),H(G,"transform",`rotate(${o(f)??""}deg)`),H(G,"top",`${o(h).y-I()}px`),H(G,"left",`${o(h).x-P()}px`)}),Tt("click",G,()=>{D()&&p()(x())}),O(e,G),oe(),r()}var zc=zt('<div class="mini-bounding-box svelte-aoq4g"></div>');function Bc(e,t){ne(t,!1);const[n,r]=we(),i=()=>E(u(),"$position",n),s=()=>E(v,"$width",n),l=()=>E(x,"$height",n),a=()=>E(d(),"$color",n);let c=g(t,"dimensions",8),u=g(t,"position",8),d=g(t,"color",8),h=g(t,"groupName",8),f=g(t,"top",8),m=g(t,"left",8);const{width:v,height:x}=c();pe();var y=zc();Xt(()=>{T(y,"id",`mini-${h()}-bounding-box`),T(y,"style",`border: solid 4px ${a()??""};`),H(y,"top",`${i().y-f()}px`),H(y,"left",`${i().x-m()}px`),H(y,"width",`${s()}px`),H(y,"height",`${l()}px`),H(y,"background-color",a())}),O(e,y),oe(),r()}var Wc=zt('<div><div class="node-wrapper svelte-1qxvbux"><!> <!></div> <div class="overlay svelte-1qxvbux"></div></div>');function gs(e,t){ne(t,!1);const[n,r]=we(),i=()=>E(ut,"$graphBounds",n),s=()=>E(wt,"$groups",n),l=()=>E(_t,"$dimensions",n),a=()=>E(yt,"$scale",n),c=()=>E(ht,"$translation",n),u=()=>E(mt,"$hidden",n),d=()=>E(j,"$nodes",n),h=()=>E(qt,"$groupBoxes",n),f=b(),m=b(),v=b(),x=b(),y=b(),p=b(),I=b(),P=b(),C=b(),D=b(),X=b(),q=b(),z=b(),J=b(),K=b(),gt=b(),ct=b(),Q=b(),G=b(),$=b(),Y=b(),k=b(),ot=b();let ft=Dt("graph"),L=g(t,"width",8,100),At=g(t,"height",24,L),pt=g(t,"mapColor",8,null),A=g(t,"nodeColor",8,null),It=g(t,"borderColor",8,null),Yt=g(t,"corner",8,"SE"),vt=g(t,"hideable",8,!1);const W=.9,U=L()*W,Bt=At()*W,ut=ft.bounds.graphBounds,j=ft.nodes,wt=ft.groups,xt=ft.transforms,_t=ft.dimensions,mt=s().hidden.nodes,yt=xt.scale,ht=xt.translation,qt=ft.groupBoxes,ge={clientX:0,clientY:0};function ue(jt){u().has(jt)?u().delete(jt):u().add(jt),V(mt,u())}w(()=>i(),()=>{_(f,i())}),w(()=>o(f),()=>{_(m,o(f).top)}),w(()=>o(f),()=>{_(v,o(f).left)}),w(()=>o(f),()=>{_(x,o(f).right)}),w(()=>o(f),()=>{_(y,o(f).bottom)}),w(()=>l(),()=>{_(p,l().width)}),w(()=>l(),()=>{_(I,l().height)}),w(()=>(o(x),o(v)),()=>{_(P,o(x)-o(v))}),w(()=>(o(y),o(m)),()=>{_(C,o(y)-o(m))}),w(()=>(o(P),o(C)),()=>{_(D,o(P)/o(C))}),w(()=>(st(L()),st(At())),()=>{_(X,L()/At())}),w(()=>(o(p),o(I),a(),c()),()=>{_(q,Po(ge,0,0,o(p),o(I),a(),c()))}),w(()=>(o(p),o(P),a()),()=>{_(z,o(p)/o(P)/a())}),w(()=>(o(I),o(C),a()),()=>{_(J,o(I)/o(C)/a())}),w(()=>(o(q),o(m),o(C)),()=>{_(K,(o(q).y-o(m))/o(C))}),w(()=>(o(q),o(v),o(P)),()=>{_(gt,(o(q).x-o(v))/o(P))}),w(()=>(o(D),o(X)),()=>{_(Q,o(D)>=o(X))}),w(()=>(o(Q),o(P),o(C)),()=>{_(G,o(Q)?U/o(P):Bt/o(C))}),w(()=>(o(C),o(G)),()=>{_(ot,o(C)*o(G))}),w(()=>(st(At()),o(ot)),()=>{_(Y,(At()-o(ot))/2)}),w(()=>(o(P),o(G)),()=>{_(k,o(P)*o(G))}),w(()=>(st(L()),o(k)),()=>{_($,(L()-o(k))/2)}),w(()=>(o(Y),o(K),o(ot),o($),o(gt),o(k),o(z),o(J)),()=>{_(ct,`
		top: ${o(Y)+o(K)*o(ot)}px;
		left: ${o($)+o(gt)*o(k)}px;
		width: ${o(z)*o(k)}px;
		height: ${o(J)*o(ot)}px;`)}),Ae(),pe();var et=Wc();let nt;var rt=bt(et),Ct=bt(rt);cn(Ct,1,()=>Array.from(d().entries()),([jt,Jt])=>jt,(jt,Jt)=>{let Ce=()=>o(Jt)[1];var at=Mt(),Me=dt(at);{var Pe=ye=>{const Te=Re(()=>u().has(Ce()));Tc(ye,{get node(){return Ce()},get top(){return o(m)},get left(){return o(v)},get nodeColor(){return A()},get hidden(){return o(Te)},toggleHidden:ue,get hideable(){return vt()}})};Lt(Me,ye=>{Ce().id!=="N-editor"&&ye(Pe)})}O(jt,at)});var Ft=F(Ct,2);cn(Ft,1,()=>Array.from(h().entries()),([jt,Jt])=>jt,(jt,Jt)=>{let Ce=()=>o(Jt)[0];Bc(jt,Yr(()=>o(Jt)[1],{get top(){return o(m)},get left(){return o(v)},get groupName(){return Ce()}}))});var $t=F(rt,2);Xt(()=>{nt=me(et,1,"minimap-wrapper svelte-1qxvbux",null,nt,{SW:Yt()==="SW",NE:Yt()==="NE",SE:Yt()==="SE",NW:Yt()==="NW"}),H(et,"width",`${L()??""}px`),H(et,"height",`${(At()?At():L())??""}px`),H(et,"--prop-minimap-border-color",It()),H(et,"--prop-minimap-background-color",pt()),H(rt,"width",`${o(P)??""}px`),H(rt,"height",`${o(C)??""}px`),H(rt,"transform",`scale(${o(G)??""})`),T($t,"style",o(ct))}),O(e,et),oe(),r()}const Xc=Object.freeze(Object.defineProperty({__proto__:null,default:gs},Symbol.toStringTag,{value:"Module"})),Gc={devices:{},connectors:[],subcircuits:{}};let Gn=null;function Yc(){let e=null;return{start:(t,n)=>{e!==null&&clearTimeout(e),e=setTimeout(()=>{e=null,t()},n)},cancel:()=>{e!==null&&(clearTimeout(e),e=null)}}}const wi=Yc();let sr=S(Gc);function vs(e,t,n=100){if(Gn===null)return Gn=e,wi.start(()=>{Gn=null,console.warn("Timeout waiting for the second connection")},n),!1;{wi.cancel(),"from"in e=="from"in Gn&&console.warn("both parts of connection are the same, ie: 2 inputs or 2 outputs");const r="from"in e?e:Gn,i="to"in e?e:Gn,s={...r,...i};t(s),Gn=null}}function Fc(e){vs(e,n=>{sr.update(r=>(r.connectors.push(n),r))})}function jc(e){vs(e,n=>{sr.update(r=>{const i=r.connectors.findIndex(s=>JSON.stringify(s)===JSON.stringify(n));return i!==-1&&r.connectors.splice(i,1),r})})}var Hc=zt("<div></div>");function Kc(e,t){ne(t,!0);let n=t.portName.startsWith("input")?"input":"output";function r(l,a){const c={id:l,port:a};return a.startsWith("input")?{to:c}:{from:c}}Xo(()=>{if(t.linked&&(n==="input"||n==="output")){const l=r(t.nodeId,t.portName);return Fc(l)}else if(!t.linked){const l=r(t.nodeId,t.portName);return jc(l)}});var i=Hc();let s;Xt(()=>s=me(i,1,`custom_anchor ${(n==="input"?"input":"output")??""}`,"svelte-a511es",s,{linked:t.linked,hovering:t.hovering,connecting:t.connecting})),O(e,i),oe()}var qc=zt("<div><!></div>");function _r(e,t){ne(t,!0);let n=g(t,"location",19,()=>["left","top"]),r="";n()[0]=="left"?n()[1]=="top"?r="input1":n()[1]=="bot"&&(r="input2"):n()[0]=="right"&&(r="output");const i=`${t.id}_${r}`;var s=qc(),l=bt(s);const a=Qe(()=>n()[0]==="left"?"west":"east"),c=Qe(()=>t.io==="input"),u=Qe(()=>t.io==="output");vo(l,{id:i,get direction(){return o(a)},get input(){return o(c)},get output(){return o(u)},multiple:!1,children:Ri,$$slots:{default:(d,h)=>{const f=Qe(()=>h.linked),m=Qe(()=>h.hovering),v=Qe(()=>h.connecting);Kc(d,{get connecting(){return o(v)},get linked(){return o(f)},portName:r,get nodeId(){return t.id},get hovering(){return o(m)}})}}}),Xt(()=>me(s,1,`${n()[0]??""} ${n()[1]??""}`,"svelte-12b90ve")),O(e,s),oe()}const Uc="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%20512%20512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23000000'%20d='M105%20105v302h151c148%200%20148-302%200-302H105zm-89%2046v18h71v-18H16zm368.8%2096c.2%206%20.2%2012%200%2018H496v-18H384.8zM16%20343v18h71v-18H16z'/%3e%3c/svg%3e";var Vc=zt('<img alt="AND Gate"> <!> <!> <!>',1);function xi(e,t){ne(t,!0);let n=g(t,"width",3,80),r=g(t,"height",3,50);const i=localStorage.getItem("and_node_num");let s=0;i===null?localStorage.setItem("and_node_num","1"):(s=parseInt(i,10)+1,localStorage.setItem("and_node_num",s.toString()));const l=`And_${s}`;localStorage.setItem(`And_Gate_${s}`,s.toString());const a={type:"And",label:l};sr.update(c=>(c.devices[l]=a,c)),jr(e,{drop:"cursor",id:l,center:!0,children:(c,u)=>{var d=Vc(),h=dt(d);T(h,"src",Uc);var f=F(h,2);_r(f,{location:["left","bot"],id:l,io:"input"});var m=F(f,2);_r(m,{location:["left","top"],id:l,io:"input"});var v=F(m,2);_r(v,{location:["right","mid"],id:l,io:"output"}),Xt(()=>{T(h,"width",n()),T(h,"height",r())}),O(c,d)},$$slots:{default:!0}}),oe()}const $c=""+new URL("line_26-7GG_ennq.svg",import.meta.url).href;var Zc=zt('<div class="side_menu_header svelte-12aobrm"><h2 class="svelte-12aobrm"><span class="l_cap svelte-12aobrm">L</span><span class="o_cap svelte-12aobrm">o</span><span class="g_cap svelte-12aobrm">g</span><span class="i_cap svelte-12aobrm">i</span><span class="c_cap svelte-12aobrm">c</span><span class="a_cap svelte-12aobrm" style="margin-left:4px;">A</span><span class="p_cap svelte-12aobrm">P</span></h2></div>');function Jc(e){var t=Zc();O(e,t)}const Qc=""+new URL("And-Bv0qjo0z.webp",import.meta.url).href,tu=""+new URL("Buffer-ChkS8anx.webp",import.meta.url).href,eu=""+new URL("Or-CH567Eff.webp",import.meta.url).href,nu=""+new URL("Nor-DNThgpQV.webp",import.meta.url).href,ou=""+new URL("Xor-DHDhnzlp.webp",import.meta.url).href,ru=""+new URL("Xnor-Dc-K_l5c.webp",import.meta.url).href,iu=""+new URL("Nand-BlFkpy7B.webp",import.meta.url).href,su=""+new URL("Not-BTmZFMBI.webp",import.meta.url).href;var lu=zt('<ol class="dark-cream-bg svelte-1337jvg"><li class="svelte-1337jvg"><img style="width: 82px;margin-top: 3px;" alt="And logic gate, hand-drawn"> Not</li> <li class="svelte-1337jvg"><img style="width: 82px;margin-bottom:-6px;margin-top: 3px;" alt="And logic gate, hand-drawn"> Repeater</li> <li class="svelte-1337jvg"><img style="width: 82px;margin-bottom:-6px;margin-top: 3px;" alt="And logic gate, hand-drawn"> And</li> <li class="svelte-1337jvg"><img style="width: 82px;margin-bottom:-6px;margin-top: 3px;" alt="And logic gate, hand-drawn"> Nand</li> <li class="svelte-1337jvg"><img style="width: 82px;margin-bottom:-6px;margin-top: 3px;" alt="And logic gate, hand-drawn"> Or</li> <li class="svelte-1337jvg"><img style="width: 82px;margin-bottom:-6px;margin-top: 3px;" alt="And logic gate, hand-drawn"> Nor</li> <li class="svelte-1337jvg"><img style="width: 82px;margin-bottom:-6px;margin-top: 3px;" alt="And logic gate, hand-drawn"> Xor</li> <li class="svelte-1337jvg"><img style="width: 82px;margin-bottom:-6px;margin-top: 3px;" alt="And logic gate, hand-drawn"> Xnor</li></ol>');function Si(e,t){var n=lu(),r=bt(n),i=bt(r);T(i,"src",su);var s=F(r,2),l=bt(s);T(l,"src",tu);var a=F(s,2),c=bt(a);T(c,"src",Qc);var u=F(a,2),d=bt(u);T(d,"src",iu);var h=F(u,2),f=bt(h);T(f,"src",eu);var m=F(h,2),v=bt(m);T(v,"src",nu);var x=F(m,2),y=bt(x);T(y,"src",ou);var p=F(x,2),I=bt(p);T(I,"src",ru),Xt(()=>T(n,"style",t.showSubMenu?"display:none":"display:grid")),O(e,n)}var au=(e,t)=>{t[0]=!t[0]},cu=(e,t)=>{t[1]=!t[1]},uu=(e,t)=>{t[1]=!t[1]},du=(e,t)=>{t[1]=!t[1]},fu=(e,t)=>{t[0]=!t[0]},hu=zt('<nav class="side_menu svelte-10hywn5" aria-label="Side Menu"><!> <img class="wiggle_bar svelte-10hywn5" style="" alt="sketched line bottom border for main app bar"> <ul class="svelte-10hywn5"><li class="svelte-10hywn5"><button class="svelte-10hywn5">Gates</button>    <img class="sketch_bar svelte-10hywn5" alt="sketched line bottom border for main app bar"> <!></li> <li class="svelte-10hywn5"><button class="svelte-10hywn5">Arithmetic</button>   <img class="sketch_bar svelte-10hywn5" alt="sketched line bottom border for main app bar"> <!></li> <li class="svelte-10hywn5"><button class="svelte-10hywn5">Multiplexers</button> <img class="sketch_bar svelte-10hywn5" alt="sketched line bottom border for main app bar"></li> <li class="svelte-10hywn5"><button class="svelte-10hywn5">Memory</button> <img class="sketch_bar svelte-10hywn5" alt="sketched line bottom border for main app bar"></li> <li class="svelte-10hywn5"><button class="svelte-10hywn5">Utils</button> <img class="sketch_bar svelte-10hywn5" alt="sketched line bottom border for main app bar"></li> <li class="svelte-10hywn5"></li></ul></nav>');function gu(e,t){ne(t,!0);const n=[15,23,24,25,27,17,19,21,29],r={Gates:{svg:void 0,groupElements:["And","Or","Nor","Not","Xor","Nand","Repeater","Xnor"]},Arithmetic:{svg:void 0,groupElements:["And","Or","Nor","Not","Xor","Nand","Repeater","Xnor"]},Multiplexers:{svg:void 0,groupElements:["And","Or","Nor","Not","Xor","Nand","Repeater","Xnor"]},Memory:{svg:void 0,groupElements:["And","Or","Nor","Not","Xor","Nand","Repeater","Xnor"]},Utils:{svg:void 0,groupElements:["And","Or","Nor","Not","Xor","Nand","Repeater","Xnor"]}};function i(ct){return Math.floor(Math.random()*ct)+1}let s=localStorage.getItem("randomLineSelectionStore");if(s===null){const ct=new Array;Object.keys(r).map(async Q=>{const G=i(n.length-1),$=n[G],Y=`/src/assets/svg/sketchLineSvg/line_${$}.svg`;r[Q].svg=Y,n.splice(G,1),ct.push($),console.log(r)}),localStorage.setItem("randomLineSelectionStore",JSON.stringify(ct))}else{const ct=JSON.parse(s),Q=Object.keys(r);ct.forEach((G,$)=>{const Y=Q[$],k=`/src/assets/svg/sketchLineSvg/line_${G}.svg`;r[Y].svg=k})}let l=Fn([!0,!0,!0]);var a=hu(),c=bt(a);Jc(c);var u=F(c,2);T(u,"src",$c);var d=F(u,2),h=bt(d),f=bt(h);f.__mousedown=[au,l];var m=F(f,2),v=F(m,2);Si(v,{get showSubMenu(){return l[0]}});var x=F(h,2),y=bt(x);y.__mousedown=[cu,l];var p=F(y,2),I=F(p,2);Si(I,{get showSubMenu(){return l[1]}});var P=F(x,2),C=bt(P);C.__mousedown=[uu,l];var D=F(C,2),X=F(P,2),q=bt(X);q.__mousedown=[du,l];var z=F(q,2),J=F(X,2),K=bt(J);K.__mousedown=[fu,l];var gt=F(K,2);Xt(()=>{T(m,"src",r.Gates.svg),T(p,"src",r.Arithmetic.svg),T(D,"src",r.Multiplexers.svg),T(z,"src",r.Memory.svg),T(gt,"src",r.Utils.svg)}),O(e,a),oe()}wl(["mousedown"]);const vu={dev0:{type:"NumEntry",label:"a",net:"a",bits:4},dev1:{type:"NumDisplay",label:"o",net:"o",bits:4},dev2:{type:"AdditionConst",label:"op",bits:{in:4,out:4},constant:1},dev3:{type:"Lamp",label:"o2",net:"o2"},dev4:{type:"LtConst",label:"op",bits:{in:4},constant:1}},pu=[{to:{id:"dev2",port:"in"},from:{id:"dev0",port:"out"},name:"a"},{to:{id:"dev1",port:"in"},from:{id:"dev2",port:"out"},name:"o"},{to:{id:"dev4",port:"in"},from:{id:"dev0",port:"out"},name:"a"},{to:{id:"dev3",port:"in"},from:{id:"dev4",port:"out"},name:"o2"}],mu=[],_u={devices:vu,connectors:pu,subcircuits:mu};var yu=zt("<!> <!>",1),bu=zt('<main class="svelte-enghw2"><!> <!></main>');function wu(e,t){ne(t,!1);let n=new ys(_u);sr.subscribe(l=>{console.log(n.updateGates()),console.log(n.getLabelIndex())}),pe();var r=bu(),i=bt(r);gu(i,{});var s=F(i,2);Rc(s,{theme:"LogiCap",TD:!0,controls:!0,edgeStyle:"step",editable:!1,children:(l,a)=>{var c=yu(),u=dt(c);xi(u,{nodeStartPos:20,width:80,height:50});var d=F(u,2);xi(d,{nodeStartPos:200,width:80,height:50}),O(l,c)},$$slots:{default:!0,minimap:(l,a)=>{gs(l,{width:100,corner:"NE",slot:"minimap"})}}}),O(e,r),oe()}xl(wu,{target:document.getElementById("app")});export{gi as A,Ue as B,Pa as C,yl as D,Hn as E,Cu as F,Eu as G,Dl as H,Ge as I,to as J,S as K,ir as L,dt as M,qn as N,zo as O,hn as P,uo as Q,T as R,cn as S,g as a,vr as b,o as c,F as d,bt as e,Xt as f,R as g,me as h,pe as i,H as j,os as k,Tt as l,b as m,un as n,nn as o,ne as p,O as q,oe as r,_ as s,zt as t,Dt as u,E as v,Gt as w,Lt as x,Re as y,we as z};
