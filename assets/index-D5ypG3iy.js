const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Controls-DA98E-dK.js","./Icon-BaOrgV5g.js","./DrawerController-Dk8vExvo.js","./DrawerController-CDtfjO5V.css"])))=>i.map(i=>d[i]);
var RZ=Object.defineProperty;var eC=e=>{throw TypeError(e)};var IZ=(e,t,r)=>t in e?RZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var tC=(e,t,r)=>IZ(e,typeof t!="symbol"?t+"":t,r),ym=(e,t,r)=>t.has(e)||eC("Cannot "+r);var Ma=(e,t,r)=>(ym(e,t,"read from private field"),r?r.call(e):t.get(e)),Sf=(e,t,r)=>t.has(e)?eC("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),_m=(e,t,r,n)=>(ym(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),rC=(e,t,r)=>(ym(e,t,"access private method"),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const nC=!1;var yh=Array.isArray,OZ=Array.prototype.indexOf,AE=Array.from,h4=Object.defineProperty,Ba=Object.getOwnPropertyDescriptor,d4=Object.getOwnPropertyDescriptors,MZ=Object.prototype,kZ=Array.prototype,TE=Object.getPrototypeOf,iC=Object.isExtensible;function Ef(e){return typeof e=="function"}const Ls=()=>{};function LZ(e){return e()}function Yf(e){for(var t=0;t<e.length;t++)e[t]()}function NZ(e,t,r=!1){return e===void 0?r?t():t:e}const Co=2,p4=4,Xp=8,PE=16,$a=32,Pl=64,bp=128,no=256,wp=512,_s=1024,Ua=2048,lc=4096,za=8192,Yp=16384,qZ=32768,Kp=65536,g4=1<<17,DZ=1<<19,v4=1<<20,BS=1<<21,aa=Symbol("$state"),m4=Symbol("legacy props"),FZ=Symbol("");function y4(e){return e===this.v}function CE(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function RE(e){return!CE(e,this.v)}function BZ(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function zZ(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function VZ(e){throw new Error("https://svelte.dev/e/effect_orphan")}function GZ(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function _4(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function $Z(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function UZ(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function jZ(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function HZ(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Cl=!1,WZ=!1;function XZ(){Cl=!0}const IE=1,OE=2,b4=4,YZ=8,KZ=16,ZZ=1,JZ=2,QZ=4,eJ=8,tJ=16,w4=1,rJ=2,us=Symbol(),nJ="http://www.w3.org/1999/xhtml";function ME(){throw new Error("https://svelte.dev/e/invalid_default_snippet")}function Rl(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Pr=null;function sC(e){Pr=e}function Mr(e){return x4().get(e)}function Qr(e,t){return x4().set(e,t),t}function Cr(e,t=!1,r){var n=Pr={p:Pr,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Cl&&!t&&(Pr.l={s:null,u:null,r1:[],r2:Zf(!1)}),Jp(()=>{n.d=!0})}function Rr(e){const t=Pr;if(t!==null){e!==void 0&&(t.x=e);const o=t.e;if(o!==null){var r=gn,n=nn;t.e=null;try{for(var i=0;i<o.length;i++){var s=o[i];bu(s.effect),la(s.reaction),ic(s.fn)}}finally{bu(r),la(n)}}Pr=t.p,t.m=!0}return e||{}}function _h(){return!Cl||Pr!==null&&Pr.l===null}function x4(e){return Pr===null&&Rl(),Pr.c??(Pr.c=new Map(iJ(Pr)||void 0))}function iJ(e){let t=e.p;for(;t!==null;){const r=t.c;if(r!==null)return r;t=t.p}return null}function xo(e,t){if(typeof e!="object"||e===null||aa in e)return e;const r=TE(e);if(r!==MZ&&r!==kZ)return e;var n=new Map,i=yh(e),s=li(0),o=nn,a=u=>{var c=nn;la(o);var f;return f=u(),la(c),f};return i&&n.set("length",li(e.length)),new Proxy(e,{defineProperty(u,c,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&UZ();var h=n.get(c);return h===void 0?(h=a(()=>li(f.value)),n.set(c,h)):we(h,a(()=>xo(f.value))),!0},deleteProperty(u,c){var f=n.get(c);if(f===void 0)c in u&&n.set(c,a(()=>li(us)));else{if(i&&typeof c=="string"){var h=n.get("length"),v=Number(c);Number.isInteger(v)&&v<h.v&&we(h,v)}we(f,us),oC(s)}return!0},get(u,c,f){var m;if(c===aa)return e;var h=n.get(c),v=c in u;if(h===void 0&&(!v||(m=Ba(u,c))!=null&&m.writable)&&(h=a(()=>li(xo(v?u[c]:us))),n.set(c,h)),h!==void 0){var y=R(h);return y===us?void 0:y}return Reflect.get(u,c,f)},getOwnPropertyDescriptor(u,c){var f=Reflect.getOwnPropertyDescriptor(u,c);if(f&&"value"in f){var h=n.get(c);h&&(f.value=R(h))}else if(f===void 0){var v=n.get(c),y=v==null?void 0:v.v;if(v!==void 0&&y!==us)return{enumerable:!0,configurable:!0,value:y,writable:!0}}return f},has(u,c){var y;if(c===aa)return!0;var f=n.get(c),h=f!==void 0&&f.v!==us||Reflect.has(u,c);if(f!==void 0||gn!==null&&(!h||(y=Ba(u,c))!=null&&y.writable)){f===void 0&&(f=a(()=>li(h?xo(u[c]):us)),n.set(c,f));var v=R(f);if(v===us)return!1}return h},set(u,c,f,h){var A;var v=n.get(c),y=c in u;if(i&&c==="length")for(var m=f;m<v.v;m+=1){var _=n.get(m+"");_!==void 0?we(_,us):m in u&&(_=a(()=>li(us)),n.set(m+"",_))}v===void 0?(!y||(A=Ba(u,c))!=null&&A.writable)&&(v=a(()=>li(void 0)),we(v,a(()=>xo(f))),n.set(c,v)):(y=v.v!==us,we(v,a(()=>xo(f))));var w=Reflect.getOwnPropertyDescriptor(u,c);if(w!=null&&w.set&&w.set.call(h,f),!y){if(i&&typeof c=="string"){var S=n.get("length"),E=Number(c);Number.isInteger(E)&&E>=S.v&&we(S,E+1)}oC(s)}return!0},ownKeys(u){R(s);var c=Reflect.ownKeys(u).filter(v=>{var y=n.get(v);return y===void 0||y.v!==us});for(var[f,h]of n)h.v!==us&&!(f in u)&&c.push(f);return c},setPrototypeOf(){jZ()}})}function oC(e,t=1){we(e,e.v+t)}function aC(e){try{if(e!==null&&typeof e=="object"&&aa in e)return e[aa]}catch{}return e}function Q0e(e,t){return Object.is(aC(e),aC(t))}const Kf=new Map;function Zf(e,t){var r={f:0,v:e,reactions:null,equals:y4,rv:0,wv:0};return r}function li(e,t){const r=Zf(e);return q4(r),r}function qe(e,t=!1){var n;const r=Zf(e);return t||(r.equals=RE),Cl&&Pr!==null&&Pr.l!==null&&((n=Pr.l).s??(n.s=[])).push(r),r}function Wc(e,t){return we(e,Pn(()=>R(e))),t}function we(e,t,r=!1){nn!==null&&!na&&_h()&&(nn.f&(Co|PE))!==0&&!(Yi!=null&&Yi.includes(e))&&HZ();let n=r?xo(t):t;return Jf(e,n)}function Jf(e,t){if(!e.equals(t)){var r=e.v;bh?Kf.set(e,t):Kf.set(e,r),e.v=t,e.wv=F4(),S4(e,Ua),_h()&&gn!==null&&(gn.f&_s)!==0&&(gn.f&($a|Pl))===0&&(Ys===null?vJ([e]):Ys.push(e))}return t}function S4(e,t){var r=e.reactions;if(r!==null)for(var n=_h(),i=r.length,s=0;s<i;s++){var o=r[s],a=o.f;(a&Ua)===0&&(!n&&o===gn||(Ro(o,t),(a&(_s|no))!==0&&((a&Co)!==0?S4(o,lc):ng(o))))}}let sJ=!1;var rl,E4,A4,T4;function oJ(){if(rl===void 0){rl=window,E4=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;A4=Ba(t,"firstChild").get,T4=Ba(t,"nextSibling").get,iC(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),iC(r)&&(r.__t=void 0)}}function kE(e=""){return document.createTextNode(e)}function Na(e){return A4.call(e)}function Zp(e){return T4.call(e)}function jt(e,t){return Na(e)}function Gt(e,t){{var r=Na(e);return r instanceof Comment&&r.data===""?Zp(r):r}}function xt(e,t=1,r=!1){let n=e;for(;t--;)n=Zp(n);return n}function aJ(e){e.textContent=""}function ml(e){var t=Co|Ua,r=nn!==null&&(nn.f&Co)!==0?nn:null;return gn===null||r!==null&&(r.f&no)!==0?t|=no:gn.f|=v4,{ctx:Pr,deps:null,effects:null,equals:y4,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:r??gn}}function ls(e){const t=ml(e);return q4(t),t}function hn(e){const t=ml(e);return t.equals=RE,t}function P4(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)_u(t[r])}}function uJ(e){for(var t=e.parent;t!==null;){if((t.f&Co)===0)return t;t=t.parent}return null}function cJ(e){var t,r=gn;bu(uJ(e));try{P4(e),t=z4(e)}finally{bu(r)}return t}function C4(e){var t=cJ(e),r=(pu||(e.f&no)!==0)&&e.deps!==null?lc:_s;Ro(e,r),e.equals(t)||(e.v=t,e.wv=F4())}function R4(e){gn===null&&nn===null&&VZ(),nn!==null&&(nn.f&no)!==0&&gn===null&&zZ(),bh&&BZ()}function lJ(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Il(e,t,r,n=!0){var i=gn,s={ctx:Pr,deps:null,nodes_start:null,nodes_end:null,f:e|Ua,first:null,fn:t,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(r)try{rg(s),s.f|=qZ}catch(u){throw _u(s),u}else t!==null&&ng(s);var o=r&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(v4|bp))===0;if(!o&&n&&(i!==null&&lJ(s,i),nn!==null&&(nn.f&Co)!==0)){var a=nn;(a.effects??(a.effects=[])).push(s)}return s}function Jp(e){const t=Il(Xp,null,!1);return Ro(t,_s),t.teardown=e,t}function Qf(e){R4();var t=gn!==null&&(gn.f&$a)!==0&&Pr!==null&&!Pr.m;if(t){var r=Pr;(r.e??(r.e=[])).push({fn:e,effect:gn,reaction:nn})}else{var n=ic(e);return n}}function fJ(e){return R4(),Ol(e)}function hJ(e){const t=Il(Pl,e,!0);return(r={})=>new Promise(n=>{r.outro?eh(t,()=>{_u(t),n(void 0)}):(_u(t),n(void 0))})}function ic(e){return Il(p4,e,!1)}function Fe(e,t){var r=Pr,n={effect:null,ran:!1};r.l.r1.push(n),n.effect=Ol(()=>{e(),!n.ran&&(n.ran=!0,we(r.l.r2,!0),Pn(t))})}function Ji(){var e=Pr;Ol(()=>{if(R(e.l.r2)){for(var t of e.l.r1){var r=t.effect;(r.f&_s)!==0&&Ro(r,lc),Ml(r)&&rg(r),t.ran=!1}e.l.r2.v=!1}})}function Ol(e){return Il(Xp,e,!0)}function Wt(e,t=[],r=ml){const n=t.map(r);return Qp(()=>e(...n.map(R)))}function Qp(e,t=0){return Il(Xp|PE|t,e,!0)}function yl(e,t=!0){return Il(Xp|$a,e,!0,t)}function I4(e){var t=e.teardown;if(t!==null){const r=bh,n=nn;cC(!0),la(null);try{t.call(null)}finally{cC(r),la(n)}}}function O4(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var n=r.next;(r.f&Pl)!==0?r.parent=null:_u(r,t),r=n}}function dJ(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&$a)===0&&_u(t),t=r}}function _u(e,t=!0){var r=!1;if((t||(e.f&DZ)!==0)&&e.nodes_start!==null){for(var n=e.nodes_start,i=e.nodes_end;n!==null;){var s=n===i?null:Zp(n);n.remove(),n=s}r=!0}O4(e,t&&!r),Tp(e,0),Ro(e,Yp);var o=e.transitions;if(o!==null)for(const u of o)u.stop();I4(e);var a=e.parent;a!==null&&a.first!==null&&M4(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function M4(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function eh(e,t){var r=[];LE(e,r,!0),k4(r,()=>{_u(e),t&&t()})}function k4(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var i of e)i.out(n)}else t()}function LE(e,t,r){if((e.f&za)===0){if(e.f^=za,e.transitions!==null)for(const o of e.transitions)(o.is_global||r)&&t.push(o);for(var n=e.first;n!==null;){var i=n.next,s=(n.f&Kp)!==0||(n.f&$a)!==0;LE(n,t,s?r:!1),n=i}}}function xp(e){L4(e,!0)}function L4(e,t){if((e.f&za)!==0){e.f^=za,(e.f&_s)===0&&(e.f^=_s),Ml(e)&&(Ro(e,Ua),ng(e));for(var r=e.first;r!==null;){var n=r.next,i=(r.f&Kp)!==0||(r.f&$a)!==0;L4(r,i?t:!1),r=n}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let th=[],zS=[];function N4(){var e=th;th=[],Yf(e)}function pJ(){var e=zS;zS=[],Yf(e)}function eg(e){th.length===0&&queueMicrotask(N4),th.push(e)}function uC(){th.length>0&&N4(),zS.length>0&&pJ()}let fp=!1,Sp=!1,Ep=null,Qu=!1,bh=!1;function cC(e){bh=e}let Gf=[];let nn=null,na=!1;function la(e){nn=e}let gn=null;function bu(e){gn=e}let Yi=null;function gJ(e){Yi=e}function q4(e){nn!==null&&nn.f&BS&&(Yi===null?gJ([e]):Yi.push(e))}let ji=null,Is=0,Ys=null;function vJ(e){Ys=e}let D4=1,Ap=0,pu=!1,hu=null;function F4(){return++D4}function Ml(e){var h;var t=e.f;if((t&Ua)!==0)return!0;if((t&lc)!==0){var r=e.deps,n=(t&no)!==0;if(r!==null){var i,s,o=(t&wp)!==0,a=n&&gn!==null&&!pu,u=r.length;if(o||a){var c=e,f=c.parent;for(i=0;i<u;i++)s=r[i],(o||!((h=s==null?void 0:s.reactions)!=null&&h.includes(c)))&&(s.reactions??(s.reactions=[])).push(c);o&&(c.f^=wp),a&&f!==null&&(f.f&no)===0&&(c.f^=no)}for(i=0;i<u;i++)if(s=r[i],Ml(s)&&C4(s),s.wv>e.wv)return!0}(!n||gn!==null&&!pu)&&Ro(e,_s)}return!1}function mJ(e,t){for(var r=t;r!==null;){if((r.f&bp)!==0)try{r.fn(e);return}catch{r.f^=bp}r=r.parent}throw fp=!1,e}function yJ(e){return(e.f&Yp)===0&&(e.parent===null||(e.parent.f&bp)===0)}function tg(e,t,r,n){if(fp){if(r===null&&(fp=!1),yJ(t))throw e;return}r!==null&&(fp=!0);{mJ(e,t);return}}function B4(e,t,r=!0){var n=e.reactions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];Yi!=null&&Yi.includes(e)||((s.f&Co)!==0?B4(s,t,!1):t===s&&(r?Ro(s,Ua):(s.f&_s)!==0&&Ro(s,lc),ng(s)))}}function z4(e){var y;var t=ji,r=Is,n=Ys,i=nn,s=pu,o=Yi,a=Pr,u=na,c=e.f;ji=null,Is=0,Ys=null,pu=(c&no)!==0&&(na||!Qu||nn===null),nn=(c&($a|Pl))===0?e:null,Yi=null,sC(e.ctx),na=!1,Ap++,e.f|=BS;try{var f=(0,e.fn)(),h=e.deps;if(ji!==null){var v;if(Tp(e,Is),h!==null&&Is>0)for(h.length=Is+ji.length,v=0;v<ji.length;v++)h[Is+v]=ji[v];else e.deps=h=ji;if(!pu)for(v=Is;v<h.length;v++)((y=h[v]).reactions??(y.reactions=[])).push(e)}else h!==null&&Is<h.length&&(Tp(e,Is),h.length=Is);if(_h()&&Ys!==null&&!na&&h!==null&&(e.f&(Co|lc|Ua))===0)for(v=0;v<Ys.length;v++)B4(Ys[v],e);return i!==null&&(Ap++,Ys!==null&&(n===null?n=Ys:n.push(...Ys))),f}finally{ji=t,Is=r,Ys=n,nn=i,pu=s,Yi=o,sC(a),na=u,e.f^=BS}}function _J(e,t){let r=t.reactions;if(r!==null){var n=OZ.call(r,e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}r===null&&(t.f&Co)!==0&&(ji===null||!ji.includes(t))&&(Ro(t,lc),(t.f&(no|wp))===0&&(t.f^=wp),P4(t),Tp(t,0))}function Tp(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)_J(e,r[n])}function rg(e){var t=e.f;if((t&Yp)===0){Ro(e,_s);var r=gn,n=Pr,i=Qu;gn=e,Qu=!0;try{(t&PE)!==0?dJ(e):O4(e),I4(e);var s=z4(e);e.teardown=typeof s=="function"?s:null,e.wv=D4;var o=e.deps,a;nC&&WZ&&e.f&Ua}catch(u){tg(u,e,r,n||e.ctx)}finally{Qu=i,gn=r}}}function bJ(){try{GZ()}catch(e){if(Ep!==null)tg(e,Ep,null);else throw e}}function V4(){var e=Qu;try{var t=0;for(Qu=!0;Gf.length>0;){t++>1e3&&bJ();var r=Gf,n=r.length;Gf=[];for(var i=0;i<n;i++){var s=xJ(r[i]);wJ(s)}}}finally{Sp=!1,Qu=e,Ep=null,Kf.clear()}}function wJ(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var n=e[r];if((n.f&(Yp|za))===0)try{Ml(n)&&(rg(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?M4(n):n.fn=null))}catch(i){tg(i,n,null,n.ctx)}}}function ng(e){Sp||(Sp=!0,queueMicrotask(V4));for(var t=Ep=e;t.parent!==null;){t=t.parent;var r=t.f;if((r&(Pl|$a))!==0){if((r&_s)===0)return;t.f^=_s}}Gf.push(t)}function xJ(e){for(var t=[],r=e;r!==null;){var n=r.f,i=(n&($a|Pl))!==0,s=i&&(n&_s)!==0;if(!s&&(n&za)===0){if((n&p4)!==0)t.push(r);else if(i)r.f^=_s;else{var o=nn;try{nn=r,Ml(r)&&rg(r)}catch(c){tg(c,r,null,r.ctx)}finally{nn=o}}var a=r.first;if(a!==null){r=a;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)r=u.next,u=u.parent}return t}function SJ(e){var t;for(uC();Gf.length>0;)Sp=!0,V4(),uC();return t}async function EJ(){await Promise.resolve(),SJ()}function R(e){var t=e.f,r=(t&Co)!==0;if(hu!==null&&hu.add(e),nn!==null&&!na){if(!(Yi!=null&&Yi.includes(e))){var n=nn.deps;e.rv<Ap&&(e.rv=Ap,ji===null&&n!==null&&n[Is]===e?Is++:ji===null?ji=[e]:(!pu||!ji.includes(e))&&ji.push(e))}}else if(r&&e.deps===null&&e.effects===null){var i=e,s=i.parent;s!==null&&(s.f&no)===0&&(i.f^=no)}return r&&(i=e,Ml(i)&&C4(i)),bh&&Kf.has(e)?Kf.get(e):e.v}function AJ(e){var t=hu;hu=new Set;var r=hu,n;try{if(Pn(e),t!==null)for(n of hu)t.add(n)}finally{hu=t}return r}function eye(e){var t=AJ(()=>Pn(e));for(var r of t)if((r.f&g4)!==0)for(const n of r.deps||[])(n.f&Co)===0&&Jf(n,n.v);else Jf(r,r.v)}function Pn(e){var t=na;try{return na=!0,e()}finally{na=t}}const TJ=-7169;function Ro(e,t){e.f=e.f&TJ|t}function PJ(e,t){var r={};for(var n in e)t.includes(n)||(r[n]=e[n]);return r}function Vt(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(aa in e)VS(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&aa in r&&VS(r)}}}function VS(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{VS(e[n],t)}catch{}const r=TE(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=d4(r);for(let i in n){const s=n[i].get;if(s)try{s.call(e)}catch{}}}}}function CJ(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const RJ=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function IJ(e){return RJ.includes(e)}const OJ={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function MJ(e){return e=e.toLowerCase(),OJ[e]??e}const kJ=["touchstart","touchmove"];function LJ(e){return kJ.includes(e)}function NJ(e,t){if(t){const r=document.body;e.autofocus=!0,eg(()=>{document.activeElement===r&&e.focus()})}}let lC=!1;function qJ(){lC||(lC=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function G4(e){var t=nn,r=gn;la(null),bu(null);try{return e()}finally{la(t),bu(r)}}function DJ(e,t,r,n=r){e.addEventListener(t,()=>G4(r));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),qJ()}const $4=new Set,GS=new Set;function U4(e,t,r,n={}){function i(s){if(n.capture||kf.call(t,s),!s.cancelBubble)return G4(()=>r==null?void 0:r.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?eg(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function pr(e,t,r,n,i){var s={capture:n,passive:i},o=U4(e,t,r,s);(t===document.body||t===window||t===document)&&Jp(()=>{t.removeEventListener(e,o,s)})}function kl(e){for(var t=0;t<e.length;t++)$4.add(e[t]);for(var r of GS)r(e)}function kf(e){var E;var t=this,r=t.ownerDocument,n=e.type,i=((E=e.composedPath)==null?void 0:E.call(e))||[],s=i[0]||e.target,o=0,a=e.__root;if(a){var u=i.indexOf(a);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;u<=c&&(o=u)}if(s=i[o]||e.target,s!==t){h4(e,"currentTarget",{configurable:!0,get(){return s||r}});var f=nn,h=gn;la(null),bu(null);try{for(var v,y=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var _=s["__"+n];if(_!=null&&(!s.disabled||e.target===s))if(yh(_)){var[w,...S]=_;w.apply(s,[e,...S])}else _.call(s,e)}catch(A){v?y.push(A):v=A}if(e.cancelBubble||m===t||m===null)break;s=m}if(v){for(let A of y)queueMicrotask(()=>{throw A});throw v}}finally{e.__root=t,delete e.currentTarget,la(f),bu(h)}}}function j4(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function rh(e,t){var r=gn;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function ir(e,t){var r=(t&w4)!==0,n=(t&rJ)!==0,i,s=!e.startsWith("<!>");return()=>{i===void 0&&(i=j4(s?e:"<!>"+e),r||(i=Na(i)));var o=n||E4?document.importNode(i,!0):i.cloneNode(!0);if(r){var a=Na(o),u=o.lastChild;rh(a,u)}else rh(o,o);return o}}function Nn(e,t,r="svg"){var n=!e.startsWith("<!>"),i=(t&w4)!==0,s=`<${r}>${n?e:"<!>"+e}</${r}>`,o;return()=>{if(!o){var a=j4(s),u=Na(a);if(i)for(o=document.createDocumentFragment();Na(u);)o.appendChild(Na(u));else o=Na(u)}var c=o.cloneNode(!0);if(i){var f=Na(c),h=c.lastChild;rh(f,h)}else rh(c,c);return c}}function gr(){var e=document.createDocumentFragment(),t=document.createComment(""),r=kE();return e.append(t,r),rh(t,r),e}function nt(e,t){e!==null&&e.before(t)}function Eu(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r+"")}function FJ(e,t){return BJ(e,t)}const Xc=new Map;function BJ(e,{target:t,anchor:r,props:n={},events:i,context:s,intro:o=!0}){oJ();var a=new Set,u=h=>{for(var v=0;v<h.length;v++){var y=h[v];if(!a.has(y)){a.add(y);var m=LJ(y);t.addEventListener(y,kf,{passive:m});var _=Xc.get(y);_===void 0?(document.addEventListener(y,kf,{passive:m}),Xc.set(y,1)):Xc.set(y,_+1)}}};u(AE($4)),GS.add(u);var c=void 0,f=hJ(()=>{var h=r??t.appendChild(kE());return yl(()=>{if(s){Cr({});var v=Pr;v.c=s}i&&(n.$$events=i),c=e(h,n)||{},s&&Rr()}),()=>{var m;for(var v of a){t.removeEventListener(v,kf);var y=Xc.get(v);--y===0?(document.removeEventListener(v,kf),Xc.delete(v)):Xc.set(v,y)}GS.delete(u),h!==r&&((m=h.parentNode)==null||m.removeChild(h))}});return zJ.set(c,f),c}let zJ=new WeakMap;function lr(e,t,[r,n]=[0,0]){var i=e,s=null,o=null,a=us,u=r>0?Kp:0,c=!1;const f=(v,y=!0)=>{c=!0,h(y,v)},h=(v,y)=>{a!==(a=v)&&(a?(s?xp(s):y&&(s=yl(()=>y(i))),o&&eh(o,()=>{o=null})):(o?xp(o):y&&(o=yl(()=>y(i,[r+1,n]))),s&&eh(s,()=>{s=null})))};Qp(()=>{c=!1,t(f),c||h(null,null)},u)}function gu(e,t){return t}function VJ(e,t,r,n){for(var i=[],s=t.length,o=0;o<s;o++)LE(t[o].e,i,!0);var a=s>0&&i.length===0&&r!==null;if(a){var u=r.parentNode;aJ(u),u.append(r),n.clear(),fu(e,t[0].prev,t[s-1].next)}k4(i,()=>{for(var c=0;c<s;c++){var f=t[c];a||(n.delete(f.k),fu(e,f.prev,f.next)),_u(f.e,!a)}})}function ds(e,t,r,n,i,s=null){var o=e,a={flags:t,items:new Map,first:null},u=(t&b4)!==0;if(u){var c=e;o=c.appendChild(kE())}var f=null,h=!1,v=hn(()=>{var y=r();return yh(y)?y:y==null?[]:AE(y)});Qp(()=>{var y=R(v),m=y.length;h&&m===0||(h=m===0,GJ(y,a,o,i,t,n,r),s!==null&&(m===0?f?xp(f):f=yl(()=>s(o)):f!==null&&eh(f,()=>{f=null})),R(v))})}function GJ(e,t,r,n,i,s,o){var ee,ae,K,U;var a=(i&YZ)!==0,u=(i&(IE|OE))!==0,c=e.length,f=t.items,h=t.first,v=h,y,m=null,_,w=[],S=[],E,A,T,I;if(a)for(I=0;I<c;I+=1)E=e[I],A=s(E,I),T=f.get(A),T!==void 0&&((ee=T.a)==null||ee.measure(),(_??(_=new Set)).add(T));for(I=0;I<c;I+=1){if(E=e[I],A=s(E,I),T=f.get(A),T===void 0){var q=v?v.e.nodes_start:r;m=UJ(q,t,m,m===null?t.first:m.next,E,A,I,n,i,o),f.set(A,m),w=[],S=[],v=m.next;continue}if(u&&$J(T,E,I,i),(T.e.f&za)!==0&&(xp(T.e),a&&((ae=T.a)==null||ae.unfix(),(_??(_=new Set)).delete(T))),T!==v){if(y!==void 0&&y.has(T)){if(w.length<S.length){var p=S[0],C;m=p.prev;var O=w[0],N=w[w.length-1];for(C=0;C<w.length;C+=1)fC(w[C],p,r);for(C=0;C<S.length;C+=1)y.delete(S[C]);fu(t,O.prev,N.next),fu(t,m,O),fu(t,N,p),v=p,m=N,I-=1,w=[],S=[]}else y.delete(T),fC(T,v,r),fu(t,T.prev,T.next),fu(t,T,m===null?t.first:m.next),fu(t,m,T),m=T;continue}for(w=[],S=[];v!==null&&v.k!==A;)(v.e.f&za)===0&&(y??(y=new Set)).add(v),S.push(v),v=v.next;if(v===null)continue;T=v}w.push(T),m=T,v=T.next}if(v!==null||y!==void 0){for(var V=y===void 0?[]:AE(y);v!==null;)(v.e.f&za)===0&&V.push(v),v=v.next;var W=V.length;if(W>0){var G=(i&b4)!==0&&c===0?r:null;if(a){for(I=0;I<W;I+=1)(K=V[I].a)==null||K.measure();for(I=0;I<W;I+=1)(U=V[I].a)==null||U.fix()}VJ(t,V,G,f)}}a&&eg(()=>{var j;if(_!==void 0)for(T of _)(j=T.a)==null||j.apply()}),gn.first=t.first&&t.first.e,gn.last=m&&m.e}function $J(e,t,r,n){(n&IE)!==0&&Jf(e.v,t),(n&OE)!==0?Jf(e.i,r):e.i=r}function UJ(e,t,r,n,i,s,o,a,u,c){var f=(u&IE)!==0,h=(u&KZ)===0,v=f?h?qe(i):Zf(i):i,y=(u&OE)===0?o:Zf(o),m={i:y,v,k:s,a:null,e:null,prev:r,next:n};try{return m.e=yl(()=>a(e,v,y,c),sJ),m.e.prev=r&&r.e,m.e.next=n&&n.e,r===null?t.first=m:(r.next=m,r.e.next=m.e),n!==null&&(n.prev=m,n.e.prev=m.e),m}finally{}}function fC(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,s=e.e.nodes_start;s!==n;){var o=Zp(s);i.before(s),s=o}}function fu(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Xr(e,t,r,n,i){var a;var s=(a=t.$$slots)==null?void 0:a[r],o=!1;s===!0&&(s=t[r==="default"?"children":r],o=!0),s===void 0?i!==null&&i(e):s(e,o?()=>n:n)}function NE(e){const t={};e.children&&(t.default=!0);for(const r in e.$$slots)t[r]=!0;return t}function Yu(e,t,r){var n=e,i,s;Qp(()=>{i!==(i=t())&&(s&&(eh(s),s=null),i&&(s=yl(()=>r(n,i))))},Kp)}function Xu(e,t,r){ic(()=>{var n=Pn(()=>t(e,r==null?void 0:r())||{});if(r&&(n!=null&&n.update)){var i=!1,s={};Ol(()=>{var o=r();Vt(o),i&&CE(s,o)&&(s=o,n.update(o))}),i=!0}if(n!=null&&n.destroy)return()=>n.destroy()})}function H4(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=H4(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function jJ(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=H4(e))&&(n&&(n+=" "),n+=t);return n}function qE(e){return typeof e=="object"?jJ(e):e??""}const hC=[...` 	
\r\fÂ \v\uFEFF`];function HJ(e,t,r){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),r){for(var i in r)if(r[i])n=n?n+" "+i:i;else if(n.length)for(var s=i.length,o=0;(o=n.indexOf(i,o))>=0;){var a=o+s;(o===0||hC.includes(n[o-1]))&&(a===n.length||hC.includes(n[a]))?n=(o===0?"":n.substring(0,o))+n.substring(a+1):o=a}}return n===""?null:n}function dC(e,t=!1){var r=t?" !important;":";",n="";for(var i in e){var s=e[i];s!=null&&s!==""&&(n+=" "+i+": "+s+r)}return n}function bm(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function WJ(e,t){if(t){var r="",n,i;if(Array.isArray(t)?(n=t[0],i=t[1]):n=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,o=0,a=!1,u=[];n&&u.push(...Object.keys(n).map(bm)),i&&u.push(...Object.keys(i).map(bm));var c=0,f=-1;const _=e.length;for(var h=0;h<_;h++){var v=e[h];if(a?v==="/"&&e[h-1]==="*"&&(a=!1):s?s===v&&(s=!1):v==="/"&&e[h+1]==="*"?a=!0:v==='"'||v==="'"?s=v:v==="("?o++:v===")"&&o--,!a&&s===!1&&o===0){if(v===":"&&f===-1)f=h;else if(v===";"||h===_-1){if(f!==-1){var y=bm(e.substring(c,f).trim());if(!u.includes(y)){v!==";"&&h++;var m=e.substring(c,h).trim();r+=" "+m+";"}}c=h+1,f=-1}}}}return n&&(r+=dC(n)),i&&(r+=dC(i,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function Cn(e,t,r,n,i,s){var o=e.__className;if(o!==r||o===void 0){var a=HJ(r,n,s);a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a),e.__className=r}else if(s&&i!==s)for(var u in s){var c=!!s[u];(i==null||c!==!!i[u])&&e.classList.toggle(u,c)}return s}function wm(e,t={},r,n){for(var i in r){var s=r[i];t[i]!==s&&(r[i]==null?e.style.removeProperty(i):e.style.setProperty(i,s,n))}}function kr(e,t,r,n){var i=e.__style;if(i!==t){var s=WJ(t,n);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}else n&&(Array.isArray(n)?(wm(e,r==null?void 0:r[0],n[0]),wm(e,r==null?void 0:r[1],n[1],"important")):wm(e,r,n));return n}const Af=Symbol("class"),Tf=Symbol("style"),W4=Symbol("is custom element"),X4=Symbol("is html");function XJ(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function pt(e,t,r,n){var i=Y4(e);i[t]!==(i[t]=r)&&(t==="loading"&&(e[FZ]=r),r==null?e.removeAttribute(t):typeof r!="string"&&K4(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function ha(e,t,r,n,i=!1){var s=Y4(e),o=s[W4],a=!s[X4],u=t||{},c=e.tagName==="OPTION";for(var f in t)f in r||(r[f]=null);r.class?r.class=qE(r.class):r[Af]&&(r.class=null),r[Tf]&&(r.style??(r.style=null));var h=K4(e);for(const E in r){let A=r[E];if(c&&E==="value"&&A==null){e.value=e.__value="",u[E]=A;continue}if(E==="class"){var v=e.namespaceURI==="http://www.w3.org/1999/xhtml";Cn(e,v,A,n,t==null?void 0:t[Af],r[Af]),u[E]=A,u[Af]=r[Af];continue}if(E==="style"){kr(e,A,t==null?void 0:t[Tf],r[Tf]),u[E]=A,u[Tf]=r[Tf];continue}var y=u[E];if(A!==y){u[E]=A;var m=E[0]+E[1];if(m!=="$$")if(m==="on"){const T={},I="$$"+E;let q=E.slice(2);var _=IJ(q);if(CJ(q)&&(q=q.slice(0,-7),T.capture=!0),!_&&y){if(A!=null)continue;e.removeEventListener(q,u[I],T),u[I]=null}if(A!=null)if(_)e[`__${q}`]=A,kl([q]);else{let p=function(C){u[E].call(this,C)};u[I]=U4(q,e,p,T)}else _&&(e[`__${q}`]=void 0)}else if(E==="style")pt(e,E,A);else if(E==="autofocus")NJ(e,!!A);else if(!o&&(E==="__value"||E==="value"&&A!=null))e.value=e.__value=A;else if(E==="selected"&&c)XJ(e,A);else{var w=E;a||(w=MJ(w));var S=w==="defaultValue"||w==="defaultChecked";if(A==null&&!o&&!S)if(s[E]=null,w==="value"||w==="checked"){let T=e;const I=t===void 0;if(w==="value"){let q=T.defaultValue;T.removeAttribute(w),T.defaultValue=q,T.value=T.__value=I?q:null}else{let q=T.defaultChecked;T.removeAttribute(w),T.defaultChecked=q,T.checked=I?q:!1}}else e.removeAttribute(E);else S||h.includes(w)&&(o||typeof A!="string")?e[w]=A:typeof A!="function"&&pt(e,w,A)}}}return u}function Y4(e){return e.__attributes??(e.__attributes={[W4]:e.nodeName.includes("-"),[X4]:e.namespaceURI===nJ})}var pC=new Map;function K4(e){var t=pC.get(e.nodeName);if(t)return t;pC.set(e.nodeName,t=[]);for(var r,n=e,i=Element.prototype;i!==n;){r=d4(n);for(var s in r)r[s].set&&t.push(s);n=TE(n)}return t}function YJ(e,t,r=t){var n=_h();DJ(e,"input",i=>{var s=i?e.defaultValue:e.value;if(s=xm(e)?Sm(s):s,r(s),n&&s!==(s=t())){var o=e.selectionStart,a=e.selectionEnd;e.value=s??"",a!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(a,e.value.length))}}),Pn(t)==null&&e.value&&r(xm(e)?Sm(e.value):e.value),Ol(()=>{var i=t();xm(e)&&i===Sm(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function xm(e){var t=e.type;return t==="number"||t==="range"}function Sm(e){return e===""?null:+e}function DE(e,t,r){var n=Ba(e,t);n&&n.set&&(e[t]=r,Jp(()=>{e[t]=null}))}var du,vl,mh,Hp,Z4;const Wp=class Wp{constructor(t){Sf(this,Hp);Sf(this,du,new WeakMap);Sf(this,vl);Sf(this,mh);_m(this,mh,t)}observe(t,r){var n=Ma(this,du).get(t)||new Set;return n.add(r),Ma(this,du).set(t,n),rC(this,Hp,Z4).call(this).observe(t,Ma(this,mh)),()=>{var i=Ma(this,du).get(t);i.delete(r),i.size===0&&(Ma(this,du).delete(t),Ma(this,vl).unobserve(t))}}};du=new WeakMap,vl=new WeakMap,mh=new WeakMap,Hp=new WeakSet,Z4=function(){return Ma(this,vl)??_m(this,vl,new ResizeObserver(t=>{for(var r of t){Wp.entries.set(r.target,r);for(var n of Ma(this,du).get(r.target)||[])n(r)}}))},tC(Wp,"entries",new WeakMap);let $S=Wp;var KJ=new $S({box:"border-box"});function gC(e,t,r){var n=KJ.observe(e,()=>r(e[t]));ic(()=>(Pn(()=>r(e[t])),n))}function vC(e,t){return e===t||(e==null?void 0:e[aa])===t}function wu(e={},t,r,n){return ic(()=>{var i,s;return Ol(()=>{i=s,s=[],Pn(()=>{e!==r(...s)&&(t(e,...s),i&&vC(r(...i),e)&&t(null,...i))})}),()=>{eg(()=>{s&&vC(r(...s),e)&&t(null,...s)})}}),e}function $f(e){return function(...t){var r=t[0];r.target===this&&(e==null||e.apply(this,t))}}function ro(e){return function(...t){var r=t[0];return r.stopPropagation(),e==null?void 0:e.apply(this,t)}}function ks(e){return function(...t){var r=t[0];return r.preventDefault(),e==null?void 0:e.apply(this,t)}}function qn(e=!1){const t=Pr,r=t.l.u;if(!r)return;let n=()=>Vt(t.s);if(e){let i=0,s={};const o=ml(()=>{let a=!1;const u=t.s;for(const c in u)u[c]!==s[c]&&(s[c]=u[c],a=!0);return a&&i++,i});n=()=>R(o)}r.b.length&&fJ(()=>{mC(t,n),Yf(r.b)}),Qf(()=>{const i=Pn(()=>r.m.map(LZ));return()=>{for(const s of i)typeof s=="function"&&s()}}),r.a.length&&Qf(()=>{mC(t,n),Yf(r.a)})}function mC(e,t){if(e.l.s)for(const r of e.l.s)R(r);t()}function Tn(e,t){var s;var r=(s=e.$$events)==null?void 0:s[t.type],n=yh(r)?r.slice():r==null?[]:[r];for(var i of n)i.call(this,t)}function FE(e,t,r){if(e==null)return t(void 0),r&&r(void 0),Ls;const n=Pn(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const Yc=[];function Pp(e,t){return{subscribe:Ke(e,t).subscribe}}function Ke(e,t=Ls){let r=null;const n=new Set;function i(a){if(CE(e,a)&&(e=a,r)){const u=!Yc.length;for(const c of n)c[1](),Yc.push(c,e);if(u){for(let c=0;c<Yc.length;c+=2)Yc[c][0](Yc[c+1]);Yc.length=0}}}function s(a){i(a(e))}function o(a,u=Ls){const c=[a,u];return n.add(c),n.size===1&&(r=t(i,s)||Ls),a(e),()=>{n.delete(c),n.size===0&&r&&(r(),r=null)}}return{set:i,update:s,subscribe:o}}function Uf(e,t,r){const n=!Array.isArray(e),i=n?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=t.length<2;return Pp(r,(o,a)=>{let u=!1;const c=[];let f=0,h=Ls;const v=()=>{if(f)return;h();const m=t(n?c[0]:c,o,a);s?o(m):h=typeof m=="function"?m:Ls},y=i.map((m,_)=>FE(m,w=>{c[_]=w,f&=~(1<<_),u&&v()},()=>{f|=1<<_}));return u=!0,v(),function(){Yf(y),h(),u=!1}})}function lt(e){let t;return FE(e,r=>t=r)(),t}let Gd=!1,US=Symbol();function Ye(e,t,r){const n=r[t]??(r[t]={store:null,source:qe(void 0),unsubscribe:Ls});if(n.store!==e&&!(US in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=Ls;else{var i=!0;n.unsubscribe=FE(e,s=>{i?n.source.v=s:we(n.source,s)}),i=!1}return e&&US in r?lt(e):R(n.source)}function qa(e,t,r){let n=r[t];return n&&n.store!==e&&(n.unsubscribe(),n.unsubscribe=Ls),e}function Ot(e,t){return e.set(t),t}function ni(){const e={};function t(){Jp(()=>{for(var r in e)e[r].unsubscribe();h4(e,US,{enumerable:!1,value:!0})})}return[e,t]}function jf(e,t,r){return e.set(r),t}function ZJ(e,t,r=1){return e.set(t+r),t}function JJ(e,t,r=1){const n=t+r;return e.set(n),n}function QJ(e){var t=Gd;try{return Gd=!1,[e(),Gd]}finally{Gd=t}}const eQ={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function da(e,t,r){return new Proxy({props:e,exclude:t},eQ)}const tQ={get(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(Ef(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n)return n[t]}},set(e,t,r){let n=e.props.length;for(;n--;){let i=e.props[n];Ef(i)&&(i=i());const s=Ba(i,t);if(s&&s.set)return s.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(Ef(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n){const i=Ba(n,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===aa||t===m4)return!1;for(let r of e.props)if(Ef(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props){Ef(r)&&(r=r());for(const n in r)t.includes(n)||t.push(n)}return t}};function ig(...e){return new Proxy({props:e},tQ)}function yC(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function ve(e,t,r,n){var p;var i=(r&ZZ)!==0,s=!Cl||(r&JZ)!==0,o=(r&eJ)!==0,a=(r&tJ)!==0,u=!1,c;o?[c,u]=QJ(()=>e[t]):c=e[t];var f=aa in e||m4 in e,h=o&&(((p=Ba(e,t))==null?void 0:p.set)??(f&&t in e&&(C=>e[t]=C)))||void 0,v=n,y=!0,m=!1,_=()=>(m=!0,y&&(y=!1,a?v=Pn(n):v=n),v);c===void 0&&n!==void 0&&(h&&s&&$Z(),c=_(),h&&h(c));var w;if(s)w=()=>{var C=e[t];return C===void 0?_():(y=!0,m=!1,C)};else{var S=(i?ml:hn)(()=>e[t]);S.f|=g4,w=()=>{var C=R(S);return C!==void 0&&(v=void 0),C===void 0?v:C}}if((r&QZ)===0)return w;if(h){var E=e.$$legacy;return function(C,O){return arguments.length>0?((!s||!O||E||u)&&h(O?w():C),C):w()}}var A=!1,T=!1,I=qe(c),q=ml(()=>{var C=w(),O=R(I);return A?(A=!1,T=!0,O):(T=!1,I.v=C)});return o&&R(q),i||(q.equals=RE),function(C,O){if(hu!==null&&(A=T,w(),R(I)),arguments.length>0){const N=O?R(q):s&&o?xo(C):C;if(!q.equals(N)){if(A=!0,we(I,N),m&&v!==void 0&&(v=N),yC(q))return C;Pn(()=>R(q))}return C}return yC(q)?q.v:R(q)}}function Ti(e){Pr===null&&Rl(),Cl&&Pr.l!==null?BE(Pr).m.push(e):Qf(()=>{const t=Pn(e);if(typeof t=="function")return t})}function wh(e){Pr===null&&Rl(),Ti(()=>()=>Pn(e))}function rQ(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function _l(){const e=Pr;return e===null&&Rl(),(t,r,n)=>{var s;const i=(s=e.s.$$events)==null?void 0:s[t];if(i){const o=yh(i)?i.slice():[i],a=rQ(t,r,n);for(const u of o)u.call(e.x,a);return!a.defaultPrevented}return!0}}function nQ(e){Pr===null&&Rl(),Pr.l===null&&_4(),BE(Pr).b.push(e)}function J4(e){Pr===null&&Rl(),Pr.l===null&&_4(),BE(Pr).a.push(e)}function BE(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const iQ="5";var f4;typeof window<"u"&&((f4=window.__svelte??(window.__svelte={})).v??(f4.v=new Set)).add(iQ);XZ();const sQ="modulepreload",oQ=function(e,t){return new URL(e,t).href},_C={},Pf=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=oQ(c,n),c in _C)return;_C[c]=!0;const f=c.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(!!n)for(let m=o.length-1;m>=0;m--){const _=o[m];if(_.href===c&&(!f||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":sQ,f||(y.as="script"),y.crossOrigin="",y.href=c,u&&y.setAttribute("nonce",u),document.head.appendChild(y),f)return new Promise((m,_)=>{y.addEventListener("load",m),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};function aQ(e,t){const r=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.sqrt(r*r+n*n)}function uQ(){const e=()=>Math.floor(Math.random()*256),t=e(),r=e(),n=e();return`rgb(${t},${r},${n})`}const cQ={"(":"round","[":"square","([":"stadium","[[":"subroutine","[(":"cylindrical","((":"circle","{":"rhombus","{{":"hexagon"},bC={"-":"straight","~":"bezier"},Q4={"(":")","[":"]","{":"}"},lQ=/[-=~]*>(?:\s*\|(.+?)\|)?/g,fQ=e=>{const t=e.split(`
`),r={parentNodes:[],nodeList:{}};for(const n of t){const{parentNodes:i,childNodes:s,edge:o}=hQ(n);for(const a of i){r.nodeList[a.id]||r.parentNodes.push(a);for(const u of s){if(r.nodeList[a.id]){if(r.nodeList[u.id]&&r.nodeList[u.id].children.some(({node:c})=>c.id===a.id))throw new Error("Circular reference detected");r.nodeList[a.id].children.push({node:r.nodeList[u.id]||u,...o})}else a.children.push({node:r.nodeList[u.id]||u,...o}),r.nodeList[a.id]=a;r.nodeList[u.id]?r.nodeList[u.id].parents.push({node:r.nodeList[a.id]||a}):(u.parents.push({node:r.nodeList[a.id]||a}),r.nodeList[u.id]=u),r.parentNodes=r.parentNodes.filter(c=>c.id!==u.id)}}}return r},hQ=e=>{const t=[],r=[],n=e.trim();let i="";const s=n.match(lQ);if(s)i=s[0];else throw new Error("Invalid edge");const[o,a]=n.split(i);for(const c of o.split("&"))t.push(wC(c));for(const c of a.split("&"))r.push(wC(c));const u=dQ(i);return{parentNodes:t,childNodes:r,edge:u}},wC=e=>{e=e.trim();const t=e[0],r=e.slice(1);let n="",i="";const s="Default",o={shape:""},a=[];for(let u=0;u<r.length;u++)if(pQ(r[u]))a.push(r[u]);else if(Q4[a[a.length-1]]===r[u]){i=cQ[a.join("")];break}else n+=r[u];return o.shape=i,o.content=n,{id:t,data:o,type:s,children:[],parents:[],depth:0,nesting:0}},dQ=e=>{e=e.trim();let t="";const[r,n]=e.split("|"),i=r[0];if(i in bC)t=bC[i];else throw new Error("Not a valid edge type");return n?{shape:t,content:n.trim(),length:Math.floor((r.trim().length-1)/2)}:{shape:t,length:Math.floor((r.trim().length-1)/2)}};function pQ(e){return e in Q4}function gQ(){return Math.random().toString(36).substring(7)}function vQ(e,t){const r=Math.sign(e.x).toString(),n=Math.sign(e.y).toString(),i=Math.sign(t.x).toString(),s=Math.sign(t.y).toString();return`${r}${n}${i}${s}`}function mQ(e,t){return{1001:`a ${e} ${e} 0 0 1 ${e} ${e}`,"0110":`a ${e} ${e} 0 0 0 ${e} ${e}`,"100-1":`a ${e} ${e} 0 0 0 ${e} -${e}`,"0-110":`a ${e} ${e} 0 0 1 ${e} -${e}`,"-1001":`a ${e} ${e} 0 0 0 -${e} ${e}`,"01-10":`a ${e} ${e} 0 0 1 -${e} ${e}`,"-100-1":`a ${e} ${e} 0 0 1 -${e} -${e}`,"0-1-10":`a ${e} ${e} 0 0 0 -${e} -${e}`}[t]||""}function xC(e,t){const r=t*(Math.PI/180),n=e.x*Math.cos(r)-e.y*Math.sin(r),i=e.x*Math.sin(r)+e.y*Math.cos(r);return{x:n,y:i}}const SC=(e,t,r,n)=>e+` l ${t} ${r} `+n,hs=Ke({x:0,y:0}),jS=Ke(0),io=Ke(!1),HS=Ke(!1),eV=Pp({x:0,y:0},e=>{const t=s=>{e({x:s.clientX,y:s.clientY})},r=s=>{if(s.touches.length===2){const o=aQ(s.touches[0],s.touches[1]);jS.set(o);const a={x:s.touches[0].clientX,y:s.touches[0].clientY};e(a)}else if(s.touches.length===1){const o=s.touches[0].clientX,a=s.touches[0].clientY;e({x:o,y:a}),io.set(!0)}},n=s=>{r(s),window.addEventListener("touchend",i),window.addEventListener("touchmove",r)},i=()=>{io.set(!1),jS.set(0),window.removeEventListener("touchmove",r)};return document.addEventListener("mousemove",t),window.addEventListener("touchstart",n,!0),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("touchstart",n),window.removeEventListener("touchmove",r),window.removeEventListener("touchend",i)}});var yQ=ir("<div><div></div></div>");function _Q(e,t){Cr(t,!1);const[r,n]=ni(),i=()=>Ye(I,"$groups",r),s=()=>Ye(eV,"$cursorPositionRaw",r),o=()=>Ye(R(a),"$selectedNodes",r),a=qe(),u=qe(),c=qe(),f=qe(),h=qe(),v=qe(),y=qe(),m=qe(),_=qe();let w=ve(t,"graph",8),S=ve(t,"anchor",8),E=ve(t,"adding",8,!1),A=ve(t,"creating",8,!1),T=ve(t,"color",8,null);const{groups:I}=w();let q,p=qe();Ti(C);function C(){q=Array.from(document.querySelectorAll(".svelvet-node")).map(K=>{const{top:U,left:j,width:J,height:de}=K.getBoundingClientRect();return{id:K.id,top:U,left:j,width:J,height:de}})}function O(){if(!q)return;const ae=q.reduce((K,U)=>{if(R(h)+S().left<=U.left&&R(f)+S().top<=U.top&&R(h)+S().left+Math.abs(R(c))>=U.left+U.width&&R(f)+S().top+Math.abs(R(u))>=U.top+U.height){const j=U.id,J=w().nodes.get(j);if(!J)return K;K.push(J)}return K},[]);E()?ae.forEach(K=>{o().add(K)}):Ot(R(a),new Set(ae)),Ot(R(a),o())}Fe(()=>i(),()=>{qa(we(a,i().selected.nodes),"$selectedNodes",r)}),Fe(()=>(s(),Vt(S())),()=>{we(u,s().y-S().y-S().top)}),Fe(()=>(s(),Vt(S())),()=>{we(c,s().x-S().x-S().left)}),Fe(()=>(Vt(S()),R(u)),()=>{we(f,Math.min(S().y,S().y+R(u)))}),Fe(()=>(Vt(S()),R(c)),()=>{we(h,Math.min(S().x,S().x+R(c)))}),Fe(()=>R(f),()=>{we(v,`${R(f)}px`)}),Fe(()=>R(h),()=>{we(y,`${R(h)}px`)}),Fe(()=>R(u),()=>{we(m,`${Math.abs(R(u))}px`)}),Fe(()=>R(c),()=>{we(_,`${Math.abs(R(c))}px`)}),Fe(()=>(R(c),R(u)),()=>{(R(c)||R(u))&&O()}),Ji(),qn();var N=yQ();let V,W;var G=jt(N);let ee;wu(G,ae=>we(p,ae),()=>R(p)),Wt((ae,K)=>{V=Cn(N,1,"selection-border svelte-10ds4jd",null,V,ae),W=kr(N,"",W,{"--prop-selection-box-color":T(),height:R(m),width:R(_),top:R(v),left:R(y)}),ee=Cn(G,1,"selection-box svelte-10ds4jd",null,ee,K)},[()=>({creating:A()}),()=>({creating:A()})],hn),nt(e,N),Rr(),n()}const bQ=3,wQ=.1,xQ=10,SQ=100,EQ=50,AQ="#000",TQ="#fff",PQ="12px",CQ=22,RQ=1.4,IQ=40,Lf={north:{x:0,y:-1},south:{x:0,y:1},east:{x:1,y:0},west:{x:-1,y:0},self:{x:0,y:0}};var OQ=Nn('<circle class="background-dot svelte-rryw83"></circle>'),MQ=Nn('<line class="background-line svelte-rryw83"></line><line class="background-line svelte-rryw83"></line>',1),kQ=Nn('<circle class="background-dot svelte-rryw83"></circle>'),LQ=Nn('<line class="background-line svelte-rryw83"></line><line class="background-line svelte-rryw83"></line>',1),NQ=Nn('<pattern id="graph-coarse-pattern" patternUnits="userSpaceOnUse"><!></pattern>'),qQ=Nn('<rect width="100%" height="100%" fill="url(#graph-coarse-pattern)"></rect>'),DQ=ir('<div id="background-wrapper" class="svelte-rryw83"><svg class="svelte-rryw83"><defs><pattern id="graph-pattern" patternUnits="userSpaceOnUse"><!></pattern><!></defs><rect width="100%" height="100%" fill="url(#graph-pattern)"></rect><!></svg></div>');function FQ(e,t){Cr(t,!1);const[r,n]=ni(),i=()=>Ye(q,"$translationStore",r),s=()=>Ye(I,"$scaleStore",r),o=qe(),a=qe(),u=qe(),c=qe(),f=qe(),h=Mr("graph");let v=ve(t,"style",8,"dots"),y=ve(t,"gridWidth",8,CQ),m=ve(t,"dotSize",8,RQ),_=ve(t,"bgColor",8,null),w=ve(t,"dotColor",8,null),S=ve(t,"opacityThreshold",8,3),E=ve(t,"majorGrid",8,0),A=ve(t,"minOpacity",8,.4);const T=h.transforms,I=T.scale,q=T.translation;let p=qe(),C=qe(),O=qe(),N=qe(),V=qe(),W=qe(1),G=qe(1);Fe(()=>i(),()=>{we(o,i())}),Fe(()=>s(),()=>{we(a,s())}),Fe(()=>(R(a),Vt(y())),()=>{we(u,R(a)*y())}),Fe(()=>(R(a),Vt(m())),()=>{we(c,R(a)*m()/2)}),Fe(()=>R(u),()=>{we(f,R(u)/2)}),Fe(()=>(R(C),R(p),R(O),R(c),R(a),R(o),Vt(S()),Vt(A())),()=>{var te,le;we(C,((te=R(p))==null?void 0:te.offsetWidth)||0),we(O,((le=R(p))==null?void 0:le.offsetHeight)||0),we(N,(R(C)+R(c))*(1-R(a))/2+R(o).x),we(V,(R(O)+R(c))*(1-R(a))/2+R(o).y),we(W,R(a)>S()?1:R(a)/S()+A()),we(G,R(a)>S()/3?1:R(a)/(S()/3)+A())}),Ji(),qn();var ee=DQ();let ae;var K=jt(ee),U=jt(K),j=jt(U),J=jt(j);{var de=te=>{var le=OQ();let We;Wt(()=>{pt(le,"r",R(c)),pt(le,"cx",R(f)),pt(le,"cy",R(f)),We=kr(le,"",We,{"--calculated-dot-color":w()})}),nt(te,le)},ce=(te,le)=>{{var We=Ne=>{var Re=MQ(),rt=Gt(Re);pt(rt,"y1",0);let Ve;var L=xt(rt);pt(L,"x1",0);let B;Wt(()=>{pt(rt,"x1",R(f)),pt(rt,"x2",R(f)),pt(rt,"y2",R(u)),pt(rt,"stroke-width",R(c)),Ve=kr(rt,"",Ve,{"--calculated-dot-color":w()}),pt(L,"y1",R(f)),pt(L,"y2",R(f)),pt(L,"x2",R(u)),pt(L,"stroke-width",R(c)),B=kr(L,"",B,{"--calculated-dot-color":w()})}),nt(Ne,Re)};lr(te,Ne=>{v()==="lines"&&Ne(We)},le)}};lr(J,te=>{v()==="dots"?te(de):te(ce,!1)})}var Te=xt(j);{var Se=te=>{var le=NQ(),We=jt(le);{var Ne=rt=>{var Ve=kQ();let L;Wt(()=>{pt(Ve,"r",R(c)*2),pt(Ve,"cx",R(f)),pt(Ve,"cy",R(f)),L=kr(Ve,"",L,{"--calculated-dot-color":w()})}),nt(rt,Ve)},Re=(rt,Ve)=>{{var L=B=>{var H=LQ(),X=Gt(H);pt(X,"y1",0);let xe;var ue=xt(X);pt(ue,"x1",0);let Ae;Wt(()=>{pt(X,"x1",R(f)),pt(X,"x2",R(f)),pt(X,"y2",R(u)*E()),pt(X,"stroke-width",R(c)*1.2),xe=kr(X,"",xe,{"--calculated-dot-color":w()}),pt(ue,"y1",R(f)),pt(ue,"y2",R(f)),pt(ue,"x2",R(u)*E()),pt(ue,"stroke-width",R(c)*1.2),Ae=kr(ue,"",Ae,{"--calculated-dot-color":w()})}),nt(B,H)};lr(rt,B=>{v()==="lines"&&B(L)},Ve)}};lr(We,rt=>{v()==="dots"?rt(Ne):rt(Re,!1)})}Wt(()=>{pt(le,"x",R(N)),pt(le,"y",R(V)),pt(le,"width",R(u)*E()),pt(le,"height",R(u)*E())}),nt(te,le)};lr(Te,te=>{E()>0&&te(Se)})}var re=xt(U),oe=xt(re);{var ne=te=>{var le=qQ();Wt(()=>pt(le,"opacity",R(G))),nt(te,le)};lr(oe,te=>{E()>0&&te(ne)})}wu(ee,te=>we(p,te),()=>R(p)),Wt(()=>{ae=kr(ee,"",ae,{"--calculated-background-color":_()}),pt(j,"x",R(N)),pt(j,"y",R(V)),pt(j,"width",R(u)),pt(j,"height",R(u)),pt(re,"opacity",R(W))}),nt(e,ee),Rr(),n()}var BQ=ir('<div role="button" tabindex="0" class="bounding-box-border svelte-1e5jg43"><div class="bounding-box svelte-1e5jg43"></div></div>');function zQ(e,t){Cr(t,!1);const[r,n]=ni(),i=()=>Ye(f(),"$position",r),s=()=>Ye(y,"$width",r),o=()=>Ye(m,"$height",r),a=()=>Ye(h(),"$color",r),u=qe();let c=ve(t,"dimensions",8),f=ve(t,"position",8),h=ve(t,"color",8),v=ve(t,"groupName",8);const{width:y,height:m}=c(),_=_l();function w(){_("groupClick",{groupName:v()})}Fe(()=>Vt(v()),()=>{we(u,`${v()}-bounding-box`)}),Ji(),qn();var S=BQ();let E;var A=jt(S);let T;Wt(()=>{pt(S,"id",R(u)),E=kr(S,`border: solid 4px ${a()??""};`,E,{top:`${i().y}px`,left:`${i().x}px`,width:`${s()}px`,height:`${o()}px`}),T=kr(A,"",T,{"background-color":a()})}),pr("contextmenu",S,ks(ro(function(I){Tn.call(this,t,I)}))),pr("mousedown",S,ks(ro(w))),nt(e,S),Rr(),n()}function VQ(e,t){Cr(t,!1);const[r,n]=ni(),i=()=>Ye(o,"$groupBoxes",r),o=Mr("graph").groupBoxes;qn();var a=gr(),u=Gt(a);ds(u,1,()=>Array.from(i()),([c,f])=>c,(c,f)=>{let h=()=>R(f)[0];zQ(c,ig(()=>R(f)[1],{get groupName(){return h()},$$events:{groupClick(y){Tn.call(this,t,y)}}}))}),nt(e,a),Rr(),n()}function Em(e){const t=e.style.width,r=e.style.height;e.style.width="fit-content",e.style.height="fit-content";const n=e.offsetWidth,i=e.offsetHeight;return e.style.width=t,e.style.height=r,[n,i]}function tV(e,t,r,n,i){const s={x:0,y:0},o=n.x-i.left-i.width/2,a=n.y-i.top-i.height/2,u=(o-r.x)/e,c=(a-r.y)/e;return s.x=o-u*t,s.y=a-c*t,s}function rV(e,t,r){const n=t*r,i=e-n;return Number(Math.max(wQ,Math.min(bQ,i)).toFixed(9))}const xh=(e,t,r,n,i,s,o)=>{const{clientX:a,clientY:u}=e,c=s,f=a-r,h=u-t,v=o.x,y=o.y,m=n*(1-s)/2,_=i*(1-s)/2,w=f-v-m,S=h-y-_,E=w/c,A=S/c;return{x:E,y:A}};function GQ(e,t,r){const{top:n,left:i,width:s,height:o}=lt(e),a=lt(t.scale),u=lt(t.translation);return{scaled:xh({clientX:r.x,clientY:r.y},n,i,s,o,a,u),scale:a}}function $Q(e,t,r){const{scale:n,translation:i}=r,s=lt(n),o=lt(i),a=t.x-e.x,u=t.y-e.y,c=o.x+a*s,f=o.y+u*s;return{x:c,y:f}}function UQ(e,t){return e.x*t.x+e.y*t.y}function jQ(e,t,r){const n=[],i=t.x-e.x,s=t.y-e.y,o=WQ(e.direction,t.direction),a=UQ(e.direction,t.direction)===0,u=HQ(e,t),c=Sn(e.direction,-1,-1),f=Sn(t.direction,-1,-1),h={x:Math.abs(e.direction.y),y:Math.abs(e.direction.x)},v=Sn(e.direction,i-r*e.direction.x*(a?1:o?0:2),s-r*e.direction.y*(a?1:o?0:2)),y=Sn(t.direction,i+r*t.direction.x*(a?1:o?0:2),s+r*t.direction.y*(a?1:o?0:2)),m=Math.sign(v.x)===-1||Math.sign(v.y)===-1,_=Math.sign(y.x)===1||Math.sign(y.y)===1,w=Math.abs(i),S=Math.abs(s),E=Sn(e.direction,r,r),A=Sn(f,r,r),T=Sn(t.direction,r,r),I=Sn(e.direction,w,S),q=Sn(f,w,S),p=Sn(e.direction,w/2,S/2),C=Sn(f,w/2,S/2),O=Sn(h,i,s),N=!u&&!_&&!m,V=e.x+E.x,W=e.y+E.y,G=t.x+T.x,ee=t.y+T.y;if(m&&n.push(E),u&&!_&&!m)n.push(I),n.push(q);else if(o)m||n.push(Sn(e.direction,r+w,r+S)),n.push(O),_||n.push(Sn(f,r+w,r+S));else if(N)n.push(p),n.push(O),n.push(C);else if(m&&_)if(a){const ae=Math.abs(V-G),K=Math.abs(W-ee);n.push(Sn(t.direction,w<r*2?t.direction.x*(i+t.direction.x*r):w+r,S<r*2?t.direction.y*(s+t.direction.y*r):S+r)),n.push(Sn(c,ae,K))}else{const ae=Math.abs(V-G),K=Math.abs(W-ee);n.push(Sn(h,i/2,s/2)),n.push(Sn(t.direction,ae,K)),n.push(Sn(h,i/2,s/2))}else if(m){const ae=Math.abs(V-t.x),K=Math.abs(W-t.y);n.push(Sn(f,w<r*2?w-r:w/2,S<r*2?S-r:S/2)),n.push(Sn(c,ae,K)),n.push(Sn(f,Math.max(r,w/2),Math.max(r,S/2)))}else if(_){const ae=Math.abs(G-e.x),K=Math.abs(ee-e.y);n.push(Sn(e.direction,Math.max(r,w/2),Math.max(r,S/2))),n.push(Sn(t.direction,ae,K)),n.push(Sn(e.direction,w<r*2?w-r:w/2,S<r*2?S-r:S/2))}return _&&n.push(A),n}function HQ(e,t){const{x:r,y:n}=e.direction,{x:i,y:s}=t.direction,o=t.x-e.x,a=t.y-e.y;return r*s===i*n?!1:Math.sign(a)===Math.sign(n+s)!=(Math.sign(o)===Math.sign(r+i))}function Sn(e,t,r){return{x:e.x*t,y:e.y*r}}function WQ(e,t){return e.x===t.x&&e.y===t.y}function XQ(e,t){const{width:r,height:n}=e,{top:i,left:s,right:o,bottom:a}=t,u=o-s,c=a-i;if(!u||!c)return{x:null,y:null,scale:null};const f=s+u/2,h=i+c/2,v=Math.min(r/u,n/c)*.8,y=r/2,m=n/2,_=y-f,w=m-h;return{x:_*v,y:w*v,scale:v}}const $d=(e,t,r)=>Math.min(Math.abs(e||t)/2,r);function Am(e,t){const n=e.getTotalLength()*t;return e.getPointAtLength(n)}function Cp(){const e=new Map,{subscribe:t,set:r,update:n}=Ke(e);return{subscribe:t,set:r,update:n,add:(s,o)=>(n(a=>(a.set(o,s),a)),e),get:s=>e.get(s)||null,getAll:()=>Array.from(e.values()),delete:s=>{let o=!1;return n(a=>(a.delete(s),o=!0,a)),o},count:()=>e.size}}function YQ(e){const{id:t,inputs:r,outputs:n,resizable:i,dimensions:s,editable:o,direction:a,zIndex:u,position:c,selectionColor:f,borderWidth:h,edge:v}=e,{bgColor:y,borderColor:m,rotation:_,borderRadius:w,connections:S,textColor:E,locked:A,group:T}=e,I=Cp(),q=(O="self")=>{lt(I).forEach(N=>{(O==="self"||lt(N.direction)===O)&&N.recalculatePosition()})};return{id:typeof t=="string"&&t.slice(0,2)==="N-"?t:`N-${t}`,position:Ke({x:(c==null?void 0:c.x)||0,y:(c==null?void 0:c.y)||0}),dimensions:{width:Ke((s==null?void 0:s.width)||0),height:Ke((s==null?void 0:s.height)||(s==null?void 0:s.width))},group:Ke(T||null),locked:Ke(A||!1),inputs:Ke(r),outputs:Ke(n),recalculateAnchors:q,rotation:Ke(_||0),moving:Ke(!1),resizingWidth:Ke(!1),resizingHeight:Ke(!1),rotating:Ke(!1),editable:Ke(o||!1),resizable:Ke(i),anchors:I,zIndex:Ke(u||2),collapsed:Ke(!1),edge:v||null,borderRadius:Ke(w),bgColor:Ke(y||null),direction:Ke(a),label:Ke(e.label||""),borderColor:Ke(m||null),borderWidth:Ke(h),selectionColor:Ke(f||null),textColor:Ke(E||null),connections:Ke(S)}}function KQ(e,t){const r=[e,t].sort();return`${r[0]}+${r[1]}`}function EC(e,t,r){var a,u,c,f,h;const{source:n,target:i}=e,o={id:n.id&&i.id?KQ(n.id,i.id):"cursor",target:e.target,source:e.source,component:t,type:Ke((r==null?void 0:r.type)||null),color:(r==null?void 0:r.color)||Ke(null),width:Ke((r==null?void 0:r.width)||0),animated:Ke((r==null?void 0:r.animated)||!1),rendered:Ke(!1),start:(r==null?void 0:r.start)||null,end:(r==null?void 0:r.end)||null};if(r!=null&&r.disconnect&&(o.disconnect=!0),r!=null&&r.label){const v={text:Ke(r==null?void 0:r.label.text),color:Ke(((a=r==null?void 0:r.label)==null?void 0:a.color)||AQ),textColor:Ke(((u=r==null?void 0:r.label)==null?void 0:u.textColor)||TQ),fontSize:Ke(((c=r==null?void 0:r.label)==null?void 0:c.fontSize)||PQ),dimensions:{width:Ke(((f=r==null?void 0:r.label.dimensions)==null?void 0:f.width)||SQ),height:Ke(((h=r==null?void 0:r.label.dimensions)==null?void 0:h.height)||EQ)},borderRadius:Ke((r==null?void 0:r.label.borderRadius)||xQ)};o.label=v}return o}function ZQ(){const e=new Map,t=new Set,{subscribe:r,set:n,update:i}=Ke(e),s={subscribe:r,set:n,update:i,add:(o,a)=>{if(typeof a!="string"){const u=Array.from(a),c=u[0],f=u[1];if(c.connected.update(h=>h.add(f)),f.connected.update(h=>h.add(c)),s.match(...Array.from(a)).length)return;t.forEach(h=>h(o,"connection"))}i(u=>(u.set(a,o),u))},getAll:()=>Array.from(e.values()),get:o=>e.get(o)||null,match:(...o)=>Array.from(e.keys()).filter(a=>a==="cursor"?!1:o.every(u=>u?a.has(u):!0)),fetch:(o,a)=>{const u=Array.from(e.keys()).filter(c=>c==="cursor"?!1:[o,a].every(f=>f?c.has(f):!0))[0];return e.get(u)||null},delete:o=>{if(typeof o!="string"){const u=Array.from(o),c=u[0],f=u[1];c.connected.update(h=>(h.delete(f),h)),f.connected.update(h=>(h.delete(c),h))}let a=!1;return i(u=>{const c=u.get(o);return c&&(u.delete(o),a=!0,typeof o!="string"&&t.forEach(f=>f(c,"disconnection"))),u}),a},onEdgeChange:o=>(t.add(o),()=>t.delete(o)),count:()=>e.size};return s}function JQ(e,t,r,n){return Uf([e,t,r,n],([s,o,a,u])=>{const c={clientX:s.x,clientY:s.y};return xh(c,o.top,o.left,o.width,o.height,u,a)})}function QQ(e,t,r,n){const i=Ke({top:1/0,left:1/0,right:-1/0,bottom:-1/0}),s=Ke({top:1/0,left:1/0,right:-1/0,bottom:-1/0});let o,a=lt(t),u=lt(r),c=lt(n),f=a.width/u,h=a.height/u;function v(){const{x:m,y:_}=xh({clientX:a.left,clientY:a.top},a.top,a.left,a.width,a.height,u,c),w=lt(s);i.set({top:Math.min(w.top,_),left:Math.min(w.left,m),right:Math.max(w.right,m+f),bottom:Math.max(w.bottom,h+_)})}function y(m=!1){let _=1/0,w=1/0,S=-1/0,E=-1/0;for(const A of e.getAll()){console.log("dentro del for, este es e node:",A);const{x:T,y:I}=lt(A.position),q=lt(A.dimensions.width),p=lt(A.dimensions.height);w=Math.min(w,T),_=Math.min(_,I),S=Math.max(S,T+q),E=Math.max(E,I+p)}s.set({top:_,left:w,right:S,bottom:E}),v(),m&&(o=requestAnimationFrame(()=>y(m)))}return e.subscribe(()=>{console.log("dentro del nodes.subscribe...........Aqui no estan llegando los nodes"),y()}),HS.subscribe(m=>{m&&y(m),m||cancelAnimationFrame(o)}),io.subscribe(m=>{m&&y(m),m||cancelAnimationFrame(o)}),t.subscribe(()=>{a=lt(t),f=a.width/u,h=a.height/u,v()}),r.subscribe(()=>{u=lt(r),f=a.width/u,h=a.height/u,v()}),n.subscribe(()=>{c=lt(n),v()}),{graphBounds:i,nodeBounds:s}}function eee(e,t,r){const{width:n,height:i,top:s,left:o}=e,a={clientX:n/2,clientY:i/2};return xh(a,s,o,n,i,r,t)}function nV(e,t){const{zoom:r,editable:n,translation:i,direction:s,locked:o,edge:a,nodes:u}=t,c=Ke({x:(i==null?void 0:i.x)||0,y:(i==null?void 0:i.y)||0}),f=Ke({top:0,left:0,width:0,height:0,bottom:0,right:0}),h=Ke(r),v=Ke(!1),y=Cp(),m=QQ(y,f,h,c),_=Uf([f,c,h],([S,E,A])=>eee(S,E,A));return{id:e,nodes:y,edges:ZQ(),transforms:{translation:c,scale:h},maxZIndex:Ke(2),dimensions:f,bounds:m,center:_,mounted:v,direction:s||"LR",editable:n||!1,edge:a||null,editing:Ke(null),cursor:JQ(eV,f,c,h),locked:Ke(o||!1),groups:Ke({selected:{parent:Ke(null),nodes:Ke(new Set)},hidden:{parent:Ke(null),nodes:Ke(new Set)}}),groupBoxes:Cp(),activeGroup:Ke(null),initialNodePositions:Ke([])}}function tee(e,t,r,n,i,s,o,a,u,c,f,h){const{width:v,height:y}=i,{x:m,y:_}=n,w=lt(t.position),S=Ke({x:m-w.x+v/2,y:_-w.y+y/2}),E=Uf([t.position,S],([O,N])=>({x:O.x+N.x,y:O.y+N.y})),A=e.transforms,T=e.dimensions,I=Ke(u||"self"),q=()=>{const O=document.getElementById(r),N=lt(I),V=Lf[N];if(!O)return;const{x:W,y:G,width:ee,height:ae}=O.getBoundingClientRect(),K=lt(S),U=lt(E),{scaled:j,scale:J}=GQ(T,A,{x:W,y:G}),de=j.x-U.x,ce=j.y-U.y;S.set({x:K.x+de+ee/J/2+V.x*ee/J/2,y:K.y+ce+ae/J/2+V.y*ae/J/2})},p=Uf([t.moving,t.resizingWidth,t.resizingHeight,t.rotating],([O,N,V,W])=>O||N||V||W),C=Uf([t.rotation],([O])=>O);return{id:r,position:E,offset:S,direction:I,dynamic:Ke(c||!1),type:a,edge:o,moving:p,mounted:Ke(!1),recalculatePosition:q,connected:Ke(new Set),store:s||null,inputKey:f||null,edgeColor:h||Ke(null),rotation:C,node:t}}const Hf=Cp(),Ud={width:200,height:100};function hp(e,t){return{x:Math.round(e/Ud.width)*Ud.width,y:Math.round(t/Ud.height)*Ud.height}}const jd=10;function iV(e){const t=lt(e);return Array.from(t).map(n=>lt(n.position))}function AC(e,t){console.log("moveNodes called");let r;const n=lt(e.groups),i=lt(e.activeGroup);if(console.log("Graph Groups:",n),console.log("Active Group:",i),!i)return;const s=n[i].nodes;if(!s)return;const o=lt(e.initialNodePositions),{x:a,y:u}=lt(hs),c=Array.from(lt(s)),f=lt(e.groupBoxes);console.log("Group Boxes:",f),c.forEach(v=>v.moving.set(!0)),h();function h(){const v=lt(e.cursor);let y=v.x-a,m=v.y-u;if(t){const w=hp(y,m);y=w.x,m=w.y}const _={x:y,y:m};c.forEach((w,S)=>{const{group:E,position:A}=w,T=o[S];let I;if(i==="selected"){const q=lt(E);q&&(I=f.get(q))}if(!I)ree(T,_,A);else{const q=lt(w.dimensions.width),p=lt(w.dimensions.height),C=oV(I,q,p);sV(T,_,A,C)}}),lt(io)?r=requestAnimationFrame(h):cancelAnimationFrame(r)}}function ree(e,t,r){r.set({x:e.x+t.x,y:e.y+t.y})}function sV(e,t,r,n){r.set({x:Math.min(Math.max(n.left,e.x+t.x),n.right),y:Math.min(Math.max(n.top,e.y+t.y),n.bottom)})}function oV(e,t,r){const{x:n,y:i}=lt(e.position);return console.log("Group Box Position:",{x:n,y:i}),{left:n+jd,right:n+lt(e.dimensions.width)-t-jd,top:i+jd,bottom:i+lt(e.dimensions.height)-r-jd}}function TC(e=1,t,r,n=.1){const i=lt(t),{width:s,height:o,top:a,left:u}=i,c=r.scale,f=lt(r.translation),h=lt(c),v=rV(h,e,n),y=tV(h,v,f,{x:s/2+u,y:o/2+a},i);c.set(v),r.translation.set(y)}var nee=ir('<div class="svelvet-graph-wrapper svelte-19pa6i0" role="presentation"><!></div>');function iee(e,t){Cr(t,!1);const[r,n]=ni(),i=()=>Ye(v,"$translation",r),s=()=>Ye(h,"$scale",r),o=()=>Ye(y,"$cursor",r),a=qe(),u=qe(),c=Mr("graph"),f=c.transforms,h=f.scale,v=f.translation,y=c.cursor;let m=ve(t,"isMovable",8),_=qe(),w=qe(!1);function S(){Ot(v,$Q(lt(hs),o(),f)),we(_,requestAnimationFrame(S))}Fe(()=>i(),()=>{we(a,i())}),Fe(()=>(R(a),s()),()=>{we(u,`translate(${R(a).x}px, ${R(a).y}px) scale(${s()})`)}),Fe(()=>(Vt(m()),R(w),R(_)),()=>{m()&&!R(w)?(we(w,!0),we(_,requestAnimationFrame(S))):(!m()||!R(w))&&(we(w,!1),cancelAnimationFrame(R(_)))}),Ji(),qn();var E=nee();let A;var T=jt(E);Xr(T,t,"default",{},null),Wt(()=>A=kr(E,"",A,{transform:R(u)})),pr("contextmenu",E,$f(ks(function(I){Tn.call(this,t,I)}))),pr("click",E,$f(ks(function(I){Tn.call(this,t,I)}))),pr("touchstart",E,$f(ks(function(I){Tn.call(this,t,I)}))),nt(e,E),Rr(),n()}var see=ir("<!> <!>",1);function oee(e,t){Cr(t,!1);const[r,n]=ni(),i=()=>Ye(h,"$activeGroup",r),s=()=>Ye(io,"$tracking",r),o=()=>Ye(m,"$cursor",r),a=()=>Ye(v,"$groups",r);console.log("Componente GraphRenderer.svelte");const u=Mr("graph"),c=Mr("snapTo");let f=ve(t,"isMovable",8);const h=u.activeGroup,v=u.groups,y=u.initialNodePositions,m=u.cursor;function _(w){Ot(io,!0);const{groupName:S}=w.detail;Ot(h,S),Ot(hs,o()),Ot(y,iV(a()[S].nodes))}Fe(()=>(i(),s(),AC),()=>{i()&&s()&&AC(u,c)}),Ji(),qn(),iee(e,{get isMovable(){return f()},children:(w,S)=>{var E=see(),A=Gt(E);Xr(A,t,"default",{},null);var T=xt(A,2);VQ(T,{$$events:{groupClick:_}}),nt(w,E)},$$slots:{default:!0}}),Rr(),n()}const aee=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],uee=new Set(aee),PC=e=>uee.has(e);var cee=ir('<input type="text">');function lee(e,t){Cr(t,!1);const[r,n]=ni(),i=()=>Ye(o,"$textStore",r);let s=ve(t,"placeholder",8);const o=Mr("textStore");qn();var a=cee();Wt(()=>pt(a,"placeholder",s())),pr("keydown",a,ro(function(u){Tn.call(this,t,u)})),pr("click",a,ro(function(u){Tn.call(this,t,u)})),pr("mousedown",a,ro(function(u){Tn.call(this,t,u)})),YJ(a,i,u=>Ot(o,u)),nt(e,a),Rr(),n()}const fee=new Set(["INPUT","SELECT","BUTTON","TEXTAREA"]);var hee=ir("<div><!></div>"),dee=ir('<div role="button"><!> <div class="anchors left svelte-1iknrz0"><!></div> <div class="anchors right svelte-1iknrz0"><!></div> <div class="anchors top svelte-1iknrz0"><!></div> <div class="anchors bottom svelte-1iknrz0"><!></div></div>');function pee(e,t){Cr(t,!1);const[r,n]=ni(),i=()=>Ye(ne(),"$groups",r),s=()=>Ye(xe,"$position",r),o=()=>Ye(Lr,"$selectedNodes",r),a=()=>Ye(cr,"$hiddenNodes",r),u=()=>Ye(Br,"$resized",r),c=()=>Ye(U,"$duplicate",r),f=()=>Ye(le(),"$centerPoint",r),h=()=>Ye(ue,"$widthStore",r),v=()=>Ye(Ae,"$heightStore",r),y=()=>Ye(hs,"$initialClickPosition",r),m=()=>Ye(j,"$graphDOMElement",r),_=()=>Ye(Ie,"$zIndex",r),w=()=>Ye(te(),"$maxZIndex",r),S=()=>Ye(oe(),"$locked",r),E=()=>Ye(Le,"$nodeLock",r),A=()=>Ye(Be,"$editable",r),T=()=>Ye(mt,"$group",r),I=()=>Ye(Ht,"$rotation",r),q=()=>Ye(be,"$bgColor",r),p=()=>Ye(ct,"$textColor",r),C=()=>Ye(ft,"$borderColor",r),O=()=>Ye(Ce,"$selectionColor",r),N=()=>Ye(je,"$borderRadius",r),V=()=>Ye(it,"$borderWidth",r),W=qe(),G=qe(),ee=qe(),ae=qe(),K=Mr("mounted"),U=Mr("duplicate"),j=Mr("graphDOMElement"),J=_l();let de=ve(t,"node",8),ce=ve(t,"isDefault",8),Te=ve(t,"useDefaults",8),Se=ve(t,"center",8),re=ve(t,"nodeStore",8),oe=ve(t,"locked",8),ne=ve(t,"groups",8),te=ve(t,"maxZIndex",8),le=ve(t,"centerPoint",8),We=ve(t,"cursor",8),Ne=ve(t,"initialNodePositions",8),Re=ve(t,"activeGroup",8),rt=ve(t,"editing",8),Ve=ve(t,"dimensionsProvided",8,!1),L=ve(t,"title",8);const B=Ke(0),H=Ke(null),X=de().id,xe=de().position,ue=de().dimensions.width,Ae=de().dimensions.height,Ce=de().selectionColor,Be=de().editable,Le=de().locked,Ie=de().zIndex,be=de().bgColor,je=de().borderRadius,ct=de().textColor,mt=de().group,ft=de().borderColor,it=de().borderWidth,Ht=de().rotation,{selected:yr,hidden:Qt}=i(),cr=Qt.nodes,Lr=yr.nodes,Br=Ke(!1);Qr("node",de()),Qr("anchorsMounted",B),Qr("resized",Br),Qr("nodeConnectEvent",H),Ti(()=>{if(Se()){const Ft={x:f().x-h()/2,y:f().y-v()/2};de().position.set(Ft),io.set(!0),io.set(!1)}K.update(Ft=>Ft+1)}),wh(()=>{R(G)&&(o().delete(de()),Ot(Lr,o())),K.update(Ft=>Ft-1)});function bn(){R(G)?(de()&&o().delete(de()),Ot(Lr,o())):(de()&&o().add(de()),Ot(Lr,o()))}function tr(Ft){Ot(hs,lt(We())),m().focus(),_()!==w()&&_()!==1/0&&Ot(Ie,JJ(te(),w()));const zr=Ft.target;if(!fee.has(zr.tagName)&&(Ft.preventDefault(),J("nodeClicked",{node:de(),e:Ft}),!(S()||E()))){if("touches"in Ft){if(Ft.touches&&Ft.touches.length>1)return}else Ft.button===2&&A()&&Ot(rt(),de());Ot(io,!0),Ir(Ft)}}function Ir(Ft){let zr,Fn,wn=!1;const jr=T();jr&&(zr=i()[jr],Fn=lt(zr.parent),wn=Fn===de()),wn?Ot(Re(),jr):Ot(Re(),"selected"),!Ft.shiftKey&&R(G)?Ot(Re(),"selected"):(!Ft.shiftKey&&!R(G)&&!Ft.shiftKey&&(o().clear(),Ot(Lr,o())),bn()),Ot(Ne(),iV(i().selected.nodes))}function vn(){re().delete(X)}function mn(Ft){const zr=lt(We()),Fn=zr.x-y().x,wn=zr.y-y().y;Math.abs(Fn)+Math.abs(wn)<4&&J("nodeReleased",{e:Ft,node:de()}),Ot(H,Ft)}function pn(Ft){return Ft.addEventListener("mousedown",tr),Ft.addEventListener("touchstart",tr),{destroy(){Ft.removeEventListener("mousedown",tr),Ft.removeEventListener("touchstart",tr)}}}Fe(()=>s(),()=>{we(W,s())}),Fe(()=>(o(),Vt(de())),()=>{we(G,o().has(de()))}),Fe(()=>(a(),Vt(de())),()=>{we(ee,a().has(de()))}),Fe(()=>(Vt(Ve()),u()),()=>{we(ae,Ve()||u())}),Fe(()=>(R(G),c(),Vt(de())),()=>{R(G)&&c()&&J("duplicate",de())}),Ji(),qn();var Gn=gr(),ei=Gt(Gn);{var Bt=Ft=>{var zr=dee();pt(zr,"id",X);let Fn;pt(zr,"tabindex",0);let wn;var jr=jt(zr);{var $n=Lt=>{var at=hee();kr(at,"",{},{width:"fit-content",height:"fit-content"});var He=jt(at);Xr(He,t,"default",{grabHandle:pn,get selected(){return R(G)},destroy:vn},null),gC(at,"clientHeight",yt=>Ot(Ae,yt)),gC(at,"clientWidth",yt=>Ot(ue,yt)),nt(Lt,at)},hi=Lt=>{var at=gr(),He=Gt(at);Xr(He,t,"default",{grabHandle:pn,get selected(){return R(G)},destroy:vn},null),nt(Lt,at)};lr(jr,Lt=>{R(ae)?Lt(hi,!1):Lt($n)})}var Jr=xt(jr,2),Un=jt(Jr);Xr(Un,t,"anchorWest",{},null);var On=xt(Jr,2),di=jt(On);Xr(di,t,"anchorEast",{},null);var Xe=xt(On,2),Et=jt(Xe);Xr(Et,t,"anchorNorth",{},null);var Rt=xt(Xe,2),kt=jt(Rt);Xr(kt,t,"anchorSouth",{},null),ic(()=>pr("contextmenu",zr,ks(ro(function(Lt){Tn.call(this,t,Lt)})))),ic(()=>pr("mouseup",zr,mn)),Xu(zr,Lt=>pn==null?void 0:pn(Lt)),Wt(Lt=>{Fn=Cn(zr,1,"svelvet-node svelte-1iknrz0",null,Fn,Lt),pt(zr,"title",L()),wn=kr(zr,"",wn,{top:`${R(W).y??""}px`,left:`${R(W).x??""}px`,"z-index":_(),width:R(ae)?h()+"px":"fit-content",height:R(ae)?v()+"px":"fit-content",transform:`rotate(${I()??""}deg)`,"--prop-background-color":q()||(ce()||Te()?null:"transparent"),"--prop-text-color":p(),"--prop-border-color":C(),"--prop-selection-color":O(),"--prop-border-radius":N()?`${N()}px`:ce()||Te()?null:"0px","--prop-border-width":V()||(ce()||Te()?null:"0px")}),pt(Jr,"id",`anchors-west-${de().id}`),pt(On,"id",`anchors-east-${de().id}`),pt(Xe,"id",`anchors-north-${de().id}`),pt(Rt,"id",`anchors-south-${de().id}`)},[()=>({selected:R(G),locked:S()||E()})],hn),nt(Ft,zr)};lr(ei,Ft=>{R(ee)||Ft(Bt)})}nt(e,Gn),Rr(),n()}var gee=ir("<div></div> <div></div>",1),vee=ir("<div></div> <div></div>",1),mee=ir("<div></div>"),yee=ir("<div></div>"),_ee=ir("<!> <!> <!> <!>",1);function bee(e,t){Cr(t,!1);const[r,n]=ni(),i=()=>Ye(U,"$position",r),s=()=>Ye(Se,"$widthStore",r),o=()=>Ye(Te,"$heightStore",r),a=()=>Ye(J,"$resizingHeight",r),u=()=>Ye(re,"$cursor",r),c=()=>Ye(ce,"$nodeRotation",r),f=()=>Ye(j,"$resizingWidth",r),h=()=>Ye(de,"$rotating",r),v=()=>Ye(hs,"$initialClickPosition",r),y=qe(),m=qe(),_=qe(),w=Mr("graph"),S=Mr("node"),E=Mr("resized");let A=ve(t,"width",8,!1),T=ve(t,"height",8,!1),I=ve(t,"rotation",8,!1),q=ve(t,"minHeight",12,0),p=ve(t,"minWidth",12,0),C,O=A(),N=A(),V=T(),W=T(),G=A()&&T(),ee=0,ae=0,K=qe(lt(S.position));const U=S.position,j=S.resizingWidth,J=S.resizingHeight,de=S.rotating,ce=S.rotation,Te=S.dimensions.height,Se=S.dimensions.width,re=w.cursor;let oe=qe(),ne=qe(),te=qe(1);Ti(()=>{try{C=document.querySelector(`#${S.id}`),C&&(Ce=>(p(Ce[0]),q(Ce[1])))(Em(C))}catch(Ce){console.error(Ce)}});function le(Ce,Be){const Le=be=>{be.stopPropagation(),be.preventDefault(),Be.left||Be.top?we(te,-1):we(te,1),HS.set(!0),Ot(hs,lt(re)),we(oe,s()),we(ne,o()),we(K,i()),Be.both?Ot(j,!0):Ot(j,!1),Ot(j,Be.left||Be.right||Be.both||!1),Ot(J,Be.top||Be.bottom||Be.both||!1),C&&(je=>(p(je[0]),q(je[1])))(Em(C)),window.addEventListener("mouseup",Ie)},Ie=()=>{Ot(j,!1),Ot(J,!1),HS.set(!1),window.removeEventListener("mouseup",Ie)};return Ce.addEventListener("mousedown",Le),{destroy(){Ce.removeEventListener("mousedown",Le)}}}function We(Ce){const Be=Ie=>{Ie.stopPropagation(),Ie.preventDefault(),ee=c(),Ot(hs,lt(re));const be=v().x-R(_).x,je=v().y-R(_).y;ae=Math.atan2(je,be),Ot(de,!0),window.addEventListener("mouseup",Le)},Le=()=>{Ot(de,!1),window.removeEventListener("mouseup",Le)};return Ce.addEventListener("mousedown",Be),{destroy(){Ce.removeEventListener("mousedown",Be)}}}function Ne(){const Ce=lt(re),Be=Ce.x-R(_).x,Le=Ce.y-R(_).y,Ie=Math.atan2(Le,Be),be=ae-Ie;return ee-Re(be)}function Re(Ce){return Ce*(180/Math.PI)}nQ(()=>{C&&(Ce=>(p(Ce[0]),q(Ce[1])))(Em(C)),s()<p()&&E.set(!1),o()<q()&&E.set(!1)}),Fe(()=>(h(),u()),()=>{h()&&(u(),Ot(ce,Ne()))}),Fe(()=>(a(),u(),Vt(q()),R(ne),R(te),R(K),c()),()=>{if(a()){const Ce=lt(hs),Be=u(),Le=Math.max(q(),R(ne)+(Be.y-Ce.y)*R(te));Le>q()?(E.set(!0),Ot(Te,Le)):E.set(!1),R(te)===-1&&Ot(U,{x:R(K).x,y:R(K).y+Be.y-Ce.y}),c()!==0&&S.position.update(Ie=>({y:R(K).y-(Le-R(ne))/2,x:Ie.x}))}}),Fe(()=>(f(),u(),Vt(p()),R(oe),R(te),R(K),c()),()=>{if(f()){const Ce=lt(hs),Be=u(),Le=Math.max(p(),R(oe)+(Be.x-Ce.x)*R(te));Le>p()?(E.set(!0),Ot(Se,Le)):E.set(!1),R(te)===-1&&Ot(U,{x:R(K).x+Be.x-Ce.x,y:R(K).y}),c()!==0&&S.position.update(Ie=>({x:R(K).x-(Le-R(oe))/2,y:Ie.y}))}}),Fe(()=>i(),()=>{we(y,i().x)}),Fe(()=>i(),()=>{we(m,i().y)}),Fe(()=>(R(y),s(),R(m),o()),()=>{we(_,{x:R(y)+s()/2,y:R(m)+o()/2})}),Ji(),qn();var rt=_ee(),Ve=Gt(rt);{var L=Ce=>{var Be=gee(),Le=Gt(Be);let Ie;Xu(Le,(ct,mt)=>le==null?void 0:le(ct,mt),()=>({left:O}));var be=xt(Le,2);let je;Xu(be,(ct,mt)=>le==null?void 0:le(ct,mt),()=>({right:N})),Wt((ct,mt)=>{Ie=Cn(Le,1,"left svelte-1ryxg7v",null,Ie,ct),je=Cn(be,1,"right svelte-1ryxg7v",null,je,mt)},[()=>({width:A()}),()=>({width:A()})],hn),nt(Ce,Be)};lr(Ve,Ce=>{A()&&Ce(L)})}var B=xt(Ve,2);{var H=Ce=>{var Be=vee(),Le=Gt(Be);let Ie;Xu(Le,(ct,mt)=>le==null?void 0:le(ct,mt),()=>({top:V}));var be=xt(Le,2);let je;Xu(be,(ct,mt)=>le==null?void 0:le(ct,mt),()=>({bottom:W})),Wt((ct,mt)=>{Ie=Cn(Le,1,"top svelte-1ryxg7v",null,Ie,ct),je=Cn(be,1,"bottom svelte-1ryxg7v",null,je,mt)},[()=>({height:T()}),()=>({height:T()})],hn),nt(Ce,Be)};lr(B,Ce=>{T()&&Ce(H)})}var X=xt(B,2);{var xe=Ce=>{var Be=mee();Cn(Be,1,"svelte-1ryxg7v",null,{},{both:G}),Xu(Be,(Le,Ie)=>le==null?void 0:le(Le,Ie),()=>({both:G})),nt(Ce,Be)};lr(X,Ce=>{G&&Ce(xe)})}var ue=xt(X,2);{var Ae=Ce=>{var Be=yee();let Le;Xu(Be,Ie=>We==null?void 0:We(Ie)),Wt(Ie=>Le=Cn(Be,1,"svelte-1ryxg7v",null,Le,Ie),[()=>({rotation:I()})],hn),nt(Ce,Be)};lr(ue,Ce=>{I()&&Ce(Ae)})}nt(e,rt),Rr(),n()}var wee=ir("<div></div>");function xee(e,t){let r=ve(t,"output",8),n=ve(t,"input",8),i=ve(t,"connecting",8),s=ve(t,"connected",8),o=ve(t,"hovering",8),a=ve(t,"bgColor",8);var u=wee();let c,f;Wt(h=>{c=Cn(u,1,"svelvet-anchor svelte-19t6skv",null,c,h),f=kr(u,"",f,{"--prop-anchor-color":a()})},[()=>({output:r(),input:n(),connected:s(),connecting:i(),hovering:o()})],hn),nt(e,u)}let Tm;function See(e){const t=e.parentNode;if(!t)return;t.removeChild(e);const r=document.querySelector(".svelvet-graph-wrapper");r&&r.appendChild(e)}var Eee=Nn('<defs><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="12.5" refY="5" orient="auto"><polygon class="arrow svelte-ppcocz" points="0 0, 15 5, 0 10"></polygon></marker><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="0" refY="5" orient="auto"><polygon class="arrow svelte-ppcocz" points="0 5, 15 0, 15 10"></polygon></marker></defs>'),Aee=Nn("<path></path>"),Tee=ir('<div class="default-label svelte-ppcocz"> </div>'),Pee=Nn('<foreignObject width="100%" height="100%" class="svelte-ppcocz"><span class="label-wrapper svelte-ppcocz"><!></span></foreignObject>'),Cee=Nn('<svg class="edges-wrapper svelte-ppcocz"><!><path role="presentation"></path><!><!></svg>');function WS(e,t){var Mt,en;const r=NE(t);Cr(t,!1);const[n,i]=ni(),s=()=>Ye(Ft,"$sourceDynamic",n),o=()=>Ye(zr,"$targetDynamic",n),a=()=>Ye(R(p),"$edgeColor",n),u=()=>Ye(R(C),"$edgeLabel",n),c=()=>Ye(ei,"$sourcePositionStore",n),f=()=>Ye(Bt,"$targetPositionStore",n),h=()=>Ye(jr,"$sourceNodePositionStore",n),v=()=>Ye($n,"$targetNodePositionStore",n),y=()=>Ye(vn,"$sourceDirection",n),m=()=>Ye(pn,"$sourceRotation",n),_=()=>Ye(mn,"$targetDirection",n),w=()=>Ye(Gn,"$targetRotation",n),S=()=>Ye(hi,"$edgeType",n),E=()=>Ye(Fn,"$sourceMoving",n),A=()=>Ye(wn,"$targetMoving",n),T=()=>Ye(R(Ve),"$sourceZIndex",n),I=()=>Ye(R(L),"$targetZIndex",n),q=qe(),p=qe(),C=qe(),O=qe(),N=qe(),V=qe(),W=qe(),G=qe(),ee=qe(),ae=qe(),K=qe(),U=qe(),j=qe(),J=qe(),de=qe(),ce=qe(),Te=qe(),Se=qe(),re=qe(),oe=qe(),ne=qe(),te=qe(),le=qe(),We=qe(),Ne=qe(),Re=qe(),rt=qe(),Ve=qe(),L=qe(),B=qe(),H=qe(),X=Mr("edgeStore"),xe=Mr("edgeStyle"),ue=Mr("endStyles"),Ae=Mr("raiseEdgesOnSelect"),Ce=Mr("edgesAboveNode");let Be=ve(t,"edge",24,()=>Mr("edge")),Le=ve(t,"straight",8,xe==="straight"),Ie=ve(t,"step",8,xe==="step"),be=ve(t,"start",24,()=>ue[0]),je=ve(t,"end",24,()=>ue[1]),ct=ve(t,"animate",8,!1),mt=ve(t,"label",8,""),ft=ve(t,"enableHover",8,!1),it=ve(t,"edgeClick",8,null),Ht=ve(t,"labelPosition",8,.5),yr=ve(t,"width",8,null),Qt=ve(t,"color",8,null),cr=ve(t,"labelColor",8,null),Lr=ve(t,"textColor",8,null),Br=ve(t,"cornerRadius",8,8),bn=ve(t,"targetColor",8,null);const tr=Be().source,Ir=Be().target,vn=tr.direction,mn=Ir.direction,pn=tr.rotation,Gn=Ir.rotation,ei=tr.position,Bt=Ir.position,Ft=tr.dynamic,zr=Ir.dynamic,Fn=tr.moving,wn=Ir.moving,jr=(Mt=tr.node)==null?void 0:Mt.position,$n=(en=Ir.node)==null?void 0:en.position,hi=Be().type,Jr=Be().id;let Un=qe(),On=qe(),di=qe({x:0,y:0}),Xe=qe(!1),Et=qe(!1),Rt=qe(!1),kt=qe(!1),Lt=qe(!1),at=qe();Be().rendered.set(!0),Ti(()=>{setTimeout(()=>{R(On)&&we(di,Am(R(On),Ht()))},0),See(R(at))}),J4(()=>{R(On)&&we(di,Am(R(On),Ht()))}),wh(()=>{R(at).remove(),cancelAnimationFrame(Tm)});function He(){R(Xe)&&(R(On)&&we(di,Am(R(On),Ht())),Tm=requestAnimationFrame(He))}function yt(){if(tr.id===null||Ir.id===null)return;const xr=X.match(tr,Ir);X.delete(xr[0]),tr==null||tr.connected.update(Nr=>(Ir&&Nr.delete(Ir),Nr)),Ir==null||Ir.connected.update(Nr=>(tr&&Nr.delete(tr),Nr))}Fe(()=>(s(),o()),()=>{we(q,s()||o())}),Fe(()=>{},()=>{qa(we(p,(tr==null?void 0:tr.edgeColor)||(Ir==null?void 0:Ir.edgeColor)||null),"$edgeColor",n)}),Fe(()=>Vt(Be()),()=>{var xr;qa(we(C,(xr=Be().label)==null?void 0:xr.text),"$edgeLabel",n)}),Fe(()=>(Vt(Qt()),a()),()=>{we(O,Qt()||a()||null)}),Fe(()=>(Vt(mt()),u()),()=>{we(N,mt()||u()||"")}),Fe(()=>R(N),()=>{we(V,R(N)||r.label)}),Fe(()=>c(),()=>{we(W,c())}),Fe(()=>f(),()=>{we(G,f())}),Fe(()=>h(),()=>{we(ee,h())}),Fe(()=>v(),()=>{we(ae,v())}),Fe(()=>R(W),()=>{we(K,R(W).x)}),Fe(()=>R(W),()=>{we(U,R(W).y)}),Fe(()=>R(G),()=>{we(j,R(G).x)}),Fe(()=>R(G),()=>{we(J,R(G).y)}),Fe(()=>(R(j),R(K)),()=>{we(de,R(j)-R(K))}),Fe(()=>(R(J),R(U)),()=>{we(ce,R(J)-R(U))}),Fe(()=>R(de),()=>{we(Te,Math.abs(R(de)))}),Fe(()=>R(ce),()=>{we(Se,Math.abs(R(ce)))}),Fe(()=>R(Te),()=>{we(re,Math.max(30,Math.min(600,R(Te)/2)))}),Fe(()=>R(Se),()=>{we(oe,Math.max(30,Math.min(600,R(Se)/2)))}),Fe(()=>(R(q),R(ae),R(ee),R(Rt),R(kt),lt),()=>{if(R(q)&&tr.node&&Ir.node){const xr=R(ae).x-R(ee).x,Nr=R(ae).y-R(ee).y;we(Rt,Nr>0),we(kt,xr>0);let Vr,Sr;if(R(Rt)){const xn=lt(tr.node.dimensions.height),Xt=R(ee).y+xn;Vr=R(ae).y-Xt}else{const xn=lt(Ir.node.dimensions.height),Xt=R(ae).y+xn;Vr=R(ee).y-Xt}if(R(kt)){const xn=lt(tr.node.dimensions.width),Xt=R(ee).x+xn;Sr=R(ae).x-Xt}else{const xn=lt(Ir.node.dimensions.width),Xt=R(ae).x+xn;Sr=R(ee).x-Xt}we(Et,Vr>Sr)}}),Fe(()=>(R(q),R(Et),R(Rt),R(kt),s(),o()),()=>{if(R(q)){let xr,Nr;R(Et)?(xr=R(Rt)?"south":"north",Nr=R(Rt)?"north":"south"):(xr=R(kt)?"east":"west",Nr=R(kt)?"west":"east"),s()&&Ot(vn,xr),o()&&Ot(mn,Nr)}}),Fe(()=>(y(),m()),()=>{we(ne,xC(Lf[y()],m()||0))}),Fe(()=>(_(),w()),()=>{we(te,xC(Lf[_()],w()||0))}),Fe(()=>(R(K),R(ne),R(re)),()=>{we(le,R(K)+R(ne).x*R(re))}),Fe(()=>(R(U),R(ne),R(oe)),()=>{we(We,R(U)+R(ne).y*R(oe))}),Fe(()=>(R(j),R(te),R(re)),()=>{we(Ne,R(j)+R(te).x*R(re))}),Fe(()=>(R(J),R(te),R(oe)),()=>{we(Re,R(J)+R(te).y*R(oe))}),Fe(()=>(R(le),R(We),R(Ne),R(Re)),()=>{we(rt,`C ${R(le)}, ${R(We)} ${R(Ne)}, ${R(Re)}`)}),Fe(()=>(Vt(Ie()),S(),R(K),R(U),Vt(Le()),R(rt),R(j),R(J)),()=>{(!Ie()||Jr==="cursor"||S()==="bezier")&&we(Un,`M ${R(K)}, ${R(U)} ${Le()?"":R(rt)} ${R(j)}, ${R(J)}`)}),Fe(()=>(R(V),R(Xe),E(),A()),()=>{R(V)&&!R(Xe)&&(E()||A()||Jr==="cursor")?(we(Xe,!0),He()):R(Xe)&&!E()&&!A()&&Jr!=="cursor"&&(we(Xe,!1),cancelAnimationFrame(Tm))}),Fe(()=>(Vt(Ie()),S(),R(K),R(U),y(),R(j),R(J),_(),Vt(Br()),SC),()=>{if(Ie()&&Jr!=="cursor"&&!(S()&&S()==="bezier")){const xr={x:R(K),y:R(U),direction:Lf[y()]},Nr={x:R(j),y:R(J),direction:Lf[_()]},Vr=jQ(xr,Nr,IQ),Sr=(xn,Xt,pi)=>{if(Xt<Vr.length-1){const wi=vQ(xn,Vr[Xt+1]);return mQ(pi,wi)}return""};we(Un,Vr.reduce((xn,Xt,pi)=>{const wi=Math.sign(Xt.x),qi=Math.sign(Xt.y);let Ze=Xt.x,gt=Xt.y,ht="";if(Br()){const dt=Vr[pi+1]||{x:0,y:0},Ct=Vr[pi-1]||{x:0,y:0},rr=$d(Xt.x,dt.x,Br()),Hr=$d(dt.y,Xt.y,Br()),cn=$d(Ct.x,Xt.x,Br()),Gr=$d(Ct.y,Xt.y,Br()),yn=Math.min(cn,Gr),Bn=Math.min(rr,Hr);Xt.x?Ze=Xt.x-(Bn+yn)*wi:gt=Xt.y-(Bn+yn)*qi,ht=Sr(Xt,pi,Bn)}return SC(xn,Ze,gt,ht)},`M ${R(K)}, ${R(U)}`))}}),Fe(()=>{},()=>{qa(we(Ve,tr.node.zIndex||0),"$sourceZIndex",n)}),Fe(()=>{},()=>{qa(we(L,Ir.node.zIndex||0),"$targetZIndex",n)}),Fe(()=>(T(),I()),()=>{we(B,Math.max(T(),I()))}),Fe(()=>(R(B),T(),I()),()=>{we(H,Ce==="all"?1e5:Ce?R(B):Ae===!0?R(B)-1:Ae==="source"?T()-1:Ae==="target"?I()-1:0)}),Ji(),qn();var Tt=gr(),zt=Gt(Tt);{var an=xr=>{var Nr=Cee();let Vr;var Sr=jt(Nr);{var xn=ht=>{var dt=Eee(),Ct=jt(dt);pt(Ct,"id",Jr+"-end-arrow");var rr=jt(Ct);let Hr;var cn=xt(Ct);pt(cn,"id",Jr+"-start-arrow");var Gr=jt(cn);let yn;Wt(()=>{Hr=kr(rr,"",Hr,{"--prop-edge-color":R(O)}),yn=kr(Gr,"",yn,{"--prop-edge-color":R(O)})}),nt(ht,dt)};lr(Sr,ht=>{(be()||je())&&ht(xn)})}var Xt=xt(Sr);pt(Xt,"id",Jr+"-target");let pi,wi;wu(Xt,ht=>we(On,ht),()=>R(On));var qi=xt(Xt);Xr(qi,t,"default",{get path(){return R(Un)},destroy:yt,get hovering(){return R(Lt)}},ht=>{var dt=Aee();pt(dt,"id",Jr);let Ct,rr;Wt(Hr=>{Ct=Cn(dt,0,"edge svelte-ppcocz",null,Ct,Hr),pt(dt,"d",R(Un)),pt(dt,"marker-end",je()==="arrow"?`url(#${Jr+"-end-arrow"})`:""),pt(dt,"marker-start",be()==="arrow"?`url(#${Jr+"-start-arrow"})`:""),rr=kr(dt,"",rr,{"--prop-edge-color":R(O),"--prop-stroke-width":yr()?yr()+"px":null})},[()=>({animate:ct()})],hn),nt(ht,dt)});var Ze=xt(qi);{var gt=ht=>{var dt=Pee(),Ct=jt(dt),rr=jt(Ct);Xr(rr,t,"label",{destroy:yt,get hovering(){return R(Lt)}},Hr=>{var cn=Tee();let Gr;var yn=jt(cn);Wt(()=>{Gr=kr(cn,"",Gr,{"--prop-label-color":cr(),"--prop-label-text-color":Lr()}),Eu(yn,R(N))}),nt(Hr,cn)}),Wt(()=>{pt(dt,"x",R(di).x),pt(dt,"y",R(di).y)}),nt(ht,dt)};lr(Ze,ht=>{R(V)&&ht(gt)})}wu(Nr,ht=>we(at,ht),()=>R(at)),Wt(ht=>{Vr=kr(Nr,"",Vr,{"z-index":R(H)}),pi=Cn(Xt,0,"target svelte-ppcocz",null,pi,ht),pt(Xt,"d",R(Un)),wi=kr(Xt,"",wi,{cursor:it()||R(Lt)?"pointer":"move","--prop-target-edge-color":it()||R(Lt)?bn()||null:"transparent"})},[()=>({cursor:Jr==="cursor"||!it()&&!ft()})],hn),pr("mousedown",Xt,function(...ht){var dt;(dt=it())==null||dt.apply(this,ht)}),pr("mouseenter",Xt,()=>we(Lt,!0)),pr("mouseleave",Xt,()=>we(Lt,!1)),nt(xr,Nr)};lr(zt,xr=>{tr&&Ir&&xr(an)})}nt(e,Tt),DE(t,"destroy",yt);var jn=Rr({destroy:yt});return i(),jn}function CC(e,t){Cr(t,!1);let r=ve(t,"edge",8);Qr("edge",r()),qn();var n=gr(),i=Gt(n);Xr(i,t,"default",{},null),nt(e,n),Rr()}let Pm;const ea=Ke(null);function Ree(e,t,r){if(t==="self")return;const n=e.parentNode;if(!n)return;n.removeChild(e);const i=document.querySelector(`#anchors-${t}-${r.id}`);i&&(i.appendChild(e),e&&r.recalculateAnchors())}var Iee=ir('<div role="button" tabindex="0"><!></div> <!> <!>',1);function Nf(e,t){Cr(t,!1);const[r,n]=ni(),i=()=>Ye(ea,"$connectingFrom",r),s=()=>Ye(mt,"$nodeLevelConnections",r),o=()=>Ye(G,"$anchorsMounted",r),a=()=>Ye(R(E),"$dynamicDirection",r),u=()=>Ye(C,"$mounted",r),c=()=>Ye(W,"$nodeConnectEvent",r),f=()=>Ye(Ie,"$anchors",r),h=()=>Ye(R(S),"$connectedAnchors",r),v=()=>Ye(be,"$resizingWidth",r),y=()=>Ye(je,"$resizingHeight",r),m=()=>Ye(ct,"$rotating",r),_=()=>Ye(Te(),"$inputsStore",r),w=qe(),S=qe(),E=qe(),A=Mr("dynamic"),T=Mr("node"),I=Mr("edgeStore"),q=Mr("cursorAnchor"),p=Mr("direction"),C=Mr("mounted"),O=Mr("graph"),N=Mr("nodeStore"),V=Mr("graphEdge"),W=Mr("nodeConnectEvent"),G=Mr("anchorsMounted"),ee=Mr("flowchart")||void 0;let ae=ve(t,"bgColor",8,null),K=ve(t,"id",8,0),U=ve(t,"input",8,!1),j=ve(t,"output",8,!1),J=ve(t,"multiple",24,()=>j()?!0:!U()),de=ve(t,"dynamic",8,A||!1),ce=ve(t,"edge",8,null),Te=ve(t,"inputsStore",8,null),Se=ve(t,"key",8,null),re=ve(t,"outputStore",8,null),oe=ve(t,"connections",28,()=>[]),ne=ve(t,"edgeColor",24,()=>Ke(null)),te=ve(t,"edgeLabel",8,""),le=ve(t,"locked",8,!1),We=ve(t,"nodeConnect",8,!1),Ne=ve(t,"edgeStyle",8,null),Re=ve(t,"endStyles",24,()=>[null,null]),rt=ve(t,"invisible",8,!1),Ve=ve(t,"direction",24,()=>p==="TD"?U()?"north":"south":U()?"west":"east"),L=ve(t,"title",8,"");const B=_l(),H=_l();let X=qe(),xe=qe(!1),ue=qe(!1),Ae=qe(0),Ce=U()===j()?null:U()?"input":"output",Be=qe([]);const Le=T.edge,Ie=T.anchors,be=T.resizingWidth,je=T.resizingHeight,ct=T.rotating,mt=T.connections,ft=`A-${K()||Ie.count()+1}/${T.id}`,it=tee(O,T,ft,{x:0,y:0},{width:0,height:0},Te()||re()||null,ce()||Le||V||null,Ce,Ve(),de(),Se(),ne());Ie.add(it,it.id),Ti(()=>{var Et;R(X)&&it.recalculatePosition();const Xe=Array.from(lt(T.anchors)).reduce((Rt,[,kt])=>(kt.type==="output"&&Rt++,Rt),0);if((Et=s())!=null&&Et.length&&!U()){const Rt=[];let kt=null;s().forEach((Lt,at)=>{Lt&&(kt===null&&(kt=at),(at-kt)%Xe===0?(R(Be).push(Lt),Rt.push(null)):Rt.push(Lt))}),Ot(mt,Rt)}ZJ(G,o())}),J4(()=>{R(X)&&it.recalculatePosition()}),wh(()=>{Gn(),cancelAnimationFrame(Pm)});function Ht(Xe){var yt;I.delete("cursor");const Et={x:Xe.changedTouches[0].clientX,y:Xe.changedTouches[0].clientY},Rt=document.elementFromPoint(Et.x,Et.y);if(!Rt)return;const kt=Rt.parentElement;if(!kt)return;const Lt=kt.id,at=Lt.split("/")[1],He=(yt=N.get(at))==null?void 0:yt.anchors.get(Lt);He&&(I.delete("cursor"),yr(it,He,Xe))}function yr(Xe,Et,Rt){const kt=tr(Xe,Et);kt&&Ir(),Rt.shiftKey||mn(kt)}function Qt(Xe){var Et;if("changedTouches"in Xe&&R(w)){Ht(Xe);return}if(!R(w)){if((Et=h())!=null&&Et.size&&!J()){I.delete("cursor"),Xe.shiftKey||mn(!1);return}i()&&bn(Xe)}}function cr(Xe){var Et;if(!le()){if((Et=h())!=null&&Et.size&&!J()&&!i())return ei();if(!i())return Lr();bn(Xe)}}function Lr(){U()===j()?(Ot(ea,{anchor:it,store:null,key:null}),Br(it,q)):U()?(Ot(ea,{anchor:it,store:Te(),key:Se()}),Br(q,it)):j()&&(Ot(ea,{anchor:it,store:re(),key:null}),Br(it,q))}function Br(Xe,Et,Rt=!1){const kt={color:ne(),label:{text:te()}};Rt&&(kt.disconnect=!0),Ne()&&(kt.type=Ne()),Re()[0]&&(kt.start=Re()[0]),Re()[1]&&(kt.start=Re()[1]);const Lt=EC({source:Xe,target:Et},(Xe==null?void 0:Xe.edge)||null,kt);I.add(Lt,"cursor")}function bn(Xe){if(I.delete("cursor"),!i())return;const Et=i().anchor.type;if(i().anchor===it||Et===it.type&&Et){mn(!1);return}it.recalculatePosition();let Rt,kt;U()===j()?Et==="input"?(Rt=it,kt=i().anchor):(Rt=i().anchor,kt=it):U()?(Rt=i().anchor,kt=it):(Rt=it,kt=i().anchor),yr(Rt,kt,Xe)}function tr(Xe,Et){if(Xe===Et||lt(Xe.connected).has(it))return!1;const Rt={color:ne(),label:{text:te()}};if(ee){const Lt=Xe.node.id.slice(2),at=ee.nodeList[Lt];if(at){const He=Et.node.id.slice(2),yt=at.children.filter(Tt=>Tt.node.id===He)[0];if(yt){const Tt=yt;Rt.label={text:Tt.content}}}}Ne()&&(Rt.type=Ne()),Re()[0]&&(Rt.start=Re()[0]),Re()[1]&&(Rt.start=Re()[1]);const kt=EC({source:Xe,target:Et},(Xe==null?void 0:Xe.edge)||null,Rt);return!Xe.node||!Et.node?!1:(I.add(kt,new Set([Xe,Et,Xe.node,Et.node])),!0)}function Ir(){if(U()&&i()&&i().store)_()&&Se()&&Te()&&typeof Te().set=="function"&&typeof Te().update=="function"&&jf(Te(),Pn(_)[Se()]=i().store,Pn(_));else if(j()&&i()&&i().store){const{store:Xe,key:Et}=i();Xe&&Et&&typeof Xe.update=="function"&&Xe.update(Rt=>(re()&&(Rt[Et]=re()),Rt))}}function vn(){_()&&Se()&&_()[Se()]&&jf(Te(),Pn(_)[Se()]=Ke(lt(_()[Se()])),Pn(_))}function mn(Xe){(Xe||!c())&&(Ot(ea,null),Ot(W,null))}function pn(){R(xe)&&(R(X)&&it.recalculatePosition(),Pm=requestAnimationFrame(pn))}function Gn(){I.delete("cursor"),I.match(it).forEach(Et=>I.delete(Et)),mn(!1),vn()}function ei(){if(lt(it.connected).size>1)return;const Xe=Array.from(lt(it.connected))[0];if(Xe.type!=="input")if(Gn(),Xe.type==="output"){Br(Xe,q,!0),vn();const Et=Xe.store;Ot(ea,{anchor:Xe,store:Et,key:null})}else Br(Xe,q,!0),Ot(ea,{anchor:Xe,store:null,key:null})}function Bt(){R(Be).forEach((Xe,Et)=>{if(!Xe)return;Fn(Xe)&&oe(oe()[Et]=null,!0)}),we(Be,R(Be).filter(Xe=>Xe!==null))}function Ft(){oe().forEach(Xe=>{Xe&&Fn(Xe)})}function zr(Xe){const Et=`N-${Xe[0]}`,Rt=N.get(Et);if(!Rt)return;const kt=Rt.anchors.get(`A-${Xe[1]}/N-${Xe[0]}`);if(!kt)return;const Lt=I.match(it,kt);Lt&&I.delete(Lt[0])}const Fn=Xe=>{let Et,Rt,kt=null;Array.isArray(Xe)?(Et=Xe[0].toString(),Rt=Xe[1].toString()):(Et=Xe.toString(),Rt=null);const Lt=`N-${Et}`,at=N.get(Lt);if(!at)return!1;if(Rt){const He=`A-${Rt}/${Lt}`;kt=at.anchors.get(He)||null}else{const He=lt(at.anchors),yt=Array.from(He.values());if(!yt.length)return!1;kt=yt.reduce((Tt,zt)=>!Tt&&zt.type==="output"?null:zt.type==="output"?Tt:!Tt||lt(zt.connected).size<lt(Tt.connected).size?zt:Tt,null)}if(!kt)return!1;if(tr(it,kt),kt.store&&(Te()||re())){if(U()&&kt.type==="output")_()&&Se()&&Te()&&typeof Te().set=="function"&&typeof Te().update=="function"&&jf(Te(),Pn(_)[Se()]=kt.store,Pn(_));else if(j()&&kt.type==="input"){const{store:He,inputKey:yt}=kt;He&&yt&&typeof He.update=="function"&&He.update(Tt=>(re()&&(Tt[yt]=re()),Tt))}}return!0};Fe(()=>i(),()=>{var Xe;we(w,((Xe=i())==null?void 0:Xe.anchor)===it)}),Fe(()=>{},()=>{qa(we(S,it&&it.connected),"$connectedAnchors",r)}),Fe(()=>{},()=>{qa(we(E,it==null?void 0:it.direction),"$dynamicDirection",r)}),Fe(()=>(Vt(de()),R(X),a()),()=>{de()&&R(X)&&Ree(R(X),a(),T)}),Fe(()=>(u(),Vt(oe())),()=>{u()===N.count()&&oe().length&&Ft()}),Fe(()=>(Vt(We()),c()),()=>{We()&&c()&&Qt(c())}),Fe(()=>(u(),R(Be)),()=>{u()===N.count()&&R(Be).length&&Bt()}),Fe(()=>(R(X),f(),h(),a()),()=>{R(X)&&(f(),h(),a(),it.recalculatePosition())}),Fe(()=>(R(xe),v(),y(),m()),()=>{!R(xe)&&(v()||y()||m())?(we(xe,!0),pn()):!v()&&!y()&&R(xe)&&!m()&&(we(xe,!1),cancelAnimationFrame(Pm))}),Fe(()=>(h(),R(Ae)),()=>{if(h()){if(h().size<R(Ae))H("disconnection",{node:T,anchor:it});else if(h().size>R(Ae)){const Xe=Array.from(h()),Et=Xe[Xe.length-1];B("connection",{node:T,anchor:it,connectedNode:Et.node,connectedAnchor:Et})}we(Ae,h().size)}}),Ji(),qn();var wn=Iee(),jr=Gt(wn);let $n;var hi=jt(jr);Xr(hi,t,"default",{get linked(){var Xe;return((Xe=h())==null?void 0:Xe.size)>=1},get hovering(){return R(ue)},get connecting(){return R(w)}},Xe=>{var Et=gr(),Rt=Gt(Et);{var kt=Lt=>{const at=hn(()=>{var He;return((He=h())==null?void 0:He.size)>=1});xee(Lt,{get output(){return j()},get input(){return U()},get connecting(){return R(w)},get hovering(){return R(ue)},get bgColor(){return ae()},get connected(){return R(at)}})};lr(Rt,Lt=>{rt()||Lt(kt)})}nt(Xe,Et)}),wu(jr,Xe=>we(X,Xe),()=>R(X));var Jr=xt(jr,2);ds(Jr,1,()=>Array.from(h()),Xe=>Xe.id,(Xe,Et,Rt,kt)=>{var Lt=gr();const at=hn(()=>I.fetch(it,R(Et)));var He=Gt(Lt);{var yt=Tt=>{const zt=hn(()=>R(at).component);CC(Tt,{get edge(){return R(at)},children:(an,jn)=>{var Mt=gr(),en=Gt(Mt);Xr(en,t,"edge",{},xr=>{var Nr=gr(),Vr=Gt(Nr);{var Sr=Xt=>{R(zt)(Xt,{})},xn=Xt=>{WS(Xt,{})};lr(Vr,Xt=>{R(zt)?Xt(Sr):Xt(xn,!1)})}nt(xr,Nr)}),nt(an,Mt)},$$slots:{default:!0}})};lr(He,Tt=>{R(at)&&R(at).source===it&&Tt(yt)})}nt(Xe,Lt)});var Un=xt(Jr,2);{var On=Xe=>{var Et=gr();const Rt=hn(()=>I.get("cursor"));var kt=Gt(Et);{var Lt=at=>{const He=hn(()=>R(Rt).component);CC(at,{get edge(){return R(Rt)},children:(yt,Tt)=>{var zt=gr(),an=Gt(zt);Xr(an,t,"edge",{},jn=>{var Mt=gr(),en=Gt(Mt);{var xr=Vr=>{R(He)(Vr,{})},Nr=Vr=>{WS(Vr,{})};lr(en,Vr=>{R(He)?Vr(xr):Vr(Nr,!1)})}nt(jn,Mt)}),nt(yt,zt)},$$slots:{default:!0}})};lr(kt,at=>{R(Rt)&&at(Lt)})}nt(Xe,Et)};lr(Un,Xe=>{R(w)&&Xe(On)})}Wt(Xe=>{pt(jr,"id",it==null?void 0:it.id),$n=Cn(jr,1,"anchor-wrapper svelte-bazd6o",null,$n,Xe),pt(jr,"title",L()||"")},[()=>({locked:le()})],hn),pr("mouseenter",jr,()=>we(ue,!0)),pr("mouseleave",jr,()=>we(ue,!1)),pr("mousedown",jr,ks(ro(cr))),pr("mouseup",jr,ro(Qt)),pr("touchstart",jr,ks(ro(cr))),pr("touchend",jr,ro(Qt)),nt(e,wn),DE(t,"disconnect",zr);var di=Rr({disconnect:zr});return n(),di}var Oee=ir("<!> <!>",1),Mee=ir("<div></div> <div></div>",1),kee=ir('<div><!> <p class="svelte-j5bq7k"> </p> <!></div>');function Lee(e,t){Cr(t,!1);const[r,n]=ni(),i=()=>Ye(m,"$borderRadius",r),s=()=>Ye(w,"$inputs",r),o=()=>Ye(S,"$outputs",r),a=()=>Ye(_,"$textColor",r),u=()=>Ye(y,"$label",r),c=()=>Ye(E,"$resizable",r),f=Mr("dynamic"),h=Mr("node");let v=ve(t,"selected",8);const y=h.label,m=h.borderRadius,_=h.textColor,w=h.inputs,S=h.outputs,E=h.resizable,A=lt(h.direction);let T=A==="TD",I=A==="TD",q=A!=="TD",p=A!=="TD";qn();var C=kee();let O,N;var V=jt(C);{var W=J=>{var de=Oee(),ce=Gt(de);ds(ce,1,()=>({length:s()}),gu,(Se,re)=>{Nf(Se,{$$events:{connection(oe){Tn.call(this,t,oe)},disconnection(oe){Tn.call(this,t,oe)}}})});var Te=xt(ce,2);ds(Te,1,()=>({length:o()}),gu,(Se,re)=>{Nf(Se,{$$events:{connection(oe){Tn.call(this,t,oe)},disconnection(oe){Tn.call(this,t,oe)}}})}),nt(J,de)},G=J=>{var de=Mee(),ce=Gt(de);Cn(ce,1,"input-anchors svelte-j5bq7k",null,{},{top:T,left:q}),ds(ce,5,()=>({length:s()}),gu,(Se,re)=>{Nf(Se,{input:!0,direction:T?"north":"west",$$events:{connection(oe){Tn.call(this,t,oe)},disconnection(oe){Tn.call(this,t,oe)}}})});var Te=xt(ce,2);Cn(Te,1,"output-anchors svelte-j5bq7k",null,{},{bottom:I,right:p}),ds(Te,5,()=>({length:o()}),gu,(Se,re)=>{Nf(Se,{output:!0,direction:T?"south":"east",$$events:{connection(oe){Tn.call(this,t,oe)},disconnection(oe){Tn.call(this,t,oe)}}})}),nt(J,de)};lr(V,J=>{f?J(W):J(G,!1)})}var ee=xt(V,2);let ae;var K=jt(ee),U=xt(ee,2);{var j=J=>{bee(J,{width:!0,height:!0,rotation:!0})};lr(U,J=>{c()&&J(j)})}Wt(J=>{O=Cn(C,1,"default-node svelte-j5bq7k",null,O,J),N=kr(C,"",N,{"border-radius":`${i()??""}px`}),ae=kr(ee,"",ae,{color:a()}),Eu(K,u())},[()=>({selected:v()})],hn),nt(e,C),Rr(),n()}function zE(e,t){const r=NE(t);Cr(t,!1);const[n,i]=ni(),s=()=>Ye(R(a),"$nodePosition",n),o=()=>Ye(Te,"$nodes",n),a=qe(),u=Mr("graph"),c=Mr("group");let f=ve(t,"position",28,()=>({x:0,y:0})),h=ve(t,"drop",8,!1),v=ve(t,"dimensions",8,null),y=ve(t,"id",8,0),m=ve(t,"bgColor",8,null),_=ve(t,"borderRadius",8,null),w=ve(t,"borderColor",8,null),S=ve(t,"borderWidth",8,null),E=ve(t,"selectionColor",8,null),A=ve(t,"textColor",8,null),T=ve(t,"resizable",8,!1),I=ve(t,"label",8,""),q=ve(t,"inputs",8,1),p=ve(t,"outputs",8,1),C=ve(t,"width",8,null),O=ve(t,"height",8,null),N=ve(t,"TD",8,!1),V=ve(t,"LR",8,!1),W=ve(t,"zIndex",8,1),G=ve(t,"editable",8,!0),ee=ve(t,"locked",8,!1),ae=ve(t,"rotation",8,0),K=ve(t,"edge",8,null),U=ve(t,"connections",24,()=>[]),j=ve(t,"useDefaults",8,!1),J=ve(t,"center",8,!1),de=ve(t,"dynamic",8,!1),ce=ve(t,"title",8,"");const Te=u.nodes;Qr("dynamic",de());let Se=qe(),re=qe(!0);Ti(()=>{const Re=N()?"TD":V()?"LR":u.direction,rt=u.groupBoxes.get(c),Ve=u.nodes.count()+1;we(re,!r.default),(r.anchorWest||r.anchorEast||r.anchorNorth||r.anchorSouth)&&we(re,!1);const L=v()?v():C()||O()?{width:C()||O()||200,height:O()||C()||100}:R(re)?{width:200,height:100}:{width:0,height:0},B={id:y()||Ve,position:h()==="cursor"?{x:lt(u.cursor).x,y:lt(u.cursor).y}:rt?{x:lt(rt.position).x+f().x,y:lt(rt.position).y+f().y}:f(),dimensions:L,editable:G()||u.editable,label:I(),group:c,resizable:T(),inputs:q(),outputs:p(),zIndex:W(),direction:Re,locked:ee(),rotation:ae()};U().length&&(B.connections=U()),S()&&(B.borderWidth=S()),_()&&(B.borderRadius=_()),w()&&(B.borderColor=w()),E()&&(B.selectionColor=E()),A()&&(B.textColor=A()),m()&&(B.bgColor=m()),K()&&(B.edge=K()),we(Se,YQ(B)),rt&&u.groups.update(H=>{const X=lt(H[c].nodes);return H[c].nodes.set(new Set([...X,R(Se)])),H}),u.nodes.add(R(Se),R(Se).id)}),wh(()=>{u.nodes.delete(R(Se).id)});function oe(Re){R(Se)&&R(Se).connections.set([Re])}function ne(Re){if(!R(Se))return;(Array.isArray(Re)?Re:[Re]).forEach(Ve=>{const[L,B]=Array.isArray(Ve)?Ve:[Ve,null],H=`N-${L}`,X=u.nodes.get(H);if(!X)return;let xe=null;const ue=B?`A-${B}/${H}`:null;ue&&(xe=X.anchors.get(ue));const Ae=u.edges.match(R(Se),X,xe);Ae.length&&u.edges.delete(Ae[Ae.length-1])})}Qr("connect",oe),Qr("disconnect",ne);let te=qe(f());Fe(()=>(R(Se),Vt(U())),()=>{R(Se)&&R(Se).connections.set(U())}),Fe(()=>(R(Se),Vt(m())),()=>{R(Se)&&R(Se).bgColor.set(m())}),Fe(()=>(R(Se),Vt(I())),()=>{R(Se)&&R(Se).label.set(I())}),Fe(()=>(R(Se),Vt(A())),()=>{R(Se)&&R(Se).textColor.set(A())}),Fe(()=>(R(Se),Vt(w())),()=>{R(Se)&&R(Se).borderColor.set(w())}),Fe(()=>(R(Se),Vt(E())),()=>{R(Se)&&R(Se).selectionColor.set(E())}),Fe(()=>(R(Se),Vt(T())),()=>{R(Se)&&R(Se).resizable.set(T())}),Fe(()=>(R(Se),Vt(G())),()=>{R(Se)&&R(Se).editable.set(G())}),Fe(()=>(R(Se),Vt(ee())),()=>{R(Se)&&R(Se).locked.set(ee())}),Fe(()=>(R(Se),Vt(q())),()=>{R(Se)&&R(Se).inputs.set(q())}),Fe(()=>(R(Se),Vt(p())),()=>{R(Se)&&R(Se).outputs.set(p())}),Fe(()=>(R(Se),Vt(W())),()=>{R(Se)&&R(Se).zIndex.set(W())}),Fe(()=>R(Se),()=>{var Re;qa(we(a,R(Se)&&((Re=R(Se))==null?void 0:Re.position)),"$nodePosition",n)}),Fe(()=>(R(Se),R(te),s(),Vt(f())),()=>{if(R(Se)){const{x:Re,y:rt}=R(te),{x:Ve,y:L}=s(),{x:B,y:H}=f();(B!==Ve||H!==L)&&(B!==Re||H!==rt?(we(te,f()),R(Se).position.set(f())):(we(te,s()),f(s())))}}),Fe(()=>(R(Se),Vt(q())),()=>{R(Se)&&R(Se).inputs.set(q())}),Fe(()=>(R(Se),Vt(p())),()=>{R(Se)&&R(Se).outputs.set(p())}),Ji(),qn();var le=gr(),We=Gt(le);{var Ne=Re=>{const rt=hn(()=>J()||h()==="center"),Ve=hn(()=>!!v()||!!C()||!!O()||R(re)||!1);pee(Re,{get node(){return R(Se)},get center(){return R(rt)},get isDefault(){return R(re)},get useDefaults(){return j()},get dimensionsProvided(){return R(Ve)},get nodeStore(){return u.nodes},get locked(){return u.locked},get groups(){return u.groups},get title(){return ce()},get maxZIndex(){return u.maxZIndex},get centerPoint(){return u.center},get cursor(){return u.cursor},get activeGroup(){return u.activeGroup},get editing(){return u.editing},get initialNodePositions(){return u.initialNodePositions},$$events:{nodeClicked(L){Tn.call(this,t,L)},nodeMount(L){Tn.call(this,t,L)},nodeReleased(L){Tn.call(this,t,L)},duplicate(L){Tn.call(this,t,L)}},children:ME,$$slots:{default:(L,B)=>{const H=hn(()=>B.destroy),X=hn(()=>B.selected),xe=hn(()=>B.grabHandle);var ue=gr(),Ae=Gt(ue);Xr(Ae,t,"default",{get selected(){return R(X)},get grabHandle(){return R(xe)},disconnect:ne,connect:oe,get node(){return R(Se)},get destroy(){return R(H)}},Ce=>{var Be=gr(),Le=Gt(Be);{var Ie=be=>{Lee(be,{get selected(){return R(X)},$$events:{connection(je){Tn.call(this,t,je)},disconnection(je){Tn.call(this,t,je)}}})};lr(Le,be=>{R(re)&&be(Ie)})}nt(Ce,Be)}),nt(L,ue)},anchorWest:(L,B)=>{var H=gr(),X=Gt(H);Xr(X,t,"anchorWest",{},null),nt(L,H)},anchorEast:(L,B)=>{var H=gr(),X=Gt(H);Xr(X,t,"anchorEast",{},null),nt(L,H)},anchorNorth:(L,B)=>{var H=gr(),X=Gt(H);Xr(X,t,"anchorNorth",{},null),nt(L,H)},anchorSouth:(L,B)=>{var H=gr(),X=Gt(H);Xr(X,t,"anchorSouth",{},null),nt(L,H)}}})};lr(We,Re=>{R(Se)&&o().get(R(Se).id)&&Re(Ne)})}nt(e,le),Rr(),i()}var Nee=ir('<div class="editor svelte-1nv0yho"><span style="color:white; font-size:45px">Editor</span> <button style="position:absolute; top:10px;right:10px;">X</button> <!> <button>Delete Node</button> <button>Resize Node</button></div>');function qee(e,t){Cr(t,!1);const r=qe();let n=ve(t,"editing",8);const i=Mr("graph");Qr("graph",i),Qr("textStore",n().label),Qr("colorStore",n().bgColor);let s=qe({x:150,y:50});function o(c){c.preventDefault(),we(s,{x:c.clientX,y:c.clientY}),i.editing.set(n())}function a(){i.nodes.delete(n().id),i.editing.set(null)}function u(){const c=n().id,f=i.nodes.get(c);if(f){const h=f.dimensions.width,v=f.dimensions.height,y=prompt("Enter new width (for example:250):",h?h.toString():""),m=prompt("Enter new height (for example:200):",v?v.toString():"");if(y===null||m===null)return;f.dimensions.width.set(parseInt(y,10)||0),f.dimensions.height.set(parseInt(m,10)||0),f.resizingWidth.set(!0),f.resizingHeight.set(!0)}}Fe(()=>{},()=>{we(r,i.cursor)}),Ji(),qn(),zE(e,{zIndex:1/0,get position(){return R(s)},bgColor:"white",id:"editor",children:(c,f)=>{var h=Nee(),v=xt(jt(h),2),y=xt(v,2);lee(y,{placeholder:"Node Label"});var m=xt(y,2),_=xt(m,2);pr("click",v,()=>i.editing.set(null)),pr("click",m,a),pr("click",_,u),pr("contextmenu",h,o),nt(c,h)},$$slots:{default:!0}}),Rr()}var Dee=ir("<!> <!>",1),Fee=ir('<section role="presentation" class="svelvet-wrapper svelte-13nq7cv"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></section>');function Bee(e,t){Cr(t,!1);const[r,n]=ni(),i=()=>Ye(L,"$groups",r),s=()=>Ye(rt,"$dimensionsStore",r),o=()=>Ye(Ae,"$nodeBounds",r),a=()=>Ye(We,"$graphDOMElement",r),u=()=>Ye(hs,"$initialClickPosition",r),c=()=>Ye(H,"$selected",r),f=()=>Ye(X,"$activeGroup",r),h=()=>Ye(ea,"$connectingFrom",r),v=()=>Ye(jS,"$touchDistance",r),y=()=>Ye(Re,"$scale",r),m=()=>Ye(Ve,"$translation",r),_=()=>Ye(ue,"$editing",r),w=qe();let S=ve(t,"graph",8),E=ve(t,"width",8),A=ve(t,"height",8),T=ve(t,"minimap",12,!1),I=ve(t,"controls",12,!1),q=ve(t,"toggle",8,!1),p=ve(t,"fixedZoom",8,!1),C=ve(t,"pannable",8,!0),O=ve(t,"disableSelection",8,!1),N=ve(t,"ZOOM_INCREMENT",8,.1),V=ve(t,"PAN_INCREMENT",8,50),W=ve(t,"PAN_TIME",8,250),G=ve(t,"MAX_SCALE",8,3),ee=ve(t,"MIN_SCALE",8,.2),ae=ve(t,"selectionColor",8),K=ve(t,"backgroundExists",8),U=ve(t,"fitView",8,!1),j=ve(t,"trackpadPan",8),J=ve(t,"modifier",8),de=ve(t,"theme",12,"light"),ce=ve(t,"title",8),Te=ve(t,"drawer",12,!1),Se=ve(t,"contrast",8,!1);console.log("Initial Graph drawer prop:",Te());let re;const oe=_l(),ne={},te=Ke(!1),le=Ke(0),We=Ke(null),Ne=S().cursor,Re=S().transforms.scale,rt=S().dimensions,Ve=S().transforms.translation,L=S().groups,B=S().groupBoxes,H=i().selected.nodes,X=S().activeGroup,xe=S().initialNodePositions,ue=S().editing,Ae=S().bounds.nodeBounds;let Ce=0,Be=1,Le=qe({x:0,y:0,top:0,left:0}),Ie=qe(!1),be=qe(!1),je=qe(!1),ct=qe(!1),mt=!1,ft=qe(!1),it,Ht=qe(null),yr=qe(null),Qt=qe(null),cr=qe(null),Lr=qe(null);const Br={id:null,position:S().cursor,offset:Ke({x:0,y:0}),connected:Ke(new Set),dynamic:Ke(!1),edge:null,edgeColor:Ke(null),direction:Ke("self"),inputKey:null,type:"output",moving:Pp(!1),store:null,mounted:Ke(!0),rotation:Pp(0),node:{zIndex:Ke(1/0),rotating:Ke(!1),position:S().cursor,dimensions:{width:Ke(0),height:Ke(0)}}};Qr("graphDOMElement",We),Qr("cursorAnchor",Br),Qr("duplicate",te),Qr("graph",S()),Qr("transforms",S().transforms),Qr("dimensions",S().dimensions),Qr("locked",S().locked),Qr("groups",S().groups),Qr("bounds",S().bounds),Qr("edgeStore",S().edges),Qr("nodeStore",S().nodes),Qr("mounted",le),Ti(()=>{console.log("Graph component mounted with drawer1:",Te()),Gn()});async function bn(){await EJ(),io.set(!0);const{x:Ze,y:gt,scale:ht}=XQ(it,o());Ze!==null&&gt!==null&&ht!==null&&(S().transforms.scale.set(ht),Ve.set({x:Ze,y:gt})),io.set(!1),we(ft,!0)}async function tr(){we(yr,(await Pf(async()=>{const{default:Ze}=await Promise.resolve().then(()=>ste);return{default:Ze}},void 0,import.meta.url)).default)}async function Ir(){we(Ht,(await Pf(async()=>{const{default:Ze}=await Promise.resolve().then(()=>lte);return{default:Ze}},void 0,import.meta.url)).default)}async function vn(){we(Qt,(await Pf(async()=>{const{default:Ze}=await import("./Controls-DA98E-dK.js");return{default:Ze}},__vite__mapDeps([0,1]),import.meta.url)).default)}async function mn(){we(cr,(await Pf(async()=>{const{default:Ze}=await import("./DrawerController-Dk8vExvo.js");return{default:Ze}},__vite__mapDeps([2,1,3]),import.meta.url)).default)}async function pn(){we(Lr,(await Pf(async()=>{const{default:Ze}=await import("./ContrastTheme-mTWViECW.js");return{default:Ze}},[],import.meta.url)).default)}function Gn(){if(!a())return;const Ze=a().getBoundingClientRect();it={top:Ze.top,left:Ze.left,bottom:Ze.bottom,right:Ze.right,width:Ze.width,height:Ze.height},S().dimensions.set(it),U()==="resize"&&bn()}function ei(Ze){var ht,dt;if(R(be)){const rr=`${gQ()}/${S().id}`,Hr=lt(Ne),cn=Hr.x-u().x,Gr=Hr.y-u().y,yn=Math.min(u().y,u().y+Gr),Bn=Math.min(u().x,u().x+cn),gi={width:Ke(Math.abs(cn)),height:Ke(Math.abs(Gr))},zo=Ke({x:Bn,y:yn}),xs={group:Ke(rr),dimensions:gi,position:zo,color:Ke(uQ()),moving:Ke(!1)};B.add(xs,rr),Array.from(c()).forEach(Hn=>{Hn.group.set(rr)}),L.update(Hn=>{const _a={parent:Ke(xs),nodes:Ke(new Set([...c(),xs]))};return Hn[rr]=_a,Hn}),Ot(H,new Set),we(be,!1),we(Ie,!1)}f()&&Array.from(lt(i()[f()].nodes)).forEach(rr=>{const Hr=hp(lt(rr.position).x,lt(rr.position).y);rr.position.set(Hr),rr.moving.set(!1)});const gt=S().edges.get("cursor");gt&&(S().edges.delete("cursor"),gt.disconnect||oe("edgeDrop",{cursor:lt(Ne),source:{node:(ht=h())==null?void 0:ht.anchor.node.id.slice(2),anchor:(dt=h())==null?void 0:dt.anchor.id.split("/")[0].slice(2)}})),Ot(X,null),Ot(hs,{x:0,y:0}),Ot(xe,[]),we(Ie,!1),we(ct,!1),Ot(io,!1),Ze.shiftKey||ea.set(null),Wc(Le,R(Le).y=0),Wc(Le,R(Le).x=0)}function Bt(Ze){if(!C()&&!(Ze.shiftKey||Ze.metaKey)||Ze.button===2)return;a()&&a().focus();const{clientX:gt,clientY:ht}=Ze;if(Ot(hs,lt(Ne)),Ze.shiftKey||Ze.metaKey){Ze.preventDefault(),we(Ie,!0);const{top:dt,left:Ct}=R(w);Wc(Le,R(Le).y=ht-dt),Wc(Le,R(Le).x=gt-Ct),Wc(Le,R(Le).top=dt),Wc(Le,R(Le).left=Ct),Ze.shiftKey&&Ze.metaKey?we(be,!0):we(be,!1),Ze.metaKey&&!Ze.shiftKey?we(je,!0):we(je,!1)}else we(ct,!0),Ot(H,new Set),Ot(H,c())}function Ft(Ze){Ot(H,new Set),Ot(H,c()),Ot(hs,lt(Ne)),we(ct,!0),Ze.touches.length===2&&(Fn(),Ce=v(),Be=y())}function zr(){we(ct,!1),mt=!1}function Fn(){mt||(mt=!0,re=requestAnimationFrame(wn))}function wn(){if(!mt){cancelAnimationFrame(re);return}const gt=v()/Ce;Ot(Re,Be*gt),re=requestAnimationFrame(wn)}function jr(Ze){const{key:gt,code:ht}=Ze,dt=Ze.target;if(!(dt.tagName=="INPUT"||dt.tagName=="TEXTAREA")){if(ht==="KeyA"&&Ze[`${J()}Key`]){const Ct=S().nodes.getAll().filter(rr=>!lt(rr.locked));Ot(H,new Set(Ct))}else if(PC(gt))di(gt,Ze);else if(gt==="=")TC(-1,S().dimensions,S().transforms,N());else if(gt==="-")TC(1,S().dimensions,S().transforms,N());else if(gt==="0")bn();else if(gt==="Control")i().selected.nodes.set(new Set);else if(ht==="KeyD"&&Ze[`${J()}Key`])te.set(!0),setTimeout(()=>{te.set(!1)},100);else if(gt==="Tab"&&(Ze.altKey||Ze.ctrlKey))hi();else if(gt==="l")de(de()==="light"?"dark":"light");else if(gt==="d")Te(!Te());else if(gt==="m")T(!T());else if(gt==="c")I(!I());else if(gt==="e"){const Ct=Array.from(c())[0];S().editing.set(Ct)}else return;Ze.preventDefault()}}function $n(Ze){var Gr;Ze.preventDefault();const gt=(Gr=a())==null?void 0:Gr.getBoundingClientRect();if(!gt)return;const ht=Ze.clientX-gt.left,dt=Ze.clientY-gt.top,{x:Ct,y:rr}=hp(ht,dt);if(console.log(`Dropped Node at Snapped Position: (${Ct}, ${rr})`),!cn)return;const Hr={id:`node-${Date.now()}`,rotation:Ke(0),position:Ke({x:Ct,y:rr}),moving:Ke(!1),label:Ke("New Node"),dimensions:{width:Ke(200),height:Ke(100)},inputs:Ke(2),outputs:Ke(2),anchors:Ke([]),group:Ke(null),collapsed:Ke(!1),resizingWidth:Ke(!1),resizingHeight:Ke(!1),rotating:Ke(!1),editable:Ke(!0),locked:Ke(!1),recalculateAnchors:yn=>{},resizable:Ke(!0),zIndex:Ke(1),edge:null,direction:Ke("TD"),borderRadius:Ke(5),borderWidth:Ke(1),connections:Ke([]),bgColor:Ke("#007bff"),borderColor:Ke("#000"),selectionColor:Ke("#ff0000"),textColor:Ke("#fff")};let cn=null;S().nodes.add(Hr,Hr.id),cn=null}function hi(){const Ze=S().nodes.getAll(),gt=Ze.findIndex(dt=>c().has(dt)),ht=gt+1;c().delete(Ze[gt]),c().add(Ze[ht])}function Jr(Ze){const{key:gt}=Ze;PC(gt)?(clearInterval(ne[gt]),delete ne[gt]):gt==="Shift"&&ea.set(null)}function Un(Ze){if(p())return;const gt=Ze.shiftKey?.15:1,{clientX:ht,clientY:dt,deltaY:Ct}=Ze,rr=m(),Hr={x:ht,y:dt};if((j()||Ze.metaKey)&&Ct%1===0){Ot(Ve,{x:jf(Ve,Pn(m).x-=Ze.deltaX,Pn(m)),y:jf(Ve,Pn(m).y-=Ze.deltaY,Pn(m))});return}if(y()>=G()&&Ct<0||y()<=ee()&&Ct>0)return;const cn=Math.min(.009*gt*Math.abs(Ct),.08),Gr=rV(y(),Math.sign(Ct),cn),yn=tV(y(),Gr,rr,Hr,it);Re.set(Gr),Ve.set(yn)}function On(Ze){Ze.preventDefault()}function di(Ze,gt){const ht=gt.shiftKey?2:1,dt=Ze==="ArrowLeft"||Ze==="ArrowUp"?1:-1,Ct=Ze==="ArrowLeft"||Ze==="ArrowRight",rr=Ct?m().x:m().y,Hr=rr+dt*V()*ht;if(!ne[Ze]){const cn=performance.now();let Gr=setInterval(()=>{const yn=performance.now()-cn;if(c().size===0){const Bn=rr+(Hr-rr)*(yn/W());Ve.set({x:Ct?Bn:m().x,y:Ct?m().y:Bn})}else{const Bn={x:Ct?-dt*2:0,y:Ct?0:-dt*2};Array.from(c()).forEach(gi=>{const zo=lt(gi.position);let xs;const Hn=lt(gi.group),_a=lt(S().groupBoxes);if(Hn&&(xs=_a.get(Hn)),xs){const es=lt(gi.dimensions.width),ba=lt(gi.dimensions.height),Vo=oV(xs,es,ba);sV(zo,Bn,gi.position,Vo)}else{const es={x:zo.x+Bn.x,y:zo.y+Bn.y},ba=hp(es.x,es.y);gi.position.set(ba)}})}},2);ne[Ze]=Gr}}Fe(()=>s(),()=>{we(w,s())}),Fe(()=>Vt(de()),()=>{de()&&document.documentElement.setAttribute("svelvet-theme",de())}),Fe(()=>(R(ft),Vt(U())),()=>{!R(ft)&&U()&&bn()}),Fe(()=>(Vt(q()),R(Ht)),()=>{q()&&!R(Ht)&&Ir()}),Fe(()=>(Vt(T()),R(yr)),()=>{T()&&!R(yr)&&tr()}),Fe(()=>(Vt(I()),R(Qt)),()=>{I()&&!R(Qt)&&vn()}),Fe(()=>(Vt(Te()),R(cr)),()=>{Te()&&!R(cr)&&mn()}),Fe(()=>(Vt(Se()),R(Lr)),()=>{Se()&&!R(Lr)&&pn()}),Fe(()=>Vt(Te()),()=>{console.log("Reactive Graph drawer prop:",Te())}),Ji(),qn();var Xe=Fee();pr("touchend",rl,ei),pr("mouseup",rl,ei),pr("resize",rl,Gn),pr("scroll",rl,Gn),pt(Xe,"tabindex",0);let Et;var Rt=jt(Xe);oee(Rt,{get isMovable(){return R(ct)},children:(Ze,gt)=>{var ht=Dee(),dt=Gt(ht);{var Ct=Hr=>{qee(Hr,{get editing(){return _()}})};lr(dt,Hr=>{_()&&Hr(Ct)})}var rr=xt(dt,2);Xr(rr,t,"default",{},null),nt(Ze,ht)},$$slots:{default:!0}});var kt=xt(Rt,2);{var Lt=Ze=>{var gt=gr(),ht=Gt(gt);Xr(ht,t,"background",{},null),nt(Ze,gt)},at=Ze=>{FQ(Ze,{})};lr(kt,Ze=>{K()?Ze(Lt):Ze(at,!1)})}var He=xt(kt,2);{var yt=Ze=>{var gt=gr(),ht=Gt(gt);Yu(ht,()=>R(yr),(dt,Ct)=>{Ct(dt,{})}),nt(Ze,gt)};lr(He,Ze=>{T()&&Ze(yt)})}var Tt=xt(He,2);{var zt=Ze=>{var gt=gr(),ht=Gt(gt);Yu(ht,()=>R(Qt),(dt,Ct)=>{Ct(dt,{})}),nt(Ze,gt)};lr(Tt,Ze=>{I()&&Ze(zt)})}var an=xt(Tt,2);{var jn=Ze=>{var gt=gr(),ht=Gt(gt);Yu(ht,()=>R(Ht),(dt,Ct)=>{Ct(dt,{})}),nt(Ze,gt)};lr(an,Ze=>{q()&&Ze(jn)})}var Mt=xt(an,2);{var en=Ze=>{var gt=gr(),ht=Gt(gt);Yu(ht,()=>R(cr),(dt,Ct)=>{Ct(dt,{})}),nt(Ze,gt)};lr(Mt,Ze=>{Te()&&Ze(en)})}var xr=xt(Mt,2);{var Nr=Ze=>{var gt=gr(),ht=Gt(gt);Yu(ht,()=>R(Lr),(dt,Ct)=>{Ct(dt,{})}),nt(Ze,gt)};lr(xr,Ze=>{Se()&&Ze(Nr)})}var Vr=xt(xr,2);Xr(Vr,t,"minimap",{},null);var Sr=xt(Vr,2);Xr(Sr,t,"drawer",{},null);var xn=xt(Sr,2);Xr(xn,t,"controls",{},null);var Xt=xt(xn,2);Xr(Xt,t,"toggle",{},null);var pi=xt(Xt,2);Xr(pi,t,"contrast",{},null);var wi=xt(pi,2);{var qi=Ze=>{_Q(Ze,{get creating(){return R(be)},get anchor(){return R(Le)},get graph(){return S()},get adding(){return R(je)},get color(){return ae()}})};lr(wi,Ze=>{R(Ie)&&!O()&&Ze(qi)})}wu(Xe,Ze=>Ot(We,Ze),()=>a()),Wt(()=>{pt(Xe,"id",S().id),pt(Xe,"title",ce()),Et=kr(Xe,"",Et,{width:E()?E()+"px":"100%",height:A()?A()+"px":"100%",cursor:C()?"move":"default"})}),pr("wheel",Xe,ks(Un)),pr("mousedown",Xe,$f(ks(Bt))),pr("touchend",Xe,ks(zr)),pr("touchstart",Xe,$f(ks(Ft))),pr("keydown",Xe,jr),pr("keyup",Xe,Jr),pr("dragover",Xe,ks(On)),pr("drop",Xe,$n),nt(e,Xe),Rr(),n()}function zee(e){e.parentNodes.forEach(s=>Vee(s));const[t,r]=Gee(e);$ee(t,e),Uee(t);for(let s=0;s<10;s++){let o=!1;for(let a=0;a<=r;a++)if(t[a])for(let u=0;u<t[a].length;u++){const c=t[a][u],f=Hee(t,c,u);f&&(ec(t[a],u,f),o=!0)}if(!o)break}const n=Wee(t);for(let s=0;s<10&&Xee(t,n);s++);for(let s=0;s<2;s++){let o=!1;for(let a=0;a<=r;a++)for(let u=0;u<t[a].length;u++){const c=t[a][u],f=jee(t,c,u);f&&(ec(t[a],u,f),o=!0)}if(!o)break}const i=[];for(let s=0;s<=r;s++)i.push(t[s]);return i}function Vee(e,t=0,r=0){const n=[],i=(s,o=0,a=0)=>{s.depth=Math.max(s.depth,o),s.nesting=Math.max(s.nesting,a),n.push(s);for(const u of s.children){const{node:c,length:f}=u;i(c,f+o,a+1)}};i(e,t,r);for(const s of n)if(s.children.length){s.nesting=s.children[0].node.nesting-1,s.depth=s.children[0].node.depth-s.children[0].length;for(const o of s.children)s.nesting=Math.min(s.nesting,o.node.nesting-1),s.depth=Math.min(s.depth,o.node.depth-o.length)}}function Gee(e){let t=0;const r={};for(const n in e.nodeList){const{depth:i,parents:s,children:o,type:a,data:u}=e.nodeList[n];t=Math.max(t,i),r[i]||(r[i]=[]);const c={id:n,label:u.content,children:[],parents:[],layer:i,type:a.trim()};u.props&&(c.propsId=u.props.trim());for(const f of s)c.parents.push(f.node.id);for(const f of o)c.children.push(f.node.id);r[i].push(c)}return[r,t]}function $ee(e,t){for(const r in t.nodeList)for(const n of t.nodeList[r].children)if(n.node.depth-1>t.nodeList[r].depth){const i=t.nodeList[r].depth+1,s=n.node.depth-1,o=[];let a=0;for(let u=i;u<=s;u++){const c={id:`GHOST_${n.node.id}_${a}`,label:"",children:[],parents:[],layer:u,ignore:!0};o.push(c),a++}for(const u of n.node.parents)o[0].parents.push(u.node.id);o[o.length-1].children.push(n.node.id);for(let u=0;u<o.length-1;u++)o[u].children.push(`GHOST_${n.node.id}_${u+1}`);for(let u=s;u>=i;u--)o.length>0&&e[u].push(o[0]);for(const u of e[t.nodeList[r].depth])u.id===r&&(u.children.push(o[0].id),u.children=u.children.filter(c=>c!==n.node.id))}}function Uee(e){let t=0;for(const r in e)t=Math.max(e[r].length,t);for(const r in e)if(e[r].length<t){const n=Array.from({length:t-e[r].length},()=>({id:"NULL_NODE",children:[],parents:[],layer:parseInt(r),ignore:!0}));e[r]=e[r].concat(n)}}function RC(e,t,r){let n=0,i=0;for(const s of t.parents){for(let o=0;o<e[t.layer-1].length;o++)if(s===e[t.layer-1][o].id){n+=Math.abs(r-o);break}i++}for(const s of t.children){for(let o=0;o<e[t.layer+1].length;o++)if(s===e[t.layer+1][o].id){n+=Math.abs(r-o);break}i++}return isNaN(n/i)?0:n/i}function IC(e,t,r){let n=0,i=0;for(const s of t.parents){for(let o=0;o<e[t.layer-1].length;o++)if(s===e[t.layer-1][o].id){n+=Math.abs(r-o);break}i++}return isNaN(n/i)?0:n/i}function OC(e,t,r){let n=0,i=0;for(const s of t.children){for(let o=0;o<e[t.layer+1].length;o++)if(s===e[t.layer+1][o].id){n+=Math.abs(r-o);break}i++}return isNaN(n/i)?0:n/i}function jee(e,t,r){const n=XS(e,t.layer);let i=0;t.layer===0?i=OC(e,t,r):i=IC(e,t,r);let s=i,o=r;for(let a=0;a<e[t.layer].length;a++)if(e[t.layer][a].id==="NULL_NODE"){ec(e[t.layer],r,a);const c=XS(e,t.layer);let f=0;t.layer===0?f=OC(e,t,a):f=IC(e,t,a),c<=n&&f<s&&(s=f,o=a),ec(e[t.layer],a,r)}return o===r?null:o}function Hee(e,t,r){const n={};let i=1/0,s=0;for(let o=0;o<e[t.layer].length;o++){const a=RC(e,t,o),u=RC(e,e[t.layer][o],r);n[o]=a+u}for(const o in n)n[o]<i&&(i=n[o],s=parseInt(o));return s===r?null:s}function ec(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Wee(e){const t=[];for(const r in e)for(const n of e[r])t.push(n);return t.sort((r,n)=>n.parents.length+n.children.length-(r.parents.length+r.children.length))}function XS(e,t){let r=0;for(let n=0;n<e[t].length;n++){const i=e[t][n],s=[],o=[];if(e[t-1])for(let a=n+1;a<e[t-1].length;a++)i.parents.includes(e[t-1][a].id)&&s.push(a);if(e[t+1])for(let a=n+1;a<e[t+1].length;a++)i.children.includes(e[t+1][a].id)&&o.push(a);for(let a=n+1;a<e[t].length;a++){const u=e[t][a];if(s.length)for(let c=0;c<e[t-1].length;c++)u.parents.includes(e[t-1][c].id)&&s.forEach(f=>{c<f&&r++});if(o.length)for(let c=0;c<e[t+1].length;c++)u.children.includes(e[t+1][c].id)&&o.forEach(f=>{c<f&&r++})}}return r}function Xee(e,t){let r=!1;for(const n of t){if(n.children.length+n.parents.length===0)return r;let i=0;for(let a=0;a<e[n.layer].length;a++)if(e[n.layer][a].id===n.id){i=a;break}let s=1/0,o=i;for(let a=0;a<e[n.layer].length;a++){ec(e[n.layer],i,a);const u=XS(e,n.layer);u<s&&(s=u,o=a),ec(e[n.layer],a,i)}o!==i&&(ec(e[n.layer],i,o),r=!0)}return r}function Yee(e,t){Cr(t,!1);let r=ve(t,"mermaid",8,""),n=ve(t,"mermaidConfig",24,()=>({}));const i=fQ(r());Qr("flowchart",i);const s=zee(i),o=Mr("graph"),a=100,u=100;let c;Ti(()=>{o.nodes.subscribe(y=>c=Object.fromEntries(y));let v=0;for(const y of s){let m=0,_=-1/0;for(const w of y)w.ignore||(c[`N-${w.id}`].position.update(()=>({x:m,y:v})),c[`N-${w.id}`].dimensions.width.subscribe(S=>m+=S),c[`N-${w.id}`].dimensions.height.subscribe(S=>_=Math.max(_,S))),m+=a;v+=_+u}}),qn();var f=gr(),h=Gt(f);ds(h,1,()=>s,gu,(v,y)=>{var m=gr(),_=Gt(m);ds(_,1,()=>R(y),gu,(w,S)=>{var E=gr(),A=Gt(E);{var T=I=>{const q=hn(()=>R(S).children.map(p=>[p,"1"]));zE(I,ig({get label(){return R(S).label},get id(){return R(S).id},TD:!0},()=>n()[R(S).id],{get connections(){return R(q)}}))};lr(A,I=>{R(S).ignore||I(T)})}nt(w,E)}),nt(v,m)}),nt(e,f),Rr()}function Kee(e){var n,i;const t=JSON.parse(e);return nV(t.id,{...t,editable:t.editable,direction:t.direction,locked:t.locked,zoom:((n=t.transforms)==null?void 0:n.scale)??1,translation:((i=t.transforms)==null?void 0:i.translation)??{x:0,y:0},edge:t.edge})}var Zee=ir("<!> <!>",1),Jee=ir('<div class="svelvet-temp svelte-lsy29y"></div>');function Qee(e,t){const r=NE(t);Cr(t,!1);const n=qe(),i=qe();let s=ve(t,"mermaid",8,""),o=ve(t,"theme",8,"light"),a=ve(t,"id",8,0),u=ve(t,"snapTo",8,0),c=ve(t,"zoom",8,1),f=ve(t,"TD",8,!1),h=ve(t,"editable",8,!0),v=ve(t,"locked",8,!1),y=ve(t,"width",8,0),m=ve(t,"height",8,0),_=ve(t,"minimap",8,!1),w=ve(t,"controls",8,!1),S=ve(t,"toggle",8,!1),E=ve(t,"drawer",8,!1),A=ve(t,"contrast",8,!1),T=ve(t,"fitView",8,!1),I=ve(t,"selectionColor",8,"lightblue"),q=ve(t,"edgeStyle",8,"bezier"),p=ve(t,"endStyles",24,()=>[null,null]),C=ve(t,"edge",8,null),O=ve(t,"disableSelection",8,!1),N=ve(t,"mermaidConfig",24,()=>({})),V=ve(t,"translation",24,()=>({x:0,y:0})),W=ve(t,"trackpadPan",8,!1),G=ve(t,"modifier",8,"meta"),ee=ve(t,"raiseEdgesOnSelect",8,!1),ae=ve(t,"edgesAboveNode",8,!1),K=ve(t,"title",8,""),U=ve(t,"fixedZoom",8,!1),j=ve(t,"pannable",8,!0);const J=_l();let de=qe(null),ce=f()?"TD":"LR";Qr("snapTo",u()),Qr("edgeStyle",q()),Qr("endStyles",p()),Qr("graphEdge",C()),Qr("raiseEdgesOnSelect",ee()),Qr("edgesAboveNode",ae()),Qr("graph",R(de)),Ti(()=>{console.log("Graph component mounted with drawer:",E());const te=localStorage.getItem("state");if(console.log("stateObject during onMount:",te),te)we(de,Kee(te)),console.log("This is the graph set using reloadStore",R(de)),Hf.add(R(de),R(de).id),console.log("graphStore updated",R(de));else{let le=`G-${a()||Hf.count()+1}`;we(de,nV(le,{zoom:c(),direction:ce,editable:h(),locked:v(),translation:V()})),Hf.add(R(de),le)}});function Te(te,le){if(!R(de))return;const We=`N-${te[0]}`,Ne=R(de).nodes.get(We);if(!Ne)return;const Re=Ne.anchors.get(`A-${te[1]}/N-${te[0]}`);if(!Re)return;const rt=`N-${le[0]}`,Ve=R(de).nodes.get(rt);if(!Ve)return;const L=Ve.anchors.get(`A-${le[1]}/N-${le[0]}`);if(!L)return;const B=R(de).edges.match(Re,L);B&&R(de).edges.delete(B[0])}Fe(()=>{},()=>{we(n,r.background)}),Fe(()=>R(de),()=>{we(i,R(de)&&R(de).edges)}),Fe(()=>(R(de),Vt(c())),()=>{R(de)&&R(de).transforms.scale.set(c())}),Fe(()=>R(i),()=>{R(i)&&R(i).onEdgeChange((te,le)=>{J(le,{sourceAnchor:te.source,targetAnchor:te.target,sourceNode:te.source.node,targetNode:te.target.node})})}),Ji(),qn();var Se=gr(),re=Gt(Se);{var oe=te=>{Bee(te,{get width(){return y()},get height(){return m()},get toggle(){return S()},get backgroundExists(){return R(n)},get minimap(){return _()},get graph(){return R(de)},get fitView(){return T()},get fixedZoom(){return U()},get pannable(){return j()},get theme(){return o()},get drawer(){return E()},get controls(){return w()},get selectionColor(){return I()},get disableSelection(){return O()},get trackpadPan(){return W()},get modifier(){return G()},get title(){return K()},get contrast(){return A()},$$events:{edgeDrop(le){Tn.call(this,t,le)}},children:(le,We)=>{var Ne=Zee(),Re=Gt(Ne);{var rt=L=>{Yee(L,{get mermaid(){return s()},get mermaidConfig(){return N()}})};lr(Re,L=>{s().length&&L(rt)})}var Ve=xt(Re,2);Xr(Ve,t,"default",{},null),nt(le,Ne)},$$slots:{default:!0,minimap:(le,We)=>{var Ne=gr(),Re=Gt(Ne);Xr(Re,t,"minimap",{},null),nt(le,Ne)},controls:(le,We)=>{var Ne=gr(),Re=Gt(Ne);Xr(Re,t,"controls",{},null),nt(le,Ne)},background:(le,We)=>{var Ne=gr(),Re=Gt(Ne);Xr(Re,t,"background",{},null),nt(le,Ne)},toggle:(le,We)=>{var Ne=gr(),Re=Gt(Ne);Xr(Re,t,"toggle",{},null),nt(le,Ne)},drawer:(le,We)=>{var Ne=gr(),Re=Gt(Ne);Xr(Re,t,"drawer",{},null),nt(le,Ne)},contrast:(le,We)=>{var Ne=gr(),Re=Gt(Ne);Xr(Re,t,"contrast",{},null),nt(le,Ne)}}})},ne=te=>{var le=Jee();let We;Wt(()=>We=kr(le,"",We,{width:y()?y()+"px":"100%",height:m()?m()+"px":"100%"})),nt(te,le)};lr(re,te=>{R(de)?te(oe):te(ne,!1)})}return nt(e,Se),DE(t,"disconnect",Te),Rr({disconnect:Te})}var ete=ir("<button></button>");function tte(e,t){Cr(t,!1);const[r,n]=ni(),i=()=>Ye(q,"$position",r),s=()=>Ye(N,"$rotation",r),o=()=>Ye(R(y),"$zIndex",r),a=()=>Ye(O,"$borderRadius",r),u=()=>Ye(C,"$bgColor",r),c=()=>Ye(V,"$width",r),f=()=>Ye(W,"$height",r),h=qe(),v=qe(),y=qe(),m=qe();let _=ve(t,"node",8),w=ve(t,"hidden",8,!1),S=ve(t,"toggleHidden",8),E=ve(t,"top",8),A=ve(t,"left",8),T=ve(t,"nodeColor",8,null),I=ve(t,"hideable",8);const{position:q,dimensions:p,bgColor:C,borderRadius:O,rotation:N}=_(),{width:V,height:W}=p;let G=qe(null);Ti(()=>{var U;try{const j=(U=document.querySelector(`#${_().id}`))==null?void 0:U.firstChild;j&&we(G,window.getComputedStyle(j).backgroundColor)}catch(j){console.error(j)}}),Fe(()=>i(),()=>{we(h,i())}),Fe(()=>s(),()=>{we(v,s())}),Fe(()=>Vt(_()),()=>{qa(we(y,_().zIndex),"$zIndex",r)}),Fe(()=>R(G),()=>{we(m,R(G)==="rgba(0, 0, 0, 0)")}),Ji(),qn();var ee=ete();let ae,K;Wt(U=>{ae=Cn(ee,1,"minimap-node svelte-1hs9omb",null,ae,U),K=kr(ee,"",K,{"z-index":o(),"border-radius":`${a()??""}px`,"--prop-background-color":T()||u()||!R(m)&&R(G)||null,width:`${c()??""}px`,height:`${f()??""}px`,transform:`rotate(${R(v)??""}deg)`,top:`${R(h).y-E()}px`,left:`${R(h).x-A()}px`})},[()=>({hidden:w(),hideable:I()})],hn),pr("click",ee,()=>{I()&&S()(_())}),nt(e,ee),Rr(),n()}var rte=ir('<div class="mini-bounding-box svelte-aoq4g"></div>');function nte(e,t){Cr(t,!1);const[r,n]=ni(),i=()=>Ye(c(),"$position",r),s=()=>Ye(m,"$width",r),o=()=>Ye(_,"$height",r),a=()=>Ye(f(),"$color",r);let u=ve(t,"dimensions",8),c=ve(t,"position",8),f=ve(t,"color",8),h=ve(t,"groupName",8),v=ve(t,"top",8),y=ve(t,"left",8);const{width:m,height:_}=u();qn();var w=rte();let S;Wt(()=>{pt(w,"id",`mini-${h()}-bounding-box`),S=kr(w,`border: solid 4px ${a()??""};`,S,{top:`${i().y-v()}px`,left:`${i().x-y()}px`,width:`${s()}px`,height:`${o()}px`,"background-color":a()})}),nt(e,w),Rr(),n()}var ite=ir('<div><div class="node-wrapper svelte-1qxvbux"><!> <!></div> <div class="overlay svelte-1qxvbux"></div></div>');function aV(e,t){Cr(t,!1);const[r,n]=ni(),i=()=>Ye(Ne,"$graphBounds",r),s=()=>Ye(rt,"$groups",r),o=()=>Ye(L,"$dimensions",r),a=()=>Ye(H,"$scale",r),u=()=>Ye(X,"$translation",r),c=()=>Ye(B,"$hidden",r),f=()=>Ye(Re,"$nodes",r),h=()=>Ye(xe,"$groupBoxes",r),v=qe(),y=qe(),m=qe(),_=qe(),w=qe(),S=qe(),E=qe(),A=qe(),T=qe(),I=qe(),q=qe(),p=qe(),C=qe(),O=qe(),N=qe(),V=qe(),W=qe(),G=qe(),ee=qe(),ae=qe(),K=qe(),U=qe(),j=qe();let J=Mr("graph"),de=ve(t,"width",8,100),ce=ve(t,"height",24,de),Te=ve(t,"mapColor",8,null),Se=ve(t,"nodeColor",8,null),re=ve(t,"borderColor",8,null),oe=ve(t,"corner",8,"SE"),ne=ve(t,"hideable",8,!1);const te=.9,le=de()*te,We=ce()*te,Ne=J.bounds.graphBounds,Re=J.nodes,rt=J.groups,Ve=J.transforms,L=J.dimensions,B=s().hidden.nodes,H=Ve.scale,X=Ve.translation,xe=J.groupBoxes,ue={clientX:0,clientY:0};function Ae(ft){c().has(ft)?c().delete(ft):c().add(ft),Ot(B,c())}Fe(()=>i(),()=>{we(v,i())}),Fe(()=>R(v),()=>{we(y,R(v).top)}),Fe(()=>R(v),()=>{we(m,R(v).left)}),Fe(()=>R(v),()=>{we(_,R(v).right)}),Fe(()=>R(v),()=>{we(w,R(v).bottom)}),Fe(()=>o(),()=>{we(S,o().width)}),Fe(()=>o(),()=>{we(E,o().height)}),Fe(()=>(R(_),R(m)),()=>{we(A,R(_)-R(m))}),Fe(()=>(R(w),R(y)),()=>{we(T,R(w)-R(y))}),Fe(()=>(R(A),R(T)),()=>{we(I,R(A)/R(T))}),Fe(()=>(Vt(de()),Vt(ce())),()=>{we(q,de()/ce())}),Fe(()=>(R(S),R(E),a(),u()),()=>{we(p,xh(ue,0,0,R(S),R(E),a(),u()))}),Fe(()=>(R(S),R(A),a()),()=>{we(C,R(S)/R(A)/a())}),Fe(()=>(R(E),R(T),a()),()=>{we(O,R(E)/R(T)/a())}),Fe(()=>(R(p),R(y),R(T)),()=>{we(N,(R(p).y-R(y))/R(T))}),Fe(()=>(R(p),R(m),R(A)),()=>{we(V,(R(p).x-R(m))/R(A))}),Fe(()=>(R(I),R(q)),()=>{we(G,R(I)>=R(q))}),Fe(()=>(R(G),R(A),R(T)),()=>{we(ee,R(G)?le/R(A):We/R(T))}),Fe(()=>(R(T),R(ee)),()=>{we(j,R(T)*R(ee))}),Fe(()=>(Vt(ce()),R(j)),()=>{we(K,(ce()-R(j))/2)}),Fe(()=>(R(A),R(ee)),()=>{we(U,R(A)*R(ee))}),Fe(()=>(Vt(de()),R(U)),()=>{we(ae,(de()-R(U))/2)}),Fe(()=>(R(K),R(N),R(j),R(ae),R(V),R(U),R(C),R(O)),()=>{we(W,`
		top: ${R(K)+R(N)*R(j)}px;
		left: ${R(ae)+R(V)*R(U)}px;
		width: ${R(C)*R(U)}px;
		height: ${R(O)*R(j)}px;`)}),Ji(),qn();var Ce=ite();let Be,Le;var Ie=jt(Ce);let be;var je=jt(Ie);ds(je,1,()=>Array.from(f().entries()),([ft,it])=>ft,(ft,it)=>{let Ht=()=>R(it)[1];var yr=gr(),Qt=Gt(yr);{var cr=Lr=>{const Br=hn(()=>c().has(Ht()));tte(Lr,{get node(){return Ht()},get top(){return R(y)},get left(){return R(m)},get nodeColor(){return Se()},get hidden(){return R(Br)},toggleHidden:Ae,get hideable(){return ne()}})};lr(Qt,Lr=>{Ht().id!=="N-editor"&&Lr(cr)})}nt(ft,yr)});var ct=xt(je,2);ds(ct,1,()=>Array.from(h().entries()),([ft,it])=>ft,(ft,it)=>{let Ht=()=>R(it)[0];nte(ft,ig(()=>R(it)[1],{get top(){return R(y)},get left(){return R(m)},get groupName(){return Ht()}}))});var mt=xt(Ie,2);Wt(ft=>{Be=Cn(Ce,1,"minimap-wrapper svelte-1qxvbux",null,Be,ft),Le=kr(Ce,"",Le,{width:`${de()??""}px`,height:`${(ce()?ce():de())??""}px`,"--prop-minimap-border-color":re(),"--prop-minimap-background-color":Te()}),be=kr(Ie,"",be,{width:`${R(A)??""}px`,height:`${R(T)??""}px`,transform:`scale(${R(ee)??""})`}),kr(mt,R(W))},[()=>({SW:oe()==="SW",NE:oe()==="NE",SE:oe()==="SE",NW:oe()==="NW"})],hn),nt(e,Ce),Rr(),n()}const ste=Object.freeze(Object.defineProperty({__proto__:null,default:aV},Symbol.toStringTag,{value:"Module"}));function ote(e){return e&&typeof e.subscribe=="function"}function dp(e){const t={};for(const r in e){const n=e[r];if(r==="nodes"&&typeof n=="object"&&typeof n.getAll=="function"){const i=n.getAll();t[r]=i.map(s=>dp(s))}else if(ote(n)){const i=lt(n);t[r]=typeof i=="object"&&i!==null?dp(i):i}else typeof n=="object"&&n!==null?t[r]=dp(n):t[r]=n}return t}function ate(e,t){return t instanceof DOMRectReadOnly?{x:t.x,y:t.y,width:t.width,height:t.height}:t}function ute(e){console.log("graph state object:",e);const t=dp(e),r=JSON.stringify(t,ate);return localStorage.setItem("state",r),r}var cte=ir('<div><button class="svelte-1vnlnjg"><span class="material-symbols-outlined svelte-1vnlnjg"> </span></button> <button class="save-button NW svelte-1vnlnjg">Save</button></div>');function uV(e,t){Cr(t,!1),console.log("Componente ThemeToggle.svelte");let r=ve(t,"main",8,"light"),n=ve(t,"alt",8,"dark"),i=ve(t,"mainIcon",8,"light_mode"),s=ve(t,"altIcon",8,"dark_mode"),o=ve(t,"corner",8,"NE"),a=ve(t,"bgColor",8,null),u=ve(t,"iconColor",8,null),c=qe(r());function f(){const A=document.documentElement.getAttribute("svelvet-theme");let T;!A||A===r()?T=n():T=r(),we(c,T),document.documentElement.setAttribute("svelvet-theme",T),localStorage.setItem("currentTheme",T)}Ti(()=>{const A=localStorage.getItem("currentTheme");A?(document.documentElement.setAttribute("svelvet-theme",A),we(c,A)):(document.documentElement.setAttribute("svelvet-theme",r()),we(c,r()));const T=localStorage.getItem("state");if(T){console.log("Al renderizar la aplicacion este componente se ejecuta en este orden");const I=JSON.parse(T);if(I&&I.nodes){const q=lt(Hf);console.log(q),q.set("G-1",I),console.log("Restaurando nodos:",I.nodes)}}});let h=qe();Hf.subscribe(A=>{we(h,A.get("G-1")),console.log("Graph from store:",R(h))}),qn();var v=cte();let y,m;var _=jt(v),w=jt(_),S=jt(w),E=xt(_,2);Wt(A=>{y=Cn(v,1,"controls-wrapper svelte-1vnlnjg",null,y,A),m=kr(v,"",m,{"--prop-theme-toggle-color":a(),"--prop-theme-toggle-text-color":u()}),Eu(S,R(c)===r()?s():i())},[()=>({SW:o()==="SW",NE:o()==="NE",SE:o()==="SE",NW:o()==="NW"})],hn),pr("mousedown",_,ro(f)),pr("touchstart",_,ro(f)),pr("click",E,()=>{ute(R(h))}),nt(e,v),Rr()}const lte=Object.freeze(Object.defineProperty({__proto__:null,default:uV},Symbol.toStringTag,{value:"Module"}));function fte(e,t){return{type:"Lamp",net:e,inputs:(t==null?void 0:t.inputs)||1,outputs:(t==null?void 0:t.outputs)||0,order:(t==null?void 0:t.order)||0,bits:(t==null?void 0:t.bits)||1,label:(t==null?void 0:t.label)||e,...(t==null?void 0:t.position)&&{position:{x:t.position.x,y:t.position.y}}}}function hte(e,t){return{type:"Button",label:(t==null?void 0:t.label)||e,net:(t==null?void 0:t.net)||e,bits:(t==null?void 0:t.bits)||1,...(t==null?void 0:t.position)&&{position:{x:t.position.x,y:t.position.y}}}}function ou(e,t,r){return{type:e,label:t,inputs:2,...(r==null?void 0:r.position)&&{position:{x:r.position.x,y:r.position.y}}}}const MC={Button:hte,Lamp:fte,And:(e,t)=>ou("And",e,...t?[t]:[]),Nand:(e,t)=>ou("Nand",e,...t?[t]:[]),Or:(e,t)=>ou("Or",e,...t?[t]:[]),Nor:(e,t)=>ou("Nor",e,...t?[t]:[]),Xor:(e,t)=>ou("Xor",e,...t?[t]:[]),Xnor:(e,t)=>ou("Xnor",e,...t?[t]:[]),Not:(e,t)=>ou("Not",e,...t?[t]:[]),Repeater:(e,t)=>ou("Repeater",e,...t?[t]:[])},dte=()=>{const e={devices:{},connectors:{},subcircuits:{}},{subscribe:t,set:r,update:n}=Ke(e);return{subscribe:t,set:r,update:n,reset:()=>n(()=>({devices:{},connectors:{},subcircuits:{}})),addConnection:(i,s)=>{const o=s.substring(s.indexOf("_")+1);n(a=>(i in a.connectors||(a.connectors[i]=new Array),a.connectors[i]=[...a.connectors[i],[o,s]],console.log(a.connectors),a))},removeConnection:i=>{n(s=>{const o={};for(const a in s.connectors)o[a]=[...s.connectors[a].filter(([,u])=>u!==i)];return s.connectors=o,s})},addCircuitDevice:(i,s,o)=>{const a=`${i}_${s}`;let u=null;if(n(c=>{const f=o===void 0?MC[i](a):MC[i](a,o);return c.devices[a]=f,u=c.devices,c}),u===null)throw new Error("devices null after setting devices");return u}}},Ki=dte();function pte(e){const t=JSON.parse(e);return t.nodes.length===0?(console.warn("save json exists but there are no nodes"),null):t.nodes.map(n=>{let[i,s]=n.id.substring(2).split("_");return{nodeType:i,uuid:s,position:n.position}})}function VE(e){return localStorage.getItem(e)||(console.warn(`No saved "${e}" found in localStorage.`),null)}function gte(){const t=VE("state");if(!t)return console.warn("svelvet save unsucessful"),null;const r=pte(t);if(r===null)return null;Ki.update(n=>(r.forEach(({nodeType:i,uuid:s,position:o})=>{const a=`${i}_${s}`;n.devices[a].position=o}),n))}function vte(){VE("circuitStoreSave"),localStorage.setItem("circuitStoreSave",JSON.stringify(lt(Ki)))}function mte(){const e=document.querySelector(".save-button"),t=new MouseEvent("click",{bubbles:!0,cancelable:!0});e==null||e.dispatchEvent(t)}async function nh(){mte(),gte(),vte()}function yte(e){if(!(e!=null&&e.devices)||!(e!=null&&e.connectors)||!(e!=null&&e.subcircuits))throw new Error("Parsed circuit object is missing required properties");Object.keys(e.devices).length===0&&console.log("Loaded in a valid circuit with empty devices")}function cV(e="default"){let t=e==="default"?VE("circuitStoreSave"):e;if(!t)return;const r=JSON.parse(t);yte(r),Ki.set(r)}function _te(){nh();const e=localStorage.getItem("circuitStoreSave");e?e==='{"devices":{},"connectors":[],"subcircuits":{}}'?console.warn("EMPTY on delete, do not set prevCircuitStore just empty stores."):localStorage.setItem("prevCircuitStore",e):console.warn("we saved before deleting so this should not be possible"),localStorage.removeItem("circuitStoreSave")}var bte=Nn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21a9 9 0 0 1-.5-17.986V3c-.354.966-.5 1.911-.5 3a9 9 0 0 0 9 9c.239 0 .254.018.488 0A9 9 0 0 1 12 21"></path></svg>');function wte(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=bte();let i;Wt(()=>i=ha(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),nt(e,n)}var xte=Nn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5V3m0 18v-2M7.05 7.05L5.636 5.636m12.728 12.728L16.95 16.95M5 12H3m18 0h-2M7.05 16.95l-1.414 1.414M18.364 5.636L16.95 7.05M16 12a4 4 0 1 1-8 0a4 4 0 0 1 8 0"></path></svg>');function Ste(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=xte();let i;Wt(()=>i=ha(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),nt(e,n)}var Ete=ir('<div class="side_menu_header svelte-h8e8bu"><h2 class="svelte-h8e8bu"><span class="l_cap svelte-h8e8bu">L</span><span class="o_cap svelte-h8e8bu">o</span><span class="g_cap svelte-h8e8bu">g</span><span class="i_cap svelte-h8e8bu">i</span><span class="c_cap svelte-h8e8bu">c</span><span class="a_cap svelte-h8e8bu" style="margin-left:4px;">A</span><span class="p_cap svelte-h8e8bu">P</span></h2> <!></div>');function Ate(e,t){Cr(t,!1);let r=qe(!1);Ti(()=>{we(r,localStorage.getItem("theme")==="dark"),i()});function n(){we(r,!R(r)),localStorage.setItem("theme",R(r)?"dark":"light"),i()}function i(){R(r)?document.body.className="dark":document.body.className="light"}qn();var s=Ete(),o=xt(jt(s),2);{var a=c=>{Ste(c,{onclick:n,style:"color:var(--neon-purple); width:28px;height:28px;margin-top: 5px;margin-right: -8px;"})},u=c=>{wte(c,{onclick:n,style:"color:grey !important; width:28px;height:28px;margin-top: 5px;margin-right: -8px;"})};lr(o,c=>{R(r)?c(a):c(u,!1)})}nt(e,s),Rr()}const Tte=""+new URL("And-vPRNnjli.webp",import.meta.url).href,Pte=""+new URL("Buffer-B3Uvsw-c.webp",import.meta.url).href,Cte=""+new URL("Or-D6Cm5Ena.webp",import.meta.url).href,Rte=""+new URL("Nor-CgPoSiw3.webp",import.meta.url).href,Ite=""+new URL("Xor-FwkKBC7T.webp",import.meta.url).href,Ote=""+new URL("Xnor-D92Hxo_S.webp",import.meta.url).href,Mte=""+new URL("Nand-CeX_LhnV.webp",import.meta.url).href,kte=""+new URL("Not-CKmu_FXd.webp",import.meta.url).href,Lte=""+new URL("outputIcon-C9FYfgf8.png",import.meta.url).href,Nte=""+new URL("inputIcon-6hipRhQs.png",import.meta.url).href;function Ws(e,t,r){return t.map((n,i)=>e(n,r[i]))}function Hd(e,t,r,n,i){return t.map((s,o)=>e(s,r[o],n[o],i[o]))}function Zo(e,t,r,n){if(t.length==0)return n==1?1:0;let i=t[t.length-1];n==1?i|=~r:i&=r;for(let s=0;s<t.length-1;s++)i=e(i,t[s]);return i=e(i,i>>>16),i=e(i,i>>>8),i=e(i,i>>>4),i=e(i,i>>>2),i=e(i,i>>>1),i&1}function qte(e){return e>>5}function ta(e){return e&31}function nl(e,t,r,n,i){const s=e>0&&!(n[t]&1<<e-1)&&i[t]&1<<e-1;s&&ta(e)&&(i[t]|=-1<<e),s&&t+1<r&&i.fill(-1,t+1)}function GE(e,t){const r={};function n(i,s){if(r[i]=s,!(i.length*e>=t)){for(let o=0;o<1<<e;o+=1)n(i+o.toString(1<<e),s<<e|o|o<<16);n(i+"x",s<<e|(1<<e)-1)}}return n("",0),Object.seal(r),r}const Dte=GE(1,8),Fte=GE(3,3),Bte=GE(4,8);function zte(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000"+r[o].toString(16),u=r[o]^n[o];o++;for(let c=0;c<8&&s<t;c++,s+=4)u&15<<4*c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function Vte(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000000000000000000000000000"+r[o].toString(2),u=r[o]^n[o];o++;for(let c=0;c<32&&s<t;c++,s++)u&1<<c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function Gte(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const f=e.slice(Math.max(0,c-2),c);c-=f.length;const h=Bte[f];ta(a)==0&&u++;const v=(1<<4*f.length)-1;n[u]|=(h>>>16&v)<<a,i[u]|=(h&v)<<a,a+=4*f.length}a<r&&nl(a,u,o,n,i)}function $te(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const f=e.slice(Math.max(0,c-8),c);c-=f.length;const h=Dte[f];ta(a)==0&&u++;const v=(1<<1*f.length)-1;n[u]|=(h>>>16&v)<<a,i[u]|=(h&v)<<a,a+=1*f.length}a<r&&nl(a,u,o,n,i)}let Ute=class lV extends Error{constructor(t){super(t),Object.setPrototypeOf(this,lV.prototype)}};function Ii(e,t){if(!e)throw new Ute("Assertion failed: "+t)}let fa=class Tr{constructor(t,r,n){this._bits=t,this._avec=r,this._bvec=n}static make(t,r){t=t|0;let n,i;switch(r){case!0:case"1":case 1:n=i=-1;break;case!1:case"0":case-1:case void 0:n=i=0;break;case"x":case 0:n=0,i=-1;break;default:Ii(!1,"Vector3vl.make() called with invalid initializer")}const s=(t+31)/32|0;return new Tr(t,new Uint32Array(s).fill(n),new Uint32Array(s).fill(i))}static zeros(t){return Tr.make(t,-1)}static ones(t){return Tr.make(t,1)}static xes(t){return Tr.make(t,0)}static fromBool(t,r=1){return Tr.make(r,t?1:-1)}static concat(...t){const n=t.reduce((u,c)=>c.bits+u,0)+31>>>5;let i=0,s=-1,o=new Uint32Array(n),a=new Uint32Array(n);for(const u of t)if(u.normalize(),ta(i)==0)o.set(u._avec,s+1),a.set(u._bvec,s+1),i+=u._bits,s+=u._bits+31>>>5;else{for(const c in u._avec){if(o[s]|=u._avec[c]<<i,a[s]|=u._bvec[c]<<i,s++,s==n)break;o[s]=u._avec[c]>>>-i,a[s]=u._bvec[c]>>>-i}i+=u._bits,s+1>i+31>>>5&&s--}return new Tr(i,o,a)}static fromIterator(t,r,n){return(r&r-1)==0?Tr.fromIteratorPow2(t,r,n):Tr.fromIteratorAnySkip(t,r,n)}static fromIteratorAnySkip(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const f of t)ta(s)==0&&o++,a[o]|=(f>>>r&c)<<s,u[o]|=(f&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(f>>>r&c)>>>-s,u[o]=(f&c)>>>-s),s+=r;return s<n&&nl(s,o,i,a,u),new Tr(n,a,u)}static fromIteratorPow2(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const f of t)ta(s)==0&&o++,a[o]|=(f>>>r&c)<<s,u[o]|=(f&c)<<s,s+=r;return s<n&&nl(s,o,i,a,u),new Tr(n,a,u)}static fromArray(t){const r=t.length,n=1,i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<n)-1;for(const f of t){const h=f+1+ +(f>0);ta(s)==0&&o++,a[o]|=(h>>>n&c)<<s,u[o]|=(h&c)<<s,s+=n}return s<r&&nl(s,o,i,a,u),new Tr(r,a,u)}static fromBin(t,r){r===void 0&&(r=t.length);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return $te(t,0,r,i,s),new Tr(r,i,s)}static fromOct(t,r){r===void 0&&(r=t.length*3);const i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=7;for(let f=t.length-1;f>=0;f--){const h=Fte[t[f]];ta(s)==0&&o++,a[o]|=(h>>>16&c)<<s,u[o]|=(h&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(h>>>16&c)>>>-s,u[o]=(h&c)>>>-s),s+=3}return s<r&&nl(s,o,i,a,u),new Tr(r,a,u)}static fromHex(t,r){r===void 0&&(r=t.length*4);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return Gte(t,0,r,i,s),new Tr(r,i,s)}static fromString(t){const n=/^([0-9]*)'?(b[01x]*|o[0-7x]*|h[0-9a-fx]*|d[0-9]*)$/.exec(t);Ii(n!=null,"Vector3vl.fromString() Invalid string");const i=n[1].length?Number(n[1]):void 0,s=n[2].slice(1);switch(n[2][0]){case"b":return Tr.fromBin(s,i);case"o":return Tr.fromOct(s,i);case"h":return Tr.fromHex(s,i);case"d":return Tr.fromNumber(BigInt(s),i)}}static fromClonable(t){return new Tr(t._bits,t._avec,t._bvec)}static fromNumber(t,r){const n=r===void 0?0:r,i=BigInt(t);if(i>=BigInt(0)){let s=i.toString(2);return Tr.fromBin("0".repeat(Math.max(0,n-s.length))+s,r)}else{const s=(-i).toString(2).length;let a=(i+(BigInt(1)<<BigInt(s))).toString(2);return Tr.fromBin("1".repeat(Math.max(1,n-s))+"0".repeat(s-a.length)+a,r)}}get bits(){return this._bits}get msb(){return this.get(this._bits-1)}get lsb(){return this.get(0)}get(t){const r=ta(t),n=qte(t),i=this._avec[n]>>>r&1,s=this._bvec[n]>>>r&1;return i+s-1}get isHigh(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>~i==0)&&(n[n.length-1]&t)==t;return r(this._avec)&&r(this._bvec)}get isLow(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>i==0)&&(n[n.length-1]&t)==0;return r(this._avec)&&r(this._bvec)}get isDefined(){if(this._bits==0)return!1;const t=Ws((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]|=~this._lastmask,!t.every(r=>~r==0)}get isFullyDefined(){if(this._bits==0)return!0;const t=Ws((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]&=this._lastmask,!t.some(r=>!!r)}and(t){return Ii(t._bits==this._bits,"Vector3vl.and() called with vectors of different sizes"),new Tr(this._bits,Ws((r,n)=>r&n,t._avec,this._avec),Ws((r,n)=>r&n,t._bvec,this._bvec))}or(t){return Ii(t._bits==this._bits,"Vector3vl.or() called with vectors of different sizes"),new Tr(this._bits,Ws((r,n)=>r|n,t._avec,this._avec),Ws((r,n)=>r|n,t._bvec,this._bvec))}xor(t){return Ii(t._bits==this._bits,"Vector3vl.xor() called with vectors of different sizes"),new Tr(this._bits,Hd((r,n,i,s)=>(r|i)&(n^s),t._avec,t._bvec,this._avec,this._bvec),Hd((r,n,i,s)=>r&i^(n|s),t._avec,t._bvec,this._avec,this._bvec))}nand(t){return Ii(t._bits==this._bits,"Vector3vl.nand() called with vectors of different sizes"),new Tr(this._bits,Ws((r,n)=>~(r&n),t._bvec,this._bvec),Ws((r,n)=>~(r&n),t._avec,this._avec))}nor(t){return Ii(t._bits==this._bits,"Vector3vl.nor() called with vectors of different sizes"),new Tr(this._bits,Ws((r,n)=>~(r|n),t._bvec,this._bvec),Ws((r,n)=>~(r|n),t._avec,this._avec))}xnor(t){return Ii(t._bits==this._bits,"Vector3vl.xnor() called with vectors of different sizes"),new Tr(this._bits,Hd((r,n,i,s)=>~(r&i^(n|s)),t._avec,t._bvec,this._avec,this._bvec),Hd((r,n,i,s)=>~((r|i)&(n^s)),t._avec,t._bvec,this._avec,this._bvec))}not(){return new Tr(this._bits,this._bvec.map(t=>~t),this._avec.map(t=>~t))}xmask(){const t=Ws((r,n)=>r^n,this._avec,this._bvec);return new Tr(this._bits,t,t)}reduceAnd(){return new Tr(1,Uint32Array.of(Zo((t,r)=>t&r,this._avec,this._lastmask,1)),Uint32Array.of(Zo((t,r)=>t&r,this._bvec,this._lastmask,1)))}reduceOr(){return new Tr(1,Uint32Array.of(Zo((t,r)=>t|r,this._avec,this._lastmask,0)),Uint32Array.of(Zo((t,r)=>t|r,this._bvec,this._lastmask,0)))}reduceNand(){return new Tr(1,Uint32Array.of(~Zo((t,r)=>t&r,this._bvec,this._lastmask,1)),Uint32Array.of(~Zo((t,r)=>t&r,this._avec,this._lastmask,1)))}reduceNor(){return new Tr(1,Uint32Array.of(~Zo((t,r)=>t|r,this._bvec,this._lastmask,0)),Uint32Array.of(~Zo((t,r)=>t|r,this._avec,this._lastmask,0)))}reduceXor(){const t=Ws((i,s)=>~i&s,this._avec,this._bvec),r=Zo((i,s)=>i|s,t,this._lastmask,0),n=Zo((i,s)=>i^s,this._avec,this._lastmask,0);return new Tr(1,Uint32Array.of(n&~r),Uint32Array.of(n|r))}reduceXnor(){return this.reduceXor().not()}concat(...t){return Tr.concat(this,...t)}slice(t,r){if(t===void 0&&(t=0),r===void 0&&(r=this._bits),r>this.bits&&(r=this.bits),t>r&&(r=t),ta(t)==0){const n=this._avec.slice(t>>>5,r+31>>>5),i=this._bvec.slice(t>>>5,r+31>>>5);return new Tr(r-t,n,i)}else{const n=r-t+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);let o=0;i[o]=this._avec[t>>5]>>>t,s[o]=this._bvec[t>>5]>>>t;for(let a=(t>>5)+1;a<=r>>>5&&(i[o]|=this._avec[a]<<-t,s[o]|=this._bvec[a]<<-t,o++,o!=n);a++)i[o]=this._avec[a]>>>t,s[o]=this._bvec[a]>>>t;return new Tr(r-t,i,s)}}toIterator(t){return(t&t-1)==0?this.toIteratorPow2(t):this.toIteratorAnySkip(t)}*toIteratorAnySkip(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){let o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const u=r>>-n;o|=(this._avec[i+1]&u)<<-n,a|=(this._bvec[i+1]&u)<<-n}yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r<<n)}}*toIteratorPow2(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){const o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r)}}toArray(){this.normalize();const t=1,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){const a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n,c=a<<t|u;o.push(c-1-+(c>1)),s<<=t,n+=t,s==0&&(i++,s=r)}return o}toBin(){return Vte(0,this._bits,this._avec,this._bvec)}toOct(){this.normalize();const t=3,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){let a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const f=r>>-n;a|=(this._avec[i+1]&f)<<-n,u|=(this._bvec[i+1]&f)<<-n}const c=a<<t|u;7&c&~(c>>3)?o.push("x"):o.push((c>>3).toString()),s<<=t,n+=t,s==0&&(i++,s=r<<n)}return o.reverse().join("")}toHex(){return this.normalize(),zte(0,this._bits,this._avec,this._bvec)}toString(){return"Vector3vl "+this.toBin()}toClonable(){return{_bits:this._bits,_avec:this._avec,_bvec:this._bvec}}toNumber(t=!1){return t?this.toNumberSigned():(Ii(this.isFullyDefined,"Vector3vl.toNumber() called on a not fully defined vector"),Ii(this._bits<32,"Vector3vl.toNumber() called on a too wide vector"),this._bits==0?0:Number.parseInt(this.toHex(),16))}toNumberSigned(){return Ii(this.isFullyDefined,"Vector3vl.toNumberSigned() called on a not fully defined vector"),Ii(this._bits<32,"Vector3vl.toNumberSigned() called on a too wide vector"),Ii(this._bits>0,"Vector3vl.toNumberSigned() called on an empty vector"),this.msb==1?Number.parseInt(this.toHex(),16)-(1<<this._bits):Number.parseInt(this.toHex(),16)}toBigInt(t=!1){return t?this.toBigIntSigned():(Ii(this.isFullyDefined,"Vector3vl.toBigInt() called on a not fully defined vector"),this._bits==0?BigInt(0):BigInt("0x"+this.toHex()))}toBigIntSigned(){return Ii(this.isFullyDefined,"Vector3vl.toBigIntSigned() called on a not fully defined vector"),Ii(this._bits>0,"Vector3vl.toBigIntSigned() called on an empty vector"),this.msb==1?BigInt("0x"+this.toHex())-(BigInt(1)<<BigInt(this._bits)):BigInt("0x"+this.toHex())}eq(t){if(t._bits!=this._bits)return!1;this.normalize(),t.normalize();for(const r in this._avec)if(this._avec[r]!=t._avec[r]||this._bvec[r]!=t._bvec[r])return!1;return!0}normalize(){const t=this._lastmask;this._avec[this._avec.length-1]&=t,this._bvec[this._bvec.length-1]&=t}get _lastmask(){return-1>>>-this.bits}};fa.empty=fa.zeros(0);fa.one=fa.ones(1);fa.zero=fa.zeros(1);fa.x=fa.xes(1);var Oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ll(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function jte(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var kC={},LC={},Cm={exports:{}},NC;function Ur(){if(NC)return Cm.exports;NC=1;var e=Cm.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();return typeof __g=="number"&&(__g=e),Cm.exports}var Rm,qC;function ao(){if(qC)return Rm;qC=1;var e={}.hasOwnProperty;return Rm=function(t,r){return e.call(t,r)},Rm}var Im,DC;function Zr(){return DC||(DC=1,Im=function(e){try{return!!e()}catch{return!0}}),Im}var Om,FC;function Dn(){return FC||(FC=1,Om=!Zr()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})),Om}var Mm={exports:{}},BC;function Lo(){if(BC)return Mm.exports;BC=1;var e=Mm.exports={version:"2.6.12"};return typeof __e=="number"&&(__e=e),Mm.exports}var km={},Lm,zC;function on(){return zC||(zC=1,Lm=function(e){return typeof e=="object"?e!==null:typeof e=="function"}),Lm}var Nm,VC;function mr(){if(VC)return Nm;VC=1;var e=on();return Nm=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t},Nm}var qm,GC;function $E(){if(GC)return qm;GC=1;var e=on(),t=Ur().document,r=e(t)&&e(t.createElement);return qm=function(n){return r?t.createElement(n):{}},qm}var Dm,$C;function fV(){return $C||($C=1,Dm=!Dn()&&!Zr()(function(){return Object.defineProperty($E()("div"),"a",{get:function(){return 7}}).a!=7})),Dm}var Fm,UC;function pa(){if(UC)return Fm;UC=1;var e=on();return Fm=function(t,r){if(!e(t))return t;var n,i;if(r&&typeof(n=t.toString)=="function"&&!e(i=n.call(t))||typeof(n=t.valueOf)=="function"&&!e(i=n.call(t))||!r&&typeof(n=t.toString)=="function"&&!e(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},Fm}var jC;function Qn(){if(jC)return km;jC=1;var e=mr(),t=fV(),r=pa(),n=Object.defineProperty;return km.f=Dn()?Object.defineProperty:function(s,o,a){if(e(s),o=r(o,!0),e(a),t)try{return n(s,o,a)}catch{}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(s[o]=a.value),s},km}var Bm,HC;function fc(){return HC||(HC=1,Bm=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}),Bm}var zm,WC;function Ns(){if(WC)return zm;WC=1;var e=Qn(),t=fc();return zm=Dn()?function(r,n,i){return e.f(r,n,t(1,i))}:function(r,n,i){return r[n]=i,r},zm}var Vm={exports:{}},Gm,XC;function hc(){if(XC)return Gm;XC=1;var e=0,t=Math.random();return Gm=function(r){return"Symbol(".concat(r===void 0?"":r,")_",(++e+t).toString(36))},Gm}var $m={exports:{}},Um,YC;function Au(){return YC||(YC=1,Um=!1),Um}var KC;function Sh(){if(KC)return $m.exports;KC=1;var e=Lo(),t=Ur(),r="__core-js_shared__",n=t[r]||(t[r]={});return($m.exports=function(i,s){return n[i]||(n[i]=s!==void 0?s:{})})("versions",[]).push({version:e.version,mode:Au()?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"}),$m.exports}var jm,ZC;function Hte(){return ZC||(ZC=1,jm=Sh()("native-function-to-string",Function.toString)),jm}var JC;function qs(){if(JC)return Vm.exports;JC=1;var e=Ur(),t=Ns(),r=ao(),n=hc()("src"),i=Hte(),s="toString",o=(""+i).split(s);return Lo().inspectSource=function(a){return i.call(a)},(Vm.exports=function(a,u,c,f){var h=typeof c=="function";h&&(r(c,"name")||t(c,"name",u)),a[u]!==c&&(h&&(r(c,n)||t(c,n,a[u]?""+a[u]:o.join(String(u)))),a===e?a[u]=c:f?a[u]?a[u]=c:t(a,u,c):(delete a[u],t(a,u,c)))})(Function.prototype,s,function(){return typeof this=="function"&&this[n]||i.call(this)}),Vm.exports}var Hm,QC;function Qi(){return QC||(QC=1,Hm=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}),Hm}var Wm,eR;function No(){if(eR)return Wm;eR=1;var e=Qi();return Wm=function(t,r,n){if(e(t),r===void 0)return t;switch(n){case 1:return function(i){return t.call(r,i)};case 2:return function(i,s){return t.call(r,i,s)};case 3:return function(i,s,o){return t.call(r,i,s,o)}}return function(){return t.apply(r,arguments)}},Wm}var Xm,tR;function ze(){if(tR)return Xm;tR=1;var e=Ur(),t=Lo(),r=Ns(),n=qs(),i=No(),s="prototype",o=function(a,u,c){var f=a&o.F,h=a&o.G,v=a&o.S,y=a&o.P,m=a&o.B,_=h?e:v?e[u]||(e[u]={}):(e[u]||{})[s],w=h?t:t[u]||(t[u]={}),S=w[s]||(w[s]={}),E,A,T,I;h&&(c=u);for(E in c)A=!f&&_&&_[E]!==void 0,T=(A?_:c)[E],I=m&&A?i(T,e):y&&typeof T=="function"?i(Function.call,T):T,_&&n(_,E,T,a&o.U),w[E]!=T&&r(w,E,I),y&&S[E]!=T&&(S[E]=T)};return e.core=t,o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,o.U=64,o.R=128,Xm=o,Xm}var Ym={exports:{}},rR;function Tu(){if(rR)return Ym.exports;rR=1;var e=hc()("meta"),t=on(),r=ao(),n=Qn().f,i=0,s=Object.isExtensible||function(){return!0},o=!Zr()(function(){return s(Object.preventExtensions({}))}),a=function(v){n(v,e,{value:{i:"O"+ ++i,w:{}}})},u=function(v,y){if(!t(v))return typeof v=="symbol"?v:(typeof v=="string"?"S":"P")+v;if(!r(v,e)){if(!s(v))return"F";if(!y)return"E";a(v)}return v[e].i},c=function(v,y){if(!r(v,e)){if(!s(v))return!0;if(!y)return!1;a(v)}return v[e].w},f=function(v){return o&&h.NEED&&s(v)&&!r(v,e)&&a(v),v},h=Ym.exports={KEY:e,NEED:!1,fastKey:u,getWeak:c,onFreeze:f};return Ym.exports}var Km={exports:{}},nR;function En(){if(nR)return Km.exports;nR=1;var e=Sh()("wks"),t=hc(),r=Ur().Symbol,n=typeof r=="function",i=Km.exports=function(s){return e[s]||(e[s]=n&&r[s]||(n?r:t)("Symbol."+s))};return i.store=e,Km.exports}var Zm,iR;function Nl(){if(iR)return Zm;iR=1;var e=Qn().f,t=ao(),r=En()("toStringTag");return Zm=function(n,i,s){n&&!t(n=s?n:n.prototype,r)&&e(n,r,{configurable:!0,value:i})},Zm}var Jm={},sR;function hV(){return sR||(sR=1,Jm.f=En()),Jm}var Qm,oR;function UE(){if(oR)return Qm;oR=1;var e=Ur(),t=Lo(),r=Au(),n=hV(),i=Qn().f;return Qm=function(s){var o=t.Symbol||(t.Symbol=r?{}:e.Symbol||{});s.charAt(0)!="_"&&!(s in o)&&i(o,s,{value:n.f(s)})},Qm}var e0,aR;function qo(){if(aR)return e0;aR=1;var e={}.toString;return e0=function(t){return e.call(t).slice(8,-1)},e0}var t0,uR;function Eh(){if(uR)return t0;uR=1;var e=qo();return t0=Object("z").propertyIsEnumerable(0)?Object:function(t){return e(t)=="String"?t.split(""):Object(t)},t0}var r0,cR;function ga(){return cR||(cR=1,r0=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}),r0}var n0,lR;function uo(){if(lR)return n0;lR=1;var e=Eh(),t=ga();return n0=function(r){return e(t(r))},n0}var i0,fR;function Do(){if(fR)return i0;fR=1;var e=Math.ceil,t=Math.floor;return i0=function(r){return isNaN(r=+r)?0:(r>0?t:e)(r)},i0}var s0,hR;function Rn(){if(hR)return s0;hR=1;var e=Do(),t=Math.min;return s0=function(r){return r>0?t(e(r),9007199254740991):0},s0}var o0,dR;function dc(){if(dR)return o0;dR=1;var e=Do(),t=Math.max,r=Math.min;return o0=function(n,i){return n=e(n),n<0?t(n+i,0):r(n,i)},o0}var a0,pR;function sg(){if(pR)return a0;pR=1;var e=uo(),t=Rn(),r=dc();return a0=function(n){return function(i,s,o){var a=e(i),u=t(a.length),c=r(o,u),f;if(n&&s!=s){for(;u>c;)if(f=a[c++],f!=f)return!0}else for(;u>c;c++)if((n||c in a)&&a[c]===s)return n||c||0;return!n&&-1}},a0}var u0,gR;function jE(){if(gR)return u0;gR=1;var e=Sh()("keys"),t=hc();return u0=function(r){return e[r]||(e[r]=t(r))},u0}var c0,vR;function dV(){if(vR)return c0;vR=1;var e=ao(),t=uo(),r=sg()(!1),n=jE()("IE_PROTO");return c0=function(i,s){var o=t(i),a=0,u=[],c;for(c in o)c!=n&&e(o,c)&&u.push(c);for(;s.length>a;)e(o,c=s[a++])&&(~r(u,c)||u.push(c));return u},c0}var l0,mR;function HE(){return mR||(mR=1,l0="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")),l0}var f0,yR;function pc(){if(yR)return f0;yR=1;var e=dV(),t=HE();return f0=Object.keys||function(n){return e(n,t)},f0}var h0={},_R;function og(){return _R||(_R=1,h0.f=Object.getOwnPropertySymbols),h0}var d0={},bR;function Ah(){return bR||(bR=1,d0.f={}.propertyIsEnumerable),d0}var p0,wR;function Wte(){if(wR)return p0;wR=1;var e=pc(),t=og(),r=Ah();return p0=function(n){var i=e(n),s=t.f;if(s)for(var o=s(n),a=r.f,u=0,c;o.length>u;)a.call(n,c=o[u++])&&i.push(c);return i},p0}var g0,xR;function ag(){if(xR)return g0;xR=1;var e=qo();return g0=Array.isArray||function(r){return e(r)=="Array"},g0}var v0,SR;function ii(){if(SR)return v0;SR=1;var e=ga();return v0=function(t){return Object(e(t))},v0}var m0,ER;function pV(){if(ER)return m0;ER=1;var e=Qn(),t=mr(),r=pc();return m0=Dn()?Object.defineProperties:function(i,s){t(i);for(var o=r(s),a=o.length,u=0,c;a>u;)e.f(i,c=o[u++],s[c]);return i},m0}var y0,AR;function WE(){if(AR)return y0;AR=1;var e=Ur().document;return y0=e&&e.documentElement,y0}var _0,TR;function gc(){if(TR)return _0;TR=1;var e=mr(),t=pV(),r=HE(),n=jE()("IE_PROTO"),i=function(){},s="prototype",o=function(){var a=$E()("iframe"),u=r.length,c="<",f=">",h;for(a.style.display="none",WE().appendChild(a),a.src="javascript:",h=a.contentWindow.document,h.open(),h.write(c+"script"+f+"document.F=Object"+c+"/script"+f),h.close(),o=h.F;u--;)delete o[s][r[u]];return o()};return _0=Object.create||function(u,c){var f;return u!==null?(i[s]=e(u),f=new i,i[s]=null,f[n]=u):f=o(),c===void 0?f:t(f,c)},_0}var b0={},w0={},PR;function vc(){if(PR)return w0;PR=1;var e=dV(),t=HE().concat("length","prototype");return w0.f=Object.getOwnPropertyNames||function(n){return e(n,t)},w0}var CR;function gV(){if(CR)return b0;CR=1;var e=uo(),t=vc().f,r={}.toString,n=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(s){try{return t(s)}catch{return n.slice()}};return b0.f=function(o){return n&&r.call(o)=="[object Window]"?i(o):t(e(o))},b0}var x0={},RR;function co(){if(RR)return x0;RR=1;var e=Ah(),t=fc(),r=uo(),n=pa(),i=ao(),s=fV(),o=Object.getOwnPropertyDescriptor;return x0.f=Dn()?o:function(u,c){if(u=r(u),c=n(c,!0),s)try{return o(u,c)}catch{}if(i(u,c))return t(!e.f.call(u,c),u[c])},x0}var IR;function Xte(){if(IR)return LC;IR=1;var e=Ur(),t=ao(),r=Dn(),n=ze(),i=qs(),s=Tu().KEY,o=Zr(),a=Sh(),u=Nl(),c=hc(),f=En(),h=hV(),v=UE(),y=Wte(),m=ag(),_=mr(),w=on(),S=ii(),E=uo(),A=pa(),T=fc(),I=gc(),q=gV(),p=co(),C=og(),O=Qn(),N=pc(),V=p.f,W=O.f,G=q.f,ee=e.Symbol,ae=e.JSON,K=ae&&ae.stringify,U="prototype",j=f("_hidden"),J=f("toPrimitive"),de={}.propertyIsEnumerable,ce=a("symbol-registry"),Te=a("symbols"),Se=a("op-symbols"),re=Object[U],oe=typeof ee=="function"&&!!C.f,ne=e.QObject,te=!ne||!ne[U]||!ne[U].findChild,le=r&&o(function(){return I(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a!=7})?function(Le,Ie,be){var je=V(re,Ie);je&&delete re[Ie],W(Le,Ie,be),je&&Le!==re&&W(re,Ie,je)}:W,We=function(Le){var Ie=Te[Le]=I(ee[U]);return Ie._k=Le,Ie},Ne=oe&&typeof ee.iterator=="symbol"?function(Le){return typeof Le=="symbol"}:function(Le){return Le instanceof ee},Re=function(Ie,be,je){return Ie===re&&Re(Se,be,je),_(Ie),be=A(be,!0),_(je),t(Te,be)?(je.enumerable?(t(Ie,j)&&Ie[j][be]&&(Ie[j][be]=!1),je=I(je,{enumerable:T(0,!1)})):(t(Ie,j)||W(Ie,j,T(1,{})),Ie[j][be]=!0),le(Ie,be,je)):W(Ie,be,je)},rt=function(Ie,be){_(Ie);for(var je=y(be=E(be)),ct=0,mt=je.length,ft;mt>ct;)Re(Ie,ft=je[ct++],be[ft]);return Ie},Ve=function(Ie,be){return be===void 0?I(Ie):rt(I(Ie),be)},L=function(Ie){var be=de.call(this,Ie=A(Ie,!0));return this===re&&t(Te,Ie)&&!t(Se,Ie)?!1:be||!t(this,Ie)||!t(Te,Ie)||t(this,j)&&this[j][Ie]?be:!0},B=function(Ie,be){if(Ie=E(Ie),be=A(be,!0),!(Ie===re&&t(Te,be)&&!t(Se,be))){var je=V(Ie,be);return je&&t(Te,be)&&!(t(Ie,j)&&Ie[j][be])&&(je.enumerable=!0),je}},H=function(Ie){for(var be=G(E(Ie)),je=[],ct=0,mt;be.length>ct;)!t(Te,mt=be[ct++])&&mt!=j&&mt!=s&&je.push(mt);return je},X=function(Ie){for(var be=Ie===re,je=G(be?Se:E(Ie)),ct=[],mt=0,ft;je.length>mt;)t(Te,ft=je[mt++])&&(!be||t(re,ft))&&ct.push(Te[ft]);return ct};oe||(ee=function(){if(this instanceof ee)throw TypeError("Symbol is not a constructor!");var Ie=c(arguments.length>0?arguments[0]:void 0),be=function(je){this===re&&be.call(Se,je),t(this,j)&&t(this[j],Ie)&&(this[j][Ie]=!1),le(this,Ie,T(1,je))};return r&&te&&le(re,Ie,{configurable:!0,set:be}),We(Ie)},i(ee[U],"toString",function(){return this._k}),p.f=B,O.f=Re,vc().f=q.f=H,Ah().f=L,C.f=X,r&&!Au()&&i(re,"propertyIsEnumerable",L,!0),h.f=function(Le){return We(f(Le))}),n(n.G+n.W+n.F*!oe,{Symbol:ee});for(var xe="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ue=0;xe.length>ue;)f(xe[ue++]);for(var Ae=N(f.store),Ce=0;Ae.length>Ce;)v(Ae[Ce++]);n(n.S+n.F*!oe,"Symbol",{for:function(Le){return t(ce,Le+="")?ce[Le]:ce[Le]=ee(Le)},keyFor:function(Ie){if(!Ne(Ie))throw TypeError(Ie+" is not a symbol!");for(var be in ce)if(ce[be]===Ie)return be},useSetter:function(){te=!0},useSimple:function(){te=!1}}),n(n.S+n.F*!oe,"Object",{create:Ve,defineProperty:Re,defineProperties:rt,getOwnPropertyDescriptor:B,getOwnPropertyNames:H,getOwnPropertySymbols:X});var Be=o(function(){C.f(1)});return n(n.S+n.F*Be,"Object",{getOwnPropertySymbols:function(Ie){return C.f(S(Ie))}}),ae&&n(n.S+n.F*(!oe||o(function(){var Le=ee();return K([Le])!="[null]"||K({a:Le})!="{}"||K(Object(Le))!="{}"})),"JSON",{stringify:function(Ie){for(var be=[Ie],je=1,ct,mt;arguments.length>je;)be.push(arguments[je++]);if(mt=ct=be[1],!(!w(ct)&&Ie===void 0||Ne(Ie)))return m(ct)||(ct=function(ft,it){if(typeof mt=="function"&&(it=mt.call(this,ft,it)),!Ne(it))return it}),be[1]=ct,K.apply(ae,be)}}),ee[U][J]||Ns()(ee[U],J,ee[U].valueOf),u(ee,"Symbol"),u(Math,"Math",!0),u(e.JSON,"JSON",!0),LC}var OR={},MR;function Yte(){if(MR)return OR;MR=1;var e=ze();return e(e.S,"Object",{create:gc()}),OR}var kR={},LR;function Kte(){if(LR)return kR;LR=1;var e=ze();return e(e.S+e.F*!Dn(),"Object",{defineProperty:Qn().f}),kR}var NR={},qR;function Zte(){if(qR)return NR;qR=1;var e=ze();return e(e.S+e.F*!Dn(),"Object",{defineProperties:pV()}),NR}var DR={},S0,FR;function va(){if(FR)return S0;FR=1;var e=ze(),t=Lo(),r=Zr();return S0=function(n,i){var s=(t.Object||{})[n]||Object[n],o={};o[n]=i(s),e(e.S+e.F*r(function(){s(1)}),"Object",o)},S0}var BR;function Jte(){if(BR)return DR;BR=1;var e=uo(),t=co().f;return va()("getOwnPropertyDescriptor",function(){return function(n,i){return t(e(n),i)}}),DR}var zR={},E0,VR;function lo(){if(VR)return E0;VR=1;var e=ao(),t=ii(),r=jE()("IE_PROTO"),n=Object.prototype;return E0=Object.getPrototypeOf||function(i){return i=t(i),e(i,r)?i[r]:typeof i.constructor=="function"&&i instanceof i.constructor?i.constructor.prototype:i instanceof Object?n:null},E0}var GR;function Qte(){if(GR)return zR;GR=1;var e=ii(),t=lo();return va()("getPrototypeOf",function(){return function(n){return t(e(n))}}),zR}var $R={},UR;function ere(){if(UR)return $R;UR=1;var e=ii(),t=pc();return va()("keys",function(){return function(n){return t(e(n))}}),$R}var jR={},HR;function tre(){return HR||(HR=1,va()("getOwnPropertyNames",function(){return gV().f})),jR}var WR={},XR;function rre(){if(XR)return WR;XR=1;var e=on(),t=Tu().onFreeze;return va()("freeze",function(r){return function(i){return r&&e(i)?r(t(i)):i}}),WR}var YR={},KR;function nre(){if(KR)return YR;KR=1;var e=on(),t=Tu().onFreeze;return va()("seal",function(r){return function(i){return r&&e(i)?r(t(i)):i}}),YR}var ZR={},JR;function ire(){if(JR)return ZR;JR=1;var e=on(),t=Tu().onFreeze;return va()("preventExtensions",function(r){return function(i){return r&&e(i)?r(t(i)):i}}),ZR}var QR={},eI;function sre(){if(eI)return QR;eI=1;var e=on();return va()("isFrozen",function(t){return function(n){return e(n)?t?t(n):!1:!0}}),QR}var tI={},rI;function ore(){if(rI)return tI;rI=1;var e=on();return va()("isSealed",function(t){return function(n){return e(n)?t?t(n):!1:!0}}),tI}var nI={},iI;function are(){if(iI)return nI;iI=1;var e=on();return va()("isExtensible",function(t){return function(n){return e(n)?t?t(n):!0:!1}}),nI}var sI={},A0,oI;function vV(){if(oI)return A0;oI=1;var e=Dn(),t=pc(),r=og(),n=Ah(),i=ii(),s=Eh(),o=Object.assign;return A0=!o||Zr()(function(){var a={},u={},c=Symbol(),f="abcdefghijklmnopqrst";return a[c]=7,f.split("").forEach(function(h){u[h]=h}),o({},a)[c]!=7||Object.keys(o({},u)).join("")!=f})?function(u,c){for(var f=i(u),h=arguments.length,v=1,y=r.f,m=n.f;h>v;)for(var _=s(arguments[v++]),w=y?t(_).concat(y(_)):t(_),S=w.length,E=0,A;S>E;)A=w[E++],(!e||m.call(_,A))&&(f[A]=_[A]);return f}:o,A0}var aI;function ure(){if(aI)return sI;aI=1;var e=ze();return e(e.S+e.F,"Object",{assign:vV()}),sI}var uI={},T0,cI;function mV(){return cI||(cI=1,T0=Object.is||function(t,r){return t===r?t!==0||1/t===1/r:t!=t&&r!=r}),T0}var lI;function cre(){if(lI)return uI;lI=1;var e=ze();return e(e.S,"Object",{is:mV()}),uI}var fI={},P0,hI;function XE(){if(hI)return P0;hI=1;var e=on(),t=mr(),r=function(n,i){if(t(n),!e(i)&&i!==null)throw TypeError(i+": can't set as prototype!")};return P0={set:Object.setPrototypeOf||("__proto__"in{}?function(n,i,s){try{s=No()(Function.call,co().f(Object.prototype,"__proto__").set,2),s(n,[]),i=!(n instanceof Array)}catch{i=!0}return function(a,u){return r(a,u),i?a.__proto__=u:s(a,u),a}}({},!1):void 0),check:r},P0}var dI;function lre(){if(dI)return fI;dI=1;var e=ze();return e(e.S,"Object",{setPrototypeOf:XE().set}),fI}var pI={},C0,gI;function ql(){if(gI)return C0;gI=1;var e=qo(),t=En()("toStringTag"),r=e(function(){return arguments}())=="Arguments",n=function(i,s){try{return i[s]}catch{}};return C0=function(i){var s,o,a;return i===void 0?"Undefined":i===null?"Null":typeof(o=n(s=Object(i),t))=="string"?o:r?e(s):(a=e(s))=="Object"&&typeof s.callee=="function"?"Arguments":a},C0}var vI;function fre(){if(vI)return pI;vI=1;var e=ql(),t={};return t[En()("toStringTag")]="z",t+""!="[object z]"&&qs()(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0),pI}var mI={},R0,yI;function yV(){return yI||(yI=1,R0=function(e,t,r){var n=r===void 0;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}),R0}var I0,_I;function _V(){if(_I)return I0;_I=1;var e=Qi(),t=on(),r=yV(),n=[].slice,i={},s=function(o,a,u){if(!(a in i)){for(var c=[],f=0;f<a;f++)c[f]="a["+f+"]";i[a]=Function("F,a","return new F("+c.join(",")+")")}return i[a](o,u)};return I0=Function.bind||function(a){var u=e(this),c=n.call(arguments,1),f=function(){var h=c.concat(n.call(arguments));return this instanceof f?s(u,h.length,h):r(u,h,a)};return t(u.prototype)&&(f.prototype=u.prototype),f},I0}var bI;function hre(){if(bI)return mI;bI=1;var e=ze();return e(e.P,"Function",{bind:_V()}),mI}var wI={},xI;function dre(){if(xI)return wI;xI=1;var e=Qn().f,t=Function.prototype,r=/^\s*function ([^ (]*)/,n="name";return n in t||Dn()&&e(t,n,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch{return""}}}),wI}var SI={},EI;function pre(){if(EI)return SI;EI=1;var e=on(),t=lo(),r=En()("hasInstance"),n=Function.prototype;return r in n||Qn().f(n,r,{value:function(i){if(typeof this!="function"||!e(i))return!1;if(!e(this.prototype))return i instanceof this;for(;i=t(i);)if(this.prototype===i)return!0;return!1}}),SI}var AI={},O0,TI;function YE(){return TI||(TI=1,O0=`	
\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\uFEFF`),O0}var M0,PI;function Dl(){if(PI)return M0;PI=1;var e=ze(),t=ga(),r=Zr(),n=YE(),i="["+n+"]",s="âÂ",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),u=function(f,h,v){var y={},m=r(function(){return!!n[f]()||s[f]()!=s}),_=y[f]=m?h(c):n[f];v&&(y[v]=_),e(e.P+e.F*m,"String",y)},c=u.trim=function(f,h){return f=String(t(f)),h&1&&(f=f.replace(o,"")),h&2&&(f=f.replace(a,"")),f};return M0=u,M0}var k0,CI;function bV(){if(CI)return k0;CI=1;var e=Ur().parseInt,t=Dl().trim,r=YE(),n=/^[-+]?0[xX]/;return k0=e(r+"08")!==8||e(r+"0x16")!==22?function(s,o){var a=t(String(s),3);return e(a,o>>>0||(n.test(a)?16:10))}:e,k0}var RI;function gre(){if(RI)return AI;RI=1;var e=ze(),t=bV();return e(e.G+e.F*(parseInt!=t),{parseInt:t}),AI}var II={},L0,OI;function wV(){if(OI)return L0;OI=1;var e=Ur().parseFloat,t=Dl().trim;return L0=1/e(YE()+"-0")!==-1/0?function(n){var i=t(String(n),3),s=e(i);return s===0&&i.charAt(0)=="-"?-0:s}:e,L0}var MI;function vre(){if(MI)return II;MI=1;var e=ze(),t=wV();return e(e.G+e.F*(parseFloat!=t),{parseFloat:t}),II}var kI={},N0,LI;function KE(){if(LI)return N0;LI=1;var e=on(),t=XE().set;return N0=function(r,n,i){var s=n.constructor,o;return s!==i&&typeof s=="function"&&(o=s.prototype)!==i.prototype&&e(o)&&t&&t(r,o),r},N0}var NI;function mre(){if(NI)return kI;NI=1;var e=Ur(),t=ao(),r=qo(),n=KE(),i=pa(),s=Zr(),o=vc().f,a=co().f,u=Qn().f,c=Dl().trim,f="Number",h=e[f],v=h,y=h.prototype,m=r(gc()(y))==f,_="trim"in String.prototype,w=function(T){var I=i(T,!1);if(typeof I=="string"&&I.length>2){I=_?I.trim():c(I,3);var q=I.charCodeAt(0),p,C,O;if(q===43||q===45){if(p=I.charCodeAt(2),p===88||p===120)return NaN}else if(q===48){switch(I.charCodeAt(1)){case 66:case 98:C=2,O=49;break;case 79:case 111:C=8,O=55;break;default:return+I}for(var N=I.slice(2),V=0,W=N.length,G;V<W;V++)if(G=N.charCodeAt(V),G<48||G>O)return NaN;return parseInt(N,C)}}return+I};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(I){var q=arguments.length<1?0:I,p=this;return p instanceof h&&(m?s(function(){y.valueOf.call(p)}):r(p)!=f)?n(new v(w(q)),p,h):w(q)};for(var S=Dn()?o(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0,A;S.length>E;E++)t(v,A=S[E])&&!t(h,A)&&u(h,A,a(v,A));h.prototype=y,y.constructor=h,qs()(e,f,h)}return kI}var qI={},q0,DI;function xV(){if(DI)return q0;DI=1;var e=qo();return q0=function(t,r){if(typeof t!="number"&&e(t)!="Number")throw TypeError(r);return+t},q0}var D0,FI;function ZE(){if(FI)return D0;FI=1;var e=Do(),t=ga();return D0=function(n){var i=String(t(this)),s="",o=e(n);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(i+=i))o&1&&(s+=i);return s},D0}var BI;function yre(){if(BI)return qI;BI=1;var e=ze(),t=Do(),r=xV(),n=ZE(),i=1 .toFixed,s=Math.floor,o=[0,0,0,0,0,0],a="Number.toFixed: incorrect invocation!",u="0",c=function(m,_){for(var w=-1,S=_;++w<6;)S+=m*o[w],o[w]=S%1e7,S=s(S/1e7)},f=function(m){for(var _=6,w=0;--_>=0;)w+=o[_],o[_]=s(w/m),w=w%m*1e7},h=function(){for(var m=6,_="";--m>=0;)if(_!==""||m===0||o[m]!==0){var w=String(o[m]);_=_===""?w:_+n.call(u,7-w.length)+w}return _},v=function(m,_,w){return _===0?w:_%2===1?v(m,_-1,w*m):v(m*m,_/2,w)},y=function(m){for(var _=0,w=m;w>=4096;)_+=12,w/=4096;for(;w>=2;)_+=1,w/=2;return _};return e(e.P+e.F*(!!i&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!Zr()(function(){i.call({})})),"Number",{toFixed:function(_){var w=r(this,a),S=t(_),E="",A=u,T,I,q,p;if(S<0||S>20)throw RangeError(a);if(w!=w)return"NaN";if(w<=-1e21||w>=1e21)return String(w);if(w<0&&(E="-",w=-w),w>1e-21)if(T=y(w*v(2,69,1))-69,I=T<0?w*v(2,-T,1):w/v(2,T,1),I*=4503599627370496,T=52-T,T>0){for(c(0,I),q=S;q>=7;)c(1e7,0),q-=7;for(c(v(10,q,1),0),q=T-1;q>=23;)f(1<<23),q-=23;f(1<<q),c(1,1),f(2),A=h()}else c(0,I),c(1<<-T,0),A=h()+n.call(u,S);return S>0?(p=A.length,A=E+(p<=S?"0."+n.call(u,S-p)+A:A.slice(0,p-S)+"."+A.slice(p-S))):A=E+A,A}}),qI}var zI={},VI;function _re(){if(VI)return zI;VI=1;var e=ze(),t=Zr(),r=xV(),n=1 .toPrecision;return e(e.P+e.F*(t(function(){return n.call(1,void 0)!=="1"})||!t(function(){n.call({})})),"Number",{toPrecision:function(s){var o=r(this,"Number#toPrecision: incorrect invocation!");return s===void 0?n.call(o):n.call(o,s)}}),zI}var GI={},$I;function bre(){if($I)return GI;$I=1;var e=ze();return e(e.S,"Number",{EPSILON:Math.pow(2,-52)}),GI}var UI={},jI;function wre(){if(jI)return UI;jI=1;var e=ze(),t=Ur().isFinite;return e(e.S,"Number",{isFinite:function(n){return typeof n=="number"&&t(n)}}),UI}var HI={},F0,WI;function SV(){if(WI)return F0;WI=1;var e=on(),t=Math.floor;return F0=function(n){return!e(n)&&isFinite(n)&&t(n)===n},F0}var XI;function xre(){if(XI)return HI;XI=1;var e=ze();return e(e.S,"Number",{isInteger:SV()}),HI}var YI={},KI;function Sre(){if(KI)return YI;KI=1;var e=ze();return e(e.S,"Number",{isNaN:function(r){return r!=r}}),YI}var ZI={},JI;function Ere(){if(JI)return ZI;JI=1;var e=ze(),t=SV(),r=Math.abs;return e(e.S,"Number",{isSafeInteger:function(i){return t(i)&&r(i)<=9007199254740991}}),ZI}var QI={},eO;function Are(){if(eO)return QI;eO=1;var e=ze();return e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991}),QI}var tO={},rO;function Tre(){if(rO)return tO;rO=1;var e=ze();return e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991}),tO}var nO={},iO;function Pre(){if(iO)return nO;iO=1;var e=ze(),t=wV();return e(e.S+e.F*(Number.parseFloat!=t),"Number",{parseFloat:t}),nO}var sO={},oO;function Cre(){if(oO)return sO;oO=1;var e=ze(),t=bV();return e(e.S+e.F*(Number.parseInt!=t),"Number",{parseInt:t}),sO}var aO={},B0,uO;function EV(){return uO||(uO=1,B0=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}),B0}var cO;function Rre(){if(cO)return aO;cO=1;var e=ze(),t=EV(),r=Math.sqrt,n=Math.acosh;return e(e.S+e.F*!(n&&Math.floor(n(Number.MAX_VALUE))==710&&n(1/0)==1/0),"Math",{acosh:function(s){return(s=+s)<1?NaN:s>9490626562425156e-8?Math.log(s)+Math.LN2:t(s-1+r(s-1)*r(s+1))}}),aO}var lO={},fO;function Ire(){if(fO)return lO;fO=1;var e=ze(),t=Math.asinh;function r(n){return!isFinite(n=+n)||n==0?n:n<0?-r(-n):Math.log(n+Math.sqrt(n*n+1))}return e(e.S+e.F*!(t&&1/t(0)>0),"Math",{asinh:r}),lO}var hO={},dO;function Ore(){if(dO)return hO;dO=1;var e=ze(),t=Math.atanh;return e(e.S+e.F*!(t&&1/t(-0)<0),"Math",{atanh:function(n){return(n=+n)==0?n:Math.log((1+n)/(1-n))/2}}),hO}var pO={},z0,gO;function JE(){return gO||(gO=1,z0=Math.sign||function(t){return(t=+t)==0||t!=t?t:t<0?-1:1}),z0}var vO;function Mre(){if(vO)return pO;vO=1;var e=ze(),t=JE();return e(e.S,"Math",{cbrt:function(n){return t(n=+n)*Math.pow(Math.abs(n),1/3)}}),pO}var mO={},yO;function kre(){if(yO)return mO;yO=1;var e=ze();return e(e.S,"Math",{clz32:function(r){return(r>>>=0)?31-Math.floor(Math.log(r+.5)*Math.LOG2E):32}}),mO}var _O={},bO;function Lre(){if(bO)return _O;bO=1;var e=ze(),t=Math.exp;return e(e.S,"Math",{cosh:function(n){return(t(n=+n)+t(-n))/2}}),_O}var wO={},V0,xO;function QE(){if(xO)return V0;xO=1;var e=Math.expm1;return V0=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||e(-2e-17)!=-2e-17?function(r){return(r=+r)==0?r:r>-1e-6&&r<1e-6?r+r*r/2:Math.exp(r)-1}:e,V0}var SO;function Nre(){if(SO)return wO;SO=1;var e=ze(),t=QE();return e(e.S+e.F*(t!=Math.expm1),"Math",{expm1:t}),wO}var EO={},G0,AO;function AV(){if(AO)return G0;AO=1;var e=JE(),t=Math.pow,r=t(2,-52),n=t(2,-23),i=t(2,127)*(2-n),s=t(2,-126),o=function(a){return a+1/r-1/r};return G0=Math.fround||function(u){var c=Math.abs(u),f=e(u),h,v;return c<s?f*o(c/s/n)*s*n:(h=(1+n/r)*c,v=h-(h-c),v>i||v!=v?f*(1/0):f*v)},G0}var TO;function qre(){if(TO)return EO;TO=1;var e=ze();return e(e.S,"Math",{fround:AV()}),EO}var PO={},CO;function Dre(){if(CO)return PO;CO=1;var e=ze(),t=Math.abs;return e(e.S,"Math",{hypot:function(n,i){for(var s=0,o=0,a=arguments.length,u=0,c,f;o<a;)c=t(arguments[o++]),u<c?(f=u/c,s=s*f*f+1,u=c):c>0?(f=c/u,s+=f*f):s+=c;return u===1/0?1/0:u*Math.sqrt(s)}}),PO}var RO={},IO;function Fre(){if(IO)return RO;IO=1;var e=ze(),t=Math.imul;return e(e.S+e.F*Zr()(function(){return t(4294967295,5)!=-5||t.length!=2}),"Math",{imul:function(n,i){var s=65535,o=+n,a=+i,u=s&o,c=s&a;return 0|u*c+((s&o>>>16)*c+u*(s&a>>>16)<<16>>>0)}}),RO}var OO={},MO;function Bre(){if(MO)return OO;MO=1;var e=ze();return e(e.S,"Math",{log10:function(r){return Math.log(r)*Math.LOG10E}}),OO}var kO={},LO;function zre(){if(LO)return kO;LO=1;var e=ze();return e(e.S,"Math",{log1p:EV()}),kO}var NO={},qO;function Vre(){if(qO)return NO;qO=1;var e=ze();return e(e.S,"Math",{log2:function(r){return Math.log(r)/Math.LN2}}),NO}var DO={},FO;function Gre(){if(FO)return DO;FO=1;var e=ze();return e(e.S,"Math",{sign:JE()}),DO}var BO={},zO;function $re(){if(zO)return BO;zO=1;var e=ze(),t=QE(),r=Math.exp;return e(e.S+e.F*Zr()(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(i){return Math.abs(i=+i)<1?(t(i)-t(-i))/2:(r(i-1)-r(-i-1))*(Math.E/2)}}),BO}var VO={},GO;function Ure(){if(GO)return VO;GO=1;var e=ze(),t=QE(),r=Math.exp;return e(e.S,"Math",{tanh:function(i){var s=t(i=+i),o=t(-i);return s==1/0?1:o==1/0?-1:(s-o)/(r(i)+r(-i))}}),VO}var $O={},UO;function jre(){if(UO)return $O;UO=1;var e=ze();return e(e.S,"Math",{trunc:function(r){return(r>0?Math.floor:Math.ceil)(r)}}),$O}var jO={},HO;function Hre(){if(HO)return jO;HO=1;var e=ze(),t=dc(),r=String.fromCharCode,n=String.fromCodePoint;return e(e.S+e.F*(!!n&&n.length!=1),"String",{fromCodePoint:function(s){for(var o=[],a=arguments.length,u=0,c;a>u;){if(c=+arguments[u++],t(c,1114111)!==c)throw RangeError(c+" is not a valid code point");o.push(c<65536?r(c):r(((c-=65536)>>10)+55296,c%1024+56320))}return o.join("")}}),jO}var WO={},XO;function Wre(){if(XO)return WO;XO=1;var e=ze(),t=uo(),r=Rn();return e(e.S,"String",{raw:function(i){for(var s=t(i.raw),o=r(s.length),a=arguments.length,u=[],c=0;o>c;)u.push(String(s[c++])),c<a&&u.push(String(arguments[c]));return u.join("")}}),WO}var YO={},KO;function Xre(){return KO||(KO=1,Dl()("trim",function(e){return function(){return e(this,3)}})),YO}var ZO={},$0,JO;function ug(){if(JO)return $0;JO=1;var e=Do(),t=ga();return $0=function(r){return function(n,i){var s=String(t(n)),o=e(i),a=s.length,u,c;return o<0||o>=a?r?"":void 0:(u=s.charCodeAt(o),u<55296||u>56319||o+1===a||(c=s.charCodeAt(o+1))<56320||c>57343?r?s.charAt(o):u:r?s.slice(o,o+2):(u-55296<<10)+(c-56320)+65536)}},$0}var U0,QO;function Fl(){return QO||(QO=1,U0={}),U0}var j0,eM;function e2(){if(eM)return j0;eM=1;var e=gc(),t=fc(),r=Nl(),n={};return Ns()(n,En()("iterator"),function(){return this}),j0=function(i,s,o){i.prototype=e(n,{next:t(1,o)}),r(i,s+" Iterator")},j0}var H0,tM;function t2(){if(tM)return H0;tM=1;var e=Au(),t=ze(),r=qs(),n=Ns(),i=Fl(),s=e2(),o=Nl(),a=lo(),u=En()("iterator"),c=!([].keys&&"next"in[].keys()),f="@@iterator",h="keys",v="values",y=function(){return this};return H0=function(m,_,w,S,E,A,T){s(w,_,S);var I=function(U){if(!c&&U in O)return O[U];switch(U){case h:return function(){return new w(this,U)};case v:return function(){return new w(this,U)}}return function(){return new w(this,U)}},q=_+" Iterator",p=E==v,C=!1,O=m.prototype,N=O[u]||O[f]||E&&O[E],V=N||I(E),W=E?p?I("entries"):V:void 0,G=_=="Array"&&O.entries||N,ee,ae,K;if(G&&(K=a(G.call(new m)),K!==Object.prototype&&K.next&&(o(K,q,!0),!e&&typeof K[u]!="function"&&n(K,u,y))),p&&N&&N.name!==v&&(C=!0,V=function(){return N.call(this)}),(!e||T)&&(c||C||!O[u])&&n(O,u,V),i[_]=V,i[q]=y,E)if(ee={values:p?V:I(v),keys:A?V:I(h),entries:W},T)for(ae in ee)ae in O||r(O,ae,ee[ae]);else t(t.P+t.F*(c||C),_,ee);return ee},H0}var rM;function Yre(){if(rM)return ZO;rM=1;var e=ug()(!0);return t2()(String,"String",function(t){this._t=String(t),this._i=0},function(){var t=this._t,r=this._i,n;return r>=t.length?{value:void 0,done:!0}:(n=e(t,r),this._i+=n.length,{value:n,done:!1})}),ZO}var nM={},iM;function Kre(){if(iM)return nM;iM=1;var e=ze(),t=ug()(!1);return e(e.P,"String",{codePointAt:function(n){return t(this,n)}}),nM}var sM={},W0,oM;function cg(){if(oM)return W0;oM=1;var e=on(),t=qo(),r=En()("match");return W0=function(n){var i;return e(n)&&((i=n[r])!==void 0?!!i:t(n)=="RegExp")},W0}var X0,aM;function r2(){if(aM)return X0;aM=1;var e=cg(),t=ga();return X0=function(r,n,i){if(e(n))throw TypeError("String#"+i+" doesn't accept regex!");return String(t(r))},X0}var Y0,uM;function n2(){if(uM)return Y0;uM=1;var e=En()("match");return Y0=function(t){var r=/./;try{"/./"[t](r)}catch{try{return r[e]=!1,!"/./"[t](r)}catch{}}return!0},Y0}var cM;function Zre(){if(cM)return sM;cM=1;var e=ze(),t=Rn(),r=r2(),n="endsWith",i=""[n];return e(e.P+e.F*n2()(n),"String",{endsWith:function(o){var a=r(this,o,n),u=arguments.length>1?arguments[1]:void 0,c=t(a.length),f=u===void 0?c:Math.min(t(u),c),h=String(o);return i?i.call(a,h,f):a.slice(f-h.length,f)===h}}),sM}var lM={},fM;function Jre(){if(fM)return lM;fM=1;var e=ze(),t=r2(),r="includes";return e(e.P+e.F*n2()(r),"String",{includes:function(i){return!!~t(this,i,r).indexOf(i,arguments.length>1?arguments[1]:void 0)}}),lM}var hM={},dM;function Qre(){if(dM)return hM;dM=1;var e=ze();return e(e.P,"String",{repeat:ZE()}),hM}var pM={},gM;function ene(){if(gM)return pM;gM=1;var e=ze(),t=Rn(),r=r2(),n="startsWith",i=""[n];return e(e.P+e.F*n2()(n),"String",{startsWith:function(o){var a=r(this,o,n),u=t(Math.min(arguments.length>1?arguments[1]:void 0,a.length)),c=String(o);return i?i.call(a,c,u):a.slice(u,u+c.length)===c}}),pM}var vM={},K0,mM;function Ds(){if(mM)return K0;mM=1;var e=ze(),t=Zr(),r=ga(),n=/"/g,i=function(s,o,a,u){var c=String(r(s)),f="<"+o;return a!==""&&(f+=" "+a+'="'+String(u).replace(n,"&quot;")+'"'),f+">"+c+"</"+o+">"};return K0=function(s,o){var a={};a[s]=o(i),e(e.P+e.F*t(function(){var u=""[s]('"');return u!==u.toLowerCase()||u.split('"').length>3}),"String",a)},K0}var yM;function tne(){return yM||(yM=1,Ds()("anchor",function(e){return function(r){return e(this,"a","name",r)}})),vM}var _M={},bM;function rne(){return bM||(bM=1,Ds()("big",function(e){return function(){return e(this,"big","","")}})),_M}var wM={},xM;function nne(){return xM||(xM=1,Ds()("blink",function(e){return function(){return e(this,"blink","","")}})),wM}var SM={},EM;function ine(){return EM||(EM=1,Ds()("bold",function(e){return function(){return e(this,"b","","")}})),SM}var AM={},TM;function sne(){return TM||(TM=1,Ds()("fixed",function(e){return function(){return e(this,"tt","","")}})),AM}var PM={},CM;function one(){return CM||(CM=1,Ds()("fontcolor",function(e){return function(r){return e(this,"font","color",r)}})),PM}var RM={},IM;function ane(){return IM||(IM=1,Ds()("fontsize",function(e){return function(r){return e(this,"font","size",r)}})),RM}var OM={},MM;function une(){return MM||(MM=1,Ds()("italics",function(e){return function(){return e(this,"i","","")}})),OM}var kM={},LM;function cne(){return LM||(LM=1,Ds()("link",function(e){return function(r){return e(this,"a","href",r)}})),kM}var NM={},qM;function lne(){return qM||(qM=1,Ds()("small",function(e){return function(){return e(this,"small","","")}})),NM}var DM={},FM;function fne(){return FM||(FM=1,Ds()("strike",function(e){return function(){return e(this,"strike","","")}})),DM}var BM={},zM;function hne(){return zM||(zM=1,Ds()("sub",function(e){return function(){return e(this,"sub","","")}})),BM}var VM={},GM;function dne(){return GM||(GM=1,Ds()("sup",function(e){return function(){return e(this,"sup","","")}})),VM}var $M={},UM;function pne(){if(UM)return $M;UM=1;var e=ze();return e(e.S,"Date",{now:function(){return new Date().getTime()}}),$M}var jM={},HM;function gne(){if(HM)return jM;HM=1;var e=ze(),t=ii(),r=pa();return e(e.P+e.F*Zr()(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1}),"Date",{toJSON:function(i){var s=t(this),o=r(s);return typeof o=="number"&&!isFinite(o)?null:s.toISOString()}}),jM}var WM={},Z0,XM;function vne(){if(XM)return Z0;XM=1;var e=Zr(),t=Date.prototype.getTime,r=Date.prototype.toISOString,n=function(i){return i>9?i:"0"+i};return Z0=e(function(){return r.call(new Date(-5e13-1))!="0385-07-25T07:06:39.999Z"})||!e(function(){r.call(new Date(NaN))})?function(){if(!isFinite(t.call(this)))throw RangeError("Invalid time value");var s=this,o=s.getUTCFullYear(),a=s.getUTCMilliseconds(),u=o<0?"-":o>9999?"+":"";return u+("00000"+Math.abs(o)).slice(u?-6:-4)+"-"+n(s.getUTCMonth()+1)+"-"+n(s.getUTCDate())+"T"+n(s.getUTCHours())+":"+n(s.getUTCMinutes())+":"+n(s.getUTCSeconds())+"."+(a>99?a:"0"+n(a))+"Z"}:r,Z0}var YM;function mne(){if(YM)return WM;YM=1;var e=ze(),t=vne();return e(e.P+e.F*(Date.prototype.toISOString!==t),"Date",{toISOString:t}),WM}var KM={},ZM;function yne(){if(ZM)return KM;ZM=1;var e=Date.prototype,t="Invalid Date",r="toString",n=e[r],i=e.getTime;return new Date(NaN)+""!=t&&qs()(e,r,function(){var o=i.call(this);return o===o?n.call(this):t}),KM}var JM={},J0,QM;function _ne(){if(QM)return J0;QM=1;var e=mr(),t=pa(),r="number";return J0=function(n){if(n!=="string"&&n!==r&&n!=="default")throw TypeError("Incorrect hint");return t(e(this),n!=r)},J0}var ek;function bne(){if(ek)return JM;ek=1;var e=En()("toPrimitive"),t=Date.prototype;return e in t||Ns()(t,e,_ne()),JM}var tk={},rk;function wne(){if(rk)return tk;rk=1;var e=ze();return e(e.S,"Array",{isArray:ag()}),tk}var nk={},Q0,ik;function TV(){if(ik)return Q0;ik=1;var e=mr();return Q0=function(t,r,n,i){try{return i?r(e(n)[0],n[1]):r(n)}catch(o){var s=t.return;throw s!==void 0&&e(s.call(t)),o}},Q0}var ey,sk;function i2(){if(sk)return ey;sk=1;var e=Fl(),t=En()("iterator"),r=Array.prototype;return ey=function(n){return n!==void 0&&(e.Array===n||r[t]===n)},ey}var ty,ok;function s2(){if(ok)return ty;ok=1;var e=Qn(),t=fc();return ty=function(r,n,i){n in r?e.f(r,n,t(0,i)):r[n]=i},ty}var ry,ak;function o2(){if(ak)return ry;ak=1;var e=ql(),t=En()("iterator"),r=Fl();return ry=Lo().getIteratorMethod=function(n){if(n!=null)return n[t]||n["@@iterator"]||r[e(n)]},ry}var ny,uk;function lg(){if(uk)return ny;uk=1;var e=En()("iterator"),t=!1;try{var r=[7][e]();r.return=function(){t=!0},Array.from(r,function(){throw 2})}catch{}return ny=function(n,i){if(!i&&!t)return!1;var s=!1;try{var o=[7],a=o[e]();a.next=function(){return{done:s=!0}},o[e]=function(){return a},n(o)}catch{}return s},ny}var ck;function xne(){if(ck)return nk;ck=1;var e=No(),t=ze(),r=ii(),n=TV(),i=i2(),s=Rn(),o=s2(),a=o2();return t(t.S+t.F*!lg()(function(u){Array.from(u)}),"Array",{from:function(c){var f=r(c),h=typeof this=="function"?this:Array,v=arguments.length,y=v>1?arguments[1]:void 0,m=y!==void 0,_=0,w=a(f),S,E,A,T;if(m&&(y=e(y,v>2?arguments[2]:void 0,2)),w!=null&&!(h==Array&&i(w)))for(T=w.call(f),E=new h;!(A=T.next()).done;_++)o(E,_,m?n(T,y,[A.value,_],!0):A.value);else for(S=s(f.length),E=new h(S);S>_;_++)o(E,_,m?y(f[_],_):f[_]);return E.length=_,E}}),nk}var lk={},fk;function Sne(){if(fk)return lk;fk=1;var e=ze(),t=s2();return e(e.S+e.F*Zr()(function(){function r(){}return!(Array.of.call(r)instanceof r)}),"Array",{of:function(){for(var n=0,i=arguments.length,s=new(typeof this=="function"?this:Array)(i);i>n;)t(s,n,arguments[n++]);return s.length=i,s}}),lk}var hk={},iy,dk;function Fo(){if(dk)return iy;dk=1;var e=Zr();return iy=function(t,r){return!!t&&e(function(){r?t.call(null,function(){},1):t.call(null)})},iy}var pk;function Ene(){if(pk)return hk;pk=1;var e=ze(),t=uo(),r=[].join;return e(e.P+e.F*(Eh()!=Object||!Fo()(r)),"Array",{join:function(i){return r.call(t(this),i===void 0?",":i)}}),hk}var gk={},vk;function Ane(){if(vk)return gk;vk=1;var e=ze(),t=WE(),r=qo(),n=dc(),i=Rn(),s=[].slice;return e(e.P+e.F*Zr()(function(){t&&s.call(t)}),"Array",{slice:function(a,u){var c=i(this.length),f=r(this);if(u=u===void 0?c:u,f=="Array")return s.call(this,a,u);for(var h=n(a,c),v=n(u,c),y=i(v-h),m=new Array(y),_=0;_<y;_++)m[_]=f=="String"?this.charAt(h+_):this[h+_];return m}}),gk}var mk={},yk;function Tne(){if(yk)return mk;yk=1;var e=ze(),t=Qi(),r=ii(),n=Zr(),i=[].sort,s=[1,2,3];return e(e.P+e.F*(n(function(){s.sort(void 0)})||!n(function(){s.sort(null)})||!Fo()(i)),"Array",{sort:function(a){return a===void 0?i.call(r(this)):i.call(r(this),t(a))}}),mk}var _k={},sy,bk;function Pne(){if(bk)return sy;bk=1;var e=on(),t=ag(),r=En()("species");return sy=function(n){var i;return t(n)&&(i=n.constructor,typeof i=="function"&&(i===Array||t(i.prototype))&&(i=void 0),e(i)&&(i=i[r],i===null&&(i=void 0))),i===void 0?Array:i},sy}var oy,wk;function a2(){if(wk)return oy;wk=1;var e=Pne();return oy=function(t,r){return new(e(t))(r)},oy}var ay,xk;function ma(){if(xk)return ay;xk=1;var e=No(),t=Eh(),r=ii(),n=Rn(),i=a2();return ay=function(s,o){var a=s==1,u=s==2,c=s==3,f=s==4,h=s==6,v=s==5||h,y=o||i;return function(m,_,w){for(var S=r(m),E=t(S),A=e(_,w,3),T=n(E.length),I=0,q=a?y(m,T):u?y(m,0):void 0,p,C;T>I;I++)if((v||I in E)&&(p=E[I],C=A(p,I,S),s)){if(a)q[I]=C;else if(C)switch(s){case 3:return!0;case 5:return p;case 6:return I;case 2:q.push(p)}else if(f)return!1}return h?-1:c||f?f:q}},ay}var Sk;function Cne(){if(Sk)return _k;Sk=1;var e=ze(),t=ma()(0),r=Fo()([].forEach,!0);return e(e.P+e.F*!r,"Array",{forEach:function(i){return t(this,i,arguments[1])}}),_k}var Ek={},Ak;function Rne(){if(Ak)return Ek;Ak=1;var e=ze(),t=ma()(1);return e(e.P+e.F*!Fo()([].map,!0),"Array",{map:function(n){return t(this,n,arguments[1])}}),Ek}var Tk={},Pk;function Ine(){if(Pk)return Tk;Pk=1;var e=ze(),t=ma()(2);return e(e.P+e.F*!Fo()([].filter,!0),"Array",{filter:function(n){return t(this,n,arguments[1])}}),Tk}var Ck={},Rk;function One(){if(Rk)return Ck;Rk=1;var e=ze(),t=ma()(3);return e(e.P+e.F*!Fo()([].some,!0),"Array",{some:function(n){return t(this,n,arguments[1])}}),Ck}var Ik={},Ok;function Mne(){if(Ok)return Ik;Ok=1;var e=ze(),t=ma()(4);return e(e.P+e.F*!Fo()([].every,!0),"Array",{every:function(n){return t(this,n,arguments[1])}}),Ik}var Mk={},uy,kk;function PV(){if(kk)return uy;kk=1;var e=Qi(),t=ii(),r=Eh(),n=Rn();return uy=function(i,s,o,a,u){e(s);var c=t(i),f=r(c),h=n(c.length),v=u?h-1:0,y=u?-1:1;if(o<2)for(;;){if(v in f){a=f[v],v+=y;break}if(v+=y,u?v<0:h<=v)throw TypeError("Reduce of empty array with no initial value")}for(;u?v>=0:h>v;v+=y)v in f&&(a=s(a,f[v],v,c));return a},uy}var Lk;function kne(){if(Lk)return Mk;Lk=1;var e=ze(),t=PV();return e(e.P+e.F*!Fo()([].reduce,!0),"Array",{reduce:function(n){return t(this,n,arguments.length,arguments[1],!1)}}),Mk}var Nk={},qk;function Lne(){if(qk)return Nk;qk=1;var e=ze(),t=PV();return e(e.P+e.F*!Fo()([].reduceRight,!0),"Array",{reduceRight:function(n){return t(this,n,arguments.length,arguments[1],!0)}}),Nk}var Dk={},Fk;function Nne(){if(Fk)return Dk;Fk=1;var e=ze(),t=sg()(!1),r=[].indexOf,n=!!r&&1/[1].indexOf(1,-0)<0;return e(e.P+e.F*(n||!Fo()(r)),"Array",{indexOf:function(s){return n?r.apply(this,arguments)||0:t(this,s,arguments[1])}}),Dk}var Bk={},zk;function qne(){if(zk)return Bk;zk=1;var e=ze(),t=uo(),r=Do(),n=Rn(),i=[].lastIndexOf,s=!!i&&1/[1].lastIndexOf(1,-0)<0;return e(e.P+e.F*(s||!Fo()(i)),"Array",{lastIndexOf:function(a){if(s)return i.apply(this,arguments)||0;var u=t(this),c=n(u.length),f=c-1;for(arguments.length>1&&(f=Math.min(f,r(arguments[1]))),f<0&&(f=c+f);f>=0;f--)if(f in u&&u[f]===a)return f||0;return-1}}),Bk}var Vk={},cy,Gk;function CV(){if(Gk)return cy;Gk=1;var e=ii(),t=dc(),r=Rn();return cy=[].copyWithin||function(i,s){var o=e(this),a=r(o.length),u=t(i,a),c=t(s,a),f=arguments.length>2?arguments[2]:void 0,h=Math.min((f===void 0?a:t(f,a))-c,a-u),v=1;for(c<u&&u<c+h&&(v=-1,c+=h-1,u+=h-1);h-- >0;)c in o?o[u]=o[c]:delete o[u],u+=v,c+=v;return o},cy}var ly,$k;function Pu(){if($k)return ly;$k=1;var e=En()("unscopables"),t=Array.prototype;return t[e]==null&&Ns()(t,e,{}),ly=function(r){t[e][r]=!0},ly}var Uk;function Dne(){if(Uk)return Vk;Uk=1;var e=ze();return e(e.P,"Array",{copyWithin:CV()}),Pu()("copyWithin"),Vk}var jk={},fy,Hk;function u2(){if(Hk)return fy;Hk=1;var e=ii(),t=dc(),r=Rn();return fy=function(i){for(var s=e(this),o=r(s.length),a=arguments.length,u=t(a>1?arguments[1]:void 0,o),c=a>2?arguments[2]:void 0,f=c===void 0?o:t(c,o);f>u;)s[u++]=i;return s},fy}var Wk;function Fne(){if(Wk)return jk;Wk=1;var e=ze();return e(e.P,"Array",{fill:u2()}),Pu()("fill"),jk}var Xk={},Yk;function Bne(){if(Yk)return Xk;Yk=1;var e=ze(),t=ma()(5),r="find",n=!0;return r in[]&&Array(1)[r](function(){n=!1}),e(e.P+e.F*n,"Array",{find:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0)}}),Pu()(r),Xk}var Kk={},Zk;function zne(){if(Zk)return Kk;Zk=1;var e=ze(),t=ma()(6),r="findIndex",n=!0;return r in[]&&Array(1)[r](function(){n=!1}),e(e.P+e.F*n,"Array",{findIndex:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0)}}),Pu()(r),Kk}var Jk={},hy,Qk;function mc(){if(Qk)return hy;Qk=1;var e=Ur(),t=Qn(),r=Dn(),n=En()("species");return hy=function(i){var s=e[i];r&&s&&!s[n]&&t.f(s,n,{configurable:!0,get:function(){return this}})},hy}var eL;function Vne(){return eL||(eL=1,mc()("Array")),Jk}var dy,tL;function RV(){return tL||(tL=1,dy=function(e,t){return{value:t,done:!!e}}),dy}var py,rL;function c2(){if(rL)return py;rL=1;var e=Pu(),t=RV(),r=Fl(),n=uo();return py=t2()(Array,"Array",function(i,s){this._t=n(i),this._i=0,this._k=s},function(){var i=this._t,s=this._k,o=this._i++;return!i||o>=i.length?(this._t=void 0,t(1)):s=="keys"?t(0,o):s=="values"?t(0,i[o]):t(0,[o,i[o]])},"values"),r.Arguments=r.Array,e("keys"),e("values"),e("entries"),py}var nL={},gy,iL;function Th(){if(iL)return gy;iL=1;var e=mr();return gy=function(){var t=e(this),r="";return t.global&&(r+="g"),t.ignoreCase&&(r+="i"),t.multiline&&(r+="m"),t.unicode&&(r+="u"),t.sticky&&(r+="y"),r},gy}var sL;function Gne(){if(sL)return nL;sL=1;var e=Ur(),t=KE(),r=Qn().f,n=vc().f,i=cg(),s=Th(),o=e.RegExp,a=o,u=o.prototype,c=/a/g,f=/a/g,h=new o(c)!==c;if(Dn()&&(!h||Zr()(function(){return f[En()("match")]=!1,o(c)!=c||o(f)==f||o(c,"i")!="/a/i"}))){o=function(w,S){var E=this instanceof o,A=i(w),T=S===void 0;return!E&&A&&w.constructor===o&&T?w:t(h?new a(A&&!T?w.source:w,S):a((A=w instanceof o)?w.source:w,A&&T?s.call(w):S),E?this:u,o)};for(var v=function(_){_ in o||r(o,_,{configurable:!0,get:function(){return a[_]},set:function(w){a[_]=w}})},y=n(a),m=0;y.length>m;)v(y[m++]);u.constructor=o,o.prototype=u,qs()(e,"RegExp",o)}return mc()("RegExp"),nL}var oL={},vy,aL;function l2(){if(aL)return vy;aL=1;var e=Th(),t=RegExp.prototype.exec,r=String.prototype.replace,n=t,i="lastIndex",s=function(){var u=/a/,c=/b*/g;return t.call(u,"a"),t.call(c,"a"),u[i]!==0||c[i]!==0}(),o=/()??/.exec("")[1]!==void 0,a=s||o;return a&&(n=function(c){var f=this,h,v,y,m;return o&&(v=new RegExp("^"+f.source+"$(?!\\s)",e.call(f))),s&&(h=f[i]),y=t.call(f,c),s&&y&&(f[i]=f.global?y.index+y[0].length:h),o&&y&&y.length>1&&r.call(y[0],v,function(){for(m=1;m<arguments.length-2;m++)arguments[m]===void 0&&(y[m]=void 0)}),y}),vy=n,vy}var uL;function IV(){if(uL)return oL;uL=1;var e=l2();return ze()({target:"RegExp",proto:!0,forced:e!==/./.exec},{exec:e}),oL}var cL={},lL={},fL;function OV(){return fL||(fL=1,Dn()&&/./g.flags!="g"&&Qn().f(RegExp.prototype,"flags",{configurable:!0,get:Th()})),lL}var hL;function $ne(){if(hL)return cL;hL=1,OV();var e=mr(),t=Th(),r=Dn(),n="toString",i=/./[n],s=function(o){qs()(RegExp.prototype,n,o,!0)};return Zr()(function(){return i.call({source:"a",flags:"b"})!="/a/b"})?s(function(){var a=e(this);return"/".concat(a.source,"/","flags"in a?a.flags:!r&&a instanceof RegExp?t.call(a):void 0)}):i.name!=n&&s(function(){return i.call(this)}),cL}var dL={},my,pL;function f2(){if(pL)return my;pL=1;var e=ug()(!0);return my=function(t,r,n){return r+(n?e(t,r).length:1)},my}var yy,gL;function fg(){if(gL)return yy;gL=1;var e=ql(),t=RegExp.prototype.exec;return yy=function(r,n){var i=r.exec;if(typeof i=="function"){var s=i.call(r,n);if(typeof s!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if(e(r)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return t.call(r,n)},yy}var _y,vL;function hg(){if(vL)return _y;vL=1,IV();var e=qs(),t=Ns(),r=Zr(),n=ga(),i=En(),s=l2(),o=i("species"),a=!r(function(){var c=/./;return c.exec=function(){var f=[];return f.groups={a:"7"},f},"".replace(c,"$<a>")!=="7"}),u=function(){var c=/(?:)/,f=c.exec;c.exec=function(){return f.apply(this,arguments)};var h="ab".split(c);return h.length===2&&h[0]==="a"&&h[1]==="b"}();return _y=function(c,f,h){var v=i(c),y=!r(function(){var A={};return A[v]=function(){return 7},""[c](A)!=7}),m=y?!r(function(){var A=!1,T=/a/;return T.exec=function(){return A=!0,null},c==="split"&&(T.constructor={},T.constructor[o]=function(){return T}),T[v](""),!A}):void 0;if(!y||!m||c==="replace"&&!a||c==="split"&&!u){var _=/./[v],w=h(n,v,""[c],function(T,I,q,p,C){return I.exec===s?y&&!C?{done:!0,value:_.call(I,q,p)}:{done:!0,value:T.call(q,I,p)}:{done:!1}}),S=w[0],E=w[1];e(String.prototype,c,S),t(RegExp.prototype,v,f==2?function(A,T){return E.call(A,this,T)}:function(A){return E.call(A,this)})}},_y}var mL;function Une(){if(mL)return dL;mL=1;var e=mr(),t=Rn(),r=f2(),n=fg();return hg()("match",1,function(i,s,o,a){return[function(c){var f=i(this),h=c==null?void 0:c[s];return h!==void 0?h.call(c,f):new RegExp(c)[s](String(f))},function(u){var c=a(o,u,this);if(c.done)return c.value;var f=e(u),h=String(this);if(!f.global)return n(f,h);var v=f.unicode;f.lastIndex=0;for(var y=[],m=0,_;(_=n(f,h))!==null;){var w=String(_[0]);y[m]=w,w===""&&(f.lastIndex=r(h,t(f.lastIndex),v)),m++}return m===0?null:y}]}),dL}var yL={},_L;function jne(){if(_L)return yL;_L=1;var e=mr(),t=ii(),r=Rn(),n=Do(),i=f2(),s=fg(),o=Math.max,a=Math.min,u=Math.floor,c=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,h=function(v){return v===void 0?v:String(v)};return hg()("replace",2,function(v,y,m,_){return[function(E,A){var T=v(this),I=E==null?void 0:E[y];return I!==void 0?I.call(E,T,A):m.call(String(T),E,A)},function(S,E){var A=_(m,S,this,E);if(A.done)return A.value;var T=e(S),I=String(this),q=typeof E=="function";q||(E=String(E));var p=T.global;if(p){var C=T.unicode;T.lastIndex=0}for(var O=[];;){var N=s(T,I);if(N===null||(O.push(N),!p))break;var V=String(N[0]);V===""&&(T.lastIndex=i(I,r(T.lastIndex),C))}for(var W="",G=0,ee=0;ee<O.length;ee++){N=O[ee];for(var ae=String(N[0]),K=o(a(n(N.index),I.length),0),U=[],j=1;j<N.length;j++)U.push(h(N[j]));var J=N.groups;if(q){var de=[ae].concat(U,K,I);J!==void 0&&de.push(J);var ce=String(E.apply(void 0,de))}else ce=w(ae,I,K,U,J,E);K>=G&&(W+=I.slice(G,K)+ce,G=K+ae.length)}return W+I.slice(G)}];function w(S,E,A,T,I,q){var p=A+S.length,C=T.length,O=f;return I!==void 0&&(I=t(I),O=c),m.call(q,O,function(N,V){var W;switch(V.charAt(0)){case"$":return"$";case"&":return S;case"`":return E.slice(0,A);case"'":return E.slice(p);case"<":W=I[V.slice(1,-1)];break;default:var G=+V;if(G===0)return N;if(G>C){var ee=u(G/10);return ee===0?N:ee<=C?T[ee-1]===void 0?V.charAt(1):T[ee-1]+V.charAt(1):N}W=T[G-1]}return W===void 0?"":W})}}),yL}var bL={},wL;function Hne(){if(wL)return bL;wL=1;var e=mr(),t=mV(),r=fg();return hg()("search",1,function(n,i,s,o){return[function(u){var c=n(this),f=u==null?void 0:u[i];return f!==void 0?f.call(u,c):new RegExp(u)[i](String(c))},function(a){var u=o(s,a,this);if(u.done)return u.value;var c=e(a),f=String(this),h=c.lastIndex;t(h,0)||(c.lastIndex=0);var v=r(c,f);return t(c.lastIndex,h)||(c.lastIndex=h),v===null?-1:v.index}]}),bL}var xL={},by,SL;function Ph(){if(SL)return by;SL=1;var e=mr(),t=Qi(),r=En()("species");return by=function(n,i){var s=e(n).constructor,o;return s===void 0||(o=e(s)[r])==null?i:t(o)},by}var EL;function Wne(){if(EL)return xL;EL=1;var e=cg(),t=mr(),r=Ph(),n=f2(),i=Rn(),s=fg(),o=l2(),a=Zr(),u=Math.min,c=[].push,f="split",h="length",v="lastIndex",y=4294967295,m=!a(function(){});return hg()("split",2,function(_,w,S,E){var A;return"abbc"[f](/(b)*/)[1]=="c"||"test"[f](/(?:)/,-1)[h]!=4||"ab"[f](/(?:ab)*/)[h]!=2||"."[f](/(.?)(.?)/)[h]!=4||"."[f](/()()/)[h]>1||""[f](/.?/)[h]?A=function(T,I){var q=String(this);if(T===void 0&&I===0)return[];if(!e(T))return S.call(q,T,I);for(var p=[],C=(T.ignoreCase?"i":"")+(T.multiline?"m":"")+(T.unicode?"u":"")+(T.sticky?"y":""),O=0,N=I===void 0?y:I>>>0,V=new RegExp(T.source,C+"g"),W,G,ee;(W=o.call(V,q))&&(G=V[v],!(G>O&&(p.push(q.slice(O,W.index)),W[h]>1&&W.index<q[h]&&c.apply(p,W.slice(1)),ee=W[0][h],O=G,p[h]>=N)));)V[v]===W.index&&V[v]++;return O===q[h]?(ee||!V.test(""))&&p.push(""):p.push(q.slice(O)),p[h]>N?p.slice(0,N):p}:"0"[f](void 0,0)[h]?A=function(T,I){return T===void 0&&I===0?[]:S.call(this,T,I)}:A=S,[function(I,q){var p=_(this),C=I==null?void 0:I[w];return C!==void 0?C.call(I,p,q):A.call(String(p),I,q)},function(T,I){var q=E(A,T,this,I,A!==S);if(q.done)return q.value;var p=t(T),C=String(this),O=r(p,RegExp),N=p.unicode,V=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(m?"y":"g"),W=new O(m?p:"^(?:"+p.source+")",V),G=I===void 0?y:I>>>0;if(G===0)return[];if(C.length===0)return s(W,C)===null?[C]:[];for(var ee=0,ae=0,K=[];ae<C.length;){W.lastIndex=m?ae:0;var U=s(W,m?C:C.slice(ae)),j;if(U===null||(j=u(i(W.lastIndex+(m?0:ae)),C.length))===ee)ae=n(C,ae,N);else{if(K.push(C.slice(ee,ae)),K.length===G)return K;for(var J=1;J<=U.length-1;J++)if(K.push(U[J]),K.length===G)return K;ae=ee=j}}return K.push(C.slice(ee)),K}]}),xL}var AL={},wy,TL;function yc(){return TL||(TL=1,wy=function(e,t,r,n){if(!(e instanceof t)||n!==void 0&&n in e)throw TypeError(r+": incorrect invocation!");return e}),wy}var xy={exports:{}},PL;function _c(){if(PL)return xy.exports;PL=1;var e=No(),t=TV(),r=i2(),n=mr(),i=Rn(),s=o2(),o={},a={},u=xy.exports=function(c,f,h,v,y){var m=y?function(){return c}:s(c),_=e(h,v,f?2:1),w=0,S,E,A,T;if(typeof m!="function")throw TypeError(c+" is not iterable!");if(r(m)){for(S=i(c.length);S>w;w++)if(T=f?_(n(E=c[w])[0],E[1]):_(c[w]),T===o||T===a)return T}else for(A=m.call(c);!(E=A.next()).done;)if(T=t(A,_,E.value,f),T===o||T===a)return T};return u.BREAK=o,u.RETURN=a,xy.exports}var Sy,CL;function h2(){if(CL)return Sy;CL=1;var e=No(),t=yV(),r=WE(),n=$E(),i=Ur(),s=i.process,o=i.setImmediate,a=i.clearImmediate,u=i.MessageChannel,c=i.Dispatch,f=0,h={},v="onreadystatechange",y,m,_,w=function(){var E=+this;if(h.hasOwnProperty(E)){var A=h[E];delete h[E],A()}},S=function(E){w.call(E.data)};return(!o||!a)&&(o=function(A){for(var T=[],I=1;arguments.length>I;)T.push(arguments[I++]);return h[++f]=function(){t(typeof A=="function"?A:Function(A),T)},y(f),f},a=function(A){delete h[A]},qo()(s)=="process"?y=function(E){s.nextTick(e(w,E,1))}:c&&c.now?y=function(E){c.now(e(w,E,1))}:u?(m=new u,_=m.port2,m.port1.onmessage=S,y=e(_.postMessage,_,1)):i.addEventListener&&typeof postMessage=="function"&&!i.importScripts?(y=function(E){i.postMessage(E+"","*")},i.addEventListener("message",S,!1)):v in n("script")?y=function(E){r.appendChild(n("script"))[v]=function(){r.removeChild(this),w.call(E)}}:y=function(E){setTimeout(e(w,E,1),0)}),Sy={set:o,clear:a},Sy}var Ey,RL;function d2(){if(RL)return Ey;RL=1;var e=Ur(),t=h2().set,r=e.MutationObserver||e.WebKitMutationObserver,n=e.process,i=e.Promise,s=qo()(n)=="process";return Ey=function(){var o,a,u,c=function(){var y,m;for(s&&(y=n.domain)&&y.exit();o;){m=o.fn,o=o.next;try{m()}catch(_){throw o?u():a=void 0,_}}a=void 0,y&&y.enter()};if(s)u=function(){n.nextTick(c)};else if(r&&!(e.navigator&&e.navigator.standalone)){var f=!0,h=document.createTextNode("");new r(c).observe(h,{characterData:!0}),u=function(){h.data=f=!f}}else if(i&&i.resolve){var v=i.resolve(void 0);u=function(){v.then(c)}}else u=function(){t.call(e,c)};return function(y){var m={fn:y,next:void 0};a&&(a.next=m),o||(o=m,u()),a=m}},Ey}var Ay={},IL;function p2(){if(IL)return Ay;IL=1;var e=Qi();function t(r){var n,i;this.promise=new r(function(s,o){if(n!==void 0||i!==void 0)throw TypeError("Bad Promise constructor");n=s,i=o}),this.resolve=e(n),this.reject=e(i)}return Ay.f=function(r){return new t(r)},Ay}var Ty,OL;function MV(){return OL||(OL=1,Ty=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}),Ty}var Py,ML;function dg(){if(ML)return Py;ML=1;var e=Ur(),t=e.navigator;return Py=t&&t.userAgent||"",Py}var Cy,kL;function kV(){if(kL)return Cy;kL=1;var e=mr(),t=on(),r=p2();return Cy=function(n,i){if(e(n),t(i)&&i.constructor===n)return i;var s=r.f(n),o=s.resolve;return o(i),s.promise},Cy}var Ry,LL;function bc(){if(LL)return Ry;LL=1;var e=qs();return Ry=function(t,r,n){for(var i in r)e(t,i,r[i],n);return t},Ry}var NL;function Xne(){if(NL)return AL;NL=1;var e=Au(),t=Ur(),r=No(),n=ql(),i=ze(),s=on(),o=Qi(),a=yc(),u=_c(),c=Ph(),f=h2().set,h=d2()(),v=p2(),y=MV(),m=dg(),_=kV(),w="Promise",S=t.TypeError,E=t.process,A=E&&E.versions,T=A&&A.v8||"",I=t[w],q=n(E)=="process",p=function(){},C,O,N,V,W=O=v.f,G=!!function(){try{var ce=I.resolve(1),Te=(ce.constructor={})[En()("species")]=function(Se){Se(p,p)};return(q||typeof PromiseRejectionEvent=="function")&&ce.then(p)instanceof Te&&T.indexOf("6.6")!==0&&m.indexOf("Chrome/66")===-1}catch{}}(),ee=function(ce){var Te;return s(ce)&&typeof(Te=ce.then)=="function"?Te:!1},ae=function(ce,Te){if(!ce._n){ce._n=!0;var Se=ce._c;h(function(){for(var re=ce._v,oe=ce._s==1,ne=0,te=function(le){var We=oe?le.ok:le.fail,Ne=le.resolve,Re=le.reject,rt=le.domain,Ve,L,B;try{We?(oe||(ce._h==2&&j(ce),ce._h=1),We===!0?Ve=re:(rt&&rt.enter(),Ve=We(re),rt&&(rt.exit(),B=!0)),Ve===le.promise?Re(S("Promise-chain cycle")):(L=ee(Ve))?L.call(Ve,Ne,Re):Ne(Ve)):Re(re)}catch(H){rt&&!B&&rt.exit(),Re(H)}};Se.length>ne;)te(Se[ne++]);ce._c=[],ce._n=!1,Te&&!ce._h&&K(ce)})}},K=function(ce){f.call(t,function(){var Te=ce._v,Se=U(ce),re,oe,ne;if(Se&&(re=y(function(){q?E.emit("unhandledRejection",Te,ce):(oe=t.onunhandledrejection)?oe({promise:ce,reason:Te}):(ne=t.console)&&ne.error&&ne.error("Unhandled promise rejection",Te)}),ce._h=q||U(ce)?2:1),ce._a=void 0,Se&&re.e)throw re.v})},U=function(ce){return ce._h!==1&&(ce._a||ce._c).length===0},j=function(ce){f.call(t,function(){var Te;q?E.emit("rejectionHandled",ce):(Te=t.onrejectionhandled)&&Te({promise:ce,reason:ce._v})})},J=function(ce){var Te=this;Te._d||(Te._d=!0,Te=Te._w||Te,Te._v=ce,Te._s=2,Te._a||(Te._a=Te._c.slice()),ae(Te,!0))},de=function(ce){var Te=this,Se;if(!Te._d){Te._d=!0,Te=Te._w||Te;try{if(Te===ce)throw S("Promise can't be resolved itself");(Se=ee(ce))?h(function(){var re={_w:Te,_d:!1};try{Se.call(ce,r(de,re,1),r(J,re,1))}catch(oe){J.call(re,oe)}}):(Te._v=ce,Te._s=1,ae(Te,!1))}catch(re){J.call({_w:Te,_d:!1},re)}}};return G||(I=function(Te){a(this,I,w,"_h"),o(Te),C.call(this);try{Te(r(de,this,1),r(J,this,1))}catch(Se){J.call(this,Se)}},C=function(Te){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},C.prototype=bc()(I.prototype,{then:function(Te,Se){var re=W(c(this,I));return re.ok=typeof Te=="function"?Te:!0,re.fail=typeof Se=="function"&&Se,re.domain=q?E.domain:void 0,this._c.push(re),this._a&&this._a.push(re),this._s&&ae(this,!1),re.promise},catch:function(ce){return this.then(void 0,ce)}}),N=function(){var ce=new C;this.promise=ce,this.resolve=r(de,ce,1),this.reject=r(J,ce,1)},v.f=W=function(ce){return ce===I||ce===V?new N(ce):O(ce)}),i(i.G+i.W+i.F*!G,{Promise:I}),Nl()(I,w),mc()(w),V=Lo()[w],i(i.S+i.F*!G,w,{reject:function(Te){var Se=W(this),re=Se.reject;return re(Te),Se.promise}}),i(i.S+i.F*(e||!G),w,{resolve:function(Te){return _(e&&this===V?I:this,Te)}}),i(i.S+i.F*!(G&&lg()(function(ce){I.all(ce).catch(p)})),w,{all:function(Te){var Se=this,re=W(Se),oe=re.resolve,ne=re.reject,te=y(function(){var le=[],We=0,Ne=1;u(Te,!1,function(Re){var rt=We++,Ve=!1;le.push(void 0),Ne++,Se.resolve(Re).then(function(L){Ve||(Ve=!0,le[rt]=L,--Ne||oe(le))},ne)}),--Ne||oe(le)});return te.e&&ne(te.v),re.promise},race:function(Te){var Se=this,re=W(Se),oe=re.reject,ne=y(function(){u(Te,!1,function(te){Se.resolve(te).then(re.resolve,oe)})});return ne.e&&oe(ne.v),re.promise}}),AL}var Iy,qL;function sc(){if(qL)return Iy;qL=1;var e=on();return Iy=function(t,r){if(!e(t)||t._t!==r)throw TypeError("Incompatible receiver, "+r+" required!");return t},Iy}var Oy,DL;function LV(){if(DL)return Oy;DL=1;var e=Qn().f,t=gc(),r=bc(),n=No(),i=yc(),s=_c(),o=t2(),a=RV(),u=mc(),c=Dn(),f=Tu().fastKey,h=sc(),v=c?"_s":"size",y=function(m,_){var w=f(_),S;if(w!=="F")return m._i[w];for(S=m._f;S;S=S.n)if(S.k==_)return S};return Oy={getConstructor:function(m,_,w,S){var E=m(function(A,T){i(A,E,_,"_i"),A._t=_,A._i=t(null),A._f=void 0,A._l=void 0,A[v]=0,T!=null&&s(T,w,A[S],A)});return r(E.prototype,{clear:function(){for(var T=h(this,_),I=T._i,q=T._f;q;q=q.n)q.r=!0,q.p&&(q.p=q.p.n=void 0),delete I[q.i];T._f=T._l=void 0,T[v]=0},delete:function(A){var T=h(this,_),I=y(T,A);if(I){var q=I.n,p=I.p;delete T._i[I.i],I.r=!0,p&&(p.n=q),q&&(q.p=p),T._f==I&&(T._f=q),T._l==I&&(T._l=p),T[v]--}return!!I},forEach:function(T){h(this,_);for(var I=n(T,arguments.length>1?arguments[1]:void 0,3),q;q=q?q.n:this._f;)for(I(q.v,q.k,this);q&&q.r;)q=q.p},has:function(T){return!!y(h(this,_),T)}}),c&&e(E.prototype,"size",{get:function(){return h(this,_)[v]}}),E},def:function(m,_,w){var S=y(m,_),E,A;return S?S.v=w:(m._l=S={i:A=f(_,!0),k:_,v:w,p:E=m._l,n:void 0,r:!1},m._f||(m._f=S),E&&(E.n=S),m[v]++,A!=="F"&&(m._i[A]=S)),m},getEntry:y,setStrong:function(m,_,w){o(m,_,function(S,E){this._t=h(S,_),this._k=E,this._l=void 0},function(){for(var S=this,E=S._k,A=S._l;A&&A.r;)A=A.p;return!S._t||!(S._l=A=A?A.n:S._t._f)?(S._t=void 0,a(1)):E=="keys"?a(0,A.k):E=="values"?a(0,A.v):a(0,[A.k,A.v])},w?"entries":"values",!w,!0),u(_)}},Oy}var My,FL;function pg(){if(FL)return My;FL=1;var e=Ur(),t=ze(),r=qs(),n=bc(),i=Tu(),s=_c(),o=yc(),a=on(),u=Zr(),c=lg(),f=Nl(),h=KE();return My=function(v,y,m,_,w,S){var E=e[v],A=E,T=w?"set":"add",I=A&&A.prototype,q={},p=function(G){var ee=I[G];r(I,G,G=="delete"?function(ae){return S&&!a(ae)?!1:ee.call(this,ae===0?0:ae)}:G=="has"?function(K){return S&&!a(K)?!1:ee.call(this,K===0?0:K)}:G=="get"?function(K){return S&&!a(K)?void 0:ee.call(this,K===0?0:K)}:G=="add"?function(K){return ee.call(this,K===0?0:K),this}:function(K,U){return ee.call(this,K===0?0:K,U),this})};if(typeof A!="function"||!(S||I.forEach&&!u(function(){new A().entries().next()})))A=_.getConstructor(y,v,w,T),n(A.prototype,m),i.NEED=!0;else{var C=new A,O=C[T](S?{}:-0,1)!=C,N=u(function(){C.has(1)}),V=c(function(G){new A(G)}),W=!S&&u(function(){for(var G=new A,ee=5;ee--;)G[T](ee,ee);return!G.has(-0)});V||(A=y(function(G,ee){o(G,A,v);var ae=h(new E,G,A);return ee!=null&&s(ee,w,ae[T],ae),ae}),A.prototype=I,I.constructor=A),(N||W)&&(p("delete"),p("has"),w&&p("get")),(W||O)&&p(T),S&&I.clear&&delete I.clear}return f(A,v),q[v]=A,t(t.G+t.W+t.F*(A!=E),q),S||_.setStrong(A,v,w),A},My}var ky,BL;function NV(){if(BL)return ky;BL=1;var e=LV(),t=sc(),r="Map";return ky=pg()(r,function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}},{get:function(i){var s=e.getEntry(t(this,r),i);return s&&s.v},set:function(i,s){return e.def(t(this,r),i===0?0:i,s)}},e,!0),ky}var Ly,zL;function qV(){if(zL)return Ly;zL=1;var e=LV(),t=sc(),r="Set";return Ly=pg()(r,function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}},{add:function(i){return e.def(t(this,r),i=i===0?0:i,i)}},e),Ly}var Ny={exports:{}},qy,VL;function DV(){if(VL)return qy;VL=1;var e=bc(),t=Tu().getWeak,r=mr(),n=on(),i=yc(),s=_c(),o=ma(),a=ao(),u=sc(),c=o(5),f=o(6),h=0,v=function(_){return _._l||(_._l=new y)},y=function(){this.a=[]},m=function(_,w){return c(_.a,function(S){return S[0]===w})};return y.prototype={get:function(_){var w=m(this,_);if(w)return w[1]},has:function(_){return!!m(this,_)},set:function(_,w){var S=m(this,_);S?S[1]=w:this.a.push([_,w])},delete:function(_){var w=f(this.a,function(S){return S[0]===_});return~w&&this.a.splice(w,1),!!~w}},qy={getConstructor:function(_,w,S,E){var A=_(function(T,I){i(T,A,w,"_i"),T._t=w,T._i=h++,T._l=void 0,I!=null&&s(I,S,T[E],T)});return e(A.prototype,{delete:function(T){if(!n(T))return!1;var I=t(T);return I===!0?v(u(this,w)).delete(T):I&&a(I,this._i)&&delete I[this._i]},has:function(I){if(!n(I))return!1;var q=t(I);return q===!0?v(u(this,w)).has(I):q&&a(q,this._i)}}),A},def:function(_,w,S){var E=t(r(w),!0);return E===!0?v(_).set(w,S):E[_._i]=S,_},ufstore:v},qy}var GL;function FV(){if(GL)return Ny.exports;GL=1;var e=Ur(),t=ma()(0),r=qs(),n=Tu(),i=vV(),s=DV(),o=on(),a=sc(),u=sc(),c=!e.ActiveXObject&&"ActiveXObject"in e,f="WeakMap",h=n.getWeak,v=Object.isExtensible,y=s.ufstore,m,_=function(E){return function(){return E(this,arguments.length>0?arguments[0]:void 0)}},w={get:function(A){if(o(A)){var T=h(A);return T===!0?y(a(this,f)).get(A):T?T[this._i]:void 0}},set:function(A,T){return s.def(a(this,f),A,T)}},S=Ny.exports=pg()(f,_,w,s,!0,!0);return u&&c&&(m=s.getConstructor(_,f),i(m.prototype,w),n.NEED=!0,t(["delete","has","get","set"],function(E){var A=S.prototype,T=A[E];r(A,E,function(I,q){if(o(I)&&!v(I)){this._f||(this._f=new m);var p=this._f[E](I,q);return E=="set"?this:p}return T.call(this,I,q)})})),Ny.exports}var $L={},UL;function Yne(){if(UL)return $L;UL=1;var e=DV(),t=sc(),r="WeakSet";return pg()(r,function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}},{add:function(i){return e.def(t(this,r),i,!0)}},e,!1,!0),$L}var jL={},Dy,HL;function gg(){if(HL)return Dy;HL=1;for(var e=Ur(),t=Ns(),r=hc(),n=r("typed_array"),i=r("view"),s=!!(e.ArrayBuffer&&e.DataView),o=s,a=0,u=9,c,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");a<u;)(c=e[f[a++]])?(t(c.prototype,n,!0),t(c.prototype,i,!0)):o=!1;return Dy={ABV:s,CONSTR:o,TYPED:n,VIEW:i},Dy}var Fy={},By,WL;function BV(){if(WL)return By;WL=1;var e=Do(),t=Rn();return By=function(r){if(r===void 0)return 0;var n=e(r),i=t(n);if(n!==i)throw RangeError("Wrong length!");return i},By}var XL;function g2(){return XL||(XL=1,function(e){var t=Ur(),r=Dn(),n=Au(),i=gg(),s=Ns(),o=bc(),a=Zr(),u=yc(),c=Do(),f=Rn(),h=BV(),v=vc().f,y=Qn().f,m=u2(),_=Nl(),w="ArrayBuffer",S="DataView",E="prototype",A="Wrong length!",T="Wrong index!",I=t[w],q=t[S],p=t.Math,C=t.RangeError,O=t.Infinity,N=I,V=p.abs,W=p.pow,G=p.floor,ee=p.log,ae=p.LN2,K="buffer",U="byteLength",j="byteOffset",J=r?"_b":K,de=r?"_l":U,ce=r?"_o":j;function Te(ue,Ae,Ce){var Be=new Array(Ce),Le=Ce*8-Ae-1,Ie=(1<<Le)-1,be=Ie>>1,je=Ae===23?W(2,-24)-W(2,-77):0,ct=0,mt=ue<0||ue===0&&1/ue<0?1:0,ft,it,Ht;for(ue=V(ue),ue!=ue||ue===O?(it=ue!=ue?1:0,ft=Ie):(ft=G(ee(ue)/ae),ue*(Ht=W(2,-ft))<1&&(ft--,Ht*=2),ft+be>=1?ue+=je/Ht:ue+=je*W(2,1-be),ue*Ht>=2&&(ft++,Ht/=2),ft+be>=Ie?(it=0,ft=Ie):ft+be>=1?(it=(ue*Ht-1)*W(2,Ae),ft=ft+be):(it=ue*W(2,be-1)*W(2,Ae),ft=0));Ae>=8;Be[ct++]=it&255,it/=256,Ae-=8);for(ft=ft<<Ae|it,Le+=Ae;Le>0;Be[ct++]=ft&255,ft/=256,Le-=8);return Be[--ct]|=mt*128,Be}function Se(ue,Ae,Ce){var Be=Ce*8-Ae-1,Le=(1<<Be)-1,Ie=Le>>1,be=Be-7,je=Ce-1,ct=ue[je--],mt=ct&127,ft;for(ct>>=7;be>0;mt=mt*256+ue[je],je--,be-=8);for(ft=mt&(1<<-be)-1,mt>>=-be,be+=Ae;be>0;ft=ft*256+ue[je],je--,be-=8);if(mt===0)mt=1-Ie;else{if(mt===Le)return ft?NaN:ct?-O:O;ft=ft+W(2,Ae),mt=mt-Ie}return(ct?-1:1)*ft*W(2,mt-Ae)}function re(ue){return ue[3]<<24|ue[2]<<16|ue[1]<<8|ue[0]}function oe(ue){return[ue&255]}function ne(ue){return[ue&255,ue>>8&255]}function te(ue){return[ue&255,ue>>8&255,ue>>16&255,ue>>24&255]}function le(ue){return Te(ue,52,8)}function We(ue){return Te(ue,23,4)}function Ne(ue,Ae,Ce){y(ue[E],Ae,{get:function(){return this[Ce]}})}function Re(ue,Ae,Ce,Be){var Le=+Ce,Ie=h(Le);if(Ie+Ae>ue[de])throw C(T);var be=ue[J]._b,je=Ie+ue[ce],ct=be.slice(je,je+Ae);return Be?ct:ct.reverse()}function rt(ue,Ae,Ce,Be,Le,Ie){var be=+Ce,je=h(be);if(je+Ae>ue[de])throw C(T);for(var ct=ue[J]._b,mt=je+ue[ce],ft=Be(+Le),it=0;it<Ae;it++)ct[mt+it]=ft[Ie?it:Ae-it-1]}if(!i.ABV)I=function(Ae){u(this,I,w);var Ce=h(Ae);this._b=m.call(new Array(Ce),0),this[de]=Ce},q=function(Ae,Ce,Be){u(this,q,S),u(Ae,I,S);var Le=Ae[de],Ie=c(Ce);if(Ie<0||Ie>Le)throw C("Wrong offset!");if(Be=Be===void 0?Le-Ie:f(Be),Ie+Be>Le)throw C(A);this[J]=Ae,this[ce]=Ie,this[de]=Be},r&&(Ne(I,U,"_l"),Ne(q,K,"_b"),Ne(q,U,"_l"),Ne(q,j,"_o")),o(q[E],{getInt8:function(Ae){return Re(this,1,Ae)[0]<<24>>24},getUint8:function(Ae){return Re(this,1,Ae)[0]},getInt16:function(Ae){var Ce=Re(this,2,Ae,arguments[1]);return(Ce[1]<<8|Ce[0])<<16>>16},getUint16:function(Ae){var Ce=Re(this,2,Ae,arguments[1]);return Ce[1]<<8|Ce[0]},getInt32:function(Ae){return re(Re(this,4,Ae,arguments[1]))},getUint32:function(Ae){return re(Re(this,4,Ae,arguments[1]))>>>0},getFloat32:function(Ae){return Se(Re(this,4,Ae,arguments[1]),23,4)},getFloat64:function(Ae){return Se(Re(this,8,Ae,arguments[1]),52,8)},setInt8:function(Ae,Ce){rt(this,1,Ae,oe,Ce)},setUint8:function(Ae,Ce){rt(this,1,Ae,oe,Ce)},setInt16:function(Ae,Ce){rt(this,2,Ae,ne,Ce,arguments[2])},setUint16:function(Ae,Ce){rt(this,2,Ae,ne,Ce,arguments[2])},setInt32:function(Ae,Ce){rt(this,4,Ae,te,Ce,arguments[2])},setUint32:function(Ae,Ce){rt(this,4,Ae,te,Ce,arguments[2])},setFloat32:function(Ae,Ce){rt(this,4,Ae,We,Ce,arguments[2])},setFloat64:function(Ae,Ce){rt(this,8,Ae,le,Ce,arguments[2])}});else{if(!a(function(){I(1)})||!a(function(){new I(-1)})||a(function(){return new I,new I(1.5),new I(NaN),I.name!=w})){I=function(Ae){return u(this,I),new N(h(Ae))};for(var Ve=I[E]=N[E],L=v(N),B=0,H;L.length>B;)(H=L[B++])in I||s(I,H,N[H]);n||(Ve.constructor=I)}var X=new q(new I(2)),xe=q[E].setInt8;X.setInt8(0,2147483648),X.setInt8(1,2147483649),(X.getInt8(0)||!X.getInt8(1))&&o(q[E],{setInt8:function(Ae,Ce){xe.call(this,Ae,Ce<<24>>24)},setUint8:function(Ae,Ce){xe.call(this,Ae,Ce<<24>>24)}},!0)}_(I,w),_(q,S),s(q[E],i.VIEW,!0),e[w]=I,e[S]=q}(Fy)),Fy}var YL;function Kne(){if(YL)return jL;YL=1;var e=ze(),t=gg(),r=g2(),n=mr(),i=dc(),s=Rn(),o=on(),a=Ur().ArrayBuffer,u=Ph(),c=r.ArrayBuffer,f=r.DataView,h=t.ABV&&a.isView,v=c.prototype.slice,y=t.VIEW,m="ArrayBuffer";return e(e.G+e.W+e.F*(a!==c),{ArrayBuffer:c}),e(e.S+e.F*!t.CONSTR,m,{isView:function(w){return h&&h(w)||o(w)&&y in w}}),e(e.P+e.U+e.F*Zr()(function(){return!new c(2).slice(1,void 0).byteLength}),m,{slice:function(w,S){if(v!==void 0&&S===void 0)return v.call(n(this),w);for(var E=n(this).byteLength,A=i(w,E),T=i(S===void 0?E:S,E),I=new(u(this,c))(s(T-A)),q=new f(this),p=new f(I),C=0;A<T;)p.setUint8(C++,q.getUint8(A++));return I}}),mc()(m),jL}var KL={},ZL;function Zne(){if(ZL)return KL;ZL=1;var e=ze();return e(e.G+e.W+e.F*!gg().ABV,{DataView:g2().DataView}),KL}var JL={},Wd={exports:{}},QL;function ja(){if(QL)return Wd.exports;if(QL=1,Dn()){var e=Au(),t=Ur(),r=Zr(),n=ze(),i=gg(),s=g2(),o=No(),a=yc(),u=fc(),c=Ns(),f=bc(),h=Do(),v=Rn(),y=BV(),m=dc(),_=pa(),w=ao(),S=ql(),E=on(),A=ii(),T=i2(),I=gc(),q=lo(),p=vc().f,C=o2(),O=hc(),N=En(),V=ma(),W=sg(),G=Ph(),ee=c2(),ae=Fl(),K=lg(),U=mc(),j=u2(),J=CV(),de=Qn(),ce=co(),Te=de.f,Se=ce.f,re=t.RangeError,oe=t.TypeError,ne=t.Uint8Array,te="ArrayBuffer",le="Shared"+te,We="BYTES_PER_ELEMENT",Ne="prototype",Re=Array[Ne],rt=s.ArrayBuffer,Ve=s.DataView,L=V(0),B=V(2),H=V(3),X=V(4),xe=V(5),ue=V(6),Ae=W(!0),Ce=W(!1),Be=ee.values,Le=ee.keys,Ie=ee.entries,be=Re.lastIndexOf,je=Re.reduce,ct=Re.reduceRight,mt=Re.join,ft=Re.sort,it=Re.slice,Ht=Re.toString,yr=Re.toLocaleString,Qt=N("iterator"),cr=N("toStringTag"),Lr=O("typed_constructor"),Br=O("def_constructor"),bn=i.CONSTR,tr=i.TYPED,Ir=i.VIEW,vn="Wrong length!",mn=V(1,function(at,He){return Ft(G(at,at[Br]),He)}),pn=r(function(){return new ne(new Uint16Array([1]).buffer)[0]===1}),Gn=!!ne&&!!ne[Ne].set&&r(function(){new ne(1).set({})}),ei=function(at,He){var yt=h(at);if(yt<0||yt%He)throw re("Wrong offset!");return yt},Bt=function(at){if(E(at)&&tr in at)return at;throw oe(at+" is not a typed array!")},Ft=function(at,He){if(!(E(at)&&Lr in at))throw oe("It is not a typed array constructor!");return new at(He)},zr=function(at,He){return Fn(G(at,at[Br]),He)},Fn=function(at,He){for(var yt=0,Tt=He.length,zt=Ft(at,Tt);Tt>yt;)zt[yt]=He[yt++];return zt},wn=function(at,He,yt){Te(at,He,{get:function(){return this._d[yt]}})},jr=function(He){var yt=A(He),Tt=arguments.length,zt=Tt>1?arguments[1]:void 0,an=zt!==void 0,jn=C(yt),Mt,en,xr,Nr,Vr,Sr;if(jn!=null&&!T(jn)){for(Sr=jn.call(yt),xr=[],Mt=0;!(Vr=Sr.next()).done;Mt++)xr.push(Vr.value);yt=xr}for(an&&Tt>2&&(zt=o(zt,arguments[2],2)),Mt=0,en=v(yt.length),Nr=Ft(this,en);en>Mt;Mt++)Nr[Mt]=an?zt(yt[Mt],Mt):yt[Mt];return Nr},$n=function(){for(var He=0,yt=arguments.length,Tt=Ft(this,yt);yt>He;)Tt[He]=arguments[He++];return Tt},hi=!!ne&&r(function(){yr.call(new ne(1))}),Jr=function(){return yr.apply(hi?it.call(Bt(this)):Bt(this),arguments)},Un={copyWithin:function(He,yt){return J.call(Bt(this),He,yt,arguments.length>2?arguments[2]:void 0)},every:function(He){return X(Bt(this),He,arguments.length>1?arguments[1]:void 0)},fill:function(He){return j.apply(Bt(this),arguments)},filter:function(He){return zr(this,B(Bt(this),He,arguments.length>1?arguments[1]:void 0))},find:function(He){return xe(Bt(this),He,arguments.length>1?arguments[1]:void 0)},findIndex:function(He){return ue(Bt(this),He,arguments.length>1?arguments[1]:void 0)},forEach:function(He){L(Bt(this),He,arguments.length>1?arguments[1]:void 0)},indexOf:function(He){return Ce(Bt(this),He,arguments.length>1?arguments[1]:void 0)},includes:function(He){return Ae(Bt(this),He,arguments.length>1?arguments[1]:void 0)},join:function(He){return mt.apply(Bt(this),arguments)},lastIndexOf:function(He){return be.apply(Bt(this),arguments)},map:function(He){return mn(Bt(this),He,arguments.length>1?arguments[1]:void 0)},reduce:function(He){return je.apply(Bt(this),arguments)},reduceRight:function(He){return ct.apply(Bt(this),arguments)},reverse:function(){for(var He=this,yt=Bt(He).length,Tt=Math.floor(yt/2),zt=0,an;zt<Tt;)an=He[zt],He[zt++]=He[--yt],He[yt]=an;return He},some:function(He){return H(Bt(this),He,arguments.length>1?arguments[1]:void 0)},sort:function(He){return ft.call(Bt(this),He)},subarray:function(He,yt){var Tt=Bt(this),zt=Tt.length,an=m(He,zt);return new(G(Tt,Tt[Br]))(Tt.buffer,Tt.byteOffset+an*Tt.BYTES_PER_ELEMENT,v((yt===void 0?zt:m(yt,zt))-an))}},On=function(He,yt){return zr(this,it.call(Bt(this),He,yt))},di=function(He){Bt(this);var yt=ei(arguments[1],1),Tt=this.length,zt=A(He),an=v(zt.length),jn=0;if(an+yt>Tt)throw re(vn);for(;jn<an;)this[yt+jn]=zt[jn++]},Xe={entries:function(){return Ie.call(Bt(this))},keys:function(){return Le.call(Bt(this))},values:function(){return Be.call(Bt(this))}},Et=function(at,He){return E(at)&&at[tr]&&typeof He!="symbol"&&He in at&&String(+He)==String(He)},Rt=function(He,yt){return Et(He,yt=_(yt,!0))?u(2,He[yt]):Se(He,yt)},kt=function(He,yt,Tt){return Et(He,yt=_(yt,!0))&&E(Tt)&&w(Tt,"value")&&!w(Tt,"get")&&!w(Tt,"set")&&!Tt.configurable&&(!w(Tt,"writable")||Tt.writable)&&(!w(Tt,"enumerable")||Tt.enumerable)?(He[yt]=Tt.value,He):Te(He,yt,Tt)};bn||(ce.f=Rt,de.f=kt),n(n.S+n.F*!bn,"Object",{getOwnPropertyDescriptor:Rt,defineProperty:kt}),r(function(){Ht.call({})})&&(Ht=yr=function(){return mt.call(this)});var Lt=f({},Un);f(Lt,Xe),c(Lt,Qt,Xe.values),f(Lt,{slice:On,set:di,constructor:function(){},toString:Ht,toLocaleString:Jr}),wn(Lt,"buffer","b"),wn(Lt,"byteOffset","o"),wn(Lt,"byteLength","l"),wn(Lt,"length","e"),Te(Lt,cr,{get:function(){return this[tr]}}),Wd.exports=function(at,He,yt,Tt){Tt=!!Tt;var zt=at+(Tt?"Clamped":"")+"Array",an="get"+at,jn="set"+at,Mt=t[zt],en=Mt||{},xr=Mt&&q(Mt),Nr=!Mt||!i.ABV,Vr={},Sr=Mt&&Mt[Ne],xn=function(gt,ht){var dt=gt._d;return dt.v[an](ht*He+dt.o,pn)},Xt=function(gt,ht,dt){var Ct=gt._d;Tt&&(dt=(dt=Math.round(dt))<0?0:dt>255?255:dt&255),Ct.v[jn](ht*He+Ct.o,dt,pn)},pi=function(gt,ht){Te(gt,ht,{get:function(){return xn(this,ht)},set:function(dt){return Xt(this,ht,dt)},enumerable:!0})};Nr?(Mt=yt(function(gt,ht,dt,Ct){a(gt,Mt,zt,"_d");var rr=0,Hr=0,cn,Gr,yn,Bn;if(!E(ht))yn=y(ht),Gr=yn*He,cn=new rt(Gr);else if(ht instanceof rt||(Bn=S(ht))==te||Bn==le){cn=ht,Hr=ei(dt,He);var gi=ht.byteLength;if(Ct===void 0){if(gi%He||(Gr=gi-Hr,Gr<0))throw re(vn)}else if(Gr=v(Ct)*He,Gr+Hr>gi)throw re(vn);yn=Gr/He}else return tr in ht?Fn(Mt,ht):jr.call(Mt,ht);for(c(gt,"_d",{b:cn,o:Hr,l:Gr,e:yn,v:new Ve(cn)});rr<yn;)pi(gt,rr++)}),Sr=Mt[Ne]=I(Lt),c(Sr,"constructor",Mt)):(!r(function(){Mt(1)})||!r(function(){new Mt(-1)})||!K(function(gt){new Mt,new Mt(null),new Mt(1.5),new Mt(gt)},!0))&&(Mt=yt(function(gt,ht,dt,Ct){a(gt,Mt,zt);var rr;return E(ht)?ht instanceof rt||(rr=S(ht))==te||rr==le?Ct!==void 0?new en(ht,ei(dt,He),Ct):dt!==void 0?new en(ht,ei(dt,He)):new en(ht):tr in ht?Fn(Mt,ht):jr.call(Mt,ht):new en(y(ht))}),L(xr!==Function.prototype?p(en).concat(p(xr)):p(en),function(gt){gt in Mt||c(Mt,gt,en[gt])}),Mt[Ne]=Sr,e||(Sr.constructor=Mt));var wi=Sr[Qt],qi=!!wi&&(wi.name=="values"||wi.name==null),Ze=Xe.values;c(Mt,Lr,!0),c(Sr,tr,zt),c(Sr,Ir,!0),c(Sr,Br,Mt),(Tt?new Mt(1)[cr]!=zt:!(cr in Sr))&&Te(Sr,cr,{get:function(){return zt}}),Vr[zt]=Mt,n(n.G+n.W+n.F*(Mt!=en),Vr),n(n.S,zt,{BYTES_PER_ELEMENT:He}),n(n.S+n.F*r(function(){en.of.call(Mt,1)}),zt,{from:jr,of:$n}),We in Sr||c(Sr,We,He),n(n.P,zt,Un),U(zt),n(n.P+n.F*Gn,zt,{set:di}),n(n.P+n.F*!qi,zt,Xe),!e&&Sr.toString!=Ht&&(Sr.toString=Ht),n(n.P+n.F*r(function(){new Mt(1).slice()}),zt,{slice:On}),n(n.P+n.F*(r(function(){return[1,2].toLocaleString()!=new Mt([1,2]).toLocaleString()})||!r(function(){Sr.toLocaleString.call([1,2])})),zt,{toLocaleString:Jr}),ae[zt]=qi?wi:Ze,!e&&!qi&&c(Sr,Qt,Ze)}}else Wd.exports=function(){};return Wd.exports}var eN;function Jne(){return eN||(eN=1,ja()("Int8",1,function(e){return function(r,n,i){return e(this,r,n,i)}})),JL}var tN={},rN;function Qne(){return rN||(rN=1,ja()("Uint8",1,function(e){return function(r,n,i){return e(this,r,n,i)}})),tN}var nN={},iN;function eie(){return iN||(iN=1,ja()("Uint8",1,function(e){return function(r,n,i){return e(this,r,n,i)}},!0)),nN}var sN={},oN;function tie(){return oN||(oN=1,ja()("Int16",2,function(e){return function(r,n,i){return e(this,r,n,i)}})),sN}var aN={},uN;function rie(){return uN||(uN=1,ja()("Uint16",2,function(e){return function(r,n,i){return e(this,r,n,i)}})),aN}var cN={},lN;function nie(){return lN||(lN=1,ja()("Int32",4,function(e){return function(r,n,i){return e(this,r,n,i)}})),cN}var fN={},hN;function iie(){return hN||(hN=1,ja()("Uint32",4,function(e){return function(r,n,i){return e(this,r,n,i)}})),fN}var dN={},pN;function sie(){return pN||(pN=1,ja()("Float32",4,function(e){return function(r,n,i){return e(this,r,n,i)}})),dN}var gN={},vN;function oie(){return vN||(vN=1,ja()("Float64",8,function(e){return function(r,n,i){return e(this,r,n,i)}})),gN}var mN={},yN;function aie(){if(yN)return mN;yN=1;var e=ze(),t=Qi(),r=mr(),n=(Ur().Reflect||{}).apply,i=Function.apply;return e(e.S+e.F*!Zr()(function(){n(function(){})}),"Reflect",{apply:function(o,a,u){var c=t(o),f=r(u);return n?n(c,a,f):i.call(c,a,f)}}),mN}var _N={},bN;function uie(){if(bN)return _N;bN=1;var e=ze(),t=gc(),r=Qi(),n=mr(),i=on(),s=Zr(),o=_V(),a=(Ur().Reflect||{}).construct,u=s(function(){function f(){}return!(a(function(){},[],f)instanceof f)}),c=!s(function(){a(function(){})});return e(e.S+e.F*(u||c),"Reflect",{construct:function(h,v){r(h),n(v);var y=arguments.length<3?h:r(arguments[2]);if(c&&!u)return a(h,v,y);if(h==y){switch(v.length){case 0:return new h;case 1:return new h(v[0]);case 2:return new h(v[0],v[1]);case 3:return new h(v[0],v[1],v[2]);case 4:return new h(v[0],v[1],v[2],v[3])}var m=[null];return m.push.apply(m,v),new(o.apply(h,m))}var _=y.prototype,w=t(i(_)?_:Object.prototype),S=Function.apply.call(h,w,v);return i(S)?S:w}}),_N}var wN={},xN;function cie(){if(xN)return wN;xN=1;var e=Qn(),t=ze(),r=mr(),n=pa();return t(t.S+t.F*Zr()(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(s,o,a){r(s),o=n(o,!0),r(a);try{return e.f(s,o,a),!0}catch{return!1}}}),wN}var SN={},EN;function lie(){if(EN)return SN;EN=1;var e=ze(),t=co().f,r=mr();return e(e.S,"Reflect",{deleteProperty:function(i,s){var o=t(r(i),s);return o&&!o.configurable?!1:delete i[s]}}),SN}var AN={},TN;function fie(){if(TN)return AN;TN=1;var e=ze(),t=mr(),r=function(n){this._t=t(n),this._i=0;var i=this._k=[],s;for(s in n)i.push(s)};return e2()(r,"Object",function(){var n=this,i=n._k,s;do if(n._i>=i.length)return{value:void 0,done:!0};while(!((s=i[n._i++])in n._t));return{value:s,done:!1}}),e(e.S,"Reflect",{enumerate:function(i){return new r(i)}}),AN}var PN={},CN;function hie(){if(CN)return PN;CN=1;var e=co(),t=lo(),r=ao(),n=ze(),i=on(),s=mr();function o(a,u){var c=arguments.length<3?a:arguments[2],f,h;if(s(a)===c)return a[u];if(f=e.f(a,u))return r(f,"value")?f.value:f.get!==void 0?f.get.call(c):void 0;if(i(h=t(a)))return o(h,u,c)}return n(n.S,"Reflect",{get:o}),PN}var RN={},IN;function die(){if(IN)return RN;IN=1;var e=co(),t=ze(),r=mr();return t(t.S,"Reflect",{getOwnPropertyDescriptor:function(i,s){return e.f(r(i),s)}}),RN}var ON={},MN;function pie(){if(MN)return ON;MN=1;var e=ze(),t=lo(),r=mr();return e(e.S,"Reflect",{getPrototypeOf:function(i){return t(r(i))}}),ON}var kN={},LN;function gie(){if(LN)return kN;LN=1;var e=ze();return e(e.S,"Reflect",{has:function(r,n){return n in r}}),kN}var NN={},qN;function vie(){if(qN)return NN;qN=1;var e=ze(),t=mr(),r=Object.isExtensible;return e(e.S,"Reflect",{isExtensible:function(i){return t(i),r?r(i):!0}}),NN}var DN={},zy,FN;function zV(){if(FN)return zy;FN=1;var e=vc(),t=og(),r=mr(),n=Ur().Reflect;return zy=n&&n.ownKeys||function(s){var o=e.f(r(s)),a=t.f;return a?o.concat(a(s)):o},zy}var BN;function mie(){if(BN)return DN;BN=1;var e=ze();return e(e.S,"Reflect",{ownKeys:zV()}),DN}var zN={},VN;function yie(){if(VN)return zN;VN=1;var e=ze(),t=mr(),r=Object.preventExtensions;return e(e.S,"Reflect",{preventExtensions:function(i){t(i);try{return r&&r(i),!0}catch{return!1}}}),zN}var GN={},$N;function _ie(){if($N)return GN;$N=1;var e=Qn(),t=co(),r=lo(),n=ao(),i=ze(),s=fc(),o=mr(),a=on();function u(c,f,h){var v=arguments.length<4?c:arguments[3],y=t.f(o(c),f),m,_;if(!y){if(a(_=r(c)))return u(_,f,h,v);y=s(0)}if(n(y,"value")){if(y.writable===!1||!a(v))return!1;if(m=t.f(v,f)){if(m.get||m.set||m.writable===!1)return!1;m.value=h,e.f(v,f,m)}else e.f(v,f,s(0,h));return!0}return y.set===void 0?!1:(y.set.call(v,h),!0)}return i(i.S,"Reflect",{set:u}),GN}var UN={},jN;function bie(){if(jN)return UN;jN=1;var e=ze(),t=XE();return t&&e(e.S,"Reflect",{setPrototypeOf:function(n,i){t.check(n,i);try{return t.set(n,i),!0}catch{return!1}}}),UN}var HN={},WN;function wie(){if(WN)return HN;WN=1;var e=ze(),t=sg()(!0);return e(e.P,"Array",{includes:function(n){return t(this,n,arguments.length>1?arguments[1]:void 0)}}),Pu()("includes"),HN}var XN={},Vy,YN;function VV(){if(YN)return Vy;YN=1;var e=ag(),t=on(),r=Rn(),n=No(),i=En()("isConcatSpreadable");function s(o,a,u,c,f,h,v,y){for(var m=f,_=0,w=v?n(v,y,3):!1,S,E;_<c;){if(_ in u){if(S=w?w(u[_],_,a):u[_],E=!1,t(S)&&(E=S[i],E=E!==void 0?!!E:e(S)),E&&h>0)m=s(o,a,S,r(S.length),m,h-1)-1;else{if(m>=9007199254740991)throw TypeError();o[m]=S}m++}_++}return m}return Vy=s,Vy}var KN;function xie(){if(KN)return XN;KN=1;var e=ze(),t=VV(),r=ii(),n=Rn(),i=Qi(),s=a2();return e(e.P,"Array",{flatMap:function(a){var u=r(this),c,f;return i(a),c=n(u.length),f=s(u,0),t(f,u,u,c,0,1,a,arguments[1]),f}}),Pu()("flatMap"),XN}var ZN={},JN;function Sie(){if(JN)return ZN;JN=1;var e=ze(),t=VV(),r=ii(),n=Rn(),i=Do(),s=a2();return e(e.P,"Array",{flatten:function(){var a=arguments[0],u=r(this),c=n(u.length),f=s(u,0);return t(f,u,u,c,0,a===void 0?1:i(a)),f}}),Pu()("flatten"),ZN}var QN={},eq;function Eie(){if(eq)return QN;eq=1;var e=ze(),t=ug()(!0),r=Zr(),n=r(function(){return"ð ®·".at(0)!=="ð ®·"});return e(e.P+e.F*n,"String",{at:function(s){return t(this,s)}}),QN}var tq={},Gy,rq;function GV(){if(rq)return Gy;rq=1;var e=Rn(),t=ZE(),r=ga();return Gy=function(n,i,s,o){var a=String(r(n)),u=a.length,c=s===void 0?" ":String(s),f=e(i);if(f<=u||c=="")return a;var h=f-u,v=t.call(c,Math.ceil(h/c.length));return v.length>h&&(v=v.slice(0,h)),o?v+a:a+v},Gy}var nq;function Aie(){if(nq)return tq;nq=1;var e=ze(),t=GV(),r=dg(),n=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);return e(e.P+e.F*n,"String",{padStart:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0,!0)}}),tq}var iq={},sq;function Tie(){if(sq)return iq;sq=1;var e=ze(),t=GV(),r=dg(),n=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);return e(e.P+e.F*n,"String",{padEnd:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0,!1)}}),iq}var oq={},aq;function Pie(){return aq||(aq=1,Dl()("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")),oq}var uq={},cq;function Cie(){return cq||(cq=1,Dl()("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")),uq}var lq={},fq;function Rie(){if(fq)return lq;fq=1;var e=ze(),t=ga(),r=Rn(),n=cg(),i=Th(),s=RegExp.prototype,o=function(a,u){this._r=a,this._s=u};return e2()(o,"RegExp String",function(){var u=this._r.exec(this._s);return{value:u,done:u===null}}),e(e.P,"String",{matchAll:function(u){if(t(this),!n(u))throw TypeError(u+" is not a regexp!");var c=String(this),f="flags"in s?String(u.flags):i.call(u),h=new RegExp(u.source,~f.indexOf("g")?f:"g"+f);return h.lastIndex=r(u.lastIndex),new o(h,c)}}),lq}var hq={},dq;function Iie(){return dq||(dq=1,UE()("asyncIterator")),hq}var pq={},gq;function Oie(){return gq||(gq=1,UE()("observable")),pq}var vq={},mq;function Mie(){if(mq)return vq;mq=1;var e=ze(),t=zV(),r=uo(),n=co(),i=s2();return e(e.S,"Object",{getOwnPropertyDescriptors:function(o){for(var a=r(o),u=n.f,c=t(a),f={},h=0,v,y;c.length>h;)y=u(a,v=c[h++]),y!==void 0&&i(f,v,y);return f}}),vq}var yq={},$y,_q;function $V(){if(_q)return $y;_q=1;var e=Dn(),t=pc(),r=uo(),n=Ah().f;return $y=function(i){return function(s){for(var o=r(s),a=t(o),u=a.length,c=0,f=[],h;u>c;)h=a[c++],(!e||n.call(o,h))&&f.push(i?[h,o[h]]:o[h]);return f}},$y}var bq;function kie(){if(bq)return yq;bq=1;var e=ze(),t=$V()(!1);return e(e.S,"Object",{values:function(n){return t(n)}}),yq}var wq={},xq;function Lie(){if(xq)return wq;xq=1;var e=ze(),t=$V()(!0);return e(e.S,"Object",{entries:function(n){return t(n)}}),wq}var Sq={},Uy,Eq;function vg(){return Eq||(Eq=1,Uy=Au()||!Zr()(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete Ur()[e]})),Uy}var Aq;function Nie(){if(Aq)return Sq;Aq=1;var e=ze(),t=ii(),r=Qi(),n=Qn();return Dn()&&e(e.P+vg(),"Object",{__defineGetter__:function(s,o){n.f(t(this),s,{get:r(o),enumerable:!0,configurable:!0})}}),Sq}var Tq={},Pq;function qie(){if(Pq)return Tq;Pq=1;var e=ze(),t=ii(),r=Qi(),n=Qn();return Dn()&&e(e.P+vg(),"Object",{__defineSetter__:function(s,o){n.f(t(this),s,{set:r(o),enumerable:!0,configurable:!0})}}),Tq}var Cq={},Rq;function Die(){if(Rq)return Cq;Rq=1;var e=ze(),t=ii(),r=pa(),n=lo(),i=co().f;return Dn()&&e(e.P+vg(),"Object",{__lookupGetter__:function(o){var a=t(this),u=r(o,!0),c;do if(c=i(a,u))return c.get;while(a=n(a))}}),Cq}var Iq={},Oq;function Fie(){if(Oq)return Iq;Oq=1;var e=ze(),t=ii(),r=pa(),n=lo(),i=co().f;return Dn()&&e(e.P+vg(),"Object",{__lookupSetter__:function(o){var a=t(this),u=r(o,!0),c;do if(c=i(a,u))return c.set;while(a=n(a))}}),Iq}var Mq={},jy,kq;function UV(){if(kq)return jy;kq=1;var e=_c();return jy=function(t,r){var n=[];return e(t,!1,n.push,n,r),n},jy}var Hy,Lq;function jV(){if(Lq)return Hy;Lq=1;var e=ql(),t=UV();return Hy=function(r){return function(){if(e(this)!=r)throw TypeError(r+"#toJSON isn't generic");return t(this)}},Hy}var Nq;function Bie(){if(Nq)return Mq;Nq=1;var e=ze();return e(e.P+e.R,"Map",{toJSON:jV()("Map")}),Mq}var qq={},Dq;function zie(){if(Dq)return qq;Dq=1;var e=ze();return e(e.P+e.R,"Set",{toJSON:jV()("Set")}),qq}var Fq={},Wy,Bq;function mg(){if(Bq)return Wy;Bq=1;var e=ze();return Wy=function(t){e(e.S,t,{of:function(){for(var n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];return new this(i)}})},Wy}var zq;function Vie(){return zq||(zq=1,mg()("Map")),Fq}var Vq={},Gq;function Gie(){return Gq||(Gq=1,mg()("Set")),Vq}var $q={},Uq;function $ie(){return Uq||(Uq=1,mg()("WeakMap")),$q}var jq={},Hq;function Uie(){return Hq||(Hq=1,mg()("WeakSet")),jq}var Wq={},Xy,Xq;function yg(){if(Xq)return Xy;Xq=1;var e=ze(),t=Qi(),r=No(),n=_c();return Xy=function(i){e(e.S,i,{from:function(o){var a=arguments[1],u,c,f,h;return t(this),u=a!==void 0,u&&t(a),o==null?new this:(c=[],u?(f=0,h=r(a,arguments[2],2),n(o,!1,function(v){c.push(h(v,f++))})):n(o,!1,c.push,c),new this(c))}})},Xy}var Yq;function jie(){return Yq||(Yq=1,yg()("Map")),Wq}var Kq={},Zq;function Hie(){return Zq||(Zq=1,yg()("Set")),Kq}var Jq={},Qq;function Wie(){return Qq||(Qq=1,yg()("WeakMap")),Jq}var e3={},t3;function Xie(){return t3||(t3=1,yg()("WeakSet")),e3}var r3={},n3;function Yie(){if(n3)return r3;n3=1;var e=ze();return e(e.G,{global:Ur()}),r3}var i3={},s3;function Kie(){if(s3)return i3;s3=1;var e=ze();return e(e.S,"System",{global:Ur()}),i3}var o3={},a3;function Zie(){if(a3)return o3;a3=1;var e=ze(),t=qo();return e(e.S,"Error",{isError:function(n){return t(n)==="Error"}}),o3}var u3={},c3;function Jie(){if(c3)return u3;c3=1;var e=ze();return e(e.S,"Math",{clamp:function(r,n,i){return Math.min(i,Math.max(n,r))}}),u3}var l3={},f3;function Qie(){if(f3)return l3;f3=1;var e=ze();return e(e.S,"Math",{DEG_PER_RAD:Math.PI/180}),l3}var h3={},d3;function ese(){if(d3)return h3;d3=1;var e=ze(),t=180/Math.PI;return e(e.S,"Math",{degrees:function(n){return n*t}}),h3}var p3={},Yy,g3;function HV(){return g3||(g3=1,Yy=Math.scale||function(t,r,n,i,s){return arguments.length===0||t!=t||r!=r||n!=n||i!=i||s!=s?NaN:t===1/0||t===-1/0?t:(t-r)*(s-i)/(n-r)+i}),Yy}var v3;function tse(){if(v3)return p3;v3=1;var e=ze(),t=HV(),r=AV();return e(e.S,"Math",{fscale:function(i,s,o,a,u){return r(t(i,s,o,a,u))}}),p3}var m3={},y3;function rse(){if(y3)return m3;y3=1;var e=ze();return e(e.S,"Math",{iaddh:function(r,n,i,s){var o=r>>>0,a=n>>>0,u=i>>>0;return a+(s>>>0)+((o&u|(o|u)&~(o+u>>>0))>>>31)|0}}),m3}var _3={},b3;function nse(){if(b3)return _3;b3=1;var e=ze();return e(e.S,"Math",{isubh:function(r,n,i,s){var o=r>>>0,a=n>>>0,u=i>>>0;return a-(s>>>0)-((~o&u|~(o^u)&o-u>>>0)>>>31)|0}}),_3}var w3={},x3;function ise(){if(x3)return w3;x3=1;var e=ze();return e(e.S,"Math",{imulh:function(r,n){var i=65535,s=+r,o=+n,a=s&i,u=o&i,c=s>>16,f=o>>16,h=(c*u>>>0)+(a*u>>>16);return c*f+(h>>16)+((a*f>>>0)+(h&i)>>16)}}),w3}var S3={},E3;function sse(){if(E3)return S3;E3=1;var e=ze();return e(e.S,"Math",{RAD_PER_DEG:180/Math.PI}),S3}var A3={},T3;function ose(){if(T3)return A3;T3=1;var e=ze(),t=Math.PI/180;return e(e.S,"Math",{radians:function(n){return n*t}}),A3}var P3={},C3;function ase(){if(C3)return P3;C3=1;var e=ze();return e(e.S,"Math",{scale:HV()}),P3}var R3={},I3;function use(){if(I3)return R3;I3=1;var e=ze();return e(e.S,"Math",{umulh:function(r,n){var i=65535,s=+r,o=+n,a=s&i,u=o&i,c=s>>>16,f=o>>>16,h=(c*u>>>0)+(a*u>>>16);return c*f+(h>>>16)+((a*f>>>0)+(h&i)>>>16)}}),R3}var O3={},M3;function cse(){if(M3)return O3;M3=1;var e=ze();return e(e.S,"Math",{signbit:function(r){return(r=+r)!=r?r:r==0?1/r==1/0:r>0}}),O3}var k3={},L3;function lse(){if(L3)return k3;L3=1;var e=ze(),t=Lo(),r=Ur(),n=Ph(),i=kV();return e(e.P+e.R,"Promise",{finally:function(s){var o=n(this,t.Promise||r.Promise),a=typeof s=="function";return this.then(a?function(u){return i(o,s()).then(function(){return u})}:s,a?function(u){return i(o,s()).then(function(){throw u})}:s)}}),k3}var N3={},q3;function fse(){if(q3)return N3;q3=1;var e=ze(),t=p2(),r=MV();return e(e.S,"Promise",{try:function(n){var i=t.f(this),s=r(n);return(s.e?i.reject:i.resolve)(s.v),i.promise}}),N3}var D3={},Ky,F3;function Ha(){if(F3)return Ky;F3=1;var e=NV(),t=ze(),r=Sh()("metadata"),n=r.store||(r.store=new(FV())),i=function(h,v,y){var m=n.get(h);if(!m){if(!y)return;n.set(h,m=new e)}var _=m.get(v);if(!_){if(!y)return;m.set(v,_=new e)}return _},s=function(h,v,y){var m=i(v,y,!1);return m===void 0?!1:m.has(h)},o=function(h,v,y){var m=i(v,y,!1);return m===void 0?void 0:m.get(h)},a=function(h,v,y,m){i(y,m,!0).set(h,v)},u=function(h,v){var y=i(h,v,!1),m=[];return y&&y.forEach(function(_,w){m.push(w)}),m},c=function(h){return h===void 0||typeof h=="symbol"?h:String(h)},f=function(h){t(t.S,"Reflect",h)};return Ky={store:n,map:i,has:s,get:o,set:a,keys:u,key:c,exp:f},Ky}var B3;function hse(){if(B3)return D3;B3=1;var e=Ha(),t=mr(),r=e.key,n=e.set;return e.exp({defineMetadata:function(s,o,a,u){n(s,o,t(a),r(u))}}),D3}var z3={},V3;function dse(){if(V3)return z3;V3=1;var e=Ha(),t=mr(),r=e.key,n=e.map,i=e.store;return e.exp({deleteMetadata:function(o,a){var u=arguments.length<3?void 0:r(arguments[2]),c=n(t(a),u,!1);if(c===void 0||!c.delete(o))return!1;if(c.size)return!0;var f=i.get(a);return f.delete(u),!!f.size||i.delete(a)}}),z3}var G3={},$3;function pse(){if($3)return G3;$3=1;var e=Ha(),t=mr(),r=lo(),n=e.has,i=e.get,s=e.key,o=function(a,u,c){var f=n(a,u,c);if(f)return i(a,u,c);var h=r(u);return h!==null?o(a,h,c):void 0};return e.exp({getMetadata:function(u,c){return o(u,t(c),arguments.length<3?void 0:s(arguments[2]))}}),G3}var U3={},j3;function gse(){if(j3)return U3;j3=1;var e=qV(),t=UV(),r=Ha(),n=mr(),i=lo(),s=r.keys,o=r.key,a=function(u,c){var f=s(u,c),h=i(u);if(h===null)return f;var v=a(h,c);return v.length?f.length?t(new e(f.concat(v))):v:f};return r.exp({getMetadataKeys:function(c){return a(n(c),arguments.length<2?void 0:o(arguments[1]))}}),U3}var H3={},W3;function vse(){if(W3)return H3;W3=1;var e=Ha(),t=mr(),r=e.get,n=e.key;return e.exp({getOwnMetadata:function(s,o){return r(s,t(o),arguments.length<3?void 0:n(arguments[2]))}}),H3}var X3={},Y3;function mse(){if(Y3)return X3;Y3=1;var e=Ha(),t=mr(),r=e.keys,n=e.key;return e.exp({getOwnMetadataKeys:function(s){return r(t(s),arguments.length<2?void 0:n(arguments[1]))}}),X3}var K3={},Z3;function yse(){if(Z3)return K3;Z3=1;var e=Ha(),t=mr(),r=lo(),n=e.has,i=e.key,s=function(o,a,u){var c=n(o,a,u);if(c)return!0;var f=r(a);return f!==null?s(o,f,u):!1};return e.exp({hasMetadata:function(a,u){return s(a,t(u),arguments.length<3?void 0:i(arguments[2]))}}),K3}var J3={},Q3;function _se(){if(Q3)return J3;Q3=1;var e=Ha(),t=mr(),r=e.has,n=e.key;return e.exp({hasOwnMetadata:function(s,o){return r(s,t(o),arguments.length<3?void 0:n(arguments[2]))}}),J3}var eD={},tD;function bse(){if(tD)return eD;tD=1;var e=Ha(),t=mr(),r=Qi(),n=e.key,i=e.set;return e.exp({metadata:function(o,a){return function(c,f){i(o,a,(f!==void 0?t:r)(c),n(f))}}}),eD}var rD={},nD;function wse(){if(nD)return rD;nD=1;var e=ze(),t=d2()(),r=Ur().process,n=qo()(r)=="process";return e(e.G,{asap:function(s){var o=n&&r.domain;t(o?o.bind(s):s)}}),rD}var iD={},sD;function xse(){if(sD)return iD;sD=1;var e=ze(),t=Ur(),r=Lo(),n=d2()(),i=En()("observable"),s=Qi(),o=mr(),a=yc(),u=bc(),c=Ns(),f=_c(),h=f.RETURN,v=function(A){return A==null?void 0:s(A)},y=function(A){var T=A._c;T&&(A._c=void 0,T())},m=function(A){return A._o===void 0},_=function(A){m(A)||(A._o=void 0,y(A))},w=function(A,T){o(A),this._c=void 0,this._o=A,A=new S(this);try{var I=T(A),q=I;I!=null&&(typeof I.unsubscribe=="function"?I=function(){q.unsubscribe()}:s(I),this._c=I)}catch(p){A.error(p);return}m(this)&&y(this)};w.prototype=u({},{unsubscribe:function(){_(this)}});var S=function(A){this._s=A};S.prototype=u({},{next:function(T){var I=this._s;if(!m(I)){var q=I._o;try{var p=v(q.next);if(p)return p.call(q,T)}catch(C){try{_(I)}finally{throw C}}}},error:function(T){var I=this._s;if(m(I))throw T;var q=I._o;I._o=void 0;try{var p=v(q.error);if(!p)throw T;T=p.call(q,T)}catch(C){try{y(I)}finally{throw C}}return y(I),T},complete:function(T){var I=this._s;if(!m(I)){var q=I._o;I._o=void 0;try{var p=v(q.complete);T=p?p.call(q,T):void 0}catch(C){try{y(I)}finally{throw C}}return y(I),T}}});var E=function(T){a(this,E,"Observable","_f")._f=s(T)};return u(E.prototype,{subscribe:function(T){return new w(T,this._f)},forEach:function(T){var I=this;return new(r.Promise||t.Promise)(function(q,p){s(T);var C=I.subscribe({next:function(O){try{return T(O)}catch(N){p(N),C.unsubscribe()}},error:p,complete:q})})}}),u(E,{from:function(T){var I=typeof this=="function"?this:E,q=v(o(T)[i]);if(q){var p=o(q.call(T));return p.constructor===I?p:new I(function(C){return p.subscribe(C)})}return new I(function(C){var O=!1;return n(function(){if(!O){try{if(f(T,!1,function(N){if(C.next(N),O)return h})===h)return}catch(N){if(O)throw N;C.error(N);return}C.complete()}}),function(){O=!0}})},of:function(){for(var T=0,I=arguments.length,q=new Array(I);T<I;)q[T]=arguments[T++];return new(typeof this=="function"?this:E)(function(p){var C=!1;return n(function(){if(!C){for(var O=0;O<q.length;++O)if(p.next(q[O]),C)return;p.complete()}}),function(){C=!0}})}}),c(E.prototype,i,function(){return this}),e(e.G,{Observable:E}),mc()("Observable"),iD}var oD={},aD;function Sse(){if(aD)return oD;aD=1;var e=Ur(),t=ze(),r=dg(),n=[].slice,i=/MSIE .\./.test(r),s=function(o){return function(a,u){var c=arguments.length>2,f=c?n.call(arguments,2):!1;return o(c?function(){(typeof a=="function"?a:Function(a)).apply(this,f)}:a,u)}};return t(t.G+t.B+t.F*i,{setTimeout:s(e.setTimeout),setInterval:s(e.setInterval)}),oD}var uD={},cD;function Ese(){if(cD)return uD;cD=1;var e=ze(),t=h2();return e(e.G+e.B,{setImmediate:t.set,clearImmediate:t.clear}),uD}var lD={},fD;function Ase(){if(fD)return lD;fD=1;for(var e=c2(),t=pc(),r=qs(),n=Ur(),i=Ns(),s=Fl(),o=En(),a=o("iterator"),u=o("toStringTag"),c=s.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=t(f),v=0;v<h.length;v++){var y=h[v],m=f[y],_=n[y],w=_&&_.prototype,S;if(w&&(w[a]||i(w,a,c),w[u]||i(w,u,y),s[y]=c,m))for(S in e)w[S]||r(w,S,e[S],!0)}return lD}var Zy,hD;function Tse(){return hD||(hD=1,Xte(),Yte(),Kte(),Zte(),Jte(),Qte(),ere(),tre(),rre(),nre(),ire(),sre(),ore(),are(),ure(),cre(),lre(),fre(),hre(),dre(),pre(),gre(),vre(),mre(),yre(),_re(),bre(),wre(),xre(),Sre(),Ere(),Are(),Tre(),Pre(),Cre(),Rre(),Ire(),Ore(),Mre(),kre(),Lre(),Nre(),qre(),Dre(),Fre(),Bre(),zre(),Vre(),Gre(),$re(),Ure(),jre(),Hre(),Wre(),Xre(),Yre(),Kre(),Zre(),Jre(),Qre(),ene(),tne(),rne(),nne(),ine(),sne(),one(),ane(),une(),cne(),lne(),fne(),hne(),dne(),pne(),gne(),mne(),yne(),bne(),wne(),xne(),Sne(),Ene(),Ane(),Tne(),Cne(),Rne(),Ine(),One(),Mne(),kne(),Lne(),Nne(),qne(),Dne(),Fne(),Bne(),zne(),Vne(),c2(),Gne(),IV(),$ne(),OV(),Une(),jne(),Hne(),Wne(),Xne(),NV(),qV(),FV(),Yne(),Kne(),Zne(),Jne(),Qne(),eie(),tie(),rie(),nie(),iie(),sie(),oie(),aie(),uie(),cie(),lie(),fie(),hie(),die(),pie(),gie(),vie(),mie(),yie(),_ie(),bie(),wie(),xie(),Sie(),Eie(),Aie(),Tie(),Pie(),Cie(),Rie(),Iie(),Oie(),Mie(),kie(),Lie(),Nie(),qie(),Die(),Fie(),Bie(),zie(),Vie(),Gie(),$ie(),Uie(),jie(),Hie(),Wie(),Xie(),Yie(),Kie(),Zie(),Jie(),Qie(),ese(),tse(),rse(),nse(),ise(),sse(),ose(),ase(),use(),cse(),lse(),fse(),hse(),dse(),pse(),gse(),vse(),mse(),yse(),_se(),bse(),wse(),xse(),Sse(),Ese(),Ase(),Zy=Lo()),Zy}var pp={exports:{}},Pse=pp.exports,dD;function Cse(){return dD||(dD=1,function(e){(function(t){var r=Object.prototype,n=r.hasOwnProperty,i,s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag",c=t.regeneratorRuntime;if(c){e.exports=c;return}c=t.regeneratorRuntime=e.exports;function f(U,j,J,de){var ce=j&&j.prototype instanceof S?j:S,Te=Object.create(ce.prototype),Se=new ee(de||[]);return Te._invoke=N(U,J,Se),Te}c.wrap=f;function h(U,j,J){try{return{type:"normal",arg:U.call(j,J)}}catch(de){return{type:"throw",arg:de}}}var v="suspendedStart",y="suspendedYield",m="executing",_="completed",w={};function S(){}function E(){}function A(){}var T={};T[o]=function(){return this};var I=Object.getPrototypeOf,q=I&&I(I(ae([])));q&&q!==r&&n.call(q,o)&&(T=q);var p=A.prototype=S.prototype=Object.create(T);E.prototype=p.constructor=A,A.constructor=E,A[u]=E.displayName="GeneratorFunction";function C(U){["next","throw","return"].forEach(function(j){U[j]=function(J){return this._invoke(j,J)}})}c.isGeneratorFunction=function(U){var j=typeof U=="function"&&U.constructor;return j?j===E||(j.displayName||j.name)==="GeneratorFunction":!1},c.mark=function(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,A):(U.__proto__=A,u in U||(U[u]="GeneratorFunction")),U.prototype=Object.create(p),U},c.awrap=function(U){return{__await:U}};function O(U){function j(ce,Te,Se,re){var oe=h(U[ce],U,Te);if(oe.type==="throw")re(oe.arg);else{var ne=oe.arg,te=ne.value;return te&&typeof te=="object"&&n.call(te,"__await")?Promise.resolve(te.__await).then(function(le){j("next",le,Se,re)},function(le){j("throw",le,Se,re)}):Promise.resolve(te).then(function(le){ne.value=le,Se(ne)},re)}}typeof t.process=="object"&&t.process.domain&&(j=t.process.domain.bind(j));var J;function de(ce,Te){function Se(){return new Promise(function(re,oe){j(ce,Te,re,oe)})}return J=J?J.then(Se,Se):Se()}this._invoke=de}C(O.prototype),O.prototype[a]=function(){return this},c.AsyncIterator=O,c.async=function(U,j,J,de){var ce=new O(f(U,j,J,de));return c.isGeneratorFunction(j)?ce:ce.next().then(function(Te){return Te.done?Te.value:ce.next()})};function N(U,j,J){var de=v;return function(Te,Se){if(de===m)throw new Error("Generator is already running");if(de===_){if(Te==="throw")throw Se;return K()}for(J.method=Te,J.arg=Se;;){var re=J.delegate;if(re){var oe=V(re,J);if(oe){if(oe===w)continue;return oe}}if(J.method==="next")J.sent=J._sent=J.arg;else if(J.method==="throw"){if(de===v)throw de=_,J.arg;J.dispatchException(J.arg)}else J.method==="return"&&J.abrupt("return",J.arg);de=m;var ne=h(U,j,J);if(ne.type==="normal"){if(de=J.done?_:y,ne.arg===w)continue;return{value:ne.arg,done:J.done}}else ne.type==="throw"&&(de=_,J.method="throw",J.arg=ne.arg)}}}function V(U,j){var J=U.iterator[j.method];if(J===i){if(j.delegate=null,j.method==="throw"){if(U.iterator.return&&(j.method="return",j.arg=i,V(U,j),j.method==="throw"))return w;j.method="throw",j.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var de=h(J,U.iterator,j.arg);if(de.type==="throw")return j.method="throw",j.arg=de.arg,j.delegate=null,w;var ce=de.arg;if(!ce)return j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,w;if(ce.done)j[U.resultName]=ce.value,j.next=U.nextLoc,j.method!=="return"&&(j.method="next",j.arg=i);else return ce;return j.delegate=null,w}C(p),p[u]="Generator",p[o]=function(){return this},p.toString=function(){return"[object Generator]"};function W(U){var j={tryLoc:U[0]};1 in U&&(j.catchLoc=U[1]),2 in U&&(j.finallyLoc=U[2],j.afterLoc=U[3]),this.tryEntries.push(j)}function G(U){var j=U.completion||{};j.type="normal",delete j.arg,U.completion=j}function ee(U){this.tryEntries=[{tryLoc:"root"}],U.forEach(W,this),this.reset(!0)}c.keys=function(U){var j=[];for(var J in U)j.push(J);return j.reverse(),function de(){for(;j.length;){var ce=j.pop();if(ce in U)return de.value=ce,de.done=!1,de}return de.done=!0,de}};function ae(U){if(U){var j=U[o];if(j)return j.call(U);if(typeof U.next=="function")return U;if(!isNaN(U.length)){var J=-1,de=function ce(){for(;++J<U.length;)if(n.call(U,J))return ce.value=U[J],ce.done=!1,ce;return ce.value=i,ce.done=!0,ce};return de.next=de}}return{next:K}}c.values=ae;function K(){return{value:i,done:!0}}ee.prototype={constructor:ee,reset:function(U){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(G),!U)for(var j in this)j.charAt(0)==="t"&&n.call(this,j)&&!isNaN(+j.slice(1))&&(this[j]=i)},stop:function(){this.done=!0;var U=this.tryEntries[0],j=U.completion;if(j.type==="throw")throw j.arg;return this.rval},dispatchException:function(U){if(this.done)throw U;var j=this;function J(oe,ne){return Te.type="throw",Te.arg=U,j.next=oe,ne&&(j.method="next",j.arg=i),!!ne}for(var de=this.tryEntries.length-1;de>=0;--de){var ce=this.tryEntries[de],Te=ce.completion;if(ce.tryLoc==="root")return J("end");if(ce.tryLoc<=this.prev){var Se=n.call(ce,"catchLoc"),re=n.call(ce,"finallyLoc");if(Se&&re){if(this.prev<ce.catchLoc)return J(ce.catchLoc,!0);if(this.prev<ce.finallyLoc)return J(ce.finallyLoc)}else if(Se){if(this.prev<ce.catchLoc)return J(ce.catchLoc,!0)}else if(re){if(this.prev<ce.finallyLoc)return J(ce.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(U,j){for(var J=this.tryEntries.length-1;J>=0;--J){var de=this.tryEntries[J];if(de.tryLoc<=this.prev&&n.call(de,"finallyLoc")&&this.prev<de.finallyLoc){var ce=de;break}}ce&&(U==="break"||U==="continue")&&ce.tryLoc<=j&&j<=ce.finallyLoc&&(ce=null);var Te=ce?ce.completion:{};return Te.type=U,Te.arg=j,ce?(this.method="next",this.next=ce.finallyLoc,w):this.complete(Te)},complete:function(U,j){if(U.type==="throw")throw U.arg;return U.type==="break"||U.type==="continue"?this.next=U.arg:U.type==="return"?(this.rval=this.arg=U.arg,this.method="return",this.next="end"):U.type==="normal"&&j&&(this.next=j),w},finish:function(U){for(var j=this.tryEntries.length-1;j>=0;--j){var J=this.tryEntries[j];if(J.finallyLoc===U)return this.complete(J.completion,J.afterLoc),G(J),w}},catch:function(U){for(var j=this.tryEntries.length-1;j>=0;--j){var J=this.tryEntries[j];if(J.tryLoc===U){var de=J.completion;if(de.type==="throw"){var ce=de.arg;G(J)}return ce}}throw new Error("illegal catch attempt")},delegateYield:function(U,j,J){return this.delegate={iterator:ae(U),resultName:j,nextLoc:J},this.method==="next"&&(this.arg=i),w}}})(typeof Oi=="object"?Oi:typeof window=="object"?window:typeof self=="object"?self:Pse)}(pp)),pp.exports}var pD={},Jy,gD;function Rse(){return gD||(gD=1,Jy=function(e,t){var r=t===Object(t)?function(n){return t[n]}:t;return function(n){return String(n).replace(e,r)}}),Jy}var vD;function Ise(){if(vD)return pD;vD=1;var e=ze(),t=Rse()(/[\\^$*+?.()|[\]{}]/g,"\\$&");return e(e.S,"RegExp",{escape:function(n){return t(n)}}),pD}var Qy,mD;function Ose(){return mD||(mD=1,Ise(),Qy=Lo().RegExp.escape),Qy}var yD;function Mse(){if(yD)return kC;if(yD=1,Tse(),Cse(),Ose(),Oi._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");Oi._babelPolyfill=!0;var e="defineProperty";function t(r,n,i){r[n]||Object[e](r,n,{writable:!0,configurable:!0,value:i})}return t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(r){[][r]&&t(Array,r,Function.call.bind([][r]))}),kC}Mse();function v2(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var e_,_D;function kse(){if(_D)return e_;_D=1;function e(){this.__data__=[],this.size=0}return e_=e,e_}var t_,bD;function Bl(){if(bD)return t_;bD=1;function e(t,r){return t===r||t!==t&&r!==r}return t_=e,t_}var r_,wD;function _g(){if(wD)return r_;wD=1;var e=Bl();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return r_=t,r_}var n_,xD;function Lse(){if(xD)return n_;xD=1;var e=_g(),t=Array.prototype,r=t.splice;function n(i){var s=this.__data__,o=e(s,i);if(o<0)return!1;var a=s.length-1;return o==a?s.pop():r.call(s,o,1),--this.size,!0}return n_=n,n_}var i_,SD;function Nse(){if(SD)return i_;SD=1;var e=_g();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return i_=t,i_}var s_,ED;function qse(){if(ED)return s_;ED=1;var e=_g();function t(r){return e(this.__data__,r)>-1}return s_=t,s_}var o_,AD;function Dse(){if(AD)return o_;AD=1;var e=_g();function t(r,n){var i=this.__data__,s=e(i,r);return s<0?(++this.size,i.push([r,n])):i[s][1]=n,this}return o_=t,o_}var a_,TD;function bg(){if(TD)return a_;TD=1;var e=kse(),t=Lse(),r=Nse(),n=qse(),i=Dse();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var c=o[a];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,a_=s,a_}var u_,PD;function Fse(){if(PD)return u_;PD=1;var e=bg();function t(){this.__data__=new e,this.size=0}return u_=t,u_}var c_,CD;function Bse(){if(CD)return c_;CD=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return c_=e,c_}var l_,RD;function zse(){if(RD)return l_;RD=1;function e(t){return this.__data__.get(t)}return l_=e,l_}var f_,ID;function Vse(){if(ID)return f_;ID=1;function e(t){return this.__data__.has(t)}return f_=e,f_}var h_,OD;function WV(){if(OD)return h_;OD=1;var e=typeof Oi=="object"&&Oi&&Oi.Object===Object&&Oi;return h_=e,h_}var d_,MD;function Bo(){if(MD)return d_;MD=1;var e=WV(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return d_=r,d_}var p_,kD;function zl(){if(kD)return p_;kD=1;var e=Bo(),t=e.Symbol;return p_=t,p_}var g_,LD;function Gse(){if(LD)return g_;LD=1;var e=zl(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function s(o){var a=r.call(o,i),u=o[i];try{o[i]=void 0;var c=!0}catch{}var f=n.call(o);return c&&(a?o[i]=u:delete o[i]),f}return g_=s,g_}var v_,ND;function $se(){if(ND)return v_;ND=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return v_=r,v_}var m_,qD;function wc(){if(qD)return m_;qD=1;var e=zl(),t=Gse(),r=$se(),n="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function o(a){return a==null?a===void 0?i:n:s&&s in Object(a)?t(a):r(a)}return m_=o,m_}var y_,DD;function fo(){if(DD)return y_;DD=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return y_=e,y_}var __,FD;function Ch(){if(FD)return __;FD=1;var e=wc(),t=fo(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(a){if(!t(a))return!1;var u=e(a);return u==n||u==i||u==r||u==s}return __=o,__}var b_,BD;function Use(){if(BD)return b_;BD=1;var e=Bo(),t=e["__core-js_shared__"];return b_=t,b_}var w_,zD;function jse(){if(zD)return w_;zD=1;var e=Use(),t=function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!t&&t in n}return w_=r,w_}var x_,VD;function XV(){if(VD)return x_;VD=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return x_=r,x_}var S_,GD;function Hse(){if(GD)return S_;GD=1;var e=Ch(),t=jse(),r=fo(),n=XV(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,u=o.toString,c=a.hasOwnProperty,f=RegExp("^"+u.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(v){if(!r(v)||t(v))return!1;var y=e(v)?f:s;return y.test(n(v))}return S_=h,S_}var E_,$D;function Wse(){if($D)return E_;$D=1;function e(t,r){return t==null?void 0:t[r]}return E_=e,E_}var A_,UD;function xc(){if(UD)return A_;UD=1;var e=Hse(),t=Wse();function r(n,i){var s=t(n,i);return e(s)?s:void 0}return A_=r,A_}var T_,jD;function m2(){if(jD)return T_;jD=1;var e=xc(),t=Bo(),r=e(t,"Map");return T_=r,T_}var P_,HD;function wg(){if(HD)return P_;HD=1;var e=xc(),t=e(Object,"create");return P_=t,P_}var C_,WD;function Xse(){if(WD)return C_;WD=1;var e=wg();function t(){this.__data__=e?e(null):{},this.size=0}return C_=t,C_}var R_,XD;function Yse(){if(XD)return R_;XD=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return R_=e,R_}var I_,YD;function Kse(){if(YD)return I_;YD=1;var e=wg(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(s){var o=this.__data__;if(e){var a=o[s];return a===t?void 0:a}return n.call(o,s)?o[s]:void 0}return I_=i,I_}var O_,KD;function Zse(){if(KD)return O_;KD=1;var e=wg(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var s=this.__data__;return e?s[i]!==void 0:r.call(s,i)}return O_=n,O_}var M_,ZD;function Jse(){if(ZD)return M_;ZD=1;var e=wg(),t="__lodash_hash_undefined__";function r(n,i){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=e&&i===void 0?t:i,this}return M_=r,M_}var k_,JD;function Qse(){if(JD)return k_;JD=1;var e=Xse(),t=Yse(),r=Kse(),n=Zse(),i=Jse();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var c=o[a];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,k_=s,k_}var L_,QD;function eoe(){if(QD)return L_;QD=1;var e=Qse(),t=bg(),r=m2();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return L_=n,L_}var N_,eF;function toe(){if(eF)return N_;eF=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return N_=e,N_}var q_,tF;function xg(){if(tF)return q_;tF=1;var e=toe();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return q_=t,q_}var D_,rF;function roe(){if(rF)return D_;rF=1;var e=xg();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return D_=t,D_}var F_,nF;function noe(){if(nF)return F_;nF=1;var e=xg();function t(r){return e(this,r).get(r)}return F_=t,F_}var B_,iF;function ioe(){if(iF)return B_;iF=1;var e=xg();function t(r){return e(this,r).has(r)}return B_=t,B_}var z_,sF;function soe(){if(sF)return z_;sF=1;var e=xg();function t(r,n){var i=e(this,r),s=i.size;return i.set(r,n),this.size+=i.size==s?0:1,this}return z_=t,z_}var V_,oF;function y2(){if(oF)return V_;oF=1;var e=eoe(),t=roe(),r=noe(),n=ioe(),i=soe();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var c=o[a];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,V_=s,V_}var G_,aF;function ooe(){if(aF)return G_;aF=1;var e=bg(),t=m2(),r=y2(),n=200;function i(s,o){var a=this.__data__;if(a instanceof e){var u=a.__data__;if(!t||u.length<n-1)return u.push([s,o]),this.size=++a.size,this;a=this.__data__=new r(u)}return a.set(s,o),this.size=a.size,this}return G_=i,G_}var $_,uF;function Sg(){if(uF)return $_;uF=1;var e=bg(),t=Fse(),r=Bse(),n=zse(),i=Vse(),s=ooe();function o(a){var u=this.__data__=new e(a);this.size=u.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=i,o.prototype.set=s,$_=o,$_}var U_,cF;function _2(){if(cF)return U_;cF=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}return U_=e,U_}var j_,lF;function YV(){if(lF)return j_;lF=1;var e=xc(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return j_=t,j_}var H_,fF;function Eg(){if(fF)return H_;fF=1;var e=YV();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return H_=t,H_}var W_,hF;function Ag(){if(hF)return W_;hF=1;var e=Eg(),t=Bl(),r=Object.prototype,n=r.hasOwnProperty;function i(s,o,a){var u=s[o];(!(n.call(s,o)&&t(u,a))||a===void 0&&!(o in s))&&e(s,o,a)}return W_=i,W_}var X_,dF;function Rh(){if(dF)return X_;dF=1;var e=Ag(),t=Eg();function r(n,i,s,o){var a=!s;s||(s={});for(var u=-1,c=i.length;++u<c;){var f=i[u],h=o?o(s[f],n[f],f,s,n):void 0;h===void 0&&(h=n[f]),a?t(s,f,h):e(s,f,h)}return s}return X_=r,X_}var Y_,pF;function aoe(){if(pF)return Y_;pF=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return Y_=e,Y_}var K_,gF;function ya(){if(gF)return K_;gF=1;function e(t){return t!=null&&typeof t=="object"}return K_=e,K_}var Z_,vF;function uoe(){if(vF)return Z_;vF=1;var e=wc(),t=ya(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return Z_=n,Z_}var J_,mF;function Ih(){if(mF)return J_;mF=1;var e=uoe(),t=ya(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,s=e(function(){return arguments}())?e:function(o){return t(o)&&n.call(o,"callee")&&!i.call(o,"callee")};return J_=s,J_}var Q_,yF;function si(){if(yF)return Q_;yF=1;var e=Array.isArray;return Q_=e,Q_}var qf={exports:{}},eb,_F;function coe(){if(_F)return eb;_F=1;function e(){return!1}return eb=e,eb}qf.exports;var bF;function Vl(){return bF||(bF=1,function(e,t){var r=Bo(),n=coe(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,a=o?r.Buffer:void 0,u=a?a.isBuffer:void 0,c=u||n;e.exports=c}(qf,qf.exports)),qf.exports}var tb,wF;function Tg(){if(wF)return tb;wF=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var s=typeof n;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return tb=r,tb}var rb,xF;function b2(){if(xF)return rb;xF=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return rb=t,rb}var nb,SF;function loe(){if(SF)return nb;SF=1;var e=wc(),t=b2(),r=ya(),n="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",a="[object Error]",u="[object Function]",c="[object Map]",f="[object Number]",h="[object Object]",v="[object RegExp]",y="[object Set]",m="[object String]",_="[object WeakMap]",w="[object ArrayBuffer]",S="[object DataView]",E="[object Float32Array]",A="[object Float64Array]",T="[object Int8Array]",I="[object Int16Array]",q="[object Int32Array]",p="[object Uint8Array]",C="[object Uint8ClampedArray]",O="[object Uint16Array]",N="[object Uint32Array]",V={};V[E]=V[A]=V[T]=V[I]=V[q]=V[p]=V[C]=V[O]=V[N]=!0,V[n]=V[i]=V[w]=V[s]=V[S]=V[o]=V[a]=V[u]=V[c]=V[f]=V[h]=V[v]=V[y]=V[m]=V[_]=!1;function W(G){return r(G)&&t(G.length)&&!!V[e(G)]}return nb=W,nb}var ib,EF;function Pg(){if(EF)return ib;EF=1;function e(t){return function(r){return t(r)}}return ib=e,ib}var Df={exports:{}};Df.exports;var AF;function w2(){return AF||(AF=1,function(e,t){var r=WV(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s&&r.process,a=function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a}(Df,Df.exports)),Df.exports}var sb,TF;function Oh(){if(TF)return sb;TF=1;var e=loe(),t=Pg(),r=w2(),n=r&&r.isTypedArray,i=n?t(n):e;return sb=i,sb}var ob,PF;function KV(){if(PF)return ob;PF=1;var e=aoe(),t=Ih(),r=si(),n=Vl(),i=Tg(),s=Oh(),o=Object.prototype,a=o.hasOwnProperty;function u(c,f){var h=r(c),v=!h&&t(c),y=!h&&!v&&n(c),m=!h&&!v&&!y&&s(c),_=h||v||y||m,w=_?e(c.length,String):[],S=w.length;for(var E in c)(f||a.call(c,E))&&!(_&&(E=="length"||y&&(E=="offset"||E=="parent")||m&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||i(E,S)))&&w.push(E);return w}return ob=u,ob}var ab,CF;function Cg(){if(CF)return ab;CF=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return ab=t,ab}var ub,RF;function ZV(){if(RF)return ub;RF=1;function e(t,r){return function(n){return t(r(n))}}return ub=e,ub}var cb,IF;function foe(){if(IF)return cb;IF=1;var e=ZV(),t=e(Object.keys,Object);return cb=t,cb}var lb,OF;function x2(){if(OF)return lb;OF=1;var e=Cg(),t=foe(),r=Object.prototype,n=r.hasOwnProperty;function i(s){if(!e(s))return t(s);var o=[];for(var a in Object(s))n.call(s,a)&&a!="constructor"&&o.push(a);return o}return lb=i,lb}var fb,MF;function Wa(){if(MF)return fb;MF=1;var e=Ch(),t=b2();function r(n){return n!=null&&t(n.length)&&!e(n)}return fb=r,fb}var hb,kF;function Cu(){if(kF)return hb;kF=1;var e=KV(),t=x2(),r=Wa();function n(i){return r(i)?e(i):t(i)}return hb=n,hb}var db,LF;function hoe(){if(LF)return db;LF=1;var e=Rh(),t=Cu();function r(n,i){return n&&e(i,t(i),n)}return db=r,db}var pb,NF;function doe(){if(NF)return pb;NF=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return pb=e,pb}var gb,qF;function poe(){if(qF)return gb;qF=1;var e=fo(),t=Cg(),r=doe(),n=Object.prototype,i=n.hasOwnProperty;function s(o){if(!e(o))return r(o);var a=t(o),u=[];for(var c in o)c=="constructor"&&(a||!i.call(o,c))||u.push(c);return u}return gb=s,gb}var vb,DF;function Sc(){if(DF)return vb;DF=1;var e=KV(),t=poe(),r=Wa();function n(i){return r(i)?e(i,!0):t(i)}return vb=n,vb}var mb,FF;function goe(){if(FF)return mb;FF=1;var e=Rh(),t=Sc();function r(n,i){return n&&e(i,t(i),n)}return mb=r,mb}var Ff={exports:{}};Ff.exports;var BF;function JV(){return BF||(BF=1,function(e,t){var r=Bo(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s?r.Buffer:void 0,a=o?o.allocUnsafe:void 0;function u(c,f){if(f)return c.slice();var h=c.length,v=a?a(h):new c.constructor(h);return c.copy(v),v}e.exports=u}(Ff,Ff.exports)),Ff.exports}var yb,zF;function QV(){if(zF)return yb;zF=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return yb=e,yb}var _b,VF;function e7(){if(VF)return _b;VF=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,s=0,o=[];++n<i;){var a=t[n];r(a,n,t)&&(o[s++]=a)}return o}return _b=e,_b}var bb,GF;function t7(){if(GF)return bb;GF=1;function e(){return[]}return bb=e,bb}var wb,$F;function S2(){if($F)return wb;$F=1;var e=e7(),t=t7(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(a){return n.call(o,a)}))}:t;return wb=s,wb}var xb,UF;function voe(){if(UF)return xb;UF=1;var e=Rh(),t=S2();function r(n,i){return e(n,t(n),i)}return xb=r,xb}var Sb,jF;function E2(){if(jF)return Sb;jF=1;function e(t,r){for(var n=-1,i=r.length,s=t.length;++n<i;)t[s+n]=r[n];return t}return Sb=e,Sb}var Eb,HF;function Rg(){if(HF)return Eb;HF=1;var e=ZV(),t=e(Object.getPrototypeOf,Object);return Eb=t,Eb}var Ab,WF;function r7(){if(WF)return Ab;WF=1;var e=E2(),t=Rg(),r=S2(),n=t7(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var a=[];o;)e(a,r(o)),o=t(o);return a}:n;return Ab=s,Ab}var Tb,XF;function moe(){if(XF)return Tb;XF=1;var e=Rh(),t=r7();function r(n,i){return e(n,t(n),i)}return Tb=r,Tb}var Pb,YF;function n7(){if(YF)return Pb;YF=1;var e=E2(),t=si();function r(n,i,s){var o=i(n);return t(n)?o:e(o,s(n))}return Pb=r,Pb}var Cb,KF;function i7(){if(KF)return Cb;KF=1;var e=n7(),t=S2(),r=Cu();function n(i){return e(i,r,t)}return Cb=n,Cb}var Rb,ZF;function yoe(){if(ZF)return Rb;ZF=1;var e=n7(),t=r7(),r=Sc();function n(i){return e(i,r,t)}return Rb=n,Rb}var Ib,JF;function _oe(){if(JF)return Ib;JF=1;var e=xc(),t=Bo(),r=e(t,"DataView");return Ib=r,Ib}var Ob,QF;function boe(){if(QF)return Ob;QF=1;var e=xc(),t=Bo(),r=e(t,"Promise");return Ob=r,Ob}var Mb,e6;function s7(){if(e6)return Mb;e6=1;var e=xc(),t=Bo(),r=e(t,"Set");return Mb=r,Mb}var kb,t6;function woe(){if(t6)return kb;t6=1;var e=xc(),t=Bo(),r=e(t,"WeakMap");return kb=r,kb}var Lb,r6;function Gl(){if(r6)return Lb;r6=1;var e=_oe(),t=m2(),r=boe(),n=s7(),i=woe(),s=wc(),o=XV(),a="[object Map]",u="[object Object]",c="[object Promise]",f="[object Set]",h="[object WeakMap]",v="[object DataView]",y=o(e),m=o(t),_=o(r),w=o(n),S=o(i),E=s;return(e&&E(new e(new ArrayBuffer(1)))!=v||t&&E(new t)!=a||r&&E(r.resolve())!=c||n&&E(new n)!=f||i&&E(new i)!=h)&&(E=function(A){var T=s(A),I=T==u?A.constructor:void 0,q=I?o(I):"";if(q)switch(q){case y:return v;case m:return a;case _:return c;case w:return f;case S:return h}return T}),Lb=E,Lb}var Nb,n6;function xoe(){if(n6)return Nb;n6=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var i=n.length,s=new n.constructor(i);return i&&typeof n[0]=="string"&&t.call(n,"index")&&(s.index=n.index,s.input=n.input),s}return Nb=r,Nb}var qb,i6;function o7(){if(i6)return qb;i6=1;var e=Bo(),t=e.Uint8Array;return qb=t,qb}var Db,s6;function A2(){if(s6)return Db;s6=1;var e=o7();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return Db=t,Db}var Fb,o6;function Soe(){if(o6)return Fb;o6=1;var e=A2();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return Fb=t,Fb}var Bb,a6;function Eoe(){if(a6)return Bb;a6=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return Bb=t,Bb}var zb,u6;function Aoe(){if(u6)return zb;u6=1;var e=zl(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return zb=n,zb}var Vb,c6;function a7(){if(c6)return Vb;c6=1;var e=A2();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return Vb=t,Vb}var Gb,l6;function Toe(){if(l6)return Gb;l6=1;var e=A2(),t=Soe(),r=Eoe(),n=Aoe(),i=a7(),s="[object Boolean]",o="[object Date]",a="[object Map]",u="[object Number]",c="[object RegExp]",f="[object Set]",h="[object String]",v="[object Symbol]",y="[object ArrayBuffer]",m="[object DataView]",_="[object Float32Array]",w="[object Float64Array]",S="[object Int8Array]",E="[object Int16Array]",A="[object Int32Array]",T="[object Uint8Array]",I="[object Uint8ClampedArray]",q="[object Uint16Array]",p="[object Uint32Array]";function C(O,N,V){var W=O.constructor;switch(N){case y:return e(O);case s:case o:return new W(+O);case m:return t(O,V);case _:case w:case S:case E:case A:case T:case I:case q:case p:return i(O,V);case a:return new W;case u:case h:return new W(O);case c:return r(O);case f:return new W;case v:return n(O)}}return Gb=C,Gb}var $b,f6;function u7(){if(f6)return $b;f6=1;var e=fo(),t=Object.create,r=function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var s=new n;return n.prototype=void 0,s}}();return $b=r,$b}var Ub,h6;function c7(){if(h6)return Ub;h6=1;var e=u7(),t=Rg(),r=Cg();function n(i){return typeof i.constructor=="function"&&!r(i)?e(t(i)):{}}return Ub=n,Ub}var jb,d6;function Poe(){if(d6)return jb;d6=1;var e=Gl(),t=ya(),r="[object Map]";function n(i){return t(i)&&e(i)==r}return jb=n,jb}var Hb,p6;function Coe(){if(p6)return Hb;p6=1;var e=Poe(),t=Pg(),r=w2(),n=r&&r.isMap,i=n?t(n):e;return Hb=i,Hb}var Wb,g6;function Roe(){if(g6)return Wb;g6=1;var e=Gl(),t=ya(),r="[object Set]";function n(i){return t(i)&&e(i)==r}return Wb=n,Wb}var Xb,v6;function Ioe(){if(v6)return Xb;v6=1;var e=Roe(),t=Pg(),r=w2(),n=r&&r.isSet,i=n?t(n):e;return Xb=i,Xb}var Yb,m6;function l7(){if(m6)return Yb;m6=1;var e=Sg(),t=_2(),r=Ag(),n=hoe(),i=goe(),s=JV(),o=QV(),a=voe(),u=moe(),c=i7(),f=yoe(),h=Gl(),v=xoe(),y=Toe(),m=c7(),_=si(),w=Vl(),S=Coe(),E=fo(),A=Ioe(),T=Cu(),I=Sc(),q=1,p=2,C=4,O="[object Arguments]",N="[object Array]",V="[object Boolean]",W="[object Date]",G="[object Error]",ee="[object Function]",ae="[object GeneratorFunction]",K="[object Map]",U="[object Number]",j="[object Object]",J="[object RegExp]",de="[object Set]",ce="[object String]",Te="[object Symbol]",Se="[object WeakMap]",re="[object ArrayBuffer]",oe="[object DataView]",ne="[object Float32Array]",te="[object Float64Array]",le="[object Int8Array]",We="[object Int16Array]",Ne="[object Int32Array]",Re="[object Uint8Array]",rt="[object Uint8ClampedArray]",Ve="[object Uint16Array]",L="[object Uint32Array]",B={};B[O]=B[N]=B[re]=B[oe]=B[V]=B[W]=B[ne]=B[te]=B[le]=B[We]=B[Ne]=B[K]=B[U]=B[j]=B[J]=B[de]=B[ce]=B[Te]=B[Re]=B[rt]=B[Ve]=B[L]=!0,B[G]=B[ee]=B[Se]=!1;function H(X,xe,ue,Ae,Ce,Be){var Le,Ie=xe&q,be=xe&p,je=xe&C;if(ue&&(Le=Ce?ue(X,Ae,Ce,Be):ue(X)),Le!==void 0)return Le;if(!E(X))return X;var ct=_(X);if(ct){if(Le=v(X),!Ie)return o(X,Le)}else{var mt=h(X),ft=mt==ee||mt==ae;if(w(X))return s(X,Ie);if(mt==j||mt==O||ft&&!Ce){if(Le=be||ft?{}:m(X),!Ie)return be?u(X,i(Le,X)):a(X,n(Le,X))}else{if(!B[mt])return Ce?X:{};Le=y(X,mt,Ie)}}Be||(Be=new e);var it=Be.get(X);if(it)return it;Be.set(X,Le),A(X)?X.forEach(function(Qt){Le.add(H(Qt,xe,ue,Qt,X,Be))}):S(X)&&X.forEach(function(Qt,cr){Le.set(cr,H(Qt,xe,ue,cr,X,Be))});var Ht=je?be?f:c:be?I:T,yr=ct?void 0:Ht(X);return t(yr||X,function(Qt,cr){yr&&(cr=Qt,Qt=X[cr]),r(Le,cr,H(Qt,xe,ue,cr,X,Be))}),Le}return Yb=H,Yb}var Kb,y6;function Ooe(){if(y6)return Kb;y6=1;var e=l7(),t=4;function r(n){return e(n,t)}return Kb=r,Kb}var Zb,_6;function T2(){if(_6)return Zb;_6=1;function e(t){return function(){return t}}return Zb=e,Zb}var Jb,b6;function Moe(){if(b6)return Jb;b6=1;function e(t){return function(r,n,i){for(var s=-1,o=Object(r),a=i(r),u=a.length;u--;){var c=a[t?u:++s];if(n(o[c],c,o)===!1)break}return r}}return Jb=e,Jb}var Qb,w6;function P2(){if(w6)return Qb;w6=1;var e=Moe(),t=e();return Qb=t,Qb}var e1,x6;function C2(){if(x6)return e1;x6=1;var e=P2(),t=Cu();function r(n,i){return n&&e(n,i,t)}return e1=r,e1}var t1,S6;function koe(){if(S6)return t1;S6=1;var e=Wa();function t(r,n){return function(i,s){if(i==null)return i;if(!e(i))return r(i,s);for(var o=i.length,a=n?o:-1,u=Object(i);(n?a--:++a<o)&&s(u[a],a,u)!==!1;);return i}}return t1=t,t1}var r1,E6;function Ig(){if(E6)return r1;E6=1;var e=C2(),t=koe(),r=t(e);return r1=r,r1}var n1,A6;function Ec(){if(A6)return n1;A6=1;function e(t){return t}return n1=e,n1}var i1,T6;function f7(){if(T6)return i1;T6=1;var e=Ec();function t(r){return typeof r=="function"?r:e}return i1=t,i1}var s1,P6;function h7(){if(P6)return s1;P6=1;var e=_2(),t=Ig(),r=f7(),n=si();function i(s,o){var a=n(s)?e:t;return a(s,r(o))}return s1=i,s1}var o1,C6;function d7(){return C6||(C6=1,o1=h7()),o1}var a1,R6;function Loe(){if(R6)return a1;R6=1;var e=Ig();function t(r,n){var i=[];return e(r,function(s,o,a){n(s,o,a)&&i.push(s)}),i}return a1=t,a1}var u1,I6;function Noe(){if(I6)return u1;I6=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return u1=t,u1}var c1,O6;function qoe(){if(O6)return c1;O6=1;function e(t){return this.__data__.has(t)}return c1=e,c1}var l1,M6;function p7(){if(M6)return l1;M6=1;var e=y2(),t=Noe(),r=qoe();function n(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new e;++s<o;)this.add(i[s])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,l1=n,l1}var f1,k6;function Doe(){if(k6)return f1;k6=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return f1=e,f1}var h1,L6;function g7(){if(L6)return h1;L6=1;function e(t,r){return t.has(r)}return h1=e,h1}var d1,N6;function v7(){if(N6)return d1;N6=1;var e=p7(),t=Doe(),r=g7(),n=1,i=2;function s(o,a,u,c,f,h){var v=u&n,y=o.length,m=a.length;if(y!=m&&!(v&&m>y))return!1;var _=h.get(o),w=h.get(a);if(_&&w)return _==a&&w==o;var S=-1,E=!0,A=u&i?new e:void 0;for(h.set(o,a),h.set(a,o);++S<y;){var T=o[S],I=a[S];if(c)var q=v?c(I,T,S,a,o,h):c(T,I,S,o,a,h);if(q!==void 0){if(q)continue;E=!1;break}if(A){if(!t(a,function(p,C){if(!r(A,C)&&(T===p||f(T,p,u,c,h)))return A.push(C)})){E=!1;break}}else if(!(T===I||f(T,I,u,c,h))){E=!1;break}}return h.delete(o),h.delete(a),E}return d1=s,d1}var p1,q6;function Foe(){if(q6)return p1;q6=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,s){n[++r]=[s,i]}),n}return p1=e,p1}var g1,D6;function R2(){if(D6)return g1;D6=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return g1=e,g1}var v1,F6;function Boe(){if(F6)return v1;F6=1;var e=zl(),t=o7(),r=Bl(),n=v7(),i=Foe(),s=R2(),o=1,a=2,u="[object Boolean]",c="[object Date]",f="[object Error]",h="[object Map]",v="[object Number]",y="[object RegExp]",m="[object Set]",_="[object String]",w="[object Symbol]",S="[object ArrayBuffer]",E="[object DataView]",A=e?e.prototype:void 0,T=A?A.valueOf:void 0;function I(q,p,C,O,N,V,W){switch(C){case E:if(q.byteLength!=p.byteLength||q.byteOffset!=p.byteOffset)return!1;q=q.buffer,p=p.buffer;case S:return!(q.byteLength!=p.byteLength||!V(new t(q),new t(p)));case u:case c:case v:return r(+q,+p);case f:return q.name==p.name&&q.message==p.message;case y:case _:return q==p+"";case h:var G=i;case m:var ee=O&o;if(G||(G=s),q.size!=p.size&&!ee)return!1;var ae=W.get(q);if(ae)return ae==p;O|=a,W.set(q,p);var K=n(G(q),G(p),O,N,V,W);return W.delete(q),K;case w:if(T)return T.call(q)==T.call(p)}return!1}return v1=I,v1}var m1,B6;function zoe(){if(B6)return m1;B6=1;var e=i7(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(s,o,a,u,c,f){var h=a&t,v=e(s),y=v.length,m=e(o),_=m.length;if(y!=_&&!h)return!1;for(var w=y;w--;){var S=v[w];if(!(h?S in o:n.call(o,S)))return!1}var E=f.get(s),A=f.get(o);if(E&&A)return E==o&&A==s;var T=!0;f.set(s,o),f.set(o,s);for(var I=h;++w<y;){S=v[w];var q=s[S],p=o[S];if(u)var C=h?u(p,q,S,o,s,f):u(q,p,S,s,o,f);if(!(C===void 0?q===p||c(q,p,a,u,f):C)){T=!1;break}I||(I=S=="constructor")}if(T&&!I){var O=s.constructor,N=o.constructor;O!=N&&"constructor"in s&&"constructor"in o&&!(typeof O=="function"&&O instanceof O&&typeof N=="function"&&N instanceof N)&&(T=!1)}return f.delete(s),f.delete(o),T}return m1=i,m1}var y1,z6;function Voe(){if(z6)return y1;z6=1;var e=Sg(),t=v7(),r=Boe(),n=zoe(),i=Gl(),s=si(),o=Vl(),a=Oh(),u=1,c="[object Arguments]",f="[object Array]",h="[object Object]",v=Object.prototype,y=v.hasOwnProperty;function m(_,w,S,E,A,T){var I=s(_),q=s(w),p=I?f:i(_),C=q?f:i(w);p=p==c?h:p,C=C==c?h:C;var O=p==h,N=C==h,V=p==C;if(V&&o(_)){if(!o(w))return!1;I=!0,O=!1}if(V&&!O)return T||(T=new e),I||a(_)?t(_,w,S,E,A,T):r(_,w,p,S,E,A,T);if(!(S&u)){var W=O&&y.call(_,"__wrapped__"),G=N&&y.call(w,"__wrapped__");if(W||G){var ee=W?_.value():_,ae=G?w.value():w;return T||(T=new e),A(ee,ae,S,E,T)}}return V?(T||(T=new e),n(_,w,S,E,A,T)):!1}return y1=m,y1}var _1,V6;function m7(){if(V6)return _1;V6=1;var e=Voe(),t=ya();function r(n,i,s,o,a){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,s,o,r,a)}return _1=r,_1}var b1,G6;function Goe(){if(G6)return b1;G6=1;var e=Sg(),t=m7(),r=1,n=2;function i(s,o,a,u){var c=a.length,f=c,h=!u;if(s==null)return!f;for(s=Object(s);c--;){var v=a[c];if(h&&v[2]?v[1]!==s[v[0]]:!(v[0]in s))return!1}for(;++c<f;){v=a[c];var y=v[0],m=s[y],_=v[1];if(h&&v[2]){if(m===void 0&&!(y in s))return!1}else{var w=new e;if(u)var S=u(m,_,y,s,o,w);if(!(S===void 0?t(_,m,r|n,u,w):S))return!1}}return!0}return b1=i,b1}var w1,$6;function y7(){if($6)return w1;$6=1;var e=fo();function t(r){return r===r&&!e(r)}return w1=t,w1}var x1,U6;function $oe(){if(U6)return x1;U6=1;var e=y7(),t=Cu();function r(n){for(var i=t(n),s=i.length;s--;){var o=i[s],a=n[o];i[s]=[o,a,e(a)]}return i}return x1=r,x1}var S1,j6;function _7(){if(j6)return S1;j6=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return S1=e,S1}var E1,H6;function Uoe(){if(H6)return E1;H6=1;var e=Goe(),t=$oe(),r=_7();function n(i){var s=t(i);return s.length==1&&s[0][2]?r(s[0][0],s[0][1]):function(o){return o===i||e(o,i,s)}}return E1=n,E1}var A1,W6;function $l(){if(W6)return A1;W6=1;var e=wc(),t=ya(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return A1=n,A1}var T1,X6;function I2(){if(X6)return T1;X6=1;var e=si(),t=$l(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,o){if(e(s))return!1;var a=typeof s;return a=="number"||a=="symbol"||a=="boolean"||s==null||t(s)?!0:n.test(s)||!r.test(s)||o!=null&&s in Object(o)}return T1=i,T1}var P1,Y6;function joe(){if(Y6)return P1;Y6=1;var e=y2(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var o=arguments,a=i?i.apply(this,o):o[0],u=s.cache;if(u.has(a))return u.get(a);var c=n.apply(this,o);return s.cache=u.set(a,c)||u,c};return s.cache=new(r.Cache||e),s}return r.Cache=e,P1=r,P1}var C1,K6;function Hoe(){if(K6)return C1;K6=1;var e=joe(),t=500;function r(n){var i=e(n,function(o){return s.size===t&&s.clear(),o}),s=i.cache;return i}return C1=r,C1}var R1,Z6;function Woe(){if(Z6)return R1;Z6=1;var e=Hoe(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(o,a,u,c){s.push(u?c.replace(r,"$1"):a||o)}),s});return R1=n,R1}var I1,J6;function Og(){if(J6)return I1;J6=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,s=Array(i);++n<i;)s[n]=r(t[n],n,t);return s}return I1=e,I1}var O1,Q6;function Xoe(){if(Q6)return O1;Q6=1;var e=zl(),t=Og(),r=si(),n=$l(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function o(a){if(typeof a=="string")return a;if(r(a))return t(a,o)+"";if(n(a))return s?s.call(a):"";var u=a+"";return u=="0"&&1/a==-1/0?"-0":u}return O1=o,O1}var M1,eB;function b7(){if(eB)return M1;eB=1;var e=Xoe();function t(r){return r==null?"":e(r)}return M1=t,M1}var k1,tB;function Mg(){if(tB)return k1;tB=1;var e=si(),t=I2(),r=Woe(),n=b7();function i(s,o){return e(s)?s:t(s,o)?[s]:r(n(s))}return k1=i,k1}var L1,rB;function Mh(){if(rB)return L1;rB=1;var e=$l();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return L1=t,L1}var N1,nB;function kg(){if(nB)return N1;nB=1;var e=Mg(),t=Mh();function r(n,i){i=e(i,n);for(var s=0,o=i.length;n!=null&&s<o;)n=n[t(i[s++])];return s&&s==o?n:void 0}return N1=r,N1}var q1,iB;function Yoe(){if(iB)return q1;iB=1;var e=kg();function t(r,n,i){var s=r==null?void 0:e(r,n);return s===void 0?i:s}return q1=t,q1}var D1,sB;function Koe(){if(sB)return D1;sB=1;function e(t,r){return t!=null&&r in Object(t)}return D1=e,D1}var F1,oB;function w7(){if(oB)return F1;oB=1;var e=Mg(),t=Ih(),r=si(),n=Tg(),i=b2(),s=Mh();function o(a,u,c){u=e(u,a);for(var f=-1,h=u.length,v=!1;++f<h;){var y=s(u[f]);if(!(v=a!=null&&c(a,y)))break;a=a[y]}return v||++f!=h?v:(h=a==null?0:a.length,!!h&&i(h)&&n(y,h)&&(r(a)||t(a)))}return F1=o,F1}var B1,aB;function x7(){if(aB)return B1;aB=1;var e=Koe(),t=w7();function r(n,i){return n!=null&&t(n,i,e)}return B1=r,B1}var z1,uB;function Zoe(){if(uB)return z1;uB=1;var e=m7(),t=Yoe(),r=x7(),n=I2(),i=y7(),s=_7(),o=Mh(),a=1,u=2;function c(f,h){return n(f)&&i(h)?s(o(f),h):function(v){var y=t(v,f);return y===void 0&&y===h?r(v,f):e(h,y,a|u)}}return z1=c,z1}var V1,cB;function S7(){if(cB)return V1;cB=1;function e(t){return function(r){return r==null?void 0:r[t]}}return V1=e,V1}var G1,lB;function Joe(){if(lB)return G1;lB=1;var e=kg();function t(r){return function(n){return e(n,r)}}return G1=t,G1}var $1,fB;function Qoe(){if(fB)return $1;fB=1;var e=S7(),t=Joe(),r=I2(),n=Mh();function i(s){return r(s)?e(n(s)):t(s)}return $1=i,$1}var U1,hB;function Xa(){if(hB)return U1;hB=1;var e=Uoe(),t=Zoe(),r=Ec(),n=si(),i=Qoe();function s(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?t(o[0],o[1]):e(o):i(o)}return U1=s,U1}var j1,dB;function E7(){if(dB)return j1;dB=1;var e=e7(),t=Loe(),r=Xa(),n=si();function i(s,o){var a=n(s)?e:t;return a(s,r(o,3))}return j1=i,j1}var H1,pB;function eae(){if(pB)return H1;pB=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n,i){return n!=null&&t.call(n,i)}return H1=r,H1}var W1,gB;function A7(){if(gB)return W1;gB=1;var e=eae(),t=w7();function r(n,i){return n!=null&&t(n,i,e)}return W1=r,W1}var X1,vB;function tae(){if(vB)return X1;vB=1;var e=x2(),t=Gl(),r=Ih(),n=si(),i=Wa(),s=Vl(),o=Cg(),a=Oh(),u="[object Map]",c="[object Set]",f=Object.prototype,h=f.hasOwnProperty;function v(y){if(y==null)return!0;if(i(y)&&(n(y)||typeof y=="string"||typeof y.splice=="function"||s(y)||a(y)||r(y)))return!y.length;var m=t(y);if(m==u||m==c)return!y.size;if(o(y))return!e(y).length;for(var _ in y)if(h.call(y,_))return!1;return!0}return X1=v,X1}var Y1,mB;function T7(){if(mB)return Y1;mB=1;function e(t){return t===void 0}return Y1=e,Y1}var K1,yB;function P7(){if(yB)return K1;yB=1;var e=Ig(),t=Wa();function r(n,i){var s=-1,o=t(n)?Array(n.length):[];return e(n,function(a,u,c){o[++s]=i(a,u,c)}),o}return K1=r,K1}var Z1,_B;function C7(){if(_B)return Z1;_B=1;var e=Og(),t=Xa(),r=P7(),n=si();function i(s,o){var a=n(s)?e:r;return a(s,t(o,3))}return Z1=i,Z1}var J1,bB;function rae(){if(bB)return J1;bB=1;function e(t,r,n,i){var s=-1,o=t==null?0:t.length;for(i&&o&&(n=t[++s]);++s<o;)n=r(n,t[s],s,t);return n}return J1=e,J1}var Q1,wB;function nae(){if(wB)return Q1;wB=1;function e(t,r,n,i,s){return s(t,function(o,a,u){n=i?(i=!1,o):r(n,o,a,u)}),n}return Q1=e,Q1}var ew,xB;function R7(){if(xB)return ew;xB=1;var e=rae(),t=Ig(),r=Xa(),n=nae(),i=si();function s(o,a,u){var c=i(o)?e:n,f=arguments.length<3;return c(o,r(a,4),u,f,t)}return ew=s,ew}var tw,SB;function iae(){if(SB)return tw;SB=1;var e=wc(),t=si(),r=ya(),n="[object String]";function i(s){return typeof s=="string"||!t(s)&&r(s)&&e(s)==n}return tw=i,tw}var rw,EB;function sae(){if(EB)return rw;EB=1;var e=S7(),t=e("length");return rw=t,rw}var nw,AB;function oae(){if(AB)return nw;AB=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,s="\\ufe0e\\ufe0f",o="\\u200d",a=RegExp("["+o+e+i+s+"]");function u(c){return a.test(c)}return nw=u,nw}var iw,TB;function aae(){if(TB)return iw;TB=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,s="\\ufe0e\\ufe0f",o="["+e+"]",a="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",c="(?:"+a+"|"+u+")",f="[^"+e+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",v="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",m=c+"?",_="["+s+"]?",w="(?:"+y+"(?:"+[f,h,v].join("|")+")"+_+m+")*",S=_+m+w,E="(?:"+[f+a+"?",a,h,v,o].join("|")+")",A=RegExp(u+"(?="+u+")|"+E+S,"g");function T(I){for(var q=A.lastIndex=0;A.test(I);)++q;return q}return iw=T,iw}var sw,PB;function uae(){if(PB)return sw;PB=1;var e=sae(),t=oae(),r=aae();function n(i){return t(i)?r(i):e(i)}return sw=n,sw}var ow,CB;function cae(){if(CB)return ow;CB=1;var e=x2(),t=Gl(),r=Wa(),n=iae(),i=uae(),s="[object Map]",o="[object Set]";function a(u){if(u==null)return 0;if(r(u))return n(u)?i(u):u.length;var c=t(u);return c==s||c==o?u.size:e(u).length}return ow=a,ow}var aw,RB;function lae(){if(RB)return aw;RB=1;var e=_2(),t=u7(),r=C2(),n=Xa(),i=Rg(),s=si(),o=Vl(),a=Ch(),u=fo(),c=Oh();function f(h,v,y){var m=s(h),_=m||o(h)||c(h);if(v=n(v,4),y==null){var w=h&&h.constructor;_?y=m?new w:[]:u(h)?y=a(w)?t(i(h)):{}:y={}}return(_?e:r)(h,function(S,E,A){return v(y,S,E,A)}),y}return aw=f,aw}var uw,IB;function fae(){if(IB)return uw;IB=1;var e=zl(),t=Ih(),r=si(),n=e?e.isConcatSpreadable:void 0;function i(s){return r(s)||t(s)||!!(n&&s&&s[n])}return uw=i,uw}var cw,OB;function O2(){if(OB)return cw;OB=1;var e=E2(),t=fae();function r(n,i,s,o,a){var u=-1,c=n.length;for(s||(s=t),a||(a=[]);++u<c;){var f=n[u];i>0&&s(f)?i>1?r(f,i-1,s,o,a):e(a,f):o||(a[a.length]=f)}return a}return cw=r,cw}var lw,MB;function hae(){if(MB)return lw;MB=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return lw=e,lw}var fw,kB;function I7(){if(kB)return fw;kB=1;var e=hae(),t=Math.max;function r(n,i,s){return i=t(i===void 0?n.length-1:i,0),function(){for(var o=arguments,a=-1,u=t(o.length-i,0),c=Array(u);++a<u;)c[a]=o[i+a];a=-1;for(var f=Array(i+1);++a<i;)f[a]=o[a];return f[i]=s(c),e(n,this,f)}}return fw=r,fw}var hw,LB;function dae(){if(LB)return hw;LB=1;var e=T2(),t=YV(),r=Ec(),n=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:r;return hw=n,hw}var dw,NB;function pae(){if(NB)return dw;NB=1;var e=800,t=16,r=Date.now;function n(i){var s=0,o=0;return function(){var a=r(),u=t-(a-o);if(o=a,u>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return dw=n,dw}var pw,qB;function O7(){if(qB)return pw;qB=1;var e=dae(),t=pae(),r=t(e);return pw=r,pw}var gw,DB;function Lg(){if(DB)return gw;DB=1;var e=Ec(),t=I7(),r=O7();function n(i,s){return r(t(i,s,e),i+"")}return gw=n,gw}var vw,FB;function M7(){if(FB)return vw;FB=1;function e(t,r,n,i){for(var s=t.length,o=n+(i?1:-1);i?o--:++o<s;)if(r(t[o],o,t))return o;return-1}return vw=e,vw}var mw,BB;function gae(){if(BB)return mw;BB=1;function e(t){return t!==t}return mw=e,mw}var yw,zB;function vae(){if(zB)return yw;zB=1;function e(t,r,n){for(var i=n-1,s=t.length;++i<s;)if(t[i]===r)return i;return-1}return yw=e,yw}var _w,VB;function mae(){if(VB)return _w;VB=1;var e=M7(),t=gae(),r=vae();function n(i,s,o){return s===s?r(i,s,o):e(i,t,o)}return _w=n,_w}var bw,GB;function yae(){if(GB)return bw;GB=1;var e=mae();function t(r,n){var i=r==null?0:r.length;return!!i&&e(r,n,0)>-1}return bw=t,bw}var ww,$B;function _ae(){if($B)return ww;$B=1;function e(t,r,n){for(var i=-1,s=t==null?0:t.length;++i<s;)if(n(r,t[i]))return!0;return!1}return ww=e,ww}var xw,UB;function bae(){if(UB)return xw;UB=1;function e(){}return xw=e,xw}var Sw,jB;function wae(){if(jB)return Sw;jB=1;var e=s7(),t=bae(),r=R2(),n=1/0,i=e&&1/r(new e([,-0]))[1]==n?function(s){return new e(s)}:t;return Sw=i,Sw}var Ew,HB;function xae(){if(HB)return Ew;HB=1;var e=p7(),t=yae(),r=_ae(),n=g7(),i=wae(),s=R2(),o=200;function a(u,c,f){var h=-1,v=t,y=u.length,m=!0,_=[],w=_;if(f)m=!1,v=r;else if(y>=o){var S=c?null:i(u);if(S)return s(S);m=!1,v=n,w=new e}else w=c?[]:_;e:for(;++h<y;){var E=u[h],A=c?c(E):E;if(E=f||E!==0?E:0,m&&A===A){for(var T=w.length;T--;)if(w[T]===A)continue e;c&&w.push(A),_.push(E)}else v(w,A,f)||(w!==_&&w.push(A),_.push(E))}return _}return Ew=a,Ew}var Aw,WB;function k7(){if(WB)return Aw;WB=1;var e=Wa(),t=ya();function r(n){return t(n)&&e(n)}return Aw=r,Aw}var Tw,XB;function Sae(){if(XB)return Tw;XB=1;var e=O2(),t=Lg(),r=xae(),n=k7(),i=t(function(s){return r(e(s,1,n,!0))});return Tw=i,Tw}var Pw,YB;function Eae(){if(YB)return Pw;YB=1;var e=Og();function t(r,n){return e(n,function(i){return r[i]})}return Pw=t,Pw}var Cw,KB;function L7(){if(KB)return Cw;KB=1;var e=Eae(),t=Cu();function r(n){return n==null?[]:e(n,t(n))}return Cw=r,Cw}var Rw,ZB;function ho(){if(ZB)return Rw;ZB=1;var e;if(typeof v2=="function")try{e={clone:Ooe(),constant:T2(),each:d7(),filter:E7(),has:A7(),isArray:si(),isEmpty:tae(),isFunction:Ch(),isUndefined:T7(),keys:Cu(),map:C7(),reduce:R7(),size:cae(),transform:lae(),union:Sae(),values:L7()}}catch{}return e||(e=window._),Rw=e,Rw}var Iw,JB;function M2(){if(JB)return Iw;JB=1;var e=ho();Iw=i;var t="\0",r="\0",n="";function i(f){this._isDirected=e.has(f,"directed")?f.directed:!0,this._isMultigraph=e.has(f,"multigraph")?f.multigraph:!1,this._isCompound=e.has(f,"compound")?f.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(f){return this._label=f,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultNodeLabelFn=f,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var f=this;return e.filter(this.nodes(),function(h){return e.isEmpty(f._in[h])})},i.prototype.sinks=function(){var f=this;return e.filter(this.nodes(),function(h){return e.isEmpty(f._out[h])})},i.prototype.setNodes=function(f,h){var v=arguments,y=this;return e.each(f,function(m){v.length>1?y.setNode(m,h):y.setNode(m)}),this},i.prototype.setNode=function(f,h){return e.has(this._nodes,f)?(arguments.length>1&&(this._nodes[f]=h),this):(this._nodes[f]=arguments.length>1?h:this._defaultNodeLabelFn(f),this._isCompound&&(this._parent[f]=r,this._children[f]={},this._children[r][f]=!0),this._in[f]={},this._preds[f]={},this._out[f]={},this._sucs[f]={},++this._nodeCount,this)},i.prototype.node=function(f){return this._nodes[f]},i.prototype.hasNode=function(f){return e.has(this._nodes,f)},i.prototype.removeNode=function(f){var h=this;if(e.has(this._nodes,f)){var v=function(y){h.removeEdge(h._edgeObjs[y])};delete this._nodes[f],this._isCompound&&(this._removeFromParentsChildList(f),delete this._parent[f],e.each(this.children(f),function(y){h.setParent(y)}),delete this._children[f]),e.each(e.keys(this._in[f]),v),delete this._in[f],delete this._preds[f],e.each(e.keys(this._out[f]),v),delete this._out[f],delete this._sucs[f],--this._nodeCount}return this},i.prototype.setParent=function(f,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(h))h=r;else{h+="";for(var v=h;!e.isUndefined(v);v=this.parent(v))if(v===f)throw new Error("Setting "+h+" as parent of "+f+" would create a cycle");this.setNode(h)}return this.setNode(f),this._removeFromParentsChildList(f),this._parent[f]=h,this._children[h][f]=!0,this},i.prototype._removeFromParentsChildList=function(f){delete this._children[this._parent[f]][f]},i.prototype.parent=function(f){if(this._isCompound){var h=this._parent[f];if(h!==r)return h}},i.prototype.children=function(f){if(e.isUndefined(f)&&(f=r),this._isCompound){var h=this._children[f];if(h)return e.keys(h)}else{if(f===r)return this.nodes();if(this.hasNode(f))return[]}},i.prototype.predecessors=function(f){var h=this._preds[f];if(h)return e.keys(h)},i.prototype.successors=function(f){var h=this._sucs[f];if(h)return e.keys(h)},i.prototype.neighbors=function(f){var h=this.predecessors(f);if(h)return e.union(h,this.successors(f))},i.prototype.isLeaf=function(f){var h;return this.isDirected()?h=this.successors(f):h=this.neighbors(f),h.length===0},i.prototype.filterNodes=function(f){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var v=this;e.each(this._nodes,function(_,w){f(w)&&h.setNode(w,_)}),e.each(this._edgeObjs,function(_){h.hasNode(_.v)&&h.hasNode(_.w)&&h.setEdge(_,v.edge(_))});var y={};function m(_){var w=v.parent(_);return w===void 0||h.hasNode(w)?(y[_]=w,w):w in y?y[w]:m(w)}return this._isCompound&&e.each(h.nodes(),function(_){h.setParent(_,m(_))}),h},i.prototype.setDefaultEdgeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultEdgeLabelFn=f,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(f,h){var v=this,y=arguments;return e.reduce(f,function(m,_){return y.length>1?v.setEdge(m,_,h):v.setEdge(m,_),_}),this},i.prototype.setEdge=function(){var f,h,v,y,m=!1,_=arguments[0];typeof _=="object"&&_!==null&&"v"in _?(f=_.v,h=_.w,v=_.name,arguments.length===2&&(y=arguments[1],m=!0)):(f=_,h=arguments[1],v=arguments[3],arguments.length>2&&(y=arguments[2],m=!0)),f=""+f,h=""+h,e.isUndefined(v)||(v=""+v);var w=a(this._isDirected,f,h,v);if(e.has(this._edgeLabels,w))return m&&(this._edgeLabels[w]=y),this;if(!e.isUndefined(v)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(h),this._edgeLabels[w]=m?y:this._defaultEdgeLabelFn(f,h,v);var S=u(this._isDirected,f,h,v);return f=S.v,h=S.w,Object.freeze(S),this._edgeObjs[w]=S,s(this._preds[h],f),s(this._sucs[f],h),this._in[h][w]=S,this._out[f][w]=S,this._edgeCount++,this},i.prototype.edge=function(f,h,v){var y=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,f,h,v);return this._edgeLabels[y]},i.prototype.hasEdge=function(f,h,v){var y=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,f,h,v);return e.has(this._edgeLabels,y)},i.prototype.removeEdge=function(f,h,v){var y=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,f,h,v),m=this._edgeObjs[y];return m&&(f=m.v,h=m.w,delete this._edgeLabels[y],delete this._edgeObjs[y],o(this._preds[h],f),o(this._sucs[f],h),delete this._in[h][y],delete this._out[f][y],this._edgeCount--),this},i.prototype.inEdges=function(f,h){var v=this._in[f];if(v){var y=e.values(v);return h?e.filter(y,function(m){return m.v===h}):y}},i.prototype.outEdges=function(f,h){var v=this._out[f];if(v){var y=e.values(v);return h?e.filter(y,function(m){return m.w===h}):y}},i.prototype.nodeEdges=function(f,h){var v=this.inEdges(f,h);if(v)return v.concat(this.outEdges(f,h))};function s(f,h){f[h]?f[h]++:f[h]=1}function o(f,h){--f[h]||delete f[h]}function a(f,h,v,y){var m=""+h,_=""+v;if(!f&&m>_){var w=m;m=_,_=w}return m+n+_+n+(e.isUndefined(y)?t:y)}function u(f,h,v,y){var m=""+h,_=""+v;if(!f&&m>_){var w=m;m=_,_=w}var S={v:m,w:_};return y&&(S.name=y),S}function c(f,h){return a(f,h.v,h.w,h.name)}return Iw}var Ow,QB;function Aae(){return QB||(QB=1,Ow="2.1.8"),Ow}var Mw,e8;function Tae(){return e8||(e8=1,Mw={Graph:M2(),version:Aae()}),Mw}var kw,t8;function Pae(){if(t8)return kw;t8=1;var e=ho(),t=M2();kw={write:r,read:s};function r(o){var a={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:n(o),edges:i(o)};return e.isUndefined(o.graph())||(a.value=e.clone(o.graph())),a}function n(o){return e.map(o.nodes(),function(a){var u=o.node(a),c=o.parent(a),f={v:a};return e.isUndefined(u)||(f.value=u),e.isUndefined(c)||(f.parent=c),f})}function i(o){return e.map(o.edges(),function(a){var u=o.edge(a),c={v:a.v,w:a.w};return e.isUndefined(a.name)||(c.name=a.name),e.isUndefined(u)||(c.value=u),c})}function s(o){var a=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(u){a.setNode(u.v,u.value),u.parent&&a.setParent(u.v,u.parent)}),e.each(o.edges,function(u){a.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),a}return kw}var Lw,r8;function Cae(){if(r8)return Lw;r8=1;var e=ho();Lw=t;function t(r){var n={},i=[],s;function o(a){e.has(n,a)||(n[a]=!0,s.push(a),e.each(r.successors(a),o),e.each(r.predecessors(a),o))}return e.each(r.nodes(),function(a){s=[],o(a),s.length&&i.push(s)}),i}return Lw}var Nw,n8;function N7(){if(n8)return Nw;n8=1;var e=ho();Nw=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(r){return r.key})},t.prototype.has=function(r){return e.has(this._keyIndices,r)},t.prototype.priority=function(r){var n=this._keyIndices[r];if(n!==void 0)return this._arr[n].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(r,n){var i=this._keyIndices;if(r=String(r),!e.has(i,r)){var s=this._arr,o=s.length;return i[r]=o,s.push({key:r,priority:n}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},t.prototype.decrease=function(r,n){var i=this._keyIndices[r];if(n>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[i].priority+" New: "+n);this._arr[i].priority=n,this._decrease(i)},t.prototype._heapify=function(r){var n=this._arr,i=2*r,s=i+1,o=r;i<n.length&&(o=n[i].priority<n[o].priority?i:o,s<n.length&&(o=n[s].priority<n[o].priority?s:o),o!==r&&(this._swap(r,o),this._heapify(o)))},t.prototype._decrease=function(r){for(var n=this._arr,i=n[r].priority,s;r!==0&&(s=r>>1,!(n[s].priority<i));)this._swap(r,s),r=s},t.prototype._swap=function(r,n){var i=this._arr,s=this._keyIndices,o=i[r],a=i[n];i[r]=a,i[n]=o,s[a.key]=r,s[o.key]=n},Nw}var qw,i8;function q7(){if(i8)return qw;i8=1;var e=ho(),t=N7();qw=n;var r=e.constant(1);function n(s,o,a,u){return i(s,String(o),a||r,u||function(c){return s.outEdges(c)})}function i(s,o,a,u){var c={},f=new t,h,v,y=function(m){var _=m.v!==h?m.v:m.w,w=c[_],S=a(m),E=v.distance+S;if(S<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+m+" Weight: "+S);E<w.distance&&(w.distance=E,w.predecessor=h,f.decrease(_,E))};for(s.nodes().forEach(function(m){var _=m===o?0:Number.POSITIVE_INFINITY;c[m]={distance:_},f.add(m,_)});f.size()>0&&(h=f.removeMin(),v=c[h],v.distance!==Number.POSITIVE_INFINITY);)u(h).forEach(y);return c}return qw}var Dw,s8;function Rae(){if(s8)return Dw;s8=1;var e=q7(),t=ho();Dw=r;function r(n,i,s){return t.transform(n.nodes(),function(o,a){o[a]=e(n,a,i,s)},{})}return Dw}var Fw,o8;function D7(){if(o8)return Fw;o8=1;var e=ho();Fw=t;function t(r){var n=0,i=[],s={},o=[];function a(u){var c=s[u]={onStack:!0,lowlink:n,index:n++};if(i.push(u),r.successors(u).forEach(function(v){e.has(s,v)?s[v].onStack&&(c.lowlink=Math.min(c.lowlink,s[v].index)):(a(v),c.lowlink=Math.min(c.lowlink,s[v].lowlink))}),c.lowlink===c.index){var f=[],h;do h=i.pop(),s[h].onStack=!1,f.push(h);while(u!==h);o.push(f)}}return r.nodes().forEach(function(u){e.has(s,u)||a(u)}),o}return Fw}var Bw,a8;function Iae(){if(a8)return Bw;a8=1;var e=ho(),t=D7();Bw=r;function r(n){return e.filter(t(n),function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return Bw}var zw,u8;function Oae(){if(u8)return zw;u8=1;var e=ho();zw=r;var t=e.constant(1);function r(i,s,o){return n(i,s||t,o||function(a){return i.outEdges(a)})}function n(i,s,o){var a={},u=i.nodes();return u.forEach(function(c){a[c]={},a[c][c]={distance:0},u.forEach(function(f){c!==f&&(a[c][f]={distance:Number.POSITIVE_INFINITY})}),o(c).forEach(function(f){var h=f.v===c?f.w:f.v,v=s(f);a[c][h]={distance:v,predecessor:c}})}),u.forEach(function(c){var f=a[c];u.forEach(function(h){var v=a[h];u.forEach(function(y){var m=v[c],_=f[y],w=v[y],S=m.distance+_.distance;S<w.distance&&(w.distance=S,w.predecessor=_.predecessor)})})}),a}return zw}var Vw,c8;function F7(){if(c8)return Vw;c8=1;var e=ho();Vw=t,t.CycleException=r;function t(n){var i={},s={},o=[];function a(u){if(e.has(s,u))throw new r;e.has(i,u)||(s[u]=!0,i[u]=!0,e.each(n.predecessors(u),a),delete s[u],o.push(u))}if(e.each(n.sinks(),a),e.size(i)!==n.nodeCount())throw new r;return o}function r(){}return r.prototype=new Error,Vw}var Gw,l8;function Mae(){if(l8)return Gw;l8=1;var e=F7();Gw=t;function t(r){try{e(r)}catch(n){if(n instanceof e.CycleException)return!1;throw n}return!0}return Gw}var $w,f8;function B7(){if(f8)return $w;f8=1;var e=ho();$w=t;function t(n,i,s){e.isArray(i)||(i=[i]);var o=(n.isDirected()?n.successors:n.neighbors).bind(n),a=[],u={};return e.each(i,function(c){if(!n.hasNode(c))throw new Error("Graph does not have node: "+c);r(n,c,s==="post",u,o,a)}),a}function r(n,i,s,o,a,u){e.has(o,i)||(o[i]=!0,s||u.push(i),e.each(a(i),function(c){r(n,c,s,o,a,u)}),s&&u.push(i))}return $w}var Uw,h8;function kae(){if(h8)return Uw;h8=1;var e=B7();Uw=t;function t(r,n){return e(r,n,"post")}return Uw}var jw,d8;function Lae(){if(d8)return jw;d8=1;var e=B7();jw=t;function t(r,n){return e(r,n,"pre")}return jw}var Hw,p8;function Nae(){if(p8)return Hw;p8=1;var e=ho(),t=M2(),r=N7();Hw=n;function n(i,s){var o=new t,a={},u=new r,c;function f(v){var y=v.v===c?v.w:v.v,m=u.priority(y);if(m!==void 0){var _=s(v);_<m&&(a[y]=c,u.decrease(y,_))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(v){u.add(v,Number.POSITIVE_INFINITY),o.setNode(v)}),u.decrease(i.nodes()[0],0);for(var h=!1;u.size()>0;){if(c=u.removeMin(),e.has(a,c))o.setEdge(c,a[c]);else{if(h)throw new Error("Input graph is not connected: "+i);h=!0}i.nodeEdges(c).forEach(f)}return o}return Hw}var Ww,g8;function qae(){return g8||(g8=1,Ww={components:Cae(),dijkstra:q7(),dijkstraAll:Rae(),findCycles:Iae(),floydWarshall:Oae(),isAcyclic:Mae(),postorder:kae(),preorder:Lae(),prim:Nae(),tarjan:D7(),topsort:F7()}),Ww}var Xw,v8;function z7(){if(v8)return Xw;v8=1;var e=Tae();return Xw={Graph:e.Graph,json:Pae(),alg:qae(),version:e.version},Xw}var Yw,m8;function Io(){if(m8)return Yw;m8=1;var e;if(typeof v2=="function")try{e=z7()}catch{}return e||(e=window.graphlib),Yw=e,Yw}var Kw,y8;function Dae(){if(y8)return Kw;y8=1;var e=l7(),t=1,r=4;function n(i){return e(i,t|r)}return Kw=n,Kw}var Zw,_8;function Ng(){if(_8)return Zw;_8=1;var e=Bl(),t=Wa(),r=Tg(),n=fo();function i(s,o,a){if(!n(a))return!1;var u=typeof o;return(u=="number"?t(a)&&r(o,a.length):u=="string"&&o in a)?e(a[o],s):!1}return Zw=i,Zw}var Jw,b8;function Fae(){if(b8)return Jw;b8=1;var e=Lg(),t=Bl(),r=Ng(),n=Sc(),i=Object.prototype,s=i.hasOwnProperty,o=e(function(a,u){a=Object(a);var c=-1,f=u.length,h=f>2?u[2]:void 0;for(h&&r(u[0],u[1],h)&&(f=1);++c<f;)for(var v=u[c],y=n(v),m=-1,_=y.length;++m<_;){var w=y[m],S=a[w];(S===void 0||t(S,i[w])&&!s.call(a,w))&&(a[w]=v[w])}return a});return Jw=o,Jw}var Qw,w8;function Bae(){if(w8)return Qw;w8=1;var e=Xa(),t=Wa(),r=Cu();function n(i){return function(s,o,a){var u=Object(s);if(!t(s)){var c=e(o,3);s=r(s),o=function(h){return c(u[h],h,u)}}var f=i(s,o,a);return f>-1?u[c?s[f]:f]:void 0}}return Qw=n,Qw}var ex,x8;function zae(){if(x8)return ex;x8=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return ex=t,ex}var tx,S8;function Vae(){if(S8)return tx;S8=1;var e=zae(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return tx=r,tx}var rx,E8;function Gae(){if(E8)return rx;E8=1;var e=Vae(),t=fo(),r=$l(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function u(c){if(typeof c=="number")return c;if(r(c))return n;if(t(c)){var f=typeof c.valueOf=="function"?c.valueOf():c;c=t(f)?f+"":f}if(typeof c!="string")return c===0?c:+c;c=e(c);var h=s.test(c);return h||o.test(c)?a(c.slice(2),h?2:8):i.test(c)?n:+c}return rx=u,rx}var nx,A8;function V7(){if(A8)return nx;A8=1;var e=Gae(),t=1/0,r=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-1/0){var s=i<0?-1:1;return s*r}return i===i?i:0}return nx=n,nx}var ix,T8;function $ae(){if(T8)return ix;T8=1;var e=V7();function t(r){var n=e(r),i=n%1;return n===n?i?n-i:n:0}return ix=t,ix}var sx,P8;function Uae(){if(P8)return sx;P8=1;var e=M7(),t=Xa(),r=$ae(),n=Math.max;function i(s,o,a){var u=s==null?0:s.length;if(!u)return-1;var c=a==null?0:r(a);return c<0&&(c=n(u+c,0)),e(s,t(o,3),c)}return sx=i,sx}var ox,C8;function jae(){if(C8)return ox;C8=1;var e=Bae(),t=Uae(),r=e(t);return ox=r,ox}var ax,R8;function G7(){if(R8)return ax;R8=1;var e=O2();function t(r){var n=r==null?0:r.length;return n?e(r,1):[]}return ax=t,ax}var ux,I8;function Hae(){if(I8)return ux;I8=1;var e=P2(),t=f7(),r=Sc();function n(i,s){return i==null?i:e(i,t(s),r)}return ux=n,ux}var cx,O8;function Wae(){if(O8)return cx;O8=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return cx=e,cx}var lx,M8;function Xae(){if(M8)return lx;M8=1;var e=Eg(),t=C2(),r=Xa();function n(i,s){var o={};return s=r(s,3),t(i,function(a,u,c){e(o,u,s(a,u,c))}),o}return lx=n,lx}var fx,k8;function k2(){if(k8)return fx;k8=1;var e=$l();function t(r,n,i){for(var s=-1,o=r.length;++s<o;){var a=r[s],u=n(a);if(u!=null&&(c===void 0?u===u&&!e(u):i(u,c)))var c=u,f=a}return f}return fx=t,fx}var hx,L8;function Yae(){if(L8)return hx;L8=1;function e(t,r){return t>r}return hx=e,hx}var dx,N8;function Kae(){if(N8)return dx;N8=1;var e=k2(),t=Yae(),r=Ec();function n(i){return i&&i.length?e(i,r,t):void 0}return dx=n,dx}var px,q8;function $7(){if(q8)return px;q8=1;var e=Eg(),t=Bl();function r(n,i,s){(s!==void 0&&!t(n[i],s)||s===void 0&&!(i in n))&&e(n,i,s)}return px=r,px}var gx,D8;function Zae(){if(D8)return gx;D8=1;var e=wc(),t=Rg(),r=ya(),n="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,a=s.hasOwnProperty,u=o.call(Object);function c(f){if(!r(f)||e(f)!=n)return!1;var h=t(f);if(h===null)return!0;var v=a.call(h,"constructor")&&h.constructor;return typeof v=="function"&&v instanceof v&&o.call(v)==u}return gx=c,gx}var vx,F8;function U7(){if(F8)return vx;F8=1;function e(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}return vx=e,vx}var mx,B8;function Jae(){if(B8)return mx;B8=1;var e=Rh(),t=Sc();function r(n){return e(n,t(n))}return mx=r,mx}var yx,z8;function Qae(){if(z8)return yx;z8=1;var e=$7(),t=JV(),r=a7(),n=QV(),i=c7(),s=Ih(),o=si(),a=k7(),u=Vl(),c=Ch(),f=fo(),h=Zae(),v=Oh(),y=U7(),m=Jae();function _(w,S,E,A,T,I,q){var p=y(w,E),C=y(S,E),O=q.get(C);if(O){e(w,E,O);return}var N=I?I(p,C,E+"",w,S,q):void 0,V=N===void 0;if(V){var W=o(C),G=!W&&u(C),ee=!W&&!G&&v(C);N=C,W||G||ee?o(p)?N=p:a(p)?N=n(p):G?(V=!1,N=t(C,!0)):ee?(V=!1,N=r(C,!0)):N=[]:h(C)||s(C)?(N=p,s(p)?N=m(p):(!f(p)||c(p))&&(N=i(C))):V=!1}V&&(q.set(C,N),T(N,C,A,I,q),q.delete(C)),e(w,E,N)}return yx=_,yx}var _x,V8;function eue(){if(V8)return _x;V8=1;var e=Sg(),t=$7(),r=P2(),n=Qae(),i=fo(),s=Sc(),o=U7();function a(u,c,f,h,v){u!==c&&r(c,function(y,m){if(v||(v=new e),i(y))n(u,c,m,f,a,h,v);else{var _=h?h(o(u,m),y,m+"",u,c,v):void 0;_===void 0&&(_=y),t(u,m,_)}},s)}return _x=a,_x}var bx,G8;function tue(){if(G8)return bx;G8=1;var e=Lg(),t=Ng();function r(n){return e(function(i,s){var o=-1,a=s.length,u=a>1?s[a-1]:void 0,c=a>2?s[2]:void 0;for(u=n.length>3&&typeof u=="function"?(a--,u):void 0,c&&t(s[0],s[1],c)&&(u=a<3?void 0:u,a=1),i=Object(i);++o<a;){var f=s[o];f&&n(i,f,o,u)}return i})}return bx=r,bx}var wx,$8;function rue(){if($8)return wx;$8=1;var e=eue(),t=tue(),r=t(function(n,i,s){e(n,i,s)});return wx=r,wx}var xx,U8;function j7(){if(U8)return xx;U8=1;function e(t,r){return t<r}return xx=e,xx}var Sx,j8;function nue(){if(j8)return Sx;j8=1;var e=k2(),t=j7(),r=Ec();function n(i){return i&&i.length?e(i,r,t):void 0}return Sx=n,Sx}var Ex,H8;function iue(){if(H8)return Ex;H8=1;var e=k2(),t=Xa(),r=j7();function n(i,s){return i&&i.length?e(i,t(s,2),r):void 0}return Ex=n,Ex}var Ax,W8;function sue(){if(W8)return Ax;W8=1;var e=Bo(),t=function(){return e.Date.now()};return Ax=t,Ax}var Tx,X8;function oue(){if(X8)return Tx;X8=1;var e=Ag(),t=Mg(),r=Tg(),n=fo(),i=Mh();function s(o,a,u,c){if(!n(o))return o;a=t(a,o);for(var f=-1,h=a.length,v=h-1,y=o;y!=null&&++f<h;){var m=i(a[f]),_=u;if(m==="__proto__"||m==="constructor"||m==="prototype")return o;if(f!=v){var w=y[m];_=c?c(w,m,y):void 0,_===void 0&&(_=n(w)?w:r(a[f+1])?[]:{})}e(y,m,_),y=y[m]}return o}return Tx=s,Tx}var Px,Y8;function aue(){if(Y8)return Px;Y8=1;var e=kg(),t=oue(),r=Mg();function n(i,s,o){for(var a=-1,u=s.length,c={};++a<u;){var f=s[a],h=e(i,f);o(h,f)&&t(c,r(f,i),h)}return c}return Px=n,Px}var Cx,K8;function uue(){if(K8)return Cx;K8=1;var e=aue(),t=x7();function r(n,i){return e(n,i,function(s,o){return t(n,o)})}return Cx=r,Cx}var Rx,Z8;function cue(){if(Z8)return Rx;Z8=1;var e=G7(),t=I7(),r=O7();function n(i){return r(t(i,void 0,e),i+"")}return Rx=n,Rx}var Ix,J8;function lue(){if(J8)return Ix;J8=1;var e=uue(),t=cue(),r=t(function(n,i){return n==null?{}:e(n,i)});return Ix=r,Ix}var Ox,Q8;function fue(){if(Q8)return Ox;Q8=1;var e=Math.ceil,t=Math.max;function r(n,i,s,o){for(var a=-1,u=t(e((i-n)/(s||1)),0),c=Array(u);u--;)c[o?u:++a]=n,n+=s;return c}return Ox=r,Ox}var Mx,ez;function hue(){if(ez)return Mx;ez=1;var e=fue(),t=Ng(),r=V7();function n(i){return function(s,o,a){return a&&typeof a!="number"&&t(s,o,a)&&(o=a=void 0),s=r(s),o===void 0?(o=s,s=0):o=r(o),a=a===void 0?s<o?1:-1:r(a),e(s,o,a,i)}}return Mx=n,Mx}var kx,tz;function due(){if(tz)return kx;tz=1;var e=hue(),t=e();return kx=t,kx}var Lx,rz;function pue(){if(rz)return Lx;rz=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return Lx=e,Lx}var Nx,nz;function gue(){if(nz)return Nx;nz=1;var e=$l();function t(r,n){if(r!==n){var i=r!==void 0,s=r===null,o=r===r,a=e(r),u=n!==void 0,c=n===null,f=n===n,h=e(n);if(!c&&!h&&!a&&r>n||a&&u&&f&&!c&&!h||s&&u&&f||!i&&f||!o)return 1;if(!s&&!a&&!h&&r<n||h&&i&&o&&!s&&!a||c&&i&&o||!u&&o||!f)return-1}return 0}return Nx=t,Nx}var qx,iz;function vue(){if(iz)return qx;iz=1;var e=gue();function t(r,n,i){for(var s=-1,o=r.criteria,a=n.criteria,u=o.length,c=i.length;++s<u;){var f=e(o[s],a[s]);if(f){if(s>=c)return f;var h=i[s];return f*(h=="desc"?-1:1)}}return r.index-n.index}return qx=t,qx}var Dx,sz;function mue(){if(sz)return Dx;sz=1;var e=Og(),t=kg(),r=Xa(),n=P7(),i=pue(),s=Pg(),o=vue(),a=Ec(),u=si();function c(f,h,v){h.length?h=e(h,function(_){return u(_)?function(w){return t(w,_.length===1?_[0]:_)}:_}):h=[a];var y=-1;h=e(h,s(r));var m=n(f,function(_,w,S){var E=e(h,function(A){return A(_)});return{criteria:E,index:++y,value:_}});return i(m,function(_,w){return o(_,w,v)})}return Dx=c,Dx}var Fx,oz;function yue(){if(oz)return Fx;oz=1;var e=O2(),t=mue(),r=Lg(),n=Ng(),i=r(function(s,o){if(s==null)return[];var a=o.length;return a>1&&n(s,o[0],o[1])?o=[]:a>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),t(s,e(o,1),[])});return Fx=i,Fx}var Bx,az;function _ue(){if(az)return Bx;az=1;var e=b7(),t=0;function r(n){var i=++t;return e(n)+i}return Bx=r,Bx}var zx,uz;function bue(){if(uz)return zx;uz=1;function e(t,r,n){for(var i=-1,s=t.length,o=r.length,a={};++i<s;){var u=i<o?r[i]:void 0;n(a,t[i],u)}return a}return zx=e,zx}var Vx,cz;function wue(){if(cz)return Vx;cz=1;var e=Ag(),t=bue();function r(n,i){return t(n||[],i||[],e)}return Vx=r,Vx}var Gx,lz;function In(){if(lz)return Gx;lz=1;var e;if(typeof v2=="function")try{e={cloneDeep:Dae(),constant:T2(),defaults:Fae(),each:d7(),filter:E7(),find:jae(),flatten:G7(),forEach:h7(),forIn:Hae(),has:A7(),isUndefined:T7(),last:Wae(),map:C7(),mapValues:Xae(),max:Kae(),merge:rue(),min:nue(),minBy:iue(),now:sue(),pick:lue(),range:due(),reduce:R7(),sortBy:yue(),uniqueId:_ue(),values:L7(),zipObject:wue()}}catch{}return e||(e=window._),Gx=e,Gx}var $x,fz;function xue(){if(fz)return $x;fz=1,$x=e;function e(){var n={};n._next=n._prev=n,this._sentinel=n}e.prototype.dequeue=function(){var n=this._sentinel,i=n._prev;if(i!==n)return t(i),i},e.prototype.enqueue=function(n){var i=this._sentinel;n._prev&&n._next&&t(n),n._next=i._next,i._next._prev=n,i._next=n,n._prev=i},e.prototype.toString=function(){for(var n=[],i=this._sentinel,s=i._prev;s!==i;)n.push(JSON.stringify(s,r)),s=s._prev;return"["+n.join(", ")+"]"};function t(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function r(n,i){if(n!=="_next"&&n!=="_prev")return i}return $x}var Ux,hz;function Sue(){if(hz)return Ux;hz=1;var e=In(),t=Io().Graph,r=xue();Ux=i;var n=e.constant(1);function i(c,f){if(c.nodeCount()<=1)return[];var h=a(c,f||n),v=s(h.graph,h.buckets,h.zeroIdx);return e.flatten(e.map(v,function(y){return c.outEdges(y.v,y.w)}),!0)}function s(c,f,h){for(var v=[],y=f[f.length-1],m=f[0],_;c.nodeCount();){for(;_=m.dequeue();)o(c,f,h,_);for(;_=y.dequeue();)o(c,f,h,_);if(c.nodeCount()){for(var w=f.length-2;w>0;--w)if(_=f[w].dequeue(),_){v=v.concat(o(c,f,h,_,!0));break}}}return v}function o(c,f,h,v,y){var m=y?[]:void 0;return e.forEach(c.inEdges(v.v),function(_){var w=c.edge(_),S=c.node(_.v);y&&m.push({v:_.v,w:_.w}),S.out-=w,u(f,h,S)}),e.forEach(c.outEdges(v.v),function(_){var w=c.edge(_),S=_.w,E=c.node(S);E.in-=w,u(f,h,E)}),c.removeNode(v.v),m}function a(c,f){var h=new t,v=0,y=0;e.forEach(c.nodes(),function(w){h.setNode(w,{v:w,in:0,out:0})}),e.forEach(c.edges(),function(w){var S=h.edge(w.v,w.w)||0,E=f(w),A=S+E;h.setEdge(w.v,w.w,A),y=Math.max(y,h.node(w.v).out+=E),v=Math.max(v,h.node(w.w).in+=E)});var m=e.range(y+v+3).map(function(){return new r}),_=v+1;return e.forEach(h.nodes(),function(w){u(m,_,h.node(w))}),{graph:h,buckets:m,zeroIdx:_}}function u(c,f,h){h.out?h.in?c[h.out-h.in+f].enqueue(h):c[c.length-1].enqueue(h):c[0].enqueue(h)}return Ux}var jx,dz;function Eue(){if(dz)return jx;dz=1;var e=In(),t=Sue();jx={run:r,undo:i};function r(s){var o=s.graph().acyclicer==="greedy"?t(s,a(s)):n(s);e.forEach(o,function(u){var c=s.edge(u);s.removeEdge(u),c.forwardName=u.name,c.reversed=!0,s.setEdge(u.w,u.v,c,e.uniqueId("rev"))});function a(u){return function(c){return u.edge(c).weight}}}function n(s){var o=[],a={},u={};function c(f){e.has(u,f)||(u[f]=!0,a[f]=!0,e.forEach(s.outEdges(f),function(h){e.has(a,h.w)?o.push(h):c(h.w)}),delete a[f])}return e.forEach(s.nodes(),c),o}function i(s){e.forEach(s.edges(),function(o){var a=s.edge(o);if(a.reversed){s.removeEdge(o);var u=a.forwardName;delete a.reversed,delete a.forwardName,s.setEdge(o.w,o.v,a,u)}})}return jx}var Hx,pz;function gs(){if(pz)return Hx;pz=1;var e=In(),t=Io().Graph;Hx={addDummyNode:r,simplify:n,asNonCompoundGraph:i,successorWeights:s,predecessorWeights:o,intersectRect:a,buildLayerMatrix:u,normalizeRanks:c,removeEmptyRanks:f,addBorderNode:h,maxRank:v,partition:y,time:m,notime:_};function r(w,S,E,A){var T;do T=e.uniqueId(A);while(w.hasNode(T));return E.dummy=S,w.setNode(T,E),T}function n(w){var S=new t().setGraph(w.graph());return e.forEach(w.nodes(),function(E){S.setNode(E,w.node(E))}),e.forEach(w.edges(),function(E){var A=S.edge(E.v,E.w)||{weight:0,minlen:1},T=w.edge(E);S.setEdge(E.v,E.w,{weight:A.weight+T.weight,minlen:Math.max(A.minlen,T.minlen)})}),S}function i(w){var S=new t({multigraph:w.isMultigraph()}).setGraph(w.graph());return e.forEach(w.nodes(),function(E){w.children(E).length||S.setNode(E,w.node(E))}),e.forEach(w.edges(),function(E){S.setEdge(E,w.edge(E))}),S}function s(w){var S=e.map(w.nodes(),function(E){var A={};return e.forEach(w.outEdges(E),function(T){A[T.w]=(A[T.w]||0)+w.edge(T).weight}),A});return e.zipObject(w.nodes(),S)}function o(w){var S=e.map(w.nodes(),function(E){var A={};return e.forEach(w.inEdges(E),function(T){A[T.v]=(A[T.v]||0)+w.edge(T).weight}),A});return e.zipObject(w.nodes(),S)}function a(w,S){var E=w.x,A=w.y,T=S.x-E,I=S.y-A,q=w.width/2,p=w.height/2;if(!T&&!I)throw new Error("Not possible to find intersection inside of the rectangle");var C,O;return Math.abs(I)*q>Math.abs(T)*p?(I<0&&(p=-p),C=p*T/I,O=p):(T<0&&(q=-q),C=q,O=q*I/T),{x:E+C,y:A+O}}function u(w){var S=e.map(e.range(v(w)+1),function(){return[]});return e.forEach(w.nodes(),function(E){var A=w.node(E),T=A.rank;e.isUndefined(T)||(S[T][A.order]=E)}),S}function c(w){var S=e.min(e.map(w.nodes(),function(E){return w.node(E).rank}));e.forEach(w.nodes(),function(E){var A=w.node(E);e.has(A,"rank")&&(A.rank-=S)})}function f(w){var S=e.min(e.map(w.nodes(),function(I){return w.node(I).rank})),E=[];e.forEach(w.nodes(),function(I){var q=w.node(I).rank-S;E[q]||(E[q]=[]),E[q].push(I)});var A=0,T=w.graph().nodeRankFactor;e.forEach(E,function(I,q){e.isUndefined(I)&&q%T!==0?--A:A&&e.forEach(I,function(p){w.node(p).rank+=A})})}function h(w,S,E,A){var T={width:0,height:0};return arguments.length>=4&&(T.rank=E,T.order=A),r(w,"border",T,S)}function v(w){return e.max(e.map(w.nodes(),function(S){var E=w.node(S).rank;if(!e.isUndefined(E))return E}))}function y(w,S){var E={lhs:[],rhs:[]};return e.forEach(w,function(A){S(A)?E.lhs.push(A):E.rhs.push(A)}),E}function m(w,S){var E=e.now();try{return S()}finally{console.log(w+" time: "+(e.now()-E)+"ms")}}function _(w,S){return S()}return Hx}var Wx,gz;function Aue(){if(gz)return Wx;gz=1;var e=In(),t=gs();Wx={run:r,undo:i};function r(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(o){n(s,o)})}function n(s,o){var a=o.v,u=s.node(a).rank,c=o.w,f=s.node(c).rank,h=o.name,v=s.edge(o),y=v.labelRank;if(f!==u+1){s.removeEdge(o);var m,_,w;for(w=0,++u;u<f;++w,++u)v.points=[],_={width:0,height:0,edgeLabel:v,edgeObj:o,rank:u},m=t.addDummyNode(s,"edge",_,"_d"),u===y&&(_.width=v.width,_.height=v.height,_.dummy="edge-label",_.labelpos=v.labelpos),s.setEdge(a,m,{weight:v.weight},h),w===0&&s.graph().dummyChains.push(m),a=m;s.setEdge(a,c,{weight:v.weight},h)}}function i(s){e.forEach(s.graph().dummyChains,function(o){var a=s.node(o),u=a.edgeLabel,c;for(s.setEdge(a.edgeObj,u);a.dummy;)c=s.successors(o)[0],s.removeNode(o),u.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(u.x=a.x,u.y=a.y,u.width=a.width,u.height=a.height),o=c,a=s.node(o)})}return Wx}var Xx,vz;function Rp(){if(vz)return Xx;vz=1;var e=In();Xx={longestPath:t,slack:r};function t(n){var i={};function s(o){var a=n.node(o);if(e.has(i,o))return a.rank;i[o]=!0;var u=e.min(e.map(n.outEdges(o),function(c){return s(c.w)-n.edge(c).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),a.rank=u}e.forEach(n.sources(),s)}function r(n,i){return n.node(i.w).rank-n.node(i.v).rank-n.edge(i).minlen}return Xx}var Yx,mz;function H7(){if(mz)return Yx;mz=1;var e=In(),t=Io().Graph,r=Rp().slack;Yx=n;function n(a){var u=new t({directed:!1}),c=a.nodes()[0],f=a.nodeCount();u.setNode(c,{});for(var h,v;i(u,a)<f;)h=s(u,a),v=u.hasNode(h.v)?r(a,h):-r(a,h),o(u,a,v);return u}function i(a,u){function c(f){e.forEach(u.nodeEdges(f),function(h){var v=h.v,y=f===v?h.w:v;!a.hasNode(y)&&!r(u,h)&&(a.setNode(y,{}),a.setEdge(f,y,{}),c(y))})}return e.forEach(a.nodes(),c),a.nodeCount()}function s(a,u){return e.minBy(u.edges(),function(c){if(a.hasNode(c.v)!==a.hasNode(c.w))return r(u,c)})}function o(a,u,c){e.forEach(a.nodes(),function(f){u.node(f).rank+=c})}return Yx}var Kx,yz;function Tue(){if(yz)return Kx;yz=1;var e=In(),t=H7(),r=Rp().slack,n=Rp().longestPath,i=Io().alg.preorder,s=Io().alg.postorder,o=gs().simplify;Kx=a,a.initLowLimValues=h,a.initCutValues=u,a.calcCutValue=f,a.leaveEdge=y,a.enterEdge=m,a.exchangeEdges=_;function a(A){A=o(A),n(A);var T=t(A);h(T),u(T,A);for(var I,q;I=y(T);)q=m(T,A,I),_(T,A,I,q)}function u(A,T){var I=s(A,A.nodes());I=I.slice(0,I.length-1),e.forEach(I,function(q){c(A,T,q)})}function c(A,T,I){var q=A.node(I),p=q.parent;A.edge(I,p).cutvalue=f(A,T,I)}function f(A,T,I){var q=A.node(I),p=q.parent,C=!0,O=T.edge(I,p),N=0;return O||(C=!1,O=T.edge(p,I)),N=O.weight,e.forEach(T.nodeEdges(I),function(V){var W=V.v===I,G=W?V.w:V.v;if(G!==p){var ee=W===C,ae=T.edge(V).weight;if(N+=ee?ae:-ae,S(A,I,G)){var K=A.edge(I,G).cutvalue;N+=ee?-K:K}}}),N}function h(A,T){arguments.length<2&&(T=A.nodes()[0]),v(A,{},1,T)}function v(A,T,I,q,p){var C=I,O=A.node(q);return T[q]=!0,e.forEach(A.neighbors(q),function(N){e.has(T,N)||(I=v(A,T,I,N,q))}),O.low=C,O.lim=I++,p?O.parent=p:delete O.parent,I}function y(A){return e.find(A.edges(),function(T){return A.edge(T).cutvalue<0})}function m(A,T,I){var q=I.v,p=I.w;T.hasEdge(q,p)||(q=I.w,p=I.v);var C=A.node(q),O=A.node(p),N=C,V=!1;C.lim>O.lim&&(N=O,V=!0);var W=e.filter(T.edges(),function(G){return V===E(A,A.node(G.v),N)&&V!==E(A,A.node(G.w),N)});return e.minBy(W,function(G){return r(T,G)})}function _(A,T,I,q){var p=I.v,C=I.w;A.removeEdge(p,C),A.setEdge(q.v,q.w,{}),h(A),u(A,T),w(A,T)}function w(A,T){var I=e.find(A.nodes(),function(p){return!T.node(p).parent}),q=i(A,I);q=q.slice(1),e.forEach(q,function(p){var C=A.node(p).parent,O=T.edge(p,C),N=!1;O||(O=T.edge(C,p),N=!0),T.node(p).rank=T.node(C).rank+(N?O.minlen:-O.minlen)})}function S(A,T,I){return A.hasEdge(T,I)}function E(A,T,I){return I.low<=T.lim&&T.lim<=I.lim}return Kx}var Zx,_z;function Pue(){if(_z)return Zx;_z=1;var e=Rp(),t=e.longestPath,r=H7(),n=Tue();Zx=i;function i(u){switch(u.graph().ranker){case"network-simplex":a(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:a(u)}}var s=t;function o(u){t(u),r(u)}function a(u){n(u)}return Zx}var Jx,bz;function Cue(){if(bz)return Jx;bz=1;var e=In();Jx=t;function t(i){var s=n(i);e.forEach(i.graph().dummyChains,function(o){for(var a=i.node(o),u=a.edgeObj,c=r(i,s,u.v,u.w),f=c.path,h=c.lca,v=0,y=f[v],m=!0;o!==u.w;){if(a=i.node(o),m){for(;(y=f[v])!==h&&i.node(y).maxRank<a.rank;)v++;y===h&&(m=!1)}if(!m){for(;v<f.length-1&&i.node(y=f[v+1]).minRank<=a.rank;)v++;y=f[v]}i.setParent(o,y),o=i.successors(o)[0]}})}function r(i,s,o,a){var u=[],c=[],f=Math.min(s[o].low,s[a].low),h=Math.max(s[o].lim,s[a].lim),v,y;v=o;do v=i.parent(v),u.push(v);while(v&&(s[v].low>f||h>s[v].lim));for(y=v,v=a;(v=i.parent(v))!==y;)c.push(v);return{path:u.concat(c.reverse()),lca:y}}function n(i){var s={},o=0;function a(u){var c=o;e.forEach(i.children(u),a),s[u]={low:c,lim:o++}}return e.forEach(i.children(),a),s}return Jx}var Qx,wz;function Rue(){if(wz)return Qx;wz=1;var e=In(),t=gs();Qx={run:r,cleanup:o};function r(a){var u=t.addDummyNode(a,"root",{},"_root"),c=i(a),f=e.max(e.values(c))-1,h=2*f+1;a.graph().nestingRoot=u,e.forEach(a.edges(),function(y){a.edge(y).minlen*=h});var v=s(a)+1;e.forEach(a.children(),function(y){n(a,u,h,v,f,c,y)}),a.graph().nodeRankFactor=h}function n(a,u,c,f,h,v,y){var m=a.children(y);if(!m.length){y!==u&&a.setEdge(u,y,{weight:0,minlen:c});return}var _=t.addBorderNode(a,"_bt"),w=t.addBorderNode(a,"_bb"),S=a.node(y);a.setParent(_,y),S.borderTop=_,a.setParent(w,y),S.borderBottom=w,e.forEach(m,function(E){n(a,u,c,f,h,v,E);var A=a.node(E),T=A.borderTop?A.borderTop:E,I=A.borderBottom?A.borderBottom:E,q=A.borderTop?f:2*f,p=T!==I?1:h-v[y]+1;a.setEdge(_,T,{weight:q,minlen:p,nestingEdge:!0}),a.setEdge(I,w,{weight:q,minlen:p,nestingEdge:!0})}),a.parent(y)||a.setEdge(u,_,{weight:0,minlen:h+v[y]})}function i(a){var u={};function c(f,h){var v=a.children(f);v&&v.length&&e.forEach(v,function(y){c(y,h+1)}),u[f]=h}return e.forEach(a.children(),function(f){c(f,1)}),u}function s(a){return e.reduce(a.edges(),function(u,c){return u+a.edge(c).weight},0)}function o(a){var u=a.graph();a.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(a.edges(),function(c){var f=a.edge(c);f.nestingEdge&&a.removeEdge(c)})}return Qx}var eS,xz;function Iue(){if(xz)return eS;xz=1;var e=In(),t=gs();eS=r;function r(i){function s(o){var a=i.children(o),u=i.node(o);if(a.length&&e.forEach(a,s),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var c=u.minRank,f=u.maxRank+1;c<f;++c)n(i,"borderLeft","_bl",o,u,c),n(i,"borderRight","_br",o,u,c)}}e.forEach(i.children(),s)}function n(i,s,o,a,u,c){var f={width:0,height:0,rank:c,borderType:s},h=u[s][c-1],v=t.addDummyNode(i,"border",f,o);u[s][c]=v,i.setParent(v,a),h&&i.setEdge(h,v,{weight:1})}return eS}var tS,Sz;function Oue(){if(Sz)return tS;Sz=1;var e=In();tS={adjust:t,undo:r};function t(c){var f=c.graph().rankdir.toLowerCase();(f==="lr"||f==="rl")&&n(c)}function r(c){var f=c.graph().rankdir.toLowerCase();(f==="bt"||f==="rl")&&s(c),(f==="lr"||f==="rl")&&(a(c),n(c))}function n(c){e.forEach(c.nodes(),function(f){i(c.node(f))}),e.forEach(c.edges(),function(f){i(c.edge(f))})}function i(c){var f=c.width;c.width=c.height,c.height=f}function s(c){e.forEach(c.nodes(),function(f){o(c.node(f))}),e.forEach(c.edges(),function(f){var h=c.edge(f);e.forEach(h.points,o),e.has(h,"y")&&o(h)})}function o(c){c.y=-c.y}function a(c){e.forEach(c.nodes(),function(f){u(c.node(f))}),e.forEach(c.edges(),function(f){var h=c.edge(f);e.forEach(h.points,u),e.has(h,"x")&&u(h)})}function u(c){var f=c.x;c.x=c.y,c.y=f}return tS}var rS,Ez;function Mue(){if(Ez)return rS;Ez=1;var e=In();rS=t;function t(r){var n={},i=e.filter(r.nodes(),function(c){return!r.children(c).length}),s=e.max(e.map(i,function(c){return r.node(c).rank})),o=e.map(e.range(s+1),function(){return[]});function a(c){if(!e.has(n,c)){n[c]=!0;var f=r.node(c);o[f.rank].push(c),e.forEach(r.successors(c),a)}}var u=e.sortBy(i,function(c){return r.node(c).rank});return e.forEach(u,a),o}return rS}var nS,Az;function kue(){if(Az)return nS;Az=1;var e=In();nS=t;function t(n,i){for(var s=0,o=1;o<i.length;++o)s+=r(n,i[o-1],i[o]);return s}function r(n,i,s){for(var o=e.zipObject(s,e.map(s,function(v,y){return y})),a=e.flatten(e.map(i,function(v){return e.sortBy(e.map(n.outEdges(v),function(y){return{pos:o[y.w],weight:n.edge(y).weight}}),"pos")}),!0),u=1;u<s.length;)u<<=1;var c=2*u-1;u-=1;var f=e.map(new Array(c),function(){return 0}),h=0;return e.forEach(a.forEach(function(v){var y=v.pos+u;f[y]+=v.weight;for(var m=0;y>0;)y%2&&(m+=f[y+1]),y=y-1>>1,f[y]+=v.weight;h+=v.weight*m})),h}return nS}var iS,Tz;function Lue(){if(Tz)return iS;Tz=1;var e=In();iS=t;function t(r,n){return e.map(n,function(i){var s=r.inEdges(i);if(s.length){var o=e.reduce(s,function(a,u){var c=r.edge(u),f=r.node(u.v);return{sum:a.sum+c.weight*f.order,weight:a.weight+c.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return iS}var sS,Pz;function Nue(){if(Pz)return sS;Pz=1;var e=In();sS=t;function t(i,s){var o={};e.forEach(i,function(u,c){var f=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:c};e.isUndefined(u.barycenter)||(f.barycenter=u.barycenter,f.weight=u.weight)}),e.forEach(s.edges(),function(u){var c=o[u.v],f=o[u.w];!e.isUndefined(c)&&!e.isUndefined(f)&&(f.indegree++,c.out.push(o[u.w]))});var a=e.filter(o,function(u){return!u.indegree});return r(a)}function r(i){var s=[];function o(c){return function(f){f.merged||(e.isUndefined(f.barycenter)||e.isUndefined(c.barycenter)||f.barycenter>=c.barycenter)&&n(c,f)}}function a(c){return function(f){f.in.push(c),--f.indegree===0&&i.push(f)}}for(;i.length;){var u=i.pop();s.push(u),e.forEach(u.in.reverse(),o(u)),e.forEach(u.out,a(u))}return e.map(e.filter(s,function(c){return!c.merged}),function(c){return e.pick(c,["vs","i","barycenter","weight"])})}function n(i,s){var o=0,a=0;i.weight&&(o+=i.barycenter*i.weight,a+=i.weight),s.weight&&(o+=s.barycenter*s.weight,a+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/a,i.weight=a,i.i=Math.min(s.i,i.i),s.merged=!0}return sS}var oS,Cz;function que(){if(Cz)return oS;Cz=1;var e=In(),t=gs();oS=r;function r(s,o){var a=t.partition(s,function(_){return e.has(_,"barycenter")}),u=a.lhs,c=e.sortBy(a.rhs,function(_){return-_.i}),f=[],h=0,v=0,y=0;u.sort(i(!!o)),y=n(f,c,y),e.forEach(u,function(_){y+=_.vs.length,f.push(_.vs),h+=_.barycenter*_.weight,v+=_.weight,y=n(f,c,y)});var m={vs:e.flatten(f,!0)};return v&&(m.barycenter=h/v,m.weight=v),m}function n(s,o,a){for(var u;o.length&&(u=e.last(o)).i<=a;)o.pop(),s.push(u.vs),a++;return a}function i(s){return function(o,a){return o.barycenter<a.barycenter?-1:o.barycenter>a.barycenter?1:s?a.i-o.i:o.i-a.i}}return oS}var aS,Rz;function Due(){if(Rz)return aS;Rz=1;var e=In(),t=Lue(),r=Nue(),n=que();aS=i;function i(a,u,c,f){var h=a.children(u),v=a.node(u),y=v?v.borderLeft:void 0,m=v?v.borderRight:void 0,_={};y&&(h=e.filter(h,function(I){return I!==y&&I!==m}));var w=t(a,h);e.forEach(w,function(I){if(a.children(I.v).length){var q=i(a,I.v,c,f);_[I.v]=q,e.has(q,"barycenter")&&o(I,q)}});var S=r(w,c);s(S,_);var E=n(S,f);if(y&&(E.vs=e.flatten([y,E.vs,m],!0),a.predecessors(y).length)){var A=a.node(a.predecessors(y)[0]),T=a.node(a.predecessors(m)[0]);e.has(E,"barycenter")||(E.barycenter=0,E.weight=0),E.barycenter=(E.barycenter*E.weight+A.order+T.order)/(E.weight+2),E.weight+=2}return E}function s(a,u){e.forEach(a,function(c){c.vs=e.flatten(c.vs.map(function(f){return u[f]?u[f].vs:f}),!0)})}function o(a,u){e.isUndefined(a.barycenter)?(a.barycenter=u.barycenter,a.weight=u.weight):(a.barycenter=(a.barycenter*a.weight+u.barycenter*u.weight)/(a.weight+u.weight),a.weight+=u.weight)}return aS}var uS,Iz;function Fue(){if(Iz)return uS;Iz=1;var e=In(),t=Io().Graph;uS=r;function r(i,s,o){var a=n(i),u=new t({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(c){return i.node(c)});return e.forEach(i.nodes(),function(c){var f=i.node(c),h=i.parent(c);(f.rank===s||f.minRank<=s&&s<=f.maxRank)&&(u.setNode(c),u.setParent(c,h||a),e.forEach(i[o](c),function(v){var y=v.v===c?v.w:v.v,m=u.edge(y,c),_=e.isUndefined(m)?0:m.weight;u.setEdge(y,c,{weight:i.edge(v).weight+_})}),e.has(f,"minRank")&&u.setNode(c,{borderLeft:f.borderLeft[s],borderRight:f.borderRight[s]}))}),u}function n(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return uS}var cS,Oz;function Bue(){if(Oz)return cS;Oz=1;var e=In();cS=t;function t(r,n,i){var s={},o;e.forEach(i,function(a){for(var u=r.parent(a),c,f;u;){if(c=r.parent(u),c?(f=s[c],s[c]=u):(f=o,o=u),f&&f!==u){n.setEdge(f,u);return}u=c}})}return cS}var lS,Mz;function zue(){if(Mz)return lS;Mz=1;var e=In(),t=Mue(),r=kue(),n=Due(),i=Fue(),s=Bue(),o=Io().Graph,a=gs();lS=u;function u(v){var y=a.maxRank(v),m=c(v,e.range(1,y+1),"inEdges"),_=c(v,e.range(y-1,-1,-1),"outEdges"),w=t(v);h(v,w);for(var S=Number.POSITIVE_INFINITY,E,A=0,T=0;T<4;++A,++T){f(A%2?m:_,A%4>=2),w=a.buildLayerMatrix(v);var I=r(v,w);I<S&&(T=0,E=e.cloneDeep(w),S=I)}h(v,E)}function c(v,y,m){return e.map(y,function(_){return i(v,_,m)})}function f(v,y){var m=new o;e.forEach(v,function(_){var w=_.graph().root,S=n(_,w,m,y);e.forEach(S.vs,function(E,A){_.node(E).order=A}),s(_,m,S.vs)})}function h(v,y){e.forEach(y,function(m){e.forEach(m,function(_,w){v.node(_).order=w})})}return lS}var fS,kz;function Vue(){if(kz)return fS;kz=1;var e=In(),t=Io().Graph,r=gs();fS={positionX:m,findType1Conflicts:n,findType2Conflicts:i,addConflict:o,hasConflict:a,verticalAlignment:u,horizontalCompaction:c,alignCoordinates:v,findSmallestWidthAlignment:h,balance:y};function n(S,E){var A={};function T(I,q){var p=0,C=0,O=I.length,N=e.last(q);return e.forEach(q,function(V,W){var G=s(S,V),ee=G?S.node(G).order:O;(G||V===N)&&(e.forEach(q.slice(C,W+1),function(ae){e.forEach(S.predecessors(ae),function(K){var U=S.node(K),j=U.order;(j<p||ee<j)&&!(U.dummy&&S.node(ae).dummy)&&o(A,K,ae)})}),C=W+1,p=ee)}),q}return e.reduce(E,T),A}function i(S,E){var A={};function T(q,p,C,O,N){var V;e.forEach(e.range(p,C),function(W){V=q[W],S.node(V).dummy&&e.forEach(S.predecessors(V),function(G){var ee=S.node(G);ee.dummy&&(ee.order<O||ee.order>N)&&o(A,G,V)})})}function I(q,p){var C=-1,O,N=0;return e.forEach(p,function(V,W){if(S.node(V).dummy==="border"){var G=S.predecessors(V);G.length&&(O=S.node(G[0]).order,T(p,N,W,C,O),N=W,C=O)}T(p,N,p.length,O,q.length)}),p}return e.reduce(E,I),A}function s(S,E){if(S.node(E).dummy)return e.find(S.predecessors(E),function(A){return S.node(A).dummy})}function o(S,E,A){if(E>A){var T=E;E=A,A=T}var I=S[E];I||(S[E]=I={}),I[A]=!0}function a(S,E,A){if(E>A){var T=E;E=A,A=T}return e.has(S[E],A)}function u(S,E,A,T){var I={},q={},p={};return e.forEach(E,function(C){e.forEach(C,function(O,N){I[O]=O,q[O]=O,p[O]=N})}),e.forEach(E,function(C){var O=-1;e.forEach(C,function(N){var V=T(N);if(V.length){V=e.sortBy(V,function(K){return p[K]});for(var W=(V.length-1)/2,G=Math.floor(W),ee=Math.ceil(W);G<=ee;++G){var ae=V[G];q[N]===N&&O<p[ae]&&!a(A,N,ae)&&(q[ae]=N,q[N]=I[N]=I[ae],O=p[ae])}}})}),{root:I,align:q}}function c(S,E,A,T,I){var q={},p=f(S,E,A,I),C=I?"borderLeft":"borderRight";function O(W,G){for(var ee=p.nodes(),ae=ee.pop(),K={};ae;)K[ae]?W(ae):(K[ae]=!0,ee.push(ae),ee=ee.concat(G(ae))),ae=ee.pop()}function N(W){q[W]=p.inEdges(W).reduce(function(G,ee){return Math.max(G,q[ee.v]+p.edge(ee))},0)}function V(W){var G=p.outEdges(W).reduce(function(ae,K){return Math.min(ae,q[K.w]-p.edge(K))},Number.POSITIVE_INFINITY),ee=S.node(W);G!==Number.POSITIVE_INFINITY&&ee.borderType!==C&&(q[W]=Math.max(q[W],G))}return O(N,p.predecessors.bind(p)),O(V,p.successors.bind(p)),e.forEach(T,function(W){q[W]=q[A[W]]}),q}function f(S,E,A,T){var I=new t,q=S.graph(),p=_(q.nodesep,q.edgesep,T);return e.forEach(E,function(C){var O;e.forEach(C,function(N){var V=A[N];if(I.setNode(V),O){var W=A[O],G=I.edge(W,V);I.setEdge(W,V,Math.max(p(S,N,O),G||0))}O=N})}),I}function h(S,E){return e.minBy(e.values(E),function(A){var T=Number.NEGATIVE_INFINITY,I=Number.POSITIVE_INFINITY;return e.forIn(A,function(q,p){var C=w(S,p)/2;T=Math.max(q+C,T),I=Math.min(q-C,I)}),T-I})}function v(S,E){var A=e.values(E),T=e.min(A),I=e.max(A);e.forEach(["u","d"],function(q){e.forEach(["l","r"],function(p){var C=q+p,O=S[C],N;if(O!==E){var V=e.values(O);N=p==="l"?T-e.min(V):I-e.max(V),N&&(S[C]=e.mapValues(O,function(W){return W+N}))}})})}function y(S,E){return e.mapValues(S.ul,function(A,T){if(E)return S[E.toLowerCase()][T];var I=e.sortBy(e.map(S,T));return(I[1]+I[2])/2})}function m(S){var E=r.buildLayerMatrix(S),A=e.merge(n(S,E),i(S,E)),T={},I;e.forEach(["u","d"],function(p){I=p==="u"?E:e.values(E).reverse(),e.forEach(["l","r"],function(C){C==="r"&&(I=e.map(I,function(W){return e.values(W).reverse()}));var O=(p==="u"?S.predecessors:S.successors).bind(S),N=u(S,I,A,O),V=c(S,I,N.root,N.align,C==="r");C==="r"&&(V=e.mapValues(V,function(W){return-W})),T[p+C]=V})});var q=h(S,T);return v(T,q),y(T,S.graph().align)}function _(S,E,A){return function(T,I,q){var p=T.node(I),C=T.node(q),O=0,N;if(O+=p.width/2,e.has(p,"labelpos"))switch(p.labelpos.toLowerCase()){case"l":N=-p.width/2;break;case"r":N=p.width/2;break}if(N&&(O+=A?N:-N),N=0,O+=(p.dummy?E:S)/2,O+=(C.dummy?E:S)/2,O+=C.width/2,e.has(C,"labelpos"))switch(C.labelpos.toLowerCase()){case"l":N=C.width/2;break;case"r":N=-C.width/2;break}return N&&(O+=A?N:-N),N=0,O}}function w(S,E){return S.node(E).width}return fS}var hS,Lz;function Gue(){if(Lz)return hS;Lz=1;var e=In(),t=gs(),r=Vue().positionX;hS=n;function n(s){s=t.asNonCompoundGraph(s),i(s),e.forEach(r(s),function(o,a){s.node(a).x=o})}function i(s){var o=t.buildLayerMatrix(s),a=s.graph().ranksep,u=0;e.forEach(o,function(c){var f=e.max(e.map(c,function(h){return s.node(h).height}));e.forEach(c,function(h){s.node(h).y=u+f/2}),u+=f+a})}return hS}var dS,Nz;function $ue(){if(Nz)return dS;Nz=1;var e=In(),t=Eue(),r=Aue(),n=Pue(),i=gs().normalizeRanks,s=Cue(),o=gs().removeEmptyRanks,a=Rue(),u=Iue(),c=Oue(),f=zue(),h=Gue(),v=gs(),y=Io().Graph;dS=m;function m(re,oe){var ne=oe&&oe.debugTiming?v.time:v.notime;ne("layout",function(){var te=ne("  buildLayoutGraph",function(){return O(re)});ne("  runLayout",function(){_(te,ne)}),ne("  updateInputGraph",function(){w(re,te)})})}function _(re,oe){oe("    makeSpaceForEdgeLabels",function(){N(re)}),oe("    removeSelfEdges",function(){J(re)}),oe("    acyclic",function(){t.run(re)}),oe("    nestingGraph.run",function(){a.run(re)}),oe("    rank",function(){n(v.asNonCompoundGraph(re))}),oe("    injectEdgeLabelProxies",function(){V(re)}),oe("    removeEmptyRanks",function(){o(re)}),oe("    nestingGraph.cleanup",function(){a.cleanup(re)}),oe("    normalizeRanks",function(){i(re)}),oe("    assignRankMinMax",function(){W(re)}),oe("    removeEdgeLabelProxies",function(){G(re)}),oe("    normalize.run",function(){r.run(re)}),oe("    parentDummyChains",function(){s(re)}),oe("    addBorderSegments",function(){u(re)}),oe("    order",function(){f(re)}),oe("    insertSelfEdges",function(){de(re)}),oe("    adjustCoordinateSystem",function(){c.adjust(re)}),oe("    position",function(){h(re)}),oe("    positionSelfEdges",function(){ce(re)}),oe("    removeBorderNodes",function(){j(re)}),oe("    normalize.undo",function(){r.undo(re)}),oe("    fixupEdgeLabelCoords",function(){K(re)}),oe("    undoCoordinateSystem",function(){c.undo(re)}),oe("    translateGraph",function(){ee(re)}),oe("    assignNodeIntersects",function(){ae(re)}),oe("    reversePoints",function(){U(re)}),oe("    acyclic.undo",function(){t.undo(re)})}function w(re,oe){e.forEach(re.nodes(),function(ne){var te=re.node(ne),le=oe.node(ne);te&&(te.x=le.x,te.y=le.y,oe.children(ne).length&&(te.width=le.width,te.height=le.height))}),e.forEach(re.edges(),function(ne){var te=re.edge(ne),le=oe.edge(ne);te.points=le.points,e.has(le,"x")&&(te.x=le.x,te.y=le.y)}),re.graph().width=oe.graph().width,re.graph().height=oe.graph().height}var S=["nodesep","edgesep","ranksep","marginx","marginy"],E={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},A=["acyclicer","ranker","rankdir","align"],T=["width","height"],I={width:0,height:0},q=["minlen","weight","width","height","labeloffset"],p={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},C=["labelpos"];function O(re){var oe=new y({multigraph:!0,compound:!0}),ne=Se(re.graph());return oe.setGraph(e.merge({},E,Te(ne,S),e.pick(ne,A))),e.forEach(re.nodes(),function(te){var le=Se(re.node(te));oe.setNode(te,e.defaults(Te(le,T),I)),oe.setParent(te,re.parent(te))}),e.forEach(re.edges(),function(te){var le=Se(re.edge(te));oe.setEdge(te,e.merge({},p,Te(le,q),e.pick(le,C)))}),oe}function N(re){var oe=re.graph();oe.ranksep/=2,e.forEach(re.edges(),function(ne){var te=re.edge(ne);te.minlen*=2,te.labelpos.toLowerCase()!=="c"&&(oe.rankdir==="TB"||oe.rankdir==="BT"?te.width+=te.labeloffset:te.height+=te.labeloffset)})}function V(re){e.forEach(re.edges(),function(oe){var ne=re.edge(oe);if(ne.width&&ne.height){var te=re.node(oe.v),le=re.node(oe.w),We={rank:(le.rank-te.rank)/2+te.rank,e:oe};v.addDummyNode(re,"edge-proxy",We,"_ep")}})}function W(re){var oe=0;e.forEach(re.nodes(),function(ne){var te=re.node(ne);te.borderTop&&(te.minRank=re.node(te.borderTop).rank,te.maxRank=re.node(te.borderBottom).rank,oe=e.max(oe,te.maxRank))}),re.graph().maxRank=oe}function G(re){e.forEach(re.nodes(),function(oe){var ne=re.node(oe);ne.dummy==="edge-proxy"&&(re.edge(ne.e).labelRank=ne.rank,re.removeNode(oe))})}function ee(re){var oe=Number.POSITIVE_INFINITY,ne=0,te=Number.POSITIVE_INFINITY,le=0,We=re.graph(),Ne=We.marginx||0,Re=We.marginy||0;function rt(Ve){var L=Ve.x,B=Ve.y,H=Ve.width,X=Ve.height;oe=Math.min(oe,L-H/2),ne=Math.max(ne,L+H/2),te=Math.min(te,B-X/2),le=Math.max(le,B+X/2)}e.forEach(re.nodes(),function(Ve){rt(re.node(Ve))}),e.forEach(re.edges(),function(Ve){var L=re.edge(Ve);e.has(L,"x")&&rt(L)}),oe-=Ne,te-=Re,e.forEach(re.nodes(),function(Ve){var L=re.node(Ve);L.x-=oe,L.y-=te}),e.forEach(re.edges(),function(Ve){var L=re.edge(Ve);e.forEach(L.points,function(B){B.x-=oe,B.y-=te}),e.has(L,"x")&&(L.x-=oe),e.has(L,"y")&&(L.y-=te)}),We.width=ne-oe+Ne,We.height=le-te+Re}function ae(re){e.forEach(re.edges(),function(oe){var ne=re.edge(oe),te=re.node(oe.v),le=re.node(oe.w),We,Ne;ne.points?(We=ne.points[0],Ne=ne.points[ne.points.length-1]):(ne.points=[],We=le,Ne=te),ne.points.unshift(v.intersectRect(te,We)),ne.points.push(v.intersectRect(le,Ne))})}function K(re){e.forEach(re.edges(),function(oe){var ne=re.edge(oe);if(e.has(ne,"x"))switch((ne.labelpos==="l"||ne.labelpos==="r")&&(ne.width-=ne.labeloffset),ne.labelpos){case"l":ne.x-=ne.width/2+ne.labeloffset;break;case"r":ne.x+=ne.width/2+ne.labeloffset;break}})}function U(re){e.forEach(re.edges(),function(oe){var ne=re.edge(oe);ne.reversed&&ne.points.reverse()})}function j(re){e.forEach(re.nodes(),function(oe){if(re.children(oe).length){var ne=re.node(oe),te=re.node(ne.borderTop),le=re.node(ne.borderBottom),We=re.node(e.last(ne.borderLeft)),Ne=re.node(e.last(ne.borderRight));ne.width=Math.abs(Ne.x-We.x),ne.height=Math.abs(le.y-te.y),ne.x=We.x+ne.width/2,ne.y=te.y+ne.height/2}}),e.forEach(re.nodes(),function(oe){re.node(oe).dummy==="border"&&re.removeNode(oe)})}function J(re){e.forEach(re.edges(),function(oe){if(oe.v===oe.w){var ne=re.node(oe.v);ne.selfEdges||(ne.selfEdges=[]),ne.selfEdges.push({e:oe,label:re.edge(oe)}),re.removeEdge(oe)}})}function de(re){var oe=v.buildLayerMatrix(re);e.forEach(oe,function(ne){var te=0;e.forEach(ne,function(le,We){var Ne=re.node(le);Ne.order=We+te,e.forEach(Ne.selfEdges,function(Re){v.addDummyNode(re,"selfedge",{width:Re.label.width,height:Re.label.height,rank:Ne.rank,order:We+ ++te,e:Re.e,label:Re.label},"_se")}),delete Ne.selfEdges})})}function ce(re){e.forEach(re.nodes(),function(oe){var ne=re.node(oe);if(ne.dummy==="selfedge"){var te=re.node(ne.e.v),le=te.x+te.width/2,We=te.y,Ne=ne.x-le,Re=te.height/2;re.setEdge(ne.e,ne.label),re.removeNode(oe),ne.label.points=[{x:le+2*Ne/3,y:We-Re},{x:le+5*Ne/6,y:We-Re},{x:le+Ne,y:We},{x:le+5*Ne/6,y:We+Re},{x:le+2*Ne/3,y:We+Re}],ne.label.x=ne.x,ne.label.y=ne.y}})}function Te(re,oe){return e.mapValues(e.pick(re,oe),Number)}function Se(re){var oe={};return e.forEach(re,function(ne,te){oe[te.toLowerCase()]=ne}),oe}return dS}var pS,qz;function Uue(){if(qz)return pS;qz=1;var e=In(),t=gs(),r=Io().Graph;pS={debugOrdering:n};function n(i){var s=t.buildLayerMatrix(i),o=new r({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(a){o.setNode(a,{label:a}),o.setParent(a,"layer"+i.node(a).rank)}),e.forEach(i.edges(),function(a){o.setEdge(a.v,a.w,{},a.name)}),e.forEach(s,function(a,u){var c="layer"+u;o.setNode(c,{rank:"same"}),e.reduce(a,function(f,h){return o.setEdge(f,h,{style:"invis"}),h})}),o}return pS}var gS,Dz;function jue(){return Dz||(Dz=1,gS="0.8.5"),gS}var vS,Fz;function Hue(){return Fz||(Fz=1,vS={graphlib:Io(),layout:$ue(),debug:Uue(),util:{time:gs().time,notime:gs().notime},version:jue()}),vS}var Wue=Hue();const Xue=Ll(Wue);var Yue=z7();const Kue=Ll(Yue),La={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},Zue=Object.keys(La).map(e=>La[e]).join(""),mS="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",Jue=/\s/g,Bz=new RegExp(`^(${mS}\\*)?([${Zue}])(/${mS})?([-+]{1,2}${mS})?$`,"g");function W7(e){throw new Error(`Invalid calc() expression: ${e}`)}function Que(e,t){const r=Bz.exec(e.replace(Jue,""));r||W7(e),Bz.lastIndex=0;const[,n,i,s,o]=r,{x:a,y:u,width:c,height:f}=t;let h=0;switch(i){case La.width:{h=c;break}case La.height:{h=f;break}case La.x:{h=a;break}case La.y:{h=u;break}case La.minimum:{h=Math.min(f,c);break}case La.maximum:{h=Math.max(f,c);break}case La.diagonal:{h=Math.sqrt(f*f+c*c);break}}return n&&(h*=parseFloat(n)),s&&(h/=parseFloat(s.slice(1))),o&&(h+=ece(o)),h}function ece(e){if(!e)return 0;const[t]=e;switch(t){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}function Qs(e){return typeof e=="string"&&e.includes("calc")}const X7="calc(",zz=X7.length;function eo(e,t){let r=e,n=0;do{let i=r.indexOf(X7,n);if(i===-1)return r;let s=i+zz,o=1;e:do{switch(r[s]){case"(":{o++;break}case")":{if(o--,o===0)break e;break}case void 0:W7(r)}s++}while(!0);let a=r.slice(i+zz,s);Qs(a)&&(a=eo(a,t));const u=String(Que(a,t));r=r.slice(0,i)+u+r.slice(s+1),n=i+u.length}while(!0)}const{round:tce,floor:rce,PI:Y7}=Math,nce={linear:function(e,t,r){var n=e[1]-e[0],i=t[1]-t[0];return(r-e[0])/n*i+t[0]||0}},Oo=function(e){return e%360+(e<0?360:0)},oc=function(e,t){return t*tce(e/t)},qg=function(e){return 180*e/Y7%360},vs=function(e,t){return t=t||!1,e=t?e:e%360,e*Y7/180},YS=function(e,t){if(t===void 0)t=e===void 0?1:e,e=0;else if(t<e){const r=e;e=t,t=r}return rce(Math.random()*(t-e+1)+e)},{cos:Xd,sin:yS,atan2:ice}=Math,K7=function(e,t){var r=vs(e.y),n=vs(t.y),i=e.x,s=t.x,o=vs(s-i),a=yS(o)*Xd(n),u=Xd(r)*yS(n)-yS(r)*Xd(n)*Xd(o),c=qg(ice(a,u)),f=["NE","E","SE","S","SW","W","NW","N"],h=c-22.5;return h<0&&(h+=360),h=parseInt(h/45),f[h]},L2=function(e,t){var r=e.x,n=e.y,i=t.x,s=t.y;return(r-=i)*r+(n-=s)*n},Z7=function(e,t){return Math.sqrt(L2(e,t))},dr={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:Ip,cos:KS,sin:ZS,sqrt:Vz,min:Gz,max:$z,atan2:sce,round:Uz,pow:oce,PI:jz}=Math,pe=function(e,t){if(!(this instanceof pe))return new pe(e,t);if(typeof e=="string"){var r=e.split(e.indexOf("@")===-1?" ":"@");e=parseFloat(r[0]),t=parseFloat(r[1])}else Object(e)===e&&(t=e.y,e=e.x);this.x=e===void 0?0:e,this.y=t===void 0?0:t};pe.fromPolar=function(e,t,r){r=new pe(r);var n=Ip(e*KS(t)),i=Ip(e*ZS(t)),s=Oo(qg(t));return s<90?i=-i:s<180?(n=-n,i=-i):s<270&&(n=-n),new pe(r.x+n,r.y+i)};pe.random=function(e,t,r,n){return new pe(YS(e,t),YS(r,n))};pe.prototype={type:dr.Point,chooseClosest:function(e){var t=e.length;if(t===1)return new pe(e[0]);for(var r=null,n=1/0,i=0;i<t;i++){var s=new pe(e[i]),o=this.squaredDistance(s);o<n&&(r=s,n=o)}return r},adhereToRect:function(e){return e.containsPoint(this)?this:(this.x=Gz($z(this.x,e.x),e.x+e.width),this.y=Gz($z(this.y,e.y),e.y+e.height),this)},angleBetween:function(e,t){var r=this.equals(e)||this.equals(t)?NaN:this.theta(t)-this.theta(e);return r<0&&(r+=360),r},bearing:function(e){return K7(this,e)},changeInAngle:function(e,t,r){return this.clone().offset(-e,-t).theta(r)-this.theta(r)},clone:function(){return new pe(this)},cross:function(e,t){return e&&t?(t.x-this.x)*(e.y-this.y)-(t.y-this.y)*(e.x-this.x):NaN},difference:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),new pe(this.x-(e||0),this.y-(t||0))},distance:function(e){return Z7(this,e)},dot:function(e){return e?this.x*e.x+this.y*e.y:NaN},equals:function(e){return!!e&&this.x===e.x&&this.y===e.y},lerp:function(e,t){var r=this.x,n=this.y;return new pe((1-t)*r+t*e.x,(1-t)*n+t*e.y)},magnitude:function(){return Vz(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(e){return Ip(e.x-this.x)+Ip(e.y-this.y)},move:function(e,t){var r=vs(new pe(e).theta(this)),n=this.offset(KS(r)*t,-ZS(r)*t);return n},normalize:function(e){var t=(e||1)/this.magnitude();return this.scale(t,t)},offset:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x+=e||0,this.y+=t||0,this},reflection:function(e){return new pe(e).move(this,this.distance(e))},rotate:function(e,t){if(t===0)return this;e=e||new pe(0,0),t=vs(Oo(-t));var r=KS(t),n=ZS(t),i=r*(this.x-e.x)-n*(this.y-e.y)+e.x,s=n*(this.x-e.x)+r*(this.y-e.y)+e.y;return this.x=i,this.y=s,this},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=oce(10,e);break}return this.x=Uz(this.x*t)/t,this.y=Uz(this.y*t)/t,this},scale:function(e,t,r){return r=r&&new pe(r)||new pe(0,0),this.x=r.x+e*(this.x-r.x),this.y=r.y+t*(this.y-r.y),this},snapToGrid:function(e,t){return this.x=oc(this.x,e),this.y=oc(this.y,t||e),this},squaredDistance:function(e){return L2(this,e)},theta:function(e){e=new pe(e);var t=-(e.y-this.y),r=e.x-this.x,n=sce(t,r);return n<0&&(n=2*jz+n),180*n/jz},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(e){e=e&&new pe(e)||new pe(0,0);var t=this.x,r=this.y;return this.x=Vz((t-e.x)*(t-e.x)+(r-e.y)*(r-e.y)),this.y=vs(e.theta(new pe(t,r))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x=e||0,this.y=t||0,this},vectorAngle:function(e){var t=new pe(0,0);return t.angleBetween(this,e)}};pe.prototype.translate=pe.prototype.offset;const Op=pe,{max:_S,min:bS}=Math,bt=function(e,t){if(!(this instanceof bt))return new bt(e,t);if(e instanceof bt)return new bt(e.start,e.end);this.start=new pe(e),this.end=new pe(t)};bt.prototype={type:dr.Line,angle:function(){var e=new pe(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)},bbox:function(){var e=bS(this.start.x,this.end.x),t=bS(this.start.y,this.end.y),r=_S(this.start.x,this.end.x),n=_S(this.start.y,this.end.y);return new vt(e,t,r-e,n-t)},bearing:function(){return K7(this.start,this.end)},clone:function(){return new bt(this.start,this.end)},closestPoint:function(e){return this.pointAt(this.closestPointNormalizedLength(e))},closestPointLength:function(e){return this.closestPointNormalizedLength(e)*this.length()},closestPointNormalizedLength:function(e){var t=this.vector().dot(new bt(this.start,e).vector()),r=bS(1,_S(0,t/this.squaredLength()));return r!==r?0:r},closestPointTangent:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))},containsPoint:function(e){var t=this.start,r=this.end;if(t.cross(e,r)!==0)return!1;var n=this.length();return!(new bt(t,e).length()>n||new bt(e,r).length()>n)},divideAt:function(e){var t=this.pointAt(e);return[new bt(this.start,t),new bt(t,this.end)]},divideAtLength:function(e){var t=this.pointAtLength(e);return[new bt(this.start,t),new bt(t,this.end)]},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y},intersect:function(e,t){if(e&&e.intersectionWithLine){var r=e.intersectionWithLine(this,t);return r&&e instanceof bt&&(r=r[0]),r}return null},intersectionWithLine:function(e){var t=new pe(this.end.x-this.start.x,this.end.y-this.start.y),r=new pe(e.end.x-e.start.x,e.end.y-e.start.y),n=t.x*r.y-t.y*r.x,i=new pe(e.start.x-this.start.x,e.start.y-this.start.y),s=i.x*r.y-i.y*r.x,o=i.x*t.y-i.y*t.x;if(n===0||s*n<0||o*n<0)return null;if(n>0){if(s>n||o>n)return null}else if(s<n||o<n)return null;return[new pe(this.start.x+s*t.x/n,this.start.y+s*t.y/n)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return Z7(this.start,this.end)},midpoint:function(){return new pe((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(e){const t=this.clone();if(!this.isDifferentiable())return t;const{start:r,end:n}=t,i=r.clone().rotate(n,270),s=n.clone().rotate(r,90);return r.move(s,e),n.move(i,e),t},pointAt:function(e){var t=this.start,r=this.end;return e<=0?t.clone():e>=1?r.clone():t.lerp(r,e)},pointAtLength:function(e){var t=this.start,r=this.end,n=!0;e<0&&(n=!1,e=-e);var i=this.length();return e>=i?n?r.clone():t.clone():this.pointAt((n?e:i-e)/i)},pointOffset:function(e){e=new pe(e);var t=this.start,r=this.end,n=(r.x-t.x)*(e.y-t.y)-(r.y-t.y)*(e.x-t.x);return n/this.length()},rotate:function(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this},round:function(e){return this.start.round(e),this.end.round(e),this},scale:function(e,t,r){return this.start.scale(e,t,r),this.end.scale(e,t,r),this},setLength:function(e){var t=this.length();if(!t)return this;var r=e/t;return this.scale(r,r,this.start)},squaredLength:function(){return L2(this.start,this.end)},tangentAt:function(e){if(!this.isDifferentiable())return null;var t=this.start,r=this.end,n=this.pointAt(e),i=new bt(t,r);return i.translate(n.x-t.x,n.y-t.y),i},tangentAtLength:function(e){if(!this.isDifferentiable())return null;var t=this.start,r=this.end,n=this.pointAtLength(e),i=new bt(t,r);return i.translate(n.x-t.x,n.y-t.y),i},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(e,t){return this.start.translate(e,t),this.end.translate(e,t),this},vector:function(){return new pe(this.end.x-this.start.x,this.end.y-this.start.y)}};bt.prototype.intersection=bt.prototype.intersect;const tc=bt,{sqrt:Hz,round:Yd,pow:ace}=Math,Wi=function(e,t,r){if(!(this instanceof Wi))return new Wi(e,t,r);if(e instanceof Wi)return new Wi(new pe(e.x,e.y),e.a,e.b);e=new pe(e),this.x=e.x,this.y=e.y,this.a=t,this.b=r};Wi.fromRect=function(e){return e=new vt(e),new Wi(e.center(),e.width/2,e.height/2)};Wi.prototype={type:dr.Ellipse,bbox:function(){return new vt(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new pe(this.x,this.y)},clone:function(){return new Wi(this)},containsPoint:function(e){return this.normalizedDistance(e)<=1},equals:function(e){return!!e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b},inflate:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.a+=2*e,this.b+=2*t,this},intersectionWithLine:function(e){var t=[],r=e.start,n=e.end,i=this.a,s=this.b,o=e.vector(),a=r.difference(new pe(this)),u=new pe(o.x/(i*i),o.y/(s*s)),c=new pe(a.x/(i*i),a.y/(s*s)),f=o.dot(u),h=o.dot(c),v=a.dot(c)-1,y=h*h-f*v;if(y<0)return null;if(y>0){var m=Hz(y),_=(-h-m)/f,w=(-h+m)/f;if((_<0||1<_)&&(w<0||1<w))return null;0<=_&&_<=1&&t.push(r.lerp(n,_)),0<=w&&w<=1&&t.push(r.lerp(n,w))}else{var S=-h/f;if(0<=S&&S<=1)t.push(r.lerp(n,S));else return null}return t},intersectionWithLineFromCenterToPoint:function(e,t){e=new pe(e),t&&e.rotate(new pe(this.x,this.y),t);var r=e.x-this.x,n=e.y-this.y,i;if(r===0)return i=this.bbox().pointNearestToPoint(e),t?i.rotate(new pe(this.x,this.y),-t):i;var s=n/r,o=s*s,a=this.a*this.a,u=this.b*this.b,c=Hz(1/(1/a+o/u));c=r<0?-c:c;var f=s*c;return i=new pe(this.x+c,this.y+f),t?i.rotate(new pe(this.x,this.y),-t):i},normalizedDistance:function(e){var t=e.x,r=e.y,n=this.a,i=this.b,s=this.x,o=this.y;return(t-s)*(t-s)/(n*n)+(r-o)*(r-o)/(i*i)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=ace(10,e);break}return this.x=Yd(this.x*t)/t,this.y=Yd(this.y*t)/t,this.a=Yd(this.a*t)/t,this.b=Yd(this.b*t)/t,this},tangentTheta:function(e){var t=30,r=e.x,n=e.y,i=this.a,s=this.b,o=this.bbox().center(),a=o.x,u=o.y,c=r>o.x+i/2,f=r<o.x-i/2,h,v;return c||f?(h=r>o.x?n-t:n+t,v=i*i/(r-a)-i*i*(n-u)*(h-u)/(s*s*(r-a))+a):(v=n>o.y?r+t:r-t,h=s*s/(n-u)-s*s*(r-a)*(v-a)/(i*i*(n-u))+u),new pe(v,h).theta(e)},toString:function(){return new pe(this.x,this.y).toString()+" "+this.a+" "+this.b}};const uce=Wi,{abs:Wz,cos:cce,sin:lce,min:Cf,max:Xz,round:Kd,pow:fce}=Math,vt=function(e,t,r,n){if(!(this instanceof vt))return new vt(e,t,r,n);Object(e)===e&&(t=e.y,r=e.width,n=e.height,e=e.x),this.x=e===void 0?0:e,this.y=t===void 0?0:t,this.width=r===void 0?0:r,this.height=n===void 0?0:n};vt.fromEllipse=function(e){return e=new Wi(e),new vt(e.x-e.a,e.y-e.b,2*e.a,2*e.b)};vt.fromPointUnion=function(...e){if(e.length===0)return null;const t=new pe;let r,n,i,s;r=n=1/0,i=s=-1/0;for(let o=0;o<e.length;o++){t.update(e[o]);const a=t.x,u=t.y;a<r&&(r=a),a>i&&(i=a),u<n&&(n=u),u>s&&(s=u)}return new vt(r,n,i-r,s-n)};vt.fromRectUnion=function(...e){if(e.length===0)return null;const t=new vt;let r,n,i,s;r=n=1/0,i=s=-1/0;for(let o=0;o<e.length;o++){t.update(e[o]);const a=t.x,u=t.y,c=a+t.width,f=u+t.height;a<r&&(r=a),c>i&&(i=c),u<n&&(n=u),f>s&&(s=f)}return new vt(r,n,i-r,s-n)};vt.prototype={type:dr.Rect,bbox:function(e){return this.clone().rotateAroundCenter(e)},rotateAroundCenter:function(e){if(!e)return this;const{width:t,height:r}=this,n=vs(e),i=Wz(lce(n)),s=Wz(cce(n)),o=t*s+r*i,a=t*i+r*s;return this.x+=(t-o)/2,this.y+=(r-a)/2,this.width=o,this.height=a,this},bottomLeft:function(){return new pe(this.x,this.y+this.height)},bottomLine:function(){return new bt(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new pe(this.x+this.width/2,this.y+this.height)},center:function(){return new pe(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new vt(this)},containsPoint:function(e){return e instanceof pe||(e=new pe(e)),e.x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},containsRect:function(e){var t=new vt(this).normalize(),r=new vt(e).normalize(),n=t.width,i=t.height,s=r.width,o=r.height;if(!n||!i||!s||!o)return!1;var a=t.x,u=t.y,c=r.x,f=r.y;return s+=c,n+=a,o+=f,i+=u,a<=c&&s<=n&&u<=f&&o<=i},corner:function(){return new pe(this.x+this.width,this.y+this.height)},equals:function(e){var t=new vt(this).normalize(),r=new vt(e).normalize();return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height},inflate:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},intersect:function(e){var t=this.origin(),r=this.corner(),n=e.origin(),i=e.corner();if(i.x<=t.x||i.y<=t.y||n.x>=r.x||n.y>=r.y)return null;var s=Xz(t.x,n.x),o=Xz(t.y,n.y);return new vt(s,o,Cf(r.x,i.x)-s,Cf(r.y,i.y)-o)},intersectionWithLine:function(e){var t=this,r=[t.topLine(),t.rightLine(),t.bottomLine(),t.leftLine()],n=[],i=[],s,o,a=r.length;for(o=0;o<a;o++)s=e.intersect(r[o]),s!==null&&i.indexOf(s.toString())<0&&(n.push(s),i.push(s.toString()));return n.length>0?n:null},intersectionWithLineFromCenterToPoint:function(e,t){e=new pe(e);var r=new pe(this.x+this.width/2,this.y+this.height/2),n;t&&e.rotate(r,t);for(var i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],s=new bt(r,e),o=i.length-1;o>=0;--o){var a=i[o].intersection(s);if(a!==null){n=a;break}}return n&&t&&n.rotate(r,-t),n},leftLine:function(){return new bt(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new pe(this.x,this.y+this.height/2)},maxRectScaleToFit:function(e,t){e=new vt(e),t||(t=e.center());var r,n,i,s,o,a,u,c,f=t.x,h=t.y;r=n=i=s=o=a=u=c=1/0;var v=e.topLeft();v.x<f&&(r=(this.x-f)/(v.x-f)),v.y<h&&(o=(this.y-h)/(v.y-h));var y=e.bottomRight();y.x>f&&(n=(this.x+this.width-f)/(y.x-f)),y.y>h&&(a=(this.y+this.height-h)/(y.y-h));var m=e.topRight();m.x>f&&(i=(this.x+this.width-f)/(m.x-f)),m.y<h&&(u=(this.y-h)/(m.y-h));var _=e.bottomLeft();return _.x<f&&(s=(this.x-f)/(_.x-f)),_.y>h&&(c=(this.y+this.height-h)/(_.y-h)),{sx:Cf(r,n,i,s),sy:Cf(o,a,u,c)}},maxRectUniformScaleToFit:function(e,t){var r=this.maxRectScaleToFit(e,t);return Cf(r.sx,r.sy)},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},normalize:function(){var e=this.x,t=this.y,r=this.width,n=this.height;return this.width<0&&(e=this.x+this.width,r=-this.width),this.height<0&&(t=this.y+this.height,n=-this.height),this.x=e,this.y=t,this.width=r,this.height=n,this},offset:function(e,t){return pe.prototype.offset.call(this,e,t)},origin:function(){return new pe(this.x,this.y)},pointNearestToPoint:function(e){if(e=new pe(e),this.containsPoint(e)){var t=this.sideNearestToPoint(e);switch(t){case"right":return new pe(this.x+this.width,e.y);case"left":return new pe(this.x,e.y);case"bottom":return new pe(e.x,this.y+this.height);case"top":return new pe(e.x,this.y)}}return e.adhereToRect(this)},rightLine:function(){return new bt(this.topRight(),this.bottomRight())},rightMiddle:function(){return new pe(this.x+this.width,this.y+this.height/2)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=fce(10,e);break}return this.x=Kd(this.x*t)/t,this.y=Kd(this.y*t)/t,this.width=Kd(this.width*t)/t,this.height=Kd(this.height*t)/t,this},scale:function(e,t,r){return r=this.origin().scale(e,t,r),this.x=r.x,this.y=r.y,this.width*=e,this.height*=t,this},sideNearestToPoint:function(e){e=new pe(e);var t=e.x-this.x,r=this.x+this.width-e.x,n=e.y-this.y,i=this.y+this.height-e.y,s=t,o="left";return r<s&&(s=r,o="right"),n<s&&(s=n,o="top"),i<s&&(o="bottom"),o},snapToGrid:function(e,t){var r=this.origin().snapToGrid(e,t),n=this.corner().snapToGrid(e,t);return this.x=r.x,this.y=r.y,this.width=n.x-r.x,this.height=n.y-r.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new bt(this.topLeft(),this.topRight())},topMiddle:function(){return new pe(this.x+this.width/2,this.y)},topRight:function(){return new pe(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(e){return vt.fromRectUnion(this,e)},update:function(e,t,r,n){return Object(e)===e&&(t=e.y,r=e.width,n=e.height,e=e.x),this.x=e||0,this.y=t||0,this.width=r||0,this.height=n||0,this}};vt.prototype.bottomRight=vt.prototype.corner;vt.prototype.topLeft=vt.prototype.origin;vt.prototype.translate=vt.prototype.offset;const hce=vt;function J7(e){const t=e.trim();if(t==="")return[];const r=[],n=t.split(/\b\s*,\s*|,\s*|\s+/),i=n.length;for(let s=0;s<i;s+=2)r.push({x:+n[s],y:+n[s+1]});return r}function Q7(e){const t=e.length;if(t===0)return[];const r=[];for(let n=0;n<t;n++){const i=e[n].clone();r.push(i)}return r}function eG(e){const{abs:t}=Math;var r,n,i=e.length;if(i===0)return[];var s;for(r=0;r<i;r++)(s===void 0||e[r].y<s.y||e[r].y===s.y&&e[r].x>s.x)&&(s=e[r]);var o=[];for(r=0;r<i;r++){var a=s.theta(e[r]);a===0&&(a=360);var u=[e[r],r,a];o.push(u)}if(o.sort(function(G,ee){var ae=G[2]-ee[2];return ae===0&&(ae=ee[1]-G[1]),ae}),o.length>2){var c=o[o.length-1];o.unshift(c)}for(var f={},h=[],v,y,m,_,w,S;o.length!==0;)if(v=o.pop(),y=v[0],!f.hasOwnProperty(v[0]+"@@"+v[1]))for(var E=!1;!E;)if(h.length<2)h.push(v),E=!0;else{m=h.pop(),_=m[0],w=h.pop(),S=w[0];var A=S.cross(_,y);if(A<0)h.push(w),h.push(m),h.push(v),E=!0;else if(A===0){var T=1e-10,I=_.angleBetween(S,y);t(I-180)<T||_.equals(y)||S.equals(_)?(f[m[0]+"@@"+m[1]]=_,h.push(w)):t((I+1)%360-1)<T&&(h.push(w),o.push(m))}else f[m[0]+"@@"+m[1]]=_,h.push(w)}h.length>2&&h.pop();var q,p=-1;for(n=h.length,r=0;r<n;r++){var C=h[r][1];(q===void 0||C<q)&&(q=C,p=r)}var O=[];if(p>0){var N=h.slice(p),V=h.slice(0,p);O=N.concat(V)}else O=h;var W=[];for(n=O.length,r=0;r<n;r++)W.push(O[r][0]);return W}const dn=function(e){if(!(this instanceof dn))return new dn(e);if(typeof e=="string")return new dn.parse(e);this.points=Array.isArray(e)?e.map(pe):[]};dn.parse=function(e){return new dn(J7(e))};dn.fromRect=function(e){return new dn([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft(),e.topLeft()])};dn.prototype={type:dr.Polyline,bbox:function(){var e=1/0,t=-1/0,r=1/0,n=-1/0,i=this.points,s=i.length;if(s===0)return null;for(var o=0;o<s;o++){var a=i[o],u=a.x,c=a.y;u<e&&(e=u),u>t&&(t=u),c<r&&(r=c),c>n&&(n=c)}return new vt(e,r,t-e,n-r)},clone:function(){return new dn(Q7(this.points))},closestPoint:function(e){var t=this.closestPointLength(e);return this.pointAtLength(t)},closestPointLength:function(e){var t=this.lengthPoints(),r=t.length;if(r===0||r===1)return 0;for(var n,i=1/0,s=0,o=r-1,a=0;a<o;a++){var u=new bt(t[a],t[a+1]),c=u.length(),f=u.closestPointNormalizedLength(e),h=u.pointAt(f),v=h.squaredDistance(e);v<i&&(i=v,n=s+f*c),s+=c}return n},closestPointNormalizedLength:function(e){var t=this.closestPointLength(e);if(t===0)return 0;var r=this.length();return r===0?0:t/r},closestPointTangent:function(e){var t=this.closestPointLength(e);return this.tangentAtLength(t)},containsPoint:function(e){var t=this.points,r=t.length;if(r===0)return!1;for(var n=e.x,i=e.y,s=r-1,o=0,a=0,u=new bt,c=new bt,f=new pe;o<r;o++){var h=t[s],v=t[o];if(e.equals(h)||(u.start=h,u.end=v,u.containsPoint(e)))return!0;if(i<=h.y&&i>v.y||i>h.y&&i<=v.y){var y=h.x-n>v.x-n?h.x-n:v.x-n;y>=0&&(f.x=n+y,f.y=i,c.start=e,c.end=f,u.intersect(c)&&a++)}s=o}return a%2===1},close:function(){const{start:e,end:t,points:r}=this;return e&&t&&!e.equals(t)&&r.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new dn(eG(this.points))},equals:function(e){if(!e)return!1;var t=this.points,r=e.points,n=t.length;if(r.length!==n)return!1;for(var i=0;i<n;i++){var s=t[i],o=e.points[i];if(!s.equals(o))return!1}return!0},intersectionWithLine:function(e){for(var t=new bt(e),r=[],n=this.lengthPoints(),i=new bt,s=0,o=n.length-1;s<o;s++){i.start=n[s],i.end=n[s+1];var a=t.intersectionWithLine(i);a&&r.push(a[0])}return r.length>0?r:null},isDifferentiable:function(){var e=this.points,t=e.length;if(t===0)return!1;for(var r=new bt,n=t-1,i=0;i<n;i++)if(r.start=e[i],r.end=e[i+1],r.isDifferentiable())return!0;return!1},length:function(){var e=this.lengthPoints(),t=e.length;if(t===0)return 0;for(var r=0,n=t-1,i=0;i<n;i++)r+=e[i].distance(e[i+1]);return r},pointAt:function(e){var t=this.lengthPoints(),r=t.length;if(r===0)return null;if(r===1||e<=0)return t[0].clone();if(e>=1)return t[r-1].clone();var n=this.length(),i=n*e;return this.pointAtLength(i)},pointAtLength:function(e){var t=this.lengthPoints(),r=t.length;if(r===0)return null;if(r===1)return t[0].clone();var n=!0;e<0&&(n=!1,e=-e);for(var i=0,s=r-1,o=0;o<s;o++){var a=n?o:s-1-o,u=t[a],c=t[a+1],f=new bt(u,c),h=u.distance(c);if(e<=i+h)return f.pointAtLength((n?1:-1)*(e-i));i+=h}var v=n?t[r-1]:t[0];return v.clone()},round:function(e){for(var t=this.points,r=t.length,n=0;n<r;n++)t[n].round(e);return this},scale:function(e,t,r){for(var n=this.points,i=n.length,s=0;s<i;s++)n[s].scale(e,t,r);return this},simplify:function(e={}){const t=this.points;if(t.length<3)return this;const r=e.threshold||1e-10;let n=0;for(;t[n+2];){const i=n,s=n+1,o=n+2,a=t[i],u=t[s],c=t[o];new bt(a,c).closestPoint(u).distance(u)<=r?t.splice(s,1):n+=1}return this},tangentAt:function(e){var t=this.lengthPoints(),r=t.length;if(r===0||r===1)return null;e<0&&(e=0),e>1&&(e=1);var n=this.length(),i=n*e;return this.tangentAtLength(i)},tangentAtLength:function(e){var t=this.lengthPoints(),r=t.length;if(r===0||r===1)return null;var n=!0;e<0&&(n=!1,e=-e);for(var i,s=0,o=r-1,a=0;a<o;a++){var u=n?a:o-1-a,c=t[u],f=t[u+1],h=new bt(c,f),v=c.distance(f);if(h.isDifferentiable()){if(e<=s+v)return h.tangentAtLength((n?1:-1)*(e-s));i=h}s+=v}if(i){var y=n?1:0;return i.tangentAt(y)}return null},toString:function(){return this.points+""},translate:function(e,t){for(var r=this.points,n=r.length,i=0;i<n;i++)r[i].translate(e,t);return this},serialize:function(){var e=this.points,t=e.length;if(t===0)return"";for(var r="",n=0;n<t;n++){var i=e[n];r+=i.x+","+i.y+" "}return r.trim()}};Object.defineProperty(dn.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.points,t=e.length;return t===0?null:this.points[0]}});Object.defineProperty(dn.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.points,t=e.length;return t===0?null:this.points[t-1]}});const{abs:Zd,sqrt:dce,min:Yz,max:Kz,pow:wS}=Math,Kr=function(e,t,r,n){if(!(this instanceof Kr))return new Kr(e,t,r,n);if(e instanceof Kr)return new Kr(e.start,e.controlPoint1,e.controlPoint2,e.end);this.start=new pe(e),this.controlPoint1=new pe(t),this.controlPoint2=new pe(r),this.end=new pe(n)};Kr.throughPoints=function(){function e(r){var n=[],i=[],s=r.length-1,o;if(s==1)return n[0]=new pe((2*r[0].x+r[1].x)/3,(2*r[0].y+r[1].y)/3),i[0]=new pe(2*n[0].x-r[0].x,2*n[0].y-r[0].y),[n,i];var a=[];for(o=1;o<s-1;o++)a[o]=4*r[o].x+2*r[o+1].x;a[0]=r[0].x+2*r[1].x,a[s-1]=(8*r[s-1].x+r[s].x)/2;var u=t(a);for(o=1;o<s-1;++o)a[o]=4*r[o].y+2*r[o+1].y;a[0]=r[0].y+2*r[1].y,a[s-1]=(8*r[s-1].y+r[s].y)/2;var c=t(a);for(o=0;o<s;o++)n.push(new pe(u[o],c[o])),o<s-1?i.push(new pe(2*r[o+1].x-u[o+1],2*r[o+1].y-c[o+1])):i.push(new pe((r[s].x+u[s-1])/2,(r[s].y+c[s-1])/2));return[n,i]}function t(r){var n=r.length,i=[],s=[],o=2;i[0]=r[0]/o;for(var a=1;a<n;a++)s[a]=1/o,o=(a<n-1?4:3.5)-s[a],i[a]=(r[a]-i[a-1])/o;for(a=1;a<n;a++)i[n-a-1]-=s[n-a]*i[n-a];return i}return function(r){if(!r||Array.isArray(r)&&r.length<2)throw new Error("At least 2 points are required");for(var n=e(r),i=[],s=n[0].length,o=0;o<s;o++){var a=new pe(n[0][o].x,n[0][o].y),u=new pe(n[1][o].x,n[1][o].y);i.push(new Kr(r[o],a,u,r[o+1]))}return i}}();Kr.prototype={type:dr.Curve,bbox:function(){for(var e=this.start,t=this.controlPoint1,r=this.controlPoint2,n=this.end,i=e.x,s=e.y,o=t.x,a=t.y,u=r.x,c=r.y,f=n.x,h=n.y,v=new Array,y=new Array,m=[new Array,new Array],_,w,S,E,A,T,I,q,p=0;p<2;++p){if(p===0?(w=6*i-12*o+6*u,_=-3*i+9*o-9*u+3*f,S=3*o-3*i):(w=6*s-12*a+6*c,_=-3*s+9*a-9*c+3*h,S=3*a-3*s),Zd(_)<1e-12){if(Zd(w)<1e-12)continue;E=-S/w,0<E&&E<1&&y.push(E);continue}I=w*w-4*S*_,q=dce(I),!(I<0)&&(A=(-w+q)/(2*_),0<A&&A<1&&y.push(A),T=(-w-q)/(2*_),0<T&&T<1&&y.push(T))}for(var C=y.length,O=C,N,V,W;C--;)E=y[C],N=1-E,V=N*N*N*i+3*N*N*E*o+3*N*E*E*u+E*E*E*f,m[0][C]=V,W=N*N*N*s+3*N*N*E*a+3*N*E*E*c+E*E*E*h,m[1][C]=W,v[C]={X:V,Y:W};y[O]=0,y[O+1]=1,v[O]={X:i,Y:s},v[O+1]={X:f,Y:h},m[0][O]=i,m[1][O]=s,m[0][O+1]=f,m[1][O+1]=h,y.length=O+2,m[0].length=O+2,m[1].length=O+2,v.length=O+2;var G=Yz.apply(null,m[0]),ee=Yz.apply(null,m[1]),ae=Kz.apply(null,m[0]),K=Kz.apply(null,m[1]);return new vt(G,ee,ae-G,K-ee)},clone:function(){return new Kr(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(e,t){return this.pointAtT(this.closestPointT(e,t))},closestPointLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i={precision:r,subdivisions:n};return this.lengthAtT(this.closestPointT(e,i),i)},closestPointNormalizedLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i={precision:r,subdivisions:n},s=this.closestPointLength(e,i);if(!s)return 0;var o=this.length(i);return o===0?0:s/o},closestPointT:function(e,t){t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i,s,o,a,u,c,f,h=n.length,v=h?1/h:0,y=0;y<h;y++){var m=n[y],_=m.start.distance(e),w=m.end.distance(e),S=_+w;(!f||S<f)&&(i=m,s=y*v,o=(y+1)*v,a=_,u=w,c=m.start.distance(m.end),f=S)}for(var E=wS(10,-r);;){var A=a?Zd(a-u)/a:0,T=u?Zd(a-u)/u:0,I=A<E||T<E,q=a?a<c*E:!0,p=u?u<c*E:!0,C=q||p;if(I||C)return a<=u?s:o;var O=i.divide(.5);v/=2;var N=O[0].start.distance(e),V=O[0].end.distance(e),W=N+V,G=O[1].start.distance(e),ee=O[1].end.distance(e),ae=G+ee;W<=ae?(i=O[0],o-=v,a=N,u=V):(i=O[1],s+=v,a=G,u=ee)}},closestPointTangent:function(e,t){return this.tangentAtT(this.closestPointT(e,t))},containsPoint:function(e,t){var r=this.toPolyline(t);return r.containsPoint(e)},divideAt:function(e,t){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var r=this.tAt(e,t);return this.divideAtT(r)},divideAtLength:function(e,t){var r=this.tAtLength(e,t);return this.divideAtT(r)},divideAtT:function(e){var t=this.start,r=this.controlPoint1,n=this.controlPoint2,i=this.end;if(e<=0)return[new Kr(t,t,t,t),new Kr(t,r,n,i)];if(e>=1)return[new Kr(t,r,n,i),new Kr(i,i,i,i)];var s=this.getSkeletonPoints(e),o=s.startControlPoint1,a=s.startControlPoint2,u=s.divider,c=s.dividerControlPoint1,f=s.dividerControlPoint2;return[new Kr(t,o,a,u),new Kr(u,c,f,i)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.controlPoint1.x===e.controlPoint1.x&&this.controlPoint1.y===e.controlPoint1.y&&this.controlPoint2.x===e.controlPoint2.x&&this.controlPoint2.y===e.controlPoint2.y&&this.end.x===e.end.x&&this.end.y===e.end.y},getSkeletonPoints:function(e){var t=this.start,r=this.controlPoint1,n=this.controlPoint2,i=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:n.clone()};if(e>=1)return{startControlPoint1:r.clone(),startControlPoint2:n.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var s=new bt(t,r).pointAt(e),o=new bt(r,n).pointAt(e),a=new bt(n,i).pointAt(e),u=new bt(s,o).pointAt(e),c=new bt(o,a).pointAt(e),f=new bt(u,c).pointAt(e),h={startControlPoint1:s,startControlPoint2:u,divider:f,dividerControlPoint1:c,dividerControlPoint2:a};return h},getSubdivisions:function(e){e=e||{};var t=e.precision===void 0?this.PRECISION:e.precision,r=this.start,n=this.controlPoint1,i=this.controlPoint2,s=this.end,o=[new Kr(r,n,i,s)];if(t===0)return o;var a=!this.isDifferentiable();if(a)return o;var u=this.endpointDistance(),c=wS(10,-t),f=2,h=n.cross(r,s)===0&&i.cross(r,s)===0;h&&(f=2*t);for(var v=0;;){v+=1;for(var y=[],m=o.length,_=0;_<m;_++){var w=o[_],S=w.divide(.5);y.push(S[0],S[1])}for(var E=0,A=y.length,T=0;T<A;T++){var I=y[T];E+=I.endpointDistance()}if(v>=f){var q=E!==0?(E-u)/E:0;if(q<c)return y}o=y,u=E}},isDifferentiable:function(){var e=this.start,t=this.controlPoint1,r=this.controlPoint2,n=this.end;return!(e.equals(t)&&t.equals(r)&&r.equals(n))},length:function(e){e=e||{};for(var t=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:t}):e.subdivisions,n=0,i=r.length,s=0;s<i;s++){var o=r[s];n+=o.endpointDistance()}return n},lengthAtT:function(e,t){if(e<=0)return 0;t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=this.divide(e)[0],i=n.length({precision:r});return i},pointAt:function(e,t){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var r=this.tAt(e,t);return this.pointAtT(r)},pointAtLength:function(e,t){var r=this.tAtLength(e,t);return this.pointAtT(r)},pointAtT:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider},PRECISION:3,round:function(e){return this.start.round(e),this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,r){return this.start.scale(e,t,r),this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this},tangentAt:function(e,t){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var r=this.tAt(e,t);return this.tangentAtT(r)},tangentAtLength:function(e,t){if(!this.isDifferentiable())return null;var r=this.tAtLength(e,t);return this.tangentAtT(r)},tangentAtT:function(e){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var t=this.getSkeletonPoints(e),r=t.startControlPoint2,n=t.dividerControlPoint1,i=t.divider,s=new bt(r,n);return s.translate(i.x-r.x,i.y-r.y),s},tAt:function(e,t){if(e<=0)return 0;if(e>=1)return 1;t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i={precision:r,subdivisions:n},s=this.length(i),o=s*e;return this.tAtLength(o,i)},tAtLength:function(e,t){var r=!0;e<0&&(r=!1,e=-e),t=t||{};for(var n=t.precision===void 0?this.PRECISION:t.precision,i=t.subdivisions===void 0?this.getSubdivisions({precision:n}):t.subdivisions,s={precision:n,subdivisions:i},o,a,u,c,f,h=0,v=i.length,y=1/v,m=0;m<v;m++){var _=r?m:v-1-m,w=i[m],S=w.endpointDistance();if(e<=h+S){o=w,a=_*y,u=(_+1)*y,c=r?e-h:S+h-e,f=r?S+h-e:e-h;break}h+=S}if(!o)return r?1:0;for(var E=this.length(s),A=wS(10,-n);;){var T;if(T=E!==0?c/E:0,T<A)return a;if(T=E!==0?f/E:0,T<A)return u;var I,q,p=o.divide(.5);y/=2;var C=p[0].endpointDistance(),O=p[1].endpointDistance();c<=C?(o=p[0],u-=y,I=c,q=C-I):(o=p[1],a+=y,I=c-C,q=O-I),c=I,f=q}},toPoints:function(e){e=e||{};for(var t=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:t}):e.subdivisions,n=[r[0].start.clone()],i=r.length,s=0;s<i;s++){var o=r[s];n.push(o.end.clone())}return n},toPolyline:function(e){return new dn(this.toPoints(e))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}};Kr.prototype.divide=Kr.prototype.divideAtT;function kh(e){var t,r,n=[];for(r=arguments.length,t=1;t<r;t++)n.push(arguments[t]);if(!e)throw new Error("Missing a parent object.");var i=Object.create(e);for(r=n.length,t=0;t<r;t++){var s=n[t],o,a;for(a in s)s.hasOwnProperty(a)&&(delete i[a],o=Object.getOwnPropertyDescriptor(s,a),Object.defineProperty(i,a,o))}return i}const Nt=function(e){if(!(this instanceof Nt))return new Nt(e);if(typeof e=="string")return new Nt.parse(e);this.segments=[];var t,r;if(e)if(Array.isArray(e)&&e.length!==0)if(e=e.reduce(function(a,u){return a.concat(u)},[]),r=e.length,e[0].isSegment)for(t=0;t<r;t++){var n=e[t];this.appendSegment(n)}else{var i=null;for(t=0;t<r;t++){var s=e[t];if(!(s instanceof bt||s instanceof Kr))throw new Error("Cannot construct a path segment from the provided object.");t===0&&this.appendSegment(Nt.createSegment("M",s.start)),i&&!i.end.equals(s.start)&&this.appendSegment(Nt.createSegment("M",s.start)),s instanceof bt?this.appendSegment(Nt.createSegment("L",s.end)):s instanceof Kr&&this.appendSegment(Nt.createSegment("C",s.controlPoint1,s.controlPoint2,s.end)),i=s}}else if(e.isSegment)this.appendSegment(e);else if(e instanceof bt)this.appendSegment(Nt.createSegment("M",e.start)),this.appendSegment(Nt.createSegment("L",e.end));else if(e instanceof Kr)this.appendSegment(Nt.createSegment("M",e.start)),this.appendSegment(Nt.createSegment("C",e.controlPoint1,e.controlPoint2,e.end));else if(e instanceof dn){if(!(e.points&&e.points.length!==0))return;for(r=e.points.length,t=0;t<r;t++){var o=e.points[t];t===0?this.appendSegment(Nt.createSegment("M",o)):this.appendSegment(Nt.createSegment("L",o))}}else throw new Error("Cannot construct a path from the provided object.")};Nt.parse=function(e){if(!e)return new Nt;for(var t=new Nt,r=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,n=e.match(r),i=n.length,s=0;s<i;s++){var o=n[s],a=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,u=o.match(a),c=Nt.createSegment.apply(this,u);t.appendSegment(c)}return t};Nt.createSegment=function(e){if(!e)throw new Error("Type must be provided.");var t=Nt.segmentTypes[e];if(!t)throw new Error(e+" is not a recognized path segment type.");for(var r=[],n=arguments.length,i=1;i<n;i++)r.push(arguments[i]);return ua(t,r)};Nt.prototype={type:dr.Path,appendSegment:function(e){var t=this.segments,r=t.length,n,i=r!==0?t[r-1]:null,s=null;if(Array.isArray(e)){if(e=e.reduce(function(c,f){return c.concat(f)},[]),!e[0].isSegment)throw new Error("Segments required.");for(var o=e.length,a=0;a<o;a++){var u=e[a];n=this.prepareSegment(u,i,s),t.push(n),i=n}}else{if(!e||!e.isSegment)throw new Error("Segment required.");n=this.prepareSegment(e,i,s),t.push(n)}},bbox:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r,n=0;n<t;n++){var i=e[n];if(i.isVisible){var s=i.bbox();r=r?r.union(s):s}}if(r)return r;var o=e[t-1];return new vt(o.end.x,o.end.y,0,0)},clone:function(){for(var e=this.segments,t=e.length,r=new Nt,n=0;n<t;n++){var i=e[n].clone();r.appendSegment(i)}return r},closestPoint:function(e,t){var r=this.closestPointT(e,t);return r?this.pointAtT(r):null},closestPointLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,i={precision:r,segmentSubdivisions:n},s=this.closestPointT(e,i);return s?this.lengthAtT(s,i):0},closestPointNormalizedLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,i={precision:r,segmentSubdivisions:n},s=this.closestPointLength(e,i);if(s===0)return 0;var o=this.length(i);return o===0?0:s/o},closestPointT:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;t=t||{};for(var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o,a=1/0,u=0;u<n;u++){var c=r[u],f=s[u];if(c.isVisible){var h=c.closestPointT(e,{precision:i,subdivisions:f}),v=c.pointAtT(h),y=new bt(v,e).squaredLength();y<a&&(o={segmentIndex:u,value:h},a=y)}}return o||{segmentIndex:n-1,value:1}},closestPointTangent:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;t=t||{};for(var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o,a=1/0,u=0;u<n;u++){var c=r[u],f=s[u];if(c.isDifferentiable()){var h=c.closestPointT(e,{precision:i,subdivisions:f}),v=c.pointAtT(h),y=new bt(v,e).squaredLength();y<a&&(o=c.tangentAtT(h),a=y)}}return o||null},containsPoint:function(e,t){var r=this.toPolylines(t);if(!r)return!1;for(var n=r.length,i=0,s=0;s<n;s++){var o=r[s];o.containsPoint(e)&&i++}return i%2===1},divideAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.divideAtLength(u,o)},divideAtLength:function(e,t){var r=this.segments.length;if(r===0)return null;var n=!0;e<0&&(n=!1,e=-e),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o,a,u=0,c,f,h,v,y;for(o=0;o<r;o++){var m=n?o:r-1-o;a=this.getSegment(m);var _=s[m],w=a.length({precision:i,subdivisions:_});if(a.isDifferentiable()&&(h=a,v=m,e<=u+w)){f=m,c=a.divideAtLength((n?1:-1)*(e-u),{precision:i,subdivisions:_});break}u+=w}if(!h)return null;c||(f=v,y=n?1:0,c=h.divideAtT(y));var S=this.clone();S.replaceSegment(f,c);var E=f,A=f+1,T=f+2;c[0].isDifferentiable()||(S.removeSegment(E),A-=1,T-=1);var I=S.getSegment(A).start;S.insertSegment(A,Nt.createSegment("M",I)),T+=1,c[1].isDifferentiable()||(S.removeSegment(T-1),T-=1);var q=T-E-1;for(o=T;o<S.segments.length;o++){var p=this.getSegment(o-q);if(a=S.getSegment(o),a.type==="Z"&&!p.subpathStartSegment.end.equals(a.subpathStartSegment.end)){var C=Nt.createSegment("L",p.end);S.replaceSegment(o,C)}}var O=new Nt(S.segments.slice(0,A)),N=new Nt(S.segments.slice(A));return[O,N]},equals:function(e){if(!e)return!1;var t=this.segments,r=e.segments,n=t.length;if(r.length!==n)return!1;for(var i=0;i<n;i++){var s=t[i],o=r[i];if(s.type!==o.type||!s.equals(o))return!1}return!0},getSegment:function(e){var t=this.segments,r=t.length;if(r===0)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");return t[e]},getSegmentSubdivisions:function(e){var t=this.segments,r=t.length;e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,i=[],s=0;s<r;s++){var o=t[s],a=o.getSubdivisions({precision:n});i.push(a)}return i},getSubpaths:function(){const t=this.clone().validate().segments,r=t.length,n=[];for(let i=0;i<r;i++){const s=t[i];s.isSubpathStart?n.push(new Nt(s)):n[n.length-1].appendSegment(s)}return n},insertSegment:function(e,t){var r=this.segments,n=r.length;if(e<0&&(e=n+e+1),e>n||e<0)throw new Error("Index out of range.");var i,s=null,o=null;if(n!==0&&(e>=1?(s=r[e-1],o=s.nextSegment):o=r[0]),Array.isArray(t)){if(t=t.reduce(function(f,h){return f.concat(h)},[]),!t[0].isSegment)throw new Error("Segments required.");for(var a=t.length,u=0;u<a;u++){var c=t[u];i=this.prepareSegment(c,s,o),r.splice(e+u,0,i),s=i}}else{if(!t||!t.isSegment)throw new Error("Segment required.");i=this.prepareSegment(t,s,o),r.splice(e,0,i)}},intersectionWithLine:function(e,t){var r=null,n=this.toPolylines(t);if(!n)return null;for(var i=0,s=n.length;i<s;i++){var o=n[i],a=e.intersect(o);a&&(r||(r=[]),Array.isArray(a)?Array.prototype.push.apply(r,a):r.push(a))}return r},isDifferentiable:function(){for(var e=this.segments,t=e.length,r=0;r<t;r++){var n=e[r];if(n.isDifferentiable())return!0}return!1},isValid:function(){var e=this.segments,t=e.length===0||e[0].type==="M";return t},length:function(e){var t=this.segments,r=t.length;if(r===0)return 0;e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,i=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,s=0,o=0;o<r;o++){var a=t[o],u=i[o];s+=a.length({subdivisions:u})}return s},lengthAtT:function(e,t){var r=this.segments,n=r.length;if(n===0)return 0;var i=e.segmentIndex;if(i<0)return 0;var s=e.value;i>=n?(i=n-1,s=1):s<0?s=0:s>1&&(s=1),t=t||{};for(var o=t.precision===void 0?this.PRECISION:t.precision,a=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions,u,c=0,f=0;f<i;f++){var h=r[f];u=a[f],c+=h.length({precisison:o,subdivisions:u})}return h=r[i],u=a[i],c+=h.lengthAtT(s,{precisison:o,subdivisions:u}),c},pointAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.pointAtLength(u,o)},pointAtLength:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;if(e===0)return this.start.clone();var i=!0;e<0&&(i=!1,e=-e),t=t||{};for(var s=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,a,u=0,c=0;c<n;c++){var f=i?c:n-1-c,h=r[f],v=o[f],y=h.length({precision:s,subdivisions:v});if(h.isVisible){if(e<=u+y)return h.pointAtLength((i?1:-1)*(e-u),{precision:s,subdivisions:v});a=h}u+=y}if(a)return i?a.end:a.start;var m=r[n-1];return m.end.clone()},pointAtT:function(e){var t=this.segments,r=t.length;if(r===0)return null;var n=e.segmentIndex;if(n<0)return t[0].pointAtT(0);if(n>=r)return t[r-1].pointAtT(1);var i=e.value;return i<0?i=0:i>1&&(i=1),t[n].pointAtT(i)},PRECISION:3,prepareSegment:function(e,t,r){e.previousSegment=t,e.nextSegment=r,t&&(t.nextSegment=e),r&&(r.previousSegment=e);var n=e;return e.isSubpathStart&&(e.subpathStartSegment=e,n=r),n&&this.updateSubpathStartSegment(n),e},removeSegment:function(e){var t=this.segments,r=t.length;if(r===0)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");var n=t.splice(e,1)[0],i=n.previousSegment,s=n.nextSegment;i&&(i.nextSegment=s),s&&(s.previousSegment=i),n.isSubpathStart&&s&&this.updateSubpathStartSegment(s)},replaceSegment:function(e,t){var r=this.segments,n=r.length;if(n===0)throw new Error("Path has no segments.");if(e<0&&(e=n+e),e>=n||e<0)throw new Error("Index out of range.");var i,s=r[e],o=s.previousSegment,a=s.nextSegment,u=s.isSubpathStart;if(Array.isArray(t)){if(t=t.reduce(function(v,y){return v.concat(y)},[]),!t[0].isSegment)throw new Error("Segments required.");r.splice(e,1);for(var c=t.length,f=0;f<c;f++){var h=t[f];i=this.prepareSegment(h,o,a),r.splice(e+f,0,i),o=i,u&&i.isSubpathStart&&(u=!1)}}else{if(!t||!t.isSegment)throw new Error("Segment required.");i=this.prepareSegment(t,o,a),r.splice(e,1,i),u&&i.isSubpathStart&&(u=!1)}u&&a&&this.updateSubpathStartSegment(a)},round:function(e){for(var t=this.segments,r=t.length,n=0;n<r;n++){var i=t[n];i.round(e)}return this},scale:function(e,t,r){for(var n=this.segments,i=n.length,s=0;s<i;s++){var o=n[s];o.scale(e,t,r)}return this},segmentAt:function(e,t){var r=this.segmentIndexAt(e,t);return r?this.getSegment(r):null},segmentAtLength:function(e,t){var r=this.segmentIndexAtLength(e,t);return r?this.getSegment(r):null},segmentIndexAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.segmentIndexAtLength(u,o)},segmentIndexAtLength:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;var i=!0;e<0&&(i=!1,e=-e),t=t||{};for(var s=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,a=null,u=0,c=0;c<n;c++){var f=i?c:n-1-c,h=r[f],v=o[f],y=h.length({precision:s,subdivisions:v});if(h.isVisible){if(e<=u+y)return f;a=f}u+=y}return a},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.tangentAtLength(u,o)},tangentAtLength:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;var i=!0;e<0&&(i=!1,e=-e),t=t||{};for(var s=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,a,u=0,c=0;c<n;c++){var f=i?c:n-1-c,h=r[f],v=o[f],y=h.length({precision:s,subdivisions:v});if(h.isDifferentiable()){if(e<=u+y)return h.tangentAtLength((i?1:-1)*(e-u),{precision:s,subdivisions:v});a=h}u+=y}if(a){var m=i?1:0;return a.tangentAtT(m)}return null},tangentAtT:function(e){var t=this.segments,r=t.length;if(r===0)return null;var n=e.segmentIndex;if(n<0)return t[0].tangentAtT(0);if(n>=r)return t[r-1].tangentAtT(1);var i=e.value;return i<0?i=0:i>1&&(i=1),t[n].tangentAtT(i)},toPoints:function(e){var t=this.segments,r=t.length;if(r===0)return null;e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,i=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,s=[],o=[],a=0;a<r;a++){var u=t[a];if(u.isVisible){var c=i[a];if(c.length>0){var f=c.map(function(h){return h.start});Array.prototype.push.apply(o,f)}else o.push(u.start)}else o.length>0&&(o.push(t[a-1].end),s.push(o),o=[])}return o.length>0&&(o.push(this.end),s.push(o)),s},toPolylines:function(e){var t=[],r=this.toPoints(e);if(!r)return null;for(var n=0,i=r.length;n<i;n++)t.push(new dn(r[n]));return t},toString:function(){for(var e=this.segments,t=e.length,r="",n=0;n<t;n++){var i=e[n];r+=i.serialize()+" "}return r.trim()},translate:function(e,t){for(var r=this.segments,n=r.length,i=0;i<n;i++){var s=r[i];s.translate(e,t)}return this},updateSubpathStartSegment:function(e){for(var t=e.previousSegment;e&&!e.isSubpathStart;)t?e.subpathStartSegment=t.subpathStartSegment:e.subpathStartSegment=null,t=e,e=e.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,Nt.createSegment("M",0,0)),this}};Object.defineProperty(Nt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r=0;r<t;r++){var n=e[r];if(n.isVisible)return n.start}return e[t-1].end}});Object.defineProperty(Nt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r=t-1;r>=0;r--){var n=e[r];if(n.isVisible)return n.end}return e[t-1].end}});function ua(e,t){return t.unshift(null),new(Function.prototype.bind.apply(e,t))}var Ac={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(e){if(e<=0)return 0;var t=this.length();return e>=1?t:t*e},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(Ac,"end",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(Ac,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}});Object.defineProperty(Ac,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var Ei=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof Ei))return ua(Ei,e);if(t===0)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var n;if(e[0]instanceof bt){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+t+" lines provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===2)return this.end=new pe(+e[0],+e[1]),this;if(t<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+t+" coordinates provided).");var i;for(n=[],r=0;r<t;r+=2)i=e.slice(r,r+2),n.push(ua(Ei,i));return n}else{if(t===1)return this.end=new pe(e[0]),this;var s;for(n=[],r=0;r<t;r+=1)s=e[r],n.push(new Ei(s));return n}},tG={clone:function(){return new Ei(this.end)},divideAt:function(e){var t=new bt(this.start,this.end),r=t.divideAt(e);return[new Ei(r[0]),new Ei(r[1])]},divideAtLength:function(e){var t=new bt(this.start,this.end),r=t.divideAtLength(e);return[new Ei(r[0]),new Ei(r[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return this.previousSegment?!this.start.equals(this.end):!1},round:function(e){return this.end.round(e),this},scale:function(e,t,r){return this.end.scale(e,t,r),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty(tG,"type",{configurable:!0,enumerable:!0,value:"L"});Ei.prototype=kh(Ac,bt.prototype,tG);var Os=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof Os))return ua(Os,e);if(t===0)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var n;if(e[0]instanceof Kr){if(t===1)return this.controlPoint1=e[0].controlPoint1.clone(),this.controlPoint2=e[0].controlPoint2.clone(),this.end=e[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" curves provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===6)return this.controlPoint1=new pe(+e[0],+e[1]),this.controlPoint2=new pe(+e[2],+e[3]),this.end=new pe(+e[4],+e[5]),this;if(t<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" coordinates provided).");var i;for(n=[],r=0;r<t;r+=6)i=e.slice(r,r+6),n.push(ua(Os,i));return n}else{if(t===3)return this.controlPoint1=new pe(e[0]),this.controlPoint2=new pe(e[1]),this.end=new pe(e[2]),this;if(t<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" points provided).");var s;for(n=[],r=0;r<t;r+=3)s=e.slice(r,r+3),n.push(ua(Os,s));return n}},rG={clone:function(){return new Os(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(e,t){var r=new Kr(this.start,this.controlPoint1,this.controlPoint2,this.end),n=r.divideAt(e,t);return[new Os(n[0]),new Os(n[1])]},divideAtLength:function(e,t){var r=new Kr(this.start,this.controlPoint1,this.controlPoint2,this.end),n=r.divideAtLength(e,t);return[new Os(n[0]),new Os(n[1])]},divideAtT:function(e){var t=new Kr(this.start,this.controlPoint1,this.controlPoint2,this.end),r=t.divideAtT(e);return[new Os(r[0]),new Os(r[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var e=this.start,t=this.controlPoint1,r=this.controlPoint2,n=this.end;return!(e.equals(t)&&t.equals(r)&&r.equals(n))},round:function(e){return this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,r){return this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this},serialize:function(){var e=this.controlPoint1,t=this.controlPoint2,r=this.end;return this.type+" "+e.x+" "+e.y+" "+t.x+" "+t.y+" "+r.x+" "+r.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}};Object.defineProperty(rG,"type",{configurable:!0,enumerable:!0,value:"C"});Os.prototype=kh(Ac,Kr.prototype,rG);var Zu=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof Zu))return ua(Zu,e);if(t===0)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var n;if(e[0]instanceof bt){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" lines provided).")}else if(e[0]instanceof Kr){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" curves provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===2)return this.end=new pe(+e[0],+e[1]),this;if(t<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" coordinates provided).");var i;for(n=[],r=0;r<t;r+=2)i=e.slice(r,r+2),r===0?n.push(ua(Zu,i)):n.push(ua(Ei,i));return n}else{if(t===1)return this.end=new pe(e[0]),this;var s;for(n=[],r=0;r<t;r+=1)s=e[r],r===0?n.push(new Zu(s)):n.push(new Ei(s));return n}},N2={bbox:function(){return null},clone:function(){return new Zu(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(e){return this.end.equals(e.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(e){return this.end.round(e),this},scale:function(e,t,r){return this.end.scale(e,t,r),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty(N2,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}});Object.defineProperty(N2,"type",{configurable:!0,enumerable:!0,value:"M"});Zu.prototype=kh(Ac,N2);var bl=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof bl))return ua(bl,e);if(t>0)throw new Error("Closepath constructor expects no arguments.");return this},q2={clone:function(){return new bl},divideAt:function(e){var t=new bt(this.start,this.end),r=t.divideAt(e);return[r[1].isDifferentiable()?new Ei(r[0]):this.clone(),new Ei(r[1])]},divideAtLength:function(e){var t=new bt(this.start,this.end),r=t.divideAtLength(e);return[r[1].isDifferentiable()?new Ei(r[0]):this.clone(),new Ei(r[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(q2,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}});Object.defineProperty(q2,"type",{configurable:!0,enumerable:!0,value:"Z"});bl.prototype=kh(Ac,bt.prototype,q2);var pce=Nt.segmentTypes={L:Ei,C:Os,M:Zu,Z:bl,z:bl};Nt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(pce).join("")+",.]*$");Nt.isDataSupported=function(e){return typeof e!="string"?!1:this.regexSupportedData.test(e)};const gce={curveThroughPoints:function(e){return console.warn("deprecated"),new Nt(Kr.throughPoints(e)).serialize()},getCurveControlPoints:function(e){console.warn("deprecated");var t=[],r=[],n=e.length-1,i;if(n==1)return t[0]=new pe((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),r[0]=new pe(2*t[0].x-e[0].x,2*t[0].y-e[0].y),[t,r];var s=[];for(i=1;i<n-1;i++)s[i]=4*e[i].x+2*e[i+1].x;s[0]=e[0].x+2*e[1].x,s[n-1]=(8*e[n-1].x+e[n].x)/2;var o=this.getFirstControlPoints(s);for(i=1;i<n-1;++i)s[i]=4*e[i].y+2*e[i+1].y;s[0]=e[0].y+2*e[1].y,s[n-1]=(8*e[n-1].y+e[n].y)/2;var a=this.getFirstControlPoints(s);for(i=0;i<n;i++)t.push(new pe(o[i],a[i])),i<n-1?r.push(new pe(2*e[i+1].x-o[i+1],2*e[i+1].y-a[i+1])):r.push(new pe((e[n].x+o[n-1])/2,(e[n].y+a[n-1])/2));return[t,r]},getCurveDivider:function(e,t,r,n){console.warn("deprecated");var i=new Kr(e,t,r,n);return function(o){var a=i.divide(o);return[{p0:a[0].start,p1:a[0].controlPoint1,p2:a[0].controlPoint2,p3:a[0].end},{p0:a[1].start,p1:a[1].controlPoint1,p2:a[1].controlPoint2,p3:a[1].end}]}},getFirstControlPoints:function(e){console.warn("deprecated");var t=e.length,r=[],n=[],i=2;r[0]=e[0]/i;for(var s=1;s<t;s++)n[s]=1/i,i=(s<t-1?4:3.5)-n[s],r[s]=(e[s]-r[s-1])/i;for(s=1;s<t;s++)r[t-s-1]-=n[t-s]*r[t-s];return r},getInversionSolver:function(e,t,r,n){console.warn("deprecated");var i=new Kr(e,t,r,n);return function(o){return i.closestPointT(o)}}},ms=function(e){if(!(this instanceof ms))return new ms(e);if(typeof e=="string")return new ms.parse(e);this.points=Array.isArray(e)?e.map(pe):[]};ms.parse=function(e){return new ms(J7(e))};ms.fromRect=function(e){return new ms([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft()])};ms.prototype=kh(dn.prototype,{type:dr.Polygon,clone:function(){return new ms(Q7(this.points))},convexHull:function(){return new ms(eG(this.points))},lengthPoints:function(){const{start:e,end:t,points:r}=this;return r.length<=1||e.equals(t)?r:[...r,e.clone()]}});function nG(e,t,r,n){switch(e.type){case dr.Line:{switch(t.type){case dr.Line:return Ju(e,t)}break}case dr.Ellipse:{switch(t.type){case dr.Line:return D2(e,t);case dr.Ellipse:return iG(e,t)}break}case dr.Rect:{switch(t.type){case dr.Line:return sG(e,t);case dr.Ellipse:return oG(e,t);case dr.Rect:return F2(e,t)}break}case dr.Polyline:{switch(t.type){case dr.Line:return Dg(e,t);case dr.Ellipse:return B2(e,t);case dr.Rect:return aG(e,t);case dr.Polyline:return uG(e,t)}break}case dr.Polygon:{switch(t.type){case dr.Line:return z2(e,t);case dr.Ellipse:return Fg(e,t);case dr.Rect:return cG(e,t);case dr.Polyline:return lG(e,t);case dr.Polygon:return fG(e,t)}break}case dr.Path:{switch(t.type){case dr.Line:return hG(e,t,r);case dr.Ellipse:return dG(e,t,r);case dr.Rect:return pG(e,t,r);case dr.Polyline:return V2(e,t,r);case dr.Polygon:return Bg(e,t,r);case dr.Path:return gG(e,t,r,n)}break}}switch(t.type){case dr.Ellipse:case dr.Rect:case dr.Polyline:case dr.Polygon:case dr.Path:return nG(t,e,n,r);default:throw Error(`The intersection for ${e} and ${t} could not be found.`)}}function Ju(e,t){const r=e.start.x,n=e.start.y,i=e.end.x,s=e.end.y,o=t.start.x,a=t.start.y,u=t.end.x,c=t.end.y,f=i-r,h=s-n,v=u-o,y=c-a,m=r-o,_=n-a,w=f*y-v*h,S=(f*_-h*m)/w,E=(v*_-y*m)/w;return S>=0&&S<=1&&E>=0&&E<=1}function D2(e,t){const r=e.a,n=e.b,i=e.x,s=e.y,o=t.start.x-i,a=t.end.x-i,u=t.start.y-s,c=t.end.y-s,f=r*r,h=n*n,v=a-o,y=c-u,m=v*v/f+y*y/h,_=2*o*v/f+2*u*y/h,w=o*o/f+u*u/h-1,S=_*_-4*m*w;if(S===0){const E=-_/2/m;return E>=0&&E<=1}else if(S>0){const E=Math.sqrt(S),A=(-_+E)/2/m,T=(-_-E)/2/m;return A>=0&&A<=1||T>=0&&T<=1}return!1}function iG(e,t){return vce(e,0,t,0)}function sG(e,t){const{start:r,end:n}=t,{x:i,y:s,width:o,height:a}=e;return r.x>i+o&&n.x>i+o||r.x<i&&n.x<i||r.y>s+a&&n.y>s+a||r.y<s&&n.y<s?!1:e.containsPoint(t.start)||e.containsPoint(t.end)?!0:Ju(e.topLine(),t)||Ju(e.rightLine(),t)||Ju(e.bottomLine(),t)||Ju(e.leftLine(),t)}function oG(e,t){return F2(e,vt.fromEllipse(t))?Fg(ms.fromRect(e),t):!1}function F2(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function Dg(e,t){return vG(e,t,{interior:!1})}function B2(e,t){return mG(e,t,{interior:!1})}function aG(e,t){return yG(e,t,{interior:!1})}function uG(e,t){return zg(e,t,{interior:!1})}function z2(e,t){return vG(e,t,{interior:!0})}function Fg(e,t){return mG(e,t,{interior:!0})}function cG(e,t){return yG(e,t,{interior:!0})}function lG(e,t){return zg(e,t,{interior:!0})}function fG(e,t){return G2(e,t,{interior:!0})}function hG(e,t,r){return e.getSubpaths().some(n=>{const[i]=n.toPolylines(r),{type:s}=n.getSegment(-1);return s==="Z"?z2(i,t):Dg(i,t)})}function dG(e,t,r){return e.getSubpaths().some(n=>{const[i]=n.toPolylines(r),{type:s}=n.getSegment(-1);return s==="Z"?Fg(i,t):B2(i,t)})}function pG(e,t,r){return Bg(e,ms.fromRect(t),r)}function V2(e,t,r){return _G(e,t,r,{interior:!1})}function Bg(e,t,r){return _G(e,t,r,{interior:!0})}function gG(e,t,r,n){return e.getSubpaths().some(i=>{const[s]=i.toPolylines(r),{type:o}=i.getSegment(-1);return o==="Z"?Bg(t,s,n):V2(t,s,n)})}function vG(e,t,r={}){const{interior:n=!1}=r;let i;if(n){if(e.containsPoint(t.start))return!0;const{start:a,end:u,points:c}=e;i=u.equals(a)?c:[...c,a]}else i=e.points;const{length:s}=i,o=new bt;for(let a=0;a<s-1;a++)if(o.start=i[a],o.end=i[a+1],Ju(t,o))return!0;return!1}function mG(e,t,r={}){const{start:n,end:i,points:s}=e;if(t.containsPoint(n))return!0;let o;const{interior:a=!1}=r;if(a){if(e.containsPoint(t.center()))return!0;o=i.equals(n)?s:[...s,n]}else o=s;const{length:u}=o,c=new bt;for(let f=0;f<u-1;f++)if(c.start=o[f],c.end=o[f+1],D2(t,c))return!0;return!1}function yG(e,t,r){const n=ms.fromRect(t);return G2(e,n,r)}function _G(e,t,r,n){return e.getSubpaths().some(i=>{const[s]=i.toPolylines(r),{type:o}=i.getSegment(-1);return o==="Z"?G2(t,s,n):zg(t,s,n)})}function zg(e,t,r={}){const{interior:n=!1}=r;let i;if(n){const{start:u}=t;if(e.containsPoint(u))return!0;i=e.clone().close()}else i=e;const s=t.points,{length:o}=s,a=new bt;for(let u=0;u<o-1;u++)if(a.start=s[u],a.end=s[u+1],Dg(i,a))return!0;return!1}function G2(e,t,r){return t.containsPoint(e.start)||zg(e,t.clone().close(),r)}function vce(e,t,r,n){const{cos:i,sin:s}=Math,o=s(t),a=i(t),u=s(n),c=i(n),f=o*o,h=a*a,v=o*a,y=u*u,m=c*c,_=u*c,w=e.a*e.a,S=e.b*e.b,E=r.a*r.a,A=r.b*r.b,T=w*f+S*h,I=E*y+A*m,q=w*h+S*f,p=E*m+A*y;let C=2*(S-w)*v,O=2*(A-E)*_,N=-2*T*e.x-C*e.y,V=-2*I*r.x-O*r.y,W=-C*e.x-2*q*e.y,G=-O*r.x-2*p*r.y;const ee=T*e.x*e.x+q*e.y*e.y+C*e.x*e.y-w*S,ae=I*r.x*r.x+p*r.y*r.y+O*r.x*r.y-E*A;C=C/2,O=O/2,N=N/2,V=V/2,W=W/2,G=G/2;const K=au([[T,C,N],[C,q,W],[N,W,ee]]),U=au([[I,O,V],[O,p,G],[V,G,ae]]),j=.33333333*(au([[I,C,N],[O,q,W],[V,W,ee]])+au([[T,O,N],[C,p,W],[N,G,ee]])+au([[T,C,V],[C,q,G],[N,W,ae]])),J=.33333333*(au([[T,O,V],[C,p,G],[N,G,ae]])+au([[I,C,V],[O,q,G],[V,W,ae]])+au([[I,O,N],[O,p,W],[V,G,ee]])),de=Jd([[K,j],[j,J]]),ce=Jd([[K,J],[j,U]]),Te=Jd([[j,J],[J,U]]);return!(Jd([[2*de,ce],[ce,2*Te]])>0&&(J>0||j>0))}function Jd(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}function au(e){return e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0]}const mce=Object.freeze(Object.defineProperty({__proto__:null,ellipseWithEllipse:iG,ellipseWithLine:D2,exists:nG,lineWithLine:Ju,pathWithEllipse:dG,pathWithLine:hG,pathWithPath:gG,pathWithPolygon:Bg,pathWithPolyline:V2,pathWithRect:pG,polygonWithEllipse:Fg,polygonWithLine:z2,polygonWithPolygon:fG,polygonWithPolyline:lG,polygonWithRect:cG,polylineWithEllipse:B2,polylineWithLine:Dg,polylineWithPolyline:uG,polylineWithRect:aG,rectWithEllipse:oG,rectWithLine:sG,rectWithRect:F2},Symbol.toStringTag,{value:"Module"})),yce=mce,_ce=Object.freeze(Object.defineProperty({__proto__:null,Curve:Kr,Ellipse:Wi,Line:bt,Path:Nt,Point:pe,Polygon:ms,Polyline:dn,Rect:vt,bezier:gce,ellipse:uce,intersection:yce,line:tc,normalizeAngle:Oo,point:Op,random:YS,rect:hce,scale:nce,snapToGrid:oc,toDeg:qg,toRad:vs,types:dr},Symbol.toStringTag,{value:"Module"}));var xS={},$2="1.13.7",Zz=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},Vg=Array.prototype,U2=Object.prototype,Jz=typeof Symbol<"u"?Symbol.prototype:null,bce=Vg.push,Lh=Vg.slice,ih=U2.toString,wce=U2.hasOwnProperty,bG=typeof ArrayBuffer<"u",xce=typeof DataView<"u",Sce=Array.isArray,Qz=Object.keys,e5=Object.create,t5=bG&&ArrayBuffer.isView,Ece=isNaN,Ace=isFinite,wG=!{toString:null}.propertyIsEnumerable("toString"),r5=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Tce=Math.pow(2,53)-1;function Zi(e,t){return t=t==null?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var s=Array(t+1);for(i=0;i<t;i++)s[i]=arguments[i];return s[t]=n,e.apply(this,s)}}function Ru(e){var t=typeof e;return t==="function"||t==="object"&&!!e}function xG(e){return e===null}function j2(e){return e===void 0}function H2(e){return e===!0||e===!1||ih.call(e)==="[object Boolean]"}function SG(e){return!!(e&&e.nodeType===1)}function Li(e){var t="[object "+e+"]";return function(r){return ih.call(r)===t}}const Gg=Li("String"),W2=Li("Number"),EG=Li("Date"),AG=Li("RegExp"),TG=Li("Error"),X2=Li("Symbol"),Y2=Li("ArrayBuffer");var PG=Li("Function"),Pce=Zz.document&&Zz.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof Pce!="function"&&(PG=function(e){return typeof e=="function"||!1});const ki=PG,CG=Li("Object");var RG=xce&&(!/\[native code\]/.test(String(DataView))||CG(new DataView(new ArrayBuffer(8)))),K2=typeof Map<"u"&&CG(new Map),Cce=Li("DataView");function Rce(e){return e!=null&&ki(e.getInt8)&&Y2(e.buffer)}const sh=RG?Rce:Cce,Iu=Sce||Li("Array");function Ou(e,t){return e!=null&&wce.call(e,t)}var JS=Li("Arguments");(function(){JS(arguments)||(JS=function(e){return Ou(e,"callee")})})();const $g=JS;function IG(e){return!X2(e)&&Ace(e)&&!isNaN(parseFloat(e))}function Z2(e){return W2(e)&&Ece(e)}function J2(e){return function(){return e}}function OG(e){return function(t){var r=e(t);return typeof r=="number"&&r>=0&&r<=Tce}}function MG(e){return function(t){return t==null?void 0:t[e]}}const Mp=MG("byteLength"),Ice=OG(Mp);var Oce=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function Mce(e){return t5?t5(e)&&!sh(e):Ice(e)&&Oce.test(ih.call(e))}const Q2=bG?Mce:J2(!1),bs=MG("length");function kce(e){for(var t={},r=e.length,n=0;n<r;++n)t[e[n]]=!0;return{contains:function(i){return t[i]===!0},push:function(i){return t[i]=!0,e.push(i)}}}function kG(e,t){t=kce(t);var r=r5.length,n=e.constructor,i=ki(n)&&n.prototype||U2,s="constructor";for(Ou(e,s)&&!t.contains(s)&&t.push(s);r--;)s=r5[r],s in e&&e[s]!==i[s]&&!t.contains(s)&&t.push(s)}function fi(e){if(!Ru(e))return[];if(Qz)return Qz(e);var t=[];for(var r in e)Ou(e,r)&&t.push(r);return wG&&kG(e,t),t}function LG(e){if(e==null)return!0;var t=bs(e);return typeof t=="number"&&(Iu(e)||Gg(e)||$g(e))?t===0:bs(fi(e))===0}function eA(e,t){var r=fi(t),n=r.length;if(e==null)return!n;for(var i=Object(e),s=0;s<n;s++){var o=r[s];if(t[o]!==i[o]||!(o in i))return!1}return!0}function sn(e){if(e instanceof sn)return e;if(!(this instanceof sn))return new sn(e);this._wrapped=e}sn.VERSION=$2;sn.prototype.value=function(){return this._wrapped};sn.prototype.valueOf=sn.prototype.toJSON=sn.prototype.value;sn.prototype.toString=function(){return String(this._wrapped)};function n5(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Mp(e))}var i5="[object DataView]";function QS(e,t,r,n){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var i=typeof e;return i!=="function"&&i!=="object"&&typeof t!="object"?!1:NG(e,t,r,n)}function NG(e,t,r,n){e instanceof sn&&(e=e._wrapped),t instanceof sn&&(t=t._wrapped);var i=ih.call(e);if(i!==ih.call(t))return!1;if(RG&&i=="[object Object]"&&sh(e)){if(!sh(t))return!1;i=i5}switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return Jz.valueOf.call(e)===Jz.valueOf.call(t);case"[object ArrayBuffer]":case i5:return NG(n5(e),n5(t),r,n)}var s=i==="[object Array]";if(!s&&Q2(e)){var o=Mp(e);if(o!==Mp(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;s=!0}if(!s){if(typeof e!="object"||typeof t!="object")return!1;var a=e.constructor,u=t.constructor;if(a!==u&&!(ki(a)&&a instanceof a&&ki(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var c=r.length;c--;)if(r[c]===e)return n[c]===t;if(r.push(e),n.push(t),s){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!QS(e[c],t[c],r,n))return!1}else{var f=fi(e),h;if(c=f.length,fi(t).length!==c)return!1;for(;c--;)if(h=f[c],!(Ou(t,h)&&QS(e[h],t[h],r,n)))return!1}return r.pop(),n.pop(),!0}function qG(e,t){return QS(e,t)}function Ul(e){if(!Ru(e))return[];var t=[];for(var r in e)t.push(r);return wG&&kG(e,t),t}function tA(e){var t=bs(e);return function(r){if(r==null)return!1;var n=Ul(r);if(bs(n))return!1;for(var i=0;i<t;i++)if(!ki(r[e[i]]))return!1;return e!==BG||!ki(r[rA])}}var rA="forEach",DG="has",nA=["clear","delete"],FG=["get",DG,"set"],Lce=nA.concat(rA,FG),BG=nA.concat(FG),Nce=["add"].concat(nA,rA,DG);const zG=K2?tA(Lce):Li("Map"),VG=K2?tA(BG):Li("WeakMap"),GG=K2?tA(Nce):Li("Set"),$G=Li("WeakSet");function Tc(e){for(var t=fi(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n}function UG(e){for(var t=fi(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n}function iA(e){for(var t={},r=fi(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t}function oh(e){var t=[];for(var r in e)ki(e[r])&&t.push(r);return t.sort()}function sA(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||r==null)return r;for(var i=1;i<n;i++)for(var s=arguments[i],o=e(s),a=o.length,u=0;u<a;u++){var c=o[u];(!t||r[c]===void 0)&&(r[c]=s[c])}return r}}const oA=sA(Ul),wl=sA(fi),aA=sA(Ul,!0);function qce(){return function(){}}function jG(e){if(!Ru(e))return{};if(e5)return e5(e);var t=qce();t.prototype=e;var r=new t;return t.prototype=null,r}function HG(e,t){var r=jG(e);return t&&wl(r,t),r}function WG(e){return Ru(e)?Iu(e)?e.slice():oA({},e):e}function XG(e,t){return t(e),e}function uA(e){return Iu(e)?e:[e]}sn.toPath=uA;function Nh(e){return sn.toPath(e)}function cA(e,t){for(var r=t.length,n=0;n<r;n++){if(e==null)return;e=e[t[n]]}return r?e:void 0}function lA(e,t,r){var n=cA(e,Nh(t));return j2(n)?r:n}function YG(e,t){t=Nh(t);for(var r=t.length,n=0;n<r;n++){var i=t[n];if(!Ou(e,i))return!1;e=e[i]}return!!r}function Ug(e){return e}function ac(e){return e=wl({},e),function(t){return eA(t,e)}}function jg(e){return e=Nh(e),function(t){return cA(t,e)}}function qh(e,t,r){if(t===void 0)return e;switch(r??3){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,s){return e.call(t,n,i,s)};case 4:return function(n,i,s,o){return e.call(t,n,i,s,o)}}return function(){return e.apply(t,arguments)}}function KG(e,t,r){return e==null?Ug:ki(e)?qh(e,t,r):Ru(e)&&!Iu(e)?ac(e):jg(e)}function Hg(e,t){return KG(e,t,1/0)}sn.iteratee=Hg;function ws(e,t,r){return sn.iteratee!==Hg?sn.iteratee(e,t):KG(e,t,r)}function ZG(e,t,r){t=ws(t,r);for(var n=fi(e),i=n.length,s={},o=0;o<i;o++){var a=n[o];s[a]=t(e[a],a,e)}return s}function fA(){}function JG(e){return e==null?fA:function(t){return lA(e,t)}}function QG(e,t,r){var n=Array(Math.max(0,e));t=qh(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n}function kp(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}const xl=Date.now||function(){return new Date().getTime()};function e$(e){var t=function(s){return e[s]},r="(?:"+fi(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(s){return s=s==null?"":""+s,n.test(s)?s.replace(i,t):s}}const t$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r$=e$(t$),Dce=iA(t$),n$=e$(Dce),i$=sn.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var SS=/(.)^/,Fce={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Bce=/\\|'|\r|\n|\u2028|\u2029/g;function zce(e){return"\\"+Fce[e]}var Vce=/^\s*(\w|\$)+\s*$/;function s$(e,t,r){!t&&r&&(t=r),t=aA({},t,sn.templateSettings);var n=RegExp([(t.escape||SS).source,(t.interpolate||SS).source,(t.evaluate||SS).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(n,function(c,f,h,v,y){return s+=e.slice(i,y).replace(Bce,zce),i=y+c.length,f?s+=`'+
((__t=(`+f+`))==null?'':_.escape(__t))+
'`:h?s+=`'+
((__t=(`+h+`))==null?'':__t)+
'`:v&&(s+=`';
`+v+`
__p+='`),c}),s+=`';
`;var o=t.variable;if(o){if(!Vce.test(o))throw new Error("variable is not a bare identifier: "+o)}else s=`with(obj||{}){
`+s+`}
`,o="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var a;try{a=new Function(o,"_",s)}catch(c){throw c.source=s,c}var u=function(c){return a.call(this,c,sn)};return u.source="function("+o+`){
`+s+"}",u}function o$(e,t,r){t=Nh(t);var n=t.length;if(!n)return ki(r)?r.call(e):r;for(var i=0;i<n;i++){var s=e==null?void 0:e[t[i]];s===void 0&&(s=r,i=n),e=ki(s)?s.call(e):s}return e}var Gce=0;function a$(e){var t=++Gce+"";return e?e+t:t}function u$(e){var t=sn(e);return t._chain=!0,t}function c$(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var s=jG(e.prototype),o=e.apply(s,i);return Ru(o)?o:s}var Pc=Zi(function(e,t){var r=Pc.placeholder,n=function(){for(var i=0,s=t.length,o=Array(s),a=0;a<s;a++)o[a]=t[a]===r?arguments[i++]:t[a];for(;i<arguments.length;)o.push(arguments[i++]);return c$(e,n,this,this,o)};return n});Pc.placeholder=sn;const hA=Zi(function(e,t,r){if(!ki(e))throw new TypeError("Bind must be called on a function");var n=Zi(function(i){return c$(e,n,t,this,r.concat(i))});return n}),Fs=OG(bs);function Cc(e,t,r,n){if(n=n||[],!t&&t!==0)t=1/0;else if(t<=0)return n.concat(e);for(var i=n.length,s=0,o=bs(e);s<o;s++){var a=e[s];if(Fs(a)&&(Iu(a)||$g(a)))if(t>1)Cc(a,t-1,r,n),i=n.length;else for(var u=0,c=a.length;u<c;)n[i++]=a[u++];else r||(n[i++]=a)}return n}const l$=Zi(function(e,t){t=Cc(t,!1,!1);var r=t.length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=hA(e[n],e)}return e});function f$(e,t){var r=function(n){var i=r.cache,s=""+(t?t.apply(this,arguments):n);return Ou(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return r.cache={},r}const dA=Zi(function(e,t,r){return setTimeout(function(){return e.apply(null,r)},t)}),h$=Pc(dA,sn,1);function d$(e,t,r){var n,i,s,o,a=0;r||(r={});var u=function(){a=r.leading===!1?0:xl(),n=null,o=e.apply(i,s),n||(i=s=null)},c=function(){var f=xl();!a&&r.leading===!1&&(a=f);var h=t-(f-a);return i=this,s=arguments,h<=0||h>t?(n&&(clearTimeout(n),n=null),a=f,o=e.apply(i,s),n||(i=s=null)):!n&&r.trailing!==!1&&(n=setTimeout(u,h)),o};return c.cancel=function(){clearTimeout(n),a=0,n=i=s=null},c}function p$(e,t,r){var n,i,s,o,a,u=function(){var f=xl()-i;t>f?n=setTimeout(u,t-f):(n=null,r||(o=e.apply(a,s)),n||(s=a=null))},c=Zi(function(f){return a=this,s=f,i=xl(),n||(n=setTimeout(u,t),r&&(o=e.apply(a,s))),o});return c.cancel=function(){clearTimeout(n),n=s=a=null},c}function g$(e,t){return Pc(t,e)}function Wg(e){return function(){return!e.apply(this,arguments)}}function v$(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}}function m$(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function pA(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}}const y$=Pc(pA,2);function gA(e,t,r){t=ws(t,r);for(var n=fi(e),i,s=0,o=n.length;s<o;s++)if(i=n[s],t(e[i],i,e))return i}function _$(e){return function(t,r,n){r=ws(r,n);for(var i=bs(t),s=e>0?0:i-1;s>=0&&s<i;s+=e)if(r(t[s],s,t))return s;return-1}}const Xg=_$(1),vA=_$(-1);function mA(e,t,r,n){r=ws(r,n,1);for(var i=r(t),s=0,o=bs(e);s<o;){var a=Math.floor((s+o)/2);r(e[a])<i?s=a+1:o=a}return s}function b$(e,t,r){return function(n,i,s){var o=0,a=bs(n);if(typeof s=="number")e>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(r&&s&&a)return s=r(n,i),n[s]===i?s:-1;if(i!==i)return s=t(Lh.call(n,o,a),Z2),s>=0?s+o:-1;for(s=e>0?o:a-1;s>=0&&s<a;s+=e)if(n[s]===i)return s;return-1}}const yA=b$(1,Xg,mA),w$=b$(-1,vA);function ah(e,t,r){var n=Fs(e)?Xg:gA,i=n(e,t,r);if(i!==void 0&&i!==-1)return e[i]}function x$(e,t){return ah(e,ac(t))}function Mo(e,t,r){t=qh(t,r);var n,i;if(Fs(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var s=fi(e);for(n=0,i=s.length;n<i;n++)t(e[s[n]],s[n],e)}return e}function Ga(e,t,r){t=ws(t,r);for(var n=!Fs(e)&&fi(e),i=(n||e).length,s=Array(i),o=0;o<i;o++){var a=n?n[o]:o;s[o]=t(e[a],a,e)}return s}function S$(e){var t=function(r,n,i,s){var o=!Fs(r)&&fi(r),a=(o||r).length,u=e>0?0:a-1;for(s||(i=r[o?o[u]:u],u+=e);u>=0&&u<a;u+=e){var c=o?o[u]:u;i=n(i,r[c],c,r)}return i};return function(r,n,i,s){var o=arguments.length>=3;return t(r,qh(n,s,4),i,o)}}const cl=S$(1),Lp=S$(-1);function xu(e,t,r){var n=[];return t=ws(t,r),Mo(e,function(i,s,o){t(i,s,o)&&n.push(i)}),n}function E$(e,t,r){return xu(e,Wg(ws(t)),r)}function Np(e,t,r){t=ws(t,r);for(var n=!Fs(e)&&fi(e),i=(n||e).length,s=0;s<i;s++){var o=n?n[s]:s;if(!t(e[o],o,e))return!1}return!0}function qp(e,t,r){t=ws(t,r);for(var n=!Fs(e)&&fi(e),i=(n||e).length,s=0;s<i;s++){var o=n?n[s]:s;if(t(e[o],o,e))return!0}return!1}function so(e,t,r,n){return Fs(e)||(e=Tc(e)),(typeof r!="number"||n)&&(r=0),yA(e,t,r)>=0}const A$=Zi(function(e,t,r){var n,i;return ki(t)?i=t:(t=Nh(t),n=t.slice(0,-1),t=t[t.length-1]),Ga(e,function(s){var o=i;if(!o){if(n&&n.length&&(s=cA(s,n)),s==null)return;o=s[t]}return o==null?o:o.apply(s,r)})});function Yg(e,t){return Ga(e,jg(t))}function T$(e,t){return xu(e,ac(t))}function _A(e,t,r){var n=-1/0,i=-1/0,s,o;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=Fs(e)?e:Tc(e);for(var a=0,u=e.length;a<u;a++)s=e[a],s!=null&&s>n&&(n=s)}else t=ws(t,r),Mo(e,function(c,f,h){o=t(c,f,h),(o>i||o===-1/0&&n===-1/0)&&(n=c,i=o)});return n}function P$(e,t,r){var n=1/0,i=1/0,s,o;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=Fs(e)?e:Tc(e);for(var a=0,u=e.length;a<u;a++)s=e[a],s!=null&&s<n&&(n=s)}else t=ws(t,r),Mo(e,function(c,f,h){o=t(c,f,h),(o<i||o===1/0&&n===1/0)&&(n=c,i=o)});return n}var $ce=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function bA(e){return e?Iu(e)?Lh.call(e):Gg(e)?e.match($ce):Fs(e)?Ga(e,Ug):Tc(e):[]}function wA(e,t,r){if(t==null||r)return Fs(e)||(e=Tc(e)),e[kp(e.length-1)];var n=bA(e),i=bs(n);t=Math.max(Math.min(t,i),0);for(var s=i-1,o=0;o<t;o++){var a=kp(o,s),u=n[o];n[o]=n[a],n[a]=u}return n.slice(0,t)}function C$(e){return wA(e,1/0)}function R$(e,t,r){var n=0;return t=ws(t,r),Yg(Ga(e,function(i,s,o){return{value:i,index:n++,criteria:t(i,s,o)}}).sort(function(i,s){var o=i.criteria,a=s.criteria;if(o!==a){if(o>a||o===void 0)return 1;if(o<a||a===void 0)return-1}return i.index-s.index}),"value")}function Kg(e,t){return function(r,n,i){var s=t?[[],[]]:{};return n=ws(n,i),Mo(r,function(o,a){var u=n(o,a,r);e(s,o,u)}),s}}const I$=Kg(function(e,t,r){Ou(e,r)?e[r].push(t):e[r]=[t]}),O$=Kg(function(e,t,r){e[r]=t}),M$=Kg(function(e,t,r){Ou(e,r)?e[r]++:e[r]=1}),k$=Kg(function(e,t,r){e[r?0:1].push(t)},!0);function L$(e){return e==null?0:Fs(e)?e.length:fi(e).length}function Uce(e,t,r){return t in r}const xA=Zi(function(e,t){var r={},n=t[0];if(e==null)return r;ki(n)?(t.length>1&&(n=qh(n,t[1])),t=Ul(e)):(n=Uce,t=Cc(t,!1,!1),e=Object(e));for(var i=0,s=t.length;i<s;i++){var o=t[i],a=e[o];n(a,o,e)&&(r[o]=a)}return r}),N$=Zi(function(e,t){var r=t[0],n;return ki(r)?(r=Wg(r),t.length>1&&(n=t[1])):(t=Ga(Cc(t,!1,!1),String),r=function(i,s){return!so(t,s)}),xA(e,r,n)});function SA(e,t,r){return Lh.call(e,0,Math.max(0,e.length-(t==null||r?1:t)))}function ll(e,t,r){return e==null||e.length<1?t==null||r?void 0:[]:t==null||r?e[0]:SA(e,e.length-t)}function rc(e,t,r){return Lh.call(e,t==null||r?1:t)}function q$(e,t,r){return e==null||e.length<1?t==null||r?void 0:[]:t==null||r?e[e.length-1]:rc(e,Math.max(0,e.length-t))}function D$(e){return xu(e,Boolean)}function F$(e,t){return Cc(e,t,!1)}const EA=Zi(function(e,t){return t=Cc(t,!0,!0),xu(e,function(r){return!so(t,r)})}),B$=Zi(function(e,t){return EA(e,t)});function uh(e,t,r,n){H2(t)||(n=r,r=t,t=!1),r!=null&&(r=ws(r,n));for(var i=[],s=[],o=0,a=bs(e);o<a;o++){var u=e[o],c=r?r(u,o,e):u;t&&!r?((!o||s!==c)&&i.push(u),s=c):r?so(s,c)||(s.push(c),i.push(u)):so(i,u)||i.push(u)}return i}const z$=Zi(function(e){return uh(Cc(e,!0,!0))});function V$(e){for(var t=[],r=arguments.length,n=0,i=bs(e);n<i;n++){var s=e[n];if(!so(t,s)){var o;for(o=1;o<r&&so(arguments[o],s);o++);o===r&&t.push(s)}}return t}function ch(e){for(var t=e&&_A(e,bs).length||0,r=Array(t),n=0;n<t;n++)r[n]=Yg(e,n);return r}const G$=Zi(ch);function $$(e,t){for(var r={},n=0,i=bs(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r}function U$(e,t,r){t==null&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),s=0;s<n;s++,e+=r)i[s]=e;return i}function j$(e,t){if(t==null||t<1)return[];for(var r=[],n=0,i=e.length;n<i;)r.push(Lh.call(e,n,n+=t));return r}function AA(e,t){return e._chain?sn(t).chain():t}function TA(e){return Mo(oh(e),function(t){var r=sn[t]=e[t];sn.prototype[t]=function(){var n=[this._wrapped];return bce.apply(n,arguments),AA(this,r.apply(sn,n))}}),sn}Mo(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=Vg[e];sn.prototype[e]=function(){var r=this._wrapped;return r!=null&&(t.apply(r,arguments),(e==="shift"||e==="splice")&&r.length===0&&delete r[0]),AA(this,r)}});Mo(["concat","join","slice"],function(e){var t=Vg[e];sn.prototype[e]=function(){var r=this._wrapped;return r!=null&&(r=t.apply(r,arguments)),AA(this,r)}});const jce=Object.freeze(Object.defineProperty({__proto__:null,VERSION:$2,after:m$,all:Np,allKeys:Ul,any:qp,assign:wl,before:pA,bind:hA,bindAll:l$,chain:u$,chunk:j$,clone:WG,collect:Ga,compact:D$,compose:v$,constant:J2,contains:so,countBy:M$,create:HG,debounce:p$,default:sn,defaults:aA,defer:h$,delay:dA,detect:ah,difference:EA,drop:rc,each:Mo,escape:r$,every:Np,extend:oA,extendOwn:wl,filter:xu,find:ah,findIndex:Xg,findKey:gA,findLastIndex:vA,findWhere:x$,first:ll,flatten:F$,foldl:cl,foldr:Lp,forEach:Mo,functions:oh,get:lA,groupBy:I$,has:YG,head:ll,identity:Ug,include:so,includes:so,indexBy:O$,indexOf:yA,initial:SA,inject:cl,intersection:V$,invert:iA,invoke:A$,isArguments:$g,isArray:Iu,isArrayBuffer:Y2,isBoolean:H2,isDataView:sh,isDate:EG,isElement:SG,isEmpty:LG,isEqual:qG,isError:TG,isFinite:IG,isFunction:ki,isMap:zG,isMatch:eA,isNaN:Z2,isNull:xG,isNumber:W2,isObject:Ru,isRegExp:AG,isSet:GG,isString:Gg,isSymbol:X2,isTypedArray:Q2,isUndefined:j2,isWeakMap:VG,isWeakSet:$G,iteratee:Hg,keys:fi,last:q$,lastIndexOf:w$,map:Ga,mapObject:ZG,matcher:ac,matches:ac,max:_A,memoize:f$,methods:oh,min:P$,mixin:TA,negate:Wg,noop:fA,now:xl,object:$$,omit:N$,once:y$,pairs:UG,partial:Pc,partition:k$,pick:xA,pluck:Yg,property:jg,propertyOf:JG,random:kp,range:U$,reduce:cl,reduceRight:Lp,reject:E$,rest:rc,restArguments:Zi,result:o$,sample:wA,select:xu,shuffle:C$,size:L$,some:qp,sortBy:R$,sortedIndex:mA,tail:rc,take:ll,tap:XG,template:s$,templateSettings:i$,throttle:d$,times:QG,toArray:bA,toPath:uA,transpose:ch,unescape:n$,union:z$,uniq:uh,unique:uh,uniqueId:a$,unzip:ch,values:Tc,where:T$,without:B$,wrap:g$,zip:G$},Symbol.toStringTag,{value:"Module"}));var eE=TA(jce);eE._=eE;const Hce=Object.freeze(Object.defineProperty({__proto__:null,VERSION:$2,after:m$,all:Np,allKeys:Ul,any:qp,assign:wl,before:pA,bind:hA,bindAll:l$,chain:u$,chunk:j$,clone:WG,collect:Ga,compact:D$,compose:v$,constant:J2,contains:so,countBy:M$,create:HG,debounce:p$,default:eE,defaults:aA,defer:h$,delay:dA,detect:ah,difference:EA,drop:rc,each:Mo,escape:r$,every:Np,extend:oA,extendOwn:wl,filter:xu,find:ah,findIndex:Xg,findKey:gA,findLastIndex:vA,findWhere:x$,first:ll,flatten:F$,foldl:cl,foldr:Lp,forEach:Mo,functions:oh,get:lA,groupBy:I$,has:YG,head:ll,identity:Ug,include:so,includes:so,indexBy:O$,indexOf:yA,initial:SA,inject:cl,intersection:V$,invert:iA,invoke:A$,isArguments:$g,isArray:Iu,isArrayBuffer:Y2,isBoolean:H2,isDataView:sh,isDate:EG,isElement:SG,isEmpty:LG,isEqual:qG,isError:TG,isFinite:IG,isFunction:ki,isMap:zG,isMatch:eA,isNaN:Z2,isNull:xG,isNumber:W2,isObject:Ru,isRegExp:AG,isSet:GG,isString:Gg,isSymbol:X2,isTypedArray:Q2,isUndefined:j2,isWeakMap:VG,isWeakSet:$G,iteratee:Hg,keys:fi,last:q$,lastIndexOf:w$,map:Ga,mapObject:ZG,matcher:ac,matches:ac,max:_A,memoize:f$,methods:oh,min:P$,mixin:TA,negate:Wg,noop:fA,now:xl,object:$$,omit:N$,once:y$,pairs:UG,partial:Pc,partition:k$,pick:xA,pluck:Yg,property:jg,propertyOf:JG,random:kp,range:U$,reduce:cl,reduceRight:Lp,reject:E$,rest:rc,restArguments:Zi,result:o$,sample:wA,select:xu,shuffle:C$,size:L$,some:qp,sortBy:R$,sortedIndex:mA,tail:rc,take:ll,tap:XG,template:s$,templateSettings:i$,throttle:d$,times:QG,toArray:bA,toPath:uA,transpose:ch,unescape:n$,union:z$,uniq:uh,unique:uh,uniqueId:a$,unzip:ch,values:Tc,where:T$,without:B$,wrap:g$,zip:G$},Symbol.toStringTag,{value:"Module"})),Wce=jte(Hce);var gp={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var Xce=gp.exports,s5;function H$(){return s5||(s5=1,function(e){(function(t,r){e.exports=t.document?r(t,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return r(n)}})(typeof window<"u"?window:Xce,function(t,r){var n=[],i=Object.getPrototypeOf,s=n.slice,o=n.flat?function(g){return n.flat.call(g)}:function(g){return n.concat.apply([],g)},a=n.push,u=n.indexOf,c={},f=c.toString,h=c.hasOwnProperty,v=h.toString,y=v.call(Object),m={},_=function(x){return typeof x=="function"&&typeof x.nodeType!="number"&&typeof x.item!="function"},w=function(x){return x!=null&&x===x.window},S=t.document,E={type:!0,src:!0,nonce:!0,noModule:!0};function A(g,x,P){P=P||S;var k,D,F=P.createElement("script");if(F.text=g,x)for(k in E)D=x[k]||x.getAttribute&&x.getAttribute(k),D&&F.setAttribute(k,D);P.head.appendChild(F).parentNode.removeChild(F)}function T(g){return g==null?g+"":typeof g=="object"||typeof g=="function"?c[f.call(g)]||"object":typeof g}var I="3.7.1",q=/HTML$/i,p=function(g,x){return new p.fn.init(g,x)};p.fn=p.prototype={jquery:I,constructor:p,length:0,toArray:function(){return s.call(this)},get:function(g){return g==null?s.call(this):g<0?this[g+this.length]:this[g]},pushStack:function(g){var x=p.merge(this.constructor(),g);return x.prevObject=this,x},each:function(g){return p.each(this,g)},map:function(g){return this.pushStack(p.map(this,function(x,P){return g.call(x,P,x)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(p.grep(this,function(g,x){return(x+1)%2}))},odd:function(){return this.pushStack(p.grep(this,function(g,x){return x%2}))},eq:function(g){var x=this.length,P=+g+(g<0?x:0);return this.pushStack(P>=0&&P<x?[this[P]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},p.extend=p.fn.extend=function(){var g,x,P,k,D,F,$=arguments[0]||{},he=1,se=arguments.length,Ee=!1;for(typeof $=="boolean"&&(Ee=$,$=arguments[he]||{},he++),typeof $!="object"&&!_($)&&($={}),he===se&&($=this,he--);he<se;he++)if((g=arguments[he])!=null)for(x in g)k=g[x],!(x==="__proto__"||$===k)&&(Ee&&k&&(p.isPlainObject(k)||(D=Array.isArray(k)))?(P=$[x],D&&!Array.isArray(P)?F=[]:!D&&!p.isPlainObject(P)?F={}:F=P,D=!1,$[x]=p.extend(Ee,F,k)):k!==void 0&&($[x]=k));return $},p.extend({expando:"jQuery"+(I+Math.random()).replace(/\D/g,""),isReady:!0,error:function(g){throw new Error(g)},noop:function(){},isPlainObject:function(g){var x,P;return!g||f.call(g)!=="[object Object]"?!1:(x=i(g),x?(P=h.call(x,"constructor")&&x.constructor,typeof P=="function"&&v.call(P)===y):!0)},isEmptyObject:function(g){var x;for(x in g)return!1;return!0},globalEval:function(g,x,P){A(g,{nonce:x&&x.nonce},P)},each:function(g,x){var P,k=0;if(C(g))for(P=g.length;k<P&&x.call(g[k],k,g[k])!==!1;k++);else for(k in g)if(x.call(g[k],k,g[k])===!1)break;return g},text:function(g){var x,P="",k=0,D=g.nodeType;if(!D)for(;x=g[k++];)P+=p.text(x);return D===1||D===11?g.textContent:D===9?g.documentElement.textContent:D===3||D===4?g.nodeValue:P},makeArray:function(g,x){var P=x||[];return g!=null&&(C(Object(g))?p.merge(P,typeof g=="string"?[g]:g):a.call(P,g)),P},inArray:function(g,x,P){return x==null?-1:u.call(x,g,P)},isXMLDoc:function(g){var x=g&&g.namespaceURI,P=g&&(g.ownerDocument||g).documentElement;return!q.test(x||P&&P.nodeName||"HTML")},merge:function(g,x){for(var P=+x.length,k=0,D=g.length;k<P;k++)g[D++]=x[k];return g.length=D,g},grep:function(g,x,P){for(var k,D=[],F=0,$=g.length,he=!P;F<$;F++)k=!x(g[F],F),k!==he&&D.push(g[F]);return D},map:function(g,x,P){var k,D,F=0,$=[];if(C(g))for(k=g.length;F<k;F++)D=x(g[F],F,P),D!=null&&$.push(D);else for(F in g)D=x(g[F],F,P),D!=null&&$.push(D);return o($)},guid:1,support:m}),typeof Symbol=="function"&&(p.fn[Symbol.iterator]=n[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(g,x){c["[object "+x+"]"]=x.toLowerCase()});function C(g){var x=!!g&&"length"in g&&g.length,P=T(g);return _(g)||w(g)?!1:P==="array"||x===0||typeof x=="number"&&x>0&&x-1 in g}function O(g,x){return g.nodeName&&g.nodeName.toLowerCase()===x.toLowerCase()}var N=n.pop,V=n.sort,W=n.splice,G="[\\x20\\t\\r\\n\\f]",ee=new RegExp("^"+G+"+|((?:^|[^\\\\])(?:\\\\.)*)"+G+"+$","g");p.contains=function(g,x){var P=x&&x.parentNode;return g===P||!!(P&&P.nodeType===1&&(g.contains?g.contains(P):g.compareDocumentPosition&&g.compareDocumentPosition(P)&16))};var ae=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function K(g,x){return x?g==="\0"?"ï¿½":g.slice(0,-1)+"\\"+g.charCodeAt(g.length-1).toString(16)+" ":"\\"+g}p.escapeSelector=function(g){return(g+"").replace(ae,K)};var U=S,j=a;(function(){var g,x,P,k,D,F=j,$,he,se,Ee,De,Ge=p.expando,Me=0,ut=0,St=Bu(),ar=Bu(),sr=Bu(),oi=Bu(),kn=function(ie,_e){return ie===_e&&(D=!0),0},Bs="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",zs="(?:\\\\[\\da-fA-F]{1,6}"+G+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Er="\\["+G+"*("+zs+")(?:"+G+"*([*^$|!~]?=)"+G+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+zs+"))|)"+G+"*\\]",Uo=":("+zs+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Er+")*)|.*)\\)|)",Ar=new RegExp(G+"+","g"),un=new RegExp("^"+G+"*,"+G+"*"),qu=new RegExp("^"+G+"*([>+~]|"+G+")"+G+"*"),qc=new RegExp(G+"|>"),Ss=new RegExp(Uo),wa=new RegExp("^"+zs+"$"),rs={ID:new RegExp("^#("+zs+")"),CLASS:new RegExp("^\\.("+zs+")"),TAG:new RegExp("^("+zs+"|[*])"),ATTR:new RegExp("^"+Er),PSEUDO:new RegExp("^"+Uo),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+G+"*(even|odd|(([+-]|)(\\d*)n|)"+G+"*(?:([+-]|)"+G+"*(\\d+)|))"+G+"*\\)|)","i"),bool:new RegExp("^(?:"+Bs+")$","i"),needsContext:new RegExp("^"+G+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+G+"*((?:-\\d)?\\d*)"+G+"*\\)|)(?=[^-]|$)","i")},vo=/^(?:input|select|textarea|button)$/i,jo=/^h\d$/i,Pi=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Du=/[+~]/,mo=new RegExp("\\\\[\\da-fA-F]{1,6}"+G+"?|\\\\([^\\r\\n\\f])","g"),Vs=function(ie,_e){var Oe="0x"+ie.slice(1)-65536;return _e||(Oe<0?String.fromCharCode(Oe+65536):String.fromCharCode(Oe>>10|55296,Oe&1023|56320))},Di=function(){Ho()},sf=xa(function(ie){return ie.disabled===!0&&O(ie,"fieldset")},{dir:"parentNode",next:"legend"});function Fu(){try{return $.activeElement}catch{}}try{F.apply(n=s.call(U.childNodes),U.childNodes),n[U.childNodes.length].nodeType}catch{F={apply:function(_e,Oe){j.apply(_e,s.call(Oe))},call:function(_e){j.apply(_e,s.call(arguments,1))}}}function Yr(ie,_e,Oe,ke){var Q,me,ge,Ue,Qe,At,Pt,wt=_e&&_e.ownerDocument,fr=_e?_e.nodeType:9;if(Oe=Oe||[],typeof ie!="string"||!ie||fr!==1&&fr!==9&&fr!==11)return Oe;if(!ke&&(Ho(_e),_e=_e||$,se)){if(fr!==11&&(Qe=Pi.exec(ie)))if(Q=Qe[1]){if(fr===9)if(ge=_e.getElementById(Q)){if(ge.id===Q)return F.call(Oe,ge),Oe}else return Oe;else if(wt&&(ge=wt.getElementById(Q))&&Yr.contains(_e,ge)&&ge.id===Q)return F.call(Oe,ge),Oe}else{if(Qe[2])return F.apply(Oe,_e.getElementsByTagName(ie)),Oe;if((Q=Qe[3])&&_e.getElementsByClassName)return F.apply(Oe,_e.getElementsByClassName(Q)),Oe}if(!oi[ie+" "]&&(!Ee||!Ee.test(ie))){if(Pt=ie,wt=_e,fr===1&&(qc.test(ie)||qu.test(ie))){for(wt=Du.test(ie)&&of(_e.parentNode)||_e,(wt!=_e||!m.scope)&&((Ue=_e.getAttribute("id"))?Ue=p.escapeSelector(Ue):_e.setAttribute("id",Ue=Ge)),At=Qa(ie),me=At.length;me--;)At[me]=(Ue?"#"+Ue:":scope")+" "+As(At[me]);Pt=At.join(",")}try{return F.apply(Oe,wt.querySelectorAll(Pt)),Oe}catch{oi(ie,!0)}finally{Ue===Ge&&_e.removeAttribute("id")}}}return ud(ie.replace(ee,"$1"),_e,Oe,ke)}function Bu(){var ie=[];function _e(Oe,ke){return ie.push(Oe+" ")>x.cacheLength&&delete _e[ie.shift()],_e[Oe+" "]=ke}return _e}function Es(ie){return ie[Ge]=!0,ie}function Ja(ie){var _e=$.createElement("fieldset");try{return!!ie(_e)}catch{return!1}finally{_e.parentNode&&_e.parentNode.removeChild(_e),_e=null}}function xv(ie){return function(_e){return O(_e,"input")&&_e.type===ie}}function Sv(ie){return function(_e){return(O(_e,"input")||O(_e,"button"))&&_e.type===ie}}function od(ie){return function(_e){return"form"in _e?_e.parentNode&&_e.disabled===!1?"label"in _e?"label"in _e.parentNode?_e.parentNode.disabled===ie:_e.disabled===ie:_e.isDisabled===ie||_e.isDisabled!==!ie&&sf(_e)===ie:_e.disabled===ie:"label"in _e?_e.disabled===ie:!1}}function ns(ie){return Es(function(_e){return _e=+_e,Es(function(Oe,ke){for(var Q,me=ie([],Oe.length,_e),ge=me.length;ge--;)Oe[Q=me[ge]]&&(Oe[Q]=!(ke[Q]=Oe[Q]))})})}function of(ie){return ie&&typeof ie.getElementsByTagName<"u"&&ie}function Ho(ie){var _e,Oe=ie?ie.ownerDocument||ie:U;return Oe==$||Oe.nodeType!==9||!Oe.documentElement||($=Oe,he=$.documentElement,se=!p.isXMLDoc($),De=he.matches||he.webkitMatchesSelector||he.msMatchesSelector,he.msMatchesSelector&&U!=$&&(_e=$.defaultView)&&_e.top!==_e&&_e.addEventListener("unload",Di),m.getById=Ja(function(ke){return he.appendChild(ke).id=p.expando,!$.getElementsByName||!$.getElementsByName(p.expando).length}),m.disconnectedMatch=Ja(function(ke){return De.call(ke,"*")}),m.scope=Ja(function(){return $.querySelectorAll(":scope")}),m.cssHas=Ja(function(){try{return $.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),m.getById?(x.filter.ID=function(ke){var Q=ke.replace(mo,Vs);return function(me){return me.getAttribute("id")===Q}},x.find.ID=function(ke,Q){if(typeof Q.getElementById<"u"&&se){var me=Q.getElementById(ke);return me?[me]:[]}}):(x.filter.ID=function(ke){var Q=ke.replace(mo,Vs);return function(me){var ge=typeof me.getAttributeNode<"u"&&me.getAttributeNode("id");return ge&&ge.value===Q}},x.find.ID=function(ke,Q){if(typeof Q.getElementById<"u"&&se){var me,ge,Ue,Qe=Q.getElementById(ke);if(Qe){if(me=Qe.getAttributeNode("id"),me&&me.value===ke)return[Qe];for(Ue=Q.getElementsByName(ke),ge=0;Qe=Ue[ge++];)if(me=Qe.getAttributeNode("id"),me&&me.value===ke)return[Qe]}return[]}}),x.find.TAG=function(ke,Q){return typeof Q.getElementsByTagName<"u"?Q.getElementsByTagName(ke):Q.querySelectorAll(ke)},x.find.CLASS=function(ke,Q){if(typeof Q.getElementsByClassName<"u"&&se)return Q.getElementsByClassName(ke)},Ee=[],Ja(function(ke){var Q;he.appendChild(ke).innerHTML="<a id='"+Ge+"' href='' disabled='disabled'></a><select id='"+Ge+"-\r\\' disabled='disabled'><option selected=''></option></select>",ke.querySelectorAll("[selected]").length||Ee.push("\\["+G+"*(?:value|"+Bs+")"),ke.querySelectorAll("[id~="+Ge+"-]").length||Ee.push("~="),ke.querySelectorAll("a#"+Ge+"+*").length||Ee.push(".#.+[+~]"),ke.querySelectorAll(":checked").length||Ee.push(":checked"),Q=$.createElement("input"),Q.setAttribute("type","hidden"),ke.appendChild(Q).setAttribute("name","D"),he.appendChild(ke).disabled=!0,ke.querySelectorAll(":disabled").length!==2&&Ee.push(":enabled",":disabled"),Q=$.createElement("input"),Q.setAttribute("name",""),ke.appendChild(Q),ke.querySelectorAll("[name='']").length||Ee.push("\\["+G+"*name"+G+"*="+G+`*(?:''|"")`)}),m.cssHas||Ee.push(":has"),Ee=Ee.length&&new RegExp(Ee.join("|")),kn=function(ke,Q){if(ke===Q)return D=!0,0;var me=!ke.compareDocumentPosition-!Q.compareDocumentPosition;return me||(me=(ke.ownerDocument||ke)==(Q.ownerDocument||Q)?ke.compareDocumentPosition(Q):1,me&1||!m.sortDetached&&Q.compareDocumentPosition(ke)===me?ke===$||ke.ownerDocument==U&&Yr.contains(U,ke)?-1:Q===$||Q.ownerDocument==U&&Yr.contains(U,Q)?1:k?u.call(k,ke)-u.call(k,Q):0:me&4?-1:1)}),$}Yr.matches=function(ie,_e){return Yr(ie,null,null,_e)},Yr.matchesSelector=function(ie,_e){if(Ho(ie),se&&!oi[_e+" "]&&(!Ee||!Ee.test(_e)))try{var Oe=De.call(ie,_e);if(Oe||m.disconnectedMatch||ie.document&&ie.document.nodeType!==11)return Oe}catch{oi(_e,!0)}return Yr(_e,$,null,[ie]).length>0},Yr.contains=function(ie,_e){return(ie.ownerDocument||ie)!=$&&Ho(ie),p.contains(ie,_e)},Yr.attr=function(ie,_e){(ie.ownerDocument||ie)!=$&&Ho(ie);var Oe=x.attrHandle[_e.toLowerCase()],ke=Oe&&h.call(x.attrHandle,_e.toLowerCase())?Oe(ie,_e,!se):void 0;return ke!==void 0?ke:ie.getAttribute(_e)},Yr.error=function(ie){throw new Error("Syntax error, unrecognized expression: "+ie)},p.uniqueSort=function(ie){var _e,Oe=[],ke=0,Q=0;if(D=!m.sortStable,k=!m.sortStable&&s.call(ie,0),V.call(ie,kn),D){for(;_e=ie[Q++];)_e===ie[Q]&&(ke=Oe.push(Q));for(;ke--;)W.call(ie,Oe[ke],1)}return k=null,ie},p.fn.uniqueSort=function(){return this.pushStack(p.uniqueSort(s.apply(this)))},x=p.expr={cacheLength:50,createPseudo:Es,match:rs,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ie){return ie[1]=ie[1].replace(mo,Vs),ie[3]=(ie[3]||ie[4]||ie[5]||"").replace(mo,Vs),ie[2]==="~="&&(ie[3]=" "+ie[3]+" "),ie.slice(0,4)},CHILD:function(ie){return ie[1]=ie[1].toLowerCase(),ie[1].slice(0,3)==="nth"?(ie[3]||Yr.error(ie[0]),ie[4]=+(ie[4]?ie[5]+(ie[6]||1):2*(ie[3]==="even"||ie[3]==="odd")),ie[5]=+(ie[7]+ie[8]||ie[3]==="odd")):ie[3]&&Yr.error(ie[0]),ie},PSEUDO:function(ie){var _e,Oe=!ie[6]&&ie[2];return rs.CHILD.test(ie[0])?null:(ie[3]?ie[2]=ie[4]||ie[5]||"":Oe&&Ss.test(Oe)&&(_e=Qa(Oe,!0))&&(_e=Oe.indexOf(")",Oe.length-_e)-Oe.length)&&(ie[0]=ie[0].slice(0,_e),ie[2]=Oe.slice(0,_e)),ie.slice(0,3))}},filter:{TAG:function(ie){var _e=ie.replace(mo,Vs).toLowerCase();return ie==="*"?function(){return!0}:function(Oe){return O(Oe,_e)}},CLASS:function(ie){var _e=St[ie+" "];return _e||(_e=new RegExp("(^|"+G+")"+ie+"("+G+"|$)"))&&St(ie,function(Oe){return _e.test(typeof Oe.className=="string"&&Oe.className||typeof Oe.getAttribute<"u"&&Oe.getAttribute("class")||"")})},ATTR:function(ie,_e,Oe){return function(ke){var Q=Yr.attr(ke,ie);return Q==null?_e==="!=":_e?(Q+="",_e==="="?Q===Oe:_e==="!="?Q!==Oe:_e==="^="?Oe&&Q.indexOf(Oe)===0:_e==="*="?Oe&&Q.indexOf(Oe)>-1:_e==="$="?Oe&&Q.slice(-Oe.length)===Oe:_e==="~="?(" "+Q.replace(Ar," ")+" ").indexOf(Oe)>-1:_e==="|="?Q===Oe||Q.slice(0,Oe.length+1)===Oe+"-":!1):!0}},CHILD:function(ie,_e,Oe,ke,Q){var me=ie.slice(0,3)!=="nth",ge=ie.slice(-4)!=="last",Ue=_e==="of-type";return ke===1&&Q===0?function(Qe){return!!Qe.parentNode}:function(Qe,At,Pt){var wt,fr,Ut,_r,ai,vi=me!==ge?"nextSibling":"previousSibling",ui=Qe.parentNode,Bi=Ue&&Qe.nodeName.toLowerCase(),yo=!Pt&&!Ue,nr=!1;if(ui){if(me){for(;vi;){for(Ut=Qe;Ut=Ut[vi];)if(Ue?O(Ut,Bi):Ut.nodeType===1)return!1;ai=vi=ie==="only"&&!ai&&"nextSibling"}return!0}if(ai=[ge?ui.firstChild:ui.lastChild],ge&&yo){for(fr=ui[Ge]||(ui[Ge]={}),wt=fr[ie]||[],_r=wt[0]===Me&&wt[1],nr=_r&&wt[2],Ut=_r&&ui.childNodes[_r];Ut=++_r&&Ut&&Ut[vi]||(nr=_r=0)||ai.pop();)if(Ut.nodeType===1&&++nr&&Ut===Qe){fr[ie]=[Me,_r,nr];break}}else if(yo&&(fr=Qe[Ge]||(Qe[Ge]={}),wt=fr[ie]||[],_r=wt[0]===Me&&wt[1],nr=_r),nr===!1)for(;(Ut=++_r&&Ut&&Ut[vi]||(nr=_r=0)||ai.pop())&&!((Ue?O(Ut,Bi):Ut.nodeType===1)&&++nr&&(yo&&(fr=Ut[Ge]||(Ut[Ge]={}),fr[ie]=[Me,nr]),Ut===Qe)););return nr-=Q,nr===ke||nr%ke===0&&nr/ke>=0}}},PSEUDO:function(ie,_e){var Oe,ke=x.pseudos[ie]||x.setFilters[ie.toLowerCase()]||Yr.error("unsupported pseudo: "+ie);return ke[Ge]?ke(_e):ke.length>1?(Oe=[ie,ie,"",_e],x.setFilters.hasOwnProperty(ie.toLowerCase())?Es(function(Q,me){for(var ge,Ue=ke(Q,_e),Qe=Ue.length;Qe--;)ge=u.call(Q,Ue[Qe]),Q[ge]=!(me[ge]=Ue[Qe])}):function(Q){return ke(Q,0,Oe)}):ke}},pseudos:{not:Es(function(ie){var _e=[],Oe=[],ke=uf(ie.replace(ee,"$1"));return ke[Ge]?Es(function(Q,me,ge,Ue){for(var Qe,At=ke(Q,null,Ue,[]),Pt=Q.length;Pt--;)(Qe=At[Pt])&&(Q[Pt]=!(me[Pt]=Qe))}):function(Q,me,ge){return _e[0]=Q,ke(_e,null,ge,Oe),_e[0]=null,!Oe.pop()}}),has:Es(function(ie){return function(_e){return Yr(ie,_e).length>0}}),contains:Es(function(ie){return ie=ie.replace(mo,Vs),function(_e){return(_e.textContent||p.text(_e)).indexOf(ie)>-1}}),lang:Es(function(ie){return wa.test(ie||"")||Yr.error("unsupported lang: "+ie),ie=ie.replace(mo,Vs).toLowerCase(),function(_e){var Oe;do if(Oe=se?_e.lang:_e.getAttribute("xml:lang")||_e.getAttribute("lang"))return Oe=Oe.toLowerCase(),Oe===ie||Oe.indexOf(ie+"-")===0;while((_e=_e.parentNode)&&_e.nodeType===1);return!1}}),target:function(ie){var _e=t.location&&t.location.hash;return _e&&_e.slice(1)===ie.id},root:function(ie){return ie===he},focus:function(ie){return ie===Fu()&&$.hasFocus()&&!!(ie.type||ie.href||~ie.tabIndex)},enabled:od(!1),disabled:od(!0),checked:function(ie){return O(ie,"input")&&!!ie.checked||O(ie,"option")&&!!ie.selected},selected:function(ie){return ie.parentNode&&ie.parentNode.selectedIndex,ie.selected===!0},empty:function(ie){for(ie=ie.firstChild;ie;ie=ie.nextSibling)if(ie.nodeType<6)return!1;return!0},parent:function(ie){return!x.pseudos.empty(ie)},header:function(ie){return jo.test(ie.nodeName)},input:function(ie){return vo.test(ie.nodeName)},button:function(ie){return O(ie,"input")&&ie.type==="button"||O(ie,"button")},text:function(ie){var _e;return O(ie,"input")&&ie.type==="text"&&((_e=ie.getAttribute("type"))==null||_e.toLowerCase()==="text")},first:ns(function(){return[0]}),last:ns(function(ie,_e){return[_e-1]}),eq:ns(function(ie,_e,Oe){return[Oe<0?Oe+_e:Oe]}),even:ns(function(ie,_e){for(var Oe=0;Oe<_e;Oe+=2)ie.push(Oe);return ie}),odd:ns(function(ie,_e){for(var Oe=1;Oe<_e;Oe+=2)ie.push(Oe);return ie}),lt:ns(function(ie,_e,Oe){var ke;for(Oe<0?ke=Oe+_e:Oe>_e?ke=_e:ke=Oe;--ke>=0;)ie.push(ke);return ie}),gt:ns(function(ie,_e,Oe){for(var ke=Oe<0?Oe+_e:Oe;++ke<_e;)ie.push(ke);return ie})}},x.pseudos.nth=x.pseudos.eq;for(g in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[g]=xv(g);for(g in{submit:!0,reset:!0})x.pseudos[g]=Sv(g);function Dc(){}Dc.prototype=x.filters=x.pseudos,x.setFilters=new Dc;function Qa(ie,_e){var Oe,ke,Q,me,ge,Ue,Qe,At=ar[ie+" "];if(At)return _e?0:At.slice(0);for(ge=ie,Ue=[],Qe=x.preFilter;ge;){(!Oe||(ke=un.exec(ge)))&&(ke&&(ge=ge.slice(ke[0].length)||ge),Ue.push(Q=[])),Oe=!1,(ke=qu.exec(ge))&&(Oe=ke.shift(),Q.push({value:Oe,type:ke[0].replace(ee," ")}),ge=ge.slice(Oe.length));for(me in x.filter)(ke=rs[me].exec(ge))&&(!Qe[me]||(ke=Qe[me](ke)))&&(Oe=ke.shift(),Q.push({value:Oe,type:me,matches:ke}),ge=ge.slice(Oe.length));if(!Oe)break}return _e?ge.length:ge?Yr.error(ie):ar(ie,Ue).slice(0)}function As(ie){for(var _e=0,Oe=ie.length,ke="";_e<Oe;_e++)ke+=ie[_e].value;return ke}function xa(ie,_e,Oe){var ke=_e.dir,Q=_e.next,me=Q||ke,ge=Oe&&me==="parentNode",Ue=ut++;return _e.first?function(Qe,At,Pt){for(;Qe=Qe[ke];)if(Qe.nodeType===1||ge)return ie(Qe,At,Pt);return!1}:function(Qe,At,Pt){var wt,fr,Ut=[Me,Ue];if(Pt){for(;Qe=Qe[ke];)if((Qe.nodeType===1||ge)&&ie(Qe,At,Pt))return!0}else for(;Qe=Qe[ke];)if(Qe.nodeType===1||ge)if(fr=Qe[Ge]||(Qe[Ge]={}),Q&&O(Qe,Q))Qe=Qe[ke]||Qe;else{if((wt=fr[me])&&wt[0]===Me&&wt[1]===Ue)return Ut[2]=wt[2];if(fr[me]=Ut,Ut[2]=ie(Qe,At,Pt))return!0}return!1}}function af(ie){return ie.length>1?function(_e,Oe,ke){for(var Q=ie.length;Q--;)if(!ie[Q](_e,Oe,ke))return!1;return!0}:ie[0]}function Ev(ie,_e,Oe){for(var ke=0,Q=_e.length;ke<Q;ke++)Yr(ie,_e[ke],Oe);return Oe}function Fc(ie,_e,Oe,ke,Q){for(var me,ge=[],Ue=0,Qe=ie.length,At=_e!=null;Ue<Qe;Ue++)(me=ie[Ue])&&(!Oe||Oe(me,ke,Q))&&(ge.push(me),At&&_e.push(Ue));return ge}function Wo(ie,_e,Oe,ke,Q,me){return ke&&!ke[Ge]&&(ke=Wo(ke)),Q&&!Q[Ge]&&(Q=Wo(Q,me)),Es(function(ge,Ue,Qe,At){var Pt,wt,fr,Ut,_r=[],ai=[],vi=Ue.length,ui=ge||Ev(_e||"*",Qe.nodeType?[Qe]:Qe,[]),Bi=ie&&(ge||!_e)?Fc(ui,_r,ie,Qe,At):ui;if(Oe?(Ut=Q||(ge?ie:vi||ke)?[]:Ue,Oe(Bi,Ut,Qe,At)):Ut=Bi,ke)for(Pt=Fc(Ut,ai),ke(Pt,[],Qe,At),wt=Pt.length;wt--;)(fr=Pt[wt])&&(Ut[ai[wt]]=!(Bi[ai[wt]]=fr));if(ge){if(Q||ie){if(Q){for(Pt=[],wt=Ut.length;wt--;)(fr=Ut[wt])&&Pt.push(Bi[wt]=fr);Q(null,Ut=[],Pt,At)}for(wt=Ut.length;wt--;)(fr=Ut[wt])&&(Pt=Q?u.call(ge,fr):_r[wt])>-1&&(ge[Pt]=!(Ue[Pt]=fr))}}else Ut=Fc(Ut===Ue?Ut.splice(vi,Ut.length):Ut),Q?Q(null,Ue,Ut,At):F.apply(Ue,Ut)})}function Fi(ie){for(var _e,Oe,ke,Q=ie.length,me=x.relative[ie[0].type],ge=me||x.relative[" "],Ue=me?1:0,Qe=xa(function(wt){return wt===_e},ge,!0),At=xa(function(wt){return u.call(_e,wt)>-1},ge,!0),Pt=[function(wt,fr,Ut){var _r=!me&&(Ut||fr!=P)||((_e=fr).nodeType?Qe(wt,fr,Ut):At(wt,fr,Ut));return _e=null,_r}];Ue<Q;Ue++)if(Oe=x.relative[ie[Ue].type])Pt=[xa(af(Pt),Oe)];else{if(Oe=x.filter[ie[Ue].type].apply(null,ie[Ue].matches),Oe[Ge]){for(ke=++Ue;ke<Q&&!x.relative[ie[ke].type];ke++);return Wo(Ue>1&&af(Pt),Ue>1&&As(ie.slice(0,Ue-1).concat({value:ie[Ue-2].type===" "?"*":""})).replace(ee,"$1"),Oe,Ue<ke&&Fi(ie.slice(Ue,ke)),ke<Q&&Fi(ie=ie.slice(ke)),ke<Q&&As(ie))}Pt.push(Oe)}return af(Pt)}function ad(ie,_e){var Oe=_e.length>0,ke=ie.length>0,Q=function(me,ge,Ue,Qe,At){var Pt,wt,fr,Ut=0,_r="0",ai=me&&[],vi=[],ui=P,Bi=me||ke&&x.find.TAG("*",At),yo=Me+=ui==null?1:Math.random()||.1,nr=Bi.length;for(At&&(P=ge==$||ge||At);_r!==nr&&(Pt=Bi[_r])!=null;_r++){if(ke&&Pt){for(wt=0,!ge&&Pt.ownerDocument!=$&&(Ho(Pt),Ue=!se);fr=ie[wt++];)if(fr(Pt,ge||$,Ue)){F.call(Qe,Pt);break}At&&(Me=yo)}Oe&&((Pt=!fr&&Pt)&&Ut--,me&&ai.push(Pt))}if(Ut+=_r,Oe&&_r!==Ut){for(wt=0;fr=_e[wt++];)fr(ai,vi,ge,Ue);if(me){if(Ut>0)for(;_r--;)ai[_r]||vi[_r]||(vi[_r]=N.call(Qe));vi=Fc(vi)}F.apply(Qe,vi),At&&!me&&vi.length>0&&Ut+_e.length>1&&p.uniqueSort(Qe)}return At&&(Me=yo,P=ui),ai};return Oe?Es(Q):Q}function uf(ie,_e){var Oe,ke=[],Q=[],me=sr[ie+" "];if(!me){for(_e||(_e=Qa(ie)),Oe=_e.length;Oe--;)me=Fi(_e[Oe]),me[Ge]?ke.push(me):Q.push(me);me=sr(ie,ad(Q,ke)),me.selector=ie}return me}function ud(ie,_e,Oe,ke){var Q,me,ge,Ue,Qe,At=typeof ie=="function"&&ie,Pt=!ke&&Qa(ie=At.selector||ie);if(Oe=Oe||[],Pt.length===1){if(me=Pt[0]=Pt[0].slice(0),me.length>2&&(ge=me[0]).type==="ID"&&_e.nodeType===9&&se&&x.relative[me[1].type]){if(_e=(x.find.ID(ge.matches[0].replace(mo,Vs),_e)||[])[0],_e)At&&(_e=_e.parentNode);else return Oe;ie=ie.slice(me.shift().value.length)}for(Q=rs.needsContext.test(ie)?0:me.length;Q--&&(ge=me[Q],!x.relative[Ue=ge.type]);)if((Qe=x.find[Ue])&&(ke=Qe(ge.matches[0].replace(mo,Vs),Du.test(me[0].type)&&of(_e.parentNode)||_e))){if(me.splice(Q,1),ie=ke.length&&As(me),!ie)return F.apply(Oe,ke),Oe;break}}return(At||uf(ie,Pt))(ke,_e,!se,Oe,!_e||Du.test(ie)&&of(_e.parentNode)||_e),Oe}m.sortStable=Ge.split("").sort(kn).join("")===Ge,Ho(),m.sortDetached=Ja(function(ie){return ie.compareDocumentPosition($.createElement("fieldset"))&1}),p.find=Yr,p.expr[":"]=p.expr.pseudos,p.unique=p.uniqueSort,Yr.compile=uf,Yr.select=ud,Yr.setDocument=Ho,Yr.tokenize=Qa,Yr.escape=p.escapeSelector,Yr.getText=p.text,Yr.isXML=p.isXMLDoc,Yr.selectors=p.expr,Yr.support=p.support,Yr.uniqueSort=p.uniqueSort})();var J=function(g,x,P){for(var k=[],D=P!==void 0;(g=g[x])&&g.nodeType!==9;)if(g.nodeType===1){if(D&&p(g).is(P))break;k.push(g)}return k},de=function(g,x){for(var P=[];g;g=g.nextSibling)g.nodeType===1&&g!==x&&P.push(g);return P},ce=p.expr.match.needsContext,Te=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Se(g,x,P){return _(x)?p.grep(g,function(k,D){return!!x.call(k,D,k)!==P}):x.nodeType?p.grep(g,function(k){return k===x!==P}):typeof x!="string"?p.grep(g,function(k){return u.call(x,k)>-1!==P}):p.filter(x,g,P)}p.filter=function(g,x,P){var k=x[0];return P&&(g=":not("+g+")"),x.length===1&&k.nodeType===1?p.find.matchesSelector(k,g)?[k]:[]:p.find.matches(g,p.grep(x,function(D){return D.nodeType===1}))},p.fn.extend({find:function(g){var x,P,k=this.length,D=this;if(typeof g!="string")return this.pushStack(p(g).filter(function(){for(x=0;x<k;x++)if(p.contains(D[x],this))return!0}));for(P=this.pushStack([]),x=0;x<k;x++)p.find(g,D[x],P);return k>1?p.uniqueSort(P):P},filter:function(g){return this.pushStack(Se(this,g||[],!1))},not:function(g){return this.pushStack(Se(this,g||[],!0))},is:function(g){return!!Se(this,typeof g=="string"&&ce.test(g)?p(g):g||[],!1).length}});var re,oe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,ne=p.fn.init=function(g,x,P){var k,D;if(!g)return this;if(P=P||re,typeof g=="string")if(g[0]==="<"&&g[g.length-1]===">"&&g.length>=3?k=[null,g,null]:k=oe.exec(g),k&&(k[1]||!x))if(k[1]){if(x=x instanceof p?x[0]:x,p.merge(this,p.parseHTML(k[1],x&&x.nodeType?x.ownerDocument||x:S,!0)),Te.test(k[1])&&p.isPlainObject(x))for(k in x)_(this[k])?this[k](x[k]):this.attr(k,x[k]);return this}else return D=S.getElementById(k[2]),D&&(this[0]=D,this.length=1),this;else return!x||x.jquery?(x||P).find(g):this.constructor(x).find(g);else{if(g.nodeType)return this[0]=g,this.length=1,this;if(_(g))return P.ready!==void 0?P.ready(g):g(p)}return p.makeArray(g,this)};ne.prototype=p.fn,re=p(S);var te=/^(?:parents|prev(?:Until|All))/,le={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(g){var x=p(g,this),P=x.length;return this.filter(function(){for(var k=0;k<P;k++)if(p.contains(this,x[k]))return!0})},closest:function(g,x){var P,k=0,D=this.length,F=[],$=typeof g!="string"&&p(g);if(!ce.test(g)){for(;k<D;k++)for(P=this[k];P&&P!==x;P=P.parentNode)if(P.nodeType<11&&($?$.index(P)>-1:P.nodeType===1&&p.find.matchesSelector(P,g))){F.push(P);break}}return this.pushStack(F.length>1?p.uniqueSort(F):F)},index:function(g){return g?typeof g=="string"?u.call(p(g),this[0]):u.call(this,g.jquery?g[0]:g):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(g,x){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(g,x))))},addBack:function(g){return this.add(g==null?this.prevObject:this.prevObject.filter(g))}});function We(g,x){for(;(g=g[x])&&g.nodeType!==1;);return g}p.each({parent:function(g){var x=g.parentNode;return x&&x.nodeType!==11?x:null},parents:function(g){return J(g,"parentNode")},parentsUntil:function(g,x,P){return J(g,"parentNode",P)},next:function(g){return We(g,"nextSibling")},prev:function(g){return We(g,"previousSibling")},nextAll:function(g){return J(g,"nextSibling")},prevAll:function(g){return J(g,"previousSibling")},nextUntil:function(g,x,P){return J(g,"nextSibling",P)},prevUntil:function(g,x,P){return J(g,"previousSibling",P)},siblings:function(g){return de((g.parentNode||{}).firstChild,g)},children:function(g){return de(g.firstChild)},contents:function(g){return g.contentDocument!=null&&i(g.contentDocument)?g.contentDocument:(O(g,"template")&&(g=g.content||g),p.merge([],g.childNodes))}},function(g,x){p.fn[g]=function(P,k){var D=p.map(this,x,P);return g.slice(-5)!=="Until"&&(k=P),k&&typeof k=="string"&&(D=p.filter(k,D)),this.length>1&&(le[g]||p.uniqueSort(D),te.test(g)&&D.reverse()),this.pushStack(D)}});var Ne=/[^\x20\t\r\n\f]+/g;function Re(g){var x={};return p.each(g.match(Ne)||[],function(P,k){x[k]=!0}),x}p.Callbacks=function(g){g=typeof g=="string"?Re(g):p.extend({},g);var x,P,k,D,F=[],$=[],he=-1,se=function(){for(D=D||g.once,k=x=!0;$.length;he=-1)for(P=$.shift();++he<F.length;)F[he].apply(P[0],P[1])===!1&&g.stopOnFalse&&(he=F.length,P=!1);g.memory||(P=!1),x=!1,D&&(P?F=[]:F="")},Ee={add:function(){return F&&(P&&!x&&(he=F.length-1,$.push(P)),function De(Ge){p.each(Ge,function(Me,ut){_(ut)?(!g.unique||!Ee.has(ut))&&F.push(ut):ut&&ut.length&&T(ut)!=="string"&&De(ut)})}(arguments),P&&!x&&se()),this},remove:function(){return p.each(arguments,function(De,Ge){for(var Me;(Me=p.inArray(Ge,F,Me))>-1;)F.splice(Me,1),Me<=he&&he--}),this},has:function(De){return De?p.inArray(De,F)>-1:F.length>0},empty:function(){return F&&(F=[]),this},disable:function(){return D=$=[],F=P="",this},disabled:function(){return!F},lock:function(){return D=$=[],!P&&!x&&(F=P=""),this},locked:function(){return!!D},fireWith:function(De,Ge){return D||(Ge=Ge||[],Ge=[De,Ge.slice?Ge.slice():Ge],$.push(Ge),x||se()),this},fire:function(){return Ee.fireWith(this,arguments),this},fired:function(){return!!k}};return Ee};function rt(g){return g}function Ve(g){throw g}function L(g,x,P,k){var D;try{g&&_(D=g.promise)?D.call(g).done(x).fail(P):g&&_(D=g.then)?D.call(g,x,P):x.apply(void 0,[g].slice(k))}catch(F){P.apply(void 0,[F])}}p.extend({Deferred:function(g){var x=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],P="pending",k={state:function(){return P},always:function(){return D.done(arguments).fail(arguments),this},catch:function(F){return k.then(null,F)},pipe:function(){var F=arguments;return p.Deferred(function($){p.each(x,function(he,se){var Ee=_(F[se[4]])&&F[se[4]];D[se[1]](function(){var De=Ee&&Ee.apply(this,arguments);De&&_(De.promise)?De.promise().progress($.notify).done($.resolve).fail($.reject):$[se[0]+"With"](this,Ee?[De]:arguments)})}),F=null}).promise()},then:function(F,$,he){var se=0;function Ee(De,Ge,Me,ut){return function(){var St=this,ar=arguments,sr=function(){var kn,Bs;if(!(De<se)){if(kn=Me.apply(St,ar),kn===Ge.promise())throw new TypeError("Thenable self-resolution");Bs=kn&&(typeof kn=="object"||typeof kn=="function")&&kn.then,_(Bs)?ut?Bs.call(kn,Ee(se,Ge,rt,ut),Ee(se,Ge,Ve,ut)):(se++,Bs.call(kn,Ee(se,Ge,rt,ut),Ee(se,Ge,Ve,ut),Ee(se,Ge,rt,Ge.notifyWith))):(Me!==rt&&(St=void 0,ar=[kn]),(ut||Ge.resolveWith)(St,ar))}},oi=ut?sr:function(){try{sr()}catch(kn){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(kn,oi.error),De+1>=se&&(Me!==Ve&&(St=void 0,ar=[kn]),Ge.rejectWith(St,ar))}};De?oi():(p.Deferred.getErrorHook?oi.error=p.Deferred.getErrorHook():p.Deferred.getStackHook&&(oi.error=p.Deferred.getStackHook()),t.setTimeout(oi))}}return p.Deferred(function(De){x[0][3].add(Ee(0,De,_(he)?he:rt,De.notifyWith)),x[1][3].add(Ee(0,De,_(F)?F:rt)),x[2][3].add(Ee(0,De,_($)?$:Ve))}).promise()},promise:function(F){return F!=null?p.extend(F,k):k}},D={};return p.each(x,function(F,$){var he=$[2],se=$[5];k[$[1]]=he.add,se&&he.add(function(){P=se},x[3-F][2].disable,x[3-F][3].disable,x[0][2].lock,x[0][3].lock),he.add($[3].fire),D[$[0]]=function(){return D[$[0]+"With"](this===D?void 0:this,arguments),this},D[$[0]+"With"]=he.fireWith}),k.promise(D),g&&g.call(D,D),D},when:function(g){var x=arguments.length,P=x,k=Array(P),D=s.call(arguments),F=p.Deferred(),$=function(he){return function(se){k[he]=this,D[he]=arguments.length>1?s.call(arguments):se,--x||F.resolveWith(k,D)}};if(x<=1&&(L(g,F.done($(P)).resolve,F.reject,!x),F.state()==="pending"||_(D[P]&&D[P].then)))return F.then();for(;P--;)L(D[P],$(P),F.reject);return F.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(g,x){t.console&&t.console.warn&&g&&B.test(g.name)&&t.console.warn("jQuery.Deferred exception: "+g.message,g.stack,x)},p.readyException=function(g){t.setTimeout(function(){throw g})};var H=p.Deferred();p.fn.ready=function(g){return H.then(g).catch(function(x){p.readyException(x)}),this},p.extend({isReady:!1,readyWait:1,ready:function(g){(g===!0?--p.readyWait:p.isReady)||(p.isReady=!0,!(g!==!0&&--p.readyWait>0)&&H.resolveWith(S,[p]))}}),p.ready.then=H.then;function X(){S.removeEventListener("DOMContentLoaded",X),t.removeEventListener("load",X),p.ready()}S.readyState==="complete"||S.readyState!=="loading"&&!S.documentElement.doScroll?t.setTimeout(p.ready):(S.addEventListener("DOMContentLoaded",X),t.addEventListener("load",X));var xe=function(g,x,P,k,D,F,$){var he=0,se=g.length,Ee=P==null;if(T(P)==="object"){D=!0;for(he in P)xe(g,x,he,P[he],!0,F,$)}else if(k!==void 0&&(D=!0,_(k)||($=!0),Ee&&($?(x.call(g,k),x=null):(Ee=x,x=function(De,Ge,Me){return Ee.call(p(De),Me)})),x))for(;he<se;he++)x(g[he],P,$?k:k.call(g[he],he,x(g[he],P)));return D?g:Ee?x.call(g):se?x(g[0],P):F},ue=/^-ms-/,Ae=/-([a-z])/g;function Ce(g,x){return x.toUpperCase()}function Be(g){return g.replace(ue,"ms-").replace(Ae,Ce)}var Le=function(g){return g.nodeType===1||g.nodeType===9||!+g.nodeType};function Ie(){this.expando=p.expando+Ie.uid++}Ie.uid=1,Ie.prototype={cache:function(g){var x=g[this.expando];return x||(x={},Le(g)&&(g.nodeType?g[this.expando]=x:Object.defineProperty(g,this.expando,{value:x,configurable:!0}))),x},set:function(g,x,P){var k,D=this.cache(g);if(typeof x=="string")D[Be(x)]=P;else for(k in x)D[Be(k)]=x[k];return D},get:function(g,x){return x===void 0?this.cache(g):g[this.expando]&&g[this.expando][Be(x)]},access:function(g,x,P){return x===void 0||x&&typeof x=="string"&&P===void 0?this.get(g,x):(this.set(g,x,P),P!==void 0?P:x)},remove:function(g,x){var P,k=g[this.expando];if(k!==void 0){if(x!==void 0)for(Array.isArray(x)?x=x.map(Be):(x=Be(x),x=x in k?[x]:x.match(Ne)||[]),P=x.length;P--;)delete k[x[P]];(x===void 0||p.isEmptyObject(k))&&(g.nodeType?g[this.expando]=void 0:delete g[this.expando])}},hasData:function(g){var x=g[this.expando];return x!==void 0&&!p.isEmptyObject(x)}};var be=new Ie,je=new Ie,ct=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,mt=/[A-Z]/g;function ft(g){return g==="true"?!0:g==="false"?!1:g==="null"?null:g===+g+""?+g:ct.test(g)?JSON.parse(g):g}function it(g,x,P){var k;if(P===void 0&&g.nodeType===1)if(k="data-"+x.replace(mt,"-$&").toLowerCase(),P=g.getAttribute(k),typeof P=="string"){try{P=ft(P)}catch{}je.set(g,x,P)}else P=void 0;return P}p.extend({hasData:function(g){return je.hasData(g)||be.hasData(g)},data:function(g,x,P){return je.access(g,x,P)},removeData:function(g,x){je.remove(g,x)},_data:function(g,x,P){return be.access(g,x,P)},_removeData:function(g,x){be.remove(g,x)}}),p.fn.extend({data:function(g,x){var P,k,D,F=this[0],$=F&&F.attributes;if(g===void 0){if(this.length&&(D=je.get(F),F.nodeType===1&&!be.get(F,"hasDataAttrs"))){for(P=$.length;P--;)$[P]&&(k=$[P].name,k.indexOf("data-")===0&&(k=Be(k.slice(5)),it(F,k,D[k])));be.set(F,"hasDataAttrs",!0)}return D}return typeof g=="object"?this.each(function(){je.set(this,g)}):xe(this,function(he){var se;if(F&&he===void 0)return se=je.get(F,g),se!==void 0||(se=it(F,g),se!==void 0)?se:void 0;this.each(function(){je.set(this,g,he)})},null,x,arguments.length>1,null,!0)},removeData:function(g){return this.each(function(){je.remove(this,g)})}}),p.extend({queue:function(g,x,P){var k;if(g)return x=(x||"fx")+"queue",k=be.get(g,x),P&&(!k||Array.isArray(P)?k=be.access(g,x,p.makeArray(P)):k.push(P)),k||[]},dequeue:function(g,x){x=x||"fx";var P=p.queue(g,x),k=P.length,D=P.shift(),F=p._queueHooks(g,x),$=function(){p.dequeue(g,x)};D==="inprogress"&&(D=P.shift(),k--),D&&(x==="fx"&&P.unshift("inprogress"),delete F.stop,D.call(g,$,F)),!k&&F&&F.empty.fire()},_queueHooks:function(g,x){var P=x+"queueHooks";return be.get(g,P)||be.access(g,P,{empty:p.Callbacks("once memory").add(function(){be.remove(g,[x+"queue",P])})})}}),p.fn.extend({queue:function(g,x){var P=2;return typeof g!="string"&&(x=g,g="fx",P--),arguments.length<P?p.queue(this[0],g):x===void 0?this:this.each(function(){var k=p.queue(this,g,x);p._queueHooks(this,g),g==="fx"&&k[0]!=="inprogress"&&p.dequeue(this,g)})},dequeue:function(g){return this.each(function(){p.dequeue(this,g)})},clearQueue:function(g){return this.queue(g||"fx",[])},promise:function(g,x){var P,k=1,D=p.Deferred(),F=this,$=this.length,he=function(){--k||D.resolveWith(F,[F])};for(typeof g!="string"&&(x=g,g=void 0),g=g||"fx";$--;)P=be.get(F[$],g+"queueHooks"),P&&P.empty&&(k++,P.empty.add(he));return he(),D.promise(x)}});var Ht=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,yr=new RegExp("^(?:([+-])=|)("+Ht+")([a-z%]*)$","i"),Qt=["Top","Right","Bottom","Left"],cr=S.documentElement,Lr=function(g){return p.contains(g.ownerDocument,g)},Br={composed:!0};cr.getRootNode&&(Lr=function(g){return p.contains(g.ownerDocument,g)||g.getRootNode(Br)===g.ownerDocument});var bn=function(g,x){return g=x||g,g.style.display==="none"||g.style.display===""&&Lr(g)&&p.css(g,"display")==="none"};function tr(g,x,P,k){var D,F,$=20,he=k?function(){return k.cur()}:function(){return p.css(g,x,"")},se=he(),Ee=P&&P[3]||(p.cssNumber[x]?"":"px"),De=g.nodeType&&(p.cssNumber[x]||Ee!=="px"&&+se)&&yr.exec(p.css(g,x));if(De&&De[3]!==Ee){for(se=se/2,Ee=Ee||De[3],De=+se||1;$--;)p.style(g,x,De+Ee),(1-F)*(1-(F=he()/se||.5))<=0&&($=0),De=De/F;De=De*2,p.style(g,x,De+Ee),P=P||[]}return P&&(De=+De||+se||0,D=P[1]?De+(P[1]+1)*P[2]:+P[2],k&&(k.unit=Ee,k.start=De,k.end=D)),D}var Ir={};function vn(g){var x,P=g.ownerDocument,k=g.nodeName,D=Ir[k];return D||(x=P.body.appendChild(P.createElement(k)),D=p.css(x,"display"),x.parentNode.removeChild(x),D==="none"&&(D="block"),Ir[k]=D,D)}function mn(g,x){for(var P,k,D=[],F=0,$=g.length;F<$;F++)k=g[F],k.style&&(P=k.style.display,x?(P==="none"&&(D[F]=be.get(k,"display")||null,D[F]||(k.style.display="")),k.style.display===""&&bn(k)&&(D[F]=vn(k))):P!=="none"&&(D[F]="none",be.set(k,"display",P)));for(F=0;F<$;F++)D[F]!=null&&(g[F].style.display=D[F]);return g}p.fn.extend({show:function(){return mn(this,!0)},hide:function(){return mn(this)},toggle:function(g){return typeof g=="boolean"?g?this.show():this.hide():this.each(function(){bn(this)?p(this).show():p(this).hide()})}});var pn=/^(?:checkbox|radio)$/i,Gn=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ei=/^$|^module$|\/(?:java|ecma)script/i;(function(){var g=S.createDocumentFragment(),x=g.appendChild(S.createElement("div")),P=S.createElement("input");P.setAttribute("type","radio"),P.setAttribute("checked","checked"),P.setAttribute("name","t"),x.appendChild(P),m.checkClone=x.cloneNode(!0).cloneNode(!0).lastChild.checked,x.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!x.cloneNode(!0).lastChild.defaultValue,x.innerHTML="<option></option>",m.option=!!x.lastChild})();var Bt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Bt.tbody=Bt.tfoot=Bt.colgroup=Bt.caption=Bt.thead,Bt.th=Bt.td,m.option||(Bt.optgroup=Bt.option=[1,"<select multiple='multiple'>","</select>"]);function Ft(g,x){var P;return typeof g.getElementsByTagName<"u"?P=g.getElementsByTagName(x||"*"):typeof g.querySelectorAll<"u"?P=g.querySelectorAll(x||"*"):P=[],x===void 0||x&&O(g,x)?p.merge([g],P):P}function zr(g,x){for(var P=0,k=g.length;P<k;P++)be.set(g[P],"globalEval",!x||be.get(x[P],"globalEval"))}var Fn=/<|&#?\w+;/;function wn(g,x,P,k,D){for(var F,$,he,se,Ee,De,Ge=x.createDocumentFragment(),Me=[],ut=0,St=g.length;ut<St;ut++)if(F=g[ut],F||F===0)if(T(F)==="object")p.merge(Me,F.nodeType?[F]:F);else if(!Fn.test(F))Me.push(x.createTextNode(F));else{for($=$||Ge.appendChild(x.createElement("div")),he=(Gn.exec(F)||["",""])[1].toLowerCase(),se=Bt[he]||Bt._default,$.innerHTML=se[1]+p.htmlPrefilter(F)+se[2],De=se[0];De--;)$=$.lastChild;p.merge(Me,$.childNodes),$=Ge.firstChild,$.textContent=""}for(Ge.textContent="",ut=0;F=Me[ut++];){if(k&&p.inArray(F,k)>-1){D&&D.push(F);continue}if(Ee=Lr(F),$=Ft(Ge.appendChild(F),"script"),Ee&&zr($),P)for(De=0;F=$[De++];)ei.test(F.type||"")&&P.push(F)}return Ge}var jr=/^([^.]*)(?:\.(.+)|)/;function $n(){return!0}function hi(){return!1}function Jr(g,x,P,k,D,F){var $,he;if(typeof x=="object"){typeof P!="string"&&(k=k||P,P=void 0);for(he in x)Jr(g,he,P,k,x[he],F);return g}if(k==null&&D==null?(D=P,k=P=void 0):D==null&&(typeof P=="string"?(D=k,k=void 0):(D=k,k=P,P=void 0)),D===!1)D=hi;else if(!D)return g;return F===1&&($=D,D=function(se){return p().off(se),$.apply(this,arguments)},D.guid=$.guid||($.guid=p.guid++)),g.each(function(){p.event.add(this,x,D,k,P)})}p.event={global:{},add:function(g,x,P,k,D){var F,$,he,se,Ee,De,Ge,Me,ut,St,ar,sr=be.get(g);if(Le(g))for(P.handler&&(F=P,P=F.handler,D=F.selector),D&&p.find.matchesSelector(cr,D),P.guid||(P.guid=p.guid++),(se=sr.events)||(se=sr.events=Object.create(null)),($=sr.handle)||($=sr.handle=function(oi){return typeof p<"u"&&p.event.triggered!==oi.type?p.event.dispatch.apply(g,arguments):void 0}),x=(x||"").match(Ne)||[""],Ee=x.length;Ee--;)he=jr.exec(x[Ee])||[],ut=ar=he[1],St=(he[2]||"").split(".").sort(),ut&&(Ge=p.event.special[ut]||{},ut=(D?Ge.delegateType:Ge.bindType)||ut,Ge=p.event.special[ut]||{},De=p.extend({type:ut,origType:ar,data:k,handler:P,guid:P.guid,selector:D,needsContext:D&&p.expr.match.needsContext.test(D),namespace:St.join(".")},F),(Me=se[ut])||(Me=se[ut]=[],Me.delegateCount=0,(!Ge.setup||Ge.setup.call(g,k,St,$)===!1)&&g.addEventListener&&g.addEventListener(ut,$)),Ge.add&&(Ge.add.call(g,De),De.handler.guid||(De.handler.guid=P.guid)),D?Me.splice(Me.delegateCount++,0,De):Me.push(De),p.event.global[ut]=!0)},remove:function(g,x,P,k,D){var F,$,he,se,Ee,De,Ge,Me,ut,St,ar,sr=be.hasData(g)&&be.get(g);if(!(!sr||!(se=sr.events))){for(x=(x||"").match(Ne)||[""],Ee=x.length;Ee--;){if(he=jr.exec(x[Ee])||[],ut=ar=he[1],St=(he[2]||"").split(".").sort(),!ut){for(ut in se)p.event.remove(g,ut+x[Ee],P,k,!0);continue}for(Ge=p.event.special[ut]||{},ut=(k?Ge.delegateType:Ge.bindType)||ut,Me=se[ut]||[],he=he[2]&&new RegExp("(^|\\.)"+St.join("\\.(?:.*\\.|)")+"(\\.|$)"),$=F=Me.length;F--;)De=Me[F],(D||ar===De.origType)&&(!P||P.guid===De.guid)&&(!he||he.test(De.namespace))&&(!k||k===De.selector||k==="**"&&De.selector)&&(Me.splice(F,1),De.selector&&Me.delegateCount--,Ge.remove&&Ge.remove.call(g,De));$&&!Me.length&&((!Ge.teardown||Ge.teardown.call(g,St,sr.handle)===!1)&&p.removeEvent(g,ut,sr.handle),delete se[ut])}p.isEmptyObject(se)&&be.remove(g,"handle events")}},dispatch:function(g){var x,P,k,D,F,$,he=new Array(arguments.length),se=p.event.fix(g),Ee=(be.get(this,"events")||Object.create(null))[se.type]||[],De=p.event.special[se.type]||{};for(he[0]=se,x=1;x<arguments.length;x++)he[x]=arguments[x];if(se.delegateTarget=this,!(De.preDispatch&&De.preDispatch.call(this,se)===!1)){for($=p.event.handlers.call(this,se,Ee),x=0;(D=$[x++])&&!se.isPropagationStopped();)for(se.currentTarget=D.elem,P=0;(F=D.handlers[P++])&&!se.isImmediatePropagationStopped();)(!se.rnamespace||F.namespace===!1||se.rnamespace.test(F.namespace))&&(se.handleObj=F,se.data=F.data,k=((p.event.special[F.origType]||{}).handle||F.handler).apply(D.elem,he),k!==void 0&&(se.result=k)===!1&&(se.preventDefault(),se.stopPropagation()));return De.postDispatch&&De.postDispatch.call(this,se),se.result}},handlers:function(g,x){var P,k,D,F,$,he=[],se=x.delegateCount,Ee=g.target;if(se&&Ee.nodeType&&!(g.type==="click"&&g.button>=1)){for(;Ee!==this;Ee=Ee.parentNode||this)if(Ee.nodeType===1&&!(g.type==="click"&&Ee.disabled===!0)){for(F=[],$={},P=0;P<se;P++)k=x[P],D=k.selector+" ",$[D]===void 0&&($[D]=k.needsContext?p(D,this).index(Ee)>-1:p.find(D,this,null,[Ee]).length),$[D]&&F.push(k);F.length&&he.push({elem:Ee,handlers:F})}}return Ee=this,se<x.length&&he.push({elem:Ee,handlers:x.slice(se)}),he},addProp:function(g,x){Object.defineProperty(p.Event.prototype,g,{enumerable:!0,configurable:!0,get:_(x)?function(){if(this.originalEvent)return x(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[g]},set:function(P){Object.defineProperty(this,g,{enumerable:!0,configurable:!0,writable:!0,value:P})}})},fix:function(g){return g[p.expando]?g:new p.Event(g)},special:{load:{noBubble:!0},click:{setup:function(g){var x=this||g;return pn.test(x.type)&&x.click&&O(x,"input")&&Un(x,"click",!0),!1},trigger:function(g){var x=this||g;return pn.test(x.type)&&x.click&&O(x,"input")&&Un(x,"click"),!0},_default:function(g){var x=g.target;return pn.test(x.type)&&x.click&&O(x,"input")&&be.get(x,"click")||O(x,"a")}},beforeunload:{postDispatch:function(g){g.result!==void 0&&g.originalEvent&&(g.originalEvent.returnValue=g.result)}}}};function Un(g,x,P){if(!P){be.get(g,x)===void 0&&p.event.add(g,x,$n);return}be.set(g,x,!1),p.event.add(g,x,{namespace:!1,handler:function(k){var D,F=be.get(this,x);if(k.isTrigger&1&&this[x]){if(F)(p.event.special[x]||{}).delegateType&&k.stopPropagation();else if(F=s.call(arguments),be.set(this,x,F),this[x](),D=be.get(this,x),be.set(this,x,!1),F!==D)return k.stopImmediatePropagation(),k.preventDefault(),D}else F&&(be.set(this,x,p.event.trigger(F[0],F.slice(1),this)),k.stopPropagation(),k.isImmediatePropagationStopped=$n)}})}p.removeEvent=function(g,x,P){g.removeEventListener&&g.removeEventListener(x,P)},p.Event=function(g,x){if(!(this instanceof p.Event))return new p.Event(g,x);g&&g.type?(this.originalEvent=g,this.type=g.type,this.isDefaultPrevented=g.defaultPrevented||g.defaultPrevented===void 0&&g.returnValue===!1?$n:hi,this.target=g.target&&g.target.nodeType===3?g.target.parentNode:g.target,this.currentTarget=g.currentTarget,this.relatedTarget=g.relatedTarget):this.type=g,x&&p.extend(this,x),this.timeStamp=g&&g.timeStamp||Date.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:hi,isPropagationStopped:hi,isImmediatePropagationStopped:hi,isSimulated:!1,preventDefault:function(){var g=this.originalEvent;this.isDefaultPrevented=$n,g&&!this.isSimulated&&g.preventDefault()},stopPropagation:function(){var g=this.originalEvent;this.isPropagationStopped=$n,g&&!this.isSimulated&&g.stopPropagation()},stopImmediatePropagation:function(){var g=this.originalEvent;this.isImmediatePropagationStopped=$n,g&&!this.isSimulated&&g.stopImmediatePropagation(),this.stopPropagation()}},p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},p.event.addProp),p.each({focus:"focusin",blur:"focusout"},function(g,x){function P(k){if(S.documentMode){var D=be.get(this,"handle"),F=p.event.fix(k);F.type=k.type==="focusin"?"focus":"blur",F.isSimulated=!0,D(k),F.target===F.currentTarget&&D(F)}else p.event.simulate(x,k.target,p.event.fix(k))}p.event.special[g]={setup:function(){var k;if(Un(this,g,!0),S.documentMode)k=be.get(this,x),k||this.addEventListener(x,P),be.set(this,x,(k||0)+1);else return!1},trigger:function(){return Un(this,g),!0},teardown:function(){var k;if(S.documentMode)k=be.get(this,x)-1,k?be.set(this,x,k):(this.removeEventListener(x,P),be.remove(this,x));else return!1},_default:function(k){return be.get(k.target,g)},delegateType:x},p.event.special[x]={setup:function(){var k=this.ownerDocument||this.document||this,D=S.documentMode?this:k,F=be.get(D,x);F||(S.documentMode?this.addEventListener(x,P):k.addEventListener(g,P,!0)),be.set(D,x,(F||0)+1)},teardown:function(){var k=this.ownerDocument||this.document||this,D=S.documentMode?this:k,F=be.get(D,x)-1;F?be.set(D,x,F):(S.documentMode?this.removeEventListener(x,P):k.removeEventListener(g,P,!0),be.remove(D,x))}}}),p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(g,x){p.event.special[g]={delegateType:x,bindType:x,handle:function(P){var k,D=this,F=P.relatedTarget,$=P.handleObj;return(!F||F!==D&&!p.contains(D,F))&&(P.type=$.origType,k=$.handler.apply(this,arguments),P.type=x),k}}}),p.fn.extend({on:function(g,x,P,k){return Jr(this,g,x,P,k)},one:function(g,x,P,k){return Jr(this,g,x,P,k,1)},off:function(g,x,P){var k,D;if(g&&g.preventDefault&&g.handleObj)return k=g.handleObj,p(g.delegateTarget).off(k.namespace?k.origType+"."+k.namespace:k.origType,k.selector,k.handler),this;if(typeof g=="object"){for(D in g)this.off(D,x,g[D]);return this}return(x===!1||typeof x=="function")&&(P=x,x=void 0),P===!1&&(P=hi),this.each(function(){p.event.remove(this,g,P,x)})}});var On=/<script|<style|<link/i,di=/checked\s*(?:[^=]|=\s*.checked.)/i,Xe=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Et(g,x){return O(g,"table")&&O(x.nodeType!==11?x:x.firstChild,"tr")&&p(g).children("tbody")[0]||g}function Rt(g){return g.type=(g.getAttribute("type")!==null)+"/"+g.type,g}function kt(g){return(g.type||"").slice(0,5)==="true/"?g.type=g.type.slice(5):g.removeAttribute("type"),g}function Lt(g,x){var P,k,D,F,$,he,se;if(x.nodeType===1){if(be.hasData(g)&&(F=be.get(g),se=F.events,se)){be.remove(x,"handle events");for(D in se)for(P=0,k=se[D].length;P<k;P++)p.event.add(x,D,se[D][P])}je.hasData(g)&&($=je.access(g),he=p.extend({},$),je.set(x,he))}}function at(g,x){var P=x.nodeName.toLowerCase();P==="input"&&pn.test(g.type)?x.checked=g.checked:(P==="input"||P==="textarea")&&(x.defaultValue=g.defaultValue)}function He(g,x,P,k){x=o(x);var D,F,$,he,se,Ee,De=0,Ge=g.length,Me=Ge-1,ut=x[0],St=_(ut);if(St||Ge>1&&typeof ut=="string"&&!m.checkClone&&di.test(ut))return g.each(function(ar){var sr=g.eq(ar);St&&(x[0]=ut.call(this,ar,sr.html())),He(sr,x,P,k)});if(Ge&&(D=wn(x,g[0].ownerDocument,!1,g,k),F=D.firstChild,D.childNodes.length===1&&(D=F),F||k)){for($=p.map(Ft(D,"script"),Rt),he=$.length;De<Ge;De++)se=D,De!==Me&&(se=p.clone(se,!0,!0),he&&p.merge($,Ft(se,"script"))),P.call(g[De],se,De);if(he)for(Ee=$[$.length-1].ownerDocument,p.map($,kt),De=0;De<he;De++)se=$[De],ei.test(se.type||"")&&!be.access(se,"globalEval")&&p.contains(Ee,se)&&(se.src&&(se.type||"").toLowerCase()!=="module"?p._evalUrl&&!se.noModule&&p._evalUrl(se.src,{nonce:se.nonce||se.getAttribute("nonce")},Ee):A(se.textContent.replace(Xe,""),se,Ee))}return g}function yt(g,x,P){for(var k,D=x?p.filter(x,g):g,F=0;(k=D[F])!=null;F++)!P&&k.nodeType===1&&p.cleanData(Ft(k)),k.parentNode&&(P&&Lr(k)&&zr(Ft(k,"script")),k.parentNode.removeChild(k));return g}p.extend({htmlPrefilter:function(g){return g},clone:function(g,x,P){var k,D,F,$,he=g.cloneNode(!0),se=Lr(g);if(!m.noCloneChecked&&(g.nodeType===1||g.nodeType===11)&&!p.isXMLDoc(g))for($=Ft(he),F=Ft(g),k=0,D=F.length;k<D;k++)at(F[k],$[k]);if(x)if(P)for(F=F||Ft(g),$=$||Ft(he),k=0,D=F.length;k<D;k++)Lt(F[k],$[k]);else Lt(g,he);return $=Ft(he,"script"),$.length>0&&zr($,!se&&Ft(g,"script")),he},cleanData:function(g){for(var x,P,k,D=p.event.special,F=0;(P=g[F])!==void 0;F++)if(Le(P)){if(x=P[be.expando]){if(x.events)for(k in x.events)D[k]?p.event.remove(P,k):p.removeEvent(P,k,x.handle);P[be.expando]=void 0}P[je.expando]&&(P[je.expando]=void 0)}}}),p.fn.extend({detach:function(g){return yt(this,g,!0)},remove:function(g){return yt(this,g)},text:function(g){return xe(this,function(x){return x===void 0?p.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=x)})},null,g,arguments.length)},append:function(){return He(this,arguments,function(g){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var x=Et(this,g);x.appendChild(g)}})},prepend:function(){return He(this,arguments,function(g){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var x=Et(this,g);x.insertBefore(g,x.firstChild)}})},before:function(){return He(this,arguments,function(g){this.parentNode&&this.parentNode.insertBefore(g,this)})},after:function(){return He(this,arguments,function(g){this.parentNode&&this.parentNode.insertBefore(g,this.nextSibling)})},empty:function(){for(var g,x=0;(g=this[x])!=null;x++)g.nodeType===1&&(p.cleanData(Ft(g,!1)),g.textContent="");return this},clone:function(g,x){return g=g??!1,x=x??g,this.map(function(){return p.clone(this,g,x)})},html:function(g){return xe(this,function(x){var P=this[0]||{},k=0,D=this.length;if(x===void 0&&P.nodeType===1)return P.innerHTML;if(typeof x=="string"&&!On.test(x)&&!Bt[(Gn.exec(x)||["",""])[1].toLowerCase()]){x=p.htmlPrefilter(x);try{for(;k<D;k++)P=this[k]||{},P.nodeType===1&&(p.cleanData(Ft(P,!1)),P.innerHTML=x);P=0}catch{}}P&&this.empty().append(x)},null,g,arguments.length)},replaceWith:function(){var g=[];return He(this,arguments,function(x){var P=this.parentNode;p.inArray(this,g)<0&&(p.cleanData(Ft(this)),P&&P.replaceChild(x,this))},g)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(g,x){p.fn[g]=function(P){for(var k,D=[],F=p(P),$=F.length-1,he=0;he<=$;he++)k=he===$?this:this.clone(!0),p(F[he])[x](k),a.apply(D,k.get());return this.pushStack(D)}});var Tt=new RegExp("^("+Ht+")(?!px)[a-z%]+$","i"),zt=/^--/,an=function(g){var x=g.ownerDocument.defaultView;return(!x||!x.opener)&&(x=t),x.getComputedStyle(g)},jn=function(g,x,P){var k,D,F={};for(D in x)F[D]=g.style[D],g.style[D]=x[D];k=P.call(g);for(D in x)g.style[D]=F[D];return k},Mt=new RegExp(Qt.join("|"),"i");(function(){function g(){if(Ee){se.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ee.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",cr.appendChild(se).appendChild(Ee);var De=t.getComputedStyle(Ee);P=De.top!=="1%",he=x(De.marginLeft)===12,Ee.style.right="60%",F=x(De.right)===36,k=x(De.width)===36,Ee.style.position="absolute",D=x(Ee.offsetWidth/3)===12,cr.removeChild(se),Ee=null}}function x(De){return Math.round(parseFloat(De))}var P,k,D,F,$,he,se=S.createElement("div"),Ee=S.createElement("div");Ee.style&&(Ee.style.backgroundClip="content-box",Ee.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle=Ee.style.backgroundClip==="content-box",p.extend(m,{boxSizingReliable:function(){return g(),k},pixelBoxStyles:function(){return g(),F},pixelPosition:function(){return g(),P},reliableMarginLeft:function(){return g(),he},scrollboxSize:function(){return g(),D},reliableTrDimensions:function(){var De,Ge,Me,ut;return $==null&&(De=S.createElement("table"),Ge=S.createElement("tr"),Me=S.createElement("div"),De.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ge.style.cssText="box-sizing:content-box;border:1px solid",Ge.style.height="1px",Me.style.height="9px",Me.style.display="block",cr.appendChild(De).appendChild(Ge).appendChild(Me),ut=t.getComputedStyle(Ge),$=parseInt(ut.height,10)+parseInt(ut.borderTopWidth,10)+parseInt(ut.borderBottomWidth,10)===Ge.offsetHeight,cr.removeChild(De)),$}}))})();function en(g,x,P){var k,D,F,$,he=zt.test(x),se=g.style;return P=P||an(g),P&&($=P.getPropertyValue(x)||P[x],he&&$&&($=$.replace(ee,"$1")||void 0),$===""&&!Lr(g)&&($=p.style(g,x)),!m.pixelBoxStyles()&&Tt.test($)&&Mt.test(x)&&(k=se.width,D=se.minWidth,F=se.maxWidth,se.minWidth=se.maxWidth=se.width=$,$=P.width,se.width=k,se.minWidth=D,se.maxWidth=F)),$!==void 0?$+"":$}function xr(g,x){return{get:function(){if(g()){delete this.get;return}return(this.get=x).apply(this,arguments)}}}var Nr=["Webkit","Moz","ms"],Vr=S.createElement("div").style,Sr={};function xn(g){for(var x=g[0].toUpperCase()+g.slice(1),P=Nr.length;P--;)if(g=Nr[P]+x,g in Vr)return g}function Xt(g){var x=p.cssProps[g]||Sr[g];return x||(g in Vr?g:Sr[g]=xn(g)||g)}var pi=/^(none|table(?!-c[ea]).+)/,wi={position:"absolute",visibility:"hidden",display:"block"},qi={letterSpacing:"0",fontWeight:"400"};function Ze(g,x,P){var k=yr.exec(x);return k?Math.max(0,k[2]-(P||0))+(k[3]||"px"):x}function gt(g,x,P,k,D,F){var $=x==="width"?1:0,he=0,se=0,Ee=0;if(P===(k?"border":"content"))return 0;for(;$<4;$+=2)P==="margin"&&(Ee+=p.css(g,P+Qt[$],!0,D)),k?(P==="content"&&(se-=p.css(g,"padding"+Qt[$],!0,D)),P!=="margin"&&(se-=p.css(g,"border"+Qt[$]+"Width",!0,D))):(se+=p.css(g,"padding"+Qt[$],!0,D),P!=="padding"?se+=p.css(g,"border"+Qt[$]+"Width",!0,D):he+=p.css(g,"border"+Qt[$]+"Width",!0,D));return!k&&F>=0&&(se+=Math.max(0,Math.ceil(g["offset"+x[0].toUpperCase()+x.slice(1)]-F-se-he-.5))||0),se+Ee}function ht(g,x,P){var k=an(g),D=!m.boxSizingReliable()||P,F=D&&p.css(g,"boxSizing",!1,k)==="border-box",$=F,he=en(g,x,k),se="offset"+x[0].toUpperCase()+x.slice(1);if(Tt.test(he)){if(!P)return he;he="auto"}return(!m.boxSizingReliable()&&F||!m.reliableTrDimensions()&&O(g,"tr")||he==="auto"||!parseFloat(he)&&p.css(g,"display",!1,k)==="inline")&&g.getClientRects().length&&(F=p.css(g,"boxSizing",!1,k)==="border-box",$=se in g,$&&(he=g[se])),he=parseFloat(he)||0,he+gt(g,x,P||(F?"border":"content"),$,k,he)+"px"}p.extend({cssHooks:{opacity:{get:function(g,x){if(x){var P=en(g,"opacity");return P===""?"1":P}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(g,x,P,k){if(!(!g||g.nodeType===3||g.nodeType===8||!g.style)){var D,F,$,he=Be(x),se=zt.test(x),Ee=g.style;if(se||(x=Xt(he)),$=p.cssHooks[x]||p.cssHooks[he],P!==void 0){if(F=typeof P,F==="string"&&(D=yr.exec(P))&&D[1]&&(P=tr(g,x,D),F="number"),P==null||P!==P)return;F==="number"&&!se&&(P+=D&&D[3]||(p.cssNumber[he]?"":"px")),!m.clearCloneStyle&&P===""&&x.indexOf("background")===0&&(Ee[x]="inherit"),(!$||!("set"in $)||(P=$.set(g,P,k))!==void 0)&&(se?Ee.setProperty(x,P):Ee[x]=P)}else return $&&"get"in $&&(D=$.get(g,!1,k))!==void 0?D:Ee[x]}},css:function(g,x,P,k){var D,F,$,he=Be(x),se=zt.test(x);return se||(x=Xt(he)),$=p.cssHooks[x]||p.cssHooks[he],$&&"get"in $&&(D=$.get(g,!0,P)),D===void 0&&(D=en(g,x,k)),D==="normal"&&x in qi&&(D=qi[x]),P===""||P?(F=parseFloat(D),P===!0||isFinite(F)?F||0:D):D}}),p.each(["height","width"],function(g,x){p.cssHooks[x]={get:function(P,k,D){if(k)return pi.test(p.css(P,"display"))&&(!P.getClientRects().length||!P.getBoundingClientRect().width)?jn(P,wi,function(){return ht(P,x,D)}):ht(P,x,D)},set:function(P,k,D){var F,$=an(P),he=!m.scrollboxSize()&&$.position==="absolute",se=he||D,Ee=se&&p.css(P,"boxSizing",!1,$)==="border-box",De=D?gt(P,x,D,Ee,$):0;return Ee&&he&&(De-=Math.ceil(P["offset"+x[0].toUpperCase()+x.slice(1)]-parseFloat($[x])-gt(P,x,"border",!1,$)-.5)),De&&(F=yr.exec(k))&&(F[3]||"px")!=="px"&&(P.style[x]=k,k=p.css(P,x)),Ze(P,k,De)}}}),p.cssHooks.marginLeft=xr(m.reliableMarginLeft,function(g,x){if(x)return(parseFloat(en(g,"marginLeft"))||g.getBoundingClientRect().left-jn(g,{marginLeft:0},function(){return g.getBoundingClientRect().left}))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(g,x){p.cssHooks[g+x]={expand:function(P){for(var k=0,D={},F=typeof P=="string"?P.split(" "):[P];k<4;k++)D[g+Qt[k]+x]=F[k]||F[k-2]||F[0];return D}},g!=="margin"&&(p.cssHooks[g+x].set=Ze)}),p.fn.extend({css:function(g,x){return xe(this,function(P,k,D){var F,$,he={},se=0;if(Array.isArray(k)){for(F=an(P),$=k.length;se<$;se++)he[k[se]]=p.css(P,k[se],!1,F);return he}return D!==void 0?p.style(P,k,D):p.css(P,k)},g,x,arguments.length>1)}});function dt(g,x,P,k,D){return new dt.prototype.init(g,x,P,k,D)}p.Tween=dt,dt.prototype={constructor:dt,init:function(g,x,P,k,D,F){this.elem=g,this.prop=P,this.easing=D||p.easing._default,this.options=x,this.start=this.now=this.cur(),this.end=k,this.unit=F||(p.cssNumber[P]?"":"px")},cur:function(){var g=dt.propHooks[this.prop];return g&&g.get?g.get(this):dt.propHooks._default.get(this)},run:function(g){var x,P=dt.propHooks[this.prop];return this.options.duration?this.pos=x=p.easing[this.easing](g,this.options.duration*g,0,1,this.options.duration):this.pos=x=g,this.now=(this.end-this.start)*x+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),P&&P.set?P.set(this):dt.propHooks._default.set(this),this}},dt.prototype.init.prototype=dt.prototype,dt.propHooks={_default:{get:function(g){var x;return g.elem.nodeType!==1||g.elem[g.prop]!=null&&g.elem.style[g.prop]==null?g.elem[g.prop]:(x=p.css(g.elem,g.prop,""),!x||x==="auto"?0:x)},set:function(g){p.fx.step[g.prop]?p.fx.step[g.prop](g):g.elem.nodeType===1&&(p.cssHooks[g.prop]||g.elem.style[Xt(g.prop)]!=null)?p.style(g.elem,g.prop,g.now+g.unit):g.elem[g.prop]=g.now}}},dt.propHooks.scrollTop=dt.propHooks.scrollLeft={set:function(g){g.elem.nodeType&&g.elem.parentNode&&(g.elem[g.prop]=g.now)}},p.easing={linear:function(g){return g},swing:function(g){return .5-Math.cos(g*Math.PI)/2},_default:"swing"},p.fx=dt.prototype.init,p.fx.step={};var Ct,rr,Hr=/^(?:toggle|show|hide)$/,cn=/queueHooks$/;function Gr(){rr&&(S.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Gr):t.setTimeout(Gr,p.fx.interval),p.fx.tick())}function yn(){return t.setTimeout(function(){Ct=void 0}),Ct=Date.now()}function Bn(g,x){var P,k=0,D={height:g};for(x=x?1:0;k<4;k+=2-x)P=Qt[k],D["margin"+P]=D["padding"+P]=g;return x&&(D.opacity=D.width=g),D}function gi(g,x,P){for(var k,D=(Hn.tweeners[x]||[]).concat(Hn.tweeners["*"]),F=0,$=D.length;F<$;F++)if(k=D[F].call(P,x,g))return k}function zo(g,x,P){var k,D,F,$,he,se,Ee,De,Ge="width"in x||"height"in x,Me=this,ut={},St=g.style,ar=g.nodeType&&bn(g),sr=be.get(g,"fxshow");P.queue||($=p._queueHooks(g,"fx"),$.unqueued==null&&($.unqueued=0,he=$.empty.fire,$.empty.fire=function(){$.unqueued||he()}),$.unqueued++,Me.always(function(){Me.always(function(){$.unqueued--,p.queue(g,"fx").length||$.empty.fire()})}));for(k in x)if(D=x[k],Hr.test(D)){if(delete x[k],F=F||D==="toggle",D===(ar?"hide":"show"))if(D==="show"&&sr&&sr[k]!==void 0)ar=!0;else continue;ut[k]=sr&&sr[k]||p.style(g,k)}if(se=!p.isEmptyObject(x),!(!se&&p.isEmptyObject(ut))){Ge&&g.nodeType===1&&(P.overflow=[St.overflow,St.overflowX,St.overflowY],Ee=sr&&sr.display,Ee==null&&(Ee=be.get(g,"display")),De=p.css(g,"display"),De==="none"&&(Ee?De=Ee:(mn([g],!0),Ee=g.style.display||Ee,De=p.css(g,"display"),mn([g]))),(De==="inline"||De==="inline-block"&&Ee!=null)&&p.css(g,"float")==="none"&&(se||(Me.done(function(){St.display=Ee}),Ee==null&&(De=St.display,Ee=De==="none"?"":De)),St.display="inline-block")),P.overflow&&(St.overflow="hidden",Me.always(function(){St.overflow=P.overflow[0],St.overflowX=P.overflow[1],St.overflowY=P.overflow[2]})),se=!1;for(k in ut)se||(sr?"hidden"in sr&&(ar=sr.hidden):sr=be.access(g,"fxshow",{display:Ee}),F&&(sr.hidden=!ar),ar&&mn([g],!0),Me.done(function(){ar||mn([g]),be.remove(g,"fxshow");for(k in ut)p.style(g,k,ut[k])})),se=gi(ar?sr[k]:0,k,Me),k in sr||(sr[k]=se.start,ar&&(se.end=se.start,se.start=0))}}function xs(g,x){var P,k,D,F,$;for(P in g)if(k=Be(P),D=x[k],F=g[P],Array.isArray(F)&&(D=F[1],F=g[P]=F[0]),P!==k&&(g[k]=F,delete g[P]),$=p.cssHooks[k],$&&"expand"in $){F=$.expand(F),delete g[k];for(P in F)P in g||(g[P]=F[P],x[P]=D)}else x[k]=D}function Hn(g,x,P){var k,D,F=0,$=Hn.prefilters.length,he=p.Deferred().always(function(){delete se.elem}),se=function(){if(D)return!1;for(var Ge=Ct||yn(),Me=Math.max(0,Ee.startTime+Ee.duration-Ge),ut=Me/Ee.duration||0,St=1-ut,ar=0,sr=Ee.tweens.length;ar<sr;ar++)Ee.tweens[ar].run(St);return he.notifyWith(g,[Ee,St,Me]),St<1&&sr?Me:(sr||he.notifyWith(g,[Ee,1,0]),he.resolveWith(g,[Ee]),!1)},Ee=he.promise({elem:g,props:p.extend({},x),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},P),originalProperties:x,originalOptions:P,startTime:Ct||yn(),duration:P.duration,tweens:[],createTween:function(Ge,Me){var ut=p.Tween(g,Ee.opts,Ge,Me,Ee.opts.specialEasing[Ge]||Ee.opts.easing);return Ee.tweens.push(ut),ut},stop:function(Ge){var Me=0,ut=Ge?Ee.tweens.length:0;if(D)return this;for(D=!0;Me<ut;Me++)Ee.tweens[Me].run(1);return Ge?(he.notifyWith(g,[Ee,1,0]),he.resolveWith(g,[Ee,Ge])):he.rejectWith(g,[Ee,Ge]),this}}),De=Ee.props;for(xs(De,Ee.opts.specialEasing);F<$;F++)if(k=Hn.prefilters[F].call(Ee,g,De,Ee.opts),k)return _(k.stop)&&(p._queueHooks(Ee.elem,Ee.opts.queue).stop=k.stop.bind(k)),k;return p.map(De,gi,Ee),_(Ee.opts.start)&&Ee.opts.start.call(g,Ee),Ee.progress(Ee.opts.progress).done(Ee.opts.done,Ee.opts.complete).fail(Ee.opts.fail).always(Ee.opts.always),p.fx.timer(p.extend(se,{elem:g,anim:Ee,queue:Ee.opts.queue})),Ee}p.Animation=p.extend(Hn,{tweeners:{"*":[function(g,x){var P=this.createTween(g,x);return tr(P.elem,g,yr.exec(x),P),P}]},tweener:function(g,x){_(g)?(x=g,g=["*"]):g=g.match(Ne);for(var P,k=0,D=g.length;k<D;k++)P=g[k],Hn.tweeners[P]=Hn.tweeners[P]||[],Hn.tweeners[P].unshift(x)},prefilters:[zo],prefilter:function(g,x){x?Hn.prefilters.unshift(g):Hn.prefilters.push(g)}}),p.speed=function(g,x,P){var k=g&&typeof g=="object"?p.extend({},g):{complete:P||!P&&x||_(g)&&g,duration:g,easing:P&&x||x&&!_(x)&&x};return p.fx.off?k.duration=0:typeof k.duration!="number"&&(k.duration in p.fx.speeds?k.duration=p.fx.speeds[k.duration]:k.duration=p.fx.speeds._default),(k.queue==null||k.queue===!0)&&(k.queue="fx"),k.old=k.complete,k.complete=function(){_(k.old)&&k.old.call(this),k.queue&&p.dequeue(this,k.queue)},k},p.fn.extend({fadeTo:function(g,x,P,k){return this.filter(bn).css("opacity",0).show().end().animate({opacity:x},g,P,k)},animate:function(g,x,P,k){var D=p.isEmptyObject(g),F=p.speed(x,P,k),$=function(){var he=Hn(this,p.extend({},g),F);(D||be.get(this,"finish"))&&he.stop(!0)};return $.finish=$,D||F.queue===!1?this.each($):this.queue(F.queue,$)},stop:function(g,x,P){var k=function(D){var F=D.stop;delete D.stop,F(P)};return typeof g!="string"&&(P=x,x=g,g=void 0),x&&this.queue(g||"fx",[]),this.each(function(){var D=!0,F=g!=null&&g+"queueHooks",$=p.timers,he=be.get(this);if(F)he[F]&&he[F].stop&&k(he[F]);else for(F in he)he[F]&&he[F].stop&&cn.test(F)&&k(he[F]);for(F=$.length;F--;)$[F].elem===this&&(g==null||$[F].queue===g)&&($[F].anim.stop(P),D=!1,$.splice(F,1));(D||!P)&&p.dequeue(this,g)})},finish:function(g){return g!==!1&&(g=g||"fx"),this.each(function(){var x,P=be.get(this),k=P[g+"queue"],D=P[g+"queueHooks"],F=p.timers,$=k?k.length:0;for(P.finish=!0,p.queue(this,g,[]),D&&D.stop&&D.stop.call(this,!0),x=F.length;x--;)F[x].elem===this&&F[x].queue===g&&(F[x].anim.stop(!0),F.splice(x,1));for(x=0;x<$;x++)k[x]&&k[x].finish&&k[x].finish.call(this);delete P.finish})}}),p.each(["toggle","show","hide"],function(g,x){var P=p.fn[x];p.fn[x]=function(k,D,F){return k==null||typeof k=="boolean"?P.apply(this,arguments):this.animate(Bn(x,!0),k,D,F)}}),p.each({slideDown:Bn("show"),slideUp:Bn("hide"),slideToggle:Bn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(g,x){p.fn[g]=function(P,k,D){return this.animate(x,P,k,D)}}),p.timers=[],p.fx.tick=function(){var g,x=0,P=p.timers;for(Ct=Date.now();x<P.length;x++)g=P[x],!g()&&P[x]===g&&P.splice(x--,1);P.length||p.fx.stop(),Ct=void 0},p.fx.timer=function(g){p.timers.push(g),p.fx.start()},p.fx.interval=13,p.fx.start=function(){rr||(rr=!0,Gr())},p.fx.stop=function(){rr=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(g,x){return g=p.fx&&p.fx.speeds[g]||g,x=x||"fx",this.queue(x,function(P,k){var D=t.setTimeout(P,g);k.stop=function(){t.clearTimeout(D)}})},function(){var g=S.createElement("input"),x=S.createElement("select"),P=x.appendChild(S.createElement("option"));g.type="checkbox",m.checkOn=g.value!=="",m.optSelected=P.selected,g=S.createElement("input"),g.value="t",g.type="radio",m.radioValue=g.value==="t"}();var _a,es=p.expr.attrHandle;p.fn.extend({attr:function(g,x){return xe(this,p.attr,g,x,arguments.length>1)},removeAttr:function(g){return this.each(function(){p.removeAttr(this,g)})}}),p.extend({attr:function(g,x,P){var k,D,F=g.nodeType;if(!(F===3||F===8||F===2)){if(typeof g.getAttribute>"u")return p.prop(g,x,P);if((F!==1||!p.isXMLDoc(g))&&(D=p.attrHooks[x.toLowerCase()]||(p.expr.match.bool.test(x)?_a:void 0)),P!==void 0){if(P===null){p.removeAttr(g,x);return}return D&&"set"in D&&(k=D.set(g,P,x))!==void 0?k:(g.setAttribute(x,P+""),P)}return D&&"get"in D&&(k=D.get(g,x))!==null?k:(k=p.find.attr(g,x),k??void 0)}},attrHooks:{type:{set:function(g,x){if(!m.radioValue&&x==="radio"&&O(g,"input")){var P=g.value;return g.setAttribute("type",x),P&&(g.value=P),x}}}},removeAttr:function(g,x){var P,k=0,D=x&&x.match(Ne);if(D&&g.nodeType===1)for(;P=D[k++];)g.removeAttribute(P)}}),_a={set:function(g,x,P){return x===!1?p.removeAttr(g,P):g.setAttribute(P,P),P}},p.each(p.expr.match.bool.source.match(/\w+/g),function(g,x){var P=es[x]||p.find.attr;es[x]=function(k,D,F){var $,he,se=D.toLowerCase();return F||(he=es[se],es[se]=$,$=P(k,D,F)!=null?se:null,es[se]=he),$}});var ba=/^(?:input|select|textarea|button)$/i,Vo=/^(?:a|area)$/i;p.fn.extend({prop:function(g,x){return xe(this,p.prop,g,x,arguments.length>1)},removeProp:function(g){return this.each(function(){delete this[p.propFix[g]||g]})}}),p.extend({prop:function(g,x,P){var k,D,F=g.nodeType;if(!(F===3||F===8||F===2))return(F!==1||!p.isXMLDoc(g))&&(x=p.propFix[x]||x,D=p.propHooks[x]),P!==void 0?D&&"set"in D&&(k=D.set(g,P,x))!==void 0?k:g[x]=P:D&&"get"in D&&(k=D.get(g,x))!==null?k:g[x]},propHooks:{tabIndex:{get:function(g){var x=p.find.attr(g,"tabindex");return x?parseInt(x,10):ba.test(g.nodeName)||Vo.test(g.nodeName)&&g.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(p.propHooks.selected={get:function(g){var x=g.parentNode;return x&&x.parentNode&&x.parentNode.selectedIndex,null},set:function(g){var x=g.parentNode;x&&(x.selectedIndex,x.parentNode&&x.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});function Go(g){var x=g.match(Ne)||[];return x.join(" ")}function $o(g){return g.getAttribute&&g.getAttribute("class")||""}function Kl(g){return Array.isArray(g)?g:typeof g=="string"?g.match(Ne)||[]:[]}p.fn.extend({addClass:function(g){var x,P,k,D,F,$;return _(g)?this.each(function(he){p(this).addClass(g.call(this,he,$o(this)))}):(x=Kl(g),x.length?this.each(function(){if(k=$o(this),P=this.nodeType===1&&" "+Go(k)+" ",P){for(F=0;F<x.length;F++)D=x[F],P.indexOf(" "+D+" ")<0&&(P+=D+" ");$=Go(P),k!==$&&this.setAttribute("class",$)}}):this)},removeClass:function(g){var x,P,k,D,F,$;return _(g)?this.each(function(he){p(this).removeClass(g.call(this,he,$o(this)))}):arguments.length?(x=Kl(g),x.length?this.each(function(){if(k=$o(this),P=this.nodeType===1&&" "+Go(k)+" ",P){for(F=0;F<x.length;F++)for(D=x[F];P.indexOf(" "+D+" ")>-1;)P=P.replace(" "+D+" "," ");$=Go(P),k!==$&&this.setAttribute("class",$)}}):this):this.attr("class","")},toggleClass:function(g,x){var P,k,D,F,$=typeof g,he=$==="string"||Array.isArray(g);return _(g)?this.each(function(se){p(this).toggleClass(g.call(this,se,$o(this),x),x)}):typeof x=="boolean"&&he?x?this.addClass(g):this.removeClass(g):(P=Kl(g),this.each(function(){if(he)for(F=p(this),D=0;D<P.length;D++)k=P[D],F.hasClass(k)?F.removeClass(k):F.addClass(k);else(g===void 0||$==="boolean")&&(k=$o(this),k&&be.set(this,"__className__",k),this.setAttribute&&this.setAttribute("class",k||g===!1?"":be.get(this,"__className__")||""))}))},hasClass:function(g){var x,P,k=0;for(x=" "+g+" ";P=this[k++];)if(P.nodeType===1&&(" "+Go($o(P))+" ").indexOf(x)>-1)return!0;return!1}});var Jh=/\r/g;p.fn.extend({val:function(g){var x,P,k,D=this[0];return arguments.length?(k=_(g),this.each(function(F){var $;this.nodeType===1&&(k?$=g.call(this,F,p(this).val()):$=g,$==null?$="":typeof $=="number"?$+="":Array.isArray($)&&($=p.map($,function(he){return he==null?"":he+""})),x=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],(!x||!("set"in x)||x.set(this,$,"value")===void 0)&&(this.value=$))})):D?(x=p.valHooks[D.type]||p.valHooks[D.nodeName.toLowerCase()],x&&"get"in x&&(P=x.get(D,"value"))!==void 0?P:(P=D.value,typeof P=="string"?P.replace(Jh,""):P??"")):void 0}}),p.extend({valHooks:{option:{get:function(g){var x=p.find.attr(g,"value");return x??Go(p.text(g))}},select:{get:function(g){var x,P,k,D=g.options,F=g.selectedIndex,$=g.type==="select-one",he=$?null:[],se=$?F+1:D.length;for(F<0?k=se:k=$?F:0;k<se;k++)if(P=D[k],(P.selected||k===F)&&!P.disabled&&(!P.parentNode.disabled||!O(P.parentNode,"optgroup"))){if(x=p(P).val(),$)return x;he.push(x)}return he},set:function(g,x){for(var P,k,D=g.options,F=p.makeArray(x),$=D.length;$--;)k=D[$],(k.selected=p.inArray(p.valHooks.option.get(k),F)>-1)&&(P=!0);return P||(g.selectedIndex=-1),F}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(g,x){if(Array.isArray(x))return g.checked=p.inArray(p(g).val(),x)>-1}},m.checkOn||(p.valHooks[this].get=function(g){return g.getAttribute("value")===null?"on":g.value})});var Za=t.location,Zl={guid:Date.now()},Lc=/\?/;p.parseXML=function(g){var x,P;if(!g||typeof g!="string")return null;try{x=new t.DOMParser().parseFromString(g,"text/xml")}catch{}return P=x&&x.getElementsByTagName("parsererror")[0],(!x||P)&&p.error("Invalid XML: "+(P?p.map(P.childNodes,function(k){return k.textContent}).join(`
`):g)),x};var Qh=/^(?:focusinfocus|focusoutblur)$/,ed=function(g){g.stopPropagation()};p.extend(p.event,{trigger:function(g,x,P,k){var D,F,$,he,se,Ee,De,Ge,Me=[P||S],ut=h.call(g,"type")?g.type:g,St=h.call(g,"namespace")?g.namespace.split("."):[];if(F=Ge=$=P=P||S,!(P.nodeType===3||P.nodeType===8)&&!Qh.test(ut+p.event.triggered)&&(ut.indexOf(".")>-1&&(St=ut.split("."),ut=St.shift(),St.sort()),se=ut.indexOf(":")<0&&"on"+ut,g=g[p.expando]?g:new p.Event(ut,typeof g=="object"&&g),g.isTrigger=k?2:3,g.namespace=St.join("."),g.rnamespace=g.namespace?new RegExp("(^|\\.)"+St.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,g.result=void 0,g.target||(g.target=P),x=x==null?[g]:p.makeArray(x,[g]),De=p.event.special[ut]||{},!(!k&&De.trigger&&De.trigger.apply(P,x)===!1))){if(!k&&!De.noBubble&&!w(P)){for(he=De.delegateType||ut,Qh.test(he+ut)||(F=F.parentNode);F;F=F.parentNode)Me.push(F),$=F;$===(P.ownerDocument||S)&&Me.push($.defaultView||$.parentWindow||t)}for(D=0;(F=Me[D++])&&!g.isPropagationStopped();)Ge=F,g.type=D>1?he:De.bindType||ut,Ee=(be.get(F,"events")||Object.create(null))[g.type]&&be.get(F,"handle"),Ee&&Ee.apply(F,x),Ee=se&&F[se],Ee&&Ee.apply&&Le(F)&&(g.result=Ee.apply(F,x),g.result===!1&&g.preventDefault());return g.type=ut,!k&&!g.isDefaultPrevented()&&(!De._default||De._default.apply(Me.pop(),x)===!1)&&Le(P)&&se&&_(P[ut])&&!w(P)&&($=P[se],$&&(P[se]=null),p.event.triggered=ut,g.isPropagationStopped()&&Ge.addEventListener(ut,ed),P[ut](),g.isPropagationStopped()&&Ge.removeEventListener(ut,ed),p.event.triggered=void 0,$&&(P[se]=$)),g.result}},simulate:function(g,x,P){var k=p.extend(new p.Event,P,{type:g,isSimulated:!0});p.event.trigger(k,null,x)}}),p.fn.extend({trigger:function(g,x){return this.each(function(){p.event.trigger(g,x,this)})},triggerHandler:function(g,x){var P=this[0];if(P)return p.event.trigger(g,x,P,!0)}});var fv=/\[\]$/,Jl=/\r?\n/g,hv=/^(?:submit|button|image|reset|file)$/i,dv=/^(?:input|select|textarea|keygen)/i;function Ql(g,x,P,k){var D;if(Array.isArray(x))p.each(x,function(F,$){P||fv.test(g)?k(g,$):Ql(g+"["+(typeof $=="object"&&$!=null?F:"")+"]",$,P,k)});else if(!P&&T(x)==="object")for(D in x)Ql(g+"["+D+"]",x[D],P,k);else k(g,x)}p.param=function(g,x){var P,k=[],D=function(F,$){var he=_($)?$():$;k[k.length]=encodeURIComponent(F)+"="+encodeURIComponent(he??"")};if(g==null)return"";if(Array.isArray(g)||g.jquery&&!p.isPlainObject(g))p.each(g,function(){D(this.name,this.value)});else for(P in g)Ql(P,g[P],x,D);return k.join("&")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var g=p.prop(this,"elements");return g?p.makeArray(g):this}).filter(function(){var g=this.type;return this.name&&!p(this).is(":disabled")&&dv.test(this.nodeName)&&!hv.test(g)&&(this.checked||!pn.test(g))}).map(function(g,x){var P=p(this).val();return P==null?null:Array.isArray(P)?p.map(P,function(k){return{name:x.name,value:k.replace(Jl,`\r
`)}}):{name:x.name,value:P.replace(Jl,`\r
`)}}).get()}});var pv=/%20/g,ef=/#.*$/,gv=/([?&])_=[^&]*/,vv=/^(.*?):[ \t]*([^\r\n]*)$/mg,mv=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,yv=/^(?:GET|HEAD)$/,_v=/^\/\//,ln={},tn={},td="*/".concat("*"),tf=S.createElement("a");tf.href=Za.href;function rd(g){return function(x,P){typeof x!="string"&&(P=x,x="*");var k,D=0,F=x.toLowerCase().match(Ne)||[];if(_(P))for(;k=F[D++];)k[0]==="+"?(k=k.slice(1)||"*",(g[k]=g[k]||[]).unshift(P)):(g[k]=g[k]||[]).push(P)}}function nd(g,x,P,k){var D={},F=g===tn;function $(he){var se;return D[he]=!0,p.each(g[he]||[],function(Ee,De){var Ge=De(x,P,k);if(typeof Ge=="string"&&!F&&!D[Ge])return x.dataTypes.unshift(Ge),$(Ge),!1;if(F)return!(se=Ge)}),se}return $(x.dataTypes[0])||!D["*"]&&$("*")}function rf(g,x){var P,k,D=p.ajaxSettings.flatOptions||{};for(P in x)x[P]!==void 0&&((D[P]?g:k||(k={}))[P]=x[P]);return k&&p.extend(!0,g,k),g}function bv(g,x,P){for(var k,D,F,$,he=g.contents,se=g.dataTypes;se[0]==="*";)se.shift(),k===void 0&&(k=g.mimeType||x.getResponseHeader("Content-Type"));if(k){for(D in he)if(he[D]&&he[D].test(k)){se.unshift(D);break}}if(se[0]in P)F=se[0];else{for(D in P){if(!se[0]||g.converters[D+" "+se[0]]){F=D;break}$||($=D)}F=F||$}if(F)return F!==se[0]&&se.unshift(F),P[F]}function id(g,x,P,k){var D,F,$,he,se,Ee={},De=g.dataTypes.slice();if(De[1])for($ in g.converters)Ee[$.toLowerCase()]=g.converters[$];for(F=De.shift();F;)if(g.responseFields[F]&&(P[g.responseFields[F]]=x),!se&&k&&g.dataFilter&&(x=g.dataFilter(x,g.dataType)),se=F,F=De.shift(),F){if(F==="*")F=se;else if(se!=="*"&&se!==F){if($=Ee[se+" "+F]||Ee["* "+F],!$){for(D in Ee)if(he=D.split(" "),he[1]===F&&($=Ee[se+" "+he[0]]||Ee["* "+he[0]],$)){$===!0?$=Ee[D]:Ee[D]!==!0&&(F=he[0],De.unshift(he[1]));break}}if($!==!0)if($&&g.throws)x=$(x);else try{x=$(x)}catch(Ge){return{state:"parsererror",error:$?Ge:"No conversion from "+se+" to "+F}}}}return{state:"success",data:x}}p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Za.href,type:"GET",isLocal:mv.test(Za.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":td,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(g,x){return x?rf(rf(g,p.ajaxSettings),x):rf(p.ajaxSettings,g)},ajaxPrefilter:rd(ln),ajaxTransport:rd(tn),ajax:function(g,x){typeof g=="object"&&(x=g,g=void 0),x=x||{};var P,k,D,F,$,he,se,Ee,De,Ge,Me=p.ajaxSetup({},x),ut=Me.context||Me,St=Me.context&&(ut.nodeType||ut.jquery)?p(ut):p.event,ar=p.Deferred(),sr=p.Callbacks("once memory"),oi=Me.statusCode||{},kn={},Bs={},zs="canceled",Er={readyState:0,getResponseHeader:function(Ar){var un;if(se){if(!F)for(F={};un=vv.exec(D);)F[un[1].toLowerCase()+" "]=(F[un[1].toLowerCase()+" "]||[]).concat(un[2]);un=F[Ar.toLowerCase()+" "]}return un==null?null:un.join(", ")},getAllResponseHeaders:function(){return se?D:null},setRequestHeader:function(Ar,un){return se==null&&(Ar=Bs[Ar.toLowerCase()]=Bs[Ar.toLowerCase()]||Ar,kn[Ar]=un),this},overrideMimeType:function(Ar){return se==null&&(Me.mimeType=Ar),this},statusCode:function(Ar){var un;if(Ar)if(se)Er.always(Ar[Er.status]);else for(un in Ar)oi[un]=[oi[un],Ar[un]];return this},abort:function(Ar){var un=Ar||zs;return P&&P.abort(un),Uo(0,un),this}};if(ar.promise(Er),Me.url=((g||Me.url||Za.href)+"").replace(_v,Za.protocol+"//"),Me.type=x.method||x.type||Me.method||Me.type,Me.dataTypes=(Me.dataType||"*").toLowerCase().match(Ne)||[""],Me.crossDomain==null){he=S.createElement("a");try{he.href=Me.url,he.href=he.href,Me.crossDomain=tf.protocol+"//"+tf.host!=he.protocol+"//"+he.host}catch{Me.crossDomain=!0}}if(Me.data&&Me.processData&&typeof Me.data!="string"&&(Me.data=p.param(Me.data,Me.traditional)),nd(ln,Me,x,Er),se)return Er;Ee=p.event&&Me.global,Ee&&p.active++===0&&p.event.trigger("ajaxStart"),Me.type=Me.type.toUpperCase(),Me.hasContent=!yv.test(Me.type),k=Me.url.replace(ef,""),Me.hasContent?Me.data&&Me.processData&&(Me.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Me.data=Me.data.replace(pv,"+")):(Ge=Me.url.slice(k.length),Me.data&&(Me.processData||typeof Me.data=="string")&&(k+=(Lc.test(k)?"&":"?")+Me.data,delete Me.data),Me.cache===!1&&(k=k.replace(gv,"$1"),Ge=(Lc.test(k)?"&":"?")+"_="+Zl.guid+++Ge),Me.url=k+Ge),Me.ifModified&&(p.lastModified[k]&&Er.setRequestHeader("If-Modified-Since",p.lastModified[k]),p.etag[k]&&Er.setRequestHeader("If-None-Match",p.etag[k])),(Me.data&&Me.hasContent&&Me.contentType!==!1||x.contentType)&&Er.setRequestHeader("Content-Type",Me.contentType),Er.setRequestHeader("Accept",Me.dataTypes[0]&&Me.accepts[Me.dataTypes[0]]?Me.accepts[Me.dataTypes[0]]+(Me.dataTypes[0]!=="*"?", "+td+"; q=0.01":""):Me.accepts["*"]);for(De in Me.headers)Er.setRequestHeader(De,Me.headers[De]);if(Me.beforeSend&&(Me.beforeSend.call(ut,Er,Me)===!1||se))return Er.abort();if(zs="abort",sr.add(Me.complete),Er.done(Me.success),Er.fail(Me.error),P=nd(tn,Me,x,Er),!P)Uo(-1,"No Transport");else{if(Er.readyState=1,Ee&&St.trigger("ajaxSend",[Er,Me]),se)return Er;Me.async&&Me.timeout>0&&($=t.setTimeout(function(){Er.abort("timeout")},Me.timeout));try{se=!1,P.send(kn,Uo)}catch(Ar){if(se)throw Ar;Uo(-1,Ar)}}function Uo(Ar,un,qu,qc){var Ss,wa,rs,vo,jo,Pi=un;se||(se=!0,$&&t.clearTimeout($),P=void 0,D=qc||"",Er.readyState=Ar>0?4:0,Ss=Ar>=200&&Ar<300||Ar===304,qu&&(vo=bv(Me,Er,qu)),!Ss&&p.inArray("script",Me.dataTypes)>-1&&p.inArray("json",Me.dataTypes)<0&&(Me.converters["text script"]=function(){}),vo=id(Me,vo,Er,Ss),Ss?(Me.ifModified&&(jo=Er.getResponseHeader("Last-Modified"),jo&&(p.lastModified[k]=jo),jo=Er.getResponseHeader("etag"),jo&&(p.etag[k]=jo)),Ar===204||Me.type==="HEAD"?Pi="nocontent":Ar===304?Pi="notmodified":(Pi=vo.state,wa=vo.data,rs=vo.error,Ss=!rs)):(rs=Pi,(Ar||!Pi)&&(Pi="error",Ar<0&&(Ar=0))),Er.status=Ar,Er.statusText=(un||Pi)+"",Ss?ar.resolveWith(ut,[wa,Pi,Er]):ar.rejectWith(ut,[Er,Pi,rs]),Er.statusCode(oi),oi=void 0,Ee&&St.trigger(Ss?"ajaxSuccess":"ajaxError",[Er,Me,Ss?wa:rs]),sr.fireWith(ut,[Er,Pi]),Ee&&(St.trigger("ajaxComplete",[Er,Me]),--p.active||p.event.trigger("ajaxStop")))}return Er},getJSON:function(g,x,P){return p.get(g,x,P,"json")},getScript:function(g,x){return p.get(g,void 0,x,"script")}}),p.each(["get","post"],function(g,x){p[x]=function(P,k,D,F){return _(k)&&(F=F||D,D=k,k=void 0),p.ajax(p.extend({url:P,type:x,dataType:F,data:k,success:D},p.isPlainObject(P)&&P))}}),p.ajaxPrefilter(function(g){var x;for(x in g.headers)x.toLowerCase()==="content-type"&&(g.contentType=g.headers[x]||"")}),p._evalUrl=function(g,x,P){return p.ajax({url:g,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(k){p.globalEval(k,x,P)}})},p.fn.extend({wrapAll:function(g){var x;return this[0]&&(_(g)&&(g=g.call(this[0])),x=p(g,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&x.insertBefore(this[0]),x.map(function(){for(var P=this;P.firstElementChild;)P=P.firstElementChild;return P}).append(this)),this},wrapInner:function(g){return _(g)?this.each(function(x){p(this).wrapInner(g.call(this,x))}):this.each(function(){var x=p(this),P=x.contents();P.length?P.wrapAll(g):x.append(g)})},wrap:function(g){var x=_(g);return this.each(function(P){p(this).wrapAll(x?g.call(this,P):g)})},unwrap:function(g){return this.parent(g).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}}),p.expr.pseudos.hidden=function(g){return!p.expr.pseudos.visible(g)},p.expr.pseudos.visible=function(g){return!!(g.offsetWidth||g.offsetHeight||g.getClientRects().length)},p.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var wv={0:200,1223:204},Mn=p.ajaxSettings.xhr();m.cors=!!Mn&&"withCredentials"in Mn,m.ajax=Mn=!!Mn,p.ajaxTransport(function(g){var x,P;if(m.cors||Mn&&!g.crossDomain)return{send:function(k,D){var F,$=g.xhr();if($.open(g.type,g.url,g.async,g.username,g.password),g.xhrFields)for(F in g.xhrFields)$[F]=g.xhrFields[F];g.mimeType&&$.overrideMimeType&&$.overrideMimeType(g.mimeType),!g.crossDomain&&!k["X-Requested-With"]&&(k["X-Requested-With"]="XMLHttpRequest");for(F in k)$.setRequestHeader(F,k[F]);x=function(he){return function(){x&&(x=P=$.onload=$.onerror=$.onabort=$.ontimeout=$.onreadystatechange=null,he==="abort"?$.abort():he==="error"?typeof $.status!="number"?D(0,"error"):D($.status,$.statusText):D(wv[$.status]||$.status,$.statusText,($.responseType||"text")!=="text"||typeof $.responseText!="string"?{binary:$.response}:{text:$.responseText},$.getAllResponseHeaders()))}},$.onload=x(),P=$.onerror=$.ontimeout=x("error"),$.onabort!==void 0?$.onabort=P:$.onreadystatechange=function(){$.readyState===4&&t.setTimeout(function(){x&&P()})},x=x("abort");try{$.send(g.hasContent&&g.data||null)}catch(he){if(x)throw he}},abort:function(){x&&x()}}}),p.ajaxPrefilter(function(g){g.crossDomain&&(g.contents.script=!1)}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(g){return p.globalEval(g),g}}}),p.ajaxPrefilter("script",function(g){g.cache===void 0&&(g.cache=!1),g.crossDomain&&(g.type="GET")}),p.ajaxTransport("script",function(g){if(g.crossDomain||g.scriptAttrs){var x,P;return{send:function(k,D){x=p("<script>").attr(g.scriptAttrs||{}).prop({charset:g.scriptCharset,src:g.url}).on("load error",P=function(F){x.remove(),P=null,F&&D(F.type==="error"?404:200,F.type)}),S.head.appendChild(x[0])},abort:function(){P&&P()}}}});var Nc=[],go=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var g=Nc.pop()||p.expando+"_"+Zl.guid++;return this[g]=!0,g}}),p.ajaxPrefilter("json jsonp",function(g,x,P){var k,D,F,$=g.jsonp!==!1&&(go.test(g.url)?"url":typeof g.data=="string"&&(g.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&go.test(g.data)&&"data");if($||g.dataTypes[0]==="jsonp")return k=g.jsonpCallback=_(g.jsonpCallback)?g.jsonpCallback():g.jsonpCallback,$?g[$]=g[$].replace(go,"$1"+k):g.jsonp!==!1&&(g.url+=(Lc.test(g.url)?"&":"?")+g.jsonp+"="+k),g.converters["script json"]=function(){return F||p.error(k+" was not called"),F[0]},g.dataTypes[0]="json",D=t[k],t[k]=function(){F=arguments},P.always(function(){D===void 0?p(t).removeProp(k):t[k]=D,g[k]&&(g.jsonpCallback=x.jsonpCallback,Nc.push(k)),F&&_(D)&&D(F[0]),F=D=void 0}),"script"}),m.createHTMLDocument=function(){var g=S.implementation.createHTMLDocument("").body;return g.innerHTML="<form></form><form></form>",g.childNodes.length===2}(),p.parseHTML=function(g,x,P){if(typeof g!="string")return[];typeof x=="boolean"&&(P=x,x=!1);var k,D,F;return x||(m.createHTMLDocument?(x=S.implementation.createHTMLDocument(""),k=x.createElement("base"),k.href=S.location.href,x.head.appendChild(k)):x=S),D=Te.exec(g),F=!P&&[],D?[x.createElement(D[1])]:(D=wn([g],x,F),F&&F.length&&p(F).remove(),p.merge([],D.childNodes))},p.fn.load=function(g,x,P){var k,D,F,$=this,he=g.indexOf(" ");return he>-1&&(k=Go(g.slice(he)),g=g.slice(0,he)),_(x)?(P=x,x=void 0):x&&typeof x=="object"&&(D="POST"),$.length>0&&p.ajax({url:g,type:D||"GET",dataType:"html",data:x}).done(function(se){F=arguments,$.html(k?p("<div>").append(p.parseHTML(se)).find(k):se)}).always(P&&function(se,Ee){$.each(function(){P.apply(this,F||[se.responseText,Ee,se])})}),this},p.expr.pseudos.animated=function(g){return p.grep(p.timers,function(x){return g===x.elem}).length},p.offset={setOffset:function(g,x,P){var k,D,F,$,he,se,Ee,De=p.css(g,"position"),Ge=p(g),Me={};De==="static"&&(g.style.position="relative"),he=Ge.offset(),F=p.css(g,"top"),se=p.css(g,"left"),Ee=(De==="absolute"||De==="fixed")&&(F+se).indexOf("auto")>-1,Ee?(k=Ge.position(),$=k.top,D=k.left):($=parseFloat(F)||0,D=parseFloat(se)||0),_(x)&&(x=x.call(g,P,p.extend({},he))),x.top!=null&&(Me.top=x.top-he.top+$),x.left!=null&&(Me.left=x.left-he.left+D),"using"in x?x.using.call(g,Me):Ge.css(Me)}},p.fn.extend({offset:function(g){if(arguments.length)return g===void 0?this:this.each(function(D){p.offset.setOffset(this,g,D)});var x,P,k=this[0];if(k)return k.getClientRects().length?(x=k.getBoundingClientRect(),P=k.ownerDocument.defaultView,{top:x.top+P.pageYOffset,left:x.left+P.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var g,x,P,k=this[0],D={top:0,left:0};if(p.css(k,"position")==="fixed")x=k.getBoundingClientRect();else{for(x=this.offset(),P=k.ownerDocument,g=k.offsetParent||P.documentElement;g&&(g===P.body||g===P.documentElement)&&p.css(g,"position")==="static";)g=g.parentNode;g&&g!==k&&g.nodeType===1&&(D=p(g).offset(),D.top+=p.css(g,"borderTopWidth",!0),D.left+=p.css(g,"borderLeftWidth",!0))}return{top:x.top-D.top-p.css(k,"marginTop",!0),left:x.left-D.left-p.css(k,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var g=this.offsetParent;g&&p.css(g,"position")==="static";)g=g.offsetParent;return g||cr})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(g,x){var P=x==="pageYOffset";p.fn[g]=function(k){return xe(this,function(D,F,$){var he;if(w(D)?he=D:D.nodeType===9&&(he=D.defaultView),$===void 0)return he?he[x]:D[F];he?he.scrollTo(P?he.pageXOffset:$,P?$:he.pageYOffset):D[F]=$},g,k,arguments.length)}}),p.each(["top","left"],function(g,x){p.cssHooks[x]=xr(m.pixelPosition,function(P,k){if(k)return k=en(P,x),Tt.test(k)?p(P).position()[x]+"px":k})}),p.each({Height:"height",Width:"width"},function(g,x){p.each({padding:"inner"+g,content:x,"":"outer"+g},function(P,k){p.fn[k]=function(D,F){var $=arguments.length&&(P||typeof D!="boolean"),he=P||(D===!0||F===!0?"margin":"border");return xe(this,function(se,Ee,De){var Ge;return w(se)?k.indexOf("outer")===0?se["inner"+g]:se.document.documentElement["client"+g]:se.nodeType===9?(Ge=se.documentElement,Math.max(se.body["scroll"+g],Ge["scroll"+g],se.body["offset"+g],Ge["offset"+g],Ge["client"+g])):De===void 0?p.css(se,Ee,he):p.style(se,Ee,De,he)},x,$?D:void 0,$)}})}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(g,x){p.fn[x]=function(P){return this.on(x,P)}}),p.fn.extend({bind:function(g,x,P){return this.on(g,null,x,P)},unbind:function(g,x){return this.off(g,null,x)},delegate:function(g,x,P,k){return this.on(x,g,P,k)},undelegate:function(g,x,P){return arguments.length===1?this.off(g,"**"):this.off(x,g||"**",P)},hover:function(g,x){return this.on("mouseenter",g).on("mouseleave",x||g)}}),p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(g,x){p.fn[x]=function(P,k){return arguments.length>0?this.on(x,null,P,k):this.trigger(x)}});var sd=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;p.proxy=function(g,x){var P,k,D;if(typeof x=="string"&&(P=g[x],x=g,g=P),!!_(g))return k=s.call(arguments,2),D=function(){return g.apply(x||this,k.concat(s.call(arguments)))},D.guid=g.guid=g.guid||p.guid++,D},p.holdReady=function(g){g?p.readyWait++:p.ready(!0)},p.isArray=Array.isArray,p.parseJSON=JSON.parse,p.nodeName=O,p.isFunction=_,p.isWindow=w,p.camelCase=Be,p.type=T,p.now=Date.now,p.isNumeric=function(g){var x=p.type(g);return(x==="number"||x==="string")&&!isNaN(g-parseFloat(g))},p.trim=function(g){return g==null?"":(g+"").replace(sd,"$1")};var nf=t.jQuery,ts=t.$;return p.noConflict=function(g){return t.$===p&&(t.$=ts),g&&t.jQuery===p&&(t.jQuery=nf),p},typeof r>"u"&&(t.jQuery=t.$=p),p})}(gp)),gp.exports}var o5;function Yce(){return o5||(o5=1,function(e){(function(t){var r=typeof self=="object"&&self.self===self&&self||typeof Oi=="object"&&Oi.global===Oi&&Oi;{var n=Wce,i;try{i=H$()}catch{}t(r,e,n,i)}})(function(t,r,n,i){var s=t.Backbone,o=Array.prototype.slice;r.VERSION="1.4.1",r.$=i,r.noConflict=function(){return t.Backbone=s,this},r.emulateHTTP=!1,r.emulateJSON=!1;var a=r.Events={},u=/\s+/,c,f=function(L,B,H,X,xe){var ue=0,Ae;if(H&&typeof H=="object")for(X!==void 0&&("context"in xe)&&xe.context===void 0&&(xe.context=X),Ae=n.keys(H);ue<Ae.length;ue++)B=f(L,B,Ae[ue],H[Ae[ue]],xe);else if(H&&u.test(H))for(Ae=H.split(u);ue<Ae.length;ue++)B=L(B,Ae[ue],X,xe);else B=L(B,H,X,xe);return B};a.on=function(L,B,H){if(this._events=f(h,this._events||{},L,B,{context:H,ctx:this,listening:c}),c){var X=this._listeners||(this._listeners={});X[c.id]=c,c.interop=!1}return this},a.listenTo=function(L,B,H){if(!L)return this;var X=L._listenId||(L._listenId=n.uniqueId("l")),xe=this._listeningTo||(this._listeningTo={}),ue=c=xe[X];ue||(this._listenId||(this._listenId=n.uniqueId("l")),ue=c=xe[X]=new S(this,L));var Ae=v(L,B,H,this);if(c=void 0,Ae)throw Ae;return ue.interop&&ue.on(B,H),this};var h=function(L,B,H,X){if(H){var xe=L[B]||(L[B]=[]),ue=X.context,Ae=X.ctx,Ce=X.listening;Ce&&Ce.count++,xe.push({callback:H,context:ue,ctx:ue||Ae,listening:Ce})}return L},v=function(L,B,H,X){try{L.on(B,H,X)}catch(xe){return xe}};a.off=function(L,B,H){return this._events?(this._events=f(y,this._events,L,B,{context:H,listeners:this._listeners}),this):this},a.stopListening=function(L,B,H){var X=this._listeningTo;if(!X)return this;for(var xe=L?[L._listenId]:n.keys(X),ue=0;ue<xe.length;ue++){var Ae=X[xe[ue]];if(!Ae)break;Ae.obj.off(B,H,this),Ae.interop&&Ae.off(B,H)}return n.isEmpty(X)&&(this._listeningTo=void 0),this};var y=function(L,B,H,X){if(L){var xe=X.context,ue=X.listeners,Ae=0,Ce;if(!B&&!xe&&!H){for(Ce=n.keys(ue);Ae<Ce.length;Ae++)ue[Ce[Ae]].cleanup();return}for(Ce=B?[B]:n.keys(L);Ae<Ce.length;Ae++){B=Ce[Ae];var Be=L[B];if(!Be)break;for(var Le=[],Ie=0;Ie<Be.length;Ie++){var be=Be[Ie];if(H&&H!==be.callback&&H!==be.callback._callback||xe&&xe!==be.context)Le.push(be);else{var je=be.listening;je&&je.off(B,H)}}Le.length?L[B]=Le:delete L[B]}return L}};a.once=function(L,B,H){var X=f(m,{},L,B,this.off.bind(this));return typeof L=="string"&&H==null&&(B=void 0),this.on(X,B,H)},a.listenToOnce=function(L,B,H){var X=f(m,{},B,H,this.stopListening.bind(this,L));return this.listenTo(L,X)};var m=function(L,B,H,X){if(H){var xe=L[B]=n.once(function(){X(B,xe),H.apply(this,arguments)});xe._callback=H}return L};a.trigger=function(L){if(!this._events)return this;for(var B=Math.max(0,arguments.length-1),H=Array(B),X=0;X<B;X++)H[X]=arguments[X+1];return f(_,this._events,L,void 0,H),this};var _=function(L,B,H,X){if(L){var xe=L[B],ue=L.all;xe&&ue&&(ue=ue.slice()),xe&&w(xe,X),ue&&w(ue,[B].concat(X))}return L},w=function(L,B){var H,X=-1,xe=L.length,ue=B[0],Ae=B[1],Ce=B[2];switch(B.length){case 0:for(;++X<xe;)(H=L[X]).callback.call(H.ctx);return;case 1:for(;++X<xe;)(H=L[X]).callback.call(H.ctx,ue);return;case 2:for(;++X<xe;)(H=L[X]).callback.call(H.ctx,ue,Ae);return;case 3:for(;++X<xe;)(H=L[X]).callback.call(H.ctx,ue,Ae,Ce);return;default:for(;++X<xe;)(H=L[X]).callback.apply(H.ctx,B);return}},S=function(L,B){this.id=L._listenId,this.listener=L,this.obj=B,this.interop=!0,this.count=0,this._events=void 0};S.prototype.on=a.on,S.prototype.off=function(L,B){var H;this.interop?(this._events=f(y,this._events,L,B,{context:void 0,listeners:void 0}),H=!this._events):(this.count--,H=this.count===0),H&&this.cleanup()},S.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},a.bind=a.on,a.unbind=a.off,n.extend(r,a);var E=r.Model=function(L,B){var H=L||{};B||(B={}),this.preinitialize.apply(this,arguments),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},B.collection&&(this.collection=B.collection),B.parse&&(H=this.parse(H,B)||{});var X=n.result(this,"defaults");H=n.defaults(n.extend({},X,H),X),this.set(H,B),this.changed={},this.initialize.apply(this,arguments)};n.extend(E.prototype,a,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(L){return n.clone(this.attributes)},sync:function(){return r.sync.apply(this,arguments)},get:function(L){return this.attributes[L]},escape:function(L){return n.escape(this.get(L))},has:function(L){return this.get(L)!=null},matches:function(L){return!!n.iteratee(L,this)(this.attributes)},set:function(L,B,H){if(L==null)return this;var X;if(typeof L=="object"?(X=L,H=B):(X={})[L]=B,H||(H={}),!this._validate(X,H))return!1;var xe=H.unset,ue=H.silent,Ae=[],Ce=this._changing;this._changing=!0,Ce||(this._previousAttributes=n.clone(this.attributes),this.changed={});var Be=this.attributes,Le=this.changed,Ie=this._previousAttributes;for(var be in X)B=X[be],n.isEqual(Be[be],B)||Ae.push(be),n.isEqual(Ie[be],B)?delete Le[be]:Le[be]=B,xe?delete Be[be]:Be[be]=B;if(this.idAttribute in X){var je=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,je,H)}if(!ue){Ae.length&&(this._pending=H);for(var ct=0;ct<Ae.length;ct++)this.trigger("change:"+Ae[ct],this,Be[Ae[ct]],H)}if(Ce)return this;if(!ue)for(;this._pending;)H=this._pending,this._pending=!1,this.trigger("change",this,H);return this._pending=!1,this._changing=!1,this},unset:function(L,B){return this.set(L,void 0,n.extend({},B,{unset:!0}))},clear:function(L){var B={};for(var H in this.attributes)B[H]=void 0;return this.set(B,n.extend({},L,{unset:!0}))},hasChanged:function(L){return L==null?!n.isEmpty(this.changed):n.has(this.changed,L)},changedAttributes:function(L){if(!L)return this.hasChanged()?n.clone(this.changed):!1;var B=this._changing?this._previousAttributes:this.attributes,H={},X;for(var xe in L){var ue=L[xe];n.isEqual(B[xe],ue)||(H[xe]=ue,X=!0)}return X?H:!1},previous:function(L){return L==null||!this._previousAttributes?null:this._previousAttributes[L]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(L){L=n.extend({parse:!0},L);var B=this,H=L.success;return L.success=function(X){var xe=L.parse?B.parse(X,L):X;if(!B.set(xe,L))return!1;H&&H.call(L.context,B,X,L),B.trigger("sync",B,X,L)},Ve(this,L),this.sync("read",this,L)},save:function(L,B,H){var X;L==null||typeof L=="object"?(X=L,H=B):(X={})[L]=B,H=n.extend({validate:!0,parse:!0},H);var xe=H.wait;if(X&&!xe){if(!this.set(X,H))return!1}else if(!this._validate(X,H))return!1;var ue=this,Ae=H.success,Ce=this.attributes;H.success=function(Ie){ue.attributes=Ce;var be=H.parse?ue.parse(Ie,H):Ie;if(xe&&(be=n.extend({},X,be)),be&&!ue.set(be,H))return!1;Ae&&Ae.call(H.context,ue,Ie,H),ue.trigger("sync",ue,Ie,H)},Ve(this,H),X&&xe&&(this.attributes=n.extend({},Ce,X));var Be=this.isNew()?"create":H.patch?"patch":"update";Be==="patch"&&!H.attrs&&(H.attrs=X);var Le=this.sync(Be,this,H);return this.attributes=Ce,Le},destroy:function(L){L=L?n.clone(L):{};var B=this,H=L.success,X=L.wait,xe=function(){B.stopListening(),B.trigger("destroy",B,B.collection,L)};L.success=function(Ae){X&&xe(),H&&H.call(L.context,B,Ae,L),B.isNew()||B.trigger("sync",B,Ae,L)};var ue=!1;return this.isNew()?n.defer(L.success):(Ve(this,L),ue=this.sync("delete",this,L)),X||xe(),ue},url:function(){var L=n.result(this,"urlRoot")||n.result(this.collection,"url")||rt();if(this.isNew())return L;var B=this.get(this.idAttribute);return L.replace(/[^\/]$/,"$&/")+encodeURIComponent(B)},parse:function(L,B){return L},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(L){return this._validate({},n.extend({},L,{validate:!0}))},_validate:function(L,B){if(!B.validate||!this.validate)return!0;L=n.extend({},this.attributes,L);var H=this.validationError=this.validate(L,B)||null;return H?(this.trigger("invalid",this,H,n.extend(B,{validationError:H})),!1):!0}});var A=r.Collection=function(L,B){B||(B={}),this.preinitialize.apply(this,arguments),B.model&&(this.model=B.model),B.comparator!==void 0&&(this.comparator=B.comparator),this._reset(),this.initialize.apply(this,arguments),L&&this.reset(L,n.extend({silent:!0},B))},T={add:!0,remove:!0,merge:!0},I={add:!0,remove:!1},q=function(L,B,H){H=Math.min(Math.max(H,0),L.length);var X=Array(L.length-H),xe=B.length,ue;for(ue=0;ue<X.length;ue++)X[ue]=L[ue+H];for(ue=0;ue<xe;ue++)L[ue+H]=B[ue];for(ue=0;ue<X.length;ue++)L[ue+xe+H]=X[ue]};n.extend(A.prototype,a,{model:E,preinitialize:function(){},initialize:function(){},toJSON:function(L){return this.map(function(B){return B.toJSON(L)})},sync:function(){return r.sync.apply(this,arguments)},add:function(L,B){return this.set(L,n.extend({merge:!1},B,I))},remove:function(L,B){B=n.extend({},B);var H=!n.isArray(L);L=H?[L]:L.slice();var X=this._removeModels(L,B);return!B.silent&&X.length&&(B.changes={added:[],merged:[],removed:X},this.trigger("update",this,B)),H?X[0]:X},set:function(L,B){if(L!=null){B=n.extend({},T,B),B.parse&&!this._isModel(L)&&(L=this.parse(L,B)||[]);var H=!n.isArray(L);L=H?[L]:L.slice();var X=B.at;X!=null&&(X=+X),X>this.length&&(X=this.length),X<0&&(X+=this.length+1);var xe=[],ue=[],Ae=[],Ce=[],Be={},Le=B.add,Ie=B.merge,be=B.remove,je=!1,ct=this.comparator&&X==null&&B.sort!==!1,mt=n.isString(this.comparator)?this.comparator:null,ft,it;for(it=0;it<L.length;it++){ft=L[it];var Ht=this.get(ft);if(Ht){if(Ie&&ft!==Ht){var yr=this._isModel(ft)?ft.attributes:ft;B.parse&&(yr=Ht.parse(yr,B)),Ht.set(yr,B),Ae.push(Ht),ct&&!je&&(je=Ht.hasChanged(mt))}Be[Ht.cid]||(Be[Ht.cid]=!0,xe.push(Ht)),L[it]=Ht}else Le&&(ft=L[it]=this._prepareModel(ft,B),ft&&(ue.push(ft),this._addReference(ft,B),Be[ft.cid]=!0,xe.push(ft)))}if(be){for(it=0;it<this.length;it++)ft=this.models[it],Be[ft.cid]||Ce.push(ft);Ce.length&&this._removeModels(Ce,B)}var Qt=!1,cr=!ct&&Le&&be;if(xe.length&&cr?(Qt=this.length!==xe.length||n.some(this.models,function(Lr,Br){return Lr!==xe[Br]}),this.models.length=0,q(this.models,xe,0),this.length=this.models.length):ue.length&&(ct&&(je=!0),q(this.models,ue,X??this.length),this.length=this.models.length),je&&this.sort({silent:!0}),!B.silent){for(it=0;it<ue.length;it++)X!=null&&(B.index=X+it),ft=ue[it],ft.trigger("add",ft,this,B);(je||Qt)&&this.trigger("sort",this,B),(ue.length||Ce.length||Ae.length)&&(B.changes={added:ue,removed:Ce,merged:Ae},this.trigger("update",this,B))}return H?L[0]:L}},reset:function(L,B){B=B?n.clone(B):{};for(var H=0;H<this.models.length;H++)this._removeReference(this.models[H],B);return B.previousModels=this.models,this._reset(),L=this.add(L,n.extend({silent:!0},B)),B.silent||this.trigger("reset",this,B),L},push:function(L,B){return this.add(L,n.extend({at:this.length},B))},pop:function(L){var B=this.at(this.length-1);return this.remove(B,L)},unshift:function(L,B){return this.add(L,n.extend({at:0},B))},shift:function(L){var B=this.at(0);return this.remove(B,L)},slice:function(){return o.apply(this.models,arguments)},get:function(L){if(L!=null)return this._byId[L]||this._byId[this.modelId(this._isModel(L)?L.attributes:L,L.idAttribute)]||L.cid&&this._byId[L.cid]},has:function(L){return this.get(L)!=null},at:function(L){return L<0&&(L+=this.length),this.models[L]},where:function(L,B){return this[B?"find":"filter"](L)},findWhere:function(L){return this.where(L,!0)},sort:function(L){var B=this.comparator;if(!B)throw new Error("Cannot sort a set without a comparator");L||(L={});var H=B.length;return n.isFunction(B)&&(B=B.bind(this)),H===1||n.isString(B)?this.models=this.sortBy(B):this.models.sort(B),L.silent||this.trigger("sort",this,L),this},pluck:function(L){return this.map(L+"")},fetch:function(L){L=n.extend({parse:!0},L);var B=L.success,H=this;return L.success=function(X){var xe=L.reset?"reset":"set";H[xe](X,L),B&&B.call(L.context,H,X,L),H.trigger("sync",H,X,L)},Ve(this,L),this.sync("read",this,L)},create:function(L,B){B=B?n.clone(B):{};var H=B.wait;if(L=this._prepareModel(L,B),!L)return!1;H||this.add(L,B);var X=this,xe=B.success;return B.success=function(ue,Ae,Ce){H&&X.add(ue,Ce),xe&&xe.call(Ce.context,ue,Ae,Ce)},L.save(null,B),L},parse:function(L,B){return L},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(L,B){return L[B||this.model.prototype.idAttribute||"id"]},values:function(){return new C(this,O)},keys:function(){return new C(this,N)},entries:function(){return new C(this,V)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(L,B){if(this._isModel(L))return L.collection||(L.collection=this),L;B=B?n.clone(B):{},B.collection=this;var H;return this.model.prototype?H=new this.model(L,B):H=this.model(L,B),H.validationError?(this.trigger("invalid",this,H.validationError,B),!1):H},_removeModels:function(L,B){for(var H=[],X=0;X<L.length;X++){var xe=this.get(L[X]);if(xe){var ue=this.indexOf(xe);this.models.splice(ue,1),this.length--,delete this._byId[xe.cid];var Ae=this.modelId(xe.attributes,xe.idAttribute);Ae!=null&&delete this._byId[Ae],B.silent||(B.index=ue,xe.trigger("remove",xe,this,B)),H.push(xe),this._removeReference(xe,B)}}return H},_isModel:function(L){return L instanceof E},_addReference:function(L,B){this._byId[L.cid]=L;var H=this.modelId(L.attributes,L.idAttribute);H!=null&&(this._byId[H]=L),L.on("all",this._onModelEvent,this)},_removeReference:function(L,B){delete this._byId[L.cid];var H=this.modelId(L.attributes,L.idAttribute);H!=null&&delete this._byId[H],this===L.collection&&delete L.collection,L.off("all",this._onModelEvent,this)},_onModelEvent:function(L,B,H,X){if(B){if((L==="add"||L==="remove")&&H!==this)return;if(L==="destroy"&&this.remove(B,X),L==="changeId"){var xe=this.modelId(B.previousAttributes(),B.idAttribute),ue=this.modelId(B.attributes,B.idAttribute);xe!=null&&delete this._byId[xe],ue!=null&&(this._byId[ue]=B)}}this.trigger.apply(this,arguments)}});var p=typeof Symbol=="function"&&Symbol.iterator;p&&(A.prototype[p]=A.prototype.values);var C=function(L,B){this._collection=L,this._kind=B,this._index=0},O=1,N=2,V=3;p&&(C.prototype[p]=function(){return this}),C.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var L=this._collection.at(this._index);this._index++;var B;if(this._kind===O)B=L;else{var H=this._collection.modelId(L.attributes,L.idAttribute);this._kind===N?B=H:B=[H,L]}return{value:B,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var W=r.View=function(L){this.cid=n.uniqueId("view"),this.preinitialize.apply(this,arguments),n.extend(this,n.pick(L,ee)),this._ensureElement(),this.initialize.apply(this,arguments)},G=/^(\S+)\s*(.*)$/,ee=["model","collection","el","id","attributes","className","tagName","events"];n.extend(W.prototype,a,{tagName:"div",$:function(L){return this.$el.find(L)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(L){return this.undelegateEvents(),this._setElement(L),this.delegateEvents(),this},_setElement:function(L){this.$el=L instanceof r.$?L:r.$(L),this.el=this.$el[0]},delegateEvents:function(L){if(L||(L=n.result(this,"events")),!L)return this;this.undelegateEvents();for(var B in L){var H=L[B];if(n.isFunction(H)||(H=this[H]),!!H){var X=B.match(G);this.delegate(X[1],X[2],H.bind(this))}}return this},delegate:function(L,B,H){return this.$el.on(L+".delegateEvents"+this.cid,B,H),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(L,B,H){return this.$el.off(L+".delegateEvents"+this.cid,B,H),this},_createElement:function(L){return document.createElement(L)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var L=n.extend({},n.result(this,"attributes"));this.id&&(L.id=n.result(this,"id")),this.className&&(L.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(L)}},_setAttributes:function(L){this.$el.attr(L)}});var ae=function(L,B,H,X){switch(B){case 1:return function(){return L[H](this[X])};case 2:return function(xe){return L[H](this[X],xe)};case 3:return function(xe,ue){return L[H](this[X],U(xe,this),ue)};case 4:return function(xe,ue,Ae){return L[H](this[X],U(xe,this),ue,Ae)};default:return function(){var xe=o.call(arguments);return xe.unshift(this[X]),L[H].apply(L,xe)}}},K=function(L,B,H,X){n.each(H,function(xe,ue){B[ue]&&(L.prototype[ue]=ae(B,xe,ue,X))})},U=function(L,B){return n.isFunction(L)?L:n.isObject(L)&&!B._isModel(L)?j(L):n.isString(L)?function(H){return H.get(L)}:L},j=function(L){var B=n.matches(L);return function(H){return B(H.attributes)}},J={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},de={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};n.each([[A,J,"models"],[E,de,"attributes"]],function(L){var B=L[0],H=L[1],X=L[2];B.mixin=function(xe){var ue=n.reduce(n.functions(xe),function(Ae,Ce){return Ae[Ce]=0,Ae},{});K(B,xe,ue,X)},K(B,n,H,X)}),r.sync=function(L,B,H){var X=ce[L];n.defaults(H||(H={}),{emulateHTTP:r.emulateHTTP,emulateJSON:r.emulateJSON});var xe={type:X,dataType:"json"};if(H.url||(xe.url=n.result(B,"url")||rt()),H.data==null&&B&&(L==="create"||L==="update"||L==="patch")&&(xe.contentType="application/json",xe.data=JSON.stringify(H.attrs||B.toJSON(H))),H.emulateJSON&&(xe.contentType="application/x-www-form-urlencoded",xe.data=xe.data?{model:xe.data}:{}),H.emulateHTTP&&(X==="PUT"||X==="DELETE"||X==="PATCH")){xe.type="POST",H.emulateJSON&&(xe.data._method=X);var ue=H.beforeSend;H.beforeSend=function(Be){if(Be.setRequestHeader("X-HTTP-Method-Override",X),ue)return ue.apply(this,arguments)}}xe.type!=="GET"&&!H.emulateJSON&&(xe.processData=!1);var Ae=H.error;H.error=function(Be,Le,Ie){H.textStatus=Le,H.errorThrown=Ie,Ae&&Ae.call(H.context,Be,Le,Ie)};var Ce=H.xhr=r.ajax(n.extend(xe,H));return B.trigger("request",B,Ce,H),Ce};var ce={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};r.ajax=function(){return r.$.ajax.apply(r.$,arguments)};var Te=r.Router=function(L){L||(L={}),this.preinitialize.apply(this,arguments),L.routes&&(this.routes=L.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Se=/\((.*?)\)/g,re=/(\(\?)?:\w+/g,oe=/\*\w+/g,ne=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(Te.prototype,a,{preinitialize:function(){},initialize:function(){},route:function(L,B,H){n.isRegExp(L)||(L=this._routeToRegExp(L)),n.isFunction(B)&&(H=B,B=""),H||(H=this[B]);var X=this;return r.history.route(L,function(xe){var ue=X._extractParameters(L,xe);X.execute(H,ue,B)!==!1&&(X.trigger.apply(X,["route:"+B].concat(ue)),X.trigger("route",B,ue),r.history.trigger("route",X,B,ue))}),this},execute:function(L,B,H){L&&L.apply(this,B)},navigate:function(L,B){return r.history.navigate(L,B),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var L,B=n.keys(this.routes);(L=B.pop())!=null;)this.route(L,this.routes[L])}},_routeToRegExp:function(L){return L=L.replace(ne,"\\$&").replace(Se,"(?:$1)?").replace(re,function(B,H){return H?B:"([^/?]+)"}).replace(oe,"([^?]*?)"),new RegExp("^"+L+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(L,B){var H=L.exec(B).slice(1);return n.map(H,function(X,xe){return xe===H.length-1?X||null:X?decodeURIComponent(X):null})}});var te=r.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},le=/^[#\/]|\s+$/g,We=/^\/+|\/+$/g,Ne=/#.*$/;te.started=!1,n.extend(te.prototype,a,{interval:50,atRoot:function(){var L=this.location.pathname.replace(/[^\/]$/,"$&/");return L===this.root&&!this.getSearch()},matchRoot:function(){var L=this.decodeFragment(this.location.pathname),B=L.slice(0,this.root.length-1)+"/";return B===this.root},decodeFragment:function(L){return decodeURI(L.replace(/%25/g,"%2525"))},getSearch:function(){var L=this.location.href.replace(/#.*/,"").match(/\?.+/);return L?L[0]:""},getHash:function(L){var B=(L||this).location.href.match(/#(.*)$/);return B?B[1]:""},getPath:function(){var L=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return L.charAt(0)==="/"?L.slice(1):L},getFragment:function(L){return L==null&&(this._usePushState||!this._wantsHashChange?L=this.getPath():L=this.getHash()),L.replace(le,"")},start:function(L){if(te.started)throw new Error("Backbone.history has already been started");if(te.started=!0,this.options=n.extend({root:"/"},this.options,L),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(We,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var B=this.root.slice(0,-1)||"/";return this.location.replace(B+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var H=document.body,X=H.insertBefore(this.iframe,H.firstChild).contentWindow;X.document.open(),X.document.close(),X.location.hash="#"+this.fragment}var xe=window.addEventListener||function(ue,Ae){return attachEvent("on"+ue,Ae)};if(this._usePushState?xe("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?xe("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var L=window.removeEventListener||function(B,H){return detachEvent("on"+B,H)};this._usePushState?L("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&L("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),te.started=!1},route:function(L,B){this.handlers.unshift({route:L,callback:B})},checkUrl:function(L){var B=this.getFragment();if(B===this.fragment&&this.iframe&&(B=this.getHash(this.iframe.contentWindow)),B===this.fragment)return!1;this.iframe&&this.navigate(B),this.loadUrl()},loadUrl:function(L){return this.matchRoot()?(L=this.fragment=this.getFragment(L),n.some(this.handlers,function(B){if(B.route.test(L))return B.callback(L),!0})):!1},navigate:function(L,B){if(!te.started)return!1;(!B||B===!0)&&(B={trigger:!!B}),L=this.getFragment(L||"");var H=this.root;(L===""||L.charAt(0)==="?")&&(H=H.slice(0,-1)||"/");var X=H+L;L=L.replace(Ne,"");var xe=this.decodeFragment(L);if(this.fragment!==xe){if(this.fragment=xe,this._usePushState)this.history[B.replace?"replaceState":"pushState"]({},document.title,X);else if(this._wantsHashChange){if(this._updateHash(this.location,L,B.replace),this.iframe&&L!==this.getHash(this.iframe.contentWindow)){var ue=this.iframe.contentWindow;B.replace||(ue.document.open(),ue.document.close()),this._updateHash(ue.location,L,B.replace)}}else return this.location.assign(X);if(B.trigger)return this.loadUrl(L)}},_updateHash:function(L,B,H){if(H){var X=L.href.replace(/(javascript:|#).*$/,"");L.replace(X+"#"+B)}else L.hash="#"+B}}),r.history=new te;var Re=function(L,B){var H=this,X;return L&&n.has(L,"constructor")?X=L.constructor:X=function(){return H.apply(this,arguments)},n.extend(X,H,B),X.prototype=n.create(H.prototype,L),X.prototype.constructor=X,X.__super__=H.prototype,X};E.extend=A.extend=Te.extend=W.extend=te.extend=Re;var rt=function(){throw new Error('A "url" property or function must be specified')},Ve=function(L,B){var H=B.error;B.error=function(X){H&&H.call(B.context,L,X,B),L.trigger("error",L,X,B)}};return r})}(xS)),xS}var Kce=Yce();const Jn=Ll(Kce);var Zce=H$();const It=Ll(Zce),$e=function(){var e=typeof window=="object"&&!!window.SVGAngle;if(!e)return function(){throw new Error("SVG is required to use Vectorizer.")};var t={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},r="1.1",n=Math,i=n.PI,s=n.atan2,o=n.sqrt,a=n.min,u=n.max,c=n.cos,f=n.sin,h=function(p,C,O){if(!(this instanceof h))return h.apply(Object.create(h.prototype),arguments);if(p){if(h.isV(p)&&(p=p.node),C=C||{},h.isString(p)){if(p=p.trim(),p.toLowerCase()==="svg")p=h.createSvgDocument();else if(p[0]==="<"){var N=h.createSvgDocument(p);if(N.childNodes.length>1){var V=[],W,G;for(W=0,G=N.childNodes.length;W<G;W++){var ee=N.childNodes[W];V.push(new h(document.importNode(ee,!0)))}return V}p=document.importNode(N.firstChild,!0)}else p=document.createElementNS(t.svg,p);h.ensureId(p)}return this.node=p,this.setAttributes(C),O&&this.append(O),this}},v=h.prototype;Object.defineProperty(v,"id",{enumerable:!0,get:function(){return this.node.id},set:function(p){this.node.id=p}}),v.getTransformToElement=function(p){var C=this.node;if(h.isSVGGraphicsElement(p)&&h.isSVGGraphicsElement(C)){var O=h.toNode(p).getScreenCTM(),N=C.getScreenCTM();if(O&&N)return O.inverse().multiply(N)}return h.createSVGMatrix()},v.transform=function(p,C){var O=this.node;if(h.isUndefined(p))return h.transformStringToMatrix(this.attr("transform"));if(C&&C.absolute)return this.attr("transform",h.matrixToTransformString(p));var N=h.createSVGTransform(p);return O.transform.baseVal.appendItem(N),this},v.translate=function(p,C,O){O=O||{},C=C||0;var N=this.attr("transform")||"",V=h.parseTransformString(N);if(N=V.value,h.isUndefined(p))return V.translate;N=N.replace(/translate\([^)]*\)/g,"").trim();var W=O.absolute?p:V.translate.tx+p,G=O.absolute?C:V.translate.ty+C,ee="translate("+W+","+G+")";return this.attr("transform",(ee+" "+N).trim()),this},v.rotate=function(p,C,O,N){N=N||{};var V=this.attr("transform")||"",W=h.parseTransformString(V);if(V=W.value,h.isUndefined(p))return W.rotate;V=V.replace(/rotate\([^)]*\)/g,"").trim(),p%=360;var G=N.absolute?p:W.rotate.angle+p,ee=C!==void 0&&O!==void 0?","+C+","+O:"",ae="rotate("+G+ee+")";return this.attr("transform",(V+" "+ae).trim()),this},v.scale=function(p,C){C=h.isUndefined(C)?p:C;var O=this.attr("transform")||"",N=h.parseTransformString(O);if(O=N.value,h.isUndefined(p))return N.scale;O=O.replace(/scale\([^)]*\)/g,"").trim();var V="scale("+p+","+C+")";return this.attr("transform",(O+" "+V).trim()),this},v.bbox=function(p,C){var O,N=this.node,V=N.ownerSVGElement;if(!V)return new vt(0,0,0,0);try{O=N.getBBox()}catch{O={x:N.clientLeft,y:N.clientTop,width:N.clientWidth,height:N.clientHeight}}if(p)return new vt(O);var W=this.getTransformToElement(C||V);return h.transformRect(O,W)},v.getBBox=function(p){var C={},O,N=this.node,V=N.ownerSVGElement;if(!V||!h.isSVGGraphicsElement(N))return new vt(0,0,0,0);if(p&&(p.target&&(C.target=h.toNode(p.target)),p.recursive&&(C.recursive=p.recursive)),C.recursive){var G=this.children(),ee=G.length;if(ee===0)return this.getBBox({target:C.target,recursive:!1});C.target||(C.target=this);for(var ae=0;ae<ee;ae++){var K=G[ae],U;K.children().length===0?U=K.getBBox({target:C.target,recursive:!1}):U=K.getBBox({target:C.target,recursive:!0}),O?O=O.union(U):O=U}return O}else{try{O=N.getBBox()}catch{O={x:N.clientLeft,y:N.clientTop,width:N.clientWidth,height:N.clientHeight}}if(C.target){var W=this.getTransformToElement(C.target);return h.transformRect(O,W)}else return new vt(O)}};function y(p,C){p||(p={});var O=h("textPath"),N=p.d;if(N&&p["xlink:href"]===void 0){var V=h("path").attr("d",N).appendTo(C.defs());O.attr("xlink:href","#"+V.id)}return h.isObject(p)&&O.attr(p),O.node}function m(p,C,O){O||(O={});for(var N=O.includeAnnotationIndices,V=O.eol,W=O.lineHeight,G=O.baseSize,ee=0,ae={},K=C.length-1,U=0;U<=K;U++){var j=C[U],J=null;if(h.isObject(j)){var de=j.attrs,ce=h("tspan",de),Te=ce.node,Se=j.t;V&&U===K&&(Se+=V),Te.textContent=Se;var re=de.class;re&&ce.addClass(re),N&&ce.attr("annotations",j.annotations),J=parseFloat(de["font-size"]),isFinite(J)||(J=G),J&&J>ee&&(ee=J)}else V&&U===K&&(j+=V),Te=document.createTextNode(j||" "),G&&G>ee&&(ee=G);p.appendChild(Te)}return ee&&(ae.maxFontSize=ee),W?ae.lineHeight=W:ee&&(ae.lineHeight=ee*1.2),ae}var _=/em$/;function w(p,C){var O=parseFloat(p);return _.test(p)?O*C:O}function S(p,C,O,N){if(!Array.isArray(C))return 0;var V=C.length;if(!V)return 0;for(var W=C[0],G=w(W.maxFontSize,O)||O,ee=0,ae=w(N,O),K=1;K<V;K++){W=C[K];var U=w(W.lineHeight,O)||ae;ee+=U}var j=w(W.maxFontSize,O)||O,J;switch(p){case"middle":J=G/2-.15*j-ee/2;break;case"bottom":J=-(.25*j)-ee;break;default:case"top":J=.8*G;break}return J}v.text=function(p,C){if(p&&typeof p!="string")throw new Error("Vectorizer: text() expects the first argument to be a string.");p=h.sanitizeText(p),C||(C={});var O=C.displayEmpty,N=C.eol,V=C.textPath,W=C.textVerticalAnchor,G=W==="middle"||W==="bottom"||W==="top",ee=C.x;ee===void 0&&(ee=this.attr("x")||0);var ae=C.includeAnnotationIndices,K=C.annotations;K&&!h.isArray(K)&&(K=[K]);var U=C.lineHeight,j=U==="auto",J=j?"1.5em":U||"1em";this.empty(),this.attr({"xml:space":"preserve",display:p||O?null:"none"});var de=parseFloat(this.attr("font-size"));de||(de=16,(G||K)&&this.attr("font-size",de));var ce=document,Te;V?(typeof V=="string"&&(V={d:V}),Te=y(V,this)):Te=ce.createDocumentFragment();for(var Se=0,re=p.split(`
`),oe=[],ne,te=0,le=re.length-1;te<=le;te++){var We=J,Ne="v-line",Re=ce.createElementNS(t.svg,"tspan"),rt=re[te],Ve;if(rt)if(K){var L=h.annotateString(rt,K,{offset:-Se,includeAnnotationIndices:ae});Ve=m(Re,L,{includeAnnotationIndices:ae,eol:te!==le&&N,lineHeight:j?null:J,baseSize:de});var B=Ve.lineHeight;B&&j&&te!==0&&(We=B),te===0&&(ne=Ve.maxFontSize*.8)}else N&&te!==le&&(rt+=N),Re.textContent=rt;else{Re.textContent="-",Ne+=" v-empty-line";var H=Re.style;if(H.fillOpacity=0,H.strokeOpacity=0,K){Ve={},L=h.findAnnotationsAtIndex(K,Se);let xe=de;for(let ue=L.length;ue>0;ue--){const Ae=L[ue-1].attrs;if(!Ae||!("font-size"in Ae))continue;const Ce=parseFloat(Ae["font-size"]);if(isFinite(Ce)){xe=Ce;break}}j&&(te>0?We=xe*1.2:ne=xe*.8),Re.setAttribute("font-size",xe),Ve.maxFontSize=xe}}Ve&&oe.push(Ve),te>0&&Re.setAttribute("dy",We),(te>0||V)&&Re.setAttribute("x",ee),Re.className.baseVal=Ne,Te.appendChild(Re),Se+=rt.length+1}if(G)if(K)We=S(W,oe,de,J);else if(W==="top")We="0.8em";else{var X;switch(le>0?(X=parseFloat(J)||1,X*=le,_.test(J)||(X/=de)):X=0,W){case"middle":We=.3-X/2+"em";break;case"bottom":We=-X-.3+"em";break}}else W===0?We="0em":W?We=W:(We=0,this.attr("y")===null&&this.attr("y",ne||"0.8em"));return Te.firstChild.setAttribute("dy",We),this.append(Te),this},v.removeAttr=function(p){const C=I[p],{ns:O,local:N}=h.qualifyAttr(C),V=this.node;return O?V.hasAttributeNS(O,N)&&V.removeAttributeNS(O,N):V.hasAttribute(C)&&V.removeAttribute(C),this},v.attr=function(p,C){if(h.isUndefined(p)){for(var O=this.node.attributes,N={},V=0;V<O.length;V++)N[O[V].name]=O[V].value;return N}if(h.isString(p)&&h.isUndefined(C))return this.node.getAttribute(I[p]);if(typeof p=="object")for(var W in p)p.hasOwnProperty(W)&&this.setAttribute(W,p[W]);else this.setAttribute(p,C);return this},v.normalizePath=function(){var p=this.tagName();return p==="PATH"&&this.attr("d",h.normalizePathData(this.attr("d"))),this},v.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},v.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},v.setAttributes=function(p){for(var C in p)p.hasOwnProperty(C)&&this.setAttribute(C,p[C]);return this},v.append=function(p){h.isArray(p)||(p=[p]);for(var C=0,O=p.length;C<O;C++)this.node.appendChild(h.toNode(p[C]));return this},v.prepend=function(p){var C=this.node.firstChild;return C?h(C).before(p):this.append(p)},v.before=function(p){var C=this.node,O=C.parentNode;if(O){h.isArray(p)||(p=[p]);for(var N=0,V=p.length;N<V;N++)O.insertBefore(h.toNode(p[N]),C)}return this},v.appendTo=function(p){return h.toNode(p).appendChild(this.node),this},v.svg=function(){return this.node instanceof window.SVGSVGElement?this:h(this.node.ownerSVGElement)},v.tagName=function(){return this.node.tagName.toUpperCase()},v.defs=function(){var p=this.svg()||this,C=p.node.getElementsByTagName("defs")[0];return C?h(C):h("defs").appendTo(p)},v.clone=function(){var p=h(this.node.cloneNode(!0));return p.node.id=h.uniqueId(),p},v.findOne=function(p){var C=this.node.querySelector(p);return C?h(C):void 0},v.find=function(p){var C=[],O=this.node.querySelectorAll(p);if(O)for(var N=0;N<O.length;N++)C.push(h(O[N]));return C},v.children=function(){for(var p=this.node.childNodes,C=[],O=0;O<p.length;O++){var N=p[O];N.nodeType===1&&C.push(h(p[O]))}return C},v.parent=function(){return h(this.node.parentNode)||null},v.index=function(){for(var p=0,C=this.node.previousSibling;C;)C.nodeType===1&&p++,C=C.previousSibling;return p},v.findParentByClass=function(p,C){for(var O=this.node.ownerSVGElement,N=this.node.parentNode;N&&N!==C&&N!==O;){var V=h(N);if(V.hasClass(p))return V;N=N.parentNode}return null},v.contains=function(p){var C=this.node,O=h.toNode(p),N=O&&O.parentNode;return C===N||!!(N&&N.nodeType===1&&C.compareDocumentPosition(N)&16)},v.toLocalPoint=function(p,C){var O=this.svg().node,N=O.createSVGPoint();N.x=p,N.y=C;try{var V=N.matrixTransform(O.getScreenCTM().inverse()),W=this.getTransformToElement(O).inverse()}catch{return N}return V.matrixTransform(W)},v.translateCenterToPoint=function(p){var C=this.getBBox({target:this.svg()}),O=C.center();return this.translate(p.x-O.x,p.y-O.y),this},v.translateAndAutoOrient=function(p,C,O){p=new pe(p),C=new pe(C),O||(O=this.svg());var N=this.scale();this.attr("transform","");var V=this.getBBox({target:O}).scale(N.sx,N.sy),W=h.createSVGTransform();W.setTranslate(-V.x-V.width/2,-V.y-V.height/2);var G=h.createSVGTransform(),ee=p.angleBetween(C,p.clone().offset(1,0));ee&&G.setRotate(ee,0,0);var ae=h.createSVGTransform(),K=p.clone().move(C,V.width/2);ae.setTranslate(2*p.x-K.x,2*p.y-K.y);var U=this.getTransformToElement(O),j=h.createSVGTransform();return j.setMatrix(ae.matrix.multiply(G.matrix.multiply(W.matrix.multiply(U.scale(N.sx,N.sy))))),this.attr("transform",h.matrixToTransformString(j.matrix)),this},v.animateAlongPath=function(p,C){C=h.toNode(C);var O=h.ensureId(C),N=h("animateMotion",p),V=h("mpath",{"xlink:href":"#"+O});N.append(V),this.append(N);try{N.node.beginElement()}catch{if(document.documentElement.getAttribute("smiling")==="fake"){var W=N.node;W.animators=[];var G=W.getAttribute("id");G&&(id2anim[G]=W);for(var ee=getTargets(W),ae=0,K=ee.length;ae<K;ae++){var U=ee[ae],j=new Animator(W,U,ae);animators.push(j),W.animators[ae]=j,j.register()}}}return this};const E=/[^\x20\t\r\n\f]+/g;function A(p){return h.isString(p)?p.trim().match(E)||[]:[]}v.hasClass=function(p){return h.isString(p)?this.node.classList.contains(p.trim()):!1},v.addClass=function(p){return this.node.classList.add(...A(p)),this},v.removeClass=function(p){return this.node.classList.remove(...A(p)),this},v.toggleClass=function(p,C){const O=A(p);for(let N=0;N<O.length;N++)this.node.classList.toggle(O[N],C);return this},v.sample=function(p){p=p||1;for(var C=this.node,O=C.getTotalLength(),N=[],V=0,W;V<O;)W=C.getPointAtLength(V),N.push({x:W.x,y:W.y,distance:V}),V+=p;return N},v.convertToPath=function(){var p=h("path");p.attr(this.attr());var C=this.convertToPathData();return C&&p.attr("d",C),p},v.convertToPathData=function(){var p=this.tagName();switch(p){case"PATH":return this.attr("d");case"LINE":return h.convertLineToPathData(this.node);case"POLYGON":return h.convertPolygonToPathData(this.node);case"POLYLINE":return h.convertPolylineToPathData(this.node);case"ELLIPSE":return h.convertEllipseToPathData(this.node);case"CIRCLE":return h.convertCircleToPathData(this.node);case"RECT":return h.convertRectToPathData(this.node)}throw new Error(p+" cannot be converted to PATH.")},h.prototype.toGeometryShape=function(){var p,C,O,N,V,W,G,ee,ae,K,U,j,J,de,ce;switch(this.tagName()){case"RECT":return p=parseFloat(this.attr("x"))||0,C=parseFloat(this.attr("y"))||0,O=parseFloat(this.attr("width"))||0,N=parseFloat(this.attr("height"))||0,new vt(p,C,O,N);case"CIRCLE":return V=parseFloat(this.attr("cx"))||0,W=parseFloat(this.attr("cy"))||0,G=parseFloat(this.attr("r"))||0,new Wi({x:V,y:W},G,G);case"ELLIPSE":return V=parseFloat(this.attr("cx"))||0,W=parseFloat(this.attr("cy"))||0,ee=parseFloat(this.attr("rx"))||0,ae=parseFloat(this.attr("ry"))||0,new Wi({x:V,y:W},ee,ae);case"POLYLINE":return K=h.getPointsFromSvgNode(this),new dn(K);case"POLYGON":return K=h.getPointsFromSvgNode(this),K.length>1&&K.push(K[0]),new dn(K);case"PATH":return U=this.attr("d"),Nt.isDataSupported(U)||(U=h.normalizePathData(U)),new Nt(U);case"LINE":return j=parseFloat(this.attr("x1"))||0,de=parseFloat(this.attr("y1"))||0,J=parseFloat(this.attr("x2"))||0,ce=parseFloat(this.attr("y2"))||0,new bt({x:j,y:de},{x:J,y:ce})}return this.getBBox()},v.findIntersection=function(p,C){var O=this.svg().node;C=C||O;var N=this.getBBox({target:C}),V=N.center();if(N.intersectionWithLineFromCenterToPoint(p)){var W,G=this.tagName();if(G==="RECT"){var ee=new vt(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),ae=this.getTransformToElement(C),K=h.decomposeMatrix(ae),U=O.createSVGTransform();U.setRotate(-K.rotation,V.x,V.y);var j=h.transformRect(ee,U.matrix.multiply(ae));W=new vt(j).intersectionWithLineFromCenterToPoint(p,K.rotation)}else if(G==="PATH"||G==="POLYGON"||G==="POLYLINE"||G==="CIRCLE"||G==="ELLIPSE"){var J=G==="PATH"?this:this.convertToPath(),de=J.sample(),ce=1/0,Te=[],Se,re,oe,ne,te,le;for(Se=0;Se<de.length;Se++)re=de[Se],oe=h.createSVGPoint(re.x,re.y),oe=oe.matrixTransform(this.getTransformToElement(C)),re=new pe(oe),ne=re.distance(V),te=re.distance(p)*1.1,le=ne+te,le<ce?(ce=le,Te=[{sample:re,refDistance:te}]):le<ce+1&&Te.push({sample:re,refDistance:te});Te.sort(function(We,Ne){return We.refDistance-Ne.refDistance}),Te[0]&&(W=Te[0].sample)}return W}},v.setAttribute=function(p,C){const O=this.node;if(C===null)return this.removeAttr(p),this;const N=I[p],{ns:V}=h.qualifyAttr(N);return V?O.setAttributeNS(V,N,C):N==="id"?O.id=C:O.setAttribute(N,C),this},h.createSvgDocument=function(p){if(p){const O=`<svg xmlns="${t.svg}" xmlns:xlink="${t.xlink}" version="${r}">${p}</svg>`,{documentElement:N}=h.parseXML(O,{async:!1});return N}const C=document.createElementNS(t.svg,"svg");return C.setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),C.setAttribute("version",r),C},h.createSVGStyle=function(p){const{node:C}=h("style",{type:"text/css"},[h.createCDATASection(p)]);return C},h.createCDATASection=function(p=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(p)},h.idCounter=0,h.uniqueId=function(){return"v-"+ ++h.idCounter},h.toNode=function(p){return h.isV(p)?p.node:p.nodeName&&p||p[0]},h.ensureId=function(p){return p=h.toNode(p),p.id||(p.id=h.uniqueId())},h.sanitizeText=function(p){return(p||"").replace(/ /g,"Â ")},h.isUndefined=function(p){return typeof p>"u"},h.isString=function(p){return typeof p=="string"},h.isObject=function(p){return p&&typeof p=="object"},h.isArray=Array.isArray,h.parseXML=function(p,C){C=C||{};var O;try{var N=new DOMParser;h.isUndefined(C.async)||(N.async=C.async),O=N.parseFromString(p,"text/xml")}catch{O=void 0}if(!O||O.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+p);return O};const T=Object.create(null);["baseFrequency","baseProfile","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].forEach(p=>T[p]=p);const I=new Proxy(T,{get(p,C){return h.supportCamelCaseAttributes?C in p?p[C]:p[C]=C.replace(/[A-Z]/g,"-$&").toLowerCase():C}});Object.defineProperty(h,"attributeNames",{value:I,writable:!1}),Object.defineProperty(h,"supportCamelCaseAttributes",{value:!1,writable:!0}),h.qualifyAttr=function(p){if(p.indexOf(":")!==-1){var C=p.split(":");return{ns:t[C[0]],local:C[1]}}return{ns:null,local:p}},h.transformSeparatorRegex=/[ ,]+/,h.transformRegex=/\b\w+\([^()]+\)/g,h.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,h.transformTranslateRegex=/\btranslate\(([^()]+)\)/,h.transformRotateRegex=/\brotate\(([^()]+)\)/,h.transformScaleRegex=/\bscale\(([^()]+)\)/,h.transformStringToMatrix=function(p){let C=h.createSVGMatrix();const O=p&&p.match(h.transformRegex);if(!O)return C;const N=O.length;for(let V=0;V<N;V++){const G=O[V].match(h.transformFunctionRegex);if(G){let ee,ae,K,U,j,J=h.createSVGMatrix();const de=G[1].toLowerCase(),ce=G[2].split(h.transformSeparatorRegex);switch(de){case"scale":ee=parseFloat(ce[0]),ae=ce[1]===void 0?ee:parseFloat(ce[1]),J=J.scaleNonUniform(ee,ae);break;case"translate":K=parseFloat(ce[0]),U=parseFloat(ce[1]),J=J.translate(K,U);break;case"rotate":j=parseFloat(ce[0]),K=parseFloat(ce[1])||0,U=parseFloat(ce[2])||0,K!==0||U!==0?J=J.translate(K,U).rotate(j).translate(-K,-U):J=J.rotate(j);break;case"skewx":j=parseFloat(ce[0]),J=J.skewX(j);break;case"skewy":j=parseFloat(ce[0]),J=J.skewY(j);break;case"matrix":J.a=parseFloat(ce[0]),J.b=parseFloat(ce[1]),J.c=parseFloat(ce[2]),J.d=parseFloat(ce[3]),J.e=parseFloat(ce[4]),J.f=parseFloat(ce[5]);break;default:continue}C=C.multiply(J)}}return C},h.matrixToTransformString=function(p){return p||(p=!0),"matrix("+(p.a!==void 0?p.a:1)+","+(p.b!==void 0?p.b:0)+","+(p.c!==void 0?p.c:0)+","+(p.d!==void 0?p.d:1)+","+(p.e!==void 0?p.e:0)+","+(p.f!==void 0?p.f:0)+")"},h.parseTransformString=function(p){var C,O,N;if(p){var V=h.transformSeparatorRegex;if(p.trim().indexOf("matrix")>=0){var W=h.transformStringToMatrix(p),G=h.decomposeMatrix(W);C=[G.translateX,G.translateY],N=[G.scaleX,G.scaleY],O=[G.rotation];var ee=[];(C[0]!==0||C[1]!==0)&&ee.push("translate("+C+")"),(N[0]!==1||N[1]!==1)&&ee.push("scale("+N+")"),O[0]!==0&&ee.push("rotate("+O+")"),p=ee.join(" ")}else{const K=p.match(h.transformTranslateRegex);K&&(C=K[1].split(V));const U=p.match(h.transformRotateRegex);U&&(O=U[1].split(V));const j=p.match(h.transformScaleRegex);j&&(N=j[1].split(V))}}var ae=N&&N[0]?parseFloat(N[0]):1;return{value:p,translate:{tx:C&&C[0]?parseInt(C[0],10):0,ty:C&&C[1]?parseInt(C[1],10):0},rotate:{angle:O&&O[0]?parseInt(O[0],10):0,cx:O&&O[1]?parseInt(O[1],10):void 0,cy:O&&O[2]?parseInt(O[2],10):void 0},scale:{sx:ae,sy:N&&N[1]?parseFloat(N[1]):ae}}},h.deltaTransformPoint=function(p,C){var O=C.x*p.a+C.y*p.c+0,N=C.x*p.b+C.y*p.d+0;return{x:O,y:N}},h.decomposeMatrix=function(p){var C=h.deltaTransformPoint(p,{x:0,y:1}),O=h.deltaTransformPoint(p,{x:1,y:0}),N=180/i*s(C.y,C.x)-90,V=180/i*s(O.y,O.x);return{translateX:p.e,translateY:p.f,scaleX:o(p.a*p.a+p.b*p.b),scaleY:o(p.c*p.c+p.d*p.d),skewX:N,skewY:V,rotation:N}},h.matrixToScale=function(p){var C,O,N,V;return p?(C=h.isUndefined(p.a)?1:p.a,V=h.isUndefined(p.d)?1:p.d,O=p.b,N=p.c):C=V=1,{sx:O?o(C*C+O*O):C,sy:N?o(N*N+V*V):V}},h.matrixToRotate=function(p){var C={x:0,y:1};return p&&(C=h.deltaTransformPoint(p,C)),{angle:Oo(qg(s(C.y,C.x))-90)}},h.matrixToTranslate=function(p){return{tx:p&&p.e||0,ty:p&&p.f||0}},h.isV=function(p){return p instanceof h},h.isVElement=h.isV,h.isSVGGraphicsElement=function(p){return p?(p=h.toNode(p),p instanceof SVGElement&&typeof p.getScreenCTM=="function"):!1};var q=h("svg").node;return h.createSVGMatrix=function(p){var C=q.createSVGMatrix();for(var O in p)C[O]=p[O];return C},h.createSVGTransform=function(p){return h.isUndefined(p)?q.createSVGTransform():(p instanceof SVGMatrix||(p=h.createSVGMatrix(p)),q.createSVGTransformFromMatrix(p))},h.createSVGPoint=function(p,C){var O=q.createSVGPoint();return O.x=p,O.y=C,O},h.transformRect=function(p,C){var O=q.createSVGPoint();O.x=p.x,O.y=p.y;var N=O.matrixTransform(C);O.x=p.x+p.width,O.y=p.y;var V=O.matrixTransform(C);O.x=p.x+p.width,O.y=p.y+p.height;var W=O.matrixTransform(C);O.x=p.x,O.y=p.y+p.height;var G=O.matrixTransform(C),ee=a(N.x,V.x,W.x,G.x),ae=u(N.x,V.x,W.x,G.x),K=a(N.y,V.y,W.y,G.y),U=u(N.y,V.y,W.y,G.y);return new vt(ee,K,ae-ee,U-K)},h.transformPoint=function(p,C){return new pe(h.createSVGPoint(p.x,p.y).matrixTransform(C))},h.transformLine=function(p,C){return new bt(h.transformPoint(p.start,C),h.transformPoint(p.end,C))},h.transformPolyline=function(p,C){var O=p instanceof dn?p.points:p;h.isArray(O)||(O=[]);for(var N=[],V=0,W=O.length;V<W;V++)N[V]=h.transformPoint(O[V],C);return new dn(N)},h.styleToObject=function(p){for(var C={},O=p.split(";"),N=0;N<O.length;N++){var V=O[N],W=V.split("=");C[W[0].trim()]=W[1].trim()}return C},h.createSlicePathData=function(p,C,O,N){var V=2*i-1e-6,W=p,G=C,ee=O,ae=N,K=(ae<ee&&(K=ee,ee=ae,ae=K),ae-ee),U=K<i?"0":"1",j=c(ee),J=f(ee),de=c(ae),ce=f(ae);return K>=V?W?"M0,"+G+"A"+G+","+G+" 0 1,1 0,"+-G+"A"+G+","+G+" 0 1,1 0,"+G+"M0,"+W+"A"+W+","+W+" 0 1,0 0,"+-W+"A"+W+","+W+" 0 1,0 0,"+W+"Z":"M0,"+G+"A"+G+","+G+" 0 1,1 0,"+-G+"A"+G+","+G+" 0 1,1 0,"+G+"Z":W?"M"+G*j+","+G*J+"A"+G+","+G+" 0 "+U+",1 "+G*de+","+G*ce+"L"+W*de+","+W*ce+"A"+W+","+W+" 0 "+U+",0 "+W*j+","+W*J+"Z":"M"+G*j+","+G*J+"A"+G+","+G+" 0 "+U+",1 "+G*de+","+G*ce+"L0,0Z"},h.mergeAttrs=function(p,C){for(var O in C)O==="class"?p[O]=p[O]?p[O]+" "+C[O]:C[O]:O==="style"?h.isObject(p[O])&&h.isObject(C[O])?p[O]=h.mergeAttrs(p[O],C[O]):h.isObject(p[O])?p[O]=h.mergeAttrs(p[O],h.styleToObject(C[O])):h.isObject(C[O])?p[O]=h.mergeAttrs(h.styleToObject(p[O]),C[O]):p[O]=h.mergeAttrs(h.styleToObject(p[O]),h.styleToObject(C[O])):p[O]=C[O];return p},h.annotateString=function(p,C,O){C=C||[],O=O||{};for(var N=O.offset||0,V=[],W,G=[],ee,ae,K=0;K<p.length;K++){ee=G[K]=p[K];for(var U=0;U<C.length;U++){var j=C[U],J=j.start+N,de=j.end+N;K>=J&&K<de&&(h.isObject(ee)?ee.attrs=h.mergeAttrs(h.mergeAttrs({},ee.attrs),j.attrs):ee=G[K]={t:p[K],attrs:j.attrs},O.includeAnnotationIndices&&(ee.annotations||(ee.annotations=[])).push(U))}ae=G[K-1],ae?h.isObject(ee)&&h.isObject(ae)?JSON.stringify(ee.attrs)===JSON.stringify(ae.attrs)?W.t+=ee.t:(V.push(W),W=ee):h.isObject(ee)||h.isObject(ae)?(V.push(W),W=ee):W=(W||"")+ee:W=ee}return W&&V.push(W),V},h.findAnnotationsAtIndex=function(p,C){var O=[];return p&&p.forEach(function(N){N.start<C&&C<=N.end&&O.push(N)}),O},h.findAnnotationsBetweenIndexes=function(p,C,O){var N=[];return p&&p.forEach(function(V){(C>=V.start&&C<V.end||O>V.start&&O<=V.end||V.start>=C&&V.end<O)&&N.push(V)}),N},h.shiftAnnotations=function(p,C,O){return p&&p.forEach(function(N){N.start<C&&N.end>=C?N.end+=O:N.start>=C&&(N.start+=O,N.end+=O)}),p},h.convertLineToPathData=function(p){p=h(p);var C=["M",p.attr("x1"),p.attr("y1"),"L",p.attr("x2"),p.attr("y2")].join(" ");return C},h.convertPolygonToPathData=function(p){var C=h.getPointsFromSvgNode(p);return C.length===0?null:h.svgPointsToPath(C)+" Z"},h.convertPolylineToPathData=function(p){var C=h.getPointsFromSvgNode(p);return C.length===0?null:h.svgPointsToPath(C)},h.svgPointsToPath=function(p){for(var C=0,O=p.length;C<O;C++)p[C]=p[C].x+" "+p[C].y;return"M "+p.join(" L")},h.getPointsFromSvgNode=function(p){p=h.toNode(p);var C=[],O=p.points;if(O)for(var N=0,V=O.numberOfItems;N<V;N++)C.push(O.getItem(N));return C},h.KAPPA=.551784,h.convertCircleToPathData=function(p){p=h(p);var C=parseFloat(p.attr("cx"))||0,O=parseFloat(p.attr("cy"))||0,N=parseFloat(p.attr("r")),V=N*h.KAPPA,W=["M",C,O-N,"C",C+V,O-N,C+N,O-V,C+N,O,"C",C+N,O+V,C+V,O+N,C,O+N,"C",C-V,O+N,C-N,O+V,C-N,O,"C",C-N,O-V,C-V,O-N,C,O-N,"Z"].join(" ");return W},h.convertEllipseToPathData=function(p){p=h(p);var C=parseFloat(p.attr("cx"))||0,O=parseFloat(p.attr("cy"))||0,N=parseFloat(p.attr("rx")),V=parseFloat(p.attr("ry"))||N,W=N*h.KAPPA,G=V*h.KAPPA,ee=["M",C,O-V,"C",C+W,O-V,C+N,O-G,C+N,O,"C",C+N,O+G,C+W,O+V,C,O+V,"C",C-W,O+V,C-N,O+G,C-N,O,"C",C-N,O-G,C-W,O-V,C,O-V,"Z"].join(" ");return ee},h.convertRectToPathData=function(p){return p=h(p),h.rectToPath({x:parseFloat(p.attr("x"))||0,y:parseFloat(p.attr("y"))||0,width:parseFloat(p.attr("width"))||0,height:parseFloat(p.attr("height"))||0,rx:parseFloat(p.attr("rx"))||0,ry:parseFloat(p.attr("ry"))||0})},h.rectToPath=function(p){var C,O=p.x,N=p.y,V=p.width,W=p.height,G=a(p.rx||p["top-rx"]||0,V/2),ee=a(p.rx||p["bottom-rx"]||0,V/2),ae=a(p.ry||p["top-ry"]||0,W/2),K=a(p.ry||p["bottom-ry"]||0,W/2);return G||ee||ae||K?C=["M",O,N+ae,"v",W-ae-K,"a",ee,K,0,0,0,ee,K,"h",V-2*ee,"a",ee,K,0,0,0,ee,-K,"v",-(W-K-ae),"a",G,ae,0,0,0,-G,-ae,"h",-(V-2*G),"a",G,ae,0,0,0,-G,ae,"Z"]:C=["M",O,N,"H",O+V,"V",N+W,"H",O,"V",N,"Z"],C.join(" ")},h.normalizePathData=function(){var p=`	
\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029`,C=new RegExp("([a-z])["+p+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+p+"]*,?["+p+"]*)+)","ig"),O=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+p+"]*,?["+p+"]*","ig"),N=Math,V=N.PI,W=N.sin,G=N.cos,ee=N.tan,ae=N.asin,K=N.sqrt,U=N.abs;function j(re,oe,ne,te,le,We){var Ne=.3333333333333333,Re=2/3;return[Ne*re+Re*ne,Ne*oe+Re*te,Ne*le+Re*ne,Ne*We+Re*te,le,We]}function J(re,oe,ne){var te=re*G(ne)-oe*W(ne),le=re*W(ne)+oe*G(ne);return{x:te,y:le}}function de(re,oe,ne,te,le,We,Ne,Re,rt,Ve){var L=V*120/180,B=V/180*(+le||0),H=[],X;if(Ve)je=Ve[0],ct=Ve[1],Ie=Ve[2],be=Ve[3];else{X=J(re,oe,-B),re=X.x,oe=X.y,X=J(Re,rt,-B),Re=X.x,rt=X.y;var xe=(re-Re)/2,ue=(oe-rt)/2,Ae=xe*xe/(ne*ne)+ue*ue/(te*te);Ae>1&&(Ae=K(Ae),ne=Ae*ne,te=Ae*te);var Ce=ne*ne,Be=te*te,Le=(We==Ne?-1:1)*K(U((Ce*Be-Ce*ue*ue-Be*xe*xe)/(Ce*ue*ue+Be*xe*xe))),Ie=Le*ne*ue/te+(re+Re)/2,be=Le*-te*xe/ne+(oe+rt)/2,je=ae(((oe-be)/te).toFixed(9)),ct=ae(((rt-be)/te).toFixed(9));je=re<Ie?V-je:je,ct=Re<Ie?V-ct:ct,je<0&&(je=V*2+je),ct<0&&(ct=V*2+ct),Ne&&je>ct&&(je=je-V*2),!Ne&&ct>je&&(ct=ct-V*2)}var mt=ct-je;if(U(mt)>L){var ft=ct,it=Re,Ht=rt;ct=je+L*(Ne&&ct>je?1:-1),Re=Ie+ne*G(ct),rt=be+te*W(ct),H=de(Re,rt,ne,te,le,0,Ne,it,Ht,[ct,ft,Ie,be])}mt=ct-je;var yr=G(je),Qt=W(je),cr=G(ct),Lr=W(ct),Br=ee(mt/4),bn=4/3*(ne*Br),tr=4/3*(te*Br),Ir=[re,oe],vn=[re+bn*Qt,oe-tr*yr],mn=[Re+bn*Lr,rt-tr*cr],pn=[Re,rt];if(vn[0]=2*Ir[0]-vn[0],vn[1]=2*Ir[1]-vn[1],Ve)return[vn,mn,pn].concat(H);H=[vn,mn,pn].concat(H).join().split(",");for(var Gn=[],ei=H.length,Bt=0;Bt<ei;Bt++)Gn[Bt]=Bt%2?J(H[Bt-1],H[Bt],B).y:J(H[Bt],H[Bt+1],B).x;return Gn}function ce(re){if(!re)return null;var oe={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},ne=[];return String(re).replace(C,function(te,le,We){var Ne=[],Re=le.toLowerCase();for(We.replace(O,function(rt,Ve){Ve&&Ne.push(+Ve)}),Re==="m"&&Ne.length>2&&(ne.push([le].concat(Ne.splice(0,2))),Re="l",le=le==="m"?"l":"L");Ne.length>=oe[Re]&&(ne.push([le].concat(Ne.splice(0,oe[Re]))),!!oe[Re]););}),ne}function Te(re){if((!Array.isArray(re)||!Array.isArray(re&&re[0]))&&(re=ce(re)),!re||!re.length)return[["M",0,0]];for(var oe=[],ne=0,te=0,le=0,We=0,Ne=0,Re,rt=re.length,Ve=Ne;Ve<rt;Ve++){var L=[];oe.push(L);var B=re[Ve];if(Re=B[0],Re!=Re.toUpperCase()){L[0]=Re.toUpperCase();var H,X;switch(L[0]){case"A":L[1]=B[1],L[2]=B[2],L[3]=B[3],L[4]=B[4],L[5]=B[5],L[6]=+B[6]+ne,L[7]=+B[7]+te;break;case"V":L[1]=+B[1]+te;break;case"H":L[1]=+B[1]+ne;break;case"M":for(le=+B[1]+ne,We=+B[2]+te,H=B.length,X=1;X<H;X++)L[X]=+B[X]+(X%2?ne:te);break;default:for(H=B.length,X=1;X<H;X++)L[X]=+B[X]+(X%2?ne:te);break}}else for(var xe=B.length,ue=0;ue<xe;ue++)L[ue]=B[ue];switch(L[0]){case"Z":ne=+le,te=+We;break;case"H":ne=L[1];break;case"V":te=L[1];break;case"M":le=L[L.length-2],We=L[L.length-1],ne=L[L.length-2],te=L[L.length-1];break;default:ne=L[L.length-2],te=L[L.length-1];break}}return oe}function Se(re){var oe=Te(re),ne={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function te(H,X,xe){var ue,Ae;if(!H)return["C",X.x,X.y,X.x,X.y,X.x,X.y];switch(H[0]in{T:1,Q:1}||(X.qx=null,X.qy=null),H[0]){case"M":X.X=H[1],X.Y=H[2];break;case"A":parseFloat(H[1])===0||parseFloat(H[2])===0?H=["L",H[6],H[7]]:H=["C"].concat(de.apply(0,[X.x,X.y].concat(H.slice(1))));break;case"S":xe==="C"||xe==="S"?(ue=X.x*2-X.bx,Ae=X.y*2-X.by):(ue=X.x,Ae=X.y),H=["C",ue,Ae].concat(H.slice(1));break;case"T":xe==="Q"||xe==="T"?(X.qx=X.x*2-X.qx,X.qy=X.y*2-X.qy):(X.qx=X.x,X.qy=X.y),H=["C"].concat(j(X.x,X.y,X.qx,X.qy,H[1],H[2]));break;case"Q":X.qx=H[1],X.qy=H[2],H=["C"].concat(j(X.x,X.y,H[1],H[2],H[3],H[4]));break;case"H":H=["L"].concat(H[1],X.y);break;case"V":H=["L"].concat(X.x,H[1]);break}return H}function le(H,X){if(H[X].length>7){H[X].shift();for(var xe=H[X];xe.length;)We[X]="A",H.splice(X++,0,["C"].concat(xe.splice(0,6)));H.splice(X,1),rt=oe.length}}for(var We=[],Ne="",Re="",rt=oe.length,Ve=0;Ve<rt;Ve++){oe[Ve]&&(Ne=oe[Ve][0]),Ne!=="C"&&(We[Ve]=Ne,Ve>0&&(Re=We[Ve-1])),oe[Ve]=te(oe[Ve],ne,Re),We[Ve]!=="A"&&Ne==="C"&&(We[Ve]="C"),le(oe,Ve);var L=oe[Ve],B=L.length;ne.x=L[B-2],ne.y=L[B-1],ne.bx=parseFloat(L[B-4])||ne.x,ne.by=parseFloat(L[B-3])||ne.y}return(!oe[0][0]||oe[0][0]!=="M")&&oe.unshift(["M",0,0]),oe}return function(re){return Se(re).join(",").split(",").join(" ")}}(),h.namespace=t,h.g=_ce,h}(),yu={classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},lh="[object Arguments]",tE="[object Array]",Zg="[object Boolean]",PA="[object Date]",W$="[object Error]",Jce="[object Function]",Dh="[object Map]",Jg="[object Number]",Qce="[object Null]",il="[object Object]",CA="[object RegExp]",Fh="[object Set]",Qg="[object String]",ev="[object Symbol]",ele="[object Undefined]",tle="[object WeakMap]",RA="[object ArrayBuffer]",IA="[object DataView]",X$="[object Float32Array]",Y$="[object Float64Array]",K$="[object Int8Array]",Z$="[object Int16Array]",J$="[object Int32Array]",Q$="[object Uint8Array]",eU="[object Uint8ClampedArray]",tU="[object Uint16Array]",rU="[object Uint32Array]",rle={[lh]:!0,[tE]:!0,[RA]:!0,[IA]:!0,[Zg]:!0,[PA]:!0,[X$]:!0,[Y$]:!0,[K$]:!0,[Z$]:!0,[J$]:!0,[Dh]:!0,[Jg]:!0,[il]:!0,[CA]:!0,[Fh]:!0,[Qg]:!0,[ev]:!0,[Q$]:!0,[eU]:!0,[tU]:!0,[rU]:!0,[W$]:!1,[Jce]:!1,[tle]:!1},OA="\\ud800-\\udfff",nle="\\u0300-\\u036f",ile="\\ufe20-\\ufe2f",sle="\\u20d0-\\u20ff",ole="\\u1ab0-\\u1aff",ale="\\u1dc0-\\u1dff",ule=nle+ile+sle+ole+ale,nU="\\u2700-\\u27bf",iU="a-z\\xdf-\\xf6\\xf8-\\xff",cle="\\xac\\xb1\\xd7\\xf7",lle="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fle="\\u2000-\\u206f",hle=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",sU="A-Z\\xc0-\\xd6\\xd8-\\xde",dle="\\ufe0e\\ufe0f",oU=cle+lle+fle+hle,aU="['â]",a5=`[${oU}]`,MA=`[${ule}]`,uU="\\d",ple=`[${nU}]`,cU=`[${iU}]`,lU=`[^${OA}${oU+uU+nU+iU+sU}]`,rE="\\ud83c[\\udffb-\\udfff]",gle=`(?:${MA}|${rE})`,fU=`[^${OA}]`,kA="(?:\\ud83c[\\udde6-\\uddff]){2}",LA="[\\ud800-\\udbff][\\udc00-\\udfff]",el=`[${sU}]`,vle="\\u200d",u5=`(?:${cU}|${lU})`,mle=`(?:${el}|${lU})`,c5=`(?:${aU}(?:d|ll|m|re|s|t|ve))?`,l5=`(?:${aU}(?:D|LL|M|RE|S|T|VE))?`,hU=`${gle}?`,dU=`[${dle}]?`,yle=`(?:${vle}(?:${[fU,kA,LA].join("|")})${dU+hU})*`,_le="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ble="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",pU=dU+hU+yle,wle=`(?:${[ple,kA,LA].join("|")})${pU}`,xle=RegExp([`${el}?${cU}+${c5}(?=${[a5,el,"$"].join("|")})`,`${mle}+${l5}(?=${[a5,el+u5,"$"].join("|")})`,`${el}?${u5}+${c5}`,`${el}+${l5}`,ble,_le,`${uU}+`,wle].join("|"),"g"),NA=200,nE="__hash_undefined__",Sle=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,Ele=`[${OA}]`,Ale=`${fU}${MA}?`,Tle=`(?:${[Ale,MA,kA,LA,Ele].join("|")})`,gU=RegExp(`${rE}(?=${rE})|${Tle+pU}`,"g"),Ple=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cle=/^\w*$/,Rle=46,Ile=/\\(\\)?/g,Ole=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),Mle=/^(?:0|[1-9]\d*)$/,kle=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),Lle=4294967294,Nle=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,vU=e=>gU.test(e),qle=e=>e.match(gU)||[],Dle=e=>e.split(""),mU=e=>vU(e)?qle(e):Dle(e),Fle=e=>e==null?[]:Bh(e).map(t=>e[t]),Bh=e=>po(e)?yU(e):Object.keys(Object(e)),Ble=e=>{if(!tv(e))return Object.keys(e);var t=[];for(var r in Object(e))hasOwnProperty.call(e,r)&&r!="constructor"&&t.push(r);return t},yU=(e,t)=>{const r=Array.isArray(e),n=!r&&ko(e)&&oo(e)===lh,i=!r&&!n&&Vh(e),s=r||n||i,o=e.length,a=new Array(s?o:0);let u=s?-1:o;for(;++u<o;)a[u]=`${u}`;for(const c in e)(t||hasOwnProperty.call(e,c))&&!(s&&(c==="length"||zA(c,o)))&&a.push(c);return a},Qd=(e,t)=>{let{length:r}=e;for(;r--;)if(jl(e[r][0],t))return r;return-1},jl=(e,t)=>e===t||e!==e&&t!==t,ko=e=>e!=null&&typeof e=="object",Dp=(e,t,r)=>{if(!Wr(r))return!1;const n=typeof t;return(n=="number"?po(r)&&t>-1&&t<r.length:n=="string"&&t in r)?jl(r[t],e):!1},zle=e=>ko(e)&&oo(e)==Fh,Vle=e=>ko(e)&&oo(e)==Dh,tv=e=>{const t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Object.prototype;return e===r},Hl=(e,t,r)=>{const n=e[t];(!(hasOwnProperty.call(e,t)&&jl(n,r))||r===void 0&&!(t in e))&&(e[t]=r)},zh=(e,t,r)=>{let n=-1;const i=t.length;for(;++n<i;){const s=t[n];Hl(r,s,e[s])}return r},po=e=>e!=null&&typeof e!="function"&&typeof e.length=="number"&&e.length>-1&&e.length%1===0,Sl=e=>typeof e=="symbol"||ko(e)&&oo(e)===ev,Gle=e=>{const t=e.length;let r=new e.constructor(t);return t&&typeof e[0]=="string"&&hasOwnProperty.call(e,"index")&&(r.index=e.index,r.input=e.input),r},qA=(e,t)=>{let r=-1;const n=e.length;for(t||(t=new Array(n));++r<n;)t[r]=e[r];return t},oo=e=>e==null?e===void 0?ele:Qce:Object.prototype.toString.call(e),DA=e=>{const t=new e.constructor(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t},_U=(e,t)=>{const r=t?DA(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},$le=e=>{const t=new e.constructor(e.source,/\w*$/.exec(e));return t.lastIndex=e.lastIndex,t},bU=e=>typeof e.constructor=="function"&&!tv(e)?Object.create(Object.getPrototypeOf(e)):{},FA=e=>e==null?[]:(e=Object(e),Object.getOwnPropertySymbols(e).filter(r=>propertyIsEnumerable.call(e,r))),Ule=(e,t)=>zh(e,FA(e),t);function jle(e,t){const r=t?DA(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}const Hle=(e,t,r)=>{const n=e.constructor;switch(t){case RA:return DA(e);case Zg:case PA:return new n(+e);case IA:return jle(e,r);case X$:case Y$:case K$:case Z$:case J$:case Q$:case eU:case tU:case rU:return _U(e,r);case Dh:return new n(e);case Jg:case Qg:return new n(e);case CA:return $le(e);case Fh:return new n;case ev:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(e)):{}}},Vh=e=>ko(e)&&Sle.test(oo(e)),iE=e=>{const t=Object.keys(e);return!Array.isArray(e)&&e!=null&&t.push(...FA(Object(e))),t},wU=e=>{const t=[];for(;e;)t.push(...FA(e)),e=Object.getPrototypeOf(Object(e));return t},xU=e=>{const t=[];for(const r in e)t.push(r);return Array.isArray(e)||t.push(...wU(e)),t},ep=({__data__:e},t)=>{const r=e;return ife(t)?r[typeof t=="string"?"string":"hash"]:r.map},Wle=(e,t,r,n)=>{const i=iE(e),s=i.length,a=iE(t).length;if(s!=a)return!1;let u,c=s;for(;c--;)if(u=i[c],!hasOwnProperty.call(t,u))return!1;const f=n.get(e),h=n.get(t);if(f&&h)return f==t&&h==e;let v=!0;n.set(e,t),n.set(t,e);let y;for(;++c<s;){u=i[c];const m=e[u],_=t[u];if(!(m===_||r(m,_,n))){v=!1;break}y||(y=u=="constructor")}if(v&&!y){const m=e.constructor,_=t.constructor;m!=_&&"constructor"in e&&"constructor"in t&&!(typeof m=="function"&&m instanceof m&&typeof _=="function"&&_ instanceof _)&&(v=!1)}return n.delete(e),n.delete(t),v},rv=(e,t,r)=>e===t?!0:e==null||t==null||!ko(e)&&!ko(t)?e!==e&&t!==t:Xle(e,t,rv,r),Xle=(e,t,r,n)=>{let i=Array.isArray(e);const s=Array.isArray(t);let o=i?tE:oo(e),a=s?tE:oo(t);o=o==lh?il:o,a=a==lh?il:a;let u=o==il;const c=a==il,f=o==a;if(f&&!u)return n||(n=new hl),i||Vh(e)?SU(e,t,!1,r,n):Zle(e,t,o,r,n);const h=u&&hasOwnProperty.call(e,"__wrapped__"),v=c&&hasOwnProperty.call(t,"__wrapped__");if(h||v){const y=h?e.value():e,m=v?t.value():t;return n||(n=new hl),r(y,m,n)}return f?(n||(n=new hl),Wle(e,t,r,n)):!1},SU=(e,t,r,n,i)=>{const s=e.length,o=t.length;if(s!=o)return!1;const a=i.get(e),u=i.get(t);if(a&&u)return a==t&&u==e;let c=-1,f=!0;const h=r?new hh:void 0;for(i.set(e,t),i.set(t,e);++c<s;){const v=e[c],y=t[c];if(h){if(!Yle(t,(m,_)=>{if(!Kle(h,_)&&(v===m||n(v,m,i)))return h.push(_)})){f=!1;break}}else if(!(v===y||n(v,y,i))){f=!1;break}}return i.delete(e),i.delete(t),f},Yle=(e,t)=>{let r=-1;const n=e==null?0:e.length;for(;++r<n;)if(t(e[r],r,e))return!0;return!1},Kle=(e,t)=>e.has(t),f5=(e,t,r,n)=>!(e.byteLength!=t.byteLength||!r(new Uint8Array(e),new Uint8Array(t),n)),Zle=(e,t,r,n,i)=>{switch(r){case IA:return e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset?!1:(e=e.buffer,t=t.buffer,f5(e,t,n,i));case RA:return f5(e,t,n,i);case Zg:case PA:case Jg:return jl(+e,+t);case W$:return e.name==t.name&&e.message==t.message;case CA:case Qg:return e==`${t}`;case Dh:let s=EU;case Fh:if(s||(s=nv),e.size!=t.size)return!1;const o=i.get(e);if(o)return o==t;i.set(e,t);const a=SU(s(e),s(t),!0,n,i);return i.delete(e),a;case ev:return Symbol.prototype.valueOf.call(e)==Symbol.prototype.valueOf.call(t)}return!1},EU=e=>{let t=-1,r=Array(e.size);return e.forEach((n,i)=>{r[++t]=[i,n]}),r},nv=e=>{let t=-1;const r=new Array(e.size);return e.forEach(n=>{r[++t]=n}),r},BA=(e,t)=>{if(Array.isArray(e))return!1;const r=typeof e;return r==="number"||r==="boolean"||e==null||Sl(e)?!0:Cle.test(e)||!Ple.test(e)||t!=null&&e in Object(t)},Jle=e=>{const t=[];return e.charCodeAt(0)===Rle&&t.push(""),e.replace(Ole,(r,n,i,s)=>{let o=r;i?o=s.replace(Ile,"$1"):n&&(o=n.trim()),t.push(o)}),t},Mu=(e,t)=>Array.isArray(e)?e:BA(e,t)?[e]:Jle(`${e}`),Gh=(e,t)=>{t=Mu(t,e);let r=0;const n=t.length;for(;e!=null&&r<n;)e=e[ku(t[r])],r++;return r&&r==n?e:void 0};function Qle(e,t){if(e!==t){const r=e!==void 0,n=e===null,i=e===e,s=Sl(e),o=t!==void 0,a=t===null,u=t===t,c=Sl(t);if(!a&&!c&&!s&&e>t||s&&o&&u&&!a&&!c||n&&o&&u||!r&&u||!i)return 1;if(!n&&!s&&!c&&e<t||c&&r&&i&&!n&&!s||a&&r&&i||!o&&i||!u)return-1}return 0}function efe(e,t,r){let n=-1;const i=e.criteria,s=t.criteria,o=i.length,a=r.length;for(;++n<o;){const u=n<a?r[n]:null,f=(u&&typeof u=="function"?u:Qle)(i[n],s[n]);if(f)return u&&typeof u!="function"?f*(u=="desc"?-1:1):f}return e.index-t.index}const AU=(e,t)=>{let r=(o,a)=>!!(o==null?0:o.length)&&o.indexOf(a)>-1,n=!0;const i=[],s=t.length;if(!e.length)return i;t.length>=NA&&(r=(o,a)=>o.has(a),n=!1,t=new hh(t));e:for(let o in e){let a=e[o];const u=a;if(a=a!==0?a:0,n&&u===u){let c=s;for(;c--;)if(t[c]===u)continue e;i.push(a)}else r(t,u)||i.push(a)}return i},ku=e=>{if(typeof e=="string"||Sl(e))return e;const t=`${e}`;return t=="0"&&1/e==-1/0?"-0":t},fl=(e,t=!1,r=!1,n=!0,i,s,o,a)=>{let u;if(i&&(u=o?i(e,s,o,a):i(e)),u!==void 0)return u;if(!Wr(e))return e;const c=Array.isArray(e),f=oo(e);if(c){if(u=Gle(e),!t)return qA(e,u)}else{const m=typeof e=="function";if(f===il||f===lh||m&&!o){if(u=r||m?{}:bU(e),!t)return r?tfe(e,zh(e,Object.keys(e),u)):Ule(e,Object.assign(u,e))}else{if(m||!rle[f])return o?e:{};u=Hle(e,f,t)}}a||(a=new hl);const h=a.get(e);if(h)return h;if(a.set(e,u),Vle(e))return e.forEach((m,_)=>{u.set(_,fl(m,t,r,n,i,_,e,a))}),u;if(zle(e))return e.forEach(m=>{u.add(fl(m,t,r,n,i,m,e,a))}),u;if(Vh(e))return u;const y=c?void 0:(n?r?xU:iE:r?PU:Bh)(e);return(y||e).forEach((m,_)=>{y&&(_=m,m=e[_]),Hl(u,_,fl(m,t,r,n,i,_,e,a))}),u},tfe=(e,t)=>zh(e,wU(e),t),TU=(e,t)=>t.length<2?e:Gh(e,t.slice(0,-1)),rfe=(e,t,r)=>{if(!Wr(e))return e;t=Mu(t,e);const n=t.length,i=n-1;let s=-1,o=e;for(;o!=null&&++s<n;){const a=ku(t[s]);let u=r;if(s!=i){const c=o[a];u=void 0,u===void 0&&(u=Wr(c)?c:zA(t[s+1])?[]:{})}Hl(o,a,u),o=o[a]}return e},zA=(e,t)=>{const r=typeof e;return t=t??Number.MAX_SAFE_INTEGER,!!t&&(r==="number"||r!=="symbol"&&Mle.test(e))&&e>-1&&e%1==0&&e<t},nfe=(e,t)=>{t=Mu(t,e),e=TU(e,t);const r=t[t.length-1];return e==null||delete e[ku(r)]},ife=e=>{const t=typeof e;return t==="string"||t==="number"||t==="symbol"||t==="boolean"?e!=="__proto__":e===null},PU=e=>{const t=[];for(const r in e)t.push(r);return t},sfe=e=>{e=Object(e);const t={};for(const r in e)t[r]=e[r];return t},h5=(e,t)=>{if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]};function CU(e,t=!1){return(r,...n)=>{let i=-1,s=n.length,o=s>1?n[s-1]:void 0;const a=s>2?n[2]:void 0;for(o=e.length>3&&typeof o=="function"?(s--,o):t?(u,c)=>{if(Array.isArray(u)&&!Array.isArray(c))return c}:void 0,a&&Dp(n[0],n[1],a)&&(o=s<3?void 0:o,s=1),r=Object(r);++i<s;){const u=n[i];u&&e(r,u,i,o)}return r}}const VA=(e,t,r,n,i)=>{e!==t&&Zs(t,(s,o)=>{if(Wr(s))i||(i=new hl),ofe(e,t,o,r,VA,n,i);else{let a=n?n(e[o],s,`${o}`,e,t,i):void 0;a===void 0&&(a=s),sE(e,o,a)}})},ofe=(e,t,r,n,i,s,o)=>{const a=h5(e,r),u=h5(t,r),c=o.get(u);if(c){sE(e,r,c);return}let f=s?s(a,u,`${r}`,e,t,o):void 0,h=f===void 0;if(h){const v=Array.isArray(u),y=!v&&Vh(u);f=u,v||y?Array.isArray(a)?f=a:ko(a)&&po(a)?f=qA(a):y?(h=!1,f=_U(u,!0)):f=[]:Kn(u)||fh(u)?(f=a,fh(a)?f=sfe(a):(typeof a=="function"||!Wr(a))&&(f=bU(u))):h=!1}h&&(o.set(u,f),i(f,u,n,s,o),o.delete(u)),sE(e,r,f)},sE=(e,t,r)=>{(r!==void 0&&!jl(e[t],r)||r===void 0&&!(t in e))&&Hl(e,t,r)};function afe(e,t,r){const n=Object(e),i=r(e);let{length:s}=i,o=-1;for(;s--;){const a=i[++o];if(t(n[a],a,n)===!1)break}return e}const ufe=(e,t)=>e&&afe(e,t,Bh),GA=(e,t)=>{if(e==null)return e;if(!po(e))return ufe(e,t);const r=e.length,n=Object(e);let i=-1;for(;++i<r&&t(n[i],i,n)!==!1;);return e};function cfe(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}const lfe=Set&&1/nv(new Set([void 0,-0]))[1]==1/0?e=>new Set(e):()=>{};function RU(e,t,r,n,i,s){return Wr(e)&&Wr(t)&&(s.set(t,e),VA(e,t,void 0,RU,s),s.delete(t)),e}function ffe(e,t,r){t.length?t=t.map(o=>Array.isArray(o)?a=>Gh(a,o.length===1?o[0]:o):o):t=[o=>o];let n=-1,i=-1;const s=po(e)?new Array(e.length):[];return GA(e,o=>{const a=t.map(u=>u(o));s[++i]={criteria:a,index:++n,value:o}}),hfe(s,(o,a)=>efe(o,a,r))}function hfe(e,t){let{length:r}=e;for(e.sort(t);r--;)e[r]=e[r].value;return e}function IU(e){return e===e&&!Wr(e)}function OU(e,t){return r=>r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}function MU(e,t){return e!=null&&Rfe(e,t,Cfe)}function dfe(e,t){return BA(e)&&IU(t)?OU(ku(e),t):r=>{const n=Gh(r,e);return n===void 0&&n===t?MU(r,e):rv(t,n)}}function pfe(e){const t=gfe(e);return t.length===1&&t[0][2]?OU(t[0][0],t[0][1]):r=>r===e||vfe(r,e,t)}function gfe(e){const t=Bh(e);let r=t.length;for(;r--;){const n=t[r],i=e[n];t[r]=[n,i,IU(i)]}return t}function vfe(e,t,r,n){let i=r.length;const s=i;if(e==null)return!s;let o;for(e=Object(e);i--;)if(o=r[i],o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1;for(;++i<s;){o=r[i];const a=o[0],u=e[a],c=o[1];if(o[2]){if(u===void 0&&!(a in e))return!1}else{const f=new hl;if(!rv(c,u,f))return!1}}return!0}function mfe(e){return BA(e)?yfe(ku(e)):_fe(e)}function yfe(e){return t=>t==null?void 0:t[e]}function _fe(e){return t=>Gh(t,e)}function bfe(e){return typeof e=="function"?e:e==null?t=>t:typeof e=="object"?Array.isArray(e)?dfe(e[0],e[1]):pfe(e):mfe(e)}function iv(){const e=bfe;return arguments.length?e(arguments[0]):e}const wfe=(e,t,r,n)=>{let i=-1;const s=e==null?0:e.length;for(n&&s&&(r=e[++i]);++i<s;)r=t(r,e[i],i,e);return r},xfe=(e,t,r,n,i)=>(i(e,(s,o,a)=>{r=n?(n=!1,s):t(r,s,o,a)}),r);function Sfe(e,t,r){const n=Array.isArray(e)?wfe:xfe,i=arguments.length<3;return n(e,t,r,i,GA)}const Efe=e=>Array.isArray(e)||fh(e)||!!(e&&e[Symbol.isConcatSpreadable]);function kU(e,t,r,n,i){let s=-1;const o=e.length;for(r||(r=Efe),i||(i=[]);++s<o;){var a=e[s];t>0&&r(a)?t>1?kU(a,t-1,r,n,i):i.push(...a):i[i.length]=a}return i}const fh=e=>ko(e)&&oo(e)=="[object Arguments]",Afe=(e,t)=>Tfe(e,t,(r,n)=>MU(e,n)),Tfe=(e,t,r)=>{let n=-1;const i=t.length,s={};for(;++n<i;){const o=t[n],a=Gh(e,o);r(a,o)&&rfe(s,Mu(o,e),a)}return s},Pfe=e=>typeof e=="number"&&e>-1&&e%1==0&&e<=Number.MAX_SAFE_INTEGER,Cfe=(e,t)=>e!=null&&t in Object(e),Rfe=(e,t,r)=>{t=Mu(t,e);for(var n=-1,i=t.length,s=!1;++n<i;){var o=ku(t[n]);if(!(s=e!=null&&r(e,o)))break;e=e[o]}return s||++n!=i?s:(i=e==null?0:e.length,!!i&&Pfe(i)&&zA(o,i)&&(Array.isArray(e)||fh(e)))},Ife=e=>e.match(Nle),Ofe=e=>e.match(xle),Mfe=(e,t)=>(kle(e)?Ofe(e):Ife(e))||[],kfe=(e,t,r)=>{const{length:n}=e;return r=r===void 0?n:r,e.slice(t,r)},Lfe=Nfe("toUpperCase");function Nfe(e){return t=>{if(!t)return"";const r=vU(t)?mU(t):void 0,n=r?r[0]:t[0],i=r?kfe(r,1).join(""):t.slice(1);return n[e]()+i}}class hl{constructor(t){const r=this.__data__=new ES(t);this.size=r.size}clear(){this.__data__=new ES,this.size=0}delete(t){const r=this.__data__,n=r.delete(t);return this.size=r.size,n}get(t){return this.__data__.get(t)}has(t){return this.__data__.has(t)}set(t,r){let n=this.__data__;if(n instanceof ES){const i=n.__data__;if(i.length<NA-1)return i.push([t,r]),this.size=++n.size,this;n=this.__data__=new LU(i)}return n.set(t,r),this.size=n.size,this}}class ES{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.clear();++r<n;){const i=t[r];this.set(i[0],i[1])}}clear(){this.__data__=[],this.size=0}delete(t){const r=this.__data__,n=Qd(r,t);if(n<0)return!1;const i=r.length-1;return n==i?r.pop():r.splice(n,1),--this.size,!0}get(t){const r=this.__data__,n=Qd(r,t);return n<0?void 0:r[n][1]}has(t){return Qd(this.__data__,t)>-1}set(t,r){const n=this.__data__,i=Qd(n,t);return i<0?(++this.size,n.push([t,r])):n[i][1]=r,this}}class LU{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.clear();++r<n;){const i=t[r];this.set(i[0],i[1])}}clear(){this.size=0,this.__data__={hash:new d5,map:new Map,string:new d5}}delete(t){const r=ep(this,t).delete(t);return this.size-=r?1:0,r}get(t){return ep(this,t).get(t)}has(t){return ep(this,t).has(t)}set(t,r){const n=ep(this,t),i=n.size;return n.set(t,r),this.size+=n.size==i?0:1,this}}class d5{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.clear();++r<n;){const i=t[r];this.set(i[0],i[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(t){const r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}get(t){const n=this.__data__[t];return n===nE?void 0:n}has(t){return this.__data__[t]!==void 0}set(t,r){const n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r===void 0?nE:r,this}}class hh{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.__data__=new LU;++r<n;)this.add(t[r])}add(t){return this.__data__.set(t,nE),this}has(t){return this.__data__.has(t)}}hh.prototype.push=hh.prototype.add;const qfe=function(e){var t=Object.prototype.toString;return e===!0||e===!1||!!e&&typeof e=="object"&&t.call(e)===Zg},Wr=function(e){return!!e&&(typeof e=="object"||typeof e=="function")},fs=function(e){var t=Object.prototype.toString;return typeof e=="number"||!!e&&typeof e=="object"&&t.call(e)===Jg},Mi=function(e){var t=Object.prototype.toString;return typeof e=="string"||!!e&&typeof e=="object"&&t.call(e)===Qg},$t=CU((e,t)=>{if(tv(t)||po(t)){zh(t,Bh(t),e);return}for(var r in t)hasOwnProperty.call(t,r)&&Hl(e,r,t[r])}),Dfe=(e,...t)=>{let r=-1,n=t.length;const i=n>2?t[2]:void 0;for(i&&Dp(t[0],t[1],i)&&(n=1);++r<n;){const s=t[r];if(s==null)continue;const o=Object.keys(s),a=o.length;let u=-1;for(;++u<a;){const c=o[u],f=e[c];(f===void 0||jl(f,Object.prototype[c])&&!hasOwnProperty.call(e,c))&&(e[c]=s[c])}}return e},Ms=Dfe,Ffe=function(...t){return t.push(void 0,RU),ti.apply(void 0,t)},$A=Ffe,To=(e,t,...r)=>{let n=-1;const i=typeof t=="function",s=po(e)?new Array(e.length):[];return GA(e,o=>{s[++n]=i?t.apply(o,r):Bfe(o,t,...r)}),s},Bfe=(e,t,...r)=>{t=Mu(t,e),e=TU(e,t);const n=e==null?e:e[ku(cfe(t))];return n==null?void 0:n.apply(e,r)},NU=(e,t,r)=>{let n=0,i=e==null?0:e.length;if(i==0)return 0;r=iv(r,2),t=r(t);const s=t!==t,o=t===null,a=Sl(t),u=t===void 0;for(;n<i;){let c;const f=Math.floor((n+i)/2),h=r(e[f]),v=h!==void 0,y=h===null,m=h===h,_=Sl(h);s?c=m:u?c=m&&v:o?c=m&&v&&!y:a?c=m&&v&&!y&&!_:y||_?c=!1:c=h<t,c?n=f+1:i=f}return Math.min(i,Lle)},$h=(e,t)=>{let r=-1,n=(u,c)=>!!(u==null?0:u.length)&&u.indexOf(c)>-1;t=iv(t,2);let i=!0;const{length:s}=e,o=[];let a=o;if(s>=NA){const u=t?null:lfe(e);if(u)return nv(u);i=!1,n=(c,f)=>c.has(f),a=new hh}else a=t?[]:o;e:for(;++r<s;){let u=e[r];const c=t?t(u):u;if(u=u!==0?u:0,i&&c===c){let f=a.length;for(;f--;)if(a[f]===c)continue e;t&&a.push(c),o.push(u)}else n(a,c)||(a!==o&&a.push(c),o.push(u))}return o},Qo=e=>fl(e),Ks=e=>fl(e,!0),Da=e=>{if(e==null)return!0;if(po(e)&&(Array.isArray(e)||typeof e=="string"||typeof e.splice=="function"||Vh(e)||fh(e)))return!e.length;const t=oo(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(tv(e))return!Ble(e).length;for(const r in e)if(hasOwnProperty.call(e,r))return!1;return!0},sl=(e,t)=>rv(e,t),fn=e=>typeof e=="function",Kn=e=>{if(!ko(e)||oo(e)!="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},Fr=e=>{if(!e)return[];if(po(e))return Mi(e)?mU(e):qA(e);if(Symbol.iterator&&Symbol.iterator in Object(e)){const n=e[Symbol.iterator]();let i;const s=[];for(;!(i=n.next()).done;)s.push(i.value);return s}const t=oo(e);return(t==Dh?EU:t==Fh?nv:Fle)(e)};function zfe(e,t,r){if(typeof e!="function")throw new TypeError("Expected a function");let n,i,s,o,a,u,c=0,f=!1,h=!1,v=!0;const y=!t&&t!==0&&window&&typeof window.requestAnimationFrame=="function";t=+t||0,Wr(r)&&(f=!!r.leading,h="maxWait"in r,s=h?Math.max(20,t):s,v="trailing"in r?!!r.trailing:v);function m(p){const C=n,O=i;return n=i=void 0,c=p,o=e.apply(O,C),o}function _(p,C){return y?(window.cancelAnimationFrame(a),window.requestAnimationFrame(p)):setTimeout(p,C)}function w(p){if(y)return window.cancelAnimationFrame(p);clearTimeout(p)}function S(p){return c=p,a=_(T,t),f?m(p):o}function E(p){const C=p-u,O=p-c,N=t-C;return h?Math.min(N,s-O):N}function A(p){const C=p-u,O=p-c;return u===void 0||C>=t||C<0||h&&O>=s}function T(){const p=Date.now();if(A(p))return I(p);a=_(T,E(p))}function I(p){return a=void 0,v&&n?m(p):(n=i=void 0,o)}function q(...p){const C=Date.now(),O=A(C);if(n=p,i=this,u=C,O){if(a===void 0)return S(u);if(h)return a=_(T,t),m(u)}return a===void 0&&(a=_(T,t)),o}return q.cancel=()=>{a!==void 0&&w(a),c=0,n=u=i=a=void 0},q.flush=()=>a===void 0?o:I(Date.now()),q.pending=()=>a!==void 0,q}const Vfe=(e,t)=>(t=iv(t,2),Sfe(e,(r,n,i)=>(i=t(n),hasOwnProperty.call(r,i)?r[i].push(n):Hl(r,i,[n]),r),{})),AS=(e,t=[])=>{if(e==null)return[];const r=t.length;return r>1&&Dp(e,t[0],t[1])?t=[]:r>2&&Dp(t[0],t[1],t[2])&&(t=[t[0]]),Array.isArray(t)||(t=[iv(t,2)]),ffe(e,t.flat(1),[])},Gfe=e=>(e==null?0:e.length)?kU(e,1/0):[],p5=(e,...t)=>po(e)?AU(e,t):[],$fe=(e,...t)=>ko(e)&&po(e)?AU(e,t.flat(1)):[],oE=(...e)=>{const t=e.flat(1);return $h(t)},Fa=(e,t)=>{if(e==null)return!1;typeof t=="string"&&(t=t.split("."));let r=-1,n=e;for(;++r<t.length;){if(!n||!hasOwnProperty.call(n,t[r]))return!1;n=n[t[r]]}return!0},Zn=(e,t,r)=>{t=Mu(t,e);let n=-1,i=t.length;for(i||(i=1,e=void 0);++n<i;){let s=e==null?void 0:e[ku(t[n])];s===void 0&&(n=i,s=r),e=typeof s=="function"?s.call(e):s}return e},uc=(e,...t)=>{let r={};if(e==null)return r;let n=!1;t=t.flat(1).map(s=>(s=Mu(s,e),n||(n=s.length>1),s)),zh(e,xU(e),r),n&&(r=fl(r,!0,!0,!0,s=>Kn(s)?void 0:s));let i=t.length;for(;i--;)nfe(r,t[i]);return r},Ufe=(e,...t)=>e==null?{}:Afe(e,t.flat(1/0)),Zs=(e,t=r=>r)=>{let r=-1;const n=Object(e),i=po(e)?yU(e,!0):PU(e);let s=i.length;for(;s--;){const o=i[++r];if(t(n[o],o,n)===!1)break}},jfe=(e="")=>Mfe(`${e}`.replace(/['\u2019]/g,"")).reduce((t,r,n)=>(r=r.toLowerCase(),t+(n?Lfe(r):r)),"");let Hfe=0;const Wfe=(e="")=>{const t=++Hfe;return`${e}`+t},ti=CU((e,t,r,n)=>{VA(e,t,r,n)},!0),So=function(e){return e&&e.toString().split(" ").map(function(t){return t.substr(0,yu.classNamePrefix.length)!==yu.classNamePrefix&&(t=yu.classNamePrefix+t),t}).join(" ")},Xfe=function(e){return e&&e.toString().split(" ").map(function(t){return t.substr(0,yu.classNamePrefix.length)===yu.classNamePrefix&&(t=t.substr(yu.classNamePrefix.length)),t}).join(" ")},Fp=function(e,t){const r={},n={},i=$e.namespace.svg,s=t||i,o=document.createDocumentFragment(),a=function(u,c,f){for(let h=0;h<u.length;h++){const v=u[h];if(typeof v=="string"){const T=document.createTextNode(v);c.appendChild(T);continue}if(!v.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");const y=v.tagName;let m;v.hasOwnProperty("namespaceURI")&&(f=v.namespaceURI),m=document.createElementNS(f,y);const _=f===i,w=_?$e:It,S=v.attributes;S&&w(m).attr(S);const E=v.style;if(E&&It(m).css(E),v.hasOwnProperty("className")){const T=v.className;_?m.className.baseVal=T:m.className=T}if(v.hasOwnProperty("textContent")&&(m.textContent=v.textContent),v.hasOwnProperty("selector")){const T=v.selector;if(r[T])throw new Error("json-dom-parser: selector must be unique");r[T]=m,w(m).attr("joint-selector",T)}if(v.hasOwnProperty("groupSelector")){let T=v.groupSelector;Array.isArray(T)||(T=[T]);for(let I=0;I<T.length;I++){const q=T[I];let p=n[q];p||(p=n[q]=[]),p.push(m)}}c.appendChild(m);const A=v.children;Array.isArray(A)&&a(A,m,f)}};return a(e,o,s),{fragment:o,selectors:r,groupSelectors:n}},tp=function(e){let t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);t=(t<<5)-t+n,t=t&t}return t},dh=function(e,t,r){for(var n=Array.isArray(t)?t:t.split(r||"/"),i,s=0,o=n.length;s<o;)if(i=n[s++],Object(e)===e&&i in e)e=e[i];else return;return e},qU=function(e,t){return typeof t!="string"&&typeof t!="number"&&(t=String(t)),!(t==="constructor"&&typeof e[t]=="function"||t==="__proto__")},aE=function(e,t,r,n){const i=Array.isArray(t)?t:t.split(n||"/"),s=i.length-1;let o=e,a=0;for(;a<s;a++){const u=i[a];if(!qU(o,u))return e;o=o[u]||(o[u]={})}return o[i[s]]=r,e},g5=function(e,t,r){const n=Array.isArray(t)?t:t.split(r),i=n.length-1;let s=e,o=0;for(;o<i;o++){const a=n[o];if(!qU(s,a))return e;const u=s[a];if(!u)return e;s=u}return delete s[n[i]],e},Yfe=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,r=e==="x"?t:t&3|8;return r.toString(16)})},ol=function(e){return ol.id=ol.id||1,e===void 0?"j_"+ol.id++:(e.id=e.id===void 0?"j_"+ol.id++:e.id,e.id)},Kfe=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},Yn=function(e){if(e.normalized)return e;const{originalEvent:t,target:r}=e,n=t&&t.changedTouches&&t.changedTouches[0];if(n)for(let i in n)e[i]===void 0&&(e[i]=n[i]);if(r){const i=r.correspondingUseElement;i&&(e.target=i)}return e.normalized=!0,e},Zfe=function(e){let i=0,s=0,o=0,a=0;return"detail"in e&&(s=e.detail),"wheelDelta"in e&&(s=-e.wheelDelta/120),"wheelDeltaY"in e&&(s=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(i=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(i=s,s=0),o="deltaX"in e?e.deltaX:i*10,a="deltaY"in e?e.deltaY:s*10,(o||a)&&e.deltaMode&&(e.deltaMode==1?(o*=40,a*=40):(o*=800,a*=800)),e.deltaX===0&&e.deltaY!==0&&e.shiftKey&&(o=a,a=0,i=s,s=0),o&&!i&&(i=o<1?-1:1),a&&!s&&(s=a<1?-1:1),{spinX:i,spinY:s,deltaX:o,deltaY:a}},Jfe=function(e,t){return e>t?t:e<-50?-50:e},uE=function(){var e;if(typeof window<"u"&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var t=0;e=function(r){var n=new Date().getTime(),i=Math.max(0,16-(n-t)),s=setTimeout(function(){r(n+i)},i);return t=n+i,s}}return function(r,n,...i){return e(n!==void 0?r.bind(n,...i):r)}}(),cE=function(){var e,t=typeof window<"u";return t&&(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),e=e||clearTimeout,t?e.bind(window):e}(),Ai=function(e){return Mi(e)&&e.slice(-1)==="%"},Qfe=function(e,t){function r(a){var u=new RegExp("(?:\\d+(?:\\.\\d+)*)("+a+")$").exec(e);return u?u[1]:null}var n=parseFloat(e);if(Number.isNaN(n))return null;var i={};i.value=n;var s;if(t==null)s="[A-Za-z]*";else if(Array.isArray(t)){if(t.length===0)return null;s=t.join("|")}else Mi(t)&&(s=t);var o=r(s);return o===null?null:(i.unit=o,i)},Wf=0;function ehe(e,t){const r=e.split(t);let n=1;for(let i=0,s=r.length-1;i<s;i++){const o=[];(i>0||r[0]!=="")&&o.push(Wf),o.push(t),(i<s-1||r[s]!=="")&&o.push(Wf),r.splice(n,0,...o),n+=o.length+1}return r.filter(i=>i!=="")}function v5(e,t){if(e===null)return t.getBBox().height;switch(e.unit){case"em":return t.getBBox().height*e.value;case"px":case"":return e.value}}const DU=function(e,t,r={},n={}){var i=t.width,s=t.height,o=n.svgDocument||$e("svg").node,a=$e("tspan").node,u=$e("text").attr(r).append(a).node,c=document.createTextNode("");u.style.opacity=0,u.style.display="block",a.style.display="block",a.appendChild(c),o.appendChild(u),n.svgDocument||document.body.appendChild(o);const f=n.preserveSpaces,h=" ",v=n.separator||n.separator===""?n.separator:h,y=typeof v=="string"?v:h;var m=n.eol||`
`,_=n.hyphen?new RegExp(n.hyphen):/[^\w\d\u00C0-\u1FFF\u2800-\uFFFD]/,w=n.maxLineCount;fs(w)||(w=1/0);var S=e.split(v),E=[],A=[],T,I,q;f&&$e(a).attr("xml:space","preserve");for(var p=0,C=0,O=S.length;p<O;p++){var N=S[p];if(!(!N&&!f)&&typeof N=="string"){var V=!1;if(N.indexOf(m)>=0)if(N.length>1){const de=ehe(S[p],m);S.splice(p,1,...de),p--,O=S.length;continue}else{if(f&&typeof S[p-1]=="string"){S.splice(p,Wf,"",Wf),O+=2,p--;continue}A[++C]=!f||typeof S[p+1]=="string"?"":void 0,V=!0}if(!V){let de;if(f?de=A[C]!==void 0?A[C]+y+N:N:de=A[C]?A[C]+y+N:N,c.data=de,a.getComputedTextLength()<=i)A[C]=de,(T||I)&&(E[C++]=!0,T=0,I=0);else{if(!A[C]||T){var W=!!T;if(T=N.length-1,W||!T){if(!T){if(!A[C]){A=[];break}S.splice(p,2,N+S[p+1]),O--,E[C++]=!0,p--;continue}S[p]=N.substring(0,T);const ce=S[p+1];S[p+1]=N.substring(T)+(ce===void 0||ce===Wf?"":ce)}else{if(I)S.splice(p,2,S[p]+S[p+1]),I=0;else{var G=N.search(_);G>-1&&G!==N.length-1&&G!==0&&(I=G+1,T=0),S.splice(p,1,N.substring(0,I||T),N.substring(I||T)),O++}C&&!E[C-1]&&C--}(!f||A[C]!=="")&&p--;continue}C++,p--}}var ee=null;if(A.length>w)ee=w-1;else if(s!==void 0){if(q===void 0&&c.data!=="")if(r.lineHeight==="auto")q=v5({value:1.5,unit:"em"},u);else{const de=Qfe(r.lineHeight,["em","px",""]);q=v5(de,u)}q*A.length>s&&(ee=Math.floor(s/q)-1)}if(ee!==null){A.splice(ee+1);var ae=n.ellipsis;if(!ae||ee<0)break;typeof ae!="string"&&(ae="â¦");var K=A[ee];if(!K&&!V)break;var U=K.length,j,J;do{if(J=K[U],j=K.substring(0,U),J?J.match(v)&&(j+=J):j+=y,j+=ae,c.data=j,a.getComputedTextLength()<=i){A[ee]=j;break}U--}while(U>=0);break}}}return n.svgDocument?o.removeChild(u):document.body.removeChild(o),A.join(m)},the=function(e){var t=It(It.parseHTML("<div>"+e+"</div>",null,!1));return t.find("*").each(function(){var r=this;It.each(r.attributes,function(){var n=this,i=n.name,s=n.value;(i.startsWith("on")||s.startsWith("javascript:")||s.startsWith("data:")||s.startsWith("vbscript:"))&&It(r).removeAttr(i)})}),t.html()},rhe=function(e,t){var r=It(e),n=r.map(function(){var i=this,s=i.parentNode,o=s.insertBefore(document.createTextNode(""),i.nextSibling);return function(){if(s===this)throw new Error("You can't sort elements if any one is a descendant of another.");s.insertBefore(this,o),s.removeChild(o)}});return Array.prototype.sort.call(r,t).each(function(i){n[i].call(this)})},cc=function(e){if(Object(e)!==e){var t=0;return isFinite(e)&&(t=+e),{top:t,right:t,bottom:t,left:t}}var r,n,i,s;return r=n=i=s=0,isFinite(e.vertical)&&(r=i=+e.vertical),isFinite(e.horizontal)&&(n=s=+e.horizontal),isFinite(e.top)&&(r=+e.top),isFinite(e.right)&&(n=+e.right),isFinite(e.bottom)&&(i=+e.bottom),isFinite(e.left)&&(s=+e.left),{top:r,right:n,bottom:i,left:s}},nhe={linear:function(e){return e}},FU={number:function(e,t){var r=t-e;return function(n){return e+r*n}},object:function(e,t){var r=Object.keys(e);return function(n){var i,s,o={};for(i=r.length-1;i!=-1;i--)s=r[i],o[s]=e[s]+(t[s]-e[s])*n;return o}}},ihe={outline:function(e){var t='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',r=Number.isFinite(e.margin)?e.margin:2,n=Number.isFinite(e.width)?e.width:1;return $i(t)({color:e.color||"blue",opacity:Number.isFinite(e.opacity)?e.opacity:1,outerRadius:r+n,innerRadius:r})},highlight:function(e){var t='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>';return $i(t)({color:e.color||"red",width:Number.isFinite(e.width)?e.width:1,blur:Number.isFinite(e.blur)?e.blur:0,opacity:Number.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var t=Number.isFinite(e.x)?e.x:2;return $i('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(e.y)?[t,e.y]:t})},dropShadow:function(e){var t="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return $i(t)({dx:e.dx||0,dy:e.dy||0,opacity:Number.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:Number.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return $i('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},sepia:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return $i('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},saturate:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return $i('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-t})},hueRotate:function(e){return $i('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return $i('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:1-t})},brightness:function(e){return $i('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(e.amount)?e.amount:1})},contrast:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return $i('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:.5-t/2})}},$i=function(e){var t=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(r){return r=r||{},e.replace(t,function(n){for(var i=Array.from(arguments),s=i.slice(1,4).find(function(u){return!!u}),o=s.split("."),a=r[o.shift()];a!==void 0&&o.length;)a=a[o.shift()];return a!==void 0?a:""})}},Rf=function(){};function BU(e){e=$h(e);const t=Fr(e).reduce(function(r,n){return r[n.id]=n.clone(),r},{});return Fr(e).forEach(function(r){const n=t[r.id];if(n.isLink()){const o=n.source(),a=n.target();o.id&&t[o.id]&&n.prop("source/id",t[o.id].id),a.id&&t[a.id]&&n.prop("target/id",t[a.id].id)}const i=r.get("parent");i&&t[i]&&n.set("parent",t[i].id);const s=Fr(r.get("embeds")).reduce(function(o,a){return t[a]&&o.push(t[a].id),o},[]);Da(s)||n.set("embeds",s)}),t}const she=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"],ohe=she.reduce((e,t)=>(e[t]=!0,e),{}),ahe={qualify:function(e){return Kn(e)},set:function(e,t,r){Object.keys(e).forEach(function(n){if(ohe[n]&&n in r){const i=e[n];r.tagName==="SELECT"&&Array.isArray(i)?Array.from(r.options).forEach(function(s,o){s.selected=i.includes(s.value)}):r[n]=i}})}};function uu(e,t){return function(r,n){var i=Ai(r);r=parseFloat(r),i&&(r/=100);var s={};if(isFinite(r)){var o=i||r>=0&&r<=1?r*n[t]:Math.max(r+n[t],0);s[e]=o}return s}}function rp(e,t,r){return function(n,i){var s=Ai(n);n=parseFloat(n),s&&(n/=100);var o;if(isFinite(n)){var a=i[r]();s||n>0&&n<1?o=a[e]+i[t]*n:o=a[e]+n}var u=pe();return u[e]=o||0,u}}function m5(e,t,r){return function(n,i){var s;n==="middle"?s=i[t]/2:n===r?s=i[t]:isFinite(n)?s=n>-1&&n<1?-i[t]*n:-n:Ai(n)?s=i[t]*parseFloat(n)/100:s=0;var o=pe();return o[e]=-(i[e]+s),o}}function zU(e,t){var r="joint-shape",n=t&&t.resetOffset;return function(i,s,o){var a=It(o),u=a.data(r);if(!u||u.value!==i){var c=e(i);u={value:i,shape:c,shapeBBox:c.bbox()},a.data(r,u)}var f=u.shape.clone(),h=u.shapeBBox.clone(),v=h.origin(),y=s.origin();h.x=y.x,h.y=y.y;var m=s.maxRectScaleToFit(h,y),_=h.width===0||s.width===0?1:m.sx,w=h.height===0||s.height===0?1:m.sy;return f.scale(_,w,v),n&&f.translate(-v.x,-v.y),f}}function y5(e){function t(n){return new Nt($e.normalizePathData(n))}var r=zU(t,e);return function(n,i,s){var o=r(n,i,s);return{d:o.serialize()}}}function _5(e){var t=zU(dn,e);return function(r,n,i){var s=t(r,n,i);return{points:s.serialize()}}}function np(e,t){var r=new pe(1,0);return function(n){var i,s,o=this[e](n);return o?(s=t.rotate?o.vector().vectorAngle(r):0,i=o.start):(i=this.path.start,s=0),s===0?{transform:"translate("+i.x+","+i.y+")"}:{transform:"translate("+i.x+","+i.y+") rotate("+s+")"}}}function b5(e){return function(r,n,i){const s=$e(i);s.attr(e)!==r&&s.attr(e,r)}}function Kc(e,t,r){return r.text!==void 0}function If(){return this.model.isLink()}function TS(e){var t={},r=e.stroke;typeof r=="string"&&(t.stroke=r,t.fill=r);var n=e.strokeOpacity;return n===void 0&&(n=e["stroke-opacity"]),n===void 0&&(n=e.opacity),n!==void 0&&(t["stroke-opacity"]=n,t["fill-opacity"]=n),t}function w5(e){const{paper:t}=this;return`url(#${e.type==="pattern"?t.definePattern(e):t.defineGradient(e)})`}const or={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:b5("href")},xlinkHref:{set:b5("xlink:href")},filter:{qualify:Kn,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}},fill:{qualify:Kn,set:w5},stroke:{qualify:Kn,set:w5},sourceMarker:{qualify:Kn,set:function(e,t,r,n){return e=$t(TS(n),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},targetMarker:{qualify:Kn,set:function(e,t,r,n){return e=$t(TS(n),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},vertexMarker:{qualify:Kn,set:function(e,t,r,n){return e=$t(TS(n),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},text:{qualify:function(e,t,r){return!r.textWrap||!Kn(r.textWrap)},set:function(e,t,r,n){const i=It(r),s="joint-text",o=i.data(s),{lineHeight:a,annotations:u,textVerticalAnchor:c,eol:f,displayEmpty:h}=n;let v=n.textPath,y=n.x;Qs(y)&&(y=eo(y,t));let m=n["font-size"]||n.fontSize;Qs(m)&&(m=eo(m,t));const _=JSON.stringify([e,a,u,c,f,h,v,y,m]);if(o===void 0||o!==_){if(m&&r.setAttribute("font-size",m),Wr(v)){const w=v.selector;if(typeof w=="string"){const[S]=this.findBySelector(w);S instanceof SVGPathElement&&(v=$t({"xlink:href":"#"+S.id},v))}}$e(r).text(""+e,{lineHeight:a,annotations:u,textPath:v,x:y,textVerticalAnchor:c,eol:f,displayEmpty:h}),i.data(s,_)}}},textWrap:{qualify:Kn,set:function(e,t,r,n){var i={},s=e.width||0;Ai(s)?i.width=t.width*parseFloat(s)/100:Qs(s)?i.width=Number(eo(s,t)):e.width===null?i.width=1/0:s<=0?i.width=t.width+s:i.width=s;var o=e.height||0;Ai(o)?i.height=t.height*parseFloat(o)/100:Qs(o)?i.height=Number(eo(o,t)):e.height===null||(o<=0?i.height=t.height+o:i.height=o);var a,u=e.text;if(u===void 0&&(u=n.text),u!==void 0){const c=e.breakText||DU,f=n["font-size"]||n.fontSize;a=c(""+u,i,{"font-weight":n["font-weight"]||n.fontWeight,"font-size":Qs(f)?eo(f,t):f,"font-family":n["font-family"]||n.fontFamily,lineHeight:n.lineHeight,"letter-spacing":"letter-spacing"in n?n["letter-spacing"]:n.letterSpacing},{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,separator:e.separator,maxLineCount:e.maxLineCount,preserveSpaces:e.preserveSpaces})}else a="";or.text.set.call(this,a,t,r,n)}},title:{qualify:function(e,t){return t instanceof SVGElement},set:function(e,t,r){var n=It(r),i="joint-title",s=n.data(i);if(s===void 0||s!==e){if(n.data(i,e),r.tagName==="title"){r.textContent=e;return}var o=r.firstElementChild;if(o&&o.tagName==="title")o.textContent=e;else{var a=document.createElementNS(r.namespaceURI,"title");a.textContent=e,r.insertBefore(a,o)}}}},lineHeight:{qualify:Kc},textVerticalAnchor:{qualify:Kc},textPath:{qualify:Kc},annotations:{qualify:Kc},eol:{qualify:Kc},displayEmpty:{qualify:Kc},port:{set:function(e){return e===null||e.id===void 0?e:e.id}},style:{qualify:Kn,set:function(e,t,r){It(r).css(e)}},html:{set:function(e,t,r){It(r).html(e+"")}},props:ahe,ref:{},refX:{position:rp("x","width","origin")},refY:{position:rp("y","height","origin")},refDx:{position:rp("x","width","corner")},refDy:{position:rp("y","height","corner")},refWidth:{set:uu("width","width")},refHeight:{set:uu("height","height")},refRx:{set:uu("rx","width")},refRy:{set:uu("ry","height")},refRInscribed:{set:function(e){var t=uu(e,"width"),r=uu(e,"height");return function(n,i){var s=i.height>i.width?t:r;return s(n,i)}}("r")},refRCircumscribed:{set:function(e,t){var r=Ai(e);e=parseFloat(e),r&&(e/=100);var n=Math.sqrt(t.height*t.height+t.width*t.width),i;return isFinite(e)&&(r||e>=0&&e<=1?i=e*n:i=Math.max(e+n,0)),{r:i}}},refCx:{set:uu("cx","width")},refCy:{set:uu("cy","height")},xAlignment:{offset:m5("x","width","right")},yAlignment:{offset:m5("y","height","bottom")},resetOffset:{offset:function(e,t){return e?{x:-t.x,y:-t.y}:{x:0,y:0}}},refDResetOffset:{set:y5({resetOffset:!0})},refDKeepOffset:{set:y5({resetOffset:!1})},refPointsResetOffset:{set:_5({resetOffset:!0})},refPointsKeepOffset:{set:_5({resetOffset:!1})},connection:{qualify:If,set:function({stubs:e=0}){let t;if(isFinite(e)&&e!==0){let r;e<0?r=(this.getConnectionLength()+e)/2:r=e;const n=this.getConnection(),i=this.getConnectionSubdivisions(),s=n.divideAtLength(r,{segmentSubdivisions:i}),o=n.divideAtLength(-r,{segmentSubdivisions:i});s&&o&&(t=`${s[0].serialize()} ${o[1].serialize()}`)}return{d:t||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:If,set:np("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:If,set:np("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:If,set:np("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:If,set:np("getTangentAtRatio",{rotate:!1})}};or["xlink:href"]=or.xlinkHref;["transform","d","points","cx","cy","x1","x2","y1","y2","x","y","dx","dy"].forEach(e=>{or[e]={qualify:Qs,set:function(r,n){return{[e]:eo(r,n)}}}});["width","height","r","rx","ry","font-size","stroke-width"].forEach(e=>{or[e]={qualify:Qs,set:function(r,n){return{[e]:Math.max(0,eo(r,n))}}}});or.refR=or.refRInscribed;or.refD=or.refDResetOffset;or.refPoints=or.refPointsResetOffset;or.atConnectionLength=or.atConnectionLengthKeepGradient;or.atConnectionRatio=or.atConnectionRatioKeepGradient;or.fontSize=or["font-size"];or.strokeWidth=or["stroke-width"];or.refX2=or.refX;or.refY2=or.refY;or.refWidth2=or.refWidth;or.refHeight2=or.refHeight;or["ref-x"]=or.refX;or["ref-y"]=or.refY;or["ref-dy"]=or.refDy;or["ref-dx"]=or.refDx;or["ref-width"]=or.refWidth;or["ref-height"]=or.refHeight;or["x-alignment"]=or.xAlignment;or["y-alignment"]=or.yAlignment;const VU=or,ca=Jn.Model.extend({constructor:function(e,t){var r,n=e||{};typeof this.preinitialize=="function"&&this.preinitialize.apply(this,arguments),this.cid=Wfe("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(n=this.parse(n,t)||{}),(r=Zn(this,"defaults"))&&(n=ti({},r,n)),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,t,r){throw new Error("Must define a translate() method.")},toJSON:function(){const t=Zn(this.constructor.prototype,"defaults").attrs||{},r=this.attributes.attrs,n={};Zs(r,function(s,o){const a=t[o];Zs(s,function(u,c){Wr(u)&&!Array.isArray(u)?Zs(u,function(f,h){(!a||!a[c]||!sl(a[c][h],f))&&(n[o]=n[o]||{},(n[o][c]||(n[o][c]={}))[h]=f)}):(!a||!sl(a[c],u))&&(n[o]=n[o]||{},n[o][c]=u)})});const i=Ks(uc(this.attributes,"attrs"));return i.attrs=n,i},initialize:function(e){const t=this.getIdAttribute();(!e||e[t]===void 0)&&this.set(t,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return Yfe()},processPorts:function(){var e=this.ports,t={};Zs(this.get("attrs"),function(s,o){s&&s.port&&(s.port.id!==void 0?t[s.port.id]=s.port:t[s.port]={id:s.port})});var r={};if(Zs(e,function(s,o){t[o]||(r[o]=!0)}),this.graph&&!Da(r)){var n=this.graph.getConnectedLinks(this,{inbound:!0});n.forEach(function(s){r[s.get("target").port]&&s.remove()});var i=this.graph.getConnectedLinks(this,{outbound:!0});i.forEach(function(s){r[s.get("source").port]&&s.remove()})}this.ports=t},remove:function(e={}){const{graph:t,collection:r}=this;if(!t)return r&&r.remove(this,e),this;t.startBatch("remove");const n=this.getParentCell();n&&n.unembed(this,e);const i=this.getEmbeddedCells();for(let s=0,o=i.length;s<o;s++){const a=i[s];a&&a.remove(e)}return this.trigger("remove",this,t.attributes.cells,e),t.stopBatch("remove"),this},toFront:function(e){var t=this.graph;if(t){e=Ms(e||{},{foregroundEmbeds:!0});let r;e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:e.breadthFirst!==!1,sortSiblings:e.foregroundEmbeds}),r.unshift(this)):r=[this];const n=e.foregroundEmbeds?r:AS(r,u=>u.z());let s=t.maxZIndex()-r.length+1;const o=t.get("cells");let a=o.indexOf(n[0])!==o.length-r.length;a||(a=n.some(function(u,c){return u.z()!==s+c})),a&&(this.startBatch("to-front"),s=s+r.length,n.forEach(function(u,c){u.set("z",s+c,e)}),this.stopBatch("to-front"))}return this},toBack:function(e){var t=this.graph;if(t){e=Ms(e||{},{foregroundEmbeds:!0});let n;e.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:e.breadthFirst!==!1,sortSiblings:e.foregroundEmbeds}),n.unshift(this)):n=[this];const i=e.foregroundEmbeds?n:AS(n,a=>a.z());let s=t.minZIndex();var r=t.get("cells");let o=r.indexOf(i[0])!==0;o||(o=i.some(function(a,u){return a.z()!==s+u})),o&&(this.startBatch("to-back"),s-=n.length,i.forEach(function(a,u){a.set("z",s+u,e)}),this.stopBatch("to-back"))}return this},parent:function(e,t){return e===void 0?this.get("parent"):this.set("parent",e,t)},embed:function(e,t){const r=Array.isArray(e)?e:[e];if(!this.canEmbed(r))throw new Error("Recursive embedding not allowed.");if(r.some(n=>n.isEmbedded()&&this.id!==n.parent()))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(r,t),this},unembed:function(e,t){const r=Array.isArray(e)?e:[e];return this._unembedCells(r,t),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every(r=>this!==r&&!this.isEmbeddedIn(r))},_embedCells:function(e,t){const r="embed";this.startBatch(r);const n=$t([],this.get("embeds"));e.forEach(i=>{n[i.isLink()?"unshift":"push"](i.id),i.parent(this.id,t)}),this.set("embeds",$h(n),t),this.stopBatch(r)},_unembedCells:function(e,t){const r="unembed";this.startBatch(r),e.forEach(n=>n.unset("parent",t)),this.set("embeds",p5(this.get("embeds"),...e.map(n=>n.id)),t),this.stopBatch(r)},getParentCell:function(){var e=this.parent(),t=this.graph;return e&&t&&t.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var t=this.getParentCell();t;)e.push(t),t=t.getParentCell();return e},getEmbeddedCells:function(e){if(e=e||{},!this.graph)return[];if(e.deep)return e.breadthFirst?this._getEmbeddedCellsBfs(e.sortSiblings):this._getEmbeddedCellsDfs(e.sortSiblings);const t=this.get("embeds");if(Da(t))return[];let r=t.map(this.graph.getCell,this.graph);return e.sortSiblings&&(r=AS(r,n=>n.z())),r},_getEmbeddedCellsBfs:function(e){const t=[],r=[];for(r.push(this);r.length>0;){const n=r.shift();t.push(n);const i=n.getEmbeddedCells({sortSiblings:e});r.push(...i)}return t.shift(),t},_getEmbeddedCellsDfs:function(e){const t=[],r=[];for(r.push(this);r.length>0;){const n=r.pop();t.push(n);const i=n.getEmbeddedCells({sortSiblings:e});for(let s=i.length-1;s>=0;--s)r.push(i[s])}return t.shift(),t},isEmbeddedIn:function(e,t){var r=Mi(e)?e:e.id,n=this.parent();if(t=$t({deep:!0},t),this.graph&&t.deep){for(;n;){if(n===r)return!0;n=this.graph.getCell(n).parent()}return!1}else return n===r},isEmbedded:function(){return!!this.parent()},clone:function(e){if(e=e||{},e.deep)return Fr(BU([this].concat(this.getEmbeddedCells({deep:!0}))));var t=Jn.Model.prototype.clone.apply(this,arguments);return t.set(this.getIdAttribute(),this.generateId()),t.unset("embeds"),t.unset("parent"),t},prop:function(e,t,r){var n="/",i=Mi(e);if(i||Array.isArray(e))if(arguments.length>1){var s,o;i?(s=e,o=s.split("/")):(s=e.join(n),o=e.slice());var a=o[0],u=o.length;const A=r||{};A.propertyPath=s,A.propertyValue=t,A.propertyPathArray=o,"rewrite"in A||(A.rewrite=!1);for(var c={},f=c,h=a,v=1;v<u;v++){var y=o[v],m=Number.isFinite(i?Number(y):y);f=f[h]=m?[]:{},h=y}c=aE(c,o,t,"/");var _=ti({},this.attributes);A.rewrite&&g5(_,s,"/");var w=ti(_,c);return this.set(a,w[a],A)}else return dh(this.attributes,e,n);const S=t||{};S.propertyPath=null,S.propertyValue=e,S.propertyPathArray=[],"rewrite"in S||(S.rewrite=!1);const E={};for(const A in e){const{changedValue:T}=ti({},{changedValue:this.attributes[A]},{changedValue:e[A]});E[A]=T}return this.set(E,S)},removeProp:function(e,t){t=t||{};var r=Array.isArray(e)?e:e.split("/"),n=r[0];if(n==="attrs"&&(t.dirty=!0),r.length===1)return this.unset(e,t);var i=r.slice(1),s=this.get(n);return s==null?this:(s=Ks(s),g5(s,i,"/"),this.set(n,s,t))},attr:function(e,t,r){var n=Array.from(arguments);return n.length===0?this.get("attrs"):(Array.isArray(e)?n[0]=["attrs"].concat(e):Mi(e)?n[0]="attrs/"+e:n[0]={attrs:e},this.prop.apply(this,n))},removeAttr:function(e,t){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,t)},transition:function(e,t,r,n){n=n||"/";var i={duration:100,delay:10,timingFunction:nhe.linear,valueFunction:FU.number};r=$t(i,r);var s=0,o,a=(function(h){var v,y,m;s=s||h,h-=s,y=h/r.duration,y<1?this._transitionIds[e]=v=uE(a):(y=1,delete this._transitionIds[e]),m=o(r.timingFunction(y)),r.transitionId=v,this.prop(e,m,r),v||this.trigger("transition:end",this,e)}).bind(this);const{_scheduledTransitionIds:u}=this;let c;var f=h=>{u[e]&&(u[e]=p5(u[e],c),u[e].length===0&&delete u[e]),this.stopPendingTransitions(e,n),o=r.valueFunction(dh(this.attributes,e,n),t),this._transitionIds[e]=uE(h),this.trigger("transition:start",this,e)};return c=setTimeout(f,r.delay,a),u[e]||(u[e]=[]),u[e].push(c),c},getTransitions:function(){return oE(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(e,t="/"){const{_scheduledTransitionIds:r={}}=this;let n=Object.keys(r);if(e){const i=e.split(t);n=n.filter(s=>sl(i,s.split(t).slice(0,i.length)))}return n.forEach(i=>{r[i].forEach(o=>clearTimeout(o)),delete r[i]}),this},stopPendingTransitions(e,t="/"){const{_transitionIds:r={}}=this;let n=Object.keys(r);if(e){const i=e.split(t);n=n.filter(s=>sl(i,s.split(t).slice(0,i.length)))}n.forEach(i=>{const s=r[i];cE(s),delete r[i],this.trigger("transition:end",this,i)})},stopTransitions:function(e,t="/"){return this.stopScheduledTransitions(e,t),this.stopPendingTransitions(e,t),this},addTo:function(e,t){return e.addCell(this,t),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,t){return this.graph&&this.graph.startBatch(e,$t({},t,{cell:this})),this},stopBatch:function(e,t){return this.graph&&this.graph.stopBatch(e,$t({},t,{cell:this})),this},getChangeFlag:function(e){var t=0;if(!e)return t;for(var r in e)!e.hasOwnProperty(r)||!this.hasChanged(r)||(t|=e[r]);return t},angle:function(){return 0},position:function(){return new pe(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new pe},getBBox:function(){return new vt(0,0,0,0)},getPointRotatedAroundCenter(e,t,r){const n=new pe(t,r);return e&&n.rotate(this.getBBox().center(),e),n},getAbsolutePointFromRelative(e,t){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,t))},getRelativePointFromAbsolute(e,t){return this.getPointRotatedAroundCenter(this.angle(),e,t).difference(this.position())}},{getAttributeDefinition:function(e){var t=this.attributes,r=VU;return t&&t[e]||r[e]},define:function(e,t,r,n){r=$t({defaults:$A({type:e},t,this.prototype.defaults)},r);var i=this.extend(r,n);return typeof joint<"u"&&Fa(joint,"shapes")&&aE(joint.shapes,e,i,"."),i}}),uhe=function(e,t,r){if(Mi(r)){if(!lE[r])throw new Error('Unknown wrapper: "'+r+'"');r=lE[r]}if(!fn(r))throw new Error("Wrapper must be a function.");Fr(t).forEach(function(n){e[n]=r(e[n])})},lE={cells:function(e){return function(){var t=Array.from(arguments),r=t.length,n=r>0&&t[0]||[],i=r>1&&t[r-1]||{};return Array.isArray(n)||(i instanceof ca?n=t:n instanceof ca&&(t.length>1&&t.pop(),n=t)),i instanceof ca&&(i={}),e.call(this,n,i)}}},Vn={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function GU(e,t){const r=new vt(e);switch(t){case void 0:throw new Error("Position required");case Vn.LEFT:case"leftMiddle":return r.leftMiddle();case Vn.RIGHT:case"rightMiddle":return r.rightMiddle();case Vn.TOP:case"topMiddle":return r.topMiddle();case Vn.BOTTOM:case"bottomMiddle":return r.bottomMiddle();case Vn.TOP_LEFT:case"topLeft":case"origin":return r.topLeft();case Vn.TOP_RIGHT:case"topRight":return r.topRight();case Vn.BOTTOM_LEFT:case"bottomLeft":return r.bottomLeft();case Vn.BOTTOM_RIGHT:case"bottomRight":case"corner":return r.bottomRight();case Vn.CENTER:return r.center();default:throw new Error(`Unknown position: ${t}`)}}function $U(e,t,r){var n=e.toJSON();return n.angle=t||0,Ms({},r,n)}function Uh(e,t,r,n){return e.map(function(i,s,o){var a=this.pointAt((s+.5)/o.length);return(i.dx||i.dy)&&a.offset(i.dx||0,i.dy||0),$U(a.round(),0,UA(n,i))},tc(t,r))}function UU(e,t,r,n){var i=t.center(),s=t.width/t.height,o=t.topMiddle(),a=Wi.fromRect(t);return e.map(function(u,c,f){var h=r+n(c,f.length),v=o.clone().rotate(i,-h).scale(s,1,i),y=u.compensateRotation?-a.tangentTheta(v):0;return(u.dx||u.dy)&&v.offset(u.dx||0,u.dy||0),u.dr&&v.move(i,u.dr),$U(v.round(),y,UA(t,u))})}function UA(e,t){let{x:r,y:n,angle:i}=t;return Ai(r)?r=parseFloat(r)/100*e.width:Qs(r)&&(r=Number(eo(r,e))),Ai(n)?n=parseFloat(n)/100*e.height:Qs(n)&&(n=Number(eo(n,e))),{x:r,y:n,angle:i}}function fE(e,t){const{x:r,y:n}=UA(e,t);return new pe(r||0,n||0)}const che=function(e,t){return e.map(r=>{const n=fE(t,r).round().toJSON();return n.angle=r.angle||0,n})},lhe=function(e,t,r){return r.fn(e,t,r)},fhe=function(e,t,r){var n=fE(t,r.start||t.origin()),i=fE(t,r.end||t.corner());return Uh(e,n,i,t)},hhe=function(e,t,r){return Uh(e,t.origin(),t.bottomLeft(),t)},dhe=function(e,t,r){return Uh(e,t.topRight(),t.corner(),t)},phe=function(e,t,r){return Uh(e,t.origin(),t.topRight(),t)},ghe=function(e,t,r){return Uh(e,t.bottomLeft(),t.corner(),t)},vhe=function(e,t,r){var n=r.startAngle||0,i=r.step||360/e.length;return UU(e,t,n,function(s){return s*i})},mhe=function(e,t,r){var n=r.startAngle||0,i=r.step||20;return UU(e,t,n,function(s,o){return(s+.5-o/2)*i})},yhe=Object.freeze(Object.defineProperty({__proto__:null,absolute:che,bottom:ghe,ellipse:mhe,ellipseSpread:vhe,fn:lhe,left:hhe,line:fhe,right:dhe,top:phe},Symbol.toStringTag,{value:"Module"}));function Lu(e,t){return $A({},e,t,{x:0,y:0,angle:0,attrs:{}})}function jU(e){var t=e.center(),r=t.theta(e.origin()),n=t.theta(e.bottomLeft()),i=t.theta(e.corner()),s=t.theta(e.topRight());return[r,s,i,n]}function HU(e,t,r,n){n=Ms({},n,{offset:15});var i=t.center().theta(e),s,o,a,u,c=n.offset,f=0;const[h,v,y,m]=jU(t);i<v||i>y?(a=".3em",s=c,o=0,u="start"):i<h?(s=0,o=-c,r?(f=-90,u="start",a=".3em"):(u="middle",a="0")):i<m?(a=".3em",s=-c,o=0,u="end"):(s=0,o=c,r?(f=90,u="start",a=".3em"):(u="middle",a=".6em"));var _=Math.round;return Lu(n,{x:_(s),y:_(o),angle:f,attrs:{labelText:{y:a,textAnchor:u}}})}function WU(e,t,r,n){n=Ms({},n,{offset:15});var i=t.center().theta(e),s,o,a,u,c=n.offset,f=0;const[h,v,y,m]=jU(t);i<v||i>y?(a=".3em",s=-c,o=0,u="end"):i<h?(s=0,o=c,r?(f=90,u="start",a=".3em"):(u="middle",a=".6em")):i<m?(a=".3em",s=c,o=0,u="start"):(s=0,o=-c,r?(f=-90,u="start",a=".3em"):(u="middle",a="0"));var _=Math.round;return Lu(n,{x:_(s),y:_(o),angle:f,attrs:{labelText:{y:a,textAnchor:u}}})}function XU(e,t,r){r=Ms({},r,{offset:20});var n=Op(0,0),i=-e.theta(n),s=i,o=e.clone().move(n,r.offset).difference(e).round(),a=".3em",u;(i+90)%180===0?(u=t?"end":"middle",!t&&i===-270&&(a="0em")):i>-270&&i<-90?(u="start",s=i-180):u="end";var c=Math.round;return Lu(r,{x:c(o.x),y:c(o.y),angle:t?s:0,attrs:{labelText:{y:a,textAnchor:u}}})}const _he=function(e,t,r){return Lu(r)},bhe=function(e,t,r){return Lu(r,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},whe=function(e,t,r){return Lu(r,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},xhe=function(e,t,r){return Lu(r,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},She=function(e,t,r){return Lu(r,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},Ehe=function(e,t,r){return HU(e,t,!0,r)},Ahe=function(e,t,r){return HU(e,t,!1,r)},The=function(e,t,r){return WU(e,t,!0,r)},Phe=function(e,t,r){return WU(e,t,!1,r)},Che=function(e,t,r){return XU(e.difference(t.center()),!1,r)},Rhe=function(e,t,r){return XU(e.difference(t.center()),!0,r)},Ihe=Object.freeze(Object.defineProperty({__proto__:null,bottom:She,inside:Phe,insideOriented:The,left:bhe,manual:_he,outside:Ahe,outsideOriented:Ehe,radial:Che,radialOriented:Rhe,right:whe,top:xhe},Symbol.toStringTag,{value:"Module"})),Wl=ca.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,t,r){if(e===void 0)return Qo(this.get("source"));var n,i,s=e instanceof ca;if(s)return n=Qo(t)||{},n.id=e.id,i=r,this.set("source",n,i);var o=!Kn(e);return o?(n=Qo(t)||{},n.x=e.x,n.y=e.y,i=r,this.set("source",n,i)):(n=e,i=t,this.set("source",n,i))},target:function(e,t,r){if(e===void 0)return Qo(this.get("target"));var n,i,s=e instanceof ca;if(s)return n=Qo(t)||{},n.id=e.id,i=r,this.set("target",n,i);var o=!Kn(e);return o?(n=Qo(t)||{},n.x=e.x,n.y=e.y,i=r,this.set("target",n,i)):(n=e,i=t,this.set("target",n,i))},router:function(e,t,r){if(e===void 0){var n=this.get("router");return n?typeof n=="object"?Qo(n):n:this.get("manhattan")?{name:"orthogonal"}:null}var i=typeof e=="object"||typeof e=="function",s=i?e:{name:e,args:t},o=i?t:r;return this.set("router",s,o)},connector:function(e,t,r){if(e===void 0){var n=this.get("connector");return n?typeof n=="object"?Qo(n):n:this.get("smooth")?{name:"smooth"}:null}var i=typeof e=="object"||typeof e=="function",s=i?e:{name:e,args:t},o=i?t:r;return this.set("connector",s,o)},label:function(e,t,r){var n=this.labels();return e=isFinite(e)&&e!==null?e|0:0,e<0&&(e=n.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],t,r)},labels:function(e,t){return arguments.length===0?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,t))},hasLabels:function(){const{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,t,r){if(!t)throw new Error("dia.Link: no label provided");var n=this.labels(),i=n.length;return e=isFinite(e)&&e!==null?e|0:i,e<0&&(e=i+e+1),n.splice(e,0,t),this.labels(n,r)},appendLabel:function(e,t){return this.insertLabel(-1,e,t)},removeLabel:function(e,t){var r=this.labels();return e=isFinite(e)&&e!==null?e|0:-1,r.splice(e,1),this.labels(r,t)},vertex:function(e,t,r){var n=this.vertices();if(e=isFinite(e)&&e!==null?e|0:0,e<0&&(e=n.length+e),arguments.length<=1)return this.prop(["vertices",e]);var i=this._normalizeVertex(t);return this.prop(["vertices",e],i,r)},vertices:function(e,t){if(arguments.length===0)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var r=[],n=0;n<e.length;n++){var i=e[n],s=this._normalizeVertex(i);r.push(s)}return this.set("vertices",r,t)},insertVertex:function(e,t,r){if(!t)throw new Error("dia.Link: no vertex provided");var n=this.vertices(),i=n.length;e=isFinite(e)&&e!==null?e|0:i,e<0&&(e=i+e+1);var s=this._normalizeVertex(t);return n.splice(e,0,s),this.vertices(n,r)},removeVertex:function(e,t){var r=this.vertices();return e=isFinite(e)&&e!==null?e|0:-1,r.splice(e,1),this.vertices(r,t)},_normalizeVertex:function(e){var t=!Kn(e);return t?{x:e.x,y:e.y}:e},translate:function(e,t,r){return r=r||{},r.translateBy=r.translateBy||this.id,r.tx=e,r.ty=t,this.applyToPoints(function(n){return{x:(n.x||0)+e,y:(n.y||0)+t}},r)},scale:function(e,t,r,n){return this.applyToPoints(function(i){return pe(i).scale(e,t,r).toJSON()},n)},applyToPoints:function(e,t){if(!fn(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var r={},{source:n,target:i}=this.attributes;n.id||(r.source=e(n)),i.id||(r.target=e(i));var s=this.vertices();return s.length>0&&(r.vertices=s.map(e)),this.set(r,t)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new pe(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new pe(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const e=[this.getSourcePoint(),...this.vertices().map(pe),this.getTargetPoint()];return new dn(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var t;if(this.graph){var r=this.getSourceElement(),n=this.getTargetElement(),i=this.getParentCell();r&&n&&(r===n||r.isEmbeddedIn(n)?t=n:n.isEmbeddedIn(r)?t=r:t=this.graph.getCommonAncestor(r,n)),i&&(!t||t.id!==i.id)&&i.unembed(this,e),t&&t.embed(this,e)}return t},hasLoop:function(e){e=e||{};var{source:t,target:r}=this.attributes,n=t.id,i=r.id;if(!n||!i)return!1;var s=n===i;if(!s&&e.deep&&this.graph){var o=this.getSourceCell(),a=this.getTargetCell();s=o.isEmbeddedIn(a)||a.isEmbeddedIn(o)}return s},getSourceCell:function(){const{graph:e,attributes:t}=this;var r=t.source;return r&&r.id&&e&&e.getCell(r.id)||null},getSourceElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){const{graph:e,attributes:t}=this;var r=t.target;return r&&r.id&&e&&e.getCell(r.id)||null},getTargetElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var t=[this,this.getSourceElement(),this.getTargetElement()].filter(function(r){return!!r});e=this.graph.getCommonAncestor.apply(this.graph,t)}return e||null},isRelationshipEmbeddedIn:function(e){var t=Mi(e)||fs(e)?e:e.id,r=this.getRelationshipAncestor();return!!r&&(r.id===t||r.isEmbeddedIn(t))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},t={};return t.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,t.position=e.position,t.attrs=e.attrs,t.size=e.size,t}},{endsEqual:function(e,t){var r=e.port===t.port||!e.port&&!t.port;return e.id===t.id&&r}});var YU=function(e){var t=Ks(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=yhe,this.portLabelLayoutNamespace=Ihe,this._init(t)};YU.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter(function(t){return t.group===e})},getGroupPortsMetrics:function(e,t){var r=this.getGroup(e),n=this.getPortsByGroup(e),i=r.position||{},s=i.name,o=this.portLayoutNamespace;o[s]||(s="left");var a=i.args||{},u=n.map(function(h){return h&&h.position&&h.position.args}),c=o[s](u,t,a),f={ports:n,result:[]};return Fr(c).reduce((function(h,v,y){var m=h.ports[y];return h.result.push({portId:m.id,portTransformation:v,labelTransformation:this._getPortLabelLayout(m,pe(v),t),portAttrs:m.attrs,portSize:m.size,labelSize:m.label.size}),h}).bind(this),f),f.result},_getPortLabelLayout:function(e,t,r){var n=this.portLabelLayoutNamespace,i=e.label.position.name||"left";return n[i]?n[i](t,r,e.label.position.args):null},_init:function(e){if(Wr(e.groups))for(var t=Object.keys(e.groups),r=0,n=t.length;r<n;r++){var i=t[r];this.groups[i]=this._evaluateGroup(e.groups[i])}for(var s=Fr(e.items),o=0,a=s.length;o<a;o++)this.ports.push(this._evaluatePort(s[o]))},_evaluateGroup:function(e){return ti(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var t=$t({},e),r=this.getGroup(e.group);return t.markup=t.markup||r.markup,t.attrs=ti({},r.attrs,t.attrs),t.position=this._createPositionNode(r,t),t.label=ti({},r.label,this._getLabel(t)),t.z=this._getZIndex(r,t),t.size=$t({},r.size,t.size),t},_getZIndex:function(e,t){return fs(t.z)?t.z:fs(e.z)||e.z==="auto"?e.z:"auto"},_createPositionNode:function(e,t){return ti({name:"left",args:{}},e.position,{args:t.args})},_getPosition:function(e,t){var r={},n;fn(e)?(n="fn",r.fn=e):Mi(e)?n=e:e===void 0?n=t?"left":null:Array.isArray(e)?(n="absolute",r.x=e[0],r.y=e[1]):Wr(e)&&(n=e.name,$t(r,e.args));var i={args:r};return n&&(i.name=n),i},_getLabel:function(e,t){var r=e.label||{},n=r;return n.position=this._getPosition(r.position,t),n}};const Ohe={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var e=this.get("ports")||{},t={};Fr(e.items).forEach(function(a){t[a.id]=!0});var r=this.previous("ports")||{},n={};Fr(r.items).forEach(function(a){t[a.id]||(n[a.id]=!0)});var i=this.graph;if(i&&!Da(n)){var s=i.getConnectedLinks(this,{inbound:!0});s.forEach(function(a){n[a.get("target").port]&&a.remove()});var o=i.getConnectedLinks(this,{outbound:!0});o.forEach(function(a){n[a.get("source").port]&&a.remove()})}},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return this.getPortIndex(e)!==-1},getPorts:function(){return Ks(this.prop("ports/items"))||[]},getGroupPorts:function(e){const t=Fr(this.prop(["ports","items"])).filter(r=>r.group===e);return Ks(t)},getPort:function(e){return Ks(Fr(this.prop("ports/items")).find(function(t){return t.id&&t.id===e}))},getPortsPositions:function(e){var t=this._portSettingsData.getGroupPortsMetrics(e,vt(this.size()));return t.reduce(function(r,n){var i=n.portTransformation;return r[n.portId]={x:i.x,y:i.y,angle:i.angle},r},{})},getPortIndex:function(e){var t=Wr(e)?e.id:e;return this._isValidPortId(t)?Fr(this.prop("ports/items")).findIndex(function(r){return r.id===t}):-1},addPort:function(e,t){if(!Wr(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var r=$t([],this.prop("ports/items"));return r.push(e),this.prop("ports/items",r,t),this},insertPort:function(e,t,r){const n=typeof e=="number"?e:this.getPortIndex(e);if(!Wr(t)||Array.isArray(t))throw new Error("dia.Element: insertPort requires an object.");const i=$t([],this.prop("ports/items"));return i.splice(n,0,t),this.prop("ports/items",i,r),this},portProp:function(e,t,r,n){var i=this.getPortIndex(e);if(i===-1)throw new Error("Element: unable to find port with id "+e);var s=Array.prototype.slice.call(arguments,1);return Array.isArray(t)?s[0]=["ports","items",i].concat(t):Mi(t)?s[0]=["ports/items/",i,"/",t].join(""):(s=["ports/items/"+i],Kn(t)&&(s.push(t),s.push(r))),this.prop.apply(this,s)},_validatePorts:function(){var e=this.get("ports")||{},t=[];e=e||{};var r=Fr(e.items);return r.forEach(function(n){typeof n!="object"&&t.push("Element: invalid port ",n),this._isValidPortId(n.id)||(n.id=this.generatePortId())},this),$h(r,"id").length!==r.length&&t.push("Element: found id duplicities in ports."),t},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return e!=null&&!Wr(e)},addPorts:function(e,t){return e.length&&this.prop("ports/items",$t([],this.prop("ports/items")).concat(e),t),this},removePort:function(e,t){const r=t||{},n=this.getPortIndex(e);if(n!==-1){const i=$t([],this.prop(["ports","items"]));i.splice(n,1),r.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],i,r),this.stopBatch("port-remove")}return this},removePorts:function(e,t){let r,n;if(Array.isArray(e)){if(r=t||{},e.length===0)return this.this;n=$t([],this.prop(["ports","items"])).filter(function(s){return!e.some(function(o){const a=Wr(o)?o.id:o;return s.id===a})})}else r=e||{},n=[];return this.startBatch("port-remove"),r.rewrite=!0,this.prop(["ports","items"],n,r),this.stopBatch("port-remove"),this},_createPortData:function(){var e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));var t;this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new YU(this.get("ports"));var r=this._portSettingsData.getPorts();if(t){var n=r.filter(function(s){if(!t.find(function(o){return o.id===s.id}))return s}),i=t.filter(function(s){if(!r.find(function(o){return o.id===s.id}))return s});i.length>0&&this.trigger("ports:remove",this,i),n.length>0&&this.trigger("ports:add",this,n)}}},Mhe={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],t=this._getContainerElement(),r=0,n=t.node.childNodes.length;r<n;r++)e.push(t.node.childNodes[r]);var i=Vfe(this.model._portSettingsData.getPorts(),"z"),s="auto";Fr(i[s]).forEach(function(f){var h=this._getPortElement(f);t.append(h),e.push(h)},this);for(var o=Object.keys(i),a=0;a<o.length;a++){var u=o[a];if(u!==s){var c=parseInt(u,10);this._appendPorts(i[u],c,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,t,r){var n=this._getContainerElement(),i=Fr(e).map(this._getPortElement,this);r[t]||t<0?$e(r[Math.max(t,0)]).before(i):n.append(i)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNode:function(e,t){const r=this._portElementsCache[e];if(!r)return null;if(!t)return r.portContentElement.node;const n=r.portElement.node,i=r.portSelectors,[s=null]=this.findBySelector(t,n,i);return s},_updatePorts:function(){this._updatePortGroup(void 0);var e=Object.keys(this.model._portSettingsData.groups);e.forEach(this._updatePortGroup,this)},_removePorts:function(){To(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let t,r,n,i;var s=$e(this.portContainerMarkup).addClass("joint-port"),o=this._getPortMarkup(e);if(Array.isArray(o)){var a=this.parseDOMJSON(o,s.node),u=a.fragment;u.childNodes.length>1?t=$e("g").append(u):t=$e(u.firstChild),i=a.selectors}else t=$e(o),Array.isArray(t)&&(t=$e("g").append(t));if(!t)throw new Error("ElementView: Invalid port markup.");t.attr({port:e.id,"port-group":e.group});const c=this._getPortLabelMarkup(e.label);if(Array.isArray(c)){const{fragment:_,selectors:w}=this.parseDOMJSON(c,s.node),S=_.childNodes.length;S>0&&(n=w,r=S===1?$e(_.firstChild):$e("g").append(_))}else r=$e(c),Array.isArray(r)&&(r=$e("g").append(r));var f;if(i&&n){for(var h in n)if(i[h]&&h!==this.selector)throw new Error("ElementView: selectors within port must be unique.");f=$t({},i,n)}else f=i||n||{};const v="portRoot",y="labelRoot",m="labelText";if(v in f||(f[v]=t.node),r){const _=r.node;if(y in f||(f[y]=_),!(m in f)){const w=r.tagName()==="TEXT"?_:Array.from(_.querySelectorAll("text"));f[m]=w,n||(n={}),n[m]=w}}return s.append(t.addClass("joint-port-body")),r&&s.append(r.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:s,portLabelElement:r,portSelectors:f,portLabelSelectors:n,portContentElement:t,portContentSelectors:i},s},_updatePortGroup:function(e){for(var t=vt(this.model.size()),r=this.model._portSettingsData.getGroupPortsMetrics(e,t),n=0,i=r.length;n<i;n++){var s=r[n],o=s.portId,a=this._portElementsCache[o]||{},u=s.portTransformation,c=s.labelTransformation;c&&a.portLabelElement&&(this.updateDOMSubtreeAttributes(a.portLabelElement.node,c.attrs,{rootBBox:new vt(s.labelSize),selectors:a.portLabelSelectors}),this.applyPortTransform(a.portLabelElement,c,-u.angle||0)),this.updateDOMSubtreeAttributes(a.portElement.node,s.portAttrs,{rootBBox:new vt(s.portSize),selectors:a.portSelectors}),this.applyPortTransform(a.portElement,u)}},applyPortTransform:function(e,t,r){var n=$e.createSVGMatrix().rotate(r||0).translate(t.x||0,t.y||0).rotate(t.angle||0);e.transform(n,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Ni=ca.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),ca.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,t,r){const n=fs(t);r=(n?r:e)||{};const{parentRelative:i,deep:s,restrictedArea:o}=r;let a;if(i){if(!this.graph)throw new Error("Element must be part of a graph.");const u=this.getParentCell();u&&!u.isLink()&&(a=u.get("position"))}if(n){if(a&&(e+=a.x,t+=a.y),s||o){const{x:u,y:c}=this.get("position");this.translate(e-u,t-c,r)}else this.set("position",{x:e,y:t},r);return this}else{const u=pe(this.get("position"));return i?u.difference(a):u}},translate:function(e,t,r){if(e=e||0,t=t||0,e===0&&t===0)return this;r=r||{},r.translateBy=r.translateBy||this.id;var n=this.get("position")||{x:0,y:0},i=r.restrictedArea;if(i&&r.translateBy===this.id)if(typeof i=="function"){var s=i.call(this,n.x+e,n.y+t,r);e=s.x-n.x,t=s.y-n.y}else{var o=this.getBBox({deep:!0}),a=n.x-o.x,u=n.y-o.y,c=Math.max(i.x+a,Math.min(i.x+i.width+a-o.width,n.x+e)),f=Math.max(i.y+u,Math.min(i.y+i.height+u-o.height,n.y+t));e=c-n.x,t=f-n.y}var h={x:n.x+e,y:n.y+t};return r.tx=e,r.ty=t,r.transition?(Wr(r.transition)||(r.transition={}),this.transition("position",h,$t({},r.transition,{valueFunction:FU.object})),To(this.getEmbeddedCells(),"translate",e,t,r)):(this.startBatch("translate",r),this.set("position",h,r),To(this.getEmbeddedCells(),"translate",e,t,r),this.stopBatch("translate",r)),this},size:function(e,t,r){var n=this.get("size");return e===void 0?{width:n.width,height:n.height}:(Wr(e)&&(r=t,t=fs(e.height)?e.height:n.height,e=fs(e.width)?e.width:n.width),this.resize(e,t,r))},resize:function(e,t,r){if(r=r||{},this.startBatch("resize",r),r.direction){var n=this.get("size");switch(r.direction){case"left":case"right":t=n.height;break;case"top":case"bottom":e=n.width;break}var i=Oo(this.get("angle")||0),s=this.getBBox(),o;if(i){var a={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[r.direction];r.absolute&&(a+=Math.floor((i+45)/90),a%=4);var u=s[["bottomLeft","corner","topRight","origin"][a]](),c=pe(u).rotate(s.center(),-i),f=Math.sqrt(e*e+t*t)/2,h=a*Math.PI/2;h+=Math.atan(a%2==0?t/e:e/t),h-=vs(i);var v=pe.fromPolar(f,h,c);o=pe(v).offset(e/-2,t/-2)}else switch(o=s.topLeft(),r.direction){case"top":case"top-right":o.offset(0,s.height-t);break;case"left":case"bottom-left":o.offset(s.width-e,0);break;case"top-left":o.offset(s.width-e,s.height-t);break}this.set("size",{width:e,height:t},r),this.position(o.x,o.y,r)}else this.set("size",{width:e,height:t},r);return this.stopBatch("resize",r),this},scale:function(e,t,r,n){var i=this.getBBox().scale(e,t,r);return this.startBatch("scale",n),this.position(i.x,i.y,n),this.resize(i.width,i.height,n),this.stopBatch("scale"),this},fitEmbeds:function(e){return this.fitToChildren(e)},fitToChildren:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");const r=this.getEmbeddedCells().filter(n=>n.isElement());return r.length===0?this:(this.startBatch("fit-embeds",e),e.deep&&To(r,"fitToChildren",e),this._fitToElements(Object.assign({elements:r},e)),this.stopBatch("fit-embeds"),this)},fitParent:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");if(e.deep&&e.terminator&&(e.terminator===this||e.terminator===this.id))return this;const r=this.getParentCell();if(!r||!r.isElement())return this;const n=r.getEmbeddedCells().filter(i=>i.isElement());return n.length===0?this:(this.startBatch("fit-parent",e),r._fitToElements(Object.assign({elements:n},e)),e.deep&&r.fitParent(e),this.stopBatch("fit-parent"),this)},_fitToElements:function(e={}){const t=this.graph.getCellsBBox(e.elements);if(!t)return;const{expandOnly:r,shrinkOnly:n}=e;if(r&&n)return;let{x:i,y:s,width:o,height:a}=t;const{left:u,right:c,top:f,bottom:h}=cc(e.padding);i-=u,s-=f,o+=u+c,a+=h+f;let v=new vt(i,s,o,a);if(r)v=this.getBBox().union(v);else if(n){const y=this.getBBox().intersect(v);if(!y)return;v=y}this.set({position:{x:v.x,y:v.y},size:{width:v.width,height:v.height}},e)},rotate:function(e,t,r,n){if(r){var i=this.getBBox().center(),s=this.get("size"),o=this.get("position");i.rotate(r,this.get("angle")-e);var a=i.x-s.width/2-o.x,u=i.y-s.height/2-o.y;this.startBatch("rotate",{angle:e,absolute:t,origin:r}),this.position(o.x+a,o.y+u,n),this.rotate(e,t,null,n),this.stopBatch("rotate")}else this.set("angle",t?e:(this.get("angle")+e)%360,n);return this},angle:function(){return Oo(this.get("angle")||0)},getBBox:function(e={}){const{graph:t,attributes:r}=this,{deep:n,rotate:i}=e;if(n&&t){const h=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return h.push(this),t.getCellsBBox(h,e)}const{angle:s=0,position:{x:o,y:a},size:{width:u,height:c}}=r,f=new vt(o,a,u,c);return i&&f.rotateAroundCenter(s),f},getPointFromConnectedLink:function(e,t){var r=this.getBBox(),n=r.center(),i=e.get(t);if(!i)return n;var s=i.port;if(!s||!this.hasPort(s))return n;var o=this.portProp(s,["group"]),a=this.getPortsPositions(o),u=new pe(a[s]).offset(r.origin()),c=this.angle();return c&&u.rotate(n,-c),u}});$t(Ni.prototype,Ohe);const khe=Jn.Collection.extend({initialize:function(e,t){t.cellNamespace?this.cellNamespace=t.cellNamespace:this.cellNamespace=typeof joint<"u"&&Fa(joint,"shapes")?joint.shapes:null,this.graph=t.graph},model:function(e,t){var r=t.collection,n=r.cellNamespace,i=e.type==="link"?Wl:dh(n,e.type,".")||Ni,s=new i(e,t);return t.dry||(s.graph=r.graph),s},comparator:function(e){return e.get("z")||0}}),Po=Jn.Model.extend({initialize:function(e,t){t=t||{};var r=new khe([],{model:t.cellModel,cellNamespace:t.cellNamespace,graph:this});Jn.Model.prototype.set.call(this,"cells",r),r.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},r.on("add",this._restructureOnAdd,this),r.on("remove",this._restructureOnRemove,this),r.on("reset",this._restructureOnReset,this),r.on("change:source",this._restructureOnChangeSource,this),r.on("change:target",this._restructureOnChangeTarget,this),r.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:t,target:r}=e.attributes;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0),r.id&&((this._in[r.id]||(this._in[r.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:t,target:r}=e.attributes;t.id&&this._out[t.id]&&this._out[t.id][e.id]&&delete this._out[t.id][e.id],r.id&&this._in[r.id]&&this._in[r.id][e.id]&&delete this._in[r.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var t=e.previous("source");t.id&&this._out[t.id]&&delete this._out[t.id][e.id];var r=e.attributes.source;r.id&&((this._out[r.id]||(this._out[r.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var t=e.previous("target");t.id&&this._in[t.id]&&delete this._in[t.id][e.id];var r=e.get("target");r.id&&((this._in[r.id]||(this._in[r.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(){var e=Jn.Model.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(),e},fromJSON:function(e,t){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,t)},set:function(e,t,r){var n;return typeof e=="object"?(n=e,r=t):(n={})[e]=t,n.hasOwnProperty("cells")&&(this.resetCells(n.cells,r),n=uc(n,"cells")),Jn.Model.prototype.set.call(this,n,r)},clear:function(e){e=$t({},e,{clear:!0});var t=this.get("cells");if(t.length===0)return this;this.startBatch("clear",e);var r=t.sortBy(function(n){return n.isLink()?1:2});do r.shift().remove(e);while(r.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e,t){var r;if(e instanceof Jn.Model?(r=e.attributes,!e.graph&&(!t||!t.dry)&&(e.graph=this)):r=e,!Mi(r.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,t){return Array.isArray(e)?this.addCells(e,t):(e instanceof Jn.Model?e.has("z")||e.set("z",this.maxZIndex()+1):e.z===void 0&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,t),t||{}),this)},addCells:function(e,t){return e.length===0?this:(e=Gfe(e),t.maxPosition=t.position=e.length-1,this.startBatch("add",t),e.forEach(function(r){this.addCell(r,t),t.position--},this),this.stopBatch("add",t),this)},resetCells:function(e,t){var r=Fr(e).map(function(n){return this._prepareCell(n,t)},this);return this.get("cells").reset(r,t),this},removeCells:function(e,t){return e.length&&(this.startBatch("remove"),To(e,"remove",t),this.stopBatch("remove")),this},_removeCell:function(e,t,r){r=r||{},r.clear||(r.disconnectLinks?this.disconnectLinks(e,r):this.removeLinks(e,r)),this.get("cells").remove(e,{silent:!0}),e.graph===this&&(e.graph=null)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(e=>e.isElement())},getLinks:function(){return this.get("cells").filter(e=>e.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,t){t=t||{};var r=t.indirect,n=t.inbound,i=t.outbound;n===void 0&&i===void 0&&(n=i=!0);var s=[],o={};i&&a(this,e),n&&u(this,e);function a(h,v){if(Zs(h.getOutboundEdges(v.id),(function(m,_){if(!o[_]){var w=h.getCell(_);s.push(w),o[_]=!0,r&&(n&&u(h,w),i&&a(h,w))}}).bind(h)),r&&v.isLink()){var y=v.getTargetCell();y&&y.isLink()&&(o[y.id]||(s.push(y),a(h,y)))}}function u(h,v){if(Zs(h.getInboundEdges(v.id),(function(m,_){if(!o[_]){var w=h.getCell(_);s.push(w),o[_]=!0,r&&(n&&u(h,w),i&&a(h,w))}}).bind(h)),r&&v.isLink()){var y=v.getSourceCell();y&&y.isLink()&&(o[y.id]||(s.push(y),u(h,y)))}}if(t.deep){var c=e.getEmbeddedCells({deep:!0}),f={};c.forEach(function(h){h.isElement()&&(f[h.id]=!0)}),c.forEach(function(h){h.isLink()||(i&&Zs(this.getOutboundEdges(h.id),(function(v,y){if(!o[y]){var m=this.getCell(y),{source:_,target:w}=m.attributes,S=_.id,E=w.id;if(!t.includeEnclosed&&S&&f[S]&&E&&f[E])return;s.push(this.getCell(y)),o[y]=!0}}).bind(this)),n&&Zs(this.getInboundEdges(h.id),(function(v,y){if(!o[y]){var m=this.getCell(y),{source:_,target:w}=m.attributes,S=_.id,E=w.id;if(!t.includeEnclosed&&S&&f[S]&&E&&f[E])return;s.push(this.getCell(y)),o[y]=!0}}).bind(this)))},this)}return s},getNeighbors:function(e,t){t||(t={});var r=t.inbound,n=t.outbound;r===void 0&&n===void 0&&(r=n=!0);var i=this.getConnectedLinks(e,t).reduce((function(a,u){var{source:c,target:f}=u.attributes,h=u.hasLoop(t);if(r&&Fa(c,"id")&&!a[c.id]){var v=this.getCell(c.id);v.isElement()&&(h||v&&v!==e&&(!t.deep||!v.isEmbeddedIn(e)))&&(a[c.id]=v)}if(n&&Fa(f,"id")&&!a[f.id]){var y=this.getCell(f.id);y.isElement()&&(h||y&&y!==e&&(!t.deep||!y.isEmbeddedIn(e)))&&(a[f.id]=y)}return a}).bind(this),{});if(e.isLink()){if(r){var s=e.getSourceCell();s&&s.isElement()&&!i[s.id]&&(i[s.id]=s)}if(n){var o=e.getTargetCell();o&&o.isElement()&&!i[o.id]&&(i[o.id]=o)}}return Fr(i)},getCommonAncestor:function(){var e=Array.from(arguments).map(function(r){for(var n=[],i=r.get("parent");i;)n.push(i),i=this.getCell(i).get("parent");return n},this);e=e.sort(function(r,n){return r.length-n.length});var t=Fr(e.shift()).find(function(r){return e.every(function(n){return n.includes(r)})});return this.getCell(t)},getSuccessors:function(e,t){t=t||{};var r=[];return this.search(e,function(n){n!==e&&r.push(n)},$t({},t,{outbound:!0})),r},cloneCells:BU,cloneSubgraph:function(e,t){var r=this.getSubgraph(e,t);return this.cloneCells(r)},getSubgraph:function(e,t){t=t||{};var r=[],n={},i=[],s=[];return Fr(e).forEach(function(o){if(n[o.id]||(r.push(o),n[o.id]=o,o.isLink()?s.push(o):i.push(o)),t.deep){var a=o.getEmbeddedCells({deep:!0});a.forEach(function(u){n[u.id]||(r.push(u),n[u.id]=u,u.isLink()?s.push(u):i.push(u))})}}),s.forEach(function(o){var{source:a,target:u}=o.attributes;if(a.id&&!n[a.id]){var c=this.getCell(a.id);r.push(c),n[c.id]=c,i.push(c)}if(u.id&&!n[u.id]){var f=this.getCell(u.id);r.push(this.getCell(u.id)),n[f.id]=f,i.push(f)}},this),i.forEach(function(o){var a=this.getConnectedLinks(o,t);a.forEach(function(u){var{source:c,target:f}=u.attributes;!n[u.id]&&c.id&&n[c.id]&&f.id&&n[f.id]&&(r.push(u),n[u.id]=u)})},this),r},getPredecessors:function(e,t){t=t||{};var r=[];return this.search(e,function(n){n!==e&&r.push(n)},$t({},t,{inbound:!0})),r},search:function(e,t,r){r=r||{},r.breadthFirst?this.bfs(e,t,r):this.dfs(e,t,r)},bfs:function(e,t,r={}){const n={},i={},s=[];for(s.push(e),i[e.id]=0;s.length>0;){var o=s.shift();if(n[o.id]||(n[o.id]=!0,t.call(this,o,i[o.id])===!1))continue;const a=this.getNeighbors(o,r);for(let u=0,c=a.length;u<c;u++){const f=a[u];i[f.id]=i[o.id]+1,s.push(f)}}},dfs:function(e,t,r={}){const n={},i={},s=[];for(s.push(e),i[e.id]=0;s.length>0;){const o=s.pop();if(n[o.id]||(n[o.id]=!0,t.call(this,o,i[o.id])===!1))continue;const a=this.getNeighbors(o,r),u=s.length;for(let c=0,f=a.length;c<f;c++){const h=a[c];i[h.id]=i[o.id]+1,s.splice(u,0,h)}}},getSources:function(){var e=[];return Zs(this._nodes,(function(t,r){(!this._in[r]||Da(this._in[r]))&&e.push(this.getCell(r))}).bind(this)),e},getSinks:function(){var e=[];return Zs(this._nodes,(function(t,r){(!this._out[r]||Da(this._out[r]))&&e.push(this.getCell(r))}).bind(this)),e},isSource:function(e){return!this._in[e.id]||Da(this._in[e.id])},isSink:function(e){return!this._out[e.id]||Da(this._out[e.id])},isSuccessor:function(e,t){var r=!1;return this.search(e,function(n){if(n===t&&n!==e)return r=!0,!1},{outbound:!0}),r},isPredecessor:function(e,t){var r=!1;return this.search(e,function(n){if(n===t&&n!==e)return r=!0,!1},{inbound:!0}),r},isNeighbor:function(e,t,r){r=r||{};var n=r.inbound,i=r.outbound;n===void 0&&i===void 0&&(n=i=!0);var s=!1;return this.getConnectedLinks(e,r).forEach(function(o){var{source:a,target:u}=o.attributes;if(n&&Fa(a,"id")&&a.id===t.id||i&&Fa(u,"id")&&u.id===t.id)return s=!0,!1}),s},disconnectLinks:function(e,t){this.getConnectedLinks(e).forEach(function(r){r.set(r.attributes.source.id===e.id?"source":"target",{x:0,y:0},t)})},removeLinks:function(e,t){To(this.getConnectedLinks(e),"remove",t)},findModelsFromPoint:function(e){return this.getElements().filter(t=>t.getBBox({rotate:!0}).containsPoint(e))},findModelsInArea:function(e,t={}){const r=new vt(e),{strict:n=!1}=t,i=n?"containsRect":"intersect";return this.getElements().filter(s=>r[i](s.getBBox({rotate:!0})))},findModelsUnderElement:function(e,t={}){const{searchBy:r="bbox"}=t,n=e.getBBox().rotateAroundCenter(e.angle());return(r==="bbox"?this.findModelsInArea(n):this.findModelsFromPoint(GU(n,r))).filter(s=>e.id!==s.id&&!s.isEmbeddedIn(e))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,t={}){const{rotate:r=!0}=t;return Fr(e).reduce(function(n,i){const s=i.getBBox({rotate:r});return s?n?n.union(s):s:n},null)},translate:function(e,t,r){var n=this.getCells().filter(function(i){return!i.isEmbedded()});return To(n,"translate",e,t,r),this},resize:function(e,t,r){return this.resizeCells(e,t,this.getCells(),r)},resizeCells:function(e,t,r,n){var i=this.getCellsBBox(r);if(i){var s=Math.max(e/i.width,0),o=Math.max(t/i.height,0);To(r,"scale",s,o,i.origin(),n)}return this},startBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",$t({},t,{batchName:e}))},stopBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",$t({},t,{batchName:e}))},hasActiveBatch:function(e){const t=this._batches;let r;return arguments.length===0?r=Object.keys(t):Array.isArray(e)?r=e:r=[e],r.some(n=>t[n]>0)}},{validations:{multiLinks:function(e,t){var{source:r,target:n}=t.attributes;if(r.id&&n.id){var i=t.getSourceCell();if(i){var s=e.getConnectedLinks(i,{outbound:!0}),o=s.filter(function(a){var{source:u,target:c}=a.attributes;return u&&u.id===r.id&&(!u.port||u.port===r.port)&&c&&c.id===n.id&&(!c.port||c.port===n.port)});if(o.length>1)return!1}}return!0},linkPinning:function(e,t){var{source:r,target:n}=t.attributes;return r.id&&n.id}}});uhe(Po.prototype,["resetCells","addCells","removeCells"],lE.cells);const Ku={},Va=Jn.View.extend({options:{},theme:null,themeClassNamePrefix:So("theme-"),requireSetThemeOverride:!1,defaultTheme:yu.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=$t({},this.options,e),Jn.View.call(this,e)},initialize:function(){Ku[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return this.el.parentNode!==null},renderChildren:function(e){if(e||(e=Zn(this,"children")),e){var t=this.svgElement,r=$e.namespace[t?"svg":"xhtml"],n=Fp(e,r);(t?this.vel:this.$el).empty().append(n.fragment),this.childNodes=n.selectors}return this},findAttribute:function(e,t){for(var r=t;r&&r.nodeType===1;){var n=r.getAttribute(e);if(n)return n;if(r===this.el)return null;r=r.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(Zn(this,"el"));else{var e=Zn(this,"tagName"),t=$t({},Zn(this,"attributes")),r=$t({},Zn(this,"style"));this.id&&(t.id=Zn(this,"id")),this.setElement(this._createElement(e)),this._setAttributes(t),this._setStyle(r)}this._ensureElClassName()},_setAttributes:function(e){this.svgElement?this.vel.attr(e):this.$el.attr(e)},_setStyle:function(e){this.$el.css(e)},_createElement:function(e){return this.svgElement?document.createElementNS($e.namespace.svg,e):document.createElement(e)},_setElement:function(e){this.$el=e instanceof Jn.$?e:Jn.$(e),this.el=this.$el[0],this.svgElement&&(this.vel=$e(this.el))},_ensureElClassName:function(){var e=Zn(this,"className");if(e){var t=So(e);this.svgElement?this.vel.removeClass(e).addClass(t):this.$el.removeClass(e).addClass(t)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(e,t){return t=t||{},this.theme&&this.requireSetThemeOverride&&!t.override?this:(this.removeThemeClassName(),this.addThemeClassName(e),this.onSetTheme(this.theme,e),this.theme=e,this)},addThemeClassName:function(e){if(e=e||this.theme,!e)return this;var t=this.themeClassNamePrefix+e;return this.svgElement?this.vel.addClass(t):this.$el.addClass(t),this},removeThemeClassName:function(e){e=e||this.theme;var t=this.themeClassNamePrefix+e;return this.svgElement?this.vel.removeClass(t):this.$el.removeClass(t),this},onSetTheme:function(e,t){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Ku[this.cid]=null,Jn.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(e,t,r){if(!t)return this;r||(r={});var n=this.getEventNamespace();for(var i in t){var s=t[i];typeof s!="function"&&(s=this[s]),s&&It(e).on(i+n,r,s.bind(this))}return this},undelegateElementEvents:function(e){return It(e).off(this.getEventNamespace()),this},delegateDocumentEvents:function(e,t){return e||(e=Zn(this,"documentEvents")),this.delegateElementEvents(document,e,t)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(e,t){if(!e)throw new Error("eventData(): event object required.");var r=e.data,n="__"+this.cid+"__";return t===void 0?r?r[n]||{}:{}:(r||(r=e.data={}),r[n]||(r[n]={}),$t(r[n],t),this)},stopPropagation:function(e){return this.eventData(e,{propagationStopped:!0}),this},isPropagationStopped:function(e){return!!this.eventData(e).propagationStopped}},{extend:function(){var e=Array.from(arguments),t=e[0]&&$t({},e[0])||{},r=e[1]&&$t({},e[1])||{},n=t.render||this.prototype&&this.prototype.render||null;return t.render=function(){return typeof n=="function"&&n.apply(this,arguments),this.render.__render__===n&&this.onRender(),this},t.render.__render__=n,Jn.View.extend.call(this,t,r)}}),x5="dbltap";if(It.event&&!(x5 in It.event.special)){const e=yu.doubleTapInterval,t=30;It.event.special[x5]={bindType:"touchend",delegateType:"touchend",handle:function(r,...n){const{handleObj:i,target:s}=r,o=It.data(s),a=new Date().getTime(),u="lastTouch"in o?a-o.lastTouch:0;u<e&&u>t?(o.lastTouch=null,r.type=i.origType,i.handler.call(this,r,...n)):o.lastTouch=a}}}const Js={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},Lhe=Va.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return So(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,t){this.el.insertBefore(e,this.insertPivot(t))},insertNode:function(e){const{el:t}=this;e.parentNode!==t&&t.appendChild(e)},insertPivot:function(e){const{el:t,pivotNodes:r}=this;e=+e,e||(e=0);let n=r[e];if(n)return n;n=r[e]=document.createComment("z-index:"+(e+1));let i=-1/0;for(let s in r)s=+s,s<e&&s>i&&(i=s,e-1);if(i!==-1/0){const s=r[i];t.insertBefore(n,s.nextSibling)}else t.insertBefore(n,t.firstChild);return n},removePivots:function(){const{el:e,pivotNodes:t}=this;for(let r in t)e.removeChild(t[r]);this.pivotNodes={}}});function Of(e){return e?Array.isArray(e)?e:[e]:[]}const Eo=Va.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(e,t){const{paper:r}=e;this.cellView=e,this.nodeSelector=t,r&&(this.updateRequested=!0,r.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:e,nodeSelector:t}=this;return e.isMounted()?(this.update(e,t),this.mount(),this.transform(),0):(this.postponedUpdate=!0,0)},findNode(e,t=null){let r;if(typeof t=="string")[r]=e.findBySelector(t);else if(Kn(t)){const n=e.model.isLink(),{label:i=null,port:s,selector:o}=t;n&&i!==null?r=e.findLabelNode(i,o):!n&&s?r=e.findPortNode(s,o):[r]=e.findBySelector(o)}else t&&(r=$e.toNode(t),r instanceof SVGElement||(r=null));return r||null},getNodeMatrix(e,t){const{options:r}=this,{layer:n}=r,{rotatableNode:i}=e,s=e.getNodeMatrix(t);return i?n?i.contains(t)?s:e.getRootRotateMatrix().inverse().multiply(s):e.getNodeRotateMatrix(t).multiply(s):s},mount(){const{MOUNTABLE:e,cellView:t,el:r,options:n,transformGroup:i,detachedTransformGroup:s,postponedUpdate:o,nodeSelector:a}=this;if(!e||i)return;if(o){this.update(t,a),this.transform();return}const{vel:u,paper:c}=t,{layer:f}=n;if(f){let h;s?(h=s,this.detachedTransformGroup=null):h=$e("g").addClass("highlight-transform").append(r),this.transformGroup=h,c.getLayerView(f).insertSortedNode(h.node,n.z)}else(!r.parentNode||r.nextSibling)&&u.append(r)},unmount(){const{MOUNTABLE:e,transformGroup:t,vel:r}=this;e&&(t?(this.transformGroup=null,this.detachedTransformGroup=t,t.remove()):r.remove())},transform(){const{transformGroup:e,cellView:t,updateRequested:r}=this;if(!e||t.model.isLink()||r)return;const n=t.getRootTranslateMatrix(),i=t.getRootRotateMatrix(),s=n.multiply(i);e.attr("transform",$e.matrixToTransformString(s))},update(){const{node:e,cellView:t,nodeSelector:r,updateRequested:n,id:i}=this;if(n)return;this.postponedUpdate=!1;const s=this.node=this.findNode(t,r);e&&this.unhighlight(t,e),s?(this.highlight(t,s),this.mount()):(this.unmount(),t.notify("cell:highlight:invalid",i,this))},onRemove(){const{node:e,cellView:t,id:r,constructor:n}=this;e&&this.unhighlight(t,e),this.unmount(),n._removeRef(t,r)},highlight(e,t){},unhighlight(e,t){},listenToUpdateAttributes(e){const t=Zn(this,"UPDATE_ATTRIBUTES");!Array.isArray(t)||t.length===0||this.listenTo(e.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){const{cellView:e}=this;if(!e)return;const{model:t,paper:r}=e;Zn(this,"UPDATE_ATTRIBUTES").some(i=>t.hasChanged(i))&&r.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(e,t,r){const n=this.uniqueId(t,r);this.add(e,t,n,r)},unhighlight:function(e,t,r){const n=this.uniqueId(t,r);this.remove(e,n)},get(e,t=null){const{cid:r}=e,{_views:n}=this,i=n[r];if(t===null){const s=[];if(!i)return s;for(let o in i){const a=i[o];a instanceof this&&s.push(a)}return s}else{if(!i)return null;if(t in i){const s=i[t];if(s instanceof this)return s}return null}},add(e,t,r,n={}){if(!r)throw new Error("dia.HighlighterView: An ID required.");const i=Eo.get(e,r);i&&i.remove();const s=new this(n);return s.id=r,this._addRef(e,r,s),s.requestUpdate(e,t),s.listenToUpdateAttributes(e),s},_addRef(e,t,r){const{cid:n}=e,{_views:i}=this;let s=i[n];s||(s=i[n]={}),s[t]=r},_removeRef(e,t){const{cid:r}=e,{_views:n}=this,i=n[r];if(i){t&&delete i[t];for(let s in i)return;delete n[r]}},remove(e,t=null){Of(this.get(e,t)).forEach(r=>{r.remove()})},removeAll(e,t=null){const{_views:r}=this;for(let n in r)for(let i in r[n]){const s=r[n][i];s.cellView.paper===e&&s instanceof this&&(t===null||i===t)&&s.remove()}},update(e,t=null,r=!1){Of(this.get(e,t)).forEach(n=>{(r||n.UPDATABLE)&&n.update()})},transform(e,t=null){Of(this.get(e,t)).forEach(r=>{r.UPDATABLE&&r.transform()})},unmount(e,t=null){Of(this.get(e,t)).forEach(r=>r.unmount())},mount(e,t=null){Of(this.get(e,t)).forEach(r=>r.mount())},uniqueId(e,t=""){return $e.ensureId(e)+JSON.stringify(t)}}),Zc={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},Nhe={TOOLS:"TOOLS"},wr=Va.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],t=this.model.get("type");return t&&t.toLowerCase().split(".").forEach(function(r,n,i){e.push("type-"+i.slice(0,n+1).join("-"))}),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var e={},t={},r=0,n,i,s,o=Zn(this,"presentationAttributes");for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];for(Array.isArray(u)||(u=[u]),n=0,i=u.length;n<i;n++){s=u[n];var c=e[s];c||(c=e[s]=1<<r++),t[a]|=c}}var f=Zn(this,"initFlag");for(Array.isArray(f)||(f=[f]),n=0,i=f.length;n<i;n++)s=f[n],e[s]||(e[s]=1<<r++);if(r>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=e,this._presentationAttributes=t},hasFlag:function(e,t){return e&this.getFlag(t)},removeFlag:function(e,t){return e^e&this.getFlag(t)},getFlag:function(e){var t=this._flags;if(!t)return 0;var r=0;if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)r|=t[e[n]];else r|=t[e];return r},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||ol(this),Va.call(this,e)},initialize:function(){this.setFlags(),Va.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,t){var r=e.getChangeFlag(this._presentationAttributes);t.updateHandled||!r||(t.dirty&&this.hasFlag(r,"UPDATE")&&(r|=this.getFlag("RENDER")),t.tool&&(t.async=!1),this.requestUpdate(r,t))},requestUpdate:function(e,t){const{paper:r}=this;r&&e>0&&r.requestViewUpdate(this,e,this.UPDATE_PRIORITY,t)},parseDOMJSON:function(e,t){var r=Fp(e),n=r.selectors,i=r.groupSelectors;for(var s in i){if(n[s])throw new Error("dia.CellView: ambiguous group selector");n[s]=i[s]}if(t){var o=this.selector;if(n[o])throw new Error("dia.CellView: ambiguous root selector.");n[o]=t}return{fragment:r.fragment,selectors:n}},can:function(e){var t=fn(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Wr(t)&&t[e]!==!1||qfe(t)&&t!==!1},findBySelector:function(e,t,r){if(t||(t=this.el),r||(r=this.selectors),!e||e===".")return[t];if(r){var n=r[e];if(n)return Array.isArray(n)?n:[n]}return It(t).find(e).toArray()},notify:function(e){if(this.paper){var t=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(t)),this.paper.trigger.apply(this.paper,[e,this].concat(t))}},getBBox:function(e){var t;if(e&&e.useModelGeometry){var r=this.model;t=r.getBBox().bbox(r.angle())}else t=this.getNodeBBox(this.el);return this.paper.localToPaperRect(t)},getNodeBBox:function(e){const t=this.getNodeBoundingRect(e),r=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(e)),n=this.getNodeMatrix(e);return $e.transformRect(t,r.multiply(n))},getNodeRotateMatrix(e){return!this.rotatableNode||this.rotatableNode.contains(e)?this.getRootRotateMatrix():$e.createSVGMatrix()},getNodeUnrotatedBBox:function(e){var t=this.getNodeBoundingRect(e),r=this.getNodeMatrix(e),n=this.getRootTranslateMatrix();return $e.transformRect(t,n.multiply(r))},getRootTranslateMatrix:function(){var e=this.model,t=e.position(),r=$e.createSVGMatrix().translate(t.x,t.y);return r},getRootRotateMatrix:function(){var e=$e.createSVGMatrix(),t=this.model,r=t.angle();if(r){var n=t.getBBox(),i=n.width/2,s=n.height/2;e=e.translate(i,s).rotate(r).translate(-i,-s)}return e},_notifyHighlight:function(e,t,r={}){const{el:n}=this;let i;if(typeof t=="string"?[i=n]=this.findBySelector(t):[i=n]=this.$(t),r.partial=i!==n,r.type===void 0){let s;switch(!0){case r.embedding:s=Zc.EMBEDDING;break;case r.connecting:s=Zc.CONNECTING;break;case r.magnetAvailability:s=Zc.MAGNET_AVAILABILITY;break;case r.elementAvailability:s=Zc.ELEMENT_AVAILABILITY;break;default:s=Zc.DEFAULT;break}r.type=s}return this.notify(e,i,r),this},highlight:function(e,t){return this._notifyHighlight("cell:highlight",e,t)},unhighlight:function(e,t={}){return this._notifyHighlight("cell:unhighlight",e,t)},findMagnet:function(e){const t=this.el;let r=this.$(e)[0];r||(r=t);do{const n=r.getAttribute("magnet"),i=r===t;if((n||i)&&n!=="false")return r;if(i)return;r=r.parentNode}while(r)},findProxyNode:function(e,t){e||(e=this.el);const r=e.getAttribute(`${t}-selector`);if(r){const[n]=this.findBySelector(r);if(n)return n}return e},getSelector:function(e,t){var r;if(e===this.el)return typeof t=="string"&&(r="> "+t),r;if(e){var n=$e(e).index()+1;r=e.tagName+":nth-child("+n+")",t&&(r+=" > "+t),r=this.getSelector(e.parentNode,r)}return r},addLinkFromMagnet:function(e,t,r){var n=this.paper,i=n.model,s=n.getDefaultLink(this,e);return s.set({source:this.getLinkEnd(e,t,r,s,"source"),target:{x:t,y:r}}).addTo(i,{async:!1,ui:!0}),s.findView(n)},getLinkEnd:function(e,...t){var r=this.model,n=r.id,i=this.findAttribute("port",e),s=e.getAttribute("joint-selector"),o={id:n};return s!=null&&(o.magnet=s),i!=null?(o.port=i,!r.hasPort(i)&&!s&&(o.selector=this.getSelector(e))):s==null&&this.el!==e&&(o.selector=this.getSelector(e)),this.customizeLinkEnd(o,e,...t)},customizeLinkEnd:function(e,t,r,n,i,s){const{paper:o}=this,{connectionStrategy:a}=o.options;if(typeof a=="function"){var u=a.call(o,e,this,t,new pe(r,n),i,s,o);if(u)return u}return e},getMagnetFromLinkEnd:function(e){var t=this.el,r=e.port,n=e.magnet,i=this.model,s;return r!=null&&i.isElement()&&i.hasPort(r)?s=this.findPortNode(r,n)||t:(n||(n=e.selector),!n&&r!=null&&(n='[port="'+r+'"]'),s=this.findBySelector(n,t,this.selectors)[0]),this.findProxyNode(s,"magnet")},dragLinkStart:function(e,t,r,n){this.model.startBatch("add-link");const i=this.addLinkFromMagnet(t,r,n);i.notifyPointerdown(e,r,n),i.eventData(e,i.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:i})},dragLink:function(e,t,r){var n=this.eventData(e),i=n.linkView;if(i)i.pointermove(e,t,r);else{var s=this.paper,o=s.options.magnetThreshold,a=this.getEventTarget(e),u=n.targetMagnet;if(o==="onleave"){if(u===a||$e(u).contains(a))return}else if(s.eventData(e).mousemoved<=o)return;this.dragLinkStart(e,u,t,r)}},dragLinkEnd:function(e,t,r){var n=this.eventData(e),i=n.linkView;i&&(i.pointerup(e,t,r),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,t){Da(t)||(e instanceof SVGElement?$e(e).attr(t):It(e).attr(t))},processNodeAttributes:function(e,t){var r,n,i,s,o,a,u,c,f,h=[];for(r in t)t.hasOwnProperty(r)&&(n=t[r],i=this.getAttributeDefinition(r),i&&(!fn(i.qualify)||i.qualify.call(this,n,e,t,this))?(Mi(i.set)&&(a||(a={}),a[i.set]=n),n!==null&&h.push(r,i)):(a||(a={}),a[Kfe(r)]=n));for(s=0,o=h.length;s<o;s+=2)r=h[s],i=h[s+1],n=t[r],fn(i.set)&&(u||(u={}),u[r]=n),fn(i.position)&&(c||(c={}),c[r]=n),fn(i.offset)&&(f||(f={}),f[r]=n);return{raw:t,normal:a,set:u,position:c,offset:f}},updateRelativeAttributes:function(e,t,r,n){n||(n={});var i,s,o,a=t.raw||{},u=t.normal||{},c=t.set,f=t.position,h=t.offset;for(i in c){s=c[i],o=this.getAttributeDefinition(i);var v=o.set.call(this,s,r.clone(),e,a,this);Wr(v)?$t(u,v):v!==void 0&&(u[i]=v)}if(e instanceof HTMLElement){this.setNodeAttributes(e,u);return}var y=u.transform,m=$e.transformStringToMatrix(y),_=pe(m.e,m.f);y&&(u=uc(u,"transform"),m.e=m.f=0);var w,S,E;if(f||h){var A=this.getNodeScale(e,n.scalableNode);w=A.sx,S=A.sy}var T=!1;for(i in f)s=f[i],o=this.getAttributeDefinition(i),E=o.position.call(this,s,r.clone(),e,a,this),E&&(_.offset(pe(E).scale(w,S)),T||(T=!0));this.setNodeAttributes(e,u);var I=!1;if(h){var q=this.getNodeBoundingRect(e);if(q.width>0&&q.height>0){var p=$e.transformRect(q,m).scale(1/w,1/S);for(i in h)s=h[i],o=this.getAttributeDefinition(i),E=o.offset.call(this,s,p,e,a,this),E&&(_.offset(pe(E).scale(w,S)),I||(I=!0))}}(y!==void 0||T||I)&&(_.round(1),m.e=_.x,m.f=_.y,e.setAttribute("transform",$e.matrixToTransformString(m)))},getNodeScale:function(e,t){var r,n;if(t&&t.contains(e)){var i=t.scale();r=1/i.sx,n=1/i.sy}else r=1,n=1;return{sx:r,sy:n}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(e){var t=this.metrics;if(!t)return{};var r=$e.ensureId(e),n=t[r];return n||(n=t[r]={}),n},getNodeData:function(e){var t=this.nodeCache(e);return t.data||(t.data={}),t.data},getNodeBoundingRect:function(e){var t=this.nodeCache(e);return t.boundingRect===void 0&&(t.boundingRect=$e(e).getBBox()),new vt(t.boundingRect)},getNodeMatrix:function(e){const t=this.nodeCache(e);if(t.magnetMatrix===void 0){const{rotatableNode:r,el:n}=this;let i;r&&r.contains(e)?i=r:i=n,t.magnetMatrix=$e(e).getTransformToElement(i)}return $e.createSVGMatrix(t.magnetMatrix)},getNodeShape:function(e){var t=this.nodeCache(e);return t.geometryShape===void 0&&(t.geometryShape=$e(e).toGeometryShape()),t.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,t,r,n){var i,s,o,a,u={},c=[];for(var f in e)if(e.hasOwnProperty(f)&&(o=e[f],!!Kn(o))){var h=r[f]=this.findBySelector(f,t,n);for(i=0,s=h.length;i<s;i++){var v=h[i];a=$e.ensureId(v);var y=n&&n[f]===v,m=u[a];if(m){m.array||(c.push(a),m.array=!0,m.attributes=[m.attributes],m.selectedLength=[m.selectedLength]);var _=m.attributes,w=m.selectedLength;if(y)_.unshift(o),w.unshift(-1);else{var S=NU(w,s);_.splice(S,0,o),w.splice(S,0,s)}}else u[a]={attributes:o,selectedLength:y?-1:s,node:v,array:!1}}}for(i=0,s=c.length;i<s;i++)a=c[i],o=u[a],o.attributes=ti({},...o.attributes.reverse());return u},getEventTarget:function(e,t={}){const{target:r,type:n,clientX:i=0,clientY:s=0}=e;return t.fromPoint||n==="touchmove"||n==="touchend"||"pointerId"in e&&r.hasPointerCapture(e.pointerId)?document.elementFromPoint(i,s):r},updateDOMSubtreeAttributes:function(e,t,r){r||(r={}),r.rootBBox||(r.rootBBox=vt()),r.selectors||(r.selectors=this.selectors);var n={},i={},s=[],o=[],a,u,c,f,h,v=r.roAttributes,y=this.findNodesAttributes(v||t,e,n,r.selectors),m=v?this.findNodesAttributes(t,e,n,r.selectors):y;for(var _ in y)if(f=y[_],c=f.attributes,u=f.node,h=this.processNodeAttributes(u,c),!h.set&&!h.position&&!h.offset)this.setNodeAttributes(u,h.normal);else{var w=m[_]&&m[_].attributes,S=w&&c.ref===void 0?w.ref:c.ref,E;if(S){if(E=(n[S]||this.findBySelector(S,e,r.selectors))[0],!E)throw new Error('dia.CellView: "'+S+'" reference does not exist.')}else E=null;if(a={node:u,refNode:E,processedAttributes:h,allAttributes:w},E){var A=o.findIndex(function(T){return T.refNode===u});A>-1?o.splice(A,0,a):o.push(a)}else s.push(a)}s.push(...o);for(let T=0,I=s.length;T<I;T++){a=s[T],u=a.node,E=a.refNode;const q=E?$e.ensureId(E):"";let p=i[q];p||(p=i[q]=E?$e(E).getBBox({target:qhe(u,E)}):r.rootBBox),v?(h=this.processNodeAttributes(u,a.allAttributes),this.mergeProcessedAttributes(h,a.processedAttributes)):h=a.processedAttributes,this.updateRelativeAttributes(u,h,p,r)}},mergeProcessedAttributes:function(e,t){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),$t(e.set,t.set),$t(e.position,t.position),$t(e.offset,t.offset);var r=e.normal&&e.normal.transform;r!==void 0&&t.normal&&(t.normal.transform=r),e.normal=t.normal},onMount(e){e||(this.mountTools(),Eo.mount(this))},onDetach(){this.unmountTools(),Eo.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var t=this._toolsView;return t?e?t.getName()===e:!0:!1},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){const e=this._toolsView;return e&&e.unmount(),this},mountTools(){const e=this._toolsView;return e&&!e.isMounted()&&e.mount(),this},updateTools:function(e){var t=this._toolsView;return t&&t.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools();break}},removeHighlighters:function(){Eo.remove(this)},updateHighlighters:function(e=!1){Eo.update(this,null,e)},transformHighlighters:function(){Eo.transform(this)},preventDefaultInteraction(e){this.eventData(e,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(e){const{defaultInteractionPrevented:t=!1}=this.eventData(e);return t},pointerdblclick:function(e,t,r){this.notify("cell:pointerdblclick",e,t,r)},pointerclick:function(e,t,r){this.notify("cell:pointerclick",e,t,r)},contextmenu:function(e,t,r){this.notify("cell:contextmenu",e,t,r)},pointerdown:function(e,t,r){const{model:n}=this,{graph:i}=n;i&&(n.startBatch("pointer"),this.eventData(e,{graph:i})),this.notify("cell:pointerdown",e,t,r)},pointermove:function(e,t,r){this.notify("cell:pointermove",e,t,r)},pointerup:function(e,t,r){const{graph:n}=this.eventData(e);this.notify("cell:pointerup",e,t,r),n&&n.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,t,r,n){this.notify("cell:mousewheel",e,t,r,n)},onevent:function(e,t,r,n){this.notify(t,e,r,n)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){const{paper:t,model:r}=this;if(t.isAsync()){if(r.isLink()){const s=r.getSourceElement();if(s){const a=t.findViewByModel(s);a&&(t.dumpView(a),t.checkViewVisibility(a))}const o=r.getTargetElement();if(o){const a=t.findViewByModel(o);a&&(t.dumpView(a),t.checkViewVisibility(a))}}t.dumpView(this),t.checkViewVisibility(this)}const n=this.getEventTarget(e,{fromPoint:!0}),i=t.findView(n);i!==this&&(this.mouseleave(e),i&&i.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e}},{Flags:Nhe,Highlighting:Zc,addPresentationAttributes:function(e){return ti({},Zn(this.prototype,"presentationAttributes"),e,function(t,r){if(!(!t||!r)&&(typeof t=="string"&&(t=[t]),typeof r=="string"&&(r=[r]),Array.isArray(t)&&Array.isArray(r)))return $h(t.concat(r))})}});function qhe(e,t){let r=e;do{if(r.contains(t))return r;r=r.parentNode}while(r);return null}const Dr={TOOLS:wr.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Jc={MOVE:"move",MAGNET:"magnet"},_i=wr.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=wr.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){wr.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[Dr.UPDATE],position:[Dr.TRANSLATE,Dr.TOOLS],size:[Dr.RESIZE,Dr.PORTS,Dr.TOOLS],angle:[Dr.ROTATE,Dr.TOOLS],markup:[Dr.RENDER],ports:[Dr.PORTS]},initFlag:[Dr.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,t){this.hasFlag(e,Dr.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(e,Dr.RENDER))this.render(),this.updateTools(t),this.updateHighlighters(!0),r=!0,e=this.removeFlag(e,[Dr.RENDER,Dr.UPDATE,Dr.RESIZE,Dr.TRANSLATE,Dr.ROTATE,Dr.PORTS,Dr.TOOLS]);else{let n=!1;this.hasFlag(e,Dr.RESIZE)&&(this.resize(t),n=!0,e=this.removeFlag(e,[Dr.RESIZE,Dr.UPDATE]),e=this.removeFlag(e,Dr.PORTS)),this.hasFlag(e,Dr.UPDATE)&&(this.update(this.model,null,t),e=this.removeFlag(e,Dr.UPDATE),n=!0,e=this.removeFlag(e,Dr.PORTS)),this.hasFlag(e,Dr.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,Dr.TRANSLATE),r=!0),this.hasFlag(e,Dr.ROTATE)&&(this.rotate(),e=this.removeFlag(e,Dr.ROTATE),r=!0),this.hasFlag(e,Dr.PORTS)&&(this._renderPorts(),n=!0,e=this.removeFlag(e,Dr.PORTS)),n&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(e,Dr.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,Dr.TOOLS)),e},_initializePorts:function(){},update:function(e,t){this.cleanNodesCache(),this._removePorts();var r=this.model,n=r.attr();this.updateDOMSubtreeAttributes(this.el,n,{rootBBox:new vt(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:t===n?null:t}),this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.ElementView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if(typeof t=="string")return this.renderStringMarkup(t);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el),r=this.selectors=t.selectors;this.rotatableNode=$e(r[this.rotatableSelector])||null,this.scalableNode=$e(r[this.scalableSelector])||null,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=this.vel;t.append($e(e)),this.rotatableNode=t.findOne(".rotatable"),this.scalableNode=t.findOne(".scalable");var r=this.selectors={};r[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode){this.rgRotate(),this.update();return}this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),t=this.getRotateString();t&&(e+=" "+t),this.vel.attr("transform",e)},getTranslateString:function(){var e=this.model.attributes.position;return"translate("+e.x+","+e.y+")"},getRotateString:function(){var e=this.model.attributes,t=e.angle;if(!t)return null;var r=e.size;return"rotate("+t+","+r.width/2+","+r.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var t=this.model,r=t.angle(),n=t.size(),i=this.scalableNode,s=!1;i.node.getElementsByTagName("path").length>0&&(s=!0);var o=i.getBBox({recursive:s}),a=n.width/(o.width||1),u=n.height/(o.height||1);i.attr("transform","scale("+a+","+u+")");var c=this.rotatableNode,f=c&&c.attr("transform");if(f){c.attr("transform",f+" rotate("+-r+","+n.width/2+","+n.height/2+")");var h=i.getBBox({target:this.paper.cells});t.set("position",{x:h.x,y:h.y},$t({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){const t=e.model||this.model,n=(e.paper||this.paper).model,i=e.initialZIndices={},s=t.getEmbeddedCells({deep:!0}),o=n.getConnectedLinks(t,{deep:!0,includeEnclosed:!0});[t,...s,...o].forEach(c=>i[c.id]=c.attributes.z),t.startBatch("to-front"),t.toFront({deep:!0,ui:!0});const a=n.getElements().reduce((c,f)=>Math.max(c,f.attributes.z||0),0);o.forEach(c=>{c.attributes.z<=a&&c.set("z",a+1,{ui:!0})}),t.stopBatch("to-front");const u=t.parent();u?(n.getCell(u).unembed(t,{ui:!0}),e.initialParentId=u):e.initialParentId=null},processEmbedding:function(e={},t,r,n){const i=e.model||this.model,s=e.paper||this.paper,o=s.model,{findParentBy:a,frontParentOnly:u,validateEmbedding:c}=s.options;let f;fn(a)?f=Fr(a.call(o,this,t,r,n)):a==="pointer"?f=Fr(o.findModelsFromPoint({x:r,y:n})):f=o.findModelsUnderElement(i,{searchBy:a}),f=f.filter(y=>y instanceof ca&&i.id!==y.id&&!y.isEmbeddedIn(i)),u&&(f=f.slice(-1));let h=null;const v=e.candidateEmbedView;for(let y=f.length-1;y>=0;y--){const m=f[y];if(v&&v.model.id==m.id){h=v;break}else{const _=m.findView(s);if(!fn(c)||c.call(s,this,_)){h=_;break}}}h&&h!=v&&(this.clearEmbedding(e),e.candidateEmbedView=h.highlight(h.findProxyNode(null,"container"),{embedding:!0})),!h&&v&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var t=e.candidateEmbedView;t&&(t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){const t=e.candidateEmbedView,r=e.model||this.model,n=e.paper||this.paper;if(t)t.model.embed(r,{ui:!0}),t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{const{validateUnembedding:i}=n.options,{initialParentId:s}=e;if(s&&typeof i=="function"&&!i.call(n,this)){this._disallowUnembed(e);return}}n.model.getConnectedLinks(r,{deep:!0}).forEach(i=>{i.reparent({ui:!0})})},_disallowUnembed:function(e){const{model:t,whenNotAllowed:r="revert"}=e,n=t||this.model,s=(e.paper||this.paper).model;switch(r){case"remove":{n.remove({ui:!0});break}case"revert":{const{initialParentId:o,initialPosition:a,initialZIndices:u}=e;if(a){const{x:f,y:h}=a;n.position(f,h,{deep:!0,ui:!0})}u&&Object.keys(u).forEach(f=>{const h=s.getCell(f);h&&h.set("z",u[f],{ui:!0})});const c=s.getCell(o);c&&c.embed(n,{ui:!0});break}}},getDelegatedView:function(){for(var e=this,t=e.model,r=e.paper;e&&!t.isLink();){if(!t.isEmbedded()||e.can("stopDelegation"))return e;t=t.getParentCell(),e=r.findViewByModel(t)}return null},findProxyNode:function(e,t){e||(e=this.el);const r=e.getAttribute(`${t}-selector`);if(r){const n=this.findAttribute("port",e);if(n){const i=this.findPortNode(n,r);if(i)return i}else{const[i]=this.findBySelector(r);if(i)return i}}return e},notifyPointerdown(e,t,r){wr.prototype.pointerdown.call(this,e,t,r),this.notify("element:pointerdown",e,t,r)},notifyPointermove(e,t,r){wr.prototype.pointermove.call(this,e,t,r),this.notify("element:pointermove",e,t,r)},notifyPointerup(e,t,r){this.notify("element:pointerup",e,t,r),wr.prototype.pointerup.call(this,e,t,r)},pointerdblclick:function(e,t,r){wr.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,t,r)},pointerclick:function(e,t,r){wr.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,t,r)},contextmenu:function(e,t,r){wr.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,t,r)},pointerdown:function(e,t,r){this.notifyPointerdown(e,t,r),this.dragStart(e,t,r)},pointermove:function(e,t,r){const n=this.eventData(e),{targetMagnet:i,action:s,delegatedView:o}=n;switch(i&&this.magnetpointermove(e,i,t,r),s){case Jc.MAGNET:this.dragMagnet(e,t,r);break;case Jc.MOVE:(o||this).drag(e,t,r);default:if(n.preventPointerEvents)break;this.notifyPointermove(e,t,r);break}this.eventData(e,n)},pointerup:function(e,t,r){const n=this.eventData(e),{targetMagnet:i,action:s,delegatedView:o}=n;switch(i&&this.magnetpointerup(e,i,t,r),s){case Jc.MAGNET:this.dragMagnetEnd(e,t,r);break;case Jc.MOVE:(o||this).dragEnd(e,t,r);default:if(n.preventPointerEvents)break;this.notifyPointerup(e,t,r)}i&&this.magnetpointerclick(e,i,t,r),this.checkMouseleave(e)},mouseover:function(e){wr.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){wr.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){wr.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){wr.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,t,r,n){wr.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,t,r,n)},onmagnet:function(e,t,r){const{currentTarget:n}=e;this.magnetpointerdown(e,n,t,r),this.eventData(e,{targetMagnet:n}),this.dragMagnetStart(e,t,r)},magnetpointerdown:function(e,t,r,n){this.notify("element:magnet:pointerdown",e,t,r,n)},magnetpointermove:function(e,t,r,n){this.notify("element:magnet:pointermove",e,t,r,n)},magnetpointerup:function(e,t,r,n){this.notify("element:magnet:pointerup",e,t,r,n)},magnetpointerdblclick:function(e,t,r,n){this.notify("element:magnet:pointerdblclick",e,t,r,n)},magnetcontextmenu:function(e,t,r,n){this.notify("element:magnet:contextmenu",e,t,r,n)},dragStart:function(e,t,r){if(this.isDefaultInteractionPrevented(e))return;var n=this.getDelegatedView();if(!n||!n.can("elementMove"))return;this.eventData(e,{action:Jc.MOVE,delegatedView:n});const i=n.model.position();n.eventData(e,{initialPosition:i,pointerOffset:i.difference(t,r),restrictedArea:this.paper.getRestrictedArea(n,t,r)})},dragMagnetStart:function(e,t,r){const{paper:n}=this,i=e.isPropagationStopped();if(i&&this.eventData(e,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(e)||!this.can("addLinkFromMagnet"))return;const{targetMagnet:s=e.currentTarget}=this.eventData(e);if(e.stopPropagation(),!n.options.validateMagnet.call(n,this,s,e)){i?this.dragStart(e,t,r):this.pointerdown(e,t,r);return}n.options.magnetThreshold<=0&&this.dragLinkStart(e,s,t,r),this.eventData(e,{action:Jc.MAGNET})},drag:function(e,t,r){var n=this.paper,i=n.options.gridSize,s=this.model,o=this.eventData(e),{pointerOffset:a,restrictedArea:u,embedding:c}=o,f=oc(t+a.x,i),h=oc(r+a.y,i);s.position(f,h,{restrictedArea:u,deep:!0,ui:!0}),n.options.embeddingMode&&(c||(this.prepareEmbedding(o),c=!0),this.processEmbedding(o,e,t,r)),this.eventData(e,{embedding:c})},dragMagnet:function(e,t,r){this.dragLink(e,t,r)},dragEnd:function(e,t,r){var n=this.eventData(e);n.embedding&&this.finalizeEmbedding(n)},dragMagnetEnd:function(e,t,r){this.dragLinkEnd(e,t,r)},magnetpointerclick:function(e,t,r,n){var i=this.paper;i.eventData(e).mousemoved>i.options.clickThreshold||this.notify("element:magnet:pointerclick",e,t,r,n)}},{Flags:Dr});$t(_i.prototype,Mhe);const Dhe=function(e,t,r){return e},Fhe=function(e,t,r){var n=t.side||"bottom",i=cc(t.padding||40),s=r.sourceBBox,o=r.targetBBox,a=s.center(),u=o.center(),c,f,h;switch(n){case"bottom":h=1,c="y",f="height";break;case"top":h=-1,c="y",f="height";break;case"left":h=-1,c="x",f="width";break;case"right":h=1,c="x",f="width";break;default:throw new Error("Router: invalid side")}return a[c]+=h*(s[f]/2+i[n]),u[c]+=h*(o[f]/2+i[n]),h*(a[c]-u[c])>0?u[c]=a[c]:a[c]=u[c],[a].concat(e,u)};var Bhe={N:"S",S:"N",E:"W",W:"E"},zhe={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function Bp(e,t,r){var n=new pe(e.x,t.y);return r.containsPoint(n)&&(n=new pe(t.x,e.y)),n}function hE(e,t){return e[t==="W"||t==="E"?"width":"height"]}function Xi(e,t){return e.x===t.x?e.y>t.y?"N":"S":e.y===t.y?e.x>t.x?"W":"E":null}function ip(e){return new vt(e.x,e.y,0,0)}function zp(e){var t=cc(e.padding||e.elementPadding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function KU(e,t){return e.sourceBBox.clone().moveAndExpand(zp(t))}function ZU(e,t){return e.targetBBox.clone().moveAndExpand(zp(t))}function Vhe(e,t){if(e.sourceAnchor)return e.sourceAnchor;var r=KU(e,t);return r.center()}function Ghe(e,t){if(e.targetAnchor)return e.targetAnchor;var r=ZU(e,t);return r.center()}function JU(e,t,r){var n=new pe(e.x,t.y),i=new pe(t.x,e.y),s=Xi(e,n),o=Xi(e,i),a=Bhe[r],u=s===r||s!==a&&(o===a||o!==r)?n:i;return{points:[u],direction:Xi(u,t)}}function vp(e,t,r){var n=Bp(e,t,r);return{points:[n],direction:Xi(n,t)}}function $he(e,t,r,n){var i={},s=[new pe(e.x,t.y),new pe(t.x,e.y)],o=s.filter(function(h){return!r.containsPoint(h)}),a=o.filter(function(h){return Xi(h,e)!==n}),u;if(a.length>0)u=a.filter(function(h){return Xi(e,h)===n}).pop(),u=u||a[0],i.points=[u],i.direction=Xi(u,t);else{u=$fe(s,o)[0];var c=new pe(t).move(u,-hE(r,n)/2),f=Bp(c,e,r);i.points=[f,c],i.direction=Xi(c,t)}return i}function Uhe(e,t,r,n){var i=vp(t,e,n),s=i.points[0];if(r.containsPoint(s)){i=vp(e,t,r);var o=i.points[0];if(n.containsPoint(o)){var a=new pe(e).move(o,-hE(r,Xi(e,o))/2),u=new pe(t).move(s,-hE(n,Xi(t,s))/2),c=new bt(a,u).midpoint(),f=vp(e,c,r),h=JU(c,t,f.direction);i.points=[f.points[0],h.points[0]],i.direction=h.direction}}return i}function PS(e,t,r,n,i){var s={},o=r.union(n).inflate(1),a=o.center().distance(t)>o.center().distance(e),u=a?t:e,c=a?e:t,f,h,v;return i?(f=pe.fromPolar(o.width+o.height,zhe[i],u),f=o.pointNearestToPoint(f).move(f,-1)):f=o.pointNearestToPoint(u).move(u,1),h=Bp(f,c,o),f.round().equals(h.round())?(h=pe.fromPolar(o.width+o.height,vs(f.theta(u))+Math.PI/2,c),h=o.pointNearestToPoint(h).move(c,1).round(),v=Bp(f,h,o),s.points=a?[h,v,f]:[f,v,h]):s.points=a?[h,f]:[f,h],s.direction=Xi(a?f:h,t),s}function dE(e,t,r){var n=KU(r,t),i=ZU(r,t),s=Vhe(r,t),o=Ghe(r,t);n=n.union(ip(s)),i=i.union(ip(o)),e=Fr(e).map(pe),e.unshift(s),e.push(o);for(var a,u=[],c=0,f=e.length-1;c<f;c++){var h=null,v=e[c],y=e[c+1],m=!!Xi(v,y);if(c===0)c+1===f?n.intersect(i.clone().inflate(1))?h=PS(v,y,n,i):m||(h=Uhe(v,y,n,i)):n.containsPoint(y)?h=PS(v,y,n,ip(y).moveAndExpand(zp(t))):m||(h=vp(v,y,n));else if(c+1===f){var _=m&&Xi(y,v)===a;i.containsPoint(v)||_?h=PS(v,y,ip(v).moveAndExpand(zp(t)),i,a):m||(h=$he(v,y,i,a))}else m||(h=JU(v,y,a));h?(Array.prototype.push.apply(u,h.points),a=h.direction):a=Xi(v,y),c+1<f&&u.push(y)}return u}var QU={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,t=this.cost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:-e,offsetY:0,cost:t},{offsetX:0,offsetY:e,cost:t},{offsetX:0,offsetY:-e,cost:t}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,t,r){if(!fn(dE))throw new Error("Manhattan requires the orthogonal router as default fallback.");return dE(e,$t({},QU,t),r)},fallbackRoute:function(e,t,r){return null},draggingRoute:null};function jA(e){this.map={},this.options=e,this.mapGridSize=100}jA.prototype.build=function(e,t){var r=this.options,n=Fr(r.excludeEnds).reduce(function(u,c){var f=t.get(c);if(f){var h=e.getCell(f.id);h&&u.push(h)}return u},[]),i=[],s=e.getCell(t.get("source").id);s&&(i=oE(i,s.getAncestors().map(function(u){return u.id})));var o=e.getCell(t.get("target").id);o&&(i=oE(i,o.getAncestors().map(function(u){return u.id})));var a=this.mapGridSize;return e.getElements().reduce(function(u,c){var f=Fr(r.excludeTypes).includes(c.get("type")),h=n.find(function(T){return T.id===c.id}),v=i.includes(c.id),y=f||h||v;if(!y)for(var m=c.getBBox().moveAndExpand(r.paddingBox),_=m.origin().snapToGrid(a),w=m.corner().snapToGrid(a),S=_.x;S<=w.x;S+=a)for(var E=_.y;E<=w.y;E+=a){var A=S+"@"+E;u[A]=u[A]||[],u[A].push(m)}return u},this.map),this};jA.prototype.isPointAccessible=function(e){var t=e.clone().snapToGrid(this.mapGridSize).toString();return Fr(this.map[t]).every(function(r){return!r.containsPoint(e)})};function Rc(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}Rc.prototype.add=function(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=t;var r=NU(this.items,e,(function(n){return this.values[n]}).bind(this));this.items.splice(r,0,e)};Rc.prototype.remove=function(e){this.hash[e]=this.CLOSE};Rc.prototype.isOpen=function(e){return this.hash[e]===this.OPEN};Rc.prototype.isClose=function(e){return this.hash[e]===this.CLOSE};Rc.prototype.isEmpty=function(){return this.items.length===0};Rc.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};function ej(e,t){return t&&t.paddingBox?e.sourceBBox.clone().moveAndExpand(t.paddingBox):e.sourceBBox.clone()}function tj(e,t){return t&&t.paddingBox?e.targetBBox.clone().moveAndExpand(t.paddingBox):e.targetBBox.clone()}function rj(e,t){if(e.sourceAnchor)return e.sourceAnchor;var r=ej(e,t);return r.center()}function jhe(e,t){if(e.targetAnchor)return e.targetAnchor;var r=tj(e,t);return r.center()}function CS(e,t,r,n,i){var s=360/r,o=e.theta(Hhe(e,t,n,i)),a=Oo(o+s/2);return s*Math.floor(a/s)}function Hhe(e,t,r,n){var i=n.step,s=t.x-e.x,o=t.y-e.y,a=s/r.x,u=o/r.y,c=a*i,f=u*i;return new pe(e.x+c,e.y+f)}function S5(e,t){var r=Math.abs(e-t);return r>180?360-r:r}function Whe(e,t,r){var n=r.step;Fr(r.directions).forEach(function(i){i.gridOffsetX=i.offsetX/n*t.x,i.gridOffsetY=i.offsetY/n*t.y})}function Xhe(e,t,r){return{source:t.clone(),x:E5(r.x-t.x,e),y:E5(r.y-t.y,e)}}function E5(e,t){if(!e)return t;var r=Math.abs(e),n=Math.round(r/t);if(!n)return r;var i=n*t,s=r-i,o=s/n;return t+o}function Yhe(e,t){var r=t.source,n=oc(e.x-r.x,t.x)+r.x,i=oc(e.y-r.y,t.y)+r.y;return new pe(n,i)}function Bf(e,t){return e.round(t)}function mp(e,t,r){return Bf(Yhe(e.clone(),t),r)}function Xf(e){return e.clone().toString()}function RS(e){return new pe(e.x===0?0:Math.abs(e.x)/e.x,e.y===0?0:Math.abs(e.y)/e.y)}function Khe(e,t,r,n,i,s,o){for(var a=[],u=RS(i.difference(r)),c=Xf(r),f=e[c],h;f;){h=t[c];var v=RS(h.difference(f));v.equals(u)||(a.unshift(h),u=v),c=Xf(f),f=e[c]}var y=t[c],m=RS(y.difference(n));return m.equals(u)||a.unshift(y),a}function A5(e,t){for(var r=1/0,n=0,i=t.length;n<i;n++){var s=e.manhattanDistance(t[n]);s<r&&(r=s)}return r}function T5(e,t,r,n,i){var s=i.precision,o=i.directionMap,a=e.difference(t.center()),u=Wr(o)?Object.keys(o):[],c=Fr(r),f=u.reduce(function(h,v){if(c.includes(v)){for(var y=o[v],m=new pe(e.x+y.x*(Math.abs(a.x)+t.width),e.y+y.y*(Math.abs(a.y)+t.height)),_=new bt(e,m),w=_.intersect(t)||[],S=w.length,E,A=null,T=0;T<S;T++){var I=w[T],q=e.squaredDistance(I);(E===void 0||q>E)&&(E=q,A=I)}if(A){var p=mp(A,n,s);t.containsPoint(p)&&(p=mp(p.offset(y.x*n.x,y.y*n.y),n,s)),h.push(p)}}return h},[]);return t.containsPoint(e)||f.push(mp(e,n,s)),f}function Zhe(e,t,r,n){var i=n.precision,s,o;e instanceof vt?s=Bf(rj(this,n).clone(),i):s=Bf(e.clone(),i),t instanceof vt?o=Bf(jhe(this,n).clone(),i):o=Bf(t.clone(),i);var a=Xhe(n.step,s,o),u,c,f,h;if(e instanceof vt?(u=s,f=T5(u,e,n.startDirections,a,n)):(u=s,f=[u]),t instanceof vt?(c=o,h=T5(o,t,n.endDirections,a,n)):(c=o,h=[c]),f=f.filter(Re=>!r(Re)),h=h.filter(Re=>!r(Re)),f.length>0&&h.length>0){for(var v=new Rc,y={},m={},_={},w=0,S=f.length;w<S;w++){var E=f[w],A=Xf(E);v.add(A,A5(E,h)),y[A]=E,_[A]=0}var T=n.previousDirectionAngle,I=T===void 0,q,p,C=n.directions;Whe(C,a,n);for(var O=C.length,N=Fr(h).reduce(function(Re,rt){var Ve=Xf(rt);return Re.push(Ve),Re},[]),V=n.maximumLoops;!v.isEmpty()&&V>0;){var W=v.pop(),G=y[W],ee=m[W],ae=_[W],K=ee===void 0,U=G.equals(u),j;K?I?U?j=null:j=CS(u,G,O,a,n):j=T:j=CS(ee,G,O,a,n);var J=f.length===h.length;if(J){for(var de=0;de<f.length;de++)if(!f[de].equals(h[de])){J=!1;break}}var ce=K&&J;if(!ce&&N.indexOf(W)>=0)return n.previousDirectionAngle=j,Khe(m,y,G,u,c);for(w=0;w<O;w++){q=C[w];var Te=q.angle;if(p=S5(j,Te),!(!(I&&U)&&p>n.maxAllowedDirectionChange)){var Se=mp(G.clone().offset(q.gridOffsetX,q.gridOffsetY),a,i),re=Xf(Se);if(!(v.isClose(re)||r(Se))){if(N.indexOf(re)>=0){var oe=Se.equals(c);if(!oe){var ne=CS(Se,c,O,a,n),te=S5(Te,ne);if(te>n.maxAllowedDirectionChange)continue}}var le=q.cost,We=U?0:n.penalties[p],Ne=ae+le+We;(!v.isOpen(re)||Ne<_[re])&&(y[re]=Se,m[re]=G,_[re]=Ne,v.add(re,Ne+A5(Se,h)))}}}V--}}return n.fallbackRoute.call(this,u,c,n)}function Jhe(e){if(e.directions=Zn(e,"directions"),e.penalties=Zn(e,"penalties"),e.paddingBox=Zn(e,"paddingBox"),e.padding=Zn(e,"padding"),e.padding){var t=cc(e.padding);e.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}Fr(e.directions).forEach(function(r){var n=new pe(0,0),i=new pe(r.offsetX,r.offsetY);r.angle=Oo(n.theta(i))})}function Qhe(e,t,r){Jhe(t),r.options.perpendicular=!!t.perpendicular;var n=ej(r,t),i=tj(r,t),s=rj(r,t);let o;if(typeof t.isPointObstacle=="function")o=t.isPointObstacle;else{const A=new jA(t);A.build(r.paper.model,r.model),o=T=>!A.isPointAccessible(T)}for(var a=Fr(e).map(pe),u=[],c=s,f,h,v=0,y=a.length;v<=y;v++){var m=null;if(h=f||n,f=a[v],!f){f=i;var _=!r.model.get("source").id||!r.model.get("target").id;if(_&&fn(t.draggingRoute)){var w=h===n?s:h,S=f.origin();m=t.draggingRoute.call(r,w,S,t)}}if(m=m||Zhe.call(r,h,f,o,t),m===null)return t.fallbackRouter(e,t,r);var E=m[0];E&&E.equals(c)&&m.shift(),c=m[m.length-1]||c,Array.prototype.push.apply(u,m)}return u}const pE=function(e,t,r){return Qhe(e,$t({},QU,t),r)};var ede={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,t=this.cost(),r=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:e,offsetY:e,cost:r},{offsetX:0,offsetY:e,cost:t},{offsetX:-e,offsetY:e,cost:r},{offsetX:-e,offsetY:0,cost:t},{offsetX:-e,offsetY:-e,cost:r},{offsetX:0,offsetY:-e,cost:t},{offsetX:e,offsetY:-e,cost:r}]},fallbackRoute:function(e,t,r){var n=e.theta(t),i=[],s={x:t.x,y:e.y},o={x:e.x,y:t.y};if(n%180>90){var a=s;s=o,o=a}var u=n%90<45?s:o,c=new bt(e,u),f=90*Math.ceil(n/90),h=pe.fromPolar(c.squaredLength(),vs(f+135),u),v=new bt(t,h),y=c.intersection(v),m=y||t,_=y?m:e,w=360/r.directions.length,S=_.theta(t),E=Oo(S+w/2),A=w*Math.floor(E/w);return r.previousDirectionAngle=A,m&&i.push(m.round()),i.push(t),i}};const tde=function(e,t,r){if(!fn(pE))throw new Error("Metro requires the manhattan router.");return pE(e,$t({},ede,t),r)},st={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},P5=[st.LEFT,st.RIGHT,st.TOP,st.BOTTOM],al={[st.LEFT]:st.RIGHT,[st.RIGHT]:st.LEFT,[st.TOP]:st.BOTTOM,[st.BOTTOM]:st.TOP},rde=[st.TOP,st.BOTTOM],sp={0:st.RIGHT,180:st.LEFT,270:st.TOP,90:st.BOTTOM};function zf(e){return e.angle()}function op(e){return new dn(e).simplify({threshold:1}).points}function Vp(e,t){const{point:r,x0:n,y0:i,view:s,bbox:o,direction:a}=e,{point:u,x0:c,y0:f,view:h,bbox:v,direction:y}=t;let m;if(s)s.model.isLink()?m=C5(u,r,s):a===st.ANCHOR_SIDE?m=o.sideNearestToPoint(r):a===st.MAGNET_SIDE?m=s.model.getBBox().sideNearestToPoint(r):m=a;else{const w=new vt(n,i,0,0);m=P5.includes(a)?a:w.sideNearestToPoint(u)}let _;if(h)h.model.isLink()?_=C5(r,u,h):y===st.ANCHOR_SIDE?_=v.sideNearestToPoint(u):y===st.MAGNET_SIDE?_=h.model.getBBox().sideNearestToPoint(u):_=y;else{const w=new vt(c,f,0,0);_=P5.includes(y)?y:w.sideNearestToPoint(r)}return[m,_]}function nde(e,t,r){const{x0:n,y0:i,width:s,height:o,point:a,margin:u}=e,c=n+s,f=i+o,h=n-u,v=c+u,y=i-u,{x:m}=a,{x0:_,y0:w}=t;return _===m&&w<i?st.BOTTOM:_<m&&w<y?st.RIGHT:_>m&&w<y?st.LEFT:_<h&&w>=i||_>v&&w>=i?st.TOP:_>=h&&_<=m&&w>f||_<=v&&_>=m&&w>f?r.point.x<_?st.RIGHT:st.LEFT:st.TOP}function ide(e,t,r){const{x0:n,y0:i,width:s,height:o,point:a,margin:u}=e,c=n+s,f=i+o,h=n-u,v=c+u,y=f+u,{x:m}=a,{x0:_,y0:w}=t;return _===m&&w>f?st.TOP:_<m&&w>y?st.RIGHT:_>m&&w>y?st.LEFT:_<h&&w<=f||_>v&&w<=f?st.BOTTOM:_>=h&&_<=m&&w<i||_<=v&&_>=m&&w<i?r.point.x<_?st.RIGHT:st.LEFT:st.BOTTOM}function sde(e,t,r){const{y0:n,x0:i,width:s,height:o,point:a,margin:u}=e,c=i+s,f=n+o,h=i-u,v=n-u,y=f+u,{x:m,y:_}=a,{x0:w,y0:S}=t;return w<m&&S===_?st.RIGHT:w<=h&&S<_?st.BOTTOM:w<=h&&S>_?st.TOP:w>=i&&S<=v||w>=i&&S>=y?st.LEFT:w>c&&S>=v&&S<=_||w>c&&S<=y&&S>=_?r.point.y<S?st.BOTTOM:st.TOP:st.LEFT}function ode(e,t,r){const{y0:n,x0:i,width:s,height:o,point:a,margin:u}=e,c=i+s,f=n+o,h=c+u,v=n-u,y=f+u,{x:m,y:_}=a,{x0:w,y0:S}=t;return w>m&&S===_?st.LEFT:w>=h&&S<_?st.BOTTOM:w>=h&&S>_?st.TOP:w<=c&&S<=v||w<=c&&S>=y?st.RIGHT:w<i&&S>=v&&S<=_||w<i&&S<=y&&S>=_?r.point.y<S?st.BOTTOM:st.TOP:st.RIGHT}function ade(e,t,r){const[n]=Vp(e,t);switch(n){case st.TOP:return nde(e,t,r);case st.RIGHT:return ode(e,t,r);case st.BOTTOM:return ide(e,t,r);case st.LEFT:return sde(e,t,r)}}function C5(e,t,r){const n=r.getTangentAtLength(r.getClosestPointLength(t)),i=Math.round(zf(n)/90)*90;if(i%180===0&&e.y===t.y)return e.x<t.x?st.LEFT:st.RIGHT;if(e.x===t.x)return e.y<t.y?st.TOP:st.BOTTOM;switch(i){case 0:case 180:case 360:return e.y<t.y?st.TOP:st.BOTTOM;case 90:case 270:return e.x<t.x?st.LEFT:st.RIGHT}}function R5(e,t,r,n,i,s,o){n===st.AUTO&&(n=i?st.MAGNET_SIDE:st.ANCHOR_SIDE);const a=e&&e.model.isElement(),{x:u,y:c,width:f=0,height:h=0}=a?vt.fromRectUnion(r,e.model.getBBox()):s;return{point:t,x0:u,y0:c,view:e,bbox:r,width:f,height:h,direction:n,margin:a?o:0}}function IS({x:e,y:t}){const r=new pe(e,t);return{point:r,x0:r.x,y0:r.y,view:null,bbox:new vt(e,t,0,0),width:0,height:0,direction:null,margin:0}}function I5(e,t,r){const n=t.point.clone(),{x0:i,y0:s,width:o,height:a}=t;switch(e){case"left":n.x=i-r;break;case"right":n.x=i+o+r;break;case"top":n.y=s-r;break;case"bottom":n.y=s+a+r;break}return n}function cu(e,t){const{point:r,x0:n,y0:i,view:s,width:o,height:a,margin:u}=e,{point:c,x0:f,y0:h,width:v,height:y,margin:m}=t,_=f+v,w=h+y,S=n+o,E=i+a,A=s&&s.model.isElement(),T=n-u,I=S+u,q=i-u,p=E+u,C=f-m,O=_+m,N=h-m,V=w+m,[W,G]=Vp(e,t),ee=I5(W,{point:r,x0:n,y0:i,width:o,height:a},u),ae=I5(G,{point:c,x0:f,y0:h,width:v,height:y},m),{x:K,y:U}=ee,{x:j,y:J}=ae,de=(f+_)/2,ce=(h+w)/2,Te=(n+S)/2,Se=(i+E)/2,re=(Te<de?S+f:_+n)/2,oe=(Se<ce?E+h:w+i)/2;if(W==="left"&&G==="right"){if(T<=O){let te=oe;return S<=f&&(w>=q&&J<U?te=Math.min(N,q):h<=p&&J>=U&&(te=Math.max(V,p))),[{x:K,y:U},{x:K,y:te},{x:j,y:te},{x:j,y:J}]}const ne=(K+j)/2;return[{x:ne,y:U},{x:ne,y:J}]}else if(W==="right"&&G==="left"){if(I>=C){let te=oe;return K>_&&(w>=q&&J<U?te=Math.min(N,q):h<=p&&J>=U&&(te=Math.max(V,p))),[{x:K,y:U},{x:K,y:te},{x:j,y:te},{x:j,y:J}]}const ne=(K+j)/2;return[{x:ne,y:U},{x:ne,y:J}]}else if(W==="top"&&G==="bottom"){if(U<J){let te=re,le=U;return U<h&&(_>=T&&j<K?te=Math.min(C,T):f<=I&&j>=K&&(te=Math.max(O,I))),[{x:K,y:le},{x:te,y:le},{x:te,y:J},{x:j,y:J}]}const ne=(U+J)/2;return[{x:K,y:ne},{x:j,y:ne}]}else if(W==="bottom"&&G==="top"){if(U-u>J){let te=re,le=U;return U>w&&(_>=T&&j<K?te=Math.min(C,T):f<=I&&j>=K&&(te=Math.max(O,I))),[{x:K,y:le},{x:te,y:le},{x:te,y:J},{x:j,y:J}]}const ne=(U+J)/2;return[{x:K,y:ne},{x:j,y:ne}]}else if(W==="top"&&G==="top"){let ne,te=Math.min((E+h)/2,J),le=Math.min((i+w)/2,U);if(J<U){if(K>=O||K<=C)return[{x:K,y:Math.min(U,J)},{x:j,y:Math.min(U,J)}];j>K?ne=Math.min(K,C):ne=Math.max(K,O)}else{if(j>=I||j<=T)return[{x:K,y:Math.min(U,J)},{x:j,y:Math.min(U,J)}];j>=K?ne=Math.max(j,I):ne=Math.min(j,T)}return[{x:K,y:le},{x:ne,y:le},{x:ne,y:te},{x:j,y:te}]}else if(W==="bottom"&&G==="bottom"){let ne,te=Math.max((i+w)/2,J),le=Math.max((E+h)/2,U);if(J>U){if(K>=O||K<=C)return[{x:K,y:Math.max(U,J)},{x:j,y:Math.max(U,J)}];j>K?ne=Math.min(K,C):ne=Math.max(K,O)}else{if(j>=I||j<=T)return[{x:K,y:Math.max(U,J)},{x:j,y:Math.max(U,J)}];j>=K?ne=Math.max(j,I):ne=Math.min(j,T)}return[{x:K,y:le},{x:ne,y:le},{x:ne,y:te},{x:j,y:te}]}else if(W==="left"&&G==="left"){let ne,te=Math.min((S+f)/2,j),le=Math.min((n+_)/2,K);return j>K?J<=U?ne=Math.min(q,J):ne=Math.max(p,J):J>=U?ne=Math.min(N,U):ne=Math.max(V,U),[{x:le,y:U},{x:le,y:ne},{x:te,y:ne},{x:te,y:J}]}else if(W==="right"&&G==="right"){let ne,te=Math.max((n+_)/2,j),le=Math.max((S+f)/2,K);return j<K?J<=U?ne=Math.min(q,J):ne=Math.max(p,J):J>=U?ne=Math.min(N,U):ne=Math.max(V,U),[{x:le,y:U},{x:le,y:ne},{x:te,y:ne},{x:te,y:J}]}else if(W==="top"&&G==="right"){if(U>J){if(K<j){let te=oe;return(te>ce||!A)&&te<V&&K<f&&(te=N),[{x:K,y:te},{x:j,y:te},{x:j,y:J}]}return[{x:K,y:J}]}const ne=Math.max(re,O);if(j<K&&J>i&&J<E)return[{x:K,y:U},{x:ne,y:U},{x:ne,y:J}];if(ne>T&&J>i||f>S){const te=Math.min(i-u,h-m),le=Math.max(S+u,_+m);return[{x:K,y:te},{x:le,y:te},{x:le,y:J}]}return[{x:K,y:U},{x:Math.max(ne,j),y:U},{x:Math.max(ne,j),y:J}]}else if(W==="top"&&G==="left"){if(U>J){if(K>j){let te=oe;return(te>ce||!A)&&te<V&&K>_&&(te=N),[{x:K,y:te},{x:j,y:te},{x:j,y:J}]}return[{x:K,y:J}]}const ne=Math.min(C,re);if(K<j&&E>=J)return[{x:K,y:U},{x:ne,y:U},{x:ne,y:J}];if(ne<I&&U<w){const te=Math.min(q,N),le=Math.min(T,C);return[{x:K,y:te},{x:le,y:te},{x:le,y:J}]}return[{x:K,y:U},{x:ne,y:U},{x:ne,y:J}]}else if(W==="bottom"&&G==="right"){if(U<J){if(K<j){let te=oe;return(te<ce||!A)&&te>N&&K<f&&(te=V),[{x:K,y:te},{x:j,y:te},{x:j,y:J}]}return[{x:K,y:J}]}else if(n<j){const te=Math.max(p,V),le=Math.max(I,O);return[{x:K,y:te},{x:le,y:te},{x:le,y:J}]}const ne=re;return[{x:K,y:U},{x:ne,y:U},{x:ne,y:J}]}else if(W==="bottom"&&G==="left"){if(U<J){if(K>j){let te=oe;return(te<ce||!A)&&te>N&&K>_&&(te=V),[{x:K,y:te},{x:j,y:te},{x:j,y:J}]}return[{x:K,y:J}]}else if(S>j){const te=Math.max(p,V),le=Math.min(T,C);return[{x:K,y:te},{x:le,y:te},{x:le,y:J}]}const ne=re;return[{x:K,y:U},{x:ne,y:U},{x:ne,y:J}]}else if(W==="left"&&G==="bottom"){if(K>=j&&U>=V)return[{x:j,y:U}];if(K>=_&&U<J){const le=re;return[{x:le,y:U},{x:le,y:J},{x:j,y:J}]}if(j<S&&w<=i){const le=oe;return[{x:K,y:U},{x:K,y:le},{x:j,y:le}]}const ne=Math.min(C,K),te=Math.max(p,V);return[{x:ne,y:U},{x:ne,y:te},{x:j,y:te}]}else if(W==="left"&&G==="top"){if(K>j&&U<N)return[{x:j,y:U}];if(K>=_&&U>J){const le=re;return[{x:le,y:U},{x:le,y:J},{x:j,y:J}]}if(j<=S&&J>U){const le=oe;return[{x:K,y:U},{x:K,y:le},{x:j,y:le}]}const ne=J<U?Math.min(T,C):T,te=Math.min(q,N);return[{x:ne,y:U},{x:ne,y:te},{x:j,y:te}]}else if(W==="right"&&G==="top"){if(K<=j&&U<N)return[{x:j,y:U}];if(S<f&&U>J){let le=re;return[{x:le,y:U},{x:le,y:J},{x:j,y:J}]}if(j<K&&h>E){const le=oe;return[{x:K,y:U},{x:K,y:le},{x:j,y:le}]}const ne=Math.max(I,O),te=Math.min(q,N);return[{x:ne,y:U},{x:ne,y:te},{x:j,y:te}]}else if(W==="right"&&G==="bottom"){if(K<=j&&U>=V)return[{x:j,y:U}];if(K<=C&&U<J){const le=re;return[{x:le,y:U},{x:le,y:J},{x:j,y:J}]}if(j>n&&w<i){const le=oe;return[{x:K,y:U},{x:K,y:le},{x:j,y:le}]}const ne=Math.max(O,K),te=Math.max(p,V);return[{x:ne,y:U},{x:ne,y:te},{x:j,y:te}]}}function nj(e,t,r){const{sourceDirection:n=st.AUTO,targetDirection:i=st.AUTO}=t,s=t.margin||20,o=t.useVertices||!1,a=!!r.model.source().port,u=R5(r.sourceView,r.sourceAnchor,r.sourceBBox,n,a,r.sourceAnchor,s),c=!!r.model.target().port,f=R5(r.targetView,r.targetAnchor,r.targetBBox,i,c,r.targetAnchor,s);let h=[];if(!o||e.length===0)return op(cu(u,f));const v=e.map(_=>IS(_)),[y]=v;if(u.view&&u.view.model.isElement()&&u.view.model.getBBox().inflate(s).containsPoint(y.point)){const[_]=Vp(u,y),w=_,S=IS(u.point);S.margin=s,S.direction=_,y.direction=w,h.push(...cu(S,y),y.point)}else{const _=v[1]||f,w=ade(u,y,_);y.direction=w,h.push(...cu(u,y),y.point)}for(let _=0;_<v.length-1;_++){const w=v[_],S=v[_+1],E=new bt(w.point,S.point),A=zf(E);if(A%90===0){const q=sp[A],p=al[q];if(q!==w.direction)h.push(w.point,S.point),S.direction=p;else{const C=Oo(A-90);let O=0,N=0;C===90?N=-s:C===180?O=-s:C===270?N=s:C===0&&(O=s);const V={x:w.point.x+O,y:w.point.y+N},W={x:S.point.x+O,y:S.point.y+N},G=new bt(S.point,W);S.direction=sp[zf(G)],h.push(w.point,V,W,S.point)}continue}const[T,I]=OS(w,S);w.direction=T,S.direction=I,h.push(...cu(w,S),S.point)}const m=v[v.length-1];if(f.view&&f.view.model.isElement())if(f.view.model.getBBox().inflate(s).containsPoint(m.point)){const[_]=OS(m,f),w=IS(f.point),[,S]=Vp(m,f);w.margin=s,w.direction=S,m.direction=_,h.push(...cu(m,w))}else{const _=op(h),w=new bt(_[_.length-2],m.point),S=sp[Math.round(zf(w))];m.direction=S;let E=cu(m,f);const[A,T]=op([...E,f.point]),I=new bt(A,T),q=Math.round(zf(I)),p=sp[q];p!==S&&S===al[p]&&(m.margin=s,E=cu(m,f)),h.push(...E)}else{const[_]=OS(m,f);m.direction=_,h.push(...cu(m,f))}return op(h)}function OS(e,t){const r=e.direction,n=rde.includes(r);let i=e.direction,s=t.direction;if(n){const o=e.point.y>t.point.y,a=t.point.x-e.point.x;r===st.BOTTOM?(i=o?al[r]:a>=0?st.RIGHT:st.LEFT,a>0?s=o?st.LEFT:st.TOP:a<0&&(s=o?st.RIGHT:st.TOP)):(i=o?a>=0?st.RIGHT:st.LEFT:al[r],a>0?s=o?st.BOTTOM:st.LEFT:a<0&&(s=o?st.BOTTOM:st.RIGHT))}else{const o=e.point.x>t.point.x,a=t.point.y-e.point.y;r===st.RIGHT?(i=o?al[r]:a>=0?st.BOTTOM:st.TOP,a>0?s=o?st.TOP:st.LEFT:a<0&&(s=o?st.BOTTOM:st.LEFT)):(i=o?a>=0?st.BOTTOM:st.TOP:al[r],a>0?s=o?st.RIGHT:st.TOP:a<0&&(s=o?st.RIGHT:st.BOTTOM))}return[i,s]}nj.Directions=st;const ude=nj,cde=Object.freeze(Object.defineProperty({__proto__:null,manhattan:pE,metro:tde,normal:Dhe,oneSide:Fhe,orthogonal:dE,rightAngle:ude},Symbol.toStringTag,{value:"Module"})),tl={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},lde=Object.values(tl),fde=10,hde=1,HA=function(e,t,r=[],n={}){const{cornerType:i=tl.POINT,cornerRadius:s=fde,cornerPreserveAspectRatio:o=!1,precision:a=hde,raw:u=!1}=n;if(lde.indexOf(i)===-1)throw new Error("Invalid `cornerType` provided to `straight` connector.");let c;if(i===tl.POINT||!s){const f=[e].concat(r).concat([t]),h=new dn(f);c=new Nt(h)}else{c=new Nt,c.appendSegment(Nt.createSegment("M",e));let f;const h=r.length;for(let v=0;v<h;v++){const y=new pe(r[v]),m=r[v-1]||e,_=r[v+1]||t,w=f||y.distance(m)/2;f=y.distance(_)/2;let S,E;o?S=E=-Math.min(s,w,f):(S=-Math.min(s,w),E=-Math.min(s,f));const A=y.clone().move(m,S).round(a),T=y.clone().move(_,E).round(a);switch(c.appendSegment(Nt.createSegment("L",A)),i){case tl.CUBIC:{const I=.3333333333333333,q=2/3,p=new pe(I*A.x+q*y.x,q*y.y+I*A.y),C=new pe(I*T.x+q*y.x,q*y.y+I*T.y);c.appendSegment(Nt.createSegment("C",p,C,T));break}case tl.LINE:{c.appendSegment(Nt.createSegment("L",T));break}case tl.GAP:{c.appendSegment(Nt.createSegment("M",T));break}}}c.appendSegment(Nt.createSegment("L",t))}return u?c:c.serialize()};var dde=5,O5=["arc","gap","cubic"],pde=0,M5=1,gde=["smooth"],ap=1/3,up=2/3;function k5(e,t){let{x:r,y:n}=e,{x:i,y:s}=t;if(r>i){let o=r;r=i,i=o,o=n,n=s,s=o}if(n>s){let o=r;r=i,i=o,o=n,n=s,s=o}return[new pe(r,n),new pe(i,s)]}function vde(e,t){const[{x:r,y:n},{x:i,y:s}]=k5(e.start,e.end),[{x:o,y:a},{x:u,y:c}]=k5(t.start,t.end),f=r<=u&&o<=i,h=n<=c&&a<=s;return f&&h}function MS(e,t,r){var n=[].concat(e,r,t);return n.reduce(function(i,s,o){var a=n[o+1];return a!=null&&(i[o]=tc(s,a)),i},[])}function mde(e){var t=e.paper,r=t._jumpOverUpdateList;if(r==null){r=t._jumpOverUpdateList=[];var n=t.model;n.on("batch:stop",function(){this.hasActiveBatch()||yde(t)}),n.on("reset",function(){r=t._jumpOverUpdateList=[]})}r.indexOf(e)<0&&(r.push(e),e.listenToOnce(e.model,"change:connector remove",function(){r.splice(r.indexOf(e),1)}))}function yde(e){for(var t=e._jumpOverUpdateList,r=0;r<t.length;r++){const n=t[r],i=n.getFlag(n.constructor.Flags.CONNECTOR);n.requestUpdate(i)}}function _de(e,t){return Fr(t).reduce(function(r,n){var i=e.intersection(n);return i&&r.push(i),r},[])}function L5(e,t){return tc(e,t).squaredLength()}function bde(e,t,r){return t.reduce(function(n,i,s){if(i.skip===!0)return n;var o=n.pop()||e,a=Op(i).move(o.start,-r),u=Op(i).move(o.start,+r),c=t[s+1];if(c!=null){var f=u.distance(c);f<=r&&(u=c.move(o.start,f),c.skip=!0)}else{var h=a.distance(o.end);if(h<r*2+M5)return n.push(o),n}var v=u.distance(o.start);if(v<r*2+M5)return n.push(o),n;var y=tc(a,u);return y.isJump=!0,n.push(tc(o.start,a),y,tc(u,o.end)),n},[])}function N5(e,t,r,n){var i=new Nt,s;return s=Nt.createSegment("M",e[0].start),i.appendSegment(s),Fr(e).forEach(function(o,a){if(o.isJump){var u,c,f,h;if(r==="arc"){u=-90,c=o.start.difference(o.end);var v=+(c.x<0||c.x===0&&c.y<0);v&&(u+=180);var y=o.midpoint(),m=new bt(y,o.end).rotate(y,u),_;_=new bt(o.start,y),f=_.pointAt(2/3).rotate(o.start,u),h=m.pointAt(1/3).rotate(m.end,-u),s=Nt.createSegment("C",f,h,m.end),i.appendSegment(s),_=new bt(y,o.end),f=m.pointAt(1/3).rotate(m.end,u),h=_.pointAt(1/3).rotate(o.end,-u),s=Nt.createSegment("C",f,h,o.end),i.appendSegment(s)}else if(r==="gap")s=Nt.createSegment("M",o.end),i.appendSegment(s);else if(r==="cubic"){u=o.start.theta(o.end);var w=t*.6,S=t*1.35;c=o.start.difference(o.end),v=+(c.x<0||c.x===0&&c.y<0),v&&(S*=-1),f=pe(o.start.x+w,o.start.y+S).rotate(o.start,u),h=pe(o.end.x-w,o.end.y+S).rotate(o.end,u),s=Nt.createSegment("C",f,h,o.end),i.appendSegment(s)}}else{var E=e[a+1];n==0||!E||E.isJump?(s=Nt.createSegment("L",o.end),i.appendSegment(s)):wde(n,i,o.end,o.start,E.end)}}),i}function wde(e,t,r,n,i){var s=r.distance(n)/2,o=r.distance(i)/2,a=-Math.min(e,s),u=-Math.min(e,o),c=r.clone().move(n,a).round(),f=r.clone().move(i,u).round(),h=new pe(ap*c.x+up*r.x,up*r.y+ap*c.y),v=new pe(ap*f.x+up*r.x,up*r.y+ap*f.y),y;y=Nt.createSegment("L",c),t.appendSegment(y),y=Nt.createSegment("C",h,v,f),t.appendSegment(y)}const xde=function(e,t,r,n){mde(this);var i=n.raw,s=n.size||dde,o=n.jump&&(""+n.jump).toLowerCase(),a=n.radius||pde,u=n.ignoreConnectors||gde;O5.indexOf(o)===-1&&(o=O5[0]);var c=this.paper,f=c.model,h=f.getLinks();if(h.length===1)return N5(MS(e,t,r),s,o,a);var v=this.model,y=h.indexOf(v),m=c.options.defaultConnector||{},_=h.filter(function(I,q){var p=I.get("connector")||m;return Fr(u).includes(p.name)?!1:q>y?p.name!=="jumpover":!0}),w=_.map(function(I){return c.findViewByModel(I)}),S=MS(e,t,r),E=w.map(function(I){return I==null?[]:I===this?S:MS(I.sourcePoint,I.targetPoint,I.route)},this),A=S.reduce(function(I,q){var p=_.reduce(function(C,O,N){if(O!==v){const V=E[N].slice(),W=V.findIndex(ee=>vde(q,ee));W>-1&&q.containsPoint(V[W].end)&&V.splice(W+1,1);const G=_de(q,V);C.push.apply(C,G)}return C},[]).sort(function(C,O){return L5(q.start,C)-L5(q.start,O)});return p.length>0?I.push.apply(I,bde(q,p,s)):I.push(q),I},[]),T=N5(A,s,o,a);return i?T:T.serialize()},Sde=function(e,t,r=[],n={}){const{raw:i}=n;return HA(e,t,r,{cornerType:"point",raw:i})},Ede=10,Ade=0,Tde=function(e,t,r=[],n={}){const{radius:i=Ede,raw:s}=n;return HA(e,t,r,{cornerType:"cubic",cornerRadius:i,precision:Ade,raw:s})},Pde=function(e,t,r,n){var i=n&&n.raw,s;if(r&&r.length!==0){var o=[e].concat(r).concat([t]),a=Kr.throughPoints(o);s=new Nt(a)}else{s=new Nt;var u;if(u=Nt.createSegment("M",e),s.appendSegment(u),Math.abs(e.x-t.x)>=Math.abs(e.y-t.y)){var c=(e.x+t.x)/2;u=Nt.createSegment("C",c,e.y,c,t.y,t.x,t.y),s.appendSegment(u)}else{var f=(e.y+t.y)/2;u=Nt.createSegment("C",e.x,f,t.x,f,t.x,t.y),s.appendSegment(u)}}return i?s:s.serialize()},to={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Hi={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},WA=function(e,t,r=[],n={},i){const s=!!n.raw,{direction:o=to.AUTO,precision:a=3}=n,u={coeff:n.distanceCoefficient||.6,angleTangentCoefficient:n.angleTangentCoefficient||80,tau:n.tension||.5,sourceTangent:n.sourceTangent?new pe(n.sourceTangent):null,targetTangent:n.targetTangent?new pe(n.targetTangent):null,rotate:!!n.rotate};typeof n.sourceDirection=="string"?u.sourceDirection=n.sourceDirection:typeof n.sourceDirection=="number"?u.sourceDirection=new pe(1,0).rotate(null,n.sourceDirection):u.sourceDirection=n.sourceDirection?new pe(n.sourceDirection).normalize():null,typeof n.targetDirection=="string"?u.targetDirection=n.targetDirection:typeof n.targetDirection=="number"?u.targetDirection=new pe(1,0).rotate(null,n.targetDirection):u.targetDirection=n.targetDirection?new pe(n.targetDirection).normalize():null;const c=[e,...r,t].map(_=>new pe(_));let f;if(u.sourceTangent)f=u.sourceTangent;else{const _=Mde(i,c,o,u),w=c[0].distance(c[1])*u.coeff,S=c[1].difference(c[0]).normalize(),E=gE(_,S);if(E>Math.PI/4){const A=w+(E-Math.PI/4)*u.angleTangentCoefficient;f=_.clone().scale(A,A)}else f=_.clone().scale(w,w)}let h;if(u.targetTangent)h=u.targetTangent;else{const _=kde(i,c,o,u),w=c.length-1,S=c[w-1].distance(c[w])*u.coeff,E=c[w-1].difference(c[w]).normalize(),A=gE(_,E);if(A>Math.PI/4){const T=S+(A-Math.PI/4)*u.angleTangentCoefficient;h=_.clone().scale(T,T)}else h=_.clone().scale(S,S)}const y=Nde(c,f,h,u).map(_=>qde(_,u)),m=new Nt(y).round(a);return s?m:m.serialize()};WA.Directions=to;WA.TangentDirections=Hi;function Cde(e,t,r){const{sourceBBox:n}=e;let i,s;if(!e.sourceView)n.x>t[1].x?i="right":i="left";else if(s=e.sourceView.model.angle(),r.rotate&&s){const a=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),u=t[0].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[0]);let o;switch(i){case"left":o=new pe(-1,0);break;case"right":default:o=new pe(1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function Rde(e,t,r){const{targetBBox:n}=e;let i,s;if(!e.targetView)n.x>t[t.length-2].x?i="left":i="right";else if(s=e.targetView.model.angle(),r.rotate&&s){const a=e.targetView.getNodeUnrotatedBBox(e.targetView.el),u=t[t.length-1].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[t.length-1]);let o;switch(i){case"left":o=new pe(-1,0);break;case"right":default:o=new pe(1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function Ide(e,t,r){const{sourceBBox:n}=e;let i,s;if(!e.sourceView)n.y>t[1].y?i="bottom":i="top";else if(s=e.sourceView.model.angle(),r.rotate&&s){const a=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),u=t[0].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[0]);let o;switch(i){case"top":o=new pe(0,-1);break;case"bottom":default:o=new pe(0,1);break}return r.rotate&&s&&o.rotate(null,-s),o}function Ode(e,t,r){const{targetBBox:n}=e;let i,s;if(!e.targetView)n.y>t[t.length-2].y?i="top":i="bottom";else if(s=e.targetView.model.angle(),r.rotate&&s){const a=e.targetView.getNodeUnrotatedBBox(e.targetView.el),u=t[t.length-1].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[t.length-1]);let o;switch(i){case"top":o=new pe(0,-1);break;case"bottom":default:o=new pe(0,1);break}return r.rotate&&s&&o.rotate(null,-s),o}function q5(e,t,r){const{sourceBBox:n}=e;let i,s;if(!e.sourceView)i=n.sideNearestToPoint(t[1]);else if(s=e.sourceView.model.angle(),r.rotate&&s){const a=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),u=t[0].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[0]);let o;switch(i){case"top":o=new pe(0,-1);break;case"bottom":o=new pe(0,1);break;case"right":o=new pe(1,0);break;case"left":o=new pe(-1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function D5(e,t,r){const{targetBBox:n}=e;let i,s;if(!e.targetView)i=n.sideNearestToPoint(t[t.length-2]);else if(s=e.targetView.model.angle(),r.rotate&&s){const a=e.targetView.getNodeUnrotatedBBox(e.targetView.el),u=t[t.length-1].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[t.length-1]);let o;switch(i){case"top":o=new pe(0,-1);break;case"bottom":o=new pe(0,1);break;case"right":o=new pe(1,0);break;case"left":o=new pe(-1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function F5(e,t,r){return t[1].difference(t[0]).normalize()}function B5(e,t,r){const n=t.length-1;return t[n-1].difference(t[n]).normalize()}function z5(e,t,r){const{sourceBBox:n}=e,i=n.center();return t[0].difference(i).normalize()}function V5(e,t,r){const{targetBBox:n}=e,i=n.center();return t[t.length-1].difference(i).normalize()}function Mde(e,t,r,n){if(n.sourceDirection)switch(n.sourceDirection){case Hi.UP:return new pe(0,-1);case Hi.DOWN:return new pe(0,1);case Hi.LEFT:return new pe(-1,0);case Hi.RIGHT:return new pe(1,0);case Hi.AUTO:return q5(e,t,n);case Hi.CLOSEST_POINT:return F5(e,t);case Hi.OUTWARDS:return z5(e,t);default:return n.sourceDirection}switch(r){case to.HORIZONTAL:return Cde(e,t,n);case to.VERTICAL:return Ide(e,t,n);case to.CLOSEST_POINT:return F5(e,t);case to.OUTWARDS:return z5(e,t);case to.AUTO:default:return q5(e,t,n)}}function kde(e,t,r,n){if(n.targetDirection)switch(n.targetDirection){case Hi.UP:return new pe(0,-1);case Hi.DOWN:return new pe(0,1);case Hi.LEFT:return new pe(-1,0);case Hi.RIGHT:return new pe(1,0);case Hi.AUTO:return D5(e,t,n);case Hi.CLOSEST_POINT:return B5(e,t);case Hi.OUTWARDS:return V5(e,t);default:return n.targetDirection}switch(r){case to.HORIZONTAL:return Rde(e,t,n);case to.VERTICAL:return Ode(e,t,n);case to.CLOSEST_POINT:return B5(e,t);case to.OUTWARDS:return V5(e,t);case to.AUTO:default:return D5(e,t,n)}}function Lde(e,t){const r=Math.cos(t),n=Math.sin(t),i=r*e.x-n*e.y,s=n*e.x+r*e.y;e.x=i,e.y=s}function gE(e,t){let r=e.dot(t)/(e.magnitude()*t.magnitude());return r<-1&&(r=-1),r>1&&(r=1),Math.acos(r)}function G5(e,t){return e.x*t.y-e.y*t.x}function Nde(e,t,r,n){const{tau:i,coeff:s}=n,o=[],a=[],u=[],c=e.length-1;for(let f=0;f<c;f++)o[f]=e[f].distance(e[f+1]);a[0]=t,a[c]=r;for(let f=1;f<c;f++){let h,v;f===1?h=e[f-1].clone().offset(a[f-1].x,a[f-1].y):h=e[f-1].clone(),f===c-1?v=e[f+1].clone().offset(a[f+1].x,a[f+1].y):v=e[f+1].clone();const y=h.difference(e[f]).normalize(),m=v.difference(e[f]).normalize(),_=gE(y,m);let w=(Math.PI-_)/2,S;const E=G5(y,m);let A;A=G5(e[f].difference(e[f+1]),e[f].difference(e[f-1])),E<0&&(w=-w),_<Math.PI/2&&(w<0&&A<0||w>0&&A>0)&&(w=w-Math.PI),S=m.clone(),Lde(S,w);const T=S.clone(),I=S.clone(),q=o[f-1]*s,p=o[f]*s;T.scale(q,q),I.scale(p,p),a[f]=[T,I]}for(let f=0;f<c;f++){let h,v;f===0?h=e[f+1].difference(a[f].x/i,a[f].y/i):h=e[f+1].difference(a[f][1].x/i,a[f][1].y/i),f===c-1?v=e[f].clone().offset(a[f+1].x/i,a[f+1].y/i):v=e[f].difference(a[f+1][0].x/i,a[f+1][0].y/i),u[f]=[h,e[f],e[f+1],v]}return u}function qde(e,t){const{tau:r}=t,n=new pe;n.x=e[1].x+(e[2].x-e[0].x)/(6*r),n.y=e[1].y+(e[2].y-e[0].y)/(6*r);const i=new pe;return i.x=e[2].x+(e[3].x-e[1].x)/(6*r),i.y=e[2].y+(e[3].y-e[1].y)/(6*r),new Kr(e[1],n,i,e[2])}const Dde=Object.freeze(Object.defineProperty({__proto__:null,curve:WA,jumpover:xde,normal:Sde,rounded:Tde,smooth:Pde,straight:HA},Symbol.toStringTag,{value:"Module"})),er={TOOLS:wr.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Ui=wr.extend({className:function(){var e=wr.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){wr.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[er.RENDER],attrs:[er.UPDATE],router:[er.UPDATE],connector:[er.CONNECTOR],smooth:[er.UPDATE],manhattan:[er.UPDATE],toolMarkup:[er.LEGACY_TOOLS],labels:[er.LABELS],labelMarkup:[er.LABELS],vertices:[er.VERTICES,er.UPDATE],vertexMarkup:[er.VERTICES],source:[er.SOURCE,er.UPDATE],target:[er.TARGET,er.UPDATE]},initFlag:[er.RENDER,er.SOURCE,er.TARGET,er.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(e,t){if(t||(t={}),this.hasFlag(e,er.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,er.SOURCE)}if(this.hasFlag(e,er.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,er.TARGET)}const{paper:r,sourceView:n,targetView:i}=this;if(r&&(n&&!r.isViewMounted(n)||i&&!r.isViewMounted(i)))return e;if(this.hasFlag(e,er.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(t),e=this.removeFlag(e,[er.RENDER,er.UPDATE,er.VERTICES,er.LABELS,er.TOOLS,er.LEGACY_TOOLS,er.CONNECTOR]),e;let s=!1;this.hasFlag(e,er.VERTICES)&&(this.renderVertexMarkers(),e=this.removeFlag(e,er.VERTICES));const{model:o}=this,{attributes:a}=o;let u=this.hasFlag(e,er.LABELS),c=this.hasFlag(e,er.LEGACY_TOOLS);u&&(this.onLabelsChange(o,a.labels,t),e=this.removeFlag(e,er.LABELS),s=!0),c&&(this.renderTools(),e=this.removeFlag(e,er.LEGACY_TOOLS));const f=this.hasFlag(e,er.UPDATE),h=this.hasFlag(e,er.CONNECTOR);return(f||h)&&(f?t.translateBy&&o.isRelationshipEmbeddedIn(t.translateBy)?this.translate(t.tx,t.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(t),e=this.removeFlag(e,[er.UPDATE,er.TOOLS,er.CONNECTOR]),u=!1,c=!1,s=!0),u&&this.updateLabelPositions(),c&&this.updateToolsPosition(),s&&this.updateHighlighters(),this.hasFlag(e,er.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,er.TOOLS)),e},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(er.UPDATE),e)},isLabelsRenderRequired:function(e={}){const t=this.model.previous("labels");if(!t)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var r=e.propertyPathArray||[],n=r.length;if(n>1){var i=!!t[r[1]];if(i){if(n===2)return"markup"in Object(e.propertyValue);if(r[2]!=="markup")return!1}}}return!0},onLabelsChange:function(e,t,r){this.isLabelsRenderRequired(r)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.LinkView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if(typeof t=="string")return this.renderStringMarkup(t);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el);this.selectors=t.selectors,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=$e(e);Array.isArray(t)||(t=[t]);for(var r=this._V,n=0,i=t.length;n<i;n++){var s=t[n],o=s.attr("class");o&&(o=Xfe(o),r[It.camelCase(o)]=s)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(t)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if(typeof e=="string")return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var t=$e(e),r=document.createDocumentFragment();if(!Array.isArray(t))r.appendChild(t.node);else for(var n=0,i=t.length;n<i;n++){var s=t[n].node;r.appendChild(s)}return{fragment:r,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var t=e.fragment;if(!(e.fragment instanceof DocumentFragment)||!e.fragment.hasChildNodes())throw new Error("dia.LinkView: invalid label markup.");var r,n=t.childNodes;return n.length>1||n[0].nodeName.toUpperCase()!=="G"?r=$e("g").append(t):r=$e(n[0]),r.addClass("label"),{node:r.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,t=e.labels,r=this._labelCache={},n=this._labelSelectors={},i=this.model,s=i.attributes.labels||[],o=s.length;if(o===0)return t&&t.remove(),this;t?t.empty():(t=e.labels=$e("g").addClass("labels"),this.options.labelsLayer&&(t.addClass(So(Zn(this,"className"))),t.attr("model-id",i.id)));for(var a=0;a<o;a++){var u=s[a],c=this._normalizeLabelMarkup(this._getLabelMarkup(u.markup)),f,h;if(c)f=c.node,h=c.selectors;else{var v=i._builtins.defaultLabel,y=this._normalizeLabelMarkup(this._getLabelMarkup(v.markup)),m=i._getDefaultLabel(),_=this._normalizeLabelMarkup(this._getLabelMarkup(m.markup)),w=_||y;f=w.node,h=w.selectors}f.setAttribute("label-idx",a),t.append(f),r[a]=f;var S=this.selector;if(h[S])throw new Error("dia.LinkView: ambiguous label root selector.");h[S]=f,n[a]=h}return t.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:e,paper:t,model:r,_V:n,options:i}=this,{labels:s}=n;if(!s||!r.hasLabels())return;const{node:o}=s;i.labelsLayer?t.getLayerView(i.labelsLayer).insertSortedNode(o,r.get("z")):o.parentNode!==e&&e.appendChild(o)},unmountLabels:function(){const{options:e,_V:t}=this;if(!t)return;const{labels:r}=t;r&&e.labelsLayer&&r.remove()},findLabelNode:function(e,t){const r=this._labelCache[e];if(!r)return null;const n=this._labelSelectors[e],[i=null]=this.findBySelector(t,r,n);return i},_mergeLabelAttrs:function(e,t,r,n){return t===null?null:t===void 0?r===null?null:r===void 0?e?void 0:n:e?r:ti({},n,r):e?ti({},r,t):ti({},n,r,t)},_mergeLabelSize:function(e,t){return e===null?null:e===void 0?t===null?null:t===void 0?void 0:t:ti({},t,e)},updateLabels:function(){if(!this._V.labels)return this;for(var e=this.model,t=e.get("labels")||[],r=this.can("labelMove"),n=e._builtins.defaultLabel,i=n.attrs,s=e._getDefaultLabel(),o=s.markup,a=s.attrs,u=s.size,c=0,f=t.length;c<f;c++){var h=this._labelCache[c];h.setAttribute("cursor",r?"move":"default");var v=this._labelSelectors[c],y=t[c],m=y.markup,_=y.attrs,w=y.size,S=this._mergeLabelAttrs(m||o,_,a,i),E=this._mergeLabelSize(w,u);this.updateDOMSubtreeAttributes(h,S,{rootBBox:new vt(E),selectors:v})}return this},renderTools:function(){if(!this._V.linkTools)return this;var e=It(this._V.linkTools.node).empty(),t=$i(this.model.get("toolMarkup")||this.model.toolMarkup),r=$e(t());if(e.append(r.node),this._toolCache=r,this.options.doubleLinkTools){var n;this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(t=$i(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),n=$e(t())):n=r.clone(),e.append(n.node),this._tool2Cache=n}return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var e=It(this._V.markerVertices.node).empty(),t=$i(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(r,n){e.append($e(t($t({idx:n},r))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var e=It(this._V.markerArrowheads.node);e.empty();var t=$i(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=$e(t({end:"source"})),this._V.targetArrowhead=$e(t({end:"target"})),e.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(e){const r=this.model,n=r.vertices(),i=[this.sourceAnchor,...n,this.targetAnchor],s=i.length,o=new dn(i);o.simplify({threshold:.001});const a=o.points.map(c=>c.toJSON()),u=a.length;return s===u?0:(r.vertices(a.slice(1,u-1),e),s-u)},updateDefaultConnectionPath:function(){var e=this._V;e.connection&&e.connection.attr("d",this.getSerializedConnection()),e.connectionWrap&&e.connectionWrap.attr("d",this.getSerializedConnection()),e.markerSource&&e.markerTarget&&this._translateAndAutoOrientArrows(e.markerSource,e.markerTarget)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new pe(this.sourceAnchor);case"target":return new pe(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new pe(this.sourcePoint);case"target":return new pe(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var t=this.sourceView;if(!t)break;return this.sourceMagnet||t.el;case"target":var r=this.targetView;if(!r)break;return this.targetMagnet||r.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,t=0){const{route:r,path:n}=this;if(!r||!n)return;const i=new dn(r);i.translate(e,t),this.route=i.points,this._translateConnectionPoints(e,t),n.translate(e,t),this.updateDOM()},updateDOM(){const{el:e,model:t,selectors:r}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,t.attr(),{selectors:r}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:e}=this,t=e.vertices(),r=this.findAnchors(t),n=this.sourceAnchor=r.source,i=this.targetAnchor=r.target,s=this.findRoute(t);this.route=s;var o=this.findConnectionPoints(s,n,i);this.sourcePoint=o.source,this.targetPoint=o.target},updatePath:function(){const{route:e,sourcePoint:t,targetPoint:r}=this,n=this.findMarkerPoints(e,t,r),i=this.findPath(e,n.source||t,n.target||r);this.path=i},findMarkerPoints:function(e,t,r){var n=e[0],i=e[e.length-1],s=this._markerCache,o,a;return this._V.markerSource&&(s.sourceBBox=s.sourceBBox||this._V.markerSource.getBBox(),o=pe(t).move(n||r,s.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(s.targetBBox=s.targetBBox||this._V.markerTarget.getBBox(),a=pe(r).move(i||t,s.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),s.sourcePoint=o||t.clone(),s.targetPoint=a||r.clone(),{source:o,target:a}},findAnchorsOrdered:function(e,t,r,n){var i,s,o,a,u=this.model,c=u.get(e),f=u.get(r),h=this.getEndView(e),v=this.getEndView(r),y=this.getEndMagnet(e),m=this.getEndMagnet(r);h?(t?o=new pe(t):v?o=m:o=new pe(f),i=this.getAnchor(c.anchor,h,y,o,e)):i=new pe(c),v?(a=new pe(n||i),s=this.getAnchor(f.anchor,v,m,a,r)):s=new pe(f);var _={};return _[e]=i,_[r]=s,_},findAnchors:function(e){var t=this.model,r=e[0],n=e[e.length-1];return t.target().priority&&!t.source().priority?this.findAnchorsOrdered("target",n,"source",r):this.findAnchorsOrdered("source",r,"target",n)},findConnectionPoints:function(e,t,r){var n=e[0],i=e[e.length-1],s=this.model,o=s.get("source"),a=s.get("target"),u=this.sourceView,c=this.targetView,f=this.paper.options,h,v,y;if(u&&!u.isNodeConnection(this.sourceMagnet)){h=this.sourceMagnet||u.el;var m=o.connectionPoint||f.defaultConnectionPoint,_=n||r,w=new bt(_,t);y=this.getConnectionPoint(m,u,h,w,"source")}else y=t;var S;if(c&&!c.isNodeConnection(this.targetMagnet)){v=this.targetMagnet||c.el;var E=a.connectionPoint||f.defaultConnectionPoint,A=i||t,T=new bt(A,r);S=this.getConnectionPoint(E,c,v,T,"target")}else S=r;return{source:y,target:S}},getAnchor:function(e,t,r,n,i){var s=t.isNodeConnection(r),o=this.paper.options;if(e||(s?e=o.defaultLinkAnchor:o.perpendicularLinks||this.options.perpendicular?e={name:"perpendicular"}:e=o.defaultAnchor),!e)throw new Error("Anchor required.");var a;if(typeof e=="function")a=e;else{var u=e.name,c=s?"linkAnchorNamespace":"anchorNamespace";if(a=o[c][u],typeof a!="function")throw new Error("Unknown anchor: "+u)}var f=a.call(this,t,r,n,e.args||{},i,this);return f?f.round(this.decimalsRounding):new pe},getConnectionPoint:function(e,t,r,n,i){var s,o=n.end,a=this.paper.options;if(typeof a.linkConnectionPoint=="function"){var u=r===t.el?void 0:r;if(s=a.linkConnectionPoint(this,t,u,n.start,i),s)return s}if(!e)return o;var c;if(typeof e=="function")c=e;else{var f=e.name;if(c=a.connectionPointNamespace[f],typeof c!="function")throw new Error("Unknown connection point: "+f)}return s=c.call(this,n,t,r,e.args||{},i,this),s?s.round(this.decimalsRounding):o},_translateConnectionPoints:function(e,t){var r=this._markerCache;r.sourcePoint.offset(e,t),r.targetPoint.offset(e,t),this.sourcePoint.offset(e,t),this.targetPoint.offset(e,t),this.sourceAnchor.offset(e,t),this.targetAnchor.offset(e,t)},_getDefaultLabelPositionProperty:function(){var e=this.model,t=e._builtins.defaultLabel,r=t.position,n=e._getDefaultLabel(),i=this._normalizeLabelPosition(n.position);return ti({},r,i)},_normalizeLabelPosition:function(e){return typeof e=="number"?{distance:e,offset:null,angle:0,args:null}:e},_mergeLabelPositionProperty:function(e,t){return e===null?null:e===void 0?t===null?null:t:ti({},t,e)},updateLabelPositions:function(){if(!this._V.labels)return this;var e=this.path;if(!e)return this;var t=this.model,r=t.get("labels")||[];if(!r.length)return this;for(var n=this._getDefaultLabelPositionProperty(),i=0,s=r.length;i<s;i++){var o=this._labelCache[i];if(o){var a=r[i],u=this._normalizeLabelPosition(a.position),c=this._mergeLabelPositionProperty(u,n),f=this._getLabelTransformationMatrix(c);o.setAttribute("transform",$e.matrixToTransformString(f)),this._cleanLabelMatrices(i)}}return this},_cleanLabelMatrices:function(e){const{metrics:t,_labelSelectors:r}=this,n=r[e];if(n)for(let i in n){const{id:s}=n[i];s&&s in t&&delete t[s].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var e="",t=this.options.linkToolsOffset,r=this.getConnectionLength();if(!Number.isNaN(r)){r<this.options.shortLinkLength&&(e="scale(.5)",t/=2);var n=this.getPointAtLength(t);if(this._toolCache.attr("transform","translate("+n.x+", "+n.y+") "+e),this.options.doubleLinkTools&&r>=this.options.longLinkLength){var i=this.options.doubleLinkToolsOffset||t;n=this.getPointAtLength(r-i),this._tool2Cache.attr("transform","translate("+n.x+", "+n.y+") "+e),this._tool2Cache.attr("display","inline")}else this.options.doubleLinkTools&&this._tool2Cache.attr("display","none")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if(It.css(this._V.markerArrowheads.node,"display")==="none")return this;var e=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(e),this._V.targetArrowhead.scale(e),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(e){const{model:t,paper:r}=this,n=`${e}View`,i=t.get(e),s=i&&i.id;if(!s)return this[n]=null,this.updateEndMagnet(e),!0;const o=r.getModelById(s);if(!o)throw new Error("LinkView: invalid "+e+" cell.");const a=o.findView(r);return a?(this[n]=a,this.updateEndMagnet(e),!0):!1},updateEndMagnet:function(e){const t=`${e}Magnet`,r=this.getEndView(e);if(r){let n=r.getMagnetFromLinkEnd(this.model.get(e));n===r.el&&(n=null),this[t]=n}else this[t]=null},_translateAndAutoOrientArrows:function(e,t){var r=Fr(this.route);e&&e.translateAndAutoOrient(this.sourcePoint,r[0]||this.targetPoint,this.paper.cells),t&&t.translateAndAutoOrient(this.targetPoint,r[r.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionProperty:function(e){return this.model.label(e).position||{}},_getLabelPositionAngle:function(e){var t=this._getLabelPositionProperty(e);return t.angle||0},_getLabelPositionArgs:function(e){var t=this._getLabelPositionProperty(e);return t.args},_getDefaultLabelPositionArgs:function(){var e=this.model._getDefaultLabel(),t=e.position||{};return t.args},_mergeLabelPositionArgs:function(e,t){return e===null?null:e===void 0?t===null?null:t:ti({},t,e)},addLabel:function(e,t,r,n){var i,s,o=0,a;typeof e!="number"?(i=e.x,s=e.y,typeof t=="number"?(o=t,a=r):a=t):(i=e,s=t,typeof r=="number"?(o=r,a=n):a=r);var u=this._getDefaultLabelPositionArgs(),c=a,f=this._mergeLabelPositionArgs(c,u),h={position:this.getLabelPosition(i,s,o,f)},v=-1;return this.model.insertLabel(v,h,a),v},addVertex:function(e,t,r){var n=typeof e!="number",i=n?e.x:e,s=n?e.y:t,o=n?t:r,a={x:i,y:s},u=this.getVertexIndex(i,s);return this.model.insertVertex(u,a,o),u},sendToken:function(e,t,r){function n(h,v){return function(){h.remove(),typeof v=="function"&&v()}}var i,s,o;Wr(t)?(i=t.duration,s=t.direction==="reverse",o=t.connection):(i=t,s=!1,o=null),i=i||1e3;var a={dur:i+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};s&&(a.keyPoints="1;0",a.keyTimes="0;1");var u=$e(e),c;if(typeof o=="string")c=this.findBySelector(o,this.el,this.selectors)[0];else{var f=this._V;c=f.connection?f.connection.node:this.el.querySelector("path")}if(!(c instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");u.appendTo(this.paper.cells).animateAlongPath(a,c),setTimeout(n(u,r),i)},findRoute:function(e){e||(e=[]);var t=this.paper.options.routerNamespace||cde,r=this.model.router(),n=this.paper.options.defaultRouter;if(!r)if(n)r=n;else return e.map(pe);var i=fn(r)?r:t[r.name];if(!fn(i))throw new Error('dia.LinkView: unknown router: "'+r.name+'".');var s=r.args||{},o=i.call(this,e,s,this);return o||e.map(pe)},findPath:function(e,t,r){var n=this.paper.options.connectorNamespace||Dde,i=this.model.connector(),s=this.paper.options.defaultConnector;i||(i=s||{});var o=fn(i)?i:n[i.name];if(!fn(o))throw new Error('dia.LinkView: unknown connector: "'+i.name+'".');var a=Qo(i.args||{});a.raw=!0;var u=o.call(this,t,r,e,a,this);return typeof u=="string"&&(u=new Nt($e.normalizePathData(u))),u},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("data"))return t.data;var r=e.serialize();return t.data=r,r},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("segmentSubdivisions"))return t.segmentSubdivisions;var r=e.getSegmentSubdivisions();return t.segmentSubdivisions=r,r},getConnectionLength:function(){var e=this.path;if(!e)return 0;var t=this.metrics;if(t.hasOwnProperty("length"))return t.length;var r=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return t.length=r,r},getPointAtLength:function(e){var t=this.path;return t?t.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var t=this.path;return t?(Ai(e)&&(e=parseFloat(e)/100),t.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var t=this.path;return t?t.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var t=this.path;return t?t.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var t=this.path;return t?t.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var t=this.path;return t?t.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var t=this.path;return t?t.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,t,r,n){var i={},s=0,o;typeof r=="number"?(s=r,o=n):o=r,o&&(i.args=o);var a=!(o&&o.absoluteDistance),u=o&&o.absoluteDistance&&o.reverseDistance,c=o&&o.absoluteOffset,f=this.path,h={segmentSubdivisions:this.getConnectionSubdivisions()},v=new pe(e,t),y=f.closestPointT(v,h),m=f.lengthAtT(y,h);a&&(m=m/this.getConnectionLength()||0),u&&(m=-1*(this.getConnectionLength()-m)||1),i.distance=m;var _;c||(_=f.tangentAtT(y));var w;if(_)w=_.pointOffset(v);else{var S=f.pointAtT(y),E=v.difference(S);w={x:E.x,y:E.y}}return i.offset=w,i.angle=s,i},_getLabelTransformationMatrix:function(e){var t,r=0,n={};if(typeof e=="number")t=e;else if(typeof e.distance=="number")n=e.args||{},t=e.distance,r=e.angle||0;else throw new Error("dia.LinkView: invalid label position distance.");var i=t>0&&t<=1,s=0,o={x:0,y:0};if(e.offset){var a=e.offset;typeof a=="number"&&(s=a),a.x&&(o.x=a.x),a.y&&(o.y=a.y)}var u=o.x!==0||o.y!==0||s===0,c=n.keepGradient,f=n.ensureLegibility,h=this.path,v={segmentSubdivisions:this.getConnectionSubdivisions()},y=i?t*this.getConnectionLength():t,m=h.tangentAtLength(y,v),_,w=r;if(m){if(u)_=m.start.clone(),_.offset(o);else{var S=m.clone();S.rotate(m.start,-90),S.setLength(s),_=S.end}c&&(w=m.angle()+r,f&&(w=Oo((w+90)%180-90)))}else _=h.start.clone(),u&&_.offset(o);return $e.createSVGMatrix().translate(_.x,_.y).rotate(w)},getLabelCoordinates:function(e){var t=this._getLabelTransformationMatrix(e);return new pe(t.e,t.f)},getVertexIndex:function(e,t){for(var r=this.model,n=r.vertices(),i=this.getClosestPointLength(new pe(e,t)),s=0,o=n.length;s<o;s++){var a=n[s],u=this.getClosestPointLength(a);if(i<u)break}return s},notifyPointerdown(e,t,r){wr.prototype.pointerdown.call(this,e,t,r),this.notify("link:pointerdown",e,t,r)},notifyPointermove(e,t,r){wr.prototype.pointermove.call(this,e,t,r),this.notify("link:pointermove",e,t,r)},notifyPointerup(e,t,r){this.notify("link:pointerup",e,t,r),wr.prototype.pointerup.call(this,e,t,r)},pointerdblclick:function(e,t,r){wr.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,t,r)},pointerclick:function(e,t,r){wr.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,t,r)},contextmenu:function(e,t,r){wr.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,t,r)},pointerdown:function(e,t,r){this.notifyPointerdown(e,t,r);var n=e.target.getAttribute("class");switch(n){case"marker-vertex":this.dragVertexStart(e,t,r);return;case"marker-vertex-remove":case"marker-vertex-remove-area":this.dragVertexRemoveStart(e,t,r);return;case"marker-arrowhead":this.dragArrowheadStart(e,t,r);return;case"connection":case"connection-wrap":this.dragConnectionStart(e,t,r);return;case"marker-source":case"marker-target":return}this.dragStart(e,t,r)},pointermove:function(e,t,r){var n=this._dragData;n&&this.eventData(e,n);var i=this.eventData(e);switch(i.action){case"vertex-move":this.dragVertex(e,t,r);break;case"label-move":this.dragLabel(e,t,r);break;case"arrowhead-move":this.dragArrowhead(e,t,r);break;case"move":this.drag(e,t,r);break}n&&$t(n,this.eventData(e)),this.notifyPointermove(e,t,r)},pointerup:function(e,t,r){var n=this._dragData;n&&(this.eventData(e,n),this._dragData=null);var i=this.eventData(e);switch(i.action){case"vertex-move":this.dragVertexEnd(e,t,r);break;case"label-move":this.dragLabelEnd(e,t,r);break;case"arrowhead-move":this.dragArrowheadEnd(e,t,r);break;case"move":this.dragEnd(e,t,r)}this.notifyPointerup(e,t,r),this.checkMouseleave(e)},mouseover:function(e){wr.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){wr.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){wr.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){wr.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,t,r,n){wr.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,t,r,n)},onevent:function(e,t,r,n){var i=$e(e.target).findParentByClass("link-tool",this.el);if(i){if(e.stopPropagation(),this.can("useLinkTools"))if(t==="remove"){this.model.remove({ui:!0});return}else this.notify(t,e,r,n);this.notifyPointerdown(e,r,n),this.paper.delegateDragEvents(this,e.data)}else wr.prototype.onevent.apply(this,arguments)},onlabel:function(e,t,r){this.notifyPointerdown(e,t,r),this.dragLabelStart(e,t,r);var n=this.eventData(e).stopPropagation;n&&e.stopPropagation()},dragConnectionStart:function(e,t,r){if(this.can("vertexAdd")){var n=this.addVertex({x:t,y:r},{ui:!0});this.eventData(e,{action:"vertex-move",vertexIdx:n})}},dragLabelStart:function(e,t,r){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(e))return;var n=e.currentTarget,i=parseInt(n.getAttribute("label-idx"),10),s=this._getDefaultLabelPositionProperty(),o=this._normalizeLabelPosition(this._getLabelPositionProperty(i)),a=this._mergeLabelPositionProperty(o,s),u=this.getLabelCoordinates(a),c=u.x-t,f=u.y-r,h=this._getLabelPositionAngle(i),v=this._getLabelPositionArgs(i),y=this._getDefaultLabelPositionArgs(),m=this._mergeLabelPositionArgs(v,y);this.eventData(e,{action:"label-move",labelIdx:i,dx:c,dy:f,positionAngle:h,positionArgs:m,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragVertexStart:function(e,t,r){if(this.can("vertexMove")){var n=e.target,i=parseInt(n.getAttribute("idx"),10);this.eventData(e,{action:"vertex-move",vertexIdx:i})}},dragVertexRemoveStart:function(e,t,r){if(this.can("vertexRemove")){var n=e.target,i=parseInt(n.getAttribute("idx"),10);this.model.removeVertex(i)}},dragArrowheadStart:function(e,t,r){if(this.can("arrowheadMove")){var n=e.target,i=n.getAttribute("end"),s=this.startArrowheadMove(i,{ignoreBackwardsCompatibility:!0});this.eventData(e,s)}},dragStart:function(e,t,r){this.isDefaultInteractionPrevented(e)||this.can("linkMove")&&this.eventData(e,{action:"move",dx:t,dy:r})},dragLabel:function(e,t,r){var n=this.eventData(e),i={position:this.getLabelPosition(t+n.dx,r+n.dy,n.positionAngle,n.positionArgs)};this.paper.options.snapLabels&&delete i.position.offset;const s={ui:!0};this.paper.isAsync()&&e.type==="touchmove"&&(s.async=!1),this.model.label(n.labelIdx,i,s)},dragVertex:function(e,t,r){var n=this.eventData(e);this.model.vertex(n.vertexIdx,{x:t,y:r},{ui:!0})},dragArrowhead:function(e,t,r){this.paper.options.snapLinks?!this._snapArrowhead(e,t,r)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(e,t,r):this.paper.options.snapLinksSelf?this._snapArrowheadSelf(e,t,r):this._connectArrowhead(this.getEventTarget(e),t,r,this.eventData(e))},drag:function(e,t,r){var n=this.eventData(e);this.model.translate(t-n.dx,r-n.dy,{ui:!0}),this.eventData(e,{dx:t,dy:r})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(e,t,r){var n=this.eventData(e),i=this.paper;i.options.snapLinks?this._snapArrowheadEnd(n):this._connectArrowheadEnd(n,t,r),i.linkAllowed(this)?(this._finishEmbedding(n),this._notifyConnectEvent(n,e)):this._disallow(n),this._afterArrowheadMove(n)},dragEnd:function(){},_disallow:function(e){switch(e.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(e.arrowhead,e.initialEnd,{ui:!0});break}},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,t){var r=e.arrowhead,n=e.initialEnd,i=this.model.prop(r),s=i&&!Wl.endsEqual(n,i);if(s){var o=this.paper;n.id&&this.notify("link:disconnect",t,o.findViewByModel(n.id),e.initialMagnet,r),i.id&&this.notify("link:connect",t,o.findViewByModel(i.id),e.magnetUnderPointer,r)}},_snapToPoints:function(e,t,r){let n=null,i=1/0,s=null,o=1/0,a=e.x,u=e.y;for(let c=0;c<t.length;c++){const f=Math.abs(t[c].x-e.x);f<i&&(i=f,n=t[c]);const h=Math.abs(t[c].y-e.y);h<o&&(o=h,s=t[c])}return i<r&&(a=n.x),o<r&&(u=s.y),{x:a,y:u}},_snapArrowheadSelf:function(e,t,r){const{paper:n,model:i}=this,{snapLinksSelf:s}=n.options,o=this.eventData(e),a=s.radius||20,u=this.getEndAnchor(o.arrowhead==="source"?"target":"source"),c=i.vertices(),f=[u,...c],h=this._snapToPoints({x:t,y:r},f,a),v=n.localToClientPoint(h);this._connectArrowhead(document.elementFromPoint(v.x,v.y),h.x,h.y,this.eventData(e))},_snapArrowhead:function(e,t,r){const{paper:n}=this,{snapLinks:i,connectionStrategy:s}=n.options,o=this.eventData(e);let a=!1;var u=i.radius||50,c=n.findViewsInArea({x:t-u,y:r-u,width:2*u,height:2*u}),f=o.closestView||null,h=o.closestMagnet||null,v=o.magnetProxy||null;o.closestView=o.closestMagnet=o.magnetProxy=null;var y=Number.MAX_VALUE,m=new pe(t,r);c.forEach(function(I){const q=[];I.el.getAttribute("magnet")!=="false"&&q.push({bbox:I.model.getBBox(),magnet:I.el}),I.$("[magnet]").toArray().forEach(p=>{q.push({bbox:I.getNodeBBox(p),magnet:p})}),q.forEach(p=>{const{magnet:C,bbox:O}=p,N=O.center().squaredDistance(m);N<y&&(h===C||n.options.validateConnection.apply(n,o.validateConnectionArgs(I,I.el===C?null:C)))&&(y=N,o.closestView=I,o.closestMagnet=C)})},this);var _,w=null,S=o.closestView,E=o.closestMagnet;E&&(w=o.magnetProxy=S.findProxyNode(E,"highlighter"));var A=o.arrowhead,T=h!==E;if(f&&T&&f.unhighlight(v,{connecting:!0,snapping:!0}),S){const{prevEnd:I,prevX:q,prevY:p}=o;if(o.prevX=t,o.prevY=r,a=!0,!T&&(typeof s!="function"||q===t&&p===r)||(_=S.getLinkEnd(E,t,r,this.model,A),!T&&sl(I,_)))return a;o.prevEnd=_,T&&S.highlight(w,{connecting:!0,snapping:!0})}else _={x:t,y:r};return this.model.set(A,_||{x:t,y:r},{ui:!0}),f&&this.notify("link:snap:disconnect",e,f,h,A),S&&this.notify("link:snap:connect",e,S,E,A),a},_snapArrowheadEnd:function(e){var t=e.closestView,r=e.closestMagnet;t&&r&&(t.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=t.findMagnet(r)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,t,r,n){const{paper:i,model:s}=this;if(n.eventTarget!==e){n.magnetProxy&&n.viewUnderPointer.unhighlight(n.magnetProxy,{connecting:!0});const o=n.viewUnderPointer=i.findView(e);if(o){const a=n.magnetUnderPointer=o.findMagnet(e),u=n.magnetProxy=o.findProxyNode(a,"highlighter");a&&this.paper.options.validateConnection.apply(i,n.validateConnectionArgs(o,a))?u&&o.highlight(u,{connecting:!0}):(n.magnetUnderPointer=null,n.magnetProxy=null)}else n.magnetUnderPointer=null,n.magnetProxy=null}n.eventTarget=e,s.set(n.arrowhead,{x:t,y:r},{ui:!0})},_connectArrowheadEnd:function(e={},t,r){const{model:n}=this,{viewUnderPointer:i,magnetUnderPointer:s,magnetProxy:o,arrowhead:a}=e;if(!s||!o||!i)return;i.unhighlight(o,{connecting:!0});const u=i.getLinkEnd(s,t,r,n,a);n.set(a,u,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var t=this.el.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){e.z!==null&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var t=[];t[4]=e,t[5]=this;var r,n=0,i=0;e==="source"?(n=2,r="target"):(i=2,r="source");var s=this.model.get(r);if(s.id){var o=t[n]=this.paper.findViewByModel(s.id),a=o.getMagnetFromLinkEnd(s);a===o.el&&(a=void 0),t[n+1]=a}function u(c,f){return t[i]=c,t[i+1]=c.el===f?void 0:f,t}return u},_markAvailableMagnets:function(e){function t(h,v){var y=h.paper,m=y.options.validateConnection;return m.apply(y,this.validateConnectionArgs(h,v))}var r=this.paper,n=r.model.getCells();e.marked={};for(var i=0,s=n.length;i<s;i++){var o=n[i].findView(r);if(o){var a=Array.prototype.slice.call(o.el.querySelectorAll("[magnet]"));o.el.getAttribute("magnet")!=="false"&&a.push(o.el);var u=a.filter(t.bind(e,o));if(u.length>0){for(var c=0,f=u.length;c<f;c++)o.highlight(u[c],{magnetAvailability:!0});o.highlight(null,{elementAvailability:!0}),e.marked[o.model.id]=u}}}},_unmarkAvailableMagnets:function(e){for(var t=Object.keys(e.marked),r,n,i=0,s=t.length;i<s;i++){r=t[i],n=e.marked[r];var o=this.paper.findViewByModel(r);if(o){for(var a=0,u=n.length;a<u;a++)o.unhighlight(n[a],{magnetAvailability:!0});o.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,t){t||(t={});var r={action:"arrowhead-move",arrowhead:e,whenNotAllowed:t.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:Qo(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(r),t.ignoreBackwardsCompatibility!==!0&&(this._dragData=r),r},onMount:function(){wr.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){wr.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){wr.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:er});Object.defineProperty(Ui.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var t=this.model.source();return new vt(t.x,t.y)}var r=this.sourceMagnet;return e.isNodeConnection(r)?new vt(this.sourceAnchor):e.getNodeBBox(r||e.el)}});Object.defineProperty(Ui.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var t=this.model.target();return new vt(t.x,t.y)}var r=this.targetMagnet;return e.isNodeConnection(r)?new vt(this.targetAnchor):e.getNodeBBox(r||e.el)}});const Fde=Eo.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,t){const{options:r}=this,{useFirstSubpath:n}=r;let i;try{const s=$e(t);if(i=s.convertToPathData().trim(),s.tagName()==="PATH"&&n){const o=i.search(/.M/i)+1;o>0&&(i=i.substr(0,o))}}catch{const o=e.getNodeBoundingRect(t);i=$e.rectToPath($t({},r,o.toJSON()))}return i},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,t){const{vel:r,options:n}=this,{padding:i,layer:s}=n;let o=this.getNodeMatrix(e,t);if(i){!s&&t===e.el&&r.remove();let a=e.getNodeBoundingRect(t);const u=a.x+a.width/2,c=a.y+a.height/2;a=$e.transformRect(a,o);const f=Math.max(a.width,1),h=Math.max(a.height,1),v=(f+i)/f,y=(h+i)/h,m=$e.createSVGMatrix({a:v,b:0,c:0,d:y,e:u-v*u,f:c-y*c});o=o.multiply(m)}r.attr({d:this.getPathData(e,t),transform:$e.matrixToTransformString(o)})},highlight(e,t){const{vel:r,options:n}=this;r.attr(n.attrs),e.isNodeConnection(t)?this.highlightConnection(e):this.highlightNode(e,t)}}),$5=20;function Bde(e,t){const r=e.children();for(;r.length>0;){const n=r.shift();t(n)&&r.push(...n.children())}}const zde=Eo.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:$5,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,t){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:r,MASK_REPLACE_TAGS:n,MASK_REMOVE_TAGS:i}=this,s=t.tagName();if(!$e.isSVGGraphicsElement(t)||i.includes(s))return t.remove(),!1;if(n.includes(s)){const o=e.vel.findOne(`#${t.id}`);if(o){const{node:a}=o;let u=e.getNodeBoundingRect(a);e.model.isElement()&&(u=$e.transformRect(u,e.getNodeMatrix(a)));const c=$e("rect",u.toJSON()),{x:f,y:h}=u.center(),{angle:v,cx:y=f,cy:m=h}=o.rotate();v&&c.rotate(v,y,m),t.parent().append(c)}return t.remove(),!1}return r.forEach(o=>{o==="fill"&&t.attr("fill")==="none"||t.removeAttr(o)}),!0},transformMaskRoot(e,t){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:r}=this;r.forEach(n=>{t.removeAttr(n)})},getMaskShape(e,t){const{options:r,MASK_REPLACE_TAGS:n}=this,{deep:i}=r,s=t.tagName();let o;if(s==="G"){if(!i)return null;o=t.clone(),Bde(o,a=>this.transformMaskChild(e,a))}else{if(n.includes(s))return null;o=t.clone()}return this.transformMaskRoot(e,o),o},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,t){const{VISIBLE:r,INVISIBLE:n,options:i}=this,{padding:s,attrs:o}=i,a="stroke-width"in o?o["stroke-width"]:1,u=t.attr("fill")!=="none";let c=parseFloat(t.attr("stroke-width"));isNaN(c)&&(c=1);const f=c+s*2,h=f+a*2;let v=this.getMaskShape(e,t);if(!v){const y=e.getNodeBoundingRect(t.node);y.inflate(y.width?0:.5,y.height?0:.5),v=$e("rect",y.toJSON())}return v.attr(o),$e("mask",{id:this.getMaskId()}).append([v.clone().attr({fill:u?r:"none",stroke:r,"stroke-width":h}),v.clone().attr({fill:u?n:"none",stroke:n,"stroke-width":f})])},removeMask(e){const t=e.svg.getElementById(this.getMaskId());t&&e.defs.removeChild(t)},addMask(e,t){e.defs.appendChild(t.node)},highlight(e,t){const{options:r,vel:n}=this,{padding:i,attrs:s,maskClip:o=$5,layer:a}=r,u="stroke"in s?s.stroke:"#000000";!a&&t===e.el&&n.remove();const c=e.getNodeBoundingRect(t).inflate(i+o),f=this.getNodeMatrix(e,t),h=this.getMask(e,$e(t));this.addMask(e.paper,h),n.attr(c.toJSON()),n.attr({transform:$e.matrixToTransformString(f),mask:`url(#${h.id})`,fill:u})},unhighlight(e){this.removeMask(e.paper)}}),Vde=Eo.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:So("highlight-opacity"),highlight:function(e,t){$e(t).addClass(this.opacityClassName)},unhighlight:function(e,t){$e(t).removeClass(this.opacityClassName)}}),U5=So("highlighted"),Gde=Eo.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:U5},highlight:function(e,t){$e(t).addClass(this.options.className)},unhighlight:function(e,t){$e(t).removeClass(this.options.className)}},{className:U5}),kS={ROW:"row",COLUMN:"column"},$de=Eo.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(e,t){const r=e.model,{attribute:n,size:i=20,gap:s=5,direction:o=kS.ROW}=this.options;if(!n)throw new Error("List: attribute is required");const a=typeof i=="number"?{width:i,height:i}:i,u=o===kS.ROW,c=u?a.width:a.height;let f=r.get(n);Array.isArray(f)||(f=[]);const h=this._prevItems||[],v=f.map((w,S)=>sl(h[S],f[S]));if(h.length!==f.length||v.some(w=>!w)){const w=this.vel.children(),S=f.map((E,A)=>{const T=A in w?w[A].node:null;if(v[A])return T;const I=this.createListItem(E,a,T);if(!I)return null;if(!(I instanceof SVGElement))throw new Error("List: item must be an SVGElement");I.dataset.index=A,I.dataset.attribute=n;const q=A*(c+s);return I.setAttribute("transform",u?`translate(${q}, 0)`:`translate(0, ${q})`),I});this.vel.empty().append(S),this._prevItems=f}const y=f.length,m=y===0?0:y*c+(y-1)*s,_=u?{width:m,height:a.height}:{width:a.width,height:m};this.position(r,_)},position(e,t){const{vel:r,options:n}=this,{margin:i=5,position:s="top-left"}=n,{width:o,height:a}=e.size(),{left:u,right:c,top:f,bottom:h}=cc(i),v=new vt(u,f,o-(u+c),a-(f+h));let{x:y,y:m}=GU(v,s);switch(s){case Vn.CENTER:case Vn.TOP:case Vn.BOTTOM:{y-=t.width/2;break}case Vn.RIGHT:case Vn.BOTTOM_RIGHT:case Vn.TOP_RIGHT:{y-=t.width;break}}switch(s){case Vn.CENTER:case Vn.RIGHT:case Vn.LEFT:{m-=t.height/2;break}case Vn.BOTTOM:case Vn.BOTTOM_RIGHT:case Vn.BOTTOM_LEFT:{m-=t.height;break}}r.attr("transform",`translate(${y}, ${m})`)}},{Directions:kS,Positions:Vn}),Ude=Object.freeze(Object.defineProperty({__proto__:null,addClass:Gde,list:$de,mask:zde,opacity:Vde,stroke:Fde},Symbol.toStringTag,{value:"Module"}));function jde(e,t,r,n){var i="ratio"in n?n.ratio:.5;return e.getPointAtRatio(i)}function Hde(e,t,r,n){var i="length"in n?n.length:20;return e.getPointAtLength(i)}function Wde(e,t,r,n){var i=1e6,s=e.getConnection(),o=e.getConnectionSubdivisions(),a=new bt(r.clone().offset(0,i),r.clone().offset(0,-1e6)),u=new bt(r.clone().offset(i,0),r.clone().offset(-1e6,0)),c=a.intersect(s,{segmentSubdivisions:o}),f=u.intersect(s,{segmentSubdivisions:o}),h=[];return c&&Array.prototype.push.apply(h,c),f&&Array.prototype.push.apply(h,f),h.length>0?r.chooseClosest(h):"fallbackAt"in n?ij(e,n.fallbackAt):sj(e,t,r,n)}function Xde(e,t,r,n){var i=e.getClosestPoint(r);return i||new pe}function jh(e){return function(t,r,n,i){if(n instanceof Element){var s=this.paper.findView(n),o;if(s)if(s.isNodeConnection(n)){var a="fixedAt"in i?i.fixedAt:"50%";o=ij(s,a)}else o=s.getNodeBBox(n).center();else o=new pe;return e.call(this,t,r,o,i)}return e.apply(this,arguments)}}function ij(e,t){var r=parseFloat(t);return Ai(t)?e.getPointAtRatio(r/100):e.getPointAtLength(r)}const Yde=jh(Wde),sj=jh(Xde),Kde=Object.freeze(Object.defineProperty({__proto__:null,connectionClosest:sj,connectionLength:Hde,connectionPerpendicular:Yde,connectionRatio:jde,resolveRef:jh},Symbol.toStringTag,{value:"Module"}));function sv(e,t,r){if(Kn(r)){const{x:i,y:s}=r;if(isFinite(s)){const o=new bt(t,e),{start:a,end:u}=o.parallel(s);t=a,e=u}r=i}if(!isFinite(r))return e;var n=e.distance(t);return r===0&&n>0?e:e.move(t,-Math.min(r,n-1))}function XA(e){var t=e.getAttribute("stroke-width");return t===null?0:parseFloat(t)||0}function Zde(e,t,r=0){let n,i,s,o;const{start:a,end:u}=e;switch(t){case"left":n="x",i=u,s=a,o=-1;break;case"right":n="x",i=a,s=u,o=1;break;case"top":n="y",i=u,s=a,o=-1;break;case"bottom":n="y",i=a,s=u,o=1;break;default:return}a[n]<u[n]?i[n]=s[n]:s[n]=i[n],isFinite(r)&&(i[n]+=o*r,s[n]+=o*r)}function Jde(e,t,r,n){let{offset:i,alignOffset:s,align:o}=n;return o&&Zde(e,o,s),sv(e.end,e.start,i)}function oj(e,t,r,n){var i=t.getNodeBBox(r);n.stroke&&i.inflate(XA(r)/2);var s=e.intersect(i),o=s?e.start.chooseClosest(s):e.end;return sv(o,e.start,n.offset)}function Qde(e,t,r,n){var i=t.model.angle();if(i===0)return oj(e,t,r,n);var s=t.getNodeUnrotatedBBox(r);n.stroke&&s.inflate(XA(r)/2);var o=s.center(),a=e.clone().rotate(o,i),u=a.setLength(1e6).intersect(s),c=u?a.start.chooseClosest(u).rotate(o,-i):e.end;return sv(c,e.start,n.offset)}function epe(e){if(!e)return null;var t=e;do{var r=t.tagName;if(typeof r!="string")return null;if(r=r.toUpperCase(),r==="G")t=t.firstElementChild;else if(r==="TITLE")t=t.nextElementSibling;else break}while(t);return t}var LS="segmentSubdivisons",NS="shapeBBox";function tpe(e,t,r,n){var i,s,o=n.selector,a=e.end;if(typeof o=="string"?i=t.findBySelector(o)[0]:o===!1?i=r:Array.isArray(o)?i=dh(r,o):i=epe(r),!$e.isSVGGraphicsElement(i)){if(i===r||!$e.isSVGGraphicsElement(r))return a;i=r}var u=t.getNodeShape(i),c=t.getNodeMatrix(i),f=t.getRootTranslateMatrix(),h=t.getRootRotateMatrix(),v=f.multiply(h).multiply(c),y=v.inverse(),m=$e.transformLine(e,y),_=m.start.clone(),w=t.getNodeData(i);if(n.insideout===!1){w[NS]||(w[NS]=u.bbox());var S=w[NS];if(S.containsPoint(_))return a}var E;if(u instanceof Nt){var A=n.precision||2;w[LS]||(w[LS]=u.getSegmentSubdivisions({precision:A})),E={precision:A,segmentSubdivisions:w[LS]}}n.extrapolate===!0&&m.setLength(1e6),s=m.intersect(u,E),s?$e.isArray(s)&&(s=_.chooseClosest(s)):n.sticky===!0&&(u instanceof vt?s=u.pointNearestToPoint(_):u instanceof Wi?s=u.intersectionWithLineFromCenterToPoint(_):s=u.closestPoint(_,E));var T=s?$e.transformPoint(s,v):a,I=n.offset||0;return n.stroke&&(I+=XA(i)/2),sv(T,e.start,I)}const rpe=Jde,npe=oj,ipe=Qde,spe=tpe,ope=Object.freeze(Object.defineProperty({__proto__:null,anchor:rpe,bbox:npe,boundary:spe,rectangle:ipe},Symbol.toStringTag,{value:"Module"}));function Ya(e){return function(t,r,n,i){var s=!!i.rotate,o=s?t.getNodeUnrotatedBBox(r):t.getNodeBBox(r),a=o[e](),u=i.dx;if(u){var c=Ai(u);u=parseFloat(u),isFinite(u)&&(c&&(u/=100,u*=o.width),a.x+=u)}var f=i.dy;if(f){var h=Ai(f);f=parseFloat(f),isFinite(f)&&(h&&(f/=100,f*=o.height),a.y+=f)}return s?a.rotate(t.model.getBBox().center(),-t.model.angle()):a}}function ape(e,t,r,n){var i=e.model.angle(),s=e.getNodeBBox(t),o=s.center(),a=s.origin(),u=s.corner(),c=n.padding;if(isFinite(c)||(c=0),a.y+c<=r.y&&r.y<=u.y-c){var f=r.y-o.y;o.x+=i===0||i===180?0:f*1/Math.tan(vs(i)),o.y+=f}else if(a.x+c<=r.x&&r.x<=u.x-c){var h=r.x-o.x;o.y+=i===90||i===270?0:h*Math.tan(vs(i)),o.x+=h}return o}function upe(e,t,r,n){var i=!!n.rotate,s,o,a;i?(s=e.getNodeUnrotatedBBox(t),a=e.model.getBBox().center(),o=e.model.angle()):s=e.getNodeBBox(t);var u=n.padding;isFinite(u)&&s.inflate(u),i&&r.rotate(a,o);var c=s.sideNearestToPoint(r),f;switch(c){case"left":f=s.leftMiddle();break;case"right":f=s.rightMiddle();break;case"top":f=s.topMiddle();break;case"bottom":f=s.bottomMiddle();break}return i?f.rotate(a,-o):f}function cpe(e,t,r,n,i){return e.model.getPointFromConnectedLink(this.model,i).offset(n.dx,n.dy)}const lpe=Ya("center"),fpe=Ya("topMiddle"),hpe=Ya("bottomMiddle"),dpe=Ya("leftMiddle"),ppe=Ya("rightMiddle"),gpe=Ya("origin"),vpe=Ya("topRight"),mpe=Ya("bottomLeft"),ype=Ya("corner"),_pe=jh(ape),bpe=jh(upe),wpe=cpe,xpe=Object.freeze(Object.defineProperty({__proto__:null,bottom:hpe,bottomLeft:mpe,bottomRight:ype,center:lpe,left:dpe,midSide:bpe,modelCenter:wpe,perpendicular:_pe,right:ppe,top:fpe,topLeft:gpe,topRight:vpe},Symbol.toStringTag,{value:"Module"})),Qc={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},Spe=50,j5=20,H5=1e3,Epe=1/0,cp=9007199254740991,qS=wr.Highlighting,W5={[qS.DEFAULT]:{name:"stroke",options:{padding:3}},[qS.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[qS.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},Ape=[{name:Js.BACK},{name:Js.CELLS},{name:Js.LABELS},{name:Js.FRONT},{name:Js.TOOLS}],aj=Va.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,perpendicularLinks:!1,elementView:_i,linkView:Ui,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,t){return!1},highlighting:W5,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new Wl,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(e,t,r){return t.getAttribute("magnet")!=="passive"},validateConnection:function(e,t,r,n,i,s){return(i==="target"?r:e)instanceof _i},embeddingMode:!1,validateEmbedding:function(e,t){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:Qc.EXACT,frozen:!1,autoFreeze:!1,onViewUpdate:function(e,t,r,n,i){t&(e.FLAG_INSERT|e.FLAG_REMOVE)||n.mounting||n.isolate||i.requestConnectedLinksUpdate(e,r,n)},onViewPostponed:function(e,t,r){return r.forcePostponedViewUpdate(e,t)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:Ude,anchorNamespace:xpe,linkAnchorNamespace:Kde,connectionPointNamespace:ope,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,init:function(){const{options:e,el:t}=this;e.cellViewNamespace||(e.cellViewNamespace=typeof joint<"u"&&Fa(joint,"shapes")?joint.shapes:null);const r=this.model=e.model||new Po;this._layers={},this.setGrid(e.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.$document=It(t.ownerDocument),this.resetViews(r.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(e,t,r){var n=r.position;this.isAsync()||!fs(n)?this.renderView(e,r):(r.maxPosition===n&&this.freeze({key:"addCells"}),this.renderView(e,r),n===0&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,t,r){const n=this.findViewByModel(e);n&&this.requestViewUpdate(n,n.FLAG_REMOVE,n.UPDATE_PRIORITY,r)},onCellChange:function(e,t){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===Qc.APPROX){const r=this.findViewByModel(e);r&&this.requestViewUpdate(r,r.FLAG_INSERT,r.UPDATE_PRIORITY,t)}},onGraphReset:function(e,t){this.resetLayers(),this.resetViews(e.models,t)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var t=e&&e.batchName,r=this.model;if(!this.isAsync()){var n=this.UPDATE_DELAYING_BATCHES;n.includes(t)&&!r.hasActiveBatch(n)&&this.updateViews(e)}var i=this.SORT_DELAYING_BATCHES;i.includes(t)&&!r.hasActiveBatch(i)&&this.sortViews()}},cloneOptions:function(){const{options:e}=this,{defaultConnector:t,defaultRouter:r,defaultConnectionPoint:n,defaultAnchor:i,defaultLinkAnchor:s,origin:o,highlighting:a,cellViewNamespace:u,interactive:c}=e;!u&&typeof joint<"u"&&Fa(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),fn(t)||(e.defaultConnector=Ks(t)),fn(r)||(e.defaultRouter=Ks(r)),fn(n)||(e.defaultConnectionPoint=Ks(n)),fn(i)||(e.defaultAnchor=Ks(i)),fn(s)||(e.defaultLinkAnchor=Ks(s)),Kn(c)&&(e.interactive=$t({},c)),Kn(a)&&(e.highlighting=$A({},a,W5)),e.origin=$t({},o)},children:function(){var e=$e.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:So("paper-background"),selector:"background"},{namespaceURI:e.xhtml,tagName:"div",className:So("paper-grid"),selector:"grid"},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:So("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){const{_layers:t}=this;if(e in t)return t[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();const{childNodes:e,options:t}=this,{svg:r,defs:n,layers:i,background:s,grid:o}=e;return r.style.overflow=t.overflow?"visible":"hidden",this.svg=r,this.defs=n,this.layers=i,this.$background=It(s),this.$grid=It(o),this.renderLayers(),$e.ensureId(r),t.background&&this.drawBackground(t.background),t.drawGrid&&this.drawGrid(),this},renderLayers:function(e=Ape){this.removeLayers(),e.forEach(({name:i,sorted:s})=>{const o=new Lhe({name:i});this.layers.appendChild(o.el),this._layers[i]=o});const t=this.getLayerView(Js.CELLS),r=this.getLayerView(Js.TOOLS),n=this.getLayerView(Js.LABELS);this.tools=r.el,this.cells=this.viewport=t.el,t.vel.addClass(So("viewport")),n.vel.addClass(So("viewport"))},removeLayers:function(){const{_layers:e}=this;Object.keys(e).forEach(t=>{e[t].remove(),delete e[t]})},resetLayers:function(){const{_layers:e}=this;Object.keys(e).forEach(t=>{e[t].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(e){var t=this.layers;if(e===void 0){var r=t.getAttribute("transform");return(this._viewportTransformString||null)===r?e=this._viewportMatrix:(e=t.getCTM(),this._viewportMatrix=e,this._viewportTransformString=r),$e.createSVGMatrix(e)}e=$e.createSVGMatrix(e);var n=$e.matrixToTransformString(e);return t.setAttribute("transform",n),this._viewportMatrix=e,this._viewportTransformString=t.getAttribute("transform"),this},clientMatrix:function(){return $e.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,t,r){if(e instanceof wr)for(var n=e.model,i=this.model.getConnectedLinks(n),s=0,o=i.length;s<o;s++){var a=i[s],u=this.findViewByModel(a);if(u){var c=["UPDATE"];a.getTargetCell()===n&&c.push("TARGET"),a.getSourceCell()===n&&c.push("SOURCE");var f=Math.max(t+1,u.UPDATE_PRIORITY);this.scheduleViewUpdate(u,u.getFlag(c),f,r)}}},forcePostponedViewUpdate:function(e,t){if(!e||!(e instanceof wr))return!1;var r=e.model;if(r.isElement())return!1;if((t&e.getFlag(["SOURCE","TARGET"]))===0){var n={silent:!0},i=0,s=this.findViewByModel(r.getSourceCell());s&&!this.isViewMounted(s)&&(i=this.dumpView(s,n),e.updateEndMagnet("source"));var o=0,a=this.findViewByModel(r.getTargetCell());if(a&&!this.isViewMounted(a)&&(o=this.dumpView(a,n),e.updateEndMagnet("target")),i===0&&o===0)return!this.dumpView(e,n)}return!1},requestViewUpdate:function(e,t,r,n){n||(n={}),this.scheduleViewUpdate(e,t,r,n);var i=this.isAsync();if(!(this.isFrozen()||i&&n.async!==!1)&&!this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES)){var s=this.updateViews(n);i&&this.notifyAfterRender(s,n)}},scheduleViewUpdate:function(e,t,r,n){const{_updates:i,options:s}=this;i.idle&&s.autoFreeze&&(i.idle=!1,this.unfreeze());const{FLAG_REMOVE:o,FLAG_INSERT:a,UPDATE_PRIORITY:u,cid:c}=e;let f=i.priorities[r];if(f||(f=i.priorities[r]={}),r>u)for(let y=r-1;y>=u;y--){const m=i.priorities[y];!m||!(c in m)||(f[c]|=m[c],delete m[c])}let h=f[c]||0;if((h&t)===t)return;h||i.count++,t&o&&h&a?f[c]^=a:t&a&&h&o&&(f[c]^=o),f[c]|=t;const v=s.onViewUpdate;typeof v=="function"&&v.call(this,e,t,r,n||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var t=this._updates,r=e.cid,n=t.priorities[e.UPDATE_PRIORITY],i=this.registerMountedView(e)|n[r];return delete n[r],i},dumpView:function(e,t={}){const r=this.dumpViewUpdate(e);if(!r)return 0;const n=!t.silent;n&&this.notifyBeforeRender(t);const i=this.updateView(e,r,t);if(n){const s={updated:1,priority:e.UPDATE_PRIORITY};this.notifyAfterRender(s,t)}return i},updateView:function(e,t,r){if(!e)return 0;const{FLAG_REMOVE:n,FLAG_INSERT:i,FLAG_INIT:s,model:o}=e;if(e instanceof wr){if(t&n)return this.removeView(o),0;if(t&i){const a=!!(t&s);a&&(t^=s),this.insertView(e,a),t^=i}}return t?e.confirmUpdate(t,r||{}):0},requireView:function(e,t){var r=this.findViewByModel(e);return r?(this.dumpView(r,t),r):null},registerUnmountedView:function(e){var t=e.cid,r=this._updates;if(t in r.unmounted)return 0;var n=r.unmounted[t]|=e.FLAG_INSERT;return r.unmountedCids.push(t),delete r.mounted[t],n},registerMountedView:function(e){var t=e.cid,r=this._updates;if(t in r.mounted)return 0;r.mounted[t]=!0,r.mountedCids.push(t);var n=r.unmounted[t]||0;return delete r.unmounted[t],n},isViewMounted:function(e){if(!e)return!1;var t=e.cid,r=this._updates;return t in r.mounted},dumpViews:function(e){var t=Ms({},e,{viewport:null});this.checkViewport(t),this.updateViews(t)},updateViews:function(e){this.notifyBeforeRender(e);let t,r=0,n=0,i=cp;do n++,t=this.updateViewsBatch(e),r+=t.updated,i=Math.min(t.priority,i);while(!t.empty);const s={updated:r,batches:n,priority:i};return this.notifyAfterRender(s,e),s},hasScheduledUpdates:function(){const e=this._updates.priorities,t=Object.keys(e);let r=t.length;for(;r>0&&r--;)for(let n in e[t[r]])return!0;return!1},updateViewsAsync:function(e,t){e||(e={}),t||(t={processed:0,priority:cp});const{_updates:r,options:n}=this,i=r.id;if(i){cE(i),t.processed===0&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);const s=this.updateViewsBatch(e),o=Ms({},e,{mountBatchSize:H5-s.mounted,unmountBatchSize:H5-s.unmounted}),a=this.checkViewport(o),u=a.unmounted,c=a.mounted;let f=t.processed;const h=r.count;s.updated>0?(f+=s.updated+s.unmounted,s.processed=f,t.priority=Math.min(s.priority,t.priority),s.empty&&c===0?(s.unmounted+=u,s.mounted+=c,s.priority=t.priority,this.notifyAfterRender(s,e),t.processed=0,t.priority=cp,r.count=0):t.processed=f):r.idle||n.autoFreeze&&(this.freeze(),r.idle=!0,this.trigger("render:idle",e));const v=e.progress;if(h&&typeof v=="function"&&v.call(this,s.empty,f,h,s,this),r.id!==i)return}if(r.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");r.id=uE(this.updateViewsAsync,this,e,t)},notifyBeforeRender:function(e={}){let t=e.beforeRender;typeof t!="function"&&(t=this.options.beforeRender,typeof t!="function")||t.call(this,e,this)},notifyAfterRender:function(e,t={}){let r=t.afterRender;typeof r!="function"&&(r=this.options.afterRender),typeof r=="function"&&r.call(this,e,t,this),this.trigger("render:done",e,t)},updateViewsBatch:function(e){e||(e={});var t=e.batchSize||Epe,r=this._updates,n=0,i=0,s=0,o=0,a=cp,u=!0,c=this.options,f=r.priorities,h="viewport"in e?e.viewport:c.viewport;typeof h!="function"&&(h=null);var v=c.onViewPostponed;typeof v!="function"&&(v=null);var y=Object.keys(f);e:for(var m=0,_=y.length;m<_;m++){var w=+y[m],S=f[w];for(var E in S){if(n>=t){u=!1;break e}var A=Ku[E];if(!A){delete S[E];continue}var T=S[E];if((T&A.FLAG_REMOVE)===0){var I=E in r.unmounted;if(A.DETACHABLE&&h&&!h.call(this,A,!I,this)){I||(this.registerUnmountedView(A),this.detachView(A)),r.unmounted[E]|=T,delete S[E],s++;continue}I&&(T|=A.FLAG_INSERT,o++),T|=this.registerMountedView(A)}var q=this.updateView(A,T,e);if(q>0&&(S[E]=q,!v||!v.call(this,A,q,this)||S[E])){i++,u=!1;continue}a>w&&(a=w),n++,delete S[E]}}return{priority:a,updated:n,postponed:i,unmounted:s,mounted:o,empty:u}},getUnmountedViews:function(){const e=this._updates,t=Object.keys(e.unmounted),r=t.length,n=new Array(r);for(var i=0;i<r;i++)n[i]=Ku[t[i]];return n},getMountedViews:function(){const e=this._updates,t=Object.keys(e.mounted),r=t.length,n=new Array(r);for(var i=0;i<r;i++)n[i]=Ku[t[i]];return n},checkUnmountedViews:function(e,t){t||(t={});var r=0;typeof e!="function"&&(e=null);for(var n=("mountBatchSize"in t)?t.mountBatchSize:1/0,i=this._updates,s=i.unmountedCids,o=i.unmounted,a=0,u=Math.min(s.length,n);a<u;a++){var c=s[a];if(c in o){var f=Ku[c];if(f){if(f.DETACHABLE&&e&&!e.call(this,f,!1,this)){s.push(c);continue}r++;var h=this.registerMountedView(f);h&&this.scheduleViewUpdate(f,h,f.UPDATE_PRIORITY,{mounting:!0})}}}return s.splice(0,a),r},checkMountedViews:function(e,t){t||(t={});var r=0;if(typeof e!="function")return r;for(var n=("unmountBatchSize"in t)?t.unmountBatchSize:1/0,i=this._updates,s=i.mountedCids,o=i.mounted,a=0,u=Math.min(s.length,n);a<u;a++){var c=s[a];if(c in o){var f=Ku[c];if(f){if(!f.DETACHABLE||e.call(this,f,!0,this)){s.push(c);continue}r++;var h=this.registerUnmountedView(f);h&&this.detachView(f)}}}return s.splice(0,a),r},checkViewVisibility:function(e,t={}){let r="viewport"in t?t.viewport:this.options.viewport;typeof r!="function"&&(r=null);const n=this._updates,{mounted:i,unmounted:s}=n,o=!e.DETACHABLE||!r||r.call(this,e,!1,this);let a=!1,u=!1;if(e.cid in i&&!o){this.registerUnmountedView(e)&&this.detachView(e);const h=n.mountedCids.indexOf(e.cid);n.mountedCids.splice(h,1),a=!0}if(!a&&e.cid in s&&o){const f=n.unmountedCids.indexOf(e.cid);n.unmountedCids.splice(f,1);var c=this.registerMountedView(e);c&&this.scheduleViewUpdate(e,c,e.UPDATE_PRIORITY,{mounting:!0}),u=!0}return{mounted:u?1:0,unmounted:a?1:0}},checkViewport:function(e){var t=Ms({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),r="viewport"in t?t.viewport:this.options.viewport,n=this.checkMountedViews(r,t);if(n>0){var i=this._updates.unmountedCids;t.mountBatchSize=Math.min(i.length-n,t.mountBatchSize)}var s=this.checkUnmountedViews(r,t);return{mounted:s,unmounted:n}},freeze:function(e){e||(e={});var t=this._updates,r=e.key,n=this.options.frozen,i=t.freezeKey;if(r&&r!==i){if(n&&i)return;t.freezeKey=r,t.keyFrozen=n}this.options.frozen=!0;var s=t.id;t.id=null,this.isAsync()&&s&&cE(s)},unfreeze:function(e){e||(e={});var t=this._updates,r=e.key,n=t.freezeKey;r&&n&&r!==n||(t.freezeKey=null,!(r&&r===n&&t.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=t.keyFrozen=!1,t.sort&&(this.sortViews(),t.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===Qc.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,t=e.width,r=e.height;return fs(t)||(t=this.el.clientWidth),fs(r)||(r=this.el.clientHeight),{width:t,height:r}},setDimensions:function(e,t){const{options:r}=this,{width:n,height:i}=r;let s=e===void 0?n:e,o=t===void 0?i:t;if(n===s&&i===o)return;r.width=s,r.height=o,this._setDimensions();const a=this.getComputedSize();this.trigger("resize",a.width,a.height)},_setDimensions:function(){const{options:e}=this;let t=e.width,r=e.height;fs(t)&&(t=Math.round(t)),fs(r)&&(r=Math.round(r)),this.$el.css({width:t===null?"":t,height:r===null?"":r})},setOrigin:function(e,t){return this.translate(e||0,t||0)},fitToContent:function(e,t,r,n){Wr(e)?n=e:n=$t({gridWidth:e,gridHeight:t,padding:r},n);const{x:i,y:s,width:o,height:a}=this.getFitToContentArea(n),{sx:u,sy:c}=this.scale();return this.setOrigin(-i*u,-s*c),this.setDimensions(o*u,a*c),new vt(i,s,o,a)},getFitToContentArea:function(e={}){const t=e.gridWidth||1,r=e.gridHeight||1,n=cc(e.padding||0),i=Math.max(e.minWidth||0,t),s=Math.max(e.minHeight||0,r),o=e.maxWidth||Number.MAX_VALUE,a=e.maxHeight||Number.MAX_VALUE,u=e.allowNewOrigin,c="contentArea"in e?new vt(e.contentArea):this.getContentArea(e),{sx:f,sy:h}=this.scale();c.x*=f,c.y*=h,c.width*=f,c.height*=h;let v=Math.ceil((c.width+c.x)/t),y=Math.ceil((c.height+c.y)/r);e.allowNegativeBottomRight||(v=Math.max(v,1),y=Math.max(y,1)),v*=t,y*=r;let m=0;(u==="negative"&&c.x<0||u==="positive"&&c.x>=0||u==="any")&&(m=Math.ceil(-c.x/t)*t,m+=n.left,v+=m);let _=0;return(u==="negative"&&c.y<0||u==="positive"&&c.y>=0||u==="any")&&(_=Math.ceil(-c.y/r)*r,_+=n.top,y+=_),v+=n.right,y+=n.bottom,v=Math.max(v,i),y=Math.max(y,s),v=Math.min(v,o),y=Math.min(y,a),new vt(-m/f,-_/h,v/f,y/h)},transformToFitContent:function(e){e||(e={});let t,r;if("contentArea"in e){const w=e.contentArea;t=this.localToPaperRect(w),r=new pe(w)}else t=this.getContentBBox(e),r=this.paperToLocalPoint(t);if(!t.width||!t.height)return;Ms(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});const n=cc(e.padding),i=e.minScaleX||e.minScale,s=e.maxScaleX||e.maxScale,o=e.minScaleY||e.minScale,a=e.maxScaleY||e.maxScale;let u;if(e.fittingBBox)u=e.fittingBBox;else{const w=this.translate(),S=this.getComputedSize();u={x:w.tx,y:w.ty,width:S.width,height:S.height}}u=new vt(u).moveAndExpand({x:n.left,y:n.top,width:-n.left-n.right,height:-n.top-n.bottom});const c=this.scale();let f=u.width/t.width*c.sx,h=u.height/t.height*c.sy;if(e.preserveAspectRatio&&(f=h=Math.min(f,h)),e.scaleGrid){const w=e.scaleGrid;f=w*Math.floor(f/w),h=w*Math.floor(h/w)}f=Math.min(s,Math.max(i,f)),h=Math.min(a,Math.max(o,h));const v={x:f/c.sx,y:h/c.sy},y=this.options.origin;let m=u.x-r.x*f-y.x,_=u.y-r.y*h-y.y;switch(e.verticalAlign){case"middle":_=_+(u.height-t.height*v.y)/2;break;case"bottom":_=_+(u.height-t.height*v.y);break}switch(e.horizontalAlign){case"middle":m=m+(u.width-t.width*v.x)/2;break;case"right":m=m+(u.width-t.width*v.x);break}this.scale(f,h),this.translate(m,_)},scaleContentToFit:function(e){this.transformToFitContent(e)},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new vt:$e(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){const{restrictTranslate:t}=this.options;let r;return fn(t)?r=t.apply(this,e):t===!0?r=this.getArea():t?r=new vt(t):r=null,r},createViewForModel:function(e){const{options:t}=this;var r,n,i=t.cellViewNamespace,s=e.get("type")+"View",o=dh(i,s,".");e.isLink()?(r=t.linkView,n=Ui):(r=t.elementView,n=_i);var a=r.prototype instanceof Jn.View?o||r:r.call(this,e)||o||n;return new a({model:e,interactive:t.interactive,labelsLayer:t.labelsLayer===!0?Js.LABELS:t.labelsLayer})},removeView:function(e){const{id:t}=e,{_views:r,_updates:n}=this,i=r[t];if(i){var{cid:s}=i;const{mounted:o,unmounted:a}=n;i.remove(),delete r[t],delete o[s],delete a[s]}return i},renderView:function(e,t){const{id:r}=e,n=this._views;let i,s,o=!0;return r in n&&(i=n[r],i.model===e?(s=i.FLAG_INSERT,o=!1):this.removeView(e)),o&&(i=n[r]=this.createViewForModel(e),i.paper=this,s=this.registerUnmountedView(i)|this.FLAG_INIT|i.getFlag(Zn(i,"initFlag"))),this.requestViewUpdate(i,s,i.UPDATE_PRIORITY,t),i},onImageDragStart:function(){return!1},resetViews:function(e,t){t||(t={}),e||(e=[]),this._resetUpdates(),this.removeViews();const r=this.options.autoFreeze?null:"reset";this.freeze({key:r});for(var n=0,i=e.length;n<i;n++)this.renderView(e[n],t);this.unfreeze({key:r}),this.sortViews()},removeViews:function(){To(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen()){this._updates.sort=!0;return}this.sortViewsExact()}},sortViewsExact:function(){var e=It(this.cells).children("[model-id]"),t=this.model.get("cells");rhe(e,function(r,n){var i=t.get(r.getAttribute("model-id")),s=t.get(n.getAttribute("model-id")),o=i.attributes.z||0,a=s.attributes.z||0;return o===a?0:o<a?-1:1})},insertView:function(e,t){const r=this.getLayerView(Js.CELLS),{el:n,model:i}=e;switch(this.options.sorting){case Qc.APPROX:r.insertSortedNode(n,i.get("z"));break;case Qc.EXACT:default:r.insertNode(n);break}e.onMount(t)},detachView(e){e.unmount(),e.onDetach()},scale:function(e,t,r,n){if(e===void 0)return $e.matrixToScale(this.matrix());t===void 0&&(t=e),r===void 0&&(r=0,n=0);var i=this.translate();if(r||n||i.tx||i.ty){var s=i.tx-r*(e-1),o=i.ty-n*(t-1);this.translate(s,o)}e=Math.max(e||0,this.MIN_SCALE),t=Math.max(t||0,this.MIN_SCALE);var a=this.matrix();return a.a=e,a.d=t,this.matrix(a),this.trigger("scale",e,t,r,n),this},rotate:function(e,t,r){if(e===void 0)return $e.matrixToRotate(this.matrix());if(t===void 0){var n=this.cells.getBBox();t=n.width/2,r=n.height/2}var i=this.matrix().translate(t,r).rotate(e).translate(-t,-r);return this.matrix(i),this},translate:function(e,t){if(e===void 0)return $e.matrixToTranslate(this.matrix());const{options:r}=this,{origin:n,drawGrid:i}=r;e||(e=0),t||(t=0);const s=this.matrix();if(s.e===e&&s.f===t)return this;s.e=e,s.f=t,this.matrix(s);const{tx:o,ty:a}=this.translate();return n.x=o,n.y=a,this.trigger("translate",o,a),i&&this.drawGrid(),this},findView:function(e){var t=Mi(e)?this.cells.querySelector(e):e instanceof It?e[0]:e,r=this.findAttribute("model-id",t);if(r)return this._views[r]},findViewByModel:function(e){var t=Mi(e)||fs(e)?e:e&&e.id;return this._views[t]},findViewsFromPoint:function(e){e=new pe(e);var t=this.model.getElements().map(this.findViewByModel,this);return t.filter(function(r){return r&&r.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,t){t=Ms(t||{},{strict:!1}),e=new vt(e);var r=this.model.getElements().map(this.findViewByModel,this),n=t.strict?"containsRect":"intersect";return r.filter(function(i){return i&&e[n](i.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...t){typeof e=="string"&&this.trigger("tools:event",e,...t)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,t){return this.clientToLocalPoint(e,t).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,t){var r=new pe(e,t),n=$e.transformPoint(r,this.matrix());return n},localToPaperRect:function(e,t,r,n){var i=new vt(e,t,r,n),s=$e.transformRect(i,this.matrix());return s},paperToLocalPoint:function(e,t){var r=new pe(e,t),n=$e.transformPoint(r,this.matrix().inverse());return n},paperToLocalRect:function(e,t,r,n){var i=new vt(e,t,r,n),s=$e.transformRect(i,this.matrix().inverse());return s},localToClientPoint:function(e,t){var r=new pe(e,t),n=$e.transformPoint(r,this.clientMatrix());return n},localToClientRect:function(e,t,r,n){var i=new vt(e,t,r,n),s=$e.transformRect(i,this.clientMatrix());return s},clientToLocalPoint:function(e,t){var r=new pe(e,t),n=$e.transformPoint(r,this.clientMatrix().inverse());return n},clientToLocalRect:function(e,t,r,n){var i=new vt(e,t,r,n),s=$e.transformRect(i,this.clientMatrix().inverse());return s},localToPagePoint:function(e,t){return this.localToPaperPoint(e,t).offset(this.pageOffset())},localToPageRect:function(e,t,r,n){return this.localToPaperRect(e,t,r,n).offset(this.pageOffset())},pageToLocalPoint:function(e,t){var r=new pe(e,t),n=r.difference(this.pageOffset());return this.paperToLocalPoint(n)},pageToLocalRect:function(e,t,r,n){var i=this.pageOffset(),s=new vt(e,t,r,n);return s.x-=i.x,s.y-=i.y,this.paperToLocalRect(s)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new pe(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof Ui))throw new Error("Must provide a linkView.");var t=e.model,r=this.options,n=this.model,i=n.constructor.validations;return!(!r.multiLinks&&!i.multiLinks.call(this,n,t)||!r.linkPinning&&!i.linkPinning.call(this,n,t)||typeof r.allowLink=="function"&&!r.allowLink.call(this,e,this))},getDefaultLink:function(e,t){return fn(this.options.defaultLink)?this.options.defaultLink.call(this,e,t):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:t,type:r}=e;const{highlighting:n,highlighterNamespace:i}=this.options;if(t===void 0){if(!n||r&&(t=n[r],t===!1))return!1;t||(t=n.default)}if(!t)return!1;Mi(t)&&(t={name:t});const s=t.name,o=i[s];if(!o)throw new Error('Unknown highlighter ("'+s+'")');if(typeof o.highlight!="function")throw new Error('Highlighter ("'+s+'") is missing required highlight() method');if(typeof o.unhighlight!="function")throw new Error('Highlighter ("'+s+'") is missing required unhighlight() method');return{highlighter:o,options:t.options||{},name:s}},onCellHighlight:function(e,t,r){const n=this.resolveHighlighter(r);if(!n)return;const{highlighter:i,options:s}=n;i.highlight(e,t,s)},onCellUnhighlight:function(e,t,r){const n=this.resolveHighlighter(r);if(!n)return;const{highlighter:i,options:s}=n;i.unhighlight(e,t,s)},pointerdblclick:function(e){e.preventDefault(),e=Yn(e);var t=this.findView(e.target);if(!this.guard(e,t)){var r=this.snapToGrid(e.clientX,e.clientY);t?t.pointerdblclick(e,r.x,r.y):this.trigger("blank:pointerdblclick",e,r.x,r.y)}},pointerclick:function(e){var t=this.eventData(e);if(t.mousemoved<=this.options.clickThreshold){e=Yn(e);var r=this.findView(e.target);if(this.guard(e,r))return;var n=this.snapToGrid(e.clientX,e.clientY);r?r.pointerclick(e,n.x,n.y):this.trigger("blank:pointerclick",e,n.x,n.y)}},contextmenu:function(e){if(this.options.preventContextMenu&&e.preventDefault(),this.contextMenuFired){this.contextMenuFired=!1;return}e=Yn(e),this.contextMenuTrigger(e)},contextMenuTrigger:function(e){var t=this.findView(e.target);if(!this.guard(e,t)){var r=this.snapToGrid(e.clientX,e.clientY);t?t.contextmenu(e,r.x,r.y):this.trigger("blank:contextmenu",e,r.x,r.y)}},pointerdown:function(e){e=Yn(e);const{target:t,button:r}=e,n=this.findView(t),i=r===2;if(n){if(!i&&this.guard(e,n))return;const s=this.FORM_CONTROL_TAG_NAMES.includes(t.tagName);this.options.preventDefaultViewAction&&!s&&e.preventDefault(),s&&n.preventDefaultInteraction(e);const o=this.customEventTrigger(e,n);if(o){if(o.isPropagationStopped())return;e.data=o.data}const a=t.closest("[magnet]");if(a&&n.el!==a&&n.el.contains(a)){const u=Yn(It.Event(e.originalEvent,{data:e.data,currentTarget:a}));if(this.onmagnet(u),u.isDefaultPrevented()&&e.preventDefault(),u.isPropagationStopped()){if(i)return;this.delegateDragEvents(n,u.data);return}e.data=u.data}}if(i){this.contextMenuFired=!0;const s=It.Event(e.originalEvent,{type:"contextmenu",data:e.data});this.contextMenuTrigger(s)}else{const s=this.snapToGrid(e.clientX,e.clientY);n?n.pointerdown(e,s.x,s.y):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,s.x,s.y)),this.delegateDragEvents(n,e.data)}},pointermove:function(e){var t=this.eventData(e);t.mousemoved||(t.mousemoved=0,this.undelegateEvents());var r=++t.mousemoved;if(!(r<=this.options.moveThreshold)){e=Yn(e);var n=this.snapToGrid(e.clientX,e.clientY),i=t.sourceView;i?i.pointermove(e,n.x,n.y):this.trigger("blank:pointermove",e,n.x,n.y),this.eventData(e,t)}},pointerup:function(e){this.undelegateDocumentEvents();var t=Yn(e),r=this.snapToGrid(t.clientX,t.clientY),n=this.eventData(e).sourceView;n?n.pointerup(t,r.x,r.y):this.trigger("blank:pointerup",t,r.x,r.y),t.isPropagationStopped()||this.pointerclick(It.Event(e.originalEvent,{type:"click",data:e.data})),this.delegateEvents()},mouseover:function(e){e=Yn(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=Yn(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=Yn(e);const{target:t,relatedTarget:r,currentTarget:n}=e,i=this.findView(t);if(this.guard(e,i))return;const s=this.findView(r);i&&(s===i||(i.mouseenter(e),this.el.contains(r)))||s||n===this.el&&this.trigger("paper:mouseenter",e)},mouseleave:function(e){e=Yn(e);const{target:t,relatedTarget:r,currentTarget:n}=e,i=this.findView(t);if(this.guard(e,i))return;const s=this.findView(r);i&&(s===i||(i.mouseleave(e),this.el.contains(r)))||s||n===this.el&&this.trigger("paper:mouseleave",e)},_processMouseWheelEvtBuf:zfe(function(){const{event:e,deltas:t}=this._mw_evt_buffer,r=t.reduce((o,a)=>o+Jfe(a,Spe),0),n=Math.pow(.995,r),{x:i,y:s}=this.clientToLocalPoint(e.clientX,e.clientY);this.trigger("paper:pinch",e,i,s,n),this._mw_evt_buffer={event:null,deltas:[]}},j5,{maxWait:j5}),mousewheel:function(e){e=Yn(e);const t=this.findView(e.target);if(this.guard(e,t))return;const r=e.originalEvent,n=this.snapToGrid(r.clientX,r.clientY),{deltaX:i,deltaY:s}=Zfe(r),o=this._events["paper:pinch"];if(e.ctrlKey&&o&&o.length>0)r.preventDefault(),this._mw_evt_buffer.event=r,this._mw_evt_buffer.deltas.push(s),this._processMouseWheelEvtBuf();else{const a=Math.max(-1,Math.min(1,r.wheelDelta));t?t.mousewheel(e,n.x,n.y,a):this.trigger("blank:mousewheel",e,n.x,n.y,a),this.trigger("paper:pan",e,i,s)}},onevent:function(e){var t=e.currentTarget,r=t.getAttribute("event");if(r){var n=this.findView(t);if(n){if(e=Yn(e),this.guard(e,n))return;var i=this.snapToGrid(e.clientX,e.clientY);n.onevent(e,r,i.x,i.y)}}},magnetEvent:function(e,t){var r=e.currentTarget,n=r.getAttribute("magnet");if(n){var i=this.findView(r);if(i){if(e=Yn(e),this.guard(e,i))return;var s=this.snapToGrid(e.clientX,e.clientY);t.call(this,i,e,r,s.x,s.y)}}},onmagnet:function(e){if(e.button===2){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;const t=It.Event(e.originalEvent,{type:"contextmenu",data:e.data,currentTarget:e.currentTarget});this.magnetContextMenuTrigger(t),t.isPropagationStopped()&&e.stopPropagation()}else this.magnetEvent(e,function(t,r,n,i,s){t.onmagnet(r,i,s)})},magnetpointerdblclick:function(e){this.magnetEvent(e,function(t,r,n,i,s){t.magnetpointerdblclick(r,n,i,s)})},magnetcontextmenu:function(e){if(this.options.preventContextMenu&&e.preventDefault(),this.magnetContextMenuFired){this.magnetContextMenuFired=!1;return}this.magnetContextMenuTrigger(e)},magnetContextMenuTrigger:function(e){this.magnetEvent(e,function(t,r,n,i,s){t.magnetcontextmenu(r,n,i,s)})},onlabel:function(e){var t=e.currentTarget,r=this.findView(t);if(!r||(e=Yn(e),this.guard(e,r)))return;const n=this.customEventTrigger(e,r,t);if(n){if(n.isPropagationStopped())return;e.data=n.data}var i=this.snapToGrid(e.clientX,e.clientY);r.onlabel(e,i.x,i.y)},getPointerArgs(e){const t=Yn(e),{x:r,y:n}=this.snapToGrid(t.clientX,t.clientY);return[t,r,n]},delegateDragEvents:function(e,t){t||(t={}),this.eventData({data:t},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,t)},guard:function(e,t){if(e.type==="mousedown"&&e.button===2||this.options.guard&&this.options.guard(e,t))return!0;if(e.data&&e.data.guarded!==void 0)return e.data.guarded;const{target:r}=e;return this.GUARDED_TAG_NAMES.includes(r.tagName)?!0:!(t&&t.model&&t.model instanceof ca||this.svg===r||this.el===r||It.contains(this.svg,r))},setGridSize:function(e){const{options:t}=this;return t.gridSize=e,t.drawGrid&&!t.drawGridSize&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:$e("svg",{width:"100%",height:"100%"},$e("defs")),patterns:{},add:function(e,t){$e(this.root.node.childNodes[0]).append(t),this.patterns[e]=t,this.root.append($e("rect",{width:"100%",height:"100%",fill:"url(#"+e+")"}))},get:function(e){return this.patterns[e]},exist:function(e){return this.patterns[e]!==void 0}}),this._gridCache},setGrid:function(e){this.clearGrid(),this._gridCache=null,this._gridSettings=[];var t=Array.isArray(e)?e:[e||{}];return t.forEach(function(r){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(r))},this),this},_resolveDrawGridOption:function(e){var t=this.constructor.gridPatterns;if(Mi(e)&&Array.isArray(t[e]))return t[e].map(function(u){return $t({},u)});var r=e||{args:[{}]},n=Array.isArray(r),i=r.name;if(!n&&!i&&!r.markup&&(i="dot"),i&&Array.isArray(t[i])){var s=t[i].map(function(u){return $t({},u)}),o=Array.isArray(r.args)?r.args:[r.args||{}];Ms(o[0],uc(e,"args"));for(var a=0;a<o.length;a++)s[a]&&$t(s[a],o[a]);return s}return n?r:[r]},drawGrid:function(e){const t=this.options.drawGridSize||this.options.gridSize;if(t<=1)return this.clearGrid();var r=Array.isArray(e)?e:[e],n=this.matrix(),i=this._getGridRefs();this._gridSettings.forEach(function(o,a){var u="pattern_"+a,c=ti(o,r[a],{sx:n.a||1,sy:n.d||1,ox:n.e||0,oy:n.f||0});c.width=t*(n.a||1)*(c.scaleFactor||1),c.height=t*(n.d||1)*(c.scaleFactor||1),i.exist(u)||i.add(u,$e("pattern",{id:u,patternUnits:"userSpaceOnUse"},$e(c.markup)));var f=i.get(u);fn(c.update)&&c.update(f.node.childNodes[0],c);var h=c.ox%c.width;h<0&&(h+=c.width);var v=c.oy%c.height;v<0&&(v+=c.height),f.attr({x:h,y:v,width:c.width,height:c.height})});var s=new XMLSerializer().serializeToString(i.root.node);return s="url(data:image/svg+xml;base64,"+btoa(s)+")",this.$grid.css("backgroundImage",s),this},updateBackgroundImage:function(e){e=e||{};var t=e.position||"center",r=e.size||"auto auto",n=this.scale(),i=this.translate();if(Wr(t)){var s=i.tx+n.sx*(t.x||0),o=i.ty+n.sy*(t.y||0);t=s+"px "+o+"px"}Wr(r)&&(r=new vt(r).scale(n.sx,n.sy),r=r.width+"px "+r.height+"px"),this.$background.css({backgroundSize:r,backgroundPosition:t})},drawBackgroundImage:function(e,t){if(!(e instanceof HTMLImageElement)){this.$background.css("backgroundImage","");return}if(!(!this._background||this._background.id!==t.id)){t=t||{};var r,n=t.size,i=t.repeat||"no-repeat",s=t.opacity||1,o=Math.abs(t.quality)||1,a=this.constructor.backgroundPatterns[jfe(i)];if(fn(a)){e.width*=o,e.height*=o;var u=a(e,t);if(!(u instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");r=u.toDataURL("image/png"),i="repeat",Wr(n)?(n.width*=u.width/e.width,n.height*=u.height/e.height):n===void 0&&(t.size={width:u.width/o,height:u.height/o})}else r=e.src,n===void 0&&(t.size={width:e.width,height:e.height});this.$background.css({opacity:s,backgroundRepeat:i,backgroundImage:"url("+r+")"}),this.updateBackgroundImage(t)}},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(e=e||{},this.updateBackgroundColor(e.color),e.image){e=this._background=Ks(e),ol(e);var t=document.createElement("img");t.onload=this.drawBackgroundImage.bind(this,t,e),t.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,To(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!Wr(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var t=e.id,r=e.name;if(t||(t=r+this.svg.id+tp(JSON.stringify(e))),!this.isDefined(t)){var n=ihe,i=n[r]&&n[r](e.args||{});if(!i)throw new Error("Non-existing filter "+r);var s=$t({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},e.attrs,{id:t});$e(i,s).appendTo(this.defs)}return t},defineGradient:function(e){if(!Wr(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:t,defs:r}=this,{type:n,id:i=n+t.id+tp(JSON.stringify(e)),stops:s,attrs:o={}}=e;if(this.isDefined(i))return i;const a=Fr(s).map(({offset:c,color:f,opacity:h})=>$e("stop").attr({offset:c,"stop-color":f,"stop-opacity":Number.isFinite(h)?h:1})),u=$e(n,o,a);return u.id=i,u.appendTo(r),i},definePattern:function(e){if(!Wr(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:t,defs:r}=this,{id:n=t.id+tp(JSON.stringify(e)),markup:i,attrs:s={}}=e;if(!i)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(n))return n;const o=$e("pattern",{patternUnits:"userSpaceOnUse"});if(o.id=n,o.attr(s),typeof i=="string")o.append($e(i));else{const{fragment:a}=Fp(i);o.append(a)}return o.appendTo(r),n},defineMarker:function(e){if(!Wr(e))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");const{svg:t,defs:r}=this,{id:n=t.id+tp(JSON.stringify(e)),markup:i,attrs:s={},markerUnits:o="userSpaceOnUse"}=e;if(this.isDefined(n))return n;const a=$e("marker",{orient:"auto",overflow:"visible",markerUnits:o});a.id=n,a.attr(s);let u;if(i){let h;if(typeof i=="string")h=$e(i),h=Array.isArray(h)?h:[h];else{const{fragment:v}=Fp(i);h=$e(v).children()}h.length>1?u=$e("g").append(h):u=h[0]}else{const{type:h="path"}=e;u=$e(h)}const c=uc(e,"type","id","markup","attrs","markerUnits");return Object.keys(c).forEach(h=>{const v=c[h],y=u.attr(h);if(y==null)u.attr(h,v);else switch(h){case"transform":u.attr(h,v+" "+y);break}}),u.appendTo(a),a.appendTo(r),n},customEventTrigger:function(e,t,r=t.el){const n=e.target.closest("[event]");if(n&&r!==n&&t.el.contains(n)){const i=Yn(It.Event(e.originalEvent,{data:e.data,currentTarget:n}));return this.onevent(i),i.isDefaultPrevented()&&e.preventDefault(),i}return null}},{sorting:Qc,Layers:Js,backgroundPatterns:{flipXy:function(e){var t=document.createElement("canvas"),r=e.width,n=e.height;t.width=2*r,t.height=2*n;var i=t.getContext("2d");return i.drawImage(e,0,0,r,n),i.setTransform(-1,0,0,-1,t.width,t.height),i.drawImage(e,0,0,r,n),i.setTransform(-1,0,0,1,t.width,0),i.drawImage(e,0,0,r,n),i.setTransform(1,0,0,-1,0,t.height),i.drawImage(e,0,0,r,n),t},flipX:function(e){var t=document.createElement("canvas"),r=e.width,n=e.height;t.width=r*2,t.height=n;var i=t.getContext("2d");return i.drawImage(e,0,0,r,n),i.translate(2*r,0),i.scale(-1,1),i.drawImage(e,0,0,r,n),t},flipY:function(e){var t=document.createElement("canvas"),r=e.width,n=e.height;t.width=r,t.height=n*2;var i=t.getContext("2d");return i.drawImage(e,0,0,r,n),i.translate(0,2*n),i.scale(1,-1),i.drawImage(e,0,0,r,n),t},watermark:function(e,t){t=t||{};var r=e.width,n=e.height,i=document.createElement("canvas");i.width=r*3,i.height=n*3;for(var s=i.getContext("2d"),o=fs(t.watermarkAngle)?-t.watermarkAngle:-20,a=vs(o),u=i.width/4,c=i.height/4,f=0;f<4;f++)for(var h=0;h<4;h++)(f+h)%2>0&&(s.setTransform(1,0,0,1,(2*f-1)*u,(2*h-1)*c),s.rotate(a),s.drawImage(e,-r/2,-n/2,r,n));return i}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,t){$e(e).attr({width:t.thickness*t.sx,height:t.thickness*t.sy,fill:t.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,t){var r=t.sx<=1?t.thickness*t.sx:t.thickness;$e(e).attr({width:r,height:r,fill:t.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,t){var r,n=t.width,i=t.height,s=t.thickness;n-s>=0&&i-s>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",$e(e).attr({d:r,stroke:t.color,"stroke-width":t.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,t){var r,n=t.width,i=t.height,s=t.thickness;n-s>=0&&i-s>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",$e(e).attr({d:r,stroke:t.color,"stroke-width":t.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(e,t){var r,n=t.width,i=t.height,s=t.thickness;n-s>=0&&i-s>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",$e(e).attr({d:r,stroke:t.color,"stroke-width":t.thickness})}}]}}),ov=Va.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var e=this.name;e&&this.vel.attr("data-tool-name",e)},configure:function(e,t){return this.relatedView=e,this.paper=e.paper,this.parentView=t,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(e){e&&e.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var e=this.options.focusOpacity;isFinite(e)&&(this.el.style.opacity=e),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(e){const{paper:t,relatedView:r}=this;return!t||!r?!0:t.guard(e,r)}}),Tpe=Va.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(e){e=$t(this.options,e);var t=e.tools;if(!Array.isArray(t))return this;var r=e.relatedView;if(!(r instanceof wr))return this;for(var n=this.tools=[],i=0,s=t.length;i<s;i++){var o=t[i];o instanceof ov&&(o.configure(r,this),this.vel.append(o.el),n.push(o))}return this.isRendered=!1,r.requestUpdate(r.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(e){e||(e={});var t=this.tools;if(!t)return this;for(var r=this.isRendered,n=0,i=t.length;n<i;n++){var s=t[n];r?e.tool!==s.cid&&s.isVisible()&&s.update():s.render()}return this.isMounted()||this.mount(),r||(this.blurTool(),this.isRendered=!0),this},focusTool:function(e){var t=this.tools;if(!t)return this;for(var r=0,n=t.length;r<n;r++){var i=t[r];e===i?i.show():i.hide()}return this},blurTool:function(e){var t=this.tools;if(!t)return this;for(var r=0,n=t.length;r<n;r++){var i=t[r];i!==e&&!i.isVisible()&&(i.show(),i.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var e=this.tools;if(!e)return this;for(var t=0,r=e.length;t<r;t++)e[t].remove();this.tools=null},mount:function(){const{options:e,el:t}=this,{relatedView:r,layer:n=Js.TOOLS,z:i}=e;return r&&(n?r.paper.getLayerView(n).insertSortedNode(t,i):r.el.appendChild(t)),this}}),ph={exportElement:function(e){return e.size()},exportLink:function(e){var t=e.get("labelSize")||{},r={minLen:e.get("minLen")||1,weight:e.get("weight")||1,labelpos:e.get("labelPosition")||"c",labeloffset:e.get("labelOffset")||0,width:t.width||0,height:t.height||0};return r},importElement:function(e,t,r){var n=this.getCell(t),i=r.node(t);e.setPosition?e.setPosition(n,i):n.set("position",{x:i.x-i.width/2,y:i.y-i.height/2})},importLink:function(e,t,r){const i=this.getCell(t.name),s=r.edge(t),o=s.points||[],a=new dn(o);if(e.setVertices||e.setLinkVertices)if(fn(e.setVertices))e.setVertices(i,o);else{a.simplify({threshold:.001});const u=a.points.map(f=>f.toJSON()),c=u.length;i.set("vertices",u.slice(1,c-1))}if(e.setLabels&&"x"in s&&"y"in s){const u={x:s.x,y:s.y};if(fn(e.setLabels))e.setLabels(i,u,o);else{const c=a.closestPointLength(u),f=a.pointAtLength(c),h=c/a.length(),v=new pe(u).difference(f).toJSON();i.label(0,{position:{distance:h,offset:v}})}}},layout:function(e,t){var r;e instanceof Po?r=e:r=new Po().resetCells(e,{dry:!0,sort:!1}),e=null,t=Ms(t||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink});const n=t.dagre||(typeof dagre<"u"?dagre:void 0);if(n===void 0)throw new Error('The the "dagre" utility is a mandatory dependency.');var i=ph.toGraphLib(r,{graphlib:t.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:t.exportElement,setEdgeLabel:t.exportLink,setEdgeName:function(f){return f.id}}),s={},o=t.marginX||0,a=t.marginY||0;if(t.rankDir&&(s.rankdir=t.rankDir),t.align&&(s.align=t.align),t.nodeSep&&(s.nodesep=t.nodeSep),t.edgeSep&&(s.edgesep=t.edgeSep),t.rankSep&&(s.ranksep=t.rankSep),t.ranker&&(s.ranker=t.ranker),o&&(s.marginx=o),a&&(s.marginy=a),i.setGraph(s),n.layout(i,{debugTiming:!!t.debugTiming}),r.startBatch("layout"),ph.fromGraphLib(i,{importNode:this.importElement.bind(r,t),importEdge:this.importLink.bind(r,t)}),t.resizeClusters){var u=i.nodes().filter(function(f){return i.children(f).length>0}).map(r.getCell.bind(r)).sort(function(f,h){return h.getAncestors().length-f.getAncestors().length});To(u,"fitToChildren",{padding:t.clusterPadding})}r.stopBatch("layout");var c=i.graph();return new vt(o,a,Math.abs(c.width-2*o),Math.abs(c.height-2*a))},fromGraphLib:function(e,t){t=t||{};var r=t.importNode||Rf,n=t.importEdge||Rf,i=this instanceof Po?this:new Po;return e.nodes().forEach(function(s){r.call(i,s,e,i,t)}),e.edges().forEach(function(s){n.call(i,s,e,i,t)}),i},toGraphLib:function(e,t){t=t||{};const r=t.graphlib||(typeof graphlib<"u"?graphlib:void 0);if(r===void 0)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var n=Ufe(t,"directed","compound","multigraph"),i=new r.Graph(n),s=t.setNodeLabel||Rf,o=t.setEdgeLabel||Rf,a=t.setEdgeName||Rf,u=e.get("cells"),c=0,f=u.length;c<f;c++){var h=u.at(c);if(h.isLink()){var v=h.get("source"),y=h.get("target");if(!v.id||!y.id)break;i.setEdge(v.id,y.id,o(h),a(h))}else if(i.setNode(h.id,s(h)),i.isCompound()&&h.has("parent")){var m=h.get("parent");u.has(m)&&i.setParent(h.id,m)}}return i}};Po.prototype.toGraphLib=function(e){return ph.toGraphLib(this,e)};Po.prototype.fromGraphLib=function(e,t){return ph.fromGraphLib.call(this,e,t)};const uj={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(e,t){return this._tests[e]=t},test:function(e){var t=this._tests[e];if(!t)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var r=this._results[e];if(typeof r<"u")return r;try{r=t()}catch{r=!1}return this._results[e]=r,r}},ps=Ni.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}});ps.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'});_i.extend({presentationAttributes:_i.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var e=_i.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(e,"SCALE")&&(this.resize(),e=this.removeFlag(e,"SCALE")),e}});ps.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'});ps.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'});ps.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'});ps.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'});ps.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'});ps.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'});const Ppe=ps.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'});Ppe.define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}});const Gp=uj.test("svgforeignobject");ps.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',Gp?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),ps.prototype.initialize.apply(this,arguments)},updateSize:function(e,t){this.attr({".fobj":$t({},t),div:{style:$t({},t)}})},updateContent:function(e,t){Gp?this.attr({".content":{html:the(t)}}):this.attr({".content":{text:t}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}});_i.extend({presentationAttributes:Gp?_i.prototype.presentationAttributes:_i.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var e=_i.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(e,"CONTENT")&&(this.updateContent(this.model),e=this.removeFlag(e,"CONTENT")),e},update:function(e,t){var r=this.model;if(Gp)_i.prototype.update.call(this,r,t);else{var n=uc(t||r.get("attrs"),".content");_i.prototype.update.call(this,r,n),(!t||Fa(t,".content"))&&this.updateContent(r,t)}},updateContent:function(e,t){var r=ti({},(t||e.get("attrs"))[".content"]);r=uc(r,"text");var n=DU(e.get("content"),e.get("size"),r,{svgDocument:this.paper.svg}),i=aE({},".content",r,"/");i[".content"].text=n,_i.prototype.update.call(this,e,i)}});Ni.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]});const Cpe=Ni.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]});Ni.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]});Ni.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]});Ni.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]});Ni.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]});Ni.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]});Ni.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]});Ni.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]});Ni.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]});Ni.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]});var DS=10;Ni.define("standard.Cylinder",{attrs:{body:{lateralArea:DS,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:DS,refRx:"50%",ry:DS,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,t){if(e===void 0)return this.attr("body/lateralArea");var r=Ai(e),n={lateralArea:e},i=r?{refCy:e,refRy:e,cy:null,ry:null}:{refCy:null,refRy:null,cy:e,ry:e};return this.attr({body:n,top:i},t)}},{attributes:{lateralArea:{set:function(e,t){var r=Ai(e);r&&(e=parseFloat(e)/100);var n=t.x,i=t.y,s=t.width,o=t.height,a=s/2,u=r?o*e:e,c=$e.KAPPA,f=c*a,h=c*(r?o*e:e),v=n,y=n+s/2,m=n+s,_=i+u,w=_-u,S=i+o-u,E=i+o,A=["M",v,_,"L",v,S,"C",n,S+h,y-f,E,y,E,"C",y+f,E,m,S+h,m,S,"L",m,_,"C",m,_-h,y+f,w,y,w,"C",y-f,w,v,_-h,v,_,"Z"];return{d:A.join(" ")}}}}});var Rpe={tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]},Ipe={tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},Ope=uj.test("svgforeignobject")?Rpe:Ipe;Ni.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Ope]},{attributes:{text:{set:function(e,t,r,n){if(r instanceof HTMLElement)r.textContent=e;else{var i=n.style||{},s={text:e,width:-5,height:"100%"},o=$t({textVerticalAnchor:"middle"},i);return VU.textWrap.set.call(this,s,t,r,o),{fill:i.color||null}}},position:function(e,t,r){if(r instanceof SVGElement)return t.center()}}}});const yp=Wl.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]});Wl.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none",cursor:"pointer"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]});Wl.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none","pointer-events":"none"}},{tagName:"path",selector:"line",attributes:{fill:"none",cursor:"pointer"}}]});var X5=Va.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick",dbltap:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(e,t){const{vel:r,options:n}=this,{scale:i}=n;let s=$e.createSVGMatrix().translate(e,t);i&&(s=s.scale(i)),r.transform(s,{absolute:!0})},onPointerDown:function(e){this.options.guard(e)||(e.stopPropagation(),e.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,e.data),this.trigger("will-change",this,e))},onPointerMove:function(e){this.trigger("changing",this,e)},onDoubleClick:function(e){this.trigger("remove",this,e)},onPointerUp:function(e){this.trigger("changed",this,e),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}});const Mpe=ov.extend({name:"vertices",options:{handleClass:X5,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0,scale:null},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},onRender:function(){return this.options.vertexAdding&&(this.renderChildren(),this.updatePath()),this.resetHandles(),this.renderHandles(),this},update:function(){var e=this.relatedView,t=e.model.vertices();return t.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var e=this.handles;if(this.handles=[],this.stopListening(),!!Array.isArray(e))for(var t=0,r=e.length;t<r;t++)e[t].remove()},renderHandles:function(){for(var e=this.relatedView,t=e.model.vertices(),r=0,n=t.length;r<n;r++){var i=t[r],s=new this.options.handleClass({index:r,paper:this.paper,scale:this.options.scale,guard:o=>this.guard(o)});s.render(),s.position(i.x,i.y),this.simulateRelatedView(s.el),s.vel.appendTo(this.el),this.handles.push(s),this.startHandleListening(s)}},updateHandles:function(){for(var e=this.relatedView,t=e.model.vertices(),r=0,n=t.length;r<n;r++){var i=t[r],s=this.handles[r];if(!s)return;s.position(i.x,i.y)}},updatePath:function(){var e=this.childNodes.connection;e&&e.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(e){var t=this.relatedView;t.can("vertexMove")&&(this.listenTo(e,"will-change",this.onHandleWillChange),this.listenTo(e,"changing",this.onHandleChanging),this.listenTo(e,"changed",this.onHandleChanged)),t.can("vertexRemove")&&this.listenTo(e,"remove",this.onHandleRemove)},getNeighborPoints:function(e){var t=this.relatedView,r=t.model.vertices(),n=e>0?r[e-1]:t.sourceAnchor,i=e<r.length-1?r[e+1]:t.targetAnchor;return{prev:new pe(n),next:new pe(i)}},onHandleWillChange:function(e,t){this.focus();const{relatedView:r,options:n}=this;r.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),n.stopPropagation||r.notifyPointerdown(...r.paper.getPointerArgs(t))},onHandleChanging:function(e,t){const{options:r,relatedView:n}=this;var i=e.options.index,[s,o,a]=n.paper.getPointerArgs(t),u={x:o,y:a};this.snapVertex(u,i),n.model.vertex(i,u,{ui:!0,tool:this.cid}),e.position(u.x,u.y),r.stopPropagation||n.notifyPointermove(s,o,a)},onHandleChanged:function(e,t){const{options:r,relatedView:n}=this;if(r.vertexAdding&&this.updatePath(),!!r.redundancyRemoval){var i=n.removeRedundantLinearVertices({ui:!0,tool:this.cid});i&&this.render(),this.blur(),n.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(t).vertexAdded&&n.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var[s,o,a]=n.paper.getPointerArgs(t);r.stopPropagation||n.notifyPointerup(s,o,a),n.checkMouseleave(s)}},snapVertex:function(e,t){var r=this.options.snapRadius;if(r>0){var n=this.getNeighborPoints(t),i=n.prev,s=n.next;Math.abs(e.x-i.x)<r?e.x=i.x:Math.abs(e.x-s.x)<r&&(e.x=s.x),Math.abs(e.y-i.y)<r?e.y=n.prev.y:Math.abs(e.y-s.y)<r&&(e.y=s.y)}},onHandleRemove:function(e,t){var r=e.options.index,n=this.relatedView;n.model.removeVertex(r,{ui:!0}),this.options.vertexAdding&&this.updatePath(),n.checkMouseleave(Yn(t))},onPathPointerDown:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=Yn(e),r=this.paper.snapToGrid(t.clientX,t.clientY).toJSON(),n=this.relatedView;n.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var i=n.getVertexIndex(r.x,r.y);this.snapVertex(r,i),n.model.insertVertex(i,r,{ui:!0,tool:this.cid}),this.update();var s=this.handles[i];this.eventData(t,{vertexAdded:!0}),s.onPointerDown(t)}},onRemove:function(){this.resetHandles()}},{VertexHandle:X5});function kpe(e,t){const{model:r}=e;return t?r.getBBox():r.isLink()?e.getConnection().bbox():e.getNodeUnrotatedBBox(e.el)}const cj=ov.extend({tagName:"path",xAxisVector:new pe(1,0),events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{scale:null},onRender:function(){this.update()},update:function(){var e=this.ratio,t=this.relatedView,r=t.getTangentAtRatio(e),n,i;if(r?(n=r.start,i=r.vector().vectorAngle(this.xAxisVector)||0):(n=t.getPointAtRatio(e),i=0),!n)return this;var s=$e.createSVGMatrix().translate(n.x,n.y).rotate(i);const{scale:o}=this.options;return o&&(s=s.scale(o)),this.vel.transform(s,{absolute:!0}),this},onPointerDown:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.relatedView;t.model.startBatch("arrowhead-move",{ui:!0,tool:this.cid}),t.can("arrowheadMove")&&(t.startArrowheadMove(this.arrowheadType),this.delegateDocumentEvents(),t.paper.undelegateEvents()),this.focus(),this.el.style.pointerEvents="none"}},onPointerMove:function(e){var t=Yn(e),r=this.paper.snapToGrid(t.clientX,t.clientY);this.relatedView.pointermove(t,r.x,r.y)},onPointerUp:function(e){this.undelegateDocumentEvents();var t=this.relatedView,r=t.paper,n=Yn(e),i=r.snapToGrid(n.clientX,n.clientY);t.pointerup(n,i.x,i.y),r.delegateEvents(),this.blur(),this.el.style.pointerEvents="",t.model.stopBatch("arrowhead-move",{ui:!0,tool:this.cid})}}),Lpe=cj.extend({name:"target-arrowhead",ratio:1,arrowheadType:"target",attributes:{d:"M -10 -8 10 0 -10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"target-arrowhead"}}),Npe=cj.extend({name:"source-arrowhead",ratio:0,arrowheadType:"source",attributes:{d:"M 10 -8 -10 0 10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"source-arrowhead"}}),vE=ov.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,scale:null,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){const{vel:e}=this;e.transform(this.getCellMatrix(),{absolute:!0})},getCellMatrix(){return this.relatedView.model.isLink()?this.getLinkMatrix():this.getElementMatrix()},getElementMatrix(){const{relatedView:e,options:t}=this;let{x:r=0,y:n=0,offset:i={},useModelGeometry:s,rotate:o,scale:a}=t,u=kpe(e,s);const c=e.model.angle();o||(u=u.bbox(c));const{x:f=0,y:h=0}=i;Ai(r)?r=parseFloat(r)/100*u.width:Qs(r)&&(r=Number(eo(r,u))),Ai(n)?n=parseFloat(n)/100*u.height:Qs(n)&&(n=Number(eo(n,u)));let v=$e.createSVGMatrix().translate(u.x+u.width/2,u.y+u.height/2);return o&&(v=v.rotate(c)),v=v.translate(r+f-u.width/2,n+h-u.height/2),a&&(v=v.scale(a)),v},getLinkMatrix(){const{relatedView:e,options:t}=this,{offset:r=0,distance:n=0,rotate:i,scale:s}=t;let o,a,u;Ai(n)?o=e.getTangentAtRatio(parseFloat(n)/100):o=e.getTangentAtLength(n),o?(a=o.start,u=o.vector().vectorAngle(new pe(1,0))||0):(a=e.getConnection().start,u=0);let c=$e.createSVGMatrix().translate(a.x,a.y).rotate(u).translate(0,r);return i||(c=c.rotate(-u)),s&&(c=c.scale(s)),c},onPointerDown:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.options.action;typeof t=="function"&&t.call(this.relatedView,e,this.relatedView,this)}}}),Y5=vE.extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(e,t,r){t.model.remove({ui:!0,tool:r.cid})}}});var Vf={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var qpe=Vf.exports,K5;function Dpe(){return K5||(K5=1,function(e,t){(function(){var r,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",h=1,v=2,y=4,m=1,_=2,w=1,S=2,E=4,A=8,T=16,I=32,q=64,p=128,C=256,O=512,N=30,V="...",W=800,G=16,ee=1,ae=2,K=3,U=1/0,j=9007199254740991,J=17976931348623157e292,de=NaN,ce=4294967295,Te=ce-1,Se=ce>>>1,re=[["ary",p],["bind",w],["bindKey",S],["curry",A],["curryRight",T],["flip",O],["partial",I],["partialRight",q],["rearg",C]],oe="[object Arguments]",ne="[object Array]",te="[object AsyncFunction]",le="[object Boolean]",We="[object Date]",Ne="[object DOMException]",Re="[object Error]",rt="[object Function]",Ve="[object GeneratorFunction]",L="[object Map]",B="[object Number]",H="[object Null]",X="[object Object]",xe="[object Promise]",ue="[object Proxy]",Ae="[object RegExp]",Ce="[object Set]",Be="[object String]",Le="[object Symbol]",Ie="[object Undefined]",be="[object WeakMap]",je="[object WeakSet]",ct="[object ArrayBuffer]",mt="[object DataView]",ft="[object Float32Array]",it="[object Float64Array]",Ht="[object Int8Array]",yr="[object Int16Array]",Qt="[object Int32Array]",cr="[object Uint8Array]",Lr="[object Uint8ClampedArray]",Br="[object Uint16Array]",bn="[object Uint32Array]",tr=/\b__p \+= '';/g,Ir=/\b(__p \+=) '' \+/g,vn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mn=/&(?:amp|lt|gt|quot|#39);/g,pn=/[&<>"']/g,Gn=RegExp(mn.source),ei=RegExp(pn.source),Bt=/<%-([\s\S]+?)%>/g,Ft=/<%([\s\S]+?)%>/g,zr=/<%=([\s\S]+?)%>/g,Fn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wn=/^\w*$/,jr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$n=/[\\^$.*+?()[\]{}|]/g,hi=RegExp($n.source),Jr=/^\s+/,Un=/\s/,On=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,di=/\{\n\/\* \[wrapped with (.+)\] \*/,Xe=/,? & /,Et=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Rt=/[()=,{}\[\]\/\s]/,kt=/\\(\\)?/g,Lt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,at=/\w*$/,He=/^[-+]0x[0-9a-f]+$/i,yt=/^0b[01]+$/i,Tt=/^\[object .+?Constructor\]$/,zt=/^0o[0-7]+$/i,an=/^(?:0|[1-9]\d*)$/,jn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Mt=/($^)/,en=/['\n\r\u2028\u2029\\]/g,xr="\\ud800-\\udfff",Nr="\\u0300-\\u036f",Vr="\\ufe20-\\ufe2f",Sr="\\u20d0-\\u20ff",xn=Nr+Vr+Sr,Xt="\\u2700-\\u27bf",pi="a-z\\xdf-\\xf6\\xf8-\\xff",wi="\\xac\\xb1\\xd7\\xf7",qi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ze="\\u2000-\\u206f",gt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ht="A-Z\\xc0-\\xd6\\xd8-\\xde",dt="\\ufe0e\\ufe0f",Ct=wi+qi+Ze+gt,rr="['â]",Hr="["+xr+"]",cn="["+Ct+"]",Gr="["+xn+"]",yn="\\d+",Bn="["+Xt+"]",gi="["+pi+"]",zo="[^"+xr+Ct+yn+Xt+pi+ht+"]",xs="\\ud83c[\\udffb-\\udfff]",Hn="(?:"+Gr+"|"+xs+")",_a="[^"+xr+"]",es="(?:\\ud83c[\\udde6-\\uddff]){2}",ba="[\\ud800-\\udbff][\\udc00-\\udfff]",Vo="["+ht+"]",Go="\\u200d",$o="(?:"+gi+"|"+zo+")",Kl="(?:"+Vo+"|"+zo+")",Jh="(?:"+rr+"(?:d|ll|m|re|s|t|ve))?",Za="(?:"+rr+"(?:D|LL|M|RE|S|T|VE))?",Zl=Hn+"?",Lc="["+dt+"]?",Qh="(?:"+Go+"(?:"+[_a,es,ba].join("|")+")"+Lc+Zl+")*",ed="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fv="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Jl=Lc+Zl+Qh,hv="(?:"+[Bn,es,ba].join("|")+")"+Jl,dv="(?:"+[_a+Gr+"?",Gr,es,ba,Hr].join("|")+")",Ql=RegExp(rr,"g"),pv=RegExp(Gr,"g"),ef=RegExp(xs+"(?="+xs+")|"+dv+Jl,"g"),gv=RegExp([Vo+"?"+gi+"+"+Jh+"(?="+[cn,Vo,"$"].join("|")+")",Kl+"+"+Za+"(?="+[cn,Vo+$o,"$"].join("|")+")",Vo+"?"+$o+"+"+Jh,Vo+"+"+Za,fv,ed,yn,hv].join("|"),"g"),vv=RegExp("["+Go+xr+xn+dt+"]"),mv=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,yv=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_v=-1,ln={};ln[ft]=ln[it]=ln[Ht]=ln[yr]=ln[Qt]=ln[cr]=ln[Lr]=ln[Br]=ln[bn]=!0,ln[oe]=ln[ne]=ln[ct]=ln[le]=ln[mt]=ln[We]=ln[Re]=ln[rt]=ln[L]=ln[B]=ln[X]=ln[Ae]=ln[Ce]=ln[Be]=ln[be]=!1;var tn={};tn[oe]=tn[ne]=tn[ct]=tn[mt]=tn[le]=tn[We]=tn[ft]=tn[it]=tn[Ht]=tn[yr]=tn[Qt]=tn[L]=tn[B]=tn[X]=tn[Ae]=tn[Ce]=tn[Be]=tn[Le]=tn[cr]=tn[Lr]=tn[Br]=tn[bn]=!0,tn[Re]=tn[rt]=tn[be]=!1;var td={Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã:"C",Ã§:"c",Ã:"D",Ã°:"d",Ã:"E",Ã:"E",Ã:"E",Ã:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",Ã:"I",Ã:"I",Ã:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã:"N",Ã±:"n",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã:"U",Ã:"U",Ã:"U",Ã:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã:"Ae",Ã¦:"ae",Ã:"Th",Ã¾:"th",Ã:"ss",Ä:"A",Ä:"A",Ä:"A",Ä:"a",Ä:"a",Ä:"a",Ä:"C",Ä:"C",Ä:"C",Ä:"C",Ä:"c",Ä:"c",Ä:"c",Ä:"c",Ä:"D",Ä:"D",Ä:"d",Ä:"d",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"G",Ä:"G",Ä :"G",Ä¢:"G",Ä:"g",Ä:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å:"l",Å:"l",Å:"N",Å:"N",Å:"N",Å:"N",Å:"n",Å:"n",Å:"n",Å:"n",Å:"O",Å:"O",Å:"O",Å:"o",Å:"o",Å:"o",Å:"R",Å:"R",Å:"R",Å:"r",Å:"r",Å:"r",Å:"S",Å:"S",Å:"S",Å :"S",Å:"s",Å:"s",Å:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å:"Oe",Å:"oe",Å:"'n",Å¿:"s"},tf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rd={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rf=parseFloat,bv=parseInt,id=typeof Oi=="object"&&Oi&&Oi.Object===Object&&Oi,wv=typeof self=="object"&&self&&self.Object===Object&&self,Mn=id||wv||Function("return this")(),Nc=t&&!t.nodeType&&t,go=Nc&&!0&&e&&!e.nodeType&&e,sd=go&&go.exports===Nc,nf=sd&&id.process,ts=function(){try{var Q=go&&go.require&&go.require("util").types;return Q||nf&&nf.binding&&nf.binding("util")}catch{}}(),g=ts&&ts.isArrayBuffer,x=ts&&ts.isDate,P=ts&&ts.isMap,k=ts&&ts.isRegExp,D=ts&&ts.isSet,F=ts&&ts.isTypedArray;function $(Q,me,ge){switch(ge.length){case 0:return Q.call(me);case 1:return Q.call(me,ge[0]);case 2:return Q.call(me,ge[0],ge[1]);case 3:return Q.call(me,ge[0],ge[1],ge[2])}return Q.apply(me,ge)}function he(Q,me,ge,Ue){for(var Qe=-1,At=Q==null?0:Q.length;++Qe<At;){var Pt=Q[Qe];me(Ue,Pt,ge(Pt),Q)}return Ue}function se(Q,me){for(var ge=-1,Ue=Q==null?0:Q.length;++ge<Ue&&me(Q[ge],ge,Q)!==!1;);return Q}function Ee(Q,me){for(var ge=Q==null?0:Q.length;ge--&&me(Q[ge],ge,Q)!==!1;);return Q}function De(Q,me){for(var ge=-1,Ue=Q==null?0:Q.length;++ge<Ue;)if(!me(Q[ge],ge,Q))return!1;return!0}function Ge(Q,me){for(var ge=-1,Ue=Q==null?0:Q.length,Qe=0,At=[];++ge<Ue;){var Pt=Q[ge];me(Pt,ge,Q)&&(At[Qe++]=Pt)}return At}function Me(Q,me){var ge=Q==null?0:Q.length;return!!ge&&un(Q,me,0)>-1}function ut(Q,me,ge){for(var Ue=-1,Qe=Q==null?0:Q.length;++Ue<Qe;)if(ge(me,Q[Ue]))return!0;return!1}function St(Q,me){for(var ge=-1,Ue=Q==null?0:Q.length,Qe=Array(Ue);++ge<Ue;)Qe[ge]=me(Q[ge],ge,Q);return Qe}function ar(Q,me){for(var ge=-1,Ue=me.length,Qe=Q.length;++ge<Ue;)Q[Qe+ge]=me[ge];return Q}function sr(Q,me,ge,Ue){var Qe=-1,At=Q==null?0:Q.length;for(Ue&&At&&(ge=Q[++Qe]);++Qe<At;)ge=me(ge,Q[Qe],Qe,Q);return ge}function oi(Q,me,ge,Ue){var Qe=Q==null?0:Q.length;for(Ue&&Qe&&(ge=Q[--Qe]);Qe--;)ge=me(ge,Q[Qe],Qe,Q);return ge}function kn(Q,me){for(var ge=-1,Ue=Q==null?0:Q.length;++ge<Ue;)if(me(Q[ge],ge,Q))return!0;return!1}var Bs=wa("length");function zs(Q){return Q.split("")}function Er(Q){return Q.match(Et)||[]}function Uo(Q,me,ge){var Ue;return ge(Q,function(Qe,At,Pt){if(me(Qe,At,Pt))return Ue=At,!1}),Ue}function Ar(Q,me,ge,Ue){for(var Qe=Q.length,At=ge+(Ue?1:-1);Ue?At--:++At<Qe;)if(me(Q[At],At,Q))return At;return-1}function un(Q,me,ge){return me===me?Ev(Q,me,ge):Ar(Q,qc,ge)}function qu(Q,me,ge,Ue){for(var Qe=ge-1,At=Q.length;++Qe<At;)if(Ue(Q[Qe],me))return Qe;return-1}function qc(Q){return Q!==Q}function Ss(Q,me){var ge=Q==null?0:Q.length;return ge?Pi(Q,me)/ge:de}function wa(Q){return function(me){return me==null?r:me[Q]}}function rs(Q){return function(me){return Q==null?r:Q[me]}}function vo(Q,me,ge,Ue,Qe){return Qe(Q,function(At,Pt,wt){ge=Ue?(Ue=!1,At):me(ge,At,Pt,wt)}),ge}function jo(Q,me){var ge=Q.length;for(Q.sort(me);ge--;)Q[ge]=Q[ge].value;return Q}function Pi(Q,me){for(var ge,Ue=-1,Qe=Q.length;++Ue<Qe;){var At=me(Q[Ue]);At!==r&&(ge=ge===r?At:ge+At)}return ge}function Du(Q,me){for(var ge=-1,Ue=Array(Q);++ge<Q;)Ue[ge]=me(ge);return Ue}function mo(Q,me){return St(me,function(ge){return[ge,Q[ge]]})}function Vs(Q){return Q&&Q.slice(0,ad(Q)+1).replace(Jr,"")}function Di(Q){return function(me){return Q(me)}}function sf(Q,me){return St(me,function(ge){return Q[ge]})}function Fu(Q,me){return Q.has(me)}function Yr(Q,me){for(var ge=-1,Ue=Q.length;++ge<Ue&&un(me,Q[ge],0)>-1;);return ge}function Bu(Q,me){for(var ge=Q.length;ge--&&un(me,Q[ge],0)>-1;);return ge}function Es(Q,me){for(var ge=Q.length,Ue=0;ge--;)Q[ge]===me&&++Ue;return Ue}var Ja=rs(td),xv=rs(tf);function Sv(Q){return"\\"+nd[Q]}function od(Q,me){return Q==null?r:Q[me]}function ns(Q){return vv.test(Q)}function of(Q){return mv.test(Q)}function Ho(Q){for(var me,ge=[];!(me=Q.next()).done;)ge.push(me.value);return ge}function Dc(Q){var me=-1,ge=Array(Q.size);return Q.forEach(function(Ue,Qe){ge[++me]=[Qe,Ue]}),ge}function Qa(Q,me){return function(ge){return Q(me(ge))}}function As(Q,me){for(var ge=-1,Ue=Q.length,Qe=0,At=[];++ge<Ue;){var Pt=Q[ge];(Pt===me||Pt===f)&&(Q[ge]=f,At[Qe++]=ge)}return At}function xa(Q){var me=-1,ge=Array(Q.size);return Q.forEach(function(Ue){ge[++me]=Ue}),ge}function af(Q){var me=-1,ge=Array(Q.size);return Q.forEach(function(Ue){ge[++me]=[Ue,Ue]}),ge}function Ev(Q,me,ge){for(var Ue=ge-1,Qe=Q.length;++Ue<Qe;)if(Q[Ue]===me)return Ue;return-1}function Fc(Q,me,ge){for(var Ue=ge+1;Ue--;)if(Q[Ue]===me)return Ue;return Ue}function Wo(Q){return ns(Q)?ud(Q):Bs(Q)}function Fi(Q){return ns(Q)?ie(Q):zs(Q)}function ad(Q){for(var me=Q.length;me--&&Un.test(Q.charAt(me)););return me}var uf=rs(rd);function ud(Q){for(var me=ef.lastIndex=0;ef.test(Q);)++me;return me}function ie(Q){return Q.match(ef)||[]}function _e(Q){return Q.match(gv)||[]}var Oe=function Q(me){me=me==null?Mn:ke.defaults(Mn.Object(),me,ke.pick(Mn,yv));var ge=me.Array,Ue=me.Date,Qe=me.Error,At=me.Function,Pt=me.Math,wt=me.Object,fr=me.RegExp,Ut=me.String,_r=me.TypeError,ai=ge.prototype,vi=At.prototype,ui=wt.prototype,Bi=me["__core-js_shared__"],yo=vi.toString,nr=ui.hasOwnProperty,EH=0,fT=function(){var l=/[^.]+$/.exec(Bi&&Bi.keys&&Bi.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),cd=ui.toString,AH=yo.call(wt),TH=Mn._,PH=fr("^"+yo.call(nr).replace($n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ld=sd?me.Buffer:r,eu=me.Symbol,fd=me.Uint8Array,hT=ld?ld.allocUnsafe:r,hd=Qa(wt.getPrototypeOf,wt),dT=wt.create,pT=ui.propertyIsEnumerable,dd=ai.splice,gT=eu?eu.isConcatSpreadable:r,cf=eu?eu.iterator:r,zu=eu?eu.toStringTag:r,pd=function(){try{var l=ju(wt,"defineProperty");return l({},"",{}),l}catch{}}(),CH=me.clearTimeout!==Mn.clearTimeout&&me.clearTimeout,RH=Ue&&Ue.now!==Mn.Date.now&&Ue.now,IH=me.setTimeout!==Mn.setTimeout&&me.setTimeout,gd=Pt.ceil,vd=Pt.floor,Av=wt.getOwnPropertySymbols,OH=ld?ld.isBuffer:r,vT=me.isFinite,MH=ai.join,kH=Qa(wt.keys,wt),ci=Pt.max,Ci=Pt.min,LH=Ue.now,NH=me.parseInt,mT=Pt.random,qH=ai.reverse,Tv=ju(me,"DataView"),lf=ju(me,"Map"),Pv=ju(me,"Promise"),Bc=ju(me,"Set"),ff=ju(me,"WeakMap"),hf=ju(wt,"create"),md=ff&&new ff,zc={},DH=Hu(Tv),FH=Hu(lf),BH=Hu(Pv),zH=Hu(Bc),VH=Hu(ff),yd=eu?eu.prototype:r,df=yd?yd.valueOf:r,yT=yd?yd.toString:r;function Y(l){if(zn(l)&&!ur(l)&&!(l instanceof qr)){if(l instanceof Gs)return l;if(nr.call(l,"__wrapped__"))return _P(l)}return new Gs(l)}var Vc=function(){function l(){}return function(d){if(!Ln(d))return{};if(dT)return dT(d);l.prototype=d;var b=new l;return l.prototype=r,b}}();function _d(){}function Gs(l,d){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=r}Y.templateSettings={escape:Bt,evaluate:Ft,interpolate:zr,variable:"",imports:{_:Y}},Y.prototype=_d.prototype,Y.prototype.constructor=Y,Gs.prototype=Vc(_d.prototype),Gs.prototype.constructor=Gs;function qr(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ce,this.__views__=[]}function GH(){var l=new qr(this.__wrapped__);return l.__actions__=is(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=is(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=is(this.__views__),l}function $H(){if(this.__filtered__){var l=new qr(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function UH(){var l=this.__wrapped__.value(),d=this.__dir__,b=ur(l),M=d<0,z=b?l.length:0,Z=rW(0,z,this.__views__),fe=Z.start,ye=Z.end,Pe=ye-fe,et=M?ye:fe-1,tt=this.__iteratees__,ot=tt.length,_t=0,qt=Ci(Pe,this.__takeCount__);if(!b||!M&&z==Pe&&qt==Pe)return GT(l,this.__actions__);var Zt=[];e:for(;Pe--&&_t<qt;){et+=d;for(var vr=-1,Jt=l[et];++vr<ot;){var Or=tt[vr],$r=Or.iteratee,Cs=Or.type,Gi=$r(Jt);if(Cs==ae)Jt=Gi;else if(!Gi){if(Cs==ee)continue e;break e}}Zt[_t++]=Jt}return Zt}qr.prototype=Vc(_d.prototype),qr.prototype.constructor=qr;function Vu(l){var d=-1,b=l==null?0:l.length;for(this.clear();++d<b;){var M=l[d];this.set(M[0],M[1])}}function jH(){this.__data__=hf?hf(null):{},this.size=0}function HH(l){var d=this.has(l)&&delete this.__data__[l];return this.size-=d?1:0,d}function WH(l){var d=this.__data__;if(hf){var b=d[l];return b===u?r:b}return nr.call(d,l)?d[l]:r}function XH(l){var d=this.__data__;return hf?d[l]!==r:nr.call(d,l)}function YH(l,d){var b=this.__data__;return this.size+=this.has(l)?0:1,b[l]=hf&&d===r?u:d,this}Vu.prototype.clear=jH,Vu.prototype.delete=HH,Vu.prototype.get=WH,Vu.prototype.has=XH,Vu.prototype.set=YH;function Sa(l){var d=-1,b=l==null?0:l.length;for(this.clear();++d<b;){var M=l[d];this.set(M[0],M[1])}}function KH(){this.__data__=[],this.size=0}function ZH(l){var d=this.__data__,b=bd(d,l);if(b<0)return!1;var M=d.length-1;return b==M?d.pop():dd.call(d,b,1),--this.size,!0}function JH(l){var d=this.__data__,b=bd(d,l);return b<0?r:d[b][1]}function QH(l){return bd(this.__data__,l)>-1}function e9(l,d){var b=this.__data__,M=bd(b,l);return M<0?(++this.size,b.push([l,d])):b[M][1]=d,this}Sa.prototype.clear=KH,Sa.prototype.delete=ZH,Sa.prototype.get=JH,Sa.prototype.has=QH,Sa.prototype.set=e9;function Ea(l){var d=-1,b=l==null?0:l.length;for(this.clear();++d<b;){var M=l[d];this.set(M[0],M[1])}}function t9(){this.size=0,this.__data__={hash:new Vu,map:new(lf||Sa),string:new Vu}}function r9(l){var d=Md(this,l).delete(l);return this.size-=d?1:0,d}function n9(l){return Md(this,l).get(l)}function i9(l){return Md(this,l).has(l)}function s9(l,d){var b=Md(this,l),M=b.size;return b.set(l,d),this.size+=b.size==M?0:1,this}Ea.prototype.clear=t9,Ea.prototype.delete=r9,Ea.prototype.get=n9,Ea.prototype.has=i9,Ea.prototype.set=s9;function Gu(l){var d=-1,b=l==null?0:l.length;for(this.__data__=new Ea;++d<b;)this.add(l[d])}function o9(l){return this.__data__.set(l,u),this}function a9(l){return this.__data__.has(l)}Gu.prototype.add=Gu.prototype.push=o9,Gu.prototype.has=a9;function _o(l){var d=this.__data__=new Sa(l);this.size=d.size}function u9(){this.__data__=new Sa,this.size=0}function c9(l){var d=this.__data__,b=d.delete(l);return this.size=d.size,b}function l9(l){return this.__data__.get(l)}function f9(l){return this.__data__.has(l)}function h9(l,d){var b=this.__data__;if(b instanceof Sa){var M=b.__data__;if(!lf||M.length<i-1)return M.push([l,d]),this.size=++b.size,this;b=this.__data__=new Ea(M)}return b.set(l,d),this.size=b.size,this}_o.prototype.clear=u9,_o.prototype.delete=c9,_o.prototype.get=l9,_o.prototype.has=f9,_o.prototype.set=h9;function _T(l,d){var b=ur(l),M=!b&&Wu(l),z=!b&&!M&&su(l),Z=!b&&!M&&!z&&jc(l),fe=b||M||z||Z,ye=fe?Du(l.length,Ut):[],Pe=ye.length;for(var et in l)(d||nr.call(l,et))&&!(fe&&(et=="length"||z&&(et=="offset"||et=="parent")||Z&&(et=="buffer"||et=="byteLength"||et=="byteOffset")||Ca(et,Pe)))&&ye.push(et);return ye}function bT(l){var d=l.length;return d?l[Fv(0,d-1)]:r}function d9(l,d){return kd(is(l),$u(d,0,l.length))}function p9(l){return kd(is(l))}function Cv(l,d,b){(b!==r&&!bo(l[d],b)||b===r&&!(d in l))&&Aa(l,d,b)}function pf(l,d,b){var M=l[d];(!(nr.call(l,d)&&bo(M,b))||b===r&&!(d in l))&&Aa(l,d,b)}function bd(l,d){for(var b=l.length;b--;)if(bo(l[b][0],d))return b;return-1}function g9(l,d,b,M){return tu(l,function(z,Z,fe){d(M,z,b(z),fe)}),M}function wT(l,d){return l&&Yo(d,mi(d),l)}function v9(l,d){return l&&Yo(d,os(d),l)}function Aa(l,d,b){d=="__proto__"&&pd?pd(l,d,{configurable:!0,enumerable:!0,value:b,writable:!0}):l[d]=b}function Rv(l,d){for(var b=-1,M=d.length,z=ge(M),Z=l==null;++b<M;)z[b]=Z?r:cm(l,d[b]);return z}function $u(l,d,b){return l===l&&(b!==r&&(l=l<=b?l:b),d!==r&&(l=l>=d?l:d)),l}function $s(l,d,b,M,z,Z){var fe,ye=d&h,Pe=d&v,et=d&y;if(b&&(fe=z?b(l,M,z,Z):b(l)),fe!==r)return fe;if(!Ln(l))return l;var tt=ur(l);if(tt){if(fe=iW(l),!ye)return is(l,fe)}else{var ot=Ri(l),_t=ot==rt||ot==Ve;if(su(l))return jT(l,ye);if(ot==X||ot==oe||_t&&!z){if(fe=Pe||_t?{}:lP(l),!ye)return Pe?W9(l,v9(fe,l)):H9(l,wT(fe,l))}else{if(!tn[ot])return z?l:{};fe=sW(l,ot,ye)}}Z||(Z=new _o);var qt=Z.get(l);if(qt)return qt;Z.set(l,fe),BP(l)?l.forEach(function(Jt){fe.add($s(Jt,d,b,Jt,l,Z))}):DP(l)&&l.forEach(function(Jt,Or){fe.set(Or,$s(Jt,d,b,Or,l,Z))});var Zt=et?Pe?Yv:Xv:Pe?os:mi,vr=tt?r:Zt(l);return se(vr||l,function(Jt,Or){vr&&(Or=Jt,Jt=l[Or]),pf(fe,Or,$s(Jt,d,b,Or,l,Z))}),fe}function m9(l){var d=mi(l);return function(b){return xT(b,l,d)}}function xT(l,d,b){var M=b.length;if(l==null)return!M;for(l=wt(l);M--;){var z=b[M],Z=d[z],fe=l[z];if(fe===r&&!(z in l)||!Z(fe))return!1}return!0}function ST(l,d,b){if(typeof l!="function")throw new _r(o);return wf(function(){l.apply(r,b)},d)}function gf(l,d,b,M){var z=-1,Z=Me,fe=!0,ye=l.length,Pe=[],et=d.length;if(!ye)return Pe;b&&(d=St(d,Di(b))),M?(Z=ut,fe=!1):d.length>=i&&(Z=Fu,fe=!1,d=new Gu(d));e:for(;++z<ye;){var tt=l[z],ot=b==null?tt:b(tt);if(tt=M||tt!==0?tt:0,fe&&ot===ot){for(var _t=et;_t--;)if(d[_t]===ot)continue e;Pe.push(tt)}else Z(d,ot,M)||Pe.push(tt)}return Pe}var tu=KT(Xo),ET=KT(Ov,!0);function y9(l,d){var b=!0;return tu(l,function(M,z,Z){return b=!!d(M,z,Z),b}),b}function wd(l,d,b){for(var M=-1,z=l.length;++M<z;){var Z=l[M],fe=d(Z);if(fe!=null&&(ye===r?fe===fe&&!Ps(fe):b(fe,ye)))var ye=fe,Pe=Z}return Pe}function _9(l,d,b,M){var z=l.length;for(b=hr(b),b<0&&(b=-b>z?0:z+b),M=M===r||M>z?z:hr(M),M<0&&(M+=z),M=b>M?0:VP(M);b<M;)l[b++]=d;return l}function AT(l,d){var b=[];return tu(l,function(M,z,Z){d(M,z,Z)&&b.push(M)}),b}function xi(l,d,b,M,z){var Z=-1,fe=l.length;for(b||(b=aW),z||(z=[]);++Z<fe;){var ye=l[Z];d>0&&b(ye)?d>1?xi(ye,d-1,b,M,z):ar(z,ye):M||(z[z.length]=ye)}return z}var Iv=ZT(),TT=ZT(!0);function Xo(l,d){return l&&Iv(l,d,mi)}function Ov(l,d){return l&&TT(l,d,mi)}function xd(l,d){return Ge(d,function(b){return Ra(l[b])})}function Uu(l,d){d=nu(d,l);for(var b=0,M=d.length;l!=null&&b<M;)l=l[Ko(d[b++])];return b&&b==M?l:r}function PT(l,d,b){var M=d(l);return ur(l)?M:ar(M,b(l))}function zi(l){return l==null?l===r?Ie:H:zu&&zu in wt(l)?tW(l):pW(l)}function Mv(l,d){return l>d}function b9(l,d){return l!=null&&nr.call(l,d)}function w9(l,d){return l!=null&&d in wt(l)}function x9(l,d,b){return l>=Ci(d,b)&&l<ci(d,b)}function kv(l,d,b){for(var M=b?ut:Me,z=l[0].length,Z=l.length,fe=Z,ye=ge(Z),Pe=1/0,et=[];fe--;){var tt=l[fe];fe&&d&&(tt=St(tt,Di(d))),Pe=Ci(tt.length,Pe),ye[fe]=!b&&(d||z>=120&&tt.length>=120)?new Gu(fe&&tt):r}tt=l[0];var ot=-1,_t=ye[0];e:for(;++ot<z&&et.length<Pe;){var qt=tt[ot],Zt=d?d(qt):qt;if(qt=b||qt!==0?qt:0,!(_t?Fu(_t,Zt):M(et,Zt,b))){for(fe=Z;--fe;){var vr=ye[fe];if(!(vr?Fu(vr,Zt):M(l[fe],Zt,b)))continue e}_t&&_t.push(Zt),et.push(qt)}}return et}function S9(l,d,b,M){return Xo(l,function(z,Z,fe){d(M,b(z),Z,fe)}),M}function vf(l,d,b){d=nu(d,l),l=pP(l,d);var M=l==null?l:l[Ko(js(d))];return M==null?r:$(M,l,b)}function CT(l){return zn(l)&&zi(l)==oe}function E9(l){return zn(l)&&zi(l)==ct}function A9(l){return zn(l)&&zi(l)==We}function mf(l,d,b,M,z){return l===d?!0:l==null||d==null||!zn(l)&&!zn(d)?l!==l&&d!==d:T9(l,d,b,M,mf,z)}function T9(l,d,b,M,z,Z){var fe=ur(l),ye=ur(d),Pe=fe?ne:Ri(l),et=ye?ne:Ri(d);Pe=Pe==oe?X:Pe,et=et==oe?X:et;var tt=Pe==X,ot=et==X,_t=Pe==et;if(_t&&su(l)){if(!su(d))return!1;fe=!0,tt=!1}if(_t&&!tt)return Z||(Z=new _o),fe||jc(l)?aP(l,d,b,M,z,Z):Q9(l,d,Pe,b,M,z,Z);if(!(b&m)){var qt=tt&&nr.call(l,"__wrapped__"),Zt=ot&&nr.call(d,"__wrapped__");if(qt||Zt){var vr=qt?l.value():l,Jt=Zt?d.value():d;return Z||(Z=new _o),z(vr,Jt,b,M,Z)}}return _t?(Z||(Z=new _o),eW(l,d,b,M,z,Z)):!1}function P9(l){return zn(l)&&Ri(l)==L}function Lv(l,d,b,M){var z=b.length,Z=z,fe=!M;if(l==null)return!Z;for(l=wt(l);z--;){var ye=b[z];if(fe&&ye[2]?ye[1]!==l[ye[0]]:!(ye[0]in l))return!1}for(;++z<Z;){ye=b[z];var Pe=ye[0],et=l[Pe],tt=ye[1];if(fe&&ye[2]){if(et===r&&!(Pe in l))return!1}else{var ot=new _o;if(M)var _t=M(et,tt,Pe,l,d,ot);if(!(_t===r?mf(tt,et,m|_,M,ot):_t))return!1}}return!0}function RT(l){if(!Ln(l)||cW(l))return!1;var d=Ra(l)?PH:Tt;return d.test(Hu(l))}function C9(l){return zn(l)&&zi(l)==Ae}function R9(l){return zn(l)&&Ri(l)==Ce}function I9(l){return zn(l)&&Bd(l.length)&&!!ln[zi(l)]}function IT(l){return typeof l=="function"?l:l==null?as:typeof l=="object"?ur(l)?kT(l[0],l[1]):MT(l):JP(l)}function Nv(l){if(!bf(l))return kH(l);var d=[];for(var b in wt(l))nr.call(l,b)&&b!="constructor"&&d.push(b);return d}function O9(l){if(!Ln(l))return dW(l);var d=bf(l),b=[];for(var M in l)M=="constructor"&&(d||!nr.call(l,M))||b.push(M);return b}function qv(l,d){return l<d}function OT(l,d){var b=-1,M=ss(l)?ge(l.length):[];return tu(l,function(z,Z,fe){M[++b]=d(z,Z,fe)}),M}function MT(l){var d=Zv(l);return d.length==1&&d[0][2]?hP(d[0][0],d[0][1]):function(b){return b===l||Lv(b,l,d)}}function kT(l,d){return Qv(l)&&fP(d)?hP(Ko(l),d):function(b){var M=cm(b,l);return M===r&&M===d?lm(b,l):mf(d,M,m|_)}}function Sd(l,d,b,M,z){l!==d&&Iv(d,function(Z,fe){if(z||(z=new _o),Ln(Z))M9(l,d,fe,b,Sd,M,z);else{var ye=M?M(tm(l,fe),Z,fe+"",l,d,z):r;ye===r&&(ye=Z),Cv(l,fe,ye)}},os)}function M9(l,d,b,M,z,Z,fe){var ye=tm(l,b),Pe=tm(d,b),et=fe.get(Pe);if(et){Cv(l,b,et);return}var tt=Z?Z(ye,Pe,b+"",l,d,fe):r,ot=tt===r;if(ot){var _t=ur(Pe),qt=!_t&&su(Pe),Zt=!_t&&!qt&&jc(Pe);tt=Pe,_t||qt||Zt?ur(ye)?tt=ye:Wn(ye)?tt=is(ye):qt?(ot=!1,tt=jT(Pe,!0)):Zt?(ot=!1,tt=HT(Pe,!0)):tt=[]:xf(Pe)||Wu(Pe)?(tt=ye,Wu(ye)?tt=GP(ye):(!Ln(ye)||Ra(ye))&&(tt=lP(Pe))):ot=!1}ot&&(fe.set(Pe,tt),z(tt,Pe,M,Z,fe),fe.delete(Pe)),Cv(l,b,tt)}function LT(l,d){var b=l.length;if(b)return d+=d<0?b:0,Ca(d,b)?l[d]:r}function NT(l,d,b){d.length?d=St(d,function(Z){return ur(Z)?function(fe){return Uu(fe,Z.length===1?Z[0]:Z)}:Z}):d=[as];var M=-1;d=St(d,Di(Yt()));var z=OT(l,function(Z,fe,ye){var Pe=St(d,function(et){return et(Z)});return{criteria:Pe,index:++M,value:Z}});return jo(z,function(Z,fe){return j9(Z,fe,b)})}function k9(l,d){return qT(l,d,function(b,M){return lm(l,M)})}function qT(l,d,b){for(var M=-1,z=d.length,Z={};++M<z;){var fe=d[M],ye=Uu(l,fe);b(ye,fe)&&yf(Z,nu(fe,l),ye)}return Z}function L9(l){return function(d){return Uu(d,l)}}function Dv(l,d,b,M){var z=M?qu:un,Z=-1,fe=d.length,ye=l;for(l===d&&(d=is(d)),b&&(ye=St(l,Di(b)));++Z<fe;)for(var Pe=0,et=d[Z],tt=b?b(et):et;(Pe=z(ye,tt,Pe,M))>-1;)ye!==l&&dd.call(ye,Pe,1),dd.call(l,Pe,1);return l}function DT(l,d){for(var b=l?d.length:0,M=b-1;b--;){var z=d[b];if(b==M||z!==Z){var Z=z;Ca(z)?dd.call(l,z,1):Vv(l,z)}}return l}function Fv(l,d){return l+vd(mT()*(d-l+1))}function N9(l,d,b,M){for(var z=-1,Z=ci(gd((d-l)/(b||1)),0),fe=ge(Z);Z--;)fe[M?Z:++z]=l,l+=b;return fe}function Bv(l,d){var b="";if(!l||d<1||d>j)return b;do d%2&&(b+=l),d=vd(d/2),d&&(l+=l);while(d);return b}function br(l,d){return rm(dP(l,d,as),l+"")}function q9(l){return bT(Hc(l))}function D9(l,d){var b=Hc(l);return kd(b,$u(d,0,b.length))}function yf(l,d,b,M){if(!Ln(l))return l;d=nu(d,l);for(var z=-1,Z=d.length,fe=Z-1,ye=l;ye!=null&&++z<Z;){var Pe=Ko(d[z]),et=b;if(Pe==="__proto__"||Pe==="constructor"||Pe==="prototype")return l;if(z!=fe){var tt=ye[Pe];et=M?M(tt,Pe,ye):r,et===r&&(et=Ln(tt)?tt:Ca(d[z+1])?[]:{})}pf(ye,Pe,et),ye=ye[Pe]}return l}var FT=md?function(l,d){return md.set(l,d),l}:as,F9=pd?function(l,d){return pd(l,"toString",{configurable:!0,enumerable:!1,value:hm(d),writable:!0})}:as;function B9(l){return kd(Hc(l))}function Us(l,d,b){var M=-1,z=l.length;d<0&&(d=-d>z?0:z+d),b=b>z?z:b,b<0&&(b+=z),z=d>b?0:b-d>>>0,d>>>=0;for(var Z=ge(z);++M<z;)Z[M]=l[M+d];return Z}function z9(l,d){var b;return tu(l,function(M,z,Z){return b=d(M,z,Z),!b}),!!b}function Ed(l,d,b){var M=0,z=l==null?M:l.length;if(typeof d=="number"&&d===d&&z<=Se){for(;M<z;){var Z=M+z>>>1,fe=l[Z];fe!==null&&!Ps(fe)&&(b?fe<=d:fe<d)?M=Z+1:z=Z}return z}return zv(l,d,as,b)}function zv(l,d,b,M){var z=0,Z=l==null?0:l.length;if(Z===0)return 0;d=b(d);for(var fe=d!==d,ye=d===null,Pe=Ps(d),et=d===r;z<Z;){var tt=vd((z+Z)/2),ot=b(l[tt]),_t=ot!==r,qt=ot===null,Zt=ot===ot,vr=Ps(ot);if(fe)var Jt=M||Zt;else et?Jt=Zt&&(M||_t):ye?Jt=Zt&&_t&&(M||!qt):Pe?Jt=Zt&&_t&&!qt&&(M||!vr):qt||vr?Jt=!1:Jt=M?ot<=d:ot<d;Jt?z=tt+1:Z=tt}return Ci(Z,Te)}function BT(l,d){for(var b=-1,M=l.length,z=0,Z=[];++b<M;){var fe=l[b],ye=d?d(fe):fe;if(!b||!bo(ye,Pe)){var Pe=ye;Z[z++]=fe===0?0:fe}}return Z}function zT(l){return typeof l=="number"?l:Ps(l)?de:+l}function Ts(l){if(typeof l=="string")return l;if(ur(l))return St(l,Ts)+"";if(Ps(l))return yT?yT.call(l):"";var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}function ru(l,d,b){var M=-1,z=Me,Z=l.length,fe=!0,ye=[],Pe=ye;if(b)fe=!1,z=ut;else if(Z>=i){var et=d?null:Z9(l);if(et)return xa(et);fe=!1,z=Fu,Pe=new Gu}else Pe=d?[]:ye;e:for(;++M<Z;){var tt=l[M],ot=d?d(tt):tt;if(tt=b||tt!==0?tt:0,fe&&ot===ot){for(var _t=Pe.length;_t--;)if(Pe[_t]===ot)continue e;d&&Pe.push(ot),ye.push(tt)}else z(Pe,ot,b)||(Pe!==ye&&Pe.push(ot),ye.push(tt))}return ye}function Vv(l,d){return d=nu(d,l),l=pP(l,d),l==null||delete l[Ko(js(d))]}function VT(l,d,b,M){return yf(l,d,b(Uu(l,d)),M)}function Ad(l,d,b,M){for(var z=l.length,Z=M?z:-1;(M?Z--:++Z<z)&&d(l[Z],Z,l););return b?Us(l,M?0:Z,M?Z+1:z):Us(l,M?Z+1:0,M?z:Z)}function GT(l,d){var b=l;return b instanceof qr&&(b=b.value()),sr(d,function(M,z){return z.func.apply(z.thisArg,ar([M],z.args))},b)}function Gv(l,d,b){var M=l.length;if(M<2)return M?ru(l[0]):[];for(var z=-1,Z=ge(M);++z<M;)for(var fe=l[z],ye=-1;++ye<M;)ye!=z&&(Z[z]=gf(Z[z]||fe,l[ye],d,b));return ru(xi(Z,1),d,b)}function $T(l,d,b){for(var M=-1,z=l.length,Z=d.length,fe={};++M<z;){var ye=M<Z?d[M]:r;b(fe,l[M],ye)}return fe}function $v(l){return Wn(l)?l:[]}function Uv(l){return typeof l=="function"?l:as}function nu(l,d){return ur(l)?l:Qv(l,d)?[l]:yP(rn(l))}var V9=br;function iu(l,d,b){var M=l.length;return b=b===r?M:b,!d&&b>=M?l:Us(l,d,b)}var UT=CH||function(l){return Mn.clearTimeout(l)};function jT(l,d){if(d)return l.slice();var b=l.length,M=hT?hT(b):new l.constructor(b);return l.copy(M),M}function jv(l){var d=new l.constructor(l.byteLength);return new fd(d).set(new fd(l)),d}function G9(l,d){var b=d?jv(l.buffer):l.buffer;return new l.constructor(b,l.byteOffset,l.byteLength)}function $9(l){var d=new l.constructor(l.source,at.exec(l));return d.lastIndex=l.lastIndex,d}function U9(l){return df?wt(df.call(l)):{}}function HT(l,d){var b=d?jv(l.buffer):l.buffer;return new l.constructor(b,l.byteOffset,l.length)}function WT(l,d){if(l!==d){var b=l!==r,M=l===null,z=l===l,Z=Ps(l),fe=d!==r,ye=d===null,Pe=d===d,et=Ps(d);if(!ye&&!et&&!Z&&l>d||Z&&fe&&Pe&&!ye&&!et||M&&fe&&Pe||!b&&Pe||!z)return 1;if(!M&&!Z&&!et&&l<d||et&&b&&z&&!M&&!Z||ye&&b&&z||!fe&&z||!Pe)return-1}return 0}function j9(l,d,b){for(var M=-1,z=l.criteria,Z=d.criteria,fe=z.length,ye=b.length;++M<fe;){var Pe=WT(z[M],Z[M]);if(Pe){if(M>=ye)return Pe;var et=b[M];return Pe*(et=="desc"?-1:1)}}return l.index-d.index}function XT(l,d,b,M){for(var z=-1,Z=l.length,fe=b.length,ye=-1,Pe=d.length,et=ci(Z-fe,0),tt=ge(Pe+et),ot=!M;++ye<Pe;)tt[ye]=d[ye];for(;++z<fe;)(ot||z<Z)&&(tt[b[z]]=l[z]);for(;et--;)tt[ye++]=l[z++];return tt}function YT(l,d,b,M){for(var z=-1,Z=l.length,fe=-1,ye=b.length,Pe=-1,et=d.length,tt=ci(Z-ye,0),ot=ge(tt+et),_t=!M;++z<tt;)ot[z]=l[z];for(var qt=z;++Pe<et;)ot[qt+Pe]=d[Pe];for(;++fe<ye;)(_t||z<Z)&&(ot[qt+b[fe]]=l[z++]);return ot}function is(l,d){var b=-1,M=l.length;for(d||(d=ge(M));++b<M;)d[b]=l[b];return d}function Yo(l,d,b,M){var z=!b;b||(b={});for(var Z=-1,fe=d.length;++Z<fe;){var ye=d[Z],Pe=M?M(b[ye],l[ye],ye,b,l):r;Pe===r&&(Pe=l[ye]),z?Aa(b,ye,Pe):pf(b,ye,Pe)}return b}function H9(l,d){return Yo(l,Jv(l),d)}function W9(l,d){return Yo(l,uP(l),d)}function Td(l,d){return function(b,M){var z=ur(b)?he:g9,Z=d?d():{};return z(b,l,Yt(M,2),Z)}}function Gc(l){return br(function(d,b){var M=-1,z=b.length,Z=z>1?b[z-1]:r,fe=z>2?b[2]:r;for(Z=l.length>3&&typeof Z=="function"?(z--,Z):r,fe&&Vi(b[0],b[1],fe)&&(Z=z<3?r:Z,z=1),d=wt(d);++M<z;){var ye=b[M];ye&&l(d,ye,M,Z)}return d})}function KT(l,d){return function(b,M){if(b==null)return b;if(!ss(b))return l(b,M);for(var z=b.length,Z=d?z:-1,fe=wt(b);(d?Z--:++Z<z)&&M(fe[Z],Z,fe)!==!1;);return b}}function ZT(l){return function(d,b,M){for(var z=-1,Z=wt(d),fe=M(d),ye=fe.length;ye--;){var Pe=fe[l?ye:++z];if(b(Z[Pe],Pe,Z)===!1)break}return d}}function X9(l,d,b){var M=d&w,z=_f(l);function Z(){var fe=this&&this!==Mn&&this instanceof Z?z:l;return fe.apply(M?b:this,arguments)}return Z}function JT(l){return function(d){d=rn(d);var b=ns(d)?Fi(d):r,M=b?b[0]:d.charAt(0),z=b?iu(b,1).join(""):d.slice(1);return M[l]()+z}}function $c(l){return function(d){return sr(KP(YP(d).replace(Ql,"")),l,"")}}function _f(l){return function(){var d=arguments;switch(d.length){case 0:return new l;case 1:return new l(d[0]);case 2:return new l(d[0],d[1]);case 3:return new l(d[0],d[1],d[2]);case 4:return new l(d[0],d[1],d[2],d[3]);case 5:return new l(d[0],d[1],d[2],d[3],d[4]);case 6:return new l(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new l(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var b=Vc(l.prototype),M=l.apply(b,d);return Ln(M)?M:b}}function Y9(l,d,b){var M=_f(l);function z(){for(var Z=arguments.length,fe=ge(Z),ye=Z,Pe=Uc(z);ye--;)fe[ye]=arguments[ye];var et=Z<3&&fe[0]!==Pe&&fe[Z-1]!==Pe?[]:As(fe,Pe);if(Z-=et.length,Z<b)return nP(l,d,Pd,z.placeholder,r,fe,et,r,r,b-Z);var tt=this&&this!==Mn&&this instanceof z?M:l;return $(tt,this,fe)}return z}function QT(l){return function(d,b,M){var z=wt(d);if(!ss(d)){var Z=Yt(b,3);d=mi(d),b=function(ye){return Z(z[ye],ye,z)}}var fe=l(d,b,M);return fe>-1?z[Z?d[fe]:fe]:r}}function eP(l){return Pa(function(d){var b=d.length,M=b,z=Gs.prototype.thru;for(l&&d.reverse();M--;){var Z=d[M];if(typeof Z!="function")throw new _r(o);if(z&&!fe&&Od(Z)=="wrapper")var fe=new Gs([],!0)}for(M=fe?M:b;++M<b;){Z=d[M];var ye=Od(Z),Pe=ye=="wrapper"?Kv(Z):r;Pe&&em(Pe[0])&&Pe[1]==(p|A|I|C)&&!Pe[4].length&&Pe[9]==1?fe=fe[Od(Pe[0])].apply(fe,Pe[3]):fe=Z.length==1&&em(Z)?fe[ye]():fe.thru(Z)}return function(){var et=arguments,tt=et[0];if(fe&&et.length==1&&ur(tt))return fe.plant(tt).value();for(var ot=0,_t=b?d[ot].apply(this,et):tt;++ot<b;)_t=d[ot].call(this,_t);return _t}})}function Pd(l,d,b,M,z,Z,fe,ye,Pe,et){var tt=d&p,ot=d&w,_t=d&S,qt=d&(A|T),Zt=d&O,vr=_t?r:_f(l);function Jt(){for(var Or=arguments.length,$r=ge(Or),Cs=Or;Cs--;)$r[Cs]=arguments[Cs];if(qt)var Gi=Uc(Jt),Rs=Es($r,Gi);if(M&&($r=XT($r,M,z,qt)),Z&&($r=YT($r,Z,fe,qt)),Or-=Rs,qt&&Or<et){var Xn=As($r,Gi);return nP(l,d,Pd,Jt.placeholder,b,$r,Xn,ye,Pe,et-Or)}var wo=ot?b:this,Oa=_t?wo[l]:l;return Or=$r.length,ye?$r=gW($r,ye):Zt&&Or>1&&$r.reverse(),tt&&Pe<Or&&($r.length=Pe),this&&this!==Mn&&this instanceof Jt&&(Oa=vr||_f(Oa)),Oa.apply(wo,$r)}return Jt}function tP(l,d){return function(b,M){return S9(b,l,d(M),{})}}function Cd(l,d){return function(b,M){var z;if(b===r&&M===r)return d;if(b!==r&&(z=b),M!==r){if(z===r)return M;typeof b=="string"||typeof M=="string"?(b=Ts(b),M=Ts(M)):(b=zT(b),M=zT(M)),z=l(b,M)}return z}}function Hv(l){return Pa(function(d){return d=St(d,Di(Yt())),br(function(b){var M=this;return l(d,function(z){return $(z,M,b)})})})}function Rd(l,d){d=d===r?" ":Ts(d);var b=d.length;if(b<2)return b?Bv(d,l):d;var M=Bv(d,gd(l/Wo(d)));return ns(d)?iu(Fi(M),0,l).join(""):M.slice(0,l)}function K9(l,d,b,M){var z=d&w,Z=_f(l);function fe(){for(var ye=-1,Pe=arguments.length,et=-1,tt=M.length,ot=ge(tt+Pe),_t=this&&this!==Mn&&this instanceof fe?Z:l;++et<tt;)ot[et]=M[et];for(;Pe--;)ot[et++]=arguments[++ye];return $(_t,z?b:this,ot)}return fe}function rP(l){return function(d,b,M){return M&&typeof M!="number"&&Vi(d,b,M)&&(b=M=r),d=Ia(d),b===r?(b=d,d=0):b=Ia(b),M=M===r?d<b?1:-1:Ia(M),N9(d,b,M,l)}}function Id(l){return function(d,b){return typeof d=="string"&&typeof b=="string"||(d=Hs(d),b=Hs(b)),l(d,b)}}function nP(l,d,b,M,z,Z,fe,ye,Pe,et){var tt=d&A,ot=tt?fe:r,_t=tt?r:fe,qt=tt?Z:r,Zt=tt?r:Z;d|=tt?I:q,d&=~(tt?q:I),d&E||(d&=-4);var vr=[l,d,z,qt,ot,Zt,_t,ye,Pe,et],Jt=b.apply(r,vr);return em(l)&&gP(Jt,vr),Jt.placeholder=M,vP(Jt,l,d)}function Wv(l){var d=Pt[l];return function(b,M){if(b=Hs(b),M=M==null?0:Ci(hr(M),292),M&&vT(b)){var z=(rn(b)+"e").split("e"),Z=d(z[0]+"e"+(+z[1]+M));return z=(rn(Z)+"e").split("e"),+(z[0]+"e"+(+z[1]-M))}return d(b)}}var Z9=Bc&&1/xa(new Bc([,-0]))[1]==U?function(l){return new Bc(l)}:gm;function iP(l){return function(d){var b=Ri(d);return b==L?Dc(d):b==Ce?af(d):mo(d,l(d))}}function Ta(l,d,b,M,z,Z,fe,ye){var Pe=d&S;if(!Pe&&typeof l!="function")throw new _r(o);var et=M?M.length:0;if(et||(d&=-97,M=z=r),fe=fe===r?fe:ci(hr(fe),0),ye=ye===r?ye:hr(ye),et-=z?z.length:0,d&q){var tt=M,ot=z;M=z=r}var _t=Pe?r:Kv(l),qt=[l,d,b,M,z,tt,ot,Z,fe,ye];if(_t&&hW(qt,_t),l=qt[0],d=qt[1],b=qt[2],M=qt[3],z=qt[4],ye=qt[9]=qt[9]===r?Pe?0:l.length:ci(qt[9]-et,0),!ye&&d&(A|T)&&(d&=-25),!d||d==w)var Zt=X9(l,d,b);else d==A||d==T?Zt=Y9(l,d,ye):(d==I||d==(w|I))&&!z.length?Zt=K9(l,d,b,M):Zt=Pd.apply(r,qt);var vr=_t?FT:gP;return vP(vr(Zt,qt),l,d)}function sP(l,d,b,M){return l===r||bo(l,ui[b])&&!nr.call(M,b)?d:l}function oP(l,d,b,M,z,Z){return Ln(l)&&Ln(d)&&(Z.set(d,l),Sd(l,d,r,oP,Z),Z.delete(d)),l}function J9(l){return xf(l)?r:l}function aP(l,d,b,M,z,Z){var fe=b&m,ye=l.length,Pe=d.length;if(ye!=Pe&&!(fe&&Pe>ye))return!1;var et=Z.get(l),tt=Z.get(d);if(et&&tt)return et==d&&tt==l;var ot=-1,_t=!0,qt=b&_?new Gu:r;for(Z.set(l,d),Z.set(d,l);++ot<ye;){var Zt=l[ot],vr=d[ot];if(M)var Jt=fe?M(vr,Zt,ot,d,l,Z):M(Zt,vr,ot,l,d,Z);if(Jt!==r){if(Jt)continue;_t=!1;break}if(qt){if(!kn(d,function(Or,$r){if(!Fu(qt,$r)&&(Zt===Or||z(Zt,Or,b,M,Z)))return qt.push($r)})){_t=!1;break}}else if(!(Zt===vr||z(Zt,vr,b,M,Z))){_t=!1;break}}return Z.delete(l),Z.delete(d),_t}function Q9(l,d,b,M,z,Z,fe){switch(b){case mt:if(l.byteLength!=d.byteLength||l.byteOffset!=d.byteOffset)return!1;l=l.buffer,d=d.buffer;case ct:return!(l.byteLength!=d.byteLength||!Z(new fd(l),new fd(d)));case le:case We:case B:return bo(+l,+d);case Re:return l.name==d.name&&l.message==d.message;case Ae:case Be:return l==d+"";case L:var ye=Dc;case Ce:var Pe=M&m;if(ye||(ye=xa),l.size!=d.size&&!Pe)return!1;var et=fe.get(l);if(et)return et==d;M|=_,fe.set(l,d);var tt=aP(ye(l),ye(d),M,z,Z,fe);return fe.delete(l),tt;case Le:if(df)return df.call(l)==df.call(d)}return!1}function eW(l,d,b,M,z,Z){var fe=b&m,ye=Xv(l),Pe=ye.length,et=Xv(d),tt=et.length;if(Pe!=tt&&!fe)return!1;for(var ot=Pe;ot--;){var _t=ye[ot];if(!(fe?_t in d:nr.call(d,_t)))return!1}var qt=Z.get(l),Zt=Z.get(d);if(qt&&Zt)return qt==d&&Zt==l;var vr=!0;Z.set(l,d),Z.set(d,l);for(var Jt=fe;++ot<Pe;){_t=ye[ot];var Or=l[_t],$r=d[_t];if(M)var Cs=fe?M($r,Or,_t,d,l,Z):M(Or,$r,_t,l,d,Z);if(!(Cs===r?Or===$r||z(Or,$r,b,M,Z):Cs)){vr=!1;break}Jt||(Jt=_t=="constructor")}if(vr&&!Jt){var Gi=l.constructor,Rs=d.constructor;Gi!=Rs&&"constructor"in l&&"constructor"in d&&!(typeof Gi=="function"&&Gi instanceof Gi&&typeof Rs=="function"&&Rs instanceof Rs)&&(vr=!1)}return Z.delete(l),Z.delete(d),vr}function Pa(l){return rm(dP(l,r,xP),l+"")}function Xv(l){return PT(l,mi,Jv)}function Yv(l){return PT(l,os,uP)}var Kv=md?function(l){return md.get(l)}:gm;function Od(l){for(var d=l.name+"",b=zc[d],M=nr.call(zc,d)?b.length:0;M--;){var z=b[M],Z=z.func;if(Z==null||Z==l)return z.name}return d}function Uc(l){var d=nr.call(Y,"placeholder")?Y:l;return d.placeholder}function Yt(){var l=Y.iteratee||dm;return l=l===dm?IT:l,arguments.length?l(arguments[0],arguments[1]):l}function Md(l,d){var b=l.__data__;return uW(d)?b[typeof d=="string"?"string":"hash"]:b.map}function Zv(l){for(var d=mi(l),b=d.length;b--;){var M=d[b],z=l[M];d[b]=[M,z,fP(z)]}return d}function ju(l,d){var b=od(l,d);return RT(b)?b:r}function tW(l){var d=nr.call(l,zu),b=l[zu];try{l[zu]=r;var M=!0}catch{}var z=cd.call(l);return M&&(d?l[zu]=b:delete l[zu]),z}var Jv=Av?function(l){return l==null?[]:(l=wt(l),Ge(Av(l),function(d){return pT.call(l,d)}))}:vm,uP=Av?function(l){for(var d=[];l;)ar(d,Jv(l)),l=hd(l);return d}:vm,Ri=zi;(Tv&&Ri(new Tv(new ArrayBuffer(1)))!=mt||lf&&Ri(new lf)!=L||Pv&&Ri(Pv.resolve())!=xe||Bc&&Ri(new Bc)!=Ce||ff&&Ri(new ff)!=be)&&(Ri=function(l){var d=zi(l),b=d==X?l.constructor:r,M=b?Hu(b):"";if(M)switch(M){case DH:return mt;case FH:return L;case BH:return xe;case zH:return Ce;case VH:return be}return d});function rW(l,d,b){for(var M=-1,z=b.length;++M<z;){var Z=b[M],fe=Z.size;switch(Z.type){case"drop":l+=fe;break;case"dropRight":d-=fe;break;case"take":d=Ci(d,l+fe);break;case"takeRight":l=ci(l,d-fe);break}}return{start:l,end:d}}function nW(l){var d=l.match(di);return d?d[1].split(Xe):[]}function cP(l,d,b){d=nu(d,l);for(var M=-1,z=d.length,Z=!1;++M<z;){var fe=Ko(d[M]);if(!(Z=l!=null&&b(l,fe)))break;l=l[fe]}return Z||++M!=z?Z:(z=l==null?0:l.length,!!z&&Bd(z)&&Ca(fe,z)&&(ur(l)||Wu(l)))}function iW(l){var d=l.length,b=new l.constructor(d);return d&&typeof l[0]=="string"&&nr.call(l,"index")&&(b.index=l.index,b.input=l.input),b}function lP(l){return typeof l.constructor=="function"&&!bf(l)?Vc(hd(l)):{}}function sW(l,d,b){var M=l.constructor;switch(d){case ct:return jv(l);case le:case We:return new M(+l);case mt:return G9(l,b);case ft:case it:case Ht:case yr:case Qt:case cr:case Lr:case Br:case bn:return HT(l,b);case L:return new M;case B:case Be:return new M(l);case Ae:return $9(l);case Ce:return new M;case Le:return U9(l)}}function oW(l,d){var b=d.length;if(!b)return l;var M=b-1;return d[M]=(b>1?"& ":"")+d[M],d=d.join(b>2?", ":" "),l.replace(On,`{
/* [wrapped with `+d+`] */
`)}function aW(l){return ur(l)||Wu(l)||!!(gT&&l&&l[gT])}function Ca(l,d){var b=typeof l;return d=d??j,!!d&&(b=="number"||b!="symbol"&&an.test(l))&&l>-1&&l%1==0&&l<d}function Vi(l,d,b){if(!Ln(b))return!1;var M=typeof d;return(M=="number"?ss(b)&&Ca(d,b.length):M=="string"&&d in b)?bo(b[d],l):!1}function Qv(l,d){if(ur(l))return!1;var b=typeof l;return b=="number"||b=="symbol"||b=="boolean"||l==null||Ps(l)?!0:wn.test(l)||!Fn.test(l)||d!=null&&l in wt(d)}function uW(l){var d=typeof l;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?l!=="__proto__":l===null}function em(l){var d=Od(l),b=Y[d];if(typeof b!="function"||!(d in qr.prototype))return!1;if(l===b)return!0;var M=Kv(b);return!!M&&l===M[0]}function cW(l){return!!fT&&fT in l}var lW=Bi?Ra:mm;function bf(l){var d=l&&l.constructor,b=typeof d=="function"&&d.prototype||ui;return l===b}function fP(l){return l===l&&!Ln(l)}function hP(l,d){return function(b){return b==null?!1:b[l]===d&&(d!==r||l in wt(b))}}function fW(l){var d=Dd(l,function(M){return b.size===c&&b.clear(),M}),b=d.cache;return d}function hW(l,d){var b=l[1],M=d[1],z=b|M,Z=z<(w|S|p),fe=M==p&&b==A||M==p&&b==C&&l[7].length<=d[8]||M==(p|C)&&d[7].length<=d[8]&&b==A;if(!(Z||fe))return l;M&w&&(l[2]=d[2],z|=b&w?0:E);var ye=d[3];if(ye){var Pe=l[3];l[3]=Pe?XT(Pe,ye,d[4]):ye,l[4]=Pe?As(l[3],f):d[4]}return ye=d[5],ye&&(Pe=l[5],l[5]=Pe?YT(Pe,ye,d[6]):ye,l[6]=Pe?As(l[5],f):d[6]),ye=d[7],ye&&(l[7]=ye),M&p&&(l[8]=l[8]==null?d[8]:Ci(l[8],d[8])),l[9]==null&&(l[9]=d[9]),l[0]=d[0],l[1]=z,l}function dW(l){var d=[];if(l!=null)for(var b in wt(l))d.push(b);return d}function pW(l){return cd.call(l)}function dP(l,d,b){return d=ci(d===r?l.length-1:d,0),function(){for(var M=arguments,z=-1,Z=ci(M.length-d,0),fe=ge(Z);++z<Z;)fe[z]=M[d+z];z=-1;for(var ye=ge(d+1);++z<d;)ye[z]=M[z];return ye[d]=b(fe),$(l,this,ye)}}function pP(l,d){return d.length<2?l:Uu(l,Us(d,0,-1))}function gW(l,d){for(var b=l.length,M=Ci(d.length,b),z=is(l);M--;){var Z=d[M];l[M]=Ca(Z,b)?z[Z]:r}return l}function tm(l,d){if(!(d==="constructor"&&typeof l[d]=="function")&&d!="__proto__")return l[d]}var gP=mP(FT),wf=IH||function(l,d){return Mn.setTimeout(l,d)},rm=mP(F9);function vP(l,d,b){var M=d+"";return rm(l,oW(M,vW(nW(M),b)))}function mP(l){var d=0,b=0;return function(){var M=LH(),z=G-(M-b);if(b=M,z>0){if(++d>=W)return arguments[0]}else d=0;return l.apply(r,arguments)}}function kd(l,d){var b=-1,M=l.length,z=M-1;for(d=d===r?M:d;++b<d;){var Z=Fv(b,z),fe=l[Z];l[Z]=l[b],l[b]=fe}return l.length=d,l}var yP=fW(function(l){var d=[];return l.charCodeAt(0)===46&&d.push(""),l.replace(jr,function(b,M,z,Z){d.push(z?Z.replace(kt,"$1"):M||b)}),d});function Ko(l){if(typeof l=="string"||Ps(l))return l;var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}function Hu(l){if(l!=null){try{return yo.call(l)}catch{}try{return l+""}catch{}}return""}function vW(l,d){return se(re,function(b){var M="_."+b[0];d&b[1]&&!Me(l,M)&&l.push(M)}),l.sort()}function _P(l){if(l instanceof qr)return l.clone();var d=new Gs(l.__wrapped__,l.__chain__);return d.__actions__=is(l.__actions__),d.__index__=l.__index__,d.__values__=l.__values__,d}function mW(l,d,b){(b?Vi(l,d,b):d===r)?d=1:d=ci(hr(d),0);var M=l==null?0:l.length;if(!M||d<1)return[];for(var z=0,Z=0,fe=ge(gd(M/d));z<M;)fe[Z++]=Us(l,z,z+=d);return fe}function yW(l){for(var d=-1,b=l==null?0:l.length,M=0,z=[];++d<b;){var Z=l[d];Z&&(z[M++]=Z)}return z}function _W(){var l=arguments.length;if(!l)return[];for(var d=ge(l-1),b=arguments[0],M=l;M--;)d[M-1]=arguments[M];return ar(ur(b)?is(b):[b],xi(d,1))}var bW=br(function(l,d){return Wn(l)?gf(l,xi(d,1,Wn,!0)):[]}),wW=br(function(l,d){var b=js(d);return Wn(b)&&(b=r),Wn(l)?gf(l,xi(d,1,Wn,!0),Yt(b,2)):[]}),xW=br(function(l,d){var b=js(d);return Wn(b)&&(b=r),Wn(l)?gf(l,xi(d,1,Wn,!0),r,b):[]});function SW(l,d,b){var M=l==null?0:l.length;return M?(d=b||d===r?1:hr(d),Us(l,d<0?0:d,M)):[]}function EW(l,d,b){var M=l==null?0:l.length;return M?(d=b||d===r?1:hr(d),d=M-d,Us(l,0,d<0?0:d)):[]}function AW(l,d){return l&&l.length?Ad(l,Yt(d,3),!0,!0):[]}function TW(l,d){return l&&l.length?Ad(l,Yt(d,3),!0):[]}function PW(l,d,b,M){var z=l==null?0:l.length;return z?(b&&typeof b!="number"&&Vi(l,d,b)&&(b=0,M=z),_9(l,d,b,M)):[]}function bP(l,d,b){var M=l==null?0:l.length;if(!M)return-1;var z=b==null?0:hr(b);return z<0&&(z=ci(M+z,0)),Ar(l,Yt(d,3),z)}function wP(l,d,b){var M=l==null?0:l.length;if(!M)return-1;var z=M-1;return b!==r&&(z=hr(b),z=b<0?ci(M+z,0):Ci(z,M-1)),Ar(l,Yt(d,3),z,!0)}function xP(l){var d=l==null?0:l.length;return d?xi(l,1):[]}function CW(l){var d=l==null?0:l.length;return d?xi(l,U):[]}function RW(l,d){var b=l==null?0:l.length;return b?(d=d===r?1:hr(d),xi(l,d)):[]}function IW(l){for(var d=-1,b=l==null?0:l.length,M={};++d<b;){var z=l[d];M[z[0]]=z[1]}return M}function SP(l){return l&&l.length?l[0]:r}function OW(l,d,b){var M=l==null?0:l.length;if(!M)return-1;var z=b==null?0:hr(b);return z<0&&(z=ci(M+z,0)),un(l,d,z)}function MW(l){var d=l==null?0:l.length;return d?Us(l,0,-1):[]}var kW=br(function(l){var d=St(l,$v);return d.length&&d[0]===l[0]?kv(d):[]}),LW=br(function(l){var d=js(l),b=St(l,$v);return d===js(b)?d=r:b.pop(),b.length&&b[0]===l[0]?kv(b,Yt(d,2)):[]}),NW=br(function(l){var d=js(l),b=St(l,$v);return d=typeof d=="function"?d:r,d&&b.pop(),b.length&&b[0]===l[0]?kv(b,r,d):[]});function qW(l,d){return l==null?"":MH.call(l,d)}function js(l){var d=l==null?0:l.length;return d?l[d-1]:r}function DW(l,d,b){var M=l==null?0:l.length;if(!M)return-1;var z=M;return b!==r&&(z=hr(b),z=z<0?ci(M+z,0):Ci(z,M-1)),d===d?Fc(l,d,z):Ar(l,qc,z,!0)}function FW(l,d){return l&&l.length?LT(l,hr(d)):r}var BW=br(EP);function EP(l,d){return l&&l.length&&d&&d.length?Dv(l,d):l}function zW(l,d,b){return l&&l.length&&d&&d.length?Dv(l,d,Yt(b,2)):l}function VW(l,d,b){return l&&l.length&&d&&d.length?Dv(l,d,r,b):l}var GW=Pa(function(l,d){var b=l==null?0:l.length,M=Rv(l,d);return DT(l,St(d,function(z){return Ca(z,b)?+z:z}).sort(WT)),M});function $W(l,d){var b=[];if(!(l&&l.length))return b;var M=-1,z=[],Z=l.length;for(d=Yt(d,3);++M<Z;){var fe=l[M];d(fe,M,l)&&(b.push(fe),z.push(M))}return DT(l,z),b}function nm(l){return l==null?l:qH.call(l)}function UW(l,d,b){var M=l==null?0:l.length;return M?(b&&typeof b!="number"&&Vi(l,d,b)?(d=0,b=M):(d=d==null?0:hr(d),b=b===r?M:hr(b)),Us(l,d,b)):[]}function jW(l,d){return Ed(l,d)}function HW(l,d,b){return zv(l,d,Yt(b,2))}function WW(l,d){var b=l==null?0:l.length;if(b){var M=Ed(l,d);if(M<b&&bo(l[M],d))return M}return-1}function XW(l,d){return Ed(l,d,!0)}function YW(l,d,b){return zv(l,d,Yt(b,2),!0)}function KW(l,d){var b=l==null?0:l.length;if(b){var M=Ed(l,d,!0)-1;if(bo(l[M],d))return M}return-1}function ZW(l){return l&&l.length?BT(l):[]}function JW(l,d){return l&&l.length?BT(l,Yt(d,2)):[]}function QW(l){var d=l==null?0:l.length;return d?Us(l,1,d):[]}function eX(l,d,b){return l&&l.length?(d=b||d===r?1:hr(d),Us(l,0,d<0?0:d)):[]}function tX(l,d,b){var M=l==null?0:l.length;return M?(d=b||d===r?1:hr(d),d=M-d,Us(l,d<0?0:d,M)):[]}function rX(l,d){return l&&l.length?Ad(l,Yt(d,3),!1,!0):[]}function nX(l,d){return l&&l.length?Ad(l,Yt(d,3)):[]}var iX=br(function(l){return ru(xi(l,1,Wn,!0))}),sX=br(function(l){var d=js(l);return Wn(d)&&(d=r),ru(xi(l,1,Wn,!0),Yt(d,2))}),oX=br(function(l){var d=js(l);return d=typeof d=="function"?d:r,ru(xi(l,1,Wn,!0),r,d)});function aX(l){return l&&l.length?ru(l):[]}function uX(l,d){return l&&l.length?ru(l,Yt(d,2)):[]}function cX(l,d){return d=typeof d=="function"?d:r,l&&l.length?ru(l,r,d):[]}function im(l){if(!(l&&l.length))return[];var d=0;return l=Ge(l,function(b){if(Wn(b))return d=ci(b.length,d),!0}),Du(d,function(b){return St(l,wa(b))})}function AP(l,d){if(!(l&&l.length))return[];var b=im(l);return d==null?b:St(b,function(M){return $(d,r,M)})}var lX=br(function(l,d){return Wn(l)?gf(l,d):[]}),fX=br(function(l){return Gv(Ge(l,Wn))}),hX=br(function(l){var d=js(l);return Wn(d)&&(d=r),Gv(Ge(l,Wn),Yt(d,2))}),dX=br(function(l){var d=js(l);return d=typeof d=="function"?d:r,Gv(Ge(l,Wn),r,d)}),pX=br(im);function gX(l,d){return $T(l||[],d||[],pf)}function vX(l,d){return $T(l||[],d||[],yf)}var mX=br(function(l){var d=l.length,b=d>1?l[d-1]:r;return b=typeof b=="function"?(l.pop(),b):r,AP(l,b)});function TP(l){var d=Y(l);return d.__chain__=!0,d}function yX(l,d){return d(l),l}function Ld(l,d){return d(l)}var _X=Pa(function(l){var d=l.length,b=d?l[0]:0,M=this.__wrapped__,z=function(Z){return Rv(Z,l)};return d>1||this.__actions__.length||!(M instanceof qr)||!Ca(b)?this.thru(z):(M=M.slice(b,+b+(d?1:0)),M.__actions__.push({func:Ld,args:[z],thisArg:r}),new Gs(M,this.__chain__).thru(function(Z){return d&&!Z.length&&Z.push(r),Z}))});function bX(){return TP(this)}function wX(){return new Gs(this.value(),this.__chain__)}function xX(){this.__values__===r&&(this.__values__=zP(this.value()));var l=this.__index__>=this.__values__.length,d=l?r:this.__values__[this.__index__++];return{done:l,value:d}}function SX(){return this}function EX(l){for(var d,b=this;b instanceof _d;){var M=_P(b);M.__index__=0,M.__values__=r,d?z.__wrapped__=M:d=M;var z=M;b=b.__wrapped__}return z.__wrapped__=l,d}function AX(){var l=this.__wrapped__;if(l instanceof qr){var d=l;return this.__actions__.length&&(d=new qr(this)),d=d.reverse(),d.__actions__.push({func:Ld,args:[nm],thisArg:r}),new Gs(d,this.__chain__)}return this.thru(nm)}function TX(){return GT(this.__wrapped__,this.__actions__)}var PX=Td(function(l,d,b){nr.call(l,b)?++l[b]:Aa(l,b,1)});function CX(l,d,b){var M=ur(l)?De:y9;return b&&Vi(l,d,b)&&(d=r),M(l,Yt(d,3))}function RX(l,d){var b=ur(l)?Ge:AT;return b(l,Yt(d,3))}var IX=QT(bP),OX=QT(wP);function MX(l,d){return xi(Nd(l,d),1)}function kX(l,d){return xi(Nd(l,d),U)}function LX(l,d,b){return b=b===r?1:hr(b),xi(Nd(l,d),b)}function PP(l,d){var b=ur(l)?se:tu;return b(l,Yt(d,3))}function CP(l,d){var b=ur(l)?Ee:ET;return b(l,Yt(d,3))}var NX=Td(function(l,d,b){nr.call(l,b)?l[b].push(d):Aa(l,b,[d])});function qX(l,d,b,M){l=ss(l)?l:Hc(l),b=b&&!M?hr(b):0;var z=l.length;return b<0&&(b=ci(z+b,0)),zd(l)?b<=z&&l.indexOf(d,b)>-1:!!z&&un(l,d,b)>-1}var DX=br(function(l,d,b){var M=-1,z=typeof d=="function",Z=ss(l)?ge(l.length):[];return tu(l,function(fe){Z[++M]=z?$(d,fe,b):vf(fe,d,b)}),Z}),FX=Td(function(l,d,b){Aa(l,b,d)});function Nd(l,d){var b=ur(l)?St:OT;return b(l,Yt(d,3))}function BX(l,d,b,M){return l==null?[]:(ur(d)||(d=d==null?[]:[d]),b=M?r:b,ur(b)||(b=b==null?[]:[b]),NT(l,d,b))}var zX=Td(function(l,d,b){l[b?0:1].push(d)},function(){return[[],[]]});function VX(l,d,b){var M=ur(l)?sr:vo,z=arguments.length<3;return M(l,Yt(d,4),b,z,tu)}function GX(l,d,b){var M=ur(l)?oi:vo,z=arguments.length<3;return M(l,Yt(d,4),b,z,ET)}function $X(l,d){var b=ur(l)?Ge:AT;return b(l,Fd(Yt(d,3)))}function UX(l){var d=ur(l)?bT:q9;return d(l)}function jX(l,d,b){(b?Vi(l,d,b):d===r)?d=1:d=hr(d);var M=ur(l)?d9:D9;return M(l,d)}function HX(l){var d=ur(l)?p9:B9;return d(l)}function WX(l){if(l==null)return 0;if(ss(l))return zd(l)?Wo(l):l.length;var d=Ri(l);return d==L||d==Ce?l.size:Nv(l).length}function XX(l,d,b){var M=ur(l)?kn:z9;return b&&Vi(l,d,b)&&(d=r),M(l,Yt(d,3))}var YX=br(function(l,d){if(l==null)return[];var b=d.length;return b>1&&Vi(l,d[0],d[1])?d=[]:b>2&&Vi(d[0],d[1],d[2])&&(d=[d[0]]),NT(l,xi(d,1),[])}),qd=RH||function(){return Mn.Date.now()};function KX(l,d){if(typeof d!="function")throw new _r(o);return l=hr(l),function(){if(--l<1)return d.apply(this,arguments)}}function RP(l,d,b){return d=b?r:d,d=l&&d==null?l.length:d,Ta(l,p,r,r,r,r,d)}function IP(l,d){var b;if(typeof d!="function")throw new _r(o);return l=hr(l),function(){return--l>0&&(b=d.apply(this,arguments)),l<=1&&(d=r),b}}var sm=br(function(l,d,b){var M=w;if(b.length){var z=As(b,Uc(sm));M|=I}return Ta(l,M,d,b,z)}),OP=br(function(l,d,b){var M=w|S;if(b.length){var z=As(b,Uc(OP));M|=I}return Ta(d,M,l,b,z)});function MP(l,d,b){d=b?r:d;var M=Ta(l,A,r,r,r,r,r,d);return M.placeholder=MP.placeholder,M}function kP(l,d,b){d=b?r:d;var M=Ta(l,T,r,r,r,r,r,d);return M.placeholder=kP.placeholder,M}function LP(l,d,b){var M,z,Z,fe,ye,Pe,et=0,tt=!1,ot=!1,_t=!0;if(typeof l!="function")throw new _r(o);d=Hs(d)||0,Ln(b)&&(tt=!!b.leading,ot="maxWait"in b,Z=ot?ci(Hs(b.maxWait)||0,d):Z,_t="trailing"in b?!!b.trailing:_t);function qt(Xn){var wo=M,Oa=z;return M=z=r,et=Xn,fe=l.apply(Oa,wo),fe}function Zt(Xn){return et=Xn,ye=wf(Or,d),tt?qt(Xn):fe}function vr(Xn){var wo=Xn-Pe,Oa=Xn-et,QP=d-wo;return ot?Ci(QP,Z-Oa):QP}function Jt(Xn){var wo=Xn-Pe,Oa=Xn-et;return Pe===r||wo>=d||wo<0||ot&&Oa>=Z}function Or(){var Xn=qd();if(Jt(Xn))return $r(Xn);ye=wf(Or,vr(Xn))}function $r(Xn){return ye=r,_t&&M?qt(Xn):(M=z=r,fe)}function Cs(){ye!==r&&UT(ye),et=0,M=Pe=z=ye=r}function Gi(){return ye===r?fe:$r(qd())}function Rs(){var Xn=qd(),wo=Jt(Xn);if(M=arguments,z=this,Pe=Xn,wo){if(ye===r)return Zt(Pe);if(ot)return UT(ye),ye=wf(Or,d),qt(Pe)}return ye===r&&(ye=wf(Or,d)),fe}return Rs.cancel=Cs,Rs.flush=Gi,Rs}var ZX=br(function(l,d){return ST(l,1,d)}),JX=br(function(l,d,b){return ST(l,Hs(d)||0,b)});function QX(l){return Ta(l,O)}function Dd(l,d){if(typeof l!="function"||d!=null&&typeof d!="function")throw new _r(o);var b=function(){var M=arguments,z=d?d.apply(this,M):M[0],Z=b.cache;if(Z.has(z))return Z.get(z);var fe=l.apply(this,M);return b.cache=Z.set(z,fe)||Z,fe};return b.cache=new(Dd.Cache||Ea),b}Dd.Cache=Ea;function Fd(l){if(typeof l!="function")throw new _r(o);return function(){var d=arguments;switch(d.length){case 0:return!l.call(this);case 1:return!l.call(this,d[0]);case 2:return!l.call(this,d[0],d[1]);case 3:return!l.call(this,d[0],d[1],d[2])}return!l.apply(this,d)}}function eY(l){return IP(2,l)}var tY=V9(function(l,d){d=d.length==1&&ur(d[0])?St(d[0],Di(Yt())):St(xi(d,1),Di(Yt()));var b=d.length;return br(function(M){for(var z=-1,Z=Ci(M.length,b);++z<Z;)M[z]=d[z].call(this,M[z]);return $(l,this,M)})}),om=br(function(l,d){var b=As(d,Uc(om));return Ta(l,I,r,d,b)}),NP=br(function(l,d){var b=As(d,Uc(NP));return Ta(l,q,r,d,b)}),rY=Pa(function(l,d){return Ta(l,C,r,r,r,d)});function nY(l,d){if(typeof l!="function")throw new _r(o);return d=d===r?d:hr(d),br(l,d)}function iY(l,d){if(typeof l!="function")throw new _r(o);return d=d==null?0:ci(hr(d),0),br(function(b){var M=b[d],z=iu(b,0,d);return M&&ar(z,M),$(l,this,z)})}function sY(l,d,b){var M=!0,z=!0;if(typeof l!="function")throw new _r(o);return Ln(b)&&(M="leading"in b?!!b.leading:M,z="trailing"in b?!!b.trailing:z),LP(l,d,{leading:M,maxWait:d,trailing:z})}function oY(l){return RP(l,1)}function aY(l,d){return om(Uv(d),l)}function uY(){if(!arguments.length)return[];var l=arguments[0];return ur(l)?l:[l]}function cY(l){return $s(l,y)}function lY(l,d){return d=typeof d=="function"?d:r,$s(l,y,d)}function fY(l){return $s(l,h|y)}function hY(l,d){return d=typeof d=="function"?d:r,$s(l,h|y,d)}function dY(l,d){return d==null||xT(l,d,mi(d))}function bo(l,d){return l===d||l!==l&&d!==d}var pY=Id(Mv),gY=Id(function(l,d){return l>=d}),Wu=CT(function(){return arguments}())?CT:function(l){return zn(l)&&nr.call(l,"callee")&&!pT.call(l,"callee")},ur=ge.isArray,vY=g?Di(g):E9;function ss(l){return l!=null&&Bd(l.length)&&!Ra(l)}function Wn(l){return zn(l)&&ss(l)}function mY(l){return l===!0||l===!1||zn(l)&&zi(l)==le}var su=OH||mm,yY=x?Di(x):A9;function _Y(l){return zn(l)&&l.nodeType===1&&!xf(l)}function bY(l){if(l==null)return!0;if(ss(l)&&(ur(l)||typeof l=="string"||typeof l.splice=="function"||su(l)||jc(l)||Wu(l)))return!l.length;var d=Ri(l);if(d==L||d==Ce)return!l.size;if(bf(l))return!Nv(l).length;for(var b in l)if(nr.call(l,b))return!1;return!0}function wY(l,d){return mf(l,d)}function xY(l,d,b){b=typeof b=="function"?b:r;var M=b?b(l,d):r;return M===r?mf(l,d,r,b):!!M}function am(l){if(!zn(l))return!1;var d=zi(l);return d==Re||d==Ne||typeof l.message=="string"&&typeof l.name=="string"&&!xf(l)}function SY(l){return typeof l=="number"&&vT(l)}function Ra(l){if(!Ln(l))return!1;var d=zi(l);return d==rt||d==Ve||d==te||d==ue}function qP(l){return typeof l=="number"&&l==hr(l)}function Bd(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=j}function Ln(l){var d=typeof l;return l!=null&&(d=="object"||d=="function")}function zn(l){return l!=null&&typeof l=="object"}var DP=P?Di(P):P9;function EY(l,d){return l===d||Lv(l,d,Zv(d))}function AY(l,d,b){return b=typeof b=="function"?b:r,Lv(l,d,Zv(d),b)}function TY(l){return FP(l)&&l!=+l}function PY(l){if(lW(l))throw new Qe(s);return RT(l)}function CY(l){return l===null}function RY(l){return l==null}function FP(l){return typeof l=="number"||zn(l)&&zi(l)==B}function xf(l){if(!zn(l)||zi(l)!=X)return!1;var d=hd(l);if(d===null)return!0;var b=nr.call(d,"constructor")&&d.constructor;return typeof b=="function"&&b instanceof b&&yo.call(b)==AH}var um=k?Di(k):C9;function IY(l){return qP(l)&&l>=-9007199254740991&&l<=j}var BP=D?Di(D):R9;function zd(l){return typeof l=="string"||!ur(l)&&zn(l)&&zi(l)==Be}function Ps(l){return typeof l=="symbol"||zn(l)&&zi(l)==Le}var jc=F?Di(F):I9;function OY(l){return l===r}function MY(l){return zn(l)&&Ri(l)==be}function kY(l){return zn(l)&&zi(l)==je}var LY=Id(qv),NY=Id(function(l,d){return l<=d});function zP(l){if(!l)return[];if(ss(l))return zd(l)?Fi(l):is(l);if(cf&&l[cf])return Ho(l[cf]());var d=Ri(l),b=d==L?Dc:d==Ce?xa:Hc;return b(l)}function Ia(l){if(!l)return l===0?l:0;if(l=Hs(l),l===U||l===-1/0){var d=l<0?-1:1;return d*J}return l===l?l:0}function hr(l){var d=Ia(l),b=d%1;return d===d?b?d-b:d:0}function VP(l){return l?$u(hr(l),0,ce):0}function Hs(l){if(typeof l=="number")return l;if(Ps(l))return de;if(Ln(l)){var d=typeof l.valueOf=="function"?l.valueOf():l;l=Ln(d)?d+"":d}if(typeof l!="string")return l===0?l:+l;l=Vs(l);var b=yt.test(l);return b||zt.test(l)?bv(l.slice(2),b?2:8):He.test(l)?de:+l}function GP(l){return Yo(l,os(l))}function qY(l){return l?$u(hr(l),-9007199254740991,j):l===0?l:0}function rn(l){return l==null?"":Ts(l)}var DY=Gc(function(l,d){if(bf(d)||ss(d)){Yo(d,mi(d),l);return}for(var b in d)nr.call(d,b)&&pf(l,b,d[b])}),$P=Gc(function(l,d){Yo(d,os(d),l)}),Vd=Gc(function(l,d,b,M){Yo(d,os(d),l,M)}),FY=Gc(function(l,d,b,M){Yo(d,mi(d),l,M)}),BY=Pa(Rv);function zY(l,d){var b=Vc(l);return d==null?b:wT(b,d)}var VY=br(function(l,d){l=wt(l);var b=-1,M=d.length,z=M>2?d[2]:r;for(z&&Vi(d[0],d[1],z)&&(M=1);++b<M;)for(var Z=d[b],fe=os(Z),ye=-1,Pe=fe.length;++ye<Pe;){var et=fe[ye],tt=l[et];(tt===r||bo(tt,ui[et])&&!nr.call(l,et))&&(l[et]=Z[et])}return l}),GY=br(function(l){return l.push(r,oP),$(UP,r,l)});function $Y(l,d){return Uo(l,Yt(d,3),Xo)}function UY(l,d){return Uo(l,Yt(d,3),Ov)}function jY(l,d){return l==null?l:Iv(l,Yt(d,3),os)}function HY(l,d){return l==null?l:TT(l,Yt(d,3),os)}function WY(l,d){return l&&Xo(l,Yt(d,3))}function XY(l,d){return l&&Ov(l,Yt(d,3))}function YY(l){return l==null?[]:xd(l,mi(l))}function KY(l){return l==null?[]:xd(l,os(l))}function cm(l,d,b){var M=l==null?r:Uu(l,d);return M===r?b:M}function ZY(l,d){return l!=null&&cP(l,d,b9)}function lm(l,d){return l!=null&&cP(l,d,w9)}var JY=tP(function(l,d,b){d!=null&&typeof d.toString!="function"&&(d=cd.call(d)),l[d]=b},hm(as)),QY=tP(function(l,d,b){d!=null&&typeof d.toString!="function"&&(d=cd.call(d)),nr.call(l,d)?l[d].push(b):l[d]=[b]},Yt),eK=br(vf);function mi(l){return ss(l)?_T(l):Nv(l)}function os(l){return ss(l)?_T(l,!0):O9(l)}function tK(l,d){var b={};return d=Yt(d,3),Xo(l,function(M,z,Z){Aa(b,d(M,z,Z),M)}),b}function rK(l,d){var b={};return d=Yt(d,3),Xo(l,function(M,z,Z){Aa(b,z,d(M,z,Z))}),b}var nK=Gc(function(l,d,b){Sd(l,d,b)}),UP=Gc(function(l,d,b,M){Sd(l,d,b,M)}),iK=Pa(function(l,d){var b={};if(l==null)return b;var M=!1;d=St(d,function(Z){return Z=nu(Z,l),M||(M=Z.length>1),Z}),Yo(l,Yv(l),b),M&&(b=$s(b,h|v|y,J9));for(var z=d.length;z--;)Vv(b,d[z]);return b});function sK(l,d){return jP(l,Fd(Yt(d)))}var oK=Pa(function(l,d){return l==null?{}:k9(l,d)});function jP(l,d){if(l==null)return{};var b=St(Yv(l),function(M){return[M]});return d=Yt(d),qT(l,b,function(M,z){return d(M,z[0])})}function aK(l,d,b){d=nu(d,l);var M=-1,z=d.length;for(z||(z=1,l=r);++M<z;){var Z=l==null?r:l[Ko(d[M])];Z===r&&(M=z,Z=b),l=Ra(Z)?Z.call(l):Z}return l}function uK(l,d,b){return l==null?l:yf(l,d,b)}function cK(l,d,b,M){return M=typeof M=="function"?M:r,l==null?l:yf(l,d,b,M)}var HP=iP(mi),WP=iP(os);function lK(l,d,b){var M=ur(l),z=M||su(l)||jc(l);if(d=Yt(d,4),b==null){var Z=l&&l.constructor;z?b=M?new Z:[]:Ln(l)?b=Ra(Z)?Vc(hd(l)):{}:b={}}return(z?se:Xo)(l,function(fe,ye,Pe){return d(b,fe,ye,Pe)}),b}function fK(l,d){return l==null?!0:Vv(l,d)}function hK(l,d,b){return l==null?l:VT(l,d,Uv(b))}function dK(l,d,b,M){return M=typeof M=="function"?M:r,l==null?l:VT(l,d,Uv(b),M)}function Hc(l){return l==null?[]:sf(l,mi(l))}function pK(l){return l==null?[]:sf(l,os(l))}function gK(l,d,b){return b===r&&(b=d,d=r),b!==r&&(b=Hs(b),b=b===b?b:0),d!==r&&(d=Hs(d),d=d===d?d:0),$u(Hs(l),d,b)}function vK(l,d,b){return d=Ia(d),b===r?(b=d,d=0):b=Ia(b),l=Hs(l),x9(l,d,b)}function mK(l,d,b){if(b&&typeof b!="boolean"&&Vi(l,d,b)&&(d=b=r),b===r&&(typeof d=="boolean"?(b=d,d=r):typeof l=="boolean"&&(b=l,l=r)),l===r&&d===r?(l=0,d=1):(l=Ia(l),d===r?(d=l,l=0):d=Ia(d)),l>d){var M=l;l=d,d=M}if(b||l%1||d%1){var z=mT();return Ci(l+z*(d-l+rf("1e-"+((z+"").length-1))),d)}return Fv(l,d)}var yK=$c(function(l,d,b){return d=d.toLowerCase(),l+(b?XP(d):d)});function XP(l){return fm(rn(l).toLowerCase())}function YP(l){return l=rn(l),l&&l.replace(jn,Ja).replace(pv,"")}function _K(l,d,b){l=rn(l),d=Ts(d);var M=l.length;b=b===r?M:$u(hr(b),0,M);var z=b;return b-=d.length,b>=0&&l.slice(b,z)==d}function bK(l){return l=rn(l),l&&ei.test(l)?l.replace(pn,xv):l}function wK(l){return l=rn(l),l&&hi.test(l)?l.replace($n,"\\$&"):l}var xK=$c(function(l,d,b){return l+(b?"-":"")+d.toLowerCase()}),SK=$c(function(l,d,b){return l+(b?" ":"")+d.toLowerCase()}),EK=JT("toLowerCase");function AK(l,d,b){l=rn(l),d=hr(d);var M=d?Wo(l):0;if(!d||M>=d)return l;var z=(d-M)/2;return Rd(vd(z),b)+l+Rd(gd(z),b)}function TK(l,d,b){l=rn(l),d=hr(d);var M=d?Wo(l):0;return d&&M<d?l+Rd(d-M,b):l}function PK(l,d,b){l=rn(l),d=hr(d);var M=d?Wo(l):0;return d&&M<d?Rd(d-M,b)+l:l}function CK(l,d,b){return b||d==null?d=0:d&&(d=+d),NH(rn(l).replace(Jr,""),d||0)}function RK(l,d,b){return(b?Vi(l,d,b):d===r)?d=1:d=hr(d),Bv(rn(l),d)}function IK(){var l=arguments,d=rn(l[0]);return l.length<3?d:d.replace(l[1],l[2])}var OK=$c(function(l,d,b){return l+(b?"_":"")+d.toLowerCase()});function MK(l,d,b){return b&&typeof b!="number"&&Vi(l,d,b)&&(d=b=r),b=b===r?ce:b>>>0,b?(l=rn(l),l&&(typeof d=="string"||d!=null&&!um(d))&&(d=Ts(d),!d&&ns(l))?iu(Fi(l),0,b):l.split(d,b)):[]}var kK=$c(function(l,d,b){return l+(b?" ":"")+fm(d)});function LK(l,d,b){return l=rn(l),b=b==null?0:$u(hr(b),0,l.length),d=Ts(d),l.slice(b,b+d.length)==d}function NK(l,d,b){var M=Y.templateSettings;b&&Vi(l,d,b)&&(d=r),l=rn(l),d=Vd({},d,M,sP);var z=Vd({},d.imports,M.imports,sP),Z=mi(z),fe=sf(z,Z),ye,Pe,et=0,tt=d.interpolate||Mt,ot="__p += '",_t=fr((d.escape||Mt).source+"|"+tt.source+"|"+(tt===zr?Lt:Mt).source+"|"+(d.evaluate||Mt).source+"|$","g"),qt="//# sourceURL="+(nr.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_v+"]")+`
`;l.replace(_t,function(Jt,Or,$r,Cs,Gi,Rs){return $r||($r=Cs),ot+=l.slice(et,Rs).replace(en,Sv),Or&&(ye=!0,ot+=`' +
__e(`+Or+`) +
'`),Gi&&(Pe=!0,ot+=`';
`+Gi+`;
__p += '`),$r&&(ot+=`' +
((__t = (`+$r+`)) == null ? '' : __t) +
'`),et=Rs+Jt.length,Jt}),ot+=`';
`;var Zt=nr.call(d,"variable")&&d.variable;if(!Zt)ot=`with (obj) {
`+ot+`
}
`;else if(Rt.test(Zt))throw new Qe(a);ot=(Pe?ot.replace(tr,""):ot).replace(Ir,"$1").replace(vn,"$1;"),ot="function("+(Zt||"obj")+`) {
`+(Zt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ye?", __e = _.escape":"")+(Pe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ot+`return __p
}`;var vr=ZP(function(){return At(Z,qt+"return "+ot).apply(r,fe)});if(vr.source=ot,am(vr))throw vr;return vr}function qK(l){return rn(l).toLowerCase()}function DK(l){return rn(l).toUpperCase()}function FK(l,d,b){if(l=rn(l),l&&(b||d===r))return Vs(l);if(!l||!(d=Ts(d)))return l;var M=Fi(l),z=Fi(d),Z=Yr(M,z),fe=Bu(M,z)+1;return iu(M,Z,fe).join("")}function BK(l,d,b){if(l=rn(l),l&&(b||d===r))return l.slice(0,ad(l)+1);if(!l||!(d=Ts(d)))return l;var M=Fi(l),z=Bu(M,Fi(d))+1;return iu(M,0,z).join("")}function zK(l,d,b){if(l=rn(l),l&&(b||d===r))return l.replace(Jr,"");if(!l||!(d=Ts(d)))return l;var M=Fi(l),z=Yr(M,Fi(d));return iu(M,z).join("")}function VK(l,d){var b=N,M=V;if(Ln(d)){var z="separator"in d?d.separator:z;b="length"in d?hr(d.length):b,M="omission"in d?Ts(d.omission):M}l=rn(l);var Z=l.length;if(ns(l)){var fe=Fi(l);Z=fe.length}if(b>=Z)return l;var ye=b-Wo(M);if(ye<1)return M;var Pe=fe?iu(fe,0,ye).join(""):l.slice(0,ye);if(z===r)return Pe+M;if(fe&&(ye+=Pe.length-ye),um(z)){if(l.slice(ye).search(z)){var et,tt=Pe;for(z.global||(z=fr(z.source,rn(at.exec(z))+"g")),z.lastIndex=0;et=z.exec(tt);)var ot=et.index;Pe=Pe.slice(0,ot===r?ye:ot)}}else if(l.indexOf(Ts(z),ye)!=ye){var _t=Pe.lastIndexOf(z);_t>-1&&(Pe=Pe.slice(0,_t))}return Pe+M}function GK(l){return l=rn(l),l&&Gn.test(l)?l.replace(mn,uf):l}var $K=$c(function(l,d,b){return l+(b?" ":"")+d.toUpperCase()}),fm=JT("toUpperCase");function KP(l,d,b){return l=rn(l),d=b?r:d,d===r?of(l)?_e(l):Er(l):l.match(d)||[]}var ZP=br(function(l,d){try{return $(l,r,d)}catch(b){return am(b)?b:new Qe(b)}}),UK=Pa(function(l,d){return se(d,function(b){b=Ko(b),Aa(l,b,sm(l[b],l))}),l});function jK(l){var d=l==null?0:l.length,b=Yt();return l=d?St(l,function(M){if(typeof M[1]!="function")throw new _r(o);return[b(M[0]),M[1]]}):[],br(function(M){for(var z=-1;++z<d;){var Z=l[z];if($(Z[0],this,M))return $(Z[1],this,M)}})}function HK(l){return m9($s(l,h))}function hm(l){return function(){return l}}function WK(l,d){return l==null||l!==l?d:l}var XK=eP(),YK=eP(!0);function as(l){return l}function dm(l){return IT(typeof l=="function"?l:$s(l,h))}function KK(l){return MT($s(l,h))}function ZK(l,d){return kT(l,$s(d,h))}var JK=br(function(l,d){return function(b){return vf(b,l,d)}}),QK=br(function(l,d){return function(b){return vf(l,b,d)}});function pm(l,d,b){var M=mi(d),z=xd(d,M);b==null&&!(Ln(d)&&(z.length||!M.length))&&(b=d,d=l,l=this,z=xd(d,mi(d)));var Z=!(Ln(b)&&"chain"in b)||!!b.chain,fe=Ra(l);return se(z,function(ye){var Pe=d[ye];l[ye]=Pe,fe&&(l.prototype[ye]=function(){var et=this.__chain__;if(Z||et){var tt=l(this.__wrapped__),ot=tt.__actions__=is(this.__actions__);return ot.push({func:Pe,args:arguments,thisArg:l}),tt.__chain__=et,tt}return Pe.apply(l,ar([this.value()],arguments))})}),l}function eZ(){return Mn._===this&&(Mn._=TH),this}function gm(){}function tZ(l){return l=hr(l),br(function(d){return LT(d,l)})}var rZ=Hv(St),nZ=Hv(De),iZ=Hv(kn);function JP(l){return Qv(l)?wa(Ko(l)):L9(l)}function sZ(l){return function(d){return l==null?r:Uu(l,d)}}var oZ=rP(),aZ=rP(!0);function vm(){return[]}function mm(){return!1}function uZ(){return{}}function cZ(){return""}function lZ(){return!0}function fZ(l,d){if(l=hr(l),l<1||l>j)return[];var b=ce,M=Ci(l,ce);d=Yt(d),l-=ce;for(var z=Du(M,d);++b<l;)d(b);return z}function hZ(l){return ur(l)?St(l,Ko):Ps(l)?[l]:is(yP(rn(l)))}function dZ(l){var d=++EH;return rn(l)+d}var pZ=Cd(function(l,d){return l+d},0),gZ=Wv("ceil"),vZ=Cd(function(l,d){return l/d},1),mZ=Wv("floor");function yZ(l){return l&&l.length?wd(l,as,Mv):r}function _Z(l,d){return l&&l.length?wd(l,Yt(d,2),Mv):r}function bZ(l){return Ss(l,as)}function wZ(l,d){return Ss(l,Yt(d,2))}function xZ(l){return l&&l.length?wd(l,as,qv):r}function SZ(l,d){return l&&l.length?wd(l,Yt(d,2),qv):r}var EZ=Cd(function(l,d){return l*d},1),AZ=Wv("round"),TZ=Cd(function(l,d){return l-d},0);function PZ(l){return l&&l.length?Pi(l,as):0}function CZ(l,d){return l&&l.length?Pi(l,Yt(d,2)):0}return Y.after=KX,Y.ary=RP,Y.assign=DY,Y.assignIn=$P,Y.assignInWith=Vd,Y.assignWith=FY,Y.at=BY,Y.before=IP,Y.bind=sm,Y.bindAll=UK,Y.bindKey=OP,Y.castArray=uY,Y.chain=TP,Y.chunk=mW,Y.compact=yW,Y.concat=_W,Y.cond=jK,Y.conforms=HK,Y.constant=hm,Y.countBy=PX,Y.create=zY,Y.curry=MP,Y.curryRight=kP,Y.debounce=LP,Y.defaults=VY,Y.defaultsDeep=GY,Y.defer=ZX,Y.delay=JX,Y.difference=bW,Y.differenceBy=wW,Y.differenceWith=xW,Y.drop=SW,Y.dropRight=EW,Y.dropRightWhile=AW,Y.dropWhile=TW,Y.fill=PW,Y.filter=RX,Y.flatMap=MX,Y.flatMapDeep=kX,Y.flatMapDepth=LX,Y.flatten=xP,Y.flattenDeep=CW,Y.flattenDepth=RW,Y.flip=QX,Y.flow=XK,Y.flowRight=YK,Y.fromPairs=IW,Y.functions=YY,Y.functionsIn=KY,Y.groupBy=NX,Y.initial=MW,Y.intersection=kW,Y.intersectionBy=LW,Y.intersectionWith=NW,Y.invert=JY,Y.invertBy=QY,Y.invokeMap=DX,Y.iteratee=dm,Y.keyBy=FX,Y.keys=mi,Y.keysIn=os,Y.map=Nd,Y.mapKeys=tK,Y.mapValues=rK,Y.matches=KK,Y.matchesProperty=ZK,Y.memoize=Dd,Y.merge=nK,Y.mergeWith=UP,Y.method=JK,Y.methodOf=QK,Y.mixin=pm,Y.negate=Fd,Y.nthArg=tZ,Y.omit=iK,Y.omitBy=sK,Y.once=eY,Y.orderBy=BX,Y.over=rZ,Y.overArgs=tY,Y.overEvery=nZ,Y.overSome=iZ,Y.partial=om,Y.partialRight=NP,Y.partition=zX,Y.pick=oK,Y.pickBy=jP,Y.property=JP,Y.propertyOf=sZ,Y.pull=BW,Y.pullAll=EP,Y.pullAllBy=zW,Y.pullAllWith=VW,Y.pullAt=GW,Y.range=oZ,Y.rangeRight=aZ,Y.rearg=rY,Y.reject=$X,Y.remove=$W,Y.rest=nY,Y.reverse=nm,Y.sampleSize=jX,Y.set=uK,Y.setWith=cK,Y.shuffle=HX,Y.slice=UW,Y.sortBy=YX,Y.sortedUniq=ZW,Y.sortedUniqBy=JW,Y.split=MK,Y.spread=iY,Y.tail=QW,Y.take=eX,Y.takeRight=tX,Y.takeRightWhile=rX,Y.takeWhile=nX,Y.tap=yX,Y.throttle=sY,Y.thru=Ld,Y.toArray=zP,Y.toPairs=HP,Y.toPairsIn=WP,Y.toPath=hZ,Y.toPlainObject=GP,Y.transform=lK,Y.unary=oY,Y.union=iX,Y.unionBy=sX,Y.unionWith=oX,Y.uniq=aX,Y.uniqBy=uX,Y.uniqWith=cX,Y.unset=fK,Y.unzip=im,Y.unzipWith=AP,Y.update=hK,Y.updateWith=dK,Y.values=Hc,Y.valuesIn=pK,Y.without=lX,Y.words=KP,Y.wrap=aY,Y.xor=fX,Y.xorBy=hX,Y.xorWith=dX,Y.zip=pX,Y.zipObject=gX,Y.zipObjectDeep=vX,Y.zipWith=mX,Y.entries=HP,Y.entriesIn=WP,Y.extend=$P,Y.extendWith=Vd,pm(Y,Y),Y.add=pZ,Y.attempt=ZP,Y.camelCase=yK,Y.capitalize=XP,Y.ceil=gZ,Y.clamp=gK,Y.clone=cY,Y.cloneDeep=fY,Y.cloneDeepWith=hY,Y.cloneWith=lY,Y.conformsTo=dY,Y.deburr=YP,Y.defaultTo=WK,Y.divide=vZ,Y.endsWith=_K,Y.eq=bo,Y.escape=bK,Y.escapeRegExp=wK,Y.every=CX,Y.find=IX,Y.findIndex=bP,Y.findKey=$Y,Y.findLast=OX,Y.findLastIndex=wP,Y.findLastKey=UY,Y.floor=mZ,Y.forEach=PP,Y.forEachRight=CP,Y.forIn=jY,Y.forInRight=HY,Y.forOwn=WY,Y.forOwnRight=XY,Y.get=cm,Y.gt=pY,Y.gte=gY,Y.has=ZY,Y.hasIn=lm,Y.head=SP,Y.identity=as,Y.includes=qX,Y.indexOf=OW,Y.inRange=vK,Y.invoke=eK,Y.isArguments=Wu,Y.isArray=ur,Y.isArrayBuffer=vY,Y.isArrayLike=ss,Y.isArrayLikeObject=Wn,Y.isBoolean=mY,Y.isBuffer=su,Y.isDate=yY,Y.isElement=_Y,Y.isEmpty=bY,Y.isEqual=wY,Y.isEqualWith=xY,Y.isError=am,Y.isFinite=SY,Y.isFunction=Ra,Y.isInteger=qP,Y.isLength=Bd,Y.isMap=DP,Y.isMatch=EY,Y.isMatchWith=AY,Y.isNaN=TY,Y.isNative=PY,Y.isNil=RY,Y.isNull=CY,Y.isNumber=FP,Y.isObject=Ln,Y.isObjectLike=zn,Y.isPlainObject=xf,Y.isRegExp=um,Y.isSafeInteger=IY,Y.isSet=BP,Y.isString=zd,Y.isSymbol=Ps,Y.isTypedArray=jc,Y.isUndefined=OY,Y.isWeakMap=MY,Y.isWeakSet=kY,Y.join=qW,Y.kebabCase=xK,Y.last=js,Y.lastIndexOf=DW,Y.lowerCase=SK,Y.lowerFirst=EK,Y.lt=LY,Y.lte=NY,Y.max=yZ,Y.maxBy=_Z,Y.mean=bZ,Y.meanBy=wZ,Y.min=xZ,Y.minBy=SZ,Y.stubArray=vm,Y.stubFalse=mm,Y.stubObject=uZ,Y.stubString=cZ,Y.stubTrue=lZ,Y.multiply=EZ,Y.nth=FW,Y.noConflict=eZ,Y.noop=gm,Y.now=qd,Y.pad=AK,Y.padEnd=TK,Y.padStart=PK,Y.parseInt=CK,Y.random=mK,Y.reduce=VX,Y.reduceRight=GX,Y.repeat=RK,Y.replace=IK,Y.result=aK,Y.round=AZ,Y.runInContext=Q,Y.sample=UX,Y.size=WX,Y.snakeCase=OK,Y.some=XX,Y.sortedIndex=jW,Y.sortedIndexBy=HW,Y.sortedIndexOf=WW,Y.sortedLastIndex=XW,Y.sortedLastIndexBy=YW,Y.sortedLastIndexOf=KW,Y.startCase=kK,Y.startsWith=LK,Y.subtract=TZ,Y.sum=PZ,Y.sumBy=CZ,Y.template=NK,Y.times=fZ,Y.toFinite=Ia,Y.toInteger=hr,Y.toLength=VP,Y.toLower=qK,Y.toNumber=Hs,Y.toSafeInteger=qY,Y.toString=rn,Y.toUpper=DK,Y.trim=FK,Y.trimEnd=BK,Y.trimStart=zK,Y.truncate=VK,Y.unescape=GK,Y.uniqueId=dZ,Y.upperCase=$K,Y.upperFirst=fm,Y.each=PP,Y.eachRight=CP,Y.first=SP,pm(Y,function(){var l={};return Xo(Y,function(d,b){nr.call(Y.prototype,b)||(l[b]=d)}),l}(),{chain:!1}),Y.VERSION=n,se(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){Y[l].placeholder=Y}),se(["drop","take"],function(l,d){qr.prototype[l]=function(b){b=b===r?1:ci(hr(b),0);var M=this.__filtered__&&!d?new qr(this):this.clone();return M.__filtered__?M.__takeCount__=Ci(b,M.__takeCount__):M.__views__.push({size:Ci(b,ce),type:l+(M.__dir__<0?"Right":"")}),M},qr.prototype[l+"Right"]=function(b){return this.reverse()[l](b).reverse()}}),se(["filter","map","takeWhile"],function(l,d){var b=d+1,M=b==ee||b==K;qr.prototype[l]=function(z){var Z=this.clone();return Z.__iteratees__.push({iteratee:Yt(z,3),type:b}),Z.__filtered__=Z.__filtered__||M,Z}}),se(["head","last"],function(l,d){var b="take"+(d?"Right":"");qr.prototype[l]=function(){return this[b](1).value()[0]}}),se(["initial","tail"],function(l,d){var b="drop"+(d?"":"Right");qr.prototype[l]=function(){return this.__filtered__?new qr(this):this[b](1)}}),qr.prototype.compact=function(){return this.filter(as)},qr.prototype.find=function(l){return this.filter(l).head()},qr.prototype.findLast=function(l){return this.reverse().find(l)},qr.prototype.invokeMap=br(function(l,d){return typeof l=="function"?new qr(this):this.map(function(b){return vf(b,l,d)})}),qr.prototype.reject=function(l){return this.filter(Fd(Yt(l)))},qr.prototype.slice=function(l,d){l=hr(l);var b=this;return b.__filtered__&&(l>0||d<0)?new qr(b):(l<0?b=b.takeRight(-l):l&&(b=b.drop(l)),d!==r&&(d=hr(d),b=d<0?b.dropRight(-d):b.take(d-l)),b)},qr.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},qr.prototype.toArray=function(){return this.take(ce)},Xo(qr.prototype,function(l,d){var b=/^(?:filter|find|map|reject)|While$/.test(d),M=/^(?:head|last)$/.test(d),z=Y[M?"take"+(d=="last"?"Right":""):d],Z=M||/^find/.test(d);z&&(Y.prototype[d]=function(){var fe=this.__wrapped__,ye=M?[1]:arguments,Pe=fe instanceof qr,et=ye[0],tt=Pe||ur(fe),ot=function(Or){var $r=z.apply(Y,ar([Or],ye));return M&&_t?$r[0]:$r};tt&&b&&typeof et=="function"&&et.length!=1&&(Pe=tt=!1);var _t=this.__chain__,qt=!!this.__actions__.length,Zt=Z&&!_t,vr=Pe&&!qt;if(!Z&&tt){fe=vr?fe:new qr(this);var Jt=l.apply(fe,ye);return Jt.__actions__.push({func:Ld,args:[ot],thisArg:r}),new Gs(Jt,_t)}return Zt&&vr?l.apply(this,ye):(Jt=this.thru(ot),Zt?M?Jt.value()[0]:Jt.value():Jt)})}),se(["pop","push","shift","sort","splice","unshift"],function(l){var d=ai[l],b=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",M=/^(?:pop|shift)$/.test(l);Y.prototype[l]=function(){var z=arguments;if(M&&!this.__chain__){var Z=this.value();return d.apply(ur(Z)?Z:[],z)}return this[b](function(fe){return d.apply(ur(fe)?fe:[],z)})}}),Xo(qr.prototype,function(l,d){var b=Y[d];if(b){var M=b.name+"";nr.call(zc,M)||(zc[M]=[]),zc[M].push({name:d,func:b})}}),zc[Pd(r,S).name]=[{name:"wrapper",func:r}],qr.prototype.clone=GH,qr.prototype.reverse=$H,qr.prototype.value=UH,Y.prototype.at=_X,Y.prototype.chain=bX,Y.prototype.commit=wX,Y.prototype.next=xX,Y.prototype.plant=EX,Y.prototype.reverse=AX,Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=TX,Y.prototype.first=Y.prototype.head,cf&&(Y.prototype[cf]=SX),Y},ke=Oe();go?((go.exports=ke)._=ke,Nc._=ke):Mn._=ke}).call(qpe)}(Vf,Vf.exports)),Vf.exports}var Fpe=Dpe();const An=Ll(Fpe);var Bpe=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},zpe=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},_p;function Xs(e,t,r){return t.map((n,i)=>e(n,r[i]))}function lp(e,t,r,n,i){return t.map((s,o)=>e(s,r[o],n[o],i[o]))}function Jo(e,t,r,n){if(t.length==0)return n==1?1:0;let i=t[t.length-1];n==1?i|=~r:i&=r;for(let s=0;s<t.length-1;s++)i=e(i,t[s]);return i=e(i,i>>>16),i=e(i,i>>>8),i=e(i,i>>>4),i=e(i,i>>>2),i=e(i,i>>>1),i&1}function Vpe(e){return e>>5}function ra(e){return e&31}function ul(e,t,r,n,i){const s=e>0&&!(n[t]&1<<e-1)&&i[t]&1<<e-1;s&&ra(e)&&(i[t]|=-1<<e),s&&t+1<r&&i.fill(-1,t+1)}function YA(e,t){const r={};function n(i,s){if(r[i]=s,!(i.length*e>=t)){for(let o=0;o<1<<e;o+=1)n(i+o.toString(1<<e),s<<e|o|o<<16);n(i+"x",s<<e|(1<<e)-1)}}return n("",0),Object.seal(r),r}const Gpe=YA(1,8),$pe=YA(3,3),Upe=YA(4,8);function lj(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000"+r[o].toString(16),u=r[o]^n[o];o++;for(let c=0;c<8&&s<t;c++,s+=4)u&15<<4*c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function fj(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000000000000000000000000000"+r[o].toString(2),u=r[o]^n[o];o++;for(let c=0;c<32&&s<t;c++,s++)u&1<<c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function mE(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const f=e.slice(Math.max(0,c-2),c);c-=f.length;const h=Upe[f];ra(a)==0&&u++;const v=(1<<4*f.length)-1;n[u]|=(h>>>16&v)<<a,i[u]|=(h&v)<<a,a+=4*f.length}a<r&&ul(a,u,o,n,i)}function hj(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const f=e.slice(Math.max(0,c-8),c);c-=f.length;const h=Gpe[f];ra(a)==0&&u++;const v=(1<<1*f.length)-1;n[u]|=(h>>>16&v)<<a,i[u]|=(h&v)<<a,a+=1*f.length}a<r&&ul(a,u,o,n,i)}class KA extends Error{constructor(t){super(t),Object.setPrototypeOf(this,KA.prototype)}}function yi(e,t){if(!e)throw new KA("Assertion failed: "+t)}class Je{constructor(t,r,n){this._bits=t,this._avec=r,this._bvec=n}static make(t,r){t=t|0;let n,i;switch(r){case!0:case"1":case 1:n=i=-1;break;case!1:case"0":case-1:case void 0:n=i=0;break;case"x":case 0:n=0,i=-1;break;default:yi(!1,"Vector3vl.make() called with invalid initializer")}const s=(t+31)/32|0;return new Je(t,new Uint32Array(s).fill(n),new Uint32Array(s).fill(i))}static zeros(t){return Je.make(t,-1)}static ones(t){return Je.make(t,1)}static xes(t){return Je.make(t,0)}static fromBool(t,r=1){return Je.make(r,t?1:-1)}static concat(...t){const n=t.reduce((u,c)=>c.bits+u,0)+31>>>5;let i=0,s=-1,o=new Uint32Array(n),a=new Uint32Array(n);for(const u of t)if(u.normalize(),ra(i)==0)o.set(u._avec,s+1),a.set(u._bvec,s+1),i+=u._bits,s+=u._bits+31>>>5;else{for(const c in u._avec){if(o[s]|=u._avec[c]<<i,a[s]|=u._bvec[c]<<i,s++,s==n)break;o[s]=u._avec[c]>>>-i,a[s]=u._bvec[c]>>>-i}i+=u._bits,s+1>i+31>>>5&&s--}return new Je(i,o,a)}static fromIterator(t,r,n){return(r&r-1)==0?Je.fromIteratorPow2(t,r,n):Je.fromIteratorAnySkip(t,r,n)}static fromIteratorAnySkip(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const f of t)ra(s)==0&&o++,a[o]|=(f>>>r&c)<<s,u[o]|=(f&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(f>>>r&c)>>>-s,u[o]=(f&c)>>>-s),s+=r;return s<n&&ul(s,o,i,a,u),new Je(n,a,u)}static fromIteratorPow2(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const f of t)ra(s)==0&&o++,a[o]|=(f>>>r&c)<<s,u[o]|=(f&c)<<s,s+=r;return s<n&&ul(s,o,i,a,u),new Je(n,a,u)}static fromArray(t){const r=t.length,n=1,i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<n)-1;for(const f of t){const h=f+1+ +(f>0);ra(s)==0&&o++,a[o]|=(h>>>n&c)<<s,u[o]|=(h&c)<<s,s+=n}return s<r&&ul(s,o,i,a,u),new Je(r,a,u)}static fromBin(t,r){r===void 0&&(r=t.length);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return hj(t,0,r,i,s),new Je(r,i,s)}static fromOct(t,r){r===void 0&&(r=t.length*3);const i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=7;for(let f=t.length-1;f>=0;f--){const h=$pe[t[f]];ra(s)==0&&o++,a[o]|=(h>>>16&c)<<s,u[o]|=(h&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(h>>>16&c)>>>-s,u[o]=(h&c)>>>-s),s+=3}return s<r&&ul(s,o,i,a,u),new Je(r,a,u)}static fromHex(t,r){r===void 0&&(r=t.length*4);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return mE(t,0,r,i,s),new Je(r,i,s)}static fromString(t){const n=/^([0-9]*)'?(b[01x]*|o[0-7x]*|h[0-9a-fx]*|d[0-9]*)$/.exec(t);yi(n!=null,"Vector3vl.fromString() Invalid string");const i=n[1].length?Number(n[1]):void 0,s=n[2].slice(1);switch(n[2][0]){case"b":return Je.fromBin(s,i);case"o":return Je.fromOct(s,i);case"h":return Je.fromHex(s,i);case"d":return Je.fromNumber(BigInt(s),i)}}static fromClonable(t){return new Je(t._bits,t._avec,t._bvec)}static fromNumber(t,r){const n=r===void 0?0:r,i=BigInt(t);if(i>=BigInt(0)){let s=i.toString(2);return Je.fromBin("0".repeat(Math.max(0,n-s.length))+s,r)}else{const s=(-i).toString(2).length;let a=(i+(BigInt(1)<<BigInt(s))).toString(2);return Je.fromBin("1".repeat(Math.max(1,n-s))+"0".repeat(s-a.length)+a,r)}}get bits(){return this._bits}get msb(){return this.get(this._bits-1)}get lsb(){return this.get(0)}get(t){const r=ra(t),n=Vpe(t),i=this._avec[n]>>>r&1,s=this._bvec[n]>>>r&1;return i+s-1}get isHigh(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>~i==0)&&(n[n.length-1]&t)==t;return r(this._avec)&&r(this._bvec)}get isLow(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>i==0)&&(n[n.length-1]&t)==0;return r(this._avec)&&r(this._bvec)}get isDefined(){if(this._bits==0)return!1;const t=Xs((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]|=~this._lastmask,!t.every(r=>~r==0)}get isFullyDefined(){if(this._bits==0)return!0;const t=Xs((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]&=this._lastmask,!t.some(r=>!!r)}and(t){return yi(t._bits==this._bits,"Vector3vl.and() called with vectors of different sizes"),new Je(this._bits,Xs((r,n)=>r&n,t._avec,this._avec),Xs((r,n)=>r&n,t._bvec,this._bvec))}or(t){return yi(t._bits==this._bits,"Vector3vl.or() called with vectors of different sizes"),new Je(this._bits,Xs((r,n)=>r|n,t._avec,this._avec),Xs((r,n)=>r|n,t._bvec,this._bvec))}xor(t){return yi(t._bits==this._bits,"Vector3vl.xor() called with vectors of different sizes"),new Je(this._bits,lp((r,n,i,s)=>(r|i)&(n^s),t._avec,t._bvec,this._avec,this._bvec),lp((r,n,i,s)=>r&i^(n|s),t._avec,t._bvec,this._avec,this._bvec))}nand(t){return yi(t._bits==this._bits,"Vector3vl.nand() called with vectors of different sizes"),new Je(this._bits,Xs((r,n)=>~(r&n),t._bvec,this._bvec),Xs((r,n)=>~(r&n),t._avec,this._avec))}nor(t){return yi(t._bits==this._bits,"Vector3vl.nor() called with vectors of different sizes"),new Je(this._bits,Xs((r,n)=>~(r|n),t._bvec,this._bvec),Xs((r,n)=>~(r|n),t._avec,this._avec))}xnor(t){return yi(t._bits==this._bits,"Vector3vl.xnor() called with vectors of different sizes"),new Je(this._bits,lp((r,n,i,s)=>~(r&i^(n|s)),t._avec,t._bvec,this._avec,this._bvec),lp((r,n,i,s)=>~((r|i)&(n^s)),t._avec,t._bvec,this._avec,this._bvec))}not(){return new Je(this._bits,this._bvec.map(t=>~t),this._avec.map(t=>~t))}xmask(){const t=Xs((r,n)=>r^n,this._avec,this._bvec);return new Je(this._bits,t,t)}reduceAnd(){return new Je(1,Uint32Array.of(Jo((t,r)=>t&r,this._avec,this._lastmask,1)),Uint32Array.of(Jo((t,r)=>t&r,this._bvec,this._lastmask,1)))}reduceOr(){return new Je(1,Uint32Array.of(Jo((t,r)=>t|r,this._avec,this._lastmask,0)),Uint32Array.of(Jo((t,r)=>t|r,this._bvec,this._lastmask,0)))}reduceNand(){return new Je(1,Uint32Array.of(~Jo((t,r)=>t&r,this._bvec,this._lastmask,1)),Uint32Array.of(~Jo((t,r)=>t&r,this._avec,this._lastmask,1)))}reduceNor(){return new Je(1,Uint32Array.of(~Jo((t,r)=>t|r,this._bvec,this._lastmask,0)),Uint32Array.of(~Jo((t,r)=>t|r,this._avec,this._lastmask,0)))}reduceXor(){const t=Xs((i,s)=>~i&s,this._avec,this._bvec),r=Jo((i,s)=>i|s,t,this._lastmask,0),n=Jo((i,s)=>i^s,this._avec,this._lastmask,0);return new Je(1,Uint32Array.of(n&~r),Uint32Array.of(n|r))}reduceXnor(){return this.reduceXor().not()}concat(...t){return Je.concat(this,...t)}slice(t,r){if(t===void 0&&(t=0),r===void 0&&(r=this._bits),r>this.bits&&(r=this.bits),t>r&&(r=t),ra(t)==0){const n=this._avec.slice(t>>>5,r+31>>>5),i=this._bvec.slice(t>>>5,r+31>>>5);return new Je(r-t,n,i)}else{const n=r-t+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);let o=0;i[o]=this._avec[t>>5]>>>t,s[o]=this._bvec[t>>5]>>>t;for(let a=(t>>5)+1;a<=r>>>5&&(i[o]|=this._avec[a]<<-t,s[o]|=this._bvec[a]<<-t,o++,o!=n);a++)i[o]=this._avec[a]>>>t,s[o]=this._bvec[a]>>>t;return new Je(r-t,i,s)}}toIterator(t){return(t&t-1)==0?this.toIteratorPow2(t):this.toIteratorAnySkip(t)}*toIteratorAnySkip(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){let o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const u=r>>-n;o|=(this._avec[i+1]&u)<<-n,a|=(this._bvec[i+1]&u)<<-n}yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r<<n)}}*toIteratorPow2(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){const o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r)}}toArray(){this.normalize();const t=1,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){const a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n,c=a<<t|u;o.push(c-1-+(c>1)),s<<=t,n+=t,s==0&&(i++,s=r)}return o}toBin(){return fj(0,this._bits,this._avec,this._bvec)}toOct(){this.normalize();const t=3,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){let a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const f=r>>-n;a|=(this._avec[i+1]&f)<<-n,u|=(this._bvec[i+1]&f)<<-n}const c=a<<t|u;7&c&~(c>>3)?o.push("x"):o.push((c>>3).toString()),s<<=t,n+=t,s==0&&(i++,s=r<<n)}return o.reverse().join("")}toHex(){return this.normalize(),lj(0,this._bits,this._avec,this._bvec)}toString(){return"Vector3vl "+this.toBin()}toClonable(){return{_bits:this._bits,_avec:this._avec,_bvec:this._bvec}}toNumber(t=!1){return t?this.toNumberSigned():(yi(this.isFullyDefined,"Vector3vl.toNumber() called on a not fully defined vector"),yi(this._bits<32,"Vector3vl.toNumber() called on a too wide vector"),this._bits==0?0:Number.parseInt(this.toHex(),16))}toNumberSigned(){return yi(this.isFullyDefined,"Vector3vl.toNumberSigned() called on a not fully defined vector"),yi(this._bits<32,"Vector3vl.toNumberSigned() called on a too wide vector"),yi(this._bits>0,"Vector3vl.toNumberSigned() called on an empty vector"),this.msb==1?Number.parseInt(this.toHex(),16)-(1<<this._bits):Number.parseInt(this.toHex(),16)}toBigInt(t=!1){return t?this.toBigIntSigned():(yi(this.isFullyDefined,"Vector3vl.toBigInt() called on a not fully defined vector"),this._bits==0?BigInt(0):BigInt("0x"+this.toHex()))}toBigIntSigned(){return yi(this.isFullyDefined,"Vector3vl.toBigIntSigned() called on a not fully defined vector"),yi(this._bits>0,"Vector3vl.toBigIntSigned() called on an empty vector"),this.msb==1?BigInt("0x"+this.toHex())-(BigInt(1)<<BigInt(this._bits)):BigInt("0x"+this.toHex())}eq(t){if(t._bits!=this._bits)return!1;this.normalize(),t.normalize();for(const r in this._avec)if(this._avec[r]!=t._avec[r]||this._bvec[r]!=t._bvec[r])return!1;return!0}normalize(){const t=this._lastmask;this._avec[this._avec.length-1]&=t,this._bvec[this._bvec.length-1]&=t}get _lastmask(){return-1>>>-this.bits}}Je.empty=Je.zeros(0);Je.one=Je.ones(1);Je.zero=Je.zeros(1);Je.x=Je.xes(1);class dl{constructor(t,r,n){n===void 0&&(n=0),this._bits=t|0,this._size=r|0,this._wpc=(t+31)/32|0,this._avec=new Uint32Array(r*this._wpc).fill(n>0?-1:0),this._bvec=new Uint32Array(r*this._wpc).fill(n>=0?-1:0),this._size&&this.set(this._size-1,this.get(this._size-1))}static fromData(t){if(t.length==0)return new dl(0,0);const r=new dl(t[0].bits,t.length);for(const n in t){t[n].normalize(),yi(t[n].bits==r._bits,"Mem3vl.fromData() called with vectors of different sizes");for(let i=0;i<r._wpc;i++){const s=Number(n)*r._wpc+i;r._avec[s]=t[n]._avec[i],r._bvec[s]=t[n]._bvec[i]}}return r}get bits(){return this._bits}get words(){return this._size}get(t){const r=this._wpc*t;return new Je(this._bits,this._avec.slice(r,r+this._wpc),this._bvec.slice(r,r+this._wpc))}set(t,r){yi(r.bits==this._bits,"Mem3vl.set() called with a vector with different bit width than the memory"),r.normalize();for(let n=0;n<this._wpc;n++)this._avec[t*this._wpc+n]=r._avec[n],this._bvec[t*this._wpc+n]=r._bvec[n]}toJSON(){const t=[];let r=[],n,i=0;const s=()=>{if(r.length!=0){if(r.reduce((u,c)=>u+c.length,0)==this._bits){const u=r.pop();r.length>0&&t.push(r.join("")),t.push(u)}else t.push(r.join(""));r=[]}},o=()=>{i!=0&&(i==1?n.length==this._bits?(s(),t.push(n)):r.push(n):(s(),t.push(i),t.push(n)),n=void 0,i=0)},a=u=>{n==u?i++:(o(),n=u,i=1)};for(let u=0;u<this._size;u++){const c=()=>{for(let f=0;f<this._wpc;f++){const h=this._avec[u*this._wpc+f]^this._bvec[u*this._wpc+f];for(let v=0;v<4;v++){const y=255<<v*16,m=h&y;if(m!=y||m!=0)return!1}}return!0};this._bits>0&&c()?a(lj(u*this._wpc,this._bits,this._avec,this._bvec)):a(fj(u*this._wpc,this._bits,this._avec,this._bvec))}return o(),s(),t}static fromJSON(t,r){const n=Math.ceil(t/4);let i=0;const s=c=>c.length==t||c.length==n?1:c.length/n;for(let c=0;c<r.length;c++)typeof r[c]=="string"?i+=s(r[c]):typeof r[c]=="number"&&(i+=r[c]*s(r[c+1]),c++);const o=new dl(t,i,-1);let a=0;const u=c=>{if(c.length==t)hj(c,a,t,o._avec,o._bvec),a+=o._wpc;else if(c.length==n)mE(c,a,t,o._avec,o._bvec),a+=o._wpc;else for(let f=0;f<c.length/n;f++)mE(c.slice(f*n,(f+1)*n),a,t,o._avec,o._bvec),a+=o._wpc};for(let c=0;c<r.length;c++)if(typeof r[c]=="string")u(r[c]);else if(typeof r[c]=="number"){for(const f of Array(r[c]).keys())u(r[c+1]);c++}return o}toArray(){return Array(this._size).fill(0).map((t,r)=>this.get(r))}toHex(){return this.toArray().map(t=>t.toHex())}eq(t){if(t._bits!=this._bits||t._size!=this._size)return!1;for(let r=0;r<this._size;r++)if(!t.get(r).eq(this.get(r)))return!1;return!0}}class Xl{constructor(t){_p.set(this,void 0),this.pattern=t,Bpe(this,_p,RegExp("^(?:"+this.pattern+")$"),"f")}validate(t,r){return zpe(this,_p,"f").test(t)}}_p=new WeakMap;class jpe extends Xl{constructor(){super("[0-9a-fx]*"),this.name="hex",this.sort=0}can(t,r){return!0}read(t,r){return Je.fromHex(t,r)}show(t){return t.toHex()}size(t){return Math.ceil(t/4)}}class Hpe extends Xl{constructor(){super("[01x]*"),this.name="bin",this.sort=0}can(t,r){return!0}read(t,r){return Je.fromBin(t,r)}show(t){return t.toBin()}size(t){return t}}class Wpe extends Xl{constructor(){super("[0-7x]*"),this.name="oct",this.sort=0}can(t,r){return!0}read(t,r){return Je.fromOct(t,r)}show(t){return t.toOct()}size(t){return Math.ceil(t/3)}}class Xpe extends Xl{constructor(){super("[0-9]*|x")}get name(){return"dec"}get sort(){return 0}can(t,r){return!0}read(t,r){return t=="x"?Je.xes(r):Je.fromNumber(BigInt(t),r)}show(t){return t.isFullyDefined?t.toBigInt().toString():"x"}size(t){return Math.max(1,Math.ceil(t/Math.log2(10)))}}class Ype extends Xl{constructor(){super("-?[0-9]*|x")}get name(){return"dec2c"}get sort(){return 0}can(t,r){return r>0}read(t,r){return t=="x"?Je.xes(r):Je.fromNumber(BigInt(t),r)}show(t){return t.isFullyDefined?t.toBigIntSigned().toString():"x"}size(t){return 1+Math.ceil(t/Math.log2(10))}}class dj{constructor(){this.displays={},this.addDisplay(new jpe),this.addDisplay(new Hpe),this.addDisplay(new Wpe),this.addDisplay(new Xpe),this.addDisplay(new Ype)}addDisplay(t){this.displays[t.name]=t}usableDisplays(t,r){const n=[];for(let i of Object.values(this.displays))i.can(t,r)&&n.push(i);return n.sort((i,s)=>i.sort-s.sort?i.sort-s.sort:i.name.localeCompare(s.name)).map(i=>i.name)}show(t,r){return this.displays[t].show(r)}read(t,r,n){return this.displays[t].read(r,n)}pattern(t){return this.displays[t].pattern}validate(t,r,n){return this.displays[t].validate(r,n)}size(t,r){return this.displays[t].size(r)}}const pj={tagName:"circle",attributes:{r:7,fill:"black","fill-opacity":.3,stroke:"black","stroke-width":2,cursor:"move"}},Kpe=Npe.extend(An.merge({},pj)),Zpe=Lpe.extend(An.merge({},pj)),gj=vE.extend({update(){return this.relatedView.isShortWire()?(this.options.distance=this.options.distanceShort||this.options.distance,this.options.secondary&&this.hide()):this.options.distance=this.options.distanceLong||this.options.distance,vE.prototype.update.apply(this,arguments)}}),Z5=gj.extend({name:"remove",children:Y5.prototype.children,options:Y5.prototype.options}),J5=gj.extend({name:"monitor",children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#001DFF",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"m -2.5,-0.5 a 2,2 0 1 0 4,0 2,2 0 1 0 -4,0 M 1,1 3,3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{action(e){this.notify("link:monitor")}}}),$p={wire:{stroke:"#4B4F6A",x1:0,y1:0,x2:void 0,y2:0},port:{magnet:void 0,r:7,stroke:"black",fill:"white",strokeWidth:2,strokeOpacity:.5},bits:{ref:"port",fill:"black",fontSize:"7pt"},iolabel:{textVerticalAnchor:"middle",fill:"black",fontSize:"8pt"},decor:{stroke:"black",fill:"transparent"}},_n=ps.define("Gate",{propagation:1,label:"",size:{width:80,height:30},inputSignals:{},outputSignals:{},attrs:{".":{magnet:!1},body:{stroke:"black",strokeWidth:2},text:{fontSize:"8pt",fill:"black"},label:{refX:.5,refDy:3,textAnchor:"middle"}},ports:{groups:{in:{position:"left",attrs:An.merge({},$p,{wire:{x2:-25},port:{magnet:"passive",refX:-25},bits:{refDx:1,refY:-3,textAnchor:"start"},iolabel:{refX:5,textAnchor:"start"}})},out:{position:"right",attrs:An.merge({},$p,{wire:{x2:25},port:{magnet:!0,refX:25},bits:{refX:-1,refY:-3,textAnchor:"end"},iolabel:{refX:-5,textAnchor:"end"}})}}},z:1},{operation(){return{}},initialize(){const e=this.get("ports");e.items&&this._preprocessPorts(e.items),ps.prototype.initialize.apply(this,arguments),this.prepare(),this.bindAttrToProp("label/text","label"),this._unsupportedPropChanges.length>0&&this.on(this._unsupportedPropChanges.map(t=>"change:"+t).join(" "),(t,r,n)=>{if(n.init)return;const i=An.intersection(Object.keys(this.changed),this._unsupportedPropChanges);i.forEach(s=>{this.set(s,this.previous(s),{init:!0})}),console.warn('Beta property change support: "'+i+'" changes on '+this.get("type")+" are (currently) not supported.")})},prepare(){},bindAttrToProp(e,t){this.attr(e,this.get(t)),this.on("change:"+t,(r,n)=>this.attr(e,n))},_changeOutputSignals(e){An.chain(this.graph.getConnectedLinks(this,{outbound:!0})).groupBy(t=>t.get("source").port).forEach((t,r)=>t.forEach(n=>n.set("signal",e[r]))).value()},_setInput(e,t){const r=An.clone(this.get("inputSignals"));r[t]=e,this.set("inputSignals",r)},_clearInput(e){const t=this.getPort(e).bits;this._setInput(Je.xes(t),e)},_preprocessPorts(e){this._resetPortsSignals(e);for(const t of e){if(t.attrs={},t.attrs.bits={text:this._getBitsText(t.bits)},t.labelled){const r={text:"portlabel"in t?t.portlabel:t.id};t.polarity===!1&&(r["text-decoration"]="overline"),t.decor&&(console.assert(t.group=="in"),r.refX=10),t.attrs.iolabel=r}t.decor&&(t.attrs.decor={d:t.decor})}},_setPortsBits(e){const t=An.cloneDeep(this.get("ports")),r=[];for(const n in e){const i=e[n],s=t.items.find(function(o){return o.id&&o.id===n});s.bits=i,s.attrs.bits.text=this._getBitsText(i),r.push(s)}this._resetPortsSignals(r),this.set("ports",t),this.graph.getConnectedLinks(this,{outbound:!0}).filter(n=>n.get("source").port in e).forEach(n=>n._changeSource(n.get("source"))),this.graph.getConnectedLinks(this,{inbound:!0}).filter(n=>n.get("target").port in e).forEach(n=>n._changeTarget(n.get("target")))},_getBitsText(e){return e>1?e:""},_resetPortValue(e){return Je.xes(e.bits)},_resetPortsSignals(e){const t={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const r of e)console.assert(r.bits>=0),t[r.dir][r.id]=this._resetPortValue(r);this.set("inputSignals",t.in),this.set("outputSignals",t.out)},_removePortsSignals(e){const t={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const r of e)delete t[r.dir][r.id];this.set("inputSignals",t.in),this.set("outputSignals",t.out)},addPort(e){this.addPorts([e])},addPorts(e){this._preprocessPorts(e),ps.prototype.addPorts.apply(this,arguments)},removePort(e,t){this.removePorts([e])},removePorts(e,t){this._removePortsSignals(e),ps.prototype.removePorts.apply(this,arguments)},_getStackedPosition(e){return function(t,r){const n=e.side||"left",i=e.step||16,s=e.offset||12,o=n=="left"?r.topLeft().x:n=="right"?r.topRight().x:void 0,a=n=="top"?r.topLeft().y:n=="bottom"?r.bottomRight().y:void 0;return o!==void 0?An.map(t,function(u,c){return c+=u.idxOffset||0,pe({x:o,y:c*i+s})}):An.map(t,function(u,c){return c+=u.idxOffset||0,pe({x:c*i+s,y:a})})}},getLayoutSize(){return this.size()},setLayoutPosition(e){this.set("position",{x:e.x,y:e.y})},portMarkup:[{tagName:"line",className:"wire",selector:"wire"},{tagName:"circle",className:"port",selector:"port"},{tagName:"text",className:"bits",selector:"bits"},{tagName:"text",className:"iolabel",selector:"iolabel"},{tagName:"path",className:"decor",selector:"decor"}],markup:[{tagName:"text",className:"label",selector:"label"}],getGateParams(e){return An.cloneDeep(An.pick(this.attributes,this._gateParams.concat(e?this._gateLayoutParams:[])))},_gateParams:["label","type","propagation","source_positions"],_gateLayoutParams:["position"],_unsupportedPropChanges:[],_operationHelpers:[],_presentationParams:[]}),Kt=_i.extend({attrs:{signal:{high:{port:{stroke:"#03c03c"}},low:{port:{stroke:"#fc7c68"}},def:{port:{stroke:"#779ecb"}},undef:{port:{stroke:"#999"}}}},presentationAttributes:_i.addPresentationAttributes({inputSignals:"SIGNAL",outputSignals:"SIGNAL2"}),stopprop(e){e.stopPropagation()},confirmUpdate(e){this.hasFlag(e,"SIGNAL")&&this._updatePortSignals("in"),this.hasFlag(e,"SIGNAL2")&&this._updatePortSignals("out"),_i.prototype.confirmUpdate.apply(this,arguments)},_updatePortSignals(e){const t=e==="in"?this.model.get("inputSignals"):e==="out"?this.model.get("outputSignals"):An.merge({},this.model.get("inputSignals"),this.model.get("outputSignals"));for(const r in t){const n=t[r],i=this.attrs.signal[n.isDefined?n.isHigh?"high":n.isLow?"low":"def":"undef"];this._applyPortAttrs(r,i)}},_applyAttrs(e){for(const t in e){const r=this.selectors[t];this.setNodeAttributes(r,e[t])}},_applyPortAttrs(e,t){if(e in this._portElementsCache)for(const r in t){const n=this._portElementsCache[e].portSelectors[r];this.setNodeAttributes(n,t[r])}},_updatePorts(){_i.prototype._updatePorts.apply(this,arguments),this._updatePortSignals()}}),vj=yp.define("Wire",{attrs:{line:{class:"connection",targetMarker:null},wrapper:{stroke:"red"}},signal:Je.xes(1),bits:1,warning:!1,z:0},{initialize(){yp.prototype.initialize.apply(this,arguments),this.has("netname")&&this.label(0,{markup:[{tagName:"text",selector:"label"}],attrs:{label:{text:this.get("netname"),fill:"black",fontSize:"8pt"}},position:{distance:.5}})},onAdd(){this._changeSource(this.get("source")),this._was_added=!0},remove(){const e=this.get("target"),t=this.graph.getCell(e.id);t&&"port"in e&&t._clearInput(e.port),yp.prototype.remove.apply(this,arguments)},_propagateSignal(e,t){const r=this.getTargetElement();r&&(this.get("warning")?r._clearInput(e.port):r._setInput(t,e.port))},_changeSignal(e){this._propagateSignal(this.get("target"),e)},_changeSource(e){const t=this.getSourceElement();t&&"port"in e?(this.set("bits",t.getPort(e.port).bits),this._checkConnection(),this.set("signal",t.get("outputSignals")[e.port])):this.set("signal",Je.xes(this.get("bits")))},_changeTarget(e){if(this._checkConnection(),"port"in e&&this._propagateSignal(e,this.get("signal")),!this.hasChanged("target"))return;const t=this.previous("target"),r=this.graph.getCell(t.id);r&&"port"in t&&r._clearInput(t.port)},_checkConnection(){const e=this.get("target"),t=this.graph.getCell(e.id);this.set("warning",t&&t.getPort(e.port).bits!==this.get("bits")||!1,{silent:!this._was_added})},getWireParams(e){const t={from:{id:this.get("source").id,port:this.get("source").port},to:{id:this.get("target").id,port:this.get("target").port}};return this.has("netname")&&(t.name=this.get("netname")),e&&this.has("vertices")&&this.get("vertices").length>0&&(t.vertices=An.cloneDeep(this.get("vertices"))),t},getWirePath(){const e=[];for(let t=this.graph.get("subcircuit");t!=null;t=t.graph.get("subcircuit")){if(!t.has("label"))return null;e.push(t.get("label"))}return e.reverse()}}),Jpe=Ui.extend({initFlag:Ui.prototype.initFlag.concat(["INIT"]),longWireLength:400,attrs:{signal:{high:{line:{stroke:"#03c03c"}},low:{line:{stroke:"#fc7c68"}},def:{line:{stroke:"#779ecb"}},undef:{line:{stroke:"#999"}}},bits:{bus:{line:{"stroke-width":"4px"}},single:{line:{"stroke-width":"2px"}}},warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}},_wireToolsView:typeof window<"u"?new Tpe({tools:[new Mpe({focusOpacity:.5}),new Kpe,new Zpe,new Z5({distanceShort:"75%",distanceLong:"50"}),new Z5({distance:"-50",secondary:!0}),new J5({distanceShort:"25%",distanceLong:"30"}),new J5({distance:"-30",secondary:!0})]}):null,presentationAttributes:Ui.addPresentationAttributes({signal:"SIGNAL",bits:"BITS",warning:"WARNING"}),initialize(){Ui.prototype.initialize.apply(this,arguments),this.prevModels={source:null,target:null}},confirmUpdate(e){Ui.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"SIGNAL")&&this._updateSignal(),this.hasFlag(e,"BITS")&&this._updateBits(),this.hasFlag(e,"WARNING")&&this._updateWarning()},isShortWire(){return this.getConnectionLength()<this.longWireLength},_updateSignal(){const e=this.model.get("signal"),t=this.attrs.signal[e.isDefined?e.isHigh?"high":e.isLow?"low":"def":"undef"];this._applyAttrs(t)},_updateBits(){const e=this.model.get("bits"),t=this.attrs.bits[e>1?"bus":"single"];this._applyAttrs(t)},_updateWarning(){const e=this.model.get("warning"),t=this.attrs.warning[e?"warn":"none"];this._applyAttrs(t)},_applyAttrs(e){for(const t in e){const r=this.selectors[t];this.setNodeAttributes(r,e[t])}},update(){Ui.prototype.update.apply(this,arguments),this._updateSignal(),this._updateBits(),this._updateWarning()},onRemove(){Ui.prototype.onRemove.apply(this,arguments),this._removeTooltip()},mouseenter(e){Ui.prototype.mouseenter.apply(this,arguments),this.addTools(this._wireToolsView),this._addTooltip({x:e.clientX+5,y:e.clientY+5})},mouseleave(e){Ui.prototype.mouseleave.apply(this,arguments),this.removeTools(),this._removeTooltip()},_addTooltip(e){this.model.get("bits")!=1&&(this.wire_hover||(this.wire_hover=It('<div class="wire_hover">').css("left",e.x).css("top",e.y).appendTo(It(document.body)),this._generateTextForTooltip(),this.listenTo(this.model,"change:signal",this._generateTextForTooltip)))},_removeTooltip(){this.wire_hover&&(this.wire_hover.remove(),this.wire_hover=null,this.stopListening(this.model,"change:signal",this._generateTextForTooltip))},_generateTextForTooltip(){if(!this.wire_hover)return;const e=this.model.get("signal"),t=this.model.graph._display3vl,r=["Hex: "+t.show("hex",e)+"<br>","Dec: "+t.show("dec",e)+"<br>","Oct: "+t.show("oct",e)+"<br>","Bin: "+t.show("bin",e)].join("");this.wire_hover.html(r)},onEndModelChange(e,t,r){typeof t=="object"&&t!=null&&t==this.prevModels[e]&&Object.keys(t.changed).length>0&&!("position"in t.changed)||(Ui.prototype.onEndModelChange.apply(this,arguments),this.prevModels[e]=t)}}),Dt=_n.define("Box",{attrs:{body:{refWidth:1,refHeight:1},tooltip:{refX:0,refY:-30,height:30}}},{initialize(){_n.prototype.initialize.apply(this,arguments),this.on("change:size",(e,t)=>{t.width>this.tooltipMinWidth?this.attr("tooltip",{refWidth:1,width:null}):this.attr("tooltip",{refWidth:null,width:this.tooltipMinWidth})}),this.trigger("change:size",this,this.prop("size"))},markup:_n.prototype.markup.concat([{tagName:"rect",className:"body",selector:"body"}]),markupZoom:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"a",className:"zoom",textContent:"ð",style:{cursor:"pointer"}}]}]}],tooltipMinWidth:20,decorClock:"M"+[[0,-6],[6,0],[0,6]].map(e=>e.join(" ")).join(" L")}),ri=Kt.extend({_autoResizeBox:!1,render(){Kt.prototype.render.apply(this,arguments),this._autoResizeBox&&!this.model.get("box_resized")&&(this.model.set("box_resized",!0),this.model.prop("size/width",this._calculateBoxWidth()))},_calculateBoxWidth(){const e=Array.from(this.el.querySelectorAll("[port-group=in] > text.iolabel")),t=Array.from(this.el.querySelectorAll("[port-group=out] > text.iolabel")),r=Math.max(...e.map(o=>o.getBBox().width)),n=Math.max(...t.map(o=>o.getBBox().width)),i=o=>o==-1/0?-5:o;return i(r)+i(n)+25}}),cs=Dt.define("NumBase",{numbase:"hex",bits:1},{initialize(){Dt.prototype.initialize.apply(this,arguments),this.on("change:bits",(e,t)=>{this.graph._display3vl.usableDisplays(this.numbaseType,this.get("bits")).includes(this.get("numbase"))||this.set("numbase","hex")})},tooltipMinWidth:70,markupTooltip:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"select",className:"numbase"}]}]}],_gateParams:Dt.prototype._gateParams.concat(["numbase"])}),vu=ri.extend({presentationAttributes:ri.addPresentationAttributes({bits:"BITS",numbase:"NUMBASE"}),_autoResizeBox:!0,events:{"click select.numbase":"stopprop","mousedown select.numbase":"stopprop","touchstart select.numbase":"stopprop","change select.numbase":"_changeNumbase"},_changeNumbase(e){this.model.set("numbase",e.target.value||"bin")},_calculateBoxWidth(){const e=document.createElementNS("http://www.w3.org/2000/svg","text");It(e).text(Array(this.model.get("bits")).fill("0").join("")).attr("class","numvalue").appendTo(this.$el);const t=e.getBBox().width+20;return e.remove(),t},confirmUpdate(e){ri.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"BITS")||this.hasFlag(e,"RENDER"))&&this._makeNumBaseSelector(),this.hasFlag(e,"NUMBASE")&&this._updateNumBaseSelector()},_makeNumBaseSelector(){this.$("select.numbase").empty();const e=this.model.get("numbase"),t=this.model.graph._display3vl;for(const r of t.usableDisplays(this.model.numbaseType,this.model.get("bits")))It("<option>").attr("value",r).prop("selected",r==e).text(r).appendTo(this.$("select.numbase"))},_updateNumBaseSelector(){this.$("select.numbase").val(this.model.get("numbase"))}}),Ao=cs.define("IO",{bits:1,net:"",propagation:0,mode:-1,attrs:{ioname:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontWeight:"bold",fontSize:"10pt"}}},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:this._portDirection,group:this._portDirection,dir:this._portDirection,bits:e}],cs.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{const n={};n[this._portDirection]=r,this._setPortsBits(n),this.get("mode")!=0&&this._checkMode()}),this.bindAttrToProp("text.ioname/text","net")},onAdd(){this._checkMode()},_checkMode(){const e=this.graph&&this.graph.has("subcircuit"),t=this.get("bits"),r=e?0:t==1?1:2;return this.set("mode",r),this.set("box_resized",!1),this.set("markup",r==0?this.markupInSubcircuit:r==1?this.markupSingle:this.markupBus),r},_setPortsBits(e){if(cs.prototype._setPortsBits.apply(this,arguments),this.get("mode")!=0)return;const t=this.graph.get("subcircuit");console.assert(t!=null);const r={};r[this.get("net")]=e[this._portDirection],t._setPortsBits(r)},markupSingle:cs.prototype.markup,markupBus:cs.prototype.markup.concat(cs.prototype.markupTooltip),markupInSubcircuit:cs.prototype.markup.concat([{tagName:"text",className:"ioname",selector:"ioname"}]),_gateParams:cs.prototype._gateParams.concat(["bits","net","order"])}),sa=vu.extend({_calculateBoxWidth(){switch(this.model.get("mode")){case 0:const e=this.selectors.ioname;return e.getAttribute("display")!=="none"?e.getBBox().width+10:20;case 1:return 30;case 2:return vu.prototype._calculateBoxWidth.call(this)}}}),Hh=Ao.define("Input",{attrs:{btnface:{stroke:"black",strokeWidth:2,refX:.2,refY:.2,refHeight:.6,refWidth:.6,cursor:"pointer"},"foreignObject.valinput":{refX:.5,refY:.5,refWidth:-10,refHeight:-10,xAlignment:"middle",yAlignment:"middle"}}},{isInput:!0,_portDirection:"out",_resetPortValue(e){if(e.id=="out"&&e.dir=="out"){const t=this.get("bits");return this.get("mode")==1?Je.zeros(t):Je.xes(t)}else return Ao.prototype._resetPortValue.call(this,e)},_checkMode(){Ao.prototype._checkMode.call(this),this._resetPortsSignals([this.get("ports").items[0]])},setInput(e){this._setInput(e),this.trigger("userChange",this)},toggleInput(){this.setInput(this.get("outputSignals").out.not())},_setInput(e){if(e.bits!=this.get("bits"))throw new Error("setInput: wrong number of bits");this.set("outputSignals",{out:e})},markupSingle:Ao.prototype.markupSingle.concat([{tagName:"rect",className:"btnface",selector:"btnface"}]),markupBus:Ao.prototype.markupBus.concat([{tagName:"foreignObject",className:"valinput",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"text"}}]}]}]),numbaseType:"read"}),ZA=sa.extend({attrs:An.merge({button:{high:{btnface:{fill:"black"}},low:{btnface:{fill:"white"}}}},sa.prototype.attrs),confirmUpdate(e){sa.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"SIGNAL2")||this.hasFlag(e,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateButton();break;case 2:this._updateNumEntry();break}},_updateButton(){const e=this.model.get("outputSignals").out,t=this.attrs.button[e.isHigh?"high":"low"];this._applyAttrs(t)},_updateNumEntry(){const e=this.model.graph._display3vl;this.$("input").val(e.show(this.model.get("numbase"),this.model.get("outputSignals").out)),this.$("input").removeClass("invalid")},render(){sa.prototype.render.apply(this,arguments),this._updateView()},events:An.merge({"click .btnface":"_onButton","mousedown .btnface":"stopprop","touchstart .btnface":"stopprop","click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_onNumEntry"},vu.prototype.events),_onButton(){this.model.toggleInput()},_onNumEntry(e){const t=this.model.get("numbase"),r=this.model.get("bits"),n=this.model.graph._display3vl;if(n.validate(t,e.target.value,r)){const i=n.read(t,e.target.value,r);this.model.setInput(i)}else this.$("input").addClass("invalid")}}),mj=Hh,Qpe=ZA,yj=Hh,ege=ZA,Wh=Ao.define("Output",{attrs:{led:{refX:.5,refY:.5,refR:.35},value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{isOutput:!0,_portDirection:"in",getOutput(){return this.get("inputSignals").in},markupSingle:Ao.prototype.markupSingle.concat([{tagName:"circle",className:"led",selector:"led"}]),markupBus:Ao.prototype.markupBus.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),numbaseType:"show"}),JA=sa.extend({attrs:An.merge({lamp:{high:{led:{fill:"#03c03c"}},low:{led:{fill:"#fc7c68"}},undef:{led:{fill:"#bfc5c6"}}}},sa.prototype.attrs),confirmUpdate(e){sa.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"SIGNAL")||this.hasFlag(e,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateLamp();break;case 2:this._updateNumDisplay();break}},_updateLamp(){const e=this.model.get("inputSignals").in,t=this.attrs.lamp[e.isHigh?"high":e.isLow?"low":"undef"];this._applyAttrs(t)},_updateNumDisplay(){const e=this.model.graph._display3vl;this.$("text.value tspan").text(e.show(this.model.get("numbase"),this.model.get("inputSignals").in))},render(){sa.prototype.render.apply(this,arguments),this._updateView()}}),_j=Wh,tge=JA,bj=Wh,rge=JA,wj=cs.define("Constant",{constant:"0",propagation:0,attrs:{value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{initialize(){const t=this.get("constant").length;this.set("bits",t),this.get("ports").items=[{id:"out",group:"out",dir:"out",bits:t}],cs.prototype.initialize.apply(this,arguments),this.on("change:constant",(r,n)=>{const i=n.length;this._setPortsBits({out:i}),this.set("bits",i),this.set("constantCache",Je.fromBin(n,i))})},prepare(){const e=this.get("constant"),t=e.length;this.set("constantCache",Je.fromBin(e,t))},operation(){return{out:this.get("constantCache")}},markup:cs.prototype.markup.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),_gateParams:cs.prototype._gateParams.concat(["constant"]),numbaseType:"show"}),nge=vu.extend({presentationAttributes:vu.addPresentationAttributes({constantCache:"CONSTANT"}),confirmUpdate(e){vu.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"CONSTANT")||this.hasFlag(e,"NUMBASE"))&&this._showText()},_showText(){const e=this.model.graph._display3vl;this.$("text.value tspan").text(e.show(this.model.get("numbase"),this.model.get("constantCache")))},update(){vu.prototype.update.apply(this,arguments),this._showText()}}),xj=Dt.define("Clock",{propagation:100,ports:{items:[{id:"out",group:"out",dir:"out",bits:1}]},size:{width:30,height:30}},{_resetPortValue(e){return e.id=="out"&&e.dir=="out"?Je.zero:Dt.prototype._resetPortValue(e)},operation(){return{out:this.get("outputSignals").out.not(),_clock_hack:!0}},tooltipMinWidth:55,markup:Dt.prototype.markup.concat([{tagName:"path",className:"decor",attributes:{d:"M7.5 7.5 L7.5 22.5 L15 22.5 L15 7.5 L22.5 7.5 L22.5 22.5",stroke:"black"}},{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"number",min:1,step:1}}]}]}]),_unsupportedPropChanges:Dt.prototype._unsupportedPropChanges.concat(["bits"])}),ige=ri.extend({presentationAttributes:ri.addPresentationAttributes({propagation:"SIGNAL"}),events:{"click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_changePropagation","input input":"_changePropagation"},render(e){ri.prototype.render.apply(this,arguments),this.updatePropagation()},confirmUpdate(e){ri.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"SIGNAL")&&this.updatePropagation()},_changePropagation(e){const t=e.target.value,r=String(t)==String(Number(t));r&&this.model.set("propagation",Number(t)||1),this.$("input").toggleClass("invalid",!r)},updatePropagation(){this.$("input").val(this.model.get("propagation"))}}),Q5=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SP","DEL"];class sge extends Xl{constructor(){super("[ -~Â -Ã¿ï¿½â-â¡]|"+Q5.join("|"))}get name(){return"ascii"}get sort(){return 1}can(t,r){return r==7||r==8}read(t,r){if(t.length==1){const n=t.charCodeAt(0);return n==65533?Je.xes(r):n==9249?Je.fromHex("7f",r):n>=9216&&n<=9248?Je.fromHex((n-9216).toString(16),r):Je.fromHex(n.toString(16),r)}else{const n=Q5.indexOf(t);return n<0?Je.xes(r):n==33?Je.fromHex("7f",r):Je.fromHex(n.toString(16),r)}}show(t){if(!t.isFullyDefined)return"ï¿½";const r=parseInt(t.toHex(),16);return r<=32?String.fromCharCode(9216+r):r==127?"â¡":r>127&&r<160?"ï¿½":String.fromCharCode(r)}size(t){return 1}}function QA(e,t,r){return'<select name="base">'+e.usableDisplays("read",t).map(i=>'<option value="'+i+'"'+(i==r?' selected="selected"':"")+">"+i+"</option>").join("")+"</select>"}function yE(e,t){for(const r in t)if(!e[r].eq(t[r]))return!1;return!0}const av="M19 0v32h16c9 0 16-7 16-16S44 0 35 0H20z",Nu="M14.3 0l1.6 2s4.5 5.6 4.5 14s-4.5 14-4.5 14l-1.6 2H28c3.8 0 16.6-.5 25-16h0A28 28 0 0028 0H16.8z",Sj="M18-2v36l2-1 32-17h0L20-1z",oge="M6.8-1.2 10 2.7S14.2 8 14.2 16S10 29.3 10 29.3l-3.2 3.9H10l1.7-2.4s4.8-6 4.8-14.8c0-8.9-4.8-14.8-4.8-14.8l-1.7-2.4z",uv={tagName:"path",selector:"xor_arc",attributes:{fill:"#000",d:oge}},Ic={tagName:"circle",className:"body",selector:"neg_bubble",attributes:{stroke:"#000","stroke-width":"2px",cx:56,cy:16,r:4}};function Ka(e=[]){return{tagName:"g",selector:"body",children:[{tagName:"path",className:"body gate",selector:"gate"}].concat(e)}}const ia=_n.define("GateSVG",{bits:1,size:{width:60,height:32},ports:{groups:{in:{position:{name:"left",args:{dx:30}},attrs:{wire:{x2:-50},port:{refX:-50}},z:-1},out:{position:{name:"right",args:{dx:-30}},attrs:{wire:{x2:50},port:{refX:50}},z:-1}}}},{markup:_n.prototype.markup.concat([Ka()]),_gateParams:_n.prototype._gateParams.concat(["bits"])}),eT=ia.define("Gate11",{},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e},{id:"out",group:"out",dir:"out",bits:e}],ia.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits({in:r,out:r})})}}),Oc=ia.define("GateX1",{inputs:2,attrs:{gate:{"vector-effect":"non-scaling-stroke"},xor_arc:{"vector-effect":"non-scaling-stroke"},neg_bubble:{"vector-effect":"non-scaling-stroke"}}},{initialize(){const e=this.get("bits"),t=this.get("inputs"),r=[];for(let i=1;i<=t;i++)r.push({id:"in"+i,group:"in",dir:"in",bits:e});r.push({id:"out",group:"out",dir:"out",bits:e}),this.get("ports").items=r;const n=t/2;this.set("size",{width:60*n,height:32*n}),this.attr("body/transform","translate(-4, 0) scale("+n+")"),this.prop("ports/groups/in/position/args/dx",30*n),this.prop("ports/groups/in/attrs/wire/x2",-30*n-20),this.prop("ports/groups/in/attrs/port/refX",-30*n-20),this.prop("ports/groups/out/position/args/dx",-30*n),this.prop("ports/groups/out/attrs/wire/x2",30*n+20),this.prop("ports/groups/out/attrs/port/refX",30*n+20),ia.prototype.initialize.apply(this,arguments),this.on("change:bits",(i,s)=>{const o=this.get("inputs"),a={out:s};for(let u=1;u<=o;u++)a["in"+u]=s;this._setPortsBits(a)})},operation(e){let t=e.in1;for(let r=2;r<=this.get("inputs");r++)t=this.binoperation(t,e["in"+r]);return{out:this.finoperation(t)}},finoperation(e){return e},_gateParams:ia.prototype._gateParams.concat(["inputs"]),_unsupportedPropChanges:ia.prototype._unsupportedPropChanges.concat(["inputs"]),_operationHelpers:ia.prototype._operationHelpers.concat(["binoperation","finoperation"])}),Su=ia.define("GateReduce",{},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e},{id:"out",group:"out",dir:"out",bits:1}],ia.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits({in:r})})}}),Ej=eT.define("Repeater",{attrs:{gate:{d:Sj}}},{operation(e){return{out:e.in}}}),age=Kt,Aj=eT.define("Not",{attrs:{gate:{d:Sj}}},{operation(e){return{out:e.in.not()}},markup:_n.prototype.markup.concat([Ka([Ic])])}),uge=Kt,Tj=Oc.define("Or",{attrs:{gate:{d:Nu}}},{binoperation(e,t){return e.or(t)}}),cge=Kt,Pj=Oc.define("And",{attrs:{gate:{d:av}}},{binoperation(e,t){return e.and(t)}}),lge=Kt,Cj=Oc.define("Nor",{attrs:{gate:{d:Nu}}},{binoperation(e,t){return e.or(t)},finoperation(e){return e.not()},markup:_n.prototype.markup.concat([Ka([Ic])])}),fge=Kt,Rj=Oc.define("Nand",{attrs:{gate:{d:av}}},{binoperation(e,t){return e.and(t)},finoperation(e){return e.not()},markup:_n.prototype.markup.concat([Ka([Ic])])}),hge=Kt,Ij=Oc.define("Xor",{attrs:{gate:{d:Nu}}},{binoperation(e,t){return e.xor(t)},markup:_n.prototype.markup.concat([Ka([uv])])}),dge=Kt,Oj=Oc.define("Xnor",{attrs:{gate:{d:Nu}}},{binoperation(e,t){return e.xor(t)},finoperation(e){return e.not()},markup:_n.prototype.markup.concat([Ka([uv,Ic])])}),pge=Kt,_E=Su.define("OrReduce",{attrs:{gate:{d:Nu}}},{operation(e){return{out:e.in.reduceOr()}}}),gge=Kt,bE=Su.define("NorReduce",{attrs:{gate:{d:Nu}}},{operation(e){return{out:e.in.reduceNor()}},markup:Su.prototype.markup.concat([Ic])}),vge=Kt,Mj=Su.define("AndReduce",{attrs:{gate:{d:av}}},{operation(e){return{out:e.in.reduceAnd()}}}),mge=Kt,kj=Su.define("NandReduce",{attrs:{gate:{d:av}}},{operation(e){return{out:e.in.reduceNand()}},markup:_n.prototype.markup.concat([Ka([Ic])])}),yge=Kt,Lj=Su.define("XorReduce",{attrs:{gate:{d:Nu}}},{operation(e){return{out:e.in.reduceXor()}},markup:_n.prototype.markup.concat([Ka([uv])])}),_ge=Kt,Nj=Su.define("XnorReduce",{attrs:{gate:{d:Nu}}},{operation(e){return{out:e.in.reduceXnor()}},markup:_n.prototype.markup.concat([Ka([uv,Ic])])}),bge=Kt;function wE(e){return e<=Number.MAX_SAFE_INTEGER&&e>=-Number.MAX_SAFE_INTEGER}const bi=_n.define("Arith",{size:{width:40,height:40},attrs:{body:{refR:.5,refCx:.5,refCy:.5},oper:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontSize:"12pt"}},ports:{groups:{in:{position:{name:"left",args:{dx:10}},attrs:{wire:{x2:-35},port:{refX:-35}},z:-1},out:{position:{name:"right",args:{dx:-10}},attrs:{wire:{x2:35},port:{refX:35}},z:-1}}}},{markup:_n.prototype.markup.concat([{tagName:"circle",className:"body",selector:"body"},{tagName:"text",className:"oper",selector:"oper"}]),_gateParams:_n.prototype._gateParams.concat(["bits","signed"]),_unsupportedPropChanges:_n.prototype._unsupportedPropChanges.concat(["signed"])}),tT=bi.define("Arith11",{bits:{in:1,out:1},signed:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:e.out}],bi.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})},operation(e){const t=this.get("bits");return e.in.isFullyDefined?{out:Je.fromNumber(this.arithop(e.in.toBigInt(this.get("signed"))),t.out)}:{out:Je.xes(t.out)}},_operationHelpers:bi.prototype._operationHelpers.concat(["arithop"])}),Mc=bi.define("Arith21",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1}},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:e.in1},{id:"in2",group:"in",dir:"in",bits:e.in2},{id:"out",group:"out",dir:"out",bits:e.out}],bi.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})},operation(e){const t=this.get("bits"),r=this.get("signed");return!e.in1.isFullyDefined||!e.in2.isFullyDefined?{out:Je.xes(t.out)}:{out:Je.fromNumber(this.arithop(e.in1.toBigInt(r.in1&&r.in2),e.in2.toBigInt(r.in1&&r.in2)),t.out)}},_operationHelpers:bi.prototype._operationHelpers.concat(["arithop"])});function xE(e,t,r,n,i,s,o){const a=e.get(e.bits-1),u=Je.make(Math.max(0,n-r),o?0:i?a:-1),c=e.concat(u);return(t<0?Je.make(-t,o?0:-1).concat(c):c.slice(t).concat(Je.make(t,o?0:s?c.get(c.bits-1):-1))).slice(0,n)}const rT=bi.define("Shift",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1,out:!1},fillx:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:e.in1},{id:"in2",group:"in",dir:"in",bits:e.in2},{id:"out",group:"out",dir:"out",bits:e.out}],bi.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})},operation(e){const t=this.get("bits"),r=this.get("signed"),n=this.get("fillx");if(!e.in2.isFullyDefined)return{out:Je.xes(t.out)};const i=e.in2.toNumber(r.in2)*this.shiftdir;return{out:xE(e.in1,i,t.in1,t.out,r.in1,r.out,n)}},_gateParams:bi.prototype._gateParams.concat(["fillx"]),_unsupportedPropChanges:bi.prototype._unsupportedPropChanges.concat(["fillx"]),_operationHelpers:bi.prototype._operationHelpers.concat(["shiftdir"])}),gh=bi.define("BaseCompare",{bits:{in1:1,in2:1},signed:{in1:!1,in2:!1}},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:e.in1},{id:"in2",group:"in",dir:"in",bits:e.in2},{id:"out",group:"out",dir:"out",bits:1}],bi.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})}}),Xh=gh.define("Compare",{},{operation(e){this.get("bits");const t=this.get("signed");return!e.in1.isFullyDefined||!e.in2.isFullyDefined?{out:Je.xes(1)}:{out:Je.fromBool(this.arithcomp(e.in1.toBigInt(t.in1&&t.in2),e.in2.toBigInt(t.in1&&t.in2)))}},_operationHelpers:gh.prototype._operationHelpers.concat(["arithcomp"])}),nT=gh.define("EqCompare",{},{operation(e){const t=this.get("bits"),r=this.get("signed"),n=t.in1>=t.in2?e.in1:e.in1.concat(Je.make(t.in2-t.in1,r.in1&&r.in2?e.in1.msb:-1)),i=t.in2>=t.in1?e.in2:e.in2.concat(Je.make(t.in1-t.in2,r.in1&&r.in2?e.in2.msb:-1));return{out:this.bincomp(n,i)}},_operationHelpers:gh.prototype._operationHelpers.concat(["bincomp"])}),qj=tT.define("Negation",{attrs:{oper:{text:"-"}}},{arithop:e=>-e}),wge=Kt,Dj=tT.define("UnaryPlus",{attrs:{oper:{text:"+"}}},{arithop:e=>e}),xge=Kt,Fj=Mc.define("Addition",{attrs:{oper:{text:"+"}}},{arithop:(e,t)=>e+t}),Sge=Kt,Bj=Mc.define("Subtraction",{attrs:{oper:{text:"-"}}},{arithop:(e,t)=>e-t}),Ege=Kt,zj=Mc.define("Multiplication",{attrs:{oper:{text:"Ã"}}},{arithop:(e,t)=>e*t}),Age=Kt,Vj=Mc.define("Division",{attrs:{oper:{text:"Ã·"}}},{arithop:(e,t)=>t==0n?e:e/t}),Tge=Kt,Gj=Mc.define("Modulo",{attrs:{oper:{text:"%"}}},{arithop:(e,t)=>t==0n?e:e%t}),Pge=Kt,$j=Mc.define("Power",{attrs:{oper:{text:"^"}}},{arithop:(e,t)=>t>=0n?e**t:e==1n?1n:e==-1n?t%2n?-1n:1n:0n}),Cge=Kt,Uj=rT.define("ShiftLeft",{attrs:{oper:{text:"âª"}}},{shiftdir:-1}),Rge=Kt,jj=rT.define("ShiftRight",{attrs:{oper:{text:"â«"}}},{shiftdir:1}),Ige=Kt,Hj=Xh.define("Lt",{attrs:{oper:{text:"<"}}},{arithcomp:(e,t)=>e<t}),Oge=Kt,Wj=Xh.define("Le",{attrs:{oper:{text:"â¤"}}},{arithcomp:(e,t)=>e<=t}),Mge=Kt,Xj=Xh.define("Gt",{attrs:{oper:{text:">"}}},{arithcomp:(e,t)=>e>t}),kge=Kt,Yj=Xh.define("Ge",{attrs:{oper:{text:"â¥"}}},{arithcomp:(e,t)=>e>=t}),Lge=Kt,Kj=nT.define("Eq",{attrs:{oper:{text:"="}}},{bincomp:(e,t)=>e.xnor(t).reduceAnd()}),Nge=Kt,Zj=nT.define("Ne",{attrs:{oper:{text:"â "}}},{bincomp:(e,t)=>e.xor(t).reduceOr()}),qge=Kt,oa=bi.define("OpConst",{leftOp:!1,constant:0},{initialize(){bi.prototype.initialize.apply(this,arguments);let e=this.get("constant");(typeof e=="string"||e instanceof String)&&(e=BigInt(e),wE(e)&&(e=Number(e)),this.set("constant",e));const t=()=>{const n=30+String(this.get("constant")).length*10;this.prop("size",{width:n,height:n}),this.attr("oper/text",this.get("leftOp")?this.get("constant")+this.operSymbol:this.operSymbol+this.get("constant"))};t(),this.on("change:bits",(r,n)=>{this._setPortsBits(n)}),this.on("change:constant",()=>t()),this.on("change:leftOp",()=>t())},getGateParams(){const e=bi.prototype.getGateParams.apply(this,arguments);return typeof e.constant=="bigint"&&(wE(e.constant)?e.constant=Number(e.constant):e.constant=String(e.constant)),e},_gateParams:bi.prototype._gateParams.concat(["leftOp","constant"])}),kc=oa.define("ArithConst",{bits:{in:1,out:1},signed:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:e.out}],oa.prototype.initialize.apply(this,arguments)},operation(e){const t=this.get("bits"),r=this.get("signed"),n=this.get("constant");return e.in.isFullyDefined?this.get("leftOp")?{out:Je.fromNumber(this.arithop(BigInt(n),e.in.toBigInt(r.in)),t.out)}:{out:Je.fromNumber(this.arithop(e.in.toBigInt(r.in),BigInt(n)),t.out)}:{out:Je.xes(t.out)}},_operationHelpers:oa.prototype._operationHelpers.concat(["arithop"])}),iT=oa.define("ShiftConst",{bits:{in:1,out:1},signed:{in:!1,out:!1},fillx:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:e.out}],oa.prototype.initialize.apply(this,arguments)},operation(e){const t=this.get("bits"),r=this.get("signed"),n=this.get("fillx"),i=this.get("constant");if(this.get("leftOp")){if(!e.in.isFullyDefined)return{out:Je.xes(t.out)};const s=e.in.toNumber(r.in),o=Je.fromNumber(i);return{out:xE(o,s*this.shiftdir,o.bits,t.out,i<0,r.out,n)}}else return console.assert(wE(i)),{out:xE(e.in,Number(i)*this.shiftdir,t.in,t.out,r.in,r.out,n)}},_gateParams:oa.prototype._gateParams.concat(["fillx"]),_operationHelpers:oa.prototype._operationHelpers.concat(["shiftdir"])}),vh=oa.define("BaseCompareConst",{bits:{in:1},signed:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:1}],oa.prototype.initialize.apply(this,arguments)}}),Yh=vh.define("CompareConst",{},{operation(e){this.get("bits");const t=this.get("signed"),r=this.get("constant");return e.in.isFullyDefined?this.get("leftOp")?{out:Je.fromBool(this.arithcomp(BigInt(r),e.in.toBigInt(t.in)))}:{out:Je.fromBool(this.arithcomp(e.in.toBigInt(t.in),BigInt(r)))}:{out:Je.x}},_operationHelpers:vh.prototype._operationHelpers.concat(["arithcomp"])}),sT=vh.define("EqCompareConst",{},{operation(e){const t=this.get("bits");this.get("signed");const r=this.get("constant");return this.get("leftOp")?{out:this.bincomp(Je.fromNumber(r,t.in),e.in)}:{out:this.bincomp(e.in,Je.fromNumber(r,t.in))}},_operationHelpers:vh.prototype._operationHelpers.concat(["bincomp"])}),Dge=kc.define("AdditionConst",{},{operSymbol:"+",arithop:(e,t)=>e+t}),Fge=Kt,Bge=kc.define("SubtractionConst",{},{operSymbol:"-",arithop:(e,t)=>e-t}),zge=Kt,Vge=kc.define("MultiplicationConst",{},{operSymbol:"Ã",arithop:(e,t)=>e*t}),Gge=Kt,$ge=kc.define("DivisionConst",{},{operSymbol:"Ã·",arithop:(e,t)=>t==0n?e:e/t}),Uge=Kt,jge=kc.define("ModuloConst",{},{operSymbol:"%",arithop:(e,t)=>t==0n?e:e%t}),Hge=Kt,Wge=kc.define("PowerConst",{},{operSymbol:"^",arithop:(e,t)=>t>=0n?e**t:e==1n?1n:e==-1n?t%2n?-1n:1n:0n}),Xge=Kt,Yge=iT.define("ShiftLeftConst",{},{operSymbol:"âª",shiftdir:-1}),Kge=Kt,Zge=iT.define("ShiftRightConst",{},{operSymbol:"â«",shiftdir:1}),Jge=Kt,Qge=Yh.define("LtConst",{},{operSymbol:"<",arithcomp:(e,t)=>e<t}),eve=Kt,tve=Yh.define("LeConst",{},{operSymbol:"â¤",arithcomp:(e,t)=>e<=t}),rve=Kt,nve=Yh.define("GtConst",{},{operSymbol:">",arithcomp:(e,t)=>e>t}),ive=Kt,sve=Yh.define("GeConst",{},{operSymbol:"â¥",arithcomp:(e,t)=>e>=t}),ove=Kt,ave=sT.define("EqConst",{},{operSymbol:"=",bincomp:(e,t)=>e.xnor(t).reduceAnd()}),uve=Kt,cve=sT.define("NeConst",{},{operSymbol:"â ",bincomp:(e,t)=>e.xor(t).reduceOr()}),lve=Kt,oT=Dt.define("BitExtend",{extend:{input:1,output:1},propagation:0,attrs:{value:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){const e=this.get("extend");console.assert(e.input<=e.output),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.input},{id:"out",group:"out",dir:"out",bits:e.output}],Dt.prototype.initialize.apply(this,arguments),this.on("change:extend",(t,r)=>{this._setPortsBits({in:r.input,out:r.output})})},operation(e){const t=this.get("extend");return{out:e.in.concat(Je.make(t.output-t.input,this._extBit(e.in)))}},markup:Dt.prototype.markup.concat([{tagName:"text",className:"value",selector:"value"}]),_gateParams:Dt.prototype._gateParams.concat(["extend"]),_operationHelpers:Dt.prototype._operationHelpers.concat(["_extBit"])}),aT=ri.extend({_autoResizeBox:!0,_calculateBoxWidth(){return this.el.querySelector("text.value").getBBox().width+10}}),Jj=oT.define("ZeroExtend",{attrs:{value:{text:"zero-extend"}}},{_extBit(e){return-1}}),fve=aT,Qj=oT.define("SignExtend",{attrs:{value:{text:"sign-extend"}}},{_extBit(e){return e.get(e.bits-1)}}),hve=aT,eH=Dt.define("BusSlice",{slice:{first:0,count:1,total:2},propagation:0,size:{width:40,height:24}},{initialize(){const e=this.get("slice"),t=e.count==1?e.first:e.first+"-"+(e.first+e.count-1);this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.total},{id:"out",group:"out",dir:"out",bits:e.count,portlabel:t,labelled:!0}],Dt.prototype.initialize.apply(this,arguments),this.on("change:slice",(r,n)=>{this._setPortsBits({in:n.total,out:n.count})})},operation(e){const t=this.get("slice");return{out:e.in.slice(t.first,t.first+t.count)}},_gateParams:Dt.prototype._gateParams.concat(["slice"])}),dve=ri.extend({_autoResizeBox:!0}),uT=Dt.define("BusRegroup",{groups:[1],propagation:0,size:{width:40,height:void 0}},{initialize(){var e=0;const t=[],r=this.get("groups");this.get("size").height=r.length*16+8;for(const[i,s]of r.entries()){const o=e+(s>1?"-"+(e+s-1):"");e+=s,t.push({id:this.group_dir+i,group:this.group_dir,dir:this.group_dir,bits:s,portlabel:o,labelled:!0})}this.set("bits",e);const n=this.group_dir=="out"?"in":"out";t.push({id:n,group:n,dir:n,bits:e}),this.get("ports").items=t,Dt.prototype.initialize.apply(this,arguments)},_gateParams:Dt.prototype._gateParams.concat(["groups"]),_unsupportedPropChanges:Dt.prototype._unsupportedPropChanges.concat(["groups"])}),cT=ri.extend({_autoResizeBox:!0}),tH=uT.define("BusGroup",{},{group_dir:"in",operation(e){const t=[];for(const r of this.get("groups").keys())t.push(e["in"+r]);return{out:Je.concat(...t)}}}),pve=cT,rH=uT.define("BusUngroup",{},{group_dir:"out",operation(e){const t={};let r=0;for(const[n,i]of this.get("groups").entries())t["out"+n]=e.in.slice(r,r+i),r+=i;return t}}),gve=cT,e4=10,vve=10,nH=Dt.define("Subcircuit",{propagation:0,warning:!1,attrs:{wrapper:{refWidth:1,refHeight:1,stroke:"red",strokeWidth:10},type:{refX:.5,refY:-10,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){this.bindAttrToProp("text.type/text","celltype");const e=this.get("graph");console.assert(e instanceof Po),e.set("subcircuit",this);const t=e.getCells().filter(c=>c instanceof Ao),r=t.filter(c=>c instanceof Hh),n=t.filter(c=>c instanceof Wh);function i(c,f){return c.has("order")||f.has("order")?c.get("order")-f.get("order"):c.get("net").localeCompare(f.get("net"))}r.sort(i),n.sort(i);const o={width:80,height:Math.max(r.length,n.length)*16+8},a=[],u={};for(const[c,f]of r.entries())a.push({id:f.get("net"),group:"in",dir:"in",bits:f.get("bits"),labelled:!0});for(const[c,f]of n.entries())a.push({id:f.get("net"),group:"out",dir:"out",bits:f.get("bits"),labelled:!0});for(const c of t)u[c.get("net")]=c.get("id");this.set("size",o),this.set("circuitIOmap",u),this.get("ports").items=a,this.set("warning",e._warnings>0),Dt.prototype.initialize.apply(this,arguments)},_resetPortValue(e){const t=this.get("circuitIOmap"),r=this.get("graph");return e.dir=="in"?r.getCell(t[e.id]).get("outputSignals").out:e.dir=="out"?r.getCell(t[e.id]).get("inputSignals").in:Dt.prototype._resetPortValue.call(this,e)},getLayoutSize(){const e=this.size();return e.height+=vve,e},setLayoutPosition(e){this.set("position",{x:e.x,y:e.y+e4})},getPortsPositions(){const e=Dt.prototype.getPortsPositions.apply(this,arguments),t={};for(const r in e)t[r]={...e[r]},t[r].y=t[r].y+e4;return t},markup:[{tagName:"rect",selector:"wrapper"}].concat(Dt.prototype.markup,[{tagName:"text",className:"type",selector:"type"}],Dt.prototype.markupZoom),_gateParams:Dt.prototype._gateParams.concat(["celltype"]),_unsupportedPropChanges:Dt.prototype._unsupportedPropChanges.concat(["celltype"])}),mve=ri.extend({attrs:An.merge({},ri.prototype.attrs,{warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}}),_autoResizeBox:!0,presentationAttributes:ri.addPresentationAttributes({warning:"WARNING"}),confirmUpdate(e){ri.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"WARNING")&&this._updateWarning()},_updateWarning(){const e=this.model.get("warning"),t=this.attrs.warning[e?"warn":"none"];this._applyAttrs(t)},update(){ri.prototype.update.apply(this,arguments),this._updateWarning()},events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"zoomInCircuit"},zoomInCircuit(e){return e.stopPropagation(),this.paper.trigger("open:subcircuit",this.model),!1}}),t4=20,yve=30,mu=_n.define("GenMux",{bits:{in:1,sel:1},size:{width:40,height:void 0},ports:{groups:{in2:{position:{name:"top",args:{y:5}},attrs:An.merge({},$p,{wire:{x2:0,y2:-25},port:{magnet:"passive",refY:-25},bits:{refDx:-5,refDy:2,textAnchor:"start"}}),z:-1}}},attrs:{label:{refDy:8}}},{initialize(){const e=this.get("bits"),t=[{id:"sel",group:"in2",dir:"in",bits:e.sel},{id:"out",group:"out",dir:"out",bits:e.in}],r=this.muxInputs(e.sel);this.get("size").height=r.length*16+8;const i="M"+[[2,0],[5,5],[10,-5]].map(o=>o.join(" ")).join(" L");for(const[o,a]of r.entries()){const u={id:"in"+o,group:"in",dir:"in",bits:e.in,decor:i};a&&(u.portlabel=String(a),u.labelled=!0),t.push(u)}this.get("ports").items=t,_n.prototype.initialize.apply(this,arguments);const s=o=>this.attr(["body","points"],[[0,-5],[o.width,5],[o.width,o.height-5],[0,o.height+5]].map(a=>a.join(",")).join(" "));s(this.get("size")),this.on("change:size",(o,a)=>s(a))},operation(e){const t=this.muxInput(e.sel);return t===void 0?{out:Je.xes(this.get("bits").in)}:{out:e["in"+t]}},getLayoutSize(){const e=this.size();return e.height+=yve,e},setLayoutPosition(e){this.set("position",{x:e.x,y:e.y+t4})},getPortsPositions(){const e=_n.prototype.getPortsPositions.apply(this,arguments),t={};for(const r in e)t[r]={...e[r]},t[r].y=t[r].y+t4;return t},markup:_n.prototype.markup.concat([{tagName:"polygon",className:"body",selector:"body"}]),_gateParams:_n.prototype._gateParams.concat(["bits"]),_unsupportedPropChanges:_n.prototype._unsupportedPropChanges.concat(["bits"]),_operationHelpers:_n.prototype._operationHelpers.concat(["muxInput"])}),cv=Kt.extend({initialize(){this.ins=this.model.muxInputs(this.model.get("bits").sel),Kt.prototype.initialize.apply(this,arguments)},confirmUpdate(e){Kt.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"SIGNAL")&&this._updateMux(this.model.get("inputSignals"))},render(){Kt.prototype.render.apply(this,arguments),this._updateMux(this.model.get("inputSignals"))},_updateMux(e){const t=this.model.muxInput(e.sel);for(const r of this.ins.keys())this.$("[port=in"+r+"] path.decor").css("visibility",t==r?"visible":"hidden")}}),iH=mu.define("Mux",{},{muxInputs:e=>Array(1<<e),muxInput:e=>e.isFullyDefined?e.toBigInt().toString():void 0}),_ve=cv,sH=mu.define("Mux1Hot",{attrs:{info:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",text:"1Hot",transform:"rotate(90)"}}},{markup:mu.prototype.markup.concat([{tagName:"text",className:"info",selector:"info"}]),muxInputs:e=>Array(e+1),muxInput:e=>{const t=e.toArray();return e.isFullyDefined&&t.filter(r=>r==1).length<=1?String(t.indexOf(1)+1):void 0}}),bve=cv,wve=mu.define("MuxSparse",{inputs:void 0,default_input:!1},{initialize(){const e=this.get("inputs");for(let t=0;t<e.length;t++)typeof e[t]!="bigint"&&(e[t]=BigInt(e[t]));mu.prototype.initialize.apply(this,arguments)},muxInputs(e){return this.get("default_input")?["*"].concat(this.get("inputs")):this.get("inputs")},muxInput(e){const t=this.get("default_input");if(!e.isFullyDefined)return;const r=this.get("inputs").indexOf(e.toBigInt());return r<0?t?0:void 0:t?r+1:r},_gateParams:mu.prototype._gateParams.concat(["inputs","default_input"]),_unsupportedPropChanges:mu.prototype._unsupportedPropChanges.concat(["inputs","default_input"])}),xve=cv,oH=Dt.define("Dff",{bits:1,initial:"x",size:{width:80,height:void 0},ports:{groups:{in:{position:Dt.prototype._getStackedPosition({side:"left"})},out:{position:Dt.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const e=this.get("bits");this.get("initial");const t=this.get("polarity")||{},r=[];this.get("no_data")||r.push({id:"in",group:"in",dir:"in",bits:e,portlabel:"D",labelled:!0}),r.push({id:"out",group:"out",dir:"out",bits:e,portlabel:"Q",labelled:!0}),"arst"in t&&!this.get("arst_value")&&this.set("arst_value",Array(e).fill("0").join("")),"srst"in t&&!this.get("srst_value")&&this.set("srst_value",Array(e).fill("0").join(""));let n=1;"aload"in t&&(n+=2,r.push({id:"ain",group:"in",dir:"in",bits:e,portlabel:"AD",labelled:!0}),r.push({id:"aload",group:"in",dir:"in",bits:1,polarity:t.aload,labelled:!0})),"clock"in t&&(n++,r.push({id:"clk",group:"in",dir:"in",bits:1,polarity:t.clock,decor:Dt.prototype.decorClock,labelled:!0})),"set"in t&&(n++,r.push({id:"set",group:"in",dir:"in",bits:e,polarity:t.set,portlabel:"S",labelled:!0})),"clr"in t&&(n++,r.push({id:"clr",group:"in",dir:"in",bits:e,polarity:t.clr,portlabel:"R",labelled:!0})),"srst"in t&&(n++,r.push({id:"srst",group:"in",dir:"in",bits:1,polarity:t.srst,labelled:!0})),"arst"in t&&(n++,r.push({id:"arst",group:"in",dir:"in",bits:1,polarity:t.arst,labelled:!0})),"enable"in t&&(n++,r.push({id:"en",group:"in",dir:"in",bits:1,polarity:t.enable,labelled:!0})),this.get("size").height=n*16+8,this.get("ports").items=r,this.last_clk=0,Dt.prototype.initialize.apply(this,arguments)},_resetPortValue(e){return e.id=="out"&&e.dir=="out"?Je.fromBin(this.get("initial"),e.bits):Dt.prototype._resetPortValue.call(this,e)},operation(e){const t=this.get("polarity"),r=a=>t[a]?1:-1;let n,i,s;const o=a=>({out:i?a.and(s).or(i):a});if("clock"in t&&(n=this.last_clk,this.last_clk=e.clk.get(0)),"arst"in t&&e.arst.get(0)==r("arst"))return{out:Je.fromBin(this.get("arst_value"),this.get("bits"))};if("aload"in t&&e.aload.get(0)==r("aload"))return{out:e.ain};if("set"in t&&(i=t.set?e.set:e.set.not(),s=t.set?e.set.not():e.set),"clr"in t){i=i||Je.zeros(this.get("bits"));const a=t.clr?e.clr.not():e.clr;s=s?a.and(s):a}return"enable"in t&&e.en.get(0)!=r("enable")&&this.get("enable_srst")?o(this.get("outputSignals").out):!("clock"in t)||e.clk.get(0)==r("clock")&&n==-r("clock")?"srst"in t&&e.srst.get(0)==r("srst")?o(Je.fromBin(this.get("srst_value"),this.get("bits"))):"enable"in t&&e.en.get(0)!=r("enable")&&!this.get("enable_srst")?o(this.get("outputSignals").out):this.get("no_data")?o(this.get("outputSignals").out):o(e.in):o(this.get("outputSignals").out)},_gateParams:Dt.prototype._gateParams.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"]),_unsupportedPropChanges:Dt.prototype._unsupportedPropChanges.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"])}),Sve=ri.extend({_autoResizeBox:!0}),aH=Dt.define("Memory",{bits:1,abits:1,rdports:[],wrports:[],words:void 0,offset:0,attrs:{portsplit:{stroke:"black"}},ports:{groups:{in:{position:Dt.prototype._getStackedPosition({side:"left"})},out:{position:Dt.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const e=this.get("bits"),t=this.get("abits");this.get("rdports"),this.get("wrports");let r=0,n=0;const i=[],s=[];for(const[o,a]of this._memrdports())i.push({id:o+"addr",group:"in",dir:"in",bits:t,portlabel:"addr",labelled:!0},{id:o+"data",group:"out",dir:"out",bits:e,portlabel:"data",labelled:!0,args:{idxOffset:n}}),r+=1,"srst_polarity"in a&&(r++,n++,i.push({id:o+"srst",group:"in",dir:"in",bits:1,portlabel:"srst",polarity:a.srst_polarity,labelled:!0})),"arst_polarity"in a&&(r++,n++,i.push({id:o+"arst",group:"in",dir:"in",bits:1,portlabel:"arst",polarity:a.arst_polarity,labelled:!0})),"enable_polarity"in a&&(r++,n++,i.push({id:o+"en",group:"in",dir:"in",bits:1,portlabel:"en",polarity:a.enable_polarity,labelled:!0})),"clock_polarity"in a&&(r++,n++,i.push({id:o+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:a.clock_polarity,decor:Dt.prototype.decorClock,labelled:!0})),s.push(r);for(const[o,a]of this._memwrports())r+=2,i.push({id:o+"data",group:"in",dir:"in",bits:e,portlabel:"data",labelled:!0},{id:o+"addr",group:"in",dir:"in",bits:t,portlabel:"addr",labelled:!0}),"enable_polarity"in a&&(r++,i.push({id:o+"en",group:"in",dir:"in",bits:a.no_bit_enable?1:e,portlabel:"en",polarity:a.enable_polarity,labelled:!0})),"clock_polarity"in a&&(r++,i.push({id:o+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:a.clock_polarity,decor:Dt.prototype.decorClock,labelled:!0})),s.push(r);s.pop(),this.get("size").height=r*16+8,this.get("ports").items=i,Dt.prototype.initialize.apply(this,arguments),this.removeProp("memdata"),this.on("change:size",(o,a)=>{const u=[];for(const c of s)u.push([[0,16*c+4],[a.width,16*c+4]].map(f=>f.join(" ")).join(" L "));this.attr("path.portsplit/d","M "+u.join(" M "))})},_resetPortValue(e){if(e.dir=="out"){const t=/^rd([0-9]+)data$/.exec(e.id),r=t?this.get("rdports")[t[1]]:{};if("init_value"in r)return Je.fromBin(r.init_value,e.bits)}return Dt.prototype._resetPortValue.call(this,e)},prepare(){const e=this.get("bits");var t=this.get("words");const r=this.get("memdata");t||(t=1<<this.get("abits"),this.prop("words",t,{init:!0})),r?this.memdata=dl.fromJSON(e,r):this.memdata=new dl(e,t),console.assert(this.memdata.words==t),this.last_clk={};for(const[n,i]of this._memports())"clock_polarity"in i&&(this.last_clk[n+"clk"]=0)},operation(e){const t=this.get("bits"),r={},n=(m,_)=>m[_+"_polarity"]?1:-1,i=(m,_)=>!("enable_polarity"in _&&!e[m+"en"].toArray().some(w=>w==n(_,"enable"))),s=(m,_)=>{const w=m+"clk";return"clock_polarity"in _?e[w].get(0)==n(_,"clock")&&this.last_clk[w]==-n(_,"clock"):!0},o=m=>m>=0&&m<this.get("words"),a=(m,_)=>{const w=this._calcaddr(e[m+"addr"]);o(w)?r[m+"data"]=this.memdata.get(w):r[m+"data"]=Je.xes(t)},u=(m,_,w,S)=>{if(_.no_bit_enable||!("enable_polarity"in _))return S;const E=_.enable_polarity?e[m+"en"]:e[m+"en"].not();return S.and(E).or(w.and(E.not()))},c=(m,_)=>{a(m);for(const[w,S]of this.get("wrports").entries()){const E="wr"+w,A=(T,I)=>typeof T=="boolean"?T:T[I];"transparent"in _&&A(_.transparent,w)&&s(E,S)&&i(E,S)&&e[m+"addr"]==e[E+"addr"]&&(r[m+"data"]=u(E,S,r[m+"data"],e[E+"data"])),"collision"in _&&A(_.collision,w)&&s(E,S)&&i(E,S)&&e[m+"addr"]==e[E+"addr"]&&(r[m+"data"]=u(E,S,r[m+"data"],Je.xes(t)))}},f=(m,_)=>{const w=this._calcaddr(e[m+"addr"]);if(o(w)){const S=this.memdata.get(w),E=u(m,_,S,e[m+"data"]),A=!S.eq(E);this.memdata.set(w,E),A&&this.trigger("memChange",w,E)}},h=(m,_)=>{e[m+"srst"].get(0)==n(_,"srst")&&(r[m+"data"]="srst_value"in _?Je.fromBin(_.srst_value,t):Je.zeros(t))},v=(m,_)=>{e[m+"arst"].get(0)==n(_,"arst")&&(r[m+"data"]="arst_value"in _?Je.fromBin(_.arst_value,t):Je.zeros(t))},y=(m,_)=>{if("clock_polarity"in _){const w=m+"clk";this.last_clk[w]=e[w].get(0)}};for(const[m,_]of this._memrdports())r[m+"data"]=this.get("outputSignals")[m+"data"],"clock_polarity"in _&&i(m,_)&&s(m,_)&&c(m,_);for(const[m,_]of this._memwrports())i(m,_)&&s(m,_)&&f(m,_);for(const[m,_]of this._memrdports())!("clock_polarity"in _)&&i(m,_)&&a(m);for(const[m,_]of this._memrdports())"srst_polarity"in _&&(i(m,_)||!("enable_srst"in _))&&s(m,_)&&h(m,_),"arst_polarity"in _&&v(m,_);for(const[m,_]of this._memrdports())y(m,_);for(const[m,_]of this._memwrports())y(m,_);return r},_calcaddr(e){return e.isFullyDefined?e.toNumber()-this.get("offset"):-1},*_memrdports(){for(const[e,t]of this.get("rdports").entries())yield["rd"+e,t]},*_memwrports(){for(const[e,t]of this.get("wrports").entries())yield["wr"+e,t]},*_memports(){yield*this._memrdports(),yield*this._memwrports()},markup:Dt.prototype.markup.concat([{tagName:"path",className:"portsplit",selector:"portsplit"}],Dt.prototype.markupZoom),getGateParams(){const e=Dt.prototype.getGateParams.apply(this,arguments);return e.memdata=this.memdata.toJSON(),e},_gateParams:Dt.prototype._gateParams.concat(["bits","abits","rdports","wrports","words","offset"]),_unsupportedPropChanges:Dt.prototype._unsupportedPropChanges.concat(["bits","abits","rdports","wrports","words","offset"]),_operationHelpers:Dt.prototype._operationHelpers.concat(["_memrdports","_memwrports","_memports","_calcaddr"])}),Eve=ri.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(e){e.stopPropagation();const t=this.model,r=t.graph._display3vl,n=It("<div>",{title:"Memory contents: "+t.get("label")}).appendTo("html > body");n.append(It('<div class="btn-toolbar" role="toolbar"><div class="btn-group mr-2" role="group"><button name="prev" type="button" class="btn btn-secondary" title="Previous page">â</button><button name="next" type="button" class="btn btn-secondary" title="Next page">â</button></div><div class="input-group">'+QA(r,t.get("bits"),"hex")+'</div></div><table class="memeditor"></table>'));const i=t.get("words"),s=t.memdata,o=Math.ceil(t.get("abits")/4),a=8;let u,c=0;const f=()=>n.find("select[name=base]").val(),h=E=>{const A=Math.floor((E-c)/u),T=E-c-A*u;return n.find("table tr:nth-child("+(A+1)+") td:nth-child("+(T+2)+") input")},v=E=>{for(const[A,T]of t._memrdports())h(t._calcaddr(E[A+"addr"])).removeClass("isread");for(const[A,T]of t._memwrports())h(t._calcaddr(E[A+"addr"])).removeClass("iswrite")},y=E=>{for(const[A,T]of t._memrdports())h(t._calcaddr(E[A+"addr"])).addClass("isread");for(const[A,T]of t._memwrports())h(t._calcaddr(E[A+"addr"])).addClass("iswrite")},m=()=>{const E=f();n.find("button[name=prev]").prop("disabled",c<=0),n.find("button[name=next]").prop("disabled",c+a*u>=i);let A=n.find("table tr:first-child");const T=t.memdata;for(let I=0;I<a&&!(c+I*u>=i);I++,A=A.next()){const q=(c+I*u).toString(16);let p=A.find("td:first-child");p.text("0".repeat(o-q.length)+q),p=p.next();for(let C=0;C<u&&!(c+I*u+C>=i);C++,p=p.next())p.find("input").val(r.show(E,T.get(c+I*u+C))).removeClass("invalid")}y(t.get("inputSignals"))},_=()=>{const E=f(),A=r.pattern(E),T=r.size(E,t.get("bits"));u=Math.min(i,16,Math.ceil(32/T)),c=Math.max(0,Math.min(i-a*u,c));const I=n.find("table");I.empty();for(let q=0;q<a&&!(c+q*u>=i);q++){const p=It("<tr>");It("<td>").appendTo(p);for(let C=0;C<u&&!(c+q*u+C>=i);C++){const O=It("<td>");It('<input type="text">').attr("size",T).attr("maxlength",T).attr("pattern",A).appendTo(O),O.appendTo(p)}p.appendTo(I)}m()};_(),n.find("select[name=base]").on("change",_),n.find("button[name=prev]").on("click",()=>{v(t.get("inputSignals")),c=Math.max(0,c-a*u),m()}),n.find("button[name=next]").on("click",()=>{v(t.get("inputSignals")),c=Math.min(i-a*u,c+a*u),m()}),n.on("change","input",E=>{const A=f(),T=It(E.target),I=T.closest("td").index()-1,q=T.closest("tr").index(),p=c+q*u+I,C=t.get("bits");if(r.validate(A,E.target.value,C)){const O=r.read(A,E.target.value,C);s.set(p,O),t.trigger("manualMemChange",t,p,O),T.removeClass("invalid")}else T.addClass("invalid")});const w=(E,A)=>{if(E<c||E>c+a*u)return;const T=f(),I=h(E).val(r.show(T,s.get(E))).removeClass("invalid").removeClass("flash");setTimeout(()=>{I.addClass("flash")},10)},S=(E,A)=>{v(t.previous("inputSignals")),y(A)};return t.on("memChange",w),t.on("change:inputSignals",S),this.paper.trigger("open:memorycontent",n,()=>{n.remove(),t.off("memChange",w),t.off("change:inputSignals",S)}),!1}}),uH=Dt.define("FSM",{bits:{in:1,out:1},polarity:{clock:!0},init_state:0,states:1,trans_table:[],size:{width:80,height:3*16+8},ports:{groups:{in:{position:Dt.prototype._getStackedPosition({side:"left"})},out:{position:Dt.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const e=this.get("bits"),t=this.get("polarity"),r=this.get("init_state"),n=this.get("states");this.get("trans_table"),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in,labelled:!0},{id:"clk",group:"in",dir:"in",bits:1,polarity:t.clock,decor:Dt.prototype.decorClock,labelled:!0},{id:"arst",group:"in",dir:"in",bits:1,polarity:t.arst,labelled:!0},{id:"out",group:"out",dir:"out",bits:e.out,labelled:!0}],Dt.prototype.initialize.apply(this,arguments);const i=this.get("current_state");this.fsmgraph=new Po;for(let s=0;s<n;s++){const o=new Cpe({stateNo:s,id:"state"+s,isInit:s==r});o.attr("label/text",String(s)),o.resize(100,50),s==r&&o.attr("body/strokeWidth",3),s==i&&o.attr("body/class","current_state"),o.addTo(this.fsmgraph)}for(const[s,o]of this.transitions)for(const a of o){const u=new yp({id:a.id,ctrlIn:a.ctrlIn,ctrlOut:a.ctrlOut});u.appendLabel({attrs:{text:{text:u.get("ctrlIn").toBin()+"/"+u.get("ctrlOut").toBin()}}}),u.source({id:"state"+s}),u.target({id:"state"+a.stateOut}),u.addTo(this.fsmgraph)}this.listenTo(this,"change:current_state",(s,o)=>{const a=s.previous("current_state");this.fsmgraph.getCell("state"+a).removeAttr("body/class"),this.fsmgraph.getCell("state"+o).attr("body/class","current_state")}),this.listenTo(this,"change:next_trans",(s,o)=>{const a=s.previous("next_trans");if(a){const u=this.fsmgraph.getCell(a);u.removeAttr("line/class"),u.removeAttr("line/targetMarker/class")}o&&this.fsmgraph.getCell(o).attr({line:{class:"next_trans",targetMarker:{class:"next_trans"}}})})},prepare(){const e=this.get("bits");this.transitions=new Map;var t=0;for(const n of this.get("trans_table"))this.transitions.has(n.state_in)||this.transitions.set(n.state_in,[]),this.transitions.get(n.state_in).push({id:"tr"+t,stateOut:n.state_out,ctrlIn:Je.fromBin(n.ctrl_in,e.in),ctrlOut:Je.fromBin(n.ctrl_out,e.out)}),t++;var r=this.get("current_state");r===void 0&&(r=this.get("init_state"),this.set("current_state",r)),this.last_clk=0},operation(e){const t=this.get("bits"),r=this.get("polarity"),n=()=>{const a=this.transitions.get(this.get("current_state"))||[];for(const u of a){const c=u.ctrlIn,f=c.xmask();if(e.in.or(f).eq(c.or(f)))return u}},i=()=>{const a=this.transitions.get(this.get("current_state"))||[],u=e.in.xmask(),c=[];for(const h of a){const v=h.ctrlIn,y=v.xmask().or(u);e.in.or(y).eq(v.or(y))&&c.push(h.ctrlOut)}const f=Je.xes(t.out);if(c.length==0)return f;for(;c.length>1;){const h=c.pop(),v=c[0].xnor(h).or(f);c[0]=c[0].and(v).or(f.and(v.xmask()))}return c[0]},s=a=>r[a]?1:-1;if(e.arst.get(0)==s("arst"))this.set("current_state",this.get("init_state"));else{const a=this.last_clk;if(e.clk.get(0)==s("clock")&&a==-s("clock")){const u=n();this.set("current_state",u?u.stateOut:this.get("init_state"))}}this.last_clk=e.clk.get(0);const o=n();return o?this.set("next_trans",o.id):this.set("next_trans",void 0),{out:i()}},markup:Dt.prototype.markup.concat(Dt.prototype.markupZoom),_gateParams:Dt.prototype._gateParams.concat(["bits","polarity","states","init_state","trans_table"]),_unsupportedPropChanges:Dt.prototype._unsupportedPropChanges.concat(["bits","polarity","states","init_state","trans_table"]),_presentationParams:Dt.prototype._presentationParams.concat(["current_state","next_trans"])}),Ave=ri.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(e){e.stopPropagation();const t=It("<div>",{title:"FSM: "+this.model.get("label")}).appendTo("html > body"),r=It("<div>").appendTo(t),n=this.model.fsmgraph,i=new aj({el:r,model:n});return n.resetCells(n.getCells()),n.get("laid_out")||(ph.layout(n,{dagre:Xue,graphlib:Kue}),n.set("laid_out",!0)),i.listenTo(n,"change:position",s=>{i.fitToContent({padding:30,allowNewOrigin:"any"})}),i.fitToContent({padding:30,allowNewOrigin:"any"}),this.paper.trigger("open:fsm",t,()=>{i.remove(),t.remove()}),!1}}),lu="#03c03c",ka="#3c3c3c",cH=Ao.define("Display7",{bits:8,size:{width:76.5,height:110},attrs:{LEDs:{fill:ka,transform:"translate(1,1),scale(6)"},a:{points:"1, 1  2, 0  8, 0  9, 1  8, 2  2, 2"},b:{points:"9, 1 10, 2 10, 8  9, 9  8, 8  8, 2"},c:{points:"9, 9 10,10 10,16  9,17  8,16  8,10"},d:{points:"9,17  8,18  2,18  1,17  2,16  8,16"},e:{points:"1,17  0,16  0,10  1, 9  2,10  2,16"},f:{points:"1, 9  0, 8  0, 2  1, 1  2, 2  2, 8"},g:{points:"1, 9  2, 8  8, 8  9, 9  8,10  2,10"},dp:{cx:"11.3",cy:"16.9",r:"1.1"},body:{height:"calc(h)",width:"calc(w)",stroke:"#222222",fill:"#333333"}}},{isOutput:!0,_portDirection:"in",bits:8,getOutput(){return this.get("inputSignals").in},markupBus:cs.prototype.markup.concat([{tagName:"rect",selector:"display"},{tagName:"polygon",selector:"a",groupSelector:"LEDs"},{tagName:"polygon",selector:"b",groupSelector:"LEDs"},{tagName:"polygon",selector:"c",groupSelector:"LEDs"},{tagName:"polygon",selector:"d",groupSelector:"LEDs"},{tagName:"polygon",selector:"e",groupSelector:"LEDs"},{tagName:"polygon",selector:"f",groupSelector:"LEDs"},{tagName:"polygon",selector:"g",groupSelector:"LEDs"},{tagName:"circle",selector:"dp",groupSelector:"LEDs"}])}),Tve=sa.extend({_autoResizeBox:!1,confirmUpdate(e){ri.prototype.confirmUpdate.apply(this,arguments),this._updateDisplay()},_updateDisplay(){const e=this.model.getOutput(),t={dp:{fill:e.get(7)===1?lu:ka},a:{fill:e.get(6)===1?lu:ka},b:{fill:e.get(5)===1?lu:ka},c:{fill:e.get(4)===1?lu:ka},d:{fill:e.get(3)===1?lu:ka},e:{fill:e.get(2)===1?lu:ka},f:{fill:e.get(1)===1?lu:ka},g:{fill:e.get(0)===1?lu:ka}};this._applyAttrs(t)}}),Pve=Object.freeze(Object.defineProperty({__proto__:null,Addition:Fj,AdditionConst:Dge,AdditionConstView:Fge,AdditionView:Sge,And:Pj,AndReduce:Mj,AndReduceView:mge,AndView:lge,Arith:bi,Arith11:tT,Arith21:Mc,ArithConst:kc,BaseCompare:gh,BaseCompareConst:vh,BitExtend:oT,BitExtendView:aT,Box:Dt,BoxView:ri,BusGroup:tH,BusGroupView:pve,BusRegroup:uT,BusRegroupView:cT,BusSlice:eH,BusSliceView:dve,BusUngroup:rH,BusUngroupView:gve,Button:mj,ButtonView:Qpe,Clock:xj,ClockView:ige,Compare:Xh,CompareConst:Yh,Constant:wj,ConstantView:nge,Dff:oH,DffView:Sve,Display7:cH,Display7View:Tve,Division:Vj,DivisionConst:$ge,DivisionConstView:Uge,DivisionView:Tge,Eq:Kj,EqCompare:nT,EqCompareConst:sT,EqConst:ave,EqConstView:uve,EqView:Nge,FSM:uH,FSMView:Ave,Gate:_n,Gate11:eT,GateReduce:Su,GateSVG:ia,GateView:Kt,GateX1:Oc,Ge:Yj,GeConst:sve,GeConstView:ove,GeView:Lge,GenMux:mu,GenMuxView:cv,Gt:Xj,GtConst:nve,GtConstView:ive,GtView:kge,IO:Ao,IOView:sa,Input:Hh,InputView:ZA,Lamp:_j,LampView:tge,Le:Wj,LeConst:tve,LeConstView:rve,LeView:Mge,Lt:Hj,LtConst:Qge,LtConstView:eve,LtView:Oge,Memory:aH,MemoryView:Eve,Modulo:Gj,ModuloConst:jge,ModuloConstView:Hge,ModuloView:Pge,Multiplication:zj,MultiplicationConst:Vge,MultiplicationConstView:Gge,MultiplicationView:Age,Mux:iH,Mux1Hot:sH,Mux1HotView:bve,MuxSparse:wve,MuxSparseView:xve,MuxView:_ve,Nand:Rj,NandReduce:kj,NandReduceView:yge,NandView:hge,Ne:Zj,NeConst:cve,NeConstView:lve,NeView:qge,Negation:qj,NegationView:wge,Nor:Cj,NorReduce:bE,NorReduceView:vge,NorView:fge,Not:Aj,NotView:uge,NumBase:cs,NumBaseView:vu,NumDisplay:bj,NumDisplayView:rge,NumEntry:yj,NumEntryView:ege,OpConst:oa,Or:Tj,OrReduce:_E,OrReduceView:gge,OrView:cge,Output:Wh,OutputView:JA,Power:$j,PowerConst:Wge,PowerConstView:Xge,PowerView:Cge,Repeater:Ej,RepeaterView:age,Shift:rT,ShiftConst:iT,ShiftLeft:Uj,ShiftLeftConst:Yge,ShiftLeftConstView:Kge,ShiftLeftView:Rge,ShiftRight:jj,ShiftRightConst:Zge,ShiftRightConstView:Jge,ShiftRightView:Ige,SignExtend:Qj,SignExtendView:hve,Subcircuit:nH,SubcircuitView:mve,Subtraction:Bj,SubtractionConst:Bge,SubtractionConstView:zge,SubtractionView:Ege,UnaryPlus:Dj,UnaryPlusView:xge,Wire:vj,WireView:Jpe,Xnor:Oj,XnorReduce:Nj,XnorReduceView:bge,XnorView:pge,Xor:Ij,XorReduce:Lj,XorReduceView:_ge,XorView:dge,ZeroExtend:Jj,ZeroExtendView:fve,portGroupAttrs:$p},Symbol.toStringTag,{value:"Module"}));var FS,r4;function Cve(){if(r4)return FS;r4=1;var e=function(r,n){return r<n};function t(r){if(!(this instanceof t))return new t(r);this.array=[],this.size=0,this.compare=r||e}return t.prototype.clone=function(){var r=new t(this.compare);return r.size=this.size,r.array=this.array.slice(0,this.size),r},t.prototype.add=function(r){var n=this.size;this.array[this.size]=r,this.size+=1;for(var i,s;n>0&&(i=n-1>>1,s=this.array[i],!!this.compare(r,s));)this.array[n]=s,n=i;this.array[n]=r},t.prototype.heapify=function(r){this.array=r,this.size=r.length;var n;for(n=this.size>>1;n>=0;n--)this._percolateDown(n)},t.prototype._percolateUp=function(r,n){for(var i=this.array[r],s,o;r>0&&(s=r-1>>1,o=this.array[s],!(!n&&!this.compare(i,o)));)this.array[r]=o,r=s;this.array[r]=i},t.prototype._percolateDown=function(r){for(var n=this.size,i=this.size>>>1,s=this.array[r],o,a,u;r<i&&(o=(r<<1)+1,a=o+1,u=this.array[o],a<n&&this.compare(this.array[a],u)&&(o=a,u=this.array[a]),!!this.compare(u,s));)this.array[r]=u,r=o;this.array[r]=s},t.prototype._removeAt=function(r){if(!(r>this.size-1||r<0))return this._percolateUp(r,!0),this.poll()},t.prototype.remove=function(r){for(var n=0;n<this.size;n++)if(!this.compare(this.array[n],r)&&!this.compare(r,this.array[n]))return this._removeAt(n),!0;return!1},t.prototype.removeOne=function(r){if(typeof r=="function"){for(var n=0;n<this.size;n++)if(r(this.array[n]))return this._removeAt(n)}},t.prototype.removeMany=function(r,n){if(typeof r!="function"||this.size<1)return[];n=n?Math.min(n,this.size):this.size;for(var i=0,s=new Array(n),o=0,a=new Array(this.size);i<n&&!this.isEmpty();){var u=this.poll();r(u)?s[i++]=u:a[o++]=u}s.length=i;for(var c=0;c<o;)this.add(a[c++]);return s},t.prototype.peek=function(){if(this.size!=0)return this.array[0]},t.prototype.poll=function(){if(this.size!=0){var r=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,r}},t.prototype.replaceTop=function(r){if(this.size!=0){var n=this.array[0];return this.array[0]=r,this._percolateDown(0),n}},t.prototype.trim=function(){this.array=this.array.slice(0,this.size)},t.prototype.isEmpty=function(){return this.size===0},t.prototype.forEach=function(r){if(!(this.isEmpty()||typeof r!="function"))for(var n=0,i=this.clone();!i.isEmpty();)r(i.poll(),n++)},t.prototype.kSmallest=function(r){if(this.size==0)return[];r=Math.min(this.size,r);var n=new t(this.compare);const i=Math.min((r>0?Math.pow(2,r-1):0)+1,this.size);n.size=i,n.array=this.array.slice(0,i);for(var s=new Array(r),o=0;o<r;o++)s[o]=n.poll();return s},FS=t,FS}var Rve=Cve();const Ive=Ll(Rve);class lH{constructor(t){this._graph=t}_addGate(t,r){r.get("type")=="Subcircuit"&&this._addGraph(r.get("graph"))}_addLink(t,r){}_addGraph(t){this.listenTo(t,"add",r=>{r.isLink()?this._addLink(t,r):this._addGate(t,r)}),this.listenTo(t,"remove",r=>{r.isLink()?this._removeLink(t,r):this._removeGate(t,r)}),this.listenTo(t,"change:source",(r,n)=>{this._changeLinkSource(t,r,n,r.previous("source"))}),this.listenTo(t,"change:target",(r,n)=>{this._changeLinkTarget(t,r,n,r.previous("target"))}),this.listenTo(t,"change:warning",(r,n)=>{this._changeLinkWarning(t,r,n,r.previous("warning"))});for(const r of t.getElements())this._addGate(t,r);for(const r of t.getLinks())this._addLink(t,r)}_removeGate(t,r){}_removeLink(t,r){}_changeLinkSource(t,r,n,i){}_changeLinkTarget(t,r,n,i){}_changeLinkWarning(t,r,n,i){}}An.extend(lH.prototype,Jn.Events);class Ove extends lH{constructor(t,{cells:r}){super(t),this._queue=new Map,this._pq=new Ive,this._tick=0,this._cells=r,this._monitorChecks=new Map,this._alarms=new Map,this._alarmQueue=new Map,this._addGraph(t)}get hasPendingEvents(){return this._queue.size>0}get tick(){return this._tick}shutdown(){this.stopListening()}_updateSubcircuit(t,r,n={}){r||(r=t.get("inputSignals"));const i=t.get("circuitIOmap");for(const[s,o]of Object.entries(r)){if(n[s]&&o.eq(n[s]))continue;const a=t.get("graph").getCell(i[s]);console.assert(a.isInput),a._setInput(o)}}_addGate(t,r){super._addGate(t,r),this._enqueue(r),r instanceof this._cells.Subcircuit&&this._updateSubcircuit(r)}_addGraph(t){this.listenTo(t,"manualMemChange",r=>{this._enqueue(r)}),this.listenTo(t,"change:constantCache",r=>{this._enqueue(r)}),this.listenTo(t,"change:inputSignals",(r,n)=>{const i=r.previous("inputSignals");if(!yE(n,i)){if(r instanceof this._cells.Subcircuit&&this._updateSubcircuit(r,n,i),r instanceof this._cells.Output&&r.get("mode")==0){const s=r.graph.get("subcircuit");if(s!=!0){console.assert(s!=null);const o=r.get("net"),a=An.clone(s.get("outputSignals"));a[o]=r.getOutput(),s.set("outputSignals",a)}}this._enqueue(r)}}),super._addGraph(t)}_enqueue(t){const r=this._tick+t.get("propagation")|0;(()=>{const i=this._queue.get(r);if(i!==void 0)return i;const s=new Map;return this._queue.set(r,s),this._pq.add(r),s})().set(t,t.get("inputSignals"))}updateGatesNext(){const t=this._pq.poll()|0;console.assert(t>=this._tick),this._tick=t;const r=this._queue.get(t);let n=0;for(;r.size;){const[i,s]=r.entries().next().value;if(r.delete(i),i instanceof this._cells.Subcircuit||i instanceof this._cells.Input||i instanceof this._cells.Output||!i.graph)continue;const a=i.operation(s);"_clock_hack"in a&&(delete a._clock_hack,this._enqueue(i)),i.set("outputSignals",a),n++}return this._queue.delete(t),this._tick=t+1|0,this._checkMonitors(),this.trigger("postUpdateGates",t,n),Promise.resolve(n)}updateGates(){if(this._pq.peek()==this._tick)return this.updateGatesNext();{const t=this._tick|0;return this._tick=t+1|0,this._checkMonitors(),this.trigger("postUpdateGates",t,0),Promise.resolve(0)}}synchronize(){return Promise.resolve()}start(){throw new Error("start() not supported")}startFast(){throw new Error("startFast() not supported")}stop(){return Promise.resolve()}get interval(){throw new Error("interval not supported")}set interval(t){throw new Error("interval not supported")}get running(){return!1}observeGraph(t){}unobserveGraph(t){}monitor(t,r,n,{triggerValues:i,stopOnTrigger:s,oneShot:o}){const a=(u,c)=>{const f=c[r];this._monitorChecks.set(a,{gate:u,sig:f,cb:a,callback:n,triggerValues:i,stopOnTrigger:s,oneShot:o})};return t.on("change:outputSignals",a),i==null&&n(this._tick,t.get("outputSignals")[r]),{gate:t,callback:a}}unmonitor(t){t.gate.off("change:outputSignals",t.callback)}alarm(t,r,{stopOnAlarm:n}){console.assert(t>this._tick);const i=()=>{this.unalarm(i),r()};return this._alarms.set(i,{tick:t,stopOnAlarm:n}),this._alarmQueue.has(t)||this._alarmQueue.set(t,new Set),this._alarmQueue.get(t).add(i),this._pq.add(t-1),this._queue.has(t-1)||this._queue.set(t-1,new Map),i}unalarm(t){const{tick:r}=this._alarms.get(t);this._alarmQueue.get(r).delete(t),this._alarmQueue.get(r).size==0&&this._alarmQueue.delete(r),this._alarms.delete(t)}_checkMonitors(){for(const{gate:t,sig:r,cb:n,callback:i,triggerValues:s,stopOnTrigger:o,oneShot:a}of this._monitorChecks.values()){let u=!0;s!=null&&(u=s.some(c=>r.eq(c))),u&&(a&&t.off("change:outputSignals",n),i(this._tick,r)&&o&&this.stop())}if(this._monitorChecks=new Map,this._alarmQueue.get(this._tick)){for(const t of this._alarmQueue.get(this._tick)){const{stopOnAlarm:r}=this._alarms.get(t);t()&&r&&this.stop()}this._alarmQueue.delete(this._tick)}}}function Mve(e){const t={$not:Aj,$and:Pj,$nand:Rj,$or:Tj,$nor:Cj,$xor:Ij,$xnor:Oj,$reduce_and:Mj,$reduce_nand:kj,$reduce_or:_E,$reduce_nor:bE,$reduce_xor:Lj,$reduce_xnor:Nj,$reduce_bool:_E,$logic_not:bE,$repeater:Ej,$shl:Uj,$shr:jj,$lt:Hj,$le:Wj,$eq:Kj,$ne:Zj,$gt:Xj,$ge:Yj,$constant:wj,$neg:qj,$pos:Dj,$add:Fj,$sub:Bj,$mul:zj,$div:Vj,$mod:Gj,$pow:$j,$mux:iH,$pmux:sH,$dff:oH,$mem:aH,$fsm:uH,$clock:xj,$button:mj,$lamp:_j,$numdisplay:bj,$numentry:yj,$input:Hh,$output:Wh,$busgroup:tH,$busungroup:rH,$busslice:eH,$zeroextend:Jj,$signextend:Qj,$display7:cH};return e in t?t[e]:nH}class fH{constructor(t,{cellsNamespace:r={},engine:n=Ove,engineOptions:i={}}={}){this._cells=Object.assign(Pve,r),this._display3vl=new dj,this._display3vl.addDisplay(new sge),this._graph=this._makeGraph(t,t.subcircuits),i.cells=this._cells,this._engine=new n(this._graph,i),this.makeLabelIndex(),this.listenTo(this._engine,"postUpdateGates",(s,o)=>{this.trigger("postUpdateGates",s,o)})}addDisplay(t){this._display3vl.addDisplay(t),this.trigger("display:add",t)}shutdown(){this.trigger("shutdown"),this.stop(),this._engine.shutdown(),this.stopListening()}hasWarnings(){return this._graph._warnings>0}_makeGraph(t,r,n){n=n||{};const i=new Po;i._display3vl=this._display3vl,i._warnings=0,n.nested&&i.set("subcircuit",!0);const s=a=>{i._warnings+=a,console.assert(i._warnings>=0),i._warnings>0&&this.running&&this.stop();const u=i.get("subcircuit");u==null||u==!0||u.set("warning",i._warnings>0)};this.listenTo(i,"userChange",a=>{this.trigger("userChange",a)}),this.listenTo(i,"change:inputSignals",(a,u)=>{yE(u,a.previous("inputSignals"))||a._changeInputSignals&&a._changeInputSignals(u)}),this.listenTo(i,"change:outputSignals",(a,u)=>{yE(u,a.previous("outputSignals"))||a._changeOutputSignals(u)}),this.listenTo(i,"change:signal",(a,u)=>{a._changeSignal(u)}),this.listenTo(i,"change:source",(a,u)=>{this._labelIndex=null,a._changeSource(u)}),this.listenTo(i,"change:target",(a,u)=>{this._labelIndex=null,a._changeTarget(u)}),this.listenTo(i,"change:warning",(a,u)=>{a.previous("warning")!==u&&s(u?1:-1)}),this.listenTo(i,"add",(a,u,c)=>{this._labelIndex=null,a.onAdd&&a.onAdd(),a.get("warning")&&s(1)}),this.listenTo(i,"remove",(a,u,c)=>{this._labelIndex=null,a.get("warning")&&s(-1)});let o=!1;for(const a in t.devices){const u=t.devices[a];u.position&&(o=!0);const c=u.type in this._cells?this._cells[u.type]:Mve(u.celltype),f=An.clone(u);f.id=a,c==this._cells.Subcircuit&&(f.graph=this._makeGraph(r[u.celltype],r,{nested:!0}));const h=new c(f);i.addCell(h)}for(const a of t.connectors)i.addCell(new this._cells.Wire({source:{id:a.from.id,port:a.from.port,magnet:"port"},target:{id:a.to.id,port:a.to.port,magnet:"port"},netname:a.name,vertices:a.vertices||[],source_positions:a.source_positions||[]}));return o&&i.set("laid_out",!0),i}updateGatesNext(t){return this._engine.updateGatesNext(t)}updateGates(t){return this._engine.updateGates(t)}synchronize(){return this._engine.synchronize()}get hasPendingEvents(){return this._engine.hasPendingEvents}get tick(){return this._engine.tick}start(){if(!this.hasWarnings())return this._engine.start()}startFast(){if(!this.hasWarnings())return this._engine.startFast()}stop(t){return this._engine.stop(t)}get interval(){return this._engine.interval}set interval(t){this._engine.interval=t}get running(){return this._engine.running}getInputCells(){return this._graph.getElements().filter(t=>t.isInput)}getOutputCells(){return this._graph.getElements().filter(t=>t.isOutput)}setInput(t,r){const n=this._graph.getCell(t);if(n.isInput)n.setInput(r);else throw new Error("Invalid call to setInput")}getOutput(t){const r=this._graph.getCell(t);if(r.isOutput)return r.getOutput();throw new Error("Invalid call to getOutput")}makeLabelIndex(){if(this._labelIndex)return this._labelIndex;const t=r=>{const n={wires:{},devices:{},subcircuits:{},inputs:{},outputs:{},graph:r};for(const i of r.getElements()){if(i.has("net")&&(i.isInput&&(n.inputs[i.get("net")]=i),i.isOutput&&(n.outputs[i.get("net")]=i)),!i.has("label"))continue;const s=i.get("label");n.devices[s]=i,i instanceof this._cells.Subcircuit&&(n.subcircuits[s]=t(i.get("graph")))}for(const i of r.getLinks())i.has("netname")&&(n.wires[i.get("netname")]=i);return n};return this._labelIndex=t(this._graph)}getLabelIndex(t=[]){const r=(n,i)=>{if(n==t.length)return i;{const s=i.subcircuits[t[n]];if(s)return r(n+1,s)}};return r(0,this.makeLabelIndex())}findWireByLabel(t,r=[]){return this.getLabelIndex(r).wires[t]}findDeviceByLabel(t,r=[]){return this.getLabelIndex(r).devices[t]}findInputByNet(t){return this.getLabelIndex([]).inputs[t]}findOutputByNet(t){return this.getLabelIndex([]).outputs[t]}toJSON(t=!0){const r={},n=s=>{const o={devices:{},connectors:[]},a=s.get("laid_out");for(const u of s.getElements()){const c=o.devices[u.get("id")]=u.getGateParams(t);a||delete c.position,u instanceof this._cells.Subcircuit&&!r[u.get("celltype")]&&(r[u.get("celltype")]=n(u.get("graph")))}for(const u of s.getLinks())o.connectors.push(u.getWireParams(t));return o},i=n(this._graph);return i.subcircuits=r,i}waitForWire(t,r){return r instanceof Je&&(r=[r]),new Promise(n=>{this.monitorWire(t,(i,s)=>{n(i)},{synchronous:!0,oneShot:!0,stopOnTrigger:!0,triggerValues:r})})}waitFor(t,r,n){return n instanceof Je&&(n=[n]),new Promise(i=>{this.monitor(t,r,(s,o)=>{i(s)},{synchronous:!0,oneShot:!0,stopOnTrigger:!0,triggerValues:n})})}monitorWire(t,r,n={}){const i=t.get("source"),s=t.getSourceElement();return s==null?null:this.monitor(s,i.port,r,n)}monitor(t,r,n,i={}){return this._engine.monitor(t,r,n,i)}unmonitor(t){this._engine.unmonitor(t)}observeGraph(t=[]){this._engine.observeGraph(this.getLabelIndex(t).graph)}unobserveGraph(t=[]){this._engine.observeGraph(this.getLabelIndex(t).graph)}alarm(t,r,n={}){return this._engine.alarm(t,r,n)}unalarm(t){this._engine.unalarm(t)}}An.extend(fH.prototype,Jn.Events);class kve{constructor(t,r=[]){this._bits=t,this._data=r,r.length==0?this._present=-1:this._present=this._data[this._data.length-1][0]}get bits(){return this._bits}updatePresent(t){this._present=Math.max(this._present,t)}push(t,r){if(console.assert(r.bits==this._bits&&t>=this._present),this._present=t,this._data.length>0){const[n,i]=this._data[this._data.length-1];if(i.eq(r))return;if(console.assert(t>=n),t==n){this._data[this._data.length-1][1]=r;return}}this._data.push([t,r])}getRange(t,r){if(this._data.length==0)return[];const n=a=>{let u=0,c=this._data.length;for(;c>u;){const f=u+c>>1,h=this._data[f][0];if(a==h)return f;a<h?c=f:u=f+1}return u==this._data.length?u-1:u};let i=n(t),s=n(t+r);i>0&&this._data[i][0]>t&&i--,s<this._data.length-1&&this._data[s][0]<t+r&&s++;const o=this._data.slice(i,s+1).map(a=>[a[0],a[1]]);return o[o.length-1][0]<t+r&&this._present>o[o.length-1][0]&&o.push([this._present,o[o.length-1][1]]),o}}const hH={start:0,pixelsPerTick:10,bitColors:["#fc7c68","#999","#03c03c","#779ecb"],gapScale:.2,heightFill:.8,base:"hex",gridWidth:.5,gridColor:"gray",gridStep:1,gridMinDist:10,font:"10px sans-serif",textColor:"black"};Object.freeze(hH);function n4(e,t){var r={};for(const[i,s]of Object.entries(t))r[i]={value:s,writable:!0};return Object.create(e,r)}function dH(e){let t=e.gridStep;for(;t*e.pixelsPerTick<e.gridMinDist;)10*t*e.pixelsPerTick<e.gridMinDist?t*=10:2*t*e.pixelsPerTick>=e.gridMinDist?t*=2:5*t*e.pixelsPerTick>=e.gridMinDist?t*=5:t*=10;return t}function Lve(e,t,r,n=new dj){t.clearRect(0,0,t.canvas.width,t.canvas.height);const i=t.canvas.width/r.pixelsPerTick;"present"in r&&e.updatePresent(r.present);const s=e.getRange(r.start,Math.ceil(i)),o=s.map((w,S)=>[w,s[S+1]]);o.pop();const a=w=>(Math.max(Math.min(w,r.start+i),r.start)-r.start)*r.pixelsPerTick,u=.5*t.canvas.height,c=(.5-r.heightFill/2)*t.canvas.height,f=(.5+r.heightFill/2)*t.canvas.height,h=w=>[f,u,c][w+1],v=w=>r.bitColors[w+1],y=w=>r.bitColors[w.isDefined?w.isLow?0:w.isHigh?2:3:1],m=t.createLinearGradient(0,f,0,c);m.addColorStop(0,r.bitColors[0]),m.addColorStop(.5,r.bitColors[1]),m.addColorStop(1,r.bitColors[2]),t.lineWidth=r.gridWidth;const _=dH(r);for(let w=r.start-r.start%_;w<r.start+i;w+=_){const S=a(w);t.beginPath(),t.strokeStyle=r.gridColor,t.moveTo(S,0),t.lineTo(S,t.canvas.height),t.stroke()}t.lineWidth=2;for(const[[w,S],[E,A]]of o){const T=a(w),I=a(E);if(e.bits==1){const q=S.get(0),p=A.get(0),C=h(q),O=h(p),N=v(q);v(p);const V=Math.min(Math.abs(C-O)*r.gapScale,r.pixelsPerTick/2);t.beginPath(),t.strokeStyle=m,t.moveTo(I-V,C),t.lineTo(I,O),t.stroke(),t.beginPath(),t.strokeStyle=N,t.moveTo(T,C),t.lineTo(I-V,C),t.stroke()}else{const q=Math.min(Math.abs(c-f)*r.gapScale,r.pixelsPerTick/2),p=y(S),C=y(A),O=S.isDefined,N=A.isDefined;if(O){t.textAlign="center",t.textBaseline="middle",t.font=r.font,t.fillStyle=r.textColor;const V=n.show(r.base,S);t.measureText(V).width<(I-T-q)*2&&t.fillText(V,(T+I-q)/2,t.canvas.height/2,I-T-q)}!O&&!N?(t.beginPath(),t.strokeStyle=p,t.moveTo(T,u),t.lineTo(I,u),t.stroke()):S.eq(A)?(t.strokeStyle=C,t.beginPath(),t.moveTo(T,c),t.lineTo(I,c),t.stroke(),t.beginPath(),t.moveTo(T,f),t.lineTo(I,f),t.stroke()):(t.strokeStyle=C,N?(t.beginPath(),t.moveTo(I,c),t.lineTo(I-q/2,u),t.lineTo(I,f),t.stroke()):(t.beginPath(),t.moveTo(I,u),t.lineTo(I-q/2,u),t.stroke()),t.strokeStyle=p,O?(t.beginPath(),t.moveTo(T,c),t.lineTo(I-q,c),t.lineTo(I-q/2,u),t.lineTo(I-q,f),t.lineTo(T,f),t.stroke()):(t.beginPath(),t.moveTo(T,u),t.lineTo(I-q/2,u),t.stroke()))}}}var pH=function(){if(typeof Map<"u")return Map;function e(t,r){var n=-1;return t.some(function(i,s){return i[0]===r?(n=s,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(r,n){var i=e(this.__entries__,r);~i?this.__entries__[i][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,i=e(n,r);~i&&n.splice(i,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var i=0,s=this.__entries__;i<s.length;i++){var o=s[i];r.call(n,o[1],o[0])}},t}()}(),SE=typeof window<"u"&&typeof document<"u"&&window.document===document,Up=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Nve=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Up):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),qve=2;function Dve(e,t){var r=!1,n=!1,i=0;function s(){r&&(r=!1,e()),n&&a()}function o(){Nve(s)}function a(){var u=Date.now();if(r){if(u-i<qve)return;n=!0}else r=!0,n=!1,setTimeout(o,t);i=u}return a}var Fve=20,Bve=["top","right","bottom","left","width","height","size","weight"],zve=typeof MutationObserver<"u",Vve=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Dve(this.refresh.bind(this),Fve)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!SE||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),zve?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!SE||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,i=Bve.some(function(s){return!!~n.indexOf(s)});i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),gH=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},El=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||Up},vH=lv(0,0,0,0);function jp(e){return parseFloat(e)||0}function i4(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,i){var s=e["border-"+i+"-width"];return n+jp(s)},0)}function Gve(e){for(var t=["top","right","bottom","left"],r={},n=0,i=t;n<i.length;n++){var s=i[n],o=e["padding-"+s];r[s]=jp(o)}return r}function $ve(e){var t=e.getBBox();return lv(0,0,t.width,t.height)}function Uve(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return vH;var n=El(e).getComputedStyle(e),i=Gve(n),s=i.left+i.right,o=i.top+i.bottom,a=jp(n.width),u=jp(n.height);if(n.boxSizing==="border-box"&&(Math.round(a+s)!==t&&(a-=i4(n,"left","right")+s),Math.round(u+o)!==r&&(u-=i4(n,"top","bottom")+o)),!Hve(e)){var c=Math.round(a+s)-t,f=Math.round(u+o)-r;Math.abs(c)!==1&&(a-=c),Math.abs(f)!==1&&(u-=f)}return lv(i.left,i.top,a,u)}var jve=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof El(e).SVGGraphicsElement}:function(e){return e instanceof El(e).SVGElement&&typeof e.getBBox=="function"}}();function Hve(e){return e===El(e).document.documentElement}function Wve(e){return SE?jve(e)?$ve(e):Uve(e):vH}function Xve(e){var t=e.x,r=e.y,n=e.width,i=e.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(s.prototype);return gH(o,{x:t,y:r,width:n,height:i,top:r,right:t+n,bottom:i+r,left:t}),o}function lv(e,t,r,n){return{x:e,y:t,width:r,height:n}}var Yve=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=lv(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=Wve(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),Kve=function(){function e(t,r){var n=Xve(r);gH(this,{target:t,contentRect:n})}return e}(),Zve=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new pH,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof El(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new Yve(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof El(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new Kve(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),mH=typeof WeakMap<"u"?new WeakMap:new pH,yH=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=Vve.getInstance(),n=new Zve(t,r,this);mH.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){yH.prototype[e]=function(){var t;return(t=mH.get(this))[e].apply(t,arguments)}});var Jve=function(){return typeof Up.ResizeObserver<"u"?Up.ResizeObserver:yH}();function pl(e){const t=[e.cid];for(let r=e.graph.get("subcircuit");r!=null;r=r.graph.get("subcircuit"))t.push(r.cid);return t.reverse(),t.join(".")}function Qve(e){const t=[];if(e.has("netname"))t.push(e.get("netname"));else{const r=e.source();t.push(r.port);const n=e.graph.getCell(r.id);n.has("label")?t.push(n.get("label")):t.push(r.id)}for(let r=e.graph.get("subcircuit");r!=null;r=r.graph.get("subcircuit"))r.has("label")?t.push(r.get("label")):t.push(r.id);return t.reverse(),t.join(".")}class eme{constructor(t){this._circuit=t,this._wires=new Map,this.listenTo(this._circuit,"new:paper",r=>this.attachTo(r))}attachTo(t){this.listenTo(t,"link:monitor",r=>{this.addWire(r.model)})}addWire(t){const r=pl(t);if(this._wires.has(r))return;const n=new kve(t.get("bits")),i={wire:t,waveform:n,monitorId:void 0};this._wires.set(r,i),this.trigger("add",t),i.monitorId=this._circuit.monitorWire(t,(s,o)=>{this._handleChange(s,t,o)})}removeWire(t){typeof t=="string"&&(t=this._wires.get(t).wire),this.trigger("remove",t);const r=pl(t);this._circuit.unmonitor(this._wires.get(r).monitorId),this._wires.delete(r)}getWires(){const t=[];for(const r of this._wires.values())t.push(r.wire);return t}getWiresDesc(){return this.getWires().map(t=>{if(t.has("netname"))return{name:t.get("netname"),path:t.getWirePath(),bits:t.get("bits")}}).filter(t=>t!==void 0)}loadWiresDesc(t){for(const r of t){const n=this._circuit.findWireByLabel(r.name,r.path);n&&n.get("bits")==r.bits&&this.addWire(n)}}_handleChange(t,r,n){this._wires.get(pl(r)).waveform.push(t,n),this.trigger("change",r,n)}}An.extend(eme.prototype,Jn.Events);class tye extends Jn.View{initialize(t){this._width=800,this._settings=n4(hH,{start:0,pixelsPerTick:5,gridStep:1}),this._settingsFor=new Map,this._live=!0,this._autoredraw=!1,this._idle=null,this._removeButtonMarkup=t.removeButtonMarkup||'<button type="button" name="remove">â</button>',this._baseSelectorMarkup=t.baseSelectorMarkup||QA,this._bitTriggerMarkup=t.bitTriggerMarkup||'<select name="trigger" title="Trigger"><option value="none"></option><option value="rising">â</option><option value="falling">â</option><option value="risefall">â</option><option value="undef">x</option></select>',this._busTriggerMarkup=t.busTriggerMarkup||'<input type="text" name="trigger" title="Trigger" placeholder="trigger" pattern="[0-9a-fx]*">',this.listenTo(this.model,"add",this._handleAdd),this.listenTo(this.model,"remove",this._handleRemove),this.listenTo(this.model._circuit,"display:add",()=>{this.render()}),this.listenTo(this.model._circuit,"postUpdateGates",f=>{this._live&&(this.start=f-this._width/this._settings.pixelsPerTick),this._settings.present=f,this._idle||(this._idle=requestIdleCallback(()=>{this._drawAll(),this._idle=null},{timeout:100}))}),this.render(),this._resizeObserver=new Jve(()=>{this._canvasResize()}),this._resizeObserver.observe(this.el);function r(f){return It(f.target).closest("tr").attr("wireid")}const n=this.model._circuit._display3vl;this.$el.on("click","button[name=remove]",f=>{this.model.removeWire(r(f))}),this.$el.on("input","select[name=base]",f=>{const h=f.target.value,v=this._settingsFor.get(r(f));v.base=h;const m=It(f.target).closest("tr").find("input[name=trigger]");m.attr("pattern",n.pattern(h)),v.trigger.length&&m.val(n.show(h,v.trigger[0])),this.trigger("change")});const i=()=>!0,s=(f,h)=>{const v=this._settingsFor.get(f);if(v.triggerId&&(this.model._circuit.unmonitor(v.triggerId),v.triggerId=null),h.length>0){const y=this.model._wires.get(f).wire;v.triggerId=this.model._circuit.monitorWire(y,i,{triggerValues:h,stopOnTrigger:!0})}v.trigger=h};this.$el.on("input","select[name=trigger]",f=>{const h=r(f);switch(f.target.value){case"rising":s(h,[Je.one]);break;case"falling":s(h,[Je.zero]);break;case"risefall":s(h,[Je.one,Je.zero]);break;case"undef":s(h,[Je.x]);break;default:s(h,[])}}),this.$el.on("change","input[name=trigger]",f=>{const h=r(f),y=this._settingsFor.get(h).base,m=this.model._wires.get(h).waveform.bits;if(f.target.value=="")s(h,[]);else if(n.validate(y,f.target.value,m)){const _=n.read(y,f.target.value,m);s(h,[_]),f.target.value=n.show(y,_)}else s(h,[])}),this.listenTo(this,"change",()=>{this._autoredraw&&this._drawAll()});const o=new Image(0,0);o.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";let a,u;const c=f=>{const h=f.originalEvent.screenX-a;this.start=u-h/this._settings.pixelsPerTick};this.$el.on("dragstart","canvas",f=>{const h=f.originalEvent.dataTransfer;h.setData("text/plain","dragging"),h.setDragImage(o,0,0),a=f.originalEvent.screenX,u=this._settings.start,this.live=!1,It(document).on("dragover",c)}),this.$el.on("dragend","canvas",f=>{It(document).off("dragover",c)}),this.$el.on("wheel","canvas",f=>{f.preventDefault();const h=2**Math.sign(f.originalEvent.deltaY);this.start+=f.originalEvent.offsetX/this._settings.pixelsPerTick*(1-1/h),this.pixelsPerTick*=h})}render(){this.$el.html('<table class="monitor"></table>');for(const t of this.model._wires.values())this.$("table").append(this._handleAdd(t.wire));return this._canvasResize(),this}shutdown(){this.$el.off(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this.stopListening()}get gridStep(){return dH(this._settings)}get autoredraw(){return this._autoredraw}set autoredraw(t){this._autoredraw=t,t&&this._drawAll()}get width(){return this._width}get live(){return this._live}set live(t){this.live!=t&&(this._live=t,this.trigger("change:live",t),this.trigger("change"))}get start(){return this._settings.start}set start(t){this._settings.start!=t&&(this._settings.start=t,this.trigger("change:start",t),this.trigger("change"))}get pixelsPerTick(){return this._settings.pixelsPerTick}set pixelsPerTick(t){this._settings.pixelsPerTick!=t&&(this._settings.pixelsPerTick=t,this.trigger("change:pixelsPerTick",t),this.trigger("change"))}_canvasResize(){this._width=Math.max(this.$el.width()-300,100),this.$("canvas").attr("width",this._width),this.trigger("change:width",this._width),this.trigger("change")}_drawAll(){for(const t of this.model._wires.keys())this._draw(t)}_draw(t){const r=this.model._circuit._display3vl,n=this.$('tr[wireid="'+t+'"]').find("canvas"),i=this.model._wires.get(t).waveform;Lve(i,n[0].getContext("2d"),this._settingsFor.get(t),r)}_handleAdd(t){const r=pl(t);this._settingsFor.set(r,n4(this._settings,{base:"hex",trigger:[],triggerId:null})),this.$("table").append(this._createRow(t))}_handleRemove(t){const r=pl(t);this.$('tr[wireid="'+r+'"]').remove();const n=this._settingsFor.get(r);n.triggerId&&this.model._circuit.unmonitor(n.triggerId),this._settingsFor.delete(r)}_createRow(t){const r=pl(t),n=this._settingsFor.get(r),i=this.model._circuit._display3vl,s=t.get("bits")>1?this._baseSelectorMarkup instanceof Function?this._baseSelectorMarkup(i,t.get("bits"),n.base):this._baseSelectorMarkup:"",o=t.get("bits")>1?this._busTriggerMarkup:this._bitTriggerMarkup,a=It('<tr><td class="name"></td><td>'+s+"</td><td>"+o+"</td><td>"+this._removeButtonMarkup+'</td><td><canvas class="wavecanvas" height="30" draggable="true"></canvas></td></tr>');return a.attr("wireid",r),a.children("td").first().text(Qve(t)),a}}let tme=0;class rye extends Jn.View{initialize(t){this._idnum=tme++,this._inputPanelMarkup=t.inputPanelMarkup||'<div data-iopanel="input"></div>',this._outputPanelMarkup=t.outputPanelMarkup||'<div data-iopanel="output"></div>',this._baseSelectorMarkup=t.baseSelectorMarkup||QA,this._labelMarkup=t.labelMarkup||"<label></label>",this._buttonMarkup=t.buttonMarkup||'<input type="checkbox">',this._lampMarkup=t.lampMarkup||'<input type="checkbox">',this._rowMarkup=t.rowMarkup||"<div></div>",this._colMarkup=t.colMarkup||"<div></div>",this._inputMarkup=t.inputMarkup||'<input type="text">',this.render(),this.listenTo(this.model._graph,"add",this._handleAdd),this.listenTo(this.model._graph,"remove",this._handleRemove),this.listenTo(this.model,"display:add",()=>{this.render()})}render(){this.$el.html('<form onsubmit="return false">'+this._inputPanelMarkup+this._outputPanelMarkup+"</form>");for(const t of this.model.getInputCells())this._handleAddInput(t);for(const t of this.model.getOutputCells())this._handleAddOutput(t)}shutdown(){this.$el.off(),this.stopListening()}_id(t){return"iopanel-"+t+"-"+this._idnum}_handleAdd(t){t.isInput?this._handleAddInput(t):t.isOutput&&this._handleAddOutput(t)}_addLabel(t,r){return It(this._labelMarkup).appendTo(t).find("label").addBack("label").text(r.get("net")||r.get("label"))}_addLabelFor(t,r){return this._addLabel(t,r).attr("for",this._id(r.id))}_handleAddInput(t){const r=this.model._display3vl,n=It(this._rowMarkup).appendTo(this.$('div[data-iopanel="input"]'));this._addLabelFor(n,t);const i=It(this._colMarkup).appendTo(n);if(t.get("mode")==1){const o=It(this._buttonMarkup).appendTo(i).find("input").addBack("input").attr("id",this._id(t.id)).on("click",u=>{t.setInput(Je.fromBool(u.target.checked))}),a=(u,c)=>{o.prop("checked",c.out.isHigh)};this.listenTo(t,"change:outputSignals",a),a(t,t.get("outputSignals"))}else{const s=It(this._inputMarkup).appendTo(i);let o="hex";It(this._baseSelectorMarkup(r,t.get("bits"),o)).appendTo(i);let a=r.size(o,t.get("bits"));const u=t.get("bits"),c=s.find("input").addBack("input").prop("size",a).prop("maxlength",a).prop("pattern",r.pattern(o)).on("change",h=>{r.validate(o,h.target.value,u)&&t.setInput(r.read(o,h.target.value,u))}),f=(h,v)=>{s.val(r.show(o,v.out))};this.listenTo(t,"change:outputSignals",f),f(t,t.get("outputSignals")),n.on("input","select[name=base]",h=>{o=h.target.value,a=r.size(o,t.get("bits")),c.prop("size",a).prop("maxlength",a).prop("pattern",r.pattern(o)),f(t,t.get("outputSignals"))})}}_handleAddOutput(t){const r=this.model._display3vl,n=It(this._rowMarkup).appendTo(this.$('div[data-iopanel="input"]'));this._addLabel(n,t);const i=It(this._colMarkup).appendTo(n);if(t.get("bits")==1){const o=It(this._lampMarkup).appendTo(i).find("input").addBack("input").prop("disabled",!0),a=(u,c)=>{const f=u.getOutput();o.prop("checked",f.isHigh),o.prop("indeterminate",!f.isDefined)};this.listenTo(t,"change:inputSignals",a),a(t,t.get("inputSignals"))}else{const s=It(this._inputMarkup).appendTo(i);let o="hex";It(this._baseSelectorMarkup(r,t.get("bits"),o)).appendTo(i);const a=r.size(o,t.get("bits")),u=s.find("input").addBack("input").prop("disabled",!0).prop("size",a),c=(f,h)=>{const v=f.getOutput();s.val(r.show(o,v))};this.listenTo(t,"change:inputSignals",c),c(t,t.get("inputSignals")),n.on("input","select[name=base]",f=>{o=f.target.value,u.prop("size",r.size(o,t.get("bits"))),c(t,t.get("inputSignals"))})}}_handleRemove(t){this.stopListening(t)}}aj.sorting.APPROX,new vj;function rme(e){let t=new Array;return Object.keys(e).forEach(r=>{const[n,i,s]=r.split("_");e[r].forEach(([o,a])=>{const u={from:{id:`${i}_${s}`,port:n},name:`${r}-${a}`,to:{id:o,port:a.split("_")[0]}};t.push(u)})}),t}class _H extends fH{constructor(t,r){const n=rme(t.connectors),i={devices:t.devices,connectors:n,subcircuits:t.subcircuits};super(i,r),console.log("CustomHeadlessCircuit Initialized")}}let nme=fa.ones(1),ime=fa.zeros(1),ys=Ke(null),gl=li(!1);const Al=()=>R(gl);let Yl=li(0);const sme=()=>R(Yl);Object.defineProperty(_H.prototype,"running",{get(){return!1}});function ome(e){R(gl)?(console.log("Simulation Stopped"),ys.set(null),we(Yl,0),we(gl,!1)):(console.log("Simulation Started"),we(gl,!0),lt(ys)===null&&(console.log(lt(Ki)),ys.set(new _H(lt(Ki)))),bH(e))}function bH(e){if(R(gl)===!1)return;const t=lt(ys);if(t===null){console.log("impossible");return}t.updateGates(),we(Yl,t.tick,!0),setTimeout(()=>bH(e),e)}function ame(){ys.set(null),we(Yl,0),we(gl,!1)}function ume(e,t){let r=e==null?void 0:e.findWireByLabel(t);return r||(console.warn("Wire not created yet on headless circuit creation or update"),null)}function cme(e){let t;return e.attributes.signal?(e.attributes.signal._avec[0]==e.attributes.signal._bvec[0]?t=e.attributes.signal._avec[0]:t=-1,t):-1}function lme(){if(ys==null){console.log("Circuit is null");return}const e=lt(ys);if(e===null){console.log("impossible");return}e.updateGates(),we(Yl,e.tick,!0)}function fme(){if(ys==null){console.log("Circuit is null");return}const e=lt(ys);if(e===null){console.log("impossible");return}e.updateGatesNext(),we(Yl,e.tick,!0)}function hme(e){let t;if(ys==null){console.log("Circuit is null");return}const r=lt(ys);if(r===null){console.log("impossible");return}t=r.getLabelIndex().devices[e].attributes.outputSignals.out._avec[0],t==1?r.setInput(e,ime):r.setInput(e,nme)}function lT(e){return[...e].find(r=>/^(in\d+|in_|out_)/.test(r))||null}function dme(e,t){const r=(u,c)=>u.startsWith(c),n=u=>r(u,"in"),i=u=>r(u,"out"),s=u=>({isInput:n(u),isOutput:i(u)}),{a1:o,a2:a}={a1:s(e),a2:s(t)};return o.isInput&&a.isOutput?"good_in_to_out":a.isInput&&o.isOutput?"good_out_to_in":o.isInput&&a.isInput?"bad_dual_input":"bad_dual_output"}function pme(e,t){const[r,,]=e.split("_"),n=r.startsWith("out")&&e||t,i=r.startsWith("in")?e:t;return{fromOutputId:n,toInputId:i}}function gme(e,t){const r=(s,o)=>s+"-"+o,{fromOutputId:n,toInputId:i}=pme(e,t);return console.log("adding connection",n,i),Ki.addConnection(n,i),r(n,i)}function vme(e,t){const r=lT(e);if(r===null)return"bad_invalid_drop";const n=[...e].find(o=>o==="linked"),i=dme(t,r);if(i.startsWith("bad"))return i;const s=o=>o.startsWith("in");return n&&s(r)?"bad_input_already_linked":n&&!s(t)?"good_output_multi_wires":`${i}-${r}`}function s4(e,t,r=Y0e){const n=vme(t,e);if(n.startsWith("bad"))return n;const i=lT(t),s=gme(e,i);return r(),s}var mme=ir("<div></div>");function yme(e,t){Cr(t,!0);let r=ve(t,"io",3,"output");const n=u=>{function c(f){f.preventDefault(),f.stopPropagation(),s4(u,f.target.classList),document.removeEventListener("mousedown",c,!0)}return c};function i(u){const c=n(u);document.addEventListener("mousedown",c,!0)}function s(u){const c=lT(u.target.classList);c!==null&&c===t.anchorId?i(c):s4(t.anchorId,u.target.classList),document.removeEventListener("mouseup",s,!0)}Qf(()=>{t.connecting&&document.addEventListener("mouseup",s,!0)});var o=mme();let a;Wt(u=>a=Cn(o,1,`custom_anchor ${r()==="input"&&"input"||"output"} ${t.anchorId??""}`,"svelte-1dytm7c",a,u),[()=>({linked:t.linked,hovering:t.hovering,connecting:t.connecting})]),pr("mousedown",o,u=>{u.preventDefault(),t.linked&&r()==="input"&&!Al()&&Ki.removeConnection(t.anchorId)},!0),nt(e,o),Rr()}Object.assign(SVGElement.prototype,{setLampColors:_me});function _me([e,t]){const r=this.querySelector("circle"),n=this.querySelector("line");console.assert(r!==null&&n!==null,"likely tried to call custom svg method on the wrong element"),!(r===null||n===null)&&(r.setAttribute("stroke",t),r.setAttribute("fill",e),n.setAttribute("stroke",e))}function bme(e,t){const r=["green","var(--lime-green)"],n=["red","var(--lime-red)"];let s=document.querySelector(`#N-${e} svg.LampSVG`);s!==null&&s.setLampColors(t===1&&r||n)}function wme(e,t,r){const n="."+e+"_"+t,i=document.querySelector(`${n}`);if(console.assert(i!==null,"could not find Anchor class when setting anchor colors while running"),i===null)return;const s=(h,v)=>h.classList.contains(v),o=h=>s(h,"on"),a=h=>s(h,"off"),u=h=>[a(h),o(h)],[c,f]=u(i);r===1&&c?(i.classList.remove("off"),i.classList.add("on")):r===0&&f?(i.classList.remove("on"),i.classList.add("off")):r===-1?(i.classList.remove("on"),i.classList.remove("off")):!c&&!f&&i.classList.add(r===1?"on":"off")}function Kh(e){return console.assert(e!==null,"A wire was mounted with an empty edgeWrapper binding, maybe it hasn't loaded yet"),e==null?void 0:e.parentElement}function xme(e){var r;const t=Kh(e);return console.assert(t,"edge Wrapper is not null but edgeWrapper binding has no parentElement"),((r=e==null?void 0:e.parentElement)==null?void 0:r.childNodes)??null}const Sme=e=>{const t=e.indexOf("-")+1,r=e.indexOf("/");return e.substring(t,r)};function wH(e){const t=xme(e);return t&&Array.from(t).find(n=>n.role==="presentation")||null}function xH(e,t){var i;const r=(i=wH(e))==null?void 0:i.getAttribute("id");if(!r)throw new Error("No ID found on the edgeNode");return[t+"-"+Sme(r),r]}const Eme="http://www.w3.org/2000/svg",Zh=[".handle1",".handle2",".end_point1",".end_point2","#controlPoint1","#controlPoint2"],Si=Zh.map(e=>e.substring(1));function Tl(e,t){const r=document.createElementNS(Eme,e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.setAttribute(n,t[n]);return r}function o4(e,t,r,n="control-line"){return isNaN(e==null?void 0:e.x)||isNaN(e==null?void 0:e.y)||isNaN(t==null?void 0:t.x)||isNaN(t==null?void 0:t.y)?(console.error("Invalid coordinates provided to createHandleLine:",e,t),Tl("line",{class:r+" "+n,x1:"0",y1:"0",x2:"0",y2:"0"})):Tl("line",{class:r+" "+n,x1:e.x.toString(),y1:e.y.toString(),x2:t.x.toString(),y2:t.y.toString()})}function a4(e,t,r=6,n="end-point"){return isNaN(e==null?void 0:e.x)||isNaN(e==null?void 0:e.y)||isNaN(r)?(console.error("Invalid parameters provided to createEndPointCircle:",e,r),Tl("circle",{class:t+" "+n,cx:"0",cy:"0",r:"6"})):Tl("circle",{class:t+" "+n,cx:e.x.toString(),cy:e.y.toString(),r:r.toString()})}function u4(e,t,r=10,n="control-point"){if(isNaN(e==null?void 0:e.x)||isNaN(e==null?void 0:e.y)||isNaN(r))return console.error("Invalid parameters provided to createControlPointCircle:",e,r),Tl("circle",{class:n,cx:"0",cy:"0",r:"6"});const i=Tl("circle",{class:n,id:t,cx:e.x.toString(),cy:e.y.toString(),r:r.toString()});return i.style.touchAction="none",i}function c4(e){if(!e||typeof e!="string"||e.trim()==="")return console.warn("parseCubicBezierD received invalid input:",e),null;let t="";const r=e.indexOf("M");t=e.substring(r+1).replace("C","");const n=t.split(" ").reduce((i,s)=>(s=s.trim(),s!==""&&(s.endsWith(",")&&(s=s.slice(0,-1)),i.push(s)),i),[]);try{const i={p0:{x:parseFloat(n[0]),y:parseFloat(n[1])},p1:{x:parseFloat(n[2]),y:parseFloat(n[3])},p2:{x:parseFloat(n[4]),y:parseFloat(n[5])},p3:{x:parseFloat(n[6]),y:parseFloat(n[7])}};return isNaN(i.p0.x)||isNaN(i.p0.y)||isNaN(i.p1.x)||isNaN(i.p1.y)||isNaN(i.p2.x)||isNaN(i.p2.y)||isNaN(i.p3.x)||isNaN(i.p3.y)?(console.error("Parsed coordinates resulted in NaN:",e,i),null):i}catch(i){return console.error("Error parsing numbers from path data:",e,i),null}}function Ame(e){const t=Kh(e);if(!t)throw new Error("Wire is not god");Zh.forEach(r=>{var i;const n=t.querySelector(r);n&&((i=n.style)==null?void 0:i.display)==="none"&&(n.style.display="")})}function Tme(e){const t=Kh(e);if(!t)throw new Error("Wire is not god");Zh.forEach(r=>{const n=t.querySelector(r);n&&(n.style.display="none")})}function Pme(e){const t=Kh(e);if(!t)throw new Error("Wire is not god");Zh.forEach(r=>{const n=t.querySelector(r);n&&(n.style.display=n.style.display==="none"?"":"none")})}function l4(e,t=""){var A,T,I,q,p,C,O,N,V,W;const r=t!==""&&c4(t)||null;let n=e.getAttribute("d")&&c4(e.getAttribute("d"));if(!n)return console.log("unable to parse path"),null;r&&(r.p0.x-n.p0.x,r.p0.y-n.p0.y,r.p1.x-n.p1.x,r.p1.y-n.p1.y);const i=Kh(e);if(!i)throw new Error("Wire is not god");const s=new Map(Zh.map(G=>[G.substring(1),i.querySelector(G)||null]));let o=new Map([[Si[0],s.get(Si[0])||o4(n.p0,n.p1,"handle1")],[Si[1],s.get(Si[1])||o4(n.p3,n.p2,"handle2")],[Si[2],s.get(Si[2])||a4((r==null?void 0:r.p0)||n.p0,"end_point1")],[Si[3],s.get(Si[3])||a4((r==null?void 0:r.p3)||n.p3,"end_point2")],[Si[4],s.get(Si[4])||u4((r==null?void 0:r.p1)||n.p1,"controlPoint1")],[Si[5],s.get(Si[5])||u4((r==null?void 0:r.p2)||n.p2,"controlPoint2")]]);const a=o.get(Si[2]),u=o.get(Si[4]),c=o.get(Si[5]);if(a){const G=a.getAttribute("cx"),ee=a.getAttribute("cy"),ae=(r==null?void 0:r.p0.x.toString())||n.p0.x.toString(),K=(r==null?void 0:r.p0.y.toString())||n.p0.y.toString();a.setAttribute("cx",ae),a.setAttribute("cy",K);const U=parseFloat(ae)-parseFloat(G||""),j=parseFloat(K)-parseFloat(ee||"");u==null||u.setAttribute("cx",String(parseFloat(u.getAttribute("cx")||"0")+U)),u==null||u.setAttribute("cy",String(parseFloat(u.getAttribute("cy")||"0")+j)),c==null||c.setAttribute("cx",String(parseFloat(c.getAttribute("cx")||"0")+U)),c==null||c.setAttribute("cy",String(parseFloat(c.getAttribute("cy")||"0")+j))}const f=o.get(Si[3]);if(f){const G=f.getAttribute("cx"),ee=f.getAttribute("cy"),ae=(r==null?void 0:r.p3.x.toString())||n.p3.x.toString(),K=(r==null?void 0:r.p3.y.toString())||n.p3.y.toString();f.setAttribute("cx",ae),f.setAttribute("cy",K);const U=parseFloat(ae)-parseFloat(G||""),j=parseFloat(K)-parseFloat(ee||"");u==null||u.setAttribute("cx",String(parseFloat(u.getAttribute("cx")||"0")+U)),u==null||u.setAttribute("cy",String(parseFloat(u.getAttribute("cy")||"0")+j)),c==null||c.setAttribute("cx",String(parseFloat(c.getAttribute("cx")||"0")+U)),c==null||c.setAttribute("cy",String(parseFloat(c.getAttribute("cy")||"0")+j))}for(const G of Si)i.appendChild(o.get(G));let h=null,v={x:0,y:0},y={p0:{x:parseFloat((A=o.get("end_point1"))==null?void 0:A.getAttribute("cx")),y:parseFloat((T=o.get("end_point1"))==null?void 0:T.getAttribute("cy"))},p1:{x:parseFloat((I=o.get("controlPoint1"))==null?void 0:I.getAttribute("cx")),y:parseFloat((q=o.get("controlPoint1"))==null?void 0:q.getAttribute("cy"))},p2:{x:parseFloat((p=o.get("controlPoint2"))==null?void 0:p.getAttribute("cx")),y:parseFloat((C=o.get("controlPoint2"))==null?void 0:C.getAttribute("cy"))},p3:{x:parseFloat((O=o.get("end_point2"))==null?void 0:O.getAttribute("cx")),y:parseFloat((N=o.get("end_point2"))==null?void 0:N.getAttribute("cy"))}};function m(){var ee,ae,K,U,j,J,de,ce;const G=`M ${y.p0.x} ${y.p0.y} C ${y.p1.x} ${y.p1.y}, ${y.p2.x} ${y.p2.y}, ${y.p3.x} ${y.p3.y}`;if(e.setAttribute("d",G),!o.get("handle1")||!o.get("handle2"))return console.warn("no handles on the edge you tried to update"),null;(ee=o.get("handle1"))==null||ee.setAttribute("x1",y.p0.x.toString()),(ae=o.get("handle1"))==null||ae.setAttribute("y1",y.p0.y.toString()),(K=o.get("handle1"))==null||K.setAttribute("x2",y.p1.x.toString()),(U=o.get("handle1"))==null||U.setAttribute("y2",y.p1.y.toString()),(j=o.get("handle2"))==null||j.setAttribute("x1",y.p3.x.toString()),(J=o.get("handle2"))==null||J.setAttribute("y1",y.p3.y.toString()),(de=o.get("handle2"))==null||de.setAttribute("x2",y.p2.x.toString()),(ce=o.get("handle2"))==null||ce.setAttribute("y2",y.p2.y.toString())}function _(G){var U,j,J,de;if(!e)return console.warn("no svg found on get mouse position"),null;const ee=e.getScreenCTM();if(!ee)return{x:0,y:0};const ae=G.clientX??((j=(U=G.touches)==null?void 0:U[0])==null?void 0:j.clientX),K=G.clientY??((de=(J=G.touches)==null?void 0:J[0])==null?void 0:de.clientY);return ae===void 0||K===void 0?(console.warn("Could not get clientX/Y from event:",G),null):{x:(ae-ee.e)/ee.a,y:(K-ee.f)/ee.d}}function w(G){if(G.type==="mousedown"&&G.preventDefault(),G.target.classList.contains("control-point")){h=G.target;const ee=_(G);if(!ee)return;v.x=ee.x-parseFloat(h.getAttribute("cx")),v.y=ee.y-parseFloat(h.getAttribute("cy")),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}),document.addEventListener("mouseup",E),document.addEventListener("touchend",E),document.addEventListener("mouseleave",E)}}function S(G){if(h){G.type==="touchmove"&&G.preventDefault();const ee=_(G);if(!ee)return;const ae=ee.x-v.x,K=ee.y-v.y;h.setAttribute("cx",ae.toString()),h.setAttribute("cy",K.toString()),h.id==="controlPoint1"?(y.p1.x=ae,y.p1.y=K):h.id==="controlPoint2"?(y.p2.x=ae,y.p2.y=K):console.warn("reached error"),m()}}function E(G){h&&(document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S),document.removeEventListener("mouseup",E),document.removeEventListener("touchend",E),document.removeEventListener("mouseleave",E),h=null)}(V=o.get("controlPoint1"))==null||V.addEventListener("mousedown",w),(W=o.get("controlPoint2"))==null||W.addEventListener("mousedown",w),m()}var Cme=(e,t,r)=>{if(R(t)&&R(r))Pme(R(r));else{if(we(t,!0),!R(r))return;Ame(R(r))}},Rme=(e,t,r)=>{e.preventDefault();const n=wH(R(t));!n||!R(t)||(we(r,!1),Tme(R(t)),R(t).setAttribute("d",n.getAttribute("d")),console.warn(n))},Ime=Nn('<path id="bezierCurve" role="presentation"></path>');function Ome(e,t){Cr(t,!0);let r=li(null);Ti(()=>{let[s,o]=xH(R(r),t.initAncId);t.monitorWire(s),R(r)&&R(n)&&l4(R(r))}),Qf(()=>{if(t.currentPath){if(!R(r)||!R(n))return;l4(R(r),t.currentPath)}});let n=li(!1);var i=Ime();i.__click=[Cme,n,r],i.__contextmenu=[Rme,r,n],wu(i,s=>we(r,s),()=>R(r)),Wt(()=>{pt(i,"d",t.currentPath),Cn(i,0,qE(t.wireActive===-1?"":t.wireActive===1?"on":"off"),"svelte-15cv7c7")}),nt(e,i),Rr()}kl(["click","contextmenu"]);var Mme=Nn("<path></path>");function kme(e,t){Cr(t,!0);let r=li(null);Ti(()=>{let[i,s]=xH(R(r),t.initAncId);t.monitorWire(i)});var n=Mme();wu(n,i=>we(r,i),()=>R(r)),Wt(()=>{Cn(n,0,qE(t.wireActive===-1?"hit-area":t.wireActive===1?"hit-area on":"hit-area off"),"svelte-1gi7ewc"),pt(n,"d",t.currentPath)}),nt(e,n),Rr()}function Lme(e,t){Cr(t,!0);const[r,n]=ni(),i=()=>Ye(ys,"$CircuitEngine",r);let s=li(-1),o=li("");function a(f,h=v=>we(o,v,!0)){if(!f)return null;h(f);const v=f.includes("cursor");if(v&&console.log("Connecting wire mounted"),v)return null;(i()!==null&&u(i())||(()=>null))()}function u(f,h=v=>we(s,v,!0)){const v=ume(f,R(o));return v===null?void 0:()=>f.monitorWire(v,m=>{var T;const _=cme(v);h(_);const{id:w,port:S,magnet:E}=(T=v.attributes)==null?void 0:T.target;if(!w||!S)return;if(wme(S,w,_),!(w&&f.getLabelIndex().outputs[w]))return null;bme(w,_)})}ys.subscribe(f=>{if(f===null){we(s,-1);return}(f!==null&&u(f)||(()=>null))()});let c=ve(t,"wireType",3,"bezier");WS(e,{children:ME,$$slots:{default:(f,h)=>{const v=ls(()=>h.path);ls(()=>h.destroy),ls(()=>h.hovering);var y=gr(),m=Gt(y);{var _=S=>{Ome(S,{get initAncId(){return t.initAncId},get currentPath(){return R(v)},get wireActive(){return R(s)},monitorWire:a})},w=(S,E)=>{{var A=T=>{kme(T,{get initAncId(){return t.initAncId},get currentPath(){return R(v)},get wireActive(){return R(s)},monitorWire:a})};lr(S,T=>{c()==="step"&&T(A)},E)}};lr(m,S=>{c()==="bezier"?S(_):S(w,!1)})}nt(f,y)}}}),Rr(),n()}var Nme=ir("<div><!></div>");function nc(e,t){Cr(t,!0);let r=ve(t,"location",19,()=>["left","top"]),n=ve(t,"offset",19,()=>[]),i="";r()[0]=="left"?r()[1]=="top"?i="in1":r()[1]=="bot"?i="in2":r()[1]=="mid"&&(i="in"):r()[0]=="right"&&(i="out");const s=`${i}_${t.id}`;var o=Nme(),a=jt(o);const u=ls(()=>r()[0]==="left"?"west":"east"),c=ls(()=>t.io==="input"&&!0||!1),f=ls(()=>t.io==="output"&&!0||!1),h=ls(Al);Nf(a,{id:s,key:s,get direction(){return R(u)},get input(){return R(c)},get output(){return R(f)},get locked(){return R(h)},get connections(){return t.connections},children:ME,$$slots:{default:(v,y)=>{const m=ls(()=>y.linked),_=ls(()=>y.hovering),w=ls(()=>y.connecting);yme(v,{get io(){return t.io},get connecting(){return R(w)},get linked(){return R(m)},anchorId:s,get hovering(){return R(_)}})},edge:(v,y)=>{Lme(v,{initAncId:s,slot:"edge"})}}}),Wt(()=>kr(o,`position:absolute;left: ${n()[0]}%; top: ${n()[1]}%;`)),nt(e,o),Rr()}const qme="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='500px'%20height='500px'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23000000'%20d='M105%20105v302h151c148%200%20148-302%200-302H105zm-89%2046v18h71v-18H16zm368.8%2096c.2%206%20.2%2012%200%2018H496v-18H384.8zM16%20343v18h71v-18H16z'/%3e%3c/svg%3e",Dme="data:image/svg+xml,%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NAND%20Gate%20Body%20--%3e%3cpath%20fill='%23000000'%20d='M105%20105v302h151c148%200%20148-302%200-302H105z'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='151'%20width='71'%20height='18'%20fill='%23000000'/%3e%3crect%20x='16'%20y='343'%20width='71'%20height='18'%20fill='%23000000'/%3e%3c!--%20Output%20Circle%20(Inverter)%20--%3e%3ccircle%20cx='384'%20cy='256'%20r='25'%20fill='transparent'%20stroke='black'%20stroke-width='18'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='400'%20y='248'%20width='112'%20height='18'%20fill='%23000000'/%3e%3c/svg%3e",Fme="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20OR%20Gate%20Body%20with%20Smooth%20Curves%20and%20Proportions%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='12'%20y='160'%20width='100'%20height='18'%20fill='black'/%3e%3crect%20x='12'%20y='340'%20width='100'%20height='18'%20fill='black'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='420'%20y='248'%20width='100'%20height='18'%20fill='black'/%3e%3c/svg%3e",Bme="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NOR%20Gate%20Body%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='160'%20width='100'%20height='18'%20fill='black'/%3e%3crect%20x='16'%20y='340'%20width='100'%20height='18'%20fill='black'/%3e%3c!--%20Inverter%20(NOT%20Circle)%20--%3e%3ccircle%20cx='440'%20cy='256'%20r='25'%20fill='transparent'%20stroke='black'%20stroke-width='18'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='460'%20y='248'%20width='120'%20height='18'%20fill='black'/%3e%3c/svg%3e",zme="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Additional%20Back%20Curve%20for%20XOR%20--%3e%3cpath%20d='%20M%2080,120%20Q%20140,180%20140,256%20Q%20140,332%2080,392'%20fill='none'%20stroke='black'%20stroke-width='14'/%3e%3c!--%20XOR%20Gate%20Body%20(Same%20as%20OR%20Gate)%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='160'%20width='130'%20height='18'%20fill='black'/%3e%3crect%20x='16'%20y='340'%20width='130'%20height='18'%20fill='black'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='420'%20y='248'%20width='120'%20height='18'%20fill='black'/%3e%3c/svg%3e",Vme="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Adjusted%20Back%20Curve%20to%20Intersect%20Input%20Lines%20--%3e%3cpath%20d='%20M%2080,120%20Q%20140,180%20140,256%20Q%20140,332%2080,392'%20fill='none'%20stroke='black'%20stroke-width='14'/%3e%3c!--%20XNOR%20Gate%20Body%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='160'%20width='130'%20height='18'%20fill='black'/%3e%3crect%20x='16'%20y='340'%20width='130'%20height='18'%20fill='black'/%3e%3c!--%20Inverter%20(NOT%20Circle)%20--%3e%3ccircle%20cx='440'%20cy='256'%20r='25'%20fill='transparent'%20stroke='black'%20stroke-width='12'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='465'%20y='248'%20width='80'%20height='18'%20fill='black'/%3e%3c/svg%3e";var Gme=ir("<img> <!> <!> <!>",1);function $me(e,t){Cr(t,!0);const r={in1:[-7.5,68.5],in2:[-7.5,7.5],out:[100,37.58]},n={And:qme,Nand:Dme,Or:Fme,Nor:Bme,Xor:zme,Xnor:Vme};let i=ve(t,"width",3,80),s=ve(t,"height",3,50),o=ve(t,"gateType",3,"And");const a=n[o()];var u=Gme(),c=Gt(u);pt(c,"src",a);var f=xt(c,2);nc(f,{location:["left","bot"],get id(){return t.nodeId},io:"input",get offset(){return r.in2}});var h=xt(f,2);nc(h,{location:["left","top"],get id(){return t.nodeId},io:"input",get offset(){return r.in1}});var v=xt(h,2);nc(v,{location:["right","mid"],get id(){return t.nodeId},io:"output",get offset(){return r.out},get connections(){return lt(Ki).connectors["out_"+t.nodeId]}}),Wt(()=>{pt(c,"alt",`${o()} logic gate`),pt(c,"width",i()),pt(c,"height",s())}),nt(e,u),Rr()}const Ume="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NOT%20Gate%20Body%20(Triangle)%20--%3e%3cpath%20d='%20M%20120,100%20L%20420,256%20L%20120,412%20Z'%20fill='black'/%3e%3c!--%20Input%20Line%20--%3e%3crect%20x='-20'%20y='248'%20width='115'%20height='18'%20fill='black'/%3e%3c!--%20Inverter%20(NOT%20Circle)%20--%3e%3ccircle%20cx='440'%20cy='256'%20r='30'%20fill='transparent'%20stroke='black'%20stroke-width='18'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='470'%20y='248'%20width='150'%20height='18'%20fill='black'/%3e%3c/svg%3e",jme="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NOT%20Gate%20Body%20(Triangle)%20--%3e%3cpath%20d='%20M%20120,100%20L%20420,256%20L%20120,412%20Z'%20fill='black'/%3e%3c!--%20Input%20Line%20--%3e%3crect%20x='-20'%20y='248'%20width='115'%20height='18'%20fill='black'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='400'%20y='248'%20width='150'%20height='18'%20fill='black'/%3e%3c/svg%3e";var Hme=ir("<img> <!> <!>",1);function Wme(e,t){Cr(t,!0);const r={in:[-15,38.7],out:[100,38]},n={Not:Ume,Repeater:jme};let i=ve(t,"width",3,80),s=ve(t,"height",3,50),o=ve(t,"gateType",3,"Not");var a=Hme(),u=Gt(a),c=xt(u,2);nc(c,{location:["left","mid"],get id(){return t.nodeId},io:"input",get offset(){return r.in}});var f=xt(c,2);nc(f,{location:["right","mid"],get id(){return t.nodeId},io:"output",get offset(){return r.out},get connections(){return lt(Ki).connectors["out_"+t.nodeId]}}),Wt(()=>{pt(u,"src",n[o()]),pt(u,"alt",`${o()} logic gate`),pt(u,"width",i()),pt(u,"height",s())}),nt(e,a),Rr()}var Xme=ir('<div class="button_fix svelte-9i9r2v"><svg width="85" height="65" viewBox="-12 0 95 100" xmlns="http://www.w3.org/2000/svg"><line x1="-50" x2="5" y1="45" y2="45" stroke-width="8"></line><circle cx="50" cy="50" r="45" stroke-width="7"></circle></svg></div> <!>',1);function Yme(e,t){ve(t,"width",3,80),ve(t,"height",3,50);const r=[-5,35.43];var n=Xme(),i=Gt(n),s=jt(i);Cn(s,0,"LampSVG");var o=jt(s);pt(o,"stroke","lightgray");var a=xt(o);pt(a,"fill","lightgray"),pt(a,"stroke","gray");var u=xt(i,2);nc(u,{offset:r,location:["left","mid"],get id(){return t.nodeId},io:"input"}),nt(e,n)}var Kme=Nn('<svg width="75" height="60" viewBox="-2 2 140 95" xmlns="http://www.w3.org/2000/svg"><rect x="0" y="0" width="100" height="100" fill="black" stroke-width="2"></rect><line x1="100" x2="190" y1="50" y2="50" stroke-width="8"></line><circle role="presentation" cx="50" cy="50" r="30" aria-label="input button node toggle" stroke-width="7"></circle></svg><!>',1);function Zme(e,t){Cr(t,!0),ve(t,"width",3,80),ve(t,"height",3,50);let r=li(!1),n=ls(()=>({color:R(r)?"green":"red",outlineColor:R(r)?"var(--lime-green)":"var(--lime-red)"}));const i=[95,40.4];function s(v){v.preventDefault();let y=!1;const m=v.clientX,_=v.clientY,w=5;function S(T){const I=T.clientX-m,q=T.clientY-_;Math.sqrt(I**2+q**2)>w&&(y=!0,A())}function E(){!y&&Al()&&(console.log(Al()),we(r,!R(r)),hme(t.nodeId)),A()}function A(){window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",E)}window.addEventListener("mousemove",S),window.addEventListener("mouseup",E)}ys.subscribe(v=>{if(v===null){we(r,!1);return}});var o=Kme(),a=Gt(o),u=jt(a),c=xt(u),f=xt(c),h=xt(a);nc(h,{offset:i,location:["right","mid"],get id(){return t.nodeId},io:"output",get connections(){return lt(Ki).connectors["out_"+t.nodeId]}}),Wt(()=>{pt(u,"stroke",R(n).outlineColor),pt(c,"stroke",R(n).outlineColor),pt(f,"fill",R(n).color),pt(f,"stroke",R(n).outlineColor)}),pr("mousedown",f,s,!0),nt(e,o),Rr()}const SH={"Logic Gates":{svg:void 0,groupElements:[{name:"And",nodeType:"And",icon:Tte},{name:"Nand",nodeType:"Nand",icon:Mte},{name:"Or",nodeType:"Or",icon:Cte},{name:"Nor",nodeType:"Nor",icon:Rte},{name:"Xor",nodeType:"Xor",icon:Ite},{name:"Xnor",nodeType:"Xnor",icon:Ote},{name:"Not",nodeType:"Not",icon:kte},{name:"Repeater",nodeType:"Repeater",icon:Pte}]},"Input/Output":{svg:void 0,groupElements:[{name:"Lamp",nodeType:"Lamp",icon:Lte},{name:"Button",nodeType:"Button",icon:Nte}]},GhostElement:{svg:void 0,groupElements:[]}};function Jme(e){switch(e){case"And":case"Nor":case"Xor":case"Xnor":case"Or":case"Nand":return $me;case"Repeater":case"Not":return Wme;case"Button":return Zme;case"Lamp":return Yme;default:return null}}var Qme=(e,t,r)=>t(R(r),e),e0e=ir('<li class="svelte-aziwse"><button class="gate-button" style="background:none; border:none; padding:0; cursor:pointer;"><img class="svelte-aziwse"></button> </li>'),t0e=ir('<ol class="side_menu_group svelte-aziwse"></ol>');function r0e(e,t){Cr(t,!0);let r=ve(t,"zIndex",3,0),n=ve(t,"subMenuHeader",3,"Logic Gates");const i=SH[n()].groupElements;let s=null,o=null;function a(m,_,w){o=document.createElement("div"),o.className="drag-ghost",o.style.position="fixed",o.style.pointerEvents="none",o.style.left=_+"px",o.style.top=w+"px",o.style.zIndex="200",o.style.transform="scale(1.3)";const S=document.createElement("img");S.src=m.icon,S.alt=m.nodeType+"drag gate ghost",S.style.width="82px",S.style.opacity="0.7",o.appendChild(S),document.body.appendChild(o)}function u(m,_){o&&(o.style.left=m+"px",o.style.top=_+"px")}function c(){o&&(o.remove(),o=null)}function f(m,_){_.preventDefault(),s=m,a(m,_.pageX,_.pageY)}function h(m){o&&u(m.pageX,m.pageY)}function v(m){if(m.stopPropagation(),s&&o){const _=document.elementFromPoint(m.clientX,m.clientY);u(m.pageX,m.pageY);const w=document.querySelector(".svelvet-wrapper");if(w==null?void 0:w.contains(_)){const E={...m,gateType:s.nodeType};t.createCanvasDevice(E)}s=null,c(),m.stopPropagation()}}Ti(()=>{document.addEventListener("mousemove",h),document.addEventListener("click",v)}),wh(()=>{document.removeEventListener("mousemove",h),document.removeEventListener("click",v),c()});var y=t0e();ds(y,21,()=>i,gu,(m,_)=>{var w=e0e();w.__mousedown=[Qme,f,_];var S=jt(w),E=jt(S),A=xt(S);Wt(()=>{pt(E,"src",R(_).icon),pt(E,"alt",`${R(_).name??""} logic gate, hand-drawn`),Eu(A,` ${R(_).name??""}`)}),nt(m,w)}),Wt(()=>{kr(y,`z-index:${r()};`),pt(y,"id",`section_${r()??""}`)}),nt(e,y),Rr()}kl(["mousedown"]);const n0e=""+new URL("line_26-7GG_ennq.svg",import.meta.url).href,i0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20preserveAspectRatio='none'%20id='a'%20data-name='AW'%20xmlns='http://www.w3.org/2000/svg'%20width='500'%20height='27.081'%20viewBox='0%200%20500%2027.081'%3e%3cpath%20id='b'%20data-name='16'%20d='M500,25.653c-.271,.462-.732,.434-1.18,.548-.418,.107-.762,.508-1.277,.879h-22.196c-.256-.224-.609-.535-1.012-.889h-7.665c-.362-.338-.71-.663-1.069-.998h-7.711c-.363-.336-.711-.66-1.076-.998h-8.658c-.498-.437-.823-.963-1.6-.956-4.344,.039-8.688,.019-12.911,.019-.349-.349-.577-.577-.845-.845-1.218-.293-2.5-.073-3.769-.115-1.29-.043-2.584-.01-3.876-.01h-7.267c-1.292,0-2.585,.036-3.876-.01-1.267-.045-2.549,.192-3.758-.121-.274-.274-.502-.502-.784-.784h-28.005c-.379-.333-.732-.644-1.134-.997h-45.514c-.305,.285-.654,.61-1.011,.943h-53.262l-1.063-.992h-118.18c-.251-.251-.479-.479-.708-.708-.129-.08-.251-.214-.387-.228-.319-.034-.645-.011-.968-.011-4.36,0-8.721,.001-13.081-.004-.147,0-.295-.064-.448-.099-.438-.438-.811-.889-1.573-.884-5.006,.036-10.013,.024-15.019,.012-.625-.001-1.267,.129-1.846-.126-.255-.255-.483-.483-.716-.716-.939-.229-1.899-.113-2.85-.114-7.59-.011-15.181-.018-22.771,.012-.774,.003-1.106-.509-1.604-.953h-17.45c-.292,.269-.641,.59-1.009,.929H34.387c-.343-.32-.692-.645-1.055-.984h-11.548c-.393-.35-.746-.663-1.122-.998h-5.724c-.278-.278-.469-.587-.744-.716-.402-.188-.938-.144-1.286-.386-.522-.363-.93-.889-1.387-1.346l-.345-.345c-.923,.165-1.464-.42-1.997-1.03h-.968c-2.05-2.059-4.101-4.118-6.23-6.256-.022-.369-.058-.835-.075-1.301-.034-.93-.106-1.035-1.056-1.154-.334-.042-.612-.094-.829-.465,.284-.322,.579-.658,.876-.995C.607,1.136,.304,.793,0,.451Q.875,0,5.143,0c.244,.192,.491,.38,.728,.579,.123,.103,.23,.227,.369,.366h6.736c.362,.338,.71,.663,1.068,.997h14.493c.364,.337,.713,.66,1.009,.934h16.478c.498-.438,.825-.956,1.6-.955,17.603,.023,35.206,.017,52.809,.022,.307,0,.614,.073,.928,.112,.431,.452,.82,.889,1.579,.871,2.26-.053,4.521-.019,6.782-.019,5.006,0,10.013,.017,15.019-.019,.759-.005,1.142,.431,1.63,.932h12.505c.38,.333,.734,.644,1.137,.998h108.444c.359,.333,.708,.657,1.071,.993h43.567c.357,.333,.705,.658,1.015,.947h3.881c.253-.253,.481-.481,.71-.71,.129-.078,.258-.226,.387-.226,27.764-.01,55.528-.01,83.195-.01,.541,.535,.911,.99,1.674,.987,8.075-.029,16.15-.023,24.224-.01,.785,.001,1.589-.156,2.34,.129,.246,.246,.475,.475,.703,.703,.144,.043,.287,.123,.431,.123,2.745,.007,5.491,.006,8.236,.006s5.491,.03,8.236-.019c.774-.014,1.11,.503,1.606,.952h9.622c.368,.337,.717,.658,1.088,.998h7.707c.356,.333,.705,.659,1.067,.998h7.707c.25,.25,.478,.478,.706,.706,.128,.08,.251,.216,.386,.23,.319,.034,.645,.011,.968,.011,8.236,0,16.473,0,24.709,.004,.148,0,.296,.062,.444,.095,1.256,1.256,2.512,2.512,3.768,3.768,1.374-.003,1.396,.046,1.46,1.249,.017,.322-.015,.647,.007,.969,.029,.428,.425,.7,1.034,.699,.323,0,.646-.005,.969,.002,.155,.003,.309,.03,.466,.047,.491,.678,1.129,1.073,1.992,1.025,2.058,2.058,4.114,4.114,6.166,6.166Z'/%3e%3c/svg%3e",s0e=""+new URL("line_23-6xYtaVUR.svg",import.meta.url).href,o0e=""+new URL("line_24-DEoQpS3B.svg",import.meta.url).href,a0e=""+new URL("line_25-BJNXJfeQ.svg",import.meta.url).href,u0e=""+new URL("line_27-Bg8z01MR.svg",import.meta.url).href,c0e=""+new URL("line_17-DTelLRhX.svg",import.meta.url).href,l0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20preserveAspectRatio='none'%20id='a'%20data-name='AW'%20xmlns='http://www.w3.org/2000/svg'%20width='500'%20height='14.048'%20viewBox='0%200%20500%2014.048'%3e%3cpath%20id='b'%20data-name='20'%20d='M500,11.891c-.491,.804-1.263,1.347-1.881,2.033-.123,.035-.245,.101-.368,.102-1.375,.007-2.751-.032-4.124,.021-.663,.025-.942-.435-1.365-.812h-18.918c-.311-.287-.609-.561-.922-.849h-30.487c-.303-.283-.6-.559-.873-.813h-47.818c-.333,.297-.633,.564-.861,.768h-18.167c-.235-.235-.429-.429-.624-.624-.253-.054-.505-.152-.759-.153-3.42-.01-6.84-.007-10.127-.007-.325,.325-.519,.519-.762,.762-.347,.019-.744,.06-1.143,.06-29.56,.003-59.12,.003-88.68,.003-.138,0-.278-.019-.412,.003-.653,.107-.957-.392-1.398-.828H56.332c-1.237,0-2.476,.022-3.711-.023-.187-.007-.448-.298-.519-.51-.077-.23-.07-.609,.073-.769,.635-.71,1.333-1.365,1.994-2.027h19.006c.43-.625,.988-.935,1.743-.796,.63,.116,1.004-.273,1.355-.691,.804-.252,1.622-.127,2.428-.128,12.374-.009,24.748-.006,37.122-.01,.395,0,.812,.1,1.171-.154,.096-.068,.233-.211,.213-.283-.032-.115-.172-.278-.275-.284-.811-.052-1.625-.097-2.437-.097-13.199-.005-26.398-.004-39.65-.004-.271-.238-.572-.503-.913-.804h-30.452c-.307-.286-.604-.563-.908-.847H19.505c-.307-.285-.603-.562-.912-.849H.37c-.111-.362-.222-.727-.37-1.211C.741,1.461,1.481,.854,2.46,.051H12.864c.218,.192,.519,.457,.861,.758h59.327c.306,.285,.603,.562,.907,.847,4.11,0,8.235,.002,12.359-.012,.098,0,.233-.166,.283-.283,.086-.198-.045-.465-.356-.512-.533-.081-1.085-.036-1.626-.08-.105-.008-.289-.255-.279-.268,.14-.178,.302-.467,.469-.473,1.085-.042,2.172-.022,3.169-.022,.462,.484,.793,.853,1.439,.841,2.336-.041,4.675,.009,7.011-.033,.647-.011,.972,.369,1.433,.841h56.795c.412,0,.83,.041,1.236-.009,.666-.082,.935,.444,1.36,.81h54.397c.308,.286,.605,.561,.914,.847h91.543c.299,.28,.596,.557,.902,.844h44.485c.333,.297,.632,.564,.951,.848h33.767c.665,1.068,1.616,.826,2.549,.656,.195-.194,.389-.389,.583-.583,.122-.037,.244-.108,.366-.108,8.387-.005,16.774-.005,25.229-.005,.263,.225,.566,.483,.928,.793h1.55c.314,.287,.612,.56,.911,.833,.286-.261,.583-.531,.879-.8,4.262,0,8.524,.004,12.786-.008,.302,0,.606,.039,.661,.339,.03,.164-.205,.435-.386,.568-.413,.302-.318,.719-.309,1.111,.002,.104,.138,.258,.245,.297,.241,.087,.5,.146,.756,.164,.943,.065,1.898-.122,2.825,.132,.201,.201,.395,.395,.6,.6,.652,.201,1.335,.091,2.007,.093,5.774,.01,11.549,.017,17.323-.01,.658-.003,.944,.428,1.367,.81h22.215c.312,.286,.611,.559,.926,.849h18.934c.305,.283,.602,.559,.891,.828,.648,.145,1.383-.29,1.95,.339Zm-93.618,.51c-3.829-.031-7.658-.023-11.486-.009-.098,0-.227,.159-.287,.272-.102,.192,.024,.513,.324,.52,1.914,.042,3.828,.021,5.743,.021s3.829,.004,5.743-.012c.099,0,.227-.159,.287-.272,.101-.192-.026-.518-.324-.521Zm14.022,.825c-2.454-.036-4.91-.024-7.364-.008-.098,0-.227,.161-.284,.276-.095,.192,.032,.503,.332,.516,1.226,.051,2.454,.021,3.682,.021s2.455,.006,3.682-.012c.098-.002,.227-.161,.284-.276,.095-.192-.035-.512-.331-.516Z'/%3e%3c/svg%3e",f0e=""+new URL("line_21-BR_oFIB4.svg",import.meta.url).href,h0e=""+new URL("line_29-C9eu5sMJ.svg",import.meta.url).href;var d0e=ir('<li class="svelte-1m2v4mn"><div class="menu_group_section svelte-1m2v4mn"><button class="svelte-1m2v4mn"><span style="margin-left:5%;"> </span></button> <img class="sketch_bar svelte-1m2v4mn"></div> <!></li>'),p0e=ir('<nav class="side_menu noselect svelte-1m2v4mn" aria-label="Side Menu"><div class="side_menu_header svelte-1m2v4mn"><!> <img class="wiggle_bar svelte-1m2v4mn" alt="sketched line bottom border for main app bar"></div> <ul class="svelte-1m2v4mn"></ul></nav>');function g0e(e,t){Cr(t,!0);const r={line_15:i0e,line_23:s0e,line_24:o0e,line_25:a0e,line_27:u0e,line_17:c0e,line_19:l0e,line_21:f0e,line_29:h0e},n=SH,i=Object.keys(n),s=[15,23,24,25,27,17,19,21,29];function o(w){return Math.floor(Math.random()*w)+1}let a=localStorage.getItem("randomLineSelectionStore");function u(w){return r[`line_${w}`]}if(a===null){const w=i.map(S=>{const E=o(s.length-1),A=s[E],T=u(A);return n[S].svg=T,s.splice(E,1),A});localStorage.setItem("randomLineSelectionStore",JSON.stringify(w))}else JSON.parse(a).forEach((S,E)=>{const A=i[E],T=u(parseInt(S,10));A!==void 0&&(n[A].svg=T)});let c=xo(Array(i.length).fill(!0));function f(w,S){return w[S]?"transition: max-height .4s ease-in; max-height:405px":"transition: max-height .4s ease-out; max-height:75px"}var h=p0e(),v=jt(h),y=jt(v);Ate(y,{});var m=xt(y,2);pt(m,"src",n0e);var _=xt(v,2);ds(_,21,()=>i,gu,(w,S,E)=>{var A=d0e();pt(A,"id",`menu_group_${E??""}`);var T=jt(A),I=jt(T);I.__mousedown=()=>{c[E]=!c[E]};var q=jt(I),p=jt(q),C=xt(I,2),O=xt(T,2);r0e(O,{get createCanvasDevice(){return t.createCanvasDevice},zIndex:E,get subMenuHeader(){return R(S)}}),Wt(N=>{kr(A,N),Eu(p,R(S)),pt(C,"src",n[R(S)].svg),pt(C,"alt",`sketched line bottom border for main app bar section ${R(S)??""}`)},[()=>f(c,E)]),nt(w,A)}),nt(e,h),Rr()}kl(["mousedown"]);var v0e=ir("<div> </div>");function m0e(e,t){Cr(t,!0);const r=(u,c=Ls)=>{const f=ls(()=>t.position!==void 0?!1:"cursor");zE(u,{get drop(){return R(f)},get position(){return t.position},get id(){return t.nodeId},children:(h,v)=>{var y=gr(),m=Gt(y);Yu(m,c,(_,w)=>{w(_,ig({get nodeId(){return t.nodeId}},()=>t.nodeProps))}),nt(h,y)},$$slots:{default:!0}})};let n=ls(()=>Jme(t.gateType));var i=gr(),s=Gt(i);{var o=u=>{r(u,()=>R(n))},a=u=>{var c=v0e(),f=jt(c);Wt(()=>Eu(f,`Unknown gate type: ${t.gateType??""}`)),nt(u,c)};lr(s,u=>{R(n)?u(o):u(a,!1)})}nt(e,i),Rr()}var y0e=Nn('<svg><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M.5 10.29a.7.7 0 0 0 .37.62a.71.71 0 0 0 .73 0l5.08-3.3a.7.7 0 0 0 0-1.18L1.6 3.11a.71.71 0 0 0-.73 0a.7.7 0 0 0-.37.62z"></path><path d="M6.997 10.29a.7.7 0 0 0 .37.62a.71.71 0 0 0 .73 0l5.08-3.3a.7.7 0 0 0 0-1.18l-5.08-3.32a.71.71 0 0 0-.73 0a.7.7 0 0 0-.37.6zM13.5 2.5v9"></path></g></svg>');function _0e(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=y0e();let i;Wt(()=>i=ha(n,i,{viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),nt(e,n)}var b0e=Nn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M1.436 12.33a1.14 1.14 0 0 0 .63 1a1.24 1.24 0 0 0 1.22 0l8.65-5.35a1.11 1.11 0 0 0 0-2L3.286.67a1.24 1.24 0 0 0-1.22 0a1.14 1.14 0 0 0-.63 1z"></path></svg>');function w0e(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=b0e();let i;Wt(()=>i=ha(n,i,{viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),nt(e,n)}var x0e=Nn('<svg><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="m11 9l2-.5l.5 2"></path><path d="M13 8.5A6.76 6.76 0 0 1 7 13h0a6 6 0 0 1-5.64-3.95M3 5l-2 .5l-.5-2"></path><path d="M1 5.5C1.84 3.2 4.42 1 7 1h0a6 6 0 0 1 5.64 4"></path></g></svg>');function S0e(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=x0e();let i;Wt(()=>i=ha(n,i,{viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),nt(e,n)}var E0e=Nn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M4 .5H1.5a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1H4a1 1 0 0 0 1-1v-11a1 1 0 0 0-1-1m8.5 0H10a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h2.5a1 1 0 0 0 1-1v-11a1 1 0 0 0-1-1"></path></svg>');function A0e(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=E0e();let i;Wt(()=>i=ha(n,i,{viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),nt(e,n)}var T0e=Nn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M13.5.5v13m-13-1.84a1 1 0 0 0 .52.88a1 1 0 0 0 1 0l7.19-4.7a1 1 0 0 0 0-1.68L2 1.5a1 1 0 0 0-1 0a1 1 0 0 0-.52.88Z"></path></svg>');function P0e(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=T0e();let i;Wt(()=>i=ha(n,i,{viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),nt(e,n)}var C0e=Nn('<svg><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"></path><path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7M7 3v4a1 1 0 0 0 1 1h7"></path></g></svg>');function R0e(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=C0e();let i;Wt(()=>i=ha(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),nt(e,n)}var I0e=Nn('<svg><path fill="currentColor" d="M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zM17 6H7v13h10zM9 17h2V8H9zm4 0h2V8h-2zM7 6v13z"></path></svg>');function O0e(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=I0e();let i;Wt(()=>i=ha(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),nt(e,n)}const EE=(e,t)=>{let r=()=>PJ(t==null?void 0:t(),[]);var n=gr(),i=Gt(n);Yu(i,()=>r().Component,(s,o)=>{o(s,{get style(){return r().styles},get width(){return r().width}})}),nt(e,n)},Mf=(e,t=Ls,r=Ls,n)=>{let i=hn(()=>NZ(n==null?void 0:n(),""));var s=k0e();s.__click=[M0e,r];var o=jt(s);EE(o,t),Wt(()=>kr(s,R(i))),nt(e,s)};var M0e=(e,t)=>t()(),k0e=ir('<button class="svelte-1qv10mw"><!></button>'),L0e=(e,t)=>t()(),N0e=ir('<button style="display:flex;align-items: center;padding-block:1px;" class="svelte-1qv10mw"><div style="margin-left: -8px"><!></div> <p id="tickNumber" class="svelte-1qv10mw"> </p></button>'),q0e=ir('<div class="menuRunButtons svelte-1qv10mw"><!> <span class="vl svelte-1qv10mw"></span> <!> <span class="vl svelte-1qv10mw"></span> <!> <span class="vl svelte-1qv10mw"></span> <!> <span style="margin-right: 7px" class="vl svelte-1qv10mw"></span> <!> <!></div>');function D0e(e,t){Cr(t,!0);const r=(S,E=Ls)=>{var A=N0e();A.__click=[L0e,E];var T=jt(A),I=jt(T);{var q=N=>{EE(N,()=>n.pauseTick)},p=N=>{EE(N,()=>n.playTick)};lr(I,N=>{Al()?N(q):N(p,!1)})}var C=xt(T,2),O=jt(C);Wt((N,V)=>{kr(C,N),Eu(O,V)},[()=>Al()?"border-color:green":"border-color:red",sme]),nt(S,A)},n={playTick:{Component:w0e,styles:"transform:scale(1.8);",width:40},pauseTick:{Component:A0e,styles:"transform:scale(1.8);",width:40},updateGates:{Component:P0e,styles:"transform:scale(2);",width:40},updateGatesNext:{Component:_0e,styles:"transform:scale(2.3);",width:50},resetState:{Component:S0e,styles:"transform:scale(2);",width:40},save:{Component:R0e,styles:"transform:scale(2.4);",width:40},trash:{Component:O0e,styles:"transform:scale(2.69);",width:40}},i=()=>{const S=document.querySelector("#logicap");S&&(S.classList.contains("running")?(S.classList.remove("running"),s()):S.classList.add("running"))};function s(){let S,E;const A=["red","var(--lime-red)"],T=document.querySelectorAll("[id^='N-Lamp']");T!==null&&T.forEach(I=>{S=I.querySelector("circle"),E=I.querySelector("line"),!(S===null||E===null)&&(S.setAttribute("stroke",A[1]),S.setAttribute("fill",A[0]),E.setAttribute("stroke",A[0]))})}function o(S){i(),ome(10)}function a(S){fme()}function u(S){lme()}function c(){_te(),Ki.reset(),t.clearCanvas()}var f=q0e(),h=jt(f);r(h,()=>o);var v=xt(h,4);Mf(v,()=>n.updateGates,()=>u);var y=xt(v,4);Mf(y,()=>n.updateGatesNext,()=>a);var m=xt(y,4);Mf(m,()=>n.resetState,()=>ame);var _=xt(m,4);Mf(_,()=>n.save,()=>nh);var w=xt(_,2);Mf(w,()=>n.trash,()=>c,()=>"margin-left: -6px"),nt(e,f),Rr()}kl(["click"]);const F0e=!1;console.log("IS DEVMODE: "+F0e);function B0e(e=10){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=crypto.getRandomValues(new Uint8Array(e));return Array.from(r,n=>t[n%t.length]).join("")}function z0e(){const e=document==null?void 0:document.querySelector("div.svelvet-graph-wrapper");if(!e)return;const{transform:t}=e.style,r=/scale\((.+)\)/,n=t.match(r);if(!n||!n[1])return console.warn("scale property not found on graph-wrapper"),null;const i=parseFloat(n[1]);if(isNaN(i))throw new Error("Scale value is not a valid integer.");localStorage.setItem("SavedScale",i.toString())}function V0e(){const e=()=>{const t=document.querySelector(".svelvet-wrapper");if(t){const r=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0});t.dispatchEvent(r);const n=new MouseEvent("mouseup",{bubbles:!0,cancelable:!0});t.dispatchEvent(n)}};document.addEventListener("DOMContentLoaded",()=>{e()})}var G0e=Nn('<svg><path fill="currentColor" d="M5 19V5zv-.025zm0 2q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v7q0 .425-.288.713T20 13t-.712-.288T19 12V5H5v14h7q.425 0 .713.288T13 20t-.288.713T12 21zm14.175-1H16q-.425 0-.712-.288T15 19t.288-.712T16 18h3.175l-.9-.9Q18 16.825 18 16.413t.3-.713q.275-.275.7-.275t.7.275l2.6 2.6q.3.3.3.7t-.3.7l-2.6 2.6q-.275.275-.687.288T18.3 22.3q-.275-.275-.275-.7t.275-.7zM11 13v3q0 .425.288.713T12 17t.713-.288T13 16v-3h3q.425 0 .713-.288T17 12t-.288-.712T16 11h-3V8q0-.425-.288-.712T12 7t-.712.288T11 8v3H8q-.425 0-.712.288T7 12t.288.713T8 13z"></path></svg>');function $0e(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=G0e();let i;Wt(()=>i=ha(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),nt(e,n)}var U0e=async(e,t,r)=>await t(r),j0e=ir('<p class="svelte-a9kq2j"> </p>'),H0e=(e,t)=>t(),W0e=ir('<div class="tabs svelte-a9kq2j"><!> <button style="border: unset; width: 30px; float: left;background-color:transparent;margin-left:-3px;margin-right: 4px;" class="svelte-a9kq2j"><!></button></div>');function X0e(e,t){Cr(t,!0);const[r,n]=ni(),i=()=>Ye(Ki,"$CircuitStore",r),s=localStorage.getItem("currActiveTab")||"init_circuit";let o=li(xo(s)),a=xo(localStorage.getItem("activeTabList")&&JSON.parse(localStorage.getItem("activeTabList")||"")||[s]);async function u(_){await nh();const w=localStorage.getItem("circuitStoreSave");if(!w){console.log("empty after trying to save, not possible I don't think");return}localStorage.setItem(_,w)}async function c(_){if(R(o)===_)return null;await u(R(o)),t.clearDeviceData(),Ki.reset();let w=localStorage.getItem(_);w||(w="",localStorage.setItem(_,w)),localStorage.setItem("circuitStoreSave",w),cV(),t.setDeviceData(i().devices),we(o,_,!0),localStorage.setItem("currActiveTab",_)}function f(){const _=a.map(S=>{if(S==="unnamed_circuit")return 0;const E=S.match(/^unnamed_circuit_(\d+)$/);return E?parseInt(E[1]):null}).filter(S=>S!==null).sort((S,E)=>S-E);if(_.length===0||_[0]!==0){a.push("unnamed_circuit"),localStorage.setItem("activeTabList",JSON.stringify(a));return}let w=1;for(const S of _){if(S>w)break;w=S+1}a.push(`unnamed_circuit_${w}`),localStorage.setItem("activeTabList",JSON.stringify(a))}var h=W0e(),v=jt(h);ds(v,16,()=>a,_=>_,(_,w)=>{var S=j0e();S.__click=[U0e,c,w];var E=jt(S);Wt(()=>{kr(S,R(o)===w?"background-color: pink":""),Eu(E,w)}),nt(_,S)});var y=xt(v,2);y.__click=[H0e,f];var m=jt(y);$0e(m,{style:"display: block; margin: 0 auto; height: 100%; width: 100%;"}),nt(e,h),Rr(),n()}kl(["click"]);function Y0e(){return console.log("CONNECTED IN APP"),null}var K0e=ir('<main id="logicap" class="svelte-yc1ai5"><!> <!> <!> <!></main>');function Z0e(e,t){Cr(t,!0);const[r,n]=ni(),i=()=>Ye(Ki,"$CircuitStore",r);let s=li(xo({...i().devices}));const o=()=>we(s,{},!0),a=_=>we(s,_,!0);let u=li(1);Ti(()=>{we(u,parseFloat(localStorage.getItem("SavedScale")||"1"),!0),cV(),we(s,i().devices,!0),V0e()}),window.addEventListener("beforeunload",()=>{nh(),z0e()});function c(_){const w=_.gateType,S=B0e(),E=Ki.addCircuitDevice(w,S);we(s,E,!0),nh()}var f=K0e(),h=jt(f);g0e(h,{createCanvasDevice:c});var v=xt(h,2);D0e(v,{clearCanvas:o});var y=xt(v,2);X0e(y,{clearDeviceData:o,setDeviceData:a});var m=xt(y,2);Qee(m,{theme:"LogiCap",get zoom(){return R(u)},editable:!1,disableSelection:!1,edgeStyle:"bezier",controls:!0,children:(_,w)=>{var S=gr(),E=Gt(S);ds(E,17,()=>Object.entries(R(s)),([A,T])=>A,(A,T)=>{let I=()=>R(T)[0],q=()=>R(T)[1];const p=ls(()=>({...q().type&&{gateType:q().type},width:80,height:50}));m0e(A,{get gateType(){return q().type},get position(){return q().position},get nodeId(){return I()},get nodeProps(){return R(p)}})}),nt(_,S)},$$slots:{default:!0,minimap:(_,w)=>{aV(_,{width:100,corner:"NE",slot:"minimap"})},toggle:(_,w)=>{uV(_,{main:"LogiCap",corner:"NW",alt:"LogiCap",slot:"toggle"})}}}),nt(e,f),Rr(),n()}FJ(Z0e,{target:document.getElementById("app")});export{Q0e as A,eye as B,YJ as C,ks as D,wu as E,Eu as F,Ke as G,Ti as H,wh as I,qe as J,Gt as K,we as L,Wc as M,hp as N,Nn as O,Yu as P,pt as Q,ds as R,ve as a,Xr as b,Wt as c,Cn as d,nt as e,Rr as f,Mr as g,ni as h,qn as i,lr as j,lt as k,jt as l,xt as m,R as n,hn as o,Cr as p,kr as q,pr as r,Ye as s,ir as t,ro as u,io as v,XQ as w,DJ as x,ic as y,TC as z};
