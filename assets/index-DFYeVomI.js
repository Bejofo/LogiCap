const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Controls-DGNygHja.js","./Icon-BvyHCEFJ.js","./DrawerController-2Rg8fGE3.js","./DrawerController-CDtfjO5V.css"])))=>i.map(i=>d[i]);
var $Z=Object.defineProperty;var oC=e=>{throw TypeError(e)};var UZ=(e,t,r)=>t in e?$Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var aC=(e,t,r)=>UZ(e,typeof t!="symbol"?t+"":t,r),Am=(e,t,r)=>t.has(e)||oC("Cannot "+r);var Ma=(e,t,r)=>(Am(e,t,"read from private field"),r?r.call(e):t.get(e)),Tf=(e,t,r)=>t.has(e)?oC("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Tm=(e,t,r,n)=>(Am(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),uC=(e,t,r)=>(Am(e,t,"access private method"),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const cC=!1;var wh=Array.isArray,jZ=Array.prototype.indexOf,ME=Array.from,w4=Object.defineProperty,Ba=Object.getOwnPropertyDescriptor,x4=Object.getOwnPropertyDescriptors,HZ=Object.prototype,WZ=Array.prototype,kE=Object.getPrototypeOf,lC=Object.isExtensible;function Pf(e){return typeof e=="function"}const ks=()=>{};function XZ(e){return e()}function Qf(e){for(var t=0;t<e.length;t++)e[t]()}function YZ(e,t,r=!1){return e===void 0?r?t():t:e}const Co=2,S4=4,ev=8,LE=16,ja=32,Ml=64,Tp=128,no=256,Pp=512,ys=1024,Ha=2048,dc=4096,za=8192,tv=16384,KZ=32768,rv=65536,E4=1<<17,ZZ=1<<19,A4=1<<20,HS=1<<21,ca=Symbol("$state"),T4=Symbol("legacy props"),JZ=Symbol("");function P4(e){return e===this.v}function NE(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function qE(e){return!NE(e,this.v)}function QZ(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function eJ(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function tJ(e){throw new Error("https://svelte.dev/e/effect_orphan")}function rJ(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function C4(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function nJ(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function iJ(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function sJ(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function oJ(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let kl=!1,aJ=!1;function uJ(){kl=!0}const DE=1,FE=2,R4=4,cJ=8,lJ=16,fJ=1,hJ=2,dJ=4,pJ=8,vJ=16,I4=1,gJ=2,cs=Symbol(),mJ="http://www.w3.org/1999/xhtml";function BE(){throw new Error("https://svelte.dev/e/invalid_default_snippet")}function Ll(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Ir=null;function fC(e){Ir=e}function Rr(e){return O4().get(e)}function Kr(e,t){return O4().set(e,t),t}function xr(e,t=!1,r){var n=Ir={p:Ir,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};kl&&!t&&(Ir.l={s:null,u:null,r1:[],r2:th(!1)}),iv(()=>{n.d=!0})}function Sr(e){const t=Ir;if(t!==null){e!==void 0&&(t.x=e);const o=t.e;if(o!==null){var r=gn,n=nn;t.e=null;try{for(var i=0;i<o.length;i++){var s=o[i];xu(s.effect),ha(s.reaction),$a(s.fn)}}finally{xu(r),ha(n)}}Ir=t.p,t.m=!0}return e||{}}function xh(){return!kl||Ir!==null&&Ir.l===null}function O4(e){return Ir===null&&Ll(),Ir.c??(Ir.c=new Map(yJ(Ir)||void 0))}function yJ(e){let t=e.p;for(;t!==null;){const r=t.c;if(r!==null)return r;t=t.p}return null}function xo(e,t){if(typeof e!="object"||e===null||ca in e)return e;const r=kE(e);if(r!==HZ&&r!==WZ)return e;var n=new Map,i=wh(e),s=Pn(0),o=nn,a=u=>{var c=nn;ha(o);var f;return f=u(),ha(c),f};return i&&n.set("length",Pn(e.length)),new Proxy(e,{defineProperty(u,c,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&iJ();var h=n.get(c);return h===void 0?(h=a(()=>Pn(f.value)),n.set(c,h)):me(h,a(()=>xo(f.value))),!0},deleteProperty(u,c){var f=n.get(c);if(f===void 0)c in u&&n.set(c,a(()=>Pn(cs)));else{if(i&&typeof c=="string"){var h=n.get("length"),g=Number(c);Number.isInteger(g)&&g<h.v&&me(h,g)}me(f,cs),hC(s)}return!0},get(u,c,f){var m;if(c===ca)return e;var h=n.get(c),g=c in u;if(h===void 0&&(!g||(m=Ba(u,c))!=null&&m.writable)&&(h=a(()=>Pn(xo(g?u[c]:cs))),n.set(c,h)),h!==void 0){var y=C(h);return y===cs?void 0:y}return Reflect.get(u,c,f)},getOwnPropertyDescriptor(u,c){var f=Reflect.getOwnPropertyDescriptor(u,c);if(f&&"value"in f){var h=n.get(c);h&&(f.value=C(h))}else if(f===void 0){var g=n.get(c),y=g==null?void 0:g.v;if(g!==void 0&&y!==cs)return{enumerable:!0,configurable:!0,value:y,writable:!0}}return f},has(u,c){var y;if(c===ca)return!0;var f=n.get(c),h=f!==void 0&&f.v!==cs||Reflect.has(u,c);if(f!==void 0||gn!==null&&(!h||(y=Ba(u,c))!=null&&y.writable)){f===void 0&&(f=a(()=>Pn(h?xo(u[c]):cs)),n.set(c,f));var g=C(f);if(g===cs)return!1}return h},set(u,c,f,h){var A;var g=n.get(c),y=c in u;if(i&&c==="length")for(var m=f;m<g.v;m+=1){var _=n.get(m+"");_!==void 0?me(_,cs):m in u&&(_=a(()=>Pn(cs)),n.set(m+"",_))}g===void 0?(!y||(A=Ba(u,c))!=null&&A.writable)&&(g=a(()=>Pn(void 0)),me(g,a(()=>xo(f))),n.set(c,g)):(y=g.v!==cs,me(g,a(()=>xo(f))));var x=Reflect.getOwnPropertyDescriptor(u,c);if(x!=null&&x.set&&x.set.call(h,f),!y){if(i&&typeof c=="string"){var S=n.get("length"),E=Number(c);Number.isInteger(E)&&E>=S.v&&me(S,E+1)}hC(s)}return!0},ownKeys(u){C(s);var c=Reflect.ownKeys(u).filter(g=>{var y=n.get(g);return y===void 0||y.v!==cs});for(var[f,h]of n)h.v!==cs&&!(f in u)&&c.push(f);return c},setPrototypeOf(){sJ()}})}function hC(e,t=1){me(e,e.v+t)}function dC(e){try{if(e!==null&&typeof e=="object"&&ca in e)return e[ca]}catch{}return e}function _J(e,t){return Object.is(dC(e),dC(t))}const eh=new Map;function th(e,t){var r={f:0,v:e,reactions:null,equals:P4,rv:0,wv:0};return r}function Pn(e,t){const r=th(e);return j4(r),r}function qe(e,t=!1){var n;const r=th(e);return t||(r.equals=qE),kl&&Ir!==null&&Ir.l!==null&&((n=Ir.l).s??(n.s=[])).push(r),r}function Kc(e,t){return me(e,dn(()=>C(e))),t}function me(e,t,r=!1){nn!==null&&!sa&&xh()&&(nn.f&(Co|LE))!==0&&!(Zi!=null&&Zi.includes(e))&&oJ();let n=r?xo(t):t;return rh(e,n)}function rh(e,t){if(!e.equals(t)){var r=e.v;Sh?eh.set(e,t):eh.set(e,r),e.v=t,e.wv=W4(),M4(e,Ha),xh()&&gn!==null&&(gn.f&ys)!==0&&(gn.f&(ja|Ml))===0&&(Ys===null?OJ([e]):Ys.push(e))}return t}function M4(e,t){var r=e.reactions;if(r!==null)for(var n=xh(),i=r.length,s=0;s<i;s++){var o=r[s],a=o.f;(a&Ha)===0&&(!n&&o===gn||(Ro(o,t),(a&(ys|no))!==0&&((a&Co)!==0?M4(o,dc):cv(o))))}}let bJ=!1;var ol,k4,L4,N4;function wJ(){if(ol===void 0){ol=window,k4=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;L4=Ba(t,"firstChild").get,N4=Ba(t,"nextSibling").get,lC(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),lC(r)&&(r.__t=void 0)}}function zE(e=""){return document.createTextNode(e)}function Na(e){return L4.call(e)}function nv(e){return N4.call(e)}function qt(e,t){return Na(e)}function $t(e,t){{var r=Na(e);return r instanceof Comment&&r.data===""?nv(r):r}}function gt(e,t=1,r=!1){let n=e;for(;t--;)n=nv(n);return n}function xJ(e){e.textContent=""}function wl(e){var t=Co|Ha,r=nn!==null&&(nn.f&Co)!==0?nn:null;return gn===null||r!==null&&(r.f&no)!==0?t|=no:gn.f|=A4,{ctx:Ir,deps:null,effects:null,equals:P4,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:r??gn}}function Mi(e){const t=wl(e);return j4(t),t}function hn(e){const t=wl(e);return t.equals=qE,t}function q4(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)wu(t[r])}}function SJ(e){for(var t=e.parent;t!==null;){if((t.f&Co)===0)return t;t=t.parent}return null}function EJ(e){var t,r=gn;xu(SJ(e));try{q4(e),t=Y4(e)}finally{xu(r)}return t}function D4(e){var t=EJ(e),r=(gu||(e.f&no)!==0)&&e.deps!==null?dc:ys;Ro(e,r),e.equals(t)||(e.v=t,e.wv=W4())}function F4(e){gn===null&&nn===null&&tJ(),nn!==null&&(nn.f&no)!==0&&gn===null&&eJ(),Sh&&QZ()}function AJ(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Nl(e,t,r,n=!0){var i=gn,s={ctx:Ir,deps:null,nodes_start:null,nodes_end:null,f:e|Ha,first:null,fn:t,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(r)try{uv(s),s.f|=KZ}catch(u){throw wu(s),u}else t!==null&&cv(s);var o=r&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(A4|Tp))===0;if(!o&&n&&(i!==null&&AJ(s,i),nn!==null&&(nn.f&Co)!==0)){var a=nn;(a.effects??(a.effects=[])).push(s)}return s}function iv(e){const t=Nl(ev,null,!1);return Ro(t,ys),t.teardown=e,t}function xl(e){F4();var t=gn!==null&&(gn.f&ja)!==0&&Ir!==null&&!Ir.m;if(t){var r=Ir;(r.e??(r.e=[])).push({fn:e,effect:gn,reaction:nn})}else{var n=$a(e);return n}}function TJ(e){return F4(),ql(e)}function PJ(e){const t=Nl(Ml,e,!0);return(r={})=>new Promise(n=>{r.outro?nh(t,()=>{wu(t),n(void 0)}):(wu(t),n(void 0))})}function $a(e){return Nl(S4,e,!1)}function Fe(e,t){var r=Ir,n={effect:null,ran:!1};r.l.r1.push(n),n.effect=ql(()=>{e(),!n.ran&&(n.ran=!0,me(r.l.r2,!0),dn(t))})}function Qi(){var e=Ir;ql(()=>{if(C(e.l.r2)){for(var t of e.l.r1){var r=t.effect;(r.f&ys)!==0&&Ro(r,dc),Dl(r)&&uv(r),t.ran=!1}e.l.r2.v=!1}})}function ql(e){return Nl(ev,e,!0)}function Ut(e,t=[],r=wl){const n=t.map(r);return sv(()=>e(...n.map(C)))}function sv(e,t=0){return Nl(ev|LE|t,e,!0)}function Sl(e,t=!0){return Nl(ev|ja,e,!0,t)}function B4(e){var t=e.teardown;if(t!==null){const r=Sh,n=nn;vC(!0),ha(null);try{t.call(null)}finally{vC(r),ha(n)}}}function z4(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var n=r.next;(r.f&Ml)!==0?r.parent=null:wu(r,t),r=n}}function CJ(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&ja)===0&&wu(t),t=r}}function wu(e,t=!0){var r=!1;if((t||(e.f&ZZ)!==0)&&e.nodes_start!==null){for(var n=e.nodes_start,i=e.nodes_end;n!==null;){var s=n===i?null:nv(n);n.remove(),n=s}r=!0}z4(e,t&&!r),Mp(e,0),Ro(e,tv);var o=e.transitions;if(o!==null)for(const u of o)u.stop();B4(e);var a=e.parent;a!==null&&a.first!==null&&V4(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function V4(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function nh(e,t){var r=[];VE(e,r,!0),G4(r,()=>{wu(e),t&&t()})}function G4(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var i of e)i.out(n)}else t()}function VE(e,t,r){if((e.f&za)===0){if(e.f^=za,e.transitions!==null)for(const o of e.transitions)(o.is_global||r)&&t.push(o);for(var n=e.first;n!==null;){var i=n.next,s=(n.f&rv)!==0||(n.f&ja)!==0;VE(n,t,s?r:!1),n=i}}}function Cp(e){$4(e,!0)}function $4(e,t){if((e.f&za)!==0){e.f^=za,(e.f&ys)===0&&(e.f^=ys),Dl(e)&&(Ro(e,Ha),cv(e));for(var r=e.first;r!==null;){var n=r.next,i=(r.f&rv)!==0||(r.f&ja)!==0;$4(r,i?t:!1),r=n}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let ih=[],WS=[];function U4(){var e=ih;ih=[],Qf(e)}function RJ(){var e=WS;WS=[],Qf(e)}function ov(e){ih.length===0&&queueMicrotask(U4),ih.push(e)}function pC(){ih.length>0&&U4(),WS.length>0&&RJ()}let gp=!1,Rp=!1,Ip=null,rc=!1,Sh=!1;function vC(e){Sh=e}let Hf=[];let nn=null,sa=!1;function ha(e){nn=e}let gn=null;function xu(e){gn=e}let Zi=null;function IJ(e){Zi=e}function j4(e){nn!==null&&nn.f&HS&&(Zi===null?IJ([e]):Zi.push(e))}let Wi=null,Rs=0,Ys=null;function OJ(e){Ys=e}let H4=1,Op=0,gu=!1,pu=null;function W4(){return++H4}function Dl(e){var h;var t=e.f;if((t&Ha)!==0)return!0;if((t&dc)!==0){var r=e.deps,n=(t&no)!==0;if(r!==null){var i,s,o=(t&Pp)!==0,a=n&&gn!==null&&!gu,u=r.length;if(o||a){var c=e,f=c.parent;for(i=0;i<u;i++)s=r[i],(o||!((h=s==null?void 0:s.reactions)!=null&&h.includes(c)))&&(s.reactions??(s.reactions=[])).push(c);o&&(c.f^=Pp),a&&f!==null&&(f.f&no)===0&&(c.f^=no)}for(i=0;i<u;i++)if(s=r[i],Dl(s)&&D4(s),s.wv>e.wv)return!0}(!n||gn!==null&&!gu)&&Ro(e,ys)}return!1}function MJ(e,t){for(var r=t;r!==null;){if((r.f&Tp)!==0)try{r.fn(e);return}catch{r.f^=Tp}r=r.parent}throw gp=!1,e}function kJ(e){return(e.f&tv)===0&&(e.parent===null||(e.parent.f&Tp)===0)}function av(e,t,r,n){if(gp){if(r===null&&(gp=!1),kJ(t))throw e;return}r!==null&&(gp=!0);{MJ(e,t);return}}function X4(e,t,r=!0){var n=e.reactions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];Zi!=null&&Zi.includes(e)||((s.f&Co)!==0?X4(s,t,!1):t===s&&(r?Ro(s,Ha):(s.f&ys)!==0&&Ro(s,dc),cv(s)))}}function Y4(e){var y;var t=Wi,r=Rs,n=Ys,i=nn,s=gu,o=Zi,a=Ir,u=sa,c=e.f;Wi=null,Rs=0,Ys=null,gu=(c&no)!==0&&(sa||!rc||nn===null),nn=(c&(ja|Ml))===0?e:null,Zi=null,fC(e.ctx),sa=!1,Op++,e.f|=HS;try{var f=(0,e.fn)(),h=e.deps;if(Wi!==null){var g;if(Mp(e,Rs),h!==null&&Rs>0)for(h.length=Rs+Wi.length,g=0;g<Wi.length;g++)h[Rs+g]=Wi[g];else e.deps=h=Wi;if(!gu)for(g=Rs;g<h.length;g++)((y=h[g]).reactions??(y.reactions=[])).push(e)}else h!==null&&Rs<h.length&&(Mp(e,Rs),h.length=Rs);if(xh()&&Ys!==null&&!sa&&h!==null&&(e.f&(Co|dc|Ha))===0)for(g=0;g<Ys.length;g++)X4(Ys[g],e);return i!==null&&(Op++,Ys!==null&&(n===null?n=Ys:n.push(...Ys))),f}finally{Wi=t,Rs=r,Ys=n,nn=i,gu=s,Zi=o,fC(a),sa=u,e.f^=HS}}function LJ(e,t){let r=t.reactions;if(r!==null){var n=jZ.call(r,e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}r===null&&(t.f&Co)!==0&&(Wi===null||!Wi.includes(t))&&(Ro(t,dc),(t.f&(no|Pp))===0&&(t.f^=Pp),q4(t),Mp(t,0))}function Mp(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)LJ(e,r[n])}function uv(e){var t=e.f;if((t&tv)===0){Ro(e,ys);var r=gn,n=Ir,i=rc;gn=e,rc=!0;try{(t&LE)!==0?CJ(e):z4(e),B4(e);var s=Y4(e);e.teardown=typeof s=="function"?s:null,e.wv=H4;var o=e.deps,a;cC&&aJ&&e.f&Ha}catch(u){av(u,e,r,n||e.ctx)}finally{rc=i,gn=r}}}function NJ(){try{rJ()}catch(e){if(Ip!==null)av(e,Ip,null);else throw e}}function K4(){var e=rc;try{var t=0;for(rc=!0;Hf.length>0;){t++>1e3&&NJ();var r=Hf,n=r.length;Hf=[];for(var i=0;i<n;i++){var s=DJ(r[i]);qJ(s)}}}finally{Rp=!1,rc=e,Ip=null,eh.clear()}}function qJ(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var n=e[r];if((n.f&(tv|za))===0)try{Dl(n)&&(uv(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?V4(n):n.fn=null))}catch(i){av(i,n,null,n.ctx)}}}function cv(e){Rp||(Rp=!0,queueMicrotask(K4));for(var t=Ip=e;t.parent!==null;){t=t.parent;var r=t.f;if((r&(Ml|ja))!==0){if((r&ys)===0)return;t.f^=ys}}Hf.push(t)}function DJ(e){for(var t=[],r=e;r!==null;){var n=r.f,i=(n&(ja|Ml))!==0,s=i&&(n&ys)!==0;if(!s&&(n&za)===0){if((n&S4)!==0)t.push(r);else if(i)r.f^=ys;else{var o=nn;try{nn=r,Dl(r)&&uv(r)}catch(c){av(c,r,null,r.ctx)}finally{nn=o}}var a=r.first;if(a!==null){r=a;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)r=u.next,u=u.parent}return t}function FJ(e){var t;for(pC();Hf.length>0;)Rp=!0,K4(),pC();return t}async function BJ(){await Promise.resolve(),FJ()}function C(e){var t=e.f,r=(t&Co)!==0;if(pu!==null&&pu.add(e),nn!==null&&!sa){if(!(Zi!=null&&Zi.includes(e))){var n=nn.deps;e.rv<Op&&(e.rv=Op,Wi===null&&n!==null&&n[Rs]===e?Rs++:Wi===null?Wi=[e]:(!gu||!Wi.includes(e))&&Wi.push(e))}}else if(r&&e.deps===null&&e.effects===null){var i=e,s=i.parent;s!==null&&(s.f&no)===0&&(i.f^=no)}return r&&(i=e,Dl(i)&&D4(i)),Sh&&eh.has(e)?eh.get(e):e.v}function zJ(e){var t=pu;pu=new Set;var r=pu,n;try{if(dn(e),t!==null)for(n of pu)t.add(n)}finally{pu=t}return r}function kye(e){var t=zJ(()=>dn(e));for(var r of t)if((r.f&E4)!==0)for(const n of r.deps||[])(n.f&Co)===0&&rh(n,n.v);else rh(r,r.v)}function dn(e){var t=sa;try{return sa=!0,e()}finally{sa=t}}const VJ=-7169;function Ro(e,t){e.f=e.f&VJ|t}function GJ(e,t){var r={};for(var n in e)t.includes(n)||(r[n]=e[n]);return r}function Gt(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ca in e)XS(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&ca in r&&XS(r)}}}function XS(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{XS(e[n],t)}catch{}const r=kE(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=x4(r);for(let i in n){const s=n[i].get;if(s)try{s.call(e)}catch{}}}}}function $J(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const UJ=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function jJ(e){return UJ.includes(e)}const HJ={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function WJ(e){return e=e.toLowerCase(),HJ[e]??e}const XJ=["touchstart","touchmove"];function YJ(e){return XJ.includes(e)}function Z4(e,t){if(t){const r=document.body;e.autofocus=!0,ov(()=>{document.activeElement===r&&e.focus()})}}let gC=!1;function KJ(){gC||(gC=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function J4(e){var t=nn,r=gn;ha(null),xu(null);try{return e()}finally{ha(t),xu(r)}}function Q4(e,t,r,n=r){e.addEventListener(t,()=>J4(r));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),KJ()}const e7=new Set,YS=new Set;function t7(e,t,r,n={}){function i(s){if(n.capture||Df.call(t,s),!s.cancelBubble)return J4(()=>r==null?void 0:r.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?ov(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function fr(e,t,r,n,i){var s={capture:n,passive:i},o=t7(e,t,r,s);(t===document.body||t===window||t===document)&&iv(()=>{t.removeEventListener(e,o,s)})}function Tu(e){for(var t=0;t<e.length;t++)e7.add(e[t]);for(var r of YS)r(e)}function Df(e){var E;var t=this,r=t.ownerDocument,n=e.type,i=((E=e.composedPath)==null?void 0:E.call(e))||[],s=i[0]||e.target,o=0,a=e.__root;if(a){var u=i.indexOf(a);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;u<=c&&(o=u)}if(s=i[o]||e.target,s!==t){w4(e,"currentTarget",{configurable:!0,get(){return s||r}});var f=nn,h=gn;ha(null),xu(null);try{for(var g,y=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var _=s["__"+n];if(_!=null&&(!s.disabled||e.target===s))if(wh(_)){var[x,...S]=_;x.apply(s,[e,...S])}else _.call(s,e)}catch(A){g?y.push(A):g=A}if(e.cancelBubble||m===t||m===null)break;s=m}if(g){for(let A of y)queueMicrotask(()=>{throw A});throw g}}finally{e.__root=t,delete e.currentTarget,ha(f),xu(h)}}}function r7(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function sh(e,t){var r=gn;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function Qt(e,t){var r=(t&I4)!==0,n=(t&gJ)!==0,i,s=!e.startsWith("<!>");return()=>{i===void 0&&(i=r7(s?e:"<!>"+e),r||(i=Na(i)));var o=n||k4?document.importNode(i,!0):i.cloneNode(!0);if(r){var a=Na(o),u=o.lastChild;sh(a,u)}else sh(o,o);return o}}function In(e,t,r="svg"){var n=!e.startsWith("<!>"),i=(t&I4)!==0,s=`<${r}>${n?e:"<!>"+e}</${r}>`,o;return()=>{if(!o){var a=r7(s),u=Na(a);if(i)for(o=document.createDocumentFragment();Na(u);)o.appendChild(Na(u));else o=Na(u)}var c=o.cloneNode(!0);if(i){var f=Na(c),h=c.lastChild;sh(f,h)}else sh(c,c);return c}}function gr(){var e=document.createDocumentFragment(),t=document.createComment(""),r=zE();return e.append(t,r),sh(t,r),e}function rt(e,t){e!==null&&e.before(t)}function Pu(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r+"")}function ZJ(e,t){return JJ(e,t)}const Zc=new Map;function JJ(e,{target:t,anchor:r,props:n={},events:i,context:s,intro:o=!0}){wJ();var a=new Set,u=h=>{for(var g=0;g<h.length;g++){var y=h[g];if(!a.has(y)){a.add(y);var m=YJ(y);t.addEventListener(y,Df,{passive:m});var _=Zc.get(y);_===void 0?(document.addEventListener(y,Df,{passive:m}),Zc.set(y,1)):Zc.set(y,_+1)}}};u(ME(e7)),YS.add(u);var c=void 0,f=PJ(()=>{var h=r??t.appendChild(zE());return Sl(()=>{if(s){xr({});var g=Ir;g.c=s}i&&(n.$$events=i),c=e(h,n)||{},s&&Sr()}),()=>{var m;for(var g of a){t.removeEventListener(g,Df);var y=Zc.get(g);--y===0?(document.removeEventListener(g,Df),Zc.delete(g)):Zc.set(g,y)}YS.delete(u),h!==r&&((m=h.parentNode)==null||m.removeChild(h))}});return QJ.set(c,f),c}let QJ=new WeakMap;function or(e,t,[r,n]=[0,0]){var i=e,s=null,o=null,a=cs,u=r>0?rv:0,c=!1;const f=(g,y=!0)=>{c=!0,h(y,g)},h=(g,y)=>{a!==(a=g)&&(a?(s?Cp(s):y&&(s=Sl(()=>y(i))),o&&nh(o,()=>{o=null})):(o?Cp(o):y&&(o=Sl(()=>y(i,[r+1,n]))),s&&nh(s,()=>{s=null})))};sv(()=>{c=!1,t(f),c||h(null,null)},u)}function mu(e,t){return t}function eQ(e,t,r,n){for(var i=[],s=t.length,o=0;o<s;o++)VE(t[o].e,i,!0);var a=s>0&&i.length===0&&r!==null;if(a){var u=r.parentNode;xJ(u),u.append(r),n.clear(),du(e,t[0].prev,t[s-1].next)}G4(i,()=>{for(var c=0;c<s;c++){var f=t[c];a||(n.delete(f.k),du(e,f.prev,f.next)),wu(f.e,!a)}})}function ds(e,t,r,n,i,s=null){var o=e,a={flags:t,items:new Map,first:null},u=(t&R4)!==0;if(u){var c=e;o=c.appendChild(zE())}var f=null,h=!1,g=hn(()=>{var y=r();return wh(y)?y:y==null?[]:ME(y)});sv(()=>{var y=C(g),m=y.length;h&&m===0||(h=m===0,tQ(y,a,o,i,t,n,r),s!==null&&(m===0?f?Cp(f):f=Sl(()=>s(o)):f!==null&&nh(f,()=>{f=null})),C(g))})}function tQ(e,t,r,n,i,s,o){var J,se,K,U;var a=(i&cJ)!==0,u=(i&(DE|FE))!==0,c=e.length,f=t.items,h=t.first,g=h,y,m=null,_,x=[],S=[],E,A,T,I;if(a)for(I=0;I<c;I+=1)E=e[I],A=s(E,I),T=f.get(A),T!==void 0&&((J=T.a)==null||J.measure(),(_??(_=new Set)).add(T));for(I=0;I<c;I+=1){if(E=e[I],A=s(E,I),T=f.get(A),T===void 0){var N=g?g.e.nodes_start:r;m=nQ(N,t,m,m===null?t.first:m.next,E,A,I,n,i,o),f.set(A,m),x=[],S=[],g=m.next;continue}if(u&&rQ(T,E,I,i),(T.e.f&za)!==0&&(Cp(T.e),a&&((se=T.a)==null||se.unfix(),(_??(_=new Set)).delete(T))),T!==g){if(y!==void 0&&y.has(T)){if(x.length<S.length){var p=S[0],P;m=p.prev;var O=x[0],q=x[x.length-1];for(P=0;P<x.length;P+=1)mC(x[P],p,r);for(P=0;P<S.length;P+=1)y.delete(S[P]);du(t,O.prev,q.next),du(t,m,O),du(t,q,p),g=p,m=q,I-=1,x=[],S=[]}else y.delete(T),mC(T,g,r),du(t,T.prev,T.next),du(t,T,m===null?t.first:m.next),du(t,m,T),m=T;continue}for(x=[],S=[];g!==null&&g.k!==A;)(g.e.f&za)===0&&(y??(y=new Set)).add(g),S.push(g),g=g.next;if(g===null)continue;T=g}x.push(T),m=T,g=T.next}if(g!==null||y!==void 0){for(var V=y===void 0?[]:ME(y);g!==null;)(g.e.f&za)===0&&V.push(g),g=g.next;var W=V.length;if(W>0){var G=(i&R4)!==0&&c===0?r:null;if(a){for(I=0;I<W;I+=1)(K=V[I].a)==null||K.measure();for(I=0;I<W;I+=1)(U=V[I].a)==null||U.fix()}eQ(t,V,G,f)}}a&&ov(()=>{var j;if(_!==void 0)for(T of _)(j=T.a)==null||j.apply()}),gn.first=t.first&&t.first.e,gn.last=m&&m.e}function rQ(e,t,r,n){(n&DE)!==0&&rh(e.v,t),(n&FE)!==0?rh(e.i,r):e.i=r}function nQ(e,t,r,n,i,s,o,a,u,c){var f=(u&DE)!==0,h=(u&lJ)===0,g=f?h?qe(i):th(i):i,y=(u&FE)===0?o:th(o),m={i:y,v:g,k:s,a:null,e:null,prev:r,next:n};try{return m.e=Sl(()=>a(e,g,y,c),bJ),m.e.prev=r&&r.e,m.e.next=n&&n.e,r===null?t.first=m:(r.next=m,r.e.next=m.e),n!==null&&(n.prev=m,n.e.prev=m.e),m}finally{}}function mC(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,s=e.e.nodes_start;s!==n;){var o=nv(s);i.before(s),s=o}}function du(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Xr(e,t,r,n,i){var a;var s=(a=t.$$slots)==null?void 0:a[r],o=!1;s===!0&&(s=t[r==="default"?"children":r],o=!0),s===void 0?i!==null&&i(e):s(e,o?()=>n:n)}function GE(e){const t={};e.children&&(t.default=!0);for(const r in e.$$slots)t[r]=!0;return t}function Ju(e,t,r){var n=e,i,s;sv(()=>{i!==(i=t())&&(s&&(nh(s),s=null),i&&(s=Sl(()=>r(n,i))))},rv)}function Zu(e,t,r){$a(()=>{var n=dn(()=>t(e,r==null?void 0:r())||{});if(r&&(n!=null&&n.update)){var i=!1,s={};ql(()=>{var o=r();Gt(o),i&&NE(s,o)&&(s=o,n.update(o))}),i=!0}if(n!=null&&n.destroy)return()=>n.destroy()})}function n7(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=n7(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function iQ(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=n7(e))&&(n&&(n+=" "),n+=t);return n}function $E(e){return typeof e=="object"?iQ(e):e??""}const yC=[...` 	
\r\f \v\uFEFF`];function sQ(e,t,r){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),r){for(var i in r)if(r[i])n=n?n+" "+i:i;else if(n.length)for(var s=i.length,o=0;(o=n.indexOf(i,o))>=0;){var a=o+s;(o===0||yC.includes(n[o-1]))&&(a===n.length||yC.includes(n[a]))?n=(o===0?"":n.substring(0,o))+n.substring(a+1):o=a}}return n===""?null:n}function _C(e,t=!1){var r=t?" !important;":";",n="";for(var i in e){var s=e[i];s!=null&&s!==""&&(n+=" "+i+": "+s+r)}return n}function Pm(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function oQ(e,t){if(t){var r="",n,i;if(Array.isArray(t)?(n=t[0],i=t[1]):n=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,o=0,a=!1,u=[];n&&u.push(...Object.keys(n).map(Pm)),i&&u.push(...Object.keys(i).map(Pm));var c=0,f=-1;const _=e.length;for(var h=0;h<_;h++){var g=e[h];if(a?g==="/"&&e[h-1]==="*"&&(a=!1):s?s===g&&(s=!1):g==="/"&&e[h+1]==="*"?a=!0:g==='"'||g==="'"?s=g:g==="("?o++:g===")"&&o--,!a&&s===!1&&o===0){if(g===":"&&f===-1)f=h;else if(g===";"||h===_-1){if(f!==-1){var y=Pm(e.substring(c,f).trim());if(!u.includes(y)){g!==";"&&h++;var m=e.substring(c,h).trim();r+=" "+m+";"}}c=h+1,f=-1}}}}return n&&(r+=_C(n)),i&&(r+=_C(i,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function Rn(e,t,r,n,i,s){var o=e.__className;if(o!==r||o===void 0){var a=sQ(r,n,s);a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a),e.__className=r}else if(s&&i!==s)for(var u in s){var c=!!s[u];(i==null||c!==!!i[u])&&e.classList.toggle(u,c)}return s}function Cm(e,t={},r,n){for(var i in r){var s=r[i];t[i]!==s&&(r[i]==null?e.style.removeProperty(i):e.style.setProperty(i,s,n))}}function kr(e,t,r,n){var i=e.__style;if(i!==t){var s=oQ(t,n);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}else n&&(Array.isArray(n)?(Cm(e,r==null?void 0:r[0],n[0]),Cm(e,r==null?void 0:r[1],n[1],"important")):Cm(e,r,n));return n}const Cf=Symbol("class"),Rf=Symbol("style"),i7=Symbol("is custom element"),s7=Symbol("is html");function aQ(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function pt(e,t,r,n){var i=o7(e);i[t]!==(i[t]=r)&&(t==="loading"&&(e[JZ]=r),r==null?e.removeAttribute(t):typeof r!="string"&&a7(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Lo(e,t,r,n,i=!1){var s=o7(e),o=s[i7],a=!s[s7],u=t||{},c=e.tagName==="OPTION";for(var f in t)f in r||(r[f]=null);r.class?r.class=$E(r.class):r[Cf]&&(r.class=null),r[Rf]&&(r.style??(r.style=null));var h=a7(e);for(const E in r){let A=r[E];if(c&&E==="value"&&A==null){e.value=e.__value="",u[E]=A;continue}if(E==="class"){var g=e.namespaceURI==="http://www.w3.org/1999/xhtml";Rn(e,g,A,n,t==null?void 0:t[Cf],r[Cf]),u[E]=A,u[Cf]=r[Cf];continue}if(E==="style"){kr(e,A,t==null?void 0:t[Rf],r[Rf]),u[E]=A,u[Rf]=r[Rf];continue}var y=u[E];if(A!==y){u[E]=A;var m=E[0]+E[1];if(m!=="$$")if(m==="on"){const T={},I="$$"+E;let N=E.slice(2);var _=jJ(N);if($J(N)&&(N=N.slice(0,-7),T.capture=!0),!_&&y){if(A!=null)continue;e.removeEventListener(N,u[I],T),u[I]=null}if(A!=null)if(_)e[`__${N}`]=A,Tu([N]);else{let p=function(P){u[E].call(this,P)};u[I]=t7(N,e,p,T)}else _&&(e[`__${N}`]=void 0)}else if(E==="style")pt(e,E,A);else if(E==="autofocus")Z4(e,!!A);else if(!o&&(E==="__value"||E==="value"&&A!=null))e.value=e.__value=A;else if(E==="selected"&&c)aQ(e,A);else{var x=E;a||(x=WJ(x));var S=x==="defaultValue"||x==="defaultChecked";if(A==null&&!o&&!S)if(s[E]=null,x==="value"||x==="checked"){let T=e;const I=t===void 0;if(x==="value"){let N=T.defaultValue;T.removeAttribute(x),T.defaultValue=N,T.value=T.__value=I?N:null}else{let N=T.defaultChecked;T.removeAttribute(x),T.defaultChecked=N,T.checked=I?N:!1}}else e.removeAttribute(E);else S||h.includes(x)&&(o||typeof A!="string")?e[x]=A:typeof A!="function"&&pt(e,x,A)}}}return u}function o7(e){return e.__attributes??(e.__attributes={[i7]:e.nodeName.includes("-"),[s7]:e.namespaceURI===mJ})}var bC=new Map;function a7(e){var t=bC.get(e.nodeName);if(t)return t;bC.set(e.nodeName,t=[]);for(var r,n=e,i=Element.prototype;i!==n;){r=x4(n);for(var s in r)r[s].set&&t.push(s);n=kE(n)}return t}function u7(e,t,r=t){var n=xh();Q4(e,"input",i=>{var s=i?e.defaultValue:e.value;if(s=Rm(e)?Im(s):s,r(s),n&&s!==(s=t())){var o=e.selectionStart,a=e.selectionEnd;e.value=s??"",a!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(a,e.value.length))}}),dn(t)==null&&e.value&&r(Rm(e)?Im(e.value):e.value),ql(()=>{var i=t();Rm(e)&&i===Im(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Rm(e){var t=e.type;return t==="number"||t==="range"}function Im(e){return e===""?null:+e}function UE(e,t,r){var n=Ba(e,t);n&&n.set&&(e[t]=r,iv(()=>{e[t]=null}))}function c7(e,t,r){if(e.multiple)return cQ(e,t);for(var n of e.options){var i=Wf(n);if(_J(i,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function uQ(e,t){$a(()=>{var r=new MutationObserver(()=>{var n=e.__value;c7(e,n)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function wC(e,t,r=t){var n=!0;Q4(e,"change",i=>{var s=i?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(s),Wf);else{var a=e.querySelector(s)??e.querySelector("option:not([disabled])");o=a&&Wf(a)}r(o)}),$a(()=>{var i=t();if(c7(e,i,n),n&&i===void 0){var s=e.querySelector(":checked");s!==null&&(i=Wf(s),r(i))}e.__value=i,n=!1}),uQ(e)}function cQ(e,t){for(var r of e.options)r.selected=~t.indexOf(Wf(r))}function Wf(e){return"__value"in e?e.__value:e.value}var vu,bl,bh,Jp,l7;const Qp=class Qp{constructor(t){Tf(this,Jp);Tf(this,vu,new WeakMap);Tf(this,bl);Tf(this,bh);Tm(this,bh,t)}observe(t,r){var n=Ma(this,vu).get(t)||new Set;return n.add(r),Ma(this,vu).set(t,n),uC(this,Jp,l7).call(this).observe(t,Ma(this,bh)),()=>{var i=Ma(this,vu).get(t);i.delete(r),i.size===0&&(Ma(this,vu).delete(t),Ma(this,bl).unobserve(t))}}};vu=new WeakMap,bl=new WeakMap,bh=new WeakMap,Jp=new WeakSet,l7=function(){return Ma(this,bl)??Tm(this,bl,new ResizeObserver(t=>{for(var r of t){Qp.entries.set(r.target,r);for(var n of Ma(this,vu).get(r.target)||[])n(r)}}))},aC(Qp,"entries",new WeakMap);let KS=Qp;var lQ=new KS({box:"border-box"});function xC(e,t,r){var n=lQ.observe(e,()=>r(e[t]));$a(()=>(dn(()=>r(e[t])),n))}function SC(e,t){return e===t||(e==null?void 0:e[ca])===t}function Su(e={},t,r,n){return $a(()=>{var i,s;return ql(()=>{i=s,s=[],dn(()=>{e!==r(...s)&&(t(e,...s),i&&SC(r(...i),e)&&t(null,...i))})}),()=>{ov(()=>{s&&SC(r(...s),e)&&t(null,...s)})}}),e}function Xf(e){return function(...t){var r=t[0];r.target===this&&(e==null||e.apply(this,t))}}function ro(e){return function(...t){var r=t[0];return r.stopPropagation(),e==null?void 0:e.apply(this,t)}}function Ms(e){return function(...t){var r=t[0];return r.preventDefault(),e==null?void 0:e.apply(this,t)}}function Dn(e=!1){const t=Ir,r=t.l.u;if(!r)return;let n=()=>Gt(t.s);if(e){let i=0,s={};const o=wl(()=>{let a=!1;const u=t.s;for(const c in u)u[c]!==s[c]&&(s[c]=u[c],a=!0);return a&&i++,i});n=()=>C(o)}r.b.length&&TJ(()=>{EC(t,n),Qf(r.b)}),xl(()=>{const i=dn(()=>r.m.map(XZ));return()=>{for(const s of i)typeof s=="function"&&s()}}),r.a.length&&xl(()=>{EC(t,n),Qf(r.a)})}function EC(e,t){if(e.l.s)for(const r of e.l.s)C(r);t()}function Cn(e,t){var s;var r=(s=e.$$events)==null?void 0:s[t.type],n=wh(r)?r.slice():r==null?[]:[r];for(var i of n)i.call(this,t)}function jE(e,t,r){if(e==null)return t(void 0),r&&r(void 0),ks;const n=dn(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const Jc=[];function Va(e,t){return{subscribe:Ke(e,t).subscribe}}function Ke(e,t=ks){let r=null;const n=new Set;function i(a){if(NE(e,a)&&(e=a,r)){const u=!Jc.length;for(const c of n)c[1](),Jc.push(c,e);if(u){for(let c=0;c<Jc.length;c+=2)Jc[c][0](Jc[c+1]);Jc.length=0}}}function s(a){i(a(e))}function o(a,u=ks){const c=[a,u];return n.add(c),n.size===1&&(r=t(i,s)||ks),a(e),()=>{n.delete(c),n.size===0&&r&&(r(),r=null)}}return{set:i,update:s,subscribe:o}}function dl(e,t,r){const n=!Array.isArray(e),i=n?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=t.length<2;return Va(r,(o,a)=>{let u=!1;const c=[];let f=0,h=ks;const g=()=>{if(f)return;h();const m=t(n?c[0]:c,o,a);s?o(m):h=typeof m=="function"?m:ks},y=i.map((m,_)=>jE(m,x=>{c[_]=x,f&=~(1<<_),u&&g()},()=>{f|=1<<_}));return u=!0,g(),function(){Qf(y),h(),u=!1}})}function lt(e){let t;return jE(e,r=>t=r)(),t}let Hd=!1,ZS=Symbol();function He(e,t,r){const n=r[t]??(r[t]={store:null,source:qe(void 0),unsubscribe:ks});if(n.store!==e&&!(ZS in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=ks;else{var i=!0;n.unsubscribe=jE(e,s=>{i?n.source.v=s:me(n.source,s)}),i=!1}return e&&ZS in r?lt(e):C(n.source)}function qa(e,t,r){let n=r[t];return n&&n.store!==e&&(n.unsubscribe(),n.unsubscribe=ks),e}function Ot(e,t){return e.set(t),t}function $n(){const e={};function t(){iv(()=>{for(var r in e)e[r].unsubscribe();w4(e,ZS,{enumerable:!1,value:!0})})}return[e,t]}function nc(e,t,r){return e.set(r),t}function fQ(e,t,r=1){return e.set(t+r),t}function hQ(e,t,r=1){const n=t+r;return e.set(n),n}function dQ(e){var t=Hd;try{return Hd=!1,[e(),Hd]}finally{Hd=t}}const pQ={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function No(e,t,r){return new Proxy({props:e,exclude:t},pQ)}const vQ={get(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(Pf(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n)return n[t]}},set(e,t,r){let n=e.props.length;for(;n--;){let i=e.props[n];Pf(i)&&(i=i());const s=Ba(i,t);if(s&&s.set)return s.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(Pf(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n){const i=Ba(n,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===ca||t===T4)return!1;for(let r of e.props)if(Pf(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props){Pf(r)&&(r=r());for(const n in r)t.includes(n)||t.push(n)}return t}};function lv(...e){return new Proxy({props:e},vQ)}function AC(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function ge(e,t,r,n){var p;var i=(r&fJ)!==0,s=!kl||(r&hJ)!==0,o=(r&pJ)!==0,a=(r&vJ)!==0,u=!1,c;o?[c,u]=dQ(()=>e[t]):c=e[t];var f=ca in e||T4 in e,h=o&&(((p=Ba(e,t))==null?void 0:p.set)??(f&&t in e&&(P=>e[t]=P)))||void 0,g=n,y=!0,m=!1,_=()=>(m=!0,y&&(y=!1,a?g=dn(n):g=n),g);c===void 0&&n!==void 0&&(h&&s&&nJ(),c=_(),h&&h(c));var x;if(s)x=()=>{var P=e[t];return P===void 0?_():(y=!0,m=!1,P)};else{var S=(i?wl:hn)(()=>e[t]);S.f|=E4,x=()=>{var P=C(S);return P!==void 0&&(g=void 0),P===void 0?g:P}}if((r&dJ)===0)return x;if(h){var E=e.$$legacy;return function(P,O){return arguments.length>0?((!s||!O||E||u)&&h(O?x():P),P):x()}}var A=!1,T=!1,I=qe(c),N=wl(()=>{var P=x(),O=C(I);return A?(A=!1,T=!0,O):(T=!1,I.v=P)});return o&&C(N),i||(N.equals=qE),function(P,O){if(pu!==null&&(A=T,x(),C(I)),arguments.length>0){const q=O?C(N):s&&o?xo(P):P;if(!N.equals(q)){if(A=!0,me(I,q),m&&g!==void 0&&(g=q),AC(N))return P;dn(()=>C(N))}return P}return AC(N)?N.v:C(N)}}function Pi(e){Ir===null&&Ll(),kl&&Ir.l!==null?HE(Ir).m.push(e):xl(()=>{const t=dn(e);if(typeof t=="function")return t})}function Eh(e){Ir===null&&Ll(),Pi(()=>()=>dn(e))}function gQ(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function El(){const e=Ir;return e===null&&Ll(),(t,r,n)=>{var s;const i=(s=e.s.$$events)==null?void 0:s[t];if(i){const o=wh(i)?i.slice():[i],a=gQ(t,r,n);for(const u of o)u.call(e.x,a);return!a.defaultPrevented}return!0}}function mQ(e){Ir===null&&Ll(),Ir.l===null&&C4(),HE(Ir).b.push(e)}function f7(e){Ir===null&&Ll(),Ir.l===null&&C4(),HE(Ir).a.push(e)}function HE(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const yQ="5";var b4;typeof window<"u"&&((b4=window.__svelte??(window.__svelte={})).v??(b4.v=new Set)).add(yQ);uJ();function _Q(e){return Object.keys(e).reduce((t,r)=>e[r]===void 0?t:t+`${r}:${e[r]};`,"")}_Q({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function TC(e){function t(r){return r(e),()=>{}}return{subscribe:t}}const Wd=e=>new Proxy(e,{get(t,r,n){return Reflect.get(t,r,n)},ownKeys(t){return Reflect.ownKeys(t).filter(r=>r!=="action")}}),PC=e=>typeof e=="function";bQ("empty");function bQ(e,t){const{stores:r,action:n,returned:i}={},s=(()=>{if(r&&i)return dl(r,a=>{const u=i(a);if(PC(u)){const c=(...f)=>Wd({...u(...f),[`data-melt-${e}`]:"",action:n??Qc});return c.action=n??Qc,c}return Wd({...u,[`data-melt-${e}`]:"",action:n??Qc})});{const a=i,u=a==null?void 0:a();if(PC(u)){const c=(...f)=>Wd({...u(...f),[`data-melt-${e}`]:"",action:n??Qc});return c.action=n??Qc,TC(c)}return TC(Wd({...u,[`data-melt-${e}`]:"",action:n??Qc}))}})(),o=n??(()=>{});return o.subscribe=s.subscribe,o}function Qc(){}function h7(e,t,r,n){const i=Array.isArray(t)?t:[t];return i.forEach(s=>e.addEventListener(s,r,n)),()=>{i.forEach(s=>e.removeEventListener(s,r,n))}}function wQ(e,...t){const r={};for(const n of Object.keys(e))t.includes(n)||(r[n]=e[n]);return r}const xQ={ESCAPE:"Escape"};Va(void 0,e=>{function t(n){e(n),e(void 0)}return h7(document,"pointerup",t,{passive:!1,capture:!0})});Va(void 0,e=>{function t(n){n&&n.key===xQ.ESCAPE&&e(n),e(void 0)}return h7(document,"keydown",t,{passive:!1})});Va(!1),Va(!1),Va(void 0);const SQ={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...wQ(SQ,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});const EQ=""+new URL("And-vPRNnjli.webp",import.meta.url).href,AQ=""+new URL("Buffer-B3Uvsw-c.webp",import.meta.url).href,TQ=""+new URL("Or-D6Cm5Ena.webp",import.meta.url).href,PQ=""+new URL("Nor-CgPoSiw3.webp",import.meta.url).href,CQ=""+new URL("Xor-FwkKBC7T.webp",import.meta.url).href,RQ=""+new URL("Xnor-D92Hxo_S.webp",import.meta.url).href,IQ=""+new URL("Nand-CeX_LhnV.webp",import.meta.url).href,OQ=""+new URL("Not-CKmu_FXd.webp",import.meta.url).href,MQ=""+new URL("outputIcon-C9FYfgf8.png",import.meta.url).href,kQ=""+new URL("inputIcon-6hipRhQs.png",import.meta.url).href;function LQ(e,t){return{type:"Lamp",net:e,inputs:(t==null?void 0:t.inputs)||1,outputs:(t==null?void 0:t.outputs)||0,order:(t==null?void 0:t.order)||0,bits:(t==null?void 0:t.bits)||1,label:(t==null?void 0:t.label)||e,...(t==null?void 0:t.position)&&{position:{x:t.position.x,y:t.position.y}}}}function NQ(e,t){return{type:"Button",label:(t==null?void 0:t.label)||e,net:(t==null?void 0:t.net)||e,bits:(t==null?void 0:t.bits)||1,...(t==null?void 0:t.position)&&{position:{x:t.position.x,y:t.position.y}}}}function uu(e,t,r){return{type:e,label:t,inputs:2,...(r==null?void 0:r.position)&&{position:{x:r.position.x,y:r.position.y}}}}const CC={Button:NQ,Lamp:LQ,And:(e,t)=>uu("And",e,...t?[t]:[]),Nand:(e,t)=>uu("Nand",e,...t?[t]:[]),Or:(e,t)=>uu("Or",e,...t?[t]:[]),Nor:(e,t)=>uu("Nor",e,...t?[t]:[]),Xor:(e,t)=>uu("Xor",e,...t?[t]:[]),Xnor:(e,t)=>uu("Xnor",e,...t?[t]:[]),Not:(e,t)=>uu("Not",e,...t?[t]:[]),Repeater:(e,t)=>uu("Repeater",e,...t?[t]:[])},qQ=()=>{const e={devices:{},connectors:{},subcircuits:{}},{subscribe:t,set:r,update:n}=Ke(e);return{subscribe:t,set:r,update:n,reset:()=>n(()=>({devices:{},connectors:{},subcircuits:{}})),addConnection:(i,s)=>{const o=s.substring(s.indexOf("_")+1);n(a=>(i in a.connectors||(a.connectors[i]=new Array),a.connectors[i]=[...a.connectors[i],[o,s]],console.log(a.connectors),a))},removeConnection:i=>{n(s=>{const o={};for(const a in s.connectors)o[a]=[...s.connectors[a].filter(([,u])=>u!==i)];return s.connectors=o,s})},addCircuitDevice:(i,s,o)=>{const a=`${i}_${s}`;let u=null;if(n(c=>{const f=o===void 0?CC[i](a):CC[i](a,o);return c.devices[a]=f,u=c.devices,c}),u===null)throw new Error("devices null after setting devices");return u}}},Ti=qQ();function DQ(e){const t=JSON.parse(e);return t.nodes.length===0?(console.warn("save json exists but there are no nodes"),null):t.nodes.map(n=>{let[i,s]=n.id.substring(2).split("_");return{nodeType:i,uuid:s,position:n.position}})}function fv(e){return localStorage.getItem(e)||(console.warn(`No saved "${e}" found in localStorage.`),null)}function FQ(){const t=fv("state");if(!t)return console.warn("svelvet save unsucessful"),null;const r=DQ(t);if(r===null)return null;Ti.update(n=>(r.forEach(({nodeType:i,uuid:s,position:o})=>{const a=`${i}_${s}`;n.devices[a].position=o}),n))}function BQ(){fv("circuitStoreSave"),localStorage.setItem("circuitStoreSave",JSON.stringify(lt(Ti)))}function zQ(){const e=document.querySelector(".save-button"),t=new MouseEvent("click",{bubbles:!0,cancelable:!0});e==null||e.dispatchEvent(t)}async function oh(){zQ(),FQ(),BQ()}function VQ(e){if(!(e!=null&&e.devices)||!(e!=null&&e.connectors)||!(e!=null&&e.subcircuits)){let t="";throw e!=null&&e.devices||(t+="[Devices]"),e!=null&&e.devices||(t+="[Connectors]"),e!=null&&e.devices||(t+="[Subciruits]"),new Error("Parsed circuit object is missing required properties "+t)}else Object.keys(e.devices).length===0&&console.log("Loaded in a valid circuit with empty devices")}function kp(e="default"){let t=e==="default"?fv("circuitStoreSave"):e;if(!t)return;const r=JSON.parse(t);VQ(r),Ti.set(r)}function GQ(){oh();const e=localStorage.getItem("circuitStoreSave");e?e==='{"devices":{},"connectors":[],"subcircuits":{}}'?console.warn("EMPTY on delete, do not set prevCircuitStore just empty stores."):localStorage.setItem("prevCircuitStore",e):console.warn("we saved before deleting so this should not be possible"),localStorage.removeItem("circuitStoreSave")}function $Q(e){oh();const t=fv("circuitStoreSave");if(!t)return console.log("Tried to load empty circuit"),null;const r=JSON.parse(t),n=JSON.stringify(r,null,2),i=new Blob([n],{type:"application/json"}),s=URL.createObjectURL(i);e===""&&(e="Circuit");const o=document.createElement("a");o.href=s,o.download=e+".json",o.click(),URL.revokeObjectURL(s),o.remove()}async function UQ(){return new Promise(e=>{const t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","application/JSON"),t.click(),t.addEventListener("change",async()=>{await jQ(t),e()}),t.remove()})}async function jQ(e){var n;const t=(n=e.files)==null?void 0:n[0];if(!t)return;const r=await new Promise((i,s)=>{const o=new FileReader;o.onload=a=>{var c;const u=(c=a.target)==null?void 0:c.result;i(u)},o.onerror=a=>{s(new Error("Error reading file"))},o.readAsText(t)});console.log(r),kp(r)}const HQ="modulepreload",WQ=function(e,t){return new URL(e,t).href},RC={},If=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=WQ(c,n),c in RC)return;RC[c]=!0;const f=c.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(!!n)for(let m=o.length-1;m>=0;m--){const _=o[m];if(_.href===c&&(!f||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":HQ,f||(y.as="script"),y.crossOrigin="",y.href=c,u&&y.setAttribute("nonce",u),document.head.appendChild(y),f)return new Promise((m,_)=>{y.addEventListener("load",m),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};function XQ(e,t){const r=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.sqrt(r*r+n*n)}function YQ(){const e=()=>Math.floor(Math.random()*256),t=e(),r=e(),n=e();return`rgb(${t},${r},${n})`}const KQ={"(":"round","[":"square","([":"stadium","[[":"subroutine","[(":"cylindrical","((":"circle","{":"rhombus","{{":"hexagon"},IC={"-":"straight","~":"bezier"},d7={"(":")","[":"]","{":"}"},ZQ=/[-=~]*>(?:\s*\|(.+?)\|)?/g,JQ=e=>{const t=e.split(`
`),r={parentNodes:[],nodeList:{}};for(const n of t){const{parentNodes:i,childNodes:s,edge:o}=QQ(n);for(const a of i){r.nodeList[a.id]||r.parentNodes.push(a);for(const u of s){if(r.nodeList[a.id]){if(r.nodeList[u.id]&&r.nodeList[u.id].children.some(({node:c})=>c.id===a.id))throw new Error("Circular reference detected");r.nodeList[a.id].children.push({node:r.nodeList[u.id]||u,...o})}else a.children.push({node:r.nodeList[u.id]||u,...o}),r.nodeList[a.id]=a;r.nodeList[u.id]?r.nodeList[u.id].parents.push({node:r.nodeList[a.id]||a}):(u.parents.push({node:r.nodeList[a.id]||a}),r.nodeList[u.id]=u),r.parentNodes=r.parentNodes.filter(c=>c.id!==u.id)}}}return r},QQ=e=>{const t=[],r=[],n=e.trim();let i="";const s=n.match(ZQ);if(s)i=s[0];else throw new Error("Invalid edge");const[o,a]=n.split(i);for(const c of o.split("&"))t.push(OC(c));for(const c of a.split("&"))r.push(OC(c));const u=eee(i);return{parentNodes:t,childNodes:r,edge:u}},OC=e=>{e=e.trim();const t=e[0],r=e.slice(1);let n="",i="";const s="Default",o={shape:""},a=[];for(let u=0;u<r.length;u++)if(tee(r[u]))a.push(r[u]);else if(d7[a[a.length-1]]===r[u]){i=KQ[a.join("")];break}else n+=r[u];return o.shape=i,o.content=n,{id:t,data:o,type:s,children:[],parents:[],depth:0,nesting:0}},eee=e=>{e=e.trim();let t="";const[r,n]=e.split("|"),i=r[0];if(i in IC)t=IC[i];else throw new Error("Not a valid edge type");return n?{shape:t,content:n.trim(),length:Math.floor((r.trim().length-1)/2)}:{shape:t,length:Math.floor((r.trim().length-1)/2)}};function tee(e){return e in d7}function ree(){return Math.random().toString(36).substring(7)}function nee(e,t){const r=Math.sign(e.x).toString(),n=Math.sign(e.y).toString(),i=Math.sign(t.x).toString(),s=Math.sign(t.y).toString();return`${r}${n}${i}${s}`}function iee(e,t){return{1001:`a ${e} ${e} 0 0 1 ${e} ${e}`,"0110":`a ${e} ${e} 0 0 0 ${e} ${e}`,"100-1":`a ${e} ${e} 0 0 0 ${e} -${e}`,"0-110":`a ${e} ${e} 0 0 1 ${e} -${e}`,"-1001":`a ${e} ${e} 0 0 0 -${e} ${e}`,"01-10":`a ${e} ${e} 0 0 1 -${e} ${e}`,"-100-1":`a ${e} ${e} 0 0 1 -${e} -${e}`,"0-1-10":`a ${e} ${e} 0 0 0 -${e} -${e}`}[t]||""}function MC(e,t){const r=t*(Math.PI/180),n=e.x*Math.cos(r)-e.y*Math.sin(r),i=e.x*Math.sin(r)+e.y*Math.cos(r);return{x:n,y:i}}const kC=(e,t,r,n)=>e+` l ${t} ${r} `+n,hs=Ke({x:0,y:0}),JS=Ke(0),io=Ke(!1),QS=Ke(!1),p7=Va({x:0,y:0},e=>{const t=s=>{e({x:s.clientX,y:s.clientY})},r=s=>{if(s.touches.length===2){const o=XQ(s.touches[0],s.touches[1]);JS.set(o);const a={x:s.touches[0].clientX,y:s.touches[0].clientY};e(a)}else if(s.touches.length===1){const o=s.touches[0].clientX,a=s.touches[0].clientY;e({x:o,y:a}),io.set(!0)}},n=s=>{r(s),window.addEventListener("touchend",i),window.addEventListener("touchmove",r)},i=()=>{io.set(!1),JS.set(0),window.removeEventListener("touchmove",r)};return document.addEventListener("mousemove",t),window.addEventListener("touchstart",n,!0),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("touchstart",n),window.removeEventListener("touchmove",r),window.removeEventListener("touchend",i)}});var see=Qt("<div><div></div></div>");function oee(e,t){xr(t,!1);const[r,n]=$n(),i=()=>He(I,"$groups",r),s=()=>He(p7,"$cursorPositionRaw",r),o=()=>He(C(a),"$selectedNodes",r),a=qe(),u=qe(),c=qe(),f=qe(),h=qe(),g=qe(),y=qe(),m=qe(),_=qe();let x=ge(t,"graph",8),S=ge(t,"anchor",8),E=ge(t,"adding",8,!1),A=ge(t,"creating",8,!1),T=ge(t,"color",8,null);const{groups:I}=x();let N,p=qe();Pi(P);function P(){N=Array.from(document.querySelectorAll(".svelvet-node")).map(K=>{const{top:U,left:j,width:Q,height:de}=K.getBoundingClientRect();return{id:K.id,top:U,left:j,width:Q,height:de}})}function O(){if(!N)return;const se=N.reduce((K,U)=>{if(C(h)+S().left<=U.left&&C(f)+S().top<=U.top&&C(h)+S().left+Math.abs(C(c))>=U.left+U.width&&C(f)+S().top+Math.abs(C(u))>=U.top+U.height){const j=U.id,Q=x().nodes.get(j);if(!Q)return K;K.push(Q)}return K},[]);E()?se.forEach(K=>{o().add(K)}):Ot(C(a),new Set(se)),Ot(C(a),o())}Fe(()=>i(),()=>{qa(me(a,i().selected.nodes),"$selectedNodes",r)}),Fe(()=>(s(),Gt(S())),()=>{me(u,s().y-S().y-S().top)}),Fe(()=>(s(),Gt(S())),()=>{me(c,s().x-S().x-S().left)}),Fe(()=>(Gt(S()),C(u)),()=>{me(f,Math.min(S().y,S().y+C(u)))}),Fe(()=>(Gt(S()),C(c)),()=>{me(h,Math.min(S().x,S().x+C(c)))}),Fe(()=>C(f),()=>{me(g,`${C(f)}px`)}),Fe(()=>C(h),()=>{me(y,`${C(h)}px`)}),Fe(()=>C(u),()=>{me(m,`${Math.abs(C(u))}px`)}),Fe(()=>C(c),()=>{me(_,`${Math.abs(C(c))}px`)}),Fe(()=>(C(c),C(u)),()=>{(C(c)||C(u))&&O()}),Qi(),Dn();var q=see();let V,W;var G=qt(q);let J;Su(G,se=>me(p,se),()=>C(p)),Ut((se,K)=>{V=Rn(q,1,"selection-border svelte-10ds4jd",null,V,se),W=kr(q,"",W,{"--prop-selection-box-color":T(),height:C(m),width:C(_),top:C(g),left:C(y)}),J=Rn(G,1,"selection-box svelte-10ds4jd",null,J,K)},[()=>({creating:A()}),()=>({creating:A()})],hn),rt(e,q),Sr(),n()}const aee=3,uee=.1,cee=10,lee=100,fee=50,hee="#000",dee="#fff",pee="12px",vee=22,gee=1.4,mee=40,Ff={north:{x:0,y:-1},south:{x:0,y:1},east:{x:1,y:0},west:{x:-1,y:0},self:{x:0,y:0}};var yee=In('<circle class="background-dot svelte-rryw83"></circle>'),_ee=In('<line class="background-line svelte-rryw83"></line><line class="background-line svelte-rryw83"></line>',1),bee=In('<circle class="background-dot svelte-rryw83"></circle>'),wee=In('<line class="background-line svelte-rryw83"></line><line class="background-line svelte-rryw83"></line>',1),xee=In('<pattern id="graph-coarse-pattern" patternUnits="userSpaceOnUse"><!></pattern>'),See=In('<rect width="100%" height="100%" fill="url(#graph-coarse-pattern)"></rect>'),Eee=Qt('<div id="background-wrapper" class="svelte-rryw83"><svg class="svelte-rryw83"><defs><pattern id="graph-pattern" patternUnits="userSpaceOnUse"><!></pattern><!></defs><rect width="100%" height="100%" fill="url(#graph-pattern)"></rect><!></svg></div>');function Aee(e,t){xr(t,!1);const[r,n]=$n(),i=()=>He(N,"$translationStore",r),s=()=>He(I,"$scaleStore",r),o=qe(),a=qe(),u=qe(),c=qe(),f=qe(),h=Rr("graph");let g=ge(t,"style",8,"dots"),y=ge(t,"gridWidth",8,vee),m=ge(t,"dotSize",8,gee),_=ge(t,"bgColor",8,null),x=ge(t,"dotColor",8,null),S=ge(t,"opacityThreshold",8,3),E=ge(t,"majorGrid",8,0),A=ge(t,"minOpacity",8,.4);const T=h.transforms,I=T.scale,N=T.translation;let p=qe(),P=qe(),O=qe(),q=qe(),V=qe(),W=qe(1),G=qe(1);Fe(()=>i(),()=>{me(o,i())}),Fe(()=>s(),()=>{me(a,s())}),Fe(()=>(C(a),Gt(y())),()=>{me(u,C(a)*y())}),Fe(()=>(C(a),Gt(m())),()=>{me(c,C(a)*m()/2)}),Fe(()=>C(u),()=>{me(f,C(u)/2)}),Fe(()=>(C(P),C(p),C(O),C(c),C(a),C(o),Gt(S()),Gt(A())),()=>{var te,le;me(P,((te=C(p))==null?void 0:te.offsetWidth)||0),me(O,((le=C(p))==null?void 0:le.offsetHeight)||0),me(q,(C(P)+C(c))*(1-C(a))/2+C(o).x),me(V,(C(O)+C(c))*(1-C(a))/2+C(o).y),me(W,C(a)>S()?1:C(a)/S()+A()),me(G,C(a)>S()/3?1:C(a)/(S()/3)+A())}),Qi(),Dn();var J=Eee();let se;var K=qt(J),U=qt(K),j=qt(U),Q=qt(j);{var de=te=>{var le=yee();let Xe;Ut(()=>{pt(le,"r",C(c)),pt(le,"cx",C(f)),pt(le,"cy",C(f)),Xe=kr(le,"",Xe,{"--calculated-dot-color":x()})}),rt(te,le)},ce=(te,le)=>{{var Xe=Ne=>{var Re=_ee(),nt=$t(Re);pt(nt,"y1",0);let Ve;var L=gt(nt);pt(L,"x1",0);let B;Ut(()=>{pt(nt,"x1",C(f)),pt(nt,"x2",C(f)),pt(nt,"y2",C(u)),pt(nt,"stroke-width",C(c)),Ve=kr(nt,"",Ve,{"--calculated-dot-color":x()}),pt(L,"y1",C(f)),pt(L,"y2",C(f)),pt(L,"x2",C(u)),pt(L,"stroke-width",C(c)),B=kr(L,"",B,{"--calculated-dot-color":x()})}),rt(Ne,Re)};or(te,Ne=>{g()==="lines"&&Ne(Xe)},le)}};or(Q,te=>{g()==="dots"?te(de):te(ce,!1)})}var Te=gt(j);{var Se=te=>{var le=xee(),Xe=qt(le);{var Ne=nt=>{var Ve=bee();let L;Ut(()=>{pt(Ve,"r",C(c)*2),pt(Ve,"cx",C(f)),pt(Ve,"cy",C(f)),L=kr(Ve,"",L,{"--calculated-dot-color":x()})}),rt(nt,Ve)},Re=(nt,Ve)=>{{var L=B=>{var H=wee(),X=$t(H);pt(X,"y1",0);let xe;var ue=gt(X);pt(ue,"x1",0);let Ae;Ut(()=>{pt(X,"x1",C(f)),pt(X,"x2",C(f)),pt(X,"y2",C(u)*E()),pt(X,"stroke-width",C(c)*1.2),xe=kr(X,"",xe,{"--calculated-dot-color":x()}),pt(ue,"y1",C(f)),pt(ue,"y2",C(f)),pt(ue,"x2",C(u)*E()),pt(ue,"stroke-width",C(c)*1.2),Ae=kr(ue,"",Ae,{"--calculated-dot-color":x()})}),rt(B,H)};or(nt,B=>{g()==="lines"&&B(L)},Ve)}};or(Xe,nt=>{g()==="dots"?nt(Ne):nt(Re,!1)})}Ut(()=>{pt(le,"x",C(q)),pt(le,"y",C(V)),pt(le,"width",C(u)*E()),pt(le,"height",C(u)*E())}),rt(te,le)};or(Te,te=>{E()>0&&te(Se)})}var re=gt(U),ae=gt(re);{var ne=te=>{var le=See();Ut(()=>pt(le,"opacity",C(G))),rt(te,le)};or(ae,te=>{E()>0&&te(ne)})}Su(J,te=>me(p,te),()=>C(p)),Ut(()=>{se=kr(J,"",se,{"--calculated-background-color":_()}),pt(j,"x",C(q)),pt(j,"y",C(V)),pt(j,"width",C(u)),pt(j,"height",C(u)),pt(re,"opacity",C(W))}),rt(e,J),Sr(),n()}var Tee=Qt('<div role="button" tabindex="0" class="bounding-box-border svelte-1e5jg43"><div class="bounding-box svelte-1e5jg43"></div></div>');function Pee(e,t){xr(t,!1);const[r,n]=$n(),i=()=>He(f(),"$position",r),s=()=>He(y,"$width",r),o=()=>He(m,"$height",r),a=()=>He(h(),"$color",r),u=qe();let c=ge(t,"dimensions",8),f=ge(t,"position",8),h=ge(t,"color",8),g=ge(t,"groupName",8);const{width:y,height:m}=c(),_=El();function x(){_("groupClick",{groupName:g()})}Fe(()=>Gt(g()),()=>{me(u,`${g()}-bounding-box`)}),Qi(),Dn();var S=Tee();let E;var A=qt(S);let T;Ut(()=>{pt(S,"id",C(u)),E=kr(S,`border: solid 4px ${a()??""};`,E,{top:`${i().y}px`,left:`${i().x}px`,width:`${s()}px`,height:`${o()}px`}),T=kr(A,"",T,{"background-color":a()})}),fr("contextmenu",S,Ms(ro(function(I){Cn.call(this,t,I)}))),fr("mousedown",S,Ms(ro(x))),rt(e,S),Sr(),n()}function Cee(e,t){xr(t,!1);const[r,n]=$n(),i=()=>He(o,"$groupBoxes",r),o=Rr("graph").groupBoxes;Dn();var a=gr(),u=$t(a);ds(u,1,()=>Array.from(i()),([c,f])=>c,(c,f)=>{let h=()=>C(f)[0];Pee(c,lv(()=>C(f)[1],{get groupName(){return h()},$$events:{groupClick(y){Cn.call(this,t,y)}}}))}),rt(e,a),Sr(),n()}function Om(e){const t=e.style.width,r=e.style.height;e.style.width="fit-content",e.style.height="fit-content";const n=e.offsetWidth,i=e.offsetHeight;return e.style.width=t,e.style.height=r,[n,i]}function v7(e,t,r,n,i){const s={x:0,y:0},o=n.x-i.left-i.width/2,a=n.y-i.top-i.height/2,u=(o-r.x)/e,c=(a-r.y)/e;return s.x=o-u*t,s.y=a-c*t,s}function g7(e,t,r){const n=t*r,i=e-n;return Number(Math.max(uee,Math.min(aee,i)).toFixed(9))}const Ah=(e,t,r,n,i,s,o)=>{const{clientX:a,clientY:u}=e,c=s,f=a-r,h=u-t,g=o.x,y=o.y,m=n*(1-s)/2,_=i*(1-s)/2,x=f-g-m,S=h-y-_,E=x/c,A=S/c;return{x:E,y:A}};function Ree(e,t,r){const{top:n,left:i,width:s,height:o}=lt(e),a=lt(t.scale),u=lt(t.translation);return{scaled:Ah({clientX:r.x,clientY:r.y},n,i,s,o,a,u),scale:a}}function Iee(e,t,r){const{scale:n,translation:i}=r,s=lt(n),o=lt(i),a=t.x-e.x,u=t.y-e.y,c=o.x+a*s,f=o.y+u*s;return{x:c,y:f}}function Oee(e,t){return e.x*t.x+e.y*t.y}function Mee(e,t,r){const n=[],i=t.x-e.x,s=t.y-e.y,o=Lee(e.direction,t.direction),a=Oee(e.direction,t.direction)===0,u=kee(e,t),c=En(e.direction,-1,-1),f=En(t.direction,-1,-1),h={x:Math.abs(e.direction.y),y:Math.abs(e.direction.x)},g=En(e.direction,i-r*e.direction.x*(a?1:o?0:2),s-r*e.direction.y*(a?1:o?0:2)),y=En(t.direction,i+r*t.direction.x*(a?1:o?0:2),s+r*t.direction.y*(a?1:o?0:2)),m=Math.sign(g.x)===-1||Math.sign(g.y)===-1,_=Math.sign(y.x)===1||Math.sign(y.y)===1,x=Math.abs(i),S=Math.abs(s),E=En(e.direction,r,r),A=En(f,r,r),T=En(t.direction,r,r),I=En(e.direction,x,S),N=En(f,x,S),p=En(e.direction,x/2,S/2),P=En(f,x/2,S/2),O=En(h,i,s),q=!u&&!_&&!m,V=e.x+E.x,W=e.y+E.y,G=t.x+T.x,J=t.y+T.y;if(m&&n.push(E),u&&!_&&!m)n.push(I),n.push(N);else if(o)m||n.push(En(e.direction,r+x,r+S)),n.push(O),_||n.push(En(f,r+x,r+S));else if(q)n.push(p),n.push(O),n.push(P);else if(m&&_)if(a){const se=Math.abs(V-G),K=Math.abs(W-J);n.push(En(t.direction,x<r*2?t.direction.x*(i+t.direction.x*r):x+r,S<r*2?t.direction.y*(s+t.direction.y*r):S+r)),n.push(En(c,se,K))}else{const se=Math.abs(V-G),K=Math.abs(W-J);n.push(En(h,i/2,s/2)),n.push(En(t.direction,se,K)),n.push(En(h,i/2,s/2))}else if(m){const se=Math.abs(V-t.x),K=Math.abs(W-t.y);n.push(En(f,x<r*2?x-r:x/2,S<r*2?S-r:S/2)),n.push(En(c,se,K)),n.push(En(f,Math.max(r,x/2),Math.max(r,S/2)))}else if(_){const se=Math.abs(G-e.x),K=Math.abs(J-e.y);n.push(En(e.direction,Math.max(r,x/2),Math.max(r,S/2))),n.push(En(t.direction,se,K)),n.push(En(e.direction,x<r*2?x-r:x/2,S<r*2?S-r:S/2))}return _&&n.push(A),n}function kee(e,t){const{x:r,y:n}=e.direction,{x:i,y:s}=t.direction,o=t.x-e.x,a=t.y-e.y;return r*s===i*n?!1:Math.sign(a)===Math.sign(n+s)!=(Math.sign(o)===Math.sign(r+i))}function En(e,t,r){return{x:e.x*t,y:e.y*r}}function Lee(e,t){return e.x===t.x&&e.y===t.y}function Nee(e,t){const{width:r,height:n}=e,{top:i,left:s,right:o,bottom:a}=t,u=o-s,c=a-i;if(!u||!c)return{x:null,y:null,scale:null};const f=s+u/2,h=i+c/2,g=Math.min(r/u,n/c)*.8,y=r/2,m=n/2,_=y-f,x=m-h;return{x:_*g,y:x*g,scale:g}}const Xd=(e,t,r)=>Math.min(Math.abs(e||t)/2,r);function Mm(e,t){const n=e.getTotalLength()*t;return e.getPointAtLength(n)}function Lp(){const e=new Map,{subscribe:t,set:r,update:n}=Ke(e);return{subscribe:t,set:r,update:n,add:(s,o)=>(n(a=>(a.set(o,s),a)),e),get:s=>e.get(s)||null,getAll:()=>Array.from(e.values()),delete:s=>{let o=!1;return n(a=>(a.delete(s),o=!0,a)),o},count:()=>e.size}}function qee(e){const{id:t,inputs:r,outputs:n,resizable:i,dimensions:s,editable:o,direction:a,zIndex:u,position:c,selectionColor:f,borderWidth:h,edge:g}=e,{bgColor:y,borderColor:m,rotation:_,borderRadius:x,connections:S,textColor:E,locked:A,group:T}=e,I=Lp(),N=(O="self")=>{lt(I).forEach(q=>{(O==="self"||lt(q.direction)===O)&&q.recalculatePosition()})};return{id:typeof t=="string"&&t.slice(0,2)==="N-"?t:`N-${t}`,position:Ke({x:(c==null?void 0:c.x)||0,y:(c==null?void 0:c.y)||0}),dimensions:{width:Ke((s==null?void 0:s.width)||0),height:Ke((s==null?void 0:s.height)||(s==null?void 0:s.width))},group:Ke(T||null),locked:Ke(A||!1),inputs:Ke(r),outputs:Ke(n),recalculateAnchors:N,rotation:Ke(_||0),moving:Ke(!1),resizingWidth:Ke(!1),resizingHeight:Ke(!1),rotating:Ke(!1),editable:Ke(o||!1),resizable:Ke(i),anchors:I,zIndex:Ke(u||2),collapsed:Ke(!1),edge:g||null,borderRadius:Ke(x),bgColor:Ke(y||null),direction:Ke(a),label:Ke(e.label||""),borderColor:Ke(m||null),borderWidth:Ke(h),selectionColor:Ke(f||null),textColor:Ke(E||null),connections:Ke(S)}}function Dee(e,t){const r=[e,t].sort();return`${r[0]}+${r[1]}`}function LC(e,t,r){var a,u,c,f,h;const{source:n,target:i}=e,o={id:n.id&&i.id?Dee(n.id,i.id):"cursor",target:e.target,source:e.source,component:t,type:Ke((r==null?void 0:r.type)||null),color:(r==null?void 0:r.color)||Ke(null),width:Ke((r==null?void 0:r.width)||0),animated:Ke((r==null?void 0:r.animated)||!1),rendered:Ke(!1),start:(r==null?void 0:r.start)||null,end:(r==null?void 0:r.end)||null};if(r!=null&&r.disconnect&&(o.disconnect=!0),r!=null&&r.label){const g={text:Ke(r==null?void 0:r.label.text),color:Ke(((a=r==null?void 0:r.label)==null?void 0:a.color)||hee),textColor:Ke(((u=r==null?void 0:r.label)==null?void 0:u.textColor)||dee),fontSize:Ke(((c=r==null?void 0:r.label)==null?void 0:c.fontSize)||pee),dimensions:{width:Ke(((f=r==null?void 0:r.label.dimensions)==null?void 0:f.width)||lee),height:Ke(((h=r==null?void 0:r.label.dimensions)==null?void 0:h.height)||fee)},borderRadius:Ke((r==null?void 0:r.label.borderRadius)||cee)};o.label=g}return o}function Fee(){const e=new Map,t=new Set,{subscribe:r,set:n,update:i}=Ke(e),s={subscribe:r,set:n,update:i,add:(o,a)=>{if(typeof a!="string"){const u=Array.from(a),c=u[0],f=u[1];if(c.connected.update(h=>h.add(f)),f.connected.update(h=>h.add(c)),s.match(...Array.from(a)).length)return;t.forEach(h=>h(o,"connection"))}i(u=>(u.set(a,o),u))},getAll:()=>Array.from(e.values()),get:o=>e.get(o)||null,match:(...o)=>Array.from(e.keys()).filter(a=>a==="cursor"?!1:o.every(u=>u?a.has(u):!0)),fetch:(o,a)=>{const u=Array.from(e.keys()).filter(c=>c==="cursor"?!1:[o,a].every(f=>f?c.has(f):!0))[0];return e.get(u)||null},delete:o=>{if(typeof o!="string"){const u=Array.from(o),c=u[0],f=u[1];c.connected.update(h=>(h.delete(f),h)),f.connected.update(h=>(h.delete(c),h))}let a=!1;return i(u=>{const c=u.get(o);return c&&(u.delete(o),a=!0,typeof o!="string"&&t.forEach(f=>f(c,"disconnection"))),u}),a},onEdgeChange:o=>(t.add(o),()=>t.delete(o)),count:()=>e.size};return s}function Bee(e,t,r,n){return dl([e,t,r,n],([s,o,a,u])=>{const c={clientX:s.x,clientY:s.y};return Ah(c,o.top,o.left,o.width,o.height,u,a)})}function zee(e,t,r,n){const i=Ke({top:1/0,left:1/0,right:-1/0,bottom:-1/0}),s=Ke({top:1/0,left:1/0,right:-1/0,bottom:-1/0});let o,a=lt(t),u=lt(r),c=lt(n),f=a.width/u,h=a.height/u;function g(){const{x:m,y:_}=Ah({clientX:a.left,clientY:a.top},a.top,a.left,a.width,a.height,u,c),x=lt(s);i.set({top:Math.min(x.top,_),left:Math.min(x.left,m),right:Math.max(x.right,m+f),bottom:Math.max(x.bottom,h+_)})}function y(m=!1){let _=1/0,x=1/0,S=-1/0,E=-1/0;for(const A of e.getAll()){console.log("dentro del for, este es e node:",A);const{x:T,y:I}=lt(A.position),N=lt(A.dimensions.width),p=lt(A.dimensions.height);x=Math.min(x,T),_=Math.min(_,I),S=Math.max(S,T+N),E=Math.max(E,I+p)}s.set({top:_,left:x,right:S,bottom:E}),g(),m&&(o=requestAnimationFrame(()=>y(m)))}return e.subscribe(()=>{console.log("dentro del nodes.subscribe...........Aqui no estan llegando los nodes"),y()}),QS.subscribe(m=>{m&&y(m),m||cancelAnimationFrame(o)}),io.subscribe(m=>{m&&y(m),m||cancelAnimationFrame(o)}),t.subscribe(()=>{a=lt(t),f=a.width/u,h=a.height/u,g()}),r.subscribe(()=>{u=lt(r),f=a.width/u,h=a.height/u,g()}),n.subscribe(()=>{c=lt(n),g()}),{graphBounds:i,nodeBounds:s}}function Vee(e,t,r){const{width:n,height:i,top:s,left:o}=e,a={clientX:n/2,clientY:i/2};return Ah(a,s,o,n,i,r,t)}function m7(e,t){const{zoom:r,editable:n,translation:i,direction:s,locked:o,edge:a,nodes:u}=t,c=Ke({x:(i==null?void 0:i.x)||0,y:(i==null?void 0:i.y)||0}),f=Ke({top:0,left:0,width:0,height:0,bottom:0,right:0}),h=Ke(r),g=Ke(!1),y=Lp(),m=zee(y,f,h,c),_=dl([f,c,h],([S,E,A])=>Vee(S,E,A));return{id:e,nodes:y,edges:Fee(),transforms:{translation:c,scale:h},maxZIndex:Ke(2),dimensions:f,bounds:m,center:_,mounted:g,direction:s||"LR",editable:n||!1,edge:a||null,editing:Ke(null),cursor:Bee(p7,f,c,h),locked:Ke(o||!1),groups:Ke({selected:{parent:Ke(null),nodes:Ke(new Set)},hidden:{parent:Ke(null),nodes:Ke(new Set)}}),groupBoxes:Lp(),activeGroup:Ke(null),initialNodePositions:Ke([])}}function Gee(e,t,r,n,i,s,o,a,u,c,f,h){const{width:g,height:y}=i,{x:m,y:_}=n,x=lt(t.position),S=Ke({x:m-x.x+g/2,y:_-x.y+y/2}),E=dl([t.position,S],([O,q])=>({x:O.x+q.x,y:O.y+q.y})),A=e.transforms,T=e.dimensions,I=Ke(u||"self"),N=()=>{const O=document.getElementById(r),q=lt(I),V=Ff[q];if(!O)return;const{x:W,y:G,width:J,height:se}=O.getBoundingClientRect(),K=lt(S),U=lt(E),{scaled:j,scale:Q}=Ree(T,A,{x:W,y:G}),de=j.x-U.x,ce=j.y-U.y;S.set({x:K.x+de+J/Q/2+V.x*J/Q/2,y:K.y+ce+se/Q/2+V.y*se/Q/2})},p=dl([t.moving,t.resizingWidth,t.resizingHeight,t.rotating],([O,q,V,W])=>O||q||V||W),P=dl([t.rotation],([O])=>O);return{id:r,position:E,offset:S,direction:I,dynamic:Ke(c||!1),type:a,edge:o,moving:p,mounted:Ke(!1),recalculatePosition:N,connected:Ke(new Set),store:s||null,inputKey:f||null,edgeColor:h||Ke(null),rotation:P,node:t}}const Yf=Lp(),Yd={width:200,height:100};function mp(e,t){return{x:Math.round(e/Yd.width)*Yd.width,y:Math.round(t/Yd.height)*Yd.height}}const Kd=10;function y7(e){const t=lt(e);return Array.from(t).map(n=>lt(n.position))}function NC(e,t){console.log("moveNodes called");let r;const n=lt(e.groups),i=lt(e.activeGroup);if(console.log("Graph Groups:",n),console.log("Active Group:",i),!i)return;const s=n[i].nodes;if(!s)return;const o=lt(e.initialNodePositions),{x:a,y:u}=lt(hs),c=Array.from(lt(s)),f=lt(e.groupBoxes);console.log("Group Boxes:",f),c.forEach(g=>g.moving.set(!0)),h();function h(){const g=lt(e.cursor);let y=g.x-a,m=g.y-u;if(t){const x=mp(y,m);y=x.x,m=x.y}const _={x:y,y:m};c.forEach((x,S)=>{const{group:E,position:A}=x,T=o[S];let I;if(i==="selected"){const N=lt(E);N&&(I=f.get(N))}if(!I)$ee(T,_,A);else{const N=lt(x.dimensions.width),p=lt(x.dimensions.height),P=b7(I,N,p);_7(T,_,A,P)}}),lt(io)?r=requestAnimationFrame(h):cancelAnimationFrame(r)}}function $ee(e,t,r){r.set({x:e.x+t.x,y:e.y+t.y})}function _7(e,t,r,n){r.set({x:Math.min(Math.max(n.left,e.x+t.x),n.right),y:Math.min(Math.max(n.top,e.y+t.y),n.bottom)})}function b7(e,t,r){const{x:n,y:i}=lt(e.position);return console.log("Group Box Position:",{x:n,y:i}),{left:n+Kd,right:n+lt(e.dimensions.width)-t-Kd,top:i+Kd,bottom:i+lt(e.dimensions.height)-r-Kd}}function qC(e=1,t,r,n=.1){const i=lt(t),{width:s,height:o,top:a,left:u}=i,c=r.scale,f=lt(r.translation),h=lt(c),g=g7(h,e,n),y=v7(h,g,f,{x:s/2+u,y:o/2+a},i);c.set(g),r.translation.set(y)}var Uee=Qt('<div class="svelvet-graph-wrapper svelte-19pa6i0" role="presentation"><!></div>');function jee(e,t){xr(t,!1);const[r,n]=$n(),i=()=>He(g,"$translation",r),s=()=>He(h,"$scale",r),o=()=>He(y,"$cursor",r),a=qe(),u=qe(),c=Rr("graph"),f=c.transforms,h=f.scale,g=f.translation,y=c.cursor;let m=ge(t,"isMovable",8),_=qe(),x=qe(!1);function S(){Ot(g,Iee(lt(hs),o(),f)),me(_,requestAnimationFrame(S))}Fe(()=>i(),()=>{me(a,i())}),Fe(()=>(C(a),s()),()=>{me(u,`translate(${C(a).x}px, ${C(a).y}px) scale(${s()})`)}),Fe(()=>(Gt(m()),C(x),C(_)),()=>{m()&&!C(x)?(me(x,!0),me(_,requestAnimationFrame(S))):(!m()||!C(x))&&(me(x,!1),cancelAnimationFrame(C(_)))}),Qi(),Dn();var E=Uee();let A;var T=qt(E);Xr(T,t,"default",{},null),Ut(()=>A=kr(E,"",A,{transform:C(u)})),fr("contextmenu",E,Xf(Ms(function(I){Cn.call(this,t,I)}))),fr("click",E,Xf(Ms(function(I){Cn.call(this,t,I)}))),fr("touchstart",E,Xf(Ms(function(I){Cn.call(this,t,I)}))),rt(e,E),Sr(),n()}var Hee=Qt("<!> <!>",1);function Wee(e,t){xr(t,!1);const[r,n]=$n(),i=()=>He(h,"$activeGroup",r),s=()=>He(io,"$tracking",r),o=()=>He(m,"$cursor",r),a=()=>He(g,"$groups",r);console.log("Componente GraphRenderer.svelte");const u=Rr("graph"),c=Rr("snapTo");let f=ge(t,"isMovable",8);const h=u.activeGroup,g=u.groups,y=u.initialNodePositions,m=u.cursor;function _(x){Ot(io,!0);const{groupName:S}=x.detail;Ot(h,S),Ot(hs,o()),Ot(y,y7(a()[S].nodes))}Fe(()=>(i(),s(),NC),()=>{i()&&s()&&NC(u,c)}),Qi(),Dn(),jee(e,{get isMovable(){return f()},children:(x,S)=>{var E=Hee(),A=$t(E);Xr(A,t,"default",{},null);var T=gt(A,2);Cee(T,{$$events:{groupClick:_}}),rt(x,E)},$$slots:{default:!0}}),Sr(),n()}const Xee=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],Yee=new Set(Xee),DC=e=>Yee.has(e);var Kee=Qt('<input type="text">');function Zee(e,t){xr(t,!1);const[r,n]=$n(),i=()=>He(o,"$textStore",r);let s=ge(t,"placeholder",8);const o=Rr("textStore");Dn();var a=Kee();Ut(()=>pt(a,"placeholder",s())),fr("keydown",a,ro(function(u){Cn.call(this,t,u)})),fr("click",a,ro(function(u){Cn.call(this,t,u)})),fr("mousedown",a,ro(function(u){Cn.call(this,t,u)})),u7(a,i,u=>Ot(o,u)),rt(e,a),Sr(),n()}const Jee=new Set(["INPUT","SELECT","BUTTON","TEXTAREA"]);var Qee=Qt("<div><!></div>"),ete=Qt('<div role="button"><!> <div class="anchors left svelte-1iknrz0"><!></div> <div class="anchors right svelte-1iknrz0"><!></div> <div class="anchors top svelte-1iknrz0"><!></div> <div class="anchors bottom svelte-1iknrz0"><!></div></div>');function tte(e,t){xr(t,!1);const[r,n]=$n(),i=()=>He(ne(),"$groups",r),s=()=>He(xe,"$position",r),o=()=>He(Lr,"$selectedNodes",r),a=()=>He(lr,"$hiddenNodes",r),u=()=>He(Br,"$resized",r),c=()=>He(U,"$duplicate",r),f=()=>He(le(),"$centerPoint",r),h=()=>He(ue,"$widthStore",r),g=()=>He(Ae,"$heightStore",r),y=()=>He(hs,"$initialClickPosition",r),m=()=>He(j,"$graphDOMElement",r),_=()=>He(Ie,"$zIndex",r),x=()=>He(te(),"$maxZIndex",r),S=()=>He(ae(),"$locked",r),E=()=>He(Le,"$nodeLock",r),A=()=>He(Be,"$editable",r),T=()=>He(yt,"$group",r),I=()=>He(Wt,"$rotation",r),N=()=>He(we,"$bgColor",r),p=()=>He(ct,"$textColor",r),P=()=>He(ft,"$borderColor",r),O=()=>He(Ce,"$selectionColor",r),q=()=>He(je,"$borderRadius",r),V=()=>He(it,"$borderWidth",r),W=qe(),G=qe(),J=qe(),se=qe(),K=Rr("mounted"),U=Rr("duplicate"),j=Rr("graphDOMElement"),Q=El();let de=ge(t,"node",8),ce=ge(t,"isDefault",8),Te=ge(t,"useDefaults",8),Se=ge(t,"center",8),re=ge(t,"nodeStore",8),ae=ge(t,"locked",8),ne=ge(t,"groups",8),te=ge(t,"maxZIndex",8),le=ge(t,"centerPoint",8),Xe=ge(t,"cursor",8),Ne=ge(t,"initialNodePositions",8),Re=ge(t,"activeGroup",8),nt=ge(t,"editing",8),Ve=ge(t,"dimensionsProvided",8,!1),L=ge(t,"title",8);const B=Ke(0),H=Ke(null),X=de().id,xe=de().position,ue=de().dimensions.width,Ae=de().dimensions.height,Ce=de().selectionColor,Be=de().editable,Le=de().locked,Ie=de().zIndex,we=de().bgColor,je=de().borderRadius,ct=de().textColor,yt=de().group,ft=de().borderColor,it=de().borderWidth,Wt=de().rotation,{selected:yr,hidden:er}=i(),lr=er.nodes,Lr=yr.nodes,Br=Ke(!1);Kr("node",de()),Kr("anchorsMounted",B),Kr("resized",Br),Kr("nodeConnectEvent",H),Pi(()=>{if(Se()){const Bt={x:f().x-h()/2,y:f().y-g()/2};de().position.set(Bt),io.set(!0),io.set(!1)}K.update(Bt=>Bt+1)}),Eh(()=>{C(G)&&(o().delete(de()),Ot(Lr,o())),K.update(Bt=>Bt-1)});function wn(){C(G)?(de()&&o().delete(de()),Ot(Lr,o())):(de()&&o().add(de()),Ot(Lr,o()))}function rr(Bt){Ot(hs,lt(Xe())),m().focus(),_()!==x()&&_()!==1/0&&Ot(Ie,hQ(te(),x()));const zr=Bt.target;if(!Jee.has(zr.tagName)&&(Bt.preventDefault(),Q("nodeClicked",{node:de(),e:Bt}),!(S()||E()))){if("touches"in Bt){if(Bt.touches&&Bt.touches.length>1)return}else Bt.button===2&&A()&&Ot(nt(),de());Ot(io,!0),Or(Bt)}}function Or(Bt){let zr,Bn,xn=!1;const jr=T();jr&&(zr=i()[jr],Bn=lt(zr.parent),xn=Bn===de()),xn?Ot(Re(),jr):Ot(Re(),"selected"),!Bt.shiftKey&&C(G)?Ot(Re(),"selected"):(!Bt.shiftKey&&!C(G)&&!Bt.shiftKey&&(o().clear(),Ot(Lr,o())),wn()),Ot(Ne(),y7(i().selected.nodes))}function mn(){re().delete(X)}function yn(Bt){const zr=lt(Xe()),Bn=zr.x-y().x,xn=zr.y-y().y;Math.abs(Bn)+Math.abs(xn)<4&&Q("nodeReleased",{e:Bt,node:de()}),Ot(H,Bt)}function vn(Bt){return Bt.addEventListener("mousedown",rr),Bt.addEventListener("touchstart",rr),{destroy(){Bt.removeEventListener("mousedown",rr),Bt.removeEventListener("touchstart",rr)}}}Fe(()=>s(),()=>{me(W,s())}),Fe(()=>(o(),Gt(de())),()=>{me(G,o().has(de()))}),Fe(()=>(a(),Gt(de())),()=>{me(J,a().has(de()))}),Fe(()=>(Gt(Ve()),u()),()=>{me(se,Ve()||u())}),Fe(()=>(C(G),c(),Gt(de())),()=>{C(G)&&c()&&Q("duplicate",de())}),Qi(),Dn();var Un=gr(),ri=$t(Un);{var zt=Bt=>{var zr=ete();pt(zr,"id",X);let Bn;pt(zr,"tabindex",0);let xn;var jr=qt(zr);{var jn=Lt=>{var at=Qee();kr(at,"",{},{width:"fit-content",height:"fit-content"});var We=qt(at);Xr(We,t,"default",{grabHandle:vn,get selected(){return C(G)},destroy:mn},null),xC(at,"clientHeight",_t=>Ot(Ae,_t)),xC(at,"clientWidth",_t=>Ot(ue,_t)),rt(Lt,at)},hi=Lt=>{var at=gr(),We=$t(at);Xr(We,t,"default",{grabHandle:vn,get selected(){return C(G)},destroy:mn},null),rt(Lt,at)};or(jr,Lt=>{C(se)?Lt(hi,!1):Lt(jn)})}var Qr=gt(jr,2),Hn=qt(Qr);Xr(Hn,t,"anchorWest",{},null);var kn=gt(Qr,2),di=qt(kn);Xr(di,t,"anchorEast",{},null);var Ye=gt(kn,2),Et=qt(Ye);Xr(Et,t,"anchorNorth",{},null);var Rt=gt(Ye,2),kt=qt(Rt);Xr(kt,t,"anchorSouth",{},null),$a(()=>fr("contextmenu",zr,Ms(ro(function(Lt){Cn.call(this,t,Lt)})))),$a(()=>fr("mouseup",zr,yn)),Zu(zr,Lt=>vn==null?void 0:vn(Lt)),Ut(Lt=>{Bn=Rn(zr,1,"svelvet-node svelte-1iknrz0",null,Bn,Lt),pt(zr,"title",L()),xn=kr(zr,"",xn,{top:`${C(W).y??""}px`,left:`${C(W).x??""}px`,"z-index":_(),width:C(se)?h()+"px":"fit-content",height:C(se)?g()+"px":"fit-content",transform:`rotate(${I()??""}deg)`,"--prop-background-color":N()||(ce()||Te()?null:"transparent"),"--prop-text-color":p(),"--prop-border-color":P(),"--prop-selection-color":O(),"--prop-border-radius":q()?`${q()}px`:ce()||Te()?null:"0px","--prop-border-width":V()||(ce()||Te()?null:"0px")}),pt(Qr,"id",`anchors-west-${de().id}`),pt(kn,"id",`anchors-east-${de().id}`),pt(Ye,"id",`anchors-north-${de().id}`),pt(Rt,"id",`anchors-south-${de().id}`)},[()=>({selected:C(G),locked:S()||E()})],hn),rt(Bt,zr)};or(ri,Bt=>{C(J)||Bt(zt)})}rt(e,Un),Sr(),n()}var rte=Qt("<div></div> <div></div>",1),nte=Qt("<div></div> <div></div>",1),ite=Qt("<div></div>"),ste=Qt("<div></div>"),ote=Qt("<!> <!> <!> <!>",1);function ate(e,t){xr(t,!1);const[r,n]=$n(),i=()=>He(U,"$position",r),s=()=>He(Se,"$widthStore",r),o=()=>He(Te,"$heightStore",r),a=()=>He(Q,"$resizingHeight",r),u=()=>He(re,"$cursor",r),c=()=>He(ce,"$nodeRotation",r),f=()=>He(j,"$resizingWidth",r),h=()=>He(de,"$rotating",r),g=()=>He(hs,"$initialClickPosition",r),y=qe(),m=qe(),_=qe(),x=Rr("graph"),S=Rr("node"),E=Rr("resized");let A=ge(t,"width",8,!1),T=ge(t,"height",8,!1),I=ge(t,"rotation",8,!1),N=ge(t,"minHeight",12,0),p=ge(t,"minWidth",12,0),P,O=A(),q=A(),V=T(),W=T(),G=A()&&T(),J=0,se=0,K=qe(lt(S.position));const U=S.position,j=S.resizingWidth,Q=S.resizingHeight,de=S.rotating,ce=S.rotation,Te=S.dimensions.height,Se=S.dimensions.width,re=x.cursor;let ae=qe(),ne=qe(),te=qe(1);Pi(()=>{try{P=document.querySelector(`#${S.id}`),P&&(Ce=>(p(Ce[0]),N(Ce[1])))(Om(P))}catch(Ce){console.error(Ce)}});function le(Ce,Be){const Le=we=>{we.stopPropagation(),we.preventDefault(),Be.left||Be.top?me(te,-1):me(te,1),QS.set(!0),Ot(hs,lt(re)),me(ae,s()),me(ne,o()),me(K,i()),Be.both?Ot(j,!0):Ot(j,!1),Ot(j,Be.left||Be.right||Be.both||!1),Ot(Q,Be.top||Be.bottom||Be.both||!1),P&&(je=>(p(je[0]),N(je[1])))(Om(P)),window.addEventListener("mouseup",Ie)},Ie=()=>{Ot(j,!1),Ot(Q,!1),QS.set(!1),window.removeEventListener("mouseup",Ie)};return Ce.addEventListener("mousedown",Le),{destroy(){Ce.removeEventListener("mousedown",Le)}}}function Xe(Ce){const Be=Ie=>{Ie.stopPropagation(),Ie.preventDefault(),J=c(),Ot(hs,lt(re));const we=g().x-C(_).x,je=g().y-C(_).y;se=Math.atan2(je,we),Ot(de,!0),window.addEventListener("mouseup",Le)},Le=()=>{Ot(de,!1),window.removeEventListener("mouseup",Le)};return Ce.addEventListener("mousedown",Be),{destroy(){Ce.removeEventListener("mousedown",Be)}}}function Ne(){const Ce=lt(re),Be=Ce.x-C(_).x,Le=Ce.y-C(_).y,Ie=Math.atan2(Le,Be),we=se-Ie;return J-Re(we)}function Re(Ce){return Ce*(180/Math.PI)}mQ(()=>{P&&(Ce=>(p(Ce[0]),N(Ce[1])))(Om(P)),s()<p()&&E.set(!1),o()<N()&&E.set(!1)}),Fe(()=>(h(),u()),()=>{h()&&(u(),Ot(ce,Ne()))}),Fe(()=>(a(),u(),Gt(N()),C(ne),C(te),C(K),c()),()=>{if(a()){const Ce=lt(hs),Be=u(),Le=Math.max(N(),C(ne)+(Be.y-Ce.y)*C(te));Le>N()?(E.set(!0),Ot(Te,Le)):E.set(!1),C(te)===-1&&Ot(U,{x:C(K).x,y:C(K).y+Be.y-Ce.y}),c()!==0&&S.position.update(Ie=>({y:C(K).y-(Le-C(ne))/2,x:Ie.x}))}}),Fe(()=>(f(),u(),Gt(p()),C(ae),C(te),C(K),c()),()=>{if(f()){const Ce=lt(hs),Be=u(),Le=Math.max(p(),C(ae)+(Be.x-Ce.x)*C(te));Le>p()?(E.set(!0),Ot(Se,Le)):E.set(!1),C(te)===-1&&Ot(U,{x:C(K).x+Be.x-Ce.x,y:C(K).y}),c()!==0&&S.position.update(Ie=>({x:C(K).x-(Le-C(ae))/2,y:Ie.y}))}}),Fe(()=>i(),()=>{me(y,i().x)}),Fe(()=>i(),()=>{me(m,i().y)}),Fe(()=>(C(y),s(),C(m),o()),()=>{me(_,{x:C(y)+s()/2,y:C(m)+o()/2})}),Qi(),Dn();var nt=ote(),Ve=$t(nt);{var L=Ce=>{var Be=rte(),Le=$t(Be);let Ie;Zu(Le,(ct,yt)=>le==null?void 0:le(ct,yt),()=>({left:O}));var we=gt(Le,2);let je;Zu(we,(ct,yt)=>le==null?void 0:le(ct,yt),()=>({right:q})),Ut((ct,yt)=>{Ie=Rn(Le,1,"left svelte-1ryxg7v",null,Ie,ct),je=Rn(we,1,"right svelte-1ryxg7v",null,je,yt)},[()=>({width:A()}),()=>({width:A()})],hn),rt(Ce,Be)};or(Ve,Ce=>{A()&&Ce(L)})}var B=gt(Ve,2);{var H=Ce=>{var Be=nte(),Le=$t(Be);let Ie;Zu(Le,(ct,yt)=>le==null?void 0:le(ct,yt),()=>({top:V}));var we=gt(Le,2);let je;Zu(we,(ct,yt)=>le==null?void 0:le(ct,yt),()=>({bottom:W})),Ut((ct,yt)=>{Ie=Rn(Le,1,"top svelte-1ryxg7v",null,Ie,ct),je=Rn(we,1,"bottom svelte-1ryxg7v",null,je,yt)},[()=>({height:T()}),()=>({height:T()})],hn),rt(Ce,Be)};or(B,Ce=>{T()&&Ce(H)})}var X=gt(B,2);{var xe=Ce=>{var Be=ite();Rn(Be,1,"svelte-1ryxg7v",null,{},{both:G}),Zu(Be,(Le,Ie)=>le==null?void 0:le(Le,Ie),()=>({both:G})),rt(Ce,Be)};or(X,Ce=>{G&&Ce(xe)})}var ue=gt(X,2);{var Ae=Ce=>{var Be=ste();let Le;Zu(Be,Ie=>Xe==null?void 0:Xe(Ie)),Ut(Ie=>Le=Rn(Be,1,"svelte-1ryxg7v",null,Le,Ie),[()=>({rotation:I()})],hn),rt(Ce,Be)};or(ue,Ce=>{I()&&Ce(Ae)})}rt(e,nt),Sr(),n()}var ute=Qt("<div></div>");function cte(e,t){let r=ge(t,"output",8),n=ge(t,"input",8),i=ge(t,"connecting",8),s=ge(t,"connected",8),o=ge(t,"hovering",8),a=ge(t,"bgColor",8);var u=ute();let c,f;Ut(h=>{c=Rn(u,1,"svelvet-anchor svelte-19t6skv",null,c,h),f=kr(u,"",f,{"--prop-anchor-color":a()})},[()=>({output:r(),input:n(),connected:s(),connecting:i(),hovering:o()})],hn),rt(e,u)}let km;function lte(e){const t=e.parentNode;if(!t)return;t.removeChild(e);const r=document.querySelector(".svelvet-graph-wrapper");r&&r.appendChild(e)}var fte=In('<defs><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="12.5" refY="5" orient="auto"><polygon class="arrow svelte-ppcocz" points="0 0, 15 5, 0 10"></polygon></marker><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="0" refY="5" orient="auto"><polygon class="arrow svelte-ppcocz" points="0 5, 15 0, 15 10"></polygon></marker></defs>'),hte=In("<path></path>"),dte=Qt('<div class="default-label svelte-ppcocz"> </div>'),pte=In('<foreignObject width="100%" height="100%" class="svelte-ppcocz"><span class="label-wrapper svelte-ppcocz"><!></span></foreignObject>'),vte=In('<svg class="edges-wrapper svelte-ppcocz"><!><path role="presentation"></path><!><!></svg>');function eE(e,t){var Mt,en;const r=GE(t);xr(t,!1);const[n,i]=$n(),s=()=>He(Bt,"$sourceDynamic",n),o=()=>He(zr,"$targetDynamic",n),a=()=>He(C(p),"$edgeColor",n),u=()=>He(C(P),"$edgeLabel",n),c=()=>He(ri,"$sourcePositionStore",n),f=()=>He(zt,"$targetPositionStore",n),h=()=>He(jr,"$sourceNodePositionStore",n),g=()=>He(jn,"$targetNodePositionStore",n),y=()=>He(mn,"$sourceDirection",n),m=()=>He(vn,"$sourceRotation",n),_=()=>He(yn,"$targetDirection",n),x=()=>He(Un,"$targetRotation",n),S=()=>He(hi,"$edgeType",n),E=()=>He(Bn,"$sourceMoving",n),A=()=>He(xn,"$targetMoving",n),T=()=>He(C(Ve),"$sourceZIndex",n),I=()=>He(C(L),"$targetZIndex",n),N=qe(),p=qe(),P=qe(),O=qe(),q=qe(),V=qe(),W=qe(),G=qe(),J=qe(),se=qe(),K=qe(),U=qe(),j=qe(),Q=qe(),de=qe(),ce=qe(),Te=qe(),Se=qe(),re=qe(),ae=qe(),ne=qe(),te=qe(),le=qe(),Xe=qe(),Ne=qe(),Re=qe(),nt=qe(),Ve=qe(),L=qe(),B=qe(),H=qe(),X=Rr("edgeStore"),xe=Rr("edgeStyle"),ue=Rr("endStyles"),Ae=Rr("raiseEdgesOnSelect"),Ce=Rr("edgesAboveNode");let Be=ge(t,"edge",24,()=>Rr("edge")),Le=ge(t,"straight",8,xe==="straight"),Ie=ge(t,"step",8,xe==="step"),we=ge(t,"start",24,()=>ue[0]),je=ge(t,"end",24,()=>ue[1]),ct=ge(t,"animate",8,!1),yt=ge(t,"label",8,""),ft=ge(t,"enableHover",8,!1),it=ge(t,"edgeClick",8,null),Wt=ge(t,"labelPosition",8,.5),yr=ge(t,"width",8,null),er=ge(t,"color",8,null),lr=ge(t,"labelColor",8,null),Lr=ge(t,"textColor",8,null),Br=ge(t,"cornerRadius",8,8),wn=ge(t,"targetColor",8,null);const rr=Be().source,Or=Be().target,mn=rr.direction,yn=Or.direction,vn=rr.rotation,Un=Or.rotation,ri=rr.position,zt=Or.position,Bt=rr.dynamic,zr=Or.dynamic,Bn=rr.moving,xn=Or.moving,jr=(Mt=rr.node)==null?void 0:Mt.position,jn=(en=Or.node)==null?void 0:en.position,hi=Be().type,Qr=Be().id;let Hn=qe(),kn=qe(),di=qe({x:0,y:0}),Ye=qe(!1),Et=qe(!1),Rt=qe(!1),kt=qe(!1),Lt=qe(!1),at=qe();Be().rendered.set(!0),Pi(()=>{setTimeout(()=>{C(kn)&&me(di,Mm(C(kn),Wt()))},0),lte(C(at))}),f7(()=>{C(kn)&&me(di,Mm(C(kn),Wt()))}),Eh(()=>{C(at).remove(),cancelAnimationFrame(km)});function We(){C(Ye)&&(C(kn)&&me(di,Mm(C(kn),Wt())),km=requestAnimationFrame(We))}function _t(){if(rr.id===null||Or.id===null)return;const Er=X.match(rr,Or);X.delete(Er[0]),rr==null||rr.connected.update(Nr=>(Or&&Nr.delete(Or),Nr)),Or==null||Or.connected.update(Nr=>(rr&&Nr.delete(rr),Nr))}Fe(()=>(s(),o()),()=>{me(N,s()||o())}),Fe(()=>{},()=>{qa(me(p,(rr==null?void 0:rr.edgeColor)||(Or==null?void 0:Or.edgeColor)||null),"$edgeColor",n)}),Fe(()=>Gt(Be()),()=>{var Er;qa(me(P,(Er=Be().label)==null?void 0:Er.text),"$edgeLabel",n)}),Fe(()=>(Gt(er()),a()),()=>{me(O,er()||a()||null)}),Fe(()=>(Gt(yt()),u()),()=>{me(q,yt()||u()||"")}),Fe(()=>C(q),()=>{me(V,C(q)||r.label)}),Fe(()=>c(),()=>{me(W,c())}),Fe(()=>f(),()=>{me(G,f())}),Fe(()=>h(),()=>{me(J,h())}),Fe(()=>g(),()=>{me(se,g())}),Fe(()=>C(W),()=>{me(K,C(W).x)}),Fe(()=>C(W),()=>{me(U,C(W).y)}),Fe(()=>C(G),()=>{me(j,C(G).x)}),Fe(()=>C(G),()=>{me(Q,C(G).y)}),Fe(()=>(C(j),C(K)),()=>{me(de,C(j)-C(K))}),Fe(()=>(C(Q),C(U)),()=>{me(ce,C(Q)-C(U))}),Fe(()=>C(de),()=>{me(Te,Math.abs(C(de)))}),Fe(()=>C(ce),()=>{me(Se,Math.abs(C(ce)))}),Fe(()=>C(Te),()=>{me(re,Math.max(30,Math.min(600,C(Te)/2)))}),Fe(()=>C(Se),()=>{me(ae,Math.max(30,Math.min(600,C(Se)/2)))}),Fe(()=>(C(N),C(se),C(J),C(Rt),C(kt),lt),()=>{if(C(N)&&rr.node&&Or.node){const Er=C(se).x-C(J).x,Nr=C(se).y-C(J).y;me(Rt,Nr>0),me(kt,Er>0);let Vr,Ar;if(C(Rt)){const Sn=lt(rr.node.dimensions.height),Xt=C(J).y+Sn;Vr=C(se).y-Xt}else{const Sn=lt(Or.node.dimensions.height),Xt=C(se).y+Sn;Vr=C(J).y-Xt}if(C(kt)){const Sn=lt(rr.node.dimensions.width),Xt=C(J).x+Sn;Ar=C(se).x-Xt}else{const Sn=lt(Or.node.dimensions.width),Xt=C(se).x+Sn;Ar=C(J).x-Xt}me(Et,Vr>Ar)}}),Fe(()=>(C(N),C(Et),C(Rt),C(kt),s(),o()),()=>{if(C(N)){let Er,Nr;C(Et)?(Er=C(Rt)?"south":"north",Nr=C(Rt)?"north":"south"):(Er=C(kt)?"east":"west",Nr=C(kt)?"west":"east"),s()&&Ot(mn,Er),o()&&Ot(yn,Nr)}}),Fe(()=>(y(),m()),()=>{me(ne,MC(Ff[y()],m()||0))}),Fe(()=>(_(),x()),()=>{me(te,MC(Ff[_()],x()||0))}),Fe(()=>(C(K),C(ne),C(re)),()=>{me(le,C(K)+C(ne).x*C(re))}),Fe(()=>(C(U),C(ne),C(ae)),()=>{me(Xe,C(U)+C(ne).y*C(ae))}),Fe(()=>(C(j),C(te),C(re)),()=>{me(Ne,C(j)+C(te).x*C(re))}),Fe(()=>(C(Q),C(te),C(ae)),()=>{me(Re,C(Q)+C(te).y*C(ae))}),Fe(()=>(C(le),C(Xe),C(Ne),C(Re)),()=>{me(nt,`C ${C(le)}, ${C(Xe)} ${C(Ne)}, ${C(Re)}`)}),Fe(()=>(Gt(Ie()),S(),C(K),C(U),Gt(Le()),C(nt),C(j),C(Q)),()=>{(!Ie()||Qr==="cursor"||S()==="bezier")&&me(Hn,`M ${C(K)}, ${C(U)} ${Le()?"":C(nt)} ${C(j)}, ${C(Q)}`)}),Fe(()=>(C(V),C(Ye),E(),A()),()=>{C(V)&&!C(Ye)&&(E()||A()||Qr==="cursor")?(me(Ye,!0),We()):C(Ye)&&!E()&&!A()&&Qr!=="cursor"&&(me(Ye,!1),cancelAnimationFrame(km))}),Fe(()=>(Gt(Ie()),S(),C(K),C(U),y(),C(j),C(Q),_(),Gt(Br()),kC),()=>{if(Ie()&&Qr!=="cursor"&&!(S()&&S()==="bezier")){const Er={x:C(K),y:C(U),direction:Ff[y()]},Nr={x:C(j),y:C(Q),direction:Ff[_()]},Vr=Mee(Er,Nr,mee),Ar=(Sn,Xt,pi)=>{if(Xt<Vr.length-1){const wi=nee(Sn,Vr[Xt+1]);return iee(pi,wi)}return""};me(Hn,Vr.reduce((Sn,Xt,pi)=>{const wi=Math.sign(Xt.x),Fi=Math.sign(Xt.y);let Ze=Xt.x,vt=Xt.y,ht="";if(Br()){const dt=Vr[pi+1]||{x:0,y:0},Ct=Vr[pi-1]||{x:0,y:0},nr=Xd(Xt.x,dt.x,Br()),Hr=Xd(dt.y,Xt.y,Br()),cn=Xd(Ct.x,Xt.x,Br()),Gr=Xd(Ct.y,Xt.y,Br()),_n=Math.min(cn,Gr),zn=Math.min(nr,Hr);Xt.x?Ze=Xt.x-(zn+_n)*wi:vt=Xt.y-(zn+_n)*Fi,ht=Ar(Xt,pi,zn)}return kC(Sn,Ze,vt,ht)},`M ${C(K)}, ${C(U)}`))}}),Fe(()=>{},()=>{qa(me(Ve,rr.node.zIndex||0),"$sourceZIndex",n)}),Fe(()=>{},()=>{qa(me(L,Or.node.zIndex||0),"$targetZIndex",n)}),Fe(()=>(T(),I()),()=>{me(B,Math.max(T(),I()))}),Fe(()=>(C(B),T(),I()),()=>{me(H,Ce==="all"?1e5:Ce?C(B):Ae===!0?C(B)-1:Ae==="source"?T()-1:Ae==="target"?I()-1:0)}),Qi(),Dn();var Tt=gr(),Vt=$t(Tt);{var an=Er=>{var Nr=vte();let Vr;var Ar=qt(Nr);{var Sn=ht=>{var dt=fte(),Ct=qt(dt);pt(Ct,"id",Qr+"-end-arrow");var nr=qt(Ct);let Hr;var cn=gt(Ct);pt(cn,"id",Qr+"-start-arrow");var Gr=qt(cn);let _n;Ut(()=>{Hr=kr(nr,"",Hr,{"--prop-edge-color":C(O)}),_n=kr(Gr,"",_n,{"--prop-edge-color":C(O)})}),rt(ht,dt)};or(Ar,ht=>{(we()||je())&&ht(Sn)})}var Xt=gt(Ar);pt(Xt,"id",Qr+"-target");let pi,wi;Su(Xt,ht=>me(kn,ht),()=>C(kn));var Fi=gt(Xt);Xr(Fi,t,"default",{get path(){return C(Hn)},destroy:_t,get hovering(){return C(Lt)}},ht=>{var dt=hte();pt(dt,"id",Qr);let Ct,nr;Ut(Hr=>{Ct=Rn(dt,0,"edge svelte-ppcocz",null,Ct,Hr),pt(dt,"d",C(Hn)),pt(dt,"marker-end",je()==="arrow"?`url(#${Qr+"-end-arrow"})`:""),pt(dt,"marker-start",we()==="arrow"?`url(#${Qr+"-start-arrow"})`:""),nr=kr(dt,"",nr,{"--prop-edge-color":C(O),"--prop-stroke-width":yr()?yr()+"px":null})},[()=>({animate:ct()})],hn),rt(ht,dt)});var Ze=gt(Fi);{var vt=ht=>{var dt=pte(),Ct=qt(dt),nr=qt(Ct);Xr(nr,t,"label",{destroy:_t,get hovering(){return C(Lt)}},Hr=>{var cn=dte();let Gr;var _n=qt(cn);Ut(()=>{Gr=kr(cn,"",Gr,{"--prop-label-color":lr(),"--prop-label-text-color":Lr()}),Pu(_n,C(q))}),rt(Hr,cn)}),Ut(()=>{pt(dt,"x",C(di).x),pt(dt,"y",C(di).y)}),rt(ht,dt)};or(Ze,ht=>{C(V)&&ht(vt)})}Su(Nr,ht=>me(at,ht),()=>C(at)),Ut(ht=>{Vr=kr(Nr,"",Vr,{"z-index":C(H)}),pi=Rn(Xt,0,"target svelte-ppcocz",null,pi,ht),pt(Xt,"d",C(Hn)),wi=kr(Xt,"",wi,{cursor:it()||C(Lt)?"pointer":"move","--prop-target-edge-color":it()||C(Lt)?wn()||null:"transparent"})},[()=>({cursor:Qr==="cursor"||!it()&&!ft()})],hn),fr("mousedown",Xt,function(...ht){var dt;(dt=it())==null||dt.apply(this,ht)}),fr("mouseenter",Xt,()=>me(Lt,!0)),fr("mouseleave",Xt,()=>me(Lt,!1)),rt(Er,Nr)};or(Vt,Er=>{rr&&Or&&Er(an)})}rt(e,Tt),UE(t,"destroy",_t);var Wn=Sr({destroy:_t});return i(),Wn}function FC(e,t){xr(t,!1);let r=ge(t,"edge",8);Kr("edge",r()),Dn();var n=gr(),i=$t(n);Xr(i,t,"default",{},null),rt(e,n),Sr()}let Lm;const ra=Ke(null);function gte(e,t,r){if(t==="self")return;const n=e.parentNode;if(!n)return;n.removeChild(e);const i=document.querySelector(`#anchors-${t}-${r.id}`);i&&(i.appendChild(e),e&&r.recalculateAnchors())}var mte=Qt('<div role="button" tabindex="0"><!></div> <!> <!>',1);function Bf(e,t){xr(t,!1);const[r,n]=$n(),i=()=>He(ra,"$connectingFrom",r),s=()=>He(yt,"$nodeLevelConnections",r),o=()=>He(G,"$anchorsMounted",r),a=()=>He(C(E),"$dynamicDirection",r),u=()=>He(P,"$mounted",r),c=()=>He(W,"$nodeConnectEvent",r),f=()=>He(Ie,"$anchors",r),h=()=>He(C(S),"$connectedAnchors",r),g=()=>He(we,"$resizingWidth",r),y=()=>He(je,"$resizingHeight",r),m=()=>He(ct,"$rotating",r),_=()=>He(Te(),"$inputsStore",r),x=qe(),S=qe(),E=qe(),A=Rr("dynamic"),T=Rr("node"),I=Rr("edgeStore"),N=Rr("cursorAnchor"),p=Rr("direction"),P=Rr("mounted"),O=Rr("graph"),q=Rr("nodeStore"),V=Rr("graphEdge"),W=Rr("nodeConnectEvent"),G=Rr("anchorsMounted"),J=Rr("flowchart")||void 0;let se=ge(t,"bgColor",8,null),K=ge(t,"id",8,0),U=ge(t,"input",8,!1),j=ge(t,"output",8,!1),Q=ge(t,"multiple",24,()=>j()?!0:!U()),de=ge(t,"dynamic",8,A||!1),ce=ge(t,"edge",8,null),Te=ge(t,"inputsStore",8,null),Se=ge(t,"key",8,null),re=ge(t,"outputStore",8,null),ae=ge(t,"connections",28,()=>[]),ne=ge(t,"edgeColor",24,()=>Ke(null)),te=ge(t,"edgeLabel",8,""),le=ge(t,"locked",8,!1),Xe=ge(t,"nodeConnect",8,!1),Ne=ge(t,"edgeStyle",8,null),Re=ge(t,"endStyles",24,()=>[null,null]),nt=ge(t,"invisible",8,!1),Ve=ge(t,"direction",24,()=>p==="TD"?U()?"north":"south":U()?"west":"east"),L=ge(t,"title",8,"");const B=El(),H=El();let X=qe(),xe=qe(!1),ue=qe(!1),Ae=qe(0),Ce=U()===j()?null:U()?"input":"output",Be=qe([]);const Le=T.edge,Ie=T.anchors,we=T.resizingWidth,je=T.resizingHeight,ct=T.rotating,yt=T.connections,ft=`A-${K()||Ie.count()+1}/${T.id}`,it=Gee(O,T,ft,{x:0,y:0},{width:0,height:0},Te()||re()||null,ce()||Le||V||null,Ce,Ve(),de(),Se(),ne());Ie.add(it,it.id),Pi(()=>{var Et;C(X)&&it.recalculatePosition();const Ye=Array.from(lt(T.anchors)).reduce((Rt,[,kt])=>(kt.type==="output"&&Rt++,Rt),0);if((Et=s())!=null&&Et.length&&!U()){const Rt=[];let kt=null;s().forEach((Lt,at)=>{Lt&&(kt===null&&(kt=at),(at-kt)%Ye===0?(C(Be).push(Lt),Rt.push(null)):Rt.push(Lt))}),Ot(yt,Rt)}fQ(G,o())}),f7(()=>{C(X)&&it.recalculatePosition()}),Eh(()=>{Un(),cancelAnimationFrame(Lm)});function Wt(Ye){var _t;I.delete("cursor");const Et={x:Ye.changedTouches[0].clientX,y:Ye.changedTouches[0].clientY},Rt=document.elementFromPoint(Et.x,Et.y);if(!Rt)return;const kt=Rt.parentElement;if(!kt)return;const Lt=kt.id,at=Lt.split("/")[1],We=(_t=q.get(at))==null?void 0:_t.anchors.get(Lt);We&&(I.delete("cursor"),yr(it,We,Ye))}function yr(Ye,Et,Rt){const kt=rr(Ye,Et);kt&&Or(),Rt.shiftKey||yn(kt)}function er(Ye){var Et;if("changedTouches"in Ye&&C(x)){Wt(Ye);return}if(!C(x)){if((Et=h())!=null&&Et.size&&!Q()){I.delete("cursor"),Ye.shiftKey||yn(!1);return}i()&&wn(Ye)}}function lr(Ye){var Et;if(!le()){if((Et=h())!=null&&Et.size&&!Q()&&!i())return ri();if(!i())return Lr();wn(Ye)}}function Lr(){U()===j()?(Ot(ra,{anchor:it,store:null,key:null}),Br(it,N)):U()?(Ot(ra,{anchor:it,store:Te(),key:Se()}),Br(N,it)):j()&&(Ot(ra,{anchor:it,store:re(),key:null}),Br(it,N))}function Br(Ye,Et,Rt=!1){const kt={color:ne(),label:{text:te()}};Rt&&(kt.disconnect=!0),Ne()&&(kt.type=Ne()),Re()[0]&&(kt.start=Re()[0]),Re()[1]&&(kt.start=Re()[1]);const Lt=LC({source:Ye,target:Et},(Ye==null?void 0:Ye.edge)||null,kt);I.add(Lt,"cursor")}function wn(Ye){if(I.delete("cursor"),!i())return;const Et=i().anchor.type;if(i().anchor===it||Et===it.type&&Et){yn(!1);return}it.recalculatePosition();let Rt,kt;U()===j()?Et==="input"?(Rt=it,kt=i().anchor):(Rt=i().anchor,kt=it):U()?(Rt=i().anchor,kt=it):(Rt=it,kt=i().anchor),yr(Rt,kt,Ye)}function rr(Ye,Et){if(Ye===Et||lt(Ye.connected).has(it))return!1;const Rt={color:ne(),label:{text:te()}};if(J){const Lt=Ye.node.id.slice(2),at=J.nodeList[Lt];if(at){const We=Et.node.id.slice(2),_t=at.children.filter(Tt=>Tt.node.id===We)[0];if(_t){const Tt=_t;Rt.label={text:Tt.content}}}}Ne()&&(Rt.type=Ne()),Re()[0]&&(Rt.start=Re()[0]),Re()[1]&&(Rt.start=Re()[1]);const kt=LC({source:Ye,target:Et},(Ye==null?void 0:Ye.edge)||null,Rt);return!Ye.node||!Et.node?!1:(I.add(kt,new Set([Ye,Et,Ye.node,Et.node])),!0)}function Or(){if(U()&&i()&&i().store)_()&&Se()&&Te()&&typeof Te().set=="function"&&typeof Te().update=="function"&&nc(Te(),dn(_)[Se()]=i().store,dn(_));else if(j()&&i()&&i().store){const{store:Ye,key:Et}=i();Ye&&Et&&typeof Ye.update=="function"&&Ye.update(Rt=>(re()&&(Rt[Et]=re()),Rt))}}function mn(){_()&&Se()&&_()[Se()]&&nc(Te(),dn(_)[Se()]=Ke(lt(_()[Se()])),dn(_))}function yn(Ye){(Ye||!c())&&(Ot(ra,null),Ot(W,null))}function vn(){C(xe)&&(C(X)&&it.recalculatePosition(),Lm=requestAnimationFrame(vn))}function Un(){I.delete("cursor"),I.match(it).forEach(Et=>I.delete(Et)),yn(!1),mn()}function ri(){if(lt(it.connected).size>1)return;const Ye=Array.from(lt(it.connected))[0];if(Ye.type!=="input")if(Un(),Ye.type==="output"){Br(Ye,N,!0),mn();const Et=Ye.store;Ot(ra,{anchor:Ye,store:Et,key:null})}else Br(Ye,N,!0),Ot(ra,{anchor:Ye,store:null,key:null})}function zt(){C(Be).forEach((Ye,Et)=>{if(!Ye)return;Bn(Ye)&&ae(ae()[Et]=null,!0)}),me(Be,C(Be).filter(Ye=>Ye!==null))}function Bt(){ae().forEach(Ye=>{Ye&&Bn(Ye)})}function zr(Ye){const Et=`N-${Ye[0]}`,Rt=q.get(Et);if(!Rt)return;const kt=Rt.anchors.get(`A-${Ye[1]}/N-${Ye[0]}`);if(!kt)return;const Lt=I.match(it,kt);Lt&&I.delete(Lt[0])}const Bn=Ye=>{let Et,Rt,kt=null;Array.isArray(Ye)?(Et=Ye[0].toString(),Rt=Ye[1].toString()):(Et=Ye.toString(),Rt=null);const Lt=`N-${Et}`,at=q.get(Lt);if(!at)return!1;if(Rt){const We=`A-${Rt}/${Lt}`;kt=at.anchors.get(We)||null}else{const We=lt(at.anchors),_t=Array.from(We.values());if(!_t.length)return!1;kt=_t.reduce((Tt,Vt)=>!Tt&&Vt.type==="output"?null:Vt.type==="output"?Tt:!Tt||lt(Vt.connected).size<lt(Tt.connected).size?Vt:Tt,null)}if(!kt)return!1;if(rr(it,kt),kt.store&&(Te()||re())){if(U()&&kt.type==="output")_()&&Se()&&Te()&&typeof Te().set=="function"&&typeof Te().update=="function"&&nc(Te(),dn(_)[Se()]=kt.store,dn(_));else if(j()&&kt.type==="input"){const{store:We,inputKey:_t}=kt;We&&_t&&typeof We.update=="function"&&We.update(Tt=>(re()&&(Tt[_t]=re()),Tt))}}return!0};Fe(()=>i(),()=>{var Ye;me(x,((Ye=i())==null?void 0:Ye.anchor)===it)}),Fe(()=>{},()=>{qa(me(S,it&&it.connected),"$connectedAnchors",r)}),Fe(()=>{},()=>{qa(me(E,it==null?void 0:it.direction),"$dynamicDirection",r)}),Fe(()=>(Gt(de()),C(X),a()),()=>{de()&&C(X)&&gte(C(X),a(),T)}),Fe(()=>(u(),Gt(ae())),()=>{u()===q.count()&&ae().length&&Bt()}),Fe(()=>(Gt(Xe()),c()),()=>{Xe()&&c()&&er(c())}),Fe(()=>(u(),C(Be)),()=>{u()===q.count()&&C(Be).length&&zt()}),Fe(()=>(C(X),f(),h(),a()),()=>{C(X)&&(f(),h(),a(),it.recalculatePosition())}),Fe(()=>(C(xe),g(),y(),m()),()=>{!C(xe)&&(g()||y()||m())?(me(xe,!0),vn()):!g()&&!y()&&C(xe)&&!m()&&(me(xe,!1),cancelAnimationFrame(Lm))}),Fe(()=>(h(),C(Ae)),()=>{if(h()){if(h().size<C(Ae))H("disconnection",{node:T,anchor:it});else if(h().size>C(Ae)){const Ye=Array.from(h()),Et=Ye[Ye.length-1];B("connection",{node:T,anchor:it,connectedNode:Et.node,connectedAnchor:Et})}me(Ae,h().size)}}),Qi(),Dn();var xn=mte(),jr=$t(xn);let jn;var hi=qt(jr);Xr(hi,t,"default",{get linked(){var Ye;return((Ye=h())==null?void 0:Ye.size)>=1},get hovering(){return C(ue)},get connecting(){return C(x)}},Ye=>{var Et=gr(),Rt=$t(Et);{var kt=Lt=>{const at=hn(()=>{var We;return((We=h())==null?void 0:We.size)>=1});cte(Lt,{get output(){return j()},get input(){return U()},get connecting(){return C(x)},get hovering(){return C(ue)},get bgColor(){return se()},get connected(){return C(at)}})};or(Rt,Lt=>{nt()||Lt(kt)})}rt(Ye,Et)}),Su(jr,Ye=>me(X,Ye),()=>C(X));var Qr=gt(jr,2);ds(Qr,1,()=>Array.from(h()),Ye=>Ye.id,(Ye,Et,Rt,kt)=>{var Lt=gr();const at=hn(()=>I.fetch(it,C(Et)));var We=$t(Lt);{var _t=Tt=>{const Vt=hn(()=>C(at).component);FC(Tt,{get edge(){return C(at)},children:(an,Wn)=>{var Mt=gr(),en=$t(Mt);Xr(en,t,"edge",{},Er=>{var Nr=gr(),Vr=$t(Nr);{var Ar=Xt=>{C(Vt)(Xt,{})},Sn=Xt=>{eE(Xt,{})};or(Vr,Xt=>{C(Vt)?Xt(Ar):Xt(Sn,!1)})}rt(Er,Nr)}),rt(an,Mt)},$$slots:{default:!0}})};or(We,Tt=>{C(at)&&C(at).source===it&&Tt(_t)})}rt(Ye,Lt)});var Hn=gt(Qr,2);{var kn=Ye=>{var Et=gr();const Rt=hn(()=>I.get("cursor"));var kt=$t(Et);{var Lt=at=>{const We=hn(()=>C(Rt).component);FC(at,{get edge(){return C(Rt)},children:(_t,Tt)=>{var Vt=gr(),an=$t(Vt);Xr(an,t,"edge",{},Wn=>{var Mt=gr(),en=$t(Mt);{var Er=Vr=>{C(We)(Vr,{})},Nr=Vr=>{eE(Vr,{})};or(en,Vr=>{C(We)?Vr(Er):Vr(Nr,!1)})}rt(Wn,Mt)}),rt(_t,Vt)},$$slots:{default:!0}})};or(kt,at=>{C(Rt)&&at(Lt)})}rt(Ye,Et)};or(Hn,Ye=>{C(x)&&Ye(kn)})}Ut(Ye=>{pt(jr,"id",it==null?void 0:it.id),jn=Rn(jr,1,"anchor-wrapper svelte-bazd6o",null,jn,Ye),pt(jr,"title",L()||"")},[()=>({locked:le()})],hn),fr("mouseenter",jr,()=>me(ue,!0)),fr("mouseleave",jr,()=>me(ue,!1)),fr("mousedown",jr,Ms(ro(lr))),fr("mouseup",jr,ro(er)),fr("touchstart",jr,Ms(ro(lr))),fr("touchend",jr,ro(er)),rt(e,xn),UE(t,"disconnect",zr);var di=Sr({disconnect:zr});return n(),di}var yte=Qt("<!> <!>",1),_te=Qt("<div></div> <div></div>",1),bte=Qt('<div><!> <p class="svelte-j5bq7k"> </p> <!></div>');function wte(e,t){xr(t,!1);const[r,n]=$n(),i=()=>He(m,"$borderRadius",r),s=()=>He(x,"$inputs",r),o=()=>He(S,"$outputs",r),a=()=>He(_,"$textColor",r),u=()=>He(y,"$label",r),c=()=>He(E,"$resizable",r),f=Rr("dynamic"),h=Rr("node");let g=ge(t,"selected",8);const y=h.label,m=h.borderRadius,_=h.textColor,x=h.inputs,S=h.outputs,E=h.resizable,A=lt(h.direction);let T=A==="TD",I=A==="TD",N=A!=="TD",p=A!=="TD";Dn();var P=bte();let O,q;var V=qt(P);{var W=Q=>{var de=yte(),ce=$t(de);ds(ce,1,()=>({length:s()}),mu,(Se,re)=>{Bf(Se,{$$events:{connection(ae){Cn.call(this,t,ae)},disconnection(ae){Cn.call(this,t,ae)}}})});var Te=gt(ce,2);ds(Te,1,()=>({length:o()}),mu,(Se,re)=>{Bf(Se,{$$events:{connection(ae){Cn.call(this,t,ae)},disconnection(ae){Cn.call(this,t,ae)}}})}),rt(Q,de)},G=Q=>{var de=_te(),ce=$t(de);Rn(ce,1,"input-anchors svelte-j5bq7k",null,{},{top:T,left:N}),ds(ce,5,()=>({length:s()}),mu,(Se,re)=>{Bf(Se,{input:!0,direction:T?"north":"west",$$events:{connection(ae){Cn.call(this,t,ae)},disconnection(ae){Cn.call(this,t,ae)}}})});var Te=gt(ce,2);Rn(Te,1,"output-anchors svelte-j5bq7k",null,{},{bottom:I,right:p}),ds(Te,5,()=>({length:o()}),mu,(Se,re)=>{Bf(Se,{output:!0,direction:T?"south":"east",$$events:{connection(ae){Cn.call(this,t,ae)},disconnection(ae){Cn.call(this,t,ae)}}})}),rt(Q,de)};or(V,Q=>{f?Q(W):Q(G,!1)})}var J=gt(V,2);let se;var K=qt(J),U=gt(J,2);{var j=Q=>{ate(Q,{width:!0,height:!0,rotation:!0})};or(U,Q=>{c()&&Q(j)})}Ut(Q=>{O=Rn(P,1,"default-node svelte-j5bq7k",null,O,Q),q=kr(P,"",q,{"border-radius":`${i()??""}px`}),se=kr(J,"",se,{color:a()}),Pu(K,u())},[()=>({selected:g()})],hn),rt(e,P),Sr(),n()}function WE(e,t){const r=GE(t);xr(t,!1);const[n,i]=$n(),s=()=>He(C(a),"$nodePosition",n),o=()=>He(Te,"$nodes",n),a=qe(),u=Rr("graph"),c=Rr("group");let f=ge(t,"position",28,()=>({x:0,y:0})),h=ge(t,"drop",8,!1),g=ge(t,"dimensions",8,null),y=ge(t,"id",8,0),m=ge(t,"bgColor",8,null),_=ge(t,"borderRadius",8,null),x=ge(t,"borderColor",8,null),S=ge(t,"borderWidth",8,null),E=ge(t,"selectionColor",8,null),A=ge(t,"textColor",8,null),T=ge(t,"resizable",8,!1),I=ge(t,"label",8,""),N=ge(t,"inputs",8,1),p=ge(t,"outputs",8,1),P=ge(t,"width",8,null),O=ge(t,"height",8,null),q=ge(t,"TD",8,!1),V=ge(t,"LR",8,!1),W=ge(t,"zIndex",8,1),G=ge(t,"editable",8,!0),J=ge(t,"locked",8,!1),se=ge(t,"rotation",8,0),K=ge(t,"edge",8,null),U=ge(t,"connections",24,()=>[]),j=ge(t,"useDefaults",8,!1),Q=ge(t,"center",8,!1),de=ge(t,"dynamic",8,!1),ce=ge(t,"title",8,"");const Te=u.nodes;Kr("dynamic",de());let Se=qe(),re=qe(!0);Pi(()=>{const Re=q()?"TD":V()?"LR":u.direction,nt=u.groupBoxes.get(c),Ve=u.nodes.count()+1;me(re,!r.default),(r.anchorWest||r.anchorEast||r.anchorNorth||r.anchorSouth)&&me(re,!1);const L=g()?g():P()||O()?{width:P()||O()||200,height:O()||P()||100}:C(re)?{width:200,height:100}:{width:0,height:0},B={id:y()||Ve,position:h()==="cursor"?{x:lt(u.cursor).x,y:lt(u.cursor).y}:nt?{x:lt(nt.position).x+f().x,y:lt(nt.position).y+f().y}:f(),dimensions:L,editable:G()||u.editable,label:I(),group:c,resizable:T(),inputs:N(),outputs:p(),zIndex:W(),direction:Re,locked:J(),rotation:se()};U().length&&(B.connections=U()),S()&&(B.borderWidth=S()),_()&&(B.borderRadius=_()),x()&&(B.borderColor=x()),E()&&(B.selectionColor=E()),A()&&(B.textColor=A()),m()&&(B.bgColor=m()),K()&&(B.edge=K()),me(Se,qee(B)),nt&&u.groups.update(H=>{const X=lt(H[c].nodes);return H[c].nodes.set(new Set([...X,C(Se)])),H}),u.nodes.add(C(Se),C(Se).id)}),Eh(()=>{u.nodes.delete(C(Se).id)});function ae(Re){C(Se)&&C(Se).connections.set([Re])}function ne(Re){if(!C(Se))return;(Array.isArray(Re)?Re:[Re]).forEach(Ve=>{const[L,B]=Array.isArray(Ve)?Ve:[Ve,null],H=`N-${L}`,X=u.nodes.get(H);if(!X)return;let xe=null;const ue=B?`A-${B}/${H}`:null;ue&&(xe=X.anchors.get(ue));const Ae=u.edges.match(C(Se),X,xe);Ae.length&&u.edges.delete(Ae[Ae.length-1])})}Kr("connect",ae),Kr("disconnect",ne);let te=qe(f());Fe(()=>(C(Se),Gt(U())),()=>{C(Se)&&C(Se).connections.set(U())}),Fe(()=>(C(Se),Gt(m())),()=>{C(Se)&&C(Se).bgColor.set(m())}),Fe(()=>(C(Se),Gt(I())),()=>{C(Se)&&C(Se).label.set(I())}),Fe(()=>(C(Se),Gt(A())),()=>{C(Se)&&C(Se).textColor.set(A())}),Fe(()=>(C(Se),Gt(x())),()=>{C(Se)&&C(Se).borderColor.set(x())}),Fe(()=>(C(Se),Gt(E())),()=>{C(Se)&&C(Se).selectionColor.set(E())}),Fe(()=>(C(Se),Gt(T())),()=>{C(Se)&&C(Se).resizable.set(T())}),Fe(()=>(C(Se),Gt(G())),()=>{C(Se)&&C(Se).editable.set(G())}),Fe(()=>(C(Se),Gt(J())),()=>{C(Se)&&C(Se).locked.set(J())}),Fe(()=>(C(Se),Gt(N())),()=>{C(Se)&&C(Se).inputs.set(N())}),Fe(()=>(C(Se),Gt(p())),()=>{C(Se)&&C(Se).outputs.set(p())}),Fe(()=>(C(Se),Gt(W())),()=>{C(Se)&&C(Se).zIndex.set(W())}),Fe(()=>C(Se),()=>{var Re;qa(me(a,C(Se)&&((Re=C(Se))==null?void 0:Re.position)),"$nodePosition",n)}),Fe(()=>(C(Se),C(te),s(),Gt(f())),()=>{if(C(Se)){const{x:Re,y:nt}=C(te),{x:Ve,y:L}=s(),{x:B,y:H}=f();(B!==Ve||H!==L)&&(B!==Re||H!==nt?(me(te,f()),C(Se).position.set(f())):(me(te,s()),f(s())))}}),Fe(()=>(C(Se),Gt(N())),()=>{C(Se)&&C(Se).inputs.set(N())}),Fe(()=>(C(Se),Gt(p())),()=>{C(Se)&&C(Se).outputs.set(p())}),Qi(),Dn();var le=gr(),Xe=$t(le);{var Ne=Re=>{const nt=hn(()=>Q()||h()==="center"),Ve=hn(()=>!!g()||!!P()||!!O()||C(re)||!1);tte(Re,{get node(){return C(Se)},get center(){return C(nt)},get isDefault(){return C(re)},get useDefaults(){return j()},get dimensionsProvided(){return C(Ve)},get nodeStore(){return u.nodes},get locked(){return u.locked},get groups(){return u.groups},get title(){return ce()},get maxZIndex(){return u.maxZIndex},get centerPoint(){return u.center},get cursor(){return u.cursor},get activeGroup(){return u.activeGroup},get editing(){return u.editing},get initialNodePositions(){return u.initialNodePositions},$$events:{nodeClicked(L){Cn.call(this,t,L)},nodeMount(L){Cn.call(this,t,L)},nodeReleased(L){Cn.call(this,t,L)},duplicate(L){Cn.call(this,t,L)}},children:BE,$$slots:{default:(L,B)=>{const H=hn(()=>B.destroy),X=hn(()=>B.selected),xe=hn(()=>B.grabHandle);var ue=gr(),Ae=$t(ue);Xr(Ae,t,"default",{get selected(){return C(X)},get grabHandle(){return C(xe)},disconnect:ne,connect:ae,get node(){return C(Se)},get destroy(){return C(H)}},Ce=>{var Be=gr(),Le=$t(Be);{var Ie=we=>{wte(we,{get selected(){return C(X)},$$events:{connection(je){Cn.call(this,t,je)},disconnection(je){Cn.call(this,t,je)}}})};or(Le,we=>{C(re)&&we(Ie)})}rt(Ce,Be)}),rt(L,ue)},anchorWest:(L,B)=>{var H=gr(),X=$t(H);Xr(X,t,"anchorWest",{},null),rt(L,H)},anchorEast:(L,B)=>{var H=gr(),X=$t(H);Xr(X,t,"anchorEast",{},null),rt(L,H)},anchorNorth:(L,B)=>{var H=gr(),X=$t(H);Xr(X,t,"anchorNorth",{},null),rt(L,H)},anchorSouth:(L,B)=>{var H=gr(),X=$t(H);Xr(X,t,"anchorSouth",{},null),rt(L,H)}}})};or(Xe,Re=>{C(Se)&&o().get(C(Se).id)&&Re(Ne)})}rt(e,le),Sr(),i()}var xte=Qt('<div class="editor svelte-1nv0yho"><span style="color:white; font-size:45px">Editor</span> <button style="position:absolute; top:10px;right:10px;">X</button> <!> <button>Delete Node</button> <button>Resize Node</button></div>');function Ste(e,t){xr(t,!1);const r=qe();let n=ge(t,"editing",8);const i=Rr("graph");Kr("graph",i),Kr("textStore",n().label),Kr("colorStore",n().bgColor);let s=qe({x:150,y:50});function o(c){c.preventDefault(),me(s,{x:c.clientX,y:c.clientY}),i.editing.set(n())}function a(){i.nodes.delete(n().id),i.editing.set(null)}function u(){const c=n().id,f=i.nodes.get(c);if(f){const h=f.dimensions.width,g=f.dimensions.height,y=prompt("Enter new width (for example:250):",h?h.toString():""),m=prompt("Enter new height (for example:200):",g?g.toString():"");if(y===null||m===null)return;f.dimensions.width.set(parseInt(y,10)||0),f.dimensions.height.set(parseInt(m,10)||0),f.resizingWidth.set(!0),f.resizingHeight.set(!0)}}Fe(()=>{},()=>{me(r,i.cursor)}),Qi(),Dn(),WE(e,{zIndex:1/0,get position(){return C(s)},bgColor:"white",id:"editor",children:(c,f)=>{var h=xte(),g=gt(qt(h),2),y=gt(g,2);Zee(y,{placeholder:"Node Label"});var m=gt(y,2),_=gt(m,2);fr("click",g,()=>i.editing.set(null)),fr("click",m,a),fr("click",_,u),fr("contextmenu",h,o),rt(c,h)},$$slots:{default:!0}}),Sr()}var Ete=Qt("<!> <!>",1),Ate=Qt('<section role="presentation" class="svelvet-wrapper svelte-13nq7cv"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></section>');function Tte(e,t){xr(t,!1);const[r,n]=$n(),i=()=>He(L,"$groups",r),s=()=>He(nt,"$dimensionsStore",r),o=()=>He(Ae,"$nodeBounds",r),a=()=>He(Xe,"$graphDOMElement",r),u=()=>He(hs,"$initialClickPosition",r),c=()=>He(H,"$selected",r),f=()=>He(X,"$activeGroup",r),h=()=>He(ra,"$connectingFrom",r),g=()=>He(JS,"$touchDistance",r),y=()=>He(Re,"$scale",r),m=()=>He(Ve,"$translation",r),_=()=>He(ue,"$editing",r),x=qe();let S=ge(t,"graph",8),E=ge(t,"width",8),A=ge(t,"height",8),T=ge(t,"minimap",12,!1),I=ge(t,"controls",12,!1),N=ge(t,"toggle",8,!1),p=ge(t,"fixedZoom",8,!1),P=ge(t,"pannable",8,!0),O=ge(t,"disableSelection",8,!1),q=ge(t,"ZOOM_INCREMENT",8,.1),V=ge(t,"PAN_INCREMENT",8,50),W=ge(t,"PAN_TIME",8,250),G=ge(t,"MAX_SCALE",8,3),J=ge(t,"MIN_SCALE",8,.2),se=ge(t,"selectionColor",8),K=ge(t,"backgroundExists",8),U=ge(t,"fitView",8,!1),j=ge(t,"trackpadPan",8),Q=ge(t,"modifier",8),de=ge(t,"theme",12,"light"),ce=ge(t,"title",8),Te=ge(t,"drawer",12,!1),Se=ge(t,"contrast",8,!1);console.log("Initial Graph drawer prop:",Te());let re;const ae=El(),ne={},te=Ke(!1),le=Ke(0),Xe=Ke(null),Ne=S().cursor,Re=S().transforms.scale,nt=S().dimensions,Ve=S().transforms.translation,L=S().groups,B=S().groupBoxes,H=i().selected.nodes,X=S().activeGroup,xe=S().initialNodePositions,ue=S().editing,Ae=S().bounds.nodeBounds;let Ce=0,Be=1,Le=qe({x:0,y:0,top:0,left:0}),Ie=qe(!1),we=qe(!1),je=qe(!1),ct=qe(!1),yt=!1,ft=qe(!1),it,Wt=qe(null),yr=qe(null),er=qe(null),lr=qe(null),Lr=qe(null);const Br={id:null,position:S().cursor,offset:Ke({x:0,y:0}),connected:Ke(new Set),dynamic:Ke(!1),edge:null,edgeColor:Ke(null),direction:Ke("self"),inputKey:null,type:"output",moving:Va(!1),store:null,mounted:Ke(!0),rotation:Va(0),node:{zIndex:Ke(1/0),rotating:Ke(!1),position:S().cursor,dimensions:{width:Ke(0),height:Ke(0)}}};Kr("graphDOMElement",Xe),Kr("cursorAnchor",Br),Kr("duplicate",te),Kr("graph",S()),Kr("transforms",S().transforms),Kr("dimensions",S().dimensions),Kr("locked",S().locked),Kr("groups",S().groups),Kr("bounds",S().bounds),Kr("edgeStore",S().edges),Kr("nodeStore",S().nodes),Kr("mounted",le),Pi(()=>{console.log("Graph component mounted with drawer1:",Te()),Un()});async function wn(){await BJ(),io.set(!0);const{x:Ze,y:vt,scale:ht}=Nee(it,o());Ze!==null&&vt!==null&&ht!==null&&(S().transforms.scale.set(ht),Ve.set({x:Ze,y:vt})),io.set(!1),me(ft,!0)}async function rr(){me(yr,(await If(async()=>{const{default:Ze}=await Promise.resolve().then(()=>Hte);return{default:Ze}},void 0,import.meta.url)).default)}async function Or(){me(Wt,(await If(async()=>{const{default:Ze}=await Promise.resolve().then(()=>Zte);return{default:Ze}},void 0,import.meta.url)).default)}async function mn(){me(er,(await If(async()=>{const{default:Ze}=await import("./Controls-DGNygHja.js");return{default:Ze}},__vite__mapDeps([0,1]),import.meta.url)).default)}async function yn(){me(lr,(await If(async()=>{const{default:Ze}=await import("./DrawerController-2Rg8fGE3.js");return{default:Ze}},__vite__mapDeps([2,1,3]),import.meta.url)).default)}async function vn(){me(Lr,(await If(async()=>{const{default:Ze}=await import("./ContrastTheme-BUcD8h0O.js");return{default:Ze}},[],import.meta.url)).default)}function Un(){if(!a())return;const Ze=a().getBoundingClientRect();it={top:Ze.top,left:Ze.left,bottom:Ze.bottom,right:Ze.right,width:Ze.width,height:Ze.height},S().dimensions.set(it),U()==="resize"&&wn()}function ri(Ze){var ht,dt;if(C(we)){const nr=`${ree()}/${S().id}`,Hr=lt(Ne),cn=Hr.x-u().x,Gr=Hr.y-u().y,_n=Math.min(u().y,u().y+Gr),zn=Math.min(u().x,u().x+cn),vi={width:Ke(Math.abs(cn)),height:Ke(Math.abs(Gr))},Go=Ke({x:zn,y:_n}),ws={group:Ke(nr),dimensions:vi,position:Go,color:Ke(YQ()),moving:Ke(!1)};B.add(ws,nr),Array.from(c()).forEach(Xn=>{Xn.group.set(nr)}),L.update(Xn=>{const _a={parent:Ke(ws),nodes:Ke(new Set([...c(),ws]))};return Xn[nr]=_a,Xn}),Ot(H,new Set),me(we,!1),me(Ie,!1)}f()&&Array.from(lt(i()[f()].nodes)).forEach(nr=>{const Hr=mp(lt(nr.position).x,lt(nr.position).y);nr.position.set(Hr),nr.moving.set(!1)});const vt=S().edges.get("cursor");vt&&(S().edges.delete("cursor"),vt.disconnect||ae("edgeDrop",{cursor:lt(Ne),source:{node:(ht=h())==null?void 0:ht.anchor.node.id.slice(2),anchor:(dt=h())==null?void 0:dt.anchor.id.split("/")[0].slice(2)}})),Ot(X,null),Ot(hs,{x:0,y:0}),Ot(xe,[]),me(Ie,!1),me(ct,!1),Ot(io,!1),Ze.shiftKey||ra.set(null),Kc(Le,C(Le).y=0),Kc(Le,C(Le).x=0)}function zt(Ze){if(!P()&&!(Ze.shiftKey||Ze.metaKey)||Ze.button===2)return;a()&&a().focus();const{clientX:vt,clientY:ht}=Ze;if(Ot(hs,lt(Ne)),Ze.shiftKey||Ze.metaKey){Ze.preventDefault(),me(Ie,!0);const{top:dt,left:Ct}=C(x);Kc(Le,C(Le).y=ht-dt),Kc(Le,C(Le).x=vt-Ct),Kc(Le,C(Le).top=dt),Kc(Le,C(Le).left=Ct),Ze.shiftKey&&Ze.metaKey?me(we,!0):me(we,!1),Ze.metaKey&&!Ze.shiftKey?me(je,!0):me(je,!1)}else me(ct,!0),Ot(H,new Set),Ot(H,c())}function Bt(Ze){Ot(H,new Set),Ot(H,c()),Ot(hs,lt(Ne)),me(ct,!0),Ze.touches.length===2&&(Bn(),Ce=g(),Be=y())}function zr(){me(ct,!1),yt=!1}function Bn(){yt||(yt=!0,re=requestAnimationFrame(xn))}function xn(){if(!yt){cancelAnimationFrame(re);return}const vt=g()/Ce;Ot(Re,Be*vt),re=requestAnimationFrame(xn)}function jr(Ze){const{key:vt,code:ht}=Ze,dt=Ze.target;if(!(dt.tagName=="INPUT"||dt.tagName=="TEXTAREA")){if(ht==="KeyA"&&Ze[`${Q()}Key`]){const Ct=S().nodes.getAll().filter(nr=>!lt(nr.locked));Ot(H,new Set(Ct))}else if(DC(vt))di(vt,Ze);else if(vt==="=")qC(-1,S().dimensions,S().transforms,q());else if(vt==="-")qC(1,S().dimensions,S().transforms,q());else if(vt==="0")wn();else if(vt==="Control")i().selected.nodes.set(new Set);else if(ht==="KeyD"&&Ze[`${Q()}Key`])te.set(!0),setTimeout(()=>{te.set(!1)},100);else if(vt==="Tab"&&(Ze.altKey||Ze.ctrlKey))hi();else if(vt==="l")de(de()==="light"?"dark":"light");else if(vt==="d")Te(!Te());else if(vt==="m")T(!T());else if(vt==="c")I(!I());else if(vt==="e"){const Ct=Array.from(c())[0];S().editing.set(Ct)}else return;Ze.preventDefault()}}function jn(Ze){var Gr;Ze.preventDefault();const vt=(Gr=a())==null?void 0:Gr.getBoundingClientRect();if(!vt)return;const ht=Ze.clientX-vt.left,dt=Ze.clientY-vt.top,{x:Ct,y:nr}=mp(ht,dt);if(console.log(`Dropped Node at Snapped Position: (${Ct}, ${nr})`),!cn)return;const Hr={id:`node-${Date.now()}`,rotation:Ke(0),position:Ke({x:Ct,y:nr}),moving:Ke(!1),label:Ke("New Node"),dimensions:{width:Ke(200),height:Ke(100)},inputs:Ke(2),outputs:Ke(2),anchors:Ke([]),group:Ke(null),collapsed:Ke(!1),resizingWidth:Ke(!1),resizingHeight:Ke(!1),rotating:Ke(!1),editable:Ke(!0),locked:Ke(!1),recalculateAnchors:_n=>{},resizable:Ke(!0),zIndex:Ke(1),edge:null,direction:Ke("TD"),borderRadius:Ke(5),borderWidth:Ke(1),connections:Ke([]),bgColor:Ke("#007bff"),borderColor:Ke("#000"),selectionColor:Ke("#ff0000"),textColor:Ke("#fff")};let cn=null;S().nodes.add(Hr,Hr.id),cn=null}function hi(){const Ze=S().nodes.getAll(),vt=Ze.findIndex(dt=>c().has(dt)),ht=vt+1;c().delete(Ze[vt]),c().add(Ze[ht])}function Qr(Ze){const{key:vt}=Ze;DC(vt)?(clearInterval(ne[vt]),delete ne[vt]):vt==="Shift"&&ra.set(null)}function Hn(Ze){if(p())return;const vt=Ze.shiftKey?.15:1,{clientX:ht,clientY:dt,deltaY:Ct}=Ze,nr=m(),Hr={x:ht,y:dt};if((j()||Ze.metaKey)&&Ct%1===0){Ot(Ve,{x:nc(Ve,dn(m).x-=Ze.deltaX,dn(m)),y:nc(Ve,dn(m).y-=Ze.deltaY,dn(m))});return}if(y()>=G()&&Ct<0||y()<=J()&&Ct>0)return;const cn=Math.min(.009*vt*Math.abs(Ct),.08),Gr=g7(y(),Math.sign(Ct),cn),_n=v7(y(),Gr,nr,Hr,it);Re.set(Gr),Ve.set(_n)}function kn(Ze){Ze.preventDefault()}function di(Ze,vt){const ht=vt.shiftKey?2:1,dt=Ze==="ArrowLeft"||Ze==="ArrowUp"?1:-1,Ct=Ze==="ArrowLeft"||Ze==="ArrowRight",nr=Ct?m().x:m().y,Hr=nr+dt*V()*ht;if(!ne[Ze]){const cn=performance.now();let Gr=setInterval(()=>{const _n=performance.now()-cn;if(c().size===0){const zn=nr+(Hr-nr)*(_n/W());Ve.set({x:Ct?zn:m().x,y:Ct?m().y:zn})}else{const zn={x:Ct?-dt*2:0,y:Ct?0:-dt*2};Array.from(c()).forEach(vi=>{const Go=lt(vi.position);let ws;const Xn=lt(vi.group),_a=lt(S().groupBoxes);if(Xn&&(ws=_a.get(Xn)),ws){const ts=lt(vi.dimensions.width),ba=lt(vi.dimensions.height),$o=b7(ws,ts,ba);_7(Go,zn,vi.position,$o)}else{const ts={x:Go.x+zn.x,y:Go.y+zn.y},ba=mp(ts.x,ts.y);vi.position.set(ba)}})}},2);ne[Ze]=Gr}}Fe(()=>s(),()=>{me(x,s())}),Fe(()=>Gt(de()),()=>{de()&&document.documentElement.setAttribute("svelvet-theme",de())}),Fe(()=>(C(ft),Gt(U())),()=>{!C(ft)&&U()&&wn()}),Fe(()=>(Gt(N()),C(Wt)),()=>{N()&&!C(Wt)&&Or()}),Fe(()=>(Gt(T()),C(yr)),()=>{T()&&!C(yr)&&rr()}),Fe(()=>(Gt(I()),C(er)),()=>{I()&&!C(er)&&mn()}),Fe(()=>(Gt(Te()),C(lr)),()=>{Te()&&!C(lr)&&yn()}),Fe(()=>(Gt(Se()),C(Lr)),()=>{Se()&&!C(Lr)&&vn()}),Fe(()=>Gt(Te()),()=>{console.log("Reactive Graph drawer prop:",Te())}),Qi(),Dn();var Ye=Ate();fr("touchend",ol,ri),fr("mouseup",ol,ri),fr("resize",ol,Un),fr("scroll",ol,Un),pt(Ye,"tabindex",0);let Et;var Rt=qt(Ye);Wee(Rt,{get isMovable(){return C(ct)},children:(Ze,vt)=>{var ht=Ete(),dt=$t(ht);{var Ct=Hr=>{Ste(Hr,{get editing(){return _()}})};or(dt,Hr=>{_()&&Hr(Ct)})}var nr=gt(dt,2);Xr(nr,t,"default",{},null),rt(Ze,ht)},$$slots:{default:!0}});var kt=gt(Rt,2);{var Lt=Ze=>{var vt=gr(),ht=$t(vt);Xr(ht,t,"background",{},null),rt(Ze,vt)},at=Ze=>{Aee(Ze,{})};or(kt,Ze=>{K()?Ze(Lt):Ze(at,!1)})}var We=gt(kt,2);{var _t=Ze=>{var vt=gr(),ht=$t(vt);Ju(ht,()=>C(yr),(dt,Ct)=>{Ct(dt,{})}),rt(Ze,vt)};or(We,Ze=>{T()&&Ze(_t)})}var Tt=gt(We,2);{var Vt=Ze=>{var vt=gr(),ht=$t(vt);Ju(ht,()=>C(er),(dt,Ct)=>{Ct(dt,{})}),rt(Ze,vt)};or(Tt,Ze=>{I()&&Ze(Vt)})}var an=gt(Tt,2);{var Wn=Ze=>{var vt=gr(),ht=$t(vt);Ju(ht,()=>C(Wt),(dt,Ct)=>{Ct(dt,{})}),rt(Ze,vt)};or(an,Ze=>{N()&&Ze(Wn)})}var Mt=gt(an,2);{var en=Ze=>{var vt=gr(),ht=$t(vt);Ju(ht,()=>C(lr),(dt,Ct)=>{Ct(dt,{})}),rt(Ze,vt)};or(Mt,Ze=>{Te()&&Ze(en)})}var Er=gt(Mt,2);{var Nr=Ze=>{var vt=gr(),ht=$t(vt);Ju(ht,()=>C(Lr),(dt,Ct)=>{Ct(dt,{})}),rt(Ze,vt)};or(Er,Ze=>{Se()&&Ze(Nr)})}var Vr=gt(Er,2);Xr(Vr,t,"minimap",{},null);var Ar=gt(Vr,2);Xr(Ar,t,"drawer",{},null);var Sn=gt(Ar,2);Xr(Sn,t,"controls",{},null);var Xt=gt(Sn,2);Xr(Xt,t,"toggle",{},null);var pi=gt(Xt,2);Xr(pi,t,"contrast",{},null);var wi=gt(pi,2);{var Fi=Ze=>{oee(Ze,{get creating(){return C(we)},get anchor(){return C(Le)},get graph(){return S()},get adding(){return C(je)},get color(){return se()}})};or(wi,Ze=>{C(Ie)&&!O()&&Ze(Fi)})}Su(Ye,Ze=>Ot(Xe,Ze),()=>a()),Ut(()=>{pt(Ye,"id",S().id),pt(Ye,"title",ce()),Et=kr(Ye,"",Et,{width:E()?E()+"px":"100%",height:A()?A()+"px":"100%",cursor:P()?"move":"default"})}),fr("wheel",Ye,Ms(Hn)),fr("mousedown",Ye,Xf(Ms(zt))),fr("touchend",Ye,Ms(zr)),fr("touchstart",Ye,Xf(Ms(Bt))),fr("keydown",Ye,jr),fr("keyup",Ye,Qr),fr("dragover",Ye,Ms(kn)),fr("drop",Ye,jn),rt(e,Ye),Sr(),n()}function Pte(e){e.parentNodes.forEach(s=>Cte(s));const[t,r]=Rte(e);Ite(t,e),Ote(t);for(let s=0;s<10;s++){let o=!1;for(let a=0;a<=r;a++)if(t[a])for(let u=0;u<t[a].length;u++){const c=t[a][u],f=kte(t,c,u);f&&(ic(t[a],u,f),o=!0)}if(!o)break}const n=Lte(t);for(let s=0;s<10&&Nte(t,n);s++);for(let s=0;s<2;s++){let o=!1;for(let a=0;a<=r;a++)for(let u=0;u<t[a].length;u++){const c=t[a][u],f=Mte(t,c,u);f&&(ic(t[a],u,f),o=!0)}if(!o)break}const i=[];for(let s=0;s<=r;s++)i.push(t[s]);return i}function Cte(e,t=0,r=0){const n=[],i=(s,o=0,a=0)=>{s.depth=Math.max(s.depth,o),s.nesting=Math.max(s.nesting,a),n.push(s);for(const u of s.children){const{node:c,length:f}=u;i(c,f+o,a+1)}};i(e,t,r);for(const s of n)if(s.children.length){s.nesting=s.children[0].node.nesting-1,s.depth=s.children[0].node.depth-s.children[0].length;for(const o of s.children)s.nesting=Math.min(s.nesting,o.node.nesting-1),s.depth=Math.min(s.depth,o.node.depth-o.length)}}function Rte(e){let t=0;const r={};for(const n in e.nodeList){const{depth:i,parents:s,children:o,type:a,data:u}=e.nodeList[n];t=Math.max(t,i),r[i]||(r[i]=[]);const c={id:n,label:u.content,children:[],parents:[],layer:i,type:a.trim()};u.props&&(c.propsId=u.props.trim());for(const f of s)c.parents.push(f.node.id);for(const f of o)c.children.push(f.node.id);r[i].push(c)}return[r,t]}function Ite(e,t){for(const r in t.nodeList)for(const n of t.nodeList[r].children)if(n.node.depth-1>t.nodeList[r].depth){const i=t.nodeList[r].depth+1,s=n.node.depth-1,o=[];let a=0;for(let u=i;u<=s;u++){const c={id:`GHOST_${n.node.id}_${a}`,label:"",children:[],parents:[],layer:u,ignore:!0};o.push(c),a++}for(const u of n.node.parents)o[0].parents.push(u.node.id);o[o.length-1].children.push(n.node.id);for(let u=0;u<o.length-1;u++)o[u].children.push(`GHOST_${n.node.id}_${u+1}`);for(let u=s;u>=i;u--)o.length>0&&e[u].push(o[0]);for(const u of e[t.nodeList[r].depth])u.id===r&&(u.children.push(o[0].id),u.children=u.children.filter(c=>c!==n.node.id))}}function Ote(e){let t=0;for(const r in e)t=Math.max(e[r].length,t);for(const r in e)if(e[r].length<t){const n=Array.from({length:t-e[r].length},()=>({id:"NULL_NODE",children:[],parents:[],layer:parseInt(r),ignore:!0}));e[r]=e[r].concat(n)}}function BC(e,t,r){let n=0,i=0;for(const s of t.parents){for(let o=0;o<e[t.layer-1].length;o++)if(s===e[t.layer-1][o].id){n+=Math.abs(r-o);break}i++}for(const s of t.children){for(let o=0;o<e[t.layer+1].length;o++)if(s===e[t.layer+1][o].id){n+=Math.abs(r-o);break}i++}return isNaN(n/i)?0:n/i}function zC(e,t,r){let n=0,i=0;for(const s of t.parents){for(let o=0;o<e[t.layer-1].length;o++)if(s===e[t.layer-1][o].id){n+=Math.abs(r-o);break}i++}return isNaN(n/i)?0:n/i}function VC(e,t,r){let n=0,i=0;for(const s of t.children){for(let o=0;o<e[t.layer+1].length;o++)if(s===e[t.layer+1][o].id){n+=Math.abs(r-o);break}i++}return isNaN(n/i)?0:n/i}function Mte(e,t,r){const n=tE(e,t.layer);let i=0;t.layer===0?i=VC(e,t,r):i=zC(e,t,r);let s=i,o=r;for(let a=0;a<e[t.layer].length;a++)if(e[t.layer][a].id==="NULL_NODE"){ic(e[t.layer],r,a);const c=tE(e,t.layer);let f=0;t.layer===0?f=VC(e,t,a):f=zC(e,t,a),c<=n&&f<s&&(s=f,o=a),ic(e[t.layer],a,r)}return o===r?null:o}function kte(e,t,r){const n={};let i=1/0,s=0;for(let o=0;o<e[t.layer].length;o++){const a=BC(e,t,o),u=BC(e,e[t.layer][o],r);n[o]=a+u}for(const o in n)n[o]<i&&(i=n[o],s=parseInt(o));return s===r?null:s}function ic(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Lte(e){const t=[];for(const r in e)for(const n of e[r])t.push(n);return t.sort((r,n)=>n.parents.length+n.children.length-(r.parents.length+r.children.length))}function tE(e,t){let r=0;for(let n=0;n<e[t].length;n++){const i=e[t][n],s=[],o=[];if(e[t-1])for(let a=n+1;a<e[t-1].length;a++)i.parents.includes(e[t-1][a].id)&&s.push(a);if(e[t+1])for(let a=n+1;a<e[t+1].length;a++)i.children.includes(e[t+1][a].id)&&o.push(a);for(let a=n+1;a<e[t].length;a++){const u=e[t][a];if(s.length)for(let c=0;c<e[t-1].length;c++)u.parents.includes(e[t-1][c].id)&&s.forEach(f=>{c<f&&r++});if(o.length)for(let c=0;c<e[t+1].length;c++)u.children.includes(e[t+1][c].id)&&o.forEach(f=>{c<f&&r++})}}return r}function Nte(e,t){let r=!1;for(const n of t){if(n.children.length+n.parents.length===0)return r;let i=0;for(let a=0;a<e[n.layer].length;a++)if(e[n.layer][a].id===n.id){i=a;break}let s=1/0,o=i;for(let a=0;a<e[n.layer].length;a++){ic(e[n.layer],i,a);const u=tE(e,n.layer);u<s&&(s=u,o=a),ic(e[n.layer],a,i)}o!==i&&(ic(e[n.layer],i,o),r=!0)}return r}function qte(e,t){xr(t,!1);let r=ge(t,"mermaid",8,""),n=ge(t,"mermaidConfig",24,()=>({}));const i=JQ(r());Kr("flowchart",i);const s=Pte(i),o=Rr("graph"),a=100,u=100;let c;Pi(()=>{o.nodes.subscribe(y=>c=Object.fromEntries(y));let g=0;for(const y of s){let m=0,_=-1/0;for(const x of y)x.ignore||(c[`N-${x.id}`].position.update(()=>({x:m,y:g})),c[`N-${x.id}`].dimensions.width.subscribe(S=>m+=S),c[`N-${x.id}`].dimensions.height.subscribe(S=>_=Math.max(_,S))),m+=a;g+=_+u}}),Dn();var f=gr(),h=$t(f);ds(h,1,()=>s,mu,(g,y)=>{var m=gr(),_=$t(m);ds(_,1,()=>C(y),mu,(x,S)=>{var E=gr(),A=$t(E);{var T=I=>{const N=hn(()=>C(S).children.map(p=>[p,"1"]));WE(I,lv({get label(){return C(S).label},get id(){return C(S).id},TD:!0},()=>n()[C(S).id],{get connections(){return C(N)}}))};or(A,I=>{C(S).ignore||I(T)})}rt(x,E)}),rt(g,m)}),rt(e,f),Sr()}function Dte(e){var n,i;const t=JSON.parse(e);return m7(t.id,{...t,editable:t.editable,direction:t.direction,locked:t.locked,zoom:((n=t.transforms)==null?void 0:n.scale)??1,translation:((i=t.transforms)==null?void 0:i.translation)??{x:0,y:0},edge:t.edge})}var Fte=Qt("<!> <!>",1),Bte=Qt('<div class="svelvet-temp svelte-lsy29y"></div>');function zte(e,t){const r=GE(t);xr(t,!1);const n=qe(),i=qe();let s=ge(t,"mermaid",8,""),o=ge(t,"theme",8,"light"),a=ge(t,"id",8,0),u=ge(t,"snapTo",8,0),c=ge(t,"zoom",8,1),f=ge(t,"TD",8,!1),h=ge(t,"editable",8,!0),g=ge(t,"locked",8,!1),y=ge(t,"width",8,0),m=ge(t,"height",8,0),_=ge(t,"minimap",8,!1),x=ge(t,"controls",8,!1),S=ge(t,"toggle",8,!1),E=ge(t,"drawer",8,!1),A=ge(t,"contrast",8,!1),T=ge(t,"fitView",8,!1),I=ge(t,"selectionColor",8,"lightblue"),N=ge(t,"edgeStyle",8,"bezier"),p=ge(t,"endStyles",24,()=>[null,null]),P=ge(t,"edge",8,null),O=ge(t,"disableSelection",8,!1),q=ge(t,"mermaidConfig",24,()=>({})),V=ge(t,"translation",24,()=>({x:0,y:0})),W=ge(t,"trackpadPan",8,!1),G=ge(t,"modifier",8,"meta"),J=ge(t,"raiseEdgesOnSelect",8,!1),se=ge(t,"edgesAboveNode",8,!1),K=ge(t,"title",8,""),U=ge(t,"fixedZoom",8,!1),j=ge(t,"pannable",8,!0);const Q=El();let de=qe(null),ce=f()?"TD":"LR";Kr("snapTo",u()),Kr("edgeStyle",N()),Kr("endStyles",p()),Kr("graphEdge",P()),Kr("raiseEdgesOnSelect",J()),Kr("edgesAboveNode",se()),Kr("graph",C(de)),Pi(()=>{console.log("Graph component mounted with drawer:",E());const te=localStorage.getItem("state");if(console.log("stateObject during onMount:",te),te)me(de,Dte(te)),console.log("This is the graph set using reloadStore",C(de)),Yf.add(C(de),C(de).id),console.log("graphStore updated",C(de));else{let le=`G-${a()||Yf.count()+1}`;me(de,m7(le,{zoom:c(),direction:ce,editable:h(),locked:g(),translation:V()})),Yf.add(C(de),le)}});function Te(te,le){if(!C(de))return;const Xe=`N-${te[0]}`,Ne=C(de).nodes.get(Xe);if(!Ne)return;const Re=Ne.anchors.get(`A-${te[1]}/N-${te[0]}`);if(!Re)return;const nt=`N-${le[0]}`,Ve=C(de).nodes.get(nt);if(!Ve)return;const L=Ve.anchors.get(`A-${le[1]}/N-${le[0]}`);if(!L)return;const B=C(de).edges.match(Re,L);B&&C(de).edges.delete(B[0])}Fe(()=>{},()=>{me(n,r.background)}),Fe(()=>C(de),()=>{me(i,C(de)&&C(de).edges)}),Fe(()=>(C(de),Gt(c())),()=>{C(de)&&C(de).transforms.scale.set(c())}),Fe(()=>C(i),()=>{C(i)&&C(i).onEdgeChange((te,le)=>{Q(le,{sourceAnchor:te.source,targetAnchor:te.target,sourceNode:te.source.node,targetNode:te.target.node})})}),Qi(),Dn();var Se=gr(),re=$t(Se);{var ae=te=>{Tte(te,{get width(){return y()},get height(){return m()},get toggle(){return S()},get backgroundExists(){return C(n)},get minimap(){return _()},get graph(){return C(de)},get fitView(){return T()},get fixedZoom(){return U()},get pannable(){return j()},get theme(){return o()},get drawer(){return E()},get controls(){return x()},get selectionColor(){return I()},get disableSelection(){return O()},get trackpadPan(){return W()},get modifier(){return G()},get title(){return K()},get contrast(){return A()},$$events:{edgeDrop(le){Cn.call(this,t,le)}},children:(le,Xe)=>{var Ne=Fte(),Re=$t(Ne);{var nt=L=>{qte(L,{get mermaid(){return s()},get mermaidConfig(){return q()}})};or(Re,L=>{s().length&&L(nt)})}var Ve=gt(Re,2);Xr(Ve,t,"default",{},null),rt(le,Ne)},$$slots:{default:!0,minimap:(le,Xe)=>{var Ne=gr(),Re=$t(Ne);Xr(Re,t,"minimap",{},null),rt(le,Ne)},controls:(le,Xe)=>{var Ne=gr(),Re=$t(Ne);Xr(Re,t,"controls",{},null),rt(le,Ne)},background:(le,Xe)=>{var Ne=gr(),Re=$t(Ne);Xr(Re,t,"background",{},null),rt(le,Ne)},toggle:(le,Xe)=>{var Ne=gr(),Re=$t(Ne);Xr(Re,t,"toggle",{},null),rt(le,Ne)},drawer:(le,Xe)=>{var Ne=gr(),Re=$t(Ne);Xr(Re,t,"drawer",{},null),rt(le,Ne)},contrast:(le,Xe)=>{var Ne=gr(),Re=$t(Ne);Xr(Re,t,"contrast",{},null),rt(le,Ne)}}})},ne=te=>{var le=Bte();let Xe;Ut(()=>Xe=kr(le,"",Xe,{width:y()?y()+"px":"100%",height:m()?m()+"px":"100%"})),rt(te,le)};or(re,te=>{C(de)?te(ae):te(ne,!1)})}return rt(e,Se),UE(t,"disconnect",Te),Sr({disconnect:Te})}var Vte=Qt("<button></button>");function Gte(e,t){xr(t,!1);const[r,n]=$n(),i=()=>He(N,"$position",r),s=()=>He(q,"$rotation",r),o=()=>He(C(y),"$zIndex",r),a=()=>He(O,"$borderRadius",r),u=()=>He(P,"$bgColor",r),c=()=>He(V,"$width",r),f=()=>He(W,"$height",r),h=qe(),g=qe(),y=qe(),m=qe();let _=ge(t,"node",8),x=ge(t,"hidden",8,!1),S=ge(t,"toggleHidden",8),E=ge(t,"top",8),A=ge(t,"left",8),T=ge(t,"nodeColor",8,null),I=ge(t,"hideable",8);const{position:N,dimensions:p,bgColor:P,borderRadius:O,rotation:q}=_(),{width:V,height:W}=p;let G=qe(null);Pi(()=>{var U;try{const j=(U=document.querySelector(`#${_().id}`))==null?void 0:U.firstChild;j&&me(G,window.getComputedStyle(j).backgroundColor)}catch(j){console.error(j)}}),Fe(()=>i(),()=>{me(h,i())}),Fe(()=>s(),()=>{me(g,s())}),Fe(()=>Gt(_()),()=>{qa(me(y,_().zIndex),"$zIndex",r)}),Fe(()=>C(G),()=>{me(m,C(G)==="rgba(0, 0, 0, 0)")}),Qi(),Dn();var J=Vte();let se,K;Ut(U=>{se=Rn(J,1,"minimap-node svelte-1hs9omb",null,se,U),K=kr(J,"",K,{"z-index":o(),"border-radius":`${a()??""}px`,"--prop-background-color":T()||u()||!C(m)&&C(G)||null,width:`${c()??""}px`,height:`${f()??""}px`,transform:`rotate(${C(g)??""}deg)`,top:`${C(h).y-E()}px`,left:`${C(h).x-A()}px`})},[()=>({hidden:x(),hideable:I()})],hn),fr("click",J,()=>{I()&&S()(_())}),rt(e,J),Sr(),n()}var $te=Qt('<div class="mini-bounding-box svelte-aoq4g"></div>');function Ute(e,t){xr(t,!1);const[r,n]=$n(),i=()=>He(c(),"$position",r),s=()=>He(m,"$width",r),o=()=>He(_,"$height",r),a=()=>He(f(),"$color",r);let u=ge(t,"dimensions",8),c=ge(t,"position",8),f=ge(t,"color",8),h=ge(t,"groupName",8),g=ge(t,"top",8),y=ge(t,"left",8);const{width:m,height:_}=u();Dn();var x=$te();let S;Ut(()=>{pt(x,"id",`mini-${h()}-bounding-box`),S=kr(x,`border: solid 4px ${a()??""};`,S,{top:`${i().y-g()}px`,left:`${i().x-y()}px`,width:`${s()}px`,height:`${o()}px`,"background-color":a()})}),rt(e,x),Sr(),n()}var jte=Qt('<div><div class="node-wrapper svelte-1qxvbux"><!> <!></div> <div class="overlay svelte-1qxvbux"></div></div>');function w7(e,t){xr(t,!1);const[r,n]=$n(),i=()=>He(Ne,"$graphBounds",r),s=()=>He(nt,"$groups",r),o=()=>He(L,"$dimensions",r),a=()=>He(H,"$scale",r),u=()=>He(X,"$translation",r),c=()=>He(B,"$hidden",r),f=()=>He(Re,"$nodes",r),h=()=>He(xe,"$groupBoxes",r),g=qe(),y=qe(),m=qe(),_=qe(),x=qe(),S=qe(),E=qe(),A=qe(),T=qe(),I=qe(),N=qe(),p=qe(),P=qe(),O=qe(),q=qe(),V=qe(),W=qe(),G=qe(),J=qe(),se=qe(),K=qe(),U=qe(),j=qe();let Q=Rr("graph"),de=ge(t,"width",8,100),ce=ge(t,"height",24,de),Te=ge(t,"mapColor",8,null),Se=ge(t,"nodeColor",8,null),re=ge(t,"borderColor",8,null),ae=ge(t,"corner",8,"SE"),ne=ge(t,"hideable",8,!1);const te=.9,le=de()*te,Xe=ce()*te,Ne=Q.bounds.graphBounds,Re=Q.nodes,nt=Q.groups,Ve=Q.transforms,L=Q.dimensions,B=s().hidden.nodes,H=Ve.scale,X=Ve.translation,xe=Q.groupBoxes,ue={clientX:0,clientY:0};function Ae(ft){c().has(ft)?c().delete(ft):c().add(ft),Ot(B,c())}Fe(()=>i(),()=>{me(g,i())}),Fe(()=>C(g),()=>{me(y,C(g).top)}),Fe(()=>C(g),()=>{me(m,C(g).left)}),Fe(()=>C(g),()=>{me(_,C(g).right)}),Fe(()=>C(g),()=>{me(x,C(g).bottom)}),Fe(()=>o(),()=>{me(S,o().width)}),Fe(()=>o(),()=>{me(E,o().height)}),Fe(()=>(C(_),C(m)),()=>{me(A,C(_)-C(m))}),Fe(()=>(C(x),C(y)),()=>{me(T,C(x)-C(y))}),Fe(()=>(C(A),C(T)),()=>{me(I,C(A)/C(T))}),Fe(()=>(Gt(de()),Gt(ce())),()=>{me(N,de()/ce())}),Fe(()=>(C(S),C(E),a(),u()),()=>{me(p,Ah(ue,0,0,C(S),C(E),a(),u()))}),Fe(()=>(C(S),C(A),a()),()=>{me(P,C(S)/C(A)/a())}),Fe(()=>(C(E),C(T),a()),()=>{me(O,C(E)/C(T)/a())}),Fe(()=>(C(p),C(y),C(T)),()=>{me(q,(C(p).y-C(y))/C(T))}),Fe(()=>(C(p),C(m),C(A)),()=>{me(V,(C(p).x-C(m))/C(A))}),Fe(()=>(C(I),C(N)),()=>{me(G,C(I)>=C(N))}),Fe(()=>(C(G),C(A),C(T)),()=>{me(J,C(G)?le/C(A):Xe/C(T))}),Fe(()=>(C(T),C(J)),()=>{me(j,C(T)*C(J))}),Fe(()=>(Gt(ce()),C(j)),()=>{me(K,(ce()-C(j))/2)}),Fe(()=>(C(A),C(J)),()=>{me(U,C(A)*C(J))}),Fe(()=>(Gt(de()),C(U)),()=>{me(se,(de()-C(U))/2)}),Fe(()=>(C(K),C(q),C(j),C(se),C(V),C(U),C(P),C(O)),()=>{me(W,`
		top: ${C(K)+C(q)*C(j)}px;
		left: ${C(se)+C(V)*C(U)}px;
		width: ${C(P)*C(U)}px;
		height: ${C(O)*C(j)}px;`)}),Qi(),Dn();var Ce=jte();let Be,Le;var Ie=qt(Ce);let we;var je=qt(Ie);ds(je,1,()=>Array.from(f().entries()),([ft,it])=>ft,(ft,it)=>{let Wt=()=>C(it)[1];var yr=gr(),er=$t(yr);{var lr=Lr=>{const Br=hn(()=>c().has(Wt()));Gte(Lr,{get node(){return Wt()},get top(){return C(y)},get left(){return C(m)},get nodeColor(){return Se()},get hidden(){return C(Br)},toggleHidden:Ae,get hideable(){return ne()}})};or(er,Lr=>{Wt().id!=="N-editor"&&Lr(lr)})}rt(ft,yr)});var ct=gt(je,2);ds(ct,1,()=>Array.from(h().entries()),([ft,it])=>ft,(ft,it)=>{let Wt=()=>C(it)[0];Ute(ft,lv(()=>C(it)[1],{get top(){return C(y)},get left(){return C(m)},get groupName(){return Wt()}}))});var yt=gt(Ie,2);Ut(ft=>{Be=Rn(Ce,1,"minimap-wrapper svelte-1qxvbux",null,Be,ft),Le=kr(Ce,"",Le,{width:`${de()??""}px`,height:`${(ce()?ce():de())??""}px`,"--prop-minimap-border-color":re(),"--prop-minimap-background-color":Te()}),we=kr(Ie,"",we,{width:`${C(A)??""}px`,height:`${C(T)??""}px`,transform:`scale(${C(J)??""})`}),kr(yt,C(W))},[()=>({SW:ae()==="SW",NE:ae()==="NE",SE:ae()==="SE",NW:ae()==="NW"})],hn),rt(e,Ce),Sr(),n()}const Hte=Object.freeze(Object.defineProperty({__proto__:null,default:w7},Symbol.toStringTag,{value:"Module"}));function Wte(e){return e&&typeof e.subscribe=="function"}function yp(e){const t={};for(const r in e){const n=e[r];if(r==="nodes"&&typeof n=="object"&&typeof n.getAll=="function"){const i=n.getAll();t[r]=i.map(s=>yp(s))}else if(Wte(n)){const i=lt(n);t[r]=typeof i=="object"&&i!==null?yp(i):i}else typeof n=="object"&&n!==null?t[r]=yp(n):t[r]=n}return t}function Xte(e,t){return t instanceof DOMRectReadOnly?{x:t.x,y:t.y,width:t.width,height:t.height}:t}function Yte(e){console.log("graph state object:",e);const t=yp(e),r=JSON.stringify(t,Xte);return localStorage.setItem("state",r),r}var Kte=Qt('<div><button class="svelte-1vnlnjg"><span class="material-symbols-outlined svelte-1vnlnjg"> </span></button> <button class="save-button NW svelte-1vnlnjg">Save</button></div>');function x7(e,t){xr(t,!1),console.log("Componente ThemeToggle.svelte");let r=ge(t,"main",8,"light"),n=ge(t,"alt",8,"dark"),i=ge(t,"mainIcon",8,"light_mode"),s=ge(t,"altIcon",8,"dark_mode"),o=ge(t,"corner",8,"NE"),a=ge(t,"bgColor",8,null),u=ge(t,"iconColor",8,null),c=qe(r());function f(){const A=document.documentElement.getAttribute("svelvet-theme");let T;!A||A===r()?T=n():T=r(),me(c,T),document.documentElement.setAttribute("svelvet-theme",T),localStorage.setItem("currentTheme",T)}Pi(()=>{const A=localStorage.getItem("currentTheme");A?(document.documentElement.setAttribute("svelvet-theme",A),me(c,A)):(document.documentElement.setAttribute("svelvet-theme",r()),me(c,r()));const T=localStorage.getItem("state");if(T){console.log("Al renderizar la aplicacion este componente se ejecuta en este orden");const I=JSON.parse(T);if(I&&I.nodes){const N=lt(Yf);console.log(N),N.set("G-1",I),console.log("Restaurando nodos:",I.nodes)}}});let h=qe();Yf.subscribe(A=>{me(h,A.get("G-1")),console.log("Graph from store:",C(h))}),Dn();var g=Kte();let y,m;var _=qt(g),x=qt(_),S=qt(x),E=gt(_,2);Ut(A=>{y=Rn(g,1,"controls-wrapper svelte-1vnlnjg",null,y,A),m=kr(g,"",m,{"--prop-theme-toggle-color":a(),"--prop-theme-toggle-text-color":u()}),Pu(S,C(c)===r()?s():i())},[()=>({SW:o()==="SW",NE:o()==="NE",SE:o()==="SE",NW:o()==="NW"})],hn),fr("mousedown",_,ro(f)),fr("touchstart",_,ro(f)),fr("click",E,()=>{Yte(C(h))}),rt(e,g),Sr()}const Zte=Object.freeze(Object.defineProperty({__proto__:null,default:x7},Symbol.toStringTag,{value:"Module"}));function Ws(e,t,r){return t.map((n,i)=>e(n,r[i]))}function Zd(e,t,r,n,i){return t.map((s,o)=>e(s,r[o],n[o],i[o]))}function Qo(e,t,r,n){if(t.length==0)return n==1?1:0;let i=t[t.length-1];n==1?i|=~r:i&=r;for(let s=0;s<t.length-1;s++)i=e(i,t[s]);return i=e(i,i>>>16),i=e(i,i>>>8),i=e(i,i>>>4),i=e(i,i>>>2),i=e(i,i>>>1),i&1}function Jte(e){return e>>5}function na(e){return e&31}function al(e,t,r,n,i){const s=e>0&&!(n[t]&1<<e-1)&&i[t]&1<<e-1;s&&na(e)&&(i[t]|=-1<<e),s&&t+1<r&&i.fill(-1,t+1)}function XE(e,t){const r={};function n(i,s){if(r[i]=s,!(i.length*e>=t)){for(let o=0;o<1<<e;o+=1)n(i+o.toString(1<<e),s<<e|o|o<<16);n(i+"x",s<<e|(1<<e)-1)}}return n("",0),Object.seal(r),r}const Qte=XE(1,8),ere=XE(3,3),tre=XE(4,8);function rre(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000"+r[o].toString(16),u=r[o]^n[o];o++;for(let c=0;c<8&&s<t;c++,s+=4)u&15<<4*c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function nre(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000000000000000000000000000"+r[o].toString(2),u=r[o]^n[o];o++;for(let c=0;c<32&&s<t;c++,s++)u&1<<c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function ire(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const f=e.slice(Math.max(0,c-2),c);c-=f.length;const h=tre[f];na(a)==0&&u++;const g=(1<<4*f.length)-1;n[u]|=(h>>>16&g)<<a,i[u]|=(h&g)<<a,a+=4*f.length}a<r&&al(a,u,o,n,i)}function sre(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const f=e.slice(Math.max(0,c-8),c);c-=f.length;const h=Qte[f];na(a)==0&&u++;const g=(1<<1*f.length)-1;n[u]|=(h>>>16&g)<<a,i[u]|=(h&g)<<a,a+=1*f.length}a<r&&al(a,u,o,n,i)}let ore=class S7 extends Error{constructor(t){super(t),Object.setPrototypeOf(this,S7.prototype)}};function Oi(e,t){if(!e)throw new ore("Assertion failed: "+t)}let da=class Cr{constructor(t,r,n){this._bits=t,this._avec=r,this._bvec=n}static make(t,r){t=t|0;let n,i;switch(r){case!0:case"1":case 1:n=i=-1;break;case!1:case"0":case-1:case void 0:n=i=0;break;case"x":case 0:n=0,i=-1;break;default:Oi(!1,"Vector3vl.make() called with invalid initializer")}const s=(t+31)/32|0;return new Cr(t,new Uint32Array(s).fill(n),new Uint32Array(s).fill(i))}static zeros(t){return Cr.make(t,-1)}static ones(t){return Cr.make(t,1)}static xes(t){return Cr.make(t,0)}static fromBool(t,r=1){return Cr.make(r,t?1:-1)}static concat(...t){const n=t.reduce((u,c)=>c.bits+u,0)+31>>>5;let i=0,s=-1,o=new Uint32Array(n),a=new Uint32Array(n);for(const u of t)if(u.normalize(),na(i)==0)o.set(u._avec,s+1),a.set(u._bvec,s+1),i+=u._bits,s+=u._bits+31>>>5;else{for(const c in u._avec){if(o[s]|=u._avec[c]<<i,a[s]|=u._bvec[c]<<i,s++,s==n)break;o[s]=u._avec[c]>>>-i,a[s]=u._bvec[c]>>>-i}i+=u._bits,s+1>i+31>>>5&&s--}return new Cr(i,o,a)}static fromIterator(t,r,n){return(r&r-1)==0?Cr.fromIteratorPow2(t,r,n):Cr.fromIteratorAnySkip(t,r,n)}static fromIteratorAnySkip(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const f of t)na(s)==0&&o++,a[o]|=(f>>>r&c)<<s,u[o]|=(f&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(f>>>r&c)>>>-s,u[o]=(f&c)>>>-s),s+=r;return s<n&&al(s,o,i,a,u),new Cr(n,a,u)}static fromIteratorPow2(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const f of t)na(s)==0&&o++,a[o]|=(f>>>r&c)<<s,u[o]|=(f&c)<<s,s+=r;return s<n&&al(s,o,i,a,u),new Cr(n,a,u)}static fromArray(t){const r=t.length,n=1,i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<n)-1;for(const f of t){const h=f+1+ +(f>0);na(s)==0&&o++,a[o]|=(h>>>n&c)<<s,u[o]|=(h&c)<<s,s+=n}return s<r&&al(s,o,i,a,u),new Cr(r,a,u)}static fromBin(t,r){r===void 0&&(r=t.length);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return sre(t,0,r,i,s),new Cr(r,i,s)}static fromOct(t,r){r===void 0&&(r=t.length*3);const i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=7;for(let f=t.length-1;f>=0;f--){const h=ere[t[f]];na(s)==0&&o++,a[o]|=(h>>>16&c)<<s,u[o]|=(h&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(h>>>16&c)>>>-s,u[o]=(h&c)>>>-s),s+=3}return s<r&&al(s,o,i,a,u),new Cr(r,a,u)}static fromHex(t,r){r===void 0&&(r=t.length*4);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return ire(t,0,r,i,s),new Cr(r,i,s)}static fromString(t){const n=/^([0-9]*)'?(b[01x]*|o[0-7x]*|h[0-9a-fx]*|d[0-9]*)$/.exec(t);Oi(n!=null,"Vector3vl.fromString() Invalid string");const i=n[1].length?Number(n[1]):void 0,s=n[2].slice(1);switch(n[2][0]){case"b":return Cr.fromBin(s,i);case"o":return Cr.fromOct(s,i);case"h":return Cr.fromHex(s,i);case"d":return Cr.fromNumber(BigInt(s),i)}}static fromClonable(t){return new Cr(t._bits,t._avec,t._bvec)}static fromNumber(t,r){const n=r===void 0?0:r,i=BigInt(t);if(i>=BigInt(0)){let s=i.toString(2);return Cr.fromBin("0".repeat(Math.max(0,n-s.length))+s,r)}else{const s=(-i).toString(2).length;let a=(i+(BigInt(1)<<BigInt(s))).toString(2);return Cr.fromBin("1".repeat(Math.max(1,n-s))+"0".repeat(s-a.length)+a,r)}}get bits(){return this._bits}get msb(){return this.get(this._bits-1)}get lsb(){return this.get(0)}get(t){const r=na(t),n=Jte(t),i=this._avec[n]>>>r&1,s=this._bvec[n]>>>r&1;return i+s-1}get isHigh(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>~i==0)&&(n[n.length-1]&t)==t;return r(this._avec)&&r(this._bvec)}get isLow(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>i==0)&&(n[n.length-1]&t)==0;return r(this._avec)&&r(this._bvec)}get isDefined(){if(this._bits==0)return!1;const t=Ws((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]|=~this._lastmask,!t.every(r=>~r==0)}get isFullyDefined(){if(this._bits==0)return!0;const t=Ws((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]&=this._lastmask,!t.some(r=>!!r)}and(t){return Oi(t._bits==this._bits,"Vector3vl.and() called with vectors of different sizes"),new Cr(this._bits,Ws((r,n)=>r&n,t._avec,this._avec),Ws((r,n)=>r&n,t._bvec,this._bvec))}or(t){return Oi(t._bits==this._bits,"Vector3vl.or() called with vectors of different sizes"),new Cr(this._bits,Ws((r,n)=>r|n,t._avec,this._avec),Ws((r,n)=>r|n,t._bvec,this._bvec))}xor(t){return Oi(t._bits==this._bits,"Vector3vl.xor() called with vectors of different sizes"),new Cr(this._bits,Zd((r,n,i,s)=>(r|i)&(n^s),t._avec,t._bvec,this._avec,this._bvec),Zd((r,n,i,s)=>r&i^(n|s),t._avec,t._bvec,this._avec,this._bvec))}nand(t){return Oi(t._bits==this._bits,"Vector3vl.nand() called with vectors of different sizes"),new Cr(this._bits,Ws((r,n)=>~(r&n),t._bvec,this._bvec),Ws((r,n)=>~(r&n),t._avec,this._avec))}nor(t){return Oi(t._bits==this._bits,"Vector3vl.nor() called with vectors of different sizes"),new Cr(this._bits,Ws((r,n)=>~(r|n),t._bvec,this._bvec),Ws((r,n)=>~(r|n),t._avec,this._avec))}xnor(t){return Oi(t._bits==this._bits,"Vector3vl.xnor() called with vectors of different sizes"),new Cr(this._bits,Zd((r,n,i,s)=>~(r&i^(n|s)),t._avec,t._bvec,this._avec,this._bvec),Zd((r,n,i,s)=>~((r|i)&(n^s)),t._avec,t._bvec,this._avec,this._bvec))}not(){return new Cr(this._bits,this._bvec.map(t=>~t),this._avec.map(t=>~t))}xmask(){const t=Ws((r,n)=>r^n,this._avec,this._bvec);return new Cr(this._bits,t,t)}reduceAnd(){return new Cr(1,Uint32Array.of(Qo((t,r)=>t&r,this._avec,this._lastmask,1)),Uint32Array.of(Qo((t,r)=>t&r,this._bvec,this._lastmask,1)))}reduceOr(){return new Cr(1,Uint32Array.of(Qo((t,r)=>t|r,this._avec,this._lastmask,0)),Uint32Array.of(Qo((t,r)=>t|r,this._bvec,this._lastmask,0)))}reduceNand(){return new Cr(1,Uint32Array.of(~Qo((t,r)=>t&r,this._bvec,this._lastmask,1)),Uint32Array.of(~Qo((t,r)=>t&r,this._avec,this._lastmask,1)))}reduceNor(){return new Cr(1,Uint32Array.of(~Qo((t,r)=>t|r,this._bvec,this._lastmask,0)),Uint32Array.of(~Qo((t,r)=>t|r,this._avec,this._lastmask,0)))}reduceXor(){const t=Ws((i,s)=>~i&s,this._avec,this._bvec),r=Qo((i,s)=>i|s,t,this._lastmask,0),n=Qo((i,s)=>i^s,this._avec,this._lastmask,0);return new Cr(1,Uint32Array.of(n&~r),Uint32Array.of(n|r))}reduceXnor(){return this.reduceXor().not()}concat(...t){return Cr.concat(this,...t)}slice(t,r){if(t===void 0&&(t=0),r===void 0&&(r=this._bits),r>this.bits&&(r=this.bits),t>r&&(r=t),na(t)==0){const n=this._avec.slice(t>>>5,r+31>>>5),i=this._bvec.slice(t>>>5,r+31>>>5);return new Cr(r-t,n,i)}else{const n=r-t+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);let o=0;i[o]=this._avec[t>>5]>>>t,s[o]=this._bvec[t>>5]>>>t;for(let a=(t>>5)+1;a<=r>>>5&&(i[o]|=this._avec[a]<<-t,s[o]|=this._bvec[a]<<-t,o++,o!=n);a++)i[o]=this._avec[a]>>>t,s[o]=this._bvec[a]>>>t;return new Cr(r-t,i,s)}}toIterator(t){return(t&t-1)==0?this.toIteratorPow2(t):this.toIteratorAnySkip(t)}*toIteratorAnySkip(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){let o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const u=r>>-n;o|=(this._avec[i+1]&u)<<-n,a|=(this._bvec[i+1]&u)<<-n}yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r<<n)}}*toIteratorPow2(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){const o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r)}}toArray(){this.normalize();const t=1,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){const a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n,c=a<<t|u;o.push(c-1-+(c>1)),s<<=t,n+=t,s==0&&(i++,s=r)}return o}toBin(){return nre(0,this._bits,this._avec,this._bvec)}toOct(){this.normalize();const t=3,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){let a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const f=r>>-n;a|=(this._avec[i+1]&f)<<-n,u|=(this._bvec[i+1]&f)<<-n}const c=a<<t|u;7&c&~(c>>3)?o.push("x"):o.push((c>>3).toString()),s<<=t,n+=t,s==0&&(i++,s=r<<n)}return o.reverse().join("")}toHex(){return this.normalize(),rre(0,this._bits,this._avec,this._bvec)}toString(){return"Vector3vl "+this.toBin()}toClonable(){return{_bits:this._bits,_avec:this._avec,_bvec:this._bvec}}toNumber(t=!1){return t?this.toNumberSigned():(Oi(this.isFullyDefined,"Vector3vl.toNumber() called on a not fully defined vector"),Oi(this._bits<32,"Vector3vl.toNumber() called on a too wide vector"),this._bits==0?0:Number.parseInt(this.toHex(),16))}toNumberSigned(){return Oi(this.isFullyDefined,"Vector3vl.toNumberSigned() called on a not fully defined vector"),Oi(this._bits<32,"Vector3vl.toNumberSigned() called on a too wide vector"),Oi(this._bits>0,"Vector3vl.toNumberSigned() called on an empty vector"),this.msb==1?Number.parseInt(this.toHex(),16)-(1<<this._bits):Number.parseInt(this.toHex(),16)}toBigInt(t=!1){return t?this.toBigIntSigned():(Oi(this.isFullyDefined,"Vector3vl.toBigInt() called on a not fully defined vector"),this._bits==0?BigInt(0):BigInt("0x"+this.toHex()))}toBigIntSigned(){return Oi(this.isFullyDefined,"Vector3vl.toBigIntSigned() called on a not fully defined vector"),Oi(this._bits>0,"Vector3vl.toBigIntSigned() called on an empty vector"),this.msb==1?BigInt("0x"+this.toHex())-(BigInt(1)<<BigInt(this._bits)):BigInt("0x"+this.toHex())}eq(t){if(t._bits!=this._bits)return!1;this.normalize(),t.normalize();for(const r in this._avec)if(this._avec[r]!=t._avec[r]||this._bvec[r]!=t._bvec[r])return!1;return!0}normalize(){const t=this._lastmask;this._avec[this._avec.length-1]&=t,this._bvec[this._bvec.length-1]&=t}get _lastmask(){return-1>>>-this.bits}};da.empty=da.zeros(0);da.one=da.ones(1);da.zero=da.zeros(1);da.x=da.xes(1);var ki=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function are(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var GC={},$C={},Nm={exports:{}},UC;function Ur(){if(UC)return Nm.exports;UC=1;var e=Nm.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();return typeof __g=="number"&&(__g=e),Nm.exports}var qm,jC;function ao(){if(jC)return qm;jC=1;var e={}.hasOwnProperty;return qm=function(t,r){return e.call(t,r)},qm}var Dm,HC;function Jr(){return HC||(HC=1,Dm=function(e){try{return!!e()}catch{return!0}}),Dm}var Fm,WC;function Fn(){return WC||(WC=1,Fm=!Jr()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})),Fm}var Bm={exports:{}},XC;function qo(){if(XC)return Bm.exports;XC=1;var e=Bm.exports={version:"2.6.12"};return typeof __e=="number"&&(__e=e),Bm.exports}var zm={},Vm,YC;function on(){return YC||(YC=1,Vm=function(e){return typeof e=="object"?e!==null:typeof e=="function"}),Vm}var Gm,KC;function mr(){if(KC)return Gm;KC=1;var e=on();return Gm=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t},Gm}var $m,ZC;function YE(){if(ZC)return $m;ZC=1;var e=on(),t=Ur().document,r=e(t)&&e(t.createElement);return $m=function(n){return r?t.createElement(n):{}},$m}var Um,JC;function E7(){return JC||(JC=1,Um=!Fn()&&!Jr()(function(){return Object.defineProperty(YE()("div"),"a",{get:function(){return 7}}).a!=7})),Um}var jm,QC;function pa(){if(QC)return jm;QC=1;var e=on();return jm=function(t,r){if(!e(t))return t;var n,i;if(r&&typeof(n=t.toString)=="function"&&!e(i=n.call(t))||typeof(n=t.valueOf)=="function"&&!e(i=n.call(t))||!r&&typeof(n=t.toString)=="function"&&!e(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},jm}var eR;function ti(){if(eR)return zm;eR=1;var e=mr(),t=E7(),r=pa(),n=Object.defineProperty;return zm.f=Fn()?Object.defineProperty:function(s,o,a){if(e(s),o=r(o,!0),e(a),t)try{return n(s,o,a)}catch{}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(s[o]=a.value),s},zm}var Hm,tR;function pc(){return tR||(tR=1,Hm=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}),Hm}var Wm,rR;function Ns(){if(rR)return Wm;rR=1;var e=ti(),t=pc();return Wm=Fn()?function(r,n,i){return e.f(r,n,t(1,i))}:function(r,n,i){return r[n]=i,r},Wm}var Xm={exports:{}},Ym,nR;function vc(){if(nR)return Ym;nR=1;var e=0,t=Math.random();return Ym=function(r){return"Symbol(".concat(r===void 0?"":r,")_",(++e+t).toString(36))},Ym}var Km={exports:{}},Zm,iR;function Cu(){return iR||(iR=1,Zm=!1),Zm}var sR;function Th(){if(sR)return Km.exports;sR=1;var e=qo(),t=Ur(),r="__core-js_shared__",n=t[r]||(t[r]={});return(Km.exports=function(i,s){return n[i]||(n[i]=s!==void 0?s:{})})("versions",[]).push({version:e.version,mode:Cu()?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"}),Km.exports}var Jm,oR;function ure(){return oR||(oR=1,Jm=Th()("native-function-to-string",Function.toString)),Jm}var aR;function qs(){if(aR)return Xm.exports;aR=1;var e=Ur(),t=Ns(),r=ao(),n=vc()("src"),i=ure(),s="toString",o=(""+i).split(s);return qo().inspectSource=function(a){return i.call(a)},(Xm.exports=function(a,u,c,f){var h=typeof c=="function";h&&(r(c,"name")||t(c,"name",u)),a[u]!==c&&(h&&(r(c,n)||t(c,n,a[u]?""+a[u]:o.join(String(u)))),a===e?a[u]=c:f?a[u]?a[u]=c:t(a,u,c):(delete a[u],t(a,u,c)))})(Function.prototype,s,function(){return typeof this=="function"&&this[n]||i.call(this)}),Xm.exports}var Qm,uR;function es(){return uR||(uR=1,Qm=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}),Qm}var e0,cR;function Do(){if(cR)return e0;cR=1;var e=es();return e0=function(t,r,n){if(e(t),r===void 0)return t;switch(n){case 1:return function(i){return t.call(r,i)};case 2:return function(i,s){return t.call(r,i,s)};case 3:return function(i,s,o){return t.call(r,i,s,o)}}return function(){return t.apply(r,arguments)}},e0}var t0,lR;function ze(){if(lR)return t0;lR=1;var e=Ur(),t=qo(),r=Ns(),n=qs(),i=Do(),s="prototype",o=function(a,u,c){var f=a&o.F,h=a&o.G,g=a&o.S,y=a&o.P,m=a&o.B,_=h?e:g?e[u]||(e[u]={}):(e[u]||{})[s],x=h?t:t[u]||(t[u]={}),S=x[s]||(x[s]={}),E,A,T,I;h&&(c=u);for(E in c)A=!f&&_&&_[E]!==void 0,T=(A?_:c)[E],I=m&&A?i(T,e):y&&typeof T=="function"?i(Function.call,T):T,_&&n(_,E,T,a&o.U),x[E]!=T&&r(x,E,I),y&&S[E]!=T&&(S[E]=T)};return e.core=t,o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,o.U=64,o.R=128,t0=o,t0}var r0={exports:{}},fR;function Ru(){if(fR)return r0.exports;fR=1;var e=vc()("meta"),t=on(),r=ao(),n=ti().f,i=0,s=Object.isExtensible||function(){return!0},o=!Jr()(function(){return s(Object.preventExtensions({}))}),a=function(g){n(g,e,{value:{i:"O"+ ++i,w:{}}})},u=function(g,y){if(!t(g))return typeof g=="symbol"?g:(typeof g=="string"?"S":"P")+g;if(!r(g,e)){if(!s(g))return"F";if(!y)return"E";a(g)}return g[e].i},c=function(g,y){if(!r(g,e)){if(!s(g))return!0;if(!y)return!1;a(g)}return g[e].w},f=function(g){return o&&h.NEED&&s(g)&&!r(g,e)&&a(g),g},h=r0.exports={KEY:e,NEED:!1,fastKey:u,getWeak:c,onFreeze:f};return r0.exports}var n0={exports:{}},hR;function An(){if(hR)return n0.exports;hR=1;var e=Th()("wks"),t=vc(),r=Ur().Symbol,n=typeof r=="function",i=n0.exports=function(s){return e[s]||(e[s]=n&&r[s]||(n?r:t)("Symbol."+s))};return i.store=e,n0.exports}var i0,dR;function Bl(){if(dR)return i0;dR=1;var e=ti().f,t=ao(),r=An()("toStringTag");return i0=function(n,i,s){n&&!t(n=s?n:n.prototype,r)&&e(n,r,{configurable:!0,value:i})},i0}var s0={},pR;function A7(){return pR||(pR=1,s0.f=An()),s0}var o0,vR;function KE(){if(vR)return o0;vR=1;var e=Ur(),t=qo(),r=Cu(),n=A7(),i=ti().f;return o0=function(s){var o=t.Symbol||(t.Symbol=r?{}:e.Symbol||{});s.charAt(0)!="_"&&!(s in o)&&i(o,s,{value:n.f(s)})},o0}var a0,gR;function Fo(){if(gR)return a0;gR=1;var e={}.toString;return a0=function(t){return e.call(t).slice(8,-1)},a0}var u0,mR;function Ph(){if(mR)return u0;mR=1;var e=Fo();return u0=Object("z").propertyIsEnumerable(0)?Object:function(t){return e(t)=="String"?t.split(""):Object(t)},u0}var c0,yR;function va(){return yR||(yR=1,c0=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}),c0}var l0,_R;function uo(){if(_R)return l0;_R=1;var e=Ph(),t=va();return l0=function(r){return e(t(r))},l0}var f0,bR;function Bo(){if(bR)return f0;bR=1;var e=Math.ceil,t=Math.floor;return f0=function(r){return isNaN(r=+r)?0:(r>0?t:e)(r)},f0}var h0,wR;function On(){if(wR)return h0;wR=1;var e=Bo(),t=Math.min;return h0=function(r){return r>0?t(e(r),9007199254740991):0},h0}var d0,xR;function gc(){if(xR)return d0;xR=1;var e=Bo(),t=Math.max,r=Math.min;return d0=function(n,i){return n=e(n),n<0?t(n+i,0):r(n,i)},d0}var p0,SR;function hv(){if(SR)return p0;SR=1;var e=uo(),t=On(),r=gc();return p0=function(n){return function(i,s,o){var a=e(i),u=t(a.length),c=r(o,u),f;if(n&&s!=s){for(;u>c;)if(f=a[c++],f!=f)return!0}else for(;u>c;c++)if((n||c in a)&&a[c]===s)return n||c||0;return!n&&-1}},p0}var v0,ER;function ZE(){if(ER)return v0;ER=1;var e=Th()("keys"),t=vc();return v0=function(r){return e[r]||(e[r]=t(r))},v0}var g0,AR;function T7(){if(AR)return g0;AR=1;var e=ao(),t=uo(),r=hv()(!1),n=ZE()("IE_PROTO");return g0=function(i,s){var o=t(i),a=0,u=[],c;for(c in o)c!=n&&e(o,c)&&u.push(c);for(;s.length>a;)e(o,c=s[a++])&&(~r(u,c)||u.push(c));return u},g0}var m0,TR;function JE(){return TR||(TR=1,m0="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")),m0}var y0,PR;function mc(){if(PR)return y0;PR=1;var e=T7(),t=JE();return y0=Object.keys||function(n){return e(n,t)},y0}var _0={},CR;function dv(){return CR||(CR=1,_0.f=Object.getOwnPropertySymbols),_0}var b0={},RR;function Ch(){return RR||(RR=1,b0.f={}.propertyIsEnumerable),b0}var w0,IR;function cre(){if(IR)return w0;IR=1;var e=mc(),t=dv(),r=Ch();return w0=function(n){var i=e(n),s=t.f;if(s)for(var o=s(n),a=r.f,u=0,c;o.length>u;)a.call(n,c=o[u++])&&i.push(c);return i},w0}var x0,OR;function pv(){if(OR)return x0;OR=1;var e=Fo();return x0=Array.isArray||function(r){return e(r)=="Array"},x0}var S0,MR;function si(){if(MR)return S0;MR=1;var e=va();return S0=function(t){return Object(e(t))},S0}var E0,kR;function P7(){if(kR)return E0;kR=1;var e=ti(),t=mr(),r=mc();return E0=Fn()?Object.defineProperties:function(i,s){t(i);for(var o=r(s),a=o.length,u=0,c;a>u;)e.f(i,c=o[u++],s[c]);return i},E0}var A0,LR;function QE(){if(LR)return A0;LR=1;var e=Ur().document;return A0=e&&e.documentElement,A0}var T0,NR;function yc(){if(NR)return T0;NR=1;var e=mr(),t=P7(),r=JE(),n=ZE()("IE_PROTO"),i=function(){},s="prototype",o=function(){var a=YE()("iframe"),u=r.length,c="<",f=">",h;for(a.style.display="none",QE().appendChild(a),a.src="javascript:",h=a.contentWindow.document,h.open(),h.write(c+"script"+f+"document.F=Object"+c+"/script"+f),h.close(),o=h.F;u--;)delete o[s][r[u]];return o()};return T0=Object.create||function(u,c){var f;return u!==null?(i[s]=e(u),f=new i,i[s]=null,f[n]=u):f=o(),c===void 0?f:t(f,c)},T0}var P0={},C0={},qR;function _c(){if(qR)return C0;qR=1;var e=T7(),t=JE().concat("length","prototype");return C0.f=Object.getOwnPropertyNames||function(n){return e(n,t)},C0}var DR;function C7(){if(DR)return P0;DR=1;var e=uo(),t=_c().f,r={}.toString,n=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(s){try{return t(s)}catch{return n.slice()}};return P0.f=function(o){return n&&r.call(o)=="[object Window]"?i(o):t(e(o))},P0}var R0={},FR;function co(){if(FR)return R0;FR=1;var e=Ch(),t=pc(),r=uo(),n=pa(),i=ao(),s=E7(),o=Object.getOwnPropertyDescriptor;return R0.f=Fn()?o:function(u,c){if(u=r(u),c=n(c,!0),s)try{return o(u,c)}catch{}if(i(u,c))return t(!e.f.call(u,c),u[c])},R0}var BR;function lre(){if(BR)return $C;BR=1;var e=Ur(),t=ao(),r=Fn(),n=ze(),i=qs(),s=Ru().KEY,o=Jr(),a=Th(),u=Bl(),c=vc(),f=An(),h=A7(),g=KE(),y=cre(),m=pv(),_=mr(),x=on(),S=si(),E=uo(),A=pa(),T=pc(),I=yc(),N=C7(),p=co(),P=dv(),O=ti(),q=mc(),V=p.f,W=O.f,G=N.f,J=e.Symbol,se=e.JSON,K=se&&se.stringify,U="prototype",j=f("_hidden"),Q=f("toPrimitive"),de={}.propertyIsEnumerable,ce=a("symbol-registry"),Te=a("symbols"),Se=a("op-symbols"),re=Object[U],ae=typeof J=="function"&&!!P.f,ne=e.QObject,te=!ne||!ne[U]||!ne[U].findChild,le=r&&o(function(){return I(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a!=7})?function(Le,Ie,we){var je=V(re,Ie);je&&delete re[Ie],W(Le,Ie,we),je&&Le!==re&&W(re,Ie,je)}:W,Xe=function(Le){var Ie=Te[Le]=I(J[U]);return Ie._k=Le,Ie},Ne=ae&&typeof J.iterator=="symbol"?function(Le){return typeof Le=="symbol"}:function(Le){return Le instanceof J},Re=function(Ie,we,je){return Ie===re&&Re(Se,we,je),_(Ie),we=A(we,!0),_(je),t(Te,we)?(je.enumerable?(t(Ie,j)&&Ie[j][we]&&(Ie[j][we]=!1),je=I(je,{enumerable:T(0,!1)})):(t(Ie,j)||W(Ie,j,T(1,{})),Ie[j][we]=!0),le(Ie,we,je)):W(Ie,we,je)},nt=function(Ie,we){_(Ie);for(var je=y(we=E(we)),ct=0,yt=je.length,ft;yt>ct;)Re(Ie,ft=je[ct++],we[ft]);return Ie},Ve=function(Ie,we){return we===void 0?I(Ie):nt(I(Ie),we)},L=function(Ie){var we=de.call(this,Ie=A(Ie,!0));return this===re&&t(Te,Ie)&&!t(Se,Ie)?!1:we||!t(this,Ie)||!t(Te,Ie)||t(this,j)&&this[j][Ie]?we:!0},B=function(Ie,we){if(Ie=E(Ie),we=A(we,!0),!(Ie===re&&t(Te,we)&&!t(Se,we))){var je=V(Ie,we);return je&&t(Te,we)&&!(t(Ie,j)&&Ie[j][we])&&(je.enumerable=!0),je}},H=function(Ie){for(var we=G(E(Ie)),je=[],ct=0,yt;we.length>ct;)!t(Te,yt=we[ct++])&&yt!=j&&yt!=s&&je.push(yt);return je},X=function(Ie){for(var we=Ie===re,je=G(we?Se:E(Ie)),ct=[],yt=0,ft;je.length>yt;)t(Te,ft=je[yt++])&&(!we||t(re,ft))&&ct.push(Te[ft]);return ct};ae||(J=function(){if(this instanceof J)throw TypeError("Symbol is not a constructor!");var Ie=c(arguments.length>0?arguments[0]:void 0),we=function(je){this===re&&we.call(Se,je),t(this,j)&&t(this[j],Ie)&&(this[j][Ie]=!1),le(this,Ie,T(1,je))};return r&&te&&le(re,Ie,{configurable:!0,set:we}),Xe(Ie)},i(J[U],"toString",function(){return this._k}),p.f=B,O.f=Re,_c().f=N.f=H,Ch().f=L,P.f=X,r&&!Cu()&&i(re,"propertyIsEnumerable",L,!0),h.f=function(Le){return Xe(f(Le))}),n(n.G+n.W+n.F*!ae,{Symbol:J});for(var xe="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ue=0;xe.length>ue;)f(xe[ue++]);for(var Ae=q(f.store),Ce=0;Ae.length>Ce;)g(Ae[Ce++]);n(n.S+n.F*!ae,"Symbol",{for:function(Le){return t(ce,Le+="")?ce[Le]:ce[Le]=J(Le)},keyFor:function(Ie){if(!Ne(Ie))throw TypeError(Ie+" is not a symbol!");for(var we in ce)if(ce[we]===Ie)return we},useSetter:function(){te=!0},useSimple:function(){te=!1}}),n(n.S+n.F*!ae,"Object",{create:Ve,defineProperty:Re,defineProperties:nt,getOwnPropertyDescriptor:B,getOwnPropertyNames:H,getOwnPropertySymbols:X});var Be=o(function(){P.f(1)});return n(n.S+n.F*Be,"Object",{getOwnPropertySymbols:function(Ie){return P.f(S(Ie))}}),se&&n(n.S+n.F*(!ae||o(function(){var Le=J();return K([Le])!="[null]"||K({a:Le})!="{}"||K(Object(Le))!="{}"})),"JSON",{stringify:function(Ie){for(var we=[Ie],je=1,ct,yt;arguments.length>je;)we.push(arguments[je++]);if(yt=ct=we[1],!(!x(ct)&&Ie===void 0||Ne(Ie)))return m(ct)||(ct=function(ft,it){if(typeof yt=="function"&&(it=yt.call(this,ft,it)),!Ne(it))return it}),we[1]=ct,K.apply(se,we)}}),J[U][Q]||Ns()(J[U],Q,J[U].valueOf),u(J,"Symbol"),u(Math,"Math",!0),u(e.JSON,"JSON",!0),$C}var zR={},VR;function fre(){if(VR)return zR;VR=1;var e=ze();return e(e.S,"Object",{create:yc()}),zR}var GR={},$R;function hre(){if($R)return GR;$R=1;var e=ze();return e(e.S+e.F*!Fn(),"Object",{defineProperty:ti().f}),GR}var UR={},jR;function dre(){if(jR)return UR;jR=1;var e=ze();return e(e.S+e.F*!Fn(),"Object",{defineProperties:P7()}),UR}var HR={},I0,WR;function ga(){if(WR)return I0;WR=1;var e=ze(),t=qo(),r=Jr();return I0=function(n,i){var s=(t.Object||{})[n]||Object[n],o={};o[n]=i(s),e(e.S+e.F*r(function(){s(1)}),"Object",o)},I0}var XR;function pre(){if(XR)return HR;XR=1;var e=uo(),t=co().f;return ga()("getOwnPropertyDescriptor",function(){return function(n,i){return t(e(n),i)}}),HR}var YR={},O0,KR;function lo(){if(KR)return O0;KR=1;var e=ao(),t=si(),r=ZE()("IE_PROTO"),n=Object.prototype;return O0=Object.getPrototypeOf||function(i){return i=t(i),e(i,r)?i[r]:typeof i.constructor=="function"&&i instanceof i.constructor?i.constructor.prototype:i instanceof Object?n:null},O0}var ZR;function vre(){if(ZR)return YR;ZR=1;var e=si(),t=lo();return ga()("getPrototypeOf",function(){return function(n){return t(e(n))}}),YR}var JR={},QR;function gre(){if(QR)return JR;QR=1;var e=si(),t=mc();return ga()("keys",function(){return function(n){return t(e(n))}}),JR}var eI={},tI;function mre(){return tI||(tI=1,ga()("getOwnPropertyNames",function(){return C7().f})),eI}var rI={},nI;function yre(){if(nI)return rI;nI=1;var e=on(),t=Ru().onFreeze;return ga()("freeze",function(r){return function(i){return r&&e(i)?r(t(i)):i}}),rI}var iI={},sI;function _re(){if(sI)return iI;sI=1;var e=on(),t=Ru().onFreeze;return ga()("seal",function(r){return function(i){return r&&e(i)?r(t(i)):i}}),iI}var oI={},aI;function bre(){if(aI)return oI;aI=1;var e=on(),t=Ru().onFreeze;return ga()("preventExtensions",function(r){return function(i){return r&&e(i)?r(t(i)):i}}),oI}var uI={},cI;function wre(){if(cI)return uI;cI=1;var e=on();return ga()("isFrozen",function(t){return function(n){return e(n)?t?t(n):!1:!0}}),uI}var lI={},fI;function xre(){if(fI)return lI;fI=1;var e=on();return ga()("isSealed",function(t){return function(n){return e(n)?t?t(n):!1:!0}}),lI}var hI={},dI;function Sre(){if(dI)return hI;dI=1;var e=on();return ga()("isExtensible",function(t){return function(n){return e(n)?t?t(n):!0:!1}}),hI}var pI={},M0,vI;function R7(){if(vI)return M0;vI=1;var e=Fn(),t=mc(),r=dv(),n=Ch(),i=si(),s=Ph(),o=Object.assign;return M0=!o||Jr()(function(){var a={},u={},c=Symbol(),f="abcdefghijklmnopqrst";return a[c]=7,f.split("").forEach(function(h){u[h]=h}),o({},a)[c]!=7||Object.keys(o({},u)).join("")!=f})?function(u,c){for(var f=i(u),h=arguments.length,g=1,y=r.f,m=n.f;h>g;)for(var _=s(arguments[g++]),x=y?t(_).concat(y(_)):t(_),S=x.length,E=0,A;S>E;)A=x[E++],(!e||m.call(_,A))&&(f[A]=_[A]);return f}:o,M0}var gI;function Ere(){if(gI)return pI;gI=1;var e=ze();return e(e.S+e.F,"Object",{assign:R7()}),pI}var mI={},k0,yI;function I7(){return yI||(yI=1,k0=Object.is||function(t,r){return t===r?t!==0||1/t===1/r:t!=t&&r!=r}),k0}var _I;function Are(){if(_I)return mI;_I=1;var e=ze();return e(e.S,"Object",{is:I7()}),mI}var bI={},L0,wI;function e2(){if(wI)return L0;wI=1;var e=on(),t=mr(),r=function(n,i){if(t(n),!e(i)&&i!==null)throw TypeError(i+": can't set as prototype!")};return L0={set:Object.setPrototypeOf||("__proto__"in{}?function(n,i,s){try{s=Do()(Function.call,co().f(Object.prototype,"__proto__").set,2),s(n,[]),i=!(n instanceof Array)}catch{i=!0}return function(a,u){return r(a,u),i?a.__proto__=u:s(a,u),a}}({},!1):void 0),check:r},L0}var xI;function Tre(){if(xI)return bI;xI=1;var e=ze();return e(e.S,"Object",{setPrototypeOf:e2().set}),bI}var SI={},N0,EI;function zl(){if(EI)return N0;EI=1;var e=Fo(),t=An()("toStringTag"),r=e(function(){return arguments}())=="Arguments",n=function(i,s){try{return i[s]}catch{}};return N0=function(i){var s,o,a;return i===void 0?"Undefined":i===null?"Null":typeof(o=n(s=Object(i),t))=="string"?o:r?e(s):(a=e(s))=="Object"&&typeof s.callee=="function"?"Arguments":a},N0}var AI;function Pre(){if(AI)return SI;AI=1;var e=zl(),t={};return t[An()("toStringTag")]="z",t+""!="[object z]"&&qs()(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0),SI}var TI={},q0,PI;function O7(){return PI||(PI=1,q0=function(e,t,r){var n=r===void 0;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}),q0}var D0,CI;function M7(){if(CI)return D0;CI=1;var e=es(),t=on(),r=O7(),n=[].slice,i={},s=function(o,a,u){if(!(a in i)){for(var c=[],f=0;f<a;f++)c[f]="a["+f+"]";i[a]=Function("F,a","return new F("+c.join(",")+")")}return i[a](o,u)};return D0=Function.bind||function(a){var u=e(this),c=n.call(arguments,1),f=function(){var h=c.concat(n.call(arguments));return this instanceof f?s(u,h.length,h):r(u,h,a)};return t(u.prototype)&&(f.prototype=u.prototype),f},D0}var RI;function Cre(){if(RI)return TI;RI=1;var e=ze();return e(e.P,"Function",{bind:M7()}),TI}var II={},OI;function Rre(){if(OI)return II;OI=1;var e=ti().f,t=Function.prototype,r=/^\s*function ([^ (]*)/,n="name";return n in t||Fn()&&e(t,n,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch{return""}}}),II}var MI={},kI;function Ire(){if(kI)return MI;kI=1;var e=on(),t=lo(),r=An()("hasInstance"),n=Function.prototype;return r in n||ti().f(n,r,{value:function(i){if(typeof this!="function"||!e(i))return!1;if(!e(this.prototype))return i instanceof this;for(;i=t(i);)if(this.prototype===i)return!0;return!1}}),MI}var LI={},F0,NI;function t2(){return NI||(NI=1,F0=`	
\v\f\r   ᠎             　\u2028\u2029\uFEFF`),F0}var B0,qI;function Vl(){if(qI)return B0;qI=1;var e=ze(),t=va(),r=Jr(),n=t2(),i="["+n+"]",s="​",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),u=function(f,h,g){var y={},m=r(function(){return!!n[f]()||s[f]()!=s}),_=y[f]=m?h(c):n[f];g&&(y[g]=_),e(e.P+e.F*m,"String",y)},c=u.trim=function(f,h){return f=String(t(f)),h&1&&(f=f.replace(o,"")),h&2&&(f=f.replace(a,"")),f};return B0=u,B0}var z0,DI;function k7(){if(DI)return z0;DI=1;var e=Ur().parseInt,t=Vl().trim,r=t2(),n=/^[-+]?0[xX]/;return z0=e(r+"08")!==8||e(r+"0x16")!==22?function(s,o){var a=t(String(s),3);return e(a,o>>>0||(n.test(a)?16:10))}:e,z0}var FI;function Ore(){if(FI)return LI;FI=1;var e=ze(),t=k7();return e(e.G+e.F*(parseInt!=t),{parseInt:t}),LI}var BI={},V0,zI;function L7(){if(zI)return V0;zI=1;var e=Ur().parseFloat,t=Vl().trim;return V0=1/e(t2()+"-0")!==-1/0?function(n){var i=t(String(n),3),s=e(i);return s===0&&i.charAt(0)=="-"?-0:s}:e,V0}var VI;function Mre(){if(VI)return BI;VI=1;var e=ze(),t=L7();return e(e.G+e.F*(parseFloat!=t),{parseFloat:t}),BI}var GI={},G0,$I;function r2(){if($I)return G0;$I=1;var e=on(),t=e2().set;return G0=function(r,n,i){var s=n.constructor,o;return s!==i&&typeof s=="function"&&(o=s.prototype)!==i.prototype&&e(o)&&t&&t(r,o),r},G0}var UI;function kre(){if(UI)return GI;UI=1;var e=Ur(),t=ao(),r=Fo(),n=r2(),i=pa(),s=Jr(),o=_c().f,a=co().f,u=ti().f,c=Vl().trim,f="Number",h=e[f],g=h,y=h.prototype,m=r(yc()(y))==f,_="trim"in String.prototype,x=function(T){var I=i(T,!1);if(typeof I=="string"&&I.length>2){I=_?I.trim():c(I,3);var N=I.charCodeAt(0),p,P,O;if(N===43||N===45){if(p=I.charCodeAt(2),p===88||p===120)return NaN}else if(N===48){switch(I.charCodeAt(1)){case 66:case 98:P=2,O=49;break;case 79:case 111:P=8,O=55;break;default:return+I}for(var q=I.slice(2),V=0,W=q.length,G;V<W;V++)if(G=q.charCodeAt(V),G<48||G>O)return NaN;return parseInt(q,P)}}return+I};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(I){var N=arguments.length<1?0:I,p=this;return p instanceof h&&(m?s(function(){y.valueOf.call(p)}):r(p)!=f)?n(new g(x(N)),p,h):x(N)};for(var S=Fn()?o(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0,A;S.length>E;E++)t(g,A=S[E])&&!t(h,A)&&u(h,A,a(g,A));h.prototype=y,y.constructor=h,qs()(e,f,h)}return GI}var jI={},$0,HI;function N7(){if(HI)return $0;HI=1;var e=Fo();return $0=function(t,r){if(typeof t!="number"&&e(t)!="Number")throw TypeError(r);return+t},$0}var U0,WI;function n2(){if(WI)return U0;WI=1;var e=Bo(),t=va();return U0=function(n){var i=String(t(this)),s="",o=e(n);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(i+=i))o&1&&(s+=i);return s},U0}var XI;function Lre(){if(XI)return jI;XI=1;var e=ze(),t=Bo(),r=N7(),n=n2(),i=1 .toFixed,s=Math.floor,o=[0,0,0,0,0,0],a="Number.toFixed: incorrect invocation!",u="0",c=function(m,_){for(var x=-1,S=_;++x<6;)S+=m*o[x],o[x]=S%1e7,S=s(S/1e7)},f=function(m){for(var _=6,x=0;--_>=0;)x+=o[_],o[_]=s(x/m),x=x%m*1e7},h=function(){for(var m=6,_="";--m>=0;)if(_!==""||m===0||o[m]!==0){var x=String(o[m]);_=_===""?x:_+n.call(u,7-x.length)+x}return _},g=function(m,_,x){return _===0?x:_%2===1?g(m,_-1,x*m):g(m*m,_/2,x)},y=function(m){for(var _=0,x=m;x>=4096;)_+=12,x/=4096;for(;x>=2;)_+=1,x/=2;return _};return e(e.P+e.F*(!!i&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!Jr()(function(){i.call({})})),"Number",{toFixed:function(_){var x=r(this,a),S=t(_),E="",A=u,T,I,N,p;if(S<0||S>20)throw RangeError(a);if(x!=x)return"NaN";if(x<=-1e21||x>=1e21)return String(x);if(x<0&&(E="-",x=-x),x>1e-21)if(T=y(x*g(2,69,1))-69,I=T<0?x*g(2,-T,1):x/g(2,T,1),I*=4503599627370496,T=52-T,T>0){for(c(0,I),N=S;N>=7;)c(1e7,0),N-=7;for(c(g(10,N,1),0),N=T-1;N>=23;)f(1<<23),N-=23;f(1<<N),c(1,1),f(2),A=h()}else c(0,I),c(1<<-T,0),A=h()+n.call(u,S);return S>0?(p=A.length,A=E+(p<=S?"0."+n.call(u,S-p)+A:A.slice(0,p-S)+"."+A.slice(p-S))):A=E+A,A}}),jI}var YI={},KI;function Nre(){if(KI)return YI;KI=1;var e=ze(),t=Jr(),r=N7(),n=1 .toPrecision;return e(e.P+e.F*(t(function(){return n.call(1,void 0)!=="1"})||!t(function(){n.call({})})),"Number",{toPrecision:function(s){var o=r(this,"Number#toPrecision: incorrect invocation!");return s===void 0?n.call(o):n.call(o,s)}}),YI}var ZI={},JI;function qre(){if(JI)return ZI;JI=1;var e=ze();return e(e.S,"Number",{EPSILON:Math.pow(2,-52)}),ZI}var QI={},eO;function Dre(){if(eO)return QI;eO=1;var e=ze(),t=Ur().isFinite;return e(e.S,"Number",{isFinite:function(n){return typeof n=="number"&&t(n)}}),QI}var tO={},j0,rO;function q7(){if(rO)return j0;rO=1;var e=on(),t=Math.floor;return j0=function(n){return!e(n)&&isFinite(n)&&t(n)===n},j0}var nO;function Fre(){if(nO)return tO;nO=1;var e=ze();return e(e.S,"Number",{isInteger:q7()}),tO}var iO={},sO;function Bre(){if(sO)return iO;sO=1;var e=ze();return e(e.S,"Number",{isNaN:function(r){return r!=r}}),iO}var oO={},aO;function zre(){if(aO)return oO;aO=1;var e=ze(),t=q7(),r=Math.abs;return e(e.S,"Number",{isSafeInteger:function(i){return t(i)&&r(i)<=9007199254740991}}),oO}var uO={},cO;function Vre(){if(cO)return uO;cO=1;var e=ze();return e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991}),uO}var lO={},fO;function Gre(){if(fO)return lO;fO=1;var e=ze();return e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991}),lO}var hO={},dO;function $re(){if(dO)return hO;dO=1;var e=ze(),t=L7();return e(e.S+e.F*(Number.parseFloat!=t),"Number",{parseFloat:t}),hO}var pO={},vO;function Ure(){if(vO)return pO;vO=1;var e=ze(),t=k7();return e(e.S+e.F*(Number.parseInt!=t),"Number",{parseInt:t}),pO}var gO={},H0,mO;function D7(){return mO||(mO=1,H0=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}),H0}var yO;function jre(){if(yO)return gO;yO=1;var e=ze(),t=D7(),r=Math.sqrt,n=Math.acosh;return e(e.S+e.F*!(n&&Math.floor(n(Number.MAX_VALUE))==710&&n(1/0)==1/0),"Math",{acosh:function(s){return(s=+s)<1?NaN:s>9490626562425156e-8?Math.log(s)+Math.LN2:t(s-1+r(s-1)*r(s+1))}}),gO}var _O={},bO;function Hre(){if(bO)return _O;bO=1;var e=ze(),t=Math.asinh;function r(n){return!isFinite(n=+n)||n==0?n:n<0?-r(-n):Math.log(n+Math.sqrt(n*n+1))}return e(e.S+e.F*!(t&&1/t(0)>0),"Math",{asinh:r}),_O}var wO={},xO;function Wre(){if(xO)return wO;xO=1;var e=ze(),t=Math.atanh;return e(e.S+e.F*!(t&&1/t(-0)<0),"Math",{atanh:function(n){return(n=+n)==0?n:Math.log((1+n)/(1-n))/2}}),wO}var SO={},W0,EO;function i2(){return EO||(EO=1,W0=Math.sign||function(t){return(t=+t)==0||t!=t?t:t<0?-1:1}),W0}var AO;function Xre(){if(AO)return SO;AO=1;var e=ze(),t=i2();return e(e.S,"Math",{cbrt:function(n){return t(n=+n)*Math.pow(Math.abs(n),1/3)}}),SO}var TO={},PO;function Yre(){if(PO)return TO;PO=1;var e=ze();return e(e.S,"Math",{clz32:function(r){return(r>>>=0)?31-Math.floor(Math.log(r+.5)*Math.LOG2E):32}}),TO}var CO={},RO;function Kre(){if(RO)return CO;RO=1;var e=ze(),t=Math.exp;return e(e.S,"Math",{cosh:function(n){return(t(n=+n)+t(-n))/2}}),CO}var IO={},X0,OO;function s2(){if(OO)return X0;OO=1;var e=Math.expm1;return X0=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||e(-2e-17)!=-2e-17?function(r){return(r=+r)==0?r:r>-1e-6&&r<1e-6?r+r*r/2:Math.exp(r)-1}:e,X0}var MO;function Zre(){if(MO)return IO;MO=1;var e=ze(),t=s2();return e(e.S+e.F*(t!=Math.expm1),"Math",{expm1:t}),IO}var kO={},Y0,LO;function F7(){if(LO)return Y0;LO=1;var e=i2(),t=Math.pow,r=t(2,-52),n=t(2,-23),i=t(2,127)*(2-n),s=t(2,-126),o=function(a){return a+1/r-1/r};return Y0=Math.fround||function(u){var c=Math.abs(u),f=e(u),h,g;return c<s?f*o(c/s/n)*s*n:(h=(1+n/r)*c,g=h-(h-c),g>i||g!=g?f*(1/0):f*g)},Y0}var NO;function Jre(){if(NO)return kO;NO=1;var e=ze();return e(e.S,"Math",{fround:F7()}),kO}var qO={},DO;function Qre(){if(DO)return qO;DO=1;var e=ze(),t=Math.abs;return e(e.S,"Math",{hypot:function(n,i){for(var s=0,o=0,a=arguments.length,u=0,c,f;o<a;)c=t(arguments[o++]),u<c?(f=u/c,s=s*f*f+1,u=c):c>0?(f=c/u,s+=f*f):s+=c;return u===1/0?1/0:u*Math.sqrt(s)}}),qO}var FO={},BO;function ene(){if(BO)return FO;BO=1;var e=ze(),t=Math.imul;return e(e.S+e.F*Jr()(function(){return t(4294967295,5)!=-5||t.length!=2}),"Math",{imul:function(n,i){var s=65535,o=+n,a=+i,u=s&o,c=s&a;return 0|u*c+((s&o>>>16)*c+u*(s&a>>>16)<<16>>>0)}}),FO}var zO={},VO;function tne(){if(VO)return zO;VO=1;var e=ze();return e(e.S,"Math",{log10:function(r){return Math.log(r)*Math.LOG10E}}),zO}var GO={},$O;function rne(){if($O)return GO;$O=1;var e=ze();return e(e.S,"Math",{log1p:D7()}),GO}var UO={},jO;function nne(){if(jO)return UO;jO=1;var e=ze();return e(e.S,"Math",{log2:function(r){return Math.log(r)/Math.LN2}}),UO}var HO={},WO;function ine(){if(WO)return HO;WO=1;var e=ze();return e(e.S,"Math",{sign:i2()}),HO}var XO={},YO;function sne(){if(YO)return XO;YO=1;var e=ze(),t=s2(),r=Math.exp;return e(e.S+e.F*Jr()(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(i){return Math.abs(i=+i)<1?(t(i)-t(-i))/2:(r(i-1)-r(-i-1))*(Math.E/2)}}),XO}var KO={},ZO;function one(){if(ZO)return KO;ZO=1;var e=ze(),t=s2(),r=Math.exp;return e(e.S,"Math",{tanh:function(i){var s=t(i=+i),o=t(-i);return s==1/0?1:o==1/0?-1:(s-o)/(r(i)+r(-i))}}),KO}var JO={},QO;function ane(){if(QO)return JO;QO=1;var e=ze();return e(e.S,"Math",{trunc:function(r){return(r>0?Math.floor:Math.ceil)(r)}}),JO}var eM={},tM;function une(){if(tM)return eM;tM=1;var e=ze(),t=gc(),r=String.fromCharCode,n=String.fromCodePoint;return e(e.S+e.F*(!!n&&n.length!=1),"String",{fromCodePoint:function(s){for(var o=[],a=arguments.length,u=0,c;a>u;){if(c=+arguments[u++],t(c,1114111)!==c)throw RangeError(c+" is not a valid code point");o.push(c<65536?r(c):r(((c-=65536)>>10)+55296,c%1024+56320))}return o.join("")}}),eM}var rM={},nM;function cne(){if(nM)return rM;nM=1;var e=ze(),t=uo(),r=On();return e(e.S,"String",{raw:function(i){for(var s=t(i.raw),o=r(s.length),a=arguments.length,u=[],c=0;o>c;)u.push(String(s[c++])),c<a&&u.push(String(arguments[c]));return u.join("")}}),rM}var iM={},sM;function lne(){return sM||(sM=1,Vl()("trim",function(e){return function(){return e(this,3)}})),iM}var oM={},K0,aM;function vv(){if(aM)return K0;aM=1;var e=Bo(),t=va();return K0=function(r){return function(n,i){var s=String(t(n)),o=e(i),a=s.length,u,c;return o<0||o>=a?r?"":void 0:(u=s.charCodeAt(o),u<55296||u>56319||o+1===a||(c=s.charCodeAt(o+1))<56320||c>57343?r?s.charAt(o):u:r?s.slice(o,o+2):(u-55296<<10)+(c-56320)+65536)}},K0}var Z0,uM;function Gl(){return uM||(uM=1,Z0={}),Z0}var J0,cM;function o2(){if(cM)return J0;cM=1;var e=yc(),t=pc(),r=Bl(),n={};return Ns()(n,An()("iterator"),function(){return this}),J0=function(i,s,o){i.prototype=e(n,{next:t(1,o)}),r(i,s+" Iterator")},J0}var Q0,lM;function a2(){if(lM)return Q0;lM=1;var e=Cu(),t=ze(),r=qs(),n=Ns(),i=Gl(),s=o2(),o=Bl(),a=lo(),u=An()("iterator"),c=!([].keys&&"next"in[].keys()),f="@@iterator",h="keys",g="values",y=function(){return this};return Q0=function(m,_,x,S,E,A,T){s(x,_,S);var I=function(U){if(!c&&U in O)return O[U];switch(U){case h:return function(){return new x(this,U)};case g:return function(){return new x(this,U)}}return function(){return new x(this,U)}},N=_+" Iterator",p=E==g,P=!1,O=m.prototype,q=O[u]||O[f]||E&&O[E],V=q||I(E),W=E?p?I("entries"):V:void 0,G=_=="Array"&&O.entries||q,J,se,K;if(G&&(K=a(G.call(new m)),K!==Object.prototype&&K.next&&(o(K,N,!0),!e&&typeof K[u]!="function"&&n(K,u,y))),p&&q&&q.name!==g&&(P=!0,V=function(){return q.call(this)}),(!e||T)&&(c||P||!O[u])&&n(O,u,V),i[_]=V,i[N]=y,E)if(J={values:p?V:I(g),keys:A?V:I(h),entries:W},T)for(se in J)se in O||r(O,se,J[se]);else t(t.P+t.F*(c||P),_,J);return J},Q0}var fM;function fne(){if(fM)return oM;fM=1;var e=vv()(!0);return a2()(String,"String",function(t){this._t=String(t),this._i=0},function(){var t=this._t,r=this._i,n;return r>=t.length?{value:void 0,done:!0}:(n=e(t,r),this._i+=n.length,{value:n,done:!1})}),oM}var hM={},dM;function hne(){if(dM)return hM;dM=1;var e=ze(),t=vv()(!1);return e(e.P,"String",{codePointAt:function(n){return t(this,n)}}),hM}var pM={},ey,vM;function gv(){if(vM)return ey;vM=1;var e=on(),t=Fo(),r=An()("match");return ey=function(n){var i;return e(n)&&((i=n[r])!==void 0?!!i:t(n)=="RegExp")},ey}var ty,gM;function u2(){if(gM)return ty;gM=1;var e=gv(),t=va();return ty=function(r,n,i){if(e(n))throw TypeError("String#"+i+" doesn't accept regex!");return String(t(r))},ty}var ry,mM;function c2(){if(mM)return ry;mM=1;var e=An()("match");return ry=function(t){var r=/./;try{"/./"[t](r)}catch{try{return r[e]=!1,!"/./"[t](r)}catch{}}return!0},ry}var yM;function dne(){if(yM)return pM;yM=1;var e=ze(),t=On(),r=u2(),n="endsWith",i=""[n];return e(e.P+e.F*c2()(n),"String",{endsWith:function(o){var a=r(this,o,n),u=arguments.length>1?arguments[1]:void 0,c=t(a.length),f=u===void 0?c:Math.min(t(u),c),h=String(o);return i?i.call(a,h,f):a.slice(f-h.length,f)===h}}),pM}var _M={},bM;function pne(){if(bM)return _M;bM=1;var e=ze(),t=u2(),r="includes";return e(e.P+e.F*c2()(r),"String",{includes:function(i){return!!~t(this,i,r).indexOf(i,arguments.length>1?arguments[1]:void 0)}}),_M}var wM={},xM;function vne(){if(xM)return wM;xM=1;var e=ze();return e(e.P,"String",{repeat:n2()}),wM}var SM={},EM;function gne(){if(EM)return SM;EM=1;var e=ze(),t=On(),r=u2(),n="startsWith",i=""[n];return e(e.P+e.F*c2()(n),"String",{startsWith:function(o){var a=r(this,o,n),u=t(Math.min(arguments.length>1?arguments[1]:void 0,a.length)),c=String(o);return i?i.call(a,c,u):a.slice(u,u+c.length)===c}}),SM}var AM={},ny,TM;function Ds(){if(TM)return ny;TM=1;var e=ze(),t=Jr(),r=va(),n=/"/g,i=function(s,o,a,u){var c=String(r(s)),f="<"+o;return a!==""&&(f+=" "+a+'="'+String(u).replace(n,"&quot;")+'"'),f+">"+c+"</"+o+">"};return ny=function(s,o){var a={};a[s]=o(i),e(e.P+e.F*t(function(){var u=""[s]('"');return u!==u.toLowerCase()||u.split('"').length>3}),"String",a)},ny}var PM;function mne(){return PM||(PM=1,Ds()("anchor",function(e){return function(r){return e(this,"a","name",r)}})),AM}var CM={},RM;function yne(){return RM||(RM=1,Ds()("big",function(e){return function(){return e(this,"big","","")}})),CM}var IM={},OM;function _ne(){return OM||(OM=1,Ds()("blink",function(e){return function(){return e(this,"blink","","")}})),IM}var MM={},kM;function bne(){return kM||(kM=1,Ds()("bold",function(e){return function(){return e(this,"b","","")}})),MM}var LM={},NM;function wne(){return NM||(NM=1,Ds()("fixed",function(e){return function(){return e(this,"tt","","")}})),LM}var qM={},DM;function xne(){return DM||(DM=1,Ds()("fontcolor",function(e){return function(r){return e(this,"font","color",r)}})),qM}var FM={},BM;function Sne(){return BM||(BM=1,Ds()("fontsize",function(e){return function(r){return e(this,"font","size",r)}})),FM}var zM={},VM;function Ene(){return VM||(VM=1,Ds()("italics",function(e){return function(){return e(this,"i","","")}})),zM}var GM={},$M;function Ane(){return $M||($M=1,Ds()("link",function(e){return function(r){return e(this,"a","href",r)}})),GM}var UM={},jM;function Tne(){return jM||(jM=1,Ds()("small",function(e){return function(){return e(this,"small","","")}})),UM}var HM={},WM;function Pne(){return WM||(WM=1,Ds()("strike",function(e){return function(){return e(this,"strike","","")}})),HM}var XM={},YM;function Cne(){return YM||(YM=1,Ds()("sub",function(e){return function(){return e(this,"sub","","")}})),XM}var KM={},ZM;function Rne(){return ZM||(ZM=1,Ds()("sup",function(e){return function(){return e(this,"sup","","")}})),KM}var JM={},QM;function Ine(){if(QM)return JM;QM=1;var e=ze();return e(e.S,"Date",{now:function(){return new Date().getTime()}}),JM}var ek={},tk;function One(){if(tk)return ek;tk=1;var e=ze(),t=si(),r=pa();return e(e.P+e.F*Jr()(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1}),"Date",{toJSON:function(i){var s=t(this),o=r(s);return typeof o=="number"&&!isFinite(o)?null:s.toISOString()}}),ek}var rk={},iy,nk;function Mne(){if(nk)return iy;nk=1;var e=Jr(),t=Date.prototype.getTime,r=Date.prototype.toISOString,n=function(i){return i>9?i:"0"+i};return iy=e(function(){return r.call(new Date(-5e13-1))!="0385-07-25T07:06:39.999Z"})||!e(function(){r.call(new Date(NaN))})?function(){if(!isFinite(t.call(this)))throw RangeError("Invalid time value");var s=this,o=s.getUTCFullYear(),a=s.getUTCMilliseconds(),u=o<0?"-":o>9999?"+":"";return u+("00000"+Math.abs(o)).slice(u?-6:-4)+"-"+n(s.getUTCMonth()+1)+"-"+n(s.getUTCDate())+"T"+n(s.getUTCHours())+":"+n(s.getUTCMinutes())+":"+n(s.getUTCSeconds())+"."+(a>99?a:"0"+n(a))+"Z"}:r,iy}var ik;function kne(){if(ik)return rk;ik=1;var e=ze(),t=Mne();return e(e.P+e.F*(Date.prototype.toISOString!==t),"Date",{toISOString:t}),rk}var sk={},ok;function Lne(){if(ok)return sk;ok=1;var e=Date.prototype,t="Invalid Date",r="toString",n=e[r],i=e.getTime;return new Date(NaN)+""!=t&&qs()(e,r,function(){var o=i.call(this);return o===o?n.call(this):t}),sk}var ak={},sy,uk;function Nne(){if(uk)return sy;uk=1;var e=mr(),t=pa(),r="number";return sy=function(n){if(n!=="string"&&n!==r&&n!=="default")throw TypeError("Incorrect hint");return t(e(this),n!=r)},sy}var ck;function qne(){if(ck)return ak;ck=1;var e=An()("toPrimitive"),t=Date.prototype;return e in t||Ns()(t,e,Nne()),ak}var lk={},fk;function Dne(){if(fk)return lk;fk=1;var e=ze();return e(e.S,"Array",{isArray:pv()}),lk}var hk={},oy,dk;function B7(){if(dk)return oy;dk=1;var e=mr();return oy=function(t,r,n,i){try{return i?r(e(n)[0],n[1]):r(n)}catch(o){var s=t.return;throw s!==void 0&&e(s.call(t)),o}},oy}var ay,pk;function l2(){if(pk)return ay;pk=1;var e=Gl(),t=An()("iterator"),r=Array.prototype;return ay=function(n){return n!==void 0&&(e.Array===n||r[t]===n)},ay}var uy,vk;function f2(){if(vk)return uy;vk=1;var e=ti(),t=pc();return uy=function(r,n,i){n in r?e.f(r,n,t(0,i)):r[n]=i},uy}var cy,gk;function h2(){if(gk)return cy;gk=1;var e=zl(),t=An()("iterator"),r=Gl();return cy=qo().getIteratorMethod=function(n){if(n!=null)return n[t]||n["@@iterator"]||r[e(n)]},cy}var ly,mk;function mv(){if(mk)return ly;mk=1;var e=An()("iterator"),t=!1;try{var r=[7][e]();r.return=function(){t=!0},Array.from(r,function(){throw 2})}catch{}return ly=function(n,i){if(!i&&!t)return!1;var s=!1;try{var o=[7],a=o[e]();a.next=function(){return{done:s=!0}},o[e]=function(){return a},n(o)}catch{}return s},ly}var yk;function Fne(){if(yk)return hk;yk=1;var e=Do(),t=ze(),r=si(),n=B7(),i=l2(),s=On(),o=f2(),a=h2();return t(t.S+t.F*!mv()(function(u){Array.from(u)}),"Array",{from:function(c){var f=r(c),h=typeof this=="function"?this:Array,g=arguments.length,y=g>1?arguments[1]:void 0,m=y!==void 0,_=0,x=a(f),S,E,A,T;if(m&&(y=e(y,g>2?arguments[2]:void 0,2)),x!=null&&!(h==Array&&i(x)))for(T=x.call(f),E=new h;!(A=T.next()).done;_++)o(E,_,m?n(T,y,[A.value,_],!0):A.value);else for(S=s(f.length),E=new h(S);S>_;_++)o(E,_,m?y(f[_],_):f[_]);return E.length=_,E}}),hk}var _k={},bk;function Bne(){if(bk)return _k;bk=1;var e=ze(),t=f2();return e(e.S+e.F*Jr()(function(){function r(){}return!(Array.of.call(r)instanceof r)}),"Array",{of:function(){for(var n=0,i=arguments.length,s=new(typeof this=="function"?this:Array)(i);i>n;)t(s,n,arguments[n++]);return s.length=i,s}}),_k}var wk={},fy,xk;function zo(){if(xk)return fy;xk=1;var e=Jr();return fy=function(t,r){return!!t&&e(function(){r?t.call(null,function(){},1):t.call(null)})},fy}var Sk;function zne(){if(Sk)return wk;Sk=1;var e=ze(),t=uo(),r=[].join;return e(e.P+e.F*(Ph()!=Object||!zo()(r)),"Array",{join:function(i){return r.call(t(this),i===void 0?",":i)}}),wk}var Ek={},Ak;function Vne(){if(Ak)return Ek;Ak=1;var e=ze(),t=QE(),r=Fo(),n=gc(),i=On(),s=[].slice;return e(e.P+e.F*Jr()(function(){t&&s.call(t)}),"Array",{slice:function(a,u){var c=i(this.length),f=r(this);if(u=u===void 0?c:u,f=="Array")return s.call(this,a,u);for(var h=n(a,c),g=n(u,c),y=i(g-h),m=new Array(y),_=0;_<y;_++)m[_]=f=="String"?this.charAt(h+_):this[h+_];return m}}),Ek}var Tk={},Pk;function Gne(){if(Pk)return Tk;Pk=1;var e=ze(),t=es(),r=si(),n=Jr(),i=[].sort,s=[1,2,3];return e(e.P+e.F*(n(function(){s.sort(void 0)})||!n(function(){s.sort(null)})||!zo()(i)),"Array",{sort:function(a){return a===void 0?i.call(r(this)):i.call(r(this),t(a))}}),Tk}var Ck={},hy,Rk;function $ne(){if(Rk)return hy;Rk=1;var e=on(),t=pv(),r=An()("species");return hy=function(n){var i;return t(n)&&(i=n.constructor,typeof i=="function"&&(i===Array||t(i.prototype))&&(i=void 0),e(i)&&(i=i[r],i===null&&(i=void 0))),i===void 0?Array:i},hy}var dy,Ik;function d2(){if(Ik)return dy;Ik=1;var e=$ne();return dy=function(t,r){return new(e(t))(r)},dy}var py,Ok;function ma(){if(Ok)return py;Ok=1;var e=Do(),t=Ph(),r=si(),n=On(),i=d2();return py=function(s,o){var a=s==1,u=s==2,c=s==3,f=s==4,h=s==6,g=s==5||h,y=o||i;return function(m,_,x){for(var S=r(m),E=t(S),A=e(_,x,3),T=n(E.length),I=0,N=a?y(m,T):u?y(m,0):void 0,p,P;T>I;I++)if((g||I in E)&&(p=E[I],P=A(p,I,S),s)){if(a)N[I]=P;else if(P)switch(s){case 3:return!0;case 5:return p;case 6:return I;case 2:N.push(p)}else if(f)return!1}return h?-1:c||f?f:N}},py}var Mk;function Une(){if(Mk)return Ck;Mk=1;var e=ze(),t=ma()(0),r=zo()([].forEach,!0);return e(e.P+e.F*!r,"Array",{forEach:function(i){return t(this,i,arguments[1])}}),Ck}var kk={},Lk;function jne(){if(Lk)return kk;Lk=1;var e=ze(),t=ma()(1);return e(e.P+e.F*!zo()([].map,!0),"Array",{map:function(n){return t(this,n,arguments[1])}}),kk}var Nk={},qk;function Hne(){if(qk)return Nk;qk=1;var e=ze(),t=ma()(2);return e(e.P+e.F*!zo()([].filter,!0),"Array",{filter:function(n){return t(this,n,arguments[1])}}),Nk}var Dk={},Fk;function Wne(){if(Fk)return Dk;Fk=1;var e=ze(),t=ma()(3);return e(e.P+e.F*!zo()([].some,!0),"Array",{some:function(n){return t(this,n,arguments[1])}}),Dk}var Bk={},zk;function Xne(){if(zk)return Bk;zk=1;var e=ze(),t=ma()(4);return e(e.P+e.F*!zo()([].every,!0),"Array",{every:function(n){return t(this,n,arguments[1])}}),Bk}var Vk={},vy,Gk;function z7(){if(Gk)return vy;Gk=1;var e=es(),t=si(),r=Ph(),n=On();return vy=function(i,s,o,a,u){e(s);var c=t(i),f=r(c),h=n(c.length),g=u?h-1:0,y=u?-1:1;if(o<2)for(;;){if(g in f){a=f[g],g+=y;break}if(g+=y,u?g<0:h<=g)throw TypeError("Reduce of empty array with no initial value")}for(;u?g>=0:h>g;g+=y)g in f&&(a=s(a,f[g],g,c));return a},vy}var $k;function Yne(){if($k)return Vk;$k=1;var e=ze(),t=z7();return e(e.P+e.F*!zo()([].reduce,!0),"Array",{reduce:function(n){return t(this,n,arguments.length,arguments[1],!1)}}),Vk}var Uk={},jk;function Kne(){if(jk)return Uk;jk=1;var e=ze(),t=z7();return e(e.P+e.F*!zo()([].reduceRight,!0),"Array",{reduceRight:function(n){return t(this,n,arguments.length,arguments[1],!0)}}),Uk}var Hk={},Wk;function Zne(){if(Wk)return Hk;Wk=1;var e=ze(),t=hv()(!1),r=[].indexOf,n=!!r&&1/[1].indexOf(1,-0)<0;return e(e.P+e.F*(n||!zo()(r)),"Array",{indexOf:function(s){return n?r.apply(this,arguments)||0:t(this,s,arguments[1])}}),Hk}var Xk={},Yk;function Jne(){if(Yk)return Xk;Yk=1;var e=ze(),t=uo(),r=Bo(),n=On(),i=[].lastIndexOf,s=!!i&&1/[1].lastIndexOf(1,-0)<0;return e(e.P+e.F*(s||!zo()(i)),"Array",{lastIndexOf:function(a){if(s)return i.apply(this,arguments)||0;var u=t(this),c=n(u.length),f=c-1;for(arguments.length>1&&(f=Math.min(f,r(arguments[1]))),f<0&&(f=c+f);f>=0;f--)if(f in u&&u[f]===a)return f||0;return-1}}),Xk}var Kk={},gy,Zk;function V7(){if(Zk)return gy;Zk=1;var e=si(),t=gc(),r=On();return gy=[].copyWithin||function(i,s){var o=e(this),a=r(o.length),u=t(i,a),c=t(s,a),f=arguments.length>2?arguments[2]:void 0,h=Math.min((f===void 0?a:t(f,a))-c,a-u),g=1;for(c<u&&u<c+h&&(g=-1,c+=h-1,u+=h-1);h-- >0;)c in o?o[u]=o[c]:delete o[u],u+=g,c+=g;return o},gy}var my,Jk;function Iu(){if(Jk)return my;Jk=1;var e=An()("unscopables"),t=Array.prototype;return t[e]==null&&Ns()(t,e,{}),my=function(r){t[e][r]=!0},my}var Qk;function Qne(){if(Qk)return Kk;Qk=1;var e=ze();return e(e.P,"Array",{copyWithin:V7()}),Iu()("copyWithin"),Kk}var eL={},yy,tL;function p2(){if(tL)return yy;tL=1;var e=si(),t=gc(),r=On();return yy=function(i){for(var s=e(this),o=r(s.length),a=arguments.length,u=t(a>1?arguments[1]:void 0,o),c=a>2?arguments[2]:void 0,f=c===void 0?o:t(c,o);f>u;)s[u++]=i;return s},yy}var rL;function eie(){if(rL)return eL;rL=1;var e=ze();return e(e.P,"Array",{fill:p2()}),Iu()("fill"),eL}var nL={},iL;function tie(){if(iL)return nL;iL=1;var e=ze(),t=ma()(5),r="find",n=!0;return r in[]&&Array(1)[r](function(){n=!1}),e(e.P+e.F*n,"Array",{find:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0)}}),Iu()(r),nL}var sL={},oL;function rie(){if(oL)return sL;oL=1;var e=ze(),t=ma()(6),r="findIndex",n=!0;return r in[]&&Array(1)[r](function(){n=!1}),e(e.P+e.F*n,"Array",{findIndex:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0)}}),Iu()(r),sL}var aL={},_y,uL;function bc(){if(uL)return _y;uL=1;var e=Ur(),t=ti(),r=Fn(),n=An()("species");return _y=function(i){var s=e[i];r&&s&&!s[n]&&t.f(s,n,{configurable:!0,get:function(){return this}})},_y}var cL;function nie(){return cL||(cL=1,bc()("Array")),aL}var by,lL;function G7(){return lL||(lL=1,by=function(e,t){return{value:t,done:!!e}}),by}var wy,fL;function v2(){if(fL)return wy;fL=1;var e=Iu(),t=G7(),r=Gl(),n=uo();return wy=a2()(Array,"Array",function(i,s){this._t=n(i),this._i=0,this._k=s},function(){var i=this._t,s=this._k,o=this._i++;return!i||o>=i.length?(this._t=void 0,t(1)):s=="keys"?t(0,o):s=="values"?t(0,i[o]):t(0,[o,i[o]])},"values"),r.Arguments=r.Array,e("keys"),e("values"),e("entries"),wy}var hL={},xy,dL;function Rh(){if(dL)return xy;dL=1;var e=mr();return xy=function(){var t=e(this),r="";return t.global&&(r+="g"),t.ignoreCase&&(r+="i"),t.multiline&&(r+="m"),t.unicode&&(r+="u"),t.sticky&&(r+="y"),r},xy}var pL;function iie(){if(pL)return hL;pL=1;var e=Ur(),t=r2(),r=ti().f,n=_c().f,i=gv(),s=Rh(),o=e.RegExp,a=o,u=o.prototype,c=/a/g,f=/a/g,h=new o(c)!==c;if(Fn()&&(!h||Jr()(function(){return f[An()("match")]=!1,o(c)!=c||o(f)==f||o(c,"i")!="/a/i"}))){o=function(x,S){var E=this instanceof o,A=i(x),T=S===void 0;return!E&&A&&x.constructor===o&&T?x:t(h?new a(A&&!T?x.source:x,S):a((A=x instanceof o)?x.source:x,A&&T?s.call(x):S),E?this:u,o)};for(var g=function(_){_ in o||r(o,_,{configurable:!0,get:function(){return a[_]},set:function(x){a[_]=x}})},y=n(a),m=0;y.length>m;)g(y[m++]);u.constructor=o,o.prototype=u,qs()(e,"RegExp",o)}return bc()("RegExp"),hL}var vL={},Sy,gL;function g2(){if(gL)return Sy;gL=1;var e=Rh(),t=RegExp.prototype.exec,r=String.prototype.replace,n=t,i="lastIndex",s=function(){var u=/a/,c=/b*/g;return t.call(u,"a"),t.call(c,"a"),u[i]!==0||c[i]!==0}(),o=/()??/.exec("")[1]!==void 0,a=s||o;return a&&(n=function(c){var f=this,h,g,y,m;return o&&(g=new RegExp("^"+f.source+"$(?!\\s)",e.call(f))),s&&(h=f[i]),y=t.call(f,c),s&&y&&(f[i]=f.global?y.index+y[0].length:h),o&&y&&y.length>1&&r.call(y[0],g,function(){for(m=1;m<arguments.length-2;m++)arguments[m]===void 0&&(y[m]=void 0)}),y}),Sy=n,Sy}var mL;function $7(){if(mL)return vL;mL=1;var e=g2();return ze()({target:"RegExp",proto:!0,forced:e!==/./.exec},{exec:e}),vL}var yL={},_L={},bL;function U7(){return bL||(bL=1,Fn()&&/./g.flags!="g"&&ti().f(RegExp.prototype,"flags",{configurable:!0,get:Rh()})),_L}var wL;function sie(){if(wL)return yL;wL=1,U7();var e=mr(),t=Rh(),r=Fn(),n="toString",i=/./[n],s=function(o){qs()(RegExp.prototype,n,o,!0)};return Jr()(function(){return i.call({source:"a",flags:"b"})!="/a/b"})?s(function(){var a=e(this);return"/".concat(a.source,"/","flags"in a?a.flags:!r&&a instanceof RegExp?t.call(a):void 0)}):i.name!=n&&s(function(){return i.call(this)}),yL}var xL={},Ey,SL;function m2(){if(SL)return Ey;SL=1;var e=vv()(!0);return Ey=function(t,r,n){return r+(n?e(t,r).length:1)},Ey}var Ay,EL;function yv(){if(EL)return Ay;EL=1;var e=zl(),t=RegExp.prototype.exec;return Ay=function(r,n){var i=r.exec;if(typeof i=="function"){var s=i.call(r,n);if(typeof s!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if(e(r)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return t.call(r,n)},Ay}var Ty,AL;function _v(){if(AL)return Ty;AL=1,$7();var e=qs(),t=Ns(),r=Jr(),n=va(),i=An(),s=g2(),o=i("species"),a=!r(function(){var c=/./;return c.exec=function(){var f=[];return f.groups={a:"7"},f},"".replace(c,"$<a>")!=="7"}),u=function(){var c=/(?:)/,f=c.exec;c.exec=function(){return f.apply(this,arguments)};var h="ab".split(c);return h.length===2&&h[0]==="a"&&h[1]==="b"}();return Ty=function(c,f,h){var g=i(c),y=!r(function(){var A={};return A[g]=function(){return 7},""[c](A)!=7}),m=y?!r(function(){var A=!1,T=/a/;return T.exec=function(){return A=!0,null},c==="split"&&(T.constructor={},T.constructor[o]=function(){return T}),T[g](""),!A}):void 0;if(!y||!m||c==="replace"&&!a||c==="split"&&!u){var _=/./[g],x=h(n,g,""[c],function(T,I,N,p,P){return I.exec===s?y&&!P?{done:!0,value:_.call(I,N,p)}:{done:!0,value:T.call(N,I,p)}:{done:!1}}),S=x[0],E=x[1];e(String.prototype,c,S),t(RegExp.prototype,g,f==2?function(A,T){return E.call(A,this,T)}:function(A){return E.call(A,this)})}},Ty}var TL;function oie(){if(TL)return xL;TL=1;var e=mr(),t=On(),r=m2(),n=yv();return _v()("match",1,function(i,s,o,a){return[function(c){var f=i(this),h=c==null?void 0:c[s];return h!==void 0?h.call(c,f):new RegExp(c)[s](String(f))},function(u){var c=a(o,u,this);if(c.done)return c.value;var f=e(u),h=String(this);if(!f.global)return n(f,h);var g=f.unicode;f.lastIndex=0;for(var y=[],m=0,_;(_=n(f,h))!==null;){var x=String(_[0]);y[m]=x,x===""&&(f.lastIndex=r(h,t(f.lastIndex),g)),m++}return m===0?null:y}]}),xL}var PL={},CL;function aie(){if(CL)return PL;CL=1;var e=mr(),t=si(),r=On(),n=Bo(),i=m2(),s=yv(),o=Math.max,a=Math.min,u=Math.floor,c=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,h=function(g){return g===void 0?g:String(g)};return _v()("replace",2,function(g,y,m,_){return[function(E,A){var T=g(this),I=E==null?void 0:E[y];return I!==void 0?I.call(E,T,A):m.call(String(T),E,A)},function(S,E){var A=_(m,S,this,E);if(A.done)return A.value;var T=e(S),I=String(this),N=typeof E=="function";N||(E=String(E));var p=T.global;if(p){var P=T.unicode;T.lastIndex=0}for(var O=[];;){var q=s(T,I);if(q===null||(O.push(q),!p))break;var V=String(q[0]);V===""&&(T.lastIndex=i(I,r(T.lastIndex),P))}for(var W="",G=0,J=0;J<O.length;J++){q=O[J];for(var se=String(q[0]),K=o(a(n(q.index),I.length),0),U=[],j=1;j<q.length;j++)U.push(h(q[j]));var Q=q.groups;if(N){var de=[se].concat(U,K,I);Q!==void 0&&de.push(Q);var ce=String(E.apply(void 0,de))}else ce=x(se,I,K,U,Q,E);K>=G&&(W+=I.slice(G,K)+ce,G=K+se.length)}return W+I.slice(G)}];function x(S,E,A,T,I,N){var p=A+S.length,P=T.length,O=f;return I!==void 0&&(I=t(I),O=c),m.call(N,O,function(q,V){var W;switch(V.charAt(0)){case"$":return"$";case"&":return S;case"`":return E.slice(0,A);case"'":return E.slice(p);case"<":W=I[V.slice(1,-1)];break;default:var G=+V;if(G===0)return q;if(G>P){var J=u(G/10);return J===0?q:J<=P?T[J-1]===void 0?V.charAt(1):T[J-1]+V.charAt(1):q}W=T[G-1]}return W===void 0?"":W})}}),PL}var RL={},IL;function uie(){if(IL)return RL;IL=1;var e=mr(),t=I7(),r=yv();return _v()("search",1,function(n,i,s,o){return[function(u){var c=n(this),f=u==null?void 0:u[i];return f!==void 0?f.call(u,c):new RegExp(u)[i](String(c))},function(a){var u=o(s,a,this);if(u.done)return u.value;var c=e(a),f=String(this),h=c.lastIndex;t(h,0)||(c.lastIndex=0);var g=r(c,f);return t(c.lastIndex,h)||(c.lastIndex=h),g===null?-1:g.index}]}),RL}var OL={},Py,ML;function Ih(){if(ML)return Py;ML=1;var e=mr(),t=es(),r=An()("species");return Py=function(n,i){var s=e(n).constructor,o;return s===void 0||(o=e(s)[r])==null?i:t(o)},Py}var kL;function cie(){if(kL)return OL;kL=1;var e=gv(),t=mr(),r=Ih(),n=m2(),i=On(),s=yv(),o=g2(),a=Jr(),u=Math.min,c=[].push,f="split",h="length",g="lastIndex",y=4294967295,m=!a(function(){});return _v()("split",2,function(_,x,S,E){var A;return"abbc"[f](/(b)*/)[1]=="c"||"test"[f](/(?:)/,-1)[h]!=4||"ab"[f](/(?:ab)*/)[h]!=2||"."[f](/(.?)(.?)/)[h]!=4||"."[f](/()()/)[h]>1||""[f](/.?/)[h]?A=function(T,I){var N=String(this);if(T===void 0&&I===0)return[];if(!e(T))return S.call(N,T,I);for(var p=[],P=(T.ignoreCase?"i":"")+(T.multiline?"m":"")+(T.unicode?"u":"")+(T.sticky?"y":""),O=0,q=I===void 0?y:I>>>0,V=new RegExp(T.source,P+"g"),W,G,J;(W=o.call(V,N))&&(G=V[g],!(G>O&&(p.push(N.slice(O,W.index)),W[h]>1&&W.index<N[h]&&c.apply(p,W.slice(1)),J=W[0][h],O=G,p[h]>=q)));)V[g]===W.index&&V[g]++;return O===N[h]?(J||!V.test(""))&&p.push(""):p.push(N.slice(O)),p[h]>q?p.slice(0,q):p}:"0"[f](void 0,0)[h]?A=function(T,I){return T===void 0&&I===0?[]:S.call(this,T,I)}:A=S,[function(I,N){var p=_(this),P=I==null?void 0:I[x];return P!==void 0?P.call(I,p,N):A.call(String(p),I,N)},function(T,I){var N=E(A,T,this,I,A!==S);if(N.done)return N.value;var p=t(T),P=String(this),O=r(p,RegExp),q=p.unicode,V=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(m?"y":"g"),W=new O(m?p:"^(?:"+p.source+")",V),G=I===void 0?y:I>>>0;if(G===0)return[];if(P.length===0)return s(W,P)===null?[P]:[];for(var J=0,se=0,K=[];se<P.length;){W.lastIndex=m?se:0;var U=s(W,m?P:P.slice(se)),j;if(U===null||(j=u(i(W.lastIndex+(m?0:se)),P.length))===J)se=n(P,se,q);else{if(K.push(P.slice(J,se)),K.length===G)return K;for(var Q=1;Q<=U.length-1;Q++)if(K.push(U[Q]),K.length===G)return K;se=J=j}}return K.push(P.slice(J)),K}]}),OL}var LL={},Cy,NL;function wc(){return NL||(NL=1,Cy=function(e,t,r,n){if(!(e instanceof t)||n!==void 0&&n in e)throw TypeError(r+": incorrect invocation!");return e}),Cy}var Ry={exports:{}},qL;function xc(){if(qL)return Ry.exports;qL=1;var e=Do(),t=B7(),r=l2(),n=mr(),i=On(),s=h2(),o={},a={},u=Ry.exports=function(c,f,h,g,y){var m=y?function(){return c}:s(c),_=e(h,g,f?2:1),x=0,S,E,A,T;if(typeof m!="function")throw TypeError(c+" is not iterable!");if(r(m)){for(S=i(c.length);S>x;x++)if(T=f?_(n(E=c[x])[0],E[1]):_(c[x]),T===o||T===a)return T}else for(A=m.call(c);!(E=A.next()).done;)if(T=t(A,_,E.value,f),T===o||T===a)return T};return u.BREAK=o,u.RETURN=a,Ry.exports}var Iy,DL;function y2(){if(DL)return Iy;DL=1;var e=Do(),t=O7(),r=QE(),n=YE(),i=Ur(),s=i.process,o=i.setImmediate,a=i.clearImmediate,u=i.MessageChannel,c=i.Dispatch,f=0,h={},g="onreadystatechange",y,m,_,x=function(){var E=+this;if(h.hasOwnProperty(E)){var A=h[E];delete h[E],A()}},S=function(E){x.call(E.data)};return(!o||!a)&&(o=function(A){for(var T=[],I=1;arguments.length>I;)T.push(arguments[I++]);return h[++f]=function(){t(typeof A=="function"?A:Function(A),T)},y(f),f},a=function(A){delete h[A]},Fo()(s)=="process"?y=function(E){s.nextTick(e(x,E,1))}:c&&c.now?y=function(E){c.now(e(x,E,1))}:u?(m=new u,_=m.port2,m.port1.onmessage=S,y=e(_.postMessage,_,1)):i.addEventListener&&typeof postMessage=="function"&&!i.importScripts?(y=function(E){i.postMessage(E+"","*")},i.addEventListener("message",S,!1)):g in n("script")?y=function(E){r.appendChild(n("script"))[g]=function(){r.removeChild(this),x.call(E)}}:y=function(E){setTimeout(e(x,E,1),0)}),Iy={set:o,clear:a},Iy}var Oy,FL;function _2(){if(FL)return Oy;FL=1;var e=Ur(),t=y2().set,r=e.MutationObserver||e.WebKitMutationObserver,n=e.process,i=e.Promise,s=Fo()(n)=="process";return Oy=function(){var o,a,u,c=function(){var y,m;for(s&&(y=n.domain)&&y.exit();o;){m=o.fn,o=o.next;try{m()}catch(_){throw o?u():a=void 0,_}}a=void 0,y&&y.enter()};if(s)u=function(){n.nextTick(c)};else if(r&&!(e.navigator&&e.navigator.standalone)){var f=!0,h=document.createTextNode("");new r(c).observe(h,{characterData:!0}),u=function(){h.data=f=!f}}else if(i&&i.resolve){var g=i.resolve(void 0);u=function(){g.then(c)}}else u=function(){t.call(e,c)};return function(y){var m={fn:y,next:void 0};a&&(a.next=m),o||(o=m,u()),a=m}},Oy}var My={},BL;function b2(){if(BL)return My;BL=1;var e=es();function t(r){var n,i;this.promise=new r(function(s,o){if(n!==void 0||i!==void 0)throw TypeError("Bad Promise constructor");n=s,i=o}),this.resolve=e(n),this.reject=e(i)}return My.f=function(r){return new t(r)},My}var ky,zL;function j7(){return zL||(zL=1,ky=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}),ky}var Ly,VL;function bv(){if(VL)return Ly;VL=1;var e=Ur(),t=e.navigator;return Ly=t&&t.userAgent||"",Ly}var Ny,GL;function H7(){if(GL)return Ny;GL=1;var e=mr(),t=on(),r=b2();return Ny=function(n,i){if(e(n),t(i)&&i.constructor===n)return i;var s=r.f(n),o=s.resolve;return o(i),s.promise},Ny}var qy,$L;function Sc(){if($L)return qy;$L=1;var e=qs();return qy=function(t,r,n){for(var i in r)e(t,i,r[i],n);return t},qy}var UL;function lie(){if(UL)return LL;UL=1;var e=Cu(),t=Ur(),r=Do(),n=zl(),i=ze(),s=on(),o=es(),a=wc(),u=xc(),c=Ih(),f=y2().set,h=_2()(),g=b2(),y=j7(),m=bv(),_=H7(),x="Promise",S=t.TypeError,E=t.process,A=E&&E.versions,T=A&&A.v8||"",I=t[x],N=n(E)=="process",p=function(){},P,O,q,V,W=O=g.f,G=!!function(){try{var ce=I.resolve(1),Te=(ce.constructor={})[An()("species")]=function(Se){Se(p,p)};return(N||typeof PromiseRejectionEvent=="function")&&ce.then(p)instanceof Te&&T.indexOf("6.6")!==0&&m.indexOf("Chrome/66")===-1}catch{}}(),J=function(ce){var Te;return s(ce)&&typeof(Te=ce.then)=="function"?Te:!1},se=function(ce,Te){if(!ce._n){ce._n=!0;var Se=ce._c;h(function(){for(var re=ce._v,ae=ce._s==1,ne=0,te=function(le){var Xe=ae?le.ok:le.fail,Ne=le.resolve,Re=le.reject,nt=le.domain,Ve,L,B;try{Xe?(ae||(ce._h==2&&j(ce),ce._h=1),Xe===!0?Ve=re:(nt&&nt.enter(),Ve=Xe(re),nt&&(nt.exit(),B=!0)),Ve===le.promise?Re(S("Promise-chain cycle")):(L=J(Ve))?L.call(Ve,Ne,Re):Ne(Ve)):Re(re)}catch(H){nt&&!B&&nt.exit(),Re(H)}};Se.length>ne;)te(Se[ne++]);ce._c=[],ce._n=!1,Te&&!ce._h&&K(ce)})}},K=function(ce){f.call(t,function(){var Te=ce._v,Se=U(ce),re,ae,ne;if(Se&&(re=y(function(){N?E.emit("unhandledRejection",Te,ce):(ae=t.onunhandledrejection)?ae({promise:ce,reason:Te}):(ne=t.console)&&ne.error&&ne.error("Unhandled promise rejection",Te)}),ce._h=N||U(ce)?2:1),ce._a=void 0,Se&&re.e)throw re.v})},U=function(ce){return ce._h!==1&&(ce._a||ce._c).length===0},j=function(ce){f.call(t,function(){var Te;N?E.emit("rejectionHandled",ce):(Te=t.onrejectionhandled)&&Te({promise:ce,reason:ce._v})})},Q=function(ce){var Te=this;Te._d||(Te._d=!0,Te=Te._w||Te,Te._v=ce,Te._s=2,Te._a||(Te._a=Te._c.slice()),se(Te,!0))},de=function(ce){var Te=this,Se;if(!Te._d){Te._d=!0,Te=Te._w||Te;try{if(Te===ce)throw S("Promise can't be resolved itself");(Se=J(ce))?h(function(){var re={_w:Te,_d:!1};try{Se.call(ce,r(de,re,1),r(Q,re,1))}catch(ae){Q.call(re,ae)}}):(Te._v=ce,Te._s=1,se(Te,!1))}catch(re){Q.call({_w:Te,_d:!1},re)}}};return G||(I=function(Te){a(this,I,x,"_h"),o(Te),P.call(this);try{Te(r(de,this,1),r(Q,this,1))}catch(Se){Q.call(this,Se)}},P=function(Te){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},P.prototype=Sc()(I.prototype,{then:function(Te,Se){var re=W(c(this,I));return re.ok=typeof Te=="function"?Te:!0,re.fail=typeof Se=="function"&&Se,re.domain=N?E.domain:void 0,this._c.push(re),this._a&&this._a.push(re),this._s&&se(this,!1),re.promise},catch:function(ce){return this.then(void 0,ce)}}),q=function(){var ce=new P;this.promise=ce,this.resolve=r(de,ce,1),this.reject=r(Q,ce,1)},g.f=W=function(ce){return ce===I||ce===V?new q(ce):O(ce)}),i(i.G+i.W+i.F*!G,{Promise:I}),Bl()(I,x),bc()(x),V=qo()[x],i(i.S+i.F*!G,x,{reject:function(Te){var Se=W(this),re=Se.reject;return re(Te),Se.promise}}),i(i.S+i.F*(e||!G),x,{resolve:function(Te){return _(e&&this===V?I:this,Te)}}),i(i.S+i.F*!(G&&mv()(function(ce){I.all(ce).catch(p)})),x,{all:function(Te){var Se=this,re=W(Se),ae=re.resolve,ne=re.reject,te=y(function(){var le=[],Xe=0,Ne=1;u(Te,!1,function(Re){var nt=Xe++,Ve=!1;le.push(void 0),Ne++,Se.resolve(Re).then(function(L){Ve||(Ve=!0,le[nt]=L,--Ne||ae(le))},ne)}),--Ne||ae(le)});return te.e&&ne(te.v),re.promise},race:function(Te){var Se=this,re=W(Se),ae=re.reject,ne=y(function(){u(Te,!1,function(te){Se.resolve(te).then(re.resolve,ae)})});return ne.e&&ae(ne.v),re.promise}}),LL}var Dy,jL;function uc(){if(jL)return Dy;jL=1;var e=on();return Dy=function(t,r){if(!e(t)||t._t!==r)throw TypeError("Incompatible receiver, "+r+" required!");return t},Dy}var Fy,HL;function W7(){if(HL)return Fy;HL=1;var e=ti().f,t=yc(),r=Sc(),n=Do(),i=wc(),s=xc(),o=a2(),a=G7(),u=bc(),c=Fn(),f=Ru().fastKey,h=uc(),g=c?"_s":"size",y=function(m,_){var x=f(_),S;if(x!=="F")return m._i[x];for(S=m._f;S;S=S.n)if(S.k==_)return S};return Fy={getConstructor:function(m,_,x,S){var E=m(function(A,T){i(A,E,_,"_i"),A._t=_,A._i=t(null),A._f=void 0,A._l=void 0,A[g]=0,T!=null&&s(T,x,A[S],A)});return r(E.prototype,{clear:function(){for(var T=h(this,_),I=T._i,N=T._f;N;N=N.n)N.r=!0,N.p&&(N.p=N.p.n=void 0),delete I[N.i];T._f=T._l=void 0,T[g]=0},delete:function(A){var T=h(this,_),I=y(T,A);if(I){var N=I.n,p=I.p;delete T._i[I.i],I.r=!0,p&&(p.n=N),N&&(N.p=p),T._f==I&&(T._f=N),T._l==I&&(T._l=p),T[g]--}return!!I},forEach:function(T){h(this,_);for(var I=n(T,arguments.length>1?arguments[1]:void 0,3),N;N=N?N.n:this._f;)for(I(N.v,N.k,this);N&&N.r;)N=N.p},has:function(T){return!!y(h(this,_),T)}}),c&&e(E.prototype,"size",{get:function(){return h(this,_)[g]}}),E},def:function(m,_,x){var S=y(m,_),E,A;return S?S.v=x:(m._l=S={i:A=f(_,!0),k:_,v:x,p:E=m._l,n:void 0,r:!1},m._f||(m._f=S),E&&(E.n=S),m[g]++,A!=="F"&&(m._i[A]=S)),m},getEntry:y,setStrong:function(m,_,x){o(m,_,function(S,E){this._t=h(S,_),this._k=E,this._l=void 0},function(){for(var S=this,E=S._k,A=S._l;A&&A.r;)A=A.p;return!S._t||!(S._l=A=A?A.n:S._t._f)?(S._t=void 0,a(1)):E=="keys"?a(0,A.k):E=="values"?a(0,A.v):a(0,[A.k,A.v])},x?"entries":"values",!x,!0),u(_)}},Fy}var By,WL;function wv(){if(WL)return By;WL=1;var e=Ur(),t=ze(),r=qs(),n=Sc(),i=Ru(),s=xc(),o=wc(),a=on(),u=Jr(),c=mv(),f=Bl(),h=r2();return By=function(g,y,m,_,x,S){var E=e[g],A=E,T=x?"set":"add",I=A&&A.prototype,N={},p=function(G){var J=I[G];r(I,G,G=="delete"?function(se){return S&&!a(se)?!1:J.call(this,se===0?0:se)}:G=="has"?function(K){return S&&!a(K)?!1:J.call(this,K===0?0:K)}:G=="get"?function(K){return S&&!a(K)?void 0:J.call(this,K===0?0:K)}:G=="add"?function(K){return J.call(this,K===0?0:K),this}:function(K,U){return J.call(this,K===0?0:K,U),this})};if(typeof A!="function"||!(S||I.forEach&&!u(function(){new A().entries().next()})))A=_.getConstructor(y,g,x,T),n(A.prototype,m),i.NEED=!0;else{var P=new A,O=P[T](S?{}:-0,1)!=P,q=u(function(){P.has(1)}),V=c(function(G){new A(G)}),W=!S&&u(function(){for(var G=new A,J=5;J--;)G[T](J,J);return!G.has(-0)});V||(A=y(function(G,J){o(G,A,g);var se=h(new E,G,A);return J!=null&&s(J,x,se[T],se),se}),A.prototype=I,I.constructor=A),(q||W)&&(p("delete"),p("has"),x&&p("get")),(W||O)&&p(T),S&&I.clear&&delete I.clear}return f(A,g),N[g]=A,t(t.G+t.W+t.F*(A!=E),N),S||_.setStrong(A,g,x),A},By}var zy,XL;function X7(){if(XL)return zy;XL=1;var e=W7(),t=uc(),r="Map";return zy=wv()(r,function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}},{get:function(i){var s=e.getEntry(t(this,r),i);return s&&s.v},set:function(i,s){return e.def(t(this,r),i===0?0:i,s)}},e,!0),zy}var Vy,YL;function Y7(){if(YL)return Vy;YL=1;var e=W7(),t=uc(),r="Set";return Vy=wv()(r,function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}},{add:function(i){return e.def(t(this,r),i=i===0?0:i,i)}},e),Vy}var Gy={exports:{}},$y,KL;function K7(){if(KL)return $y;KL=1;var e=Sc(),t=Ru().getWeak,r=mr(),n=on(),i=wc(),s=xc(),o=ma(),a=ao(),u=uc(),c=o(5),f=o(6),h=0,g=function(_){return _._l||(_._l=new y)},y=function(){this.a=[]},m=function(_,x){return c(_.a,function(S){return S[0]===x})};return y.prototype={get:function(_){var x=m(this,_);if(x)return x[1]},has:function(_){return!!m(this,_)},set:function(_,x){var S=m(this,_);S?S[1]=x:this.a.push([_,x])},delete:function(_){var x=f(this.a,function(S){return S[0]===_});return~x&&this.a.splice(x,1),!!~x}},$y={getConstructor:function(_,x,S,E){var A=_(function(T,I){i(T,A,x,"_i"),T._t=x,T._i=h++,T._l=void 0,I!=null&&s(I,S,T[E],T)});return e(A.prototype,{delete:function(T){if(!n(T))return!1;var I=t(T);return I===!0?g(u(this,x)).delete(T):I&&a(I,this._i)&&delete I[this._i]},has:function(I){if(!n(I))return!1;var N=t(I);return N===!0?g(u(this,x)).has(I):N&&a(N,this._i)}}),A},def:function(_,x,S){var E=t(r(x),!0);return E===!0?g(_).set(x,S):E[_._i]=S,_},ufstore:g},$y}var ZL;function Z7(){if(ZL)return Gy.exports;ZL=1;var e=Ur(),t=ma()(0),r=qs(),n=Ru(),i=R7(),s=K7(),o=on(),a=uc(),u=uc(),c=!e.ActiveXObject&&"ActiveXObject"in e,f="WeakMap",h=n.getWeak,g=Object.isExtensible,y=s.ufstore,m,_=function(E){return function(){return E(this,arguments.length>0?arguments[0]:void 0)}},x={get:function(A){if(o(A)){var T=h(A);return T===!0?y(a(this,f)).get(A):T?T[this._i]:void 0}},set:function(A,T){return s.def(a(this,f),A,T)}},S=Gy.exports=wv()(f,_,x,s,!0,!0);return u&&c&&(m=s.getConstructor(_,f),i(m.prototype,x),n.NEED=!0,t(["delete","has","get","set"],function(E){var A=S.prototype,T=A[E];r(A,E,function(I,N){if(o(I)&&!g(I)){this._f||(this._f=new m);var p=this._f[E](I,N);return E=="set"?this:p}return T.call(this,I,N)})})),Gy.exports}var JL={},QL;function fie(){if(QL)return JL;QL=1;var e=K7(),t=uc(),r="WeakSet";return wv()(r,function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}},{add:function(i){return e.def(t(this,r),i,!0)}},e,!1,!0),JL}var eN={},Uy,tN;function xv(){if(tN)return Uy;tN=1;for(var e=Ur(),t=Ns(),r=vc(),n=r("typed_array"),i=r("view"),s=!!(e.ArrayBuffer&&e.DataView),o=s,a=0,u=9,c,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");a<u;)(c=e[f[a++]])?(t(c.prototype,n,!0),t(c.prototype,i,!0)):o=!1;return Uy={ABV:s,CONSTR:o,TYPED:n,VIEW:i},Uy}var jy={},Hy,rN;function J7(){if(rN)return Hy;rN=1;var e=Bo(),t=On();return Hy=function(r){if(r===void 0)return 0;var n=e(r),i=t(n);if(n!==i)throw RangeError("Wrong length!");return i},Hy}var nN;function w2(){return nN||(nN=1,function(e){var t=Ur(),r=Fn(),n=Cu(),i=xv(),s=Ns(),o=Sc(),a=Jr(),u=wc(),c=Bo(),f=On(),h=J7(),g=_c().f,y=ti().f,m=p2(),_=Bl(),x="ArrayBuffer",S="DataView",E="prototype",A="Wrong length!",T="Wrong index!",I=t[x],N=t[S],p=t.Math,P=t.RangeError,O=t.Infinity,q=I,V=p.abs,W=p.pow,G=p.floor,J=p.log,se=p.LN2,K="buffer",U="byteLength",j="byteOffset",Q=r?"_b":K,de=r?"_l":U,ce=r?"_o":j;function Te(ue,Ae,Ce){var Be=new Array(Ce),Le=Ce*8-Ae-1,Ie=(1<<Le)-1,we=Ie>>1,je=Ae===23?W(2,-24)-W(2,-77):0,ct=0,yt=ue<0||ue===0&&1/ue<0?1:0,ft,it,Wt;for(ue=V(ue),ue!=ue||ue===O?(it=ue!=ue?1:0,ft=Ie):(ft=G(J(ue)/se),ue*(Wt=W(2,-ft))<1&&(ft--,Wt*=2),ft+we>=1?ue+=je/Wt:ue+=je*W(2,1-we),ue*Wt>=2&&(ft++,Wt/=2),ft+we>=Ie?(it=0,ft=Ie):ft+we>=1?(it=(ue*Wt-1)*W(2,Ae),ft=ft+we):(it=ue*W(2,we-1)*W(2,Ae),ft=0));Ae>=8;Be[ct++]=it&255,it/=256,Ae-=8);for(ft=ft<<Ae|it,Le+=Ae;Le>0;Be[ct++]=ft&255,ft/=256,Le-=8);return Be[--ct]|=yt*128,Be}function Se(ue,Ae,Ce){var Be=Ce*8-Ae-1,Le=(1<<Be)-1,Ie=Le>>1,we=Be-7,je=Ce-1,ct=ue[je--],yt=ct&127,ft;for(ct>>=7;we>0;yt=yt*256+ue[je],je--,we-=8);for(ft=yt&(1<<-we)-1,yt>>=-we,we+=Ae;we>0;ft=ft*256+ue[je],je--,we-=8);if(yt===0)yt=1-Ie;else{if(yt===Le)return ft?NaN:ct?-O:O;ft=ft+W(2,Ae),yt=yt-Ie}return(ct?-1:1)*ft*W(2,yt-Ae)}function re(ue){return ue[3]<<24|ue[2]<<16|ue[1]<<8|ue[0]}function ae(ue){return[ue&255]}function ne(ue){return[ue&255,ue>>8&255]}function te(ue){return[ue&255,ue>>8&255,ue>>16&255,ue>>24&255]}function le(ue){return Te(ue,52,8)}function Xe(ue){return Te(ue,23,4)}function Ne(ue,Ae,Ce){y(ue[E],Ae,{get:function(){return this[Ce]}})}function Re(ue,Ae,Ce,Be){var Le=+Ce,Ie=h(Le);if(Ie+Ae>ue[de])throw P(T);var we=ue[Q]._b,je=Ie+ue[ce],ct=we.slice(je,je+Ae);return Be?ct:ct.reverse()}function nt(ue,Ae,Ce,Be,Le,Ie){var we=+Ce,je=h(we);if(je+Ae>ue[de])throw P(T);for(var ct=ue[Q]._b,yt=je+ue[ce],ft=Be(+Le),it=0;it<Ae;it++)ct[yt+it]=ft[Ie?it:Ae-it-1]}if(!i.ABV)I=function(Ae){u(this,I,x);var Ce=h(Ae);this._b=m.call(new Array(Ce),0),this[de]=Ce},N=function(Ae,Ce,Be){u(this,N,S),u(Ae,I,S);var Le=Ae[de],Ie=c(Ce);if(Ie<0||Ie>Le)throw P("Wrong offset!");if(Be=Be===void 0?Le-Ie:f(Be),Ie+Be>Le)throw P(A);this[Q]=Ae,this[ce]=Ie,this[de]=Be},r&&(Ne(I,U,"_l"),Ne(N,K,"_b"),Ne(N,U,"_l"),Ne(N,j,"_o")),o(N[E],{getInt8:function(Ae){return Re(this,1,Ae)[0]<<24>>24},getUint8:function(Ae){return Re(this,1,Ae)[0]},getInt16:function(Ae){var Ce=Re(this,2,Ae,arguments[1]);return(Ce[1]<<8|Ce[0])<<16>>16},getUint16:function(Ae){var Ce=Re(this,2,Ae,arguments[1]);return Ce[1]<<8|Ce[0]},getInt32:function(Ae){return re(Re(this,4,Ae,arguments[1]))},getUint32:function(Ae){return re(Re(this,4,Ae,arguments[1]))>>>0},getFloat32:function(Ae){return Se(Re(this,4,Ae,arguments[1]),23,4)},getFloat64:function(Ae){return Se(Re(this,8,Ae,arguments[1]),52,8)},setInt8:function(Ae,Ce){nt(this,1,Ae,ae,Ce)},setUint8:function(Ae,Ce){nt(this,1,Ae,ae,Ce)},setInt16:function(Ae,Ce){nt(this,2,Ae,ne,Ce,arguments[2])},setUint16:function(Ae,Ce){nt(this,2,Ae,ne,Ce,arguments[2])},setInt32:function(Ae,Ce){nt(this,4,Ae,te,Ce,arguments[2])},setUint32:function(Ae,Ce){nt(this,4,Ae,te,Ce,arguments[2])},setFloat32:function(Ae,Ce){nt(this,4,Ae,Xe,Ce,arguments[2])},setFloat64:function(Ae,Ce){nt(this,8,Ae,le,Ce,arguments[2])}});else{if(!a(function(){I(1)})||!a(function(){new I(-1)})||a(function(){return new I,new I(1.5),new I(NaN),I.name!=x})){I=function(Ae){return u(this,I),new q(h(Ae))};for(var Ve=I[E]=q[E],L=g(q),B=0,H;L.length>B;)(H=L[B++])in I||s(I,H,q[H]);n||(Ve.constructor=I)}var X=new N(new I(2)),xe=N[E].setInt8;X.setInt8(0,2147483648),X.setInt8(1,2147483649),(X.getInt8(0)||!X.getInt8(1))&&o(N[E],{setInt8:function(Ae,Ce){xe.call(this,Ae,Ce<<24>>24)},setUint8:function(Ae,Ce){xe.call(this,Ae,Ce<<24>>24)}},!0)}_(I,x),_(N,S),s(N[E],i.VIEW,!0),e[x]=I,e[S]=N}(jy)),jy}var iN;function hie(){if(iN)return eN;iN=1;var e=ze(),t=xv(),r=w2(),n=mr(),i=gc(),s=On(),o=on(),a=Ur().ArrayBuffer,u=Ih(),c=r.ArrayBuffer,f=r.DataView,h=t.ABV&&a.isView,g=c.prototype.slice,y=t.VIEW,m="ArrayBuffer";return e(e.G+e.W+e.F*(a!==c),{ArrayBuffer:c}),e(e.S+e.F*!t.CONSTR,m,{isView:function(x){return h&&h(x)||o(x)&&y in x}}),e(e.P+e.U+e.F*Jr()(function(){return!new c(2).slice(1,void 0).byteLength}),m,{slice:function(x,S){if(g!==void 0&&S===void 0)return g.call(n(this),x);for(var E=n(this).byteLength,A=i(x,E),T=i(S===void 0?E:S,E),I=new(u(this,c))(s(T-A)),N=new f(this),p=new f(I),P=0;A<T;)p.setUint8(P++,N.getUint8(A++));return I}}),bc()(m),eN}var sN={},oN;function die(){if(oN)return sN;oN=1;var e=ze();return e(e.G+e.W+e.F*!xv().ABV,{DataView:w2().DataView}),sN}var aN={},Jd={exports:{}},uN;function Wa(){if(uN)return Jd.exports;if(uN=1,Fn()){var e=Cu(),t=Ur(),r=Jr(),n=ze(),i=xv(),s=w2(),o=Do(),a=wc(),u=pc(),c=Ns(),f=Sc(),h=Bo(),g=On(),y=J7(),m=gc(),_=pa(),x=ao(),S=zl(),E=on(),A=si(),T=l2(),I=yc(),N=lo(),p=_c().f,P=h2(),O=vc(),q=An(),V=ma(),W=hv(),G=Ih(),J=v2(),se=Gl(),K=mv(),U=bc(),j=p2(),Q=V7(),de=ti(),ce=co(),Te=de.f,Se=ce.f,re=t.RangeError,ae=t.TypeError,ne=t.Uint8Array,te="ArrayBuffer",le="Shared"+te,Xe="BYTES_PER_ELEMENT",Ne="prototype",Re=Array[Ne],nt=s.ArrayBuffer,Ve=s.DataView,L=V(0),B=V(2),H=V(3),X=V(4),xe=V(5),ue=V(6),Ae=W(!0),Ce=W(!1),Be=J.values,Le=J.keys,Ie=J.entries,we=Re.lastIndexOf,je=Re.reduce,ct=Re.reduceRight,yt=Re.join,ft=Re.sort,it=Re.slice,Wt=Re.toString,yr=Re.toLocaleString,er=q("iterator"),lr=q("toStringTag"),Lr=O("typed_constructor"),Br=O("def_constructor"),wn=i.CONSTR,rr=i.TYPED,Or=i.VIEW,mn="Wrong length!",yn=V(1,function(at,We){return Bt(G(at,at[Br]),We)}),vn=r(function(){return new ne(new Uint16Array([1]).buffer)[0]===1}),Un=!!ne&&!!ne[Ne].set&&r(function(){new ne(1).set({})}),ri=function(at,We){var _t=h(at);if(_t<0||_t%We)throw re("Wrong offset!");return _t},zt=function(at){if(E(at)&&rr in at)return at;throw ae(at+" is not a typed array!")},Bt=function(at,We){if(!(E(at)&&Lr in at))throw ae("It is not a typed array constructor!");return new at(We)},zr=function(at,We){return Bn(G(at,at[Br]),We)},Bn=function(at,We){for(var _t=0,Tt=We.length,Vt=Bt(at,Tt);Tt>_t;)Vt[_t]=We[_t++];return Vt},xn=function(at,We,_t){Te(at,We,{get:function(){return this._d[_t]}})},jr=function(We){var _t=A(We),Tt=arguments.length,Vt=Tt>1?arguments[1]:void 0,an=Vt!==void 0,Wn=P(_t),Mt,en,Er,Nr,Vr,Ar;if(Wn!=null&&!T(Wn)){for(Ar=Wn.call(_t),Er=[],Mt=0;!(Vr=Ar.next()).done;Mt++)Er.push(Vr.value);_t=Er}for(an&&Tt>2&&(Vt=o(Vt,arguments[2],2)),Mt=0,en=g(_t.length),Nr=Bt(this,en);en>Mt;Mt++)Nr[Mt]=an?Vt(_t[Mt],Mt):_t[Mt];return Nr},jn=function(){for(var We=0,_t=arguments.length,Tt=Bt(this,_t);_t>We;)Tt[We]=arguments[We++];return Tt},hi=!!ne&&r(function(){yr.call(new ne(1))}),Qr=function(){return yr.apply(hi?it.call(zt(this)):zt(this),arguments)},Hn={copyWithin:function(We,_t){return Q.call(zt(this),We,_t,arguments.length>2?arguments[2]:void 0)},every:function(We){return X(zt(this),We,arguments.length>1?arguments[1]:void 0)},fill:function(We){return j.apply(zt(this),arguments)},filter:function(We){return zr(this,B(zt(this),We,arguments.length>1?arguments[1]:void 0))},find:function(We){return xe(zt(this),We,arguments.length>1?arguments[1]:void 0)},findIndex:function(We){return ue(zt(this),We,arguments.length>1?arguments[1]:void 0)},forEach:function(We){L(zt(this),We,arguments.length>1?arguments[1]:void 0)},indexOf:function(We){return Ce(zt(this),We,arguments.length>1?arguments[1]:void 0)},includes:function(We){return Ae(zt(this),We,arguments.length>1?arguments[1]:void 0)},join:function(We){return yt.apply(zt(this),arguments)},lastIndexOf:function(We){return we.apply(zt(this),arguments)},map:function(We){return yn(zt(this),We,arguments.length>1?arguments[1]:void 0)},reduce:function(We){return je.apply(zt(this),arguments)},reduceRight:function(We){return ct.apply(zt(this),arguments)},reverse:function(){for(var We=this,_t=zt(We).length,Tt=Math.floor(_t/2),Vt=0,an;Vt<Tt;)an=We[Vt],We[Vt++]=We[--_t],We[_t]=an;return We},some:function(We){return H(zt(this),We,arguments.length>1?arguments[1]:void 0)},sort:function(We){return ft.call(zt(this),We)},subarray:function(We,_t){var Tt=zt(this),Vt=Tt.length,an=m(We,Vt);return new(G(Tt,Tt[Br]))(Tt.buffer,Tt.byteOffset+an*Tt.BYTES_PER_ELEMENT,g((_t===void 0?Vt:m(_t,Vt))-an))}},kn=function(We,_t){return zr(this,it.call(zt(this),We,_t))},di=function(We){zt(this);var _t=ri(arguments[1],1),Tt=this.length,Vt=A(We),an=g(Vt.length),Wn=0;if(an+_t>Tt)throw re(mn);for(;Wn<an;)this[_t+Wn]=Vt[Wn++]},Ye={entries:function(){return Ie.call(zt(this))},keys:function(){return Le.call(zt(this))},values:function(){return Be.call(zt(this))}},Et=function(at,We){return E(at)&&at[rr]&&typeof We!="symbol"&&We in at&&String(+We)==String(We)},Rt=function(We,_t){return Et(We,_t=_(_t,!0))?u(2,We[_t]):Se(We,_t)},kt=function(We,_t,Tt){return Et(We,_t=_(_t,!0))&&E(Tt)&&x(Tt,"value")&&!x(Tt,"get")&&!x(Tt,"set")&&!Tt.configurable&&(!x(Tt,"writable")||Tt.writable)&&(!x(Tt,"enumerable")||Tt.enumerable)?(We[_t]=Tt.value,We):Te(We,_t,Tt)};wn||(ce.f=Rt,de.f=kt),n(n.S+n.F*!wn,"Object",{getOwnPropertyDescriptor:Rt,defineProperty:kt}),r(function(){Wt.call({})})&&(Wt=yr=function(){return yt.call(this)});var Lt=f({},Hn);f(Lt,Ye),c(Lt,er,Ye.values),f(Lt,{slice:kn,set:di,constructor:function(){},toString:Wt,toLocaleString:Qr}),xn(Lt,"buffer","b"),xn(Lt,"byteOffset","o"),xn(Lt,"byteLength","l"),xn(Lt,"length","e"),Te(Lt,lr,{get:function(){return this[rr]}}),Jd.exports=function(at,We,_t,Tt){Tt=!!Tt;var Vt=at+(Tt?"Clamped":"")+"Array",an="get"+at,Wn="set"+at,Mt=t[Vt],en=Mt||{},Er=Mt&&N(Mt),Nr=!Mt||!i.ABV,Vr={},Ar=Mt&&Mt[Ne],Sn=function(vt,ht){var dt=vt._d;return dt.v[an](ht*We+dt.o,vn)},Xt=function(vt,ht,dt){var Ct=vt._d;Tt&&(dt=(dt=Math.round(dt))<0?0:dt>255?255:dt&255),Ct.v[Wn](ht*We+Ct.o,dt,vn)},pi=function(vt,ht){Te(vt,ht,{get:function(){return Sn(this,ht)},set:function(dt){return Xt(this,ht,dt)},enumerable:!0})};Nr?(Mt=_t(function(vt,ht,dt,Ct){a(vt,Mt,Vt,"_d");var nr=0,Hr=0,cn,Gr,_n,zn;if(!E(ht))_n=y(ht),Gr=_n*We,cn=new nt(Gr);else if(ht instanceof nt||(zn=S(ht))==te||zn==le){cn=ht,Hr=ri(dt,We);var vi=ht.byteLength;if(Ct===void 0){if(vi%We||(Gr=vi-Hr,Gr<0))throw re(mn)}else if(Gr=g(Ct)*We,Gr+Hr>vi)throw re(mn);_n=Gr/We}else return rr in ht?Bn(Mt,ht):jr.call(Mt,ht);for(c(vt,"_d",{b:cn,o:Hr,l:Gr,e:_n,v:new Ve(cn)});nr<_n;)pi(vt,nr++)}),Ar=Mt[Ne]=I(Lt),c(Ar,"constructor",Mt)):(!r(function(){Mt(1)})||!r(function(){new Mt(-1)})||!K(function(vt){new Mt,new Mt(null),new Mt(1.5),new Mt(vt)},!0))&&(Mt=_t(function(vt,ht,dt,Ct){a(vt,Mt,Vt);var nr;return E(ht)?ht instanceof nt||(nr=S(ht))==te||nr==le?Ct!==void 0?new en(ht,ri(dt,We),Ct):dt!==void 0?new en(ht,ri(dt,We)):new en(ht):rr in ht?Bn(Mt,ht):jr.call(Mt,ht):new en(y(ht))}),L(Er!==Function.prototype?p(en).concat(p(Er)):p(en),function(vt){vt in Mt||c(Mt,vt,en[vt])}),Mt[Ne]=Ar,e||(Ar.constructor=Mt));var wi=Ar[er],Fi=!!wi&&(wi.name=="values"||wi.name==null),Ze=Ye.values;c(Mt,Lr,!0),c(Ar,rr,Vt),c(Ar,Or,!0),c(Ar,Br,Mt),(Tt?new Mt(1)[lr]!=Vt:!(lr in Ar))&&Te(Ar,lr,{get:function(){return Vt}}),Vr[Vt]=Mt,n(n.G+n.W+n.F*(Mt!=en),Vr),n(n.S,Vt,{BYTES_PER_ELEMENT:We}),n(n.S+n.F*r(function(){en.of.call(Mt,1)}),Vt,{from:jr,of:jn}),Xe in Ar||c(Ar,Xe,We),n(n.P,Vt,Hn),U(Vt),n(n.P+n.F*Un,Vt,{set:di}),n(n.P+n.F*!Fi,Vt,Ye),!e&&Ar.toString!=Wt&&(Ar.toString=Wt),n(n.P+n.F*r(function(){new Mt(1).slice()}),Vt,{slice:kn}),n(n.P+n.F*(r(function(){return[1,2].toLocaleString()!=new Mt([1,2]).toLocaleString()})||!r(function(){Ar.toLocaleString.call([1,2])})),Vt,{toLocaleString:Qr}),se[Vt]=Fi?wi:Ze,!e&&!Fi&&c(Ar,er,Ze)}}else Jd.exports=function(){};return Jd.exports}var cN;function pie(){return cN||(cN=1,Wa()("Int8",1,function(e){return function(r,n,i){return e(this,r,n,i)}})),aN}var lN={},fN;function vie(){return fN||(fN=1,Wa()("Uint8",1,function(e){return function(r,n,i){return e(this,r,n,i)}})),lN}var hN={},dN;function gie(){return dN||(dN=1,Wa()("Uint8",1,function(e){return function(r,n,i){return e(this,r,n,i)}},!0)),hN}var pN={},vN;function mie(){return vN||(vN=1,Wa()("Int16",2,function(e){return function(r,n,i){return e(this,r,n,i)}})),pN}var gN={},mN;function yie(){return mN||(mN=1,Wa()("Uint16",2,function(e){return function(r,n,i){return e(this,r,n,i)}})),gN}var yN={},_N;function _ie(){return _N||(_N=1,Wa()("Int32",4,function(e){return function(r,n,i){return e(this,r,n,i)}})),yN}var bN={},wN;function bie(){return wN||(wN=1,Wa()("Uint32",4,function(e){return function(r,n,i){return e(this,r,n,i)}})),bN}var xN={},SN;function wie(){return SN||(SN=1,Wa()("Float32",4,function(e){return function(r,n,i){return e(this,r,n,i)}})),xN}var EN={},AN;function xie(){return AN||(AN=1,Wa()("Float64",8,function(e){return function(r,n,i){return e(this,r,n,i)}})),EN}var TN={},PN;function Sie(){if(PN)return TN;PN=1;var e=ze(),t=es(),r=mr(),n=(Ur().Reflect||{}).apply,i=Function.apply;return e(e.S+e.F*!Jr()(function(){n(function(){})}),"Reflect",{apply:function(o,a,u){var c=t(o),f=r(u);return n?n(c,a,f):i.call(c,a,f)}}),TN}var CN={},RN;function Eie(){if(RN)return CN;RN=1;var e=ze(),t=yc(),r=es(),n=mr(),i=on(),s=Jr(),o=M7(),a=(Ur().Reflect||{}).construct,u=s(function(){function f(){}return!(a(function(){},[],f)instanceof f)}),c=!s(function(){a(function(){})});return e(e.S+e.F*(u||c),"Reflect",{construct:function(h,g){r(h),n(g);var y=arguments.length<3?h:r(arguments[2]);if(c&&!u)return a(h,g,y);if(h==y){switch(g.length){case 0:return new h;case 1:return new h(g[0]);case 2:return new h(g[0],g[1]);case 3:return new h(g[0],g[1],g[2]);case 4:return new h(g[0],g[1],g[2],g[3])}var m=[null];return m.push.apply(m,g),new(o.apply(h,m))}var _=y.prototype,x=t(i(_)?_:Object.prototype),S=Function.apply.call(h,x,g);return i(S)?S:x}}),CN}var IN={},ON;function Aie(){if(ON)return IN;ON=1;var e=ti(),t=ze(),r=mr(),n=pa();return t(t.S+t.F*Jr()(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(s,o,a){r(s),o=n(o,!0),r(a);try{return e.f(s,o,a),!0}catch{return!1}}}),IN}var MN={},kN;function Tie(){if(kN)return MN;kN=1;var e=ze(),t=co().f,r=mr();return e(e.S,"Reflect",{deleteProperty:function(i,s){var o=t(r(i),s);return o&&!o.configurable?!1:delete i[s]}}),MN}var LN={},NN;function Pie(){if(NN)return LN;NN=1;var e=ze(),t=mr(),r=function(n){this._t=t(n),this._i=0;var i=this._k=[],s;for(s in n)i.push(s)};return o2()(r,"Object",function(){var n=this,i=n._k,s;do if(n._i>=i.length)return{value:void 0,done:!0};while(!((s=i[n._i++])in n._t));return{value:s,done:!1}}),e(e.S,"Reflect",{enumerate:function(i){return new r(i)}}),LN}var qN={},DN;function Cie(){if(DN)return qN;DN=1;var e=co(),t=lo(),r=ao(),n=ze(),i=on(),s=mr();function o(a,u){var c=arguments.length<3?a:arguments[2],f,h;if(s(a)===c)return a[u];if(f=e.f(a,u))return r(f,"value")?f.value:f.get!==void 0?f.get.call(c):void 0;if(i(h=t(a)))return o(h,u,c)}return n(n.S,"Reflect",{get:o}),qN}var FN={},BN;function Rie(){if(BN)return FN;BN=1;var e=co(),t=ze(),r=mr();return t(t.S,"Reflect",{getOwnPropertyDescriptor:function(i,s){return e.f(r(i),s)}}),FN}var zN={},VN;function Iie(){if(VN)return zN;VN=1;var e=ze(),t=lo(),r=mr();return e(e.S,"Reflect",{getPrototypeOf:function(i){return t(r(i))}}),zN}var GN={},$N;function Oie(){if($N)return GN;$N=1;var e=ze();return e(e.S,"Reflect",{has:function(r,n){return n in r}}),GN}var UN={},jN;function Mie(){if(jN)return UN;jN=1;var e=ze(),t=mr(),r=Object.isExtensible;return e(e.S,"Reflect",{isExtensible:function(i){return t(i),r?r(i):!0}}),UN}var HN={},Wy,WN;function Q7(){if(WN)return Wy;WN=1;var e=_c(),t=dv(),r=mr(),n=Ur().Reflect;return Wy=n&&n.ownKeys||function(s){var o=e.f(r(s)),a=t.f;return a?o.concat(a(s)):o},Wy}var XN;function kie(){if(XN)return HN;XN=1;var e=ze();return e(e.S,"Reflect",{ownKeys:Q7()}),HN}var YN={},KN;function Lie(){if(KN)return YN;KN=1;var e=ze(),t=mr(),r=Object.preventExtensions;return e(e.S,"Reflect",{preventExtensions:function(i){t(i);try{return r&&r(i),!0}catch{return!1}}}),YN}var ZN={},JN;function Nie(){if(JN)return ZN;JN=1;var e=ti(),t=co(),r=lo(),n=ao(),i=ze(),s=pc(),o=mr(),a=on();function u(c,f,h){var g=arguments.length<4?c:arguments[3],y=t.f(o(c),f),m,_;if(!y){if(a(_=r(c)))return u(_,f,h,g);y=s(0)}if(n(y,"value")){if(y.writable===!1||!a(g))return!1;if(m=t.f(g,f)){if(m.get||m.set||m.writable===!1)return!1;m.value=h,e.f(g,f,m)}else e.f(g,f,s(0,h));return!0}return y.set===void 0?!1:(y.set.call(g,h),!0)}return i(i.S,"Reflect",{set:u}),ZN}var QN={},eq;function qie(){if(eq)return QN;eq=1;var e=ze(),t=e2();return t&&e(e.S,"Reflect",{setPrototypeOf:function(n,i){t.check(n,i);try{return t.set(n,i),!0}catch{return!1}}}),QN}var tq={},rq;function Die(){if(rq)return tq;rq=1;var e=ze(),t=hv()(!0);return e(e.P,"Array",{includes:function(n){return t(this,n,arguments.length>1?arguments[1]:void 0)}}),Iu()("includes"),tq}var nq={},Xy,iq;function eV(){if(iq)return Xy;iq=1;var e=pv(),t=on(),r=On(),n=Do(),i=An()("isConcatSpreadable");function s(o,a,u,c,f,h,g,y){for(var m=f,_=0,x=g?n(g,y,3):!1,S,E;_<c;){if(_ in u){if(S=x?x(u[_],_,a):u[_],E=!1,t(S)&&(E=S[i],E=E!==void 0?!!E:e(S)),E&&h>0)m=s(o,a,S,r(S.length),m,h-1)-1;else{if(m>=9007199254740991)throw TypeError();o[m]=S}m++}_++}return m}return Xy=s,Xy}var sq;function Fie(){if(sq)return nq;sq=1;var e=ze(),t=eV(),r=si(),n=On(),i=es(),s=d2();return e(e.P,"Array",{flatMap:function(a){var u=r(this),c,f;return i(a),c=n(u.length),f=s(u,0),t(f,u,u,c,0,1,a,arguments[1]),f}}),Iu()("flatMap"),nq}var oq={},aq;function Bie(){if(aq)return oq;aq=1;var e=ze(),t=eV(),r=si(),n=On(),i=Bo(),s=d2();return e(e.P,"Array",{flatten:function(){var a=arguments[0],u=r(this),c=n(u.length),f=s(u,0);return t(f,u,u,c,0,a===void 0?1:i(a)),f}}),Iu()("flatten"),oq}var uq={},cq;function zie(){if(cq)return uq;cq=1;var e=ze(),t=vv()(!0),r=Jr(),n=r(function(){return"𠮷".at(0)!=="𠮷"});return e(e.P+e.F*n,"String",{at:function(s){return t(this,s)}}),uq}var lq={},Yy,fq;function tV(){if(fq)return Yy;fq=1;var e=On(),t=n2(),r=va();return Yy=function(n,i,s,o){var a=String(r(n)),u=a.length,c=s===void 0?" ":String(s),f=e(i);if(f<=u||c=="")return a;var h=f-u,g=t.call(c,Math.ceil(h/c.length));return g.length>h&&(g=g.slice(0,h)),o?g+a:a+g},Yy}var hq;function Vie(){if(hq)return lq;hq=1;var e=ze(),t=tV(),r=bv(),n=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);return e(e.P+e.F*n,"String",{padStart:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0,!0)}}),lq}var dq={},pq;function Gie(){if(pq)return dq;pq=1;var e=ze(),t=tV(),r=bv(),n=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);return e(e.P+e.F*n,"String",{padEnd:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0,!1)}}),dq}var vq={},gq;function $ie(){return gq||(gq=1,Vl()("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")),vq}var mq={},yq;function Uie(){return yq||(yq=1,Vl()("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")),mq}var _q={},bq;function jie(){if(bq)return _q;bq=1;var e=ze(),t=va(),r=On(),n=gv(),i=Rh(),s=RegExp.prototype,o=function(a,u){this._r=a,this._s=u};return o2()(o,"RegExp String",function(){var u=this._r.exec(this._s);return{value:u,done:u===null}}),e(e.P,"String",{matchAll:function(u){if(t(this),!n(u))throw TypeError(u+" is not a regexp!");var c=String(this),f="flags"in s?String(u.flags):i.call(u),h=new RegExp(u.source,~f.indexOf("g")?f:"g"+f);return h.lastIndex=r(u.lastIndex),new o(h,c)}}),_q}var wq={},xq;function Hie(){return xq||(xq=1,KE()("asyncIterator")),wq}var Sq={},Eq;function Wie(){return Eq||(Eq=1,KE()("observable")),Sq}var Aq={},Tq;function Xie(){if(Tq)return Aq;Tq=1;var e=ze(),t=Q7(),r=uo(),n=co(),i=f2();return e(e.S,"Object",{getOwnPropertyDescriptors:function(o){for(var a=r(o),u=n.f,c=t(a),f={},h=0,g,y;c.length>h;)y=u(a,g=c[h++]),y!==void 0&&i(f,g,y);return f}}),Aq}var Pq={},Ky,Cq;function rV(){if(Cq)return Ky;Cq=1;var e=Fn(),t=mc(),r=uo(),n=Ch().f;return Ky=function(i){return function(s){for(var o=r(s),a=t(o),u=a.length,c=0,f=[],h;u>c;)h=a[c++],(!e||n.call(o,h))&&f.push(i?[h,o[h]]:o[h]);return f}},Ky}var Rq;function Yie(){if(Rq)return Pq;Rq=1;var e=ze(),t=rV()(!1);return e(e.S,"Object",{values:function(n){return t(n)}}),Pq}var Iq={},Oq;function Kie(){if(Oq)return Iq;Oq=1;var e=ze(),t=rV()(!0);return e(e.S,"Object",{entries:function(n){return t(n)}}),Iq}var Mq={},Zy,kq;function Sv(){return kq||(kq=1,Zy=Cu()||!Jr()(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete Ur()[e]})),Zy}var Lq;function Zie(){if(Lq)return Mq;Lq=1;var e=ze(),t=si(),r=es(),n=ti();return Fn()&&e(e.P+Sv(),"Object",{__defineGetter__:function(s,o){n.f(t(this),s,{get:r(o),enumerable:!0,configurable:!0})}}),Mq}var Nq={},qq;function Jie(){if(qq)return Nq;qq=1;var e=ze(),t=si(),r=es(),n=ti();return Fn()&&e(e.P+Sv(),"Object",{__defineSetter__:function(s,o){n.f(t(this),s,{set:r(o),enumerable:!0,configurable:!0})}}),Nq}var Dq={},Fq;function Qie(){if(Fq)return Dq;Fq=1;var e=ze(),t=si(),r=pa(),n=lo(),i=co().f;return Fn()&&e(e.P+Sv(),"Object",{__lookupGetter__:function(o){var a=t(this),u=r(o,!0),c;do if(c=i(a,u))return c.get;while(a=n(a))}}),Dq}var Bq={},zq;function ese(){if(zq)return Bq;zq=1;var e=ze(),t=si(),r=pa(),n=lo(),i=co().f;return Fn()&&e(e.P+Sv(),"Object",{__lookupSetter__:function(o){var a=t(this),u=r(o,!0),c;do if(c=i(a,u))return c.set;while(a=n(a))}}),Bq}var Vq={},Jy,Gq;function nV(){if(Gq)return Jy;Gq=1;var e=xc();return Jy=function(t,r){var n=[];return e(t,!1,n.push,n,r),n},Jy}var Qy,$q;function iV(){if($q)return Qy;$q=1;var e=zl(),t=nV();return Qy=function(r){return function(){if(e(this)!=r)throw TypeError(r+"#toJSON isn't generic");return t(this)}},Qy}var Uq;function tse(){if(Uq)return Vq;Uq=1;var e=ze();return e(e.P+e.R,"Map",{toJSON:iV()("Map")}),Vq}var jq={},Hq;function rse(){if(Hq)return jq;Hq=1;var e=ze();return e(e.P+e.R,"Set",{toJSON:iV()("Set")}),jq}var Wq={},e_,Xq;function Ev(){if(Xq)return e_;Xq=1;var e=ze();return e_=function(t){e(e.S,t,{of:function(){for(var n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];return new this(i)}})},e_}var Yq;function nse(){return Yq||(Yq=1,Ev()("Map")),Wq}var Kq={},Zq;function ise(){return Zq||(Zq=1,Ev()("Set")),Kq}var Jq={},Qq;function sse(){return Qq||(Qq=1,Ev()("WeakMap")),Jq}var e3={},t3;function ose(){return t3||(t3=1,Ev()("WeakSet")),e3}var r3={},t_,n3;function Av(){if(n3)return t_;n3=1;var e=ze(),t=es(),r=Do(),n=xc();return t_=function(i){e(e.S,i,{from:function(o){var a=arguments[1],u,c,f,h;return t(this),u=a!==void 0,u&&t(a),o==null?new this:(c=[],u?(f=0,h=r(a,arguments[2],2),n(o,!1,function(g){c.push(h(g,f++))})):n(o,!1,c.push,c),new this(c))}})},t_}var i3;function ase(){return i3||(i3=1,Av()("Map")),r3}var s3={},o3;function use(){return o3||(o3=1,Av()("Set")),s3}var a3={},u3;function cse(){return u3||(u3=1,Av()("WeakMap")),a3}var c3={},l3;function lse(){return l3||(l3=1,Av()("WeakSet")),c3}var f3={},h3;function fse(){if(h3)return f3;h3=1;var e=ze();return e(e.G,{global:Ur()}),f3}var d3={},p3;function hse(){if(p3)return d3;p3=1;var e=ze();return e(e.S,"System",{global:Ur()}),d3}var v3={},g3;function dse(){if(g3)return v3;g3=1;var e=ze(),t=Fo();return e(e.S,"Error",{isError:function(n){return t(n)==="Error"}}),v3}var m3={},y3;function pse(){if(y3)return m3;y3=1;var e=ze();return e(e.S,"Math",{clamp:function(r,n,i){return Math.min(i,Math.max(n,r))}}),m3}var _3={},b3;function vse(){if(b3)return _3;b3=1;var e=ze();return e(e.S,"Math",{DEG_PER_RAD:Math.PI/180}),_3}var w3={},x3;function gse(){if(x3)return w3;x3=1;var e=ze(),t=180/Math.PI;return e(e.S,"Math",{degrees:function(n){return n*t}}),w3}var S3={},r_,E3;function sV(){return E3||(E3=1,r_=Math.scale||function(t,r,n,i,s){return arguments.length===0||t!=t||r!=r||n!=n||i!=i||s!=s?NaN:t===1/0||t===-1/0?t:(t-r)*(s-i)/(n-r)+i}),r_}var A3;function mse(){if(A3)return S3;A3=1;var e=ze(),t=sV(),r=F7();return e(e.S,"Math",{fscale:function(i,s,o,a,u){return r(t(i,s,o,a,u))}}),S3}var T3={},P3;function yse(){if(P3)return T3;P3=1;var e=ze();return e(e.S,"Math",{iaddh:function(r,n,i,s){var o=r>>>0,a=n>>>0,u=i>>>0;return a+(s>>>0)+((o&u|(o|u)&~(o+u>>>0))>>>31)|0}}),T3}var C3={},R3;function _se(){if(R3)return C3;R3=1;var e=ze();return e(e.S,"Math",{isubh:function(r,n,i,s){var o=r>>>0,a=n>>>0,u=i>>>0;return a-(s>>>0)-((~o&u|~(o^u)&o-u>>>0)>>>31)|0}}),C3}var I3={},O3;function bse(){if(O3)return I3;O3=1;var e=ze();return e(e.S,"Math",{imulh:function(r,n){var i=65535,s=+r,o=+n,a=s&i,u=o&i,c=s>>16,f=o>>16,h=(c*u>>>0)+(a*u>>>16);return c*f+(h>>16)+((a*f>>>0)+(h&i)>>16)}}),I3}var M3={},k3;function wse(){if(k3)return M3;k3=1;var e=ze();return e(e.S,"Math",{RAD_PER_DEG:180/Math.PI}),M3}var L3={},N3;function xse(){if(N3)return L3;N3=1;var e=ze(),t=Math.PI/180;return e(e.S,"Math",{radians:function(n){return n*t}}),L3}var q3={},D3;function Sse(){if(D3)return q3;D3=1;var e=ze();return e(e.S,"Math",{scale:sV()}),q3}var F3={},B3;function Ese(){if(B3)return F3;B3=1;var e=ze();return e(e.S,"Math",{umulh:function(r,n){var i=65535,s=+r,o=+n,a=s&i,u=o&i,c=s>>>16,f=o>>>16,h=(c*u>>>0)+(a*u>>>16);return c*f+(h>>>16)+((a*f>>>0)+(h&i)>>>16)}}),F3}var z3={},V3;function Ase(){if(V3)return z3;V3=1;var e=ze();return e(e.S,"Math",{signbit:function(r){return(r=+r)!=r?r:r==0?1/r==1/0:r>0}}),z3}var G3={},$3;function Tse(){if($3)return G3;$3=1;var e=ze(),t=qo(),r=Ur(),n=Ih(),i=H7();return e(e.P+e.R,"Promise",{finally:function(s){var o=n(this,t.Promise||r.Promise),a=typeof s=="function";return this.then(a?function(u){return i(o,s()).then(function(){return u})}:s,a?function(u){return i(o,s()).then(function(){throw u})}:s)}}),G3}var U3={},j3;function Pse(){if(j3)return U3;j3=1;var e=ze(),t=b2(),r=j7();return e(e.S,"Promise",{try:function(n){var i=t.f(this),s=r(n);return(s.e?i.reject:i.resolve)(s.v),i.promise}}),U3}var H3={},n_,W3;function Xa(){if(W3)return n_;W3=1;var e=X7(),t=ze(),r=Th()("metadata"),n=r.store||(r.store=new(Z7())),i=function(h,g,y){var m=n.get(h);if(!m){if(!y)return;n.set(h,m=new e)}var _=m.get(g);if(!_){if(!y)return;m.set(g,_=new e)}return _},s=function(h,g,y){var m=i(g,y,!1);return m===void 0?!1:m.has(h)},o=function(h,g,y){var m=i(g,y,!1);return m===void 0?void 0:m.get(h)},a=function(h,g,y,m){i(y,m,!0).set(h,g)},u=function(h,g){var y=i(h,g,!1),m=[];return y&&y.forEach(function(_,x){m.push(x)}),m},c=function(h){return h===void 0||typeof h=="symbol"?h:String(h)},f=function(h){t(t.S,"Reflect",h)};return n_={store:n,map:i,has:s,get:o,set:a,keys:u,key:c,exp:f},n_}var X3;function Cse(){if(X3)return H3;X3=1;var e=Xa(),t=mr(),r=e.key,n=e.set;return e.exp({defineMetadata:function(s,o,a,u){n(s,o,t(a),r(u))}}),H3}var Y3={},K3;function Rse(){if(K3)return Y3;K3=1;var e=Xa(),t=mr(),r=e.key,n=e.map,i=e.store;return e.exp({deleteMetadata:function(o,a){var u=arguments.length<3?void 0:r(arguments[2]),c=n(t(a),u,!1);if(c===void 0||!c.delete(o))return!1;if(c.size)return!0;var f=i.get(a);return f.delete(u),!!f.size||i.delete(a)}}),Y3}var Z3={},J3;function Ise(){if(J3)return Z3;J3=1;var e=Xa(),t=mr(),r=lo(),n=e.has,i=e.get,s=e.key,o=function(a,u,c){var f=n(a,u,c);if(f)return i(a,u,c);var h=r(u);return h!==null?o(a,h,c):void 0};return e.exp({getMetadata:function(u,c){return o(u,t(c),arguments.length<3?void 0:s(arguments[2]))}}),Z3}var Q3={},eD;function Ose(){if(eD)return Q3;eD=1;var e=Y7(),t=nV(),r=Xa(),n=mr(),i=lo(),s=r.keys,o=r.key,a=function(u,c){var f=s(u,c),h=i(u);if(h===null)return f;var g=a(h,c);return g.length?f.length?t(new e(f.concat(g))):g:f};return r.exp({getMetadataKeys:function(c){return a(n(c),arguments.length<2?void 0:o(arguments[1]))}}),Q3}var tD={},rD;function Mse(){if(rD)return tD;rD=1;var e=Xa(),t=mr(),r=e.get,n=e.key;return e.exp({getOwnMetadata:function(s,o){return r(s,t(o),arguments.length<3?void 0:n(arguments[2]))}}),tD}var nD={},iD;function kse(){if(iD)return nD;iD=1;var e=Xa(),t=mr(),r=e.keys,n=e.key;return e.exp({getOwnMetadataKeys:function(s){return r(t(s),arguments.length<2?void 0:n(arguments[1]))}}),nD}var sD={},oD;function Lse(){if(oD)return sD;oD=1;var e=Xa(),t=mr(),r=lo(),n=e.has,i=e.key,s=function(o,a,u){var c=n(o,a,u);if(c)return!0;var f=r(a);return f!==null?s(o,f,u):!1};return e.exp({hasMetadata:function(a,u){return s(a,t(u),arguments.length<3?void 0:i(arguments[2]))}}),sD}var aD={},uD;function Nse(){if(uD)return aD;uD=1;var e=Xa(),t=mr(),r=e.has,n=e.key;return e.exp({hasOwnMetadata:function(s,o){return r(s,t(o),arguments.length<3?void 0:n(arguments[2]))}}),aD}var cD={},lD;function qse(){if(lD)return cD;lD=1;var e=Xa(),t=mr(),r=es(),n=e.key,i=e.set;return e.exp({metadata:function(o,a){return function(c,f){i(o,a,(f!==void 0?t:r)(c),n(f))}}}),cD}var fD={},hD;function Dse(){if(hD)return fD;hD=1;var e=ze(),t=_2()(),r=Ur().process,n=Fo()(r)=="process";return e(e.G,{asap:function(s){var o=n&&r.domain;t(o?o.bind(s):s)}}),fD}var dD={},pD;function Fse(){if(pD)return dD;pD=1;var e=ze(),t=Ur(),r=qo(),n=_2()(),i=An()("observable"),s=es(),o=mr(),a=wc(),u=Sc(),c=Ns(),f=xc(),h=f.RETURN,g=function(A){return A==null?void 0:s(A)},y=function(A){var T=A._c;T&&(A._c=void 0,T())},m=function(A){return A._o===void 0},_=function(A){m(A)||(A._o=void 0,y(A))},x=function(A,T){o(A),this._c=void 0,this._o=A,A=new S(this);try{var I=T(A),N=I;I!=null&&(typeof I.unsubscribe=="function"?I=function(){N.unsubscribe()}:s(I),this._c=I)}catch(p){A.error(p);return}m(this)&&y(this)};x.prototype=u({},{unsubscribe:function(){_(this)}});var S=function(A){this._s=A};S.prototype=u({},{next:function(T){var I=this._s;if(!m(I)){var N=I._o;try{var p=g(N.next);if(p)return p.call(N,T)}catch(P){try{_(I)}finally{throw P}}}},error:function(T){var I=this._s;if(m(I))throw T;var N=I._o;I._o=void 0;try{var p=g(N.error);if(!p)throw T;T=p.call(N,T)}catch(P){try{y(I)}finally{throw P}}return y(I),T},complete:function(T){var I=this._s;if(!m(I)){var N=I._o;I._o=void 0;try{var p=g(N.complete);T=p?p.call(N,T):void 0}catch(P){try{y(I)}finally{throw P}}return y(I),T}}});var E=function(T){a(this,E,"Observable","_f")._f=s(T)};return u(E.prototype,{subscribe:function(T){return new x(T,this._f)},forEach:function(T){var I=this;return new(r.Promise||t.Promise)(function(N,p){s(T);var P=I.subscribe({next:function(O){try{return T(O)}catch(q){p(q),P.unsubscribe()}},error:p,complete:N})})}}),u(E,{from:function(T){var I=typeof this=="function"?this:E,N=g(o(T)[i]);if(N){var p=o(N.call(T));return p.constructor===I?p:new I(function(P){return p.subscribe(P)})}return new I(function(P){var O=!1;return n(function(){if(!O){try{if(f(T,!1,function(q){if(P.next(q),O)return h})===h)return}catch(q){if(O)throw q;P.error(q);return}P.complete()}}),function(){O=!0}})},of:function(){for(var T=0,I=arguments.length,N=new Array(I);T<I;)N[T]=arguments[T++];return new(typeof this=="function"?this:E)(function(p){var P=!1;return n(function(){if(!P){for(var O=0;O<N.length;++O)if(p.next(N[O]),P)return;p.complete()}}),function(){P=!0}})}}),c(E.prototype,i,function(){return this}),e(e.G,{Observable:E}),bc()("Observable"),dD}var vD={},gD;function Bse(){if(gD)return vD;gD=1;var e=Ur(),t=ze(),r=bv(),n=[].slice,i=/MSIE .\./.test(r),s=function(o){return function(a,u){var c=arguments.length>2,f=c?n.call(arguments,2):!1;return o(c?function(){(typeof a=="function"?a:Function(a)).apply(this,f)}:a,u)}};return t(t.G+t.B+t.F*i,{setTimeout:s(e.setTimeout),setInterval:s(e.setInterval)}),vD}var mD={},yD;function zse(){if(yD)return mD;yD=1;var e=ze(),t=y2();return e(e.G+e.B,{setImmediate:t.set,clearImmediate:t.clear}),mD}var _D={},bD;function Vse(){if(bD)return _D;bD=1;for(var e=v2(),t=mc(),r=qs(),n=Ur(),i=Ns(),s=Gl(),o=An(),a=o("iterator"),u=o("toStringTag"),c=s.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=t(f),g=0;g<h.length;g++){var y=h[g],m=f[y],_=n[y],x=_&&_.prototype,S;if(x&&(x[a]||i(x,a,c),x[u]||i(x,u,y),s[y]=c,m))for(S in e)x[S]||r(x,S,e[S],!0)}return _D}var i_,wD;function Gse(){return wD||(wD=1,lre(),fre(),hre(),dre(),pre(),vre(),gre(),mre(),yre(),_re(),bre(),wre(),xre(),Sre(),Ere(),Are(),Tre(),Pre(),Cre(),Rre(),Ire(),Ore(),Mre(),kre(),Lre(),Nre(),qre(),Dre(),Fre(),Bre(),zre(),Vre(),Gre(),$re(),Ure(),jre(),Hre(),Wre(),Xre(),Yre(),Kre(),Zre(),Jre(),Qre(),ene(),tne(),rne(),nne(),ine(),sne(),one(),ane(),une(),cne(),lne(),fne(),hne(),dne(),pne(),vne(),gne(),mne(),yne(),_ne(),bne(),wne(),xne(),Sne(),Ene(),Ane(),Tne(),Pne(),Cne(),Rne(),Ine(),One(),kne(),Lne(),qne(),Dne(),Fne(),Bne(),zne(),Vne(),Gne(),Une(),jne(),Hne(),Wne(),Xne(),Yne(),Kne(),Zne(),Jne(),Qne(),eie(),tie(),rie(),nie(),v2(),iie(),$7(),sie(),U7(),oie(),aie(),uie(),cie(),lie(),X7(),Y7(),Z7(),fie(),hie(),die(),pie(),vie(),gie(),mie(),yie(),_ie(),bie(),wie(),xie(),Sie(),Eie(),Aie(),Tie(),Pie(),Cie(),Rie(),Iie(),Oie(),Mie(),kie(),Lie(),Nie(),qie(),Die(),Fie(),Bie(),zie(),Vie(),Gie(),$ie(),Uie(),jie(),Hie(),Wie(),Xie(),Yie(),Kie(),Zie(),Jie(),Qie(),ese(),tse(),rse(),nse(),ise(),sse(),ose(),ase(),use(),cse(),lse(),fse(),hse(),dse(),pse(),vse(),gse(),mse(),yse(),_se(),bse(),wse(),xse(),Sse(),Ese(),Ase(),Tse(),Pse(),Cse(),Rse(),Ise(),Ose(),Mse(),kse(),Lse(),Nse(),qse(),Dse(),Fse(),Bse(),zse(),Vse(),i_=qo()),i_}var _p={exports:{}},$se=_p.exports,xD;function Use(){return xD||(xD=1,function(e){(function(t){var r=Object.prototype,n=r.hasOwnProperty,i,s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag",c=t.regeneratorRuntime;if(c){e.exports=c;return}c=t.regeneratorRuntime=e.exports;function f(U,j,Q,de){var ce=j&&j.prototype instanceof S?j:S,Te=Object.create(ce.prototype),Se=new J(de||[]);return Te._invoke=q(U,Q,Se),Te}c.wrap=f;function h(U,j,Q){try{return{type:"normal",arg:U.call(j,Q)}}catch(de){return{type:"throw",arg:de}}}var g="suspendedStart",y="suspendedYield",m="executing",_="completed",x={};function S(){}function E(){}function A(){}var T={};T[o]=function(){return this};var I=Object.getPrototypeOf,N=I&&I(I(se([])));N&&N!==r&&n.call(N,o)&&(T=N);var p=A.prototype=S.prototype=Object.create(T);E.prototype=p.constructor=A,A.constructor=E,A[u]=E.displayName="GeneratorFunction";function P(U){["next","throw","return"].forEach(function(j){U[j]=function(Q){return this._invoke(j,Q)}})}c.isGeneratorFunction=function(U){var j=typeof U=="function"&&U.constructor;return j?j===E||(j.displayName||j.name)==="GeneratorFunction":!1},c.mark=function(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,A):(U.__proto__=A,u in U||(U[u]="GeneratorFunction")),U.prototype=Object.create(p),U},c.awrap=function(U){return{__await:U}};function O(U){function j(ce,Te,Se,re){var ae=h(U[ce],U,Te);if(ae.type==="throw")re(ae.arg);else{var ne=ae.arg,te=ne.value;return te&&typeof te=="object"&&n.call(te,"__await")?Promise.resolve(te.__await).then(function(le){j("next",le,Se,re)},function(le){j("throw",le,Se,re)}):Promise.resolve(te).then(function(le){ne.value=le,Se(ne)},re)}}typeof t.process=="object"&&t.process.domain&&(j=t.process.domain.bind(j));var Q;function de(ce,Te){function Se(){return new Promise(function(re,ae){j(ce,Te,re,ae)})}return Q=Q?Q.then(Se,Se):Se()}this._invoke=de}P(O.prototype),O.prototype[a]=function(){return this},c.AsyncIterator=O,c.async=function(U,j,Q,de){var ce=new O(f(U,j,Q,de));return c.isGeneratorFunction(j)?ce:ce.next().then(function(Te){return Te.done?Te.value:ce.next()})};function q(U,j,Q){var de=g;return function(Te,Se){if(de===m)throw new Error("Generator is already running");if(de===_){if(Te==="throw")throw Se;return K()}for(Q.method=Te,Q.arg=Se;;){var re=Q.delegate;if(re){var ae=V(re,Q);if(ae){if(ae===x)continue;return ae}}if(Q.method==="next")Q.sent=Q._sent=Q.arg;else if(Q.method==="throw"){if(de===g)throw de=_,Q.arg;Q.dispatchException(Q.arg)}else Q.method==="return"&&Q.abrupt("return",Q.arg);de=m;var ne=h(U,j,Q);if(ne.type==="normal"){if(de=Q.done?_:y,ne.arg===x)continue;return{value:ne.arg,done:Q.done}}else ne.type==="throw"&&(de=_,Q.method="throw",Q.arg=ne.arg)}}}function V(U,j){var Q=U.iterator[j.method];if(Q===i){if(j.delegate=null,j.method==="throw"){if(U.iterator.return&&(j.method="return",j.arg=i,V(U,j),j.method==="throw"))return x;j.method="throw",j.arg=new TypeError("The iterator does not provide a 'throw' method")}return x}var de=h(Q,U.iterator,j.arg);if(de.type==="throw")return j.method="throw",j.arg=de.arg,j.delegate=null,x;var ce=de.arg;if(!ce)return j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,x;if(ce.done)j[U.resultName]=ce.value,j.next=U.nextLoc,j.method!=="return"&&(j.method="next",j.arg=i);else return ce;return j.delegate=null,x}P(p),p[u]="Generator",p[o]=function(){return this},p.toString=function(){return"[object Generator]"};function W(U){var j={tryLoc:U[0]};1 in U&&(j.catchLoc=U[1]),2 in U&&(j.finallyLoc=U[2],j.afterLoc=U[3]),this.tryEntries.push(j)}function G(U){var j=U.completion||{};j.type="normal",delete j.arg,U.completion=j}function J(U){this.tryEntries=[{tryLoc:"root"}],U.forEach(W,this),this.reset(!0)}c.keys=function(U){var j=[];for(var Q in U)j.push(Q);return j.reverse(),function de(){for(;j.length;){var ce=j.pop();if(ce in U)return de.value=ce,de.done=!1,de}return de.done=!0,de}};function se(U){if(U){var j=U[o];if(j)return j.call(U);if(typeof U.next=="function")return U;if(!isNaN(U.length)){var Q=-1,de=function ce(){for(;++Q<U.length;)if(n.call(U,Q))return ce.value=U[Q],ce.done=!1,ce;return ce.value=i,ce.done=!0,ce};return de.next=de}}return{next:K}}c.values=se;function K(){return{value:i,done:!0}}J.prototype={constructor:J,reset:function(U){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(G),!U)for(var j in this)j.charAt(0)==="t"&&n.call(this,j)&&!isNaN(+j.slice(1))&&(this[j]=i)},stop:function(){this.done=!0;var U=this.tryEntries[0],j=U.completion;if(j.type==="throw")throw j.arg;return this.rval},dispatchException:function(U){if(this.done)throw U;var j=this;function Q(ae,ne){return Te.type="throw",Te.arg=U,j.next=ae,ne&&(j.method="next",j.arg=i),!!ne}for(var de=this.tryEntries.length-1;de>=0;--de){var ce=this.tryEntries[de],Te=ce.completion;if(ce.tryLoc==="root")return Q("end");if(ce.tryLoc<=this.prev){var Se=n.call(ce,"catchLoc"),re=n.call(ce,"finallyLoc");if(Se&&re){if(this.prev<ce.catchLoc)return Q(ce.catchLoc,!0);if(this.prev<ce.finallyLoc)return Q(ce.finallyLoc)}else if(Se){if(this.prev<ce.catchLoc)return Q(ce.catchLoc,!0)}else if(re){if(this.prev<ce.finallyLoc)return Q(ce.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(U,j){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var de=this.tryEntries[Q];if(de.tryLoc<=this.prev&&n.call(de,"finallyLoc")&&this.prev<de.finallyLoc){var ce=de;break}}ce&&(U==="break"||U==="continue")&&ce.tryLoc<=j&&j<=ce.finallyLoc&&(ce=null);var Te=ce?ce.completion:{};return Te.type=U,Te.arg=j,ce?(this.method="next",this.next=ce.finallyLoc,x):this.complete(Te)},complete:function(U,j){if(U.type==="throw")throw U.arg;return U.type==="break"||U.type==="continue"?this.next=U.arg:U.type==="return"?(this.rval=this.arg=U.arg,this.method="return",this.next="end"):U.type==="normal"&&j&&(this.next=j),x},finish:function(U){for(var j=this.tryEntries.length-1;j>=0;--j){var Q=this.tryEntries[j];if(Q.finallyLoc===U)return this.complete(Q.completion,Q.afterLoc),G(Q),x}},catch:function(U){for(var j=this.tryEntries.length-1;j>=0;--j){var Q=this.tryEntries[j];if(Q.tryLoc===U){var de=Q.completion;if(de.type==="throw"){var ce=de.arg;G(Q)}return ce}}throw new Error("illegal catch attempt")},delegateYield:function(U,j,Q){return this.delegate={iterator:se(U),resultName:j,nextLoc:Q},this.method==="next"&&(this.arg=i),x}}})(typeof ki=="object"?ki:typeof window=="object"?window:typeof self=="object"?self:$se)}(_p)),_p.exports}var SD={},s_,ED;function jse(){return ED||(ED=1,s_=function(e,t){var r=t===Object(t)?function(n){return t[n]}:t;return function(n){return String(n).replace(e,r)}}),s_}var AD;function Hse(){if(AD)return SD;AD=1;var e=ze(),t=jse()(/[\\^$*+?.()|[\]{}]/g,"\\$&");return e(e.S,"RegExp",{escape:function(n){return t(n)}}),SD}var o_,TD;function Wse(){return TD||(TD=1,Hse(),o_=qo().RegExp.escape),o_}var PD;function Xse(){if(PD)return GC;if(PD=1,Gse(),Use(),Wse(),ki._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");ki._babelPolyfill=!0;var e="defineProperty";function t(r,n,i){r[n]||Object[e](r,n,{writable:!0,configurable:!0,value:i})}return t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(r){[][r]&&t(Array,r,Function.call.bind([][r]))}),GC}Xse();function x2(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var a_,CD;function Yse(){if(CD)return a_;CD=1;function e(){this.__data__=[],this.size=0}return a_=e,a_}var u_,RD;function $l(){if(RD)return u_;RD=1;function e(t,r){return t===r||t!==t&&r!==r}return u_=e,u_}var c_,ID;function Tv(){if(ID)return c_;ID=1;var e=$l();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return c_=t,c_}var l_,OD;function Kse(){if(OD)return l_;OD=1;var e=Tv(),t=Array.prototype,r=t.splice;function n(i){var s=this.__data__,o=e(s,i);if(o<0)return!1;var a=s.length-1;return o==a?s.pop():r.call(s,o,1),--this.size,!0}return l_=n,l_}var f_,MD;function Zse(){if(MD)return f_;MD=1;var e=Tv();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return f_=t,f_}var h_,kD;function Jse(){if(kD)return h_;kD=1;var e=Tv();function t(r){return e(this.__data__,r)>-1}return h_=t,h_}var d_,LD;function Qse(){if(LD)return d_;LD=1;var e=Tv();function t(r,n){var i=this.__data__,s=e(i,r);return s<0?(++this.size,i.push([r,n])):i[s][1]=n,this}return d_=t,d_}var p_,ND;function Pv(){if(ND)return p_;ND=1;var e=Yse(),t=Kse(),r=Zse(),n=Jse(),i=Qse();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var c=o[a];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,p_=s,p_}var v_,qD;function eoe(){if(qD)return v_;qD=1;var e=Pv();function t(){this.__data__=new e,this.size=0}return v_=t,v_}var g_,DD;function toe(){if(DD)return g_;DD=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return g_=e,g_}var m_,FD;function roe(){if(FD)return m_;FD=1;function e(t){return this.__data__.get(t)}return m_=e,m_}var y_,BD;function noe(){if(BD)return y_;BD=1;function e(t){return this.__data__.has(t)}return y_=e,y_}var __,zD;function oV(){if(zD)return __;zD=1;var e=typeof ki=="object"&&ki&&ki.Object===Object&&ki;return __=e,__}var b_,VD;function Vo(){if(VD)return b_;VD=1;var e=oV(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return b_=r,b_}var w_,GD;function Ul(){if(GD)return w_;GD=1;var e=Vo(),t=e.Symbol;return w_=t,w_}var x_,$D;function ioe(){if($D)return x_;$D=1;var e=Ul(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function s(o){var a=r.call(o,i),u=o[i];try{o[i]=void 0;var c=!0}catch{}var f=n.call(o);return c&&(a?o[i]=u:delete o[i]),f}return x_=s,x_}var S_,UD;function soe(){if(UD)return S_;UD=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return S_=r,S_}var E_,jD;function Ec(){if(jD)return E_;jD=1;var e=Ul(),t=ioe(),r=soe(),n="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function o(a){return a==null?a===void 0?i:n:s&&s in Object(a)?t(a):r(a)}return E_=o,E_}var A_,HD;function fo(){if(HD)return A_;HD=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return A_=e,A_}var T_,WD;function Oh(){if(WD)return T_;WD=1;var e=Ec(),t=fo(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(a){if(!t(a))return!1;var u=e(a);return u==n||u==i||u==r||u==s}return T_=o,T_}var P_,XD;function ooe(){if(XD)return P_;XD=1;var e=Vo(),t=e["__core-js_shared__"];return P_=t,P_}var C_,YD;function aoe(){if(YD)return C_;YD=1;var e=ooe(),t=function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!t&&t in n}return C_=r,C_}var R_,KD;function aV(){if(KD)return R_;KD=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return R_=r,R_}var I_,ZD;function uoe(){if(ZD)return I_;ZD=1;var e=Oh(),t=aoe(),r=fo(),n=aV(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,u=o.toString,c=a.hasOwnProperty,f=RegExp("^"+u.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(g){if(!r(g)||t(g))return!1;var y=e(g)?f:s;return y.test(n(g))}return I_=h,I_}var O_,JD;function coe(){if(JD)return O_;JD=1;function e(t,r){return t==null?void 0:t[r]}return O_=e,O_}var M_,QD;function Ac(){if(QD)return M_;QD=1;var e=uoe(),t=coe();function r(n,i){var s=t(n,i);return e(s)?s:void 0}return M_=r,M_}var k_,eF;function S2(){if(eF)return k_;eF=1;var e=Ac(),t=Vo(),r=e(t,"Map");return k_=r,k_}var L_,tF;function Cv(){if(tF)return L_;tF=1;var e=Ac(),t=e(Object,"create");return L_=t,L_}var N_,rF;function loe(){if(rF)return N_;rF=1;var e=Cv();function t(){this.__data__=e?e(null):{},this.size=0}return N_=t,N_}var q_,nF;function foe(){if(nF)return q_;nF=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return q_=e,q_}var D_,iF;function hoe(){if(iF)return D_;iF=1;var e=Cv(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(s){var o=this.__data__;if(e){var a=o[s];return a===t?void 0:a}return n.call(o,s)?o[s]:void 0}return D_=i,D_}var F_,sF;function doe(){if(sF)return F_;sF=1;var e=Cv(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var s=this.__data__;return e?s[i]!==void 0:r.call(s,i)}return F_=n,F_}var B_,oF;function poe(){if(oF)return B_;oF=1;var e=Cv(),t="__lodash_hash_undefined__";function r(n,i){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=e&&i===void 0?t:i,this}return B_=r,B_}var z_,aF;function voe(){if(aF)return z_;aF=1;var e=loe(),t=foe(),r=hoe(),n=doe(),i=poe();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var c=o[a];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,z_=s,z_}var V_,uF;function goe(){if(uF)return V_;uF=1;var e=voe(),t=Pv(),r=S2();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return V_=n,V_}var G_,cF;function moe(){if(cF)return G_;cF=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return G_=e,G_}var $_,lF;function Rv(){if(lF)return $_;lF=1;var e=moe();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return $_=t,$_}var U_,fF;function yoe(){if(fF)return U_;fF=1;var e=Rv();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return U_=t,U_}var j_,hF;function _oe(){if(hF)return j_;hF=1;var e=Rv();function t(r){return e(this,r).get(r)}return j_=t,j_}var H_,dF;function boe(){if(dF)return H_;dF=1;var e=Rv();function t(r){return e(this,r).has(r)}return H_=t,H_}var W_,pF;function woe(){if(pF)return W_;pF=1;var e=Rv();function t(r,n){var i=e(this,r),s=i.size;return i.set(r,n),this.size+=i.size==s?0:1,this}return W_=t,W_}var X_,vF;function E2(){if(vF)return X_;vF=1;var e=goe(),t=yoe(),r=_oe(),n=boe(),i=woe();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var c=o[a];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,X_=s,X_}var Y_,gF;function xoe(){if(gF)return Y_;gF=1;var e=Pv(),t=S2(),r=E2(),n=200;function i(s,o){var a=this.__data__;if(a instanceof e){var u=a.__data__;if(!t||u.length<n-1)return u.push([s,o]),this.size=++a.size,this;a=this.__data__=new r(u)}return a.set(s,o),this.size=a.size,this}return Y_=i,Y_}var K_,mF;function Iv(){if(mF)return K_;mF=1;var e=Pv(),t=eoe(),r=toe(),n=roe(),i=noe(),s=xoe();function o(a){var u=this.__data__=new e(a);this.size=u.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=i,o.prototype.set=s,K_=o,K_}var Z_,yF;function A2(){if(yF)return Z_;yF=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}return Z_=e,Z_}var J_,_F;function uV(){if(_F)return J_;_F=1;var e=Ac(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return J_=t,J_}var Q_,bF;function Ov(){if(bF)return Q_;bF=1;var e=uV();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return Q_=t,Q_}var eb,wF;function Mv(){if(wF)return eb;wF=1;var e=Ov(),t=$l(),r=Object.prototype,n=r.hasOwnProperty;function i(s,o,a){var u=s[o];(!(n.call(s,o)&&t(u,a))||a===void 0&&!(o in s))&&e(s,o,a)}return eb=i,eb}var tb,xF;function Mh(){if(xF)return tb;xF=1;var e=Mv(),t=Ov();function r(n,i,s,o){var a=!s;s||(s={});for(var u=-1,c=i.length;++u<c;){var f=i[u],h=o?o(s[f],n[f],f,s,n):void 0;h===void 0&&(h=n[f]),a?t(s,f,h):e(s,f,h)}return s}return tb=r,tb}var rb,SF;function Soe(){if(SF)return rb;SF=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return rb=e,rb}var nb,EF;function ya(){if(EF)return nb;EF=1;function e(t){return t!=null&&typeof t=="object"}return nb=e,nb}var ib,AF;function Eoe(){if(AF)return ib;AF=1;var e=Ec(),t=ya(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return ib=n,ib}var sb,TF;function kh(){if(TF)return sb;TF=1;var e=Eoe(),t=ya(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,s=e(function(){return arguments}())?e:function(o){return t(o)&&n.call(o,"callee")&&!i.call(o,"callee")};return sb=s,sb}var ob,PF;function oi(){if(PF)return ob;PF=1;var e=Array.isArray;return ob=e,ob}var zf={exports:{}},ab,CF;function Aoe(){if(CF)return ab;CF=1;function e(){return!1}return ab=e,ab}zf.exports;var RF;function jl(){return RF||(RF=1,function(e,t){var r=Vo(),n=Aoe(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,a=o?r.Buffer:void 0,u=a?a.isBuffer:void 0,c=u||n;e.exports=c}(zf,zf.exports)),zf.exports}var ub,IF;function kv(){if(IF)return ub;IF=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var s=typeof n;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return ub=r,ub}var cb,OF;function T2(){if(OF)return cb;OF=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return cb=t,cb}var lb,MF;function Toe(){if(MF)return lb;MF=1;var e=Ec(),t=T2(),r=ya(),n="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",a="[object Error]",u="[object Function]",c="[object Map]",f="[object Number]",h="[object Object]",g="[object RegExp]",y="[object Set]",m="[object String]",_="[object WeakMap]",x="[object ArrayBuffer]",S="[object DataView]",E="[object Float32Array]",A="[object Float64Array]",T="[object Int8Array]",I="[object Int16Array]",N="[object Int32Array]",p="[object Uint8Array]",P="[object Uint8ClampedArray]",O="[object Uint16Array]",q="[object Uint32Array]",V={};V[E]=V[A]=V[T]=V[I]=V[N]=V[p]=V[P]=V[O]=V[q]=!0,V[n]=V[i]=V[x]=V[s]=V[S]=V[o]=V[a]=V[u]=V[c]=V[f]=V[h]=V[g]=V[y]=V[m]=V[_]=!1;function W(G){return r(G)&&t(G.length)&&!!V[e(G)]}return lb=W,lb}var fb,kF;function Lv(){if(kF)return fb;kF=1;function e(t){return function(r){return t(r)}}return fb=e,fb}var Vf={exports:{}};Vf.exports;var LF;function P2(){return LF||(LF=1,function(e,t){var r=oV(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s&&r.process,a=function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a}(Vf,Vf.exports)),Vf.exports}var hb,NF;function Lh(){if(NF)return hb;NF=1;var e=Toe(),t=Lv(),r=P2(),n=r&&r.isTypedArray,i=n?t(n):e;return hb=i,hb}var db,qF;function cV(){if(qF)return db;qF=1;var e=Soe(),t=kh(),r=oi(),n=jl(),i=kv(),s=Lh(),o=Object.prototype,a=o.hasOwnProperty;function u(c,f){var h=r(c),g=!h&&t(c),y=!h&&!g&&n(c),m=!h&&!g&&!y&&s(c),_=h||g||y||m,x=_?e(c.length,String):[],S=x.length;for(var E in c)(f||a.call(c,E))&&!(_&&(E=="length"||y&&(E=="offset"||E=="parent")||m&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||i(E,S)))&&x.push(E);return x}return db=u,db}var pb,DF;function Nv(){if(DF)return pb;DF=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return pb=t,pb}var vb,FF;function lV(){if(FF)return vb;FF=1;function e(t,r){return function(n){return t(r(n))}}return vb=e,vb}var gb,BF;function Poe(){if(BF)return gb;BF=1;var e=lV(),t=e(Object.keys,Object);return gb=t,gb}var mb,zF;function C2(){if(zF)return mb;zF=1;var e=Nv(),t=Poe(),r=Object.prototype,n=r.hasOwnProperty;function i(s){if(!e(s))return t(s);var o=[];for(var a in Object(s))n.call(s,a)&&a!="constructor"&&o.push(a);return o}return mb=i,mb}var yb,VF;function Ya(){if(VF)return yb;VF=1;var e=Oh(),t=T2();function r(n){return n!=null&&t(n.length)&&!e(n)}return yb=r,yb}var _b,GF;function Ou(){if(GF)return _b;GF=1;var e=cV(),t=C2(),r=Ya();function n(i){return r(i)?e(i):t(i)}return _b=n,_b}var bb,$F;function Coe(){if($F)return bb;$F=1;var e=Mh(),t=Ou();function r(n,i){return n&&e(i,t(i),n)}return bb=r,bb}var wb,UF;function Roe(){if(UF)return wb;UF=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return wb=e,wb}var xb,jF;function Ioe(){if(jF)return xb;jF=1;var e=fo(),t=Nv(),r=Roe(),n=Object.prototype,i=n.hasOwnProperty;function s(o){if(!e(o))return r(o);var a=t(o),u=[];for(var c in o)c=="constructor"&&(a||!i.call(o,c))||u.push(c);return u}return xb=s,xb}var Sb,HF;function Tc(){if(HF)return Sb;HF=1;var e=cV(),t=Ioe(),r=Ya();function n(i){return r(i)?e(i,!0):t(i)}return Sb=n,Sb}var Eb,WF;function Ooe(){if(WF)return Eb;WF=1;var e=Mh(),t=Tc();function r(n,i){return n&&e(i,t(i),n)}return Eb=r,Eb}var Gf={exports:{}};Gf.exports;var XF;function fV(){return XF||(XF=1,function(e,t){var r=Vo(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s?r.Buffer:void 0,a=o?o.allocUnsafe:void 0;function u(c,f){if(f)return c.slice();var h=c.length,g=a?a(h):new c.constructor(h);return c.copy(g),g}e.exports=u}(Gf,Gf.exports)),Gf.exports}var Ab,YF;function hV(){if(YF)return Ab;YF=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return Ab=e,Ab}var Tb,KF;function dV(){if(KF)return Tb;KF=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,s=0,o=[];++n<i;){var a=t[n];r(a,n,t)&&(o[s++]=a)}return o}return Tb=e,Tb}var Pb,ZF;function pV(){if(ZF)return Pb;ZF=1;function e(){return[]}return Pb=e,Pb}var Cb,JF;function R2(){if(JF)return Cb;JF=1;var e=dV(),t=pV(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(a){return n.call(o,a)}))}:t;return Cb=s,Cb}var Rb,QF;function Moe(){if(QF)return Rb;QF=1;var e=Mh(),t=R2();function r(n,i){return e(n,t(n),i)}return Rb=r,Rb}var Ib,e6;function I2(){if(e6)return Ib;e6=1;function e(t,r){for(var n=-1,i=r.length,s=t.length;++n<i;)t[s+n]=r[n];return t}return Ib=e,Ib}var Ob,t6;function qv(){if(t6)return Ob;t6=1;var e=lV(),t=e(Object.getPrototypeOf,Object);return Ob=t,Ob}var Mb,r6;function vV(){if(r6)return Mb;r6=1;var e=I2(),t=qv(),r=R2(),n=pV(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var a=[];o;)e(a,r(o)),o=t(o);return a}:n;return Mb=s,Mb}var kb,n6;function koe(){if(n6)return kb;n6=1;var e=Mh(),t=vV();function r(n,i){return e(n,t(n),i)}return kb=r,kb}var Lb,i6;function gV(){if(i6)return Lb;i6=1;var e=I2(),t=oi();function r(n,i,s){var o=i(n);return t(n)?o:e(o,s(n))}return Lb=r,Lb}var Nb,s6;function mV(){if(s6)return Nb;s6=1;var e=gV(),t=R2(),r=Ou();function n(i){return e(i,r,t)}return Nb=n,Nb}var qb,o6;function Loe(){if(o6)return qb;o6=1;var e=gV(),t=vV(),r=Tc();function n(i){return e(i,r,t)}return qb=n,qb}var Db,a6;function Noe(){if(a6)return Db;a6=1;var e=Ac(),t=Vo(),r=e(t,"DataView");return Db=r,Db}var Fb,u6;function qoe(){if(u6)return Fb;u6=1;var e=Ac(),t=Vo(),r=e(t,"Promise");return Fb=r,Fb}var Bb,c6;function yV(){if(c6)return Bb;c6=1;var e=Ac(),t=Vo(),r=e(t,"Set");return Bb=r,Bb}var zb,l6;function Doe(){if(l6)return zb;l6=1;var e=Ac(),t=Vo(),r=e(t,"WeakMap");return zb=r,zb}var Vb,f6;function Hl(){if(f6)return Vb;f6=1;var e=Noe(),t=S2(),r=qoe(),n=yV(),i=Doe(),s=Ec(),o=aV(),a="[object Map]",u="[object Object]",c="[object Promise]",f="[object Set]",h="[object WeakMap]",g="[object DataView]",y=o(e),m=o(t),_=o(r),x=o(n),S=o(i),E=s;return(e&&E(new e(new ArrayBuffer(1)))!=g||t&&E(new t)!=a||r&&E(r.resolve())!=c||n&&E(new n)!=f||i&&E(new i)!=h)&&(E=function(A){var T=s(A),I=T==u?A.constructor:void 0,N=I?o(I):"";if(N)switch(N){case y:return g;case m:return a;case _:return c;case x:return f;case S:return h}return T}),Vb=E,Vb}var Gb,h6;function Foe(){if(h6)return Gb;h6=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var i=n.length,s=new n.constructor(i);return i&&typeof n[0]=="string"&&t.call(n,"index")&&(s.index=n.index,s.input=n.input),s}return Gb=r,Gb}var $b,d6;function _V(){if(d6)return $b;d6=1;var e=Vo(),t=e.Uint8Array;return $b=t,$b}var Ub,p6;function O2(){if(p6)return Ub;p6=1;var e=_V();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return Ub=t,Ub}var jb,v6;function Boe(){if(v6)return jb;v6=1;var e=O2();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return jb=t,jb}var Hb,g6;function zoe(){if(g6)return Hb;g6=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return Hb=t,Hb}var Wb,m6;function Voe(){if(m6)return Wb;m6=1;var e=Ul(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return Wb=n,Wb}var Xb,y6;function bV(){if(y6)return Xb;y6=1;var e=O2();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return Xb=t,Xb}var Yb,_6;function Goe(){if(_6)return Yb;_6=1;var e=O2(),t=Boe(),r=zoe(),n=Voe(),i=bV(),s="[object Boolean]",o="[object Date]",a="[object Map]",u="[object Number]",c="[object RegExp]",f="[object Set]",h="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",m="[object DataView]",_="[object Float32Array]",x="[object Float64Array]",S="[object Int8Array]",E="[object Int16Array]",A="[object Int32Array]",T="[object Uint8Array]",I="[object Uint8ClampedArray]",N="[object Uint16Array]",p="[object Uint32Array]";function P(O,q,V){var W=O.constructor;switch(q){case y:return e(O);case s:case o:return new W(+O);case m:return t(O,V);case _:case x:case S:case E:case A:case T:case I:case N:case p:return i(O,V);case a:return new W;case u:case h:return new W(O);case c:return r(O);case f:return new W;case g:return n(O)}}return Yb=P,Yb}var Kb,b6;function wV(){if(b6)return Kb;b6=1;var e=fo(),t=Object.create,r=function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var s=new n;return n.prototype=void 0,s}}();return Kb=r,Kb}var Zb,w6;function xV(){if(w6)return Zb;w6=1;var e=wV(),t=qv(),r=Nv();function n(i){return typeof i.constructor=="function"&&!r(i)?e(t(i)):{}}return Zb=n,Zb}var Jb,x6;function $oe(){if(x6)return Jb;x6=1;var e=Hl(),t=ya(),r="[object Map]";function n(i){return t(i)&&e(i)==r}return Jb=n,Jb}var Qb,S6;function Uoe(){if(S6)return Qb;S6=1;var e=$oe(),t=Lv(),r=P2(),n=r&&r.isMap,i=n?t(n):e;return Qb=i,Qb}var e1,E6;function joe(){if(E6)return e1;E6=1;var e=Hl(),t=ya(),r="[object Set]";function n(i){return t(i)&&e(i)==r}return e1=n,e1}var t1,A6;function Hoe(){if(A6)return t1;A6=1;var e=joe(),t=Lv(),r=P2(),n=r&&r.isSet,i=n?t(n):e;return t1=i,t1}var r1,T6;function SV(){if(T6)return r1;T6=1;var e=Iv(),t=A2(),r=Mv(),n=Coe(),i=Ooe(),s=fV(),o=hV(),a=Moe(),u=koe(),c=mV(),f=Loe(),h=Hl(),g=Foe(),y=Goe(),m=xV(),_=oi(),x=jl(),S=Uoe(),E=fo(),A=Hoe(),T=Ou(),I=Tc(),N=1,p=2,P=4,O="[object Arguments]",q="[object Array]",V="[object Boolean]",W="[object Date]",G="[object Error]",J="[object Function]",se="[object GeneratorFunction]",K="[object Map]",U="[object Number]",j="[object Object]",Q="[object RegExp]",de="[object Set]",ce="[object String]",Te="[object Symbol]",Se="[object WeakMap]",re="[object ArrayBuffer]",ae="[object DataView]",ne="[object Float32Array]",te="[object Float64Array]",le="[object Int8Array]",Xe="[object Int16Array]",Ne="[object Int32Array]",Re="[object Uint8Array]",nt="[object Uint8ClampedArray]",Ve="[object Uint16Array]",L="[object Uint32Array]",B={};B[O]=B[q]=B[re]=B[ae]=B[V]=B[W]=B[ne]=B[te]=B[le]=B[Xe]=B[Ne]=B[K]=B[U]=B[j]=B[Q]=B[de]=B[ce]=B[Te]=B[Re]=B[nt]=B[Ve]=B[L]=!0,B[G]=B[J]=B[Se]=!1;function H(X,xe,ue,Ae,Ce,Be){var Le,Ie=xe&N,we=xe&p,je=xe&P;if(ue&&(Le=Ce?ue(X,Ae,Ce,Be):ue(X)),Le!==void 0)return Le;if(!E(X))return X;var ct=_(X);if(ct){if(Le=g(X),!Ie)return o(X,Le)}else{var yt=h(X),ft=yt==J||yt==se;if(x(X))return s(X,Ie);if(yt==j||yt==O||ft&&!Ce){if(Le=we||ft?{}:m(X),!Ie)return we?u(X,i(Le,X)):a(X,n(Le,X))}else{if(!B[yt])return Ce?X:{};Le=y(X,yt,Ie)}}Be||(Be=new e);var it=Be.get(X);if(it)return it;Be.set(X,Le),A(X)?X.forEach(function(er){Le.add(H(er,xe,ue,er,X,Be))}):S(X)&&X.forEach(function(er,lr){Le.set(lr,H(er,xe,ue,lr,X,Be))});var Wt=je?we?f:c:we?I:T,yr=ct?void 0:Wt(X);return t(yr||X,function(er,lr){yr&&(lr=er,er=X[lr]),r(Le,lr,H(er,xe,ue,lr,X,Be))}),Le}return r1=H,r1}var n1,P6;function Woe(){if(P6)return n1;P6=1;var e=SV(),t=4;function r(n){return e(n,t)}return n1=r,n1}var i1,C6;function M2(){if(C6)return i1;C6=1;function e(t){return function(){return t}}return i1=e,i1}var s1,R6;function Xoe(){if(R6)return s1;R6=1;function e(t){return function(r,n,i){for(var s=-1,o=Object(r),a=i(r),u=a.length;u--;){var c=a[t?u:++s];if(n(o[c],c,o)===!1)break}return r}}return s1=e,s1}var o1,I6;function k2(){if(I6)return o1;I6=1;var e=Xoe(),t=e();return o1=t,o1}var a1,O6;function L2(){if(O6)return a1;O6=1;var e=k2(),t=Ou();function r(n,i){return n&&e(n,i,t)}return a1=r,a1}var u1,M6;function Yoe(){if(M6)return u1;M6=1;var e=Ya();function t(r,n){return function(i,s){if(i==null)return i;if(!e(i))return r(i,s);for(var o=i.length,a=n?o:-1,u=Object(i);(n?a--:++a<o)&&s(u[a],a,u)!==!1;);return i}}return u1=t,u1}var c1,k6;function Dv(){if(k6)return c1;k6=1;var e=L2(),t=Yoe(),r=t(e);return c1=r,c1}var l1,L6;function Pc(){if(L6)return l1;L6=1;function e(t){return t}return l1=e,l1}var f1,N6;function EV(){if(N6)return f1;N6=1;var e=Pc();function t(r){return typeof r=="function"?r:e}return f1=t,f1}var h1,q6;function AV(){if(q6)return h1;q6=1;var e=A2(),t=Dv(),r=EV(),n=oi();function i(s,o){var a=n(s)?e:t;return a(s,r(o))}return h1=i,h1}var d1,D6;function TV(){return D6||(D6=1,d1=AV()),d1}var p1,F6;function Koe(){if(F6)return p1;F6=1;var e=Dv();function t(r,n){var i=[];return e(r,function(s,o,a){n(s,o,a)&&i.push(s)}),i}return p1=t,p1}var v1,B6;function Zoe(){if(B6)return v1;B6=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return v1=t,v1}var g1,z6;function Joe(){if(z6)return g1;z6=1;function e(t){return this.__data__.has(t)}return g1=e,g1}var m1,V6;function PV(){if(V6)return m1;V6=1;var e=E2(),t=Zoe(),r=Joe();function n(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new e;++s<o;)this.add(i[s])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,m1=n,m1}var y1,G6;function Qoe(){if(G6)return y1;G6=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return y1=e,y1}var _1,$6;function CV(){if($6)return _1;$6=1;function e(t,r){return t.has(r)}return _1=e,_1}var b1,U6;function RV(){if(U6)return b1;U6=1;var e=PV(),t=Qoe(),r=CV(),n=1,i=2;function s(o,a,u,c,f,h){var g=u&n,y=o.length,m=a.length;if(y!=m&&!(g&&m>y))return!1;var _=h.get(o),x=h.get(a);if(_&&x)return _==a&&x==o;var S=-1,E=!0,A=u&i?new e:void 0;for(h.set(o,a),h.set(a,o);++S<y;){var T=o[S],I=a[S];if(c)var N=g?c(I,T,S,a,o,h):c(T,I,S,o,a,h);if(N!==void 0){if(N)continue;E=!1;break}if(A){if(!t(a,function(p,P){if(!r(A,P)&&(T===p||f(T,p,u,c,h)))return A.push(P)})){E=!1;break}}else if(!(T===I||f(T,I,u,c,h))){E=!1;break}}return h.delete(o),h.delete(a),E}return b1=s,b1}var w1,j6;function eae(){if(j6)return w1;j6=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,s){n[++r]=[s,i]}),n}return w1=e,w1}var x1,H6;function N2(){if(H6)return x1;H6=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return x1=e,x1}var S1,W6;function tae(){if(W6)return S1;W6=1;var e=Ul(),t=_V(),r=$l(),n=RV(),i=eae(),s=N2(),o=1,a=2,u="[object Boolean]",c="[object Date]",f="[object Error]",h="[object Map]",g="[object Number]",y="[object RegExp]",m="[object Set]",_="[object String]",x="[object Symbol]",S="[object ArrayBuffer]",E="[object DataView]",A=e?e.prototype:void 0,T=A?A.valueOf:void 0;function I(N,p,P,O,q,V,W){switch(P){case E:if(N.byteLength!=p.byteLength||N.byteOffset!=p.byteOffset)return!1;N=N.buffer,p=p.buffer;case S:return!(N.byteLength!=p.byteLength||!V(new t(N),new t(p)));case u:case c:case g:return r(+N,+p);case f:return N.name==p.name&&N.message==p.message;case y:case _:return N==p+"";case h:var G=i;case m:var J=O&o;if(G||(G=s),N.size!=p.size&&!J)return!1;var se=W.get(N);if(se)return se==p;O|=a,W.set(N,p);var K=n(G(N),G(p),O,q,V,W);return W.delete(N),K;case x:if(T)return T.call(N)==T.call(p)}return!1}return S1=I,S1}var E1,X6;function rae(){if(X6)return E1;X6=1;var e=mV(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(s,o,a,u,c,f){var h=a&t,g=e(s),y=g.length,m=e(o),_=m.length;if(y!=_&&!h)return!1;for(var x=y;x--;){var S=g[x];if(!(h?S in o:n.call(o,S)))return!1}var E=f.get(s),A=f.get(o);if(E&&A)return E==o&&A==s;var T=!0;f.set(s,o),f.set(o,s);for(var I=h;++x<y;){S=g[x];var N=s[S],p=o[S];if(u)var P=h?u(p,N,S,o,s,f):u(N,p,S,s,o,f);if(!(P===void 0?N===p||c(N,p,a,u,f):P)){T=!1;break}I||(I=S=="constructor")}if(T&&!I){var O=s.constructor,q=o.constructor;O!=q&&"constructor"in s&&"constructor"in o&&!(typeof O=="function"&&O instanceof O&&typeof q=="function"&&q instanceof q)&&(T=!1)}return f.delete(s),f.delete(o),T}return E1=i,E1}var A1,Y6;function nae(){if(Y6)return A1;Y6=1;var e=Iv(),t=RV(),r=tae(),n=rae(),i=Hl(),s=oi(),o=jl(),a=Lh(),u=1,c="[object Arguments]",f="[object Array]",h="[object Object]",g=Object.prototype,y=g.hasOwnProperty;function m(_,x,S,E,A,T){var I=s(_),N=s(x),p=I?f:i(_),P=N?f:i(x);p=p==c?h:p,P=P==c?h:P;var O=p==h,q=P==h,V=p==P;if(V&&o(_)){if(!o(x))return!1;I=!0,O=!1}if(V&&!O)return T||(T=new e),I||a(_)?t(_,x,S,E,A,T):r(_,x,p,S,E,A,T);if(!(S&u)){var W=O&&y.call(_,"__wrapped__"),G=q&&y.call(x,"__wrapped__");if(W||G){var J=W?_.value():_,se=G?x.value():x;return T||(T=new e),A(J,se,S,E,T)}}return V?(T||(T=new e),n(_,x,S,E,A,T)):!1}return A1=m,A1}var T1,K6;function IV(){if(K6)return T1;K6=1;var e=nae(),t=ya();function r(n,i,s,o,a){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,s,o,r,a)}return T1=r,T1}var P1,Z6;function iae(){if(Z6)return P1;Z6=1;var e=Iv(),t=IV(),r=1,n=2;function i(s,o,a,u){var c=a.length,f=c,h=!u;if(s==null)return!f;for(s=Object(s);c--;){var g=a[c];if(h&&g[2]?g[1]!==s[g[0]]:!(g[0]in s))return!1}for(;++c<f;){g=a[c];var y=g[0],m=s[y],_=g[1];if(h&&g[2]){if(m===void 0&&!(y in s))return!1}else{var x=new e;if(u)var S=u(m,_,y,s,o,x);if(!(S===void 0?t(_,m,r|n,u,x):S))return!1}}return!0}return P1=i,P1}var C1,J6;function OV(){if(J6)return C1;J6=1;var e=fo();function t(r){return r===r&&!e(r)}return C1=t,C1}var R1,Q6;function sae(){if(Q6)return R1;Q6=1;var e=OV(),t=Ou();function r(n){for(var i=t(n),s=i.length;s--;){var o=i[s],a=n[o];i[s]=[o,a,e(a)]}return i}return R1=r,R1}var I1,eB;function MV(){if(eB)return I1;eB=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return I1=e,I1}var O1,tB;function oae(){if(tB)return O1;tB=1;var e=iae(),t=sae(),r=MV();function n(i){var s=t(i);return s.length==1&&s[0][2]?r(s[0][0],s[0][1]):function(o){return o===i||e(o,i,s)}}return O1=n,O1}var M1,rB;function Wl(){if(rB)return M1;rB=1;var e=Ec(),t=ya(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return M1=n,M1}var k1,nB;function q2(){if(nB)return k1;nB=1;var e=oi(),t=Wl(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,o){if(e(s))return!1;var a=typeof s;return a=="number"||a=="symbol"||a=="boolean"||s==null||t(s)?!0:n.test(s)||!r.test(s)||o!=null&&s in Object(o)}return k1=i,k1}var L1,iB;function aae(){if(iB)return L1;iB=1;var e=E2(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var o=arguments,a=i?i.apply(this,o):o[0],u=s.cache;if(u.has(a))return u.get(a);var c=n.apply(this,o);return s.cache=u.set(a,c)||u,c};return s.cache=new(r.Cache||e),s}return r.Cache=e,L1=r,L1}var N1,sB;function uae(){if(sB)return N1;sB=1;var e=aae(),t=500;function r(n){var i=e(n,function(o){return s.size===t&&s.clear(),o}),s=i.cache;return i}return N1=r,N1}var q1,oB;function cae(){if(oB)return q1;oB=1;var e=uae(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(o,a,u,c){s.push(u?c.replace(r,"$1"):a||o)}),s});return q1=n,q1}var D1,aB;function Fv(){if(aB)return D1;aB=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,s=Array(i);++n<i;)s[n]=r(t[n],n,t);return s}return D1=e,D1}var F1,uB;function lae(){if(uB)return F1;uB=1;var e=Ul(),t=Fv(),r=oi(),n=Wl(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function o(a){if(typeof a=="string")return a;if(r(a))return t(a,o)+"";if(n(a))return s?s.call(a):"";var u=a+"";return u=="0"&&1/a==-1/0?"-0":u}return F1=o,F1}var B1,cB;function kV(){if(cB)return B1;cB=1;var e=lae();function t(r){return r==null?"":e(r)}return B1=t,B1}var z1,lB;function Bv(){if(lB)return z1;lB=1;var e=oi(),t=q2(),r=cae(),n=kV();function i(s,o){return e(s)?s:t(s,o)?[s]:r(n(s))}return z1=i,z1}var V1,fB;function Nh(){if(fB)return V1;fB=1;var e=Wl();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return V1=t,V1}var G1,hB;function zv(){if(hB)return G1;hB=1;var e=Bv(),t=Nh();function r(n,i){i=e(i,n);for(var s=0,o=i.length;n!=null&&s<o;)n=n[t(i[s++])];return s&&s==o?n:void 0}return G1=r,G1}var $1,dB;function fae(){if(dB)return $1;dB=1;var e=zv();function t(r,n,i){var s=r==null?void 0:e(r,n);return s===void 0?i:s}return $1=t,$1}var U1,pB;function hae(){if(pB)return U1;pB=1;function e(t,r){return t!=null&&r in Object(t)}return U1=e,U1}var j1,vB;function LV(){if(vB)return j1;vB=1;var e=Bv(),t=kh(),r=oi(),n=kv(),i=T2(),s=Nh();function o(a,u,c){u=e(u,a);for(var f=-1,h=u.length,g=!1;++f<h;){var y=s(u[f]);if(!(g=a!=null&&c(a,y)))break;a=a[y]}return g||++f!=h?g:(h=a==null?0:a.length,!!h&&i(h)&&n(y,h)&&(r(a)||t(a)))}return j1=o,j1}var H1,gB;function NV(){if(gB)return H1;gB=1;var e=hae(),t=LV();function r(n,i){return n!=null&&t(n,i,e)}return H1=r,H1}var W1,mB;function dae(){if(mB)return W1;mB=1;var e=IV(),t=fae(),r=NV(),n=q2(),i=OV(),s=MV(),o=Nh(),a=1,u=2;function c(f,h){return n(f)&&i(h)?s(o(f),h):function(g){var y=t(g,f);return y===void 0&&y===h?r(g,f):e(h,y,a|u)}}return W1=c,W1}var X1,yB;function qV(){if(yB)return X1;yB=1;function e(t){return function(r){return r==null?void 0:r[t]}}return X1=e,X1}var Y1,_B;function pae(){if(_B)return Y1;_B=1;var e=zv();function t(r){return function(n){return e(n,r)}}return Y1=t,Y1}var K1,bB;function vae(){if(bB)return K1;bB=1;var e=qV(),t=pae(),r=q2(),n=Nh();function i(s){return r(s)?e(n(s)):t(s)}return K1=i,K1}var Z1,wB;function Ka(){if(wB)return Z1;wB=1;var e=oae(),t=dae(),r=Pc(),n=oi(),i=vae();function s(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?t(o[0],o[1]):e(o):i(o)}return Z1=s,Z1}var J1,xB;function DV(){if(xB)return J1;xB=1;var e=dV(),t=Koe(),r=Ka(),n=oi();function i(s,o){var a=n(s)?e:t;return a(s,r(o,3))}return J1=i,J1}var Q1,SB;function gae(){if(SB)return Q1;SB=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n,i){return n!=null&&t.call(n,i)}return Q1=r,Q1}var ew,EB;function FV(){if(EB)return ew;EB=1;var e=gae(),t=LV();function r(n,i){return n!=null&&t(n,i,e)}return ew=r,ew}var tw,AB;function mae(){if(AB)return tw;AB=1;var e=C2(),t=Hl(),r=kh(),n=oi(),i=Ya(),s=jl(),o=Nv(),a=Lh(),u="[object Map]",c="[object Set]",f=Object.prototype,h=f.hasOwnProperty;function g(y){if(y==null)return!0;if(i(y)&&(n(y)||typeof y=="string"||typeof y.splice=="function"||s(y)||a(y)||r(y)))return!y.length;var m=t(y);if(m==u||m==c)return!y.size;if(o(y))return!e(y).length;for(var _ in y)if(h.call(y,_))return!1;return!0}return tw=g,tw}var rw,TB;function BV(){if(TB)return rw;TB=1;function e(t){return t===void 0}return rw=e,rw}var nw,PB;function zV(){if(PB)return nw;PB=1;var e=Dv(),t=Ya();function r(n,i){var s=-1,o=t(n)?Array(n.length):[];return e(n,function(a,u,c){o[++s]=i(a,u,c)}),o}return nw=r,nw}var iw,CB;function VV(){if(CB)return iw;CB=1;var e=Fv(),t=Ka(),r=zV(),n=oi();function i(s,o){var a=n(s)?e:r;return a(s,t(o,3))}return iw=i,iw}var sw,RB;function yae(){if(RB)return sw;RB=1;function e(t,r,n,i){var s=-1,o=t==null?0:t.length;for(i&&o&&(n=t[++s]);++s<o;)n=r(n,t[s],s,t);return n}return sw=e,sw}var ow,IB;function _ae(){if(IB)return ow;IB=1;function e(t,r,n,i,s){return s(t,function(o,a,u){n=i?(i=!1,o):r(n,o,a,u)}),n}return ow=e,ow}var aw,OB;function GV(){if(OB)return aw;OB=1;var e=yae(),t=Dv(),r=Ka(),n=_ae(),i=oi();function s(o,a,u){var c=i(o)?e:n,f=arguments.length<3;return c(o,r(a,4),u,f,t)}return aw=s,aw}var uw,MB;function bae(){if(MB)return uw;MB=1;var e=Ec(),t=oi(),r=ya(),n="[object String]";function i(s){return typeof s=="string"||!t(s)&&r(s)&&e(s)==n}return uw=i,uw}var cw,kB;function wae(){if(kB)return cw;kB=1;var e=qV(),t=e("length");return cw=t,cw}var lw,LB;function xae(){if(LB)return lw;LB=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,s="\\ufe0e\\ufe0f",o="\\u200d",a=RegExp("["+o+e+i+s+"]");function u(c){return a.test(c)}return lw=u,lw}var fw,NB;function Sae(){if(NB)return fw;NB=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,s="\\ufe0e\\ufe0f",o="["+e+"]",a="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",c="(?:"+a+"|"+u+")",f="[^"+e+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",m=c+"?",_="["+s+"]?",x="(?:"+y+"(?:"+[f,h,g].join("|")+")"+_+m+")*",S=_+m+x,E="(?:"+[f+a+"?",a,h,g,o].join("|")+")",A=RegExp(u+"(?="+u+")|"+E+S,"g");function T(I){for(var N=A.lastIndex=0;A.test(I);)++N;return N}return fw=T,fw}var hw,qB;function Eae(){if(qB)return hw;qB=1;var e=wae(),t=xae(),r=Sae();function n(i){return t(i)?r(i):e(i)}return hw=n,hw}var dw,DB;function Aae(){if(DB)return dw;DB=1;var e=C2(),t=Hl(),r=Ya(),n=bae(),i=Eae(),s="[object Map]",o="[object Set]";function a(u){if(u==null)return 0;if(r(u))return n(u)?i(u):u.length;var c=t(u);return c==s||c==o?u.size:e(u).length}return dw=a,dw}var pw,FB;function Tae(){if(FB)return pw;FB=1;var e=A2(),t=wV(),r=L2(),n=Ka(),i=qv(),s=oi(),o=jl(),a=Oh(),u=fo(),c=Lh();function f(h,g,y){var m=s(h),_=m||o(h)||c(h);if(g=n(g,4),y==null){var x=h&&h.constructor;_?y=m?new x:[]:u(h)?y=a(x)?t(i(h)):{}:y={}}return(_?e:r)(h,function(S,E,A){return g(y,S,E,A)}),y}return pw=f,pw}var vw,BB;function Pae(){if(BB)return vw;BB=1;var e=Ul(),t=kh(),r=oi(),n=e?e.isConcatSpreadable:void 0;function i(s){return r(s)||t(s)||!!(n&&s&&s[n])}return vw=i,vw}var gw,zB;function D2(){if(zB)return gw;zB=1;var e=I2(),t=Pae();function r(n,i,s,o,a){var u=-1,c=n.length;for(s||(s=t),a||(a=[]);++u<c;){var f=n[u];i>0&&s(f)?i>1?r(f,i-1,s,o,a):e(a,f):o||(a[a.length]=f)}return a}return gw=r,gw}var mw,VB;function Cae(){if(VB)return mw;VB=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return mw=e,mw}var yw,GB;function $V(){if(GB)return yw;GB=1;var e=Cae(),t=Math.max;function r(n,i,s){return i=t(i===void 0?n.length-1:i,0),function(){for(var o=arguments,a=-1,u=t(o.length-i,0),c=Array(u);++a<u;)c[a]=o[i+a];a=-1;for(var f=Array(i+1);++a<i;)f[a]=o[a];return f[i]=s(c),e(n,this,f)}}return yw=r,yw}var _w,$B;function Rae(){if($B)return _w;$B=1;var e=M2(),t=uV(),r=Pc(),n=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:r;return _w=n,_w}var bw,UB;function Iae(){if(UB)return bw;UB=1;var e=800,t=16,r=Date.now;function n(i){var s=0,o=0;return function(){var a=r(),u=t-(a-o);if(o=a,u>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return bw=n,bw}var ww,jB;function UV(){if(jB)return ww;jB=1;var e=Rae(),t=Iae(),r=t(e);return ww=r,ww}var xw,HB;function Vv(){if(HB)return xw;HB=1;var e=Pc(),t=$V(),r=UV();function n(i,s){return r(t(i,s,e),i+"")}return xw=n,xw}var Sw,WB;function jV(){if(WB)return Sw;WB=1;function e(t,r,n,i){for(var s=t.length,o=n+(i?1:-1);i?o--:++o<s;)if(r(t[o],o,t))return o;return-1}return Sw=e,Sw}var Ew,XB;function Oae(){if(XB)return Ew;XB=1;function e(t){return t!==t}return Ew=e,Ew}var Aw,YB;function Mae(){if(YB)return Aw;YB=1;function e(t,r,n){for(var i=n-1,s=t.length;++i<s;)if(t[i]===r)return i;return-1}return Aw=e,Aw}var Tw,KB;function kae(){if(KB)return Tw;KB=1;var e=jV(),t=Oae(),r=Mae();function n(i,s,o){return s===s?r(i,s,o):e(i,t,o)}return Tw=n,Tw}var Pw,ZB;function Lae(){if(ZB)return Pw;ZB=1;var e=kae();function t(r,n){var i=r==null?0:r.length;return!!i&&e(r,n,0)>-1}return Pw=t,Pw}var Cw,JB;function Nae(){if(JB)return Cw;JB=1;function e(t,r,n){for(var i=-1,s=t==null?0:t.length;++i<s;)if(n(r,t[i]))return!0;return!1}return Cw=e,Cw}var Rw,QB;function qae(){if(QB)return Rw;QB=1;function e(){}return Rw=e,Rw}var Iw,e5;function Dae(){if(e5)return Iw;e5=1;var e=yV(),t=qae(),r=N2(),n=1/0,i=e&&1/r(new e([,-0]))[1]==n?function(s){return new e(s)}:t;return Iw=i,Iw}var Ow,t5;function Fae(){if(t5)return Ow;t5=1;var e=PV(),t=Lae(),r=Nae(),n=CV(),i=Dae(),s=N2(),o=200;function a(u,c,f){var h=-1,g=t,y=u.length,m=!0,_=[],x=_;if(f)m=!1,g=r;else if(y>=o){var S=c?null:i(u);if(S)return s(S);m=!1,g=n,x=new e}else x=c?[]:_;e:for(;++h<y;){var E=u[h],A=c?c(E):E;if(E=f||E!==0?E:0,m&&A===A){for(var T=x.length;T--;)if(x[T]===A)continue e;c&&x.push(A),_.push(E)}else g(x,A,f)||(x!==_&&x.push(A),_.push(E))}return _}return Ow=a,Ow}var Mw,r5;function HV(){if(r5)return Mw;r5=1;var e=Ya(),t=ya();function r(n){return t(n)&&e(n)}return Mw=r,Mw}var kw,n5;function Bae(){if(n5)return kw;n5=1;var e=D2(),t=Vv(),r=Fae(),n=HV(),i=t(function(s){return r(e(s,1,n,!0))});return kw=i,kw}var Lw,i5;function zae(){if(i5)return Lw;i5=1;var e=Fv();function t(r,n){return e(n,function(i){return r[i]})}return Lw=t,Lw}var Nw,s5;function WV(){if(s5)return Nw;s5=1;var e=zae(),t=Ou();function r(n){return n==null?[]:e(n,t(n))}return Nw=r,Nw}var qw,o5;function ho(){if(o5)return qw;o5=1;var e;if(typeof x2=="function")try{e={clone:Woe(),constant:M2(),each:TV(),filter:DV(),has:FV(),isArray:oi(),isEmpty:mae(),isFunction:Oh(),isUndefined:BV(),keys:Ou(),map:VV(),reduce:GV(),size:Aae(),transform:Tae(),union:Bae(),values:WV()}}catch{}return e||(e=window._),qw=e,qw}var Dw,a5;function F2(){if(a5)return Dw;a5=1;var e=ho();Dw=i;var t="\0",r="\0",n="";function i(f){this._isDirected=e.has(f,"directed")?f.directed:!0,this._isMultigraph=e.has(f,"multigraph")?f.multigraph:!1,this._isCompound=e.has(f,"compound")?f.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(f){return this._label=f,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultNodeLabelFn=f,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var f=this;return e.filter(this.nodes(),function(h){return e.isEmpty(f._in[h])})},i.prototype.sinks=function(){var f=this;return e.filter(this.nodes(),function(h){return e.isEmpty(f._out[h])})},i.prototype.setNodes=function(f,h){var g=arguments,y=this;return e.each(f,function(m){g.length>1?y.setNode(m,h):y.setNode(m)}),this},i.prototype.setNode=function(f,h){return e.has(this._nodes,f)?(arguments.length>1&&(this._nodes[f]=h),this):(this._nodes[f]=arguments.length>1?h:this._defaultNodeLabelFn(f),this._isCompound&&(this._parent[f]=r,this._children[f]={},this._children[r][f]=!0),this._in[f]={},this._preds[f]={},this._out[f]={},this._sucs[f]={},++this._nodeCount,this)},i.prototype.node=function(f){return this._nodes[f]},i.prototype.hasNode=function(f){return e.has(this._nodes,f)},i.prototype.removeNode=function(f){var h=this;if(e.has(this._nodes,f)){var g=function(y){h.removeEdge(h._edgeObjs[y])};delete this._nodes[f],this._isCompound&&(this._removeFromParentsChildList(f),delete this._parent[f],e.each(this.children(f),function(y){h.setParent(y)}),delete this._children[f]),e.each(e.keys(this._in[f]),g),delete this._in[f],delete this._preds[f],e.each(e.keys(this._out[f]),g),delete this._out[f],delete this._sucs[f],--this._nodeCount}return this},i.prototype.setParent=function(f,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(h))h=r;else{h+="";for(var g=h;!e.isUndefined(g);g=this.parent(g))if(g===f)throw new Error("Setting "+h+" as parent of "+f+" would create a cycle");this.setNode(h)}return this.setNode(f),this._removeFromParentsChildList(f),this._parent[f]=h,this._children[h][f]=!0,this},i.prototype._removeFromParentsChildList=function(f){delete this._children[this._parent[f]][f]},i.prototype.parent=function(f){if(this._isCompound){var h=this._parent[f];if(h!==r)return h}},i.prototype.children=function(f){if(e.isUndefined(f)&&(f=r),this._isCompound){var h=this._children[f];if(h)return e.keys(h)}else{if(f===r)return this.nodes();if(this.hasNode(f))return[]}},i.prototype.predecessors=function(f){var h=this._preds[f];if(h)return e.keys(h)},i.prototype.successors=function(f){var h=this._sucs[f];if(h)return e.keys(h)},i.prototype.neighbors=function(f){var h=this.predecessors(f);if(h)return e.union(h,this.successors(f))},i.prototype.isLeaf=function(f){var h;return this.isDirected()?h=this.successors(f):h=this.neighbors(f),h.length===0},i.prototype.filterNodes=function(f){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var g=this;e.each(this._nodes,function(_,x){f(x)&&h.setNode(x,_)}),e.each(this._edgeObjs,function(_){h.hasNode(_.v)&&h.hasNode(_.w)&&h.setEdge(_,g.edge(_))});var y={};function m(_){var x=g.parent(_);return x===void 0||h.hasNode(x)?(y[_]=x,x):x in y?y[x]:m(x)}return this._isCompound&&e.each(h.nodes(),function(_){h.setParent(_,m(_))}),h},i.prototype.setDefaultEdgeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultEdgeLabelFn=f,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(f,h){var g=this,y=arguments;return e.reduce(f,function(m,_){return y.length>1?g.setEdge(m,_,h):g.setEdge(m,_),_}),this},i.prototype.setEdge=function(){var f,h,g,y,m=!1,_=arguments[0];typeof _=="object"&&_!==null&&"v"in _?(f=_.v,h=_.w,g=_.name,arguments.length===2&&(y=arguments[1],m=!0)):(f=_,h=arguments[1],g=arguments[3],arguments.length>2&&(y=arguments[2],m=!0)),f=""+f,h=""+h,e.isUndefined(g)||(g=""+g);var x=a(this._isDirected,f,h,g);if(e.has(this._edgeLabels,x))return m&&(this._edgeLabels[x]=y),this;if(!e.isUndefined(g)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(h),this._edgeLabels[x]=m?y:this._defaultEdgeLabelFn(f,h,g);var S=u(this._isDirected,f,h,g);return f=S.v,h=S.w,Object.freeze(S),this._edgeObjs[x]=S,s(this._preds[h],f),s(this._sucs[f],h),this._in[h][x]=S,this._out[f][x]=S,this._edgeCount++,this},i.prototype.edge=function(f,h,g){var y=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,f,h,g);return this._edgeLabels[y]},i.prototype.hasEdge=function(f,h,g){var y=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,f,h,g);return e.has(this._edgeLabels,y)},i.prototype.removeEdge=function(f,h,g){var y=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,f,h,g),m=this._edgeObjs[y];return m&&(f=m.v,h=m.w,delete this._edgeLabels[y],delete this._edgeObjs[y],o(this._preds[h],f),o(this._sucs[f],h),delete this._in[h][y],delete this._out[f][y],this._edgeCount--),this},i.prototype.inEdges=function(f,h){var g=this._in[f];if(g){var y=e.values(g);return h?e.filter(y,function(m){return m.v===h}):y}},i.prototype.outEdges=function(f,h){var g=this._out[f];if(g){var y=e.values(g);return h?e.filter(y,function(m){return m.w===h}):y}},i.prototype.nodeEdges=function(f,h){var g=this.inEdges(f,h);if(g)return g.concat(this.outEdges(f,h))};function s(f,h){f[h]?f[h]++:f[h]=1}function o(f,h){--f[h]||delete f[h]}function a(f,h,g,y){var m=""+h,_=""+g;if(!f&&m>_){var x=m;m=_,_=x}return m+n+_+n+(e.isUndefined(y)?t:y)}function u(f,h,g,y){var m=""+h,_=""+g;if(!f&&m>_){var x=m;m=_,_=x}var S={v:m,w:_};return y&&(S.name=y),S}function c(f,h){return a(f,h.v,h.w,h.name)}return Dw}var Fw,u5;function Vae(){return u5||(u5=1,Fw="2.1.8"),Fw}var Bw,c5;function Gae(){return c5||(c5=1,Bw={Graph:F2(),version:Vae()}),Bw}var zw,l5;function $ae(){if(l5)return zw;l5=1;var e=ho(),t=F2();zw={write:r,read:s};function r(o){var a={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:n(o),edges:i(o)};return e.isUndefined(o.graph())||(a.value=e.clone(o.graph())),a}function n(o){return e.map(o.nodes(),function(a){var u=o.node(a),c=o.parent(a),f={v:a};return e.isUndefined(u)||(f.value=u),e.isUndefined(c)||(f.parent=c),f})}function i(o){return e.map(o.edges(),function(a){var u=o.edge(a),c={v:a.v,w:a.w};return e.isUndefined(a.name)||(c.name=a.name),e.isUndefined(u)||(c.value=u),c})}function s(o){var a=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(u){a.setNode(u.v,u.value),u.parent&&a.setParent(u.v,u.parent)}),e.each(o.edges,function(u){a.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),a}return zw}var Vw,f5;function Uae(){if(f5)return Vw;f5=1;var e=ho();Vw=t;function t(r){var n={},i=[],s;function o(a){e.has(n,a)||(n[a]=!0,s.push(a),e.each(r.successors(a),o),e.each(r.predecessors(a),o))}return e.each(r.nodes(),function(a){s=[],o(a),s.length&&i.push(s)}),i}return Vw}var Gw,h5;function XV(){if(h5)return Gw;h5=1;var e=ho();Gw=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(r){return r.key})},t.prototype.has=function(r){return e.has(this._keyIndices,r)},t.prototype.priority=function(r){var n=this._keyIndices[r];if(n!==void 0)return this._arr[n].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(r,n){var i=this._keyIndices;if(r=String(r),!e.has(i,r)){var s=this._arr,o=s.length;return i[r]=o,s.push({key:r,priority:n}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},t.prototype.decrease=function(r,n){var i=this._keyIndices[r];if(n>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[i].priority+" New: "+n);this._arr[i].priority=n,this._decrease(i)},t.prototype._heapify=function(r){var n=this._arr,i=2*r,s=i+1,o=r;i<n.length&&(o=n[i].priority<n[o].priority?i:o,s<n.length&&(o=n[s].priority<n[o].priority?s:o),o!==r&&(this._swap(r,o),this._heapify(o)))},t.prototype._decrease=function(r){for(var n=this._arr,i=n[r].priority,s;r!==0&&(s=r>>1,!(n[s].priority<i));)this._swap(r,s),r=s},t.prototype._swap=function(r,n){var i=this._arr,s=this._keyIndices,o=i[r],a=i[n];i[r]=a,i[n]=o,s[a.key]=r,s[o.key]=n},Gw}var $w,d5;function YV(){if(d5)return $w;d5=1;var e=ho(),t=XV();$w=n;var r=e.constant(1);function n(s,o,a,u){return i(s,String(o),a||r,u||function(c){return s.outEdges(c)})}function i(s,o,a,u){var c={},f=new t,h,g,y=function(m){var _=m.v!==h?m.v:m.w,x=c[_],S=a(m),E=g.distance+S;if(S<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+m+" Weight: "+S);E<x.distance&&(x.distance=E,x.predecessor=h,f.decrease(_,E))};for(s.nodes().forEach(function(m){var _=m===o?0:Number.POSITIVE_INFINITY;c[m]={distance:_},f.add(m,_)});f.size()>0&&(h=f.removeMin(),g=c[h],g.distance!==Number.POSITIVE_INFINITY);)u(h).forEach(y);return c}return $w}var Uw,p5;function jae(){if(p5)return Uw;p5=1;var e=YV(),t=ho();Uw=r;function r(n,i,s){return t.transform(n.nodes(),function(o,a){o[a]=e(n,a,i,s)},{})}return Uw}var jw,v5;function KV(){if(v5)return jw;v5=1;var e=ho();jw=t;function t(r){var n=0,i=[],s={},o=[];function a(u){var c=s[u]={onStack:!0,lowlink:n,index:n++};if(i.push(u),r.successors(u).forEach(function(g){e.has(s,g)?s[g].onStack&&(c.lowlink=Math.min(c.lowlink,s[g].index)):(a(g),c.lowlink=Math.min(c.lowlink,s[g].lowlink))}),c.lowlink===c.index){var f=[],h;do h=i.pop(),s[h].onStack=!1,f.push(h);while(u!==h);o.push(f)}}return r.nodes().forEach(function(u){e.has(s,u)||a(u)}),o}return jw}var Hw,g5;function Hae(){if(g5)return Hw;g5=1;var e=ho(),t=KV();Hw=r;function r(n){return e.filter(t(n),function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return Hw}var Ww,m5;function Wae(){if(m5)return Ww;m5=1;var e=ho();Ww=r;var t=e.constant(1);function r(i,s,o){return n(i,s||t,o||function(a){return i.outEdges(a)})}function n(i,s,o){var a={},u=i.nodes();return u.forEach(function(c){a[c]={},a[c][c]={distance:0},u.forEach(function(f){c!==f&&(a[c][f]={distance:Number.POSITIVE_INFINITY})}),o(c).forEach(function(f){var h=f.v===c?f.w:f.v,g=s(f);a[c][h]={distance:g,predecessor:c}})}),u.forEach(function(c){var f=a[c];u.forEach(function(h){var g=a[h];u.forEach(function(y){var m=g[c],_=f[y],x=g[y],S=m.distance+_.distance;S<x.distance&&(x.distance=S,x.predecessor=_.predecessor)})})}),a}return Ww}var Xw,y5;function ZV(){if(y5)return Xw;y5=1;var e=ho();Xw=t,t.CycleException=r;function t(n){var i={},s={},o=[];function a(u){if(e.has(s,u))throw new r;e.has(i,u)||(s[u]=!0,i[u]=!0,e.each(n.predecessors(u),a),delete s[u],o.push(u))}if(e.each(n.sinks(),a),e.size(i)!==n.nodeCount())throw new r;return o}function r(){}return r.prototype=new Error,Xw}var Yw,_5;function Xae(){if(_5)return Yw;_5=1;var e=ZV();Yw=t;function t(r){try{e(r)}catch(n){if(n instanceof e.CycleException)return!1;throw n}return!0}return Yw}var Kw,b5;function JV(){if(b5)return Kw;b5=1;var e=ho();Kw=t;function t(n,i,s){e.isArray(i)||(i=[i]);var o=(n.isDirected()?n.successors:n.neighbors).bind(n),a=[],u={};return e.each(i,function(c){if(!n.hasNode(c))throw new Error("Graph does not have node: "+c);r(n,c,s==="post",u,o,a)}),a}function r(n,i,s,o,a,u){e.has(o,i)||(o[i]=!0,s||u.push(i),e.each(a(i),function(c){r(n,c,s,o,a,u)}),s&&u.push(i))}return Kw}var Zw,w5;function Yae(){if(w5)return Zw;w5=1;var e=JV();Zw=t;function t(r,n){return e(r,n,"post")}return Zw}var Jw,x5;function Kae(){if(x5)return Jw;x5=1;var e=JV();Jw=t;function t(r,n){return e(r,n,"pre")}return Jw}var Qw,S5;function Zae(){if(S5)return Qw;S5=1;var e=ho(),t=F2(),r=XV();Qw=n;function n(i,s){var o=new t,a={},u=new r,c;function f(g){var y=g.v===c?g.w:g.v,m=u.priority(y);if(m!==void 0){var _=s(g);_<m&&(a[y]=c,u.decrease(y,_))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(g){u.add(g,Number.POSITIVE_INFINITY),o.setNode(g)}),u.decrease(i.nodes()[0],0);for(var h=!1;u.size()>0;){if(c=u.removeMin(),e.has(a,c))o.setEdge(c,a[c]);else{if(h)throw new Error("Input graph is not connected: "+i);h=!0}i.nodeEdges(c).forEach(f)}return o}return Qw}var ex,E5;function Jae(){return E5||(E5=1,ex={components:Uae(),dijkstra:YV(),dijkstraAll:jae(),findCycles:Hae(),floydWarshall:Wae(),isAcyclic:Xae(),postorder:Yae(),preorder:Kae(),prim:Zae(),tarjan:KV(),topsort:ZV()}),ex}var tx,A5;function QV(){if(A5)return tx;A5=1;var e=Gae();return tx={Graph:e.Graph,json:$ae(),alg:Jae(),version:e.version},tx}var rx,T5;function Io(){if(T5)return rx;T5=1;var e;if(typeof x2=="function")try{e=QV()}catch{}return e||(e=window.graphlib),rx=e,rx}var nx,P5;function Qae(){if(P5)return nx;P5=1;var e=SV(),t=1,r=4;function n(i){return e(i,t|r)}return nx=n,nx}var ix,C5;function Gv(){if(C5)return ix;C5=1;var e=$l(),t=Ya(),r=kv(),n=fo();function i(s,o,a){if(!n(a))return!1;var u=typeof o;return(u=="number"?t(a)&&r(o,a.length):u=="string"&&o in a)?e(a[o],s):!1}return ix=i,ix}var sx,R5;function eue(){if(R5)return sx;R5=1;var e=Vv(),t=$l(),r=Gv(),n=Tc(),i=Object.prototype,s=i.hasOwnProperty,o=e(function(a,u){a=Object(a);var c=-1,f=u.length,h=f>2?u[2]:void 0;for(h&&r(u[0],u[1],h)&&(f=1);++c<f;)for(var g=u[c],y=n(g),m=-1,_=y.length;++m<_;){var x=y[m],S=a[x];(S===void 0||t(S,i[x])&&!s.call(a,x))&&(a[x]=g[x])}return a});return sx=o,sx}var ox,I5;function tue(){if(I5)return ox;I5=1;var e=Ka(),t=Ya(),r=Ou();function n(i){return function(s,o,a){var u=Object(s);if(!t(s)){var c=e(o,3);s=r(s),o=function(h){return c(u[h],h,u)}}var f=i(s,o,a);return f>-1?u[c?s[f]:f]:void 0}}return ox=n,ox}var ax,O5;function rue(){if(O5)return ax;O5=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return ax=t,ax}var ux,M5;function nue(){if(M5)return ux;M5=1;var e=rue(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return ux=r,ux}var cx,k5;function iue(){if(k5)return cx;k5=1;var e=nue(),t=fo(),r=Wl(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function u(c){if(typeof c=="number")return c;if(r(c))return n;if(t(c)){var f=typeof c.valueOf=="function"?c.valueOf():c;c=t(f)?f+"":f}if(typeof c!="string")return c===0?c:+c;c=e(c);var h=s.test(c);return h||o.test(c)?a(c.slice(2),h?2:8):i.test(c)?n:+c}return cx=u,cx}var lx,L5;function eG(){if(L5)return lx;L5=1;var e=iue(),t=1/0,r=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-1/0){var s=i<0?-1:1;return s*r}return i===i?i:0}return lx=n,lx}var fx,N5;function sue(){if(N5)return fx;N5=1;var e=eG();function t(r){var n=e(r),i=n%1;return n===n?i?n-i:n:0}return fx=t,fx}var hx,q5;function oue(){if(q5)return hx;q5=1;var e=jV(),t=Ka(),r=sue(),n=Math.max;function i(s,o,a){var u=s==null?0:s.length;if(!u)return-1;var c=a==null?0:r(a);return c<0&&(c=n(u+c,0)),e(s,t(o,3),c)}return hx=i,hx}var dx,D5;function aue(){if(D5)return dx;D5=1;var e=tue(),t=oue(),r=e(t);return dx=r,dx}var px,F5;function tG(){if(F5)return px;F5=1;var e=D2();function t(r){var n=r==null?0:r.length;return n?e(r,1):[]}return px=t,px}var vx,B5;function uue(){if(B5)return vx;B5=1;var e=k2(),t=EV(),r=Tc();function n(i,s){return i==null?i:e(i,t(s),r)}return vx=n,vx}var gx,z5;function cue(){if(z5)return gx;z5=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return gx=e,gx}var mx,V5;function lue(){if(V5)return mx;V5=1;var e=Ov(),t=L2(),r=Ka();function n(i,s){var o={};return s=r(s,3),t(i,function(a,u,c){e(o,u,s(a,u,c))}),o}return mx=n,mx}var yx,G5;function B2(){if(G5)return yx;G5=1;var e=Wl();function t(r,n,i){for(var s=-1,o=r.length;++s<o;){var a=r[s],u=n(a);if(u!=null&&(c===void 0?u===u&&!e(u):i(u,c)))var c=u,f=a}return f}return yx=t,yx}var _x,$5;function fue(){if($5)return _x;$5=1;function e(t,r){return t>r}return _x=e,_x}var bx,U5;function hue(){if(U5)return bx;U5=1;var e=B2(),t=fue(),r=Pc();function n(i){return i&&i.length?e(i,r,t):void 0}return bx=n,bx}var wx,j5;function rG(){if(j5)return wx;j5=1;var e=Ov(),t=$l();function r(n,i,s){(s!==void 0&&!t(n[i],s)||s===void 0&&!(i in n))&&e(n,i,s)}return wx=r,wx}var xx,H5;function due(){if(H5)return xx;H5=1;var e=Ec(),t=qv(),r=ya(),n="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,a=s.hasOwnProperty,u=o.call(Object);function c(f){if(!r(f)||e(f)!=n)return!1;var h=t(f);if(h===null)return!0;var g=a.call(h,"constructor")&&h.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==u}return xx=c,xx}var Sx,W5;function nG(){if(W5)return Sx;W5=1;function e(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}return Sx=e,Sx}var Ex,X5;function pue(){if(X5)return Ex;X5=1;var e=Mh(),t=Tc();function r(n){return e(n,t(n))}return Ex=r,Ex}var Ax,Y5;function vue(){if(Y5)return Ax;Y5=1;var e=rG(),t=fV(),r=bV(),n=hV(),i=xV(),s=kh(),o=oi(),a=HV(),u=jl(),c=Oh(),f=fo(),h=due(),g=Lh(),y=nG(),m=pue();function _(x,S,E,A,T,I,N){var p=y(x,E),P=y(S,E),O=N.get(P);if(O){e(x,E,O);return}var q=I?I(p,P,E+"",x,S,N):void 0,V=q===void 0;if(V){var W=o(P),G=!W&&u(P),J=!W&&!G&&g(P);q=P,W||G||J?o(p)?q=p:a(p)?q=n(p):G?(V=!1,q=t(P,!0)):J?(V=!1,q=r(P,!0)):q=[]:h(P)||s(P)?(q=p,s(p)?q=m(p):(!f(p)||c(p))&&(q=i(P))):V=!1}V&&(N.set(P,q),T(q,P,A,I,N),N.delete(P)),e(x,E,q)}return Ax=_,Ax}var Tx,K5;function gue(){if(K5)return Tx;K5=1;var e=Iv(),t=rG(),r=k2(),n=vue(),i=fo(),s=Tc(),o=nG();function a(u,c,f,h,g){u!==c&&r(c,function(y,m){if(g||(g=new e),i(y))n(u,c,m,f,a,h,g);else{var _=h?h(o(u,m),y,m+"",u,c,g):void 0;_===void 0&&(_=y),t(u,m,_)}},s)}return Tx=a,Tx}var Px,Z5;function mue(){if(Z5)return Px;Z5=1;var e=Vv(),t=Gv();function r(n){return e(function(i,s){var o=-1,a=s.length,u=a>1?s[a-1]:void 0,c=a>2?s[2]:void 0;for(u=n.length>3&&typeof u=="function"?(a--,u):void 0,c&&t(s[0],s[1],c)&&(u=a<3?void 0:u,a=1),i=Object(i);++o<a;){var f=s[o];f&&n(i,f,o,u)}return i})}return Px=r,Px}var Cx,J5;function yue(){if(J5)return Cx;J5=1;var e=gue(),t=mue(),r=t(function(n,i,s){e(n,i,s)});return Cx=r,Cx}var Rx,Q5;function iG(){if(Q5)return Rx;Q5=1;function e(t,r){return t<r}return Rx=e,Rx}var Ix,e8;function _ue(){if(e8)return Ix;e8=1;var e=B2(),t=iG(),r=Pc();function n(i){return i&&i.length?e(i,r,t):void 0}return Ix=n,Ix}var Ox,t8;function bue(){if(t8)return Ox;t8=1;var e=B2(),t=Ka(),r=iG();function n(i,s){return i&&i.length?e(i,t(s,2),r):void 0}return Ox=n,Ox}var Mx,r8;function wue(){if(r8)return Mx;r8=1;var e=Vo(),t=function(){return e.Date.now()};return Mx=t,Mx}var kx,n8;function xue(){if(n8)return kx;n8=1;var e=Mv(),t=Bv(),r=kv(),n=fo(),i=Nh();function s(o,a,u,c){if(!n(o))return o;a=t(a,o);for(var f=-1,h=a.length,g=h-1,y=o;y!=null&&++f<h;){var m=i(a[f]),_=u;if(m==="__proto__"||m==="constructor"||m==="prototype")return o;if(f!=g){var x=y[m];_=c?c(x,m,y):void 0,_===void 0&&(_=n(x)?x:r(a[f+1])?[]:{})}e(y,m,_),y=y[m]}return o}return kx=s,kx}var Lx,i8;function Sue(){if(i8)return Lx;i8=1;var e=zv(),t=xue(),r=Bv();function n(i,s,o){for(var a=-1,u=s.length,c={};++a<u;){var f=s[a],h=e(i,f);o(h,f)&&t(c,r(f,i),h)}return c}return Lx=n,Lx}var Nx,s8;function Eue(){if(s8)return Nx;s8=1;var e=Sue(),t=NV();function r(n,i){return e(n,i,function(s,o){return t(n,o)})}return Nx=r,Nx}var qx,o8;function Aue(){if(o8)return qx;o8=1;var e=tG(),t=$V(),r=UV();function n(i){return r(t(i,void 0,e),i+"")}return qx=n,qx}var Dx,a8;function Tue(){if(a8)return Dx;a8=1;var e=Eue(),t=Aue(),r=t(function(n,i){return n==null?{}:e(n,i)});return Dx=r,Dx}var Fx,u8;function Pue(){if(u8)return Fx;u8=1;var e=Math.ceil,t=Math.max;function r(n,i,s,o){for(var a=-1,u=t(e((i-n)/(s||1)),0),c=Array(u);u--;)c[o?u:++a]=n,n+=s;return c}return Fx=r,Fx}var Bx,c8;function Cue(){if(c8)return Bx;c8=1;var e=Pue(),t=Gv(),r=eG();function n(i){return function(s,o,a){return a&&typeof a!="number"&&t(s,o,a)&&(o=a=void 0),s=r(s),o===void 0?(o=s,s=0):o=r(o),a=a===void 0?s<o?1:-1:r(a),e(s,o,a,i)}}return Bx=n,Bx}var zx,l8;function Rue(){if(l8)return zx;l8=1;var e=Cue(),t=e();return zx=t,zx}var Vx,f8;function Iue(){if(f8)return Vx;f8=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return Vx=e,Vx}var Gx,h8;function Oue(){if(h8)return Gx;h8=1;var e=Wl();function t(r,n){if(r!==n){var i=r!==void 0,s=r===null,o=r===r,a=e(r),u=n!==void 0,c=n===null,f=n===n,h=e(n);if(!c&&!h&&!a&&r>n||a&&u&&f&&!c&&!h||s&&u&&f||!i&&f||!o)return 1;if(!s&&!a&&!h&&r<n||h&&i&&o&&!s&&!a||c&&i&&o||!u&&o||!f)return-1}return 0}return Gx=t,Gx}var $x,d8;function Mue(){if(d8)return $x;d8=1;var e=Oue();function t(r,n,i){for(var s=-1,o=r.criteria,a=n.criteria,u=o.length,c=i.length;++s<u;){var f=e(o[s],a[s]);if(f){if(s>=c)return f;var h=i[s];return f*(h=="desc"?-1:1)}}return r.index-n.index}return $x=t,$x}var Ux,p8;function kue(){if(p8)return Ux;p8=1;var e=Fv(),t=zv(),r=Ka(),n=zV(),i=Iue(),s=Lv(),o=Mue(),a=Pc(),u=oi();function c(f,h,g){h.length?h=e(h,function(_){return u(_)?function(x){return t(x,_.length===1?_[0]:_)}:_}):h=[a];var y=-1;h=e(h,s(r));var m=n(f,function(_,x,S){var E=e(h,function(A){return A(_)});return{criteria:E,index:++y,value:_}});return i(m,function(_,x){return o(_,x,g)})}return Ux=c,Ux}var jx,v8;function Lue(){if(v8)return jx;v8=1;var e=D2(),t=kue(),r=Vv(),n=Gv(),i=r(function(s,o){if(s==null)return[];var a=o.length;return a>1&&n(s,o[0],o[1])?o=[]:a>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),t(s,e(o,1),[])});return jx=i,jx}var Hx,g8;function Nue(){if(g8)return Hx;g8=1;var e=kV(),t=0;function r(n){var i=++t;return e(n)+i}return Hx=r,Hx}var Wx,m8;function que(){if(m8)return Wx;m8=1;function e(t,r,n){for(var i=-1,s=t.length,o=r.length,a={};++i<s;){var u=i<o?r[i]:void 0;n(a,t[i],u)}return a}return Wx=e,Wx}var Xx,y8;function Due(){if(y8)return Xx;y8=1;var e=Mv(),t=que();function r(n,i){return t(n||[],i||[],e)}return Xx=r,Xx}var Yx,_8;function Mn(){if(_8)return Yx;_8=1;var e;if(typeof x2=="function")try{e={cloneDeep:Qae(),constant:M2(),defaults:eue(),each:TV(),filter:DV(),find:aue(),flatten:tG(),forEach:AV(),forIn:uue(),has:FV(),isUndefined:BV(),last:cue(),map:VV(),mapValues:lue(),max:hue(),merge:yue(),min:_ue(),minBy:bue(),now:wue(),pick:Tue(),range:Rue(),reduce:GV(),sortBy:Lue(),uniqueId:Nue(),values:WV(),zipObject:Due()}}catch{}return e||(e=window._),Yx=e,Yx}var Kx,b8;function Fue(){if(b8)return Kx;b8=1,Kx=e;function e(){var n={};n._next=n._prev=n,this._sentinel=n}e.prototype.dequeue=function(){var n=this._sentinel,i=n._prev;if(i!==n)return t(i),i},e.prototype.enqueue=function(n){var i=this._sentinel;n._prev&&n._next&&t(n),n._next=i._next,i._next._prev=n,i._next=n,n._prev=i},e.prototype.toString=function(){for(var n=[],i=this._sentinel,s=i._prev;s!==i;)n.push(JSON.stringify(s,r)),s=s._prev;return"["+n.join(", ")+"]"};function t(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function r(n,i){if(n!=="_next"&&n!=="_prev")return i}return Kx}var Zx,w8;function Bue(){if(w8)return Zx;w8=1;var e=Mn(),t=Io().Graph,r=Fue();Zx=i;var n=e.constant(1);function i(c,f){if(c.nodeCount()<=1)return[];var h=a(c,f||n),g=s(h.graph,h.buckets,h.zeroIdx);return e.flatten(e.map(g,function(y){return c.outEdges(y.v,y.w)}),!0)}function s(c,f,h){for(var g=[],y=f[f.length-1],m=f[0],_;c.nodeCount();){for(;_=m.dequeue();)o(c,f,h,_);for(;_=y.dequeue();)o(c,f,h,_);if(c.nodeCount()){for(var x=f.length-2;x>0;--x)if(_=f[x].dequeue(),_){g=g.concat(o(c,f,h,_,!0));break}}}return g}function o(c,f,h,g,y){var m=y?[]:void 0;return e.forEach(c.inEdges(g.v),function(_){var x=c.edge(_),S=c.node(_.v);y&&m.push({v:_.v,w:_.w}),S.out-=x,u(f,h,S)}),e.forEach(c.outEdges(g.v),function(_){var x=c.edge(_),S=_.w,E=c.node(S);E.in-=x,u(f,h,E)}),c.removeNode(g.v),m}function a(c,f){var h=new t,g=0,y=0;e.forEach(c.nodes(),function(x){h.setNode(x,{v:x,in:0,out:0})}),e.forEach(c.edges(),function(x){var S=h.edge(x.v,x.w)||0,E=f(x),A=S+E;h.setEdge(x.v,x.w,A),y=Math.max(y,h.node(x.v).out+=E),g=Math.max(g,h.node(x.w).in+=E)});var m=e.range(y+g+3).map(function(){return new r}),_=g+1;return e.forEach(h.nodes(),function(x){u(m,_,h.node(x))}),{graph:h,buckets:m,zeroIdx:_}}function u(c,f,h){h.out?h.in?c[h.out-h.in+f].enqueue(h):c[c.length-1].enqueue(h):c[0].enqueue(h)}return Zx}var Jx,x8;function zue(){if(x8)return Jx;x8=1;var e=Mn(),t=Bue();Jx={run:r,undo:i};function r(s){var o=s.graph().acyclicer==="greedy"?t(s,a(s)):n(s);e.forEach(o,function(u){var c=s.edge(u);s.removeEdge(u),c.forwardName=u.name,c.reversed=!0,s.setEdge(u.w,u.v,c,e.uniqueId("rev"))});function a(u){return function(c){return u.edge(c).weight}}}function n(s){var o=[],a={},u={};function c(f){e.has(u,f)||(u[f]=!0,a[f]=!0,e.forEach(s.outEdges(f),function(h){e.has(a,h.w)?o.push(h):c(h.w)}),delete a[f])}return e.forEach(s.nodes(),c),o}function i(s){e.forEach(s.edges(),function(o){var a=s.edge(o);if(a.reversed){s.removeEdge(o);var u=a.forwardName;delete a.reversed,delete a.forwardName,s.setEdge(o.w,o.v,a,u)}})}return Jx}var Qx,S8;function vs(){if(S8)return Qx;S8=1;var e=Mn(),t=Io().Graph;Qx={addDummyNode:r,simplify:n,asNonCompoundGraph:i,successorWeights:s,predecessorWeights:o,intersectRect:a,buildLayerMatrix:u,normalizeRanks:c,removeEmptyRanks:f,addBorderNode:h,maxRank:g,partition:y,time:m,notime:_};function r(x,S,E,A){var T;do T=e.uniqueId(A);while(x.hasNode(T));return E.dummy=S,x.setNode(T,E),T}function n(x){var S=new t().setGraph(x.graph());return e.forEach(x.nodes(),function(E){S.setNode(E,x.node(E))}),e.forEach(x.edges(),function(E){var A=S.edge(E.v,E.w)||{weight:0,minlen:1},T=x.edge(E);S.setEdge(E.v,E.w,{weight:A.weight+T.weight,minlen:Math.max(A.minlen,T.minlen)})}),S}function i(x){var S=new t({multigraph:x.isMultigraph()}).setGraph(x.graph());return e.forEach(x.nodes(),function(E){x.children(E).length||S.setNode(E,x.node(E))}),e.forEach(x.edges(),function(E){S.setEdge(E,x.edge(E))}),S}function s(x){var S=e.map(x.nodes(),function(E){var A={};return e.forEach(x.outEdges(E),function(T){A[T.w]=(A[T.w]||0)+x.edge(T).weight}),A});return e.zipObject(x.nodes(),S)}function o(x){var S=e.map(x.nodes(),function(E){var A={};return e.forEach(x.inEdges(E),function(T){A[T.v]=(A[T.v]||0)+x.edge(T).weight}),A});return e.zipObject(x.nodes(),S)}function a(x,S){var E=x.x,A=x.y,T=S.x-E,I=S.y-A,N=x.width/2,p=x.height/2;if(!T&&!I)throw new Error("Not possible to find intersection inside of the rectangle");var P,O;return Math.abs(I)*N>Math.abs(T)*p?(I<0&&(p=-p),P=p*T/I,O=p):(T<0&&(N=-N),P=N,O=N*I/T),{x:E+P,y:A+O}}function u(x){var S=e.map(e.range(g(x)+1),function(){return[]});return e.forEach(x.nodes(),function(E){var A=x.node(E),T=A.rank;e.isUndefined(T)||(S[T][A.order]=E)}),S}function c(x){var S=e.min(e.map(x.nodes(),function(E){return x.node(E).rank}));e.forEach(x.nodes(),function(E){var A=x.node(E);e.has(A,"rank")&&(A.rank-=S)})}function f(x){var S=e.min(e.map(x.nodes(),function(I){return x.node(I).rank})),E=[];e.forEach(x.nodes(),function(I){var N=x.node(I).rank-S;E[N]||(E[N]=[]),E[N].push(I)});var A=0,T=x.graph().nodeRankFactor;e.forEach(E,function(I,N){e.isUndefined(I)&&N%T!==0?--A:A&&e.forEach(I,function(p){x.node(p).rank+=A})})}function h(x,S,E,A){var T={width:0,height:0};return arguments.length>=4&&(T.rank=E,T.order=A),r(x,"border",T,S)}function g(x){return e.max(e.map(x.nodes(),function(S){var E=x.node(S).rank;if(!e.isUndefined(E))return E}))}function y(x,S){var E={lhs:[],rhs:[]};return e.forEach(x,function(A){S(A)?E.lhs.push(A):E.rhs.push(A)}),E}function m(x,S){var E=e.now();try{return S()}finally{console.log(x+" time: "+(e.now()-E)+"ms")}}function _(x,S){return S()}return Qx}var eS,E8;function Vue(){if(E8)return eS;E8=1;var e=Mn(),t=vs();eS={run:r,undo:i};function r(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(o){n(s,o)})}function n(s,o){var a=o.v,u=s.node(a).rank,c=o.w,f=s.node(c).rank,h=o.name,g=s.edge(o),y=g.labelRank;if(f!==u+1){s.removeEdge(o);var m,_,x;for(x=0,++u;u<f;++x,++u)g.points=[],_={width:0,height:0,edgeLabel:g,edgeObj:o,rank:u},m=t.addDummyNode(s,"edge",_,"_d"),u===y&&(_.width=g.width,_.height=g.height,_.dummy="edge-label",_.labelpos=g.labelpos),s.setEdge(a,m,{weight:g.weight},h),x===0&&s.graph().dummyChains.push(m),a=m;s.setEdge(a,c,{weight:g.weight},h)}}function i(s){e.forEach(s.graph().dummyChains,function(o){var a=s.node(o),u=a.edgeLabel,c;for(s.setEdge(a.edgeObj,u);a.dummy;)c=s.successors(o)[0],s.removeNode(o),u.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(u.x=a.x,u.y=a.y,u.width=a.width,u.height=a.height),o=c,a=s.node(o)})}return eS}var tS,A8;function Np(){if(A8)return tS;A8=1;var e=Mn();tS={longestPath:t,slack:r};function t(n){var i={};function s(o){var a=n.node(o);if(e.has(i,o))return a.rank;i[o]=!0;var u=e.min(e.map(n.outEdges(o),function(c){return s(c.w)-n.edge(c).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),a.rank=u}e.forEach(n.sources(),s)}function r(n,i){return n.node(i.w).rank-n.node(i.v).rank-n.edge(i).minlen}return tS}var rS,T8;function sG(){if(T8)return rS;T8=1;var e=Mn(),t=Io().Graph,r=Np().slack;rS=n;function n(a){var u=new t({directed:!1}),c=a.nodes()[0],f=a.nodeCount();u.setNode(c,{});for(var h,g;i(u,a)<f;)h=s(u,a),g=u.hasNode(h.v)?r(a,h):-r(a,h),o(u,a,g);return u}function i(a,u){function c(f){e.forEach(u.nodeEdges(f),function(h){var g=h.v,y=f===g?h.w:g;!a.hasNode(y)&&!r(u,h)&&(a.setNode(y,{}),a.setEdge(f,y,{}),c(y))})}return e.forEach(a.nodes(),c),a.nodeCount()}function s(a,u){return e.minBy(u.edges(),function(c){if(a.hasNode(c.v)!==a.hasNode(c.w))return r(u,c)})}function o(a,u,c){e.forEach(a.nodes(),function(f){u.node(f).rank+=c})}return rS}var nS,P8;function Gue(){if(P8)return nS;P8=1;var e=Mn(),t=sG(),r=Np().slack,n=Np().longestPath,i=Io().alg.preorder,s=Io().alg.postorder,o=vs().simplify;nS=a,a.initLowLimValues=h,a.initCutValues=u,a.calcCutValue=f,a.leaveEdge=y,a.enterEdge=m,a.exchangeEdges=_;function a(A){A=o(A),n(A);var T=t(A);h(T),u(T,A);for(var I,N;I=y(T);)N=m(T,A,I),_(T,A,I,N)}function u(A,T){var I=s(A,A.nodes());I=I.slice(0,I.length-1),e.forEach(I,function(N){c(A,T,N)})}function c(A,T,I){var N=A.node(I),p=N.parent;A.edge(I,p).cutvalue=f(A,T,I)}function f(A,T,I){var N=A.node(I),p=N.parent,P=!0,O=T.edge(I,p),q=0;return O||(P=!1,O=T.edge(p,I)),q=O.weight,e.forEach(T.nodeEdges(I),function(V){var W=V.v===I,G=W?V.w:V.v;if(G!==p){var J=W===P,se=T.edge(V).weight;if(q+=J?se:-se,S(A,I,G)){var K=A.edge(I,G).cutvalue;q+=J?-K:K}}}),q}function h(A,T){arguments.length<2&&(T=A.nodes()[0]),g(A,{},1,T)}function g(A,T,I,N,p){var P=I,O=A.node(N);return T[N]=!0,e.forEach(A.neighbors(N),function(q){e.has(T,q)||(I=g(A,T,I,q,N))}),O.low=P,O.lim=I++,p?O.parent=p:delete O.parent,I}function y(A){return e.find(A.edges(),function(T){return A.edge(T).cutvalue<0})}function m(A,T,I){var N=I.v,p=I.w;T.hasEdge(N,p)||(N=I.w,p=I.v);var P=A.node(N),O=A.node(p),q=P,V=!1;P.lim>O.lim&&(q=O,V=!0);var W=e.filter(T.edges(),function(G){return V===E(A,A.node(G.v),q)&&V!==E(A,A.node(G.w),q)});return e.minBy(W,function(G){return r(T,G)})}function _(A,T,I,N){var p=I.v,P=I.w;A.removeEdge(p,P),A.setEdge(N.v,N.w,{}),h(A),u(A,T),x(A,T)}function x(A,T){var I=e.find(A.nodes(),function(p){return!T.node(p).parent}),N=i(A,I);N=N.slice(1),e.forEach(N,function(p){var P=A.node(p).parent,O=T.edge(p,P),q=!1;O||(O=T.edge(P,p),q=!0),T.node(p).rank=T.node(P).rank+(q?O.minlen:-O.minlen)})}function S(A,T,I){return A.hasEdge(T,I)}function E(A,T,I){return I.low<=T.lim&&T.lim<=I.lim}return nS}var iS,C8;function $ue(){if(C8)return iS;C8=1;var e=Np(),t=e.longestPath,r=sG(),n=Gue();iS=i;function i(u){switch(u.graph().ranker){case"network-simplex":a(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:a(u)}}var s=t;function o(u){t(u),r(u)}function a(u){n(u)}return iS}var sS,R8;function Uue(){if(R8)return sS;R8=1;var e=Mn();sS=t;function t(i){var s=n(i);e.forEach(i.graph().dummyChains,function(o){for(var a=i.node(o),u=a.edgeObj,c=r(i,s,u.v,u.w),f=c.path,h=c.lca,g=0,y=f[g],m=!0;o!==u.w;){if(a=i.node(o),m){for(;(y=f[g])!==h&&i.node(y).maxRank<a.rank;)g++;y===h&&(m=!1)}if(!m){for(;g<f.length-1&&i.node(y=f[g+1]).minRank<=a.rank;)g++;y=f[g]}i.setParent(o,y),o=i.successors(o)[0]}})}function r(i,s,o,a){var u=[],c=[],f=Math.min(s[o].low,s[a].low),h=Math.max(s[o].lim,s[a].lim),g,y;g=o;do g=i.parent(g),u.push(g);while(g&&(s[g].low>f||h>s[g].lim));for(y=g,g=a;(g=i.parent(g))!==y;)c.push(g);return{path:u.concat(c.reverse()),lca:y}}function n(i){var s={},o=0;function a(u){var c=o;e.forEach(i.children(u),a),s[u]={low:c,lim:o++}}return e.forEach(i.children(),a),s}return sS}var oS,I8;function jue(){if(I8)return oS;I8=1;var e=Mn(),t=vs();oS={run:r,cleanup:o};function r(a){var u=t.addDummyNode(a,"root",{},"_root"),c=i(a),f=e.max(e.values(c))-1,h=2*f+1;a.graph().nestingRoot=u,e.forEach(a.edges(),function(y){a.edge(y).minlen*=h});var g=s(a)+1;e.forEach(a.children(),function(y){n(a,u,h,g,f,c,y)}),a.graph().nodeRankFactor=h}function n(a,u,c,f,h,g,y){var m=a.children(y);if(!m.length){y!==u&&a.setEdge(u,y,{weight:0,minlen:c});return}var _=t.addBorderNode(a,"_bt"),x=t.addBorderNode(a,"_bb"),S=a.node(y);a.setParent(_,y),S.borderTop=_,a.setParent(x,y),S.borderBottom=x,e.forEach(m,function(E){n(a,u,c,f,h,g,E);var A=a.node(E),T=A.borderTop?A.borderTop:E,I=A.borderBottom?A.borderBottom:E,N=A.borderTop?f:2*f,p=T!==I?1:h-g[y]+1;a.setEdge(_,T,{weight:N,minlen:p,nestingEdge:!0}),a.setEdge(I,x,{weight:N,minlen:p,nestingEdge:!0})}),a.parent(y)||a.setEdge(u,_,{weight:0,minlen:h+g[y]})}function i(a){var u={};function c(f,h){var g=a.children(f);g&&g.length&&e.forEach(g,function(y){c(y,h+1)}),u[f]=h}return e.forEach(a.children(),function(f){c(f,1)}),u}function s(a){return e.reduce(a.edges(),function(u,c){return u+a.edge(c).weight},0)}function o(a){var u=a.graph();a.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(a.edges(),function(c){var f=a.edge(c);f.nestingEdge&&a.removeEdge(c)})}return oS}var aS,O8;function Hue(){if(O8)return aS;O8=1;var e=Mn(),t=vs();aS=r;function r(i){function s(o){var a=i.children(o),u=i.node(o);if(a.length&&e.forEach(a,s),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var c=u.minRank,f=u.maxRank+1;c<f;++c)n(i,"borderLeft","_bl",o,u,c),n(i,"borderRight","_br",o,u,c)}}e.forEach(i.children(),s)}function n(i,s,o,a,u,c){var f={width:0,height:0,rank:c,borderType:s},h=u[s][c-1],g=t.addDummyNode(i,"border",f,o);u[s][c]=g,i.setParent(g,a),h&&i.setEdge(h,g,{weight:1})}return aS}var uS,M8;function Wue(){if(M8)return uS;M8=1;var e=Mn();uS={adjust:t,undo:r};function t(c){var f=c.graph().rankdir.toLowerCase();(f==="lr"||f==="rl")&&n(c)}function r(c){var f=c.graph().rankdir.toLowerCase();(f==="bt"||f==="rl")&&s(c),(f==="lr"||f==="rl")&&(a(c),n(c))}function n(c){e.forEach(c.nodes(),function(f){i(c.node(f))}),e.forEach(c.edges(),function(f){i(c.edge(f))})}function i(c){var f=c.width;c.width=c.height,c.height=f}function s(c){e.forEach(c.nodes(),function(f){o(c.node(f))}),e.forEach(c.edges(),function(f){var h=c.edge(f);e.forEach(h.points,o),e.has(h,"y")&&o(h)})}function o(c){c.y=-c.y}function a(c){e.forEach(c.nodes(),function(f){u(c.node(f))}),e.forEach(c.edges(),function(f){var h=c.edge(f);e.forEach(h.points,u),e.has(h,"x")&&u(h)})}function u(c){var f=c.x;c.x=c.y,c.y=f}return uS}var cS,k8;function Xue(){if(k8)return cS;k8=1;var e=Mn();cS=t;function t(r){var n={},i=e.filter(r.nodes(),function(c){return!r.children(c).length}),s=e.max(e.map(i,function(c){return r.node(c).rank})),o=e.map(e.range(s+1),function(){return[]});function a(c){if(!e.has(n,c)){n[c]=!0;var f=r.node(c);o[f.rank].push(c),e.forEach(r.successors(c),a)}}var u=e.sortBy(i,function(c){return r.node(c).rank});return e.forEach(u,a),o}return cS}var lS,L8;function Yue(){if(L8)return lS;L8=1;var e=Mn();lS=t;function t(n,i){for(var s=0,o=1;o<i.length;++o)s+=r(n,i[o-1],i[o]);return s}function r(n,i,s){for(var o=e.zipObject(s,e.map(s,function(g,y){return y})),a=e.flatten(e.map(i,function(g){return e.sortBy(e.map(n.outEdges(g),function(y){return{pos:o[y.w],weight:n.edge(y).weight}}),"pos")}),!0),u=1;u<s.length;)u<<=1;var c=2*u-1;u-=1;var f=e.map(new Array(c),function(){return 0}),h=0;return e.forEach(a.forEach(function(g){var y=g.pos+u;f[y]+=g.weight;for(var m=0;y>0;)y%2&&(m+=f[y+1]),y=y-1>>1,f[y]+=g.weight;h+=g.weight*m})),h}return lS}var fS,N8;function Kue(){if(N8)return fS;N8=1;var e=Mn();fS=t;function t(r,n){return e.map(n,function(i){var s=r.inEdges(i);if(s.length){var o=e.reduce(s,function(a,u){var c=r.edge(u),f=r.node(u.v);return{sum:a.sum+c.weight*f.order,weight:a.weight+c.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return fS}var hS,q8;function Zue(){if(q8)return hS;q8=1;var e=Mn();hS=t;function t(i,s){var o={};e.forEach(i,function(u,c){var f=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:c};e.isUndefined(u.barycenter)||(f.barycenter=u.barycenter,f.weight=u.weight)}),e.forEach(s.edges(),function(u){var c=o[u.v],f=o[u.w];!e.isUndefined(c)&&!e.isUndefined(f)&&(f.indegree++,c.out.push(o[u.w]))});var a=e.filter(o,function(u){return!u.indegree});return r(a)}function r(i){var s=[];function o(c){return function(f){f.merged||(e.isUndefined(f.barycenter)||e.isUndefined(c.barycenter)||f.barycenter>=c.barycenter)&&n(c,f)}}function a(c){return function(f){f.in.push(c),--f.indegree===0&&i.push(f)}}for(;i.length;){var u=i.pop();s.push(u),e.forEach(u.in.reverse(),o(u)),e.forEach(u.out,a(u))}return e.map(e.filter(s,function(c){return!c.merged}),function(c){return e.pick(c,["vs","i","barycenter","weight"])})}function n(i,s){var o=0,a=0;i.weight&&(o+=i.barycenter*i.weight,a+=i.weight),s.weight&&(o+=s.barycenter*s.weight,a+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/a,i.weight=a,i.i=Math.min(s.i,i.i),s.merged=!0}return hS}var dS,D8;function Jue(){if(D8)return dS;D8=1;var e=Mn(),t=vs();dS=r;function r(s,o){var a=t.partition(s,function(_){return e.has(_,"barycenter")}),u=a.lhs,c=e.sortBy(a.rhs,function(_){return-_.i}),f=[],h=0,g=0,y=0;u.sort(i(!!o)),y=n(f,c,y),e.forEach(u,function(_){y+=_.vs.length,f.push(_.vs),h+=_.barycenter*_.weight,g+=_.weight,y=n(f,c,y)});var m={vs:e.flatten(f,!0)};return g&&(m.barycenter=h/g,m.weight=g),m}function n(s,o,a){for(var u;o.length&&(u=e.last(o)).i<=a;)o.pop(),s.push(u.vs),a++;return a}function i(s){return function(o,a){return o.barycenter<a.barycenter?-1:o.barycenter>a.barycenter?1:s?a.i-o.i:o.i-a.i}}return dS}var pS,F8;function Que(){if(F8)return pS;F8=1;var e=Mn(),t=Kue(),r=Zue(),n=Jue();pS=i;function i(a,u,c,f){var h=a.children(u),g=a.node(u),y=g?g.borderLeft:void 0,m=g?g.borderRight:void 0,_={};y&&(h=e.filter(h,function(I){return I!==y&&I!==m}));var x=t(a,h);e.forEach(x,function(I){if(a.children(I.v).length){var N=i(a,I.v,c,f);_[I.v]=N,e.has(N,"barycenter")&&o(I,N)}});var S=r(x,c);s(S,_);var E=n(S,f);if(y&&(E.vs=e.flatten([y,E.vs,m],!0),a.predecessors(y).length)){var A=a.node(a.predecessors(y)[0]),T=a.node(a.predecessors(m)[0]);e.has(E,"barycenter")||(E.barycenter=0,E.weight=0),E.barycenter=(E.barycenter*E.weight+A.order+T.order)/(E.weight+2),E.weight+=2}return E}function s(a,u){e.forEach(a,function(c){c.vs=e.flatten(c.vs.map(function(f){return u[f]?u[f].vs:f}),!0)})}function o(a,u){e.isUndefined(a.barycenter)?(a.barycenter=u.barycenter,a.weight=u.weight):(a.barycenter=(a.barycenter*a.weight+u.barycenter*u.weight)/(a.weight+u.weight),a.weight+=u.weight)}return pS}var vS,B8;function ece(){if(B8)return vS;B8=1;var e=Mn(),t=Io().Graph;vS=r;function r(i,s,o){var a=n(i),u=new t({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(c){return i.node(c)});return e.forEach(i.nodes(),function(c){var f=i.node(c),h=i.parent(c);(f.rank===s||f.minRank<=s&&s<=f.maxRank)&&(u.setNode(c),u.setParent(c,h||a),e.forEach(i[o](c),function(g){var y=g.v===c?g.w:g.v,m=u.edge(y,c),_=e.isUndefined(m)?0:m.weight;u.setEdge(y,c,{weight:i.edge(g).weight+_})}),e.has(f,"minRank")&&u.setNode(c,{borderLeft:f.borderLeft[s],borderRight:f.borderRight[s]}))}),u}function n(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return vS}var gS,z8;function tce(){if(z8)return gS;z8=1;var e=Mn();gS=t;function t(r,n,i){var s={},o;e.forEach(i,function(a){for(var u=r.parent(a),c,f;u;){if(c=r.parent(u),c?(f=s[c],s[c]=u):(f=o,o=u),f&&f!==u){n.setEdge(f,u);return}u=c}})}return gS}var mS,V8;function rce(){if(V8)return mS;V8=1;var e=Mn(),t=Xue(),r=Yue(),n=Que(),i=ece(),s=tce(),o=Io().Graph,a=vs();mS=u;function u(g){var y=a.maxRank(g),m=c(g,e.range(1,y+1),"inEdges"),_=c(g,e.range(y-1,-1,-1),"outEdges"),x=t(g);h(g,x);for(var S=Number.POSITIVE_INFINITY,E,A=0,T=0;T<4;++A,++T){f(A%2?m:_,A%4>=2),x=a.buildLayerMatrix(g);var I=r(g,x);I<S&&(T=0,E=e.cloneDeep(x),S=I)}h(g,E)}function c(g,y,m){return e.map(y,function(_){return i(g,_,m)})}function f(g,y){var m=new o;e.forEach(g,function(_){var x=_.graph().root,S=n(_,x,m,y);e.forEach(S.vs,function(E,A){_.node(E).order=A}),s(_,m,S.vs)})}function h(g,y){e.forEach(y,function(m){e.forEach(m,function(_,x){g.node(_).order=x})})}return mS}var yS,G8;function nce(){if(G8)return yS;G8=1;var e=Mn(),t=Io().Graph,r=vs();yS={positionX:m,findType1Conflicts:n,findType2Conflicts:i,addConflict:o,hasConflict:a,verticalAlignment:u,horizontalCompaction:c,alignCoordinates:g,findSmallestWidthAlignment:h,balance:y};function n(S,E){var A={};function T(I,N){var p=0,P=0,O=I.length,q=e.last(N);return e.forEach(N,function(V,W){var G=s(S,V),J=G?S.node(G).order:O;(G||V===q)&&(e.forEach(N.slice(P,W+1),function(se){e.forEach(S.predecessors(se),function(K){var U=S.node(K),j=U.order;(j<p||J<j)&&!(U.dummy&&S.node(se).dummy)&&o(A,K,se)})}),P=W+1,p=J)}),N}return e.reduce(E,T),A}function i(S,E){var A={};function T(N,p,P,O,q){var V;e.forEach(e.range(p,P),function(W){V=N[W],S.node(V).dummy&&e.forEach(S.predecessors(V),function(G){var J=S.node(G);J.dummy&&(J.order<O||J.order>q)&&o(A,G,V)})})}function I(N,p){var P=-1,O,q=0;return e.forEach(p,function(V,W){if(S.node(V).dummy==="border"){var G=S.predecessors(V);G.length&&(O=S.node(G[0]).order,T(p,q,W,P,O),q=W,P=O)}T(p,q,p.length,O,N.length)}),p}return e.reduce(E,I),A}function s(S,E){if(S.node(E).dummy)return e.find(S.predecessors(E),function(A){return S.node(A).dummy})}function o(S,E,A){if(E>A){var T=E;E=A,A=T}var I=S[E];I||(S[E]=I={}),I[A]=!0}function a(S,E,A){if(E>A){var T=E;E=A,A=T}return e.has(S[E],A)}function u(S,E,A,T){var I={},N={},p={};return e.forEach(E,function(P){e.forEach(P,function(O,q){I[O]=O,N[O]=O,p[O]=q})}),e.forEach(E,function(P){var O=-1;e.forEach(P,function(q){var V=T(q);if(V.length){V=e.sortBy(V,function(K){return p[K]});for(var W=(V.length-1)/2,G=Math.floor(W),J=Math.ceil(W);G<=J;++G){var se=V[G];N[q]===q&&O<p[se]&&!a(A,q,se)&&(N[se]=q,N[q]=I[q]=I[se],O=p[se])}}})}),{root:I,align:N}}function c(S,E,A,T,I){var N={},p=f(S,E,A,I),P=I?"borderLeft":"borderRight";function O(W,G){for(var J=p.nodes(),se=J.pop(),K={};se;)K[se]?W(se):(K[se]=!0,J.push(se),J=J.concat(G(se))),se=J.pop()}function q(W){N[W]=p.inEdges(W).reduce(function(G,J){return Math.max(G,N[J.v]+p.edge(J))},0)}function V(W){var G=p.outEdges(W).reduce(function(se,K){return Math.min(se,N[K.w]-p.edge(K))},Number.POSITIVE_INFINITY),J=S.node(W);G!==Number.POSITIVE_INFINITY&&J.borderType!==P&&(N[W]=Math.max(N[W],G))}return O(q,p.predecessors.bind(p)),O(V,p.successors.bind(p)),e.forEach(T,function(W){N[W]=N[A[W]]}),N}function f(S,E,A,T){var I=new t,N=S.graph(),p=_(N.nodesep,N.edgesep,T);return e.forEach(E,function(P){var O;e.forEach(P,function(q){var V=A[q];if(I.setNode(V),O){var W=A[O],G=I.edge(W,V);I.setEdge(W,V,Math.max(p(S,q,O),G||0))}O=q})}),I}function h(S,E){return e.minBy(e.values(E),function(A){var T=Number.NEGATIVE_INFINITY,I=Number.POSITIVE_INFINITY;return e.forIn(A,function(N,p){var P=x(S,p)/2;T=Math.max(N+P,T),I=Math.min(N-P,I)}),T-I})}function g(S,E){var A=e.values(E),T=e.min(A),I=e.max(A);e.forEach(["u","d"],function(N){e.forEach(["l","r"],function(p){var P=N+p,O=S[P],q;if(O!==E){var V=e.values(O);q=p==="l"?T-e.min(V):I-e.max(V),q&&(S[P]=e.mapValues(O,function(W){return W+q}))}})})}function y(S,E){return e.mapValues(S.ul,function(A,T){if(E)return S[E.toLowerCase()][T];var I=e.sortBy(e.map(S,T));return(I[1]+I[2])/2})}function m(S){var E=r.buildLayerMatrix(S),A=e.merge(n(S,E),i(S,E)),T={},I;e.forEach(["u","d"],function(p){I=p==="u"?E:e.values(E).reverse(),e.forEach(["l","r"],function(P){P==="r"&&(I=e.map(I,function(W){return e.values(W).reverse()}));var O=(p==="u"?S.predecessors:S.successors).bind(S),q=u(S,I,A,O),V=c(S,I,q.root,q.align,P==="r");P==="r"&&(V=e.mapValues(V,function(W){return-W})),T[p+P]=V})});var N=h(S,T);return g(T,N),y(T,S.graph().align)}function _(S,E,A){return function(T,I,N){var p=T.node(I),P=T.node(N),O=0,q;if(O+=p.width/2,e.has(p,"labelpos"))switch(p.labelpos.toLowerCase()){case"l":q=-p.width/2;break;case"r":q=p.width/2;break}if(q&&(O+=A?q:-q),q=0,O+=(p.dummy?E:S)/2,O+=(P.dummy?E:S)/2,O+=P.width/2,e.has(P,"labelpos"))switch(P.labelpos.toLowerCase()){case"l":q=P.width/2;break;case"r":q=-P.width/2;break}return q&&(O+=A?q:-q),q=0,O}}function x(S,E){return S.node(E).width}return yS}var _S,$8;function ice(){if($8)return _S;$8=1;var e=Mn(),t=vs(),r=nce().positionX;_S=n;function n(s){s=t.asNonCompoundGraph(s),i(s),e.forEach(r(s),function(o,a){s.node(a).x=o})}function i(s){var o=t.buildLayerMatrix(s),a=s.graph().ranksep,u=0;e.forEach(o,function(c){var f=e.max(e.map(c,function(h){return s.node(h).height}));e.forEach(c,function(h){s.node(h).y=u+f/2}),u+=f+a})}return _S}var bS,U8;function sce(){if(U8)return bS;U8=1;var e=Mn(),t=zue(),r=Vue(),n=$ue(),i=vs().normalizeRanks,s=Uue(),o=vs().removeEmptyRanks,a=jue(),u=Hue(),c=Wue(),f=rce(),h=ice(),g=vs(),y=Io().Graph;bS=m;function m(re,ae){var ne=ae&&ae.debugTiming?g.time:g.notime;ne("layout",function(){var te=ne("  buildLayoutGraph",function(){return O(re)});ne("  runLayout",function(){_(te,ne)}),ne("  updateInputGraph",function(){x(re,te)})})}function _(re,ae){ae("    makeSpaceForEdgeLabels",function(){q(re)}),ae("    removeSelfEdges",function(){Q(re)}),ae("    acyclic",function(){t.run(re)}),ae("    nestingGraph.run",function(){a.run(re)}),ae("    rank",function(){n(g.asNonCompoundGraph(re))}),ae("    injectEdgeLabelProxies",function(){V(re)}),ae("    removeEmptyRanks",function(){o(re)}),ae("    nestingGraph.cleanup",function(){a.cleanup(re)}),ae("    normalizeRanks",function(){i(re)}),ae("    assignRankMinMax",function(){W(re)}),ae("    removeEdgeLabelProxies",function(){G(re)}),ae("    normalize.run",function(){r.run(re)}),ae("    parentDummyChains",function(){s(re)}),ae("    addBorderSegments",function(){u(re)}),ae("    order",function(){f(re)}),ae("    insertSelfEdges",function(){de(re)}),ae("    adjustCoordinateSystem",function(){c.adjust(re)}),ae("    position",function(){h(re)}),ae("    positionSelfEdges",function(){ce(re)}),ae("    removeBorderNodes",function(){j(re)}),ae("    normalize.undo",function(){r.undo(re)}),ae("    fixupEdgeLabelCoords",function(){K(re)}),ae("    undoCoordinateSystem",function(){c.undo(re)}),ae("    translateGraph",function(){J(re)}),ae("    assignNodeIntersects",function(){se(re)}),ae("    reversePoints",function(){U(re)}),ae("    acyclic.undo",function(){t.undo(re)})}function x(re,ae){e.forEach(re.nodes(),function(ne){var te=re.node(ne),le=ae.node(ne);te&&(te.x=le.x,te.y=le.y,ae.children(ne).length&&(te.width=le.width,te.height=le.height))}),e.forEach(re.edges(),function(ne){var te=re.edge(ne),le=ae.edge(ne);te.points=le.points,e.has(le,"x")&&(te.x=le.x,te.y=le.y)}),re.graph().width=ae.graph().width,re.graph().height=ae.graph().height}var S=["nodesep","edgesep","ranksep","marginx","marginy"],E={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},A=["acyclicer","ranker","rankdir","align"],T=["width","height"],I={width:0,height:0},N=["minlen","weight","width","height","labeloffset"],p={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},P=["labelpos"];function O(re){var ae=new y({multigraph:!0,compound:!0}),ne=Se(re.graph());return ae.setGraph(e.merge({},E,Te(ne,S),e.pick(ne,A))),e.forEach(re.nodes(),function(te){var le=Se(re.node(te));ae.setNode(te,e.defaults(Te(le,T),I)),ae.setParent(te,re.parent(te))}),e.forEach(re.edges(),function(te){var le=Se(re.edge(te));ae.setEdge(te,e.merge({},p,Te(le,N),e.pick(le,P)))}),ae}function q(re){var ae=re.graph();ae.ranksep/=2,e.forEach(re.edges(),function(ne){var te=re.edge(ne);te.minlen*=2,te.labelpos.toLowerCase()!=="c"&&(ae.rankdir==="TB"||ae.rankdir==="BT"?te.width+=te.labeloffset:te.height+=te.labeloffset)})}function V(re){e.forEach(re.edges(),function(ae){var ne=re.edge(ae);if(ne.width&&ne.height){var te=re.node(ae.v),le=re.node(ae.w),Xe={rank:(le.rank-te.rank)/2+te.rank,e:ae};g.addDummyNode(re,"edge-proxy",Xe,"_ep")}})}function W(re){var ae=0;e.forEach(re.nodes(),function(ne){var te=re.node(ne);te.borderTop&&(te.minRank=re.node(te.borderTop).rank,te.maxRank=re.node(te.borderBottom).rank,ae=e.max(ae,te.maxRank))}),re.graph().maxRank=ae}function G(re){e.forEach(re.nodes(),function(ae){var ne=re.node(ae);ne.dummy==="edge-proxy"&&(re.edge(ne.e).labelRank=ne.rank,re.removeNode(ae))})}function J(re){var ae=Number.POSITIVE_INFINITY,ne=0,te=Number.POSITIVE_INFINITY,le=0,Xe=re.graph(),Ne=Xe.marginx||0,Re=Xe.marginy||0;function nt(Ve){var L=Ve.x,B=Ve.y,H=Ve.width,X=Ve.height;ae=Math.min(ae,L-H/2),ne=Math.max(ne,L+H/2),te=Math.min(te,B-X/2),le=Math.max(le,B+X/2)}e.forEach(re.nodes(),function(Ve){nt(re.node(Ve))}),e.forEach(re.edges(),function(Ve){var L=re.edge(Ve);e.has(L,"x")&&nt(L)}),ae-=Ne,te-=Re,e.forEach(re.nodes(),function(Ve){var L=re.node(Ve);L.x-=ae,L.y-=te}),e.forEach(re.edges(),function(Ve){var L=re.edge(Ve);e.forEach(L.points,function(B){B.x-=ae,B.y-=te}),e.has(L,"x")&&(L.x-=ae),e.has(L,"y")&&(L.y-=te)}),Xe.width=ne-ae+Ne,Xe.height=le-te+Re}function se(re){e.forEach(re.edges(),function(ae){var ne=re.edge(ae),te=re.node(ae.v),le=re.node(ae.w),Xe,Ne;ne.points?(Xe=ne.points[0],Ne=ne.points[ne.points.length-1]):(ne.points=[],Xe=le,Ne=te),ne.points.unshift(g.intersectRect(te,Xe)),ne.points.push(g.intersectRect(le,Ne))})}function K(re){e.forEach(re.edges(),function(ae){var ne=re.edge(ae);if(e.has(ne,"x"))switch((ne.labelpos==="l"||ne.labelpos==="r")&&(ne.width-=ne.labeloffset),ne.labelpos){case"l":ne.x-=ne.width/2+ne.labeloffset;break;case"r":ne.x+=ne.width/2+ne.labeloffset;break}})}function U(re){e.forEach(re.edges(),function(ae){var ne=re.edge(ae);ne.reversed&&ne.points.reverse()})}function j(re){e.forEach(re.nodes(),function(ae){if(re.children(ae).length){var ne=re.node(ae),te=re.node(ne.borderTop),le=re.node(ne.borderBottom),Xe=re.node(e.last(ne.borderLeft)),Ne=re.node(e.last(ne.borderRight));ne.width=Math.abs(Ne.x-Xe.x),ne.height=Math.abs(le.y-te.y),ne.x=Xe.x+ne.width/2,ne.y=te.y+ne.height/2}}),e.forEach(re.nodes(),function(ae){re.node(ae).dummy==="border"&&re.removeNode(ae)})}function Q(re){e.forEach(re.edges(),function(ae){if(ae.v===ae.w){var ne=re.node(ae.v);ne.selfEdges||(ne.selfEdges=[]),ne.selfEdges.push({e:ae,label:re.edge(ae)}),re.removeEdge(ae)}})}function de(re){var ae=g.buildLayerMatrix(re);e.forEach(ae,function(ne){var te=0;e.forEach(ne,function(le,Xe){var Ne=re.node(le);Ne.order=Xe+te,e.forEach(Ne.selfEdges,function(Re){g.addDummyNode(re,"selfedge",{width:Re.label.width,height:Re.label.height,rank:Ne.rank,order:Xe+ ++te,e:Re.e,label:Re.label},"_se")}),delete Ne.selfEdges})})}function ce(re){e.forEach(re.nodes(),function(ae){var ne=re.node(ae);if(ne.dummy==="selfedge"){var te=re.node(ne.e.v),le=te.x+te.width/2,Xe=te.y,Ne=ne.x-le,Re=te.height/2;re.setEdge(ne.e,ne.label),re.removeNode(ae),ne.label.points=[{x:le+2*Ne/3,y:Xe-Re},{x:le+5*Ne/6,y:Xe-Re},{x:le+Ne,y:Xe},{x:le+5*Ne/6,y:Xe+Re},{x:le+2*Ne/3,y:Xe+Re}],ne.label.x=ne.x,ne.label.y=ne.y}})}function Te(re,ae){return e.mapValues(e.pick(re,ae),Number)}function Se(re){var ae={};return e.forEach(re,function(ne,te){ae[te.toLowerCase()]=ne}),ae}return bS}var wS,j8;function oce(){if(j8)return wS;j8=1;var e=Mn(),t=vs(),r=Io().Graph;wS={debugOrdering:n};function n(i){var s=t.buildLayerMatrix(i),o=new r({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(a){o.setNode(a,{label:a}),o.setParent(a,"layer"+i.node(a).rank)}),e.forEach(i.edges(),function(a){o.setEdge(a.v,a.w,{},a.name)}),e.forEach(s,function(a,u){var c="layer"+u;o.setNode(c,{rank:"same"}),e.reduce(a,function(f,h){return o.setEdge(f,h,{style:"invis"}),h})}),o}return wS}var xS,H8;function ace(){return H8||(H8=1,xS="0.8.5"),xS}var SS,W8;function uce(){return W8||(W8=1,SS={graphlib:Io(),layout:sce(),debug:oce(),util:{time:vs().time,notime:vs().notime},version:ace()}),SS}var cce=uce();const lce=Fl(cce);var fce=QV();const hce=Fl(fce),La={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},dce=Object.keys(La).map(e=>La[e]).join(""),ES="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",pce=/\s/g,X8=new RegExp(`^(${ES}\\*)?([${dce}])(/${ES})?([-+]{1,2}${ES})?$`,"g");function oG(e){throw new Error(`Invalid calc() expression: ${e}`)}function vce(e,t){const r=X8.exec(e.replace(pce,""));r||oG(e),X8.lastIndex=0;const[,n,i,s,o]=r,{x:a,y:u,width:c,height:f}=t;let h=0;switch(i){case La.width:{h=c;break}case La.height:{h=f;break}case La.x:{h=a;break}case La.y:{h=u;break}case La.minimum:{h=Math.min(f,c);break}case La.maximum:{h=Math.max(f,c);break}case La.diagonal:{h=Math.sqrt(f*f+c*c);break}}return n&&(h*=parseFloat(n)),s&&(h/=parseFloat(s.slice(1))),o&&(h+=gce(o)),h}function gce(e){if(!e)return 0;const[t]=e;switch(t){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}function Qs(e){return typeof e=="string"&&e.includes("calc")}const aG="calc(",Y8=aG.length;function eo(e,t){let r=e,n=0;do{let i=r.indexOf(aG,n);if(i===-1)return r;let s=i+Y8,o=1;e:do{switch(r[s]){case"(":{o++;break}case")":{if(o--,o===0)break e;break}case void 0:oG(r)}s++}while(!0);let a=r.slice(i+Y8,s);Qs(a)&&(a=eo(a,t));const u=String(vce(a,t));r=r.slice(0,i)+u+r.slice(s+1),n=i+u.length}while(!0)}const{round:mce,floor:yce,PI:uG}=Math,_ce={linear:function(e,t,r){var n=e[1]-e[0],i=t[1]-t[0];return(r-e[0])/n*i+t[0]||0}},Oo=function(e){return e%360+(e<0?360:0)},cc=function(e,t){return t*mce(e/t)},$v=function(e){return 180*e/uG%360},gs=function(e,t){return t=t||!1,e=t?e:e%360,e*uG/180},rE=function(e,t){if(t===void 0)t=e===void 0?1:e,e=0;else if(t<e){const r=e;e=t,t=r}return yce(Math.random()*(t-e+1)+e)},{cos:Qd,sin:AS,atan2:bce}=Math,cG=function(e,t){var r=gs(e.y),n=gs(t.y),i=e.x,s=t.x,o=gs(s-i),a=AS(o)*Qd(n),u=Qd(r)*AS(n)-AS(r)*Qd(n)*Qd(o),c=$v(bce(a,u)),f=["NE","E","SE","S","SW","W","NW","N"],h=c-22.5;return h<0&&(h+=360),h=parseInt(h/45),f[h]},z2=function(e,t){var r=e.x,n=e.y,i=t.x,s=t.y;return(r-=i)*r+(n-=s)*n},lG=function(e,t){return Math.sqrt(z2(e,t))},pr={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:qp,cos:nE,sin:iE,sqrt:K8,min:Z8,max:J8,atan2:wce,round:Q8,pow:xce,PI:ez}=Math,pe=function(e,t){if(!(this instanceof pe))return new pe(e,t);if(typeof e=="string"){var r=e.split(e.indexOf("@")===-1?" ":"@");e=parseFloat(r[0]),t=parseFloat(r[1])}else Object(e)===e&&(t=e.y,e=e.x);this.x=e===void 0?0:e,this.y=t===void 0?0:t};pe.fromPolar=function(e,t,r){r=new pe(r);var n=qp(e*nE(t)),i=qp(e*iE(t)),s=Oo($v(t));return s<90?i=-i:s<180?(n=-n,i=-i):s<270&&(n=-n),new pe(r.x+n,r.y+i)};pe.random=function(e,t,r,n){return new pe(rE(e,t),rE(r,n))};pe.prototype={type:pr.Point,chooseClosest:function(e){var t=e.length;if(t===1)return new pe(e[0]);for(var r=null,n=1/0,i=0;i<t;i++){var s=new pe(e[i]),o=this.squaredDistance(s);o<n&&(r=s,n=o)}return r},adhereToRect:function(e){return e.containsPoint(this)?this:(this.x=Z8(J8(this.x,e.x),e.x+e.width),this.y=Z8(J8(this.y,e.y),e.y+e.height),this)},angleBetween:function(e,t){var r=this.equals(e)||this.equals(t)?NaN:this.theta(t)-this.theta(e);return r<0&&(r+=360),r},bearing:function(e){return cG(this,e)},changeInAngle:function(e,t,r){return this.clone().offset(-e,-t).theta(r)-this.theta(r)},clone:function(){return new pe(this)},cross:function(e,t){return e&&t?(t.x-this.x)*(e.y-this.y)-(t.y-this.y)*(e.x-this.x):NaN},difference:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),new pe(this.x-(e||0),this.y-(t||0))},distance:function(e){return lG(this,e)},dot:function(e){return e?this.x*e.x+this.y*e.y:NaN},equals:function(e){return!!e&&this.x===e.x&&this.y===e.y},lerp:function(e,t){var r=this.x,n=this.y;return new pe((1-t)*r+t*e.x,(1-t)*n+t*e.y)},magnitude:function(){return K8(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(e){return qp(e.x-this.x)+qp(e.y-this.y)},move:function(e,t){var r=gs(new pe(e).theta(this)),n=this.offset(nE(r)*t,-iE(r)*t);return n},normalize:function(e){var t=(e||1)/this.magnitude();return this.scale(t,t)},offset:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x+=e||0,this.y+=t||0,this},reflection:function(e){return new pe(e).move(this,this.distance(e))},rotate:function(e,t){if(t===0)return this;e=e||new pe(0,0),t=gs(Oo(-t));var r=nE(t),n=iE(t),i=r*(this.x-e.x)-n*(this.y-e.y)+e.x,s=n*(this.x-e.x)+r*(this.y-e.y)+e.y;return this.x=i,this.y=s,this},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=xce(10,e);break}return this.x=Q8(this.x*t)/t,this.y=Q8(this.y*t)/t,this},scale:function(e,t,r){return r=r&&new pe(r)||new pe(0,0),this.x=r.x+e*(this.x-r.x),this.y=r.y+t*(this.y-r.y),this},snapToGrid:function(e,t){return this.x=cc(this.x,e),this.y=cc(this.y,t||e),this},squaredDistance:function(e){return z2(this,e)},theta:function(e){e=new pe(e);var t=-(e.y-this.y),r=e.x-this.x,n=wce(t,r);return n<0&&(n=2*ez+n),180*n/ez},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(e){e=e&&new pe(e)||new pe(0,0);var t=this.x,r=this.y;return this.x=K8((t-e.x)*(t-e.x)+(r-e.y)*(r-e.y)),this.y=gs(e.theta(new pe(t,r))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x=e||0,this.y=t||0,this},vectorAngle:function(e){var t=new pe(0,0);return t.angleBetween(this,e)}};pe.prototype.translate=pe.prototype.offset;const Dp=pe,{max:TS,min:PS}=Math,wt=function(e,t){if(!(this instanceof wt))return new wt(e,t);if(e instanceof wt)return new wt(e.start,e.end);this.start=new pe(e),this.end=new pe(t)};wt.prototype={type:pr.Line,angle:function(){var e=new pe(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)},bbox:function(){var e=PS(this.start.x,this.end.x),t=PS(this.start.y,this.end.y),r=TS(this.start.x,this.end.x),n=TS(this.start.y,this.end.y);return new mt(e,t,r-e,n-t)},bearing:function(){return cG(this.start,this.end)},clone:function(){return new wt(this.start,this.end)},closestPoint:function(e){return this.pointAt(this.closestPointNormalizedLength(e))},closestPointLength:function(e){return this.closestPointNormalizedLength(e)*this.length()},closestPointNormalizedLength:function(e){var t=this.vector().dot(new wt(this.start,e).vector()),r=PS(1,TS(0,t/this.squaredLength()));return r!==r?0:r},closestPointTangent:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))},containsPoint:function(e){var t=this.start,r=this.end;if(t.cross(e,r)!==0)return!1;var n=this.length();return!(new wt(t,e).length()>n||new wt(e,r).length()>n)},divideAt:function(e){var t=this.pointAt(e);return[new wt(this.start,t),new wt(t,this.end)]},divideAtLength:function(e){var t=this.pointAtLength(e);return[new wt(this.start,t),new wt(t,this.end)]},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y},intersect:function(e,t){if(e&&e.intersectionWithLine){var r=e.intersectionWithLine(this,t);return r&&e instanceof wt&&(r=r[0]),r}return null},intersectionWithLine:function(e){var t=new pe(this.end.x-this.start.x,this.end.y-this.start.y),r=new pe(e.end.x-e.start.x,e.end.y-e.start.y),n=t.x*r.y-t.y*r.x,i=new pe(e.start.x-this.start.x,e.start.y-this.start.y),s=i.x*r.y-i.y*r.x,o=i.x*t.y-i.y*t.x;if(n===0||s*n<0||o*n<0)return null;if(n>0){if(s>n||o>n)return null}else if(s<n||o<n)return null;return[new pe(this.start.x+s*t.x/n,this.start.y+s*t.y/n)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return lG(this.start,this.end)},midpoint:function(){return new pe((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(e){const t=this.clone();if(!this.isDifferentiable())return t;const{start:r,end:n}=t,i=r.clone().rotate(n,270),s=n.clone().rotate(r,90);return r.move(s,e),n.move(i,e),t},pointAt:function(e){var t=this.start,r=this.end;return e<=0?t.clone():e>=1?r.clone():t.lerp(r,e)},pointAtLength:function(e){var t=this.start,r=this.end,n=!0;e<0&&(n=!1,e=-e);var i=this.length();return e>=i?n?r.clone():t.clone():this.pointAt((n?e:i-e)/i)},pointOffset:function(e){e=new pe(e);var t=this.start,r=this.end,n=(r.x-t.x)*(e.y-t.y)-(r.y-t.y)*(e.x-t.x);return n/this.length()},rotate:function(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this},round:function(e){return this.start.round(e),this.end.round(e),this},scale:function(e,t,r){return this.start.scale(e,t,r),this.end.scale(e,t,r),this},setLength:function(e){var t=this.length();if(!t)return this;var r=e/t;return this.scale(r,r,this.start)},squaredLength:function(){return z2(this.start,this.end)},tangentAt:function(e){if(!this.isDifferentiable())return null;var t=this.start,r=this.end,n=this.pointAt(e),i=new wt(t,r);return i.translate(n.x-t.x,n.y-t.y),i},tangentAtLength:function(e){if(!this.isDifferentiable())return null;var t=this.start,r=this.end,n=this.pointAtLength(e),i=new wt(t,r);return i.translate(n.x-t.x,n.y-t.y),i},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(e,t){return this.start.translate(e,t),this.end.translate(e,t),this},vector:function(){return new pe(this.end.x-this.start.x,this.end.y-this.start.y)}};wt.prototype.intersection=wt.prototype.intersect;const sc=wt,{sqrt:tz,round:ep,pow:Sce}=Math,Yi=function(e,t,r){if(!(this instanceof Yi))return new Yi(e,t,r);if(e instanceof Yi)return new Yi(new pe(e.x,e.y),e.a,e.b);e=new pe(e),this.x=e.x,this.y=e.y,this.a=t,this.b=r};Yi.fromRect=function(e){return e=new mt(e),new Yi(e.center(),e.width/2,e.height/2)};Yi.prototype={type:pr.Ellipse,bbox:function(){return new mt(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new pe(this.x,this.y)},clone:function(){return new Yi(this)},containsPoint:function(e){return this.normalizedDistance(e)<=1},equals:function(e){return!!e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b},inflate:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.a+=2*e,this.b+=2*t,this},intersectionWithLine:function(e){var t=[],r=e.start,n=e.end,i=this.a,s=this.b,o=e.vector(),a=r.difference(new pe(this)),u=new pe(o.x/(i*i),o.y/(s*s)),c=new pe(a.x/(i*i),a.y/(s*s)),f=o.dot(u),h=o.dot(c),g=a.dot(c)-1,y=h*h-f*g;if(y<0)return null;if(y>0){var m=tz(y),_=(-h-m)/f,x=(-h+m)/f;if((_<0||1<_)&&(x<0||1<x))return null;0<=_&&_<=1&&t.push(r.lerp(n,_)),0<=x&&x<=1&&t.push(r.lerp(n,x))}else{var S=-h/f;if(0<=S&&S<=1)t.push(r.lerp(n,S));else return null}return t},intersectionWithLineFromCenterToPoint:function(e,t){e=new pe(e),t&&e.rotate(new pe(this.x,this.y),t);var r=e.x-this.x,n=e.y-this.y,i;if(r===0)return i=this.bbox().pointNearestToPoint(e),t?i.rotate(new pe(this.x,this.y),-t):i;var s=n/r,o=s*s,a=this.a*this.a,u=this.b*this.b,c=tz(1/(1/a+o/u));c=r<0?-c:c;var f=s*c;return i=new pe(this.x+c,this.y+f),t?i.rotate(new pe(this.x,this.y),-t):i},normalizedDistance:function(e){var t=e.x,r=e.y,n=this.a,i=this.b,s=this.x,o=this.y;return(t-s)*(t-s)/(n*n)+(r-o)*(r-o)/(i*i)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=Sce(10,e);break}return this.x=ep(this.x*t)/t,this.y=ep(this.y*t)/t,this.a=ep(this.a*t)/t,this.b=ep(this.b*t)/t,this},tangentTheta:function(e){var t=30,r=e.x,n=e.y,i=this.a,s=this.b,o=this.bbox().center(),a=o.x,u=o.y,c=r>o.x+i/2,f=r<o.x-i/2,h,g;return c||f?(h=r>o.x?n-t:n+t,g=i*i/(r-a)-i*i*(n-u)*(h-u)/(s*s*(r-a))+a):(g=n>o.y?r+t:r-t,h=s*s/(n-u)-s*s*(r-a)*(g-a)/(i*i*(n-u))+u),new pe(g,h).theta(e)},toString:function(){return new pe(this.x,this.y).toString()+" "+this.a+" "+this.b}};const Ece=Yi,{abs:rz,cos:Ace,sin:Tce,min:Of,max:nz,round:tp,pow:Pce}=Math,mt=function(e,t,r,n){if(!(this instanceof mt))return new mt(e,t,r,n);Object(e)===e&&(t=e.y,r=e.width,n=e.height,e=e.x),this.x=e===void 0?0:e,this.y=t===void 0?0:t,this.width=r===void 0?0:r,this.height=n===void 0?0:n};mt.fromEllipse=function(e){return e=new Yi(e),new mt(e.x-e.a,e.y-e.b,2*e.a,2*e.b)};mt.fromPointUnion=function(...e){if(e.length===0)return null;const t=new pe;let r,n,i,s;r=n=1/0,i=s=-1/0;for(let o=0;o<e.length;o++){t.update(e[o]);const a=t.x,u=t.y;a<r&&(r=a),a>i&&(i=a),u<n&&(n=u),u>s&&(s=u)}return new mt(r,n,i-r,s-n)};mt.fromRectUnion=function(...e){if(e.length===0)return null;const t=new mt;let r,n,i,s;r=n=1/0,i=s=-1/0;for(let o=0;o<e.length;o++){t.update(e[o]);const a=t.x,u=t.y,c=a+t.width,f=u+t.height;a<r&&(r=a),c>i&&(i=c),u<n&&(n=u),f>s&&(s=f)}return new mt(r,n,i-r,s-n)};mt.prototype={type:pr.Rect,bbox:function(e){return this.clone().rotateAroundCenter(e)},rotateAroundCenter:function(e){if(!e)return this;const{width:t,height:r}=this,n=gs(e),i=rz(Tce(n)),s=rz(Ace(n)),o=t*s+r*i,a=t*i+r*s;return this.x+=(t-o)/2,this.y+=(r-a)/2,this.width=o,this.height=a,this},bottomLeft:function(){return new pe(this.x,this.y+this.height)},bottomLine:function(){return new wt(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new pe(this.x+this.width/2,this.y+this.height)},center:function(){return new pe(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new mt(this)},containsPoint:function(e){return e instanceof pe||(e=new pe(e)),e.x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},containsRect:function(e){var t=new mt(this).normalize(),r=new mt(e).normalize(),n=t.width,i=t.height,s=r.width,o=r.height;if(!n||!i||!s||!o)return!1;var a=t.x,u=t.y,c=r.x,f=r.y;return s+=c,n+=a,o+=f,i+=u,a<=c&&s<=n&&u<=f&&o<=i},corner:function(){return new pe(this.x+this.width,this.y+this.height)},equals:function(e){var t=new mt(this).normalize(),r=new mt(e).normalize();return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height},inflate:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},intersect:function(e){var t=this.origin(),r=this.corner(),n=e.origin(),i=e.corner();if(i.x<=t.x||i.y<=t.y||n.x>=r.x||n.y>=r.y)return null;var s=nz(t.x,n.x),o=nz(t.y,n.y);return new mt(s,o,Of(r.x,i.x)-s,Of(r.y,i.y)-o)},intersectionWithLine:function(e){var t=this,r=[t.topLine(),t.rightLine(),t.bottomLine(),t.leftLine()],n=[],i=[],s,o,a=r.length;for(o=0;o<a;o++)s=e.intersect(r[o]),s!==null&&i.indexOf(s.toString())<0&&(n.push(s),i.push(s.toString()));return n.length>0?n:null},intersectionWithLineFromCenterToPoint:function(e,t){e=new pe(e);var r=new pe(this.x+this.width/2,this.y+this.height/2),n;t&&e.rotate(r,t);for(var i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],s=new wt(r,e),o=i.length-1;o>=0;--o){var a=i[o].intersection(s);if(a!==null){n=a;break}}return n&&t&&n.rotate(r,-t),n},leftLine:function(){return new wt(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new pe(this.x,this.y+this.height/2)},maxRectScaleToFit:function(e,t){e=new mt(e),t||(t=e.center());var r,n,i,s,o,a,u,c,f=t.x,h=t.y;r=n=i=s=o=a=u=c=1/0;var g=e.topLeft();g.x<f&&(r=(this.x-f)/(g.x-f)),g.y<h&&(o=(this.y-h)/(g.y-h));var y=e.bottomRight();y.x>f&&(n=(this.x+this.width-f)/(y.x-f)),y.y>h&&(a=(this.y+this.height-h)/(y.y-h));var m=e.topRight();m.x>f&&(i=(this.x+this.width-f)/(m.x-f)),m.y<h&&(u=(this.y-h)/(m.y-h));var _=e.bottomLeft();return _.x<f&&(s=(this.x-f)/(_.x-f)),_.y>h&&(c=(this.y+this.height-h)/(_.y-h)),{sx:Of(r,n,i,s),sy:Of(o,a,u,c)}},maxRectUniformScaleToFit:function(e,t){var r=this.maxRectScaleToFit(e,t);return Of(r.sx,r.sy)},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},normalize:function(){var e=this.x,t=this.y,r=this.width,n=this.height;return this.width<0&&(e=this.x+this.width,r=-this.width),this.height<0&&(t=this.y+this.height,n=-this.height),this.x=e,this.y=t,this.width=r,this.height=n,this},offset:function(e,t){return pe.prototype.offset.call(this,e,t)},origin:function(){return new pe(this.x,this.y)},pointNearestToPoint:function(e){if(e=new pe(e),this.containsPoint(e)){var t=this.sideNearestToPoint(e);switch(t){case"right":return new pe(this.x+this.width,e.y);case"left":return new pe(this.x,e.y);case"bottom":return new pe(e.x,this.y+this.height);case"top":return new pe(e.x,this.y)}}return e.adhereToRect(this)},rightLine:function(){return new wt(this.topRight(),this.bottomRight())},rightMiddle:function(){return new pe(this.x+this.width,this.y+this.height/2)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=Pce(10,e);break}return this.x=tp(this.x*t)/t,this.y=tp(this.y*t)/t,this.width=tp(this.width*t)/t,this.height=tp(this.height*t)/t,this},scale:function(e,t,r){return r=this.origin().scale(e,t,r),this.x=r.x,this.y=r.y,this.width*=e,this.height*=t,this},sideNearestToPoint:function(e){e=new pe(e);var t=e.x-this.x,r=this.x+this.width-e.x,n=e.y-this.y,i=this.y+this.height-e.y,s=t,o="left";return r<s&&(s=r,o="right"),n<s&&(s=n,o="top"),i<s&&(o="bottom"),o},snapToGrid:function(e,t){var r=this.origin().snapToGrid(e,t),n=this.corner().snapToGrid(e,t);return this.x=r.x,this.y=r.y,this.width=n.x-r.x,this.height=n.y-r.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new wt(this.topLeft(),this.topRight())},topMiddle:function(){return new pe(this.x+this.width/2,this.y)},topRight:function(){return new pe(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(e){return mt.fromRectUnion(this,e)},update:function(e,t,r,n){return Object(e)===e&&(t=e.y,r=e.width,n=e.height,e=e.x),this.x=e||0,this.y=t||0,this.width=r||0,this.height=n||0,this}};mt.prototype.bottomRight=mt.prototype.corner;mt.prototype.topLeft=mt.prototype.origin;mt.prototype.translate=mt.prototype.offset;const Cce=mt;function fG(e){const t=e.trim();if(t==="")return[];const r=[],n=t.split(/\b\s*,\s*|,\s*|\s+/),i=n.length;for(let s=0;s<i;s+=2)r.push({x:+n[s],y:+n[s+1]});return r}function hG(e){const t=e.length;if(t===0)return[];const r=[];for(let n=0;n<t;n++){const i=e[n].clone();r.push(i)}return r}function dG(e){const{abs:t}=Math;var r,n,i=e.length;if(i===0)return[];var s;for(r=0;r<i;r++)(s===void 0||e[r].y<s.y||e[r].y===s.y&&e[r].x>s.x)&&(s=e[r]);var o=[];for(r=0;r<i;r++){var a=s.theta(e[r]);a===0&&(a=360);var u=[e[r],r,a];o.push(u)}if(o.sort(function(G,J){var se=G[2]-J[2];return se===0&&(se=J[1]-G[1]),se}),o.length>2){var c=o[o.length-1];o.unshift(c)}for(var f={},h=[],g,y,m,_,x,S;o.length!==0;)if(g=o.pop(),y=g[0],!f.hasOwnProperty(g[0]+"@@"+g[1]))for(var E=!1;!E;)if(h.length<2)h.push(g),E=!0;else{m=h.pop(),_=m[0],x=h.pop(),S=x[0];var A=S.cross(_,y);if(A<0)h.push(x),h.push(m),h.push(g),E=!0;else if(A===0){var T=1e-10,I=_.angleBetween(S,y);t(I-180)<T||_.equals(y)||S.equals(_)?(f[m[0]+"@@"+m[1]]=_,h.push(x)):t((I+1)%360-1)<T&&(h.push(x),o.push(m))}else f[m[0]+"@@"+m[1]]=_,h.push(x)}h.length>2&&h.pop();var N,p=-1;for(n=h.length,r=0;r<n;r++){var P=h[r][1];(N===void 0||P<N)&&(N=P,p=r)}var O=[];if(p>0){var q=h.slice(p),V=h.slice(0,p);O=q.concat(V)}else O=h;var W=[];for(n=O.length,r=0;r<n;r++)W.push(O[r][0]);return W}const pn=function(e){if(!(this instanceof pn))return new pn(e);if(typeof e=="string")return new pn.parse(e);this.points=Array.isArray(e)?e.map(pe):[]};pn.parse=function(e){return new pn(fG(e))};pn.fromRect=function(e){return new pn([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft(),e.topLeft()])};pn.prototype={type:pr.Polyline,bbox:function(){var e=1/0,t=-1/0,r=1/0,n=-1/0,i=this.points,s=i.length;if(s===0)return null;for(var o=0;o<s;o++){var a=i[o],u=a.x,c=a.y;u<e&&(e=u),u>t&&(t=u),c<r&&(r=c),c>n&&(n=c)}return new mt(e,r,t-e,n-r)},clone:function(){return new pn(hG(this.points))},closestPoint:function(e){var t=this.closestPointLength(e);return this.pointAtLength(t)},closestPointLength:function(e){var t=this.lengthPoints(),r=t.length;if(r===0||r===1)return 0;for(var n,i=1/0,s=0,o=r-1,a=0;a<o;a++){var u=new wt(t[a],t[a+1]),c=u.length(),f=u.closestPointNormalizedLength(e),h=u.pointAt(f),g=h.squaredDistance(e);g<i&&(i=g,n=s+f*c),s+=c}return n},closestPointNormalizedLength:function(e){var t=this.closestPointLength(e);if(t===0)return 0;var r=this.length();return r===0?0:t/r},closestPointTangent:function(e){var t=this.closestPointLength(e);return this.tangentAtLength(t)},containsPoint:function(e){var t=this.points,r=t.length;if(r===0)return!1;for(var n=e.x,i=e.y,s=r-1,o=0,a=0,u=new wt,c=new wt,f=new pe;o<r;o++){var h=t[s],g=t[o];if(e.equals(h)||(u.start=h,u.end=g,u.containsPoint(e)))return!0;if(i<=h.y&&i>g.y||i>h.y&&i<=g.y){var y=h.x-n>g.x-n?h.x-n:g.x-n;y>=0&&(f.x=n+y,f.y=i,c.start=e,c.end=f,u.intersect(c)&&a++)}s=o}return a%2===1},close:function(){const{start:e,end:t,points:r}=this;return e&&t&&!e.equals(t)&&r.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new pn(dG(this.points))},equals:function(e){if(!e)return!1;var t=this.points,r=e.points,n=t.length;if(r.length!==n)return!1;for(var i=0;i<n;i++){var s=t[i],o=e.points[i];if(!s.equals(o))return!1}return!0},intersectionWithLine:function(e){for(var t=new wt(e),r=[],n=this.lengthPoints(),i=new wt,s=0,o=n.length-1;s<o;s++){i.start=n[s],i.end=n[s+1];var a=t.intersectionWithLine(i);a&&r.push(a[0])}return r.length>0?r:null},isDifferentiable:function(){var e=this.points,t=e.length;if(t===0)return!1;for(var r=new wt,n=t-1,i=0;i<n;i++)if(r.start=e[i],r.end=e[i+1],r.isDifferentiable())return!0;return!1},length:function(){var e=this.lengthPoints(),t=e.length;if(t===0)return 0;for(var r=0,n=t-1,i=0;i<n;i++)r+=e[i].distance(e[i+1]);return r},pointAt:function(e){var t=this.lengthPoints(),r=t.length;if(r===0)return null;if(r===1||e<=0)return t[0].clone();if(e>=1)return t[r-1].clone();var n=this.length(),i=n*e;return this.pointAtLength(i)},pointAtLength:function(e){var t=this.lengthPoints(),r=t.length;if(r===0)return null;if(r===1)return t[0].clone();var n=!0;e<0&&(n=!1,e=-e);for(var i=0,s=r-1,o=0;o<s;o++){var a=n?o:s-1-o,u=t[a],c=t[a+1],f=new wt(u,c),h=u.distance(c);if(e<=i+h)return f.pointAtLength((n?1:-1)*(e-i));i+=h}var g=n?t[r-1]:t[0];return g.clone()},round:function(e){for(var t=this.points,r=t.length,n=0;n<r;n++)t[n].round(e);return this},scale:function(e,t,r){for(var n=this.points,i=n.length,s=0;s<i;s++)n[s].scale(e,t,r);return this},simplify:function(e={}){const t=this.points;if(t.length<3)return this;const r=e.threshold||1e-10;let n=0;for(;t[n+2];){const i=n,s=n+1,o=n+2,a=t[i],u=t[s],c=t[o];new wt(a,c).closestPoint(u).distance(u)<=r?t.splice(s,1):n+=1}return this},tangentAt:function(e){var t=this.lengthPoints(),r=t.length;if(r===0||r===1)return null;e<0&&(e=0),e>1&&(e=1);var n=this.length(),i=n*e;return this.tangentAtLength(i)},tangentAtLength:function(e){var t=this.lengthPoints(),r=t.length;if(r===0||r===1)return null;var n=!0;e<0&&(n=!1,e=-e);for(var i,s=0,o=r-1,a=0;a<o;a++){var u=n?a:o-1-a,c=t[u],f=t[u+1],h=new wt(c,f),g=c.distance(f);if(h.isDifferentiable()){if(e<=s+g)return h.tangentAtLength((n?1:-1)*(e-s));i=h}s+=g}if(i){var y=n?1:0;return i.tangentAt(y)}return null},toString:function(){return this.points+""},translate:function(e,t){for(var r=this.points,n=r.length,i=0;i<n;i++)r[i].translate(e,t);return this},serialize:function(){var e=this.points,t=e.length;if(t===0)return"";for(var r="",n=0;n<t;n++){var i=e[n];r+=i.x+","+i.y+" "}return r.trim()}};Object.defineProperty(pn.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.points,t=e.length;return t===0?null:this.points[0]}});Object.defineProperty(pn.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.points,t=e.length;return t===0?null:this.points[t-1]}});const{abs:rp,sqrt:Rce,min:iz,max:sz,pow:CS}=Math,Zr=function(e,t,r,n){if(!(this instanceof Zr))return new Zr(e,t,r,n);if(e instanceof Zr)return new Zr(e.start,e.controlPoint1,e.controlPoint2,e.end);this.start=new pe(e),this.controlPoint1=new pe(t),this.controlPoint2=new pe(r),this.end=new pe(n)};Zr.throughPoints=function(){function e(r){var n=[],i=[],s=r.length-1,o;if(s==1)return n[0]=new pe((2*r[0].x+r[1].x)/3,(2*r[0].y+r[1].y)/3),i[0]=new pe(2*n[0].x-r[0].x,2*n[0].y-r[0].y),[n,i];var a=[];for(o=1;o<s-1;o++)a[o]=4*r[o].x+2*r[o+1].x;a[0]=r[0].x+2*r[1].x,a[s-1]=(8*r[s-1].x+r[s].x)/2;var u=t(a);for(o=1;o<s-1;++o)a[o]=4*r[o].y+2*r[o+1].y;a[0]=r[0].y+2*r[1].y,a[s-1]=(8*r[s-1].y+r[s].y)/2;var c=t(a);for(o=0;o<s;o++)n.push(new pe(u[o],c[o])),o<s-1?i.push(new pe(2*r[o+1].x-u[o+1],2*r[o+1].y-c[o+1])):i.push(new pe((r[s].x+u[s-1])/2,(r[s].y+c[s-1])/2));return[n,i]}function t(r){var n=r.length,i=[],s=[],o=2;i[0]=r[0]/o;for(var a=1;a<n;a++)s[a]=1/o,o=(a<n-1?4:3.5)-s[a],i[a]=(r[a]-i[a-1])/o;for(a=1;a<n;a++)i[n-a-1]-=s[n-a]*i[n-a];return i}return function(r){if(!r||Array.isArray(r)&&r.length<2)throw new Error("At least 2 points are required");for(var n=e(r),i=[],s=n[0].length,o=0;o<s;o++){var a=new pe(n[0][o].x,n[0][o].y),u=new pe(n[1][o].x,n[1][o].y);i.push(new Zr(r[o],a,u,r[o+1]))}return i}}();Zr.prototype={type:pr.Curve,bbox:function(){for(var e=this.start,t=this.controlPoint1,r=this.controlPoint2,n=this.end,i=e.x,s=e.y,o=t.x,a=t.y,u=r.x,c=r.y,f=n.x,h=n.y,g=new Array,y=new Array,m=[new Array,new Array],_,x,S,E,A,T,I,N,p=0;p<2;++p){if(p===0?(x=6*i-12*o+6*u,_=-3*i+9*o-9*u+3*f,S=3*o-3*i):(x=6*s-12*a+6*c,_=-3*s+9*a-9*c+3*h,S=3*a-3*s),rp(_)<1e-12){if(rp(x)<1e-12)continue;E=-S/x,0<E&&E<1&&y.push(E);continue}I=x*x-4*S*_,N=Rce(I),!(I<0)&&(A=(-x+N)/(2*_),0<A&&A<1&&y.push(A),T=(-x-N)/(2*_),0<T&&T<1&&y.push(T))}for(var P=y.length,O=P,q,V,W;P--;)E=y[P],q=1-E,V=q*q*q*i+3*q*q*E*o+3*q*E*E*u+E*E*E*f,m[0][P]=V,W=q*q*q*s+3*q*q*E*a+3*q*E*E*c+E*E*E*h,m[1][P]=W,g[P]={X:V,Y:W};y[O]=0,y[O+1]=1,g[O]={X:i,Y:s},g[O+1]={X:f,Y:h},m[0][O]=i,m[1][O]=s,m[0][O+1]=f,m[1][O+1]=h,y.length=O+2,m[0].length=O+2,m[1].length=O+2,g.length=O+2;var G=iz.apply(null,m[0]),J=iz.apply(null,m[1]),se=sz.apply(null,m[0]),K=sz.apply(null,m[1]);return new mt(G,J,se-G,K-J)},clone:function(){return new Zr(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(e,t){return this.pointAtT(this.closestPointT(e,t))},closestPointLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i={precision:r,subdivisions:n};return this.lengthAtT(this.closestPointT(e,i),i)},closestPointNormalizedLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i={precision:r,subdivisions:n},s=this.closestPointLength(e,i);if(!s)return 0;var o=this.length(i);return o===0?0:s/o},closestPointT:function(e,t){t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i,s,o,a,u,c,f,h=n.length,g=h?1/h:0,y=0;y<h;y++){var m=n[y],_=m.start.distance(e),x=m.end.distance(e),S=_+x;(!f||S<f)&&(i=m,s=y*g,o=(y+1)*g,a=_,u=x,c=m.start.distance(m.end),f=S)}for(var E=CS(10,-r);;){var A=a?rp(a-u)/a:0,T=u?rp(a-u)/u:0,I=A<E||T<E,N=a?a<c*E:!0,p=u?u<c*E:!0,P=N||p;if(I||P)return a<=u?s:o;var O=i.divide(.5);g/=2;var q=O[0].start.distance(e),V=O[0].end.distance(e),W=q+V,G=O[1].start.distance(e),J=O[1].end.distance(e),se=G+J;W<=se?(i=O[0],o-=g,a=q,u=V):(i=O[1],s+=g,a=G,u=J)}},closestPointTangent:function(e,t){return this.tangentAtT(this.closestPointT(e,t))},containsPoint:function(e,t){var r=this.toPolyline(t);return r.containsPoint(e)},divideAt:function(e,t){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var r=this.tAt(e,t);return this.divideAtT(r)},divideAtLength:function(e,t){var r=this.tAtLength(e,t);return this.divideAtT(r)},divideAtT:function(e){var t=this.start,r=this.controlPoint1,n=this.controlPoint2,i=this.end;if(e<=0)return[new Zr(t,t,t,t),new Zr(t,r,n,i)];if(e>=1)return[new Zr(t,r,n,i),new Zr(i,i,i,i)];var s=this.getSkeletonPoints(e),o=s.startControlPoint1,a=s.startControlPoint2,u=s.divider,c=s.dividerControlPoint1,f=s.dividerControlPoint2;return[new Zr(t,o,a,u),new Zr(u,c,f,i)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.controlPoint1.x===e.controlPoint1.x&&this.controlPoint1.y===e.controlPoint1.y&&this.controlPoint2.x===e.controlPoint2.x&&this.controlPoint2.y===e.controlPoint2.y&&this.end.x===e.end.x&&this.end.y===e.end.y},getSkeletonPoints:function(e){var t=this.start,r=this.controlPoint1,n=this.controlPoint2,i=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:n.clone()};if(e>=1)return{startControlPoint1:r.clone(),startControlPoint2:n.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var s=new wt(t,r).pointAt(e),o=new wt(r,n).pointAt(e),a=new wt(n,i).pointAt(e),u=new wt(s,o).pointAt(e),c=new wt(o,a).pointAt(e),f=new wt(u,c).pointAt(e),h={startControlPoint1:s,startControlPoint2:u,divider:f,dividerControlPoint1:c,dividerControlPoint2:a};return h},getSubdivisions:function(e){e=e||{};var t=e.precision===void 0?this.PRECISION:e.precision,r=this.start,n=this.controlPoint1,i=this.controlPoint2,s=this.end,o=[new Zr(r,n,i,s)];if(t===0)return o;var a=!this.isDifferentiable();if(a)return o;var u=this.endpointDistance(),c=CS(10,-t),f=2,h=n.cross(r,s)===0&&i.cross(r,s)===0;h&&(f=2*t);for(var g=0;;){g+=1;for(var y=[],m=o.length,_=0;_<m;_++){var x=o[_],S=x.divide(.5);y.push(S[0],S[1])}for(var E=0,A=y.length,T=0;T<A;T++){var I=y[T];E+=I.endpointDistance()}if(g>=f){var N=E!==0?(E-u)/E:0;if(N<c)return y}o=y,u=E}},isDifferentiable:function(){var e=this.start,t=this.controlPoint1,r=this.controlPoint2,n=this.end;return!(e.equals(t)&&t.equals(r)&&r.equals(n))},length:function(e){e=e||{};for(var t=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:t}):e.subdivisions,n=0,i=r.length,s=0;s<i;s++){var o=r[s];n+=o.endpointDistance()}return n},lengthAtT:function(e,t){if(e<=0)return 0;t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=this.divide(e)[0],i=n.length({precision:r});return i},pointAt:function(e,t){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var r=this.tAt(e,t);return this.pointAtT(r)},pointAtLength:function(e,t){var r=this.tAtLength(e,t);return this.pointAtT(r)},pointAtT:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider},PRECISION:3,round:function(e){return this.start.round(e),this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,r){return this.start.scale(e,t,r),this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this},tangentAt:function(e,t){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var r=this.tAt(e,t);return this.tangentAtT(r)},tangentAtLength:function(e,t){if(!this.isDifferentiable())return null;var r=this.tAtLength(e,t);return this.tangentAtT(r)},tangentAtT:function(e){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var t=this.getSkeletonPoints(e),r=t.startControlPoint2,n=t.dividerControlPoint1,i=t.divider,s=new wt(r,n);return s.translate(i.x-r.x,i.y-r.y),s},tAt:function(e,t){if(e<=0)return 0;if(e>=1)return 1;t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i={precision:r,subdivisions:n},s=this.length(i),o=s*e;return this.tAtLength(o,i)},tAtLength:function(e,t){var r=!0;e<0&&(r=!1,e=-e),t=t||{};for(var n=t.precision===void 0?this.PRECISION:t.precision,i=t.subdivisions===void 0?this.getSubdivisions({precision:n}):t.subdivisions,s={precision:n,subdivisions:i},o,a,u,c,f,h=0,g=i.length,y=1/g,m=0;m<g;m++){var _=r?m:g-1-m,x=i[m],S=x.endpointDistance();if(e<=h+S){o=x,a=_*y,u=(_+1)*y,c=r?e-h:S+h-e,f=r?S+h-e:e-h;break}h+=S}if(!o)return r?1:0;for(var E=this.length(s),A=CS(10,-n);;){var T;if(T=E!==0?c/E:0,T<A)return a;if(T=E!==0?f/E:0,T<A)return u;var I,N,p=o.divide(.5);y/=2;var P=p[0].endpointDistance(),O=p[1].endpointDistance();c<=P?(o=p[0],u-=y,I=c,N=P-I):(o=p[1],a+=y,I=c-P,N=O-I),c=I,f=N}},toPoints:function(e){e=e||{};for(var t=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:t}):e.subdivisions,n=[r[0].start.clone()],i=r.length,s=0;s<i;s++){var o=r[s];n.push(o.end.clone())}return n},toPolyline:function(e){return new pn(this.toPoints(e))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}};Zr.prototype.divide=Zr.prototype.divideAtT;function qh(e){var t,r,n=[];for(r=arguments.length,t=1;t<r;t++)n.push(arguments[t]);if(!e)throw new Error("Missing a parent object.");var i=Object.create(e);for(r=n.length,t=0;t<r;t++){var s=n[t],o,a;for(a in s)s.hasOwnProperty(a)&&(delete i[a],o=Object.getOwnPropertyDescriptor(s,a),Object.defineProperty(i,a,o))}return i}const Nt=function(e){if(!(this instanceof Nt))return new Nt(e);if(typeof e=="string")return new Nt.parse(e);this.segments=[];var t,r;if(e)if(Array.isArray(e)&&e.length!==0)if(e=e.reduce(function(a,u){return a.concat(u)},[]),r=e.length,e[0].isSegment)for(t=0;t<r;t++){var n=e[t];this.appendSegment(n)}else{var i=null;for(t=0;t<r;t++){var s=e[t];if(!(s instanceof wt||s instanceof Zr))throw new Error("Cannot construct a path segment from the provided object.");t===0&&this.appendSegment(Nt.createSegment("M",s.start)),i&&!i.end.equals(s.start)&&this.appendSegment(Nt.createSegment("M",s.start)),s instanceof wt?this.appendSegment(Nt.createSegment("L",s.end)):s instanceof Zr&&this.appendSegment(Nt.createSegment("C",s.controlPoint1,s.controlPoint2,s.end)),i=s}}else if(e.isSegment)this.appendSegment(e);else if(e instanceof wt)this.appendSegment(Nt.createSegment("M",e.start)),this.appendSegment(Nt.createSegment("L",e.end));else if(e instanceof Zr)this.appendSegment(Nt.createSegment("M",e.start)),this.appendSegment(Nt.createSegment("C",e.controlPoint1,e.controlPoint2,e.end));else if(e instanceof pn){if(!(e.points&&e.points.length!==0))return;for(r=e.points.length,t=0;t<r;t++){var o=e.points[t];t===0?this.appendSegment(Nt.createSegment("M",o)):this.appendSegment(Nt.createSegment("L",o))}}else throw new Error("Cannot construct a path from the provided object.")};Nt.parse=function(e){if(!e)return new Nt;for(var t=new Nt,r=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,n=e.match(r),i=n.length,s=0;s<i;s++){var o=n[s],a=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,u=o.match(a),c=Nt.createSegment.apply(this,u);t.appendSegment(c)}return t};Nt.createSegment=function(e){if(!e)throw new Error("Type must be provided.");var t=Nt.segmentTypes[e];if(!t)throw new Error(e+" is not a recognized path segment type.");for(var r=[],n=arguments.length,i=1;i<n;i++)r.push(arguments[i]);return la(t,r)};Nt.prototype={type:pr.Path,appendSegment:function(e){var t=this.segments,r=t.length,n,i=r!==0?t[r-1]:null,s=null;if(Array.isArray(e)){if(e=e.reduce(function(c,f){return c.concat(f)},[]),!e[0].isSegment)throw new Error("Segments required.");for(var o=e.length,a=0;a<o;a++){var u=e[a];n=this.prepareSegment(u,i,s),t.push(n),i=n}}else{if(!e||!e.isSegment)throw new Error("Segment required.");n=this.prepareSegment(e,i,s),t.push(n)}},bbox:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r,n=0;n<t;n++){var i=e[n];if(i.isVisible){var s=i.bbox();r=r?r.union(s):s}}if(r)return r;var o=e[t-1];return new mt(o.end.x,o.end.y,0,0)},clone:function(){for(var e=this.segments,t=e.length,r=new Nt,n=0;n<t;n++){var i=e[n].clone();r.appendSegment(i)}return r},closestPoint:function(e,t){var r=this.closestPointT(e,t);return r?this.pointAtT(r):null},closestPointLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,i={precision:r,segmentSubdivisions:n},s=this.closestPointT(e,i);return s?this.lengthAtT(s,i):0},closestPointNormalizedLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,i={precision:r,segmentSubdivisions:n},s=this.closestPointLength(e,i);if(s===0)return 0;var o=this.length(i);return o===0?0:s/o},closestPointT:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;t=t||{};for(var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o,a=1/0,u=0;u<n;u++){var c=r[u],f=s[u];if(c.isVisible){var h=c.closestPointT(e,{precision:i,subdivisions:f}),g=c.pointAtT(h),y=new wt(g,e).squaredLength();y<a&&(o={segmentIndex:u,value:h},a=y)}}return o||{segmentIndex:n-1,value:1}},closestPointTangent:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;t=t||{};for(var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o,a=1/0,u=0;u<n;u++){var c=r[u],f=s[u];if(c.isDifferentiable()){var h=c.closestPointT(e,{precision:i,subdivisions:f}),g=c.pointAtT(h),y=new wt(g,e).squaredLength();y<a&&(o=c.tangentAtT(h),a=y)}}return o||null},containsPoint:function(e,t){var r=this.toPolylines(t);if(!r)return!1;for(var n=r.length,i=0,s=0;s<n;s++){var o=r[s];o.containsPoint(e)&&i++}return i%2===1},divideAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.divideAtLength(u,o)},divideAtLength:function(e,t){var r=this.segments.length;if(r===0)return null;var n=!0;e<0&&(n=!1,e=-e),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o,a,u=0,c,f,h,g,y;for(o=0;o<r;o++){var m=n?o:r-1-o;a=this.getSegment(m);var _=s[m],x=a.length({precision:i,subdivisions:_});if(a.isDifferentiable()&&(h=a,g=m,e<=u+x)){f=m,c=a.divideAtLength((n?1:-1)*(e-u),{precision:i,subdivisions:_});break}u+=x}if(!h)return null;c||(f=g,y=n?1:0,c=h.divideAtT(y));var S=this.clone();S.replaceSegment(f,c);var E=f,A=f+1,T=f+2;c[0].isDifferentiable()||(S.removeSegment(E),A-=1,T-=1);var I=S.getSegment(A).start;S.insertSegment(A,Nt.createSegment("M",I)),T+=1,c[1].isDifferentiable()||(S.removeSegment(T-1),T-=1);var N=T-E-1;for(o=T;o<S.segments.length;o++){var p=this.getSegment(o-N);if(a=S.getSegment(o),a.type==="Z"&&!p.subpathStartSegment.end.equals(a.subpathStartSegment.end)){var P=Nt.createSegment("L",p.end);S.replaceSegment(o,P)}}var O=new Nt(S.segments.slice(0,A)),q=new Nt(S.segments.slice(A));return[O,q]},equals:function(e){if(!e)return!1;var t=this.segments,r=e.segments,n=t.length;if(r.length!==n)return!1;for(var i=0;i<n;i++){var s=t[i],o=r[i];if(s.type!==o.type||!s.equals(o))return!1}return!0},getSegment:function(e){var t=this.segments,r=t.length;if(r===0)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");return t[e]},getSegmentSubdivisions:function(e){var t=this.segments,r=t.length;e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,i=[],s=0;s<r;s++){var o=t[s],a=o.getSubdivisions({precision:n});i.push(a)}return i},getSubpaths:function(){const t=this.clone().validate().segments,r=t.length,n=[];for(let i=0;i<r;i++){const s=t[i];s.isSubpathStart?n.push(new Nt(s)):n[n.length-1].appendSegment(s)}return n},insertSegment:function(e,t){var r=this.segments,n=r.length;if(e<0&&(e=n+e+1),e>n||e<0)throw new Error("Index out of range.");var i,s=null,o=null;if(n!==0&&(e>=1?(s=r[e-1],o=s.nextSegment):o=r[0]),Array.isArray(t)){if(t=t.reduce(function(f,h){return f.concat(h)},[]),!t[0].isSegment)throw new Error("Segments required.");for(var a=t.length,u=0;u<a;u++){var c=t[u];i=this.prepareSegment(c,s,o),r.splice(e+u,0,i),s=i}}else{if(!t||!t.isSegment)throw new Error("Segment required.");i=this.prepareSegment(t,s,o),r.splice(e,0,i)}},intersectionWithLine:function(e,t){var r=null,n=this.toPolylines(t);if(!n)return null;for(var i=0,s=n.length;i<s;i++){var o=n[i],a=e.intersect(o);a&&(r||(r=[]),Array.isArray(a)?Array.prototype.push.apply(r,a):r.push(a))}return r},isDifferentiable:function(){for(var e=this.segments,t=e.length,r=0;r<t;r++){var n=e[r];if(n.isDifferentiable())return!0}return!1},isValid:function(){var e=this.segments,t=e.length===0||e[0].type==="M";return t},length:function(e){var t=this.segments,r=t.length;if(r===0)return 0;e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,i=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,s=0,o=0;o<r;o++){var a=t[o],u=i[o];s+=a.length({subdivisions:u})}return s},lengthAtT:function(e,t){var r=this.segments,n=r.length;if(n===0)return 0;var i=e.segmentIndex;if(i<0)return 0;var s=e.value;i>=n?(i=n-1,s=1):s<0?s=0:s>1&&(s=1),t=t||{};for(var o=t.precision===void 0?this.PRECISION:t.precision,a=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions,u,c=0,f=0;f<i;f++){var h=r[f];u=a[f],c+=h.length({precisison:o,subdivisions:u})}return h=r[i],u=a[i],c+=h.lengthAtT(s,{precisison:o,subdivisions:u}),c},pointAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.pointAtLength(u,o)},pointAtLength:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;if(e===0)return this.start.clone();var i=!0;e<0&&(i=!1,e=-e),t=t||{};for(var s=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,a,u=0,c=0;c<n;c++){var f=i?c:n-1-c,h=r[f],g=o[f],y=h.length({precision:s,subdivisions:g});if(h.isVisible){if(e<=u+y)return h.pointAtLength((i?1:-1)*(e-u),{precision:s,subdivisions:g});a=h}u+=y}if(a)return i?a.end:a.start;var m=r[n-1];return m.end.clone()},pointAtT:function(e){var t=this.segments,r=t.length;if(r===0)return null;var n=e.segmentIndex;if(n<0)return t[0].pointAtT(0);if(n>=r)return t[r-1].pointAtT(1);var i=e.value;return i<0?i=0:i>1&&(i=1),t[n].pointAtT(i)},PRECISION:3,prepareSegment:function(e,t,r){e.previousSegment=t,e.nextSegment=r,t&&(t.nextSegment=e),r&&(r.previousSegment=e);var n=e;return e.isSubpathStart&&(e.subpathStartSegment=e,n=r),n&&this.updateSubpathStartSegment(n),e},removeSegment:function(e){var t=this.segments,r=t.length;if(r===0)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");var n=t.splice(e,1)[0],i=n.previousSegment,s=n.nextSegment;i&&(i.nextSegment=s),s&&(s.previousSegment=i),n.isSubpathStart&&s&&this.updateSubpathStartSegment(s)},replaceSegment:function(e,t){var r=this.segments,n=r.length;if(n===0)throw new Error("Path has no segments.");if(e<0&&(e=n+e),e>=n||e<0)throw new Error("Index out of range.");var i,s=r[e],o=s.previousSegment,a=s.nextSegment,u=s.isSubpathStart;if(Array.isArray(t)){if(t=t.reduce(function(g,y){return g.concat(y)},[]),!t[0].isSegment)throw new Error("Segments required.");r.splice(e,1);for(var c=t.length,f=0;f<c;f++){var h=t[f];i=this.prepareSegment(h,o,a),r.splice(e+f,0,i),o=i,u&&i.isSubpathStart&&(u=!1)}}else{if(!t||!t.isSegment)throw new Error("Segment required.");i=this.prepareSegment(t,o,a),r.splice(e,1,i),u&&i.isSubpathStart&&(u=!1)}u&&a&&this.updateSubpathStartSegment(a)},round:function(e){for(var t=this.segments,r=t.length,n=0;n<r;n++){var i=t[n];i.round(e)}return this},scale:function(e,t,r){for(var n=this.segments,i=n.length,s=0;s<i;s++){var o=n[s];o.scale(e,t,r)}return this},segmentAt:function(e,t){var r=this.segmentIndexAt(e,t);return r?this.getSegment(r):null},segmentAtLength:function(e,t){var r=this.segmentIndexAtLength(e,t);return r?this.getSegment(r):null},segmentIndexAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.segmentIndexAtLength(u,o)},segmentIndexAtLength:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;var i=!0;e<0&&(i=!1,e=-e),t=t||{};for(var s=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,a=null,u=0,c=0;c<n;c++){var f=i?c:n-1-c,h=r[f],g=o[f],y=h.length({precision:s,subdivisions:g});if(h.isVisible){if(e<=u+y)return f;a=f}u+=y}return a},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.tangentAtLength(u,o)},tangentAtLength:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;var i=!0;e<0&&(i=!1,e=-e),t=t||{};for(var s=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,a,u=0,c=0;c<n;c++){var f=i?c:n-1-c,h=r[f],g=o[f],y=h.length({precision:s,subdivisions:g});if(h.isDifferentiable()){if(e<=u+y)return h.tangentAtLength((i?1:-1)*(e-u),{precision:s,subdivisions:g});a=h}u+=y}if(a){var m=i?1:0;return a.tangentAtT(m)}return null},tangentAtT:function(e){var t=this.segments,r=t.length;if(r===0)return null;var n=e.segmentIndex;if(n<0)return t[0].tangentAtT(0);if(n>=r)return t[r-1].tangentAtT(1);var i=e.value;return i<0?i=0:i>1&&(i=1),t[n].tangentAtT(i)},toPoints:function(e){var t=this.segments,r=t.length;if(r===0)return null;e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,i=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,s=[],o=[],a=0;a<r;a++){var u=t[a];if(u.isVisible){var c=i[a];if(c.length>0){var f=c.map(function(h){return h.start});Array.prototype.push.apply(o,f)}else o.push(u.start)}else o.length>0&&(o.push(t[a-1].end),s.push(o),o=[])}return o.length>0&&(o.push(this.end),s.push(o)),s},toPolylines:function(e){var t=[],r=this.toPoints(e);if(!r)return null;for(var n=0,i=r.length;n<i;n++)t.push(new pn(r[n]));return t},toString:function(){for(var e=this.segments,t=e.length,r="",n=0;n<t;n++){var i=e[n];r+=i.serialize()+" "}return r.trim()},translate:function(e,t){for(var r=this.segments,n=r.length,i=0;i<n;i++){var s=r[i];s.translate(e,t)}return this},updateSubpathStartSegment:function(e){for(var t=e.previousSegment;e&&!e.isSubpathStart;)t?e.subpathStartSegment=t.subpathStartSegment:e.subpathStartSegment=null,t=e,e=e.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,Nt.createSegment("M",0,0)),this}};Object.defineProperty(Nt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r=0;r<t;r++){var n=e[r];if(n.isVisible)return n.start}return e[t-1].end}});Object.defineProperty(Nt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r=t-1;r>=0;r--){var n=e[r];if(n.isVisible)return n.end}return e[t-1].end}});function la(e,t){return t.unshift(null),new(Function.prototype.bind.apply(e,t))}var Cc={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(e){if(e<=0)return 0;var t=this.length();return e>=1?t:t*e},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(Cc,"end",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(Cc,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}});Object.defineProperty(Cc,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var Ei=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof Ei))return la(Ei,e);if(t===0)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var n;if(e[0]instanceof wt){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+t+" lines provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===2)return this.end=new pe(+e[0],+e[1]),this;if(t<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+t+" coordinates provided).");var i;for(n=[],r=0;r<t;r+=2)i=e.slice(r,r+2),n.push(la(Ei,i));return n}else{if(t===1)return this.end=new pe(e[0]),this;var s;for(n=[],r=0;r<t;r+=1)s=e[r],n.push(new Ei(s));return n}},pG={clone:function(){return new Ei(this.end)},divideAt:function(e){var t=new wt(this.start,this.end),r=t.divideAt(e);return[new Ei(r[0]),new Ei(r[1])]},divideAtLength:function(e){var t=new wt(this.start,this.end),r=t.divideAtLength(e);return[new Ei(r[0]),new Ei(r[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return this.previousSegment?!this.start.equals(this.end):!1},round:function(e){return this.end.round(e),this},scale:function(e,t,r){return this.end.scale(e,t,r),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty(pG,"type",{configurable:!0,enumerable:!0,value:"L"});Ei.prototype=qh(Cc,wt.prototype,pG);var Is=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof Is))return la(Is,e);if(t===0)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var n;if(e[0]instanceof Zr){if(t===1)return this.controlPoint1=e[0].controlPoint1.clone(),this.controlPoint2=e[0].controlPoint2.clone(),this.end=e[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" curves provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===6)return this.controlPoint1=new pe(+e[0],+e[1]),this.controlPoint2=new pe(+e[2],+e[3]),this.end=new pe(+e[4],+e[5]),this;if(t<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" coordinates provided).");var i;for(n=[],r=0;r<t;r+=6)i=e.slice(r,r+6),n.push(la(Is,i));return n}else{if(t===3)return this.controlPoint1=new pe(e[0]),this.controlPoint2=new pe(e[1]),this.end=new pe(e[2]),this;if(t<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" points provided).");var s;for(n=[],r=0;r<t;r+=3)s=e.slice(r,r+3),n.push(la(Is,s));return n}},vG={clone:function(){return new Is(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(e,t){var r=new Zr(this.start,this.controlPoint1,this.controlPoint2,this.end),n=r.divideAt(e,t);return[new Is(n[0]),new Is(n[1])]},divideAtLength:function(e,t){var r=new Zr(this.start,this.controlPoint1,this.controlPoint2,this.end),n=r.divideAtLength(e,t);return[new Is(n[0]),new Is(n[1])]},divideAtT:function(e){var t=new Zr(this.start,this.controlPoint1,this.controlPoint2,this.end),r=t.divideAtT(e);return[new Is(r[0]),new Is(r[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var e=this.start,t=this.controlPoint1,r=this.controlPoint2,n=this.end;return!(e.equals(t)&&t.equals(r)&&r.equals(n))},round:function(e){return this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,r){return this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this},serialize:function(){var e=this.controlPoint1,t=this.controlPoint2,r=this.end;return this.type+" "+e.x+" "+e.y+" "+t.x+" "+t.y+" "+r.x+" "+r.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}};Object.defineProperty(vG,"type",{configurable:!0,enumerable:!0,value:"C"});Is.prototype=qh(Cc,Zr.prototype,vG);var ec=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof ec))return la(ec,e);if(t===0)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var n;if(e[0]instanceof wt){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" lines provided).")}else if(e[0]instanceof Zr){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" curves provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===2)return this.end=new pe(+e[0],+e[1]),this;if(t<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" coordinates provided).");var i;for(n=[],r=0;r<t;r+=2)i=e.slice(r,r+2),r===0?n.push(la(ec,i)):n.push(la(Ei,i));return n}else{if(t===1)return this.end=new pe(e[0]),this;var s;for(n=[],r=0;r<t;r+=1)s=e[r],r===0?n.push(new ec(s)):n.push(new Ei(s));return n}},V2={bbox:function(){return null},clone:function(){return new ec(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(e){return this.end.equals(e.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(e){return this.end.round(e),this},scale:function(e,t,r){return this.end.scale(e,t,r),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty(V2,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}});Object.defineProperty(V2,"type",{configurable:!0,enumerable:!0,value:"M"});ec.prototype=qh(Cc,V2);var Al=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof Al))return la(Al,e);if(t>0)throw new Error("Closepath constructor expects no arguments.");return this},G2={clone:function(){return new Al},divideAt:function(e){var t=new wt(this.start,this.end),r=t.divideAt(e);return[r[1].isDifferentiable()?new Ei(r[0]):this.clone(),new Ei(r[1])]},divideAtLength:function(e){var t=new wt(this.start,this.end),r=t.divideAtLength(e);return[r[1].isDifferentiable()?new Ei(r[0]):this.clone(),new Ei(r[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(G2,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}});Object.defineProperty(G2,"type",{configurable:!0,enumerable:!0,value:"Z"});Al.prototype=qh(Cc,wt.prototype,G2);var Ice=Nt.segmentTypes={L:Ei,C:Is,M:ec,Z:Al,z:Al};Nt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(Ice).join("")+",.]*$");Nt.isDataSupported=function(e){return typeof e!="string"?!1:this.regexSupportedData.test(e)};const Oce={curveThroughPoints:function(e){return console.warn("deprecated"),new Nt(Zr.throughPoints(e)).serialize()},getCurveControlPoints:function(e){console.warn("deprecated");var t=[],r=[],n=e.length-1,i;if(n==1)return t[0]=new pe((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),r[0]=new pe(2*t[0].x-e[0].x,2*t[0].y-e[0].y),[t,r];var s=[];for(i=1;i<n-1;i++)s[i]=4*e[i].x+2*e[i+1].x;s[0]=e[0].x+2*e[1].x,s[n-1]=(8*e[n-1].x+e[n].x)/2;var o=this.getFirstControlPoints(s);for(i=1;i<n-1;++i)s[i]=4*e[i].y+2*e[i+1].y;s[0]=e[0].y+2*e[1].y,s[n-1]=(8*e[n-1].y+e[n].y)/2;var a=this.getFirstControlPoints(s);for(i=0;i<n;i++)t.push(new pe(o[i],a[i])),i<n-1?r.push(new pe(2*e[i+1].x-o[i+1],2*e[i+1].y-a[i+1])):r.push(new pe((e[n].x+o[n-1])/2,(e[n].y+a[n-1])/2));return[t,r]},getCurveDivider:function(e,t,r,n){console.warn("deprecated");var i=new Zr(e,t,r,n);return function(o){var a=i.divide(o);return[{p0:a[0].start,p1:a[0].controlPoint1,p2:a[0].controlPoint2,p3:a[0].end},{p0:a[1].start,p1:a[1].controlPoint1,p2:a[1].controlPoint2,p3:a[1].end}]}},getFirstControlPoints:function(e){console.warn("deprecated");var t=e.length,r=[],n=[],i=2;r[0]=e[0]/i;for(var s=1;s<t;s++)n[s]=1/i,i=(s<t-1?4:3.5)-n[s],r[s]=(e[s]-r[s-1])/i;for(s=1;s<t;s++)r[t-s-1]-=n[t-s]*r[t-s];return r},getInversionSolver:function(e,t,r,n){console.warn("deprecated");var i=new Zr(e,t,r,n);return function(o){return i.closestPointT(o)}}},ms=function(e){if(!(this instanceof ms))return new ms(e);if(typeof e=="string")return new ms.parse(e);this.points=Array.isArray(e)?e.map(pe):[]};ms.parse=function(e){return new ms(fG(e))};ms.fromRect=function(e){return new ms([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft()])};ms.prototype=qh(pn.prototype,{type:pr.Polygon,clone:function(){return new ms(hG(this.points))},convexHull:function(){return new ms(dG(this.points))},lengthPoints:function(){const{start:e,end:t,points:r}=this;return r.length<=1||e.equals(t)?r:[...r,e.clone()]}});function gG(e,t,r,n){switch(e.type){case pr.Line:{switch(t.type){case pr.Line:return tc(e,t)}break}case pr.Ellipse:{switch(t.type){case pr.Line:return $2(e,t);case pr.Ellipse:return mG(e,t)}break}case pr.Rect:{switch(t.type){case pr.Line:return yG(e,t);case pr.Ellipse:return _G(e,t);case pr.Rect:return U2(e,t)}break}case pr.Polyline:{switch(t.type){case pr.Line:return Uv(e,t);case pr.Ellipse:return j2(e,t);case pr.Rect:return bG(e,t);case pr.Polyline:return wG(e,t)}break}case pr.Polygon:{switch(t.type){case pr.Line:return H2(e,t);case pr.Ellipse:return jv(e,t);case pr.Rect:return xG(e,t);case pr.Polyline:return SG(e,t);case pr.Polygon:return EG(e,t)}break}case pr.Path:{switch(t.type){case pr.Line:return AG(e,t,r);case pr.Ellipse:return TG(e,t,r);case pr.Rect:return PG(e,t,r);case pr.Polyline:return W2(e,t,r);case pr.Polygon:return Hv(e,t,r);case pr.Path:return CG(e,t,r,n)}break}}switch(t.type){case pr.Ellipse:case pr.Rect:case pr.Polyline:case pr.Polygon:case pr.Path:return gG(t,e,n,r);default:throw Error(`The intersection for ${e} and ${t} could not be found.`)}}function tc(e,t){const r=e.start.x,n=e.start.y,i=e.end.x,s=e.end.y,o=t.start.x,a=t.start.y,u=t.end.x,c=t.end.y,f=i-r,h=s-n,g=u-o,y=c-a,m=r-o,_=n-a,x=f*y-g*h,S=(f*_-h*m)/x,E=(g*_-y*m)/x;return S>=0&&S<=1&&E>=0&&E<=1}function $2(e,t){const r=e.a,n=e.b,i=e.x,s=e.y,o=t.start.x-i,a=t.end.x-i,u=t.start.y-s,c=t.end.y-s,f=r*r,h=n*n,g=a-o,y=c-u,m=g*g/f+y*y/h,_=2*o*g/f+2*u*y/h,x=o*o/f+u*u/h-1,S=_*_-4*m*x;if(S===0){const E=-_/2/m;return E>=0&&E<=1}else if(S>0){const E=Math.sqrt(S),A=(-_+E)/2/m,T=(-_-E)/2/m;return A>=0&&A<=1||T>=0&&T<=1}return!1}function mG(e,t){return Mce(e,0,t,0)}function yG(e,t){const{start:r,end:n}=t,{x:i,y:s,width:o,height:a}=e;return r.x>i+o&&n.x>i+o||r.x<i&&n.x<i||r.y>s+a&&n.y>s+a||r.y<s&&n.y<s?!1:e.containsPoint(t.start)||e.containsPoint(t.end)?!0:tc(e.topLine(),t)||tc(e.rightLine(),t)||tc(e.bottomLine(),t)||tc(e.leftLine(),t)}function _G(e,t){return U2(e,mt.fromEllipse(t))?jv(ms.fromRect(e),t):!1}function U2(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function Uv(e,t){return RG(e,t,{interior:!1})}function j2(e,t){return IG(e,t,{interior:!1})}function bG(e,t){return OG(e,t,{interior:!1})}function wG(e,t){return Wv(e,t,{interior:!1})}function H2(e,t){return RG(e,t,{interior:!0})}function jv(e,t){return IG(e,t,{interior:!0})}function xG(e,t){return OG(e,t,{interior:!0})}function SG(e,t){return Wv(e,t,{interior:!0})}function EG(e,t){return X2(e,t,{interior:!0})}function AG(e,t,r){return e.getSubpaths().some(n=>{const[i]=n.toPolylines(r),{type:s}=n.getSegment(-1);return s==="Z"?H2(i,t):Uv(i,t)})}function TG(e,t,r){return e.getSubpaths().some(n=>{const[i]=n.toPolylines(r),{type:s}=n.getSegment(-1);return s==="Z"?jv(i,t):j2(i,t)})}function PG(e,t,r){return Hv(e,ms.fromRect(t),r)}function W2(e,t,r){return MG(e,t,r,{interior:!1})}function Hv(e,t,r){return MG(e,t,r,{interior:!0})}function CG(e,t,r,n){return e.getSubpaths().some(i=>{const[s]=i.toPolylines(r),{type:o}=i.getSegment(-1);return o==="Z"?Hv(t,s,n):W2(t,s,n)})}function RG(e,t,r={}){const{interior:n=!1}=r;let i;if(n){if(e.containsPoint(t.start))return!0;const{start:a,end:u,points:c}=e;i=u.equals(a)?c:[...c,a]}else i=e.points;const{length:s}=i,o=new wt;for(let a=0;a<s-1;a++)if(o.start=i[a],o.end=i[a+1],tc(t,o))return!0;return!1}function IG(e,t,r={}){const{start:n,end:i,points:s}=e;if(t.containsPoint(n))return!0;let o;const{interior:a=!1}=r;if(a){if(e.containsPoint(t.center()))return!0;o=i.equals(n)?s:[...s,n]}else o=s;const{length:u}=o,c=new wt;for(let f=0;f<u-1;f++)if(c.start=o[f],c.end=o[f+1],$2(t,c))return!0;return!1}function OG(e,t,r){const n=ms.fromRect(t);return X2(e,n,r)}function MG(e,t,r,n){return e.getSubpaths().some(i=>{const[s]=i.toPolylines(r),{type:o}=i.getSegment(-1);return o==="Z"?X2(t,s,n):Wv(t,s,n)})}function Wv(e,t,r={}){const{interior:n=!1}=r;let i;if(n){const{start:u}=t;if(e.containsPoint(u))return!0;i=e.clone().close()}else i=e;const s=t.points,{length:o}=s,a=new wt;for(let u=0;u<o-1;u++)if(a.start=s[u],a.end=s[u+1],Uv(i,a))return!0;return!1}function X2(e,t,r){return t.containsPoint(e.start)||Wv(e,t.clone().close(),r)}function Mce(e,t,r,n){const{cos:i,sin:s}=Math,o=s(t),a=i(t),u=s(n),c=i(n),f=o*o,h=a*a,g=o*a,y=u*u,m=c*c,_=u*c,x=e.a*e.a,S=e.b*e.b,E=r.a*r.a,A=r.b*r.b,T=x*f+S*h,I=E*y+A*m,N=x*h+S*f,p=E*m+A*y;let P=2*(S-x)*g,O=2*(A-E)*_,q=-2*T*e.x-P*e.y,V=-2*I*r.x-O*r.y,W=-P*e.x-2*N*e.y,G=-O*r.x-2*p*r.y;const J=T*e.x*e.x+N*e.y*e.y+P*e.x*e.y-x*S,se=I*r.x*r.x+p*r.y*r.y+O*r.x*r.y-E*A;P=P/2,O=O/2,q=q/2,V=V/2,W=W/2,G=G/2;const K=cu([[T,P,q],[P,N,W],[q,W,J]]),U=cu([[I,O,V],[O,p,G],[V,G,se]]),j=.33333333*(cu([[I,P,q],[O,N,W],[V,W,J]])+cu([[T,O,q],[P,p,W],[q,G,J]])+cu([[T,P,V],[P,N,G],[q,W,se]])),Q=.33333333*(cu([[T,O,V],[P,p,G],[q,G,se]])+cu([[I,P,V],[O,N,G],[V,W,se]])+cu([[I,O,q],[O,p,W],[V,G,J]])),de=np([[K,j],[j,Q]]),ce=np([[K,Q],[j,U]]),Te=np([[j,Q],[Q,U]]);return!(np([[2*de,ce],[ce,2*Te]])>0&&(Q>0||j>0))}function np(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}function cu(e){return e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0]}const kce=Object.freeze(Object.defineProperty({__proto__:null,ellipseWithEllipse:mG,ellipseWithLine:$2,exists:gG,lineWithLine:tc,pathWithEllipse:TG,pathWithLine:AG,pathWithPath:CG,pathWithPolygon:Hv,pathWithPolyline:W2,pathWithRect:PG,polygonWithEllipse:jv,polygonWithLine:H2,polygonWithPolygon:EG,polygonWithPolyline:SG,polygonWithRect:xG,polylineWithEllipse:j2,polylineWithLine:Uv,polylineWithPolyline:wG,polylineWithRect:bG,rectWithEllipse:_G,rectWithLine:yG,rectWithRect:U2},Symbol.toStringTag,{value:"Module"})),Lce=kce,Nce=Object.freeze(Object.defineProperty({__proto__:null,Curve:Zr,Ellipse:Yi,Line:wt,Path:Nt,Point:pe,Polygon:ms,Polyline:pn,Rect:mt,bezier:Oce,ellipse:Ece,intersection:Lce,line:sc,normalizeAngle:Oo,point:Dp,random:rE,rect:Cce,scale:_ce,snapToGrid:cc,toDeg:$v,toRad:gs,types:pr},Symbol.toStringTag,{value:"Module"}));var RS={},Y2="1.13.7",oz=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},Xv=Array.prototype,K2=Object.prototype,az=typeof Symbol<"u"?Symbol.prototype:null,qce=Xv.push,Dh=Xv.slice,ah=K2.toString,Dce=K2.hasOwnProperty,kG=typeof ArrayBuffer<"u",Fce=typeof DataView<"u",Bce=Array.isArray,uz=Object.keys,cz=Object.create,lz=kG&&ArrayBuffer.isView,zce=isNaN,Vce=isFinite,LG=!{toString:null}.propertyIsEnumerable("toString"),fz=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Gce=Math.pow(2,53)-1;function Ji(e,t){return t=t==null?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var s=Array(t+1);for(i=0;i<t;i++)s[i]=arguments[i];return s[t]=n,e.apply(this,s)}}function Mu(e){var t=typeof e;return t==="function"||t==="object"&&!!e}function NG(e){return e===null}function Z2(e){return e===void 0}function J2(e){return e===!0||e===!1||ah.call(e)==="[object Boolean]"}function qG(e){return!!(e&&e.nodeType===1)}function qi(e){var t="[object "+e+"]";return function(r){return ah.call(r)===t}}const Yv=qi("String"),Q2=qi("Number"),DG=qi("Date"),FG=qi("RegExp"),BG=qi("Error"),eA=qi("Symbol"),tA=qi("ArrayBuffer");var zG=qi("Function"),$ce=oz.document&&oz.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof $ce!="function"&&(zG=function(e){return typeof e=="function"||!1});const Ni=zG,VG=qi("Object");var GG=Fce&&(!/\[native code\]/.test(String(DataView))||VG(new DataView(new ArrayBuffer(8)))),rA=typeof Map<"u"&&VG(new Map),Uce=qi("DataView");function jce(e){return e!=null&&Ni(e.getInt8)&&tA(e.buffer)}const uh=GG?jce:Uce,ku=Bce||qi("Array");function Lu(e,t){return e!=null&&Dce.call(e,t)}var sE=qi("Arguments");(function(){sE(arguments)||(sE=function(e){return Lu(e,"callee")})})();const Kv=sE;function $G(e){return!eA(e)&&Vce(e)&&!isNaN(parseFloat(e))}function nA(e){return Q2(e)&&zce(e)}function iA(e){return function(){return e}}function UG(e){return function(t){var r=e(t);return typeof r=="number"&&r>=0&&r<=Gce}}function jG(e){return function(t){return t==null?void 0:t[e]}}const Fp=jG("byteLength"),Hce=UG(Fp);var Wce=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function Xce(e){return lz?lz(e)&&!uh(e):Hce(e)&&Wce.test(ah.call(e))}const sA=kG?Xce:iA(!1),_s=jG("length");function Yce(e){for(var t={},r=e.length,n=0;n<r;++n)t[e[n]]=!0;return{contains:function(i){return t[i]===!0},push:function(i){return t[i]=!0,e.push(i)}}}function HG(e,t){t=Yce(t);var r=fz.length,n=e.constructor,i=Ni(n)&&n.prototype||K2,s="constructor";for(Lu(e,s)&&!t.contains(s)&&t.push(s);r--;)s=fz[r],s in e&&e[s]!==i[s]&&!t.contains(s)&&t.push(s)}function fi(e){if(!Mu(e))return[];if(uz)return uz(e);var t=[];for(var r in e)Lu(e,r)&&t.push(r);return LG&&HG(e,t),t}function WG(e){if(e==null)return!0;var t=_s(e);return typeof t=="number"&&(ku(e)||Yv(e)||Kv(e))?t===0:_s(fi(e))===0}function oA(e,t){var r=fi(t),n=r.length;if(e==null)return!n;for(var i=Object(e),s=0;s<n;s++){var o=r[s];if(t[o]!==i[o]||!(o in i))return!1}return!0}function sn(e){if(e instanceof sn)return e;if(!(this instanceof sn))return new sn(e);this._wrapped=e}sn.VERSION=Y2;sn.prototype.value=function(){return this._wrapped};sn.prototype.valueOf=sn.prototype.toJSON=sn.prototype.value;sn.prototype.toString=function(){return String(this._wrapped)};function hz(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Fp(e))}var dz="[object DataView]";function oE(e,t,r,n){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var i=typeof e;return i!=="function"&&i!=="object"&&typeof t!="object"?!1:XG(e,t,r,n)}function XG(e,t,r,n){e instanceof sn&&(e=e._wrapped),t instanceof sn&&(t=t._wrapped);var i=ah.call(e);if(i!==ah.call(t))return!1;if(GG&&i=="[object Object]"&&uh(e)){if(!uh(t))return!1;i=dz}switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return az.valueOf.call(e)===az.valueOf.call(t);case"[object ArrayBuffer]":case dz:return XG(hz(e),hz(t),r,n)}var s=i==="[object Array]";if(!s&&sA(e)){var o=Fp(e);if(o!==Fp(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;s=!0}if(!s){if(typeof e!="object"||typeof t!="object")return!1;var a=e.constructor,u=t.constructor;if(a!==u&&!(Ni(a)&&a instanceof a&&Ni(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var c=r.length;c--;)if(r[c]===e)return n[c]===t;if(r.push(e),n.push(t),s){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!oE(e[c],t[c],r,n))return!1}else{var f=fi(e),h;if(c=f.length,fi(t).length!==c)return!1;for(;c--;)if(h=f[c],!(Lu(t,h)&&oE(e[h],t[h],r,n)))return!1}return r.pop(),n.pop(),!0}function YG(e,t){return oE(e,t)}function Xl(e){if(!Mu(e))return[];var t=[];for(var r in e)t.push(r);return LG&&HG(e,t),t}function aA(e){var t=_s(e);return function(r){if(r==null)return!1;var n=Xl(r);if(_s(n))return!1;for(var i=0;i<t;i++)if(!Ni(r[e[i]]))return!1;return e!==JG||!Ni(r[uA])}}var uA="forEach",KG="has",cA=["clear","delete"],ZG=["get",KG,"set"],Kce=cA.concat(uA,ZG),JG=cA.concat(ZG),Zce=["add"].concat(cA,uA,KG);const QG=rA?aA(Kce):qi("Map"),e$=rA?aA(JG):qi("WeakMap"),t$=rA?aA(Zce):qi("Set"),r$=qi("WeakSet");function Rc(e){for(var t=fi(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n}function n$(e){for(var t=fi(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n}function lA(e){for(var t={},r=fi(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t}function ch(e){var t=[];for(var r in e)Ni(e[r])&&t.push(r);return t.sort()}function fA(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||r==null)return r;for(var i=1;i<n;i++)for(var s=arguments[i],o=e(s),a=o.length,u=0;u<a;u++){var c=o[u];(!t||r[c]===void 0)&&(r[c]=s[c])}return r}}const hA=fA(Xl),Tl=fA(fi),dA=fA(Xl,!0);function Jce(){return function(){}}function i$(e){if(!Mu(e))return{};if(cz)return cz(e);var t=Jce();t.prototype=e;var r=new t;return t.prototype=null,r}function s$(e,t){var r=i$(e);return t&&Tl(r,t),r}function o$(e){return Mu(e)?ku(e)?e.slice():hA({},e):e}function a$(e,t){return t(e),e}function pA(e){return ku(e)?e:[e]}sn.toPath=pA;function Fh(e){return sn.toPath(e)}function vA(e,t){for(var r=t.length,n=0;n<r;n++){if(e==null)return;e=e[t[n]]}return r?e:void 0}function gA(e,t,r){var n=vA(e,Fh(t));return Z2(n)?r:n}function u$(e,t){t=Fh(t);for(var r=t.length,n=0;n<r;n++){var i=t[n];if(!Lu(e,i))return!1;e=e[i]}return!!r}function Zv(e){return e}function lc(e){return e=Tl({},e),function(t){return oA(t,e)}}function Jv(e){return e=Fh(e),function(t){return vA(t,e)}}function Bh(e,t,r){if(t===void 0)return e;switch(r??3){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,s){return e.call(t,n,i,s)};case 4:return function(n,i,s,o){return e.call(t,n,i,s,o)}}return function(){return e.apply(t,arguments)}}function c$(e,t,r){return e==null?Zv:Ni(e)?Bh(e,t,r):Mu(e)&&!ku(e)?lc(e):Jv(e)}function Qv(e,t){return c$(e,t,1/0)}sn.iteratee=Qv;function bs(e,t,r){return sn.iteratee!==Qv?sn.iteratee(e,t):c$(e,t,r)}function l$(e,t,r){t=bs(t,r);for(var n=fi(e),i=n.length,s={},o=0;o<i;o++){var a=n[o];s[a]=t(e[a],a,e)}return s}function mA(){}function f$(e){return e==null?mA:function(t){return gA(e,t)}}function h$(e,t,r){var n=Array(Math.max(0,e));t=Bh(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n}function Bp(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}const Pl=Date.now||function(){return new Date().getTime()};function d$(e){var t=function(s){return e[s]},r="(?:"+fi(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(s){return s=s==null?"":""+s,n.test(s)?s.replace(i,t):s}}const p$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},v$=d$(p$),Qce=lA(p$),g$=d$(Qce),m$=sn.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var IS=/(.)^/,ele={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},tle=/\\|'|\r|\n|\u2028|\u2029/g;function rle(e){return"\\"+ele[e]}var nle=/^\s*(\w|\$)+\s*$/;function y$(e,t,r){!t&&r&&(t=r),t=dA({},t,sn.templateSettings);var n=RegExp([(t.escape||IS).source,(t.interpolate||IS).source,(t.evaluate||IS).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(n,function(c,f,h,g,y){return s+=e.slice(i,y).replace(tle,rle),i=y+c.length,f?s+=`'+
((__t=(`+f+`))==null?'':_.escape(__t))+
'`:h?s+=`'+
((__t=(`+h+`))==null?'':__t)+
'`:g&&(s+=`';
`+g+`
__p+='`),c}),s+=`';
`;var o=t.variable;if(o){if(!nle.test(o))throw new Error("variable is not a bare identifier: "+o)}else s=`with(obj||{}){
`+s+`}
`,o="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var a;try{a=new Function(o,"_",s)}catch(c){throw c.source=s,c}var u=function(c){return a.call(this,c,sn)};return u.source="function("+o+`){
`+s+"}",u}function _$(e,t,r){t=Fh(t);var n=t.length;if(!n)return Ni(r)?r.call(e):r;for(var i=0;i<n;i++){var s=e==null?void 0:e[t[i]];s===void 0&&(s=r,i=n),e=Ni(s)?s.call(e):s}return e}var ile=0;function b$(e){var t=++ile+"";return e?e+t:t}function w$(e){var t=sn(e);return t._chain=!0,t}function x$(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var s=i$(e.prototype),o=e.apply(s,i);return Mu(o)?o:s}var Ic=Ji(function(e,t){var r=Ic.placeholder,n=function(){for(var i=0,s=t.length,o=Array(s),a=0;a<s;a++)o[a]=t[a]===r?arguments[i++]:t[a];for(;i<arguments.length;)o.push(arguments[i++]);return x$(e,n,this,this,o)};return n});Ic.placeholder=sn;const yA=Ji(function(e,t,r){if(!Ni(e))throw new TypeError("Bind must be called on a function");var n=Ji(function(i){return x$(e,n,t,this,r.concat(i))});return n}),Fs=UG(_s);function Oc(e,t,r,n){if(n=n||[],!t&&t!==0)t=1/0;else if(t<=0)return n.concat(e);for(var i=n.length,s=0,o=_s(e);s<o;s++){var a=e[s];if(Fs(a)&&(ku(a)||Kv(a)))if(t>1)Oc(a,t-1,r,n),i=n.length;else for(var u=0,c=a.length;u<c;)n[i++]=a[u++];else r||(n[i++]=a)}return n}const S$=Ji(function(e,t){t=Oc(t,!1,!1);var r=t.length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=yA(e[n],e)}return e});function E$(e,t){var r=function(n){var i=r.cache,s=""+(t?t.apply(this,arguments):n);return Lu(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return r.cache={},r}const _A=Ji(function(e,t,r){return setTimeout(function(){return e.apply(null,r)},t)}),A$=Ic(_A,sn,1);function T$(e,t,r){var n,i,s,o,a=0;r||(r={});var u=function(){a=r.leading===!1?0:Pl(),n=null,o=e.apply(i,s),n||(i=s=null)},c=function(){var f=Pl();!a&&r.leading===!1&&(a=f);var h=t-(f-a);return i=this,s=arguments,h<=0||h>t?(n&&(clearTimeout(n),n=null),a=f,o=e.apply(i,s),n||(i=s=null)):!n&&r.trailing!==!1&&(n=setTimeout(u,h)),o};return c.cancel=function(){clearTimeout(n),a=0,n=i=s=null},c}function P$(e,t,r){var n,i,s,o,a,u=function(){var f=Pl()-i;t>f?n=setTimeout(u,t-f):(n=null,r||(o=e.apply(a,s)),n||(s=a=null))},c=Ji(function(f){return a=this,s=f,i=Pl(),n||(n=setTimeout(u,t),r&&(o=e.apply(a,s))),o});return c.cancel=function(){clearTimeout(n),n=s=a=null},c}function C$(e,t){return Ic(t,e)}function eg(e){return function(){return!e.apply(this,arguments)}}function R$(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}}function I$(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function bA(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}}const O$=Ic(bA,2);function wA(e,t,r){t=bs(t,r);for(var n=fi(e),i,s=0,o=n.length;s<o;s++)if(i=n[s],t(e[i],i,e))return i}function M$(e){return function(t,r,n){r=bs(r,n);for(var i=_s(t),s=e>0?0:i-1;s>=0&&s<i;s+=e)if(r(t[s],s,t))return s;return-1}}const tg=M$(1),xA=M$(-1);function SA(e,t,r,n){r=bs(r,n,1);for(var i=r(t),s=0,o=_s(e);s<o;){var a=Math.floor((s+o)/2);r(e[a])<i?s=a+1:o=a}return s}function k$(e,t,r){return function(n,i,s){var o=0,a=_s(n);if(typeof s=="number")e>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(r&&s&&a)return s=r(n,i),n[s]===i?s:-1;if(i!==i)return s=t(Dh.call(n,o,a),nA),s>=0?s+o:-1;for(s=e>0?o:a-1;s>=0&&s<a;s+=e)if(n[s]===i)return s;return-1}}const EA=k$(1,tg,SA),L$=k$(-1,xA);function lh(e,t,r){var n=Fs(e)?tg:wA,i=n(e,t,r);if(i!==void 0&&i!==-1)return e[i]}function N$(e,t){return lh(e,lc(t))}function Mo(e,t,r){t=Bh(t,r);var n,i;if(Fs(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var s=fi(e);for(n=0,i=s.length;n<i;n++)t(e[s[n]],s[n],e)}return e}function Ua(e,t,r){t=bs(t,r);for(var n=!Fs(e)&&fi(e),i=(n||e).length,s=Array(i),o=0;o<i;o++){var a=n?n[o]:o;s[o]=t(e[a],a,e)}return s}function q$(e){var t=function(r,n,i,s){var o=!Fs(r)&&fi(r),a=(o||r).length,u=e>0?0:a-1;for(s||(i=r[o?o[u]:u],u+=e);u>=0&&u<a;u+=e){var c=o?o[u]:u;i=n(i,r[c],c,r)}return i};return function(r,n,i,s){var o=arguments.length>=3;return t(r,Bh(n,s,4),i,o)}}const pl=q$(1),zp=q$(-1);function Eu(e,t,r){var n=[];return t=bs(t,r),Mo(e,function(i,s,o){t(i,s,o)&&n.push(i)}),n}function D$(e,t,r){return Eu(e,eg(bs(t)),r)}function Vp(e,t,r){t=bs(t,r);for(var n=!Fs(e)&&fi(e),i=(n||e).length,s=0;s<i;s++){var o=n?n[s]:s;if(!t(e[o],o,e))return!1}return!0}function Gp(e,t,r){t=bs(t,r);for(var n=!Fs(e)&&fi(e),i=(n||e).length,s=0;s<i;s++){var o=n?n[s]:s;if(t(e[o],o,e))return!0}return!1}function so(e,t,r,n){return Fs(e)||(e=Rc(e)),(typeof r!="number"||n)&&(r=0),EA(e,t,r)>=0}const F$=Ji(function(e,t,r){var n,i;return Ni(t)?i=t:(t=Fh(t),n=t.slice(0,-1),t=t[t.length-1]),Ua(e,function(s){var o=i;if(!o){if(n&&n.length&&(s=vA(s,n)),s==null)return;o=s[t]}return o==null?o:o.apply(s,r)})});function rg(e,t){return Ua(e,Jv(t))}function B$(e,t){return Eu(e,lc(t))}function AA(e,t,r){var n=-1/0,i=-1/0,s,o;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=Fs(e)?e:Rc(e);for(var a=0,u=e.length;a<u;a++)s=e[a],s!=null&&s>n&&(n=s)}else t=bs(t,r),Mo(e,function(c,f,h){o=t(c,f,h),(o>i||o===-1/0&&n===-1/0)&&(n=c,i=o)});return n}function z$(e,t,r){var n=1/0,i=1/0,s,o;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=Fs(e)?e:Rc(e);for(var a=0,u=e.length;a<u;a++)s=e[a],s!=null&&s<n&&(n=s)}else t=bs(t,r),Mo(e,function(c,f,h){o=t(c,f,h),(o<i||o===1/0&&n===1/0)&&(n=c,i=o)});return n}var sle=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function TA(e){return e?ku(e)?Dh.call(e):Yv(e)?e.match(sle):Fs(e)?Ua(e,Zv):Rc(e):[]}function PA(e,t,r){if(t==null||r)return Fs(e)||(e=Rc(e)),e[Bp(e.length-1)];var n=TA(e),i=_s(n);t=Math.max(Math.min(t,i),0);for(var s=i-1,o=0;o<t;o++){var a=Bp(o,s),u=n[o];n[o]=n[a],n[a]=u}return n.slice(0,t)}function V$(e){return PA(e,1/0)}function G$(e,t,r){var n=0;return t=bs(t,r),rg(Ua(e,function(i,s,o){return{value:i,index:n++,criteria:t(i,s,o)}}).sort(function(i,s){var o=i.criteria,a=s.criteria;if(o!==a){if(o>a||o===void 0)return 1;if(o<a||a===void 0)return-1}return i.index-s.index}),"value")}function ng(e,t){return function(r,n,i){var s=t?[[],[]]:{};return n=bs(n,i),Mo(r,function(o,a){var u=n(o,a,r);e(s,o,u)}),s}}const $$=ng(function(e,t,r){Lu(e,r)?e[r].push(t):e[r]=[t]}),U$=ng(function(e,t,r){e[r]=t}),j$=ng(function(e,t,r){Lu(e,r)?e[r]++:e[r]=1}),H$=ng(function(e,t,r){e[r?0:1].push(t)},!0);function W$(e){return e==null?0:Fs(e)?e.length:fi(e).length}function ole(e,t,r){return t in r}const CA=Ji(function(e,t){var r={},n=t[0];if(e==null)return r;Ni(n)?(t.length>1&&(n=Bh(n,t[1])),t=Xl(e)):(n=ole,t=Oc(t,!1,!1),e=Object(e));for(var i=0,s=t.length;i<s;i++){var o=t[i],a=e[o];n(a,o,e)&&(r[o]=a)}return r}),X$=Ji(function(e,t){var r=t[0],n;return Ni(r)?(r=eg(r),t.length>1&&(n=t[1])):(t=Ua(Oc(t,!1,!1),String),r=function(i,s){return!so(t,s)}),CA(e,r,n)});function RA(e,t,r){return Dh.call(e,0,Math.max(0,e.length-(t==null||r?1:t)))}function vl(e,t,r){return e==null||e.length<1?t==null||r?void 0:[]:t==null||r?e[0]:RA(e,e.length-t)}function oc(e,t,r){return Dh.call(e,t==null||r?1:t)}function Y$(e,t,r){return e==null||e.length<1?t==null||r?void 0:[]:t==null||r?e[e.length-1]:oc(e,Math.max(0,e.length-t))}function K$(e){return Eu(e,Boolean)}function Z$(e,t){return Oc(e,t,!1)}const IA=Ji(function(e,t){return t=Oc(t,!0,!0),Eu(e,function(r){return!so(t,r)})}),J$=Ji(function(e,t){return IA(e,t)});function fh(e,t,r,n){J2(t)||(n=r,r=t,t=!1),r!=null&&(r=bs(r,n));for(var i=[],s=[],o=0,a=_s(e);o<a;o++){var u=e[o],c=r?r(u,o,e):u;t&&!r?((!o||s!==c)&&i.push(u),s=c):r?so(s,c)||(s.push(c),i.push(u)):so(i,u)||i.push(u)}return i}const Q$=Ji(function(e){return fh(Oc(e,!0,!0))});function eU(e){for(var t=[],r=arguments.length,n=0,i=_s(e);n<i;n++){var s=e[n];if(!so(t,s)){var o;for(o=1;o<r&&so(arguments[o],s);o++);o===r&&t.push(s)}}return t}function hh(e){for(var t=e&&AA(e,_s).length||0,r=Array(t),n=0;n<t;n++)r[n]=rg(e,n);return r}const tU=Ji(hh);function rU(e,t){for(var r={},n=0,i=_s(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r}function nU(e,t,r){t==null&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),s=0;s<n;s++,e+=r)i[s]=e;return i}function iU(e,t){if(t==null||t<1)return[];for(var r=[],n=0,i=e.length;n<i;)r.push(Dh.call(e,n,n+=t));return r}function OA(e,t){return e._chain?sn(t).chain():t}function MA(e){return Mo(ch(e),function(t){var r=sn[t]=e[t];sn.prototype[t]=function(){var n=[this._wrapped];return qce.apply(n,arguments),OA(this,r.apply(sn,n))}}),sn}Mo(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=Xv[e];sn.prototype[e]=function(){var r=this._wrapped;return r!=null&&(t.apply(r,arguments),(e==="shift"||e==="splice")&&r.length===0&&delete r[0]),OA(this,r)}});Mo(["concat","join","slice"],function(e){var t=Xv[e];sn.prototype[e]=function(){var r=this._wrapped;return r!=null&&(r=t.apply(r,arguments)),OA(this,r)}});const ale=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Y2,after:I$,all:Vp,allKeys:Xl,any:Gp,assign:Tl,before:bA,bind:yA,bindAll:S$,chain:w$,chunk:iU,clone:o$,collect:Ua,compact:K$,compose:R$,constant:iA,contains:so,countBy:j$,create:s$,debounce:P$,default:sn,defaults:dA,defer:A$,delay:_A,detect:lh,difference:IA,drop:oc,each:Mo,escape:v$,every:Vp,extend:hA,extendOwn:Tl,filter:Eu,find:lh,findIndex:tg,findKey:wA,findLastIndex:xA,findWhere:N$,first:vl,flatten:Z$,foldl:pl,foldr:zp,forEach:Mo,functions:ch,get:gA,groupBy:$$,has:u$,head:vl,identity:Zv,include:so,includes:so,indexBy:U$,indexOf:EA,initial:RA,inject:pl,intersection:eU,invert:lA,invoke:F$,isArguments:Kv,isArray:ku,isArrayBuffer:tA,isBoolean:J2,isDataView:uh,isDate:DG,isElement:qG,isEmpty:WG,isEqual:YG,isError:BG,isFinite:$G,isFunction:Ni,isMap:QG,isMatch:oA,isNaN:nA,isNull:NG,isNumber:Q2,isObject:Mu,isRegExp:FG,isSet:t$,isString:Yv,isSymbol:eA,isTypedArray:sA,isUndefined:Z2,isWeakMap:e$,isWeakSet:r$,iteratee:Qv,keys:fi,last:Y$,lastIndexOf:L$,map:Ua,mapObject:l$,matcher:lc,matches:lc,max:AA,memoize:E$,methods:ch,min:z$,mixin:MA,negate:eg,noop:mA,now:Pl,object:rU,omit:X$,once:O$,pairs:n$,partial:Ic,partition:H$,pick:CA,pluck:rg,property:Jv,propertyOf:f$,random:Bp,range:nU,reduce:pl,reduceRight:zp,reject:D$,rest:oc,restArguments:Ji,result:_$,sample:PA,select:Eu,shuffle:V$,size:W$,some:Gp,sortBy:G$,sortedIndex:SA,tail:oc,take:vl,tap:a$,template:y$,templateSettings:m$,throttle:T$,times:h$,toArray:TA,toPath:pA,transpose:hh,unescape:g$,union:Q$,uniq:fh,unique:fh,uniqueId:b$,unzip:hh,values:Rc,where:B$,without:J$,wrap:C$,zip:tU},Symbol.toStringTag,{value:"Module"}));var aE=MA(ale);aE._=aE;const ule=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Y2,after:I$,all:Vp,allKeys:Xl,any:Gp,assign:Tl,before:bA,bind:yA,bindAll:S$,chain:w$,chunk:iU,clone:o$,collect:Ua,compact:K$,compose:R$,constant:iA,contains:so,countBy:j$,create:s$,debounce:P$,default:aE,defaults:dA,defer:A$,delay:_A,detect:lh,difference:IA,drop:oc,each:Mo,escape:v$,every:Vp,extend:hA,extendOwn:Tl,filter:Eu,find:lh,findIndex:tg,findKey:wA,findLastIndex:xA,findWhere:N$,first:vl,flatten:Z$,foldl:pl,foldr:zp,forEach:Mo,functions:ch,get:gA,groupBy:$$,has:u$,head:vl,identity:Zv,include:so,includes:so,indexBy:U$,indexOf:EA,initial:RA,inject:pl,intersection:eU,invert:lA,invoke:F$,isArguments:Kv,isArray:ku,isArrayBuffer:tA,isBoolean:J2,isDataView:uh,isDate:DG,isElement:qG,isEmpty:WG,isEqual:YG,isError:BG,isFinite:$G,isFunction:Ni,isMap:QG,isMatch:oA,isNaN:nA,isNull:NG,isNumber:Q2,isObject:Mu,isRegExp:FG,isSet:t$,isString:Yv,isSymbol:eA,isTypedArray:sA,isUndefined:Z2,isWeakMap:e$,isWeakSet:r$,iteratee:Qv,keys:fi,last:Y$,lastIndexOf:L$,map:Ua,mapObject:l$,matcher:lc,matches:lc,max:AA,memoize:E$,methods:ch,min:z$,mixin:MA,negate:eg,noop:mA,now:Pl,object:rU,omit:X$,once:O$,pairs:n$,partial:Ic,partition:H$,pick:CA,pluck:rg,property:Jv,propertyOf:f$,random:Bp,range:nU,reduce:pl,reduceRight:zp,reject:D$,rest:oc,restArguments:Ji,result:_$,sample:PA,select:Eu,shuffle:V$,size:W$,some:Gp,sortBy:G$,sortedIndex:SA,tail:oc,take:vl,tap:a$,template:y$,templateSettings:m$,throttle:T$,times:h$,toArray:TA,toPath:pA,transpose:hh,unescape:g$,union:Q$,uniq:fh,unique:fh,uniqueId:b$,unzip:hh,values:Rc,where:B$,without:J$,wrap:C$,zip:tU},Symbol.toStringTag,{value:"Module"})),cle=are(ule);var bp={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var lle=bp.exports,pz;function sU(){return pz||(pz=1,function(e){(function(t,r){e.exports=t.document?r(t,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return r(n)}})(typeof window<"u"?window:lle,function(t,r){var n=[],i=Object.getPrototypeOf,s=n.slice,o=n.flat?function(v){return n.flat.call(v)}:function(v){return n.concat.apply([],v)},a=n.push,u=n.indexOf,c={},f=c.toString,h=c.hasOwnProperty,g=h.toString,y=g.call(Object),m={},_=function(w){return typeof w=="function"&&typeof w.nodeType!="number"&&typeof w.item!="function"},x=function(w){return w!=null&&w===w.window},S=t.document,E={type:!0,src:!0,nonce:!0,noModule:!0};function A(v,w,R){R=R||S;var k,D,F=R.createElement("script");if(F.text=v,w)for(k in E)D=w[k]||w.getAttribute&&w.getAttribute(k),D&&F.setAttribute(k,D);R.head.appendChild(F).parentNode.removeChild(F)}function T(v){return v==null?v+"":typeof v=="object"||typeof v=="function"?c[f.call(v)]||"object":typeof v}var I="3.7.1",N=/HTML$/i,p=function(v,w){return new p.fn.init(v,w)};p.fn=p.prototype={jquery:I,constructor:p,length:0,toArray:function(){return s.call(this)},get:function(v){return v==null?s.call(this):v<0?this[v+this.length]:this[v]},pushStack:function(v){var w=p.merge(this.constructor(),v);return w.prevObject=this,w},each:function(v){return p.each(this,v)},map:function(v){return this.pushStack(p.map(this,function(w,R){return v.call(w,R,w)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(p.grep(this,function(v,w){return(w+1)%2}))},odd:function(){return this.pushStack(p.grep(this,function(v,w){return w%2}))},eq:function(v){var w=this.length,R=+v+(v<0?w:0);return this.pushStack(R>=0&&R<w?[this[R]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},p.extend=p.fn.extend=function(){var v,w,R,k,D,F,$=arguments[0]||{},he=1,oe=arguments.length,Ee=!1;for(typeof $=="boolean"&&(Ee=$,$=arguments[he]||{},he++),typeof $!="object"&&!_($)&&($={}),he===oe&&($=this,he--);he<oe;he++)if((v=arguments[he])!=null)for(w in v)k=v[w],!(w==="__proto__"||$===k)&&(Ee&&k&&(p.isPlainObject(k)||(D=Array.isArray(k)))?(R=$[w],D&&!Array.isArray(R)?F=[]:!D&&!p.isPlainObject(R)?F={}:F=R,D=!1,$[w]=p.extend(Ee,F,k)):k!==void 0&&($[w]=k));return $},p.extend({expando:"jQuery"+(I+Math.random()).replace(/\D/g,""),isReady:!0,error:function(v){throw new Error(v)},noop:function(){},isPlainObject:function(v){var w,R;return!v||f.call(v)!=="[object Object]"?!1:(w=i(v),w?(R=h.call(w,"constructor")&&w.constructor,typeof R=="function"&&g.call(R)===y):!0)},isEmptyObject:function(v){var w;for(w in v)return!1;return!0},globalEval:function(v,w,R){A(v,{nonce:w&&w.nonce},R)},each:function(v,w){var R,k=0;if(P(v))for(R=v.length;k<R&&w.call(v[k],k,v[k])!==!1;k++);else for(k in v)if(w.call(v[k],k,v[k])===!1)break;return v},text:function(v){var w,R="",k=0,D=v.nodeType;if(!D)for(;w=v[k++];)R+=p.text(w);return D===1||D===11?v.textContent:D===9?v.documentElement.textContent:D===3||D===4?v.nodeValue:R},makeArray:function(v,w){var R=w||[];return v!=null&&(P(Object(v))?p.merge(R,typeof v=="string"?[v]:v):a.call(R,v)),R},inArray:function(v,w,R){return w==null?-1:u.call(w,v,R)},isXMLDoc:function(v){var w=v&&v.namespaceURI,R=v&&(v.ownerDocument||v).documentElement;return!N.test(w||R&&R.nodeName||"HTML")},merge:function(v,w){for(var R=+w.length,k=0,D=v.length;k<R;k++)v[D++]=w[k];return v.length=D,v},grep:function(v,w,R){for(var k,D=[],F=0,$=v.length,he=!R;F<$;F++)k=!w(v[F],F),k!==he&&D.push(v[F]);return D},map:function(v,w,R){var k,D,F=0,$=[];if(P(v))for(k=v.length;F<k;F++)D=w(v[F],F,R),D!=null&&$.push(D);else for(F in v)D=w(v[F],F,R),D!=null&&$.push(D);return o($)},guid:1,support:m}),typeof Symbol=="function"&&(p.fn[Symbol.iterator]=n[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(v,w){c["[object "+w+"]"]=w.toLowerCase()});function P(v){var w=!!v&&"length"in v&&v.length,R=T(v);return _(v)||x(v)?!1:R==="array"||w===0||typeof w=="number"&&w>0&&w-1 in v}function O(v,w){return v.nodeName&&v.nodeName.toLowerCase()===w.toLowerCase()}var q=n.pop,V=n.sort,W=n.splice,G="[\\x20\\t\\r\\n\\f]",J=new RegExp("^"+G+"+|((?:^|[^\\\\])(?:\\\\.)*)"+G+"+$","g");p.contains=function(v,w){var R=w&&w.parentNode;return v===R||!!(R&&R.nodeType===1&&(v.contains?v.contains(R):v.compareDocumentPosition&&v.compareDocumentPosition(R)&16))};var se=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function K(v,w){return w?v==="\0"?"�":v.slice(0,-1)+"\\"+v.charCodeAt(v.length-1).toString(16)+" ":"\\"+v}p.escapeSelector=function(v){return(v+"").replace(se,K)};var U=S,j=a;(function(){var v,w,R,k,D,F=j,$,he,oe,Ee,De,Ge=p.expando,Me=0,ut=0,St=Gu(),ur=Gu(),sr=Gu(),ai=Gu(),Nn=function(ie,be){return ie===be&&(D=!0),0},Bs="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",zs="(?:\\\\[\\da-fA-F]{1,6}"+G+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Tr="\\["+G+"*("+zs+")(?:"+G+"*([*^$|!~]?=)"+G+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+zs+"))|)"+G+"*\\]",Ho=":("+zs+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Tr+")*)|.*)\\)|)",Pr=new RegExp(G+"+","g"),un=new RegExp("^"+G+"*,"+G+"*"),Bu=new RegExp("^"+G+"*([>+~]|"+G+")"+G+"*"),Bc=new RegExp(G+"|>"),xs=new RegExp(Ho),wa=new RegExp("^"+zs+"$"),ns={ID:new RegExp("^#("+zs+")"),CLASS:new RegExp("^\\.("+zs+")"),TAG:new RegExp("^("+zs+"|[*])"),ATTR:new RegExp("^"+Tr),PSEUDO:new RegExp("^"+Ho),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+G+"*(even|odd|(([+-]|)(\\d*)n|)"+G+"*(?:([+-]|)"+G+"*(\\d+)|))"+G+"*\\)|)","i"),bool:new RegExp("^(?:"+Bs+")$","i"),needsContext:new RegExp("^"+G+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+G+"*((?:-\\d)?\\d*)"+G+"*\\)|)(?=[^-]|$)","i")},go=/^(?:input|select|textarea|button)$/i,Wo=/^h\d$/i,Ci=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,zu=/[+~]/,mo=new RegExp("\\\\[\\da-fA-F]{1,6}"+G+"?|\\\\([^\\r\\n\\f])","g"),Vs=function(ie,be){var Oe="0x"+ie.slice(1)-65536;return be||(Oe<0?String.fromCharCode(Oe+65536):String.fromCharCode(Oe>>10|55296,Oe&1023|56320))},Bi=function(){Xo()},uf=xa(function(ie){return ie.disabled===!0&&O(ie,"fieldset")},{dir:"parentNode",next:"legend"});function Vu(){try{return $.activeElement}catch{}}try{F.apply(n=s.call(U.childNodes),U.childNodes),n[U.childNodes.length].nodeType}catch{F={apply:function(be,Oe){j.apply(be,s.call(Oe))},call:function(be){j.apply(be,s.call(arguments,1))}}}function Yr(ie,be,Oe,ke){var ee,ye,ve,Ue,Qe,At,Pt,xt=be&&be.ownerDocument,hr=be?be.nodeType:9;if(Oe=Oe||[],typeof ie!="string"||!ie||hr!==1&&hr!==9&&hr!==11)return Oe;if(!ke&&(Xo(be),be=be||$,oe)){if(hr!==11&&(Qe=Ci.exec(ie)))if(ee=Qe[1]){if(hr===9)if(ve=be.getElementById(ee)){if(ve.id===ee)return F.call(Oe,ve),Oe}else return Oe;else if(xt&&(ve=xt.getElementById(ee))&&Yr.contains(be,ve)&&ve.id===ee)return F.call(Oe,ve),Oe}else{if(Qe[2])return F.apply(Oe,be.getElementsByTagName(ie)),Oe;if((ee=Qe[3])&&be.getElementsByClassName)return F.apply(Oe,be.getElementsByClassName(ee)),Oe}if(!ai[ie+" "]&&(!Ee||!Ee.test(ie))){if(Pt=ie,xt=be,hr===1&&(Bc.test(ie)||Bu.test(ie))){for(xt=zu.test(ie)&&cf(be.parentNode)||be,(xt!=be||!m.scope)&&((Ue=be.getAttribute("id"))?Ue=p.escapeSelector(Ue):be.setAttribute("id",Ue=Ge)),At=tu(ie),ye=At.length;ye--;)At[ye]=(Ue?"#"+Ue:":scope")+" "+Es(At[ye]);Pt=At.join(",")}try{return F.apply(Oe,xt.querySelectorAll(Pt)),Oe}catch{ai(ie,!0)}finally{Ue===Ge&&be.removeAttribute("id")}}}return hd(ie.replace(J,"$1"),be,Oe,ke)}function Gu(){var ie=[];function be(Oe,ke){return ie.push(Oe+" ")>w.cacheLength&&delete be[ie.shift()],be[Oe+" "]=ke}return be}function Ss(ie){return ie[Ge]=!0,ie}function eu(ie){var be=$.createElement("fieldset");try{return!!ie(be)}catch{return!1}finally{be.parentNode&&be.parentNode.removeChild(be),be=null}}function Rg(ie){return function(be){return O(be,"input")&&be.type===ie}}function Ig(ie){return function(be){return(O(be,"input")||O(be,"button"))&&be.type===ie}}function ld(ie){return function(be){return"form"in be?be.parentNode&&be.disabled===!1?"label"in be?"label"in be.parentNode?be.parentNode.disabled===ie:be.disabled===ie:be.isDisabled===ie||be.isDisabled!==!ie&&uf(be)===ie:be.disabled===ie:"label"in be?be.disabled===ie:!1}}function is(ie){return Ss(function(be){return be=+be,Ss(function(Oe,ke){for(var ee,ye=ie([],Oe.length,be),ve=ye.length;ve--;)Oe[ee=ye[ve]]&&(Oe[ee]=!(ke[ee]=Oe[ee]))})})}function cf(ie){return ie&&typeof ie.getElementsByTagName<"u"&&ie}function Xo(ie){var be,Oe=ie?ie.ownerDocument||ie:U;return Oe==$||Oe.nodeType!==9||!Oe.documentElement||($=Oe,he=$.documentElement,oe=!p.isXMLDoc($),De=he.matches||he.webkitMatchesSelector||he.msMatchesSelector,he.msMatchesSelector&&U!=$&&(be=$.defaultView)&&be.top!==be&&be.addEventListener("unload",Bi),m.getById=eu(function(ke){return he.appendChild(ke).id=p.expando,!$.getElementsByName||!$.getElementsByName(p.expando).length}),m.disconnectedMatch=eu(function(ke){return De.call(ke,"*")}),m.scope=eu(function(){return $.querySelectorAll(":scope")}),m.cssHas=eu(function(){try{return $.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),m.getById?(w.filter.ID=function(ke){var ee=ke.replace(mo,Vs);return function(ye){return ye.getAttribute("id")===ee}},w.find.ID=function(ke,ee){if(typeof ee.getElementById<"u"&&oe){var ye=ee.getElementById(ke);return ye?[ye]:[]}}):(w.filter.ID=function(ke){var ee=ke.replace(mo,Vs);return function(ye){var ve=typeof ye.getAttributeNode<"u"&&ye.getAttributeNode("id");return ve&&ve.value===ee}},w.find.ID=function(ke,ee){if(typeof ee.getElementById<"u"&&oe){var ye,ve,Ue,Qe=ee.getElementById(ke);if(Qe){if(ye=Qe.getAttributeNode("id"),ye&&ye.value===ke)return[Qe];for(Ue=ee.getElementsByName(ke),ve=0;Qe=Ue[ve++];)if(ye=Qe.getAttributeNode("id"),ye&&ye.value===ke)return[Qe]}return[]}}),w.find.TAG=function(ke,ee){return typeof ee.getElementsByTagName<"u"?ee.getElementsByTagName(ke):ee.querySelectorAll(ke)},w.find.CLASS=function(ke,ee){if(typeof ee.getElementsByClassName<"u"&&oe)return ee.getElementsByClassName(ke)},Ee=[],eu(function(ke){var ee;he.appendChild(ke).innerHTML="<a id='"+Ge+"' href='' disabled='disabled'></a><select id='"+Ge+"-\r\\' disabled='disabled'><option selected=''></option></select>",ke.querySelectorAll("[selected]").length||Ee.push("\\["+G+"*(?:value|"+Bs+")"),ke.querySelectorAll("[id~="+Ge+"-]").length||Ee.push("~="),ke.querySelectorAll("a#"+Ge+"+*").length||Ee.push(".#.+[+~]"),ke.querySelectorAll(":checked").length||Ee.push(":checked"),ee=$.createElement("input"),ee.setAttribute("type","hidden"),ke.appendChild(ee).setAttribute("name","D"),he.appendChild(ke).disabled=!0,ke.querySelectorAll(":disabled").length!==2&&Ee.push(":enabled",":disabled"),ee=$.createElement("input"),ee.setAttribute("name",""),ke.appendChild(ee),ke.querySelectorAll("[name='']").length||Ee.push("\\["+G+"*name"+G+"*="+G+`*(?:''|"")`)}),m.cssHas||Ee.push(":has"),Ee=Ee.length&&new RegExp(Ee.join("|")),Nn=function(ke,ee){if(ke===ee)return D=!0,0;var ye=!ke.compareDocumentPosition-!ee.compareDocumentPosition;return ye||(ye=(ke.ownerDocument||ke)==(ee.ownerDocument||ee)?ke.compareDocumentPosition(ee):1,ye&1||!m.sortDetached&&ee.compareDocumentPosition(ke)===ye?ke===$||ke.ownerDocument==U&&Yr.contains(U,ke)?-1:ee===$||ee.ownerDocument==U&&Yr.contains(U,ee)?1:k?u.call(k,ke)-u.call(k,ee):0:ye&4?-1:1)}),$}Yr.matches=function(ie,be){return Yr(ie,null,null,be)},Yr.matchesSelector=function(ie,be){if(Xo(ie),oe&&!ai[be+" "]&&(!Ee||!Ee.test(be)))try{var Oe=De.call(ie,be);if(Oe||m.disconnectedMatch||ie.document&&ie.document.nodeType!==11)return Oe}catch{ai(be,!0)}return Yr(be,$,null,[ie]).length>0},Yr.contains=function(ie,be){return(ie.ownerDocument||ie)!=$&&Xo(ie),p.contains(ie,be)},Yr.attr=function(ie,be){(ie.ownerDocument||ie)!=$&&Xo(ie);var Oe=w.attrHandle[be.toLowerCase()],ke=Oe&&h.call(w.attrHandle,be.toLowerCase())?Oe(ie,be,!oe):void 0;return ke!==void 0?ke:ie.getAttribute(be)},Yr.error=function(ie){throw new Error("Syntax error, unrecognized expression: "+ie)},p.uniqueSort=function(ie){var be,Oe=[],ke=0,ee=0;if(D=!m.sortStable,k=!m.sortStable&&s.call(ie,0),V.call(ie,Nn),D){for(;be=ie[ee++];)be===ie[ee]&&(ke=Oe.push(ee));for(;ke--;)W.call(ie,Oe[ke],1)}return k=null,ie},p.fn.uniqueSort=function(){return this.pushStack(p.uniqueSort(s.apply(this)))},w=p.expr={cacheLength:50,createPseudo:Ss,match:ns,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ie){return ie[1]=ie[1].replace(mo,Vs),ie[3]=(ie[3]||ie[4]||ie[5]||"").replace(mo,Vs),ie[2]==="~="&&(ie[3]=" "+ie[3]+" "),ie.slice(0,4)},CHILD:function(ie){return ie[1]=ie[1].toLowerCase(),ie[1].slice(0,3)==="nth"?(ie[3]||Yr.error(ie[0]),ie[4]=+(ie[4]?ie[5]+(ie[6]||1):2*(ie[3]==="even"||ie[3]==="odd")),ie[5]=+(ie[7]+ie[8]||ie[3]==="odd")):ie[3]&&Yr.error(ie[0]),ie},PSEUDO:function(ie){var be,Oe=!ie[6]&&ie[2];return ns.CHILD.test(ie[0])?null:(ie[3]?ie[2]=ie[4]||ie[5]||"":Oe&&xs.test(Oe)&&(be=tu(Oe,!0))&&(be=Oe.indexOf(")",Oe.length-be)-Oe.length)&&(ie[0]=ie[0].slice(0,be),ie[2]=Oe.slice(0,be)),ie.slice(0,3))}},filter:{TAG:function(ie){var be=ie.replace(mo,Vs).toLowerCase();return ie==="*"?function(){return!0}:function(Oe){return O(Oe,be)}},CLASS:function(ie){var be=St[ie+" "];return be||(be=new RegExp("(^|"+G+")"+ie+"("+G+"|$)"))&&St(ie,function(Oe){return be.test(typeof Oe.className=="string"&&Oe.className||typeof Oe.getAttribute<"u"&&Oe.getAttribute("class")||"")})},ATTR:function(ie,be,Oe){return function(ke){var ee=Yr.attr(ke,ie);return ee==null?be==="!=":be?(ee+="",be==="="?ee===Oe:be==="!="?ee!==Oe:be==="^="?Oe&&ee.indexOf(Oe)===0:be==="*="?Oe&&ee.indexOf(Oe)>-1:be==="$="?Oe&&ee.slice(-Oe.length)===Oe:be==="~="?(" "+ee.replace(Pr," ")+" ").indexOf(Oe)>-1:be==="|="?ee===Oe||ee.slice(0,Oe.length+1)===Oe+"-":!1):!0}},CHILD:function(ie,be,Oe,ke,ee){var ye=ie.slice(0,3)!=="nth",ve=ie.slice(-4)!=="last",Ue=be==="of-type";return ke===1&&ee===0?function(Qe){return!!Qe.parentNode}:function(Qe,At,Pt){var xt,hr,Ht,_r,ui,gi=ye!==ve?"nextSibling":"previousSibling",ci=Qe.parentNode,Vi=Ue&&Qe.nodeName.toLowerCase(),yo=!Pt&&!Ue,ir=!1;if(ci){if(ye){for(;gi;){for(Ht=Qe;Ht=Ht[gi];)if(Ue?O(Ht,Vi):Ht.nodeType===1)return!1;ui=gi=ie==="only"&&!ui&&"nextSibling"}return!0}if(ui=[ve?ci.firstChild:ci.lastChild],ve&&yo){for(hr=ci[Ge]||(ci[Ge]={}),xt=hr[ie]||[],_r=xt[0]===Me&&xt[1],ir=_r&&xt[2],Ht=_r&&ci.childNodes[_r];Ht=++_r&&Ht&&Ht[gi]||(ir=_r=0)||ui.pop();)if(Ht.nodeType===1&&++ir&&Ht===Qe){hr[ie]=[Me,_r,ir];break}}else if(yo&&(hr=Qe[Ge]||(Qe[Ge]={}),xt=hr[ie]||[],_r=xt[0]===Me&&xt[1],ir=_r),ir===!1)for(;(Ht=++_r&&Ht&&Ht[gi]||(ir=_r=0)||ui.pop())&&!((Ue?O(Ht,Vi):Ht.nodeType===1)&&++ir&&(yo&&(hr=Ht[Ge]||(Ht[Ge]={}),hr[ie]=[Me,ir]),Ht===Qe)););return ir-=ee,ir===ke||ir%ke===0&&ir/ke>=0}}},PSEUDO:function(ie,be){var Oe,ke=w.pseudos[ie]||w.setFilters[ie.toLowerCase()]||Yr.error("unsupported pseudo: "+ie);return ke[Ge]?ke(be):ke.length>1?(Oe=[ie,ie,"",be],w.setFilters.hasOwnProperty(ie.toLowerCase())?Ss(function(ee,ye){for(var ve,Ue=ke(ee,be),Qe=Ue.length;Qe--;)ve=u.call(ee,Ue[Qe]),ee[ve]=!(ye[ve]=Ue[Qe])}):function(ee){return ke(ee,0,Oe)}):ke}},pseudos:{not:Ss(function(ie){var be=[],Oe=[],ke=ff(ie.replace(J,"$1"));return ke[Ge]?Ss(function(ee,ye,ve,Ue){for(var Qe,At=ke(ee,null,Ue,[]),Pt=ee.length;Pt--;)(Qe=At[Pt])&&(ee[Pt]=!(ye[Pt]=Qe))}):function(ee,ye,ve){return be[0]=ee,ke(be,null,ve,Oe),be[0]=null,!Oe.pop()}}),has:Ss(function(ie){return function(be){return Yr(ie,be).length>0}}),contains:Ss(function(ie){return ie=ie.replace(mo,Vs),function(be){return(be.textContent||p.text(be)).indexOf(ie)>-1}}),lang:Ss(function(ie){return wa.test(ie||"")||Yr.error("unsupported lang: "+ie),ie=ie.replace(mo,Vs).toLowerCase(),function(be){var Oe;do if(Oe=oe?be.lang:be.getAttribute("xml:lang")||be.getAttribute("lang"))return Oe=Oe.toLowerCase(),Oe===ie||Oe.indexOf(ie+"-")===0;while((be=be.parentNode)&&be.nodeType===1);return!1}}),target:function(ie){var be=t.location&&t.location.hash;return be&&be.slice(1)===ie.id},root:function(ie){return ie===he},focus:function(ie){return ie===Vu()&&$.hasFocus()&&!!(ie.type||ie.href||~ie.tabIndex)},enabled:ld(!1),disabled:ld(!0),checked:function(ie){return O(ie,"input")&&!!ie.checked||O(ie,"option")&&!!ie.selected},selected:function(ie){return ie.parentNode&&ie.parentNode.selectedIndex,ie.selected===!0},empty:function(ie){for(ie=ie.firstChild;ie;ie=ie.nextSibling)if(ie.nodeType<6)return!1;return!0},parent:function(ie){return!w.pseudos.empty(ie)},header:function(ie){return Wo.test(ie.nodeName)},input:function(ie){return go.test(ie.nodeName)},button:function(ie){return O(ie,"input")&&ie.type==="button"||O(ie,"button")},text:function(ie){var be;return O(ie,"input")&&ie.type==="text"&&((be=ie.getAttribute("type"))==null||be.toLowerCase()==="text")},first:is(function(){return[0]}),last:is(function(ie,be){return[be-1]}),eq:is(function(ie,be,Oe){return[Oe<0?Oe+be:Oe]}),even:is(function(ie,be){for(var Oe=0;Oe<be;Oe+=2)ie.push(Oe);return ie}),odd:is(function(ie,be){for(var Oe=1;Oe<be;Oe+=2)ie.push(Oe);return ie}),lt:is(function(ie,be,Oe){var ke;for(Oe<0?ke=Oe+be:Oe>be?ke=be:ke=Oe;--ke>=0;)ie.push(ke);return ie}),gt:is(function(ie,be,Oe){for(var ke=Oe<0?Oe+be:Oe;++ke<be;)ie.push(ke);return ie})}},w.pseudos.nth=w.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[v]=Rg(v);for(v in{submit:!0,reset:!0})w.pseudos[v]=Ig(v);function zc(){}zc.prototype=w.filters=w.pseudos,w.setFilters=new zc;function tu(ie,be){var Oe,ke,ee,ye,ve,Ue,Qe,At=ur[ie+" "];if(At)return be?0:At.slice(0);for(ve=ie,Ue=[],Qe=w.preFilter;ve;){(!Oe||(ke=un.exec(ve)))&&(ke&&(ve=ve.slice(ke[0].length)||ve),Ue.push(ee=[])),Oe=!1,(ke=Bu.exec(ve))&&(Oe=ke.shift(),ee.push({value:Oe,type:ke[0].replace(J," ")}),ve=ve.slice(Oe.length));for(ye in w.filter)(ke=ns[ye].exec(ve))&&(!Qe[ye]||(ke=Qe[ye](ke)))&&(Oe=ke.shift(),ee.push({value:Oe,type:ye,matches:ke}),ve=ve.slice(Oe.length));if(!Oe)break}return be?ve.length:ve?Yr.error(ie):ur(ie,Ue).slice(0)}function Es(ie){for(var be=0,Oe=ie.length,ke="";be<Oe;be++)ke+=ie[be].value;return ke}function xa(ie,be,Oe){var ke=be.dir,ee=be.next,ye=ee||ke,ve=Oe&&ye==="parentNode",Ue=ut++;return be.first?function(Qe,At,Pt){for(;Qe=Qe[ke];)if(Qe.nodeType===1||ve)return ie(Qe,At,Pt);return!1}:function(Qe,At,Pt){var xt,hr,Ht=[Me,Ue];if(Pt){for(;Qe=Qe[ke];)if((Qe.nodeType===1||ve)&&ie(Qe,At,Pt))return!0}else for(;Qe=Qe[ke];)if(Qe.nodeType===1||ve)if(hr=Qe[Ge]||(Qe[Ge]={}),ee&&O(Qe,ee))Qe=Qe[ke]||Qe;else{if((xt=hr[ye])&&xt[0]===Me&&xt[1]===Ue)return Ht[2]=xt[2];if(hr[ye]=Ht,Ht[2]=ie(Qe,At,Pt))return!0}return!1}}function lf(ie){return ie.length>1?function(be,Oe,ke){for(var ee=ie.length;ee--;)if(!ie[ee](be,Oe,ke))return!1;return!0}:ie[0]}function Og(ie,be,Oe){for(var ke=0,ee=be.length;ke<ee;ke++)Yr(ie,be[ke],Oe);return Oe}function Vc(ie,be,Oe,ke,ee){for(var ye,ve=[],Ue=0,Qe=ie.length,At=be!=null;Ue<Qe;Ue++)(ye=ie[Ue])&&(!Oe||Oe(ye,ke,ee))&&(ve.push(ye),At&&be.push(Ue));return ve}function Yo(ie,be,Oe,ke,ee,ye){return ke&&!ke[Ge]&&(ke=Yo(ke)),ee&&!ee[Ge]&&(ee=Yo(ee,ye)),Ss(function(ve,Ue,Qe,At){var Pt,xt,hr,Ht,_r=[],ui=[],gi=Ue.length,ci=ve||Og(be||"*",Qe.nodeType?[Qe]:Qe,[]),Vi=ie&&(ve||!be)?Vc(ci,_r,ie,Qe,At):ci;if(Oe?(Ht=ee||(ve?ie:gi||ke)?[]:Ue,Oe(Vi,Ht,Qe,At)):Ht=Vi,ke)for(Pt=Vc(Ht,ui),ke(Pt,[],Qe,At),xt=Pt.length;xt--;)(hr=Pt[xt])&&(Ht[ui[xt]]=!(Vi[ui[xt]]=hr));if(ve){if(ee||ie){if(ee){for(Pt=[],xt=Ht.length;xt--;)(hr=Ht[xt])&&Pt.push(Vi[xt]=hr);ee(null,Ht=[],Pt,At)}for(xt=Ht.length;xt--;)(hr=Ht[xt])&&(Pt=ee?u.call(ve,hr):_r[xt])>-1&&(ve[Pt]=!(Ue[Pt]=hr))}}else Ht=Vc(Ht===Ue?Ht.splice(gi,Ht.length):Ht),ee?ee(null,Ue,Ht,At):F.apply(Ue,Ht)})}function zi(ie){for(var be,Oe,ke,ee=ie.length,ye=w.relative[ie[0].type],ve=ye||w.relative[" "],Ue=ye?1:0,Qe=xa(function(xt){return xt===be},ve,!0),At=xa(function(xt){return u.call(be,xt)>-1},ve,!0),Pt=[function(xt,hr,Ht){var _r=!ye&&(Ht||hr!=R)||((be=hr).nodeType?Qe(xt,hr,Ht):At(xt,hr,Ht));return be=null,_r}];Ue<ee;Ue++)if(Oe=w.relative[ie[Ue].type])Pt=[xa(lf(Pt),Oe)];else{if(Oe=w.filter[ie[Ue].type].apply(null,ie[Ue].matches),Oe[Ge]){for(ke=++Ue;ke<ee&&!w.relative[ie[ke].type];ke++);return Yo(Ue>1&&lf(Pt),Ue>1&&Es(ie.slice(0,Ue-1).concat({value:ie[Ue-2].type===" "?"*":""})).replace(J,"$1"),Oe,Ue<ke&&zi(ie.slice(Ue,ke)),ke<ee&&zi(ie=ie.slice(ke)),ke<ee&&Es(ie))}Pt.push(Oe)}return lf(Pt)}function fd(ie,be){var Oe=be.length>0,ke=ie.length>0,ee=function(ye,ve,Ue,Qe,At){var Pt,xt,hr,Ht=0,_r="0",ui=ye&&[],gi=[],ci=R,Vi=ye||ke&&w.find.TAG("*",At),yo=Me+=ci==null?1:Math.random()||.1,ir=Vi.length;for(At&&(R=ve==$||ve||At);_r!==ir&&(Pt=Vi[_r])!=null;_r++){if(ke&&Pt){for(xt=0,!ve&&Pt.ownerDocument!=$&&(Xo(Pt),Ue=!oe);hr=ie[xt++];)if(hr(Pt,ve||$,Ue)){F.call(Qe,Pt);break}At&&(Me=yo)}Oe&&((Pt=!hr&&Pt)&&Ht--,ye&&ui.push(Pt))}if(Ht+=_r,Oe&&_r!==Ht){for(xt=0;hr=be[xt++];)hr(ui,gi,ve,Ue);if(ye){if(Ht>0)for(;_r--;)ui[_r]||gi[_r]||(gi[_r]=q.call(Qe));gi=Vc(gi)}F.apply(Qe,gi),At&&!ye&&gi.length>0&&Ht+be.length>1&&p.uniqueSort(Qe)}return At&&(Me=yo,R=ci),ui};return Oe?Ss(ee):ee}function ff(ie,be){var Oe,ke=[],ee=[],ye=sr[ie+" "];if(!ye){for(be||(be=tu(ie)),Oe=be.length;Oe--;)ye=zi(be[Oe]),ye[Ge]?ke.push(ye):ee.push(ye);ye=sr(ie,fd(ee,ke)),ye.selector=ie}return ye}function hd(ie,be,Oe,ke){var ee,ye,ve,Ue,Qe,At=typeof ie=="function"&&ie,Pt=!ke&&tu(ie=At.selector||ie);if(Oe=Oe||[],Pt.length===1){if(ye=Pt[0]=Pt[0].slice(0),ye.length>2&&(ve=ye[0]).type==="ID"&&be.nodeType===9&&oe&&w.relative[ye[1].type]){if(be=(w.find.ID(ve.matches[0].replace(mo,Vs),be)||[])[0],be)At&&(be=be.parentNode);else return Oe;ie=ie.slice(ye.shift().value.length)}for(ee=ns.needsContext.test(ie)?0:ye.length;ee--&&(ve=ye[ee],!w.relative[Ue=ve.type]);)if((Qe=w.find[Ue])&&(ke=Qe(ve.matches[0].replace(mo,Vs),zu.test(ye[0].type)&&cf(be.parentNode)||be))){if(ye.splice(ee,1),ie=ke.length&&Es(ye),!ie)return F.apply(Oe,ke),Oe;break}}return(At||ff(ie,Pt))(ke,be,!oe,Oe,!be||zu.test(ie)&&cf(be.parentNode)||be),Oe}m.sortStable=Ge.split("").sort(Nn).join("")===Ge,Xo(),m.sortDetached=eu(function(ie){return ie.compareDocumentPosition($.createElement("fieldset"))&1}),p.find=Yr,p.expr[":"]=p.expr.pseudos,p.unique=p.uniqueSort,Yr.compile=ff,Yr.select=hd,Yr.setDocument=Xo,Yr.tokenize=tu,Yr.escape=p.escapeSelector,Yr.getText=p.text,Yr.isXML=p.isXMLDoc,Yr.selectors=p.expr,Yr.support=p.support,Yr.uniqueSort=p.uniqueSort})();var Q=function(v,w,R){for(var k=[],D=R!==void 0;(v=v[w])&&v.nodeType!==9;)if(v.nodeType===1){if(D&&p(v).is(R))break;k.push(v)}return k},de=function(v,w){for(var R=[];v;v=v.nextSibling)v.nodeType===1&&v!==w&&R.push(v);return R},ce=p.expr.match.needsContext,Te=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Se(v,w,R){return _(w)?p.grep(v,function(k,D){return!!w.call(k,D,k)!==R}):w.nodeType?p.grep(v,function(k){return k===w!==R}):typeof w!="string"?p.grep(v,function(k){return u.call(w,k)>-1!==R}):p.filter(w,v,R)}p.filter=function(v,w,R){var k=w[0];return R&&(v=":not("+v+")"),w.length===1&&k.nodeType===1?p.find.matchesSelector(k,v)?[k]:[]:p.find.matches(v,p.grep(w,function(D){return D.nodeType===1}))},p.fn.extend({find:function(v){var w,R,k=this.length,D=this;if(typeof v!="string")return this.pushStack(p(v).filter(function(){for(w=0;w<k;w++)if(p.contains(D[w],this))return!0}));for(R=this.pushStack([]),w=0;w<k;w++)p.find(v,D[w],R);return k>1?p.uniqueSort(R):R},filter:function(v){return this.pushStack(Se(this,v||[],!1))},not:function(v){return this.pushStack(Se(this,v||[],!0))},is:function(v){return!!Se(this,typeof v=="string"&&ce.test(v)?p(v):v||[],!1).length}});var re,ae=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,ne=p.fn.init=function(v,w,R){var k,D;if(!v)return this;if(R=R||re,typeof v=="string")if(v[0]==="<"&&v[v.length-1]===">"&&v.length>=3?k=[null,v,null]:k=ae.exec(v),k&&(k[1]||!w))if(k[1]){if(w=w instanceof p?w[0]:w,p.merge(this,p.parseHTML(k[1],w&&w.nodeType?w.ownerDocument||w:S,!0)),Te.test(k[1])&&p.isPlainObject(w))for(k in w)_(this[k])?this[k](w[k]):this.attr(k,w[k]);return this}else return D=S.getElementById(k[2]),D&&(this[0]=D,this.length=1),this;else return!w||w.jquery?(w||R).find(v):this.constructor(w).find(v);else{if(v.nodeType)return this[0]=v,this.length=1,this;if(_(v))return R.ready!==void 0?R.ready(v):v(p)}return p.makeArray(v,this)};ne.prototype=p.fn,re=p(S);var te=/^(?:parents|prev(?:Until|All))/,le={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(v){var w=p(v,this),R=w.length;return this.filter(function(){for(var k=0;k<R;k++)if(p.contains(this,w[k]))return!0})},closest:function(v,w){var R,k=0,D=this.length,F=[],$=typeof v!="string"&&p(v);if(!ce.test(v)){for(;k<D;k++)for(R=this[k];R&&R!==w;R=R.parentNode)if(R.nodeType<11&&($?$.index(R)>-1:R.nodeType===1&&p.find.matchesSelector(R,v))){F.push(R);break}}return this.pushStack(F.length>1?p.uniqueSort(F):F)},index:function(v){return v?typeof v=="string"?u.call(p(v),this[0]):u.call(this,v.jquery?v[0]:v):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(v,w){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(v,w))))},addBack:function(v){return this.add(v==null?this.prevObject:this.prevObject.filter(v))}});function Xe(v,w){for(;(v=v[w])&&v.nodeType!==1;);return v}p.each({parent:function(v){var w=v.parentNode;return w&&w.nodeType!==11?w:null},parents:function(v){return Q(v,"parentNode")},parentsUntil:function(v,w,R){return Q(v,"parentNode",R)},next:function(v){return Xe(v,"nextSibling")},prev:function(v){return Xe(v,"previousSibling")},nextAll:function(v){return Q(v,"nextSibling")},prevAll:function(v){return Q(v,"previousSibling")},nextUntil:function(v,w,R){return Q(v,"nextSibling",R)},prevUntil:function(v,w,R){return Q(v,"previousSibling",R)},siblings:function(v){return de((v.parentNode||{}).firstChild,v)},children:function(v){return de(v.firstChild)},contents:function(v){return v.contentDocument!=null&&i(v.contentDocument)?v.contentDocument:(O(v,"template")&&(v=v.content||v),p.merge([],v.childNodes))}},function(v,w){p.fn[v]=function(R,k){var D=p.map(this,w,R);return v.slice(-5)!=="Until"&&(k=R),k&&typeof k=="string"&&(D=p.filter(k,D)),this.length>1&&(le[v]||p.uniqueSort(D),te.test(v)&&D.reverse()),this.pushStack(D)}});var Ne=/[^\x20\t\r\n\f]+/g;function Re(v){var w={};return p.each(v.match(Ne)||[],function(R,k){w[k]=!0}),w}p.Callbacks=function(v){v=typeof v=="string"?Re(v):p.extend({},v);var w,R,k,D,F=[],$=[],he=-1,oe=function(){for(D=D||v.once,k=w=!0;$.length;he=-1)for(R=$.shift();++he<F.length;)F[he].apply(R[0],R[1])===!1&&v.stopOnFalse&&(he=F.length,R=!1);v.memory||(R=!1),w=!1,D&&(R?F=[]:F="")},Ee={add:function(){return F&&(R&&!w&&(he=F.length-1,$.push(R)),function De(Ge){p.each(Ge,function(Me,ut){_(ut)?(!v.unique||!Ee.has(ut))&&F.push(ut):ut&&ut.length&&T(ut)!=="string"&&De(ut)})}(arguments),R&&!w&&oe()),this},remove:function(){return p.each(arguments,function(De,Ge){for(var Me;(Me=p.inArray(Ge,F,Me))>-1;)F.splice(Me,1),Me<=he&&he--}),this},has:function(De){return De?p.inArray(De,F)>-1:F.length>0},empty:function(){return F&&(F=[]),this},disable:function(){return D=$=[],F=R="",this},disabled:function(){return!F},lock:function(){return D=$=[],!R&&!w&&(F=R=""),this},locked:function(){return!!D},fireWith:function(De,Ge){return D||(Ge=Ge||[],Ge=[De,Ge.slice?Ge.slice():Ge],$.push(Ge),w||oe()),this},fire:function(){return Ee.fireWith(this,arguments),this},fired:function(){return!!k}};return Ee};function nt(v){return v}function Ve(v){throw v}function L(v,w,R,k){var D;try{v&&_(D=v.promise)?D.call(v).done(w).fail(R):v&&_(D=v.then)?D.call(v,w,R):w.apply(void 0,[v].slice(k))}catch(F){R.apply(void 0,[F])}}p.extend({Deferred:function(v){var w=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],R="pending",k={state:function(){return R},always:function(){return D.done(arguments).fail(arguments),this},catch:function(F){return k.then(null,F)},pipe:function(){var F=arguments;return p.Deferred(function($){p.each(w,function(he,oe){var Ee=_(F[oe[4]])&&F[oe[4]];D[oe[1]](function(){var De=Ee&&Ee.apply(this,arguments);De&&_(De.promise)?De.promise().progress($.notify).done($.resolve).fail($.reject):$[oe[0]+"With"](this,Ee?[De]:arguments)})}),F=null}).promise()},then:function(F,$,he){var oe=0;function Ee(De,Ge,Me,ut){return function(){var St=this,ur=arguments,sr=function(){var Nn,Bs;if(!(De<oe)){if(Nn=Me.apply(St,ur),Nn===Ge.promise())throw new TypeError("Thenable self-resolution");Bs=Nn&&(typeof Nn=="object"||typeof Nn=="function")&&Nn.then,_(Bs)?ut?Bs.call(Nn,Ee(oe,Ge,nt,ut),Ee(oe,Ge,Ve,ut)):(oe++,Bs.call(Nn,Ee(oe,Ge,nt,ut),Ee(oe,Ge,Ve,ut),Ee(oe,Ge,nt,Ge.notifyWith))):(Me!==nt&&(St=void 0,ur=[Nn]),(ut||Ge.resolveWith)(St,ur))}},ai=ut?sr:function(){try{sr()}catch(Nn){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(Nn,ai.error),De+1>=oe&&(Me!==Ve&&(St=void 0,ur=[Nn]),Ge.rejectWith(St,ur))}};De?ai():(p.Deferred.getErrorHook?ai.error=p.Deferred.getErrorHook():p.Deferred.getStackHook&&(ai.error=p.Deferred.getStackHook()),t.setTimeout(ai))}}return p.Deferred(function(De){w[0][3].add(Ee(0,De,_(he)?he:nt,De.notifyWith)),w[1][3].add(Ee(0,De,_(F)?F:nt)),w[2][3].add(Ee(0,De,_($)?$:Ve))}).promise()},promise:function(F){return F!=null?p.extend(F,k):k}},D={};return p.each(w,function(F,$){var he=$[2],oe=$[5];k[$[1]]=he.add,oe&&he.add(function(){R=oe},w[3-F][2].disable,w[3-F][3].disable,w[0][2].lock,w[0][3].lock),he.add($[3].fire),D[$[0]]=function(){return D[$[0]+"With"](this===D?void 0:this,arguments),this},D[$[0]+"With"]=he.fireWith}),k.promise(D),v&&v.call(D,D),D},when:function(v){var w=arguments.length,R=w,k=Array(R),D=s.call(arguments),F=p.Deferred(),$=function(he){return function(oe){k[he]=this,D[he]=arguments.length>1?s.call(arguments):oe,--w||F.resolveWith(k,D)}};if(w<=1&&(L(v,F.done($(R)).resolve,F.reject,!w),F.state()==="pending"||_(D[R]&&D[R].then)))return F.then();for(;R--;)L(D[R],$(R),F.reject);return F.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(v,w){t.console&&t.console.warn&&v&&B.test(v.name)&&t.console.warn("jQuery.Deferred exception: "+v.message,v.stack,w)},p.readyException=function(v){t.setTimeout(function(){throw v})};var H=p.Deferred();p.fn.ready=function(v){return H.then(v).catch(function(w){p.readyException(w)}),this},p.extend({isReady:!1,readyWait:1,ready:function(v){(v===!0?--p.readyWait:p.isReady)||(p.isReady=!0,!(v!==!0&&--p.readyWait>0)&&H.resolveWith(S,[p]))}}),p.ready.then=H.then;function X(){S.removeEventListener("DOMContentLoaded",X),t.removeEventListener("load",X),p.ready()}S.readyState==="complete"||S.readyState!=="loading"&&!S.documentElement.doScroll?t.setTimeout(p.ready):(S.addEventListener("DOMContentLoaded",X),t.addEventListener("load",X));var xe=function(v,w,R,k,D,F,$){var he=0,oe=v.length,Ee=R==null;if(T(R)==="object"){D=!0;for(he in R)xe(v,w,he,R[he],!0,F,$)}else if(k!==void 0&&(D=!0,_(k)||($=!0),Ee&&($?(w.call(v,k),w=null):(Ee=w,w=function(De,Ge,Me){return Ee.call(p(De),Me)})),w))for(;he<oe;he++)w(v[he],R,$?k:k.call(v[he],he,w(v[he],R)));return D?v:Ee?w.call(v):oe?w(v[0],R):F},ue=/^-ms-/,Ae=/-([a-z])/g;function Ce(v,w){return w.toUpperCase()}function Be(v){return v.replace(ue,"ms-").replace(Ae,Ce)}var Le=function(v){return v.nodeType===1||v.nodeType===9||!+v.nodeType};function Ie(){this.expando=p.expando+Ie.uid++}Ie.uid=1,Ie.prototype={cache:function(v){var w=v[this.expando];return w||(w={},Le(v)&&(v.nodeType?v[this.expando]=w:Object.defineProperty(v,this.expando,{value:w,configurable:!0}))),w},set:function(v,w,R){var k,D=this.cache(v);if(typeof w=="string")D[Be(w)]=R;else for(k in w)D[Be(k)]=w[k];return D},get:function(v,w){return w===void 0?this.cache(v):v[this.expando]&&v[this.expando][Be(w)]},access:function(v,w,R){return w===void 0||w&&typeof w=="string"&&R===void 0?this.get(v,w):(this.set(v,w,R),R!==void 0?R:w)},remove:function(v,w){var R,k=v[this.expando];if(k!==void 0){if(w!==void 0)for(Array.isArray(w)?w=w.map(Be):(w=Be(w),w=w in k?[w]:w.match(Ne)||[]),R=w.length;R--;)delete k[w[R]];(w===void 0||p.isEmptyObject(k))&&(v.nodeType?v[this.expando]=void 0:delete v[this.expando])}},hasData:function(v){var w=v[this.expando];return w!==void 0&&!p.isEmptyObject(w)}};var we=new Ie,je=new Ie,ct=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,yt=/[A-Z]/g;function ft(v){return v==="true"?!0:v==="false"?!1:v==="null"?null:v===+v+""?+v:ct.test(v)?JSON.parse(v):v}function it(v,w,R){var k;if(R===void 0&&v.nodeType===1)if(k="data-"+w.replace(yt,"-$&").toLowerCase(),R=v.getAttribute(k),typeof R=="string"){try{R=ft(R)}catch{}je.set(v,w,R)}else R=void 0;return R}p.extend({hasData:function(v){return je.hasData(v)||we.hasData(v)},data:function(v,w,R){return je.access(v,w,R)},removeData:function(v,w){je.remove(v,w)},_data:function(v,w,R){return we.access(v,w,R)},_removeData:function(v,w){we.remove(v,w)}}),p.fn.extend({data:function(v,w){var R,k,D,F=this[0],$=F&&F.attributes;if(v===void 0){if(this.length&&(D=je.get(F),F.nodeType===1&&!we.get(F,"hasDataAttrs"))){for(R=$.length;R--;)$[R]&&(k=$[R].name,k.indexOf("data-")===0&&(k=Be(k.slice(5)),it(F,k,D[k])));we.set(F,"hasDataAttrs",!0)}return D}return typeof v=="object"?this.each(function(){je.set(this,v)}):xe(this,function(he){var oe;if(F&&he===void 0)return oe=je.get(F,v),oe!==void 0||(oe=it(F,v),oe!==void 0)?oe:void 0;this.each(function(){je.set(this,v,he)})},null,w,arguments.length>1,null,!0)},removeData:function(v){return this.each(function(){je.remove(this,v)})}}),p.extend({queue:function(v,w,R){var k;if(v)return w=(w||"fx")+"queue",k=we.get(v,w),R&&(!k||Array.isArray(R)?k=we.access(v,w,p.makeArray(R)):k.push(R)),k||[]},dequeue:function(v,w){w=w||"fx";var R=p.queue(v,w),k=R.length,D=R.shift(),F=p._queueHooks(v,w),$=function(){p.dequeue(v,w)};D==="inprogress"&&(D=R.shift(),k--),D&&(w==="fx"&&R.unshift("inprogress"),delete F.stop,D.call(v,$,F)),!k&&F&&F.empty.fire()},_queueHooks:function(v,w){var R=w+"queueHooks";return we.get(v,R)||we.access(v,R,{empty:p.Callbacks("once memory").add(function(){we.remove(v,[w+"queue",R])})})}}),p.fn.extend({queue:function(v,w){var R=2;return typeof v!="string"&&(w=v,v="fx",R--),arguments.length<R?p.queue(this[0],v):w===void 0?this:this.each(function(){var k=p.queue(this,v,w);p._queueHooks(this,v),v==="fx"&&k[0]!=="inprogress"&&p.dequeue(this,v)})},dequeue:function(v){return this.each(function(){p.dequeue(this,v)})},clearQueue:function(v){return this.queue(v||"fx",[])},promise:function(v,w){var R,k=1,D=p.Deferred(),F=this,$=this.length,he=function(){--k||D.resolveWith(F,[F])};for(typeof v!="string"&&(w=v,v=void 0),v=v||"fx";$--;)R=we.get(F[$],v+"queueHooks"),R&&R.empty&&(k++,R.empty.add(he));return he(),D.promise(w)}});var Wt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,yr=new RegExp("^(?:([+-])=|)("+Wt+")([a-z%]*)$","i"),er=["Top","Right","Bottom","Left"],lr=S.documentElement,Lr=function(v){return p.contains(v.ownerDocument,v)},Br={composed:!0};lr.getRootNode&&(Lr=function(v){return p.contains(v.ownerDocument,v)||v.getRootNode(Br)===v.ownerDocument});var wn=function(v,w){return v=w||v,v.style.display==="none"||v.style.display===""&&Lr(v)&&p.css(v,"display")==="none"};function rr(v,w,R,k){var D,F,$=20,he=k?function(){return k.cur()}:function(){return p.css(v,w,"")},oe=he(),Ee=R&&R[3]||(p.cssNumber[w]?"":"px"),De=v.nodeType&&(p.cssNumber[w]||Ee!=="px"&&+oe)&&yr.exec(p.css(v,w));if(De&&De[3]!==Ee){for(oe=oe/2,Ee=Ee||De[3],De=+oe||1;$--;)p.style(v,w,De+Ee),(1-F)*(1-(F=he()/oe||.5))<=0&&($=0),De=De/F;De=De*2,p.style(v,w,De+Ee),R=R||[]}return R&&(De=+De||+oe||0,D=R[1]?De+(R[1]+1)*R[2]:+R[2],k&&(k.unit=Ee,k.start=De,k.end=D)),D}var Or={};function mn(v){var w,R=v.ownerDocument,k=v.nodeName,D=Or[k];return D||(w=R.body.appendChild(R.createElement(k)),D=p.css(w,"display"),w.parentNode.removeChild(w),D==="none"&&(D="block"),Or[k]=D,D)}function yn(v,w){for(var R,k,D=[],F=0,$=v.length;F<$;F++)k=v[F],k.style&&(R=k.style.display,w?(R==="none"&&(D[F]=we.get(k,"display")||null,D[F]||(k.style.display="")),k.style.display===""&&wn(k)&&(D[F]=mn(k))):R!=="none"&&(D[F]="none",we.set(k,"display",R)));for(F=0;F<$;F++)D[F]!=null&&(v[F].style.display=D[F]);return v}p.fn.extend({show:function(){return yn(this,!0)},hide:function(){return yn(this)},toggle:function(v){return typeof v=="boolean"?v?this.show():this.hide():this.each(function(){wn(this)?p(this).show():p(this).hide()})}});var vn=/^(?:checkbox|radio)$/i,Un=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ri=/^$|^module$|\/(?:java|ecma)script/i;(function(){var v=S.createDocumentFragment(),w=v.appendChild(S.createElement("div")),R=S.createElement("input");R.setAttribute("type","radio"),R.setAttribute("checked","checked"),R.setAttribute("name","t"),w.appendChild(R),m.checkClone=w.cloneNode(!0).cloneNode(!0).lastChild.checked,w.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!w.cloneNode(!0).lastChild.defaultValue,w.innerHTML="<option></option>",m.option=!!w.lastChild})();var zt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};zt.tbody=zt.tfoot=zt.colgroup=zt.caption=zt.thead,zt.th=zt.td,m.option||(zt.optgroup=zt.option=[1,"<select multiple='multiple'>","</select>"]);function Bt(v,w){var R;return typeof v.getElementsByTagName<"u"?R=v.getElementsByTagName(w||"*"):typeof v.querySelectorAll<"u"?R=v.querySelectorAll(w||"*"):R=[],w===void 0||w&&O(v,w)?p.merge([v],R):R}function zr(v,w){for(var R=0,k=v.length;R<k;R++)we.set(v[R],"globalEval",!w||we.get(w[R],"globalEval"))}var Bn=/<|&#?\w+;/;function xn(v,w,R,k,D){for(var F,$,he,oe,Ee,De,Ge=w.createDocumentFragment(),Me=[],ut=0,St=v.length;ut<St;ut++)if(F=v[ut],F||F===0)if(T(F)==="object")p.merge(Me,F.nodeType?[F]:F);else if(!Bn.test(F))Me.push(w.createTextNode(F));else{for($=$||Ge.appendChild(w.createElement("div")),he=(Un.exec(F)||["",""])[1].toLowerCase(),oe=zt[he]||zt._default,$.innerHTML=oe[1]+p.htmlPrefilter(F)+oe[2],De=oe[0];De--;)$=$.lastChild;p.merge(Me,$.childNodes),$=Ge.firstChild,$.textContent=""}for(Ge.textContent="",ut=0;F=Me[ut++];){if(k&&p.inArray(F,k)>-1){D&&D.push(F);continue}if(Ee=Lr(F),$=Bt(Ge.appendChild(F),"script"),Ee&&zr($),R)for(De=0;F=$[De++];)ri.test(F.type||"")&&R.push(F)}return Ge}var jr=/^([^.]*)(?:\.(.+)|)/;function jn(){return!0}function hi(){return!1}function Qr(v,w,R,k,D,F){var $,he;if(typeof w=="object"){typeof R!="string"&&(k=k||R,R=void 0);for(he in w)Qr(v,he,R,k,w[he],F);return v}if(k==null&&D==null?(D=R,k=R=void 0):D==null&&(typeof R=="string"?(D=k,k=void 0):(D=k,k=R,R=void 0)),D===!1)D=hi;else if(!D)return v;return F===1&&($=D,D=function(oe){return p().off(oe),$.apply(this,arguments)},D.guid=$.guid||($.guid=p.guid++)),v.each(function(){p.event.add(this,w,D,k,R)})}p.event={global:{},add:function(v,w,R,k,D){var F,$,he,oe,Ee,De,Ge,Me,ut,St,ur,sr=we.get(v);if(Le(v))for(R.handler&&(F=R,R=F.handler,D=F.selector),D&&p.find.matchesSelector(lr,D),R.guid||(R.guid=p.guid++),(oe=sr.events)||(oe=sr.events=Object.create(null)),($=sr.handle)||($=sr.handle=function(ai){return typeof p<"u"&&p.event.triggered!==ai.type?p.event.dispatch.apply(v,arguments):void 0}),w=(w||"").match(Ne)||[""],Ee=w.length;Ee--;)he=jr.exec(w[Ee])||[],ut=ur=he[1],St=(he[2]||"").split(".").sort(),ut&&(Ge=p.event.special[ut]||{},ut=(D?Ge.delegateType:Ge.bindType)||ut,Ge=p.event.special[ut]||{},De=p.extend({type:ut,origType:ur,data:k,handler:R,guid:R.guid,selector:D,needsContext:D&&p.expr.match.needsContext.test(D),namespace:St.join(".")},F),(Me=oe[ut])||(Me=oe[ut]=[],Me.delegateCount=0,(!Ge.setup||Ge.setup.call(v,k,St,$)===!1)&&v.addEventListener&&v.addEventListener(ut,$)),Ge.add&&(Ge.add.call(v,De),De.handler.guid||(De.handler.guid=R.guid)),D?Me.splice(Me.delegateCount++,0,De):Me.push(De),p.event.global[ut]=!0)},remove:function(v,w,R,k,D){var F,$,he,oe,Ee,De,Ge,Me,ut,St,ur,sr=we.hasData(v)&&we.get(v);if(!(!sr||!(oe=sr.events))){for(w=(w||"").match(Ne)||[""],Ee=w.length;Ee--;){if(he=jr.exec(w[Ee])||[],ut=ur=he[1],St=(he[2]||"").split(".").sort(),!ut){for(ut in oe)p.event.remove(v,ut+w[Ee],R,k,!0);continue}for(Ge=p.event.special[ut]||{},ut=(k?Ge.delegateType:Ge.bindType)||ut,Me=oe[ut]||[],he=he[2]&&new RegExp("(^|\\.)"+St.join("\\.(?:.*\\.|)")+"(\\.|$)"),$=F=Me.length;F--;)De=Me[F],(D||ur===De.origType)&&(!R||R.guid===De.guid)&&(!he||he.test(De.namespace))&&(!k||k===De.selector||k==="**"&&De.selector)&&(Me.splice(F,1),De.selector&&Me.delegateCount--,Ge.remove&&Ge.remove.call(v,De));$&&!Me.length&&((!Ge.teardown||Ge.teardown.call(v,St,sr.handle)===!1)&&p.removeEvent(v,ut,sr.handle),delete oe[ut])}p.isEmptyObject(oe)&&we.remove(v,"handle events")}},dispatch:function(v){var w,R,k,D,F,$,he=new Array(arguments.length),oe=p.event.fix(v),Ee=(we.get(this,"events")||Object.create(null))[oe.type]||[],De=p.event.special[oe.type]||{};for(he[0]=oe,w=1;w<arguments.length;w++)he[w]=arguments[w];if(oe.delegateTarget=this,!(De.preDispatch&&De.preDispatch.call(this,oe)===!1)){for($=p.event.handlers.call(this,oe,Ee),w=0;(D=$[w++])&&!oe.isPropagationStopped();)for(oe.currentTarget=D.elem,R=0;(F=D.handlers[R++])&&!oe.isImmediatePropagationStopped();)(!oe.rnamespace||F.namespace===!1||oe.rnamespace.test(F.namespace))&&(oe.handleObj=F,oe.data=F.data,k=((p.event.special[F.origType]||{}).handle||F.handler).apply(D.elem,he),k!==void 0&&(oe.result=k)===!1&&(oe.preventDefault(),oe.stopPropagation()));return De.postDispatch&&De.postDispatch.call(this,oe),oe.result}},handlers:function(v,w){var R,k,D,F,$,he=[],oe=w.delegateCount,Ee=v.target;if(oe&&Ee.nodeType&&!(v.type==="click"&&v.button>=1)){for(;Ee!==this;Ee=Ee.parentNode||this)if(Ee.nodeType===1&&!(v.type==="click"&&Ee.disabled===!0)){for(F=[],$={},R=0;R<oe;R++)k=w[R],D=k.selector+" ",$[D]===void 0&&($[D]=k.needsContext?p(D,this).index(Ee)>-1:p.find(D,this,null,[Ee]).length),$[D]&&F.push(k);F.length&&he.push({elem:Ee,handlers:F})}}return Ee=this,oe<w.length&&he.push({elem:Ee,handlers:w.slice(oe)}),he},addProp:function(v,w){Object.defineProperty(p.Event.prototype,v,{enumerable:!0,configurable:!0,get:_(w)?function(){if(this.originalEvent)return w(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[v]},set:function(R){Object.defineProperty(this,v,{enumerable:!0,configurable:!0,writable:!0,value:R})}})},fix:function(v){return v[p.expando]?v:new p.Event(v)},special:{load:{noBubble:!0},click:{setup:function(v){var w=this||v;return vn.test(w.type)&&w.click&&O(w,"input")&&Hn(w,"click",!0),!1},trigger:function(v){var w=this||v;return vn.test(w.type)&&w.click&&O(w,"input")&&Hn(w,"click"),!0},_default:function(v){var w=v.target;return vn.test(w.type)&&w.click&&O(w,"input")&&we.get(w,"click")||O(w,"a")}},beforeunload:{postDispatch:function(v){v.result!==void 0&&v.originalEvent&&(v.originalEvent.returnValue=v.result)}}}};function Hn(v,w,R){if(!R){we.get(v,w)===void 0&&p.event.add(v,w,jn);return}we.set(v,w,!1),p.event.add(v,w,{namespace:!1,handler:function(k){var D,F=we.get(this,w);if(k.isTrigger&1&&this[w]){if(F)(p.event.special[w]||{}).delegateType&&k.stopPropagation();else if(F=s.call(arguments),we.set(this,w,F),this[w](),D=we.get(this,w),we.set(this,w,!1),F!==D)return k.stopImmediatePropagation(),k.preventDefault(),D}else F&&(we.set(this,w,p.event.trigger(F[0],F.slice(1),this)),k.stopPropagation(),k.isImmediatePropagationStopped=jn)}})}p.removeEvent=function(v,w,R){v.removeEventListener&&v.removeEventListener(w,R)},p.Event=function(v,w){if(!(this instanceof p.Event))return new p.Event(v,w);v&&v.type?(this.originalEvent=v,this.type=v.type,this.isDefaultPrevented=v.defaultPrevented||v.defaultPrevented===void 0&&v.returnValue===!1?jn:hi,this.target=v.target&&v.target.nodeType===3?v.target.parentNode:v.target,this.currentTarget=v.currentTarget,this.relatedTarget=v.relatedTarget):this.type=v,w&&p.extend(this,w),this.timeStamp=v&&v.timeStamp||Date.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:hi,isPropagationStopped:hi,isImmediatePropagationStopped:hi,isSimulated:!1,preventDefault:function(){var v=this.originalEvent;this.isDefaultPrevented=jn,v&&!this.isSimulated&&v.preventDefault()},stopPropagation:function(){var v=this.originalEvent;this.isPropagationStopped=jn,v&&!this.isSimulated&&v.stopPropagation()},stopImmediatePropagation:function(){var v=this.originalEvent;this.isImmediatePropagationStopped=jn,v&&!this.isSimulated&&v.stopImmediatePropagation(),this.stopPropagation()}},p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},p.event.addProp),p.each({focus:"focusin",blur:"focusout"},function(v,w){function R(k){if(S.documentMode){var D=we.get(this,"handle"),F=p.event.fix(k);F.type=k.type==="focusin"?"focus":"blur",F.isSimulated=!0,D(k),F.target===F.currentTarget&&D(F)}else p.event.simulate(w,k.target,p.event.fix(k))}p.event.special[v]={setup:function(){var k;if(Hn(this,v,!0),S.documentMode)k=we.get(this,w),k||this.addEventListener(w,R),we.set(this,w,(k||0)+1);else return!1},trigger:function(){return Hn(this,v),!0},teardown:function(){var k;if(S.documentMode)k=we.get(this,w)-1,k?we.set(this,w,k):(this.removeEventListener(w,R),we.remove(this,w));else return!1},_default:function(k){return we.get(k.target,v)},delegateType:w},p.event.special[w]={setup:function(){var k=this.ownerDocument||this.document||this,D=S.documentMode?this:k,F=we.get(D,w);F||(S.documentMode?this.addEventListener(w,R):k.addEventListener(v,R,!0)),we.set(D,w,(F||0)+1)},teardown:function(){var k=this.ownerDocument||this.document||this,D=S.documentMode?this:k,F=we.get(D,w)-1;F?we.set(D,w,F):(S.documentMode?this.removeEventListener(w,R):k.removeEventListener(v,R,!0),we.remove(D,w))}}}),p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(v,w){p.event.special[v]={delegateType:w,bindType:w,handle:function(R){var k,D=this,F=R.relatedTarget,$=R.handleObj;return(!F||F!==D&&!p.contains(D,F))&&(R.type=$.origType,k=$.handler.apply(this,arguments),R.type=w),k}}}),p.fn.extend({on:function(v,w,R,k){return Qr(this,v,w,R,k)},one:function(v,w,R,k){return Qr(this,v,w,R,k,1)},off:function(v,w,R){var k,D;if(v&&v.preventDefault&&v.handleObj)return k=v.handleObj,p(v.delegateTarget).off(k.namespace?k.origType+"."+k.namespace:k.origType,k.selector,k.handler),this;if(typeof v=="object"){for(D in v)this.off(D,w,v[D]);return this}return(w===!1||typeof w=="function")&&(R=w,w=void 0),R===!1&&(R=hi),this.each(function(){p.event.remove(this,v,R,w)})}});var kn=/<script|<style|<link/i,di=/checked\s*(?:[^=]|=\s*.checked.)/i,Ye=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Et(v,w){return O(v,"table")&&O(w.nodeType!==11?w:w.firstChild,"tr")&&p(v).children("tbody")[0]||v}function Rt(v){return v.type=(v.getAttribute("type")!==null)+"/"+v.type,v}function kt(v){return(v.type||"").slice(0,5)==="true/"?v.type=v.type.slice(5):v.removeAttribute("type"),v}function Lt(v,w){var R,k,D,F,$,he,oe;if(w.nodeType===1){if(we.hasData(v)&&(F=we.get(v),oe=F.events,oe)){we.remove(w,"handle events");for(D in oe)for(R=0,k=oe[D].length;R<k;R++)p.event.add(w,D,oe[D][R])}je.hasData(v)&&($=je.access(v),he=p.extend({},$),je.set(w,he))}}function at(v,w){var R=w.nodeName.toLowerCase();R==="input"&&vn.test(v.type)?w.checked=v.checked:(R==="input"||R==="textarea")&&(w.defaultValue=v.defaultValue)}function We(v,w,R,k){w=o(w);var D,F,$,he,oe,Ee,De=0,Ge=v.length,Me=Ge-1,ut=w[0],St=_(ut);if(St||Ge>1&&typeof ut=="string"&&!m.checkClone&&di.test(ut))return v.each(function(ur){var sr=v.eq(ur);St&&(w[0]=ut.call(this,ur,sr.html())),We(sr,w,R,k)});if(Ge&&(D=xn(w,v[0].ownerDocument,!1,v,k),F=D.firstChild,D.childNodes.length===1&&(D=F),F||k)){for($=p.map(Bt(D,"script"),Rt),he=$.length;De<Ge;De++)oe=D,De!==Me&&(oe=p.clone(oe,!0,!0),he&&p.merge($,Bt(oe,"script"))),R.call(v[De],oe,De);if(he)for(Ee=$[$.length-1].ownerDocument,p.map($,kt),De=0;De<he;De++)oe=$[De],ri.test(oe.type||"")&&!we.access(oe,"globalEval")&&p.contains(Ee,oe)&&(oe.src&&(oe.type||"").toLowerCase()!=="module"?p._evalUrl&&!oe.noModule&&p._evalUrl(oe.src,{nonce:oe.nonce||oe.getAttribute("nonce")},Ee):A(oe.textContent.replace(Ye,""),oe,Ee))}return v}function _t(v,w,R){for(var k,D=w?p.filter(w,v):v,F=0;(k=D[F])!=null;F++)!R&&k.nodeType===1&&p.cleanData(Bt(k)),k.parentNode&&(R&&Lr(k)&&zr(Bt(k,"script")),k.parentNode.removeChild(k));return v}p.extend({htmlPrefilter:function(v){return v},clone:function(v,w,R){var k,D,F,$,he=v.cloneNode(!0),oe=Lr(v);if(!m.noCloneChecked&&(v.nodeType===1||v.nodeType===11)&&!p.isXMLDoc(v))for($=Bt(he),F=Bt(v),k=0,D=F.length;k<D;k++)at(F[k],$[k]);if(w)if(R)for(F=F||Bt(v),$=$||Bt(he),k=0,D=F.length;k<D;k++)Lt(F[k],$[k]);else Lt(v,he);return $=Bt(he,"script"),$.length>0&&zr($,!oe&&Bt(v,"script")),he},cleanData:function(v){for(var w,R,k,D=p.event.special,F=0;(R=v[F])!==void 0;F++)if(Le(R)){if(w=R[we.expando]){if(w.events)for(k in w.events)D[k]?p.event.remove(R,k):p.removeEvent(R,k,w.handle);R[we.expando]=void 0}R[je.expando]&&(R[je.expando]=void 0)}}}),p.fn.extend({detach:function(v){return _t(this,v,!0)},remove:function(v){return _t(this,v)},text:function(v){return xe(this,function(w){return w===void 0?p.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=w)})},null,v,arguments.length)},append:function(){return We(this,arguments,function(v){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var w=Et(this,v);w.appendChild(v)}})},prepend:function(){return We(this,arguments,function(v){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var w=Et(this,v);w.insertBefore(v,w.firstChild)}})},before:function(){return We(this,arguments,function(v){this.parentNode&&this.parentNode.insertBefore(v,this)})},after:function(){return We(this,arguments,function(v){this.parentNode&&this.parentNode.insertBefore(v,this.nextSibling)})},empty:function(){for(var v,w=0;(v=this[w])!=null;w++)v.nodeType===1&&(p.cleanData(Bt(v,!1)),v.textContent="");return this},clone:function(v,w){return v=v??!1,w=w??v,this.map(function(){return p.clone(this,v,w)})},html:function(v){return xe(this,function(w){var R=this[0]||{},k=0,D=this.length;if(w===void 0&&R.nodeType===1)return R.innerHTML;if(typeof w=="string"&&!kn.test(w)&&!zt[(Un.exec(w)||["",""])[1].toLowerCase()]){w=p.htmlPrefilter(w);try{for(;k<D;k++)R=this[k]||{},R.nodeType===1&&(p.cleanData(Bt(R,!1)),R.innerHTML=w);R=0}catch{}}R&&this.empty().append(w)},null,v,arguments.length)},replaceWith:function(){var v=[];return We(this,arguments,function(w){var R=this.parentNode;p.inArray(this,v)<0&&(p.cleanData(Bt(this)),R&&R.replaceChild(w,this))},v)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(v,w){p.fn[v]=function(R){for(var k,D=[],F=p(R),$=F.length-1,he=0;he<=$;he++)k=he===$?this:this.clone(!0),p(F[he])[w](k),a.apply(D,k.get());return this.pushStack(D)}});var Tt=new RegExp("^("+Wt+")(?!px)[a-z%]+$","i"),Vt=/^--/,an=function(v){var w=v.ownerDocument.defaultView;return(!w||!w.opener)&&(w=t),w.getComputedStyle(v)},Wn=function(v,w,R){var k,D,F={};for(D in w)F[D]=v.style[D],v.style[D]=w[D];k=R.call(v);for(D in w)v.style[D]=F[D];return k},Mt=new RegExp(er.join("|"),"i");(function(){function v(){if(Ee){oe.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ee.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",lr.appendChild(oe).appendChild(Ee);var De=t.getComputedStyle(Ee);R=De.top!=="1%",he=w(De.marginLeft)===12,Ee.style.right="60%",F=w(De.right)===36,k=w(De.width)===36,Ee.style.position="absolute",D=w(Ee.offsetWidth/3)===12,lr.removeChild(oe),Ee=null}}function w(De){return Math.round(parseFloat(De))}var R,k,D,F,$,he,oe=S.createElement("div"),Ee=S.createElement("div");Ee.style&&(Ee.style.backgroundClip="content-box",Ee.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle=Ee.style.backgroundClip==="content-box",p.extend(m,{boxSizingReliable:function(){return v(),k},pixelBoxStyles:function(){return v(),F},pixelPosition:function(){return v(),R},reliableMarginLeft:function(){return v(),he},scrollboxSize:function(){return v(),D},reliableTrDimensions:function(){var De,Ge,Me,ut;return $==null&&(De=S.createElement("table"),Ge=S.createElement("tr"),Me=S.createElement("div"),De.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ge.style.cssText="box-sizing:content-box;border:1px solid",Ge.style.height="1px",Me.style.height="9px",Me.style.display="block",lr.appendChild(De).appendChild(Ge).appendChild(Me),ut=t.getComputedStyle(Ge),$=parseInt(ut.height,10)+parseInt(ut.borderTopWidth,10)+parseInt(ut.borderBottomWidth,10)===Ge.offsetHeight,lr.removeChild(De)),$}}))})();function en(v,w,R){var k,D,F,$,he=Vt.test(w),oe=v.style;return R=R||an(v),R&&($=R.getPropertyValue(w)||R[w],he&&$&&($=$.replace(J,"$1")||void 0),$===""&&!Lr(v)&&($=p.style(v,w)),!m.pixelBoxStyles()&&Tt.test($)&&Mt.test(w)&&(k=oe.width,D=oe.minWidth,F=oe.maxWidth,oe.minWidth=oe.maxWidth=oe.width=$,$=R.width,oe.width=k,oe.minWidth=D,oe.maxWidth=F)),$!==void 0?$+"":$}function Er(v,w){return{get:function(){if(v()){delete this.get;return}return(this.get=w).apply(this,arguments)}}}var Nr=["Webkit","Moz","ms"],Vr=S.createElement("div").style,Ar={};function Sn(v){for(var w=v[0].toUpperCase()+v.slice(1),R=Nr.length;R--;)if(v=Nr[R]+w,v in Vr)return v}function Xt(v){var w=p.cssProps[v]||Ar[v];return w||(v in Vr?v:Ar[v]=Sn(v)||v)}var pi=/^(none|table(?!-c[ea]).+)/,wi={position:"absolute",visibility:"hidden",display:"block"},Fi={letterSpacing:"0",fontWeight:"400"};function Ze(v,w,R){var k=yr.exec(w);return k?Math.max(0,k[2]-(R||0))+(k[3]||"px"):w}function vt(v,w,R,k,D,F){var $=w==="width"?1:0,he=0,oe=0,Ee=0;if(R===(k?"border":"content"))return 0;for(;$<4;$+=2)R==="margin"&&(Ee+=p.css(v,R+er[$],!0,D)),k?(R==="content"&&(oe-=p.css(v,"padding"+er[$],!0,D)),R!=="margin"&&(oe-=p.css(v,"border"+er[$]+"Width",!0,D))):(oe+=p.css(v,"padding"+er[$],!0,D),R!=="padding"?oe+=p.css(v,"border"+er[$]+"Width",!0,D):he+=p.css(v,"border"+er[$]+"Width",!0,D));return!k&&F>=0&&(oe+=Math.max(0,Math.ceil(v["offset"+w[0].toUpperCase()+w.slice(1)]-F-oe-he-.5))||0),oe+Ee}function ht(v,w,R){var k=an(v),D=!m.boxSizingReliable()||R,F=D&&p.css(v,"boxSizing",!1,k)==="border-box",$=F,he=en(v,w,k),oe="offset"+w[0].toUpperCase()+w.slice(1);if(Tt.test(he)){if(!R)return he;he="auto"}return(!m.boxSizingReliable()&&F||!m.reliableTrDimensions()&&O(v,"tr")||he==="auto"||!parseFloat(he)&&p.css(v,"display",!1,k)==="inline")&&v.getClientRects().length&&(F=p.css(v,"boxSizing",!1,k)==="border-box",$=oe in v,$&&(he=v[oe])),he=parseFloat(he)||0,he+vt(v,w,R||(F?"border":"content"),$,k,he)+"px"}p.extend({cssHooks:{opacity:{get:function(v,w){if(w){var R=en(v,"opacity");return R===""?"1":R}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(v,w,R,k){if(!(!v||v.nodeType===3||v.nodeType===8||!v.style)){var D,F,$,he=Be(w),oe=Vt.test(w),Ee=v.style;if(oe||(w=Xt(he)),$=p.cssHooks[w]||p.cssHooks[he],R!==void 0){if(F=typeof R,F==="string"&&(D=yr.exec(R))&&D[1]&&(R=rr(v,w,D),F="number"),R==null||R!==R)return;F==="number"&&!oe&&(R+=D&&D[3]||(p.cssNumber[he]?"":"px")),!m.clearCloneStyle&&R===""&&w.indexOf("background")===0&&(Ee[w]="inherit"),(!$||!("set"in $)||(R=$.set(v,R,k))!==void 0)&&(oe?Ee.setProperty(w,R):Ee[w]=R)}else return $&&"get"in $&&(D=$.get(v,!1,k))!==void 0?D:Ee[w]}},css:function(v,w,R,k){var D,F,$,he=Be(w),oe=Vt.test(w);return oe||(w=Xt(he)),$=p.cssHooks[w]||p.cssHooks[he],$&&"get"in $&&(D=$.get(v,!0,R)),D===void 0&&(D=en(v,w,k)),D==="normal"&&w in Fi&&(D=Fi[w]),R===""||R?(F=parseFloat(D),R===!0||isFinite(F)?F||0:D):D}}),p.each(["height","width"],function(v,w){p.cssHooks[w]={get:function(R,k,D){if(k)return pi.test(p.css(R,"display"))&&(!R.getClientRects().length||!R.getBoundingClientRect().width)?Wn(R,wi,function(){return ht(R,w,D)}):ht(R,w,D)},set:function(R,k,D){var F,$=an(R),he=!m.scrollboxSize()&&$.position==="absolute",oe=he||D,Ee=oe&&p.css(R,"boxSizing",!1,$)==="border-box",De=D?vt(R,w,D,Ee,$):0;return Ee&&he&&(De-=Math.ceil(R["offset"+w[0].toUpperCase()+w.slice(1)]-parseFloat($[w])-vt(R,w,"border",!1,$)-.5)),De&&(F=yr.exec(k))&&(F[3]||"px")!=="px"&&(R.style[w]=k,k=p.css(R,w)),Ze(R,k,De)}}}),p.cssHooks.marginLeft=Er(m.reliableMarginLeft,function(v,w){if(w)return(parseFloat(en(v,"marginLeft"))||v.getBoundingClientRect().left-Wn(v,{marginLeft:0},function(){return v.getBoundingClientRect().left}))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(v,w){p.cssHooks[v+w]={expand:function(R){for(var k=0,D={},F=typeof R=="string"?R.split(" "):[R];k<4;k++)D[v+er[k]+w]=F[k]||F[k-2]||F[0];return D}},v!=="margin"&&(p.cssHooks[v+w].set=Ze)}),p.fn.extend({css:function(v,w){return xe(this,function(R,k,D){var F,$,he={},oe=0;if(Array.isArray(k)){for(F=an(R),$=k.length;oe<$;oe++)he[k[oe]]=p.css(R,k[oe],!1,F);return he}return D!==void 0?p.style(R,k,D):p.css(R,k)},v,w,arguments.length>1)}});function dt(v,w,R,k,D){return new dt.prototype.init(v,w,R,k,D)}p.Tween=dt,dt.prototype={constructor:dt,init:function(v,w,R,k,D,F){this.elem=v,this.prop=R,this.easing=D||p.easing._default,this.options=w,this.start=this.now=this.cur(),this.end=k,this.unit=F||(p.cssNumber[R]?"":"px")},cur:function(){var v=dt.propHooks[this.prop];return v&&v.get?v.get(this):dt.propHooks._default.get(this)},run:function(v){var w,R=dt.propHooks[this.prop];return this.options.duration?this.pos=w=p.easing[this.easing](v,this.options.duration*v,0,1,this.options.duration):this.pos=w=v,this.now=(this.end-this.start)*w+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),R&&R.set?R.set(this):dt.propHooks._default.set(this),this}},dt.prototype.init.prototype=dt.prototype,dt.propHooks={_default:{get:function(v){var w;return v.elem.nodeType!==1||v.elem[v.prop]!=null&&v.elem.style[v.prop]==null?v.elem[v.prop]:(w=p.css(v.elem,v.prop,""),!w||w==="auto"?0:w)},set:function(v){p.fx.step[v.prop]?p.fx.step[v.prop](v):v.elem.nodeType===1&&(p.cssHooks[v.prop]||v.elem.style[Xt(v.prop)]!=null)?p.style(v.elem,v.prop,v.now+v.unit):v.elem[v.prop]=v.now}}},dt.propHooks.scrollTop=dt.propHooks.scrollLeft={set:function(v){v.elem.nodeType&&v.elem.parentNode&&(v.elem[v.prop]=v.now)}},p.easing={linear:function(v){return v},swing:function(v){return .5-Math.cos(v*Math.PI)/2},_default:"swing"},p.fx=dt.prototype.init,p.fx.step={};var Ct,nr,Hr=/^(?:toggle|show|hide)$/,cn=/queueHooks$/;function Gr(){nr&&(S.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Gr):t.setTimeout(Gr,p.fx.interval),p.fx.tick())}function _n(){return t.setTimeout(function(){Ct=void 0}),Ct=Date.now()}function zn(v,w){var R,k=0,D={height:v};for(w=w?1:0;k<4;k+=2-w)R=er[k],D["margin"+R]=D["padding"+R]=v;return w&&(D.opacity=D.width=v),D}function vi(v,w,R){for(var k,D=(Xn.tweeners[w]||[]).concat(Xn.tweeners["*"]),F=0,$=D.length;F<$;F++)if(k=D[F].call(R,w,v))return k}function Go(v,w,R){var k,D,F,$,he,oe,Ee,De,Ge="width"in w||"height"in w,Me=this,ut={},St=v.style,ur=v.nodeType&&wn(v),sr=we.get(v,"fxshow");R.queue||($=p._queueHooks(v,"fx"),$.unqueued==null&&($.unqueued=0,he=$.empty.fire,$.empty.fire=function(){$.unqueued||he()}),$.unqueued++,Me.always(function(){Me.always(function(){$.unqueued--,p.queue(v,"fx").length||$.empty.fire()})}));for(k in w)if(D=w[k],Hr.test(D)){if(delete w[k],F=F||D==="toggle",D===(ur?"hide":"show"))if(D==="show"&&sr&&sr[k]!==void 0)ur=!0;else continue;ut[k]=sr&&sr[k]||p.style(v,k)}if(oe=!p.isEmptyObject(w),!(!oe&&p.isEmptyObject(ut))){Ge&&v.nodeType===1&&(R.overflow=[St.overflow,St.overflowX,St.overflowY],Ee=sr&&sr.display,Ee==null&&(Ee=we.get(v,"display")),De=p.css(v,"display"),De==="none"&&(Ee?De=Ee:(yn([v],!0),Ee=v.style.display||Ee,De=p.css(v,"display"),yn([v]))),(De==="inline"||De==="inline-block"&&Ee!=null)&&p.css(v,"float")==="none"&&(oe||(Me.done(function(){St.display=Ee}),Ee==null&&(De=St.display,Ee=De==="none"?"":De)),St.display="inline-block")),R.overflow&&(St.overflow="hidden",Me.always(function(){St.overflow=R.overflow[0],St.overflowX=R.overflow[1],St.overflowY=R.overflow[2]})),oe=!1;for(k in ut)oe||(sr?"hidden"in sr&&(ur=sr.hidden):sr=we.access(v,"fxshow",{display:Ee}),F&&(sr.hidden=!ur),ur&&yn([v],!0),Me.done(function(){ur||yn([v]),we.remove(v,"fxshow");for(k in ut)p.style(v,k,ut[k])})),oe=vi(ur?sr[k]:0,k,Me),k in sr||(sr[k]=oe.start,ur&&(oe.end=oe.start,oe.start=0))}}function ws(v,w){var R,k,D,F,$;for(R in v)if(k=Be(R),D=w[k],F=v[R],Array.isArray(F)&&(D=F[1],F=v[R]=F[0]),R!==k&&(v[k]=F,delete v[R]),$=p.cssHooks[k],$&&"expand"in $){F=$.expand(F),delete v[k];for(R in F)R in v||(v[R]=F[R],w[R]=D)}else w[k]=D}function Xn(v,w,R){var k,D,F=0,$=Xn.prefilters.length,he=p.Deferred().always(function(){delete oe.elem}),oe=function(){if(D)return!1;for(var Ge=Ct||_n(),Me=Math.max(0,Ee.startTime+Ee.duration-Ge),ut=Me/Ee.duration||0,St=1-ut,ur=0,sr=Ee.tweens.length;ur<sr;ur++)Ee.tweens[ur].run(St);return he.notifyWith(v,[Ee,St,Me]),St<1&&sr?Me:(sr||he.notifyWith(v,[Ee,1,0]),he.resolveWith(v,[Ee]),!1)},Ee=he.promise({elem:v,props:p.extend({},w),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},R),originalProperties:w,originalOptions:R,startTime:Ct||_n(),duration:R.duration,tweens:[],createTween:function(Ge,Me){var ut=p.Tween(v,Ee.opts,Ge,Me,Ee.opts.specialEasing[Ge]||Ee.opts.easing);return Ee.tweens.push(ut),ut},stop:function(Ge){var Me=0,ut=Ge?Ee.tweens.length:0;if(D)return this;for(D=!0;Me<ut;Me++)Ee.tweens[Me].run(1);return Ge?(he.notifyWith(v,[Ee,1,0]),he.resolveWith(v,[Ee,Ge])):he.rejectWith(v,[Ee,Ge]),this}}),De=Ee.props;for(ws(De,Ee.opts.specialEasing);F<$;F++)if(k=Xn.prefilters[F].call(Ee,v,De,Ee.opts),k)return _(k.stop)&&(p._queueHooks(Ee.elem,Ee.opts.queue).stop=k.stop.bind(k)),k;return p.map(De,vi,Ee),_(Ee.opts.start)&&Ee.opts.start.call(v,Ee),Ee.progress(Ee.opts.progress).done(Ee.opts.done,Ee.opts.complete).fail(Ee.opts.fail).always(Ee.opts.always),p.fx.timer(p.extend(oe,{elem:v,anim:Ee,queue:Ee.opts.queue})),Ee}p.Animation=p.extend(Xn,{tweeners:{"*":[function(v,w){var R=this.createTween(v,w);return rr(R.elem,v,yr.exec(w),R),R}]},tweener:function(v,w){_(v)?(w=v,v=["*"]):v=v.match(Ne);for(var R,k=0,D=v.length;k<D;k++)R=v[k],Xn.tweeners[R]=Xn.tweeners[R]||[],Xn.tweeners[R].unshift(w)},prefilters:[Go],prefilter:function(v,w){w?Xn.prefilters.unshift(v):Xn.prefilters.push(v)}}),p.speed=function(v,w,R){var k=v&&typeof v=="object"?p.extend({},v):{complete:R||!R&&w||_(v)&&v,duration:v,easing:R&&w||w&&!_(w)&&w};return p.fx.off?k.duration=0:typeof k.duration!="number"&&(k.duration in p.fx.speeds?k.duration=p.fx.speeds[k.duration]:k.duration=p.fx.speeds._default),(k.queue==null||k.queue===!0)&&(k.queue="fx"),k.old=k.complete,k.complete=function(){_(k.old)&&k.old.call(this),k.queue&&p.dequeue(this,k.queue)},k},p.fn.extend({fadeTo:function(v,w,R,k){return this.filter(wn).css("opacity",0).show().end().animate({opacity:w},v,R,k)},animate:function(v,w,R,k){var D=p.isEmptyObject(v),F=p.speed(w,R,k),$=function(){var he=Xn(this,p.extend({},v),F);(D||we.get(this,"finish"))&&he.stop(!0)};return $.finish=$,D||F.queue===!1?this.each($):this.queue(F.queue,$)},stop:function(v,w,R){var k=function(D){var F=D.stop;delete D.stop,F(R)};return typeof v!="string"&&(R=w,w=v,v=void 0),w&&this.queue(v||"fx",[]),this.each(function(){var D=!0,F=v!=null&&v+"queueHooks",$=p.timers,he=we.get(this);if(F)he[F]&&he[F].stop&&k(he[F]);else for(F in he)he[F]&&he[F].stop&&cn.test(F)&&k(he[F]);for(F=$.length;F--;)$[F].elem===this&&(v==null||$[F].queue===v)&&($[F].anim.stop(R),D=!1,$.splice(F,1));(D||!R)&&p.dequeue(this,v)})},finish:function(v){return v!==!1&&(v=v||"fx"),this.each(function(){var w,R=we.get(this),k=R[v+"queue"],D=R[v+"queueHooks"],F=p.timers,$=k?k.length:0;for(R.finish=!0,p.queue(this,v,[]),D&&D.stop&&D.stop.call(this,!0),w=F.length;w--;)F[w].elem===this&&F[w].queue===v&&(F[w].anim.stop(!0),F.splice(w,1));for(w=0;w<$;w++)k[w]&&k[w].finish&&k[w].finish.call(this);delete R.finish})}}),p.each(["toggle","show","hide"],function(v,w){var R=p.fn[w];p.fn[w]=function(k,D,F){return k==null||typeof k=="boolean"?R.apply(this,arguments):this.animate(zn(w,!0),k,D,F)}}),p.each({slideDown:zn("show"),slideUp:zn("hide"),slideToggle:zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(v,w){p.fn[v]=function(R,k,D){return this.animate(w,R,k,D)}}),p.timers=[],p.fx.tick=function(){var v,w=0,R=p.timers;for(Ct=Date.now();w<R.length;w++)v=R[w],!v()&&R[w]===v&&R.splice(w--,1);R.length||p.fx.stop(),Ct=void 0},p.fx.timer=function(v){p.timers.push(v),p.fx.start()},p.fx.interval=13,p.fx.start=function(){nr||(nr=!0,Gr())},p.fx.stop=function(){nr=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(v,w){return v=p.fx&&p.fx.speeds[v]||v,w=w||"fx",this.queue(w,function(R,k){var D=t.setTimeout(R,v);k.stop=function(){t.clearTimeout(D)}})},function(){var v=S.createElement("input"),w=S.createElement("select"),R=w.appendChild(S.createElement("option"));v.type="checkbox",m.checkOn=v.value!=="",m.optSelected=R.selected,v=S.createElement("input"),v.value="t",v.type="radio",m.radioValue=v.value==="t"}();var _a,ts=p.expr.attrHandle;p.fn.extend({attr:function(v,w){return xe(this,p.attr,v,w,arguments.length>1)},removeAttr:function(v){return this.each(function(){p.removeAttr(this,v)})}}),p.extend({attr:function(v,w,R){var k,D,F=v.nodeType;if(!(F===3||F===8||F===2)){if(typeof v.getAttribute>"u")return p.prop(v,w,R);if((F!==1||!p.isXMLDoc(v))&&(D=p.attrHooks[w.toLowerCase()]||(p.expr.match.bool.test(w)?_a:void 0)),R!==void 0){if(R===null){p.removeAttr(v,w);return}return D&&"set"in D&&(k=D.set(v,R,w))!==void 0?k:(v.setAttribute(w,R+""),R)}return D&&"get"in D&&(k=D.get(v,w))!==null?k:(k=p.find.attr(v,w),k??void 0)}},attrHooks:{type:{set:function(v,w){if(!m.radioValue&&w==="radio"&&O(v,"input")){var R=v.value;return v.setAttribute("type",w),R&&(v.value=R),w}}}},removeAttr:function(v,w){var R,k=0,D=w&&w.match(Ne);if(D&&v.nodeType===1)for(;R=D[k++];)v.removeAttribute(R)}}),_a={set:function(v,w,R){return w===!1?p.removeAttr(v,R):v.setAttribute(R,R),R}},p.each(p.expr.match.bool.source.match(/\w+/g),function(v,w){var R=ts[w]||p.find.attr;ts[w]=function(k,D,F){var $,he,oe=D.toLowerCase();return F||(he=ts[oe],ts[oe]=$,$=R(k,D,F)!=null?oe:null,ts[oe]=he),$}});var ba=/^(?:input|select|textarea|button)$/i,$o=/^(?:a|area)$/i;p.fn.extend({prop:function(v,w){return xe(this,p.prop,v,w,arguments.length>1)},removeProp:function(v){return this.each(function(){delete this[p.propFix[v]||v]})}}),p.extend({prop:function(v,w,R){var k,D,F=v.nodeType;if(!(F===3||F===8||F===2))return(F!==1||!p.isXMLDoc(v))&&(w=p.propFix[w]||w,D=p.propHooks[w]),R!==void 0?D&&"set"in D&&(k=D.set(v,R,w))!==void 0?k:v[w]=R:D&&"get"in D&&(k=D.get(v,w))!==null?k:v[w]},propHooks:{tabIndex:{get:function(v){var w=p.find.attr(v,"tabindex");return w?parseInt(w,10):ba.test(v.nodeName)||$o.test(v.nodeName)&&v.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(p.propHooks.selected={get:function(v){var w=v.parentNode;return w&&w.parentNode&&w.parentNode.selectedIndex,null},set:function(v){var w=v.parentNode;w&&(w.selectedIndex,w.parentNode&&w.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});function Uo(v){var w=v.match(Ne)||[];return w.join(" ")}function jo(v){return v.getAttribute&&v.getAttribute("class")||""}function Ql(v){return Array.isArray(v)?v:typeof v=="string"?v.match(Ne)||[]:[]}p.fn.extend({addClass:function(v){var w,R,k,D,F,$;return _(v)?this.each(function(he){p(this).addClass(v.call(this,he,jo(this)))}):(w=Ql(v),w.length?this.each(function(){if(k=jo(this),R=this.nodeType===1&&" "+Uo(k)+" ",R){for(F=0;F<w.length;F++)D=w[F],R.indexOf(" "+D+" ")<0&&(R+=D+" ");$=Uo(R),k!==$&&this.setAttribute("class",$)}}):this)},removeClass:function(v){var w,R,k,D,F,$;return _(v)?this.each(function(he){p(this).removeClass(v.call(this,he,jo(this)))}):arguments.length?(w=Ql(v),w.length?this.each(function(){if(k=jo(this),R=this.nodeType===1&&" "+Uo(k)+" ",R){for(F=0;F<w.length;F++)for(D=w[F];R.indexOf(" "+D+" ")>-1;)R=R.replace(" "+D+" "," ");$=Uo(R),k!==$&&this.setAttribute("class",$)}}):this):this.attr("class","")},toggleClass:function(v,w){var R,k,D,F,$=typeof v,he=$==="string"||Array.isArray(v);return _(v)?this.each(function(oe){p(this).toggleClass(v.call(this,oe,jo(this),w),w)}):typeof w=="boolean"&&he?w?this.addClass(v):this.removeClass(v):(R=Ql(v),this.each(function(){if(he)for(F=p(this),D=0;D<R.length;D++)k=R[D],F.hasClass(k)?F.removeClass(k):F.addClass(k);else(v===void 0||$==="boolean")&&(k=jo(this),k&&we.set(this,"__className__",k),this.setAttribute&&this.setAttribute("class",k||v===!1?"":we.get(this,"__className__")||""))}))},hasClass:function(v){var w,R,k=0;for(w=" "+v+" ";R=this[k++];)if(R.nodeType===1&&(" "+Uo(jo(R))+" ").indexOf(w)>-1)return!0;return!1}});var rd=/\r/g;p.fn.extend({val:function(v){var w,R,k,D=this[0];return arguments.length?(k=_(v),this.each(function(F){var $;this.nodeType===1&&(k?$=v.call(this,F,p(this).val()):$=v,$==null?$="":typeof $=="number"?$+="":Array.isArray($)&&($=p.map($,function(he){return he==null?"":he+""})),w=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],(!w||!("set"in w)||w.set(this,$,"value")===void 0)&&(this.value=$))})):D?(w=p.valHooks[D.type]||p.valHooks[D.nodeName.toLowerCase()],w&&"get"in w&&(R=w.get(D,"value"))!==void 0?R:(R=D.value,typeof R=="string"?R.replace(rd,""):R??"")):void 0}}),p.extend({valHooks:{option:{get:function(v){var w=p.find.attr(v,"value");return w??Uo(p.text(v))}},select:{get:function(v){var w,R,k,D=v.options,F=v.selectedIndex,$=v.type==="select-one",he=$?null:[],oe=$?F+1:D.length;for(F<0?k=oe:k=$?F:0;k<oe;k++)if(R=D[k],(R.selected||k===F)&&!R.disabled&&(!R.parentNode.disabled||!O(R.parentNode,"optgroup"))){if(w=p(R).val(),$)return w;he.push(w)}return he},set:function(v,w){for(var R,k,D=v.options,F=p.makeArray(w),$=D.length;$--;)k=D[$],(k.selected=p.inArray(p.valHooks.option.get(k),F)>-1)&&(R=!0);return R||(v.selectedIndex=-1),F}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(v,w){if(Array.isArray(w))return v.checked=p.inArray(p(v).val(),w)>-1}},m.checkOn||(p.valHooks[this].get=function(v){return v.getAttribute("value")===null?"on":v.value})});var Qa=t.location,ef={guid:Date.now()},Dc=/\?/;p.parseXML=function(v){var w,R;if(!v||typeof v!="string")return null;try{w=new t.DOMParser().parseFromString(v,"text/xml")}catch{}return R=w&&w.getElementsByTagName("parsererror")[0],(!w||R)&&p.error("Invalid XML: "+(R?p.map(R.childNodes,function(k){return k.textContent}).join(`
`):v)),w};var nd=/^(?:focusinfocus|focusoutblur)$/,id=function(v){v.stopPropagation()};p.extend(p.event,{trigger:function(v,w,R,k){var D,F,$,he,oe,Ee,De,Ge,Me=[R||S],ut=h.call(v,"type")?v.type:v,St=h.call(v,"namespace")?v.namespace.split("."):[];if(F=Ge=$=R=R||S,!(R.nodeType===3||R.nodeType===8)&&!nd.test(ut+p.event.triggered)&&(ut.indexOf(".")>-1&&(St=ut.split("."),ut=St.shift(),St.sort()),oe=ut.indexOf(":")<0&&"on"+ut,v=v[p.expando]?v:new p.Event(ut,typeof v=="object"&&v),v.isTrigger=k?2:3,v.namespace=St.join("."),v.rnamespace=v.namespace?new RegExp("(^|\\.)"+St.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,v.result=void 0,v.target||(v.target=R),w=w==null?[v]:p.makeArray(w,[v]),De=p.event.special[ut]||{},!(!k&&De.trigger&&De.trigger.apply(R,w)===!1))){if(!k&&!De.noBubble&&!x(R)){for(he=De.delegateType||ut,nd.test(he+ut)||(F=F.parentNode);F;F=F.parentNode)Me.push(F),$=F;$===(R.ownerDocument||S)&&Me.push($.defaultView||$.parentWindow||t)}for(D=0;(F=Me[D++])&&!v.isPropagationStopped();)Ge=F,v.type=D>1?he:De.bindType||ut,Ee=(we.get(F,"events")||Object.create(null))[v.type]&&we.get(F,"handle"),Ee&&Ee.apply(F,w),Ee=oe&&F[oe],Ee&&Ee.apply&&Le(F)&&(v.result=Ee.apply(F,w),v.result===!1&&v.preventDefault());return v.type=ut,!k&&!v.isDefaultPrevented()&&(!De._default||De._default.apply(Me.pop(),w)===!1)&&Le(R)&&oe&&_(R[ut])&&!x(R)&&($=R[oe],$&&(R[oe]=null),p.event.triggered=ut,v.isPropagationStopped()&&Ge.addEventListener(ut,id),R[ut](),v.isPropagationStopped()&&Ge.removeEventListener(ut,id),p.event.triggered=void 0,$&&(R[oe]=$)),v.result}},simulate:function(v,w,R){var k=p.extend(new p.Event,R,{type:v,isSimulated:!0});p.event.trigger(k,null,w)}}),p.fn.extend({trigger:function(v,w){return this.each(function(){p.event.trigger(v,w,this)})},triggerHandler:function(v,w){var R=this[0];if(R)return p.event.trigger(v,w,R,!0)}});var yg=/\[\]$/,tf=/\r?\n/g,_g=/^(?:submit|button|image|reset|file)$/i,bg=/^(?:input|select|textarea|keygen)/i;function rf(v,w,R,k){var D;if(Array.isArray(w))p.each(w,function(F,$){R||yg.test(v)?k(v,$):rf(v+"["+(typeof $=="object"&&$!=null?F:"")+"]",$,R,k)});else if(!R&&T(w)==="object")for(D in w)rf(v+"["+D+"]",w[D],R,k);else k(v,w)}p.param=function(v,w){var R,k=[],D=function(F,$){var he=_($)?$():$;k[k.length]=encodeURIComponent(F)+"="+encodeURIComponent(he??"")};if(v==null)return"";if(Array.isArray(v)||v.jquery&&!p.isPlainObject(v))p.each(v,function(){D(this.name,this.value)});else for(R in v)rf(R,v[R],w,D);return k.join("&")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var v=p.prop(this,"elements");return v?p.makeArray(v):this}).filter(function(){var v=this.type;return this.name&&!p(this).is(":disabled")&&bg.test(this.nodeName)&&!_g.test(v)&&(this.checked||!vn.test(v))}).map(function(v,w){var R=p(this).val();return R==null?null:Array.isArray(R)?p.map(R,function(k){return{name:w.name,value:k.replace(tf,`\r
`)}}):{name:w.name,value:R.replace(tf,`\r
`)}}).get()}});var wg=/%20/g,nf=/#.*$/,xg=/([?&])_=[^&]*/,Sg=/^(.*?):[ \t]*([^\r\n]*)$/mg,Eg=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ag=/^(?:GET|HEAD)$/,Tg=/^\/\//,ln={},tn={},sd="*/".concat("*"),sf=S.createElement("a");sf.href=Qa.href;function od(v){return function(w,R){typeof w!="string"&&(R=w,w="*");var k,D=0,F=w.toLowerCase().match(Ne)||[];if(_(R))for(;k=F[D++];)k[0]==="+"?(k=k.slice(1)||"*",(v[k]=v[k]||[]).unshift(R)):(v[k]=v[k]||[]).push(R)}}function ad(v,w,R,k){var D={},F=v===tn;function $(he){var oe;return D[he]=!0,p.each(v[he]||[],function(Ee,De){var Ge=De(w,R,k);if(typeof Ge=="string"&&!F&&!D[Ge])return w.dataTypes.unshift(Ge),$(Ge),!1;if(F)return!(oe=Ge)}),oe}return $(w.dataTypes[0])||!D["*"]&&$("*")}function of(v,w){var R,k,D=p.ajaxSettings.flatOptions||{};for(R in w)w[R]!==void 0&&((D[R]?v:k||(k={}))[R]=w[R]);return k&&p.extend(!0,v,k),v}function Pg(v,w,R){for(var k,D,F,$,he=v.contents,oe=v.dataTypes;oe[0]==="*";)oe.shift(),k===void 0&&(k=v.mimeType||w.getResponseHeader("Content-Type"));if(k){for(D in he)if(he[D]&&he[D].test(k)){oe.unshift(D);break}}if(oe[0]in R)F=oe[0];else{for(D in R){if(!oe[0]||v.converters[D+" "+oe[0]]){F=D;break}$||($=D)}F=F||$}if(F)return F!==oe[0]&&oe.unshift(F),R[F]}function ud(v,w,R,k){var D,F,$,he,oe,Ee={},De=v.dataTypes.slice();if(De[1])for($ in v.converters)Ee[$.toLowerCase()]=v.converters[$];for(F=De.shift();F;)if(v.responseFields[F]&&(R[v.responseFields[F]]=w),!oe&&k&&v.dataFilter&&(w=v.dataFilter(w,v.dataType)),oe=F,F=De.shift(),F){if(F==="*")F=oe;else if(oe!=="*"&&oe!==F){if($=Ee[oe+" "+F]||Ee["* "+F],!$){for(D in Ee)if(he=D.split(" "),he[1]===F&&($=Ee[oe+" "+he[0]]||Ee["* "+he[0]],$)){$===!0?$=Ee[D]:Ee[D]!==!0&&(F=he[0],De.unshift(he[1]));break}}if($!==!0)if($&&v.throws)w=$(w);else try{w=$(w)}catch(Ge){return{state:"parsererror",error:$?Ge:"No conversion from "+oe+" to "+F}}}}return{state:"success",data:w}}p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Qa.href,type:"GET",isLocal:Eg.test(Qa.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":sd,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(v,w){return w?of(of(v,p.ajaxSettings),w):of(p.ajaxSettings,v)},ajaxPrefilter:od(ln),ajaxTransport:od(tn),ajax:function(v,w){typeof v=="object"&&(w=v,v=void 0),w=w||{};var R,k,D,F,$,he,oe,Ee,De,Ge,Me=p.ajaxSetup({},w),ut=Me.context||Me,St=Me.context&&(ut.nodeType||ut.jquery)?p(ut):p.event,ur=p.Deferred(),sr=p.Callbacks("once memory"),ai=Me.statusCode||{},Nn={},Bs={},zs="canceled",Tr={readyState:0,getResponseHeader:function(Pr){var un;if(oe){if(!F)for(F={};un=Sg.exec(D);)F[un[1].toLowerCase()+" "]=(F[un[1].toLowerCase()+" "]||[]).concat(un[2]);un=F[Pr.toLowerCase()+" "]}return un==null?null:un.join(", ")},getAllResponseHeaders:function(){return oe?D:null},setRequestHeader:function(Pr,un){return oe==null&&(Pr=Bs[Pr.toLowerCase()]=Bs[Pr.toLowerCase()]||Pr,Nn[Pr]=un),this},overrideMimeType:function(Pr){return oe==null&&(Me.mimeType=Pr),this},statusCode:function(Pr){var un;if(Pr)if(oe)Tr.always(Pr[Tr.status]);else for(un in Pr)ai[un]=[ai[un],Pr[un]];return this},abort:function(Pr){var un=Pr||zs;return R&&R.abort(un),Ho(0,un),this}};if(ur.promise(Tr),Me.url=((v||Me.url||Qa.href)+"").replace(Tg,Qa.protocol+"//"),Me.type=w.method||w.type||Me.method||Me.type,Me.dataTypes=(Me.dataType||"*").toLowerCase().match(Ne)||[""],Me.crossDomain==null){he=S.createElement("a");try{he.href=Me.url,he.href=he.href,Me.crossDomain=sf.protocol+"//"+sf.host!=he.protocol+"//"+he.host}catch{Me.crossDomain=!0}}if(Me.data&&Me.processData&&typeof Me.data!="string"&&(Me.data=p.param(Me.data,Me.traditional)),ad(ln,Me,w,Tr),oe)return Tr;Ee=p.event&&Me.global,Ee&&p.active++===0&&p.event.trigger("ajaxStart"),Me.type=Me.type.toUpperCase(),Me.hasContent=!Ag.test(Me.type),k=Me.url.replace(nf,""),Me.hasContent?Me.data&&Me.processData&&(Me.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Me.data=Me.data.replace(wg,"+")):(Ge=Me.url.slice(k.length),Me.data&&(Me.processData||typeof Me.data=="string")&&(k+=(Dc.test(k)?"&":"?")+Me.data,delete Me.data),Me.cache===!1&&(k=k.replace(xg,"$1"),Ge=(Dc.test(k)?"&":"?")+"_="+ef.guid+++Ge),Me.url=k+Ge),Me.ifModified&&(p.lastModified[k]&&Tr.setRequestHeader("If-Modified-Since",p.lastModified[k]),p.etag[k]&&Tr.setRequestHeader("If-None-Match",p.etag[k])),(Me.data&&Me.hasContent&&Me.contentType!==!1||w.contentType)&&Tr.setRequestHeader("Content-Type",Me.contentType),Tr.setRequestHeader("Accept",Me.dataTypes[0]&&Me.accepts[Me.dataTypes[0]]?Me.accepts[Me.dataTypes[0]]+(Me.dataTypes[0]!=="*"?", "+sd+"; q=0.01":""):Me.accepts["*"]);for(De in Me.headers)Tr.setRequestHeader(De,Me.headers[De]);if(Me.beforeSend&&(Me.beforeSend.call(ut,Tr,Me)===!1||oe))return Tr.abort();if(zs="abort",sr.add(Me.complete),Tr.done(Me.success),Tr.fail(Me.error),R=ad(tn,Me,w,Tr),!R)Ho(-1,"No Transport");else{if(Tr.readyState=1,Ee&&St.trigger("ajaxSend",[Tr,Me]),oe)return Tr;Me.async&&Me.timeout>0&&($=t.setTimeout(function(){Tr.abort("timeout")},Me.timeout));try{oe=!1,R.send(Nn,Ho)}catch(Pr){if(oe)throw Pr;Ho(-1,Pr)}}function Ho(Pr,un,Bu,Bc){var xs,wa,ns,go,Wo,Ci=un;oe||(oe=!0,$&&t.clearTimeout($),R=void 0,D=Bc||"",Tr.readyState=Pr>0?4:0,xs=Pr>=200&&Pr<300||Pr===304,Bu&&(go=Pg(Me,Tr,Bu)),!xs&&p.inArray("script",Me.dataTypes)>-1&&p.inArray("json",Me.dataTypes)<0&&(Me.converters["text script"]=function(){}),go=ud(Me,go,Tr,xs),xs?(Me.ifModified&&(Wo=Tr.getResponseHeader("Last-Modified"),Wo&&(p.lastModified[k]=Wo),Wo=Tr.getResponseHeader("etag"),Wo&&(p.etag[k]=Wo)),Pr===204||Me.type==="HEAD"?Ci="nocontent":Pr===304?Ci="notmodified":(Ci=go.state,wa=go.data,ns=go.error,xs=!ns)):(ns=Ci,(Pr||!Ci)&&(Ci="error",Pr<0&&(Pr=0))),Tr.status=Pr,Tr.statusText=(un||Ci)+"",xs?ur.resolveWith(ut,[wa,Ci,Tr]):ur.rejectWith(ut,[Tr,Ci,ns]),Tr.statusCode(ai),ai=void 0,Ee&&St.trigger(xs?"ajaxSuccess":"ajaxError",[Tr,Me,xs?wa:ns]),sr.fireWith(ut,[Tr,Ci]),Ee&&(St.trigger("ajaxComplete",[Tr,Me]),--p.active||p.event.trigger("ajaxStop")))}return Tr},getJSON:function(v,w,R){return p.get(v,w,R,"json")},getScript:function(v,w){return p.get(v,void 0,w,"script")}}),p.each(["get","post"],function(v,w){p[w]=function(R,k,D,F){return _(k)&&(F=F||D,D=k,k=void 0),p.ajax(p.extend({url:R,type:w,dataType:F,data:k,success:D},p.isPlainObject(R)&&R))}}),p.ajaxPrefilter(function(v){var w;for(w in v.headers)w.toLowerCase()==="content-type"&&(v.contentType=v.headers[w]||"")}),p._evalUrl=function(v,w,R){return p.ajax({url:v,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(k){p.globalEval(k,w,R)}})},p.fn.extend({wrapAll:function(v){var w;return this[0]&&(_(v)&&(v=v.call(this[0])),w=p(v,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&w.insertBefore(this[0]),w.map(function(){for(var R=this;R.firstElementChild;)R=R.firstElementChild;return R}).append(this)),this},wrapInner:function(v){return _(v)?this.each(function(w){p(this).wrapInner(v.call(this,w))}):this.each(function(){var w=p(this),R=w.contents();R.length?R.wrapAll(v):w.append(v)})},wrap:function(v){var w=_(v);return this.each(function(R){p(this).wrapAll(w?v.call(this,R):v)})},unwrap:function(v){return this.parent(v).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}}),p.expr.pseudos.hidden=function(v){return!p.expr.pseudos.visible(v)},p.expr.pseudos.visible=function(v){return!!(v.offsetWidth||v.offsetHeight||v.getClientRects().length)},p.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var Cg={0:200,1223:204},Ln=p.ajaxSettings.xhr();m.cors=!!Ln&&"withCredentials"in Ln,m.ajax=Ln=!!Ln,p.ajaxTransport(function(v){var w,R;if(m.cors||Ln&&!v.crossDomain)return{send:function(k,D){var F,$=v.xhr();if($.open(v.type,v.url,v.async,v.username,v.password),v.xhrFields)for(F in v.xhrFields)$[F]=v.xhrFields[F];v.mimeType&&$.overrideMimeType&&$.overrideMimeType(v.mimeType),!v.crossDomain&&!k["X-Requested-With"]&&(k["X-Requested-With"]="XMLHttpRequest");for(F in k)$.setRequestHeader(F,k[F]);w=function(he){return function(){w&&(w=R=$.onload=$.onerror=$.onabort=$.ontimeout=$.onreadystatechange=null,he==="abort"?$.abort():he==="error"?typeof $.status!="number"?D(0,"error"):D($.status,$.statusText):D(Cg[$.status]||$.status,$.statusText,($.responseType||"text")!=="text"||typeof $.responseText!="string"?{binary:$.response}:{text:$.responseText},$.getAllResponseHeaders()))}},$.onload=w(),R=$.onerror=$.ontimeout=w("error"),$.onabort!==void 0?$.onabort=R:$.onreadystatechange=function(){$.readyState===4&&t.setTimeout(function(){w&&R()})},w=w("abort");try{$.send(v.hasContent&&v.data||null)}catch(he){if(w)throw he}},abort:function(){w&&w()}}}),p.ajaxPrefilter(function(v){v.crossDomain&&(v.contents.script=!1)}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(v){return p.globalEval(v),v}}}),p.ajaxPrefilter("script",function(v){v.cache===void 0&&(v.cache=!1),v.crossDomain&&(v.type="GET")}),p.ajaxTransport("script",function(v){if(v.crossDomain||v.scriptAttrs){var w,R;return{send:function(k,D){w=p("<script>").attr(v.scriptAttrs||{}).prop({charset:v.scriptCharset,src:v.url}).on("load error",R=function(F){w.remove(),R=null,F&&D(F.type==="error"?404:200,F.type)}),S.head.appendChild(w[0])},abort:function(){R&&R()}}}});var Fc=[],vo=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var v=Fc.pop()||p.expando+"_"+ef.guid++;return this[v]=!0,v}}),p.ajaxPrefilter("json jsonp",function(v,w,R){var k,D,F,$=v.jsonp!==!1&&(vo.test(v.url)?"url":typeof v.data=="string"&&(v.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&vo.test(v.data)&&"data");if($||v.dataTypes[0]==="jsonp")return k=v.jsonpCallback=_(v.jsonpCallback)?v.jsonpCallback():v.jsonpCallback,$?v[$]=v[$].replace(vo,"$1"+k):v.jsonp!==!1&&(v.url+=(Dc.test(v.url)?"&":"?")+v.jsonp+"="+k),v.converters["script json"]=function(){return F||p.error(k+" was not called"),F[0]},v.dataTypes[0]="json",D=t[k],t[k]=function(){F=arguments},R.always(function(){D===void 0?p(t).removeProp(k):t[k]=D,v[k]&&(v.jsonpCallback=w.jsonpCallback,Fc.push(k)),F&&_(D)&&D(F[0]),F=D=void 0}),"script"}),m.createHTMLDocument=function(){var v=S.implementation.createHTMLDocument("").body;return v.innerHTML="<form></form><form></form>",v.childNodes.length===2}(),p.parseHTML=function(v,w,R){if(typeof v!="string")return[];typeof w=="boolean"&&(R=w,w=!1);var k,D,F;return w||(m.createHTMLDocument?(w=S.implementation.createHTMLDocument(""),k=w.createElement("base"),k.href=S.location.href,w.head.appendChild(k)):w=S),D=Te.exec(v),F=!R&&[],D?[w.createElement(D[1])]:(D=xn([v],w,F),F&&F.length&&p(F).remove(),p.merge([],D.childNodes))},p.fn.load=function(v,w,R){var k,D,F,$=this,he=v.indexOf(" ");return he>-1&&(k=Uo(v.slice(he)),v=v.slice(0,he)),_(w)?(R=w,w=void 0):w&&typeof w=="object"&&(D="POST"),$.length>0&&p.ajax({url:v,type:D||"GET",dataType:"html",data:w}).done(function(oe){F=arguments,$.html(k?p("<div>").append(p.parseHTML(oe)).find(k):oe)}).always(R&&function(oe,Ee){$.each(function(){R.apply(this,F||[oe.responseText,Ee,oe])})}),this},p.expr.pseudos.animated=function(v){return p.grep(p.timers,function(w){return v===w.elem}).length},p.offset={setOffset:function(v,w,R){var k,D,F,$,he,oe,Ee,De=p.css(v,"position"),Ge=p(v),Me={};De==="static"&&(v.style.position="relative"),he=Ge.offset(),F=p.css(v,"top"),oe=p.css(v,"left"),Ee=(De==="absolute"||De==="fixed")&&(F+oe).indexOf("auto")>-1,Ee?(k=Ge.position(),$=k.top,D=k.left):($=parseFloat(F)||0,D=parseFloat(oe)||0),_(w)&&(w=w.call(v,R,p.extend({},he))),w.top!=null&&(Me.top=w.top-he.top+$),w.left!=null&&(Me.left=w.left-he.left+D),"using"in w?w.using.call(v,Me):Ge.css(Me)}},p.fn.extend({offset:function(v){if(arguments.length)return v===void 0?this:this.each(function(D){p.offset.setOffset(this,v,D)});var w,R,k=this[0];if(k)return k.getClientRects().length?(w=k.getBoundingClientRect(),R=k.ownerDocument.defaultView,{top:w.top+R.pageYOffset,left:w.left+R.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var v,w,R,k=this[0],D={top:0,left:0};if(p.css(k,"position")==="fixed")w=k.getBoundingClientRect();else{for(w=this.offset(),R=k.ownerDocument,v=k.offsetParent||R.documentElement;v&&(v===R.body||v===R.documentElement)&&p.css(v,"position")==="static";)v=v.parentNode;v&&v!==k&&v.nodeType===1&&(D=p(v).offset(),D.top+=p.css(v,"borderTopWidth",!0),D.left+=p.css(v,"borderLeftWidth",!0))}return{top:w.top-D.top-p.css(k,"marginTop",!0),left:w.left-D.left-p.css(k,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var v=this.offsetParent;v&&p.css(v,"position")==="static";)v=v.offsetParent;return v||lr})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(v,w){var R=w==="pageYOffset";p.fn[v]=function(k){return xe(this,function(D,F,$){var he;if(x(D)?he=D:D.nodeType===9&&(he=D.defaultView),$===void 0)return he?he[w]:D[F];he?he.scrollTo(R?he.pageXOffset:$,R?$:he.pageYOffset):D[F]=$},v,k,arguments.length)}}),p.each(["top","left"],function(v,w){p.cssHooks[w]=Er(m.pixelPosition,function(R,k){if(k)return k=en(R,w),Tt.test(k)?p(R).position()[w]+"px":k})}),p.each({Height:"height",Width:"width"},function(v,w){p.each({padding:"inner"+v,content:w,"":"outer"+v},function(R,k){p.fn[k]=function(D,F){var $=arguments.length&&(R||typeof D!="boolean"),he=R||(D===!0||F===!0?"margin":"border");return xe(this,function(oe,Ee,De){var Ge;return x(oe)?k.indexOf("outer")===0?oe["inner"+v]:oe.document.documentElement["client"+v]:oe.nodeType===9?(Ge=oe.documentElement,Math.max(oe.body["scroll"+v],Ge["scroll"+v],oe.body["offset"+v],Ge["offset"+v],Ge["client"+v])):De===void 0?p.css(oe,Ee,he):p.style(oe,Ee,De,he)},w,$?D:void 0,$)}})}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(v,w){p.fn[w]=function(R){return this.on(w,R)}}),p.fn.extend({bind:function(v,w,R){return this.on(v,null,w,R)},unbind:function(v,w){return this.off(v,null,w)},delegate:function(v,w,R,k){return this.on(w,v,R,k)},undelegate:function(v,w,R){return arguments.length===1?this.off(v,"**"):this.off(w,v||"**",R)},hover:function(v,w){return this.on("mouseenter",v).on("mouseleave",w||v)}}),p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(v,w){p.fn[w]=function(R,k){return arguments.length>0?this.on(w,null,R,k):this.trigger(w)}});var cd=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;p.proxy=function(v,w){var R,k,D;if(typeof w=="string"&&(R=v[w],w=v,v=R),!!_(v))return k=s.call(arguments,2),D=function(){return v.apply(w||this,k.concat(s.call(arguments)))},D.guid=v.guid=v.guid||p.guid++,D},p.holdReady=function(v){v?p.readyWait++:p.ready(!0)},p.isArray=Array.isArray,p.parseJSON=JSON.parse,p.nodeName=O,p.isFunction=_,p.isWindow=x,p.camelCase=Be,p.type=T,p.now=Date.now,p.isNumeric=function(v){var w=p.type(v);return(w==="number"||w==="string")&&!isNaN(v-parseFloat(v))},p.trim=function(v){return v==null?"":(v+"").replace(cd,"$1")};var af=t.jQuery,rs=t.$;return p.noConflict=function(v){return t.$===p&&(t.$=rs),v&&t.jQuery===p&&(t.jQuery=af),p},typeof r>"u"&&(t.jQuery=t.$=p),p})}(bp)),bp.exports}var vz;function fle(){return vz||(vz=1,function(e){(function(t){var r=typeof self=="object"&&self.self===self&&self||typeof ki=="object"&&ki.global===ki&&ki;{var n=cle,i;try{i=sU()}catch{}t(r,e,n,i)}})(function(t,r,n,i){var s=t.Backbone,o=Array.prototype.slice;r.VERSION="1.4.1",r.$=i,r.noConflict=function(){return t.Backbone=s,this},r.emulateHTTP=!1,r.emulateJSON=!1;var a=r.Events={},u=/\s+/,c,f=function(L,B,H,X,xe){var ue=0,Ae;if(H&&typeof H=="object")for(X!==void 0&&("context"in xe)&&xe.context===void 0&&(xe.context=X),Ae=n.keys(H);ue<Ae.length;ue++)B=f(L,B,Ae[ue],H[Ae[ue]],xe);else if(H&&u.test(H))for(Ae=H.split(u);ue<Ae.length;ue++)B=L(B,Ae[ue],X,xe);else B=L(B,H,X,xe);return B};a.on=function(L,B,H){if(this._events=f(h,this._events||{},L,B,{context:H,ctx:this,listening:c}),c){var X=this._listeners||(this._listeners={});X[c.id]=c,c.interop=!1}return this},a.listenTo=function(L,B,H){if(!L)return this;var X=L._listenId||(L._listenId=n.uniqueId("l")),xe=this._listeningTo||(this._listeningTo={}),ue=c=xe[X];ue||(this._listenId||(this._listenId=n.uniqueId("l")),ue=c=xe[X]=new S(this,L));var Ae=g(L,B,H,this);if(c=void 0,Ae)throw Ae;return ue.interop&&ue.on(B,H),this};var h=function(L,B,H,X){if(H){var xe=L[B]||(L[B]=[]),ue=X.context,Ae=X.ctx,Ce=X.listening;Ce&&Ce.count++,xe.push({callback:H,context:ue,ctx:ue||Ae,listening:Ce})}return L},g=function(L,B,H,X){try{L.on(B,H,X)}catch(xe){return xe}};a.off=function(L,B,H){return this._events?(this._events=f(y,this._events,L,B,{context:H,listeners:this._listeners}),this):this},a.stopListening=function(L,B,H){var X=this._listeningTo;if(!X)return this;for(var xe=L?[L._listenId]:n.keys(X),ue=0;ue<xe.length;ue++){var Ae=X[xe[ue]];if(!Ae)break;Ae.obj.off(B,H,this),Ae.interop&&Ae.off(B,H)}return n.isEmpty(X)&&(this._listeningTo=void 0),this};var y=function(L,B,H,X){if(L){var xe=X.context,ue=X.listeners,Ae=0,Ce;if(!B&&!xe&&!H){for(Ce=n.keys(ue);Ae<Ce.length;Ae++)ue[Ce[Ae]].cleanup();return}for(Ce=B?[B]:n.keys(L);Ae<Ce.length;Ae++){B=Ce[Ae];var Be=L[B];if(!Be)break;for(var Le=[],Ie=0;Ie<Be.length;Ie++){var we=Be[Ie];if(H&&H!==we.callback&&H!==we.callback._callback||xe&&xe!==we.context)Le.push(we);else{var je=we.listening;je&&je.off(B,H)}}Le.length?L[B]=Le:delete L[B]}return L}};a.once=function(L,B,H){var X=f(m,{},L,B,this.off.bind(this));return typeof L=="string"&&H==null&&(B=void 0),this.on(X,B,H)},a.listenToOnce=function(L,B,H){var X=f(m,{},B,H,this.stopListening.bind(this,L));return this.listenTo(L,X)};var m=function(L,B,H,X){if(H){var xe=L[B]=n.once(function(){X(B,xe),H.apply(this,arguments)});xe._callback=H}return L};a.trigger=function(L){if(!this._events)return this;for(var B=Math.max(0,arguments.length-1),H=Array(B),X=0;X<B;X++)H[X]=arguments[X+1];return f(_,this._events,L,void 0,H),this};var _=function(L,B,H,X){if(L){var xe=L[B],ue=L.all;xe&&ue&&(ue=ue.slice()),xe&&x(xe,X),ue&&x(ue,[B].concat(X))}return L},x=function(L,B){var H,X=-1,xe=L.length,ue=B[0],Ae=B[1],Ce=B[2];switch(B.length){case 0:for(;++X<xe;)(H=L[X]).callback.call(H.ctx);return;case 1:for(;++X<xe;)(H=L[X]).callback.call(H.ctx,ue);return;case 2:for(;++X<xe;)(H=L[X]).callback.call(H.ctx,ue,Ae);return;case 3:for(;++X<xe;)(H=L[X]).callback.call(H.ctx,ue,Ae,Ce);return;default:for(;++X<xe;)(H=L[X]).callback.apply(H.ctx,B);return}},S=function(L,B){this.id=L._listenId,this.listener=L,this.obj=B,this.interop=!0,this.count=0,this._events=void 0};S.prototype.on=a.on,S.prototype.off=function(L,B){var H;this.interop?(this._events=f(y,this._events,L,B,{context:void 0,listeners:void 0}),H=!this._events):(this.count--,H=this.count===0),H&&this.cleanup()},S.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},a.bind=a.on,a.unbind=a.off,n.extend(r,a);var E=r.Model=function(L,B){var H=L||{};B||(B={}),this.preinitialize.apply(this,arguments),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},B.collection&&(this.collection=B.collection),B.parse&&(H=this.parse(H,B)||{});var X=n.result(this,"defaults");H=n.defaults(n.extend({},X,H),X),this.set(H,B),this.changed={},this.initialize.apply(this,arguments)};n.extend(E.prototype,a,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(L){return n.clone(this.attributes)},sync:function(){return r.sync.apply(this,arguments)},get:function(L){return this.attributes[L]},escape:function(L){return n.escape(this.get(L))},has:function(L){return this.get(L)!=null},matches:function(L){return!!n.iteratee(L,this)(this.attributes)},set:function(L,B,H){if(L==null)return this;var X;if(typeof L=="object"?(X=L,H=B):(X={})[L]=B,H||(H={}),!this._validate(X,H))return!1;var xe=H.unset,ue=H.silent,Ae=[],Ce=this._changing;this._changing=!0,Ce||(this._previousAttributes=n.clone(this.attributes),this.changed={});var Be=this.attributes,Le=this.changed,Ie=this._previousAttributes;for(var we in X)B=X[we],n.isEqual(Be[we],B)||Ae.push(we),n.isEqual(Ie[we],B)?delete Le[we]:Le[we]=B,xe?delete Be[we]:Be[we]=B;if(this.idAttribute in X){var je=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,je,H)}if(!ue){Ae.length&&(this._pending=H);for(var ct=0;ct<Ae.length;ct++)this.trigger("change:"+Ae[ct],this,Be[Ae[ct]],H)}if(Ce)return this;if(!ue)for(;this._pending;)H=this._pending,this._pending=!1,this.trigger("change",this,H);return this._pending=!1,this._changing=!1,this},unset:function(L,B){return this.set(L,void 0,n.extend({},B,{unset:!0}))},clear:function(L){var B={};for(var H in this.attributes)B[H]=void 0;return this.set(B,n.extend({},L,{unset:!0}))},hasChanged:function(L){return L==null?!n.isEmpty(this.changed):n.has(this.changed,L)},changedAttributes:function(L){if(!L)return this.hasChanged()?n.clone(this.changed):!1;var B=this._changing?this._previousAttributes:this.attributes,H={},X;for(var xe in L){var ue=L[xe];n.isEqual(B[xe],ue)||(H[xe]=ue,X=!0)}return X?H:!1},previous:function(L){return L==null||!this._previousAttributes?null:this._previousAttributes[L]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(L){L=n.extend({parse:!0},L);var B=this,H=L.success;return L.success=function(X){var xe=L.parse?B.parse(X,L):X;if(!B.set(xe,L))return!1;H&&H.call(L.context,B,X,L),B.trigger("sync",B,X,L)},Ve(this,L),this.sync("read",this,L)},save:function(L,B,H){var X;L==null||typeof L=="object"?(X=L,H=B):(X={})[L]=B,H=n.extend({validate:!0,parse:!0},H);var xe=H.wait;if(X&&!xe){if(!this.set(X,H))return!1}else if(!this._validate(X,H))return!1;var ue=this,Ae=H.success,Ce=this.attributes;H.success=function(Ie){ue.attributes=Ce;var we=H.parse?ue.parse(Ie,H):Ie;if(xe&&(we=n.extend({},X,we)),we&&!ue.set(we,H))return!1;Ae&&Ae.call(H.context,ue,Ie,H),ue.trigger("sync",ue,Ie,H)},Ve(this,H),X&&xe&&(this.attributes=n.extend({},Ce,X));var Be=this.isNew()?"create":H.patch?"patch":"update";Be==="patch"&&!H.attrs&&(H.attrs=X);var Le=this.sync(Be,this,H);return this.attributes=Ce,Le},destroy:function(L){L=L?n.clone(L):{};var B=this,H=L.success,X=L.wait,xe=function(){B.stopListening(),B.trigger("destroy",B,B.collection,L)};L.success=function(Ae){X&&xe(),H&&H.call(L.context,B,Ae,L),B.isNew()||B.trigger("sync",B,Ae,L)};var ue=!1;return this.isNew()?n.defer(L.success):(Ve(this,L),ue=this.sync("delete",this,L)),X||xe(),ue},url:function(){var L=n.result(this,"urlRoot")||n.result(this.collection,"url")||nt();if(this.isNew())return L;var B=this.get(this.idAttribute);return L.replace(/[^\/]$/,"$&/")+encodeURIComponent(B)},parse:function(L,B){return L},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(L){return this._validate({},n.extend({},L,{validate:!0}))},_validate:function(L,B){if(!B.validate||!this.validate)return!0;L=n.extend({},this.attributes,L);var H=this.validationError=this.validate(L,B)||null;return H?(this.trigger("invalid",this,H,n.extend(B,{validationError:H})),!1):!0}});var A=r.Collection=function(L,B){B||(B={}),this.preinitialize.apply(this,arguments),B.model&&(this.model=B.model),B.comparator!==void 0&&(this.comparator=B.comparator),this._reset(),this.initialize.apply(this,arguments),L&&this.reset(L,n.extend({silent:!0},B))},T={add:!0,remove:!0,merge:!0},I={add:!0,remove:!1},N=function(L,B,H){H=Math.min(Math.max(H,0),L.length);var X=Array(L.length-H),xe=B.length,ue;for(ue=0;ue<X.length;ue++)X[ue]=L[ue+H];for(ue=0;ue<xe;ue++)L[ue+H]=B[ue];for(ue=0;ue<X.length;ue++)L[ue+xe+H]=X[ue]};n.extend(A.prototype,a,{model:E,preinitialize:function(){},initialize:function(){},toJSON:function(L){return this.map(function(B){return B.toJSON(L)})},sync:function(){return r.sync.apply(this,arguments)},add:function(L,B){return this.set(L,n.extend({merge:!1},B,I))},remove:function(L,B){B=n.extend({},B);var H=!n.isArray(L);L=H?[L]:L.slice();var X=this._removeModels(L,B);return!B.silent&&X.length&&(B.changes={added:[],merged:[],removed:X},this.trigger("update",this,B)),H?X[0]:X},set:function(L,B){if(L!=null){B=n.extend({},T,B),B.parse&&!this._isModel(L)&&(L=this.parse(L,B)||[]);var H=!n.isArray(L);L=H?[L]:L.slice();var X=B.at;X!=null&&(X=+X),X>this.length&&(X=this.length),X<0&&(X+=this.length+1);var xe=[],ue=[],Ae=[],Ce=[],Be={},Le=B.add,Ie=B.merge,we=B.remove,je=!1,ct=this.comparator&&X==null&&B.sort!==!1,yt=n.isString(this.comparator)?this.comparator:null,ft,it;for(it=0;it<L.length;it++){ft=L[it];var Wt=this.get(ft);if(Wt){if(Ie&&ft!==Wt){var yr=this._isModel(ft)?ft.attributes:ft;B.parse&&(yr=Wt.parse(yr,B)),Wt.set(yr,B),Ae.push(Wt),ct&&!je&&(je=Wt.hasChanged(yt))}Be[Wt.cid]||(Be[Wt.cid]=!0,xe.push(Wt)),L[it]=Wt}else Le&&(ft=L[it]=this._prepareModel(ft,B),ft&&(ue.push(ft),this._addReference(ft,B),Be[ft.cid]=!0,xe.push(ft)))}if(we){for(it=0;it<this.length;it++)ft=this.models[it],Be[ft.cid]||Ce.push(ft);Ce.length&&this._removeModels(Ce,B)}var er=!1,lr=!ct&&Le&&we;if(xe.length&&lr?(er=this.length!==xe.length||n.some(this.models,function(Lr,Br){return Lr!==xe[Br]}),this.models.length=0,N(this.models,xe,0),this.length=this.models.length):ue.length&&(ct&&(je=!0),N(this.models,ue,X??this.length),this.length=this.models.length),je&&this.sort({silent:!0}),!B.silent){for(it=0;it<ue.length;it++)X!=null&&(B.index=X+it),ft=ue[it],ft.trigger("add",ft,this,B);(je||er)&&this.trigger("sort",this,B),(ue.length||Ce.length||Ae.length)&&(B.changes={added:ue,removed:Ce,merged:Ae},this.trigger("update",this,B))}return H?L[0]:L}},reset:function(L,B){B=B?n.clone(B):{};for(var H=0;H<this.models.length;H++)this._removeReference(this.models[H],B);return B.previousModels=this.models,this._reset(),L=this.add(L,n.extend({silent:!0},B)),B.silent||this.trigger("reset",this,B),L},push:function(L,B){return this.add(L,n.extend({at:this.length},B))},pop:function(L){var B=this.at(this.length-1);return this.remove(B,L)},unshift:function(L,B){return this.add(L,n.extend({at:0},B))},shift:function(L){var B=this.at(0);return this.remove(B,L)},slice:function(){return o.apply(this.models,arguments)},get:function(L){if(L!=null)return this._byId[L]||this._byId[this.modelId(this._isModel(L)?L.attributes:L,L.idAttribute)]||L.cid&&this._byId[L.cid]},has:function(L){return this.get(L)!=null},at:function(L){return L<0&&(L+=this.length),this.models[L]},where:function(L,B){return this[B?"find":"filter"](L)},findWhere:function(L){return this.where(L,!0)},sort:function(L){var B=this.comparator;if(!B)throw new Error("Cannot sort a set without a comparator");L||(L={});var H=B.length;return n.isFunction(B)&&(B=B.bind(this)),H===1||n.isString(B)?this.models=this.sortBy(B):this.models.sort(B),L.silent||this.trigger("sort",this,L),this},pluck:function(L){return this.map(L+"")},fetch:function(L){L=n.extend({parse:!0},L);var B=L.success,H=this;return L.success=function(X){var xe=L.reset?"reset":"set";H[xe](X,L),B&&B.call(L.context,H,X,L),H.trigger("sync",H,X,L)},Ve(this,L),this.sync("read",this,L)},create:function(L,B){B=B?n.clone(B):{};var H=B.wait;if(L=this._prepareModel(L,B),!L)return!1;H||this.add(L,B);var X=this,xe=B.success;return B.success=function(ue,Ae,Ce){H&&X.add(ue,Ce),xe&&xe.call(Ce.context,ue,Ae,Ce)},L.save(null,B),L},parse:function(L,B){return L},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(L,B){return L[B||this.model.prototype.idAttribute||"id"]},values:function(){return new P(this,O)},keys:function(){return new P(this,q)},entries:function(){return new P(this,V)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(L,B){if(this._isModel(L))return L.collection||(L.collection=this),L;B=B?n.clone(B):{},B.collection=this;var H;return this.model.prototype?H=new this.model(L,B):H=this.model(L,B),H.validationError?(this.trigger("invalid",this,H.validationError,B),!1):H},_removeModels:function(L,B){for(var H=[],X=0;X<L.length;X++){var xe=this.get(L[X]);if(xe){var ue=this.indexOf(xe);this.models.splice(ue,1),this.length--,delete this._byId[xe.cid];var Ae=this.modelId(xe.attributes,xe.idAttribute);Ae!=null&&delete this._byId[Ae],B.silent||(B.index=ue,xe.trigger("remove",xe,this,B)),H.push(xe),this._removeReference(xe,B)}}return H},_isModel:function(L){return L instanceof E},_addReference:function(L,B){this._byId[L.cid]=L;var H=this.modelId(L.attributes,L.idAttribute);H!=null&&(this._byId[H]=L),L.on("all",this._onModelEvent,this)},_removeReference:function(L,B){delete this._byId[L.cid];var H=this.modelId(L.attributes,L.idAttribute);H!=null&&delete this._byId[H],this===L.collection&&delete L.collection,L.off("all",this._onModelEvent,this)},_onModelEvent:function(L,B,H,X){if(B){if((L==="add"||L==="remove")&&H!==this)return;if(L==="destroy"&&this.remove(B,X),L==="changeId"){var xe=this.modelId(B.previousAttributes(),B.idAttribute),ue=this.modelId(B.attributes,B.idAttribute);xe!=null&&delete this._byId[xe],ue!=null&&(this._byId[ue]=B)}}this.trigger.apply(this,arguments)}});var p=typeof Symbol=="function"&&Symbol.iterator;p&&(A.prototype[p]=A.prototype.values);var P=function(L,B){this._collection=L,this._kind=B,this._index=0},O=1,q=2,V=3;p&&(P.prototype[p]=function(){return this}),P.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var L=this._collection.at(this._index);this._index++;var B;if(this._kind===O)B=L;else{var H=this._collection.modelId(L.attributes,L.idAttribute);this._kind===q?B=H:B=[H,L]}return{value:B,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var W=r.View=function(L){this.cid=n.uniqueId("view"),this.preinitialize.apply(this,arguments),n.extend(this,n.pick(L,J)),this._ensureElement(),this.initialize.apply(this,arguments)},G=/^(\S+)\s*(.*)$/,J=["model","collection","el","id","attributes","className","tagName","events"];n.extend(W.prototype,a,{tagName:"div",$:function(L){return this.$el.find(L)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(L){return this.undelegateEvents(),this._setElement(L),this.delegateEvents(),this},_setElement:function(L){this.$el=L instanceof r.$?L:r.$(L),this.el=this.$el[0]},delegateEvents:function(L){if(L||(L=n.result(this,"events")),!L)return this;this.undelegateEvents();for(var B in L){var H=L[B];if(n.isFunction(H)||(H=this[H]),!!H){var X=B.match(G);this.delegate(X[1],X[2],H.bind(this))}}return this},delegate:function(L,B,H){return this.$el.on(L+".delegateEvents"+this.cid,B,H),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(L,B,H){return this.$el.off(L+".delegateEvents"+this.cid,B,H),this},_createElement:function(L){return document.createElement(L)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var L=n.extend({},n.result(this,"attributes"));this.id&&(L.id=n.result(this,"id")),this.className&&(L.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(L)}},_setAttributes:function(L){this.$el.attr(L)}});var se=function(L,B,H,X){switch(B){case 1:return function(){return L[H](this[X])};case 2:return function(xe){return L[H](this[X],xe)};case 3:return function(xe,ue){return L[H](this[X],U(xe,this),ue)};case 4:return function(xe,ue,Ae){return L[H](this[X],U(xe,this),ue,Ae)};default:return function(){var xe=o.call(arguments);return xe.unshift(this[X]),L[H].apply(L,xe)}}},K=function(L,B,H,X){n.each(H,function(xe,ue){B[ue]&&(L.prototype[ue]=se(B,xe,ue,X))})},U=function(L,B){return n.isFunction(L)?L:n.isObject(L)&&!B._isModel(L)?j(L):n.isString(L)?function(H){return H.get(L)}:L},j=function(L){var B=n.matches(L);return function(H){return B(H.attributes)}},Q={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},de={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};n.each([[A,Q,"models"],[E,de,"attributes"]],function(L){var B=L[0],H=L[1],X=L[2];B.mixin=function(xe){var ue=n.reduce(n.functions(xe),function(Ae,Ce){return Ae[Ce]=0,Ae},{});K(B,xe,ue,X)},K(B,n,H,X)}),r.sync=function(L,B,H){var X=ce[L];n.defaults(H||(H={}),{emulateHTTP:r.emulateHTTP,emulateJSON:r.emulateJSON});var xe={type:X,dataType:"json"};if(H.url||(xe.url=n.result(B,"url")||nt()),H.data==null&&B&&(L==="create"||L==="update"||L==="patch")&&(xe.contentType="application/json",xe.data=JSON.stringify(H.attrs||B.toJSON(H))),H.emulateJSON&&(xe.contentType="application/x-www-form-urlencoded",xe.data=xe.data?{model:xe.data}:{}),H.emulateHTTP&&(X==="PUT"||X==="DELETE"||X==="PATCH")){xe.type="POST",H.emulateJSON&&(xe.data._method=X);var ue=H.beforeSend;H.beforeSend=function(Be){if(Be.setRequestHeader("X-HTTP-Method-Override",X),ue)return ue.apply(this,arguments)}}xe.type!=="GET"&&!H.emulateJSON&&(xe.processData=!1);var Ae=H.error;H.error=function(Be,Le,Ie){H.textStatus=Le,H.errorThrown=Ie,Ae&&Ae.call(H.context,Be,Le,Ie)};var Ce=H.xhr=r.ajax(n.extend(xe,H));return B.trigger("request",B,Ce,H),Ce};var ce={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};r.ajax=function(){return r.$.ajax.apply(r.$,arguments)};var Te=r.Router=function(L){L||(L={}),this.preinitialize.apply(this,arguments),L.routes&&(this.routes=L.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Se=/\((.*?)\)/g,re=/(\(\?)?:\w+/g,ae=/\*\w+/g,ne=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(Te.prototype,a,{preinitialize:function(){},initialize:function(){},route:function(L,B,H){n.isRegExp(L)||(L=this._routeToRegExp(L)),n.isFunction(B)&&(H=B,B=""),H||(H=this[B]);var X=this;return r.history.route(L,function(xe){var ue=X._extractParameters(L,xe);X.execute(H,ue,B)!==!1&&(X.trigger.apply(X,["route:"+B].concat(ue)),X.trigger("route",B,ue),r.history.trigger("route",X,B,ue))}),this},execute:function(L,B,H){L&&L.apply(this,B)},navigate:function(L,B){return r.history.navigate(L,B),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var L,B=n.keys(this.routes);(L=B.pop())!=null;)this.route(L,this.routes[L])}},_routeToRegExp:function(L){return L=L.replace(ne,"\\$&").replace(Se,"(?:$1)?").replace(re,function(B,H){return H?B:"([^/?]+)"}).replace(ae,"([^?]*?)"),new RegExp("^"+L+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(L,B){var H=L.exec(B).slice(1);return n.map(H,function(X,xe){return xe===H.length-1?X||null:X?decodeURIComponent(X):null})}});var te=r.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},le=/^[#\/]|\s+$/g,Xe=/^\/+|\/+$/g,Ne=/#.*$/;te.started=!1,n.extend(te.prototype,a,{interval:50,atRoot:function(){var L=this.location.pathname.replace(/[^\/]$/,"$&/");return L===this.root&&!this.getSearch()},matchRoot:function(){var L=this.decodeFragment(this.location.pathname),B=L.slice(0,this.root.length-1)+"/";return B===this.root},decodeFragment:function(L){return decodeURI(L.replace(/%25/g,"%2525"))},getSearch:function(){var L=this.location.href.replace(/#.*/,"").match(/\?.+/);return L?L[0]:""},getHash:function(L){var B=(L||this).location.href.match(/#(.*)$/);return B?B[1]:""},getPath:function(){var L=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return L.charAt(0)==="/"?L.slice(1):L},getFragment:function(L){return L==null&&(this._usePushState||!this._wantsHashChange?L=this.getPath():L=this.getHash()),L.replace(le,"")},start:function(L){if(te.started)throw new Error("Backbone.history has already been started");if(te.started=!0,this.options=n.extend({root:"/"},this.options,L),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Xe,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var B=this.root.slice(0,-1)||"/";return this.location.replace(B+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var H=document.body,X=H.insertBefore(this.iframe,H.firstChild).contentWindow;X.document.open(),X.document.close(),X.location.hash="#"+this.fragment}var xe=window.addEventListener||function(ue,Ae){return attachEvent("on"+ue,Ae)};if(this._usePushState?xe("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?xe("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var L=window.removeEventListener||function(B,H){return detachEvent("on"+B,H)};this._usePushState?L("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&L("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),te.started=!1},route:function(L,B){this.handlers.unshift({route:L,callback:B})},checkUrl:function(L){var B=this.getFragment();if(B===this.fragment&&this.iframe&&(B=this.getHash(this.iframe.contentWindow)),B===this.fragment)return!1;this.iframe&&this.navigate(B),this.loadUrl()},loadUrl:function(L){return this.matchRoot()?(L=this.fragment=this.getFragment(L),n.some(this.handlers,function(B){if(B.route.test(L))return B.callback(L),!0})):!1},navigate:function(L,B){if(!te.started)return!1;(!B||B===!0)&&(B={trigger:!!B}),L=this.getFragment(L||"");var H=this.root;(L===""||L.charAt(0)==="?")&&(H=H.slice(0,-1)||"/");var X=H+L;L=L.replace(Ne,"");var xe=this.decodeFragment(L);if(this.fragment!==xe){if(this.fragment=xe,this._usePushState)this.history[B.replace?"replaceState":"pushState"]({},document.title,X);else if(this._wantsHashChange){if(this._updateHash(this.location,L,B.replace),this.iframe&&L!==this.getHash(this.iframe.contentWindow)){var ue=this.iframe.contentWindow;B.replace||(ue.document.open(),ue.document.close()),this._updateHash(ue.location,L,B.replace)}}else return this.location.assign(X);if(B.trigger)return this.loadUrl(L)}},_updateHash:function(L,B,H){if(H){var X=L.href.replace(/(javascript:|#).*$/,"");L.replace(X+"#"+B)}else L.hash="#"+B}}),r.history=new te;var Re=function(L,B){var H=this,X;return L&&n.has(L,"constructor")?X=L.constructor:X=function(){return H.apply(this,arguments)},n.extend(X,H,B),X.prototype=n.create(H.prototype,L),X.prototype.constructor=X,X.__super__=H.prototype,X};E.extend=A.extend=Te.extend=W.extend=te.extend=Re;var nt=function(){throw new Error('A "url" property or function must be specified')},Ve=function(L,B){var H=B.error;B.error=function(X){H&&H.call(B.context,L,X,B),L.trigger("error",L,X,B)}};return r})}(RS)),RS}var hle=fle();const ei=Fl(hle);var dle=sU();const It=Fl(dle),$e=function(){var e=typeof window=="object"&&!!window.SVGAngle;if(!e)return function(){throw new Error("SVG is required to use Vectorizer.")};var t={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},r="1.1",n=Math,i=n.PI,s=n.atan2,o=n.sqrt,a=n.min,u=n.max,c=n.cos,f=n.sin,h=function(p,P,O){if(!(this instanceof h))return h.apply(Object.create(h.prototype),arguments);if(p){if(h.isV(p)&&(p=p.node),P=P||{},h.isString(p)){if(p=p.trim(),p.toLowerCase()==="svg")p=h.createSvgDocument();else if(p[0]==="<"){var q=h.createSvgDocument(p);if(q.childNodes.length>1){var V=[],W,G;for(W=0,G=q.childNodes.length;W<G;W++){var J=q.childNodes[W];V.push(new h(document.importNode(J,!0)))}return V}p=document.importNode(q.firstChild,!0)}else p=document.createElementNS(t.svg,p);h.ensureId(p)}return this.node=p,this.setAttributes(P),O&&this.append(O),this}},g=h.prototype;Object.defineProperty(g,"id",{enumerable:!0,get:function(){return this.node.id},set:function(p){this.node.id=p}}),g.getTransformToElement=function(p){var P=this.node;if(h.isSVGGraphicsElement(p)&&h.isSVGGraphicsElement(P)){var O=h.toNode(p).getScreenCTM(),q=P.getScreenCTM();if(O&&q)return O.inverse().multiply(q)}return h.createSVGMatrix()},g.transform=function(p,P){var O=this.node;if(h.isUndefined(p))return h.transformStringToMatrix(this.attr("transform"));if(P&&P.absolute)return this.attr("transform",h.matrixToTransformString(p));var q=h.createSVGTransform(p);return O.transform.baseVal.appendItem(q),this},g.translate=function(p,P,O){O=O||{},P=P||0;var q=this.attr("transform")||"",V=h.parseTransformString(q);if(q=V.value,h.isUndefined(p))return V.translate;q=q.replace(/translate\([^)]*\)/g,"").trim();var W=O.absolute?p:V.translate.tx+p,G=O.absolute?P:V.translate.ty+P,J="translate("+W+","+G+")";return this.attr("transform",(J+" "+q).trim()),this},g.rotate=function(p,P,O,q){q=q||{};var V=this.attr("transform")||"",W=h.parseTransformString(V);if(V=W.value,h.isUndefined(p))return W.rotate;V=V.replace(/rotate\([^)]*\)/g,"").trim(),p%=360;var G=q.absolute?p:W.rotate.angle+p,J=P!==void 0&&O!==void 0?","+P+","+O:"",se="rotate("+G+J+")";return this.attr("transform",(V+" "+se).trim()),this},g.scale=function(p,P){P=h.isUndefined(P)?p:P;var O=this.attr("transform")||"",q=h.parseTransformString(O);if(O=q.value,h.isUndefined(p))return q.scale;O=O.replace(/scale\([^)]*\)/g,"").trim();var V="scale("+p+","+P+")";return this.attr("transform",(O+" "+V).trim()),this},g.bbox=function(p,P){var O,q=this.node,V=q.ownerSVGElement;if(!V)return new mt(0,0,0,0);try{O=q.getBBox()}catch{O={x:q.clientLeft,y:q.clientTop,width:q.clientWidth,height:q.clientHeight}}if(p)return new mt(O);var W=this.getTransformToElement(P||V);return h.transformRect(O,W)},g.getBBox=function(p){var P={},O,q=this.node,V=q.ownerSVGElement;if(!V||!h.isSVGGraphicsElement(q))return new mt(0,0,0,0);if(p&&(p.target&&(P.target=h.toNode(p.target)),p.recursive&&(P.recursive=p.recursive)),P.recursive){var G=this.children(),J=G.length;if(J===0)return this.getBBox({target:P.target,recursive:!1});P.target||(P.target=this);for(var se=0;se<J;se++){var K=G[se],U;K.children().length===0?U=K.getBBox({target:P.target,recursive:!1}):U=K.getBBox({target:P.target,recursive:!0}),O?O=O.union(U):O=U}return O}else{try{O=q.getBBox()}catch{O={x:q.clientLeft,y:q.clientTop,width:q.clientWidth,height:q.clientHeight}}if(P.target){var W=this.getTransformToElement(P.target);return h.transformRect(O,W)}else return new mt(O)}};function y(p,P){p||(p={});var O=h("textPath"),q=p.d;if(q&&p["xlink:href"]===void 0){var V=h("path").attr("d",q).appendTo(P.defs());O.attr("xlink:href","#"+V.id)}return h.isObject(p)&&O.attr(p),O.node}function m(p,P,O){O||(O={});for(var q=O.includeAnnotationIndices,V=O.eol,W=O.lineHeight,G=O.baseSize,J=0,se={},K=P.length-1,U=0;U<=K;U++){var j=P[U],Q=null;if(h.isObject(j)){var de=j.attrs,ce=h("tspan",de),Te=ce.node,Se=j.t;V&&U===K&&(Se+=V),Te.textContent=Se;var re=de.class;re&&ce.addClass(re),q&&ce.attr("annotations",j.annotations),Q=parseFloat(de["font-size"]),isFinite(Q)||(Q=G),Q&&Q>J&&(J=Q)}else V&&U===K&&(j+=V),Te=document.createTextNode(j||" "),G&&G>J&&(J=G);p.appendChild(Te)}return J&&(se.maxFontSize=J),W?se.lineHeight=W:J&&(se.lineHeight=J*1.2),se}var _=/em$/;function x(p,P){var O=parseFloat(p);return _.test(p)?O*P:O}function S(p,P,O,q){if(!Array.isArray(P))return 0;var V=P.length;if(!V)return 0;for(var W=P[0],G=x(W.maxFontSize,O)||O,J=0,se=x(q,O),K=1;K<V;K++){W=P[K];var U=x(W.lineHeight,O)||se;J+=U}var j=x(W.maxFontSize,O)||O,Q;switch(p){case"middle":Q=G/2-.15*j-J/2;break;case"bottom":Q=-(.25*j)-J;break;default:case"top":Q=.8*G;break}return Q}g.text=function(p,P){if(p&&typeof p!="string")throw new Error("Vectorizer: text() expects the first argument to be a string.");p=h.sanitizeText(p),P||(P={});var O=P.displayEmpty,q=P.eol,V=P.textPath,W=P.textVerticalAnchor,G=W==="middle"||W==="bottom"||W==="top",J=P.x;J===void 0&&(J=this.attr("x")||0);var se=P.includeAnnotationIndices,K=P.annotations;K&&!h.isArray(K)&&(K=[K]);var U=P.lineHeight,j=U==="auto",Q=j?"1.5em":U||"1em";this.empty(),this.attr({"xml:space":"preserve",display:p||O?null:"none"});var de=parseFloat(this.attr("font-size"));de||(de=16,(G||K)&&this.attr("font-size",de));var ce=document,Te;V?(typeof V=="string"&&(V={d:V}),Te=y(V,this)):Te=ce.createDocumentFragment();for(var Se=0,re=p.split(`
`),ae=[],ne,te=0,le=re.length-1;te<=le;te++){var Xe=Q,Ne="v-line",Re=ce.createElementNS(t.svg,"tspan"),nt=re[te],Ve;if(nt)if(K){var L=h.annotateString(nt,K,{offset:-Se,includeAnnotationIndices:se});Ve=m(Re,L,{includeAnnotationIndices:se,eol:te!==le&&q,lineHeight:j?null:Q,baseSize:de});var B=Ve.lineHeight;B&&j&&te!==0&&(Xe=B),te===0&&(ne=Ve.maxFontSize*.8)}else q&&te!==le&&(nt+=q),Re.textContent=nt;else{Re.textContent="-",Ne+=" v-empty-line";var H=Re.style;if(H.fillOpacity=0,H.strokeOpacity=0,K){Ve={},L=h.findAnnotationsAtIndex(K,Se);let xe=de;for(let ue=L.length;ue>0;ue--){const Ae=L[ue-1].attrs;if(!Ae||!("font-size"in Ae))continue;const Ce=parseFloat(Ae["font-size"]);if(isFinite(Ce)){xe=Ce;break}}j&&(te>0?Xe=xe*1.2:ne=xe*.8),Re.setAttribute("font-size",xe),Ve.maxFontSize=xe}}Ve&&ae.push(Ve),te>0&&Re.setAttribute("dy",Xe),(te>0||V)&&Re.setAttribute("x",J),Re.className.baseVal=Ne,Te.appendChild(Re),Se+=nt.length+1}if(G)if(K)Xe=S(W,ae,de,Q);else if(W==="top")Xe="0.8em";else{var X;switch(le>0?(X=parseFloat(Q)||1,X*=le,_.test(Q)||(X/=de)):X=0,W){case"middle":Xe=.3-X/2+"em";break;case"bottom":Xe=-X-.3+"em";break}}else W===0?Xe="0em":W?Xe=W:(Xe=0,this.attr("y")===null&&this.attr("y",ne||"0.8em"));return Te.firstChild.setAttribute("dy",Xe),this.append(Te),this},g.removeAttr=function(p){const P=I[p],{ns:O,local:q}=h.qualifyAttr(P),V=this.node;return O?V.hasAttributeNS(O,q)&&V.removeAttributeNS(O,q):V.hasAttribute(P)&&V.removeAttribute(P),this},g.attr=function(p,P){if(h.isUndefined(p)){for(var O=this.node.attributes,q={},V=0;V<O.length;V++)q[O[V].name]=O[V].value;return q}if(h.isString(p)&&h.isUndefined(P))return this.node.getAttribute(I[p]);if(typeof p=="object")for(var W in p)p.hasOwnProperty(W)&&this.setAttribute(W,p[W]);else this.setAttribute(p,P);return this},g.normalizePath=function(){var p=this.tagName();return p==="PATH"&&this.attr("d",h.normalizePathData(this.attr("d"))),this},g.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},g.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},g.setAttributes=function(p){for(var P in p)p.hasOwnProperty(P)&&this.setAttribute(P,p[P]);return this},g.append=function(p){h.isArray(p)||(p=[p]);for(var P=0,O=p.length;P<O;P++)this.node.appendChild(h.toNode(p[P]));return this},g.prepend=function(p){var P=this.node.firstChild;return P?h(P).before(p):this.append(p)},g.before=function(p){var P=this.node,O=P.parentNode;if(O){h.isArray(p)||(p=[p]);for(var q=0,V=p.length;q<V;q++)O.insertBefore(h.toNode(p[q]),P)}return this},g.appendTo=function(p){return h.toNode(p).appendChild(this.node),this},g.svg=function(){return this.node instanceof window.SVGSVGElement?this:h(this.node.ownerSVGElement)},g.tagName=function(){return this.node.tagName.toUpperCase()},g.defs=function(){var p=this.svg()||this,P=p.node.getElementsByTagName("defs")[0];return P?h(P):h("defs").appendTo(p)},g.clone=function(){var p=h(this.node.cloneNode(!0));return p.node.id=h.uniqueId(),p},g.findOne=function(p){var P=this.node.querySelector(p);return P?h(P):void 0},g.find=function(p){var P=[],O=this.node.querySelectorAll(p);if(O)for(var q=0;q<O.length;q++)P.push(h(O[q]));return P},g.children=function(){for(var p=this.node.childNodes,P=[],O=0;O<p.length;O++){var q=p[O];q.nodeType===1&&P.push(h(p[O]))}return P},g.parent=function(){return h(this.node.parentNode)||null},g.index=function(){for(var p=0,P=this.node.previousSibling;P;)P.nodeType===1&&p++,P=P.previousSibling;return p},g.findParentByClass=function(p,P){for(var O=this.node.ownerSVGElement,q=this.node.parentNode;q&&q!==P&&q!==O;){var V=h(q);if(V.hasClass(p))return V;q=q.parentNode}return null},g.contains=function(p){var P=this.node,O=h.toNode(p),q=O&&O.parentNode;return P===q||!!(q&&q.nodeType===1&&P.compareDocumentPosition(q)&16)},g.toLocalPoint=function(p,P){var O=this.svg().node,q=O.createSVGPoint();q.x=p,q.y=P;try{var V=q.matrixTransform(O.getScreenCTM().inverse()),W=this.getTransformToElement(O).inverse()}catch{return q}return V.matrixTransform(W)},g.translateCenterToPoint=function(p){var P=this.getBBox({target:this.svg()}),O=P.center();return this.translate(p.x-O.x,p.y-O.y),this},g.translateAndAutoOrient=function(p,P,O){p=new pe(p),P=new pe(P),O||(O=this.svg());var q=this.scale();this.attr("transform","");var V=this.getBBox({target:O}).scale(q.sx,q.sy),W=h.createSVGTransform();W.setTranslate(-V.x-V.width/2,-V.y-V.height/2);var G=h.createSVGTransform(),J=p.angleBetween(P,p.clone().offset(1,0));J&&G.setRotate(J,0,0);var se=h.createSVGTransform(),K=p.clone().move(P,V.width/2);se.setTranslate(2*p.x-K.x,2*p.y-K.y);var U=this.getTransformToElement(O),j=h.createSVGTransform();return j.setMatrix(se.matrix.multiply(G.matrix.multiply(W.matrix.multiply(U.scale(q.sx,q.sy))))),this.attr("transform",h.matrixToTransformString(j.matrix)),this},g.animateAlongPath=function(p,P){P=h.toNode(P);var O=h.ensureId(P),q=h("animateMotion",p),V=h("mpath",{"xlink:href":"#"+O});q.append(V),this.append(q);try{q.node.beginElement()}catch{if(document.documentElement.getAttribute("smiling")==="fake"){var W=q.node;W.animators=[];var G=W.getAttribute("id");G&&(id2anim[G]=W);for(var J=getTargets(W),se=0,K=J.length;se<K;se++){var U=J[se],j=new Animator(W,U,se);animators.push(j),W.animators[se]=j,j.register()}}}return this};const E=/[^\x20\t\r\n\f]+/g;function A(p){return h.isString(p)?p.trim().match(E)||[]:[]}g.hasClass=function(p){return h.isString(p)?this.node.classList.contains(p.trim()):!1},g.addClass=function(p){return this.node.classList.add(...A(p)),this},g.removeClass=function(p){return this.node.classList.remove(...A(p)),this},g.toggleClass=function(p,P){const O=A(p);for(let q=0;q<O.length;q++)this.node.classList.toggle(O[q],P);return this},g.sample=function(p){p=p||1;for(var P=this.node,O=P.getTotalLength(),q=[],V=0,W;V<O;)W=P.getPointAtLength(V),q.push({x:W.x,y:W.y,distance:V}),V+=p;return q},g.convertToPath=function(){var p=h("path");p.attr(this.attr());var P=this.convertToPathData();return P&&p.attr("d",P),p},g.convertToPathData=function(){var p=this.tagName();switch(p){case"PATH":return this.attr("d");case"LINE":return h.convertLineToPathData(this.node);case"POLYGON":return h.convertPolygonToPathData(this.node);case"POLYLINE":return h.convertPolylineToPathData(this.node);case"ELLIPSE":return h.convertEllipseToPathData(this.node);case"CIRCLE":return h.convertCircleToPathData(this.node);case"RECT":return h.convertRectToPathData(this.node)}throw new Error(p+" cannot be converted to PATH.")},h.prototype.toGeometryShape=function(){var p,P,O,q,V,W,G,J,se,K,U,j,Q,de,ce;switch(this.tagName()){case"RECT":return p=parseFloat(this.attr("x"))||0,P=parseFloat(this.attr("y"))||0,O=parseFloat(this.attr("width"))||0,q=parseFloat(this.attr("height"))||0,new mt(p,P,O,q);case"CIRCLE":return V=parseFloat(this.attr("cx"))||0,W=parseFloat(this.attr("cy"))||0,G=parseFloat(this.attr("r"))||0,new Yi({x:V,y:W},G,G);case"ELLIPSE":return V=parseFloat(this.attr("cx"))||0,W=parseFloat(this.attr("cy"))||0,J=parseFloat(this.attr("rx"))||0,se=parseFloat(this.attr("ry"))||0,new Yi({x:V,y:W},J,se);case"POLYLINE":return K=h.getPointsFromSvgNode(this),new pn(K);case"POLYGON":return K=h.getPointsFromSvgNode(this),K.length>1&&K.push(K[0]),new pn(K);case"PATH":return U=this.attr("d"),Nt.isDataSupported(U)||(U=h.normalizePathData(U)),new Nt(U);case"LINE":return j=parseFloat(this.attr("x1"))||0,de=parseFloat(this.attr("y1"))||0,Q=parseFloat(this.attr("x2"))||0,ce=parseFloat(this.attr("y2"))||0,new wt({x:j,y:de},{x:Q,y:ce})}return this.getBBox()},g.findIntersection=function(p,P){var O=this.svg().node;P=P||O;var q=this.getBBox({target:P}),V=q.center();if(q.intersectionWithLineFromCenterToPoint(p)){var W,G=this.tagName();if(G==="RECT"){var J=new mt(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),se=this.getTransformToElement(P),K=h.decomposeMatrix(se),U=O.createSVGTransform();U.setRotate(-K.rotation,V.x,V.y);var j=h.transformRect(J,U.matrix.multiply(se));W=new mt(j).intersectionWithLineFromCenterToPoint(p,K.rotation)}else if(G==="PATH"||G==="POLYGON"||G==="POLYLINE"||G==="CIRCLE"||G==="ELLIPSE"){var Q=G==="PATH"?this:this.convertToPath(),de=Q.sample(),ce=1/0,Te=[],Se,re,ae,ne,te,le;for(Se=0;Se<de.length;Se++)re=de[Se],ae=h.createSVGPoint(re.x,re.y),ae=ae.matrixTransform(this.getTransformToElement(P)),re=new pe(ae),ne=re.distance(V),te=re.distance(p)*1.1,le=ne+te,le<ce?(ce=le,Te=[{sample:re,refDistance:te}]):le<ce+1&&Te.push({sample:re,refDistance:te});Te.sort(function(Xe,Ne){return Xe.refDistance-Ne.refDistance}),Te[0]&&(W=Te[0].sample)}return W}},g.setAttribute=function(p,P){const O=this.node;if(P===null)return this.removeAttr(p),this;const q=I[p],{ns:V}=h.qualifyAttr(q);return V?O.setAttributeNS(V,q,P):q==="id"?O.id=P:O.setAttribute(q,P),this},h.createSvgDocument=function(p){if(p){const O=`<svg xmlns="${t.svg}" xmlns:xlink="${t.xlink}" version="${r}">${p}</svg>`,{documentElement:q}=h.parseXML(O,{async:!1});return q}const P=document.createElementNS(t.svg,"svg");return P.setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),P.setAttribute("version",r),P},h.createSVGStyle=function(p){const{node:P}=h("style",{type:"text/css"},[h.createCDATASection(p)]);return P},h.createCDATASection=function(p=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(p)},h.idCounter=0,h.uniqueId=function(){return"v-"+ ++h.idCounter},h.toNode=function(p){return h.isV(p)?p.node:p.nodeName&&p||p[0]},h.ensureId=function(p){return p=h.toNode(p),p.id||(p.id=h.uniqueId())},h.sanitizeText=function(p){return(p||"").replace(/ /g," ")},h.isUndefined=function(p){return typeof p>"u"},h.isString=function(p){return typeof p=="string"},h.isObject=function(p){return p&&typeof p=="object"},h.isArray=Array.isArray,h.parseXML=function(p,P){P=P||{};var O;try{var q=new DOMParser;h.isUndefined(P.async)||(q.async=P.async),O=q.parseFromString(p,"text/xml")}catch{O=void 0}if(!O||O.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+p);return O};const T=Object.create(null);["baseFrequency","baseProfile","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].forEach(p=>T[p]=p);const I=new Proxy(T,{get(p,P){return h.supportCamelCaseAttributes?P in p?p[P]:p[P]=P.replace(/[A-Z]/g,"-$&").toLowerCase():P}});Object.defineProperty(h,"attributeNames",{value:I,writable:!1}),Object.defineProperty(h,"supportCamelCaseAttributes",{value:!1,writable:!0}),h.qualifyAttr=function(p){if(p.indexOf(":")!==-1){var P=p.split(":");return{ns:t[P[0]],local:P[1]}}return{ns:null,local:p}},h.transformSeparatorRegex=/[ ,]+/,h.transformRegex=/\b\w+\([^()]+\)/g,h.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,h.transformTranslateRegex=/\btranslate\(([^()]+)\)/,h.transformRotateRegex=/\brotate\(([^()]+)\)/,h.transformScaleRegex=/\bscale\(([^()]+)\)/,h.transformStringToMatrix=function(p){let P=h.createSVGMatrix();const O=p&&p.match(h.transformRegex);if(!O)return P;const q=O.length;for(let V=0;V<q;V++){const G=O[V].match(h.transformFunctionRegex);if(G){let J,se,K,U,j,Q=h.createSVGMatrix();const de=G[1].toLowerCase(),ce=G[2].split(h.transformSeparatorRegex);switch(de){case"scale":J=parseFloat(ce[0]),se=ce[1]===void 0?J:parseFloat(ce[1]),Q=Q.scaleNonUniform(J,se);break;case"translate":K=parseFloat(ce[0]),U=parseFloat(ce[1]),Q=Q.translate(K,U);break;case"rotate":j=parseFloat(ce[0]),K=parseFloat(ce[1])||0,U=parseFloat(ce[2])||0,K!==0||U!==0?Q=Q.translate(K,U).rotate(j).translate(-K,-U):Q=Q.rotate(j);break;case"skewx":j=parseFloat(ce[0]),Q=Q.skewX(j);break;case"skewy":j=parseFloat(ce[0]),Q=Q.skewY(j);break;case"matrix":Q.a=parseFloat(ce[0]),Q.b=parseFloat(ce[1]),Q.c=parseFloat(ce[2]),Q.d=parseFloat(ce[3]),Q.e=parseFloat(ce[4]),Q.f=parseFloat(ce[5]);break;default:continue}P=P.multiply(Q)}}return P},h.matrixToTransformString=function(p){return p||(p=!0),"matrix("+(p.a!==void 0?p.a:1)+","+(p.b!==void 0?p.b:0)+","+(p.c!==void 0?p.c:0)+","+(p.d!==void 0?p.d:1)+","+(p.e!==void 0?p.e:0)+","+(p.f!==void 0?p.f:0)+")"},h.parseTransformString=function(p){var P,O,q;if(p){var V=h.transformSeparatorRegex;if(p.trim().indexOf("matrix")>=0){var W=h.transformStringToMatrix(p),G=h.decomposeMatrix(W);P=[G.translateX,G.translateY],q=[G.scaleX,G.scaleY],O=[G.rotation];var J=[];(P[0]!==0||P[1]!==0)&&J.push("translate("+P+")"),(q[0]!==1||q[1]!==1)&&J.push("scale("+q+")"),O[0]!==0&&J.push("rotate("+O+")"),p=J.join(" ")}else{const K=p.match(h.transformTranslateRegex);K&&(P=K[1].split(V));const U=p.match(h.transformRotateRegex);U&&(O=U[1].split(V));const j=p.match(h.transformScaleRegex);j&&(q=j[1].split(V))}}var se=q&&q[0]?parseFloat(q[0]):1;return{value:p,translate:{tx:P&&P[0]?parseInt(P[0],10):0,ty:P&&P[1]?parseInt(P[1],10):0},rotate:{angle:O&&O[0]?parseInt(O[0],10):0,cx:O&&O[1]?parseInt(O[1],10):void 0,cy:O&&O[2]?parseInt(O[2],10):void 0},scale:{sx:se,sy:q&&q[1]?parseFloat(q[1]):se}}},h.deltaTransformPoint=function(p,P){var O=P.x*p.a+P.y*p.c+0,q=P.x*p.b+P.y*p.d+0;return{x:O,y:q}},h.decomposeMatrix=function(p){var P=h.deltaTransformPoint(p,{x:0,y:1}),O=h.deltaTransformPoint(p,{x:1,y:0}),q=180/i*s(P.y,P.x)-90,V=180/i*s(O.y,O.x);return{translateX:p.e,translateY:p.f,scaleX:o(p.a*p.a+p.b*p.b),scaleY:o(p.c*p.c+p.d*p.d),skewX:q,skewY:V,rotation:q}},h.matrixToScale=function(p){var P,O,q,V;return p?(P=h.isUndefined(p.a)?1:p.a,V=h.isUndefined(p.d)?1:p.d,O=p.b,q=p.c):P=V=1,{sx:O?o(P*P+O*O):P,sy:q?o(q*q+V*V):V}},h.matrixToRotate=function(p){var P={x:0,y:1};return p&&(P=h.deltaTransformPoint(p,P)),{angle:Oo($v(s(P.y,P.x))-90)}},h.matrixToTranslate=function(p){return{tx:p&&p.e||0,ty:p&&p.f||0}},h.isV=function(p){return p instanceof h},h.isVElement=h.isV,h.isSVGGraphicsElement=function(p){return p?(p=h.toNode(p),p instanceof SVGElement&&typeof p.getScreenCTM=="function"):!1};var N=h("svg").node;return h.createSVGMatrix=function(p){var P=N.createSVGMatrix();for(var O in p)P[O]=p[O];return P},h.createSVGTransform=function(p){return h.isUndefined(p)?N.createSVGTransform():(p instanceof SVGMatrix||(p=h.createSVGMatrix(p)),N.createSVGTransformFromMatrix(p))},h.createSVGPoint=function(p,P){var O=N.createSVGPoint();return O.x=p,O.y=P,O},h.transformRect=function(p,P){var O=N.createSVGPoint();O.x=p.x,O.y=p.y;var q=O.matrixTransform(P);O.x=p.x+p.width,O.y=p.y;var V=O.matrixTransform(P);O.x=p.x+p.width,O.y=p.y+p.height;var W=O.matrixTransform(P);O.x=p.x,O.y=p.y+p.height;var G=O.matrixTransform(P),J=a(q.x,V.x,W.x,G.x),se=u(q.x,V.x,W.x,G.x),K=a(q.y,V.y,W.y,G.y),U=u(q.y,V.y,W.y,G.y);return new mt(J,K,se-J,U-K)},h.transformPoint=function(p,P){return new pe(h.createSVGPoint(p.x,p.y).matrixTransform(P))},h.transformLine=function(p,P){return new wt(h.transformPoint(p.start,P),h.transformPoint(p.end,P))},h.transformPolyline=function(p,P){var O=p instanceof pn?p.points:p;h.isArray(O)||(O=[]);for(var q=[],V=0,W=O.length;V<W;V++)q[V]=h.transformPoint(O[V],P);return new pn(q)},h.styleToObject=function(p){for(var P={},O=p.split(";"),q=0;q<O.length;q++){var V=O[q],W=V.split("=");P[W[0].trim()]=W[1].trim()}return P},h.createSlicePathData=function(p,P,O,q){var V=2*i-1e-6,W=p,G=P,J=O,se=q,K=(se<J&&(K=J,J=se,se=K),se-J),U=K<i?"0":"1",j=c(J),Q=f(J),de=c(se),ce=f(se);return K>=V?W?"M0,"+G+"A"+G+","+G+" 0 1,1 0,"+-G+"A"+G+","+G+" 0 1,1 0,"+G+"M0,"+W+"A"+W+","+W+" 0 1,0 0,"+-W+"A"+W+","+W+" 0 1,0 0,"+W+"Z":"M0,"+G+"A"+G+","+G+" 0 1,1 0,"+-G+"A"+G+","+G+" 0 1,1 0,"+G+"Z":W?"M"+G*j+","+G*Q+"A"+G+","+G+" 0 "+U+",1 "+G*de+","+G*ce+"L"+W*de+","+W*ce+"A"+W+","+W+" 0 "+U+",0 "+W*j+","+W*Q+"Z":"M"+G*j+","+G*Q+"A"+G+","+G+" 0 "+U+",1 "+G*de+","+G*ce+"L0,0Z"},h.mergeAttrs=function(p,P){for(var O in P)O==="class"?p[O]=p[O]?p[O]+" "+P[O]:P[O]:O==="style"?h.isObject(p[O])&&h.isObject(P[O])?p[O]=h.mergeAttrs(p[O],P[O]):h.isObject(p[O])?p[O]=h.mergeAttrs(p[O],h.styleToObject(P[O])):h.isObject(P[O])?p[O]=h.mergeAttrs(h.styleToObject(p[O]),P[O]):p[O]=h.mergeAttrs(h.styleToObject(p[O]),h.styleToObject(P[O])):p[O]=P[O];return p},h.annotateString=function(p,P,O){P=P||[],O=O||{};for(var q=O.offset||0,V=[],W,G=[],J,se,K=0;K<p.length;K++){J=G[K]=p[K];for(var U=0;U<P.length;U++){var j=P[U],Q=j.start+q,de=j.end+q;K>=Q&&K<de&&(h.isObject(J)?J.attrs=h.mergeAttrs(h.mergeAttrs({},J.attrs),j.attrs):J=G[K]={t:p[K],attrs:j.attrs},O.includeAnnotationIndices&&(J.annotations||(J.annotations=[])).push(U))}se=G[K-1],se?h.isObject(J)&&h.isObject(se)?JSON.stringify(J.attrs)===JSON.stringify(se.attrs)?W.t+=J.t:(V.push(W),W=J):h.isObject(J)||h.isObject(se)?(V.push(W),W=J):W=(W||"")+J:W=J}return W&&V.push(W),V},h.findAnnotationsAtIndex=function(p,P){var O=[];return p&&p.forEach(function(q){q.start<P&&P<=q.end&&O.push(q)}),O},h.findAnnotationsBetweenIndexes=function(p,P,O){var q=[];return p&&p.forEach(function(V){(P>=V.start&&P<V.end||O>V.start&&O<=V.end||V.start>=P&&V.end<O)&&q.push(V)}),q},h.shiftAnnotations=function(p,P,O){return p&&p.forEach(function(q){q.start<P&&q.end>=P?q.end+=O:q.start>=P&&(q.start+=O,q.end+=O)}),p},h.convertLineToPathData=function(p){p=h(p);var P=["M",p.attr("x1"),p.attr("y1"),"L",p.attr("x2"),p.attr("y2")].join(" ");return P},h.convertPolygonToPathData=function(p){var P=h.getPointsFromSvgNode(p);return P.length===0?null:h.svgPointsToPath(P)+" Z"},h.convertPolylineToPathData=function(p){var P=h.getPointsFromSvgNode(p);return P.length===0?null:h.svgPointsToPath(P)},h.svgPointsToPath=function(p){for(var P=0,O=p.length;P<O;P++)p[P]=p[P].x+" "+p[P].y;return"M "+p.join(" L")},h.getPointsFromSvgNode=function(p){p=h.toNode(p);var P=[],O=p.points;if(O)for(var q=0,V=O.numberOfItems;q<V;q++)P.push(O.getItem(q));return P},h.KAPPA=.551784,h.convertCircleToPathData=function(p){p=h(p);var P=parseFloat(p.attr("cx"))||0,O=parseFloat(p.attr("cy"))||0,q=parseFloat(p.attr("r")),V=q*h.KAPPA,W=["M",P,O-q,"C",P+V,O-q,P+q,O-V,P+q,O,"C",P+q,O+V,P+V,O+q,P,O+q,"C",P-V,O+q,P-q,O+V,P-q,O,"C",P-q,O-V,P-V,O-q,P,O-q,"Z"].join(" ");return W},h.convertEllipseToPathData=function(p){p=h(p);var P=parseFloat(p.attr("cx"))||0,O=parseFloat(p.attr("cy"))||0,q=parseFloat(p.attr("rx")),V=parseFloat(p.attr("ry"))||q,W=q*h.KAPPA,G=V*h.KAPPA,J=["M",P,O-V,"C",P+W,O-V,P+q,O-G,P+q,O,"C",P+q,O+G,P+W,O+V,P,O+V,"C",P-W,O+V,P-q,O+G,P-q,O,"C",P-q,O-G,P-W,O-V,P,O-V,"Z"].join(" ");return J},h.convertRectToPathData=function(p){return p=h(p),h.rectToPath({x:parseFloat(p.attr("x"))||0,y:parseFloat(p.attr("y"))||0,width:parseFloat(p.attr("width"))||0,height:parseFloat(p.attr("height"))||0,rx:parseFloat(p.attr("rx"))||0,ry:parseFloat(p.attr("ry"))||0})},h.rectToPath=function(p){var P,O=p.x,q=p.y,V=p.width,W=p.height,G=a(p.rx||p["top-rx"]||0,V/2),J=a(p.rx||p["bottom-rx"]||0,V/2),se=a(p.ry||p["top-ry"]||0,W/2),K=a(p.ry||p["bottom-ry"]||0,W/2);return G||J||se||K?P=["M",O,q+se,"v",W-se-K,"a",J,K,0,0,0,J,K,"h",V-2*J,"a",J,K,0,0,0,J,-K,"v",-(W-K-se),"a",G,se,0,0,0,-G,-se,"h",-(V-2*G),"a",G,se,0,0,0,-G,se,"Z"]:P=["M",O,q,"H",O+V,"V",q+W,"H",O,"V",q,"Z"],P.join(" ")},h.normalizePathData=function(){var p=`	
\v\f\r   ᠎             　\u2028\u2029`,P=new RegExp("([a-z])["+p+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+p+"]*,?["+p+"]*)+)","ig"),O=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+p+"]*,?["+p+"]*","ig"),q=Math,V=q.PI,W=q.sin,G=q.cos,J=q.tan,se=q.asin,K=q.sqrt,U=q.abs;function j(re,ae,ne,te,le,Xe){var Ne=.3333333333333333,Re=2/3;return[Ne*re+Re*ne,Ne*ae+Re*te,Ne*le+Re*ne,Ne*Xe+Re*te,le,Xe]}function Q(re,ae,ne){var te=re*G(ne)-ae*W(ne),le=re*W(ne)+ae*G(ne);return{x:te,y:le}}function de(re,ae,ne,te,le,Xe,Ne,Re,nt,Ve){var L=V*120/180,B=V/180*(+le||0),H=[],X;if(Ve)je=Ve[0],ct=Ve[1],Ie=Ve[2],we=Ve[3];else{X=Q(re,ae,-B),re=X.x,ae=X.y,X=Q(Re,nt,-B),Re=X.x,nt=X.y;var xe=(re-Re)/2,ue=(ae-nt)/2,Ae=xe*xe/(ne*ne)+ue*ue/(te*te);Ae>1&&(Ae=K(Ae),ne=Ae*ne,te=Ae*te);var Ce=ne*ne,Be=te*te,Le=(Xe==Ne?-1:1)*K(U((Ce*Be-Ce*ue*ue-Be*xe*xe)/(Ce*ue*ue+Be*xe*xe))),Ie=Le*ne*ue/te+(re+Re)/2,we=Le*-te*xe/ne+(ae+nt)/2,je=se(((ae-we)/te).toFixed(9)),ct=se(((nt-we)/te).toFixed(9));je=re<Ie?V-je:je,ct=Re<Ie?V-ct:ct,je<0&&(je=V*2+je),ct<0&&(ct=V*2+ct),Ne&&je>ct&&(je=je-V*2),!Ne&&ct>je&&(ct=ct-V*2)}var yt=ct-je;if(U(yt)>L){var ft=ct,it=Re,Wt=nt;ct=je+L*(Ne&&ct>je?1:-1),Re=Ie+ne*G(ct),nt=we+te*W(ct),H=de(Re,nt,ne,te,le,0,Ne,it,Wt,[ct,ft,Ie,we])}yt=ct-je;var yr=G(je),er=W(je),lr=G(ct),Lr=W(ct),Br=J(yt/4),wn=4/3*(ne*Br),rr=4/3*(te*Br),Or=[re,ae],mn=[re+wn*er,ae-rr*yr],yn=[Re+wn*Lr,nt-rr*lr],vn=[Re,nt];if(mn[0]=2*Or[0]-mn[0],mn[1]=2*Or[1]-mn[1],Ve)return[mn,yn,vn].concat(H);H=[mn,yn,vn].concat(H).join().split(",");for(var Un=[],ri=H.length,zt=0;zt<ri;zt++)Un[zt]=zt%2?Q(H[zt-1],H[zt],B).y:Q(H[zt],H[zt+1],B).x;return Un}function ce(re){if(!re)return null;var ae={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},ne=[];return String(re).replace(P,function(te,le,Xe){var Ne=[],Re=le.toLowerCase();for(Xe.replace(O,function(nt,Ve){Ve&&Ne.push(+Ve)}),Re==="m"&&Ne.length>2&&(ne.push([le].concat(Ne.splice(0,2))),Re="l",le=le==="m"?"l":"L");Ne.length>=ae[Re]&&(ne.push([le].concat(Ne.splice(0,ae[Re]))),!!ae[Re]););}),ne}function Te(re){if((!Array.isArray(re)||!Array.isArray(re&&re[0]))&&(re=ce(re)),!re||!re.length)return[["M",0,0]];for(var ae=[],ne=0,te=0,le=0,Xe=0,Ne=0,Re,nt=re.length,Ve=Ne;Ve<nt;Ve++){var L=[];ae.push(L);var B=re[Ve];if(Re=B[0],Re!=Re.toUpperCase()){L[0]=Re.toUpperCase();var H,X;switch(L[0]){case"A":L[1]=B[1],L[2]=B[2],L[3]=B[3],L[4]=B[4],L[5]=B[5],L[6]=+B[6]+ne,L[7]=+B[7]+te;break;case"V":L[1]=+B[1]+te;break;case"H":L[1]=+B[1]+ne;break;case"M":for(le=+B[1]+ne,Xe=+B[2]+te,H=B.length,X=1;X<H;X++)L[X]=+B[X]+(X%2?ne:te);break;default:for(H=B.length,X=1;X<H;X++)L[X]=+B[X]+(X%2?ne:te);break}}else for(var xe=B.length,ue=0;ue<xe;ue++)L[ue]=B[ue];switch(L[0]){case"Z":ne=+le,te=+Xe;break;case"H":ne=L[1];break;case"V":te=L[1];break;case"M":le=L[L.length-2],Xe=L[L.length-1],ne=L[L.length-2],te=L[L.length-1];break;default:ne=L[L.length-2],te=L[L.length-1];break}}return ae}function Se(re){var ae=Te(re),ne={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function te(H,X,xe){var ue,Ae;if(!H)return["C",X.x,X.y,X.x,X.y,X.x,X.y];switch(H[0]in{T:1,Q:1}||(X.qx=null,X.qy=null),H[0]){case"M":X.X=H[1],X.Y=H[2];break;case"A":parseFloat(H[1])===0||parseFloat(H[2])===0?H=["L",H[6],H[7]]:H=["C"].concat(de.apply(0,[X.x,X.y].concat(H.slice(1))));break;case"S":xe==="C"||xe==="S"?(ue=X.x*2-X.bx,Ae=X.y*2-X.by):(ue=X.x,Ae=X.y),H=["C",ue,Ae].concat(H.slice(1));break;case"T":xe==="Q"||xe==="T"?(X.qx=X.x*2-X.qx,X.qy=X.y*2-X.qy):(X.qx=X.x,X.qy=X.y),H=["C"].concat(j(X.x,X.y,X.qx,X.qy,H[1],H[2]));break;case"Q":X.qx=H[1],X.qy=H[2],H=["C"].concat(j(X.x,X.y,H[1],H[2],H[3],H[4]));break;case"H":H=["L"].concat(H[1],X.y);break;case"V":H=["L"].concat(X.x,H[1]);break}return H}function le(H,X){if(H[X].length>7){H[X].shift();for(var xe=H[X];xe.length;)Xe[X]="A",H.splice(X++,0,["C"].concat(xe.splice(0,6)));H.splice(X,1),nt=ae.length}}for(var Xe=[],Ne="",Re="",nt=ae.length,Ve=0;Ve<nt;Ve++){ae[Ve]&&(Ne=ae[Ve][0]),Ne!=="C"&&(Xe[Ve]=Ne,Ve>0&&(Re=Xe[Ve-1])),ae[Ve]=te(ae[Ve],ne,Re),Xe[Ve]!=="A"&&Ne==="C"&&(Xe[Ve]="C"),le(ae,Ve);var L=ae[Ve],B=L.length;ne.x=L[B-2],ne.y=L[B-1],ne.bx=parseFloat(L[B-4])||ne.x,ne.by=parseFloat(L[B-3])||ne.y}return(!ae[0][0]||ae[0][0]!=="M")&&ae.unshift(["M",0,0]),ae}return function(re){return Se(re).join(",").split(",").join(" ")}}(),h.namespace=t,h.g=Nce,h}(),bu={classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},dh="[object Arguments]",uE="[object Array]",ig="[object Boolean]",kA="[object Date]",oU="[object Error]",ple="[object Function]",zh="[object Map]",sg="[object Number]",vle="[object Null]",ul="[object Object]",LA="[object RegExp]",Vh="[object Set]",og="[object String]",ag="[object Symbol]",gle="[object Undefined]",mle="[object WeakMap]",NA="[object ArrayBuffer]",qA="[object DataView]",aU="[object Float32Array]",uU="[object Float64Array]",cU="[object Int8Array]",lU="[object Int16Array]",fU="[object Int32Array]",hU="[object Uint8Array]",dU="[object Uint8ClampedArray]",pU="[object Uint16Array]",vU="[object Uint32Array]",yle={[dh]:!0,[uE]:!0,[NA]:!0,[qA]:!0,[ig]:!0,[kA]:!0,[aU]:!0,[uU]:!0,[cU]:!0,[lU]:!0,[fU]:!0,[zh]:!0,[sg]:!0,[ul]:!0,[LA]:!0,[Vh]:!0,[og]:!0,[ag]:!0,[hU]:!0,[dU]:!0,[pU]:!0,[vU]:!0,[oU]:!1,[ple]:!1,[mle]:!1},DA="\\ud800-\\udfff",_le="\\u0300-\\u036f",ble="\\ufe20-\\ufe2f",wle="\\u20d0-\\u20ff",xle="\\u1ab0-\\u1aff",Sle="\\u1dc0-\\u1dff",Ele=_le+ble+wle+xle+Sle,gU="\\u2700-\\u27bf",mU="a-z\\xdf-\\xf6\\xf8-\\xff",Ale="\\xac\\xb1\\xd7\\xf7",Tle="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ple="\\u2000-\\u206f",Cle=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yU="A-Z\\xc0-\\xd6\\xd8-\\xde",Rle="\\ufe0e\\ufe0f",_U=Ale+Tle+Ple+Cle,bU="['’]",gz=`[${_U}]`,FA=`[${Ele}]`,wU="\\d",Ile=`[${gU}]`,xU=`[${mU}]`,SU=`[^${DA}${_U+wU+gU+mU+yU}]`,cE="\\ud83c[\\udffb-\\udfff]",Ole=`(?:${FA}|${cE})`,EU=`[^${DA}]`,BA="(?:\\ud83c[\\udde6-\\uddff]){2}",zA="[\\ud800-\\udbff][\\udc00-\\udfff]",il=`[${yU}]`,Mle="\\u200d",mz=`(?:${xU}|${SU})`,kle=`(?:${il}|${SU})`,yz=`(?:${bU}(?:d|ll|m|re|s|t|ve))?`,_z=`(?:${bU}(?:D|LL|M|RE|S|T|VE))?`,AU=`${Ole}?`,TU=`[${Rle}]?`,Lle=`(?:${Mle}(?:${[EU,BA,zA].join("|")})${TU+AU})*`,Nle="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qle="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",PU=TU+AU+Lle,Dle=`(?:${[Ile,BA,zA].join("|")})${PU}`,Fle=RegExp([`${il}?${xU}+${yz}(?=${[gz,il,"$"].join("|")})`,`${kle}+${_z}(?=${[gz,il+mz,"$"].join("|")})`,`${il}?${mz}+${yz}`,`${il}+${_z}`,qle,Nle,`${wU}+`,Dle].join("|"),"g"),VA=200,lE="__hash_undefined__",Ble=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,zle=`[${DA}]`,Vle=`${EU}${FA}?`,Gle=`(?:${[Vle,FA,BA,zA,zle].join("|")})`,CU=RegExp(`${cE}(?=${cE})|${Gle+PU}`,"g"),$le=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ule=/^\w*$/,jle=46,Hle=/\\(\\)?/g,Wle=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),Xle=/^(?:0|[1-9]\d*)$/,Yle=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),Kle=4294967294,Zle=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,RU=e=>CU.test(e),Jle=e=>e.match(CU)||[],Qle=e=>e.split(""),IU=e=>RU(e)?Jle(e):Qle(e),efe=e=>e==null?[]:Gh(e).map(t=>e[t]),Gh=e=>po(e)?OU(e):Object.keys(Object(e)),tfe=e=>{if(!ug(e))return Object.keys(e);var t=[];for(var r in Object(e))hasOwnProperty.call(e,r)&&r!="constructor"&&t.push(r);return t},OU=(e,t)=>{const r=Array.isArray(e),n=!r&&ko(e)&&oo(e)===dh,i=!r&&!n&&Uh(e),s=r||n||i,o=e.length,a=new Array(s?o:0);let u=s?-1:o;for(;++u<o;)a[u]=`${u}`;for(const c in e)(t||hasOwnProperty.call(e,c))&&!(s&&(c==="length"||HA(c,o)))&&a.push(c);return a},ip=(e,t)=>{let{length:r}=e;for(;r--;)if(Yl(e[r][0],t))return r;return-1},Yl=(e,t)=>e===t||e!==e&&t!==t,ko=e=>e!=null&&typeof e=="object",$p=(e,t,r)=>{if(!Wr(r))return!1;const n=typeof t;return(n=="number"?po(r)&&t>-1&&t<r.length:n=="string"&&t in r)?Yl(r[t],e):!1},rfe=e=>ko(e)&&oo(e)==Vh,nfe=e=>ko(e)&&oo(e)==zh,ug=e=>{const t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Object.prototype;return e===r},Kl=(e,t,r)=>{const n=e[t];(!(hasOwnProperty.call(e,t)&&Yl(n,r))||r===void 0&&!(t in e))&&(e[t]=r)},$h=(e,t,r)=>{let n=-1;const i=t.length;for(;++n<i;){const s=t[n];Kl(r,s,e[s])}return r},po=e=>e!=null&&typeof e!="function"&&typeof e.length=="number"&&e.length>-1&&e.length%1===0,Cl=e=>typeof e=="symbol"||ko(e)&&oo(e)===ag,ife=e=>{const t=e.length;let r=new e.constructor(t);return t&&typeof e[0]=="string"&&hasOwnProperty.call(e,"index")&&(r.index=e.index,r.input=e.input),r},GA=(e,t)=>{let r=-1;const n=e.length;for(t||(t=new Array(n));++r<n;)t[r]=e[r];return t},oo=e=>e==null?e===void 0?gle:vle:Object.prototype.toString.call(e),$A=e=>{const t=new e.constructor(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t},MU=(e,t)=>{const r=t?$A(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},sfe=e=>{const t=new e.constructor(e.source,/\w*$/.exec(e));return t.lastIndex=e.lastIndex,t},kU=e=>typeof e.constructor=="function"&&!ug(e)?Object.create(Object.getPrototypeOf(e)):{},UA=e=>e==null?[]:(e=Object(e),Object.getOwnPropertySymbols(e).filter(r=>propertyIsEnumerable.call(e,r))),ofe=(e,t)=>$h(e,UA(e),t);function afe(e,t){const r=t?$A(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}const ufe=(e,t,r)=>{const n=e.constructor;switch(t){case NA:return $A(e);case ig:case kA:return new n(+e);case qA:return afe(e,r);case aU:case uU:case cU:case lU:case fU:case hU:case dU:case pU:case vU:return MU(e,r);case zh:return new n(e);case sg:case og:return new n(e);case LA:return sfe(e);case Vh:return new n;case ag:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(e)):{}}},Uh=e=>ko(e)&&Ble.test(oo(e)),fE=e=>{const t=Object.keys(e);return!Array.isArray(e)&&e!=null&&t.push(...UA(Object(e))),t},LU=e=>{const t=[];for(;e;)t.push(...UA(e)),e=Object.getPrototypeOf(Object(e));return t},NU=e=>{const t=[];for(const r in e)t.push(r);return Array.isArray(e)||t.push(...LU(e)),t},sp=({__data__:e},t)=>{const r=e;return bfe(t)?r[typeof t=="string"?"string":"hash"]:r.map},cfe=(e,t,r,n)=>{const i=fE(e),s=i.length,a=fE(t).length;if(s!=a)return!1;let u,c=s;for(;c--;)if(u=i[c],!hasOwnProperty.call(t,u))return!1;const f=n.get(e),h=n.get(t);if(f&&h)return f==t&&h==e;let g=!0;n.set(e,t),n.set(t,e);let y;for(;++c<s;){u=i[c];const m=e[u],_=t[u];if(!(m===_||r(m,_,n))){g=!1;break}y||(y=u=="constructor")}if(g&&!y){const m=e.constructor,_=t.constructor;m!=_&&"constructor"in e&&"constructor"in t&&!(typeof m=="function"&&m instanceof m&&typeof _=="function"&&_ instanceof _)&&(g=!1)}return n.delete(e),n.delete(t),g},cg=(e,t,r)=>e===t?!0:e==null||t==null||!ko(e)&&!ko(t)?e!==e&&t!==t:lfe(e,t,cg,r),lfe=(e,t,r,n)=>{let i=Array.isArray(e);const s=Array.isArray(t);let o=i?uE:oo(e),a=s?uE:oo(t);o=o==dh?ul:o,a=a==dh?ul:a;let u=o==ul;const c=a==ul,f=o==a;if(f&&!u)return n||(n=new ml),i||Uh(e)?qU(e,t,!1,r,n):dfe(e,t,o,r,n);const h=u&&hasOwnProperty.call(e,"__wrapped__"),g=c&&hasOwnProperty.call(t,"__wrapped__");if(h||g){const y=h?e.value():e,m=g?t.value():t;return n||(n=new ml),r(y,m,n)}return f?(n||(n=new ml),cfe(e,t,r,n)):!1},qU=(e,t,r,n,i)=>{const s=e.length,o=t.length;if(s!=o)return!1;const a=i.get(e),u=i.get(t);if(a&&u)return a==t&&u==e;let c=-1,f=!0;const h=r?new vh:void 0;for(i.set(e,t),i.set(t,e);++c<s;){const g=e[c],y=t[c];if(h){if(!ffe(t,(m,_)=>{if(!hfe(h,_)&&(g===m||n(g,m,i)))return h.push(_)})){f=!1;break}}else if(!(g===y||n(g,y,i))){f=!1;break}}return i.delete(e),i.delete(t),f},ffe=(e,t)=>{let r=-1;const n=e==null?0:e.length;for(;++r<n;)if(t(e[r],r,e))return!0;return!1},hfe=(e,t)=>e.has(t),bz=(e,t,r,n)=>!(e.byteLength!=t.byteLength||!r(new Uint8Array(e),new Uint8Array(t),n)),dfe=(e,t,r,n,i)=>{switch(r){case qA:return e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset?!1:(e=e.buffer,t=t.buffer,bz(e,t,n,i));case NA:return bz(e,t,n,i);case ig:case kA:case sg:return Yl(+e,+t);case oU:return e.name==t.name&&e.message==t.message;case LA:case og:return e==`${t}`;case zh:let s=DU;case Vh:if(s||(s=lg),e.size!=t.size)return!1;const o=i.get(e);if(o)return o==t;i.set(e,t);const a=qU(s(e),s(t),!0,n,i);return i.delete(e),a;case ag:return Symbol.prototype.valueOf.call(e)==Symbol.prototype.valueOf.call(t)}return!1},DU=e=>{let t=-1,r=Array(e.size);return e.forEach((n,i)=>{r[++t]=[i,n]}),r},lg=e=>{let t=-1;const r=new Array(e.size);return e.forEach(n=>{r[++t]=n}),r},jA=(e,t)=>{if(Array.isArray(e))return!1;const r=typeof e;return r==="number"||r==="boolean"||e==null||Cl(e)?!0:Ule.test(e)||!$le.test(e)||t!=null&&e in Object(t)},pfe=e=>{const t=[];return e.charCodeAt(0)===jle&&t.push(""),e.replace(Wle,(r,n,i,s)=>{let o=r;i?o=s.replace(Hle,"$1"):n&&(o=n.trim()),t.push(o)}),t},Nu=(e,t)=>Array.isArray(e)?e:jA(e,t)?[e]:pfe(`${e}`),jh=(e,t)=>{t=Nu(t,e);let r=0;const n=t.length;for(;e!=null&&r<n;)e=e[qu(t[r])],r++;return r&&r==n?e:void 0};function vfe(e,t){if(e!==t){const r=e!==void 0,n=e===null,i=e===e,s=Cl(e),o=t!==void 0,a=t===null,u=t===t,c=Cl(t);if(!a&&!c&&!s&&e>t||s&&o&&u&&!a&&!c||n&&o&&u||!r&&u||!i)return 1;if(!n&&!s&&!c&&e<t||c&&r&&i&&!n&&!s||a&&r&&i||!o&&i||!u)return-1}return 0}function gfe(e,t,r){let n=-1;const i=e.criteria,s=t.criteria,o=i.length,a=r.length;for(;++n<o;){const u=n<a?r[n]:null,f=(u&&typeof u=="function"?u:vfe)(i[n],s[n]);if(f)return u&&typeof u!="function"?f*(u=="desc"?-1:1):f}return e.index-t.index}const FU=(e,t)=>{let r=(o,a)=>!!(o==null?0:o.length)&&o.indexOf(a)>-1,n=!0;const i=[],s=t.length;if(!e.length)return i;t.length>=VA&&(r=(o,a)=>o.has(a),n=!1,t=new vh(t));e:for(let o in e){let a=e[o];const u=a;if(a=a!==0?a:0,n&&u===u){let c=s;for(;c--;)if(t[c]===u)continue e;i.push(a)}else r(t,u)||i.push(a)}return i},qu=e=>{if(typeof e=="string"||Cl(e))return e;const t=`${e}`;return t=="0"&&1/e==-1/0?"-0":t},gl=(e,t=!1,r=!1,n=!0,i,s,o,a)=>{let u;if(i&&(u=o?i(e,s,o,a):i(e)),u!==void 0)return u;if(!Wr(e))return e;const c=Array.isArray(e),f=oo(e);if(c){if(u=ife(e),!t)return GA(e,u)}else{const m=typeof e=="function";if(f===ul||f===dh||m&&!o){if(u=r||m?{}:kU(e),!t)return r?mfe(e,$h(e,Object.keys(e),u)):ofe(e,Object.assign(u,e))}else{if(m||!yle[f])return o?e:{};u=ufe(e,f,t)}}a||(a=new ml);const h=a.get(e);if(h)return h;if(a.set(e,u),nfe(e))return e.forEach((m,_)=>{u.set(_,gl(m,t,r,n,i,_,e,a))}),u;if(rfe(e))return e.forEach(m=>{u.add(gl(m,t,r,n,i,m,e,a))}),u;if(Uh(e))return u;const y=c?void 0:(n?r?NU:fE:r?zU:Gh)(e);return(y||e).forEach((m,_)=>{y&&(_=m,m=e[_]),Kl(u,_,gl(m,t,r,n,i,_,e,a))}),u},mfe=(e,t)=>$h(e,LU(e),t),BU=(e,t)=>t.length<2?e:jh(e,t.slice(0,-1)),yfe=(e,t,r)=>{if(!Wr(e))return e;t=Nu(t,e);const n=t.length,i=n-1;let s=-1,o=e;for(;o!=null&&++s<n;){const a=qu(t[s]);let u=r;if(s!=i){const c=o[a];u=void 0,u===void 0&&(u=Wr(c)?c:HA(t[s+1])?[]:{})}Kl(o,a,u),o=o[a]}return e},HA=(e,t)=>{const r=typeof e;return t=t??Number.MAX_SAFE_INTEGER,!!t&&(r==="number"||r!=="symbol"&&Xle.test(e))&&e>-1&&e%1==0&&e<t},_fe=(e,t)=>{t=Nu(t,e),e=BU(e,t);const r=t[t.length-1];return e==null||delete e[qu(r)]},bfe=e=>{const t=typeof e;return t==="string"||t==="number"||t==="symbol"||t==="boolean"?e!=="__proto__":e===null},zU=e=>{const t=[];for(const r in e)t.push(r);return t},wfe=e=>{e=Object(e);const t={};for(const r in e)t[r]=e[r];return t},wz=(e,t)=>{if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]};function VU(e,t=!1){return(r,...n)=>{let i=-1,s=n.length,o=s>1?n[s-1]:void 0;const a=s>2?n[2]:void 0;for(o=e.length>3&&typeof o=="function"?(s--,o):t?(u,c)=>{if(Array.isArray(u)&&!Array.isArray(c))return c}:void 0,a&&$p(n[0],n[1],a)&&(o=s<3?void 0:o,s=1),r=Object(r);++i<s;){const u=n[i];u&&e(r,u,i,o)}return r}}const WA=(e,t,r,n,i)=>{e!==t&&Zs(t,(s,o)=>{if(Wr(s))i||(i=new ml),xfe(e,t,o,r,WA,n,i);else{let a=n?n(e[o],s,`${o}`,e,t,i):void 0;a===void 0&&(a=s),hE(e,o,a)}})},xfe=(e,t,r,n,i,s,o)=>{const a=wz(e,r),u=wz(t,r),c=o.get(u);if(c){hE(e,r,c);return}let f=s?s(a,u,`${r}`,e,t,o):void 0,h=f===void 0;if(h){const g=Array.isArray(u),y=!g&&Uh(u);f=u,g||y?Array.isArray(a)?f=a:ko(a)&&po(a)?f=GA(a):y?(h=!1,f=MU(u,!0)):f=[]:Jn(u)||ph(u)?(f=a,ph(a)?f=wfe(a):(typeof a=="function"||!Wr(a))&&(f=kU(u))):h=!1}h&&(o.set(u,f),i(f,u,n,s,o),o.delete(u)),hE(e,r,f)},hE=(e,t,r)=>{(r!==void 0&&!Yl(e[t],r)||r===void 0&&!(t in e))&&Kl(e,t,r)};function Sfe(e,t,r){const n=Object(e),i=r(e);let{length:s}=i,o=-1;for(;s--;){const a=i[++o];if(t(n[a],a,n)===!1)break}return e}const Efe=(e,t)=>e&&Sfe(e,t,Gh),XA=(e,t)=>{if(e==null)return e;if(!po(e))return Efe(e,t);const r=e.length,n=Object(e);let i=-1;for(;++i<r&&t(n[i],i,n)!==!1;);return e};function Afe(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}const Tfe=Set&&1/lg(new Set([void 0,-0]))[1]==1/0?e=>new Set(e):()=>{};function GU(e,t,r,n,i,s){return Wr(e)&&Wr(t)&&(s.set(t,e),WA(e,t,void 0,GU,s),s.delete(t)),e}function Pfe(e,t,r){t.length?t=t.map(o=>Array.isArray(o)?a=>jh(a,o.length===1?o[0]:o):o):t=[o=>o];let n=-1,i=-1;const s=po(e)?new Array(e.length):[];return XA(e,o=>{const a=t.map(u=>u(o));s[++i]={criteria:a,index:++n,value:o}}),Cfe(s,(o,a)=>gfe(o,a,r))}function Cfe(e,t){let{length:r}=e;for(e.sort(t);r--;)e[r]=e[r].value;return e}function $U(e){return e===e&&!Wr(e)}function UU(e,t){return r=>r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}function jU(e,t){return e!=null&&jfe(e,t,Ufe)}function Rfe(e,t){return jA(e)&&$U(t)?UU(qu(e),t):r=>{const n=jh(r,e);return n===void 0&&n===t?jU(r,e):cg(t,n)}}function Ife(e){const t=Ofe(e);return t.length===1&&t[0][2]?UU(t[0][0],t[0][1]):r=>r===e||Mfe(r,e,t)}function Ofe(e){const t=Gh(e);let r=t.length;for(;r--;){const n=t[r],i=e[n];t[r]=[n,i,$U(i)]}return t}function Mfe(e,t,r,n){let i=r.length;const s=i;if(e==null)return!s;let o;for(e=Object(e);i--;)if(o=r[i],o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1;for(;++i<s;){o=r[i];const a=o[0],u=e[a],c=o[1];if(o[2]){if(u===void 0&&!(a in e))return!1}else{const f=new ml;if(!cg(c,u,f))return!1}}return!0}function kfe(e){return jA(e)?Lfe(qu(e)):Nfe(e)}function Lfe(e){return t=>t==null?void 0:t[e]}function Nfe(e){return t=>jh(t,e)}function qfe(e){return typeof e=="function"?e:e==null?t=>t:typeof e=="object"?Array.isArray(e)?Rfe(e[0],e[1]):Ife(e):kfe(e)}function fg(){const e=qfe;return arguments.length?e(arguments[0]):e}const Dfe=(e,t,r,n)=>{let i=-1;const s=e==null?0:e.length;for(n&&s&&(r=e[++i]);++i<s;)r=t(r,e[i],i,e);return r},Ffe=(e,t,r,n,i)=>(i(e,(s,o,a)=>{r=n?(n=!1,s):t(r,s,o,a)}),r);function Bfe(e,t,r){const n=Array.isArray(e)?Dfe:Ffe,i=arguments.length<3;return n(e,t,r,i,XA)}const zfe=e=>Array.isArray(e)||ph(e)||!!(e&&e[Symbol.isConcatSpreadable]);function HU(e,t,r,n,i){let s=-1;const o=e.length;for(r||(r=zfe),i||(i=[]);++s<o;){var a=e[s];t>0&&r(a)?t>1?HU(a,t-1,r,n,i):i.push(...a):i[i.length]=a}return i}const ph=e=>ko(e)&&oo(e)=="[object Arguments]",Vfe=(e,t)=>Gfe(e,t,(r,n)=>jU(e,n)),Gfe=(e,t,r)=>{let n=-1;const i=t.length,s={};for(;++n<i;){const o=t[n],a=jh(e,o);r(a,o)&&yfe(s,Nu(o,e),a)}return s},$fe=e=>typeof e=="number"&&e>-1&&e%1==0&&e<=Number.MAX_SAFE_INTEGER,Ufe=(e,t)=>e!=null&&t in Object(e),jfe=(e,t,r)=>{t=Nu(t,e);for(var n=-1,i=t.length,s=!1;++n<i;){var o=qu(t[n]);if(!(s=e!=null&&r(e,o)))break;e=e[o]}return s||++n!=i?s:(i=e==null?0:e.length,!!i&&$fe(i)&&HA(o,i)&&(Array.isArray(e)||ph(e)))},Hfe=e=>e.match(Zle),Wfe=e=>e.match(Fle),Xfe=(e,t)=>(Yle(e)?Wfe(e):Hfe(e))||[],Yfe=(e,t,r)=>{const{length:n}=e;return r=r===void 0?n:r,e.slice(t,r)},Kfe=Zfe("toUpperCase");function Zfe(e){return t=>{if(!t)return"";const r=RU(t)?IU(t):void 0,n=r?r[0]:t[0],i=r?Yfe(r,1).join(""):t.slice(1);return n[e]()+i}}class ml{constructor(t){const r=this.__data__=new OS(t);this.size=r.size}clear(){this.__data__=new OS,this.size=0}delete(t){const r=this.__data__,n=r.delete(t);return this.size=r.size,n}get(t){return this.__data__.get(t)}has(t){return this.__data__.has(t)}set(t,r){let n=this.__data__;if(n instanceof OS){const i=n.__data__;if(i.length<VA-1)return i.push([t,r]),this.size=++n.size,this;n=this.__data__=new WU(i)}return n.set(t,r),this.size=n.size,this}}class OS{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.clear();++r<n;){const i=t[r];this.set(i[0],i[1])}}clear(){this.__data__=[],this.size=0}delete(t){const r=this.__data__,n=ip(r,t);if(n<0)return!1;const i=r.length-1;return n==i?r.pop():r.splice(n,1),--this.size,!0}get(t){const r=this.__data__,n=ip(r,t);return n<0?void 0:r[n][1]}has(t){return ip(this.__data__,t)>-1}set(t,r){const n=this.__data__,i=ip(n,t);return i<0?(++this.size,n.push([t,r])):n[i][1]=r,this}}class WU{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.clear();++r<n;){const i=t[r];this.set(i[0],i[1])}}clear(){this.size=0,this.__data__={hash:new xz,map:new Map,string:new xz}}delete(t){const r=sp(this,t).delete(t);return this.size-=r?1:0,r}get(t){return sp(this,t).get(t)}has(t){return sp(this,t).has(t)}set(t,r){const n=sp(this,t),i=n.size;return n.set(t,r),this.size+=n.size==i?0:1,this}}class xz{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.clear();++r<n;){const i=t[r];this.set(i[0],i[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(t){const r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}get(t){const n=this.__data__[t];return n===lE?void 0:n}has(t){return this.__data__[t]!==void 0}set(t,r){const n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r===void 0?lE:r,this}}class vh{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.__data__=new WU;++r<n;)this.add(t[r])}add(t){return this.__data__.set(t,lE),this}has(t){return this.__data__.has(t)}}vh.prototype.push=vh.prototype.add;const Jfe=function(e){var t=Object.prototype.toString;return e===!0||e===!1||!!e&&typeof e=="object"&&t.call(e)===ig},Wr=function(e){return!!e&&(typeof e=="object"||typeof e=="function")},fs=function(e){var t=Object.prototype.toString;return typeof e=="number"||!!e&&typeof e=="object"&&t.call(e)===sg},Li=function(e){var t=Object.prototype.toString;return typeof e=="string"||!!e&&typeof e=="object"&&t.call(e)===og},jt=VU((e,t)=>{if(ug(t)||po(t)){$h(t,Gh(t),e);return}for(var r in t)hasOwnProperty.call(t,r)&&Kl(e,r,t[r])}),Qfe=(e,...t)=>{let r=-1,n=t.length;const i=n>2?t[2]:void 0;for(i&&$p(t[0],t[1],i)&&(n=1);++r<n;){const s=t[r];if(s==null)continue;const o=Object.keys(s),a=o.length;let u=-1;for(;++u<a;){const c=o[u],f=e[c];(f===void 0||Yl(f,Object.prototype[c])&&!hasOwnProperty.call(e,c))&&(e[c]=s[c])}}return e},Os=Qfe,ehe=function(...t){return t.push(void 0,GU),ni.apply(void 0,t)},YA=ehe,To=(e,t,...r)=>{let n=-1;const i=typeof t=="function",s=po(e)?new Array(e.length):[];return XA(e,o=>{s[++n]=i?t.apply(o,r):the(o,t,...r)}),s},the=(e,t,...r)=>{t=Nu(t,e),e=BU(e,t);const n=e==null?e:e[qu(Afe(t))];return n==null?void 0:n.apply(e,r)},XU=(e,t,r)=>{let n=0,i=e==null?0:e.length;if(i==0)return 0;r=fg(r,2),t=r(t);const s=t!==t,o=t===null,a=Cl(t),u=t===void 0;for(;n<i;){let c;const f=Math.floor((n+i)/2),h=r(e[f]),g=h!==void 0,y=h===null,m=h===h,_=Cl(h);s?c=m:u?c=m&&g:o?c=m&&g&&!y:a?c=m&&g&&!y&&!_:y||_?c=!1:c=h<t,c?n=f+1:i=f}return Math.min(i,Kle)},Hh=(e,t)=>{let r=-1,n=(u,c)=>!!(u==null?0:u.length)&&u.indexOf(c)>-1;t=fg(t,2);let i=!0;const{length:s}=e,o=[];let a=o;if(s>=VA){const u=t?null:Tfe(e);if(u)return lg(u);i=!1,n=(c,f)=>c.has(f),a=new vh}else a=t?[]:o;e:for(;++r<s;){let u=e[r];const c=t?t(u):u;if(u=u!==0?u:0,i&&c===c){let f=a.length;for(;f--;)if(a[f]===c)continue e;t&&a.push(c),o.push(u)}else n(a,c)||(a!==o&&a.push(c),o.push(u))}return o},ta=e=>gl(e),Ks=e=>gl(e,!0),Da=e=>{if(e==null)return!0;if(po(e)&&(Array.isArray(e)||typeof e=="string"||typeof e.splice=="function"||Uh(e)||ph(e)))return!e.length;const t=oo(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(ug(e))return!tfe(e).length;for(const r in e)if(hasOwnProperty.call(e,r))return!1;return!0},cl=(e,t)=>cg(e,t),fn=e=>typeof e=="function",Jn=e=>{if(!ko(e)||oo(e)!="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},Fr=e=>{if(!e)return[];if(po(e))return Li(e)?IU(e):GA(e);if(Symbol.iterator&&Symbol.iterator in Object(e)){const n=e[Symbol.iterator]();let i;const s=[];for(;!(i=n.next()).done;)s.push(i.value);return s}const t=oo(e);return(t==zh?DU:t==Vh?lg:efe)(e)};function rhe(e,t,r){if(typeof e!="function")throw new TypeError("Expected a function");let n,i,s,o,a,u,c=0,f=!1,h=!1,g=!0;const y=!t&&t!==0&&window&&typeof window.requestAnimationFrame=="function";t=+t||0,Wr(r)&&(f=!!r.leading,h="maxWait"in r,s=h?Math.max(20,t):s,g="trailing"in r?!!r.trailing:g);function m(p){const P=n,O=i;return n=i=void 0,c=p,o=e.apply(O,P),o}function _(p,P){return y?(window.cancelAnimationFrame(a),window.requestAnimationFrame(p)):setTimeout(p,P)}function x(p){if(y)return window.cancelAnimationFrame(p);clearTimeout(p)}function S(p){return c=p,a=_(T,t),f?m(p):o}function E(p){const P=p-u,O=p-c,q=t-P;return h?Math.min(q,s-O):q}function A(p){const P=p-u,O=p-c;return u===void 0||P>=t||P<0||h&&O>=s}function T(){const p=Date.now();if(A(p))return I(p);a=_(T,E(p))}function I(p){return a=void 0,g&&n?m(p):(n=i=void 0,o)}function N(...p){const P=Date.now(),O=A(P);if(n=p,i=this,u=P,O){if(a===void 0)return S(u);if(h)return a=_(T,t),m(u)}return a===void 0&&(a=_(T,t)),o}return N.cancel=()=>{a!==void 0&&x(a),c=0,n=u=i=a=void 0},N.flush=()=>a===void 0?o:I(Date.now()),N.pending=()=>a!==void 0,N}const nhe=(e,t)=>(t=fg(t,2),Bfe(e,(r,n,i)=>(i=t(n),hasOwnProperty.call(r,i)?r[i].push(n):Kl(r,i,[n]),r),{})),MS=(e,t=[])=>{if(e==null)return[];const r=t.length;return r>1&&$p(e,t[0],t[1])?t=[]:r>2&&$p(t[0],t[1],t[2])&&(t=[t[0]]),Array.isArray(t)||(t=[fg(t,2)]),Pfe(e,t.flat(1),[])},ihe=e=>(e==null?0:e.length)?HU(e,1/0):[],Sz=(e,...t)=>po(e)?FU(e,t):[],she=(e,...t)=>ko(e)&&po(e)?FU(e,t.flat(1)):[],dE=(...e)=>{const t=e.flat(1);return Hh(t)},Fa=(e,t)=>{if(e==null)return!1;typeof t=="string"&&(t=t.split("."));let r=-1,n=e;for(;++r<t.length;){if(!n||!hasOwnProperty.call(n,t[r]))return!1;n=n[t[r]]}return!0},Qn=(e,t,r)=>{t=Nu(t,e);let n=-1,i=t.length;for(i||(i=1,e=void 0);++n<i;){let s=e==null?void 0:e[qu(t[n])];s===void 0&&(n=i,s=r),e=typeof s=="function"?s.call(e):s}return e},fc=(e,...t)=>{let r={};if(e==null)return r;let n=!1;t=t.flat(1).map(s=>(s=Nu(s,e),n||(n=s.length>1),s)),$h(e,NU(e),r),n&&(r=gl(r,!0,!0,!0,s=>Jn(s)?void 0:s));let i=t.length;for(;i--;)_fe(r,t[i]);return r},ohe=(e,...t)=>e==null?{}:Vfe(e,t.flat(1/0)),Zs=(e,t=r=>r)=>{let r=-1;const n=Object(e),i=po(e)?OU(e,!0):zU(e);let s=i.length;for(;s--;){const o=i[++r];if(t(n[o],o,n)===!1)break}},ahe=(e="")=>Xfe(`${e}`.replace(/['\u2019]/g,"")).reduce((t,r,n)=>(r=r.toLowerCase(),t+(n?Kfe(r):r)),"");let uhe=0;const che=(e="")=>{const t=++uhe;return`${e}`+t},ni=VU((e,t,r,n)=>{WA(e,t,r,n)},!0),So=function(e){return e&&e.toString().split(" ").map(function(t){return t.substr(0,bu.classNamePrefix.length)!==bu.classNamePrefix&&(t=bu.classNamePrefix+t),t}).join(" ")},lhe=function(e){return e&&e.toString().split(" ").map(function(t){return t.substr(0,bu.classNamePrefix.length)===bu.classNamePrefix&&(t=t.substr(bu.classNamePrefix.length)),t}).join(" ")},Up=function(e,t){const r={},n={},i=$e.namespace.svg,s=t||i,o=document.createDocumentFragment(),a=function(u,c,f){for(let h=0;h<u.length;h++){const g=u[h];if(typeof g=="string"){const T=document.createTextNode(g);c.appendChild(T);continue}if(!g.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");const y=g.tagName;let m;g.hasOwnProperty("namespaceURI")&&(f=g.namespaceURI),m=document.createElementNS(f,y);const _=f===i,x=_?$e:It,S=g.attributes;S&&x(m).attr(S);const E=g.style;if(E&&It(m).css(E),g.hasOwnProperty("className")){const T=g.className;_?m.className.baseVal=T:m.className=T}if(g.hasOwnProperty("textContent")&&(m.textContent=g.textContent),g.hasOwnProperty("selector")){const T=g.selector;if(r[T])throw new Error("json-dom-parser: selector must be unique");r[T]=m,x(m).attr("joint-selector",T)}if(g.hasOwnProperty("groupSelector")){let T=g.groupSelector;Array.isArray(T)||(T=[T]);for(let I=0;I<T.length;I++){const N=T[I];let p=n[N];p||(p=n[N]=[]),p.push(m)}}c.appendChild(m);const A=g.children;Array.isArray(A)&&a(A,m,f)}};return a(e,o,s),{fragment:o,selectors:r,groupSelectors:n}},op=function(e){let t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);t=(t<<5)-t+n,t=t&t}return t},gh=function(e,t,r){for(var n=Array.isArray(t)?t:t.split(r||"/"),i,s=0,o=n.length;s<o;)if(i=n[s++],Object(e)===e&&i in e)e=e[i];else return;return e},YU=function(e,t){return typeof t!="string"&&typeof t!="number"&&(t=String(t)),!(t==="constructor"&&typeof e[t]=="function"||t==="__proto__")},pE=function(e,t,r,n){const i=Array.isArray(t)?t:t.split(n||"/"),s=i.length-1;let o=e,a=0;for(;a<s;a++){const u=i[a];if(!YU(o,u))return e;o=o[u]||(o[u]={})}return o[i[s]]=r,e},Ez=function(e,t,r){const n=Array.isArray(t)?t:t.split(r),i=n.length-1;let s=e,o=0;for(;o<i;o++){const a=n[o];if(!YU(s,a))return e;const u=s[a];if(!u)return e;s=u}return delete s[n[i]],e},fhe=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,r=e==="x"?t:t&3|8;return r.toString(16)})},ll=function(e){return ll.id=ll.id||1,e===void 0?"j_"+ll.id++:(e.id=e.id===void 0?"j_"+ll.id++:e.id,e.id)},hhe=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},Zn=function(e){if(e.normalized)return e;const{originalEvent:t,target:r}=e,n=t&&t.changedTouches&&t.changedTouches[0];if(n)for(let i in n)e[i]===void 0&&(e[i]=n[i]);if(r){const i=r.correspondingUseElement;i&&(e.target=i)}return e.normalized=!0,e},dhe=function(e){let i=0,s=0,o=0,a=0;return"detail"in e&&(s=e.detail),"wheelDelta"in e&&(s=-e.wheelDelta/120),"wheelDeltaY"in e&&(s=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(i=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(i=s,s=0),o="deltaX"in e?e.deltaX:i*10,a="deltaY"in e?e.deltaY:s*10,(o||a)&&e.deltaMode&&(e.deltaMode==1?(o*=40,a*=40):(o*=800,a*=800)),e.deltaX===0&&e.deltaY!==0&&e.shiftKey&&(o=a,a=0,i=s,s=0),o&&!i&&(i=o<1?-1:1),a&&!s&&(s=a<1?-1:1),{spinX:i,spinY:s,deltaX:o,deltaY:a}},phe=function(e,t){return e>t?t:e<-50?-50:e},vE=function(){var e;if(typeof window<"u"&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var t=0;e=function(r){var n=new Date().getTime(),i=Math.max(0,16-(n-t)),s=setTimeout(function(){r(n+i)},i);return t=n+i,s}}return function(r,n,...i){return e(n!==void 0?r.bind(n,...i):r)}}(),gE=function(){var e,t=typeof window<"u";return t&&(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),e=e||clearTimeout,t?e.bind(window):e}(),Ai=function(e){return Li(e)&&e.slice(-1)==="%"},vhe=function(e,t){function r(a){var u=new RegExp("(?:\\d+(?:\\.\\d+)*)("+a+")$").exec(e);return u?u[1]:null}var n=parseFloat(e);if(Number.isNaN(n))return null;var i={};i.value=n;var s;if(t==null)s="[A-Za-z]*";else if(Array.isArray(t)){if(t.length===0)return null;s=t.join("|")}else Li(t)&&(s=t);var o=r(s);return o===null?null:(i.unit=o,i)},Kf=0;function ghe(e,t){const r=e.split(t);let n=1;for(let i=0,s=r.length-1;i<s;i++){const o=[];(i>0||r[0]!=="")&&o.push(Kf),o.push(t),(i<s-1||r[s]!=="")&&o.push(Kf),r.splice(n,0,...o),n+=o.length+1}return r.filter(i=>i!=="")}function Az(e,t){if(e===null)return t.getBBox().height;switch(e.unit){case"em":return t.getBBox().height*e.value;case"px":case"":return e.value}}const KU=function(e,t,r={},n={}){var i=t.width,s=t.height,o=n.svgDocument||$e("svg").node,a=$e("tspan").node,u=$e("text").attr(r).append(a).node,c=document.createTextNode("");u.style.opacity=0,u.style.display="block",a.style.display="block",a.appendChild(c),o.appendChild(u),n.svgDocument||document.body.appendChild(o);const f=n.preserveSpaces,h=" ",g=n.separator||n.separator===""?n.separator:h,y=typeof g=="string"?g:h;var m=n.eol||`
`,_=n.hyphen?new RegExp(n.hyphen):/[^\w\d\u00C0-\u1FFF\u2800-\uFFFD]/,x=n.maxLineCount;fs(x)||(x=1/0);var S=e.split(g),E=[],A=[],T,I,N;f&&$e(a).attr("xml:space","preserve");for(var p=0,P=0,O=S.length;p<O;p++){var q=S[p];if(!(!q&&!f)&&typeof q=="string"){var V=!1;if(q.indexOf(m)>=0)if(q.length>1){const de=ghe(S[p],m);S.splice(p,1,...de),p--,O=S.length;continue}else{if(f&&typeof S[p-1]=="string"){S.splice(p,Kf,"",Kf),O+=2,p--;continue}A[++P]=!f||typeof S[p+1]=="string"?"":void 0,V=!0}if(!V){let de;if(f?de=A[P]!==void 0?A[P]+y+q:q:de=A[P]?A[P]+y+q:q,c.data=de,a.getComputedTextLength()<=i)A[P]=de,(T||I)&&(E[P++]=!0,T=0,I=0);else{if(!A[P]||T){var W=!!T;if(T=q.length-1,W||!T){if(!T){if(!A[P]){A=[];break}S.splice(p,2,q+S[p+1]),O--,E[P++]=!0,p--;continue}S[p]=q.substring(0,T);const ce=S[p+1];S[p+1]=q.substring(T)+(ce===void 0||ce===Kf?"":ce)}else{if(I)S.splice(p,2,S[p]+S[p+1]),I=0;else{var G=q.search(_);G>-1&&G!==q.length-1&&G!==0&&(I=G+1,T=0),S.splice(p,1,q.substring(0,I||T),q.substring(I||T)),O++}P&&!E[P-1]&&P--}(!f||A[P]!=="")&&p--;continue}P++,p--}}var J=null;if(A.length>x)J=x-1;else if(s!==void 0){if(N===void 0&&c.data!=="")if(r.lineHeight==="auto")N=Az({value:1.5,unit:"em"},u);else{const de=vhe(r.lineHeight,["em","px",""]);N=Az(de,u)}N*A.length>s&&(J=Math.floor(s/N)-1)}if(J!==null){A.splice(J+1);var se=n.ellipsis;if(!se||J<0)break;typeof se!="string"&&(se="…");var K=A[J];if(!K&&!V)break;var U=K.length,j,Q;do{if(Q=K[U],j=K.substring(0,U),Q?Q.match(g)&&(j+=Q):j+=y,j+=se,c.data=j,a.getComputedTextLength()<=i){A[J]=j;break}U--}while(U>=0);break}}}return n.svgDocument?o.removeChild(u):document.body.removeChild(o),A.join(m)},mhe=function(e){var t=It(It.parseHTML("<div>"+e+"</div>",null,!1));return t.find("*").each(function(){var r=this;It.each(r.attributes,function(){var n=this,i=n.name,s=n.value;(i.startsWith("on")||s.startsWith("javascript:")||s.startsWith("data:")||s.startsWith("vbscript:"))&&It(r).removeAttr(i)})}),t.html()},yhe=function(e,t){var r=It(e),n=r.map(function(){var i=this,s=i.parentNode,o=s.insertBefore(document.createTextNode(""),i.nextSibling);return function(){if(s===this)throw new Error("You can't sort elements if any one is a descendant of another.");s.insertBefore(this,o),s.removeChild(o)}});return Array.prototype.sort.call(r,t).each(function(i){n[i].call(this)})},hc=function(e){if(Object(e)!==e){var t=0;return isFinite(e)&&(t=+e),{top:t,right:t,bottom:t,left:t}}var r,n,i,s;return r=n=i=s=0,isFinite(e.vertical)&&(r=i=+e.vertical),isFinite(e.horizontal)&&(n=s=+e.horizontal),isFinite(e.top)&&(r=+e.top),isFinite(e.right)&&(n=+e.right),isFinite(e.bottom)&&(i=+e.bottom),isFinite(e.left)&&(s=+e.left),{top:r,right:n,bottom:i,left:s}},_he={linear:function(e){return e}},ZU={number:function(e,t){var r=t-e;return function(n){return e+r*n}},object:function(e,t){var r=Object.keys(e);return function(n){var i,s,o={};for(i=r.length-1;i!=-1;i--)s=r[i],o[s]=e[s]+(t[s]-e[s])*n;return o}}},bhe={outline:function(e){var t='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',r=Number.isFinite(e.margin)?e.margin:2,n=Number.isFinite(e.width)?e.width:1;return ji(t)({color:e.color||"blue",opacity:Number.isFinite(e.opacity)?e.opacity:1,outerRadius:r+n,innerRadius:r})},highlight:function(e){var t='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>';return ji(t)({color:e.color||"red",width:Number.isFinite(e.width)?e.width:1,blur:Number.isFinite(e.blur)?e.blur:0,opacity:Number.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var t=Number.isFinite(e.x)?e.x:2;return ji('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(e.y)?[t,e.y]:t})},dropShadow:function(e){var t="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return ji(t)({dx:e.dx||0,dy:e.dy||0,opacity:Number.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:Number.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return ji('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},sepia:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return ji('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},saturate:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return ji('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-t})},hueRotate:function(e){return ji('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return ji('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:1-t})},brightness:function(e){return ji('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(e.amount)?e.amount:1})},contrast:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return ji('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:.5-t/2})}},ji=function(e){var t=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(r){return r=r||{},e.replace(t,function(n){for(var i=Array.from(arguments),s=i.slice(1,4).find(function(u){return!!u}),o=s.split("."),a=r[o.shift()];a!==void 0&&o.length;)a=a[o.shift()];return a!==void 0?a:""})}},Mf=function(){};function JU(e){e=Hh(e);const t=Fr(e).reduce(function(r,n){return r[n.id]=n.clone(),r},{});return Fr(e).forEach(function(r){const n=t[r.id];if(n.isLink()){const o=n.source(),a=n.target();o.id&&t[o.id]&&n.prop("source/id",t[o.id].id),a.id&&t[a.id]&&n.prop("target/id",t[a.id].id)}const i=r.get("parent");i&&t[i]&&n.set("parent",t[i].id);const s=Fr(r.get("embeds")).reduce(function(o,a){return t[a]&&o.push(t[a].id),o},[]);Da(s)||n.set("embeds",s)}),t}const whe=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"],xhe=whe.reduce((e,t)=>(e[t]=!0,e),{}),She={qualify:function(e){return Jn(e)},set:function(e,t,r){Object.keys(e).forEach(function(n){if(xhe[n]&&n in r){const i=e[n];r.tagName==="SELECT"&&Array.isArray(i)?Array.from(r.options).forEach(function(s,o){s.selected=i.includes(s.value)}):r[n]=i}})}};function lu(e,t){return function(r,n){var i=Ai(r);r=parseFloat(r),i&&(r/=100);var s={};if(isFinite(r)){var o=i||r>=0&&r<=1?r*n[t]:Math.max(r+n[t],0);s[e]=o}return s}}function ap(e,t,r){return function(n,i){var s=Ai(n);n=parseFloat(n),s&&(n/=100);var o;if(isFinite(n)){var a=i[r]();s||n>0&&n<1?o=a[e]+i[t]*n:o=a[e]+n}var u=pe();return u[e]=o||0,u}}function Tz(e,t,r){return function(n,i){var s;n==="middle"?s=i[t]/2:n===r?s=i[t]:isFinite(n)?s=n>-1&&n<1?-i[t]*n:-n:Ai(n)?s=i[t]*parseFloat(n)/100:s=0;var o=pe();return o[e]=-(i[e]+s),o}}function QU(e,t){var r="joint-shape",n=t&&t.resetOffset;return function(i,s,o){var a=It(o),u=a.data(r);if(!u||u.value!==i){var c=e(i);u={value:i,shape:c,shapeBBox:c.bbox()},a.data(r,u)}var f=u.shape.clone(),h=u.shapeBBox.clone(),g=h.origin(),y=s.origin();h.x=y.x,h.y=y.y;var m=s.maxRectScaleToFit(h,y),_=h.width===0||s.width===0?1:m.sx,x=h.height===0||s.height===0?1:m.sy;return f.scale(_,x,g),n&&f.translate(-g.x,-g.y),f}}function Pz(e){function t(n){return new Nt($e.normalizePathData(n))}var r=QU(t,e);return function(n,i,s){var o=r(n,i,s);return{d:o.serialize()}}}function Cz(e){var t=QU(pn,e);return function(r,n,i){var s=t(r,n,i);return{points:s.serialize()}}}function up(e,t){var r=new pe(1,0);return function(n){var i,s,o=this[e](n);return o?(s=t.rotate?o.vector().vectorAngle(r):0,i=o.start):(i=this.path.start,s=0),s===0?{transform:"translate("+i.x+","+i.y+")"}:{transform:"translate("+i.x+","+i.y+") rotate("+s+")"}}}function Rz(e){return function(r,n,i){const s=$e(i);s.attr(e)!==r&&s.attr(e,r)}}function el(e,t,r){return r.text!==void 0}function kf(){return this.model.isLink()}function kS(e){var t={},r=e.stroke;typeof r=="string"&&(t.stroke=r,t.fill=r);var n=e.strokeOpacity;return n===void 0&&(n=e["stroke-opacity"]),n===void 0&&(n=e.opacity),n!==void 0&&(t["stroke-opacity"]=n,t["fill-opacity"]=n),t}function Iz(e){const{paper:t}=this;return`url(#${e.type==="pattern"?t.definePattern(e):t.defineGradient(e)})`}const ar={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:Rz("href")},xlinkHref:{set:Rz("xlink:href")},filter:{qualify:Jn,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}},fill:{qualify:Jn,set:Iz},stroke:{qualify:Jn,set:Iz},sourceMarker:{qualify:Jn,set:function(e,t,r,n){return e=jt(kS(n),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},targetMarker:{qualify:Jn,set:function(e,t,r,n){return e=jt(kS(n),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},vertexMarker:{qualify:Jn,set:function(e,t,r,n){return e=jt(kS(n),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},text:{qualify:function(e,t,r){return!r.textWrap||!Jn(r.textWrap)},set:function(e,t,r,n){const i=It(r),s="joint-text",o=i.data(s),{lineHeight:a,annotations:u,textVerticalAnchor:c,eol:f,displayEmpty:h}=n;let g=n.textPath,y=n.x;Qs(y)&&(y=eo(y,t));let m=n["font-size"]||n.fontSize;Qs(m)&&(m=eo(m,t));const _=JSON.stringify([e,a,u,c,f,h,g,y,m]);if(o===void 0||o!==_){if(m&&r.setAttribute("font-size",m),Wr(g)){const x=g.selector;if(typeof x=="string"){const[S]=this.findBySelector(x);S instanceof SVGPathElement&&(g=jt({"xlink:href":"#"+S.id},g))}}$e(r).text(""+e,{lineHeight:a,annotations:u,textPath:g,x:y,textVerticalAnchor:c,eol:f,displayEmpty:h}),i.data(s,_)}}},textWrap:{qualify:Jn,set:function(e,t,r,n){var i={},s=e.width||0;Ai(s)?i.width=t.width*parseFloat(s)/100:Qs(s)?i.width=Number(eo(s,t)):e.width===null?i.width=1/0:s<=0?i.width=t.width+s:i.width=s;var o=e.height||0;Ai(o)?i.height=t.height*parseFloat(o)/100:Qs(o)?i.height=Number(eo(o,t)):e.height===null||(o<=0?i.height=t.height+o:i.height=o);var a,u=e.text;if(u===void 0&&(u=n.text),u!==void 0){const c=e.breakText||KU,f=n["font-size"]||n.fontSize;a=c(""+u,i,{"font-weight":n["font-weight"]||n.fontWeight,"font-size":Qs(f)?eo(f,t):f,"font-family":n["font-family"]||n.fontFamily,lineHeight:n.lineHeight,"letter-spacing":"letter-spacing"in n?n["letter-spacing"]:n.letterSpacing},{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,separator:e.separator,maxLineCount:e.maxLineCount,preserveSpaces:e.preserveSpaces})}else a="";ar.text.set.call(this,a,t,r,n)}},title:{qualify:function(e,t){return t instanceof SVGElement},set:function(e,t,r){var n=It(r),i="joint-title",s=n.data(i);if(s===void 0||s!==e){if(n.data(i,e),r.tagName==="title"){r.textContent=e;return}var o=r.firstElementChild;if(o&&o.tagName==="title")o.textContent=e;else{var a=document.createElementNS(r.namespaceURI,"title");a.textContent=e,r.insertBefore(a,o)}}}},lineHeight:{qualify:el},textVerticalAnchor:{qualify:el},textPath:{qualify:el},annotations:{qualify:el},eol:{qualify:el},displayEmpty:{qualify:el},port:{set:function(e){return e===null||e.id===void 0?e:e.id}},style:{qualify:Jn,set:function(e,t,r){It(r).css(e)}},html:{set:function(e,t,r){It(r).html(e+"")}},props:She,ref:{},refX:{position:ap("x","width","origin")},refY:{position:ap("y","height","origin")},refDx:{position:ap("x","width","corner")},refDy:{position:ap("y","height","corner")},refWidth:{set:lu("width","width")},refHeight:{set:lu("height","height")},refRx:{set:lu("rx","width")},refRy:{set:lu("ry","height")},refRInscribed:{set:function(e){var t=lu(e,"width"),r=lu(e,"height");return function(n,i){var s=i.height>i.width?t:r;return s(n,i)}}("r")},refRCircumscribed:{set:function(e,t){var r=Ai(e);e=parseFloat(e),r&&(e/=100);var n=Math.sqrt(t.height*t.height+t.width*t.width),i;return isFinite(e)&&(r||e>=0&&e<=1?i=e*n:i=Math.max(e+n,0)),{r:i}}},refCx:{set:lu("cx","width")},refCy:{set:lu("cy","height")},xAlignment:{offset:Tz("x","width","right")},yAlignment:{offset:Tz("y","height","bottom")},resetOffset:{offset:function(e,t){return e?{x:-t.x,y:-t.y}:{x:0,y:0}}},refDResetOffset:{set:Pz({resetOffset:!0})},refDKeepOffset:{set:Pz({resetOffset:!1})},refPointsResetOffset:{set:Cz({resetOffset:!0})},refPointsKeepOffset:{set:Cz({resetOffset:!1})},connection:{qualify:kf,set:function({stubs:e=0}){let t;if(isFinite(e)&&e!==0){let r;e<0?r=(this.getConnectionLength()+e)/2:r=e;const n=this.getConnection(),i=this.getConnectionSubdivisions(),s=n.divideAtLength(r,{segmentSubdivisions:i}),o=n.divideAtLength(-r,{segmentSubdivisions:i});s&&o&&(t=`${s[0].serialize()} ${o[1].serialize()}`)}return{d:t||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:kf,set:up("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:kf,set:up("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:kf,set:up("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:kf,set:up("getTangentAtRatio",{rotate:!1})}};ar["xlink:href"]=ar.xlinkHref;["transform","d","points","cx","cy","x1","x2","y1","y2","x","y","dx","dy"].forEach(e=>{ar[e]={qualify:Qs,set:function(r,n){return{[e]:eo(r,n)}}}});["width","height","r","rx","ry","font-size","stroke-width"].forEach(e=>{ar[e]={qualify:Qs,set:function(r,n){return{[e]:Math.max(0,eo(r,n))}}}});ar.refR=ar.refRInscribed;ar.refD=ar.refDResetOffset;ar.refPoints=ar.refPointsResetOffset;ar.atConnectionLength=ar.atConnectionLengthKeepGradient;ar.atConnectionRatio=ar.atConnectionRatioKeepGradient;ar.fontSize=ar["font-size"];ar.strokeWidth=ar["stroke-width"];ar.refX2=ar.refX;ar.refY2=ar.refY;ar.refWidth2=ar.refWidth;ar.refHeight2=ar.refHeight;ar["ref-x"]=ar.refX;ar["ref-y"]=ar.refY;ar["ref-dy"]=ar.refDy;ar["ref-dx"]=ar.refDx;ar["ref-width"]=ar.refWidth;ar["ref-height"]=ar.refHeight;ar["x-alignment"]=ar.xAlignment;ar["y-alignment"]=ar.yAlignment;const ej=ar,fa=ei.Model.extend({constructor:function(e,t){var r,n=e||{};typeof this.preinitialize=="function"&&this.preinitialize.apply(this,arguments),this.cid=che("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(n=this.parse(n,t)||{}),(r=Qn(this,"defaults"))&&(n=ni({},r,n)),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,t,r){throw new Error("Must define a translate() method.")},toJSON:function(){const t=Qn(this.constructor.prototype,"defaults").attrs||{},r=this.attributes.attrs,n={};Zs(r,function(s,o){const a=t[o];Zs(s,function(u,c){Wr(u)&&!Array.isArray(u)?Zs(u,function(f,h){(!a||!a[c]||!cl(a[c][h],f))&&(n[o]=n[o]||{},(n[o][c]||(n[o][c]={}))[h]=f)}):(!a||!cl(a[c],u))&&(n[o]=n[o]||{},n[o][c]=u)})});const i=Ks(fc(this.attributes,"attrs"));return i.attrs=n,i},initialize:function(e){const t=this.getIdAttribute();(!e||e[t]===void 0)&&this.set(t,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return fhe()},processPorts:function(){var e=this.ports,t={};Zs(this.get("attrs"),function(s,o){s&&s.port&&(s.port.id!==void 0?t[s.port.id]=s.port:t[s.port]={id:s.port})});var r={};if(Zs(e,function(s,o){t[o]||(r[o]=!0)}),this.graph&&!Da(r)){var n=this.graph.getConnectedLinks(this,{inbound:!0});n.forEach(function(s){r[s.get("target").port]&&s.remove()});var i=this.graph.getConnectedLinks(this,{outbound:!0});i.forEach(function(s){r[s.get("source").port]&&s.remove()})}this.ports=t},remove:function(e={}){const{graph:t,collection:r}=this;if(!t)return r&&r.remove(this,e),this;t.startBatch("remove");const n=this.getParentCell();n&&n.unembed(this,e);const i=this.getEmbeddedCells();for(let s=0,o=i.length;s<o;s++){const a=i[s];a&&a.remove(e)}return this.trigger("remove",this,t.attributes.cells,e),t.stopBatch("remove"),this},toFront:function(e){var t=this.graph;if(t){e=Os(e||{},{foregroundEmbeds:!0});let r;e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:e.breadthFirst!==!1,sortSiblings:e.foregroundEmbeds}),r.unshift(this)):r=[this];const n=e.foregroundEmbeds?r:MS(r,u=>u.z());let s=t.maxZIndex()-r.length+1;const o=t.get("cells");let a=o.indexOf(n[0])!==o.length-r.length;a||(a=n.some(function(u,c){return u.z()!==s+c})),a&&(this.startBatch("to-front"),s=s+r.length,n.forEach(function(u,c){u.set("z",s+c,e)}),this.stopBatch("to-front"))}return this},toBack:function(e){var t=this.graph;if(t){e=Os(e||{},{foregroundEmbeds:!0});let n;e.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:e.breadthFirst!==!1,sortSiblings:e.foregroundEmbeds}),n.unshift(this)):n=[this];const i=e.foregroundEmbeds?n:MS(n,a=>a.z());let s=t.minZIndex();var r=t.get("cells");let o=r.indexOf(i[0])!==0;o||(o=i.some(function(a,u){return a.z()!==s+u})),o&&(this.startBatch("to-back"),s-=n.length,i.forEach(function(a,u){a.set("z",s+u,e)}),this.stopBatch("to-back"))}return this},parent:function(e,t){return e===void 0?this.get("parent"):this.set("parent",e,t)},embed:function(e,t){const r=Array.isArray(e)?e:[e];if(!this.canEmbed(r))throw new Error("Recursive embedding not allowed.");if(r.some(n=>n.isEmbedded()&&this.id!==n.parent()))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(r,t),this},unembed:function(e,t){const r=Array.isArray(e)?e:[e];return this._unembedCells(r,t),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every(r=>this!==r&&!this.isEmbeddedIn(r))},_embedCells:function(e,t){const r="embed";this.startBatch(r);const n=jt([],this.get("embeds"));e.forEach(i=>{n[i.isLink()?"unshift":"push"](i.id),i.parent(this.id,t)}),this.set("embeds",Hh(n),t),this.stopBatch(r)},_unembedCells:function(e,t){const r="unembed";this.startBatch(r),e.forEach(n=>n.unset("parent",t)),this.set("embeds",Sz(this.get("embeds"),...e.map(n=>n.id)),t),this.stopBatch(r)},getParentCell:function(){var e=this.parent(),t=this.graph;return e&&t&&t.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var t=this.getParentCell();t;)e.push(t),t=t.getParentCell();return e},getEmbeddedCells:function(e){if(e=e||{},!this.graph)return[];if(e.deep)return e.breadthFirst?this._getEmbeddedCellsBfs(e.sortSiblings):this._getEmbeddedCellsDfs(e.sortSiblings);const t=this.get("embeds");if(Da(t))return[];let r=t.map(this.graph.getCell,this.graph);return e.sortSiblings&&(r=MS(r,n=>n.z())),r},_getEmbeddedCellsBfs:function(e){const t=[],r=[];for(r.push(this);r.length>0;){const n=r.shift();t.push(n);const i=n.getEmbeddedCells({sortSiblings:e});r.push(...i)}return t.shift(),t},_getEmbeddedCellsDfs:function(e){const t=[],r=[];for(r.push(this);r.length>0;){const n=r.pop();t.push(n);const i=n.getEmbeddedCells({sortSiblings:e});for(let s=i.length-1;s>=0;--s)r.push(i[s])}return t.shift(),t},isEmbeddedIn:function(e,t){var r=Li(e)?e:e.id,n=this.parent();if(t=jt({deep:!0},t),this.graph&&t.deep){for(;n;){if(n===r)return!0;n=this.graph.getCell(n).parent()}return!1}else return n===r},isEmbedded:function(){return!!this.parent()},clone:function(e){if(e=e||{},e.deep)return Fr(JU([this].concat(this.getEmbeddedCells({deep:!0}))));var t=ei.Model.prototype.clone.apply(this,arguments);return t.set(this.getIdAttribute(),this.generateId()),t.unset("embeds"),t.unset("parent"),t},prop:function(e,t,r){var n="/",i=Li(e);if(i||Array.isArray(e))if(arguments.length>1){var s,o;i?(s=e,o=s.split("/")):(s=e.join(n),o=e.slice());var a=o[0],u=o.length;const A=r||{};A.propertyPath=s,A.propertyValue=t,A.propertyPathArray=o,"rewrite"in A||(A.rewrite=!1);for(var c={},f=c,h=a,g=1;g<u;g++){var y=o[g],m=Number.isFinite(i?Number(y):y);f=f[h]=m?[]:{},h=y}c=pE(c,o,t,"/");var _=ni({},this.attributes);A.rewrite&&Ez(_,s,"/");var x=ni(_,c);return this.set(a,x[a],A)}else return gh(this.attributes,e,n);const S=t||{};S.propertyPath=null,S.propertyValue=e,S.propertyPathArray=[],"rewrite"in S||(S.rewrite=!1);const E={};for(const A in e){const{changedValue:T}=ni({},{changedValue:this.attributes[A]},{changedValue:e[A]});E[A]=T}return this.set(E,S)},removeProp:function(e,t){t=t||{};var r=Array.isArray(e)?e:e.split("/"),n=r[0];if(n==="attrs"&&(t.dirty=!0),r.length===1)return this.unset(e,t);var i=r.slice(1),s=this.get(n);return s==null?this:(s=Ks(s),Ez(s,i,"/"),this.set(n,s,t))},attr:function(e,t,r){var n=Array.from(arguments);return n.length===0?this.get("attrs"):(Array.isArray(e)?n[0]=["attrs"].concat(e):Li(e)?n[0]="attrs/"+e:n[0]={attrs:e},this.prop.apply(this,n))},removeAttr:function(e,t){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,t)},transition:function(e,t,r,n){n=n||"/";var i={duration:100,delay:10,timingFunction:_he.linear,valueFunction:ZU.number};r=jt(i,r);var s=0,o,a=(function(h){var g,y,m;s=s||h,h-=s,y=h/r.duration,y<1?this._transitionIds[e]=g=vE(a):(y=1,delete this._transitionIds[e]),m=o(r.timingFunction(y)),r.transitionId=g,this.prop(e,m,r),g||this.trigger("transition:end",this,e)}).bind(this);const{_scheduledTransitionIds:u}=this;let c;var f=h=>{u[e]&&(u[e]=Sz(u[e],c),u[e].length===0&&delete u[e]),this.stopPendingTransitions(e,n),o=r.valueFunction(gh(this.attributes,e,n),t),this._transitionIds[e]=vE(h),this.trigger("transition:start",this,e)};return c=setTimeout(f,r.delay,a),u[e]||(u[e]=[]),u[e].push(c),c},getTransitions:function(){return dE(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(e,t="/"){const{_scheduledTransitionIds:r={}}=this;let n=Object.keys(r);if(e){const i=e.split(t);n=n.filter(s=>cl(i,s.split(t).slice(0,i.length)))}return n.forEach(i=>{r[i].forEach(o=>clearTimeout(o)),delete r[i]}),this},stopPendingTransitions(e,t="/"){const{_transitionIds:r={}}=this;let n=Object.keys(r);if(e){const i=e.split(t);n=n.filter(s=>cl(i,s.split(t).slice(0,i.length)))}n.forEach(i=>{const s=r[i];gE(s),delete r[i],this.trigger("transition:end",this,i)})},stopTransitions:function(e,t="/"){return this.stopScheduledTransitions(e,t),this.stopPendingTransitions(e,t),this},addTo:function(e,t){return e.addCell(this,t),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,t){return this.graph&&this.graph.startBatch(e,jt({},t,{cell:this})),this},stopBatch:function(e,t){return this.graph&&this.graph.stopBatch(e,jt({},t,{cell:this})),this},getChangeFlag:function(e){var t=0;if(!e)return t;for(var r in e)!e.hasOwnProperty(r)||!this.hasChanged(r)||(t|=e[r]);return t},angle:function(){return 0},position:function(){return new pe(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new pe},getBBox:function(){return new mt(0,0,0,0)},getPointRotatedAroundCenter(e,t,r){const n=new pe(t,r);return e&&n.rotate(this.getBBox().center(),e),n},getAbsolutePointFromRelative(e,t){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,t))},getRelativePointFromAbsolute(e,t){return this.getPointRotatedAroundCenter(this.angle(),e,t).difference(this.position())}},{getAttributeDefinition:function(e){var t=this.attributes,r=ej;return t&&t[e]||r[e]},define:function(e,t,r,n){r=jt({defaults:YA({type:e},t,this.prototype.defaults)},r);var i=this.extend(r,n);return typeof joint<"u"&&Fa(joint,"shapes")&&pE(joint.shapes,e,i,"."),i}}),Ehe=function(e,t,r){if(Li(r)){if(!mE[r])throw new Error('Unknown wrapper: "'+r+'"');r=mE[r]}if(!fn(r))throw new Error("Wrapper must be a function.");Fr(t).forEach(function(n){e[n]=r(e[n])})},mE={cells:function(e){return function(){var t=Array.from(arguments),r=t.length,n=r>0&&t[0]||[],i=r>1&&t[r-1]||{};return Array.isArray(n)||(i instanceof fa?n=t:n instanceof fa&&(t.length>1&&t.pop(),n=t)),i instanceof fa&&(i={}),e.call(this,n,i)}}},Gn={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function tj(e,t){const r=new mt(e);switch(t){case void 0:throw new Error("Position required");case Gn.LEFT:case"leftMiddle":return r.leftMiddle();case Gn.RIGHT:case"rightMiddle":return r.rightMiddle();case Gn.TOP:case"topMiddle":return r.topMiddle();case Gn.BOTTOM:case"bottomMiddle":return r.bottomMiddle();case Gn.TOP_LEFT:case"topLeft":case"origin":return r.topLeft();case Gn.TOP_RIGHT:case"topRight":return r.topRight();case Gn.BOTTOM_LEFT:case"bottomLeft":return r.bottomLeft();case Gn.BOTTOM_RIGHT:case"bottomRight":case"corner":return r.bottomRight();case Gn.CENTER:return r.center();default:throw new Error(`Unknown position: ${t}`)}}function rj(e,t,r){var n=e.toJSON();return n.angle=t||0,Os({},r,n)}function Wh(e,t,r,n){return e.map(function(i,s,o){var a=this.pointAt((s+.5)/o.length);return(i.dx||i.dy)&&a.offset(i.dx||0,i.dy||0),rj(a.round(),0,KA(n,i))},sc(t,r))}function nj(e,t,r,n){var i=t.center(),s=t.width/t.height,o=t.topMiddle(),a=Yi.fromRect(t);return e.map(function(u,c,f){var h=r+n(c,f.length),g=o.clone().rotate(i,-h).scale(s,1,i),y=u.compensateRotation?-a.tangentTheta(g):0;return(u.dx||u.dy)&&g.offset(u.dx||0,u.dy||0),u.dr&&g.move(i,u.dr),rj(g.round(),y,KA(t,u))})}function KA(e,t){let{x:r,y:n,angle:i}=t;return Ai(r)?r=parseFloat(r)/100*e.width:Qs(r)&&(r=Number(eo(r,e))),Ai(n)?n=parseFloat(n)/100*e.height:Qs(n)&&(n=Number(eo(n,e))),{x:r,y:n,angle:i}}function yE(e,t){const{x:r,y:n}=KA(e,t);return new pe(r||0,n||0)}const Ahe=function(e,t){return e.map(r=>{const n=yE(t,r).round().toJSON();return n.angle=r.angle||0,n})},The=function(e,t,r){return r.fn(e,t,r)},Phe=function(e,t,r){var n=yE(t,r.start||t.origin()),i=yE(t,r.end||t.corner());return Wh(e,n,i,t)},Che=function(e,t,r){return Wh(e,t.origin(),t.bottomLeft(),t)},Rhe=function(e,t,r){return Wh(e,t.topRight(),t.corner(),t)},Ihe=function(e,t,r){return Wh(e,t.origin(),t.topRight(),t)},Ohe=function(e,t,r){return Wh(e,t.bottomLeft(),t.corner(),t)},Mhe=function(e,t,r){var n=r.startAngle||0,i=r.step||360/e.length;return nj(e,t,n,function(s){return s*i})},khe=function(e,t,r){var n=r.startAngle||0,i=r.step||20;return nj(e,t,n,function(s,o){return(s+.5-o/2)*i})},Lhe=Object.freeze(Object.defineProperty({__proto__:null,absolute:Ahe,bottom:Ohe,ellipse:khe,ellipseSpread:Mhe,fn:The,left:Che,line:Phe,right:Rhe,top:Ihe},Symbol.toStringTag,{value:"Module"}));function Du(e,t){return YA({},e,t,{x:0,y:0,angle:0,attrs:{}})}function ij(e){var t=e.center(),r=t.theta(e.origin()),n=t.theta(e.bottomLeft()),i=t.theta(e.corner()),s=t.theta(e.topRight());return[r,s,i,n]}function sj(e,t,r,n){n=Os({},n,{offset:15});var i=t.center().theta(e),s,o,a,u,c=n.offset,f=0;const[h,g,y,m]=ij(t);i<g||i>y?(a=".3em",s=c,o=0,u="start"):i<h?(s=0,o=-c,r?(f=-90,u="start",a=".3em"):(u="middle",a="0")):i<m?(a=".3em",s=-c,o=0,u="end"):(s=0,o=c,r?(f=90,u="start",a=".3em"):(u="middle",a=".6em"));var _=Math.round;return Du(n,{x:_(s),y:_(o),angle:f,attrs:{labelText:{y:a,textAnchor:u}}})}function oj(e,t,r,n){n=Os({},n,{offset:15});var i=t.center().theta(e),s,o,a,u,c=n.offset,f=0;const[h,g,y,m]=ij(t);i<g||i>y?(a=".3em",s=-c,o=0,u="end"):i<h?(s=0,o=c,r?(f=90,u="start",a=".3em"):(u="middle",a=".6em")):i<m?(a=".3em",s=c,o=0,u="start"):(s=0,o=-c,r?(f=-90,u="start",a=".3em"):(u="middle",a="0"));var _=Math.round;return Du(n,{x:_(s),y:_(o),angle:f,attrs:{labelText:{y:a,textAnchor:u}}})}function aj(e,t,r){r=Os({},r,{offset:20});var n=Dp(0,0),i=-e.theta(n),s=i,o=e.clone().move(n,r.offset).difference(e).round(),a=".3em",u;(i+90)%180===0?(u=t?"end":"middle",!t&&i===-270&&(a="0em")):i>-270&&i<-90?(u="start",s=i-180):u="end";var c=Math.round;return Du(r,{x:c(o.x),y:c(o.y),angle:t?s:0,attrs:{labelText:{y:a,textAnchor:u}}})}const Nhe=function(e,t,r){return Du(r)},qhe=function(e,t,r){return Du(r,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},Dhe=function(e,t,r){return Du(r,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},Fhe=function(e,t,r){return Du(r,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},Bhe=function(e,t,r){return Du(r,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},zhe=function(e,t,r){return sj(e,t,!0,r)},Vhe=function(e,t,r){return sj(e,t,!1,r)},Ghe=function(e,t,r){return oj(e,t,!0,r)},$he=function(e,t,r){return oj(e,t,!1,r)},Uhe=function(e,t,r){return aj(e.difference(t.center()),!1,r)},jhe=function(e,t,r){return aj(e.difference(t.center()),!0,r)},Hhe=Object.freeze(Object.defineProperty({__proto__:null,bottom:Bhe,inside:$he,insideOriented:Ghe,left:qhe,manual:Nhe,outside:Vhe,outsideOriented:zhe,radial:Uhe,radialOriented:jhe,right:Dhe,top:Fhe},Symbol.toStringTag,{value:"Module"})),Zl=fa.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,t,r){if(e===void 0)return ta(this.get("source"));var n,i,s=e instanceof fa;if(s)return n=ta(t)||{},n.id=e.id,i=r,this.set("source",n,i);var o=!Jn(e);return o?(n=ta(t)||{},n.x=e.x,n.y=e.y,i=r,this.set("source",n,i)):(n=e,i=t,this.set("source",n,i))},target:function(e,t,r){if(e===void 0)return ta(this.get("target"));var n,i,s=e instanceof fa;if(s)return n=ta(t)||{},n.id=e.id,i=r,this.set("target",n,i);var o=!Jn(e);return o?(n=ta(t)||{},n.x=e.x,n.y=e.y,i=r,this.set("target",n,i)):(n=e,i=t,this.set("target",n,i))},router:function(e,t,r){if(e===void 0){var n=this.get("router");return n?typeof n=="object"?ta(n):n:this.get("manhattan")?{name:"orthogonal"}:null}var i=typeof e=="object"||typeof e=="function",s=i?e:{name:e,args:t},o=i?t:r;return this.set("router",s,o)},connector:function(e,t,r){if(e===void 0){var n=this.get("connector");return n?typeof n=="object"?ta(n):n:this.get("smooth")?{name:"smooth"}:null}var i=typeof e=="object"||typeof e=="function",s=i?e:{name:e,args:t},o=i?t:r;return this.set("connector",s,o)},label:function(e,t,r){var n=this.labels();return e=isFinite(e)&&e!==null?e|0:0,e<0&&(e=n.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],t,r)},labels:function(e,t){return arguments.length===0?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,t))},hasLabels:function(){const{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,t,r){if(!t)throw new Error("dia.Link: no label provided");var n=this.labels(),i=n.length;return e=isFinite(e)&&e!==null?e|0:i,e<0&&(e=i+e+1),n.splice(e,0,t),this.labels(n,r)},appendLabel:function(e,t){return this.insertLabel(-1,e,t)},removeLabel:function(e,t){var r=this.labels();return e=isFinite(e)&&e!==null?e|0:-1,r.splice(e,1),this.labels(r,t)},vertex:function(e,t,r){var n=this.vertices();if(e=isFinite(e)&&e!==null?e|0:0,e<0&&(e=n.length+e),arguments.length<=1)return this.prop(["vertices",e]);var i=this._normalizeVertex(t);return this.prop(["vertices",e],i,r)},vertices:function(e,t){if(arguments.length===0)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var r=[],n=0;n<e.length;n++){var i=e[n],s=this._normalizeVertex(i);r.push(s)}return this.set("vertices",r,t)},insertVertex:function(e,t,r){if(!t)throw new Error("dia.Link: no vertex provided");var n=this.vertices(),i=n.length;e=isFinite(e)&&e!==null?e|0:i,e<0&&(e=i+e+1);var s=this._normalizeVertex(t);return n.splice(e,0,s),this.vertices(n,r)},removeVertex:function(e,t){var r=this.vertices();return e=isFinite(e)&&e!==null?e|0:-1,r.splice(e,1),this.vertices(r,t)},_normalizeVertex:function(e){var t=!Jn(e);return t?{x:e.x,y:e.y}:e},translate:function(e,t,r){return r=r||{},r.translateBy=r.translateBy||this.id,r.tx=e,r.ty=t,this.applyToPoints(function(n){return{x:(n.x||0)+e,y:(n.y||0)+t}},r)},scale:function(e,t,r,n){return this.applyToPoints(function(i){return pe(i).scale(e,t,r).toJSON()},n)},applyToPoints:function(e,t){if(!fn(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var r={},{source:n,target:i}=this.attributes;n.id||(r.source=e(n)),i.id||(r.target=e(i));var s=this.vertices();return s.length>0&&(r.vertices=s.map(e)),this.set(r,t)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new pe(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new pe(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const e=[this.getSourcePoint(),...this.vertices().map(pe),this.getTargetPoint()];return new pn(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var t;if(this.graph){var r=this.getSourceElement(),n=this.getTargetElement(),i=this.getParentCell();r&&n&&(r===n||r.isEmbeddedIn(n)?t=n:n.isEmbeddedIn(r)?t=r:t=this.graph.getCommonAncestor(r,n)),i&&(!t||t.id!==i.id)&&i.unembed(this,e),t&&t.embed(this,e)}return t},hasLoop:function(e){e=e||{};var{source:t,target:r}=this.attributes,n=t.id,i=r.id;if(!n||!i)return!1;var s=n===i;if(!s&&e.deep&&this.graph){var o=this.getSourceCell(),a=this.getTargetCell();s=o.isEmbeddedIn(a)||a.isEmbeddedIn(o)}return s},getSourceCell:function(){const{graph:e,attributes:t}=this;var r=t.source;return r&&r.id&&e&&e.getCell(r.id)||null},getSourceElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){const{graph:e,attributes:t}=this;var r=t.target;return r&&r.id&&e&&e.getCell(r.id)||null},getTargetElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var t=[this,this.getSourceElement(),this.getTargetElement()].filter(function(r){return!!r});e=this.graph.getCommonAncestor.apply(this.graph,t)}return e||null},isRelationshipEmbeddedIn:function(e){var t=Li(e)||fs(e)?e:e.id,r=this.getRelationshipAncestor();return!!r&&(r.id===t||r.isEmbeddedIn(t))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},t={};return t.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,t.position=e.position,t.attrs=e.attrs,t.size=e.size,t}},{endsEqual:function(e,t){var r=e.port===t.port||!e.port&&!t.port;return e.id===t.id&&r}});var uj=function(e){var t=Ks(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=Lhe,this.portLabelLayoutNamespace=Hhe,this._init(t)};uj.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter(function(t){return t.group===e})},getGroupPortsMetrics:function(e,t){var r=this.getGroup(e),n=this.getPortsByGroup(e),i=r.position||{},s=i.name,o=this.portLayoutNamespace;o[s]||(s="left");var a=i.args||{},u=n.map(function(h){return h&&h.position&&h.position.args}),c=o[s](u,t,a),f={ports:n,result:[]};return Fr(c).reduce((function(h,g,y){var m=h.ports[y];return h.result.push({portId:m.id,portTransformation:g,labelTransformation:this._getPortLabelLayout(m,pe(g),t),portAttrs:m.attrs,portSize:m.size,labelSize:m.label.size}),h}).bind(this),f),f.result},_getPortLabelLayout:function(e,t,r){var n=this.portLabelLayoutNamespace,i=e.label.position.name||"left";return n[i]?n[i](t,r,e.label.position.args):null},_init:function(e){if(Wr(e.groups))for(var t=Object.keys(e.groups),r=0,n=t.length;r<n;r++){var i=t[r];this.groups[i]=this._evaluateGroup(e.groups[i])}for(var s=Fr(e.items),o=0,a=s.length;o<a;o++)this.ports.push(this._evaluatePort(s[o]))},_evaluateGroup:function(e){return ni(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var t=jt({},e),r=this.getGroup(e.group);return t.markup=t.markup||r.markup,t.attrs=ni({},r.attrs,t.attrs),t.position=this._createPositionNode(r,t),t.label=ni({},r.label,this._getLabel(t)),t.z=this._getZIndex(r,t),t.size=jt({},r.size,t.size),t},_getZIndex:function(e,t){return fs(t.z)?t.z:fs(e.z)||e.z==="auto"?e.z:"auto"},_createPositionNode:function(e,t){return ni({name:"left",args:{}},e.position,{args:t.args})},_getPosition:function(e,t){var r={},n;fn(e)?(n="fn",r.fn=e):Li(e)?n=e:e===void 0?n=t?"left":null:Array.isArray(e)?(n="absolute",r.x=e[0],r.y=e[1]):Wr(e)&&(n=e.name,jt(r,e.args));var i={args:r};return n&&(i.name=n),i},_getLabel:function(e,t){var r=e.label||{},n=r;return n.position=this._getPosition(r.position,t),n}};const Whe={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var e=this.get("ports")||{},t={};Fr(e.items).forEach(function(a){t[a.id]=!0});var r=this.previous("ports")||{},n={};Fr(r.items).forEach(function(a){t[a.id]||(n[a.id]=!0)});var i=this.graph;if(i&&!Da(n)){var s=i.getConnectedLinks(this,{inbound:!0});s.forEach(function(a){n[a.get("target").port]&&a.remove()});var o=i.getConnectedLinks(this,{outbound:!0});o.forEach(function(a){n[a.get("source").port]&&a.remove()})}},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return this.getPortIndex(e)!==-1},getPorts:function(){return Ks(this.prop("ports/items"))||[]},getGroupPorts:function(e){const t=Fr(this.prop(["ports","items"])).filter(r=>r.group===e);return Ks(t)},getPort:function(e){return Ks(Fr(this.prop("ports/items")).find(function(t){return t.id&&t.id===e}))},getPortsPositions:function(e){var t=this._portSettingsData.getGroupPortsMetrics(e,mt(this.size()));return t.reduce(function(r,n){var i=n.portTransformation;return r[n.portId]={x:i.x,y:i.y,angle:i.angle},r},{})},getPortIndex:function(e){var t=Wr(e)?e.id:e;return this._isValidPortId(t)?Fr(this.prop("ports/items")).findIndex(function(r){return r.id===t}):-1},addPort:function(e,t){if(!Wr(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var r=jt([],this.prop("ports/items"));return r.push(e),this.prop("ports/items",r,t),this},insertPort:function(e,t,r){const n=typeof e=="number"?e:this.getPortIndex(e);if(!Wr(t)||Array.isArray(t))throw new Error("dia.Element: insertPort requires an object.");const i=jt([],this.prop("ports/items"));return i.splice(n,0,t),this.prop("ports/items",i,r),this},portProp:function(e,t,r,n){var i=this.getPortIndex(e);if(i===-1)throw new Error("Element: unable to find port with id "+e);var s=Array.prototype.slice.call(arguments,1);return Array.isArray(t)?s[0]=["ports","items",i].concat(t):Li(t)?s[0]=["ports/items/",i,"/",t].join(""):(s=["ports/items/"+i],Jn(t)&&(s.push(t),s.push(r))),this.prop.apply(this,s)},_validatePorts:function(){var e=this.get("ports")||{},t=[];e=e||{};var r=Fr(e.items);return r.forEach(function(n){typeof n!="object"&&t.push("Element: invalid port ",n),this._isValidPortId(n.id)||(n.id=this.generatePortId())},this),Hh(r,"id").length!==r.length&&t.push("Element: found id duplicities in ports."),t},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return e!=null&&!Wr(e)},addPorts:function(e,t){return e.length&&this.prop("ports/items",jt([],this.prop("ports/items")).concat(e),t),this},removePort:function(e,t){const r=t||{},n=this.getPortIndex(e);if(n!==-1){const i=jt([],this.prop(["ports","items"]));i.splice(n,1),r.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],i,r),this.stopBatch("port-remove")}return this},removePorts:function(e,t){let r,n;if(Array.isArray(e)){if(r=t||{},e.length===0)return this.this;n=jt([],this.prop(["ports","items"])).filter(function(s){return!e.some(function(o){const a=Wr(o)?o.id:o;return s.id===a})})}else r=e||{},n=[];return this.startBatch("port-remove"),r.rewrite=!0,this.prop(["ports","items"],n,r),this.stopBatch("port-remove"),this},_createPortData:function(){var e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));var t;this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new uj(this.get("ports"));var r=this._portSettingsData.getPorts();if(t){var n=r.filter(function(s){if(!t.find(function(o){return o.id===s.id}))return s}),i=t.filter(function(s){if(!r.find(function(o){return o.id===s.id}))return s});i.length>0&&this.trigger("ports:remove",this,i),n.length>0&&this.trigger("ports:add",this,n)}}},Xhe={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],t=this._getContainerElement(),r=0,n=t.node.childNodes.length;r<n;r++)e.push(t.node.childNodes[r]);var i=nhe(this.model._portSettingsData.getPorts(),"z"),s="auto";Fr(i[s]).forEach(function(f){var h=this._getPortElement(f);t.append(h),e.push(h)},this);for(var o=Object.keys(i),a=0;a<o.length;a++){var u=o[a];if(u!==s){var c=parseInt(u,10);this._appendPorts(i[u],c,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,t,r){var n=this._getContainerElement(),i=Fr(e).map(this._getPortElement,this);r[t]||t<0?$e(r[Math.max(t,0)]).before(i):n.append(i)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNode:function(e,t){const r=this._portElementsCache[e];if(!r)return null;if(!t)return r.portContentElement.node;const n=r.portElement.node,i=r.portSelectors,[s=null]=this.findBySelector(t,n,i);return s},_updatePorts:function(){this._updatePortGroup(void 0);var e=Object.keys(this.model._portSettingsData.groups);e.forEach(this._updatePortGroup,this)},_removePorts:function(){To(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let t,r,n,i;var s=$e(this.portContainerMarkup).addClass("joint-port"),o=this._getPortMarkup(e);if(Array.isArray(o)){var a=this.parseDOMJSON(o,s.node),u=a.fragment;u.childNodes.length>1?t=$e("g").append(u):t=$e(u.firstChild),i=a.selectors}else t=$e(o),Array.isArray(t)&&(t=$e("g").append(t));if(!t)throw new Error("ElementView: Invalid port markup.");t.attr({port:e.id,"port-group":e.group});const c=this._getPortLabelMarkup(e.label);if(Array.isArray(c)){const{fragment:_,selectors:x}=this.parseDOMJSON(c,s.node),S=_.childNodes.length;S>0&&(n=x,r=S===1?$e(_.firstChild):$e("g").append(_))}else r=$e(c),Array.isArray(r)&&(r=$e("g").append(r));var f;if(i&&n){for(var h in n)if(i[h]&&h!==this.selector)throw new Error("ElementView: selectors within port must be unique.");f=jt({},i,n)}else f=i||n||{};const g="portRoot",y="labelRoot",m="labelText";if(g in f||(f[g]=t.node),r){const _=r.node;if(y in f||(f[y]=_),!(m in f)){const x=r.tagName()==="TEXT"?_:Array.from(_.querySelectorAll("text"));f[m]=x,n||(n={}),n[m]=x}}return s.append(t.addClass("joint-port-body")),r&&s.append(r.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:s,portLabelElement:r,portSelectors:f,portLabelSelectors:n,portContentElement:t,portContentSelectors:i},s},_updatePortGroup:function(e){for(var t=mt(this.model.size()),r=this.model._portSettingsData.getGroupPortsMetrics(e,t),n=0,i=r.length;n<i;n++){var s=r[n],o=s.portId,a=this._portElementsCache[o]||{},u=s.portTransformation,c=s.labelTransformation;c&&a.portLabelElement&&(this.updateDOMSubtreeAttributes(a.portLabelElement.node,c.attrs,{rootBBox:new mt(s.labelSize),selectors:a.portLabelSelectors}),this.applyPortTransform(a.portLabelElement,c,-u.angle||0)),this.updateDOMSubtreeAttributes(a.portElement.node,s.portAttrs,{rootBBox:new mt(s.portSize),selectors:a.portSelectors}),this.applyPortTransform(a.portElement,u)}},applyPortTransform:function(e,t,r){var n=$e.createSVGMatrix().rotate(r||0).translate(t.x||0,t.y||0).rotate(t.angle||0);e.transform(n,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Di=fa.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),fa.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,t,r){const n=fs(t);r=(n?r:e)||{};const{parentRelative:i,deep:s,restrictedArea:o}=r;let a;if(i){if(!this.graph)throw new Error("Element must be part of a graph.");const u=this.getParentCell();u&&!u.isLink()&&(a=u.get("position"))}if(n){if(a&&(e+=a.x,t+=a.y),s||o){const{x:u,y:c}=this.get("position");this.translate(e-u,t-c,r)}else this.set("position",{x:e,y:t},r);return this}else{const u=pe(this.get("position"));return i?u.difference(a):u}},translate:function(e,t,r){if(e=e||0,t=t||0,e===0&&t===0)return this;r=r||{},r.translateBy=r.translateBy||this.id;var n=this.get("position")||{x:0,y:0},i=r.restrictedArea;if(i&&r.translateBy===this.id)if(typeof i=="function"){var s=i.call(this,n.x+e,n.y+t,r);e=s.x-n.x,t=s.y-n.y}else{var o=this.getBBox({deep:!0}),a=n.x-o.x,u=n.y-o.y,c=Math.max(i.x+a,Math.min(i.x+i.width+a-o.width,n.x+e)),f=Math.max(i.y+u,Math.min(i.y+i.height+u-o.height,n.y+t));e=c-n.x,t=f-n.y}var h={x:n.x+e,y:n.y+t};return r.tx=e,r.ty=t,r.transition?(Wr(r.transition)||(r.transition={}),this.transition("position",h,jt({},r.transition,{valueFunction:ZU.object})),To(this.getEmbeddedCells(),"translate",e,t,r)):(this.startBatch("translate",r),this.set("position",h,r),To(this.getEmbeddedCells(),"translate",e,t,r),this.stopBatch("translate",r)),this},size:function(e,t,r){var n=this.get("size");return e===void 0?{width:n.width,height:n.height}:(Wr(e)&&(r=t,t=fs(e.height)?e.height:n.height,e=fs(e.width)?e.width:n.width),this.resize(e,t,r))},resize:function(e,t,r){if(r=r||{},this.startBatch("resize",r),r.direction){var n=this.get("size");switch(r.direction){case"left":case"right":t=n.height;break;case"top":case"bottom":e=n.width;break}var i=Oo(this.get("angle")||0),s=this.getBBox(),o;if(i){var a={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[r.direction];r.absolute&&(a+=Math.floor((i+45)/90),a%=4);var u=s[["bottomLeft","corner","topRight","origin"][a]](),c=pe(u).rotate(s.center(),-i),f=Math.sqrt(e*e+t*t)/2,h=a*Math.PI/2;h+=Math.atan(a%2==0?t/e:e/t),h-=gs(i);var g=pe.fromPolar(f,h,c);o=pe(g).offset(e/-2,t/-2)}else switch(o=s.topLeft(),r.direction){case"top":case"top-right":o.offset(0,s.height-t);break;case"left":case"bottom-left":o.offset(s.width-e,0);break;case"top-left":o.offset(s.width-e,s.height-t);break}this.set("size",{width:e,height:t},r),this.position(o.x,o.y,r)}else this.set("size",{width:e,height:t},r);return this.stopBatch("resize",r),this},scale:function(e,t,r,n){var i=this.getBBox().scale(e,t,r);return this.startBatch("scale",n),this.position(i.x,i.y,n),this.resize(i.width,i.height,n),this.stopBatch("scale"),this},fitEmbeds:function(e){return this.fitToChildren(e)},fitToChildren:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");const r=this.getEmbeddedCells().filter(n=>n.isElement());return r.length===0?this:(this.startBatch("fit-embeds",e),e.deep&&To(r,"fitToChildren",e),this._fitToElements(Object.assign({elements:r},e)),this.stopBatch("fit-embeds"),this)},fitParent:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");if(e.deep&&e.terminator&&(e.terminator===this||e.terminator===this.id))return this;const r=this.getParentCell();if(!r||!r.isElement())return this;const n=r.getEmbeddedCells().filter(i=>i.isElement());return n.length===0?this:(this.startBatch("fit-parent",e),r._fitToElements(Object.assign({elements:n},e)),e.deep&&r.fitParent(e),this.stopBatch("fit-parent"),this)},_fitToElements:function(e={}){const t=this.graph.getCellsBBox(e.elements);if(!t)return;const{expandOnly:r,shrinkOnly:n}=e;if(r&&n)return;let{x:i,y:s,width:o,height:a}=t;const{left:u,right:c,top:f,bottom:h}=hc(e.padding);i-=u,s-=f,o+=u+c,a+=h+f;let g=new mt(i,s,o,a);if(r)g=this.getBBox().union(g);else if(n){const y=this.getBBox().intersect(g);if(!y)return;g=y}this.set({position:{x:g.x,y:g.y},size:{width:g.width,height:g.height}},e)},rotate:function(e,t,r,n){if(r){var i=this.getBBox().center(),s=this.get("size"),o=this.get("position");i.rotate(r,this.get("angle")-e);var a=i.x-s.width/2-o.x,u=i.y-s.height/2-o.y;this.startBatch("rotate",{angle:e,absolute:t,origin:r}),this.position(o.x+a,o.y+u,n),this.rotate(e,t,null,n),this.stopBatch("rotate")}else this.set("angle",t?e:(this.get("angle")+e)%360,n);return this},angle:function(){return Oo(this.get("angle")||0)},getBBox:function(e={}){const{graph:t,attributes:r}=this,{deep:n,rotate:i}=e;if(n&&t){const h=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return h.push(this),t.getCellsBBox(h,e)}const{angle:s=0,position:{x:o,y:a},size:{width:u,height:c}}=r,f=new mt(o,a,u,c);return i&&f.rotateAroundCenter(s),f},getPointFromConnectedLink:function(e,t){var r=this.getBBox(),n=r.center(),i=e.get(t);if(!i)return n;var s=i.port;if(!s||!this.hasPort(s))return n;var o=this.portProp(s,["group"]),a=this.getPortsPositions(o),u=new pe(a[s]).offset(r.origin()),c=this.angle();return c&&u.rotate(n,-c),u}});jt(Di.prototype,Whe);const Yhe=ei.Collection.extend({initialize:function(e,t){t.cellNamespace?this.cellNamespace=t.cellNamespace:this.cellNamespace=typeof joint<"u"&&Fa(joint,"shapes")?joint.shapes:null,this.graph=t.graph},model:function(e,t){var r=t.collection,n=r.cellNamespace,i=e.type==="link"?Zl:gh(n,e.type,".")||Di,s=new i(e,t);return t.dry||(s.graph=r.graph),s},comparator:function(e){return e.get("z")||0}}),Po=ei.Model.extend({initialize:function(e,t){t=t||{};var r=new Yhe([],{model:t.cellModel,cellNamespace:t.cellNamespace,graph:this});ei.Model.prototype.set.call(this,"cells",r),r.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},r.on("add",this._restructureOnAdd,this),r.on("remove",this._restructureOnRemove,this),r.on("reset",this._restructureOnReset,this),r.on("change:source",this._restructureOnChangeSource,this),r.on("change:target",this._restructureOnChangeTarget,this),r.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:t,target:r}=e.attributes;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0),r.id&&((this._in[r.id]||(this._in[r.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:t,target:r}=e.attributes;t.id&&this._out[t.id]&&this._out[t.id][e.id]&&delete this._out[t.id][e.id],r.id&&this._in[r.id]&&this._in[r.id][e.id]&&delete this._in[r.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var t=e.previous("source");t.id&&this._out[t.id]&&delete this._out[t.id][e.id];var r=e.attributes.source;r.id&&((this._out[r.id]||(this._out[r.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var t=e.previous("target");t.id&&this._in[t.id]&&delete this._in[t.id][e.id];var r=e.get("target");r.id&&((this._in[r.id]||(this._in[r.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(){var e=ei.Model.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(),e},fromJSON:function(e,t){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,t)},set:function(e,t,r){var n;return typeof e=="object"?(n=e,r=t):(n={})[e]=t,n.hasOwnProperty("cells")&&(this.resetCells(n.cells,r),n=fc(n,"cells")),ei.Model.prototype.set.call(this,n,r)},clear:function(e){e=jt({},e,{clear:!0});var t=this.get("cells");if(t.length===0)return this;this.startBatch("clear",e);var r=t.sortBy(function(n){return n.isLink()?1:2});do r.shift().remove(e);while(r.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e,t){var r;if(e instanceof ei.Model?(r=e.attributes,!e.graph&&(!t||!t.dry)&&(e.graph=this)):r=e,!Li(r.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,t){return Array.isArray(e)?this.addCells(e,t):(e instanceof ei.Model?e.has("z")||e.set("z",this.maxZIndex()+1):e.z===void 0&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,t),t||{}),this)},addCells:function(e,t){return e.length===0?this:(e=ihe(e),t.maxPosition=t.position=e.length-1,this.startBatch("add",t),e.forEach(function(r){this.addCell(r,t),t.position--},this),this.stopBatch("add",t),this)},resetCells:function(e,t){var r=Fr(e).map(function(n){return this._prepareCell(n,t)},this);return this.get("cells").reset(r,t),this},removeCells:function(e,t){return e.length&&(this.startBatch("remove"),To(e,"remove",t),this.stopBatch("remove")),this},_removeCell:function(e,t,r){r=r||{},r.clear||(r.disconnectLinks?this.disconnectLinks(e,r):this.removeLinks(e,r)),this.get("cells").remove(e,{silent:!0}),e.graph===this&&(e.graph=null)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(e=>e.isElement())},getLinks:function(){return this.get("cells").filter(e=>e.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,t){t=t||{};var r=t.indirect,n=t.inbound,i=t.outbound;n===void 0&&i===void 0&&(n=i=!0);var s=[],o={};i&&a(this,e),n&&u(this,e);function a(h,g){if(Zs(h.getOutboundEdges(g.id),(function(m,_){if(!o[_]){var x=h.getCell(_);s.push(x),o[_]=!0,r&&(n&&u(h,x),i&&a(h,x))}}).bind(h)),r&&g.isLink()){var y=g.getTargetCell();y&&y.isLink()&&(o[y.id]||(s.push(y),a(h,y)))}}function u(h,g){if(Zs(h.getInboundEdges(g.id),(function(m,_){if(!o[_]){var x=h.getCell(_);s.push(x),o[_]=!0,r&&(n&&u(h,x),i&&a(h,x))}}).bind(h)),r&&g.isLink()){var y=g.getSourceCell();y&&y.isLink()&&(o[y.id]||(s.push(y),u(h,y)))}}if(t.deep){var c=e.getEmbeddedCells({deep:!0}),f={};c.forEach(function(h){h.isElement()&&(f[h.id]=!0)}),c.forEach(function(h){h.isLink()||(i&&Zs(this.getOutboundEdges(h.id),(function(g,y){if(!o[y]){var m=this.getCell(y),{source:_,target:x}=m.attributes,S=_.id,E=x.id;if(!t.includeEnclosed&&S&&f[S]&&E&&f[E])return;s.push(this.getCell(y)),o[y]=!0}}).bind(this)),n&&Zs(this.getInboundEdges(h.id),(function(g,y){if(!o[y]){var m=this.getCell(y),{source:_,target:x}=m.attributes,S=_.id,E=x.id;if(!t.includeEnclosed&&S&&f[S]&&E&&f[E])return;s.push(this.getCell(y)),o[y]=!0}}).bind(this)))},this)}return s},getNeighbors:function(e,t){t||(t={});var r=t.inbound,n=t.outbound;r===void 0&&n===void 0&&(r=n=!0);var i=this.getConnectedLinks(e,t).reduce((function(a,u){var{source:c,target:f}=u.attributes,h=u.hasLoop(t);if(r&&Fa(c,"id")&&!a[c.id]){var g=this.getCell(c.id);g.isElement()&&(h||g&&g!==e&&(!t.deep||!g.isEmbeddedIn(e)))&&(a[c.id]=g)}if(n&&Fa(f,"id")&&!a[f.id]){var y=this.getCell(f.id);y.isElement()&&(h||y&&y!==e&&(!t.deep||!y.isEmbeddedIn(e)))&&(a[f.id]=y)}return a}).bind(this),{});if(e.isLink()){if(r){var s=e.getSourceCell();s&&s.isElement()&&!i[s.id]&&(i[s.id]=s)}if(n){var o=e.getTargetCell();o&&o.isElement()&&!i[o.id]&&(i[o.id]=o)}}return Fr(i)},getCommonAncestor:function(){var e=Array.from(arguments).map(function(r){for(var n=[],i=r.get("parent");i;)n.push(i),i=this.getCell(i).get("parent");return n},this);e=e.sort(function(r,n){return r.length-n.length});var t=Fr(e.shift()).find(function(r){return e.every(function(n){return n.includes(r)})});return this.getCell(t)},getSuccessors:function(e,t){t=t||{};var r=[];return this.search(e,function(n){n!==e&&r.push(n)},jt({},t,{outbound:!0})),r},cloneCells:JU,cloneSubgraph:function(e,t){var r=this.getSubgraph(e,t);return this.cloneCells(r)},getSubgraph:function(e,t){t=t||{};var r=[],n={},i=[],s=[];return Fr(e).forEach(function(o){if(n[o.id]||(r.push(o),n[o.id]=o,o.isLink()?s.push(o):i.push(o)),t.deep){var a=o.getEmbeddedCells({deep:!0});a.forEach(function(u){n[u.id]||(r.push(u),n[u.id]=u,u.isLink()?s.push(u):i.push(u))})}}),s.forEach(function(o){var{source:a,target:u}=o.attributes;if(a.id&&!n[a.id]){var c=this.getCell(a.id);r.push(c),n[c.id]=c,i.push(c)}if(u.id&&!n[u.id]){var f=this.getCell(u.id);r.push(this.getCell(u.id)),n[f.id]=f,i.push(f)}},this),i.forEach(function(o){var a=this.getConnectedLinks(o,t);a.forEach(function(u){var{source:c,target:f}=u.attributes;!n[u.id]&&c.id&&n[c.id]&&f.id&&n[f.id]&&(r.push(u),n[u.id]=u)})},this),r},getPredecessors:function(e,t){t=t||{};var r=[];return this.search(e,function(n){n!==e&&r.push(n)},jt({},t,{inbound:!0})),r},search:function(e,t,r){r=r||{},r.breadthFirst?this.bfs(e,t,r):this.dfs(e,t,r)},bfs:function(e,t,r={}){const n={},i={},s=[];for(s.push(e),i[e.id]=0;s.length>0;){var o=s.shift();if(n[o.id]||(n[o.id]=!0,t.call(this,o,i[o.id])===!1))continue;const a=this.getNeighbors(o,r);for(let u=0,c=a.length;u<c;u++){const f=a[u];i[f.id]=i[o.id]+1,s.push(f)}}},dfs:function(e,t,r={}){const n={},i={},s=[];for(s.push(e),i[e.id]=0;s.length>0;){const o=s.pop();if(n[o.id]||(n[o.id]=!0,t.call(this,o,i[o.id])===!1))continue;const a=this.getNeighbors(o,r),u=s.length;for(let c=0,f=a.length;c<f;c++){const h=a[c];i[h.id]=i[o.id]+1,s.splice(u,0,h)}}},getSources:function(){var e=[];return Zs(this._nodes,(function(t,r){(!this._in[r]||Da(this._in[r]))&&e.push(this.getCell(r))}).bind(this)),e},getSinks:function(){var e=[];return Zs(this._nodes,(function(t,r){(!this._out[r]||Da(this._out[r]))&&e.push(this.getCell(r))}).bind(this)),e},isSource:function(e){return!this._in[e.id]||Da(this._in[e.id])},isSink:function(e){return!this._out[e.id]||Da(this._out[e.id])},isSuccessor:function(e,t){var r=!1;return this.search(e,function(n){if(n===t&&n!==e)return r=!0,!1},{outbound:!0}),r},isPredecessor:function(e,t){var r=!1;return this.search(e,function(n){if(n===t&&n!==e)return r=!0,!1},{inbound:!0}),r},isNeighbor:function(e,t,r){r=r||{};var n=r.inbound,i=r.outbound;n===void 0&&i===void 0&&(n=i=!0);var s=!1;return this.getConnectedLinks(e,r).forEach(function(o){var{source:a,target:u}=o.attributes;if(n&&Fa(a,"id")&&a.id===t.id||i&&Fa(u,"id")&&u.id===t.id)return s=!0,!1}),s},disconnectLinks:function(e,t){this.getConnectedLinks(e).forEach(function(r){r.set(r.attributes.source.id===e.id?"source":"target",{x:0,y:0},t)})},removeLinks:function(e,t){To(this.getConnectedLinks(e),"remove",t)},findModelsFromPoint:function(e){return this.getElements().filter(t=>t.getBBox({rotate:!0}).containsPoint(e))},findModelsInArea:function(e,t={}){const r=new mt(e),{strict:n=!1}=t,i=n?"containsRect":"intersect";return this.getElements().filter(s=>r[i](s.getBBox({rotate:!0})))},findModelsUnderElement:function(e,t={}){const{searchBy:r="bbox"}=t,n=e.getBBox().rotateAroundCenter(e.angle());return(r==="bbox"?this.findModelsInArea(n):this.findModelsFromPoint(tj(n,r))).filter(s=>e.id!==s.id&&!s.isEmbeddedIn(e))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,t={}){const{rotate:r=!0}=t;return Fr(e).reduce(function(n,i){const s=i.getBBox({rotate:r});return s?n?n.union(s):s:n},null)},translate:function(e,t,r){var n=this.getCells().filter(function(i){return!i.isEmbedded()});return To(n,"translate",e,t,r),this},resize:function(e,t,r){return this.resizeCells(e,t,this.getCells(),r)},resizeCells:function(e,t,r,n){var i=this.getCellsBBox(r);if(i){var s=Math.max(e/i.width,0),o=Math.max(t/i.height,0);To(r,"scale",s,o,i.origin(),n)}return this},startBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",jt({},t,{batchName:e}))},stopBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",jt({},t,{batchName:e}))},hasActiveBatch:function(e){const t=this._batches;let r;return arguments.length===0?r=Object.keys(t):Array.isArray(e)?r=e:r=[e],r.some(n=>t[n]>0)}},{validations:{multiLinks:function(e,t){var{source:r,target:n}=t.attributes;if(r.id&&n.id){var i=t.getSourceCell();if(i){var s=e.getConnectedLinks(i,{outbound:!0}),o=s.filter(function(a){var{source:u,target:c}=a.attributes;return u&&u.id===r.id&&(!u.port||u.port===r.port)&&c&&c.id===n.id&&(!c.port||c.port===n.port)});if(o.length>1)return!1}}return!0},linkPinning:function(e,t){var{source:r,target:n}=t.attributes;return r.id&&n.id}}});Ehe(Po.prototype,["resetCells","addCells","removeCells"],mE.cells);const Qu={},Ga=ei.View.extend({options:{},theme:null,themeClassNamePrefix:So("theme-"),requireSetThemeOverride:!1,defaultTheme:bu.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=jt({},this.options,e),ei.View.call(this,e)},initialize:function(){Qu[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return this.el.parentNode!==null},renderChildren:function(e){if(e||(e=Qn(this,"children")),e){var t=this.svgElement,r=$e.namespace[t?"svg":"xhtml"],n=Up(e,r);(t?this.vel:this.$el).empty().append(n.fragment),this.childNodes=n.selectors}return this},findAttribute:function(e,t){for(var r=t;r&&r.nodeType===1;){var n=r.getAttribute(e);if(n)return n;if(r===this.el)return null;r=r.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(Qn(this,"el"));else{var e=Qn(this,"tagName"),t=jt({},Qn(this,"attributes")),r=jt({},Qn(this,"style"));this.id&&(t.id=Qn(this,"id")),this.setElement(this._createElement(e)),this._setAttributes(t),this._setStyle(r)}this._ensureElClassName()},_setAttributes:function(e){this.svgElement?this.vel.attr(e):this.$el.attr(e)},_setStyle:function(e){this.$el.css(e)},_createElement:function(e){return this.svgElement?document.createElementNS($e.namespace.svg,e):document.createElement(e)},_setElement:function(e){this.$el=e instanceof ei.$?e:ei.$(e),this.el=this.$el[0],this.svgElement&&(this.vel=$e(this.el))},_ensureElClassName:function(){var e=Qn(this,"className");if(e){var t=So(e);this.svgElement?this.vel.removeClass(e).addClass(t):this.$el.removeClass(e).addClass(t)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(e,t){return t=t||{},this.theme&&this.requireSetThemeOverride&&!t.override?this:(this.removeThemeClassName(),this.addThemeClassName(e),this.onSetTheme(this.theme,e),this.theme=e,this)},addThemeClassName:function(e){if(e=e||this.theme,!e)return this;var t=this.themeClassNamePrefix+e;return this.svgElement?this.vel.addClass(t):this.$el.addClass(t),this},removeThemeClassName:function(e){e=e||this.theme;var t=this.themeClassNamePrefix+e;return this.svgElement?this.vel.removeClass(t):this.$el.removeClass(t),this},onSetTheme:function(e,t){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Qu[this.cid]=null,ei.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(e,t,r){if(!t)return this;r||(r={});var n=this.getEventNamespace();for(var i in t){var s=t[i];typeof s!="function"&&(s=this[s]),s&&It(e).on(i+n,r,s.bind(this))}return this},undelegateElementEvents:function(e){return It(e).off(this.getEventNamespace()),this},delegateDocumentEvents:function(e,t){return e||(e=Qn(this,"documentEvents")),this.delegateElementEvents(document,e,t)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(e,t){if(!e)throw new Error("eventData(): event object required.");var r=e.data,n="__"+this.cid+"__";return t===void 0?r?r[n]||{}:{}:(r||(r=e.data={}),r[n]||(r[n]={}),jt(r[n],t),this)},stopPropagation:function(e){return this.eventData(e,{propagationStopped:!0}),this},isPropagationStopped:function(e){return!!this.eventData(e).propagationStopped}},{extend:function(){var e=Array.from(arguments),t=e[0]&&jt({},e[0])||{},r=e[1]&&jt({},e[1])||{},n=t.render||this.prototype&&this.prototype.render||null;return t.render=function(){return typeof n=="function"&&n.apply(this,arguments),this.render.__render__===n&&this.onRender(),this},t.render.__render__=n,ei.View.extend.call(this,t,r)}}),Oz="dbltap";if(It.event&&!(Oz in It.event.special)){const e=bu.doubleTapInterval,t=30;It.event.special[Oz]={bindType:"touchend",delegateType:"touchend",handle:function(r,...n){const{handleObj:i,target:s}=r,o=It.data(s),a=new Date().getTime(),u="lastTouch"in o?a-o.lastTouch:0;u<e&&u>t?(o.lastTouch=null,r.type=i.origType,i.handler.call(this,r,...n)):o.lastTouch=a}}}const Js={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},Khe=Ga.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return So(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,t){this.el.insertBefore(e,this.insertPivot(t))},insertNode:function(e){const{el:t}=this;e.parentNode!==t&&t.appendChild(e)},insertPivot:function(e){const{el:t,pivotNodes:r}=this;e=+e,e||(e=0);let n=r[e];if(n)return n;n=r[e]=document.createComment("z-index:"+(e+1));let i=-1/0;for(let s in r)s=+s,s<e&&s>i&&(i=s,e-1);if(i!==-1/0){const s=r[i];t.insertBefore(n,s.nextSibling)}else t.insertBefore(n,t.firstChild);return n},removePivots:function(){const{el:e,pivotNodes:t}=this;for(let r in t)e.removeChild(t[r]);this.pivotNodes={}}});function Lf(e){return e?Array.isArray(e)?e:[e]:[]}const Eo=Ga.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(e,t){const{paper:r}=e;this.cellView=e,this.nodeSelector=t,r&&(this.updateRequested=!0,r.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:e,nodeSelector:t}=this;return e.isMounted()?(this.update(e,t),this.mount(),this.transform(),0):(this.postponedUpdate=!0,0)},findNode(e,t=null){let r;if(typeof t=="string")[r]=e.findBySelector(t);else if(Jn(t)){const n=e.model.isLink(),{label:i=null,port:s,selector:o}=t;n&&i!==null?r=e.findLabelNode(i,o):!n&&s?r=e.findPortNode(s,o):[r]=e.findBySelector(o)}else t&&(r=$e.toNode(t),r instanceof SVGElement||(r=null));return r||null},getNodeMatrix(e,t){const{options:r}=this,{layer:n}=r,{rotatableNode:i}=e,s=e.getNodeMatrix(t);return i?n?i.contains(t)?s:e.getRootRotateMatrix().inverse().multiply(s):e.getNodeRotateMatrix(t).multiply(s):s},mount(){const{MOUNTABLE:e,cellView:t,el:r,options:n,transformGroup:i,detachedTransformGroup:s,postponedUpdate:o,nodeSelector:a}=this;if(!e||i)return;if(o){this.update(t,a),this.transform();return}const{vel:u,paper:c}=t,{layer:f}=n;if(f){let h;s?(h=s,this.detachedTransformGroup=null):h=$e("g").addClass("highlight-transform").append(r),this.transformGroup=h,c.getLayerView(f).insertSortedNode(h.node,n.z)}else(!r.parentNode||r.nextSibling)&&u.append(r)},unmount(){const{MOUNTABLE:e,transformGroup:t,vel:r}=this;e&&(t?(this.transformGroup=null,this.detachedTransformGroup=t,t.remove()):r.remove())},transform(){const{transformGroup:e,cellView:t,updateRequested:r}=this;if(!e||t.model.isLink()||r)return;const n=t.getRootTranslateMatrix(),i=t.getRootRotateMatrix(),s=n.multiply(i);e.attr("transform",$e.matrixToTransformString(s))},update(){const{node:e,cellView:t,nodeSelector:r,updateRequested:n,id:i}=this;if(n)return;this.postponedUpdate=!1;const s=this.node=this.findNode(t,r);e&&this.unhighlight(t,e),s?(this.highlight(t,s),this.mount()):(this.unmount(),t.notify("cell:highlight:invalid",i,this))},onRemove(){const{node:e,cellView:t,id:r,constructor:n}=this;e&&this.unhighlight(t,e),this.unmount(),n._removeRef(t,r)},highlight(e,t){},unhighlight(e,t){},listenToUpdateAttributes(e){const t=Qn(this,"UPDATE_ATTRIBUTES");!Array.isArray(t)||t.length===0||this.listenTo(e.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){const{cellView:e}=this;if(!e)return;const{model:t,paper:r}=e;Qn(this,"UPDATE_ATTRIBUTES").some(i=>t.hasChanged(i))&&r.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(e,t,r){const n=this.uniqueId(t,r);this.add(e,t,n,r)},unhighlight:function(e,t,r){const n=this.uniqueId(t,r);this.remove(e,n)},get(e,t=null){const{cid:r}=e,{_views:n}=this,i=n[r];if(t===null){const s=[];if(!i)return s;for(let o in i){const a=i[o];a instanceof this&&s.push(a)}return s}else{if(!i)return null;if(t in i){const s=i[t];if(s instanceof this)return s}return null}},add(e,t,r,n={}){if(!r)throw new Error("dia.HighlighterView: An ID required.");const i=Eo.get(e,r);i&&i.remove();const s=new this(n);return s.id=r,this._addRef(e,r,s),s.requestUpdate(e,t),s.listenToUpdateAttributes(e),s},_addRef(e,t,r){const{cid:n}=e,{_views:i}=this;let s=i[n];s||(s=i[n]={}),s[t]=r},_removeRef(e,t){const{cid:r}=e,{_views:n}=this,i=n[r];if(i){t&&delete i[t];for(let s in i)return;delete n[r]}},remove(e,t=null){Lf(this.get(e,t)).forEach(r=>{r.remove()})},removeAll(e,t=null){const{_views:r}=this;for(let n in r)for(let i in r[n]){const s=r[n][i];s.cellView.paper===e&&s instanceof this&&(t===null||i===t)&&s.remove()}},update(e,t=null,r=!1){Lf(this.get(e,t)).forEach(n=>{(r||n.UPDATABLE)&&n.update()})},transform(e,t=null){Lf(this.get(e,t)).forEach(r=>{r.UPDATABLE&&r.transform()})},unmount(e,t=null){Lf(this.get(e,t)).forEach(r=>r.unmount())},mount(e,t=null){Lf(this.get(e,t)).forEach(r=>r.mount())},uniqueId(e,t=""){return $e.ensureId(e)+JSON.stringify(t)}}),tl={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},Zhe={TOOLS:"TOOLS"},wr=Ga.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],t=this.model.get("type");return t&&t.toLowerCase().split(".").forEach(function(r,n,i){e.push("type-"+i.slice(0,n+1).join("-"))}),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var e={},t={},r=0,n,i,s,o=Qn(this,"presentationAttributes");for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];for(Array.isArray(u)||(u=[u]),n=0,i=u.length;n<i;n++){s=u[n];var c=e[s];c||(c=e[s]=1<<r++),t[a]|=c}}var f=Qn(this,"initFlag");for(Array.isArray(f)||(f=[f]),n=0,i=f.length;n<i;n++)s=f[n],e[s]||(e[s]=1<<r++);if(r>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=e,this._presentationAttributes=t},hasFlag:function(e,t){return e&this.getFlag(t)},removeFlag:function(e,t){return e^e&this.getFlag(t)},getFlag:function(e){var t=this._flags;if(!t)return 0;var r=0;if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)r|=t[e[n]];else r|=t[e];return r},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||ll(this),Ga.call(this,e)},initialize:function(){this.setFlags(),Ga.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,t){var r=e.getChangeFlag(this._presentationAttributes);t.updateHandled||!r||(t.dirty&&this.hasFlag(r,"UPDATE")&&(r|=this.getFlag("RENDER")),t.tool&&(t.async=!1),this.requestUpdate(r,t))},requestUpdate:function(e,t){const{paper:r}=this;r&&e>0&&r.requestViewUpdate(this,e,this.UPDATE_PRIORITY,t)},parseDOMJSON:function(e,t){var r=Up(e),n=r.selectors,i=r.groupSelectors;for(var s in i){if(n[s])throw new Error("dia.CellView: ambiguous group selector");n[s]=i[s]}if(t){var o=this.selector;if(n[o])throw new Error("dia.CellView: ambiguous root selector.");n[o]=t}return{fragment:r.fragment,selectors:n}},can:function(e){var t=fn(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Wr(t)&&t[e]!==!1||Jfe(t)&&t!==!1},findBySelector:function(e,t,r){if(t||(t=this.el),r||(r=this.selectors),!e||e===".")return[t];if(r){var n=r[e];if(n)return Array.isArray(n)?n:[n]}return It(t).find(e).toArray()},notify:function(e){if(this.paper){var t=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(t)),this.paper.trigger.apply(this.paper,[e,this].concat(t))}},getBBox:function(e){var t;if(e&&e.useModelGeometry){var r=this.model;t=r.getBBox().bbox(r.angle())}else t=this.getNodeBBox(this.el);return this.paper.localToPaperRect(t)},getNodeBBox:function(e){const t=this.getNodeBoundingRect(e),r=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(e)),n=this.getNodeMatrix(e);return $e.transformRect(t,r.multiply(n))},getNodeRotateMatrix(e){return!this.rotatableNode||this.rotatableNode.contains(e)?this.getRootRotateMatrix():$e.createSVGMatrix()},getNodeUnrotatedBBox:function(e){var t=this.getNodeBoundingRect(e),r=this.getNodeMatrix(e),n=this.getRootTranslateMatrix();return $e.transformRect(t,n.multiply(r))},getRootTranslateMatrix:function(){var e=this.model,t=e.position(),r=$e.createSVGMatrix().translate(t.x,t.y);return r},getRootRotateMatrix:function(){var e=$e.createSVGMatrix(),t=this.model,r=t.angle();if(r){var n=t.getBBox(),i=n.width/2,s=n.height/2;e=e.translate(i,s).rotate(r).translate(-i,-s)}return e},_notifyHighlight:function(e,t,r={}){const{el:n}=this;let i;if(typeof t=="string"?[i=n]=this.findBySelector(t):[i=n]=this.$(t),r.partial=i!==n,r.type===void 0){let s;switch(!0){case r.embedding:s=tl.EMBEDDING;break;case r.connecting:s=tl.CONNECTING;break;case r.magnetAvailability:s=tl.MAGNET_AVAILABILITY;break;case r.elementAvailability:s=tl.ELEMENT_AVAILABILITY;break;default:s=tl.DEFAULT;break}r.type=s}return this.notify(e,i,r),this},highlight:function(e,t){return this._notifyHighlight("cell:highlight",e,t)},unhighlight:function(e,t={}){return this._notifyHighlight("cell:unhighlight",e,t)},findMagnet:function(e){const t=this.el;let r=this.$(e)[0];r||(r=t);do{const n=r.getAttribute("magnet"),i=r===t;if((n||i)&&n!=="false")return r;if(i)return;r=r.parentNode}while(r)},findProxyNode:function(e,t){e||(e=this.el);const r=e.getAttribute(`${t}-selector`);if(r){const[n]=this.findBySelector(r);if(n)return n}return e},getSelector:function(e,t){var r;if(e===this.el)return typeof t=="string"&&(r="> "+t),r;if(e){var n=$e(e).index()+1;r=e.tagName+":nth-child("+n+")",t&&(r+=" > "+t),r=this.getSelector(e.parentNode,r)}return r},addLinkFromMagnet:function(e,t,r){var n=this.paper,i=n.model,s=n.getDefaultLink(this,e);return s.set({source:this.getLinkEnd(e,t,r,s,"source"),target:{x:t,y:r}}).addTo(i,{async:!1,ui:!0}),s.findView(n)},getLinkEnd:function(e,...t){var r=this.model,n=r.id,i=this.findAttribute("port",e),s=e.getAttribute("joint-selector"),o={id:n};return s!=null&&(o.magnet=s),i!=null?(o.port=i,!r.hasPort(i)&&!s&&(o.selector=this.getSelector(e))):s==null&&this.el!==e&&(o.selector=this.getSelector(e)),this.customizeLinkEnd(o,e,...t)},customizeLinkEnd:function(e,t,r,n,i,s){const{paper:o}=this,{connectionStrategy:a}=o.options;if(typeof a=="function"){var u=a.call(o,e,this,t,new pe(r,n),i,s,o);if(u)return u}return e},getMagnetFromLinkEnd:function(e){var t=this.el,r=e.port,n=e.magnet,i=this.model,s;return r!=null&&i.isElement()&&i.hasPort(r)?s=this.findPortNode(r,n)||t:(n||(n=e.selector),!n&&r!=null&&(n='[port="'+r+'"]'),s=this.findBySelector(n,t,this.selectors)[0]),this.findProxyNode(s,"magnet")},dragLinkStart:function(e,t,r,n){this.model.startBatch("add-link");const i=this.addLinkFromMagnet(t,r,n);i.notifyPointerdown(e,r,n),i.eventData(e,i.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:i})},dragLink:function(e,t,r){var n=this.eventData(e),i=n.linkView;if(i)i.pointermove(e,t,r);else{var s=this.paper,o=s.options.magnetThreshold,a=this.getEventTarget(e),u=n.targetMagnet;if(o==="onleave"){if(u===a||$e(u).contains(a))return}else if(s.eventData(e).mousemoved<=o)return;this.dragLinkStart(e,u,t,r)}},dragLinkEnd:function(e,t,r){var n=this.eventData(e),i=n.linkView;i&&(i.pointerup(e,t,r),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,t){Da(t)||(e instanceof SVGElement?$e(e).attr(t):It(e).attr(t))},processNodeAttributes:function(e,t){var r,n,i,s,o,a,u,c,f,h=[];for(r in t)t.hasOwnProperty(r)&&(n=t[r],i=this.getAttributeDefinition(r),i&&(!fn(i.qualify)||i.qualify.call(this,n,e,t,this))?(Li(i.set)&&(a||(a={}),a[i.set]=n),n!==null&&h.push(r,i)):(a||(a={}),a[hhe(r)]=n));for(s=0,o=h.length;s<o;s+=2)r=h[s],i=h[s+1],n=t[r],fn(i.set)&&(u||(u={}),u[r]=n),fn(i.position)&&(c||(c={}),c[r]=n),fn(i.offset)&&(f||(f={}),f[r]=n);return{raw:t,normal:a,set:u,position:c,offset:f}},updateRelativeAttributes:function(e,t,r,n){n||(n={});var i,s,o,a=t.raw||{},u=t.normal||{},c=t.set,f=t.position,h=t.offset;for(i in c){s=c[i],o=this.getAttributeDefinition(i);var g=o.set.call(this,s,r.clone(),e,a,this);Wr(g)?jt(u,g):g!==void 0&&(u[i]=g)}if(e instanceof HTMLElement){this.setNodeAttributes(e,u);return}var y=u.transform,m=$e.transformStringToMatrix(y),_=pe(m.e,m.f);y&&(u=fc(u,"transform"),m.e=m.f=0);var x,S,E;if(f||h){var A=this.getNodeScale(e,n.scalableNode);x=A.sx,S=A.sy}var T=!1;for(i in f)s=f[i],o=this.getAttributeDefinition(i),E=o.position.call(this,s,r.clone(),e,a,this),E&&(_.offset(pe(E).scale(x,S)),T||(T=!0));this.setNodeAttributes(e,u);var I=!1;if(h){var N=this.getNodeBoundingRect(e);if(N.width>0&&N.height>0){var p=$e.transformRect(N,m).scale(1/x,1/S);for(i in h)s=h[i],o=this.getAttributeDefinition(i),E=o.offset.call(this,s,p,e,a,this),E&&(_.offset(pe(E).scale(x,S)),I||(I=!0))}}(y!==void 0||T||I)&&(_.round(1),m.e=_.x,m.f=_.y,e.setAttribute("transform",$e.matrixToTransformString(m)))},getNodeScale:function(e,t){var r,n;if(t&&t.contains(e)){var i=t.scale();r=1/i.sx,n=1/i.sy}else r=1,n=1;return{sx:r,sy:n}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(e){var t=this.metrics;if(!t)return{};var r=$e.ensureId(e),n=t[r];return n||(n=t[r]={}),n},getNodeData:function(e){var t=this.nodeCache(e);return t.data||(t.data={}),t.data},getNodeBoundingRect:function(e){var t=this.nodeCache(e);return t.boundingRect===void 0&&(t.boundingRect=$e(e).getBBox()),new mt(t.boundingRect)},getNodeMatrix:function(e){const t=this.nodeCache(e);if(t.magnetMatrix===void 0){const{rotatableNode:r,el:n}=this;let i;r&&r.contains(e)?i=r:i=n,t.magnetMatrix=$e(e).getTransformToElement(i)}return $e.createSVGMatrix(t.magnetMatrix)},getNodeShape:function(e){var t=this.nodeCache(e);return t.geometryShape===void 0&&(t.geometryShape=$e(e).toGeometryShape()),t.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,t,r,n){var i,s,o,a,u={},c=[];for(var f in e)if(e.hasOwnProperty(f)&&(o=e[f],!!Jn(o))){var h=r[f]=this.findBySelector(f,t,n);for(i=0,s=h.length;i<s;i++){var g=h[i];a=$e.ensureId(g);var y=n&&n[f]===g,m=u[a];if(m){m.array||(c.push(a),m.array=!0,m.attributes=[m.attributes],m.selectedLength=[m.selectedLength]);var _=m.attributes,x=m.selectedLength;if(y)_.unshift(o),x.unshift(-1);else{var S=XU(x,s);_.splice(S,0,o),x.splice(S,0,s)}}else u[a]={attributes:o,selectedLength:y?-1:s,node:g,array:!1}}}for(i=0,s=c.length;i<s;i++)a=c[i],o=u[a],o.attributes=ni({},...o.attributes.reverse());return u},getEventTarget:function(e,t={}){const{target:r,type:n,clientX:i=0,clientY:s=0}=e;return t.fromPoint||n==="touchmove"||n==="touchend"||"pointerId"in e&&r.hasPointerCapture(e.pointerId)?document.elementFromPoint(i,s):r},updateDOMSubtreeAttributes:function(e,t,r){r||(r={}),r.rootBBox||(r.rootBBox=mt()),r.selectors||(r.selectors=this.selectors);var n={},i={},s=[],o=[],a,u,c,f,h,g=r.roAttributes,y=this.findNodesAttributes(g||t,e,n,r.selectors),m=g?this.findNodesAttributes(t,e,n,r.selectors):y;for(var _ in y)if(f=y[_],c=f.attributes,u=f.node,h=this.processNodeAttributes(u,c),!h.set&&!h.position&&!h.offset)this.setNodeAttributes(u,h.normal);else{var x=m[_]&&m[_].attributes,S=x&&c.ref===void 0?x.ref:c.ref,E;if(S){if(E=(n[S]||this.findBySelector(S,e,r.selectors))[0],!E)throw new Error('dia.CellView: "'+S+'" reference does not exist.')}else E=null;if(a={node:u,refNode:E,processedAttributes:h,allAttributes:x},E){var A=o.findIndex(function(T){return T.refNode===u});A>-1?o.splice(A,0,a):o.push(a)}else s.push(a)}s.push(...o);for(let T=0,I=s.length;T<I;T++){a=s[T],u=a.node,E=a.refNode;const N=E?$e.ensureId(E):"";let p=i[N];p||(p=i[N]=E?$e(E).getBBox({target:Jhe(u,E)}):r.rootBBox),g?(h=this.processNodeAttributes(u,a.allAttributes),this.mergeProcessedAttributes(h,a.processedAttributes)):h=a.processedAttributes,this.updateRelativeAttributes(u,h,p,r)}},mergeProcessedAttributes:function(e,t){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),jt(e.set,t.set),jt(e.position,t.position),jt(e.offset,t.offset);var r=e.normal&&e.normal.transform;r!==void 0&&t.normal&&(t.normal.transform=r),e.normal=t.normal},onMount(e){e||(this.mountTools(),Eo.mount(this))},onDetach(){this.unmountTools(),Eo.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var t=this._toolsView;return t?e?t.getName()===e:!0:!1},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){const e=this._toolsView;return e&&e.unmount(),this},mountTools(){const e=this._toolsView;return e&&!e.isMounted()&&e.mount(),this},updateTools:function(e){var t=this._toolsView;return t&&t.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools();break}},removeHighlighters:function(){Eo.remove(this)},updateHighlighters:function(e=!1){Eo.update(this,null,e)},transformHighlighters:function(){Eo.transform(this)},preventDefaultInteraction(e){this.eventData(e,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(e){const{defaultInteractionPrevented:t=!1}=this.eventData(e);return t},pointerdblclick:function(e,t,r){this.notify("cell:pointerdblclick",e,t,r)},pointerclick:function(e,t,r){this.notify("cell:pointerclick",e,t,r)},contextmenu:function(e,t,r){this.notify("cell:contextmenu",e,t,r)},pointerdown:function(e,t,r){const{model:n}=this,{graph:i}=n;i&&(n.startBatch("pointer"),this.eventData(e,{graph:i})),this.notify("cell:pointerdown",e,t,r)},pointermove:function(e,t,r){this.notify("cell:pointermove",e,t,r)},pointerup:function(e,t,r){const{graph:n}=this.eventData(e);this.notify("cell:pointerup",e,t,r),n&&n.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,t,r,n){this.notify("cell:mousewheel",e,t,r,n)},onevent:function(e,t,r,n){this.notify(t,e,r,n)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){const{paper:t,model:r}=this;if(t.isAsync()){if(r.isLink()){const s=r.getSourceElement();if(s){const a=t.findViewByModel(s);a&&(t.dumpView(a),t.checkViewVisibility(a))}const o=r.getTargetElement();if(o){const a=t.findViewByModel(o);a&&(t.dumpView(a),t.checkViewVisibility(a))}}t.dumpView(this),t.checkViewVisibility(this)}const n=this.getEventTarget(e,{fromPoint:!0}),i=t.findView(n);i!==this&&(this.mouseleave(e),i&&i.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e}},{Flags:Zhe,Highlighting:tl,addPresentationAttributes:function(e){return ni({},Qn(this.prototype,"presentationAttributes"),e,function(t,r){if(!(!t||!r)&&(typeof t=="string"&&(t=[t]),typeof r=="string"&&(r=[r]),Array.isArray(t)&&Array.isArray(r)))return Hh(t.concat(r))})}});function Jhe(e,t){let r=e;do{if(r.contains(t))return r;r=r.parentNode}while(r);return null}const Dr={TOOLS:wr.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},rl={MOVE:"move",MAGNET:"magnet"},_i=wr.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=wr.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){wr.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[Dr.UPDATE],position:[Dr.TRANSLATE,Dr.TOOLS],size:[Dr.RESIZE,Dr.PORTS,Dr.TOOLS],angle:[Dr.ROTATE,Dr.TOOLS],markup:[Dr.RENDER],ports:[Dr.PORTS]},initFlag:[Dr.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,t){this.hasFlag(e,Dr.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(e,Dr.RENDER))this.render(),this.updateTools(t),this.updateHighlighters(!0),r=!0,e=this.removeFlag(e,[Dr.RENDER,Dr.UPDATE,Dr.RESIZE,Dr.TRANSLATE,Dr.ROTATE,Dr.PORTS,Dr.TOOLS]);else{let n=!1;this.hasFlag(e,Dr.RESIZE)&&(this.resize(t),n=!0,e=this.removeFlag(e,[Dr.RESIZE,Dr.UPDATE]),e=this.removeFlag(e,Dr.PORTS)),this.hasFlag(e,Dr.UPDATE)&&(this.update(this.model,null,t),e=this.removeFlag(e,Dr.UPDATE),n=!0,e=this.removeFlag(e,Dr.PORTS)),this.hasFlag(e,Dr.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,Dr.TRANSLATE),r=!0),this.hasFlag(e,Dr.ROTATE)&&(this.rotate(),e=this.removeFlag(e,Dr.ROTATE),r=!0),this.hasFlag(e,Dr.PORTS)&&(this._renderPorts(),n=!0,e=this.removeFlag(e,Dr.PORTS)),n&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(e,Dr.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,Dr.TOOLS)),e},_initializePorts:function(){},update:function(e,t){this.cleanNodesCache(),this._removePorts();var r=this.model,n=r.attr();this.updateDOMSubtreeAttributes(this.el,n,{rootBBox:new mt(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:t===n?null:t}),this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.ElementView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if(typeof t=="string")return this.renderStringMarkup(t);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el),r=this.selectors=t.selectors;this.rotatableNode=$e(r[this.rotatableSelector])||null,this.scalableNode=$e(r[this.scalableSelector])||null,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=this.vel;t.append($e(e)),this.rotatableNode=t.findOne(".rotatable"),this.scalableNode=t.findOne(".scalable");var r=this.selectors={};r[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode){this.rgRotate(),this.update();return}this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),t=this.getRotateString();t&&(e+=" "+t),this.vel.attr("transform",e)},getTranslateString:function(){var e=this.model.attributes.position;return"translate("+e.x+","+e.y+")"},getRotateString:function(){var e=this.model.attributes,t=e.angle;if(!t)return null;var r=e.size;return"rotate("+t+","+r.width/2+","+r.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var t=this.model,r=t.angle(),n=t.size(),i=this.scalableNode,s=!1;i.node.getElementsByTagName("path").length>0&&(s=!0);var o=i.getBBox({recursive:s}),a=n.width/(o.width||1),u=n.height/(o.height||1);i.attr("transform","scale("+a+","+u+")");var c=this.rotatableNode,f=c&&c.attr("transform");if(f){c.attr("transform",f+" rotate("+-r+","+n.width/2+","+n.height/2+")");var h=i.getBBox({target:this.paper.cells});t.set("position",{x:h.x,y:h.y},jt({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){const t=e.model||this.model,n=(e.paper||this.paper).model,i=e.initialZIndices={},s=t.getEmbeddedCells({deep:!0}),o=n.getConnectedLinks(t,{deep:!0,includeEnclosed:!0});[t,...s,...o].forEach(c=>i[c.id]=c.attributes.z),t.startBatch("to-front"),t.toFront({deep:!0,ui:!0});const a=n.getElements().reduce((c,f)=>Math.max(c,f.attributes.z||0),0);o.forEach(c=>{c.attributes.z<=a&&c.set("z",a+1,{ui:!0})}),t.stopBatch("to-front");const u=t.parent();u?(n.getCell(u).unembed(t,{ui:!0}),e.initialParentId=u):e.initialParentId=null},processEmbedding:function(e={},t,r,n){const i=e.model||this.model,s=e.paper||this.paper,o=s.model,{findParentBy:a,frontParentOnly:u,validateEmbedding:c}=s.options;let f;fn(a)?f=Fr(a.call(o,this,t,r,n)):a==="pointer"?f=Fr(o.findModelsFromPoint({x:r,y:n})):f=o.findModelsUnderElement(i,{searchBy:a}),f=f.filter(y=>y instanceof fa&&i.id!==y.id&&!y.isEmbeddedIn(i)),u&&(f=f.slice(-1));let h=null;const g=e.candidateEmbedView;for(let y=f.length-1;y>=0;y--){const m=f[y];if(g&&g.model.id==m.id){h=g;break}else{const _=m.findView(s);if(!fn(c)||c.call(s,this,_)){h=_;break}}}h&&h!=g&&(this.clearEmbedding(e),e.candidateEmbedView=h.highlight(h.findProxyNode(null,"container"),{embedding:!0})),!h&&g&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var t=e.candidateEmbedView;t&&(t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){const t=e.candidateEmbedView,r=e.model||this.model,n=e.paper||this.paper;if(t)t.model.embed(r,{ui:!0}),t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{const{validateUnembedding:i}=n.options,{initialParentId:s}=e;if(s&&typeof i=="function"&&!i.call(n,this)){this._disallowUnembed(e);return}}n.model.getConnectedLinks(r,{deep:!0}).forEach(i=>{i.reparent({ui:!0})})},_disallowUnembed:function(e){const{model:t,whenNotAllowed:r="revert"}=e,n=t||this.model,s=(e.paper||this.paper).model;switch(r){case"remove":{n.remove({ui:!0});break}case"revert":{const{initialParentId:o,initialPosition:a,initialZIndices:u}=e;if(a){const{x:f,y:h}=a;n.position(f,h,{deep:!0,ui:!0})}u&&Object.keys(u).forEach(f=>{const h=s.getCell(f);h&&h.set("z",u[f],{ui:!0})});const c=s.getCell(o);c&&c.embed(n,{ui:!0});break}}},getDelegatedView:function(){for(var e=this,t=e.model,r=e.paper;e&&!t.isLink();){if(!t.isEmbedded()||e.can("stopDelegation"))return e;t=t.getParentCell(),e=r.findViewByModel(t)}return null},findProxyNode:function(e,t){e||(e=this.el);const r=e.getAttribute(`${t}-selector`);if(r){const n=this.findAttribute("port",e);if(n){const i=this.findPortNode(n,r);if(i)return i}else{const[i]=this.findBySelector(r);if(i)return i}}return e},notifyPointerdown(e,t,r){wr.prototype.pointerdown.call(this,e,t,r),this.notify("element:pointerdown",e,t,r)},notifyPointermove(e,t,r){wr.prototype.pointermove.call(this,e,t,r),this.notify("element:pointermove",e,t,r)},notifyPointerup(e,t,r){this.notify("element:pointerup",e,t,r),wr.prototype.pointerup.call(this,e,t,r)},pointerdblclick:function(e,t,r){wr.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,t,r)},pointerclick:function(e,t,r){wr.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,t,r)},contextmenu:function(e,t,r){wr.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,t,r)},pointerdown:function(e,t,r){this.notifyPointerdown(e,t,r),this.dragStart(e,t,r)},pointermove:function(e,t,r){const n=this.eventData(e),{targetMagnet:i,action:s,delegatedView:o}=n;switch(i&&this.magnetpointermove(e,i,t,r),s){case rl.MAGNET:this.dragMagnet(e,t,r);break;case rl.MOVE:(o||this).drag(e,t,r);default:if(n.preventPointerEvents)break;this.notifyPointermove(e,t,r);break}this.eventData(e,n)},pointerup:function(e,t,r){const n=this.eventData(e),{targetMagnet:i,action:s,delegatedView:o}=n;switch(i&&this.magnetpointerup(e,i,t,r),s){case rl.MAGNET:this.dragMagnetEnd(e,t,r);break;case rl.MOVE:(o||this).dragEnd(e,t,r);default:if(n.preventPointerEvents)break;this.notifyPointerup(e,t,r)}i&&this.magnetpointerclick(e,i,t,r),this.checkMouseleave(e)},mouseover:function(e){wr.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){wr.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){wr.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){wr.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,t,r,n){wr.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,t,r,n)},onmagnet:function(e,t,r){const{currentTarget:n}=e;this.magnetpointerdown(e,n,t,r),this.eventData(e,{targetMagnet:n}),this.dragMagnetStart(e,t,r)},magnetpointerdown:function(e,t,r,n){this.notify("element:magnet:pointerdown",e,t,r,n)},magnetpointermove:function(e,t,r,n){this.notify("element:magnet:pointermove",e,t,r,n)},magnetpointerup:function(e,t,r,n){this.notify("element:magnet:pointerup",e,t,r,n)},magnetpointerdblclick:function(e,t,r,n){this.notify("element:magnet:pointerdblclick",e,t,r,n)},magnetcontextmenu:function(e,t,r,n){this.notify("element:magnet:contextmenu",e,t,r,n)},dragStart:function(e,t,r){if(this.isDefaultInteractionPrevented(e))return;var n=this.getDelegatedView();if(!n||!n.can("elementMove"))return;this.eventData(e,{action:rl.MOVE,delegatedView:n});const i=n.model.position();n.eventData(e,{initialPosition:i,pointerOffset:i.difference(t,r),restrictedArea:this.paper.getRestrictedArea(n,t,r)})},dragMagnetStart:function(e,t,r){const{paper:n}=this,i=e.isPropagationStopped();if(i&&this.eventData(e,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(e)||!this.can("addLinkFromMagnet"))return;const{targetMagnet:s=e.currentTarget}=this.eventData(e);if(e.stopPropagation(),!n.options.validateMagnet.call(n,this,s,e)){i?this.dragStart(e,t,r):this.pointerdown(e,t,r);return}n.options.magnetThreshold<=0&&this.dragLinkStart(e,s,t,r),this.eventData(e,{action:rl.MAGNET})},drag:function(e,t,r){var n=this.paper,i=n.options.gridSize,s=this.model,o=this.eventData(e),{pointerOffset:a,restrictedArea:u,embedding:c}=o,f=cc(t+a.x,i),h=cc(r+a.y,i);s.position(f,h,{restrictedArea:u,deep:!0,ui:!0}),n.options.embeddingMode&&(c||(this.prepareEmbedding(o),c=!0),this.processEmbedding(o,e,t,r)),this.eventData(e,{embedding:c})},dragMagnet:function(e,t,r){this.dragLink(e,t,r)},dragEnd:function(e,t,r){var n=this.eventData(e);n.embedding&&this.finalizeEmbedding(n)},dragMagnetEnd:function(e,t,r){this.dragLinkEnd(e,t,r)},magnetpointerclick:function(e,t,r,n){var i=this.paper;i.eventData(e).mousemoved>i.options.clickThreshold||this.notify("element:magnet:pointerclick",e,t,r,n)}},{Flags:Dr});jt(_i.prototype,Xhe);const Qhe=function(e,t,r){return e},ede=function(e,t,r){var n=t.side||"bottom",i=hc(t.padding||40),s=r.sourceBBox,o=r.targetBBox,a=s.center(),u=o.center(),c,f,h;switch(n){case"bottom":h=1,c="y",f="height";break;case"top":h=-1,c="y",f="height";break;case"left":h=-1,c="x",f="width";break;case"right":h=1,c="x",f="width";break;default:throw new Error("Router: invalid side")}return a[c]+=h*(s[f]/2+i[n]),u[c]+=h*(o[f]/2+i[n]),h*(a[c]-u[c])>0?u[c]=a[c]:a[c]=u[c],[a].concat(e,u)};var tde={N:"S",S:"N",E:"W",W:"E"},rde={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function jp(e,t,r){var n=new pe(e.x,t.y);return r.containsPoint(n)&&(n=new pe(t.x,e.y)),n}function _E(e,t){return e[t==="W"||t==="E"?"width":"height"]}function Ki(e,t){return e.x===t.x?e.y>t.y?"N":"S":e.y===t.y?e.x>t.x?"W":"E":null}function cp(e){return new mt(e.x,e.y,0,0)}function Hp(e){var t=hc(e.padding||e.elementPadding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function cj(e,t){return e.sourceBBox.clone().moveAndExpand(Hp(t))}function lj(e,t){return e.targetBBox.clone().moveAndExpand(Hp(t))}function nde(e,t){if(e.sourceAnchor)return e.sourceAnchor;var r=cj(e,t);return r.center()}function ide(e,t){if(e.targetAnchor)return e.targetAnchor;var r=lj(e,t);return r.center()}function fj(e,t,r){var n=new pe(e.x,t.y),i=new pe(t.x,e.y),s=Ki(e,n),o=Ki(e,i),a=tde[r],u=s===r||s!==a&&(o===a||o!==r)?n:i;return{points:[u],direction:Ki(u,t)}}function wp(e,t,r){var n=jp(e,t,r);return{points:[n],direction:Ki(n,t)}}function sde(e,t,r,n){var i={},s=[new pe(e.x,t.y),new pe(t.x,e.y)],o=s.filter(function(h){return!r.containsPoint(h)}),a=o.filter(function(h){return Ki(h,e)!==n}),u;if(a.length>0)u=a.filter(function(h){return Ki(e,h)===n}).pop(),u=u||a[0],i.points=[u],i.direction=Ki(u,t);else{u=she(s,o)[0];var c=new pe(t).move(u,-_E(r,n)/2),f=jp(c,e,r);i.points=[f,c],i.direction=Ki(c,t)}return i}function ode(e,t,r,n){var i=wp(t,e,n),s=i.points[0];if(r.containsPoint(s)){i=wp(e,t,r);var o=i.points[0];if(n.containsPoint(o)){var a=new pe(e).move(o,-_E(r,Ki(e,o))/2),u=new pe(t).move(s,-_E(n,Ki(t,s))/2),c=new wt(a,u).midpoint(),f=wp(e,c,r),h=fj(c,t,f.direction);i.points=[f.points[0],h.points[0]],i.direction=h.direction}}return i}function LS(e,t,r,n,i){var s={},o=r.union(n).inflate(1),a=o.center().distance(t)>o.center().distance(e),u=a?t:e,c=a?e:t,f,h,g;return i?(f=pe.fromPolar(o.width+o.height,rde[i],u),f=o.pointNearestToPoint(f).move(f,-1)):f=o.pointNearestToPoint(u).move(u,1),h=jp(f,c,o),f.round().equals(h.round())?(h=pe.fromPolar(o.width+o.height,gs(f.theta(u))+Math.PI/2,c),h=o.pointNearestToPoint(h).move(c,1).round(),g=jp(f,h,o),s.points=a?[h,g,f]:[f,g,h]):s.points=a?[h,f]:[f,h],s.direction=Ki(a?f:h,t),s}function bE(e,t,r){var n=cj(r,t),i=lj(r,t),s=nde(r,t),o=ide(r,t);n=n.union(cp(s)),i=i.union(cp(o)),e=Fr(e).map(pe),e.unshift(s),e.push(o);for(var a,u=[],c=0,f=e.length-1;c<f;c++){var h=null,g=e[c],y=e[c+1],m=!!Ki(g,y);if(c===0)c+1===f?n.intersect(i.clone().inflate(1))?h=LS(g,y,n,i):m||(h=ode(g,y,n,i)):n.containsPoint(y)?h=LS(g,y,n,cp(y).moveAndExpand(Hp(t))):m||(h=wp(g,y,n));else if(c+1===f){var _=m&&Ki(y,g)===a;i.containsPoint(g)||_?h=LS(g,y,cp(g).moveAndExpand(Hp(t)),i,a):m||(h=sde(g,y,i,a))}else m||(h=fj(g,y,a));h?(Array.prototype.push.apply(u,h.points),a=h.direction):a=Ki(g,y),c+1<f&&u.push(y)}return u}var hj={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,t=this.cost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:-e,offsetY:0,cost:t},{offsetX:0,offsetY:e,cost:t},{offsetX:0,offsetY:-e,cost:t}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,t,r){if(!fn(bE))throw new Error("Manhattan requires the orthogonal router as default fallback.");return bE(e,jt({},hj,t),r)},fallbackRoute:function(e,t,r){return null},draggingRoute:null};function ZA(e){this.map={},this.options=e,this.mapGridSize=100}ZA.prototype.build=function(e,t){var r=this.options,n=Fr(r.excludeEnds).reduce(function(u,c){var f=t.get(c);if(f){var h=e.getCell(f.id);h&&u.push(h)}return u},[]),i=[],s=e.getCell(t.get("source").id);s&&(i=dE(i,s.getAncestors().map(function(u){return u.id})));var o=e.getCell(t.get("target").id);o&&(i=dE(i,o.getAncestors().map(function(u){return u.id})));var a=this.mapGridSize;return e.getElements().reduce(function(u,c){var f=Fr(r.excludeTypes).includes(c.get("type")),h=n.find(function(T){return T.id===c.id}),g=i.includes(c.id),y=f||h||g;if(!y)for(var m=c.getBBox().moveAndExpand(r.paddingBox),_=m.origin().snapToGrid(a),x=m.corner().snapToGrid(a),S=_.x;S<=x.x;S+=a)for(var E=_.y;E<=x.y;E+=a){var A=S+"@"+E;u[A]=u[A]||[],u[A].push(m)}return u},this.map),this};ZA.prototype.isPointAccessible=function(e){var t=e.clone().snapToGrid(this.mapGridSize).toString();return Fr(this.map[t]).every(function(r){return!r.containsPoint(e)})};function Mc(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}Mc.prototype.add=function(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=t;var r=XU(this.items,e,(function(n){return this.values[n]}).bind(this));this.items.splice(r,0,e)};Mc.prototype.remove=function(e){this.hash[e]=this.CLOSE};Mc.prototype.isOpen=function(e){return this.hash[e]===this.OPEN};Mc.prototype.isClose=function(e){return this.hash[e]===this.CLOSE};Mc.prototype.isEmpty=function(){return this.items.length===0};Mc.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};function dj(e,t){return t&&t.paddingBox?e.sourceBBox.clone().moveAndExpand(t.paddingBox):e.sourceBBox.clone()}function pj(e,t){return t&&t.paddingBox?e.targetBBox.clone().moveAndExpand(t.paddingBox):e.targetBBox.clone()}function vj(e,t){if(e.sourceAnchor)return e.sourceAnchor;var r=dj(e,t);return r.center()}function ade(e,t){if(e.targetAnchor)return e.targetAnchor;var r=pj(e,t);return r.center()}function NS(e,t,r,n,i){var s=360/r,o=e.theta(ude(e,t,n,i)),a=Oo(o+s/2);return s*Math.floor(a/s)}function ude(e,t,r,n){var i=n.step,s=t.x-e.x,o=t.y-e.y,a=s/r.x,u=o/r.y,c=a*i,f=u*i;return new pe(e.x+c,e.y+f)}function Mz(e,t){var r=Math.abs(e-t);return r>180?360-r:r}function cde(e,t,r){var n=r.step;Fr(r.directions).forEach(function(i){i.gridOffsetX=i.offsetX/n*t.x,i.gridOffsetY=i.offsetY/n*t.y})}function lde(e,t,r){return{source:t.clone(),x:kz(r.x-t.x,e),y:kz(r.y-t.y,e)}}function kz(e,t){if(!e)return t;var r=Math.abs(e),n=Math.round(r/t);if(!n)return r;var i=n*t,s=r-i,o=s/n;return t+o}function fde(e,t){var r=t.source,n=cc(e.x-r.x,t.x)+r.x,i=cc(e.y-r.y,t.y)+r.y;return new pe(n,i)}function $f(e,t){return e.round(t)}function xp(e,t,r){return $f(fde(e.clone(),t),r)}function Zf(e){return e.clone().toString()}function qS(e){return new pe(e.x===0?0:Math.abs(e.x)/e.x,e.y===0?0:Math.abs(e.y)/e.y)}function hde(e,t,r,n,i,s,o){for(var a=[],u=qS(i.difference(r)),c=Zf(r),f=e[c],h;f;){h=t[c];var g=qS(h.difference(f));g.equals(u)||(a.unshift(h),u=g),c=Zf(f),f=e[c]}var y=t[c],m=qS(y.difference(n));return m.equals(u)||a.unshift(y),a}function Lz(e,t){for(var r=1/0,n=0,i=t.length;n<i;n++){var s=e.manhattanDistance(t[n]);s<r&&(r=s)}return r}function Nz(e,t,r,n,i){var s=i.precision,o=i.directionMap,a=e.difference(t.center()),u=Wr(o)?Object.keys(o):[],c=Fr(r),f=u.reduce(function(h,g){if(c.includes(g)){for(var y=o[g],m=new pe(e.x+y.x*(Math.abs(a.x)+t.width),e.y+y.y*(Math.abs(a.y)+t.height)),_=new wt(e,m),x=_.intersect(t)||[],S=x.length,E,A=null,T=0;T<S;T++){var I=x[T],N=e.squaredDistance(I);(E===void 0||N>E)&&(E=N,A=I)}if(A){var p=xp(A,n,s);t.containsPoint(p)&&(p=xp(p.offset(y.x*n.x,y.y*n.y),n,s)),h.push(p)}}return h},[]);return t.containsPoint(e)||f.push(xp(e,n,s)),f}function dde(e,t,r,n){var i=n.precision,s,o;e instanceof mt?s=$f(vj(this,n).clone(),i):s=$f(e.clone(),i),t instanceof mt?o=$f(ade(this,n).clone(),i):o=$f(t.clone(),i);var a=lde(n.step,s,o),u,c,f,h;if(e instanceof mt?(u=s,f=Nz(u,e,n.startDirections,a,n)):(u=s,f=[u]),t instanceof mt?(c=o,h=Nz(o,t,n.endDirections,a,n)):(c=o,h=[c]),f=f.filter(Re=>!r(Re)),h=h.filter(Re=>!r(Re)),f.length>0&&h.length>0){for(var g=new Mc,y={},m={},_={},x=0,S=f.length;x<S;x++){var E=f[x],A=Zf(E);g.add(A,Lz(E,h)),y[A]=E,_[A]=0}var T=n.previousDirectionAngle,I=T===void 0,N,p,P=n.directions;cde(P,a,n);for(var O=P.length,q=Fr(h).reduce(function(Re,nt){var Ve=Zf(nt);return Re.push(Ve),Re},[]),V=n.maximumLoops;!g.isEmpty()&&V>0;){var W=g.pop(),G=y[W],J=m[W],se=_[W],K=J===void 0,U=G.equals(u),j;K?I?U?j=null:j=NS(u,G,O,a,n):j=T:j=NS(J,G,O,a,n);var Q=f.length===h.length;if(Q){for(var de=0;de<f.length;de++)if(!f[de].equals(h[de])){Q=!1;break}}var ce=K&&Q;if(!ce&&q.indexOf(W)>=0)return n.previousDirectionAngle=j,hde(m,y,G,u,c);for(x=0;x<O;x++){N=P[x];var Te=N.angle;if(p=Mz(j,Te),!(!(I&&U)&&p>n.maxAllowedDirectionChange)){var Se=xp(G.clone().offset(N.gridOffsetX,N.gridOffsetY),a,i),re=Zf(Se);if(!(g.isClose(re)||r(Se))){if(q.indexOf(re)>=0){var ae=Se.equals(c);if(!ae){var ne=NS(Se,c,O,a,n),te=Mz(Te,ne);if(te>n.maxAllowedDirectionChange)continue}}var le=N.cost,Xe=U?0:n.penalties[p],Ne=se+le+Xe;(!g.isOpen(re)||Ne<_[re])&&(y[re]=Se,m[re]=G,_[re]=Ne,g.add(re,Ne+Lz(Se,h)))}}}V--}}return n.fallbackRoute.call(this,u,c,n)}function pde(e){if(e.directions=Qn(e,"directions"),e.penalties=Qn(e,"penalties"),e.paddingBox=Qn(e,"paddingBox"),e.padding=Qn(e,"padding"),e.padding){var t=hc(e.padding);e.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}Fr(e.directions).forEach(function(r){var n=new pe(0,0),i=new pe(r.offsetX,r.offsetY);r.angle=Oo(n.theta(i))})}function vde(e,t,r){pde(t),r.options.perpendicular=!!t.perpendicular;var n=dj(r,t),i=pj(r,t),s=vj(r,t);let o;if(typeof t.isPointObstacle=="function")o=t.isPointObstacle;else{const A=new ZA(t);A.build(r.paper.model,r.model),o=T=>!A.isPointAccessible(T)}for(var a=Fr(e).map(pe),u=[],c=s,f,h,g=0,y=a.length;g<=y;g++){var m=null;if(h=f||n,f=a[g],!f){f=i;var _=!r.model.get("source").id||!r.model.get("target").id;if(_&&fn(t.draggingRoute)){var x=h===n?s:h,S=f.origin();m=t.draggingRoute.call(r,x,S,t)}}if(m=m||dde.call(r,h,f,o,t),m===null)return t.fallbackRouter(e,t,r);var E=m[0];E&&E.equals(c)&&m.shift(),c=m[m.length-1]||c,Array.prototype.push.apply(u,m)}return u}const wE=function(e,t,r){return vde(e,jt({},hj,t),r)};var gde={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,t=this.cost(),r=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:e,offsetY:e,cost:r},{offsetX:0,offsetY:e,cost:t},{offsetX:-e,offsetY:e,cost:r},{offsetX:-e,offsetY:0,cost:t},{offsetX:-e,offsetY:-e,cost:r},{offsetX:0,offsetY:-e,cost:t},{offsetX:e,offsetY:-e,cost:r}]},fallbackRoute:function(e,t,r){var n=e.theta(t),i=[],s={x:t.x,y:e.y},o={x:e.x,y:t.y};if(n%180>90){var a=s;s=o,o=a}var u=n%90<45?s:o,c=new wt(e,u),f=90*Math.ceil(n/90),h=pe.fromPolar(c.squaredLength(),gs(f+135),u),g=new wt(t,h),y=c.intersection(g),m=y||t,_=y?m:e,x=360/r.directions.length,S=_.theta(t),E=Oo(S+x/2),A=x*Math.floor(E/x);return r.previousDirectionAngle=A,m&&i.push(m.round()),i.push(t),i}};const mde=function(e,t,r){if(!fn(wE))throw new Error("Metro requires the manhattan router.");return wE(e,jt({},gde,t),r)},st={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},qz=[st.LEFT,st.RIGHT,st.TOP,st.BOTTOM],fl={[st.LEFT]:st.RIGHT,[st.RIGHT]:st.LEFT,[st.TOP]:st.BOTTOM,[st.BOTTOM]:st.TOP},yde=[st.TOP,st.BOTTOM],lp={0:st.RIGHT,180:st.LEFT,270:st.TOP,90:st.BOTTOM};function Uf(e){return e.angle()}function fp(e){return new pn(e).simplify({threshold:1}).points}function Wp(e,t){const{point:r,x0:n,y0:i,view:s,bbox:o,direction:a}=e,{point:u,x0:c,y0:f,view:h,bbox:g,direction:y}=t;let m;if(s)s.model.isLink()?m=Dz(u,r,s):a===st.ANCHOR_SIDE?m=o.sideNearestToPoint(r):a===st.MAGNET_SIDE?m=s.model.getBBox().sideNearestToPoint(r):m=a;else{const x=new mt(n,i,0,0);m=qz.includes(a)?a:x.sideNearestToPoint(u)}let _;if(h)h.model.isLink()?_=Dz(r,u,h):y===st.ANCHOR_SIDE?_=g.sideNearestToPoint(u):y===st.MAGNET_SIDE?_=h.model.getBBox().sideNearestToPoint(u):_=y;else{const x=new mt(c,f,0,0);_=qz.includes(y)?y:x.sideNearestToPoint(r)}return[m,_]}function _de(e,t,r){const{x0:n,y0:i,width:s,height:o,point:a,margin:u}=e,c=n+s,f=i+o,h=n-u,g=c+u,y=i-u,{x:m}=a,{x0:_,y0:x}=t;return _===m&&x<i?st.BOTTOM:_<m&&x<y?st.RIGHT:_>m&&x<y?st.LEFT:_<h&&x>=i||_>g&&x>=i?st.TOP:_>=h&&_<=m&&x>f||_<=g&&_>=m&&x>f?r.point.x<_?st.RIGHT:st.LEFT:st.TOP}function bde(e,t,r){const{x0:n,y0:i,width:s,height:o,point:a,margin:u}=e,c=n+s,f=i+o,h=n-u,g=c+u,y=f+u,{x:m}=a,{x0:_,y0:x}=t;return _===m&&x>f?st.TOP:_<m&&x>y?st.RIGHT:_>m&&x>y?st.LEFT:_<h&&x<=f||_>g&&x<=f?st.BOTTOM:_>=h&&_<=m&&x<i||_<=g&&_>=m&&x<i?r.point.x<_?st.RIGHT:st.LEFT:st.BOTTOM}function wde(e,t,r){const{y0:n,x0:i,width:s,height:o,point:a,margin:u}=e,c=i+s,f=n+o,h=i-u,g=n-u,y=f+u,{x:m,y:_}=a,{x0:x,y0:S}=t;return x<m&&S===_?st.RIGHT:x<=h&&S<_?st.BOTTOM:x<=h&&S>_?st.TOP:x>=i&&S<=g||x>=i&&S>=y?st.LEFT:x>c&&S>=g&&S<=_||x>c&&S<=y&&S>=_?r.point.y<S?st.BOTTOM:st.TOP:st.LEFT}function xde(e,t,r){const{y0:n,x0:i,width:s,height:o,point:a,margin:u}=e,c=i+s,f=n+o,h=c+u,g=n-u,y=f+u,{x:m,y:_}=a,{x0:x,y0:S}=t;return x>m&&S===_?st.LEFT:x>=h&&S<_?st.BOTTOM:x>=h&&S>_?st.TOP:x<=c&&S<=g||x<=c&&S>=y?st.RIGHT:x<i&&S>=g&&S<=_||x<i&&S<=y&&S>=_?r.point.y<S?st.BOTTOM:st.TOP:st.RIGHT}function Sde(e,t,r){const[n]=Wp(e,t);switch(n){case st.TOP:return _de(e,t,r);case st.RIGHT:return xde(e,t,r);case st.BOTTOM:return bde(e,t,r);case st.LEFT:return wde(e,t,r)}}function Dz(e,t,r){const n=r.getTangentAtLength(r.getClosestPointLength(t)),i=Math.round(Uf(n)/90)*90;if(i%180===0&&e.y===t.y)return e.x<t.x?st.LEFT:st.RIGHT;if(e.x===t.x)return e.y<t.y?st.TOP:st.BOTTOM;switch(i){case 0:case 180:case 360:return e.y<t.y?st.TOP:st.BOTTOM;case 90:case 270:return e.x<t.x?st.LEFT:st.RIGHT}}function Fz(e,t,r,n,i,s,o){n===st.AUTO&&(n=i?st.MAGNET_SIDE:st.ANCHOR_SIDE);const a=e&&e.model.isElement(),{x:u,y:c,width:f=0,height:h=0}=a?mt.fromRectUnion(r,e.model.getBBox()):s;return{point:t,x0:u,y0:c,view:e,bbox:r,width:f,height:h,direction:n,margin:a?o:0}}function DS({x:e,y:t}){const r=new pe(e,t);return{point:r,x0:r.x,y0:r.y,view:null,bbox:new mt(e,t,0,0),width:0,height:0,direction:null,margin:0}}function Bz(e,t,r){const n=t.point.clone(),{x0:i,y0:s,width:o,height:a}=t;switch(e){case"left":n.x=i-r;break;case"right":n.x=i+o+r;break;case"top":n.y=s-r;break;case"bottom":n.y=s+a+r;break}return n}function fu(e,t){const{point:r,x0:n,y0:i,view:s,width:o,height:a,margin:u}=e,{point:c,x0:f,y0:h,width:g,height:y,margin:m}=t,_=f+g,x=h+y,S=n+o,E=i+a,A=s&&s.model.isElement(),T=n-u,I=S+u,N=i-u,p=E+u,P=f-m,O=_+m,q=h-m,V=x+m,[W,G]=Wp(e,t),J=Bz(W,{point:r,x0:n,y0:i,width:o,height:a},u),se=Bz(G,{point:c,x0:f,y0:h,width:g,height:y},m),{x:K,y:U}=J,{x:j,y:Q}=se,de=(f+_)/2,ce=(h+x)/2,Te=(n+S)/2,Se=(i+E)/2,re=(Te<de?S+f:_+n)/2,ae=(Se<ce?E+h:x+i)/2;if(W==="left"&&G==="right"){if(T<=O){let te=ae;return S<=f&&(x>=N&&Q<U?te=Math.min(q,N):h<=p&&Q>=U&&(te=Math.max(V,p))),[{x:K,y:U},{x:K,y:te},{x:j,y:te},{x:j,y:Q}]}const ne=(K+j)/2;return[{x:ne,y:U},{x:ne,y:Q}]}else if(W==="right"&&G==="left"){if(I>=P){let te=ae;return K>_&&(x>=N&&Q<U?te=Math.min(q,N):h<=p&&Q>=U&&(te=Math.max(V,p))),[{x:K,y:U},{x:K,y:te},{x:j,y:te},{x:j,y:Q}]}const ne=(K+j)/2;return[{x:ne,y:U},{x:ne,y:Q}]}else if(W==="top"&&G==="bottom"){if(U<Q){let te=re,le=U;return U<h&&(_>=T&&j<K?te=Math.min(P,T):f<=I&&j>=K&&(te=Math.max(O,I))),[{x:K,y:le},{x:te,y:le},{x:te,y:Q},{x:j,y:Q}]}const ne=(U+Q)/2;return[{x:K,y:ne},{x:j,y:ne}]}else if(W==="bottom"&&G==="top"){if(U-u>Q){let te=re,le=U;return U>x&&(_>=T&&j<K?te=Math.min(P,T):f<=I&&j>=K&&(te=Math.max(O,I))),[{x:K,y:le},{x:te,y:le},{x:te,y:Q},{x:j,y:Q}]}const ne=(U+Q)/2;return[{x:K,y:ne},{x:j,y:ne}]}else if(W==="top"&&G==="top"){let ne,te=Math.min((E+h)/2,Q),le=Math.min((i+x)/2,U);if(Q<U){if(K>=O||K<=P)return[{x:K,y:Math.min(U,Q)},{x:j,y:Math.min(U,Q)}];j>K?ne=Math.min(K,P):ne=Math.max(K,O)}else{if(j>=I||j<=T)return[{x:K,y:Math.min(U,Q)},{x:j,y:Math.min(U,Q)}];j>=K?ne=Math.max(j,I):ne=Math.min(j,T)}return[{x:K,y:le},{x:ne,y:le},{x:ne,y:te},{x:j,y:te}]}else if(W==="bottom"&&G==="bottom"){let ne,te=Math.max((i+x)/2,Q),le=Math.max((E+h)/2,U);if(Q>U){if(K>=O||K<=P)return[{x:K,y:Math.max(U,Q)},{x:j,y:Math.max(U,Q)}];j>K?ne=Math.min(K,P):ne=Math.max(K,O)}else{if(j>=I||j<=T)return[{x:K,y:Math.max(U,Q)},{x:j,y:Math.max(U,Q)}];j>=K?ne=Math.max(j,I):ne=Math.min(j,T)}return[{x:K,y:le},{x:ne,y:le},{x:ne,y:te},{x:j,y:te}]}else if(W==="left"&&G==="left"){let ne,te=Math.min((S+f)/2,j),le=Math.min((n+_)/2,K);return j>K?Q<=U?ne=Math.min(N,Q):ne=Math.max(p,Q):Q>=U?ne=Math.min(q,U):ne=Math.max(V,U),[{x:le,y:U},{x:le,y:ne},{x:te,y:ne},{x:te,y:Q}]}else if(W==="right"&&G==="right"){let ne,te=Math.max((n+_)/2,j),le=Math.max((S+f)/2,K);return j<K?Q<=U?ne=Math.min(N,Q):ne=Math.max(p,Q):Q>=U?ne=Math.min(q,U):ne=Math.max(V,U),[{x:le,y:U},{x:le,y:ne},{x:te,y:ne},{x:te,y:Q}]}else if(W==="top"&&G==="right"){if(U>Q){if(K<j){let te=ae;return(te>ce||!A)&&te<V&&K<f&&(te=q),[{x:K,y:te},{x:j,y:te},{x:j,y:Q}]}return[{x:K,y:Q}]}const ne=Math.max(re,O);if(j<K&&Q>i&&Q<E)return[{x:K,y:U},{x:ne,y:U},{x:ne,y:Q}];if(ne>T&&Q>i||f>S){const te=Math.min(i-u,h-m),le=Math.max(S+u,_+m);return[{x:K,y:te},{x:le,y:te},{x:le,y:Q}]}return[{x:K,y:U},{x:Math.max(ne,j),y:U},{x:Math.max(ne,j),y:Q}]}else if(W==="top"&&G==="left"){if(U>Q){if(K>j){let te=ae;return(te>ce||!A)&&te<V&&K>_&&(te=q),[{x:K,y:te},{x:j,y:te},{x:j,y:Q}]}return[{x:K,y:Q}]}const ne=Math.min(P,re);if(K<j&&E>=Q)return[{x:K,y:U},{x:ne,y:U},{x:ne,y:Q}];if(ne<I&&U<x){const te=Math.min(N,q),le=Math.min(T,P);return[{x:K,y:te},{x:le,y:te},{x:le,y:Q}]}return[{x:K,y:U},{x:ne,y:U},{x:ne,y:Q}]}else if(W==="bottom"&&G==="right"){if(U<Q){if(K<j){let te=ae;return(te<ce||!A)&&te>q&&K<f&&(te=V),[{x:K,y:te},{x:j,y:te},{x:j,y:Q}]}return[{x:K,y:Q}]}else if(n<j){const te=Math.max(p,V),le=Math.max(I,O);return[{x:K,y:te},{x:le,y:te},{x:le,y:Q}]}const ne=re;return[{x:K,y:U},{x:ne,y:U},{x:ne,y:Q}]}else if(W==="bottom"&&G==="left"){if(U<Q){if(K>j){let te=ae;return(te<ce||!A)&&te>q&&K>_&&(te=V),[{x:K,y:te},{x:j,y:te},{x:j,y:Q}]}return[{x:K,y:Q}]}else if(S>j){const te=Math.max(p,V),le=Math.min(T,P);return[{x:K,y:te},{x:le,y:te},{x:le,y:Q}]}const ne=re;return[{x:K,y:U},{x:ne,y:U},{x:ne,y:Q}]}else if(W==="left"&&G==="bottom"){if(K>=j&&U>=V)return[{x:j,y:U}];if(K>=_&&U<Q){const le=re;return[{x:le,y:U},{x:le,y:Q},{x:j,y:Q}]}if(j<S&&x<=i){const le=ae;return[{x:K,y:U},{x:K,y:le},{x:j,y:le}]}const ne=Math.min(P,K),te=Math.max(p,V);return[{x:ne,y:U},{x:ne,y:te},{x:j,y:te}]}else if(W==="left"&&G==="top"){if(K>j&&U<q)return[{x:j,y:U}];if(K>=_&&U>Q){const le=re;return[{x:le,y:U},{x:le,y:Q},{x:j,y:Q}]}if(j<=S&&Q>U){const le=ae;return[{x:K,y:U},{x:K,y:le},{x:j,y:le}]}const ne=Q<U?Math.min(T,P):T,te=Math.min(N,q);return[{x:ne,y:U},{x:ne,y:te},{x:j,y:te}]}else if(W==="right"&&G==="top"){if(K<=j&&U<q)return[{x:j,y:U}];if(S<f&&U>Q){let le=re;return[{x:le,y:U},{x:le,y:Q},{x:j,y:Q}]}if(j<K&&h>E){const le=ae;return[{x:K,y:U},{x:K,y:le},{x:j,y:le}]}const ne=Math.max(I,O),te=Math.min(N,q);return[{x:ne,y:U},{x:ne,y:te},{x:j,y:te}]}else if(W==="right"&&G==="bottom"){if(K<=j&&U>=V)return[{x:j,y:U}];if(K<=P&&U<Q){const le=re;return[{x:le,y:U},{x:le,y:Q},{x:j,y:Q}]}if(j>n&&x<i){const le=ae;return[{x:K,y:U},{x:K,y:le},{x:j,y:le}]}const ne=Math.max(O,K),te=Math.max(p,V);return[{x:ne,y:U},{x:ne,y:te},{x:j,y:te}]}}function gj(e,t,r){const{sourceDirection:n=st.AUTO,targetDirection:i=st.AUTO}=t,s=t.margin||20,o=t.useVertices||!1,a=!!r.model.source().port,u=Fz(r.sourceView,r.sourceAnchor,r.sourceBBox,n,a,r.sourceAnchor,s),c=!!r.model.target().port,f=Fz(r.targetView,r.targetAnchor,r.targetBBox,i,c,r.targetAnchor,s);let h=[];if(!o||e.length===0)return fp(fu(u,f));const g=e.map(_=>DS(_)),[y]=g;if(u.view&&u.view.model.isElement()&&u.view.model.getBBox().inflate(s).containsPoint(y.point)){const[_]=Wp(u,y),x=_,S=DS(u.point);S.margin=s,S.direction=_,y.direction=x,h.push(...fu(S,y),y.point)}else{const _=g[1]||f,x=Sde(u,y,_);y.direction=x,h.push(...fu(u,y),y.point)}for(let _=0;_<g.length-1;_++){const x=g[_],S=g[_+1],E=new wt(x.point,S.point),A=Uf(E);if(A%90===0){const N=lp[A],p=fl[N];if(N!==x.direction)h.push(x.point,S.point),S.direction=p;else{const P=Oo(A-90);let O=0,q=0;P===90?q=-s:P===180?O=-s:P===270?q=s:P===0&&(O=s);const V={x:x.point.x+O,y:x.point.y+q},W={x:S.point.x+O,y:S.point.y+q},G=new wt(S.point,W);S.direction=lp[Uf(G)],h.push(x.point,V,W,S.point)}continue}const[T,I]=FS(x,S);x.direction=T,S.direction=I,h.push(...fu(x,S),S.point)}const m=g[g.length-1];if(f.view&&f.view.model.isElement())if(f.view.model.getBBox().inflate(s).containsPoint(m.point)){const[_]=FS(m,f),x=DS(f.point),[,S]=Wp(m,f);x.margin=s,x.direction=S,m.direction=_,h.push(...fu(m,x))}else{const _=fp(h),x=new wt(_[_.length-2],m.point),S=lp[Math.round(Uf(x))];m.direction=S;let E=fu(m,f);const[A,T]=fp([...E,f.point]),I=new wt(A,T),N=Math.round(Uf(I)),p=lp[N];p!==S&&S===fl[p]&&(m.margin=s,E=fu(m,f)),h.push(...E)}else{const[_]=FS(m,f);m.direction=_,h.push(...fu(m,f))}return fp(h)}function FS(e,t){const r=e.direction,n=yde.includes(r);let i=e.direction,s=t.direction;if(n){const o=e.point.y>t.point.y,a=t.point.x-e.point.x;r===st.BOTTOM?(i=o?fl[r]:a>=0?st.RIGHT:st.LEFT,a>0?s=o?st.LEFT:st.TOP:a<0&&(s=o?st.RIGHT:st.TOP)):(i=o?a>=0?st.RIGHT:st.LEFT:fl[r],a>0?s=o?st.BOTTOM:st.LEFT:a<0&&(s=o?st.BOTTOM:st.RIGHT))}else{const o=e.point.x>t.point.x,a=t.point.y-e.point.y;r===st.RIGHT?(i=o?fl[r]:a>=0?st.BOTTOM:st.TOP,a>0?s=o?st.TOP:st.LEFT:a<0&&(s=o?st.BOTTOM:st.LEFT)):(i=o?a>=0?st.BOTTOM:st.TOP:fl[r],a>0?s=o?st.RIGHT:st.TOP:a<0&&(s=o?st.RIGHT:st.BOTTOM))}return[i,s]}gj.Directions=st;const Ede=gj,Ade=Object.freeze(Object.defineProperty({__proto__:null,manhattan:wE,metro:mde,normal:Qhe,oneSide:ede,orthogonal:bE,rightAngle:Ede},Symbol.toStringTag,{value:"Module"})),sl={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},Tde=Object.values(sl),Pde=10,Cde=1,JA=function(e,t,r=[],n={}){const{cornerType:i=sl.POINT,cornerRadius:s=Pde,cornerPreserveAspectRatio:o=!1,precision:a=Cde,raw:u=!1}=n;if(Tde.indexOf(i)===-1)throw new Error("Invalid `cornerType` provided to `straight` connector.");let c;if(i===sl.POINT||!s){const f=[e].concat(r).concat([t]),h=new pn(f);c=new Nt(h)}else{c=new Nt,c.appendSegment(Nt.createSegment("M",e));let f;const h=r.length;for(let g=0;g<h;g++){const y=new pe(r[g]),m=r[g-1]||e,_=r[g+1]||t,x=f||y.distance(m)/2;f=y.distance(_)/2;let S,E;o?S=E=-Math.min(s,x,f):(S=-Math.min(s,x),E=-Math.min(s,f));const A=y.clone().move(m,S).round(a),T=y.clone().move(_,E).round(a);switch(c.appendSegment(Nt.createSegment("L",A)),i){case sl.CUBIC:{const I=.3333333333333333,N=2/3,p=new pe(I*A.x+N*y.x,N*y.y+I*A.y),P=new pe(I*T.x+N*y.x,N*y.y+I*T.y);c.appendSegment(Nt.createSegment("C",p,P,T));break}case sl.LINE:{c.appendSegment(Nt.createSegment("L",T));break}case sl.GAP:{c.appendSegment(Nt.createSegment("M",T));break}}}c.appendSegment(Nt.createSegment("L",t))}return u?c:c.serialize()};var Rde=5,zz=["arc","gap","cubic"],Ide=0,Vz=1,Ode=["smooth"],hp=1/3,dp=2/3;function Gz(e,t){let{x:r,y:n}=e,{x:i,y:s}=t;if(r>i){let o=r;r=i,i=o,o=n,n=s,s=o}if(n>s){let o=r;r=i,i=o,o=n,n=s,s=o}return[new pe(r,n),new pe(i,s)]}function Mde(e,t){const[{x:r,y:n},{x:i,y:s}]=Gz(e.start,e.end),[{x:o,y:a},{x:u,y:c}]=Gz(t.start,t.end),f=r<=u&&o<=i,h=n<=c&&a<=s;return f&&h}function BS(e,t,r){var n=[].concat(e,r,t);return n.reduce(function(i,s,o){var a=n[o+1];return a!=null&&(i[o]=sc(s,a)),i},[])}function kde(e){var t=e.paper,r=t._jumpOverUpdateList;if(r==null){r=t._jumpOverUpdateList=[];var n=t.model;n.on("batch:stop",function(){this.hasActiveBatch()||Lde(t)}),n.on("reset",function(){r=t._jumpOverUpdateList=[]})}r.indexOf(e)<0&&(r.push(e),e.listenToOnce(e.model,"change:connector remove",function(){r.splice(r.indexOf(e),1)}))}function Lde(e){for(var t=e._jumpOverUpdateList,r=0;r<t.length;r++){const n=t[r],i=n.getFlag(n.constructor.Flags.CONNECTOR);n.requestUpdate(i)}}function Nde(e,t){return Fr(t).reduce(function(r,n){var i=e.intersection(n);return i&&r.push(i),r},[])}function $z(e,t){return sc(e,t).squaredLength()}function qde(e,t,r){return t.reduce(function(n,i,s){if(i.skip===!0)return n;var o=n.pop()||e,a=Dp(i).move(o.start,-r),u=Dp(i).move(o.start,+r),c=t[s+1];if(c!=null){var f=u.distance(c);f<=r&&(u=c.move(o.start,f),c.skip=!0)}else{var h=a.distance(o.end);if(h<r*2+Vz)return n.push(o),n}var g=u.distance(o.start);if(g<r*2+Vz)return n.push(o),n;var y=sc(a,u);return y.isJump=!0,n.push(sc(o.start,a),y,sc(u,o.end)),n},[])}function Uz(e,t,r,n){var i=new Nt,s;return s=Nt.createSegment("M",e[0].start),i.appendSegment(s),Fr(e).forEach(function(o,a){if(o.isJump){var u,c,f,h;if(r==="arc"){u=-90,c=o.start.difference(o.end);var g=+(c.x<0||c.x===0&&c.y<0);g&&(u+=180);var y=o.midpoint(),m=new wt(y,o.end).rotate(y,u),_;_=new wt(o.start,y),f=_.pointAt(2/3).rotate(o.start,u),h=m.pointAt(1/3).rotate(m.end,-u),s=Nt.createSegment("C",f,h,m.end),i.appendSegment(s),_=new wt(y,o.end),f=m.pointAt(1/3).rotate(m.end,u),h=_.pointAt(1/3).rotate(o.end,-u),s=Nt.createSegment("C",f,h,o.end),i.appendSegment(s)}else if(r==="gap")s=Nt.createSegment("M",o.end),i.appendSegment(s);else if(r==="cubic"){u=o.start.theta(o.end);var x=t*.6,S=t*1.35;c=o.start.difference(o.end),g=+(c.x<0||c.x===0&&c.y<0),g&&(S*=-1),f=pe(o.start.x+x,o.start.y+S).rotate(o.start,u),h=pe(o.end.x-x,o.end.y+S).rotate(o.end,u),s=Nt.createSegment("C",f,h,o.end),i.appendSegment(s)}}else{var E=e[a+1];n==0||!E||E.isJump?(s=Nt.createSegment("L",o.end),i.appendSegment(s)):Dde(n,i,o.end,o.start,E.end)}}),i}function Dde(e,t,r,n,i){var s=r.distance(n)/2,o=r.distance(i)/2,a=-Math.min(e,s),u=-Math.min(e,o),c=r.clone().move(n,a).round(),f=r.clone().move(i,u).round(),h=new pe(hp*c.x+dp*r.x,dp*r.y+hp*c.y),g=new pe(hp*f.x+dp*r.x,dp*r.y+hp*f.y),y;y=Nt.createSegment("L",c),t.appendSegment(y),y=Nt.createSegment("C",h,g,f),t.appendSegment(y)}const Fde=function(e,t,r,n){kde(this);var i=n.raw,s=n.size||Rde,o=n.jump&&(""+n.jump).toLowerCase(),a=n.radius||Ide,u=n.ignoreConnectors||Ode;zz.indexOf(o)===-1&&(o=zz[0]);var c=this.paper,f=c.model,h=f.getLinks();if(h.length===1)return Uz(BS(e,t,r),s,o,a);var g=this.model,y=h.indexOf(g),m=c.options.defaultConnector||{},_=h.filter(function(I,N){var p=I.get("connector")||m;return Fr(u).includes(p.name)?!1:N>y?p.name!=="jumpover":!0}),x=_.map(function(I){return c.findViewByModel(I)}),S=BS(e,t,r),E=x.map(function(I){return I==null?[]:I===this?S:BS(I.sourcePoint,I.targetPoint,I.route)},this),A=S.reduce(function(I,N){var p=_.reduce(function(P,O,q){if(O!==g){const V=E[q].slice(),W=V.findIndex(J=>Mde(N,J));W>-1&&N.containsPoint(V[W].end)&&V.splice(W+1,1);const G=Nde(N,V);P.push.apply(P,G)}return P},[]).sort(function(P,O){return $z(N.start,P)-$z(N.start,O)});return p.length>0?I.push.apply(I,qde(N,p,s)):I.push(N),I},[]),T=Uz(A,s,o,a);return i?T:T.serialize()},Bde=function(e,t,r=[],n={}){const{raw:i}=n;return JA(e,t,r,{cornerType:"point",raw:i})},zde=10,Vde=0,Gde=function(e,t,r=[],n={}){const{radius:i=zde,raw:s}=n;return JA(e,t,r,{cornerType:"cubic",cornerRadius:i,precision:Vde,raw:s})},$de=function(e,t,r,n){var i=n&&n.raw,s;if(r&&r.length!==0){var o=[e].concat(r).concat([t]),a=Zr.throughPoints(o);s=new Nt(a)}else{s=new Nt;var u;if(u=Nt.createSegment("M",e),s.appendSegment(u),Math.abs(e.x-t.x)>=Math.abs(e.y-t.y)){var c=(e.x+t.x)/2;u=Nt.createSegment("C",c,e.y,c,t.y,t.x,t.y),s.appendSegment(u)}else{var f=(e.y+t.y)/2;u=Nt.createSegment("C",e.x,f,t.x,f,t.x,t.y),s.appendSegment(u)}}return i?s:s.serialize()},to={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Xi={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},QA=function(e,t,r=[],n={},i){const s=!!n.raw,{direction:o=to.AUTO,precision:a=3}=n,u={coeff:n.distanceCoefficient||.6,angleTangentCoefficient:n.angleTangentCoefficient||80,tau:n.tension||.5,sourceTangent:n.sourceTangent?new pe(n.sourceTangent):null,targetTangent:n.targetTangent?new pe(n.targetTangent):null,rotate:!!n.rotate};typeof n.sourceDirection=="string"?u.sourceDirection=n.sourceDirection:typeof n.sourceDirection=="number"?u.sourceDirection=new pe(1,0).rotate(null,n.sourceDirection):u.sourceDirection=n.sourceDirection?new pe(n.sourceDirection).normalize():null,typeof n.targetDirection=="string"?u.targetDirection=n.targetDirection:typeof n.targetDirection=="number"?u.targetDirection=new pe(1,0).rotate(null,n.targetDirection):u.targetDirection=n.targetDirection?new pe(n.targetDirection).normalize():null;const c=[e,...r,t].map(_=>new pe(_));let f;if(u.sourceTangent)f=u.sourceTangent;else{const _=Xde(i,c,o,u),x=c[0].distance(c[1])*u.coeff,S=c[1].difference(c[0]).normalize(),E=xE(_,S);if(E>Math.PI/4){const A=x+(E-Math.PI/4)*u.angleTangentCoefficient;f=_.clone().scale(A,A)}else f=_.clone().scale(x,x)}let h;if(u.targetTangent)h=u.targetTangent;else{const _=Yde(i,c,o,u),x=c.length-1,S=c[x-1].distance(c[x])*u.coeff,E=c[x-1].difference(c[x]).normalize(),A=xE(_,E);if(A>Math.PI/4){const T=S+(A-Math.PI/4)*u.angleTangentCoefficient;h=_.clone().scale(T,T)}else h=_.clone().scale(S,S)}const y=Zde(c,f,h,u).map(_=>Jde(_,u)),m=new Nt(y).round(a);return s?m:m.serialize()};QA.Directions=to;QA.TangentDirections=Xi;function Ude(e,t,r){const{sourceBBox:n}=e;let i,s;if(!e.sourceView)n.x>t[1].x?i="right":i="left";else if(s=e.sourceView.model.angle(),r.rotate&&s){const a=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),u=t[0].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[0]);let o;switch(i){case"left":o=new pe(-1,0);break;case"right":default:o=new pe(1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function jde(e,t,r){const{targetBBox:n}=e;let i,s;if(!e.targetView)n.x>t[t.length-2].x?i="left":i="right";else if(s=e.targetView.model.angle(),r.rotate&&s){const a=e.targetView.getNodeUnrotatedBBox(e.targetView.el),u=t[t.length-1].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[t.length-1]);let o;switch(i){case"left":o=new pe(-1,0);break;case"right":default:o=new pe(1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function Hde(e,t,r){const{sourceBBox:n}=e;let i,s;if(!e.sourceView)n.y>t[1].y?i="bottom":i="top";else if(s=e.sourceView.model.angle(),r.rotate&&s){const a=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),u=t[0].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[0]);let o;switch(i){case"top":o=new pe(0,-1);break;case"bottom":default:o=new pe(0,1);break}return r.rotate&&s&&o.rotate(null,-s),o}function Wde(e,t,r){const{targetBBox:n}=e;let i,s;if(!e.targetView)n.y>t[t.length-2].y?i="top":i="bottom";else if(s=e.targetView.model.angle(),r.rotate&&s){const a=e.targetView.getNodeUnrotatedBBox(e.targetView.el),u=t[t.length-1].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[t.length-1]);let o;switch(i){case"top":o=new pe(0,-1);break;case"bottom":default:o=new pe(0,1);break}return r.rotate&&s&&o.rotate(null,-s),o}function jz(e,t,r){const{sourceBBox:n}=e;let i,s;if(!e.sourceView)i=n.sideNearestToPoint(t[1]);else if(s=e.sourceView.model.angle(),r.rotate&&s){const a=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),u=t[0].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[0]);let o;switch(i){case"top":o=new pe(0,-1);break;case"bottom":o=new pe(0,1);break;case"right":o=new pe(1,0);break;case"left":o=new pe(-1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function Hz(e,t,r){const{targetBBox:n}=e;let i,s;if(!e.targetView)i=n.sideNearestToPoint(t[t.length-2]);else if(s=e.targetView.model.angle(),r.rotate&&s){const a=e.targetView.getNodeUnrotatedBBox(e.targetView.el),u=t[t.length-1].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[t.length-1]);let o;switch(i){case"top":o=new pe(0,-1);break;case"bottom":o=new pe(0,1);break;case"right":o=new pe(1,0);break;case"left":o=new pe(-1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function Wz(e,t,r){return t[1].difference(t[0]).normalize()}function Xz(e,t,r){const n=t.length-1;return t[n-1].difference(t[n]).normalize()}function Yz(e,t,r){const{sourceBBox:n}=e,i=n.center();return t[0].difference(i).normalize()}function Kz(e,t,r){const{targetBBox:n}=e,i=n.center();return t[t.length-1].difference(i).normalize()}function Xde(e,t,r,n){if(n.sourceDirection)switch(n.sourceDirection){case Xi.UP:return new pe(0,-1);case Xi.DOWN:return new pe(0,1);case Xi.LEFT:return new pe(-1,0);case Xi.RIGHT:return new pe(1,0);case Xi.AUTO:return jz(e,t,n);case Xi.CLOSEST_POINT:return Wz(e,t);case Xi.OUTWARDS:return Yz(e,t);default:return n.sourceDirection}switch(r){case to.HORIZONTAL:return Ude(e,t,n);case to.VERTICAL:return Hde(e,t,n);case to.CLOSEST_POINT:return Wz(e,t);case to.OUTWARDS:return Yz(e,t);case to.AUTO:default:return jz(e,t,n)}}function Yde(e,t,r,n){if(n.targetDirection)switch(n.targetDirection){case Xi.UP:return new pe(0,-1);case Xi.DOWN:return new pe(0,1);case Xi.LEFT:return new pe(-1,0);case Xi.RIGHT:return new pe(1,0);case Xi.AUTO:return Hz(e,t,n);case Xi.CLOSEST_POINT:return Xz(e,t);case Xi.OUTWARDS:return Kz(e,t);default:return n.targetDirection}switch(r){case to.HORIZONTAL:return jde(e,t,n);case to.VERTICAL:return Wde(e,t,n);case to.CLOSEST_POINT:return Xz(e,t);case to.OUTWARDS:return Kz(e,t);case to.AUTO:default:return Hz(e,t,n)}}function Kde(e,t){const r=Math.cos(t),n=Math.sin(t),i=r*e.x-n*e.y,s=n*e.x+r*e.y;e.x=i,e.y=s}function xE(e,t){let r=e.dot(t)/(e.magnitude()*t.magnitude());return r<-1&&(r=-1),r>1&&(r=1),Math.acos(r)}function Zz(e,t){return e.x*t.y-e.y*t.x}function Zde(e,t,r,n){const{tau:i,coeff:s}=n,o=[],a=[],u=[],c=e.length-1;for(let f=0;f<c;f++)o[f]=e[f].distance(e[f+1]);a[0]=t,a[c]=r;for(let f=1;f<c;f++){let h,g;f===1?h=e[f-1].clone().offset(a[f-1].x,a[f-1].y):h=e[f-1].clone(),f===c-1?g=e[f+1].clone().offset(a[f+1].x,a[f+1].y):g=e[f+1].clone();const y=h.difference(e[f]).normalize(),m=g.difference(e[f]).normalize(),_=xE(y,m);let x=(Math.PI-_)/2,S;const E=Zz(y,m);let A;A=Zz(e[f].difference(e[f+1]),e[f].difference(e[f-1])),E<0&&(x=-x),_<Math.PI/2&&(x<0&&A<0||x>0&&A>0)&&(x=x-Math.PI),S=m.clone(),Kde(S,x);const T=S.clone(),I=S.clone(),N=o[f-1]*s,p=o[f]*s;T.scale(N,N),I.scale(p,p),a[f]=[T,I]}for(let f=0;f<c;f++){let h,g;f===0?h=e[f+1].difference(a[f].x/i,a[f].y/i):h=e[f+1].difference(a[f][1].x/i,a[f][1].y/i),f===c-1?g=e[f].clone().offset(a[f+1].x/i,a[f+1].y/i):g=e[f].difference(a[f+1][0].x/i,a[f+1][0].y/i),u[f]=[h,e[f],e[f+1],g]}return u}function Jde(e,t){const{tau:r}=t,n=new pe;n.x=e[1].x+(e[2].x-e[0].x)/(6*r),n.y=e[1].y+(e[2].y-e[0].y)/(6*r);const i=new pe;return i.x=e[2].x+(e[3].x-e[1].x)/(6*r),i.y=e[2].y+(e[3].y-e[1].y)/(6*r),new Zr(e[1],n,i,e[2])}const Qde=Object.freeze(Object.defineProperty({__proto__:null,curve:QA,jumpover:Fde,normal:Bde,rounded:Gde,smooth:$de,straight:JA},Symbol.toStringTag,{value:"Module"})),tr={TOOLS:wr.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Hi=wr.extend({className:function(){var e=wr.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){wr.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[tr.RENDER],attrs:[tr.UPDATE],router:[tr.UPDATE],connector:[tr.CONNECTOR],smooth:[tr.UPDATE],manhattan:[tr.UPDATE],toolMarkup:[tr.LEGACY_TOOLS],labels:[tr.LABELS],labelMarkup:[tr.LABELS],vertices:[tr.VERTICES,tr.UPDATE],vertexMarkup:[tr.VERTICES],source:[tr.SOURCE,tr.UPDATE],target:[tr.TARGET,tr.UPDATE]},initFlag:[tr.RENDER,tr.SOURCE,tr.TARGET,tr.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(e,t){if(t||(t={}),this.hasFlag(e,tr.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,tr.SOURCE)}if(this.hasFlag(e,tr.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,tr.TARGET)}const{paper:r,sourceView:n,targetView:i}=this;if(r&&(n&&!r.isViewMounted(n)||i&&!r.isViewMounted(i)))return e;if(this.hasFlag(e,tr.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(t),e=this.removeFlag(e,[tr.RENDER,tr.UPDATE,tr.VERTICES,tr.LABELS,tr.TOOLS,tr.LEGACY_TOOLS,tr.CONNECTOR]),e;let s=!1;this.hasFlag(e,tr.VERTICES)&&(this.renderVertexMarkers(),e=this.removeFlag(e,tr.VERTICES));const{model:o}=this,{attributes:a}=o;let u=this.hasFlag(e,tr.LABELS),c=this.hasFlag(e,tr.LEGACY_TOOLS);u&&(this.onLabelsChange(o,a.labels,t),e=this.removeFlag(e,tr.LABELS),s=!0),c&&(this.renderTools(),e=this.removeFlag(e,tr.LEGACY_TOOLS));const f=this.hasFlag(e,tr.UPDATE),h=this.hasFlag(e,tr.CONNECTOR);return(f||h)&&(f?t.translateBy&&o.isRelationshipEmbeddedIn(t.translateBy)?this.translate(t.tx,t.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(t),e=this.removeFlag(e,[tr.UPDATE,tr.TOOLS,tr.CONNECTOR]),u=!1,c=!1,s=!0),u&&this.updateLabelPositions(),c&&this.updateToolsPosition(),s&&this.updateHighlighters(),this.hasFlag(e,tr.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,tr.TOOLS)),e},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(tr.UPDATE),e)},isLabelsRenderRequired:function(e={}){const t=this.model.previous("labels");if(!t)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var r=e.propertyPathArray||[],n=r.length;if(n>1){var i=!!t[r[1]];if(i){if(n===2)return"markup"in Object(e.propertyValue);if(r[2]!=="markup")return!1}}}return!0},onLabelsChange:function(e,t,r){this.isLabelsRenderRequired(r)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.LinkView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if(typeof t=="string")return this.renderStringMarkup(t);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el);this.selectors=t.selectors,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=$e(e);Array.isArray(t)||(t=[t]);for(var r=this._V,n=0,i=t.length;n<i;n++){var s=t[n],o=s.attr("class");o&&(o=lhe(o),r[It.camelCase(o)]=s)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(t)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if(typeof e=="string")return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var t=$e(e),r=document.createDocumentFragment();if(!Array.isArray(t))r.appendChild(t.node);else for(var n=0,i=t.length;n<i;n++){var s=t[n].node;r.appendChild(s)}return{fragment:r,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var t=e.fragment;if(!(e.fragment instanceof DocumentFragment)||!e.fragment.hasChildNodes())throw new Error("dia.LinkView: invalid label markup.");var r,n=t.childNodes;return n.length>1||n[0].nodeName.toUpperCase()!=="G"?r=$e("g").append(t):r=$e(n[0]),r.addClass("label"),{node:r.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,t=e.labels,r=this._labelCache={},n=this._labelSelectors={},i=this.model,s=i.attributes.labels||[],o=s.length;if(o===0)return t&&t.remove(),this;t?t.empty():(t=e.labels=$e("g").addClass("labels"),this.options.labelsLayer&&(t.addClass(So(Qn(this,"className"))),t.attr("model-id",i.id)));for(var a=0;a<o;a++){var u=s[a],c=this._normalizeLabelMarkup(this._getLabelMarkup(u.markup)),f,h;if(c)f=c.node,h=c.selectors;else{var g=i._builtins.defaultLabel,y=this._normalizeLabelMarkup(this._getLabelMarkup(g.markup)),m=i._getDefaultLabel(),_=this._normalizeLabelMarkup(this._getLabelMarkup(m.markup)),x=_||y;f=x.node,h=x.selectors}f.setAttribute("label-idx",a),t.append(f),r[a]=f;var S=this.selector;if(h[S])throw new Error("dia.LinkView: ambiguous label root selector.");h[S]=f,n[a]=h}return t.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:e,paper:t,model:r,_V:n,options:i}=this,{labels:s}=n;if(!s||!r.hasLabels())return;const{node:o}=s;i.labelsLayer?t.getLayerView(i.labelsLayer).insertSortedNode(o,r.get("z")):o.parentNode!==e&&e.appendChild(o)},unmountLabels:function(){const{options:e,_V:t}=this;if(!t)return;const{labels:r}=t;r&&e.labelsLayer&&r.remove()},findLabelNode:function(e,t){const r=this._labelCache[e];if(!r)return null;const n=this._labelSelectors[e],[i=null]=this.findBySelector(t,r,n);return i},_mergeLabelAttrs:function(e,t,r,n){return t===null?null:t===void 0?r===null?null:r===void 0?e?void 0:n:e?r:ni({},n,r):e?ni({},r,t):ni({},n,r,t)},_mergeLabelSize:function(e,t){return e===null?null:e===void 0?t===null?null:t===void 0?void 0:t:ni({},t,e)},updateLabels:function(){if(!this._V.labels)return this;for(var e=this.model,t=e.get("labels")||[],r=this.can("labelMove"),n=e._builtins.defaultLabel,i=n.attrs,s=e._getDefaultLabel(),o=s.markup,a=s.attrs,u=s.size,c=0,f=t.length;c<f;c++){var h=this._labelCache[c];h.setAttribute("cursor",r?"move":"default");var g=this._labelSelectors[c],y=t[c],m=y.markup,_=y.attrs,x=y.size,S=this._mergeLabelAttrs(m||o,_,a,i),E=this._mergeLabelSize(x,u);this.updateDOMSubtreeAttributes(h,S,{rootBBox:new mt(E),selectors:g})}return this},renderTools:function(){if(!this._V.linkTools)return this;var e=It(this._V.linkTools.node).empty(),t=ji(this.model.get("toolMarkup")||this.model.toolMarkup),r=$e(t());if(e.append(r.node),this._toolCache=r,this.options.doubleLinkTools){var n;this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(t=ji(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),n=$e(t())):n=r.clone(),e.append(n.node),this._tool2Cache=n}return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var e=It(this._V.markerVertices.node).empty(),t=ji(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(r,n){e.append($e(t(jt({idx:n},r))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var e=It(this._V.markerArrowheads.node);e.empty();var t=ji(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=$e(t({end:"source"})),this._V.targetArrowhead=$e(t({end:"target"})),e.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(e){const r=this.model,n=r.vertices(),i=[this.sourceAnchor,...n,this.targetAnchor],s=i.length,o=new pn(i);o.simplify({threshold:.001});const a=o.points.map(c=>c.toJSON()),u=a.length;return s===u?0:(r.vertices(a.slice(1,u-1),e),s-u)},updateDefaultConnectionPath:function(){var e=this._V;e.connection&&e.connection.attr("d",this.getSerializedConnection()),e.connectionWrap&&e.connectionWrap.attr("d",this.getSerializedConnection()),e.markerSource&&e.markerTarget&&this._translateAndAutoOrientArrows(e.markerSource,e.markerTarget)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new pe(this.sourceAnchor);case"target":return new pe(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new pe(this.sourcePoint);case"target":return new pe(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var t=this.sourceView;if(!t)break;return this.sourceMagnet||t.el;case"target":var r=this.targetView;if(!r)break;return this.targetMagnet||r.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,t=0){const{route:r,path:n}=this;if(!r||!n)return;const i=new pn(r);i.translate(e,t),this.route=i.points,this._translateConnectionPoints(e,t),n.translate(e,t),this.updateDOM()},updateDOM(){const{el:e,model:t,selectors:r}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,t.attr(),{selectors:r}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:e}=this,t=e.vertices(),r=this.findAnchors(t),n=this.sourceAnchor=r.source,i=this.targetAnchor=r.target,s=this.findRoute(t);this.route=s;var o=this.findConnectionPoints(s,n,i);this.sourcePoint=o.source,this.targetPoint=o.target},updatePath:function(){const{route:e,sourcePoint:t,targetPoint:r}=this,n=this.findMarkerPoints(e,t,r),i=this.findPath(e,n.source||t,n.target||r);this.path=i},findMarkerPoints:function(e,t,r){var n=e[0],i=e[e.length-1],s=this._markerCache,o,a;return this._V.markerSource&&(s.sourceBBox=s.sourceBBox||this._V.markerSource.getBBox(),o=pe(t).move(n||r,s.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(s.targetBBox=s.targetBBox||this._V.markerTarget.getBBox(),a=pe(r).move(i||t,s.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),s.sourcePoint=o||t.clone(),s.targetPoint=a||r.clone(),{source:o,target:a}},findAnchorsOrdered:function(e,t,r,n){var i,s,o,a,u=this.model,c=u.get(e),f=u.get(r),h=this.getEndView(e),g=this.getEndView(r),y=this.getEndMagnet(e),m=this.getEndMagnet(r);h?(t?o=new pe(t):g?o=m:o=new pe(f),i=this.getAnchor(c.anchor,h,y,o,e)):i=new pe(c),g?(a=new pe(n||i),s=this.getAnchor(f.anchor,g,m,a,r)):s=new pe(f);var _={};return _[e]=i,_[r]=s,_},findAnchors:function(e){var t=this.model,r=e[0],n=e[e.length-1];return t.target().priority&&!t.source().priority?this.findAnchorsOrdered("target",n,"source",r):this.findAnchorsOrdered("source",r,"target",n)},findConnectionPoints:function(e,t,r){var n=e[0],i=e[e.length-1],s=this.model,o=s.get("source"),a=s.get("target"),u=this.sourceView,c=this.targetView,f=this.paper.options,h,g,y;if(u&&!u.isNodeConnection(this.sourceMagnet)){h=this.sourceMagnet||u.el;var m=o.connectionPoint||f.defaultConnectionPoint,_=n||r,x=new wt(_,t);y=this.getConnectionPoint(m,u,h,x,"source")}else y=t;var S;if(c&&!c.isNodeConnection(this.targetMagnet)){g=this.targetMagnet||c.el;var E=a.connectionPoint||f.defaultConnectionPoint,A=i||t,T=new wt(A,r);S=this.getConnectionPoint(E,c,g,T,"target")}else S=r;return{source:y,target:S}},getAnchor:function(e,t,r,n,i){var s=t.isNodeConnection(r),o=this.paper.options;if(e||(s?e=o.defaultLinkAnchor:o.perpendicularLinks||this.options.perpendicular?e={name:"perpendicular"}:e=o.defaultAnchor),!e)throw new Error("Anchor required.");var a;if(typeof e=="function")a=e;else{var u=e.name,c=s?"linkAnchorNamespace":"anchorNamespace";if(a=o[c][u],typeof a!="function")throw new Error("Unknown anchor: "+u)}var f=a.call(this,t,r,n,e.args||{},i,this);return f?f.round(this.decimalsRounding):new pe},getConnectionPoint:function(e,t,r,n,i){var s,o=n.end,a=this.paper.options;if(typeof a.linkConnectionPoint=="function"){var u=r===t.el?void 0:r;if(s=a.linkConnectionPoint(this,t,u,n.start,i),s)return s}if(!e)return o;var c;if(typeof e=="function")c=e;else{var f=e.name;if(c=a.connectionPointNamespace[f],typeof c!="function")throw new Error("Unknown connection point: "+f)}return s=c.call(this,n,t,r,e.args||{},i,this),s?s.round(this.decimalsRounding):o},_translateConnectionPoints:function(e,t){var r=this._markerCache;r.sourcePoint.offset(e,t),r.targetPoint.offset(e,t),this.sourcePoint.offset(e,t),this.targetPoint.offset(e,t),this.sourceAnchor.offset(e,t),this.targetAnchor.offset(e,t)},_getDefaultLabelPositionProperty:function(){var e=this.model,t=e._builtins.defaultLabel,r=t.position,n=e._getDefaultLabel(),i=this._normalizeLabelPosition(n.position);return ni({},r,i)},_normalizeLabelPosition:function(e){return typeof e=="number"?{distance:e,offset:null,angle:0,args:null}:e},_mergeLabelPositionProperty:function(e,t){return e===null?null:e===void 0?t===null?null:t:ni({},t,e)},updateLabelPositions:function(){if(!this._V.labels)return this;var e=this.path;if(!e)return this;var t=this.model,r=t.get("labels")||[];if(!r.length)return this;for(var n=this._getDefaultLabelPositionProperty(),i=0,s=r.length;i<s;i++){var o=this._labelCache[i];if(o){var a=r[i],u=this._normalizeLabelPosition(a.position),c=this._mergeLabelPositionProperty(u,n),f=this._getLabelTransformationMatrix(c);o.setAttribute("transform",$e.matrixToTransformString(f)),this._cleanLabelMatrices(i)}}return this},_cleanLabelMatrices:function(e){const{metrics:t,_labelSelectors:r}=this,n=r[e];if(n)for(let i in n){const{id:s}=n[i];s&&s in t&&delete t[s].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var e="",t=this.options.linkToolsOffset,r=this.getConnectionLength();if(!Number.isNaN(r)){r<this.options.shortLinkLength&&(e="scale(.5)",t/=2);var n=this.getPointAtLength(t);if(this._toolCache.attr("transform","translate("+n.x+", "+n.y+") "+e),this.options.doubleLinkTools&&r>=this.options.longLinkLength){var i=this.options.doubleLinkToolsOffset||t;n=this.getPointAtLength(r-i),this._tool2Cache.attr("transform","translate("+n.x+", "+n.y+") "+e),this._tool2Cache.attr("display","inline")}else this.options.doubleLinkTools&&this._tool2Cache.attr("display","none")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if(It.css(this._V.markerArrowheads.node,"display")==="none")return this;var e=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(e),this._V.targetArrowhead.scale(e),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(e){const{model:t,paper:r}=this,n=`${e}View`,i=t.get(e),s=i&&i.id;if(!s)return this[n]=null,this.updateEndMagnet(e),!0;const o=r.getModelById(s);if(!o)throw new Error("LinkView: invalid "+e+" cell.");const a=o.findView(r);return a?(this[n]=a,this.updateEndMagnet(e),!0):!1},updateEndMagnet:function(e){const t=`${e}Magnet`,r=this.getEndView(e);if(r){let n=r.getMagnetFromLinkEnd(this.model.get(e));n===r.el&&(n=null),this[t]=n}else this[t]=null},_translateAndAutoOrientArrows:function(e,t){var r=Fr(this.route);e&&e.translateAndAutoOrient(this.sourcePoint,r[0]||this.targetPoint,this.paper.cells),t&&t.translateAndAutoOrient(this.targetPoint,r[r.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionProperty:function(e){return this.model.label(e).position||{}},_getLabelPositionAngle:function(e){var t=this._getLabelPositionProperty(e);return t.angle||0},_getLabelPositionArgs:function(e){var t=this._getLabelPositionProperty(e);return t.args},_getDefaultLabelPositionArgs:function(){var e=this.model._getDefaultLabel(),t=e.position||{};return t.args},_mergeLabelPositionArgs:function(e,t){return e===null?null:e===void 0?t===null?null:t:ni({},t,e)},addLabel:function(e,t,r,n){var i,s,o=0,a;typeof e!="number"?(i=e.x,s=e.y,typeof t=="number"?(o=t,a=r):a=t):(i=e,s=t,typeof r=="number"?(o=r,a=n):a=r);var u=this._getDefaultLabelPositionArgs(),c=a,f=this._mergeLabelPositionArgs(c,u),h={position:this.getLabelPosition(i,s,o,f)},g=-1;return this.model.insertLabel(g,h,a),g},addVertex:function(e,t,r){var n=typeof e!="number",i=n?e.x:e,s=n?e.y:t,o=n?t:r,a={x:i,y:s},u=this.getVertexIndex(i,s);return this.model.insertVertex(u,a,o),u},sendToken:function(e,t,r){function n(h,g){return function(){h.remove(),typeof g=="function"&&g()}}var i,s,o;Wr(t)?(i=t.duration,s=t.direction==="reverse",o=t.connection):(i=t,s=!1,o=null),i=i||1e3;var a={dur:i+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};s&&(a.keyPoints="1;0",a.keyTimes="0;1");var u=$e(e),c;if(typeof o=="string")c=this.findBySelector(o,this.el,this.selectors)[0];else{var f=this._V;c=f.connection?f.connection.node:this.el.querySelector("path")}if(!(c instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");u.appendTo(this.paper.cells).animateAlongPath(a,c),setTimeout(n(u,r),i)},findRoute:function(e){e||(e=[]);var t=this.paper.options.routerNamespace||Ade,r=this.model.router(),n=this.paper.options.defaultRouter;if(!r)if(n)r=n;else return e.map(pe);var i=fn(r)?r:t[r.name];if(!fn(i))throw new Error('dia.LinkView: unknown router: "'+r.name+'".');var s=r.args||{},o=i.call(this,e,s,this);return o||e.map(pe)},findPath:function(e,t,r){var n=this.paper.options.connectorNamespace||Qde,i=this.model.connector(),s=this.paper.options.defaultConnector;i||(i=s||{});var o=fn(i)?i:n[i.name];if(!fn(o))throw new Error('dia.LinkView: unknown connector: "'+i.name+'".');var a=ta(i.args||{});a.raw=!0;var u=o.call(this,t,r,e,a,this);return typeof u=="string"&&(u=new Nt($e.normalizePathData(u))),u},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("data"))return t.data;var r=e.serialize();return t.data=r,r},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("segmentSubdivisions"))return t.segmentSubdivisions;var r=e.getSegmentSubdivisions();return t.segmentSubdivisions=r,r},getConnectionLength:function(){var e=this.path;if(!e)return 0;var t=this.metrics;if(t.hasOwnProperty("length"))return t.length;var r=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return t.length=r,r},getPointAtLength:function(e){var t=this.path;return t?t.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var t=this.path;return t?(Ai(e)&&(e=parseFloat(e)/100),t.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var t=this.path;return t?t.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var t=this.path;return t?t.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var t=this.path;return t?t.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var t=this.path;return t?t.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var t=this.path;return t?t.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,t,r,n){var i={},s=0,o;typeof r=="number"?(s=r,o=n):o=r,o&&(i.args=o);var a=!(o&&o.absoluteDistance),u=o&&o.absoluteDistance&&o.reverseDistance,c=o&&o.absoluteOffset,f=this.path,h={segmentSubdivisions:this.getConnectionSubdivisions()},g=new pe(e,t),y=f.closestPointT(g,h),m=f.lengthAtT(y,h);a&&(m=m/this.getConnectionLength()||0),u&&(m=-1*(this.getConnectionLength()-m)||1),i.distance=m;var _;c||(_=f.tangentAtT(y));var x;if(_)x=_.pointOffset(g);else{var S=f.pointAtT(y),E=g.difference(S);x={x:E.x,y:E.y}}return i.offset=x,i.angle=s,i},_getLabelTransformationMatrix:function(e){var t,r=0,n={};if(typeof e=="number")t=e;else if(typeof e.distance=="number")n=e.args||{},t=e.distance,r=e.angle||0;else throw new Error("dia.LinkView: invalid label position distance.");var i=t>0&&t<=1,s=0,o={x:0,y:0};if(e.offset){var a=e.offset;typeof a=="number"&&(s=a),a.x&&(o.x=a.x),a.y&&(o.y=a.y)}var u=o.x!==0||o.y!==0||s===0,c=n.keepGradient,f=n.ensureLegibility,h=this.path,g={segmentSubdivisions:this.getConnectionSubdivisions()},y=i?t*this.getConnectionLength():t,m=h.tangentAtLength(y,g),_,x=r;if(m){if(u)_=m.start.clone(),_.offset(o);else{var S=m.clone();S.rotate(m.start,-90),S.setLength(s),_=S.end}c&&(x=m.angle()+r,f&&(x=Oo((x+90)%180-90)))}else _=h.start.clone(),u&&_.offset(o);return $e.createSVGMatrix().translate(_.x,_.y).rotate(x)},getLabelCoordinates:function(e){var t=this._getLabelTransformationMatrix(e);return new pe(t.e,t.f)},getVertexIndex:function(e,t){for(var r=this.model,n=r.vertices(),i=this.getClosestPointLength(new pe(e,t)),s=0,o=n.length;s<o;s++){var a=n[s],u=this.getClosestPointLength(a);if(i<u)break}return s},notifyPointerdown(e,t,r){wr.prototype.pointerdown.call(this,e,t,r),this.notify("link:pointerdown",e,t,r)},notifyPointermove(e,t,r){wr.prototype.pointermove.call(this,e,t,r),this.notify("link:pointermove",e,t,r)},notifyPointerup(e,t,r){this.notify("link:pointerup",e,t,r),wr.prototype.pointerup.call(this,e,t,r)},pointerdblclick:function(e,t,r){wr.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,t,r)},pointerclick:function(e,t,r){wr.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,t,r)},contextmenu:function(e,t,r){wr.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,t,r)},pointerdown:function(e,t,r){this.notifyPointerdown(e,t,r);var n=e.target.getAttribute("class");switch(n){case"marker-vertex":this.dragVertexStart(e,t,r);return;case"marker-vertex-remove":case"marker-vertex-remove-area":this.dragVertexRemoveStart(e,t,r);return;case"marker-arrowhead":this.dragArrowheadStart(e,t,r);return;case"connection":case"connection-wrap":this.dragConnectionStart(e,t,r);return;case"marker-source":case"marker-target":return}this.dragStart(e,t,r)},pointermove:function(e,t,r){var n=this._dragData;n&&this.eventData(e,n);var i=this.eventData(e);switch(i.action){case"vertex-move":this.dragVertex(e,t,r);break;case"label-move":this.dragLabel(e,t,r);break;case"arrowhead-move":this.dragArrowhead(e,t,r);break;case"move":this.drag(e,t,r);break}n&&jt(n,this.eventData(e)),this.notifyPointermove(e,t,r)},pointerup:function(e,t,r){var n=this._dragData;n&&(this.eventData(e,n),this._dragData=null);var i=this.eventData(e);switch(i.action){case"vertex-move":this.dragVertexEnd(e,t,r);break;case"label-move":this.dragLabelEnd(e,t,r);break;case"arrowhead-move":this.dragArrowheadEnd(e,t,r);break;case"move":this.dragEnd(e,t,r)}this.notifyPointerup(e,t,r),this.checkMouseleave(e)},mouseover:function(e){wr.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){wr.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){wr.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){wr.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,t,r,n){wr.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,t,r,n)},onevent:function(e,t,r,n){var i=$e(e.target).findParentByClass("link-tool",this.el);if(i){if(e.stopPropagation(),this.can("useLinkTools"))if(t==="remove"){this.model.remove({ui:!0});return}else this.notify(t,e,r,n);this.notifyPointerdown(e,r,n),this.paper.delegateDragEvents(this,e.data)}else wr.prototype.onevent.apply(this,arguments)},onlabel:function(e,t,r){this.notifyPointerdown(e,t,r),this.dragLabelStart(e,t,r);var n=this.eventData(e).stopPropagation;n&&e.stopPropagation()},dragConnectionStart:function(e,t,r){if(this.can("vertexAdd")){var n=this.addVertex({x:t,y:r},{ui:!0});this.eventData(e,{action:"vertex-move",vertexIdx:n})}},dragLabelStart:function(e,t,r){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(e))return;var n=e.currentTarget,i=parseInt(n.getAttribute("label-idx"),10),s=this._getDefaultLabelPositionProperty(),o=this._normalizeLabelPosition(this._getLabelPositionProperty(i)),a=this._mergeLabelPositionProperty(o,s),u=this.getLabelCoordinates(a),c=u.x-t,f=u.y-r,h=this._getLabelPositionAngle(i),g=this._getLabelPositionArgs(i),y=this._getDefaultLabelPositionArgs(),m=this._mergeLabelPositionArgs(g,y);this.eventData(e,{action:"label-move",labelIdx:i,dx:c,dy:f,positionAngle:h,positionArgs:m,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragVertexStart:function(e,t,r){if(this.can("vertexMove")){var n=e.target,i=parseInt(n.getAttribute("idx"),10);this.eventData(e,{action:"vertex-move",vertexIdx:i})}},dragVertexRemoveStart:function(e,t,r){if(this.can("vertexRemove")){var n=e.target,i=parseInt(n.getAttribute("idx"),10);this.model.removeVertex(i)}},dragArrowheadStart:function(e,t,r){if(this.can("arrowheadMove")){var n=e.target,i=n.getAttribute("end"),s=this.startArrowheadMove(i,{ignoreBackwardsCompatibility:!0});this.eventData(e,s)}},dragStart:function(e,t,r){this.isDefaultInteractionPrevented(e)||this.can("linkMove")&&this.eventData(e,{action:"move",dx:t,dy:r})},dragLabel:function(e,t,r){var n=this.eventData(e),i={position:this.getLabelPosition(t+n.dx,r+n.dy,n.positionAngle,n.positionArgs)};this.paper.options.snapLabels&&delete i.position.offset;const s={ui:!0};this.paper.isAsync()&&e.type==="touchmove"&&(s.async=!1),this.model.label(n.labelIdx,i,s)},dragVertex:function(e,t,r){var n=this.eventData(e);this.model.vertex(n.vertexIdx,{x:t,y:r},{ui:!0})},dragArrowhead:function(e,t,r){this.paper.options.snapLinks?!this._snapArrowhead(e,t,r)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(e,t,r):this.paper.options.snapLinksSelf?this._snapArrowheadSelf(e,t,r):this._connectArrowhead(this.getEventTarget(e),t,r,this.eventData(e))},drag:function(e,t,r){var n=this.eventData(e);this.model.translate(t-n.dx,r-n.dy,{ui:!0}),this.eventData(e,{dx:t,dy:r})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(e,t,r){var n=this.eventData(e),i=this.paper;i.options.snapLinks?this._snapArrowheadEnd(n):this._connectArrowheadEnd(n,t,r),i.linkAllowed(this)?(this._finishEmbedding(n),this._notifyConnectEvent(n,e)):this._disallow(n),this._afterArrowheadMove(n)},dragEnd:function(){},_disallow:function(e){switch(e.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(e.arrowhead,e.initialEnd,{ui:!0});break}},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,t){var r=e.arrowhead,n=e.initialEnd,i=this.model.prop(r),s=i&&!Zl.endsEqual(n,i);if(s){var o=this.paper;n.id&&this.notify("link:disconnect",t,o.findViewByModel(n.id),e.initialMagnet,r),i.id&&this.notify("link:connect",t,o.findViewByModel(i.id),e.magnetUnderPointer,r)}},_snapToPoints:function(e,t,r){let n=null,i=1/0,s=null,o=1/0,a=e.x,u=e.y;for(let c=0;c<t.length;c++){const f=Math.abs(t[c].x-e.x);f<i&&(i=f,n=t[c]);const h=Math.abs(t[c].y-e.y);h<o&&(o=h,s=t[c])}return i<r&&(a=n.x),o<r&&(u=s.y),{x:a,y:u}},_snapArrowheadSelf:function(e,t,r){const{paper:n,model:i}=this,{snapLinksSelf:s}=n.options,o=this.eventData(e),a=s.radius||20,u=this.getEndAnchor(o.arrowhead==="source"?"target":"source"),c=i.vertices(),f=[u,...c],h=this._snapToPoints({x:t,y:r},f,a),g=n.localToClientPoint(h);this._connectArrowhead(document.elementFromPoint(g.x,g.y),h.x,h.y,this.eventData(e))},_snapArrowhead:function(e,t,r){const{paper:n}=this,{snapLinks:i,connectionStrategy:s}=n.options,o=this.eventData(e);let a=!1;var u=i.radius||50,c=n.findViewsInArea({x:t-u,y:r-u,width:2*u,height:2*u}),f=o.closestView||null,h=o.closestMagnet||null,g=o.magnetProxy||null;o.closestView=o.closestMagnet=o.magnetProxy=null;var y=Number.MAX_VALUE,m=new pe(t,r);c.forEach(function(I){const N=[];I.el.getAttribute("magnet")!=="false"&&N.push({bbox:I.model.getBBox(),magnet:I.el}),I.$("[magnet]").toArray().forEach(p=>{N.push({bbox:I.getNodeBBox(p),magnet:p})}),N.forEach(p=>{const{magnet:P,bbox:O}=p,q=O.center().squaredDistance(m);q<y&&(h===P||n.options.validateConnection.apply(n,o.validateConnectionArgs(I,I.el===P?null:P)))&&(y=q,o.closestView=I,o.closestMagnet=P)})},this);var _,x=null,S=o.closestView,E=o.closestMagnet;E&&(x=o.magnetProxy=S.findProxyNode(E,"highlighter"));var A=o.arrowhead,T=h!==E;if(f&&T&&f.unhighlight(g,{connecting:!0,snapping:!0}),S){const{prevEnd:I,prevX:N,prevY:p}=o;if(o.prevX=t,o.prevY=r,a=!0,!T&&(typeof s!="function"||N===t&&p===r)||(_=S.getLinkEnd(E,t,r,this.model,A),!T&&cl(I,_)))return a;o.prevEnd=_,T&&S.highlight(x,{connecting:!0,snapping:!0})}else _={x:t,y:r};return this.model.set(A,_||{x:t,y:r},{ui:!0}),f&&this.notify("link:snap:disconnect",e,f,h,A),S&&this.notify("link:snap:connect",e,S,E,A),a},_snapArrowheadEnd:function(e){var t=e.closestView,r=e.closestMagnet;t&&r&&(t.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=t.findMagnet(r)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,t,r,n){const{paper:i,model:s}=this;if(n.eventTarget!==e){n.magnetProxy&&n.viewUnderPointer.unhighlight(n.magnetProxy,{connecting:!0});const o=n.viewUnderPointer=i.findView(e);if(o){const a=n.magnetUnderPointer=o.findMagnet(e),u=n.magnetProxy=o.findProxyNode(a,"highlighter");a&&this.paper.options.validateConnection.apply(i,n.validateConnectionArgs(o,a))?u&&o.highlight(u,{connecting:!0}):(n.magnetUnderPointer=null,n.magnetProxy=null)}else n.magnetUnderPointer=null,n.magnetProxy=null}n.eventTarget=e,s.set(n.arrowhead,{x:t,y:r},{ui:!0})},_connectArrowheadEnd:function(e={},t,r){const{model:n}=this,{viewUnderPointer:i,magnetUnderPointer:s,magnetProxy:o,arrowhead:a}=e;if(!s||!o||!i)return;i.unhighlight(o,{connecting:!0});const u=i.getLinkEnd(s,t,r,n,a);n.set(a,u,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var t=this.el.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){e.z!==null&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var t=[];t[4]=e,t[5]=this;var r,n=0,i=0;e==="source"?(n=2,r="target"):(i=2,r="source");var s=this.model.get(r);if(s.id){var o=t[n]=this.paper.findViewByModel(s.id),a=o.getMagnetFromLinkEnd(s);a===o.el&&(a=void 0),t[n+1]=a}function u(c,f){return t[i]=c,t[i+1]=c.el===f?void 0:f,t}return u},_markAvailableMagnets:function(e){function t(h,g){var y=h.paper,m=y.options.validateConnection;return m.apply(y,this.validateConnectionArgs(h,g))}var r=this.paper,n=r.model.getCells();e.marked={};for(var i=0,s=n.length;i<s;i++){var o=n[i].findView(r);if(o){var a=Array.prototype.slice.call(o.el.querySelectorAll("[magnet]"));o.el.getAttribute("magnet")!=="false"&&a.push(o.el);var u=a.filter(t.bind(e,o));if(u.length>0){for(var c=0,f=u.length;c<f;c++)o.highlight(u[c],{magnetAvailability:!0});o.highlight(null,{elementAvailability:!0}),e.marked[o.model.id]=u}}}},_unmarkAvailableMagnets:function(e){for(var t=Object.keys(e.marked),r,n,i=0,s=t.length;i<s;i++){r=t[i],n=e.marked[r];var o=this.paper.findViewByModel(r);if(o){for(var a=0,u=n.length;a<u;a++)o.unhighlight(n[a],{magnetAvailability:!0});o.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,t){t||(t={});var r={action:"arrowhead-move",arrowhead:e,whenNotAllowed:t.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:ta(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(r),t.ignoreBackwardsCompatibility!==!0&&(this._dragData=r),r},onMount:function(){wr.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){wr.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){wr.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:tr});Object.defineProperty(Hi.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var t=this.model.source();return new mt(t.x,t.y)}var r=this.sourceMagnet;return e.isNodeConnection(r)?new mt(this.sourceAnchor):e.getNodeBBox(r||e.el)}});Object.defineProperty(Hi.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var t=this.model.target();return new mt(t.x,t.y)}var r=this.targetMagnet;return e.isNodeConnection(r)?new mt(this.targetAnchor):e.getNodeBBox(r||e.el)}});const epe=Eo.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,t){const{options:r}=this,{useFirstSubpath:n}=r;let i;try{const s=$e(t);if(i=s.convertToPathData().trim(),s.tagName()==="PATH"&&n){const o=i.search(/.M/i)+1;o>0&&(i=i.substr(0,o))}}catch{const o=e.getNodeBoundingRect(t);i=$e.rectToPath(jt({},r,o.toJSON()))}return i},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,t){const{vel:r,options:n}=this,{padding:i,layer:s}=n;let o=this.getNodeMatrix(e,t);if(i){!s&&t===e.el&&r.remove();let a=e.getNodeBoundingRect(t);const u=a.x+a.width/2,c=a.y+a.height/2;a=$e.transformRect(a,o);const f=Math.max(a.width,1),h=Math.max(a.height,1),g=(f+i)/f,y=(h+i)/h,m=$e.createSVGMatrix({a:g,b:0,c:0,d:y,e:u-g*u,f:c-y*c});o=o.multiply(m)}r.attr({d:this.getPathData(e,t),transform:$e.matrixToTransformString(o)})},highlight(e,t){const{vel:r,options:n}=this;r.attr(n.attrs),e.isNodeConnection(t)?this.highlightConnection(e):this.highlightNode(e,t)}}),Jz=20;function tpe(e,t){const r=e.children();for(;r.length>0;){const n=r.shift();t(n)&&r.push(...n.children())}}const rpe=Eo.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:Jz,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,t){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:r,MASK_REPLACE_TAGS:n,MASK_REMOVE_TAGS:i}=this,s=t.tagName();if(!$e.isSVGGraphicsElement(t)||i.includes(s))return t.remove(),!1;if(n.includes(s)){const o=e.vel.findOne(`#${t.id}`);if(o){const{node:a}=o;let u=e.getNodeBoundingRect(a);e.model.isElement()&&(u=$e.transformRect(u,e.getNodeMatrix(a)));const c=$e("rect",u.toJSON()),{x:f,y:h}=u.center(),{angle:g,cx:y=f,cy:m=h}=o.rotate();g&&c.rotate(g,y,m),t.parent().append(c)}return t.remove(),!1}return r.forEach(o=>{o==="fill"&&t.attr("fill")==="none"||t.removeAttr(o)}),!0},transformMaskRoot(e,t){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:r}=this;r.forEach(n=>{t.removeAttr(n)})},getMaskShape(e,t){const{options:r,MASK_REPLACE_TAGS:n}=this,{deep:i}=r,s=t.tagName();let o;if(s==="G"){if(!i)return null;o=t.clone(),tpe(o,a=>this.transformMaskChild(e,a))}else{if(n.includes(s))return null;o=t.clone()}return this.transformMaskRoot(e,o),o},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,t){const{VISIBLE:r,INVISIBLE:n,options:i}=this,{padding:s,attrs:o}=i,a="stroke-width"in o?o["stroke-width"]:1,u=t.attr("fill")!=="none";let c=parseFloat(t.attr("stroke-width"));isNaN(c)&&(c=1);const f=c+s*2,h=f+a*2;let g=this.getMaskShape(e,t);if(!g){const y=e.getNodeBoundingRect(t.node);y.inflate(y.width?0:.5,y.height?0:.5),g=$e("rect",y.toJSON())}return g.attr(o),$e("mask",{id:this.getMaskId()}).append([g.clone().attr({fill:u?r:"none",stroke:r,"stroke-width":h}),g.clone().attr({fill:u?n:"none",stroke:n,"stroke-width":f})])},removeMask(e){const t=e.svg.getElementById(this.getMaskId());t&&e.defs.removeChild(t)},addMask(e,t){e.defs.appendChild(t.node)},highlight(e,t){const{options:r,vel:n}=this,{padding:i,attrs:s,maskClip:o=Jz,layer:a}=r,u="stroke"in s?s.stroke:"#000000";!a&&t===e.el&&n.remove();const c=e.getNodeBoundingRect(t).inflate(i+o),f=this.getNodeMatrix(e,t),h=this.getMask(e,$e(t));this.addMask(e.paper,h),n.attr(c.toJSON()),n.attr({transform:$e.matrixToTransformString(f),mask:`url(#${h.id})`,fill:u})},unhighlight(e){this.removeMask(e.paper)}}),npe=Eo.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:So("highlight-opacity"),highlight:function(e,t){$e(t).addClass(this.opacityClassName)},unhighlight:function(e,t){$e(t).removeClass(this.opacityClassName)}}),Qz=So("highlighted"),ipe=Eo.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:Qz},highlight:function(e,t){$e(t).addClass(this.options.className)},unhighlight:function(e,t){$e(t).removeClass(this.options.className)}},{className:Qz}),zS={ROW:"row",COLUMN:"column"},spe=Eo.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(e,t){const r=e.model,{attribute:n,size:i=20,gap:s=5,direction:o=zS.ROW}=this.options;if(!n)throw new Error("List: attribute is required");const a=typeof i=="number"?{width:i,height:i}:i,u=o===zS.ROW,c=u?a.width:a.height;let f=r.get(n);Array.isArray(f)||(f=[]);const h=this._prevItems||[],g=f.map((x,S)=>cl(h[S],f[S]));if(h.length!==f.length||g.some(x=>!x)){const x=this.vel.children(),S=f.map((E,A)=>{const T=A in x?x[A].node:null;if(g[A])return T;const I=this.createListItem(E,a,T);if(!I)return null;if(!(I instanceof SVGElement))throw new Error("List: item must be an SVGElement");I.dataset.index=A,I.dataset.attribute=n;const N=A*(c+s);return I.setAttribute("transform",u?`translate(${N}, 0)`:`translate(0, ${N})`),I});this.vel.empty().append(S),this._prevItems=f}const y=f.length,m=y===0?0:y*c+(y-1)*s,_=u?{width:m,height:a.height}:{width:a.width,height:m};this.position(r,_)},position(e,t){const{vel:r,options:n}=this,{margin:i=5,position:s="top-left"}=n,{width:o,height:a}=e.size(),{left:u,right:c,top:f,bottom:h}=hc(i),g=new mt(u,f,o-(u+c),a-(f+h));let{x:y,y:m}=tj(g,s);switch(s){case Gn.CENTER:case Gn.TOP:case Gn.BOTTOM:{y-=t.width/2;break}case Gn.RIGHT:case Gn.BOTTOM_RIGHT:case Gn.TOP_RIGHT:{y-=t.width;break}}switch(s){case Gn.CENTER:case Gn.RIGHT:case Gn.LEFT:{m-=t.height/2;break}case Gn.BOTTOM:case Gn.BOTTOM_RIGHT:case Gn.BOTTOM_LEFT:{m-=t.height;break}}r.attr("transform",`translate(${y}, ${m})`)}},{Directions:zS,Positions:Gn}),ope=Object.freeze(Object.defineProperty({__proto__:null,addClass:ipe,list:spe,mask:rpe,opacity:npe,stroke:epe},Symbol.toStringTag,{value:"Module"}));function ape(e,t,r,n){var i="ratio"in n?n.ratio:.5;return e.getPointAtRatio(i)}function upe(e,t,r,n){var i="length"in n?n.length:20;return e.getPointAtLength(i)}function cpe(e,t,r,n){var i=1e6,s=e.getConnection(),o=e.getConnectionSubdivisions(),a=new wt(r.clone().offset(0,i),r.clone().offset(0,-1e6)),u=new wt(r.clone().offset(i,0),r.clone().offset(-1e6,0)),c=a.intersect(s,{segmentSubdivisions:o}),f=u.intersect(s,{segmentSubdivisions:o}),h=[];return c&&Array.prototype.push.apply(h,c),f&&Array.prototype.push.apply(h,f),h.length>0?r.chooseClosest(h):"fallbackAt"in n?mj(e,n.fallbackAt):yj(e,t,r,n)}function lpe(e,t,r,n){var i=e.getClosestPoint(r);return i||new pe}function Xh(e){return function(t,r,n,i){if(n instanceof Element){var s=this.paper.findView(n),o;if(s)if(s.isNodeConnection(n)){var a="fixedAt"in i?i.fixedAt:"50%";o=mj(s,a)}else o=s.getNodeBBox(n).center();else o=new pe;return e.call(this,t,r,o,i)}return e.apply(this,arguments)}}function mj(e,t){var r=parseFloat(t);return Ai(t)?e.getPointAtRatio(r/100):e.getPointAtLength(r)}const fpe=Xh(cpe),yj=Xh(lpe),hpe=Object.freeze(Object.defineProperty({__proto__:null,connectionClosest:yj,connectionLength:upe,connectionPerpendicular:fpe,connectionRatio:ape,resolveRef:Xh},Symbol.toStringTag,{value:"Module"}));function hg(e,t,r){if(Jn(r)){const{x:i,y:s}=r;if(isFinite(s)){const o=new wt(t,e),{start:a,end:u}=o.parallel(s);t=a,e=u}r=i}if(!isFinite(r))return e;var n=e.distance(t);return r===0&&n>0?e:e.move(t,-Math.min(r,n-1))}function eT(e){var t=e.getAttribute("stroke-width");return t===null?0:parseFloat(t)||0}function dpe(e,t,r=0){let n,i,s,o;const{start:a,end:u}=e;switch(t){case"left":n="x",i=u,s=a,o=-1;break;case"right":n="x",i=a,s=u,o=1;break;case"top":n="y",i=u,s=a,o=-1;break;case"bottom":n="y",i=a,s=u,o=1;break;default:return}a[n]<u[n]?i[n]=s[n]:s[n]=i[n],isFinite(r)&&(i[n]+=o*r,s[n]+=o*r)}function ppe(e,t,r,n){let{offset:i,alignOffset:s,align:o}=n;return o&&dpe(e,o,s),hg(e.end,e.start,i)}function _j(e,t,r,n){var i=t.getNodeBBox(r);n.stroke&&i.inflate(eT(r)/2);var s=e.intersect(i),o=s?e.start.chooseClosest(s):e.end;return hg(o,e.start,n.offset)}function vpe(e,t,r,n){var i=t.model.angle();if(i===0)return _j(e,t,r,n);var s=t.getNodeUnrotatedBBox(r);n.stroke&&s.inflate(eT(r)/2);var o=s.center(),a=e.clone().rotate(o,i),u=a.setLength(1e6).intersect(s),c=u?a.start.chooseClosest(u).rotate(o,-i):e.end;return hg(c,e.start,n.offset)}function gpe(e){if(!e)return null;var t=e;do{var r=t.tagName;if(typeof r!="string")return null;if(r=r.toUpperCase(),r==="G")t=t.firstElementChild;else if(r==="TITLE")t=t.nextElementSibling;else break}while(t);return t}var VS="segmentSubdivisons",GS="shapeBBox";function mpe(e,t,r,n){var i,s,o=n.selector,a=e.end;if(typeof o=="string"?i=t.findBySelector(o)[0]:o===!1?i=r:Array.isArray(o)?i=gh(r,o):i=gpe(r),!$e.isSVGGraphicsElement(i)){if(i===r||!$e.isSVGGraphicsElement(r))return a;i=r}var u=t.getNodeShape(i),c=t.getNodeMatrix(i),f=t.getRootTranslateMatrix(),h=t.getRootRotateMatrix(),g=f.multiply(h).multiply(c),y=g.inverse(),m=$e.transformLine(e,y),_=m.start.clone(),x=t.getNodeData(i);if(n.insideout===!1){x[GS]||(x[GS]=u.bbox());var S=x[GS];if(S.containsPoint(_))return a}var E;if(u instanceof Nt){var A=n.precision||2;x[VS]||(x[VS]=u.getSegmentSubdivisions({precision:A})),E={precision:A,segmentSubdivisions:x[VS]}}n.extrapolate===!0&&m.setLength(1e6),s=m.intersect(u,E),s?$e.isArray(s)&&(s=_.chooseClosest(s)):n.sticky===!0&&(u instanceof mt?s=u.pointNearestToPoint(_):u instanceof Yi?s=u.intersectionWithLineFromCenterToPoint(_):s=u.closestPoint(_,E));var T=s?$e.transformPoint(s,g):a,I=n.offset||0;return n.stroke&&(I+=eT(i)/2),hg(T,e.start,I)}const ype=ppe,_pe=_j,bpe=vpe,wpe=mpe,xpe=Object.freeze(Object.defineProperty({__proto__:null,anchor:ype,bbox:_pe,boundary:wpe,rectangle:bpe},Symbol.toStringTag,{value:"Module"}));function Za(e){return function(t,r,n,i){var s=!!i.rotate,o=s?t.getNodeUnrotatedBBox(r):t.getNodeBBox(r),a=o[e](),u=i.dx;if(u){var c=Ai(u);u=parseFloat(u),isFinite(u)&&(c&&(u/=100,u*=o.width),a.x+=u)}var f=i.dy;if(f){var h=Ai(f);f=parseFloat(f),isFinite(f)&&(h&&(f/=100,f*=o.height),a.y+=f)}return s?a.rotate(t.model.getBBox().center(),-t.model.angle()):a}}function Spe(e,t,r,n){var i=e.model.angle(),s=e.getNodeBBox(t),o=s.center(),a=s.origin(),u=s.corner(),c=n.padding;if(isFinite(c)||(c=0),a.y+c<=r.y&&r.y<=u.y-c){var f=r.y-o.y;o.x+=i===0||i===180?0:f*1/Math.tan(gs(i)),o.y+=f}else if(a.x+c<=r.x&&r.x<=u.x-c){var h=r.x-o.x;o.y+=i===90||i===270?0:h*Math.tan(gs(i)),o.x+=h}return o}function Epe(e,t,r,n){var i=!!n.rotate,s,o,a;i?(s=e.getNodeUnrotatedBBox(t),a=e.model.getBBox().center(),o=e.model.angle()):s=e.getNodeBBox(t);var u=n.padding;isFinite(u)&&s.inflate(u),i&&r.rotate(a,o);var c=s.sideNearestToPoint(r),f;switch(c){case"left":f=s.leftMiddle();break;case"right":f=s.rightMiddle();break;case"top":f=s.topMiddle();break;case"bottom":f=s.bottomMiddle();break}return i?f.rotate(a,-o):f}function Ape(e,t,r,n,i){return e.model.getPointFromConnectedLink(this.model,i).offset(n.dx,n.dy)}const Tpe=Za("center"),Ppe=Za("topMiddle"),Cpe=Za("bottomMiddle"),Rpe=Za("leftMiddle"),Ipe=Za("rightMiddle"),Ope=Za("origin"),Mpe=Za("topRight"),kpe=Za("bottomLeft"),Lpe=Za("corner"),Npe=Xh(Spe),qpe=Xh(Epe),Dpe=Ape,Fpe=Object.freeze(Object.defineProperty({__proto__:null,bottom:Cpe,bottomLeft:kpe,bottomRight:Lpe,center:Tpe,left:Rpe,midSide:qpe,modelCenter:Dpe,perpendicular:Npe,right:Ipe,top:Ppe,topLeft:Ope,topRight:Mpe},Symbol.toStringTag,{value:"Module"})),nl={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},Bpe=50,e4=20,t4=1e3,zpe=1/0,pp=9007199254740991,$S=wr.Highlighting,r4={[$S.DEFAULT]:{name:"stroke",options:{padding:3}},[$S.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[$S.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},Vpe=[{name:Js.BACK},{name:Js.CELLS},{name:Js.LABELS},{name:Js.FRONT},{name:Js.TOOLS}],bj=Ga.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,perpendicularLinks:!1,elementView:_i,linkView:Hi,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,t){return!1},highlighting:r4,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new Zl,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(e,t,r){return t.getAttribute("magnet")!=="passive"},validateConnection:function(e,t,r,n,i,s){return(i==="target"?r:e)instanceof _i},embeddingMode:!1,validateEmbedding:function(e,t){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:nl.EXACT,frozen:!1,autoFreeze:!1,onViewUpdate:function(e,t,r,n,i){t&(e.FLAG_INSERT|e.FLAG_REMOVE)||n.mounting||n.isolate||i.requestConnectedLinksUpdate(e,r,n)},onViewPostponed:function(e,t,r){return r.forcePostponedViewUpdate(e,t)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:ope,anchorNamespace:Fpe,linkAnchorNamespace:hpe,connectionPointNamespace:xpe,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,init:function(){const{options:e,el:t}=this;e.cellViewNamespace||(e.cellViewNamespace=typeof joint<"u"&&Fa(joint,"shapes")?joint.shapes:null);const r=this.model=e.model||new Po;this._layers={},this.setGrid(e.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.$document=It(t.ownerDocument),this.resetViews(r.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(e,t,r){var n=r.position;this.isAsync()||!fs(n)?this.renderView(e,r):(r.maxPosition===n&&this.freeze({key:"addCells"}),this.renderView(e,r),n===0&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,t,r){const n=this.findViewByModel(e);n&&this.requestViewUpdate(n,n.FLAG_REMOVE,n.UPDATE_PRIORITY,r)},onCellChange:function(e,t){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===nl.APPROX){const r=this.findViewByModel(e);r&&this.requestViewUpdate(r,r.FLAG_INSERT,r.UPDATE_PRIORITY,t)}},onGraphReset:function(e,t){this.resetLayers(),this.resetViews(e.models,t)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var t=e&&e.batchName,r=this.model;if(!this.isAsync()){var n=this.UPDATE_DELAYING_BATCHES;n.includes(t)&&!r.hasActiveBatch(n)&&this.updateViews(e)}var i=this.SORT_DELAYING_BATCHES;i.includes(t)&&!r.hasActiveBatch(i)&&this.sortViews()}},cloneOptions:function(){const{options:e}=this,{defaultConnector:t,defaultRouter:r,defaultConnectionPoint:n,defaultAnchor:i,defaultLinkAnchor:s,origin:o,highlighting:a,cellViewNamespace:u,interactive:c}=e;!u&&typeof joint<"u"&&Fa(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),fn(t)||(e.defaultConnector=Ks(t)),fn(r)||(e.defaultRouter=Ks(r)),fn(n)||(e.defaultConnectionPoint=Ks(n)),fn(i)||(e.defaultAnchor=Ks(i)),fn(s)||(e.defaultLinkAnchor=Ks(s)),Jn(c)&&(e.interactive=jt({},c)),Jn(a)&&(e.highlighting=YA({},a,r4)),e.origin=jt({},o)},children:function(){var e=$e.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:So("paper-background"),selector:"background"},{namespaceURI:e.xhtml,tagName:"div",className:So("paper-grid"),selector:"grid"},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:So("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){const{_layers:t}=this;if(e in t)return t[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();const{childNodes:e,options:t}=this,{svg:r,defs:n,layers:i,background:s,grid:o}=e;return r.style.overflow=t.overflow?"visible":"hidden",this.svg=r,this.defs=n,this.layers=i,this.$background=It(s),this.$grid=It(o),this.renderLayers(),$e.ensureId(r),t.background&&this.drawBackground(t.background),t.drawGrid&&this.drawGrid(),this},renderLayers:function(e=Vpe){this.removeLayers(),e.forEach(({name:i,sorted:s})=>{const o=new Khe({name:i});this.layers.appendChild(o.el),this._layers[i]=o});const t=this.getLayerView(Js.CELLS),r=this.getLayerView(Js.TOOLS),n=this.getLayerView(Js.LABELS);this.tools=r.el,this.cells=this.viewport=t.el,t.vel.addClass(So("viewport")),n.vel.addClass(So("viewport"))},removeLayers:function(){const{_layers:e}=this;Object.keys(e).forEach(t=>{e[t].remove(),delete e[t]})},resetLayers:function(){const{_layers:e}=this;Object.keys(e).forEach(t=>{e[t].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(e){var t=this.layers;if(e===void 0){var r=t.getAttribute("transform");return(this._viewportTransformString||null)===r?e=this._viewportMatrix:(e=t.getCTM(),this._viewportMatrix=e,this._viewportTransformString=r),$e.createSVGMatrix(e)}e=$e.createSVGMatrix(e);var n=$e.matrixToTransformString(e);return t.setAttribute("transform",n),this._viewportMatrix=e,this._viewportTransformString=t.getAttribute("transform"),this},clientMatrix:function(){return $e.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,t,r){if(e instanceof wr)for(var n=e.model,i=this.model.getConnectedLinks(n),s=0,o=i.length;s<o;s++){var a=i[s],u=this.findViewByModel(a);if(u){var c=["UPDATE"];a.getTargetCell()===n&&c.push("TARGET"),a.getSourceCell()===n&&c.push("SOURCE");var f=Math.max(t+1,u.UPDATE_PRIORITY);this.scheduleViewUpdate(u,u.getFlag(c),f,r)}}},forcePostponedViewUpdate:function(e,t){if(!e||!(e instanceof wr))return!1;var r=e.model;if(r.isElement())return!1;if((t&e.getFlag(["SOURCE","TARGET"]))===0){var n={silent:!0},i=0,s=this.findViewByModel(r.getSourceCell());s&&!this.isViewMounted(s)&&(i=this.dumpView(s,n),e.updateEndMagnet("source"));var o=0,a=this.findViewByModel(r.getTargetCell());if(a&&!this.isViewMounted(a)&&(o=this.dumpView(a,n),e.updateEndMagnet("target")),i===0&&o===0)return!this.dumpView(e,n)}return!1},requestViewUpdate:function(e,t,r,n){n||(n={}),this.scheduleViewUpdate(e,t,r,n);var i=this.isAsync();if(!(this.isFrozen()||i&&n.async!==!1)&&!this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES)){var s=this.updateViews(n);i&&this.notifyAfterRender(s,n)}},scheduleViewUpdate:function(e,t,r,n){const{_updates:i,options:s}=this;i.idle&&s.autoFreeze&&(i.idle=!1,this.unfreeze());const{FLAG_REMOVE:o,FLAG_INSERT:a,UPDATE_PRIORITY:u,cid:c}=e;let f=i.priorities[r];if(f||(f=i.priorities[r]={}),r>u)for(let y=r-1;y>=u;y--){const m=i.priorities[y];!m||!(c in m)||(f[c]|=m[c],delete m[c])}let h=f[c]||0;if((h&t)===t)return;h||i.count++,t&o&&h&a?f[c]^=a:t&a&&h&o&&(f[c]^=o),f[c]|=t;const g=s.onViewUpdate;typeof g=="function"&&g.call(this,e,t,r,n||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var t=this._updates,r=e.cid,n=t.priorities[e.UPDATE_PRIORITY],i=this.registerMountedView(e)|n[r];return delete n[r],i},dumpView:function(e,t={}){const r=this.dumpViewUpdate(e);if(!r)return 0;const n=!t.silent;n&&this.notifyBeforeRender(t);const i=this.updateView(e,r,t);if(n){const s={updated:1,priority:e.UPDATE_PRIORITY};this.notifyAfterRender(s,t)}return i},updateView:function(e,t,r){if(!e)return 0;const{FLAG_REMOVE:n,FLAG_INSERT:i,FLAG_INIT:s,model:o}=e;if(e instanceof wr){if(t&n)return this.removeView(o),0;if(t&i){const a=!!(t&s);a&&(t^=s),this.insertView(e,a),t^=i}}return t?e.confirmUpdate(t,r||{}):0},requireView:function(e,t){var r=this.findViewByModel(e);return r?(this.dumpView(r,t),r):null},registerUnmountedView:function(e){var t=e.cid,r=this._updates;if(t in r.unmounted)return 0;var n=r.unmounted[t]|=e.FLAG_INSERT;return r.unmountedCids.push(t),delete r.mounted[t],n},registerMountedView:function(e){var t=e.cid,r=this._updates;if(t in r.mounted)return 0;r.mounted[t]=!0,r.mountedCids.push(t);var n=r.unmounted[t]||0;return delete r.unmounted[t],n},isViewMounted:function(e){if(!e)return!1;var t=e.cid,r=this._updates;return t in r.mounted},dumpViews:function(e){var t=Os({},e,{viewport:null});this.checkViewport(t),this.updateViews(t)},updateViews:function(e){this.notifyBeforeRender(e);let t,r=0,n=0,i=pp;do n++,t=this.updateViewsBatch(e),r+=t.updated,i=Math.min(t.priority,i);while(!t.empty);const s={updated:r,batches:n,priority:i};return this.notifyAfterRender(s,e),s},hasScheduledUpdates:function(){const e=this._updates.priorities,t=Object.keys(e);let r=t.length;for(;r>0&&r--;)for(let n in e[t[r]])return!0;return!1},updateViewsAsync:function(e,t){e||(e={}),t||(t={processed:0,priority:pp});const{_updates:r,options:n}=this,i=r.id;if(i){gE(i),t.processed===0&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);const s=this.updateViewsBatch(e),o=Os({},e,{mountBatchSize:t4-s.mounted,unmountBatchSize:t4-s.unmounted}),a=this.checkViewport(o),u=a.unmounted,c=a.mounted;let f=t.processed;const h=r.count;s.updated>0?(f+=s.updated+s.unmounted,s.processed=f,t.priority=Math.min(s.priority,t.priority),s.empty&&c===0?(s.unmounted+=u,s.mounted+=c,s.priority=t.priority,this.notifyAfterRender(s,e),t.processed=0,t.priority=pp,r.count=0):t.processed=f):r.idle||n.autoFreeze&&(this.freeze(),r.idle=!0,this.trigger("render:idle",e));const g=e.progress;if(h&&typeof g=="function"&&g.call(this,s.empty,f,h,s,this),r.id!==i)return}if(r.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");r.id=vE(this.updateViewsAsync,this,e,t)},notifyBeforeRender:function(e={}){let t=e.beforeRender;typeof t!="function"&&(t=this.options.beforeRender,typeof t!="function")||t.call(this,e,this)},notifyAfterRender:function(e,t={}){let r=t.afterRender;typeof r!="function"&&(r=this.options.afterRender),typeof r=="function"&&r.call(this,e,t,this),this.trigger("render:done",e,t)},updateViewsBatch:function(e){e||(e={});var t=e.batchSize||zpe,r=this._updates,n=0,i=0,s=0,o=0,a=pp,u=!0,c=this.options,f=r.priorities,h="viewport"in e?e.viewport:c.viewport;typeof h!="function"&&(h=null);var g=c.onViewPostponed;typeof g!="function"&&(g=null);var y=Object.keys(f);e:for(var m=0,_=y.length;m<_;m++){var x=+y[m],S=f[x];for(var E in S){if(n>=t){u=!1;break e}var A=Qu[E];if(!A){delete S[E];continue}var T=S[E];if((T&A.FLAG_REMOVE)===0){var I=E in r.unmounted;if(A.DETACHABLE&&h&&!h.call(this,A,!I,this)){I||(this.registerUnmountedView(A),this.detachView(A)),r.unmounted[E]|=T,delete S[E],s++;continue}I&&(T|=A.FLAG_INSERT,o++),T|=this.registerMountedView(A)}var N=this.updateView(A,T,e);if(N>0&&(S[E]=N,!g||!g.call(this,A,N,this)||S[E])){i++,u=!1;continue}a>x&&(a=x),n++,delete S[E]}}return{priority:a,updated:n,postponed:i,unmounted:s,mounted:o,empty:u}},getUnmountedViews:function(){const e=this._updates,t=Object.keys(e.unmounted),r=t.length,n=new Array(r);for(var i=0;i<r;i++)n[i]=Qu[t[i]];return n},getMountedViews:function(){const e=this._updates,t=Object.keys(e.mounted),r=t.length,n=new Array(r);for(var i=0;i<r;i++)n[i]=Qu[t[i]];return n},checkUnmountedViews:function(e,t){t||(t={});var r=0;typeof e!="function"&&(e=null);for(var n=("mountBatchSize"in t)?t.mountBatchSize:1/0,i=this._updates,s=i.unmountedCids,o=i.unmounted,a=0,u=Math.min(s.length,n);a<u;a++){var c=s[a];if(c in o){var f=Qu[c];if(f){if(f.DETACHABLE&&e&&!e.call(this,f,!1,this)){s.push(c);continue}r++;var h=this.registerMountedView(f);h&&this.scheduleViewUpdate(f,h,f.UPDATE_PRIORITY,{mounting:!0})}}}return s.splice(0,a),r},checkMountedViews:function(e,t){t||(t={});var r=0;if(typeof e!="function")return r;for(var n=("unmountBatchSize"in t)?t.unmountBatchSize:1/0,i=this._updates,s=i.mountedCids,o=i.mounted,a=0,u=Math.min(s.length,n);a<u;a++){var c=s[a];if(c in o){var f=Qu[c];if(f){if(!f.DETACHABLE||e.call(this,f,!0,this)){s.push(c);continue}r++;var h=this.registerUnmountedView(f);h&&this.detachView(f)}}}return s.splice(0,a),r},checkViewVisibility:function(e,t={}){let r="viewport"in t?t.viewport:this.options.viewport;typeof r!="function"&&(r=null);const n=this._updates,{mounted:i,unmounted:s}=n,o=!e.DETACHABLE||!r||r.call(this,e,!1,this);let a=!1,u=!1;if(e.cid in i&&!o){this.registerUnmountedView(e)&&this.detachView(e);const h=n.mountedCids.indexOf(e.cid);n.mountedCids.splice(h,1),a=!0}if(!a&&e.cid in s&&o){const f=n.unmountedCids.indexOf(e.cid);n.unmountedCids.splice(f,1);var c=this.registerMountedView(e);c&&this.scheduleViewUpdate(e,c,e.UPDATE_PRIORITY,{mounting:!0}),u=!0}return{mounted:u?1:0,unmounted:a?1:0}},checkViewport:function(e){var t=Os({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),r="viewport"in t?t.viewport:this.options.viewport,n=this.checkMountedViews(r,t);if(n>0){var i=this._updates.unmountedCids;t.mountBatchSize=Math.min(i.length-n,t.mountBatchSize)}var s=this.checkUnmountedViews(r,t);return{mounted:s,unmounted:n}},freeze:function(e){e||(e={});var t=this._updates,r=e.key,n=this.options.frozen,i=t.freezeKey;if(r&&r!==i){if(n&&i)return;t.freezeKey=r,t.keyFrozen=n}this.options.frozen=!0;var s=t.id;t.id=null,this.isAsync()&&s&&gE(s)},unfreeze:function(e){e||(e={});var t=this._updates,r=e.key,n=t.freezeKey;r&&n&&r!==n||(t.freezeKey=null,!(r&&r===n&&t.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=t.keyFrozen=!1,t.sort&&(this.sortViews(),t.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===nl.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,t=e.width,r=e.height;return fs(t)||(t=this.el.clientWidth),fs(r)||(r=this.el.clientHeight),{width:t,height:r}},setDimensions:function(e,t){const{options:r}=this,{width:n,height:i}=r;let s=e===void 0?n:e,o=t===void 0?i:t;if(n===s&&i===o)return;r.width=s,r.height=o,this._setDimensions();const a=this.getComputedSize();this.trigger("resize",a.width,a.height)},_setDimensions:function(){const{options:e}=this;let t=e.width,r=e.height;fs(t)&&(t=Math.round(t)),fs(r)&&(r=Math.round(r)),this.$el.css({width:t===null?"":t,height:r===null?"":r})},setOrigin:function(e,t){return this.translate(e||0,t||0)},fitToContent:function(e,t,r,n){Wr(e)?n=e:n=jt({gridWidth:e,gridHeight:t,padding:r},n);const{x:i,y:s,width:o,height:a}=this.getFitToContentArea(n),{sx:u,sy:c}=this.scale();return this.setOrigin(-i*u,-s*c),this.setDimensions(o*u,a*c),new mt(i,s,o,a)},getFitToContentArea:function(e={}){const t=e.gridWidth||1,r=e.gridHeight||1,n=hc(e.padding||0),i=Math.max(e.minWidth||0,t),s=Math.max(e.minHeight||0,r),o=e.maxWidth||Number.MAX_VALUE,a=e.maxHeight||Number.MAX_VALUE,u=e.allowNewOrigin,c="contentArea"in e?new mt(e.contentArea):this.getContentArea(e),{sx:f,sy:h}=this.scale();c.x*=f,c.y*=h,c.width*=f,c.height*=h;let g=Math.ceil((c.width+c.x)/t),y=Math.ceil((c.height+c.y)/r);e.allowNegativeBottomRight||(g=Math.max(g,1),y=Math.max(y,1)),g*=t,y*=r;let m=0;(u==="negative"&&c.x<0||u==="positive"&&c.x>=0||u==="any")&&(m=Math.ceil(-c.x/t)*t,m+=n.left,g+=m);let _=0;return(u==="negative"&&c.y<0||u==="positive"&&c.y>=0||u==="any")&&(_=Math.ceil(-c.y/r)*r,_+=n.top,y+=_),g+=n.right,y+=n.bottom,g=Math.max(g,i),y=Math.max(y,s),g=Math.min(g,o),y=Math.min(y,a),new mt(-m/f,-_/h,g/f,y/h)},transformToFitContent:function(e){e||(e={});let t,r;if("contentArea"in e){const x=e.contentArea;t=this.localToPaperRect(x),r=new pe(x)}else t=this.getContentBBox(e),r=this.paperToLocalPoint(t);if(!t.width||!t.height)return;Os(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});const n=hc(e.padding),i=e.minScaleX||e.minScale,s=e.maxScaleX||e.maxScale,o=e.minScaleY||e.minScale,a=e.maxScaleY||e.maxScale;let u;if(e.fittingBBox)u=e.fittingBBox;else{const x=this.translate(),S=this.getComputedSize();u={x:x.tx,y:x.ty,width:S.width,height:S.height}}u=new mt(u).moveAndExpand({x:n.left,y:n.top,width:-n.left-n.right,height:-n.top-n.bottom});const c=this.scale();let f=u.width/t.width*c.sx,h=u.height/t.height*c.sy;if(e.preserveAspectRatio&&(f=h=Math.min(f,h)),e.scaleGrid){const x=e.scaleGrid;f=x*Math.floor(f/x),h=x*Math.floor(h/x)}f=Math.min(s,Math.max(i,f)),h=Math.min(a,Math.max(o,h));const g={x:f/c.sx,y:h/c.sy},y=this.options.origin;let m=u.x-r.x*f-y.x,_=u.y-r.y*h-y.y;switch(e.verticalAlign){case"middle":_=_+(u.height-t.height*g.y)/2;break;case"bottom":_=_+(u.height-t.height*g.y);break}switch(e.horizontalAlign){case"middle":m=m+(u.width-t.width*g.x)/2;break;case"right":m=m+(u.width-t.width*g.x);break}this.scale(f,h),this.translate(m,_)},scaleContentToFit:function(e){this.transformToFitContent(e)},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new mt:$e(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){const{restrictTranslate:t}=this.options;let r;return fn(t)?r=t.apply(this,e):t===!0?r=this.getArea():t?r=new mt(t):r=null,r},createViewForModel:function(e){const{options:t}=this;var r,n,i=t.cellViewNamespace,s=e.get("type")+"View",o=gh(i,s,".");e.isLink()?(r=t.linkView,n=Hi):(r=t.elementView,n=_i);var a=r.prototype instanceof ei.View?o||r:r.call(this,e)||o||n;return new a({model:e,interactive:t.interactive,labelsLayer:t.labelsLayer===!0?Js.LABELS:t.labelsLayer})},removeView:function(e){const{id:t}=e,{_views:r,_updates:n}=this,i=r[t];if(i){var{cid:s}=i;const{mounted:o,unmounted:a}=n;i.remove(),delete r[t],delete o[s],delete a[s]}return i},renderView:function(e,t){const{id:r}=e,n=this._views;let i,s,o=!0;return r in n&&(i=n[r],i.model===e?(s=i.FLAG_INSERT,o=!1):this.removeView(e)),o&&(i=n[r]=this.createViewForModel(e),i.paper=this,s=this.registerUnmountedView(i)|this.FLAG_INIT|i.getFlag(Qn(i,"initFlag"))),this.requestViewUpdate(i,s,i.UPDATE_PRIORITY,t),i},onImageDragStart:function(){return!1},resetViews:function(e,t){t||(t={}),e||(e=[]),this._resetUpdates(),this.removeViews();const r=this.options.autoFreeze?null:"reset";this.freeze({key:r});for(var n=0,i=e.length;n<i;n++)this.renderView(e[n],t);this.unfreeze({key:r}),this.sortViews()},removeViews:function(){To(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen()){this._updates.sort=!0;return}this.sortViewsExact()}},sortViewsExact:function(){var e=It(this.cells).children("[model-id]"),t=this.model.get("cells");yhe(e,function(r,n){var i=t.get(r.getAttribute("model-id")),s=t.get(n.getAttribute("model-id")),o=i.attributes.z||0,a=s.attributes.z||0;return o===a?0:o<a?-1:1})},insertView:function(e,t){const r=this.getLayerView(Js.CELLS),{el:n,model:i}=e;switch(this.options.sorting){case nl.APPROX:r.insertSortedNode(n,i.get("z"));break;case nl.EXACT:default:r.insertNode(n);break}e.onMount(t)},detachView(e){e.unmount(),e.onDetach()},scale:function(e,t,r,n){if(e===void 0)return $e.matrixToScale(this.matrix());t===void 0&&(t=e),r===void 0&&(r=0,n=0);var i=this.translate();if(r||n||i.tx||i.ty){var s=i.tx-r*(e-1),o=i.ty-n*(t-1);this.translate(s,o)}e=Math.max(e||0,this.MIN_SCALE),t=Math.max(t||0,this.MIN_SCALE);var a=this.matrix();return a.a=e,a.d=t,this.matrix(a),this.trigger("scale",e,t,r,n),this},rotate:function(e,t,r){if(e===void 0)return $e.matrixToRotate(this.matrix());if(t===void 0){var n=this.cells.getBBox();t=n.width/2,r=n.height/2}var i=this.matrix().translate(t,r).rotate(e).translate(-t,-r);return this.matrix(i),this},translate:function(e,t){if(e===void 0)return $e.matrixToTranslate(this.matrix());const{options:r}=this,{origin:n,drawGrid:i}=r;e||(e=0),t||(t=0);const s=this.matrix();if(s.e===e&&s.f===t)return this;s.e=e,s.f=t,this.matrix(s);const{tx:o,ty:a}=this.translate();return n.x=o,n.y=a,this.trigger("translate",o,a),i&&this.drawGrid(),this},findView:function(e){var t=Li(e)?this.cells.querySelector(e):e instanceof It?e[0]:e,r=this.findAttribute("model-id",t);if(r)return this._views[r]},findViewByModel:function(e){var t=Li(e)||fs(e)?e:e&&e.id;return this._views[t]},findViewsFromPoint:function(e){e=new pe(e);var t=this.model.getElements().map(this.findViewByModel,this);return t.filter(function(r){return r&&r.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,t){t=Os(t||{},{strict:!1}),e=new mt(e);var r=this.model.getElements().map(this.findViewByModel,this),n=t.strict?"containsRect":"intersect";return r.filter(function(i){return i&&e[n](i.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...t){typeof e=="string"&&this.trigger("tools:event",e,...t)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,t){return this.clientToLocalPoint(e,t).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,t){var r=new pe(e,t),n=$e.transformPoint(r,this.matrix());return n},localToPaperRect:function(e,t,r,n){var i=new mt(e,t,r,n),s=$e.transformRect(i,this.matrix());return s},paperToLocalPoint:function(e,t){var r=new pe(e,t),n=$e.transformPoint(r,this.matrix().inverse());return n},paperToLocalRect:function(e,t,r,n){var i=new mt(e,t,r,n),s=$e.transformRect(i,this.matrix().inverse());return s},localToClientPoint:function(e,t){var r=new pe(e,t),n=$e.transformPoint(r,this.clientMatrix());return n},localToClientRect:function(e,t,r,n){var i=new mt(e,t,r,n),s=$e.transformRect(i,this.clientMatrix());return s},clientToLocalPoint:function(e,t){var r=new pe(e,t),n=$e.transformPoint(r,this.clientMatrix().inverse());return n},clientToLocalRect:function(e,t,r,n){var i=new mt(e,t,r,n),s=$e.transformRect(i,this.clientMatrix().inverse());return s},localToPagePoint:function(e,t){return this.localToPaperPoint(e,t).offset(this.pageOffset())},localToPageRect:function(e,t,r,n){return this.localToPaperRect(e,t,r,n).offset(this.pageOffset())},pageToLocalPoint:function(e,t){var r=new pe(e,t),n=r.difference(this.pageOffset());return this.paperToLocalPoint(n)},pageToLocalRect:function(e,t,r,n){var i=this.pageOffset(),s=new mt(e,t,r,n);return s.x-=i.x,s.y-=i.y,this.paperToLocalRect(s)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new pe(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof Hi))throw new Error("Must provide a linkView.");var t=e.model,r=this.options,n=this.model,i=n.constructor.validations;return!(!r.multiLinks&&!i.multiLinks.call(this,n,t)||!r.linkPinning&&!i.linkPinning.call(this,n,t)||typeof r.allowLink=="function"&&!r.allowLink.call(this,e,this))},getDefaultLink:function(e,t){return fn(this.options.defaultLink)?this.options.defaultLink.call(this,e,t):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:t,type:r}=e;const{highlighting:n,highlighterNamespace:i}=this.options;if(t===void 0){if(!n||r&&(t=n[r],t===!1))return!1;t||(t=n.default)}if(!t)return!1;Li(t)&&(t={name:t});const s=t.name,o=i[s];if(!o)throw new Error('Unknown highlighter ("'+s+'")');if(typeof o.highlight!="function")throw new Error('Highlighter ("'+s+'") is missing required highlight() method');if(typeof o.unhighlight!="function")throw new Error('Highlighter ("'+s+'") is missing required unhighlight() method');return{highlighter:o,options:t.options||{},name:s}},onCellHighlight:function(e,t,r){const n=this.resolveHighlighter(r);if(!n)return;const{highlighter:i,options:s}=n;i.highlight(e,t,s)},onCellUnhighlight:function(e,t,r){const n=this.resolveHighlighter(r);if(!n)return;const{highlighter:i,options:s}=n;i.unhighlight(e,t,s)},pointerdblclick:function(e){e.preventDefault(),e=Zn(e);var t=this.findView(e.target);if(!this.guard(e,t)){var r=this.snapToGrid(e.clientX,e.clientY);t?t.pointerdblclick(e,r.x,r.y):this.trigger("blank:pointerdblclick",e,r.x,r.y)}},pointerclick:function(e){var t=this.eventData(e);if(t.mousemoved<=this.options.clickThreshold){e=Zn(e);var r=this.findView(e.target);if(this.guard(e,r))return;var n=this.snapToGrid(e.clientX,e.clientY);r?r.pointerclick(e,n.x,n.y):this.trigger("blank:pointerclick",e,n.x,n.y)}},contextmenu:function(e){if(this.options.preventContextMenu&&e.preventDefault(),this.contextMenuFired){this.contextMenuFired=!1;return}e=Zn(e),this.contextMenuTrigger(e)},contextMenuTrigger:function(e){var t=this.findView(e.target);if(!this.guard(e,t)){var r=this.snapToGrid(e.clientX,e.clientY);t?t.contextmenu(e,r.x,r.y):this.trigger("blank:contextmenu",e,r.x,r.y)}},pointerdown:function(e){e=Zn(e);const{target:t,button:r}=e,n=this.findView(t),i=r===2;if(n){if(!i&&this.guard(e,n))return;const s=this.FORM_CONTROL_TAG_NAMES.includes(t.tagName);this.options.preventDefaultViewAction&&!s&&e.preventDefault(),s&&n.preventDefaultInteraction(e);const o=this.customEventTrigger(e,n);if(o){if(o.isPropagationStopped())return;e.data=o.data}const a=t.closest("[magnet]");if(a&&n.el!==a&&n.el.contains(a)){const u=Zn(It.Event(e.originalEvent,{data:e.data,currentTarget:a}));if(this.onmagnet(u),u.isDefaultPrevented()&&e.preventDefault(),u.isPropagationStopped()){if(i)return;this.delegateDragEvents(n,u.data);return}e.data=u.data}}if(i){this.contextMenuFired=!0;const s=It.Event(e.originalEvent,{type:"contextmenu",data:e.data});this.contextMenuTrigger(s)}else{const s=this.snapToGrid(e.clientX,e.clientY);n?n.pointerdown(e,s.x,s.y):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,s.x,s.y)),this.delegateDragEvents(n,e.data)}},pointermove:function(e){var t=this.eventData(e);t.mousemoved||(t.mousemoved=0,this.undelegateEvents());var r=++t.mousemoved;if(!(r<=this.options.moveThreshold)){e=Zn(e);var n=this.snapToGrid(e.clientX,e.clientY),i=t.sourceView;i?i.pointermove(e,n.x,n.y):this.trigger("blank:pointermove",e,n.x,n.y),this.eventData(e,t)}},pointerup:function(e){this.undelegateDocumentEvents();var t=Zn(e),r=this.snapToGrid(t.clientX,t.clientY),n=this.eventData(e).sourceView;n?n.pointerup(t,r.x,r.y):this.trigger("blank:pointerup",t,r.x,r.y),t.isPropagationStopped()||this.pointerclick(It.Event(e.originalEvent,{type:"click",data:e.data})),this.delegateEvents()},mouseover:function(e){e=Zn(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=Zn(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=Zn(e);const{target:t,relatedTarget:r,currentTarget:n}=e,i=this.findView(t);if(this.guard(e,i))return;const s=this.findView(r);i&&(s===i||(i.mouseenter(e),this.el.contains(r)))||s||n===this.el&&this.trigger("paper:mouseenter",e)},mouseleave:function(e){e=Zn(e);const{target:t,relatedTarget:r,currentTarget:n}=e,i=this.findView(t);if(this.guard(e,i))return;const s=this.findView(r);i&&(s===i||(i.mouseleave(e),this.el.contains(r)))||s||n===this.el&&this.trigger("paper:mouseleave",e)},_processMouseWheelEvtBuf:rhe(function(){const{event:e,deltas:t}=this._mw_evt_buffer,r=t.reduce((o,a)=>o+phe(a,Bpe),0),n=Math.pow(.995,r),{x:i,y:s}=this.clientToLocalPoint(e.clientX,e.clientY);this.trigger("paper:pinch",e,i,s,n),this._mw_evt_buffer={event:null,deltas:[]}},e4,{maxWait:e4}),mousewheel:function(e){e=Zn(e);const t=this.findView(e.target);if(this.guard(e,t))return;const r=e.originalEvent,n=this.snapToGrid(r.clientX,r.clientY),{deltaX:i,deltaY:s}=dhe(r),o=this._events["paper:pinch"];if(e.ctrlKey&&o&&o.length>0)r.preventDefault(),this._mw_evt_buffer.event=r,this._mw_evt_buffer.deltas.push(s),this._processMouseWheelEvtBuf();else{const a=Math.max(-1,Math.min(1,r.wheelDelta));t?t.mousewheel(e,n.x,n.y,a):this.trigger("blank:mousewheel",e,n.x,n.y,a),this.trigger("paper:pan",e,i,s)}},onevent:function(e){var t=e.currentTarget,r=t.getAttribute("event");if(r){var n=this.findView(t);if(n){if(e=Zn(e),this.guard(e,n))return;var i=this.snapToGrid(e.clientX,e.clientY);n.onevent(e,r,i.x,i.y)}}},magnetEvent:function(e,t){var r=e.currentTarget,n=r.getAttribute("magnet");if(n){var i=this.findView(r);if(i){if(e=Zn(e),this.guard(e,i))return;var s=this.snapToGrid(e.clientX,e.clientY);t.call(this,i,e,r,s.x,s.y)}}},onmagnet:function(e){if(e.button===2){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;const t=It.Event(e.originalEvent,{type:"contextmenu",data:e.data,currentTarget:e.currentTarget});this.magnetContextMenuTrigger(t),t.isPropagationStopped()&&e.stopPropagation()}else this.magnetEvent(e,function(t,r,n,i,s){t.onmagnet(r,i,s)})},magnetpointerdblclick:function(e){this.magnetEvent(e,function(t,r,n,i,s){t.magnetpointerdblclick(r,n,i,s)})},magnetcontextmenu:function(e){if(this.options.preventContextMenu&&e.preventDefault(),this.magnetContextMenuFired){this.magnetContextMenuFired=!1;return}this.magnetContextMenuTrigger(e)},magnetContextMenuTrigger:function(e){this.magnetEvent(e,function(t,r,n,i,s){t.magnetcontextmenu(r,n,i,s)})},onlabel:function(e){var t=e.currentTarget,r=this.findView(t);if(!r||(e=Zn(e),this.guard(e,r)))return;const n=this.customEventTrigger(e,r,t);if(n){if(n.isPropagationStopped())return;e.data=n.data}var i=this.snapToGrid(e.clientX,e.clientY);r.onlabel(e,i.x,i.y)},getPointerArgs(e){const t=Zn(e),{x:r,y:n}=this.snapToGrid(t.clientX,t.clientY);return[t,r,n]},delegateDragEvents:function(e,t){t||(t={}),this.eventData({data:t},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,t)},guard:function(e,t){if(e.type==="mousedown"&&e.button===2||this.options.guard&&this.options.guard(e,t))return!0;if(e.data&&e.data.guarded!==void 0)return e.data.guarded;const{target:r}=e;return this.GUARDED_TAG_NAMES.includes(r.tagName)?!0:!(t&&t.model&&t.model instanceof fa||this.svg===r||this.el===r||It.contains(this.svg,r))},setGridSize:function(e){const{options:t}=this;return t.gridSize=e,t.drawGrid&&!t.drawGridSize&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:$e("svg",{width:"100%",height:"100%"},$e("defs")),patterns:{},add:function(e,t){$e(this.root.node.childNodes[0]).append(t),this.patterns[e]=t,this.root.append($e("rect",{width:"100%",height:"100%",fill:"url(#"+e+")"}))},get:function(e){return this.patterns[e]},exist:function(e){return this.patterns[e]!==void 0}}),this._gridCache},setGrid:function(e){this.clearGrid(),this._gridCache=null,this._gridSettings=[];var t=Array.isArray(e)?e:[e||{}];return t.forEach(function(r){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(r))},this),this},_resolveDrawGridOption:function(e){var t=this.constructor.gridPatterns;if(Li(e)&&Array.isArray(t[e]))return t[e].map(function(u){return jt({},u)});var r=e||{args:[{}]},n=Array.isArray(r),i=r.name;if(!n&&!i&&!r.markup&&(i="dot"),i&&Array.isArray(t[i])){var s=t[i].map(function(u){return jt({},u)}),o=Array.isArray(r.args)?r.args:[r.args||{}];Os(o[0],fc(e,"args"));for(var a=0;a<o.length;a++)s[a]&&jt(s[a],o[a]);return s}return n?r:[r]},drawGrid:function(e){const t=this.options.drawGridSize||this.options.gridSize;if(t<=1)return this.clearGrid();var r=Array.isArray(e)?e:[e],n=this.matrix(),i=this._getGridRefs();this._gridSettings.forEach(function(o,a){var u="pattern_"+a,c=ni(o,r[a],{sx:n.a||1,sy:n.d||1,ox:n.e||0,oy:n.f||0});c.width=t*(n.a||1)*(c.scaleFactor||1),c.height=t*(n.d||1)*(c.scaleFactor||1),i.exist(u)||i.add(u,$e("pattern",{id:u,patternUnits:"userSpaceOnUse"},$e(c.markup)));var f=i.get(u);fn(c.update)&&c.update(f.node.childNodes[0],c);var h=c.ox%c.width;h<0&&(h+=c.width);var g=c.oy%c.height;g<0&&(g+=c.height),f.attr({x:h,y:g,width:c.width,height:c.height})});var s=new XMLSerializer().serializeToString(i.root.node);return s="url(data:image/svg+xml;base64,"+btoa(s)+")",this.$grid.css("backgroundImage",s),this},updateBackgroundImage:function(e){e=e||{};var t=e.position||"center",r=e.size||"auto auto",n=this.scale(),i=this.translate();if(Wr(t)){var s=i.tx+n.sx*(t.x||0),o=i.ty+n.sy*(t.y||0);t=s+"px "+o+"px"}Wr(r)&&(r=new mt(r).scale(n.sx,n.sy),r=r.width+"px "+r.height+"px"),this.$background.css({backgroundSize:r,backgroundPosition:t})},drawBackgroundImage:function(e,t){if(!(e instanceof HTMLImageElement)){this.$background.css("backgroundImage","");return}if(!(!this._background||this._background.id!==t.id)){t=t||{};var r,n=t.size,i=t.repeat||"no-repeat",s=t.opacity||1,o=Math.abs(t.quality)||1,a=this.constructor.backgroundPatterns[ahe(i)];if(fn(a)){e.width*=o,e.height*=o;var u=a(e,t);if(!(u instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");r=u.toDataURL("image/png"),i="repeat",Wr(n)?(n.width*=u.width/e.width,n.height*=u.height/e.height):n===void 0&&(t.size={width:u.width/o,height:u.height/o})}else r=e.src,n===void 0&&(t.size={width:e.width,height:e.height});this.$background.css({opacity:s,backgroundRepeat:i,backgroundImage:"url("+r+")"}),this.updateBackgroundImage(t)}},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(e=e||{},this.updateBackgroundColor(e.color),e.image){e=this._background=Ks(e),ll(e);var t=document.createElement("img");t.onload=this.drawBackgroundImage.bind(this,t,e),t.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,To(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!Wr(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var t=e.id,r=e.name;if(t||(t=r+this.svg.id+op(JSON.stringify(e))),!this.isDefined(t)){var n=bhe,i=n[r]&&n[r](e.args||{});if(!i)throw new Error("Non-existing filter "+r);var s=jt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},e.attrs,{id:t});$e(i,s).appendTo(this.defs)}return t},defineGradient:function(e){if(!Wr(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:t,defs:r}=this,{type:n,id:i=n+t.id+op(JSON.stringify(e)),stops:s,attrs:o={}}=e;if(this.isDefined(i))return i;const a=Fr(s).map(({offset:c,color:f,opacity:h})=>$e("stop").attr({offset:c,"stop-color":f,"stop-opacity":Number.isFinite(h)?h:1})),u=$e(n,o,a);return u.id=i,u.appendTo(r),i},definePattern:function(e){if(!Wr(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:t,defs:r}=this,{id:n=t.id+op(JSON.stringify(e)),markup:i,attrs:s={}}=e;if(!i)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(n))return n;const o=$e("pattern",{patternUnits:"userSpaceOnUse"});if(o.id=n,o.attr(s),typeof i=="string")o.append($e(i));else{const{fragment:a}=Up(i);o.append(a)}return o.appendTo(r),n},defineMarker:function(e){if(!Wr(e))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");const{svg:t,defs:r}=this,{id:n=t.id+op(JSON.stringify(e)),markup:i,attrs:s={},markerUnits:o="userSpaceOnUse"}=e;if(this.isDefined(n))return n;const a=$e("marker",{orient:"auto",overflow:"visible",markerUnits:o});a.id=n,a.attr(s);let u;if(i){let h;if(typeof i=="string")h=$e(i),h=Array.isArray(h)?h:[h];else{const{fragment:g}=Up(i);h=$e(g).children()}h.length>1?u=$e("g").append(h):u=h[0]}else{const{type:h="path"}=e;u=$e(h)}const c=fc(e,"type","id","markup","attrs","markerUnits");return Object.keys(c).forEach(h=>{const g=c[h],y=u.attr(h);if(y==null)u.attr(h,g);else switch(h){case"transform":u.attr(h,g+" "+y);break}}),u.appendTo(a),a.appendTo(r),n},customEventTrigger:function(e,t,r=t.el){const n=e.target.closest("[event]");if(n&&r!==n&&t.el.contains(n)){const i=Zn(It.Event(e.originalEvent,{data:e.data,currentTarget:n}));return this.onevent(i),i.isDefaultPrevented()&&e.preventDefault(),i}return null}},{sorting:nl,Layers:Js,backgroundPatterns:{flipXy:function(e){var t=document.createElement("canvas"),r=e.width,n=e.height;t.width=2*r,t.height=2*n;var i=t.getContext("2d");return i.drawImage(e,0,0,r,n),i.setTransform(-1,0,0,-1,t.width,t.height),i.drawImage(e,0,0,r,n),i.setTransform(-1,0,0,1,t.width,0),i.drawImage(e,0,0,r,n),i.setTransform(1,0,0,-1,0,t.height),i.drawImage(e,0,0,r,n),t},flipX:function(e){var t=document.createElement("canvas"),r=e.width,n=e.height;t.width=r*2,t.height=n;var i=t.getContext("2d");return i.drawImage(e,0,0,r,n),i.translate(2*r,0),i.scale(-1,1),i.drawImage(e,0,0,r,n),t},flipY:function(e){var t=document.createElement("canvas"),r=e.width,n=e.height;t.width=r,t.height=n*2;var i=t.getContext("2d");return i.drawImage(e,0,0,r,n),i.translate(0,2*n),i.scale(1,-1),i.drawImage(e,0,0,r,n),t},watermark:function(e,t){t=t||{};var r=e.width,n=e.height,i=document.createElement("canvas");i.width=r*3,i.height=n*3;for(var s=i.getContext("2d"),o=fs(t.watermarkAngle)?-t.watermarkAngle:-20,a=gs(o),u=i.width/4,c=i.height/4,f=0;f<4;f++)for(var h=0;h<4;h++)(f+h)%2>0&&(s.setTransform(1,0,0,1,(2*f-1)*u,(2*h-1)*c),s.rotate(a),s.drawImage(e,-r/2,-n/2,r,n));return i}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,t){$e(e).attr({width:t.thickness*t.sx,height:t.thickness*t.sy,fill:t.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,t){var r=t.sx<=1?t.thickness*t.sx:t.thickness;$e(e).attr({width:r,height:r,fill:t.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,t){var r,n=t.width,i=t.height,s=t.thickness;n-s>=0&&i-s>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",$e(e).attr({d:r,stroke:t.color,"stroke-width":t.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,t){var r,n=t.width,i=t.height,s=t.thickness;n-s>=0&&i-s>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",$e(e).attr({d:r,stroke:t.color,"stroke-width":t.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(e,t){var r,n=t.width,i=t.height,s=t.thickness;n-s>=0&&i-s>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",$e(e).attr({d:r,stroke:t.color,"stroke-width":t.thickness})}}]}}),dg=Ga.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var e=this.name;e&&this.vel.attr("data-tool-name",e)},configure:function(e,t){return this.relatedView=e,this.paper=e.paper,this.parentView=t,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(e){e&&e.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var e=this.options.focusOpacity;isFinite(e)&&(this.el.style.opacity=e),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(e){const{paper:t,relatedView:r}=this;return!t||!r?!0:t.guard(e,r)}}),Gpe=Ga.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(e){e=jt(this.options,e);var t=e.tools;if(!Array.isArray(t))return this;var r=e.relatedView;if(!(r instanceof wr))return this;for(var n=this.tools=[],i=0,s=t.length;i<s;i++){var o=t[i];o instanceof dg&&(o.configure(r,this),this.vel.append(o.el),n.push(o))}return this.isRendered=!1,r.requestUpdate(r.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(e){e||(e={});var t=this.tools;if(!t)return this;for(var r=this.isRendered,n=0,i=t.length;n<i;n++){var s=t[n];r?e.tool!==s.cid&&s.isVisible()&&s.update():s.render()}return this.isMounted()||this.mount(),r||(this.blurTool(),this.isRendered=!0),this},focusTool:function(e){var t=this.tools;if(!t)return this;for(var r=0,n=t.length;r<n;r++){var i=t[r];e===i?i.show():i.hide()}return this},blurTool:function(e){var t=this.tools;if(!t)return this;for(var r=0,n=t.length;r<n;r++){var i=t[r];i!==e&&!i.isVisible()&&(i.show(),i.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var e=this.tools;if(!e)return this;for(var t=0,r=e.length;t<r;t++)e[t].remove();this.tools=null},mount:function(){const{options:e,el:t}=this,{relatedView:r,layer:n=Js.TOOLS,z:i}=e;return r&&(n?r.paper.getLayerView(n).insertSortedNode(t,i):r.el.appendChild(t)),this}}),mh={exportElement:function(e){return e.size()},exportLink:function(e){var t=e.get("labelSize")||{},r={minLen:e.get("minLen")||1,weight:e.get("weight")||1,labelpos:e.get("labelPosition")||"c",labeloffset:e.get("labelOffset")||0,width:t.width||0,height:t.height||0};return r},importElement:function(e,t,r){var n=this.getCell(t),i=r.node(t);e.setPosition?e.setPosition(n,i):n.set("position",{x:i.x-i.width/2,y:i.y-i.height/2})},importLink:function(e,t,r){const i=this.getCell(t.name),s=r.edge(t),o=s.points||[],a=new pn(o);if(e.setVertices||e.setLinkVertices)if(fn(e.setVertices))e.setVertices(i,o);else{a.simplify({threshold:.001});const u=a.points.map(f=>f.toJSON()),c=u.length;i.set("vertices",u.slice(1,c-1))}if(e.setLabels&&"x"in s&&"y"in s){const u={x:s.x,y:s.y};if(fn(e.setLabels))e.setLabels(i,u,o);else{const c=a.closestPointLength(u),f=a.pointAtLength(c),h=c/a.length(),g=new pe(u).difference(f).toJSON();i.label(0,{position:{distance:h,offset:g}})}}},layout:function(e,t){var r;e instanceof Po?r=e:r=new Po().resetCells(e,{dry:!0,sort:!1}),e=null,t=Os(t||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink});const n=t.dagre||(typeof dagre<"u"?dagre:void 0);if(n===void 0)throw new Error('The the "dagre" utility is a mandatory dependency.');var i=mh.toGraphLib(r,{graphlib:t.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:t.exportElement,setEdgeLabel:t.exportLink,setEdgeName:function(f){return f.id}}),s={},o=t.marginX||0,a=t.marginY||0;if(t.rankDir&&(s.rankdir=t.rankDir),t.align&&(s.align=t.align),t.nodeSep&&(s.nodesep=t.nodeSep),t.edgeSep&&(s.edgesep=t.edgeSep),t.rankSep&&(s.ranksep=t.rankSep),t.ranker&&(s.ranker=t.ranker),o&&(s.marginx=o),a&&(s.marginy=a),i.setGraph(s),n.layout(i,{debugTiming:!!t.debugTiming}),r.startBatch("layout"),mh.fromGraphLib(i,{importNode:this.importElement.bind(r,t),importEdge:this.importLink.bind(r,t)}),t.resizeClusters){var u=i.nodes().filter(function(f){return i.children(f).length>0}).map(r.getCell.bind(r)).sort(function(f,h){return h.getAncestors().length-f.getAncestors().length});To(u,"fitToChildren",{padding:t.clusterPadding})}r.stopBatch("layout");var c=i.graph();return new mt(o,a,Math.abs(c.width-2*o),Math.abs(c.height-2*a))},fromGraphLib:function(e,t){t=t||{};var r=t.importNode||Mf,n=t.importEdge||Mf,i=this instanceof Po?this:new Po;return e.nodes().forEach(function(s){r.call(i,s,e,i,t)}),e.edges().forEach(function(s){n.call(i,s,e,i,t)}),i},toGraphLib:function(e,t){t=t||{};const r=t.graphlib||(typeof graphlib<"u"?graphlib:void 0);if(r===void 0)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var n=ohe(t,"directed","compound","multigraph"),i=new r.Graph(n),s=t.setNodeLabel||Mf,o=t.setEdgeLabel||Mf,a=t.setEdgeName||Mf,u=e.get("cells"),c=0,f=u.length;c<f;c++){var h=u.at(c);if(h.isLink()){var g=h.get("source"),y=h.get("target");if(!g.id||!y.id)break;i.setEdge(g.id,y.id,o(h),a(h))}else if(i.setNode(h.id,s(h)),i.isCompound()&&h.has("parent")){var m=h.get("parent");u.has(m)&&i.setParent(h.id,m)}}return i}};Po.prototype.toGraphLib=function(e){return mh.toGraphLib(this,e)};Po.prototype.fromGraphLib=function(e,t){return mh.fromGraphLib.call(this,e,t)};const wj={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(e,t){return this._tests[e]=t},test:function(e){var t=this._tests[e];if(!t)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var r=this._results[e];if(typeof r<"u")return r;try{r=t()}catch{r=!1}return this._results[e]=r,r}},ps=Di.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}});ps.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'});_i.extend({presentationAttributes:_i.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var e=_i.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(e,"SCALE")&&(this.resize(),e=this.removeFlag(e,"SCALE")),e}});ps.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'});ps.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'});ps.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'});ps.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'});ps.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'});ps.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'});const $pe=ps.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'});$pe.define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}});const Xp=wj.test("svgforeignobject");ps.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',Xp?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),ps.prototype.initialize.apply(this,arguments)},updateSize:function(e,t){this.attr({".fobj":jt({},t),div:{style:jt({},t)}})},updateContent:function(e,t){Xp?this.attr({".content":{html:mhe(t)}}):this.attr({".content":{text:t}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}});_i.extend({presentationAttributes:Xp?_i.prototype.presentationAttributes:_i.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var e=_i.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(e,"CONTENT")&&(this.updateContent(this.model),e=this.removeFlag(e,"CONTENT")),e},update:function(e,t){var r=this.model;if(Xp)_i.prototype.update.call(this,r,t);else{var n=fc(t||r.get("attrs"),".content");_i.prototype.update.call(this,r,n),(!t||Fa(t,".content"))&&this.updateContent(r,t)}},updateContent:function(e,t){var r=ni({},(t||e.get("attrs"))[".content"]);r=fc(r,"text");var n=KU(e.get("content"),e.get("size"),r,{svgDocument:this.paper.svg}),i=pE({},".content",r,"/");i[".content"].text=n,_i.prototype.update.call(this,e,i)}});Di.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]});const Upe=Di.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]});Di.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]});Di.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]});Di.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]});Di.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]});Di.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]});Di.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]});Di.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]});Di.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]});Di.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]});var US=10;Di.define("standard.Cylinder",{attrs:{body:{lateralArea:US,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:US,refRx:"50%",ry:US,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,t){if(e===void 0)return this.attr("body/lateralArea");var r=Ai(e),n={lateralArea:e},i=r?{refCy:e,refRy:e,cy:null,ry:null}:{refCy:null,refRy:null,cy:e,ry:e};return this.attr({body:n,top:i},t)}},{attributes:{lateralArea:{set:function(e,t){var r=Ai(e);r&&(e=parseFloat(e)/100);var n=t.x,i=t.y,s=t.width,o=t.height,a=s/2,u=r?o*e:e,c=$e.KAPPA,f=c*a,h=c*(r?o*e:e),g=n,y=n+s/2,m=n+s,_=i+u,x=_-u,S=i+o-u,E=i+o,A=["M",g,_,"L",g,S,"C",n,S+h,y-f,E,y,E,"C",y+f,E,m,S+h,m,S,"L",m,_,"C",m,_-h,y+f,x,y,x,"C",y-f,x,g,_-h,g,_,"Z"];return{d:A.join(" ")}}}}});var jpe={tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]},Hpe={tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},Wpe=wj.test("svgforeignobject")?jpe:Hpe;Di.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Wpe]},{attributes:{text:{set:function(e,t,r,n){if(r instanceof HTMLElement)r.textContent=e;else{var i=n.style||{},s={text:e,width:-5,height:"100%"},o=jt({textVerticalAnchor:"middle"},i);return ej.textWrap.set.call(this,s,t,r,o),{fill:i.color||null}}},position:function(e,t,r){if(r instanceof SVGElement)return t.center()}}}});const Sp=Zl.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]});Zl.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none",cursor:"pointer"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]});Zl.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none","pointer-events":"none"}},{tagName:"path",selector:"line",attributes:{fill:"none",cursor:"pointer"}}]});var n4=Ga.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick",dbltap:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(e,t){const{vel:r,options:n}=this,{scale:i}=n;let s=$e.createSVGMatrix().translate(e,t);i&&(s=s.scale(i)),r.transform(s,{absolute:!0})},onPointerDown:function(e){this.options.guard(e)||(e.stopPropagation(),e.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,e.data),this.trigger("will-change",this,e))},onPointerMove:function(e){this.trigger("changing",this,e)},onDoubleClick:function(e){this.trigger("remove",this,e)},onPointerUp:function(e){this.trigger("changed",this,e),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}});const Xpe=dg.extend({name:"vertices",options:{handleClass:n4,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0,scale:null},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},onRender:function(){return this.options.vertexAdding&&(this.renderChildren(),this.updatePath()),this.resetHandles(),this.renderHandles(),this},update:function(){var e=this.relatedView,t=e.model.vertices();return t.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var e=this.handles;if(this.handles=[],this.stopListening(),!!Array.isArray(e))for(var t=0,r=e.length;t<r;t++)e[t].remove()},renderHandles:function(){for(var e=this.relatedView,t=e.model.vertices(),r=0,n=t.length;r<n;r++){var i=t[r],s=new this.options.handleClass({index:r,paper:this.paper,scale:this.options.scale,guard:o=>this.guard(o)});s.render(),s.position(i.x,i.y),this.simulateRelatedView(s.el),s.vel.appendTo(this.el),this.handles.push(s),this.startHandleListening(s)}},updateHandles:function(){for(var e=this.relatedView,t=e.model.vertices(),r=0,n=t.length;r<n;r++){var i=t[r],s=this.handles[r];if(!s)return;s.position(i.x,i.y)}},updatePath:function(){var e=this.childNodes.connection;e&&e.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(e){var t=this.relatedView;t.can("vertexMove")&&(this.listenTo(e,"will-change",this.onHandleWillChange),this.listenTo(e,"changing",this.onHandleChanging),this.listenTo(e,"changed",this.onHandleChanged)),t.can("vertexRemove")&&this.listenTo(e,"remove",this.onHandleRemove)},getNeighborPoints:function(e){var t=this.relatedView,r=t.model.vertices(),n=e>0?r[e-1]:t.sourceAnchor,i=e<r.length-1?r[e+1]:t.targetAnchor;return{prev:new pe(n),next:new pe(i)}},onHandleWillChange:function(e,t){this.focus();const{relatedView:r,options:n}=this;r.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),n.stopPropagation||r.notifyPointerdown(...r.paper.getPointerArgs(t))},onHandleChanging:function(e,t){const{options:r,relatedView:n}=this;var i=e.options.index,[s,o,a]=n.paper.getPointerArgs(t),u={x:o,y:a};this.snapVertex(u,i),n.model.vertex(i,u,{ui:!0,tool:this.cid}),e.position(u.x,u.y),r.stopPropagation||n.notifyPointermove(s,o,a)},onHandleChanged:function(e,t){const{options:r,relatedView:n}=this;if(r.vertexAdding&&this.updatePath(),!!r.redundancyRemoval){var i=n.removeRedundantLinearVertices({ui:!0,tool:this.cid});i&&this.render(),this.blur(),n.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(t).vertexAdded&&n.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var[s,o,a]=n.paper.getPointerArgs(t);r.stopPropagation||n.notifyPointerup(s,o,a),n.checkMouseleave(s)}},snapVertex:function(e,t){var r=this.options.snapRadius;if(r>0){var n=this.getNeighborPoints(t),i=n.prev,s=n.next;Math.abs(e.x-i.x)<r?e.x=i.x:Math.abs(e.x-s.x)<r&&(e.x=s.x),Math.abs(e.y-i.y)<r?e.y=n.prev.y:Math.abs(e.y-s.y)<r&&(e.y=s.y)}},onHandleRemove:function(e,t){var r=e.options.index,n=this.relatedView;n.model.removeVertex(r,{ui:!0}),this.options.vertexAdding&&this.updatePath(),n.checkMouseleave(Zn(t))},onPathPointerDown:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=Zn(e),r=this.paper.snapToGrid(t.clientX,t.clientY).toJSON(),n=this.relatedView;n.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var i=n.getVertexIndex(r.x,r.y);this.snapVertex(r,i),n.model.insertVertex(i,r,{ui:!0,tool:this.cid}),this.update();var s=this.handles[i];this.eventData(t,{vertexAdded:!0}),s.onPointerDown(t)}},onRemove:function(){this.resetHandles()}},{VertexHandle:n4});function Ype(e,t){const{model:r}=e;return t?r.getBBox():r.isLink()?e.getConnection().bbox():e.getNodeUnrotatedBBox(e.el)}const xj=dg.extend({tagName:"path",xAxisVector:new pe(1,0),events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{scale:null},onRender:function(){this.update()},update:function(){var e=this.ratio,t=this.relatedView,r=t.getTangentAtRatio(e),n,i;if(r?(n=r.start,i=r.vector().vectorAngle(this.xAxisVector)||0):(n=t.getPointAtRatio(e),i=0),!n)return this;var s=$e.createSVGMatrix().translate(n.x,n.y).rotate(i);const{scale:o}=this.options;return o&&(s=s.scale(o)),this.vel.transform(s,{absolute:!0}),this},onPointerDown:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.relatedView;t.model.startBatch("arrowhead-move",{ui:!0,tool:this.cid}),t.can("arrowheadMove")&&(t.startArrowheadMove(this.arrowheadType),this.delegateDocumentEvents(),t.paper.undelegateEvents()),this.focus(),this.el.style.pointerEvents="none"}},onPointerMove:function(e){var t=Zn(e),r=this.paper.snapToGrid(t.clientX,t.clientY);this.relatedView.pointermove(t,r.x,r.y)},onPointerUp:function(e){this.undelegateDocumentEvents();var t=this.relatedView,r=t.paper,n=Zn(e),i=r.snapToGrid(n.clientX,n.clientY);t.pointerup(n,i.x,i.y),r.delegateEvents(),this.blur(),this.el.style.pointerEvents="",t.model.stopBatch("arrowhead-move",{ui:!0,tool:this.cid})}}),Kpe=xj.extend({name:"target-arrowhead",ratio:1,arrowheadType:"target",attributes:{d:"M -10 -8 10 0 -10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"target-arrowhead"}}),Zpe=xj.extend({name:"source-arrowhead",ratio:0,arrowheadType:"source",attributes:{d:"M 10 -8 -10 0 10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"source-arrowhead"}}),SE=dg.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,scale:null,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){const{vel:e}=this;e.transform(this.getCellMatrix(),{absolute:!0})},getCellMatrix(){return this.relatedView.model.isLink()?this.getLinkMatrix():this.getElementMatrix()},getElementMatrix(){const{relatedView:e,options:t}=this;let{x:r=0,y:n=0,offset:i={},useModelGeometry:s,rotate:o,scale:a}=t,u=Ype(e,s);const c=e.model.angle();o||(u=u.bbox(c));const{x:f=0,y:h=0}=i;Ai(r)?r=parseFloat(r)/100*u.width:Qs(r)&&(r=Number(eo(r,u))),Ai(n)?n=parseFloat(n)/100*u.height:Qs(n)&&(n=Number(eo(n,u)));let g=$e.createSVGMatrix().translate(u.x+u.width/2,u.y+u.height/2);return o&&(g=g.rotate(c)),g=g.translate(r+f-u.width/2,n+h-u.height/2),a&&(g=g.scale(a)),g},getLinkMatrix(){const{relatedView:e,options:t}=this,{offset:r=0,distance:n=0,rotate:i,scale:s}=t;let o,a,u;Ai(n)?o=e.getTangentAtRatio(parseFloat(n)/100):o=e.getTangentAtLength(n),o?(a=o.start,u=o.vector().vectorAngle(new pe(1,0))||0):(a=e.getConnection().start,u=0);let c=$e.createSVGMatrix().translate(a.x,a.y).rotate(u).translate(0,r);return i||(c=c.rotate(-u)),s&&(c=c.scale(s)),c},onPointerDown:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.options.action;typeof t=="function"&&t.call(this.relatedView,e,this.relatedView,this)}}}),i4=SE.extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(e,t,r){t.model.remove({ui:!0,tool:r.cid})}}});var jf={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Jpe=jf.exports,s4;function Qpe(){return s4||(s4=1,function(e,t){(function(){var r,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",h=1,g=2,y=4,m=1,_=2,x=1,S=2,E=4,A=8,T=16,I=32,N=64,p=128,P=256,O=512,q=30,V="...",W=800,G=16,J=1,se=2,K=3,U=1/0,j=9007199254740991,Q=17976931348623157e292,de=NaN,ce=4294967295,Te=ce-1,Se=ce>>>1,re=[["ary",p],["bind",x],["bindKey",S],["curry",A],["curryRight",T],["flip",O],["partial",I],["partialRight",N],["rearg",P]],ae="[object Arguments]",ne="[object Array]",te="[object AsyncFunction]",le="[object Boolean]",Xe="[object Date]",Ne="[object DOMException]",Re="[object Error]",nt="[object Function]",Ve="[object GeneratorFunction]",L="[object Map]",B="[object Number]",H="[object Null]",X="[object Object]",xe="[object Promise]",ue="[object Proxy]",Ae="[object RegExp]",Ce="[object Set]",Be="[object String]",Le="[object Symbol]",Ie="[object Undefined]",we="[object WeakMap]",je="[object WeakSet]",ct="[object ArrayBuffer]",yt="[object DataView]",ft="[object Float32Array]",it="[object Float64Array]",Wt="[object Int8Array]",yr="[object Int16Array]",er="[object Int32Array]",lr="[object Uint8Array]",Lr="[object Uint8ClampedArray]",Br="[object Uint16Array]",wn="[object Uint32Array]",rr=/\b__p \+= '';/g,Or=/\b(__p \+=) '' \+/g,mn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yn=/&(?:amp|lt|gt|quot|#39);/g,vn=/[&<>"']/g,Un=RegExp(yn.source),ri=RegExp(vn.source),zt=/<%-([\s\S]+?)%>/g,Bt=/<%([\s\S]+?)%>/g,zr=/<%=([\s\S]+?)%>/g,Bn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xn=/^\w*$/,jr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jn=/[\\^$.*+?()[\]{}|]/g,hi=RegExp(jn.source),Qr=/^\s+/,Hn=/\s/,kn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,di=/\{\n\/\* \[wrapped with (.+)\] \*/,Ye=/,? & /,Et=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Rt=/[()=,{}\[\]\/\s]/,kt=/\\(\\)?/g,Lt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,at=/\w*$/,We=/^[-+]0x[0-9a-f]+$/i,_t=/^0b[01]+$/i,Tt=/^\[object .+?Constructor\]$/,Vt=/^0o[0-7]+$/i,an=/^(?:0|[1-9]\d*)$/,Wn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Mt=/($^)/,en=/['\n\r\u2028\u2029\\]/g,Er="\\ud800-\\udfff",Nr="\\u0300-\\u036f",Vr="\\ufe20-\\ufe2f",Ar="\\u20d0-\\u20ff",Sn=Nr+Vr+Ar,Xt="\\u2700-\\u27bf",pi="a-z\\xdf-\\xf6\\xf8-\\xff",wi="\\xac\\xb1\\xd7\\xf7",Fi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ze="\\u2000-\\u206f",vt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ht="A-Z\\xc0-\\xd6\\xd8-\\xde",dt="\\ufe0e\\ufe0f",Ct=wi+Fi+Ze+vt,nr="['’]",Hr="["+Er+"]",cn="["+Ct+"]",Gr="["+Sn+"]",_n="\\d+",zn="["+Xt+"]",vi="["+pi+"]",Go="[^"+Er+Ct+_n+Xt+pi+ht+"]",ws="\\ud83c[\\udffb-\\udfff]",Xn="(?:"+Gr+"|"+ws+")",_a="[^"+Er+"]",ts="(?:\\ud83c[\\udde6-\\uddff]){2}",ba="[\\ud800-\\udbff][\\udc00-\\udfff]",$o="["+ht+"]",Uo="\\u200d",jo="(?:"+vi+"|"+Go+")",Ql="(?:"+$o+"|"+Go+")",rd="(?:"+nr+"(?:d|ll|m|re|s|t|ve))?",Qa="(?:"+nr+"(?:D|LL|M|RE|S|T|VE))?",ef=Xn+"?",Dc="["+dt+"]?",nd="(?:"+Uo+"(?:"+[_a,ts,ba].join("|")+")"+Dc+ef+")*",id="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yg="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",tf=Dc+ef+nd,_g="(?:"+[zn,ts,ba].join("|")+")"+tf,bg="(?:"+[_a+Gr+"?",Gr,ts,ba,Hr].join("|")+")",rf=RegExp(nr,"g"),wg=RegExp(Gr,"g"),nf=RegExp(ws+"(?="+ws+")|"+bg+tf,"g"),xg=RegExp([$o+"?"+vi+"+"+rd+"(?="+[cn,$o,"$"].join("|")+")",Ql+"+"+Qa+"(?="+[cn,$o+jo,"$"].join("|")+")",$o+"?"+jo+"+"+rd,$o+"+"+Qa,yg,id,_n,_g].join("|"),"g"),Sg=RegExp("["+Uo+Er+Sn+dt+"]"),Eg=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ag=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Tg=-1,ln={};ln[ft]=ln[it]=ln[Wt]=ln[yr]=ln[er]=ln[lr]=ln[Lr]=ln[Br]=ln[wn]=!0,ln[ae]=ln[ne]=ln[ct]=ln[le]=ln[yt]=ln[Xe]=ln[Re]=ln[nt]=ln[L]=ln[B]=ln[X]=ln[Ae]=ln[Ce]=ln[Be]=ln[we]=!1;var tn={};tn[ae]=tn[ne]=tn[ct]=tn[yt]=tn[le]=tn[Xe]=tn[ft]=tn[it]=tn[Wt]=tn[yr]=tn[er]=tn[L]=tn[B]=tn[X]=tn[Ae]=tn[Ce]=tn[Be]=tn[Le]=tn[lr]=tn[Lr]=tn[Br]=tn[wn]=!0,tn[Re]=tn[nt]=tn[we]=!1;var sd={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},sf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},od={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ad={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},of=parseFloat,Pg=parseInt,ud=typeof ki=="object"&&ki&&ki.Object===Object&&ki,Cg=typeof self=="object"&&self&&self.Object===Object&&self,Ln=ud||Cg||Function("return this")(),Fc=t&&!t.nodeType&&t,vo=Fc&&!0&&e&&!e.nodeType&&e,cd=vo&&vo.exports===Fc,af=cd&&ud.process,rs=function(){try{var ee=vo&&vo.require&&vo.require("util").types;return ee||af&&af.binding&&af.binding("util")}catch{}}(),v=rs&&rs.isArrayBuffer,w=rs&&rs.isDate,R=rs&&rs.isMap,k=rs&&rs.isRegExp,D=rs&&rs.isSet,F=rs&&rs.isTypedArray;function $(ee,ye,ve){switch(ve.length){case 0:return ee.call(ye);case 1:return ee.call(ye,ve[0]);case 2:return ee.call(ye,ve[0],ve[1]);case 3:return ee.call(ye,ve[0],ve[1],ve[2])}return ee.apply(ye,ve)}function he(ee,ye,ve,Ue){for(var Qe=-1,At=ee==null?0:ee.length;++Qe<At;){var Pt=ee[Qe];ye(Ue,Pt,ve(Pt),ee)}return Ue}function oe(ee,ye){for(var ve=-1,Ue=ee==null?0:ee.length;++ve<Ue&&ye(ee[ve],ve,ee)!==!1;);return ee}function Ee(ee,ye){for(var ve=ee==null?0:ee.length;ve--&&ye(ee[ve],ve,ee)!==!1;);return ee}function De(ee,ye){for(var ve=-1,Ue=ee==null?0:ee.length;++ve<Ue;)if(!ye(ee[ve],ve,ee))return!1;return!0}function Ge(ee,ye){for(var ve=-1,Ue=ee==null?0:ee.length,Qe=0,At=[];++ve<Ue;){var Pt=ee[ve];ye(Pt,ve,ee)&&(At[Qe++]=Pt)}return At}function Me(ee,ye){var ve=ee==null?0:ee.length;return!!ve&&un(ee,ye,0)>-1}function ut(ee,ye,ve){for(var Ue=-1,Qe=ee==null?0:ee.length;++Ue<Qe;)if(ve(ye,ee[Ue]))return!0;return!1}function St(ee,ye){for(var ve=-1,Ue=ee==null?0:ee.length,Qe=Array(Ue);++ve<Ue;)Qe[ve]=ye(ee[ve],ve,ee);return Qe}function ur(ee,ye){for(var ve=-1,Ue=ye.length,Qe=ee.length;++ve<Ue;)ee[Qe+ve]=ye[ve];return ee}function sr(ee,ye,ve,Ue){var Qe=-1,At=ee==null?0:ee.length;for(Ue&&At&&(ve=ee[++Qe]);++Qe<At;)ve=ye(ve,ee[Qe],Qe,ee);return ve}function ai(ee,ye,ve,Ue){var Qe=ee==null?0:ee.length;for(Ue&&Qe&&(ve=ee[--Qe]);Qe--;)ve=ye(ve,ee[Qe],Qe,ee);return ve}function Nn(ee,ye){for(var ve=-1,Ue=ee==null?0:ee.length;++ve<Ue;)if(ye(ee[ve],ve,ee))return!0;return!1}var Bs=wa("length");function zs(ee){return ee.split("")}function Tr(ee){return ee.match(Et)||[]}function Ho(ee,ye,ve){var Ue;return ve(ee,function(Qe,At,Pt){if(ye(Qe,At,Pt))return Ue=At,!1}),Ue}function Pr(ee,ye,ve,Ue){for(var Qe=ee.length,At=ve+(Ue?1:-1);Ue?At--:++At<Qe;)if(ye(ee[At],At,ee))return At;return-1}function un(ee,ye,ve){return ye===ye?Og(ee,ye,ve):Pr(ee,Bc,ve)}function Bu(ee,ye,ve,Ue){for(var Qe=ve-1,At=ee.length;++Qe<At;)if(Ue(ee[Qe],ye))return Qe;return-1}function Bc(ee){return ee!==ee}function xs(ee,ye){var ve=ee==null?0:ee.length;return ve?Ci(ee,ye)/ve:de}function wa(ee){return function(ye){return ye==null?r:ye[ee]}}function ns(ee){return function(ye){return ee==null?r:ee[ye]}}function go(ee,ye,ve,Ue,Qe){return Qe(ee,function(At,Pt,xt){ve=Ue?(Ue=!1,At):ye(ve,At,Pt,xt)}),ve}function Wo(ee,ye){var ve=ee.length;for(ee.sort(ye);ve--;)ee[ve]=ee[ve].value;return ee}function Ci(ee,ye){for(var ve,Ue=-1,Qe=ee.length;++Ue<Qe;){var At=ye(ee[Ue]);At!==r&&(ve=ve===r?At:ve+At)}return ve}function zu(ee,ye){for(var ve=-1,Ue=Array(ee);++ve<ee;)Ue[ve]=ye(ve);return Ue}function mo(ee,ye){return St(ye,function(ve){return[ve,ee[ve]]})}function Vs(ee){return ee&&ee.slice(0,fd(ee)+1).replace(Qr,"")}function Bi(ee){return function(ye){return ee(ye)}}function uf(ee,ye){return St(ye,function(ve){return ee[ve]})}function Vu(ee,ye){return ee.has(ye)}function Yr(ee,ye){for(var ve=-1,Ue=ee.length;++ve<Ue&&un(ye,ee[ve],0)>-1;);return ve}function Gu(ee,ye){for(var ve=ee.length;ve--&&un(ye,ee[ve],0)>-1;);return ve}function Ss(ee,ye){for(var ve=ee.length,Ue=0;ve--;)ee[ve]===ye&&++Ue;return Ue}var eu=ns(sd),Rg=ns(sf);function Ig(ee){return"\\"+ad[ee]}function ld(ee,ye){return ee==null?r:ee[ye]}function is(ee){return Sg.test(ee)}function cf(ee){return Eg.test(ee)}function Xo(ee){for(var ye,ve=[];!(ye=ee.next()).done;)ve.push(ye.value);return ve}function zc(ee){var ye=-1,ve=Array(ee.size);return ee.forEach(function(Ue,Qe){ve[++ye]=[Qe,Ue]}),ve}function tu(ee,ye){return function(ve){return ee(ye(ve))}}function Es(ee,ye){for(var ve=-1,Ue=ee.length,Qe=0,At=[];++ve<Ue;){var Pt=ee[ve];(Pt===ye||Pt===f)&&(ee[ve]=f,At[Qe++]=ve)}return At}function xa(ee){var ye=-1,ve=Array(ee.size);return ee.forEach(function(Ue){ve[++ye]=Ue}),ve}function lf(ee){var ye=-1,ve=Array(ee.size);return ee.forEach(function(Ue){ve[++ye]=[Ue,Ue]}),ve}function Og(ee,ye,ve){for(var Ue=ve-1,Qe=ee.length;++Ue<Qe;)if(ee[Ue]===ye)return Ue;return-1}function Vc(ee,ye,ve){for(var Ue=ve+1;Ue--;)if(ee[Ue]===ye)return Ue;return Ue}function Yo(ee){return is(ee)?hd(ee):Bs(ee)}function zi(ee){return is(ee)?ie(ee):zs(ee)}function fd(ee){for(var ye=ee.length;ye--&&Hn.test(ee.charAt(ye)););return ye}var ff=ns(od);function hd(ee){for(var ye=nf.lastIndex=0;nf.test(ee);)++ye;return ye}function ie(ee){return ee.match(nf)||[]}function be(ee){return ee.match(xg)||[]}var Oe=function ee(ye){ye=ye==null?Ln:ke.defaults(Ln.Object(),ye,ke.pick(Ln,Ag));var ve=ye.Array,Ue=ye.Date,Qe=ye.Error,At=ye.Function,Pt=ye.Math,xt=ye.Object,hr=ye.RegExp,Ht=ye.String,_r=ye.TypeError,ui=ve.prototype,gi=At.prototype,ci=xt.prototype,Vi=ye["__core-js_shared__"],yo=gi.toString,ir=ci.hasOwnProperty,F9=0,mT=function(){var l=/[^.]+$/.exec(Vi&&Vi.keys&&Vi.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),dd=ci.toString,B9=yo.call(xt),z9=Ln._,V9=hr("^"+yo.call(ir).replace(jn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pd=cd?ye.Buffer:r,ru=ye.Symbol,vd=ye.Uint8Array,yT=pd?pd.allocUnsafe:r,gd=tu(xt.getPrototypeOf,xt),_T=xt.create,bT=ci.propertyIsEnumerable,md=ui.splice,wT=ru?ru.isConcatSpreadable:r,hf=ru?ru.iterator:r,$u=ru?ru.toStringTag:r,yd=function(){try{var l=Xu(xt,"defineProperty");return l({},"",{}),l}catch{}}(),G9=ye.clearTimeout!==Ln.clearTimeout&&ye.clearTimeout,$9=Ue&&Ue.now!==Ln.Date.now&&Ue.now,U9=ye.setTimeout!==Ln.setTimeout&&ye.setTimeout,_d=Pt.ceil,bd=Pt.floor,Mg=xt.getOwnPropertySymbols,j9=pd?pd.isBuffer:r,xT=ye.isFinite,H9=ui.join,W9=tu(xt.keys,xt),li=Pt.max,Ri=Pt.min,X9=Ue.now,Y9=ye.parseInt,ST=Pt.random,K9=ui.reverse,kg=Xu(ye,"DataView"),df=Xu(ye,"Map"),Lg=Xu(ye,"Promise"),Gc=Xu(ye,"Set"),pf=Xu(ye,"WeakMap"),vf=Xu(xt,"create"),wd=pf&&new pf,$c={},Z9=Yu(kg),J9=Yu(df),Q9=Yu(Lg),eH=Yu(Gc),tH=Yu(pf),xd=ru?ru.prototype:r,gf=xd?xd.valueOf:r,ET=xd?xd.toString:r;function Y(l){if(Vn(l)&&!cr(l)&&!(l instanceof qr)){if(l instanceof Gs)return l;if(ir.call(l,"__wrapped__"))return AP(l)}return new Gs(l)}var Uc=function(){function l(){}return function(d){if(!qn(d))return{};if(_T)return _T(d);l.prototype=d;var b=new l;return l.prototype=r,b}}();function Sd(){}function Gs(l,d){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=r}Y.templateSettings={escape:zt,evaluate:Bt,interpolate:zr,variable:"",imports:{_:Y}},Y.prototype=Sd.prototype,Y.prototype.constructor=Y,Gs.prototype=Uc(Sd.prototype),Gs.prototype.constructor=Gs;function qr(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ce,this.__views__=[]}function rH(){var l=new qr(this.__wrapped__);return l.__actions__=ss(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=ss(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=ss(this.__views__),l}function nH(){if(this.__filtered__){var l=new qr(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function iH(){var l=this.__wrapped__.value(),d=this.__dir__,b=cr(l),M=d<0,z=b?l.length:0,Z=gW(0,z,this.__views__),fe=Z.start,_e=Z.end,Pe=_e-fe,et=M?_e:fe-1,tt=this.__iteratees__,ot=tt.length,bt=0,Dt=Ri(Pe,this.__takeCount__);if(!b||!M&&z==Pe&&Dt==Pe)return XT(l,this.__actions__);var Zt=[];e:for(;Pe--&&bt<Dt;){et+=d;for(var vr=-1,Jt=l[et];++vr<ot;){var Mr=tt[vr],$r=Mr.iteratee,Ps=Mr.type,Ui=$r(Jt);if(Ps==se)Jt=Ui;else if(!Ui){if(Ps==J)continue e;break e}}Zt[bt++]=Jt}return Zt}qr.prototype=Uc(Sd.prototype),qr.prototype.constructor=qr;function Uu(l){var d=-1,b=l==null?0:l.length;for(this.clear();++d<b;){var M=l[d];this.set(M[0],M[1])}}function sH(){this.__data__=vf?vf(null):{},this.size=0}function oH(l){var d=this.has(l)&&delete this.__data__[l];return this.size-=d?1:0,d}function aH(l){var d=this.__data__;if(vf){var b=d[l];return b===u?r:b}return ir.call(d,l)?d[l]:r}function uH(l){var d=this.__data__;return vf?d[l]!==r:ir.call(d,l)}function cH(l,d){var b=this.__data__;return this.size+=this.has(l)?0:1,b[l]=vf&&d===r?u:d,this}Uu.prototype.clear=sH,Uu.prototype.delete=oH,Uu.prototype.get=aH,Uu.prototype.has=uH,Uu.prototype.set=cH;function Sa(l){var d=-1,b=l==null?0:l.length;for(this.clear();++d<b;){var M=l[d];this.set(M[0],M[1])}}function lH(){this.__data__=[],this.size=0}function fH(l){var d=this.__data__,b=Ed(d,l);if(b<0)return!1;var M=d.length-1;return b==M?d.pop():md.call(d,b,1),--this.size,!0}function hH(l){var d=this.__data__,b=Ed(d,l);return b<0?r:d[b][1]}function dH(l){return Ed(this.__data__,l)>-1}function pH(l,d){var b=this.__data__,M=Ed(b,l);return M<0?(++this.size,b.push([l,d])):b[M][1]=d,this}Sa.prototype.clear=lH,Sa.prototype.delete=fH,Sa.prototype.get=hH,Sa.prototype.has=dH,Sa.prototype.set=pH;function Ea(l){var d=-1,b=l==null?0:l.length;for(this.clear();++d<b;){var M=l[d];this.set(M[0],M[1])}}function vH(){this.size=0,this.__data__={hash:new Uu,map:new(df||Sa),string:new Uu}}function gH(l){var d=qd(this,l).delete(l);return this.size-=d?1:0,d}function mH(l){return qd(this,l).get(l)}function yH(l){return qd(this,l).has(l)}function _H(l,d){var b=qd(this,l),M=b.size;return b.set(l,d),this.size+=b.size==M?0:1,this}Ea.prototype.clear=vH,Ea.prototype.delete=gH,Ea.prototype.get=mH,Ea.prototype.has=yH,Ea.prototype.set=_H;function ju(l){var d=-1,b=l==null?0:l.length;for(this.__data__=new Ea;++d<b;)this.add(l[d])}function bH(l){return this.__data__.set(l,u),this}function wH(l){return this.__data__.has(l)}ju.prototype.add=ju.prototype.push=bH,ju.prototype.has=wH;function _o(l){var d=this.__data__=new Sa(l);this.size=d.size}function xH(){this.__data__=new Sa,this.size=0}function SH(l){var d=this.__data__,b=d.delete(l);return this.size=d.size,b}function EH(l){return this.__data__.get(l)}function AH(l){return this.__data__.has(l)}function TH(l,d){var b=this.__data__;if(b instanceof Sa){var M=b.__data__;if(!df||M.length<i-1)return M.push([l,d]),this.size=++b.size,this;b=this.__data__=new Ea(M)}return b.set(l,d),this.size=b.size,this}_o.prototype.clear=xH,_o.prototype.delete=SH,_o.prototype.get=EH,_o.prototype.has=AH,_o.prototype.set=TH;function AT(l,d){var b=cr(l),M=!b&&Ku(l),z=!b&&!M&&au(l),Z=!b&&!M&&!z&&Xc(l),fe=b||M||z||Z,_e=fe?zu(l.length,Ht):[],Pe=_e.length;for(var et in l)(d||ir.call(l,et))&&!(fe&&(et=="length"||z&&(et=="offset"||et=="parent")||Z&&(et=="buffer"||et=="byteLength"||et=="byteOffset")||Ca(et,Pe)))&&_e.push(et);return _e}function TT(l){var d=l.length;return d?l[jg(0,d-1)]:r}function PH(l,d){return Dd(ss(l),Hu(d,0,l.length))}function CH(l){return Dd(ss(l))}function Ng(l,d,b){(b!==r&&!bo(l[d],b)||b===r&&!(d in l))&&Aa(l,d,b)}function mf(l,d,b){var M=l[d];(!(ir.call(l,d)&&bo(M,b))||b===r&&!(d in l))&&Aa(l,d,b)}function Ed(l,d){for(var b=l.length;b--;)if(bo(l[b][0],d))return b;return-1}function RH(l,d,b,M){return nu(l,function(z,Z,fe){d(M,z,b(z),fe)}),M}function PT(l,d){return l&&Zo(d,mi(d),l)}function IH(l,d){return l&&Zo(d,as(d),l)}function Aa(l,d,b){d=="__proto__"&&yd?yd(l,d,{configurable:!0,enumerable:!0,value:b,writable:!0}):l[d]=b}function qg(l,d){for(var b=-1,M=d.length,z=ve(M),Z=l==null;++b<M;)z[b]=Z?r:gm(l,d[b]);return z}function Hu(l,d,b){return l===l&&(b!==r&&(l=l<=b?l:b),d!==r&&(l=l>=d?l:d)),l}function $s(l,d,b,M,z,Z){var fe,_e=d&h,Pe=d&g,et=d&y;if(b&&(fe=z?b(l,M,z,Z):b(l)),fe!==r)return fe;if(!qn(l))return l;var tt=cr(l);if(tt){if(fe=yW(l),!_e)return ss(l,fe)}else{var ot=Ii(l),bt=ot==nt||ot==Ve;if(au(l))return ZT(l,_e);if(ot==X||ot==ae||bt&&!z){if(fe=Pe||bt?{}:gP(l),!_e)return Pe?aW(l,IH(fe,l)):oW(l,PT(fe,l))}else{if(!tn[ot])return z?l:{};fe=_W(l,ot,_e)}}Z||(Z=new _o);var Dt=Z.get(l);if(Dt)return Dt;Z.set(l,fe),jP(l)?l.forEach(function(Jt){fe.add($s(Jt,d,b,Jt,l,Z))}):$P(l)&&l.forEach(function(Jt,Mr){fe.set(Mr,$s(Jt,d,b,Mr,l,Z))});var Zt=et?Pe?rm:tm:Pe?as:mi,vr=tt?r:Zt(l);return oe(vr||l,function(Jt,Mr){vr&&(Mr=Jt,Jt=l[Mr]),mf(fe,Mr,$s(Jt,d,b,Mr,l,Z))}),fe}function OH(l){var d=mi(l);return function(b){return CT(b,l,d)}}function CT(l,d,b){var M=b.length;if(l==null)return!M;for(l=xt(l);M--;){var z=b[M],Z=d[z],fe=l[z];if(fe===r&&!(z in l)||!Z(fe))return!1}return!0}function RT(l,d,b){if(typeof l!="function")throw new _r(o);return Ef(function(){l.apply(r,b)},d)}function yf(l,d,b,M){var z=-1,Z=Me,fe=!0,_e=l.length,Pe=[],et=d.length;if(!_e)return Pe;b&&(d=St(d,Bi(b))),M?(Z=ut,fe=!1):d.length>=i&&(Z=Vu,fe=!1,d=new ju(d));e:for(;++z<_e;){var tt=l[z],ot=b==null?tt:b(tt);if(tt=M||tt!==0?tt:0,fe&&ot===ot){for(var bt=et;bt--;)if(d[bt]===ot)continue e;Pe.push(tt)}else Z(d,ot,M)||Pe.push(tt)}return Pe}var nu=rP(Ko),IT=rP(Fg,!0);function MH(l,d){var b=!0;return nu(l,function(M,z,Z){return b=!!d(M,z,Z),b}),b}function Ad(l,d,b){for(var M=-1,z=l.length;++M<z;){var Z=l[M],fe=d(Z);if(fe!=null&&(_e===r?fe===fe&&!Ts(fe):b(fe,_e)))var _e=fe,Pe=Z}return Pe}function kH(l,d,b,M){var z=l.length;for(b=dr(b),b<0&&(b=-b>z?0:z+b),M=M===r||M>z?z:dr(M),M<0&&(M+=z),M=b>M?0:WP(M);b<M;)l[b++]=d;return l}function OT(l,d){var b=[];return nu(l,function(M,z,Z){d(M,z,Z)&&b.push(M)}),b}function xi(l,d,b,M,z){var Z=-1,fe=l.length;for(b||(b=wW),z||(z=[]);++Z<fe;){var _e=l[Z];d>0&&b(_e)?d>1?xi(_e,d-1,b,M,z):ur(z,_e):M||(z[z.length]=_e)}return z}var Dg=nP(),MT=nP(!0);function Ko(l,d){return l&&Dg(l,d,mi)}function Fg(l,d){return l&&MT(l,d,mi)}function Td(l,d){return Ge(d,function(b){return Ra(l[b])})}function Wu(l,d){d=su(d,l);for(var b=0,M=d.length;l!=null&&b<M;)l=l[Jo(d[b++])];return b&&b==M?l:r}function kT(l,d,b){var M=d(l);return cr(l)?M:ur(M,b(l))}function Gi(l){return l==null?l===r?Ie:H:$u&&$u in xt(l)?vW(l):CW(l)}function Bg(l,d){return l>d}function LH(l,d){return l!=null&&ir.call(l,d)}function NH(l,d){return l!=null&&d in xt(l)}function qH(l,d,b){return l>=Ri(d,b)&&l<li(d,b)}function zg(l,d,b){for(var M=b?ut:Me,z=l[0].length,Z=l.length,fe=Z,_e=ve(Z),Pe=1/0,et=[];fe--;){var tt=l[fe];fe&&d&&(tt=St(tt,Bi(d))),Pe=Ri(tt.length,Pe),_e[fe]=!b&&(d||z>=120&&tt.length>=120)?new ju(fe&&tt):r}tt=l[0];var ot=-1,bt=_e[0];e:for(;++ot<z&&et.length<Pe;){var Dt=tt[ot],Zt=d?d(Dt):Dt;if(Dt=b||Dt!==0?Dt:0,!(bt?Vu(bt,Zt):M(et,Zt,b))){for(fe=Z;--fe;){var vr=_e[fe];if(!(vr?Vu(vr,Zt):M(l[fe],Zt,b)))continue e}bt&&bt.push(Zt),et.push(Dt)}}return et}function DH(l,d,b,M){return Ko(l,function(z,Z,fe){d(M,b(z),Z,fe)}),M}function _f(l,d,b){d=su(d,l),l=bP(l,d);var M=l==null?l:l[Jo(js(d))];return M==null?r:$(M,l,b)}function LT(l){return Vn(l)&&Gi(l)==ae}function FH(l){return Vn(l)&&Gi(l)==ct}function BH(l){return Vn(l)&&Gi(l)==Xe}function bf(l,d,b,M,z){return l===d?!0:l==null||d==null||!Vn(l)&&!Vn(d)?l!==l&&d!==d:zH(l,d,b,M,bf,z)}function zH(l,d,b,M,z,Z){var fe=cr(l),_e=cr(d),Pe=fe?ne:Ii(l),et=_e?ne:Ii(d);Pe=Pe==ae?X:Pe,et=et==ae?X:et;var tt=Pe==X,ot=et==X,bt=Pe==et;if(bt&&au(l)){if(!au(d))return!1;fe=!0,tt=!1}if(bt&&!tt)return Z||(Z=new _o),fe||Xc(l)?dP(l,d,b,M,z,Z):dW(l,d,Pe,b,M,z,Z);if(!(b&m)){var Dt=tt&&ir.call(l,"__wrapped__"),Zt=ot&&ir.call(d,"__wrapped__");if(Dt||Zt){var vr=Dt?l.value():l,Jt=Zt?d.value():d;return Z||(Z=new _o),z(vr,Jt,b,M,Z)}}return bt?(Z||(Z=new _o),pW(l,d,b,M,z,Z)):!1}function VH(l){return Vn(l)&&Ii(l)==L}function Vg(l,d,b,M){var z=b.length,Z=z,fe=!M;if(l==null)return!Z;for(l=xt(l);z--;){var _e=b[z];if(fe&&_e[2]?_e[1]!==l[_e[0]]:!(_e[0]in l))return!1}for(;++z<Z;){_e=b[z];var Pe=_e[0],et=l[Pe],tt=_e[1];if(fe&&_e[2]){if(et===r&&!(Pe in l))return!1}else{var ot=new _o;if(M)var bt=M(et,tt,Pe,l,d,ot);if(!(bt===r?bf(tt,et,m|_,M,ot):bt))return!1}}return!0}function NT(l){if(!qn(l)||SW(l))return!1;var d=Ra(l)?V9:Tt;return d.test(Yu(l))}function GH(l){return Vn(l)&&Gi(l)==Ae}function $H(l){return Vn(l)&&Ii(l)==Ce}function UH(l){return Vn(l)&&$d(l.length)&&!!ln[Gi(l)]}function qT(l){return typeof l=="function"?l:l==null?us:typeof l=="object"?cr(l)?BT(l[0],l[1]):FT(l):iC(l)}function Gg(l){if(!Sf(l))return W9(l);var d=[];for(var b in xt(l))ir.call(l,b)&&b!="constructor"&&d.push(b);return d}function jH(l){if(!qn(l))return PW(l);var d=Sf(l),b=[];for(var M in l)M=="constructor"&&(d||!ir.call(l,M))||b.push(M);return b}function $g(l,d){return l<d}function DT(l,d){var b=-1,M=os(l)?ve(l.length):[];return nu(l,function(z,Z,fe){M[++b]=d(z,Z,fe)}),M}function FT(l){var d=im(l);return d.length==1&&d[0][2]?yP(d[0][0],d[0][1]):function(b){return b===l||Vg(b,l,d)}}function BT(l,d){return om(l)&&mP(d)?yP(Jo(l),d):function(b){var M=gm(b,l);return M===r&&M===d?mm(b,l):bf(d,M,m|_)}}function Pd(l,d,b,M,z){l!==d&&Dg(d,function(Z,fe){if(z||(z=new _o),qn(Z))HH(l,d,fe,b,Pd,M,z);else{var _e=M?M(um(l,fe),Z,fe+"",l,d,z):r;_e===r&&(_e=Z),Ng(l,fe,_e)}},as)}function HH(l,d,b,M,z,Z,fe){var _e=um(l,b),Pe=um(d,b),et=fe.get(Pe);if(et){Ng(l,b,et);return}var tt=Z?Z(_e,Pe,b+"",l,d,fe):r,ot=tt===r;if(ot){var bt=cr(Pe),Dt=!bt&&au(Pe),Zt=!bt&&!Dt&&Xc(Pe);tt=Pe,bt||Dt||Zt?cr(_e)?tt=_e:Yn(_e)?tt=ss(_e):Dt?(ot=!1,tt=ZT(Pe,!0)):Zt?(ot=!1,tt=JT(Pe,!0)):tt=[]:Af(Pe)||Ku(Pe)?(tt=_e,Ku(_e)?tt=XP(_e):(!qn(_e)||Ra(_e))&&(tt=gP(Pe))):ot=!1}ot&&(fe.set(Pe,tt),z(tt,Pe,M,Z,fe),fe.delete(Pe)),Ng(l,b,tt)}function zT(l,d){var b=l.length;if(b)return d+=d<0?b:0,Ca(d,b)?l[d]:r}function VT(l,d,b){d.length?d=St(d,function(Z){return cr(Z)?function(fe){return Wu(fe,Z.length===1?Z[0]:Z)}:Z}):d=[us];var M=-1;d=St(d,Bi(Yt()));var z=DT(l,function(Z,fe,_e){var Pe=St(d,function(et){return et(Z)});return{criteria:Pe,index:++M,value:Z}});return Wo(z,function(Z,fe){return sW(Z,fe,b)})}function WH(l,d){return GT(l,d,function(b,M){return mm(l,M)})}function GT(l,d,b){for(var M=-1,z=d.length,Z={};++M<z;){var fe=d[M],_e=Wu(l,fe);b(_e,fe)&&wf(Z,su(fe,l),_e)}return Z}function XH(l){return function(d){return Wu(d,l)}}function Ug(l,d,b,M){var z=M?Bu:un,Z=-1,fe=d.length,_e=l;for(l===d&&(d=ss(d)),b&&(_e=St(l,Bi(b)));++Z<fe;)for(var Pe=0,et=d[Z],tt=b?b(et):et;(Pe=z(_e,tt,Pe,M))>-1;)_e!==l&&md.call(_e,Pe,1),md.call(l,Pe,1);return l}function $T(l,d){for(var b=l?d.length:0,M=b-1;b--;){var z=d[b];if(b==M||z!==Z){var Z=z;Ca(z)?md.call(l,z,1):Xg(l,z)}}return l}function jg(l,d){return l+bd(ST()*(d-l+1))}function YH(l,d,b,M){for(var z=-1,Z=li(_d((d-l)/(b||1)),0),fe=ve(Z);Z--;)fe[M?Z:++z]=l,l+=b;return fe}function Hg(l,d){var b="";if(!l||d<1||d>j)return b;do d%2&&(b+=l),d=bd(d/2),d&&(l+=l);while(d);return b}function br(l,d){return cm(_P(l,d,us),l+"")}function KH(l){return TT(Yc(l))}function ZH(l,d){var b=Yc(l);return Dd(b,Hu(d,0,b.length))}function wf(l,d,b,M){if(!qn(l))return l;d=su(d,l);for(var z=-1,Z=d.length,fe=Z-1,_e=l;_e!=null&&++z<Z;){var Pe=Jo(d[z]),et=b;if(Pe==="__proto__"||Pe==="constructor"||Pe==="prototype")return l;if(z!=fe){var tt=_e[Pe];et=M?M(tt,Pe,_e):r,et===r&&(et=qn(tt)?tt:Ca(d[z+1])?[]:{})}mf(_e,Pe,et),_e=_e[Pe]}return l}var UT=wd?function(l,d){return wd.set(l,d),l}:us,JH=yd?function(l,d){return yd(l,"toString",{configurable:!0,enumerable:!1,value:_m(d),writable:!0})}:us;function QH(l){return Dd(Yc(l))}function Us(l,d,b){var M=-1,z=l.length;d<0&&(d=-d>z?0:z+d),b=b>z?z:b,b<0&&(b+=z),z=d>b?0:b-d>>>0,d>>>=0;for(var Z=ve(z);++M<z;)Z[M]=l[M+d];return Z}function eW(l,d){var b;return nu(l,function(M,z,Z){return b=d(M,z,Z),!b}),!!b}function Cd(l,d,b){var M=0,z=l==null?M:l.length;if(typeof d=="number"&&d===d&&z<=Se){for(;M<z;){var Z=M+z>>>1,fe=l[Z];fe!==null&&!Ts(fe)&&(b?fe<=d:fe<d)?M=Z+1:z=Z}return z}return Wg(l,d,us,b)}function Wg(l,d,b,M){var z=0,Z=l==null?0:l.length;if(Z===0)return 0;d=b(d);for(var fe=d!==d,_e=d===null,Pe=Ts(d),et=d===r;z<Z;){var tt=bd((z+Z)/2),ot=b(l[tt]),bt=ot!==r,Dt=ot===null,Zt=ot===ot,vr=Ts(ot);if(fe)var Jt=M||Zt;else et?Jt=Zt&&(M||bt):_e?Jt=Zt&&bt&&(M||!Dt):Pe?Jt=Zt&&bt&&!Dt&&(M||!vr):Dt||vr?Jt=!1:Jt=M?ot<=d:ot<d;Jt?z=tt+1:Z=tt}return Ri(Z,Te)}function jT(l,d){for(var b=-1,M=l.length,z=0,Z=[];++b<M;){var fe=l[b],_e=d?d(fe):fe;if(!b||!bo(_e,Pe)){var Pe=_e;Z[z++]=fe===0?0:fe}}return Z}function HT(l){return typeof l=="number"?l:Ts(l)?de:+l}function As(l){if(typeof l=="string")return l;if(cr(l))return St(l,As)+"";if(Ts(l))return ET?ET.call(l):"";var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}function iu(l,d,b){var M=-1,z=Me,Z=l.length,fe=!0,_e=[],Pe=_e;if(b)fe=!1,z=ut;else if(Z>=i){var et=d?null:fW(l);if(et)return xa(et);fe=!1,z=Vu,Pe=new ju}else Pe=d?[]:_e;e:for(;++M<Z;){var tt=l[M],ot=d?d(tt):tt;if(tt=b||tt!==0?tt:0,fe&&ot===ot){for(var bt=Pe.length;bt--;)if(Pe[bt]===ot)continue e;d&&Pe.push(ot),_e.push(tt)}else z(Pe,ot,b)||(Pe!==_e&&Pe.push(ot),_e.push(tt))}return _e}function Xg(l,d){return d=su(d,l),l=bP(l,d),l==null||delete l[Jo(js(d))]}function WT(l,d,b,M){return wf(l,d,b(Wu(l,d)),M)}function Rd(l,d,b,M){for(var z=l.length,Z=M?z:-1;(M?Z--:++Z<z)&&d(l[Z],Z,l););return b?Us(l,M?0:Z,M?Z+1:z):Us(l,M?Z+1:0,M?z:Z)}function XT(l,d){var b=l;return b instanceof qr&&(b=b.value()),sr(d,function(M,z){return z.func.apply(z.thisArg,ur([M],z.args))},b)}function Yg(l,d,b){var M=l.length;if(M<2)return M?iu(l[0]):[];for(var z=-1,Z=ve(M);++z<M;)for(var fe=l[z],_e=-1;++_e<M;)_e!=z&&(Z[z]=yf(Z[z]||fe,l[_e],d,b));return iu(xi(Z,1),d,b)}function YT(l,d,b){for(var M=-1,z=l.length,Z=d.length,fe={};++M<z;){var _e=M<Z?d[M]:r;b(fe,l[M],_e)}return fe}function Kg(l){return Yn(l)?l:[]}function Zg(l){return typeof l=="function"?l:us}function su(l,d){return cr(l)?l:om(l,d)?[l]:EP(rn(l))}var tW=br;function ou(l,d,b){var M=l.length;return b=b===r?M:b,!d&&b>=M?l:Us(l,d,b)}var KT=G9||function(l){return Ln.clearTimeout(l)};function ZT(l,d){if(d)return l.slice();var b=l.length,M=yT?yT(b):new l.constructor(b);return l.copy(M),M}function Jg(l){var d=new l.constructor(l.byteLength);return new vd(d).set(new vd(l)),d}function rW(l,d){var b=d?Jg(l.buffer):l.buffer;return new l.constructor(b,l.byteOffset,l.byteLength)}function nW(l){var d=new l.constructor(l.source,at.exec(l));return d.lastIndex=l.lastIndex,d}function iW(l){return gf?xt(gf.call(l)):{}}function JT(l,d){var b=d?Jg(l.buffer):l.buffer;return new l.constructor(b,l.byteOffset,l.length)}function QT(l,d){if(l!==d){var b=l!==r,M=l===null,z=l===l,Z=Ts(l),fe=d!==r,_e=d===null,Pe=d===d,et=Ts(d);if(!_e&&!et&&!Z&&l>d||Z&&fe&&Pe&&!_e&&!et||M&&fe&&Pe||!b&&Pe||!z)return 1;if(!M&&!Z&&!et&&l<d||et&&b&&z&&!M&&!Z||_e&&b&&z||!fe&&z||!Pe)return-1}return 0}function sW(l,d,b){for(var M=-1,z=l.criteria,Z=d.criteria,fe=z.length,_e=b.length;++M<fe;){var Pe=QT(z[M],Z[M]);if(Pe){if(M>=_e)return Pe;var et=b[M];return Pe*(et=="desc"?-1:1)}}return l.index-d.index}function eP(l,d,b,M){for(var z=-1,Z=l.length,fe=b.length,_e=-1,Pe=d.length,et=li(Z-fe,0),tt=ve(Pe+et),ot=!M;++_e<Pe;)tt[_e]=d[_e];for(;++z<fe;)(ot||z<Z)&&(tt[b[z]]=l[z]);for(;et--;)tt[_e++]=l[z++];return tt}function tP(l,d,b,M){for(var z=-1,Z=l.length,fe=-1,_e=b.length,Pe=-1,et=d.length,tt=li(Z-_e,0),ot=ve(tt+et),bt=!M;++z<tt;)ot[z]=l[z];for(var Dt=z;++Pe<et;)ot[Dt+Pe]=d[Pe];for(;++fe<_e;)(bt||z<Z)&&(ot[Dt+b[fe]]=l[z++]);return ot}function ss(l,d){var b=-1,M=l.length;for(d||(d=ve(M));++b<M;)d[b]=l[b];return d}function Zo(l,d,b,M){var z=!b;b||(b={});for(var Z=-1,fe=d.length;++Z<fe;){var _e=d[Z],Pe=M?M(b[_e],l[_e],_e,b,l):r;Pe===r&&(Pe=l[_e]),z?Aa(b,_e,Pe):mf(b,_e,Pe)}return b}function oW(l,d){return Zo(l,sm(l),d)}function aW(l,d){return Zo(l,pP(l),d)}function Id(l,d){return function(b,M){var z=cr(b)?he:RH,Z=d?d():{};return z(b,l,Yt(M,2),Z)}}function jc(l){return br(function(d,b){var M=-1,z=b.length,Z=z>1?b[z-1]:r,fe=z>2?b[2]:r;for(Z=l.length>3&&typeof Z=="function"?(z--,Z):r,fe&&$i(b[0],b[1],fe)&&(Z=z<3?r:Z,z=1),d=xt(d);++M<z;){var _e=b[M];_e&&l(d,_e,M,Z)}return d})}function rP(l,d){return function(b,M){if(b==null)return b;if(!os(b))return l(b,M);for(var z=b.length,Z=d?z:-1,fe=xt(b);(d?Z--:++Z<z)&&M(fe[Z],Z,fe)!==!1;);return b}}function nP(l){return function(d,b,M){for(var z=-1,Z=xt(d),fe=M(d),_e=fe.length;_e--;){var Pe=fe[l?_e:++z];if(b(Z[Pe],Pe,Z)===!1)break}return d}}function uW(l,d,b){var M=d&x,z=xf(l);function Z(){var fe=this&&this!==Ln&&this instanceof Z?z:l;return fe.apply(M?b:this,arguments)}return Z}function iP(l){return function(d){d=rn(d);var b=is(d)?zi(d):r,M=b?b[0]:d.charAt(0),z=b?ou(b,1).join(""):d.slice(1);return M[l]()+z}}function Hc(l){return function(d){return sr(rC(tC(d).replace(rf,"")),l,"")}}function xf(l){return function(){var d=arguments;switch(d.length){case 0:return new l;case 1:return new l(d[0]);case 2:return new l(d[0],d[1]);case 3:return new l(d[0],d[1],d[2]);case 4:return new l(d[0],d[1],d[2],d[3]);case 5:return new l(d[0],d[1],d[2],d[3],d[4]);case 6:return new l(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new l(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var b=Uc(l.prototype),M=l.apply(b,d);return qn(M)?M:b}}function cW(l,d,b){var M=xf(l);function z(){for(var Z=arguments.length,fe=ve(Z),_e=Z,Pe=Wc(z);_e--;)fe[_e]=arguments[_e];var et=Z<3&&fe[0]!==Pe&&fe[Z-1]!==Pe?[]:Es(fe,Pe);if(Z-=et.length,Z<b)return cP(l,d,Od,z.placeholder,r,fe,et,r,r,b-Z);var tt=this&&this!==Ln&&this instanceof z?M:l;return $(tt,this,fe)}return z}function sP(l){return function(d,b,M){var z=xt(d);if(!os(d)){var Z=Yt(b,3);d=mi(d),b=function(_e){return Z(z[_e],_e,z)}}var fe=l(d,b,M);return fe>-1?z[Z?d[fe]:fe]:r}}function oP(l){return Pa(function(d){var b=d.length,M=b,z=Gs.prototype.thru;for(l&&d.reverse();M--;){var Z=d[M];if(typeof Z!="function")throw new _r(o);if(z&&!fe&&Nd(Z)=="wrapper")var fe=new Gs([],!0)}for(M=fe?M:b;++M<b;){Z=d[M];var _e=Nd(Z),Pe=_e=="wrapper"?nm(Z):r;Pe&&am(Pe[0])&&Pe[1]==(p|A|I|P)&&!Pe[4].length&&Pe[9]==1?fe=fe[Nd(Pe[0])].apply(fe,Pe[3]):fe=Z.length==1&&am(Z)?fe[_e]():fe.thru(Z)}return function(){var et=arguments,tt=et[0];if(fe&&et.length==1&&cr(tt))return fe.plant(tt).value();for(var ot=0,bt=b?d[ot].apply(this,et):tt;++ot<b;)bt=d[ot].call(this,bt);return bt}})}function Od(l,d,b,M,z,Z,fe,_e,Pe,et){var tt=d&p,ot=d&x,bt=d&S,Dt=d&(A|T),Zt=d&O,vr=bt?r:xf(l);function Jt(){for(var Mr=arguments.length,$r=ve(Mr),Ps=Mr;Ps--;)$r[Ps]=arguments[Ps];if(Dt)var Ui=Wc(Jt),Cs=Ss($r,Ui);if(M&&($r=eP($r,M,z,Dt)),Z&&($r=tP($r,Z,fe,Dt)),Mr-=Cs,Dt&&Mr<et){var Kn=Es($r,Ui);return cP(l,d,Od,Jt.placeholder,b,$r,Kn,_e,Pe,et-Mr)}var wo=ot?b:this,Oa=bt?wo[l]:l;return Mr=$r.length,_e?$r=RW($r,_e):Zt&&Mr>1&&$r.reverse(),tt&&Pe<Mr&&($r.length=Pe),this&&this!==Ln&&this instanceof Jt&&(Oa=vr||xf(Oa)),Oa.apply(wo,$r)}return Jt}function aP(l,d){return function(b,M){return DH(b,l,d(M),{})}}function Md(l,d){return function(b,M){var z;if(b===r&&M===r)return d;if(b!==r&&(z=b),M!==r){if(z===r)return M;typeof b=="string"||typeof M=="string"?(b=As(b),M=As(M)):(b=HT(b),M=HT(M)),z=l(b,M)}return z}}function Qg(l){return Pa(function(d){return d=St(d,Bi(Yt())),br(function(b){var M=this;return l(d,function(z){return $(z,M,b)})})})}function kd(l,d){d=d===r?" ":As(d);var b=d.length;if(b<2)return b?Hg(d,l):d;var M=Hg(d,_d(l/Yo(d)));return is(d)?ou(zi(M),0,l).join(""):M.slice(0,l)}function lW(l,d,b,M){var z=d&x,Z=xf(l);function fe(){for(var _e=-1,Pe=arguments.length,et=-1,tt=M.length,ot=ve(tt+Pe),bt=this&&this!==Ln&&this instanceof fe?Z:l;++et<tt;)ot[et]=M[et];for(;Pe--;)ot[et++]=arguments[++_e];return $(bt,z?b:this,ot)}return fe}function uP(l){return function(d,b,M){return M&&typeof M!="number"&&$i(d,b,M)&&(b=M=r),d=Ia(d),b===r?(b=d,d=0):b=Ia(b),M=M===r?d<b?1:-1:Ia(M),YH(d,b,M,l)}}function Ld(l){return function(d,b){return typeof d=="string"&&typeof b=="string"||(d=Hs(d),b=Hs(b)),l(d,b)}}function cP(l,d,b,M,z,Z,fe,_e,Pe,et){var tt=d&A,ot=tt?fe:r,bt=tt?r:fe,Dt=tt?Z:r,Zt=tt?r:Z;d|=tt?I:N,d&=~(tt?N:I),d&E||(d&=-4);var vr=[l,d,z,Dt,ot,Zt,bt,_e,Pe,et],Jt=b.apply(r,vr);return am(l)&&wP(Jt,vr),Jt.placeholder=M,xP(Jt,l,d)}function em(l){var d=Pt[l];return function(b,M){if(b=Hs(b),M=M==null?0:Ri(dr(M),292),M&&xT(b)){var z=(rn(b)+"e").split("e"),Z=d(z[0]+"e"+(+z[1]+M));return z=(rn(Z)+"e").split("e"),+(z[0]+"e"+(+z[1]-M))}return d(b)}}var fW=Gc&&1/xa(new Gc([,-0]))[1]==U?function(l){return new Gc(l)}:xm;function lP(l){return function(d){var b=Ii(d);return b==L?zc(d):b==Ce?lf(d):mo(d,l(d))}}function Ta(l,d,b,M,z,Z,fe,_e){var Pe=d&S;if(!Pe&&typeof l!="function")throw new _r(o);var et=M?M.length:0;if(et||(d&=-97,M=z=r),fe=fe===r?fe:li(dr(fe),0),_e=_e===r?_e:dr(_e),et-=z?z.length:0,d&N){var tt=M,ot=z;M=z=r}var bt=Pe?r:nm(l),Dt=[l,d,b,M,z,tt,ot,Z,fe,_e];if(bt&&TW(Dt,bt),l=Dt[0],d=Dt[1],b=Dt[2],M=Dt[3],z=Dt[4],_e=Dt[9]=Dt[9]===r?Pe?0:l.length:li(Dt[9]-et,0),!_e&&d&(A|T)&&(d&=-25),!d||d==x)var Zt=uW(l,d,b);else d==A||d==T?Zt=cW(l,d,_e):(d==I||d==(x|I))&&!z.length?Zt=lW(l,d,b,M):Zt=Od.apply(r,Dt);var vr=bt?UT:wP;return xP(vr(Zt,Dt),l,d)}function fP(l,d,b,M){return l===r||bo(l,ci[b])&&!ir.call(M,b)?d:l}function hP(l,d,b,M,z,Z){return qn(l)&&qn(d)&&(Z.set(d,l),Pd(l,d,r,hP,Z),Z.delete(d)),l}function hW(l){return Af(l)?r:l}function dP(l,d,b,M,z,Z){var fe=b&m,_e=l.length,Pe=d.length;if(_e!=Pe&&!(fe&&Pe>_e))return!1;var et=Z.get(l),tt=Z.get(d);if(et&&tt)return et==d&&tt==l;var ot=-1,bt=!0,Dt=b&_?new ju:r;for(Z.set(l,d),Z.set(d,l);++ot<_e;){var Zt=l[ot],vr=d[ot];if(M)var Jt=fe?M(vr,Zt,ot,d,l,Z):M(Zt,vr,ot,l,d,Z);if(Jt!==r){if(Jt)continue;bt=!1;break}if(Dt){if(!Nn(d,function(Mr,$r){if(!Vu(Dt,$r)&&(Zt===Mr||z(Zt,Mr,b,M,Z)))return Dt.push($r)})){bt=!1;break}}else if(!(Zt===vr||z(Zt,vr,b,M,Z))){bt=!1;break}}return Z.delete(l),Z.delete(d),bt}function dW(l,d,b,M,z,Z,fe){switch(b){case yt:if(l.byteLength!=d.byteLength||l.byteOffset!=d.byteOffset)return!1;l=l.buffer,d=d.buffer;case ct:return!(l.byteLength!=d.byteLength||!Z(new vd(l),new vd(d)));case le:case Xe:case B:return bo(+l,+d);case Re:return l.name==d.name&&l.message==d.message;case Ae:case Be:return l==d+"";case L:var _e=zc;case Ce:var Pe=M&m;if(_e||(_e=xa),l.size!=d.size&&!Pe)return!1;var et=fe.get(l);if(et)return et==d;M|=_,fe.set(l,d);var tt=dP(_e(l),_e(d),M,z,Z,fe);return fe.delete(l),tt;case Le:if(gf)return gf.call(l)==gf.call(d)}return!1}function pW(l,d,b,M,z,Z){var fe=b&m,_e=tm(l),Pe=_e.length,et=tm(d),tt=et.length;if(Pe!=tt&&!fe)return!1;for(var ot=Pe;ot--;){var bt=_e[ot];if(!(fe?bt in d:ir.call(d,bt)))return!1}var Dt=Z.get(l),Zt=Z.get(d);if(Dt&&Zt)return Dt==d&&Zt==l;var vr=!0;Z.set(l,d),Z.set(d,l);for(var Jt=fe;++ot<Pe;){bt=_e[ot];var Mr=l[bt],$r=d[bt];if(M)var Ps=fe?M($r,Mr,bt,d,l,Z):M(Mr,$r,bt,l,d,Z);if(!(Ps===r?Mr===$r||z(Mr,$r,b,M,Z):Ps)){vr=!1;break}Jt||(Jt=bt=="constructor")}if(vr&&!Jt){var Ui=l.constructor,Cs=d.constructor;Ui!=Cs&&"constructor"in l&&"constructor"in d&&!(typeof Ui=="function"&&Ui instanceof Ui&&typeof Cs=="function"&&Cs instanceof Cs)&&(vr=!1)}return Z.delete(l),Z.delete(d),vr}function Pa(l){return cm(_P(l,r,CP),l+"")}function tm(l){return kT(l,mi,sm)}function rm(l){return kT(l,as,pP)}var nm=wd?function(l){return wd.get(l)}:xm;function Nd(l){for(var d=l.name+"",b=$c[d],M=ir.call($c,d)?b.length:0;M--;){var z=b[M],Z=z.func;if(Z==null||Z==l)return z.name}return d}function Wc(l){var d=ir.call(Y,"placeholder")?Y:l;return d.placeholder}function Yt(){var l=Y.iteratee||bm;return l=l===bm?qT:l,arguments.length?l(arguments[0],arguments[1]):l}function qd(l,d){var b=l.__data__;return xW(d)?b[typeof d=="string"?"string":"hash"]:b.map}function im(l){for(var d=mi(l),b=d.length;b--;){var M=d[b],z=l[M];d[b]=[M,z,mP(z)]}return d}function Xu(l,d){var b=ld(l,d);return NT(b)?b:r}function vW(l){var d=ir.call(l,$u),b=l[$u];try{l[$u]=r;var M=!0}catch{}var z=dd.call(l);return M&&(d?l[$u]=b:delete l[$u]),z}var sm=Mg?function(l){return l==null?[]:(l=xt(l),Ge(Mg(l),function(d){return bT.call(l,d)}))}:Sm,pP=Mg?function(l){for(var d=[];l;)ur(d,sm(l)),l=gd(l);return d}:Sm,Ii=Gi;(kg&&Ii(new kg(new ArrayBuffer(1)))!=yt||df&&Ii(new df)!=L||Lg&&Ii(Lg.resolve())!=xe||Gc&&Ii(new Gc)!=Ce||pf&&Ii(new pf)!=we)&&(Ii=function(l){var d=Gi(l),b=d==X?l.constructor:r,M=b?Yu(b):"";if(M)switch(M){case Z9:return yt;case J9:return L;case Q9:return xe;case eH:return Ce;case tH:return we}return d});function gW(l,d,b){for(var M=-1,z=b.length;++M<z;){var Z=b[M],fe=Z.size;switch(Z.type){case"drop":l+=fe;break;case"dropRight":d-=fe;break;case"take":d=Ri(d,l+fe);break;case"takeRight":l=li(l,d-fe);break}}return{start:l,end:d}}function mW(l){var d=l.match(di);return d?d[1].split(Ye):[]}function vP(l,d,b){d=su(d,l);for(var M=-1,z=d.length,Z=!1;++M<z;){var fe=Jo(d[M]);if(!(Z=l!=null&&b(l,fe)))break;l=l[fe]}return Z||++M!=z?Z:(z=l==null?0:l.length,!!z&&$d(z)&&Ca(fe,z)&&(cr(l)||Ku(l)))}function yW(l){var d=l.length,b=new l.constructor(d);return d&&typeof l[0]=="string"&&ir.call(l,"index")&&(b.index=l.index,b.input=l.input),b}function gP(l){return typeof l.constructor=="function"&&!Sf(l)?Uc(gd(l)):{}}function _W(l,d,b){var M=l.constructor;switch(d){case ct:return Jg(l);case le:case Xe:return new M(+l);case yt:return rW(l,b);case ft:case it:case Wt:case yr:case er:case lr:case Lr:case Br:case wn:return JT(l,b);case L:return new M;case B:case Be:return new M(l);case Ae:return nW(l);case Ce:return new M;case Le:return iW(l)}}function bW(l,d){var b=d.length;if(!b)return l;var M=b-1;return d[M]=(b>1?"& ":"")+d[M],d=d.join(b>2?", ":" "),l.replace(kn,`{
/* [wrapped with `+d+`] */
`)}function wW(l){return cr(l)||Ku(l)||!!(wT&&l&&l[wT])}function Ca(l,d){var b=typeof l;return d=d??j,!!d&&(b=="number"||b!="symbol"&&an.test(l))&&l>-1&&l%1==0&&l<d}function $i(l,d,b){if(!qn(b))return!1;var M=typeof d;return(M=="number"?os(b)&&Ca(d,b.length):M=="string"&&d in b)?bo(b[d],l):!1}function om(l,d){if(cr(l))return!1;var b=typeof l;return b=="number"||b=="symbol"||b=="boolean"||l==null||Ts(l)?!0:xn.test(l)||!Bn.test(l)||d!=null&&l in xt(d)}function xW(l){var d=typeof l;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?l!=="__proto__":l===null}function am(l){var d=Nd(l),b=Y[d];if(typeof b!="function"||!(d in qr.prototype))return!1;if(l===b)return!0;var M=nm(b);return!!M&&l===M[0]}function SW(l){return!!mT&&mT in l}var EW=Vi?Ra:Em;function Sf(l){var d=l&&l.constructor,b=typeof d=="function"&&d.prototype||ci;return l===b}function mP(l){return l===l&&!qn(l)}function yP(l,d){return function(b){return b==null?!1:b[l]===d&&(d!==r||l in xt(b))}}function AW(l){var d=Vd(l,function(M){return b.size===c&&b.clear(),M}),b=d.cache;return d}function TW(l,d){var b=l[1],M=d[1],z=b|M,Z=z<(x|S|p),fe=M==p&&b==A||M==p&&b==P&&l[7].length<=d[8]||M==(p|P)&&d[7].length<=d[8]&&b==A;if(!(Z||fe))return l;M&x&&(l[2]=d[2],z|=b&x?0:E);var _e=d[3];if(_e){var Pe=l[3];l[3]=Pe?eP(Pe,_e,d[4]):_e,l[4]=Pe?Es(l[3],f):d[4]}return _e=d[5],_e&&(Pe=l[5],l[5]=Pe?tP(Pe,_e,d[6]):_e,l[6]=Pe?Es(l[5],f):d[6]),_e=d[7],_e&&(l[7]=_e),M&p&&(l[8]=l[8]==null?d[8]:Ri(l[8],d[8])),l[9]==null&&(l[9]=d[9]),l[0]=d[0],l[1]=z,l}function PW(l){var d=[];if(l!=null)for(var b in xt(l))d.push(b);return d}function CW(l){return dd.call(l)}function _P(l,d,b){return d=li(d===r?l.length-1:d,0),function(){for(var M=arguments,z=-1,Z=li(M.length-d,0),fe=ve(Z);++z<Z;)fe[z]=M[d+z];z=-1;for(var _e=ve(d+1);++z<d;)_e[z]=M[z];return _e[d]=b(fe),$(l,this,_e)}}function bP(l,d){return d.length<2?l:Wu(l,Us(d,0,-1))}function RW(l,d){for(var b=l.length,M=Ri(d.length,b),z=ss(l);M--;){var Z=d[M];l[M]=Ca(Z,b)?z[Z]:r}return l}function um(l,d){if(!(d==="constructor"&&typeof l[d]=="function")&&d!="__proto__")return l[d]}var wP=SP(UT),Ef=U9||function(l,d){return Ln.setTimeout(l,d)},cm=SP(JH);function xP(l,d,b){var M=d+"";return cm(l,bW(M,IW(mW(M),b)))}function SP(l){var d=0,b=0;return function(){var M=X9(),z=G-(M-b);if(b=M,z>0){if(++d>=W)return arguments[0]}else d=0;return l.apply(r,arguments)}}function Dd(l,d){var b=-1,M=l.length,z=M-1;for(d=d===r?M:d;++b<d;){var Z=jg(b,z),fe=l[Z];l[Z]=l[b],l[b]=fe}return l.length=d,l}var EP=AW(function(l){var d=[];return l.charCodeAt(0)===46&&d.push(""),l.replace(jr,function(b,M,z,Z){d.push(z?Z.replace(kt,"$1"):M||b)}),d});function Jo(l){if(typeof l=="string"||Ts(l))return l;var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}function Yu(l){if(l!=null){try{return yo.call(l)}catch{}try{return l+""}catch{}}return""}function IW(l,d){return oe(re,function(b){var M="_."+b[0];d&b[1]&&!Me(l,M)&&l.push(M)}),l.sort()}function AP(l){if(l instanceof qr)return l.clone();var d=new Gs(l.__wrapped__,l.__chain__);return d.__actions__=ss(l.__actions__),d.__index__=l.__index__,d.__values__=l.__values__,d}function OW(l,d,b){(b?$i(l,d,b):d===r)?d=1:d=li(dr(d),0);var M=l==null?0:l.length;if(!M||d<1)return[];for(var z=0,Z=0,fe=ve(_d(M/d));z<M;)fe[Z++]=Us(l,z,z+=d);return fe}function MW(l){for(var d=-1,b=l==null?0:l.length,M=0,z=[];++d<b;){var Z=l[d];Z&&(z[M++]=Z)}return z}function kW(){var l=arguments.length;if(!l)return[];for(var d=ve(l-1),b=arguments[0],M=l;M--;)d[M-1]=arguments[M];return ur(cr(b)?ss(b):[b],xi(d,1))}var LW=br(function(l,d){return Yn(l)?yf(l,xi(d,1,Yn,!0)):[]}),NW=br(function(l,d){var b=js(d);return Yn(b)&&(b=r),Yn(l)?yf(l,xi(d,1,Yn,!0),Yt(b,2)):[]}),qW=br(function(l,d){var b=js(d);return Yn(b)&&(b=r),Yn(l)?yf(l,xi(d,1,Yn,!0),r,b):[]});function DW(l,d,b){var M=l==null?0:l.length;return M?(d=b||d===r?1:dr(d),Us(l,d<0?0:d,M)):[]}function FW(l,d,b){var M=l==null?0:l.length;return M?(d=b||d===r?1:dr(d),d=M-d,Us(l,0,d<0?0:d)):[]}function BW(l,d){return l&&l.length?Rd(l,Yt(d,3),!0,!0):[]}function zW(l,d){return l&&l.length?Rd(l,Yt(d,3),!0):[]}function VW(l,d,b,M){var z=l==null?0:l.length;return z?(b&&typeof b!="number"&&$i(l,d,b)&&(b=0,M=z),kH(l,d,b,M)):[]}function TP(l,d,b){var M=l==null?0:l.length;if(!M)return-1;var z=b==null?0:dr(b);return z<0&&(z=li(M+z,0)),Pr(l,Yt(d,3),z)}function PP(l,d,b){var M=l==null?0:l.length;if(!M)return-1;var z=M-1;return b!==r&&(z=dr(b),z=b<0?li(M+z,0):Ri(z,M-1)),Pr(l,Yt(d,3),z,!0)}function CP(l){var d=l==null?0:l.length;return d?xi(l,1):[]}function GW(l){var d=l==null?0:l.length;return d?xi(l,U):[]}function $W(l,d){var b=l==null?0:l.length;return b?(d=d===r?1:dr(d),xi(l,d)):[]}function UW(l){for(var d=-1,b=l==null?0:l.length,M={};++d<b;){var z=l[d];M[z[0]]=z[1]}return M}function RP(l){return l&&l.length?l[0]:r}function jW(l,d,b){var M=l==null?0:l.length;if(!M)return-1;var z=b==null?0:dr(b);return z<0&&(z=li(M+z,0)),un(l,d,z)}function HW(l){var d=l==null?0:l.length;return d?Us(l,0,-1):[]}var WW=br(function(l){var d=St(l,Kg);return d.length&&d[0]===l[0]?zg(d):[]}),XW=br(function(l){var d=js(l),b=St(l,Kg);return d===js(b)?d=r:b.pop(),b.length&&b[0]===l[0]?zg(b,Yt(d,2)):[]}),YW=br(function(l){var d=js(l),b=St(l,Kg);return d=typeof d=="function"?d:r,d&&b.pop(),b.length&&b[0]===l[0]?zg(b,r,d):[]});function KW(l,d){return l==null?"":H9.call(l,d)}function js(l){var d=l==null?0:l.length;return d?l[d-1]:r}function ZW(l,d,b){var M=l==null?0:l.length;if(!M)return-1;var z=M;return b!==r&&(z=dr(b),z=z<0?li(M+z,0):Ri(z,M-1)),d===d?Vc(l,d,z):Pr(l,Bc,z,!0)}function JW(l,d){return l&&l.length?zT(l,dr(d)):r}var QW=br(IP);function IP(l,d){return l&&l.length&&d&&d.length?Ug(l,d):l}function eX(l,d,b){return l&&l.length&&d&&d.length?Ug(l,d,Yt(b,2)):l}function tX(l,d,b){return l&&l.length&&d&&d.length?Ug(l,d,r,b):l}var rX=Pa(function(l,d){var b=l==null?0:l.length,M=qg(l,d);return $T(l,St(d,function(z){return Ca(z,b)?+z:z}).sort(QT)),M});function nX(l,d){var b=[];if(!(l&&l.length))return b;var M=-1,z=[],Z=l.length;for(d=Yt(d,3);++M<Z;){var fe=l[M];d(fe,M,l)&&(b.push(fe),z.push(M))}return $T(l,z),b}function lm(l){return l==null?l:K9.call(l)}function iX(l,d,b){var M=l==null?0:l.length;return M?(b&&typeof b!="number"&&$i(l,d,b)?(d=0,b=M):(d=d==null?0:dr(d),b=b===r?M:dr(b)),Us(l,d,b)):[]}function sX(l,d){return Cd(l,d)}function oX(l,d,b){return Wg(l,d,Yt(b,2))}function aX(l,d){var b=l==null?0:l.length;if(b){var M=Cd(l,d);if(M<b&&bo(l[M],d))return M}return-1}function uX(l,d){return Cd(l,d,!0)}function cX(l,d,b){return Wg(l,d,Yt(b,2),!0)}function lX(l,d){var b=l==null?0:l.length;if(b){var M=Cd(l,d,!0)-1;if(bo(l[M],d))return M}return-1}function fX(l){return l&&l.length?jT(l):[]}function hX(l,d){return l&&l.length?jT(l,Yt(d,2)):[]}function dX(l){var d=l==null?0:l.length;return d?Us(l,1,d):[]}function pX(l,d,b){return l&&l.length?(d=b||d===r?1:dr(d),Us(l,0,d<0?0:d)):[]}function vX(l,d,b){var M=l==null?0:l.length;return M?(d=b||d===r?1:dr(d),d=M-d,Us(l,d<0?0:d,M)):[]}function gX(l,d){return l&&l.length?Rd(l,Yt(d,3),!1,!0):[]}function mX(l,d){return l&&l.length?Rd(l,Yt(d,3)):[]}var yX=br(function(l){return iu(xi(l,1,Yn,!0))}),_X=br(function(l){var d=js(l);return Yn(d)&&(d=r),iu(xi(l,1,Yn,!0),Yt(d,2))}),bX=br(function(l){var d=js(l);return d=typeof d=="function"?d:r,iu(xi(l,1,Yn,!0),r,d)});function wX(l){return l&&l.length?iu(l):[]}function xX(l,d){return l&&l.length?iu(l,Yt(d,2)):[]}function SX(l,d){return d=typeof d=="function"?d:r,l&&l.length?iu(l,r,d):[]}function fm(l){if(!(l&&l.length))return[];var d=0;return l=Ge(l,function(b){if(Yn(b))return d=li(b.length,d),!0}),zu(d,function(b){return St(l,wa(b))})}function OP(l,d){if(!(l&&l.length))return[];var b=fm(l);return d==null?b:St(b,function(M){return $(d,r,M)})}var EX=br(function(l,d){return Yn(l)?yf(l,d):[]}),AX=br(function(l){return Yg(Ge(l,Yn))}),TX=br(function(l){var d=js(l);return Yn(d)&&(d=r),Yg(Ge(l,Yn),Yt(d,2))}),PX=br(function(l){var d=js(l);return d=typeof d=="function"?d:r,Yg(Ge(l,Yn),r,d)}),CX=br(fm);function RX(l,d){return YT(l||[],d||[],mf)}function IX(l,d){return YT(l||[],d||[],wf)}var OX=br(function(l){var d=l.length,b=d>1?l[d-1]:r;return b=typeof b=="function"?(l.pop(),b):r,OP(l,b)});function MP(l){var d=Y(l);return d.__chain__=!0,d}function MX(l,d){return d(l),l}function Fd(l,d){return d(l)}var kX=Pa(function(l){var d=l.length,b=d?l[0]:0,M=this.__wrapped__,z=function(Z){return qg(Z,l)};return d>1||this.__actions__.length||!(M instanceof qr)||!Ca(b)?this.thru(z):(M=M.slice(b,+b+(d?1:0)),M.__actions__.push({func:Fd,args:[z],thisArg:r}),new Gs(M,this.__chain__).thru(function(Z){return d&&!Z.length&&Z.push(r),Z}))});function LX(){return MP(this)}function NX(){return new Gs(this.value(),this.__chain__)}function qX(){this.__values__===r&&(this.__values__=HP(this.value()));var l=this.__index__>=this.__values__.length,d=l?r:this.__values__[this.__index__++];return{done:l,value:d}}function DX(){return this}function FX(l){for(var d,b=this;b instanceof Sd;){var M=AP(b);M.__index__=0,M.__values__=r,d?z.__wrapped__=M:d=M;var z=M;b=b.__wrapped__}return z.__wrapped__=l,d}function BX(){var l=this.__wrapped__;if(l instanceof qr){var d=l;return this.__actions__.length&&(d=new qr(this)),d=d.reverse(),d.__actions__.push({func:Fd,args:[lm],thisArg:r}),new Gs(d,this.__chain__)}return this.thru(lm)}function zX(){return XT(this.__wrapped__,this.__actions__)}var VX=Id(function(l,d,b){ir.call(l,b)?++l[b]:Aa(l,b,1)});function GX(l,d,b){var M=cr(l)?De:MH;return b&&$i(l,d,b)&&(d=r),M(l,Yt(d,3))}function $X(l,d){var b=cr(l)?Ge:OT;return b(l,Yt(d,3))}var UX=sP(TP),jX=sP(PP);function HX(l,d){return xi(Bd(l,d),1)}function WX(l,d){return xi(Bd(l,d),U)}function XX(l,d,b){return b=b===r?1:dr(b),xi(Bd(l,d),b)}function kP(l,d){var b=cr(l)?oe:nu;return b(l,Yt(d,3))}function LP(l,d){var b=cr(l)?Ee:IT;return b(l,Yt(d,3))}var YX=Id(function(l,d,b){ir.call(l,b)?l[b].push(d):Aa(l,b,[d])});function KX(l,d,b,M){l=os(l)?l:Yc(l),b=b&&!M?dr(b):0;var z=l.length;return b<0&&(b=li(z+b,0)),Ud(l)?b<=z&&l.indexOf(d,b)>-1:!!z&&un(l,d,b)>-1}var ZX=br(function(l,d,b){var M=-1,z=typeof d=="function",Z=os(l)?ve(l.length):[];return nu(l,function(fe){Z[++M]=z?$(d,fe,b):_f(fe,d,b)}),Z}),JX=Id(function(l,d,b){Aa(l,b,d)});function Bd(l,d){var b=cr(l)?St:DT;return b(l,Yt(d,3))}function QX(l,d,b,M){return l==null?[]:(cr(d)||(d=d==null?[]:[d]),b=M?r:b,cr(b)||(b=b==null?[]:[b]),VT(l,d,b))}var eY=Id(function(l,d,b){l[b?0:1].push(d)},function(){return[[],[]]});function tY(l,d,b){var M=cr(l)?sr:go,z=arguments.length<3;return M(l,Yt(d,4),b,z,nu)}function rY(l,d,b){var M=cr(l)?ai:go,z=arguments.length<3;return M(l,Yt(d,4),b,z,IT)}function nY(l,d){var b=cr(l)?Ge:OT;return b(l,Gd(Yt(d,3)))}function iY(l){var d=cr(l)?TT:KH;return d(l)}function sY(l,d,b){(b?$i(l,d,b):d===r)?d=1:d=dr(d);var M=cr(l)?PH:ZH;return M(l,d)}function oY(l){var d=cr(l)?CH:QH;return d(l)}function aY(l){if(l==null)return 0;if(os(l))return Ud(l)?Yo(l):l.length;var d=Ii(l);return d==L||d==Ce?l.size:Gg(l).length}function uY(l,d,b){var M=cr(l)?Nn:eW;return b&&$i(l,d,b)&&(d=r),M(l,Yt(d,3))}var cY=br(function(l,d){if(l==null)return[];var b=d.length;return b>1&&$i(l,d[0],d[1])?d=[]:b>2&&$i(d[0],d[1],d[2])&&(d=[d[0]]),VT(l,xi(d,1),[])}),zd=$9||function(){return Ln.Date.now()};function lY(l,d){if(typeof d!="function")throw new _r(o);return l=dr(l),function(){if(--l<1)return d.apply(this,arguments)}}function NP(l,d,b){return d=b?r:d,d=l&&d==null?l.length:d,Ta(l,p,r,r,r,r,d)}function qP(l,d){var b;if(typeof d!="function")throw new _r(o);return l=dr(l),function(){return--l>0&&(b=d.apply(this,arguments)),l<=1&&(d=r),b}}var hm=br(function(l,d,b){var M=x;if(b.length){var z=Es(b,Wc(hm));M|=I}return Ta(l,M,d,b,z)}),DP=br(function(l,d,b){var M=x|S;if(b.length){var z=Es(b,Wc(DP));M|=I}return Ta(d,M,l,b,z)});function FP(l,d,b){d=b?r:d;var M=Ta(l,A,r,r,r,r,r,d);return M.placeholder=FP.placeholder,M}function BP(l,d,b){d=b?r:d;var M=Ta(l,T,r,r,r,r,r,d);return M.placeholder=BP.placeholder,M}function zP(l,d,b){var M,z,Z,fe,_e,Pe,et=0,tt=!1,ot=!1,bt=!0;if(typeof l!="function")throw new _r(o);d=Hs(d)||0,qn(b)&&(tt=!!b.leading,ot="maxWait"in b,Z=ot?li(Hs(b.maxWait)||0,d):Z,bt="trailing"in b?!!b.trailing:bt);function Dt(Kn){var wo=M,Oa=z;return M=z=r,et=Kn,fe=l.apply(Oa,wo),fe}function Zt(Kn){return et=Kn,_e=Ef(Mr,d),tt?Dt(Kn):fe}function vr(Kn){var wo=Kn-Pe,Oa=Kn-et,sC=d-wo;return ot?Ri(sC,Z-Oa):sC}function Jt(Kn){var wo=Kn-Pe,Oa=Kn-et;return Pe===r||wo>=d||wo<0||ot&&Oa>=Z}function Mr(){var Kn=zd();if(Jt(Kn))return $r(Kn);_e=Ef(Mr,vr(Kn))}function $r(Kn){return _e=r,bt&&M?Dt(Kn):(M=z=r,fe)}function Ps(){_e!==r&&KT(_e),et=0,M=Pe=z=_e=r}function Ui(){return _e===r?fe:$r(zd())}function Cs(){var Kn=zd(),wo=Jt(Kn);if(M=arguments,z=this,Pe=Kn,wo){if(_e===r)return Zt(Pe);if(ot)return KT(_e),_e=Ef(Mr,d),Dt(Pe)}return _e===r&&(_e=Ef(Mr,d)),fe}return Cs.cancel=Ps,Cs.flush=Ui,Cs}var fY=br(function(l,d){return RT(l,1,d)}),hY=br(function(l,d,b){return RT(l,Hs(d)||0,b)});function dY(l){return Ta(l,O)}function Vd(l,d){if(typeof l!="function"||d!=null&&typeof d!="function")throw new _r(o);var b=function(){var M=arguments,z=d?d.apply(this,M):M[0],Z=b.cache;if(Z.has(z))return Z.get(z);var fe=l.apply(this,M);return b.cache=Z.set(z,fe)||Z,fe};return b.cache=new(Vd.Cache||Ea),b}Vd.Cache=Ea;function Gd(l){if(typeof l!="function")throw new _r(o);return function(){var d=arguments;switch(d.length){case 0:return!l.call(this);case 1:return!l.call(this,d[0]);case 2:return!l.call(this,d[0],d[1]);case 3:return!l.call(this,d[0],d[1],d[2])}return!l.apply(this,d)}}function pY(l){return qP(2,l)}var vY=tW(function(l,d){d=d.length==1&&cr(d[0])?St(d[0],Bi(Yt())):St(xi(d,1),Bi(Yt()));var b=d.length;return br(function(M){for(var z=-1,Z=Ri(M.length,b);++z<Z;)M[z]=d[z].call(this,M[z]);return $(l,this,M)})}),dm=br(function(l,d){var b=Es(d,Wc(dm));return Ta(l,I,r,d,b)}),VP=br(function(l,d){var b=Es(d,Wc(VP));return Ta(l,N,r,d,b)}),gY=Pa(function(l,d){return Ta(l,P,r,r,r,d)});function mY(l,d){if(typeof l!="function")throw new _r(o);return d=d===r?d:dr(d),br(l,d)}function yY(l,d){if(typeof l!="function")throw new _r(o);return d=d==null?0:li(dr(d),0),br(function(b){var M=b[d],z=ou(b,0,d);return M&&ur(z,M),$(l,this,z)})}function _Y(l,d,b){var M=!0,z=!0;if(typeof l!="function")throw new _r(o);return qn(b)&&(M="leading"in b?!!b.leading:M,z="trailing"in b?!!b.trailing:z),zP(l,d,{leading:M,maxWait:d,trailing:z})}function bY(l){return NP(l,1)}function wY(l,d){return dm(Zg(d),l)}function xY(){if(!arguments.length)return[];var l=arguments[0];return cr(l)?l:[l]}function SY(l){return $s(l,y)}function EY(l,d){return d=typeof d=="function"?d:r,$s(l,y,d)}function AY(l){return $s(l,h|y)}function TY(l,d){return d=typeof d=="function"?d:r,$s(l,h|y,d)}function PY(l,d){return d==null||CT(l,d,mi(d))}function bo(l,d){return l===d||l!==l&&d!==d}var CY=Ld(Bg),RY=Ld(function(l,d){return l>=d}),Ku=LT(function(){return arguments}())?LT:function(l){return Vn(l)&&ir.call(l,"callee")&&!bT.call(l,"callee")},cr=ve.isArray,IY=v?Bi(v):FH;function os(l){return l!=null&&$d(l.length)&&!Ra(l)}function Yn(l){return Vn(l)&&os(l)}function OY(l){return l===!0||l===!1||Vn(l)&&Gi(l)==le}var au=j9||Em,MY=w?Bi(w):BH;function kY(l){return Vn(l)&&l.nodeType===1&&!Af(l)}function LY(l){if(l==null)return!0;if(os(l)&&(cr(l)||typeof l=="string"||typeof l.splice=="function"||au(l)||Xc(l)||Ku(l)))return!l.length;var d=Ii(l);if(d==L||d==Ce)return!l.size;if(Sf(l))return!Gg(l).length;for(var b in l)if(ir.call(l,b))return!1;return!0}function NY(l,d){return bf(l,d)}function qY(l,d,b){b=typeof b=="function"?b:r;var M=b?b(l,d):r;return M===r?bf(l,d,r,b):!!M}function pm(l){if(!Vn(l))return!1;var d=Gi(l);return d==Re||d==Ne||typeof l.message=="string"&&typeof l.name=="string"&&!Af(l)}function DY(l){return typeof l=="number"&&xT(l)}function Ra(l){if(!qn(l))return!1;var d=Gi(l);return d==nt||d==Ve||d==te||d==ue}function GP(l){return typeof l=="number"&&l==dr(l)}function $d(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=j}function qn(l){var d=typeof l;return l!=null&&(d=="object"||d=="function")}function Vn(l){return l!=null&&typeof l=="object"}var $P=R?Bi(R):VH;function FY(l,d){return l===d||Vg(l,d,im(d))}function BY(l,d,b){return b=typeof b=="function"?b:r,Vg(l,d,im(d),b)}function zY(l){return UP(l)&&l!=+l}function VY(l){if(EW(l))throw new Qe(s);return NT(l)}function GY(l){return l===null}function $Y(l){return l==null}function UP(l){return typeof l=="number"||Vn(l)&&Gi(l)==B}function Af(l){if(!Vn(l)||Gi(l)!=X)return!1;var d=gd(l);if(d===null)return!0;var b=ir.call(d,"constructor")&&d.constructor;return typeof b=="function"&&b instanceof b&&yo.call(b)==B9}var vm=k?Bi(k):GH;function UY(l){return GP(l)&&l>=-9007199254740991&&l<=j}var jP=D?Bi(D):$H;function Ud(l){return typeof l=="string"||!cr(l)&&Vn(l)&&Gi(l)==Be}function Ts(l){return typeof l=="symbol"||Vn(l)&&Gi(l)==Le}var Xc=F?Bi(F):UH;function jY(l){return l===r}function HY(l){return Vn(l)&&Ii(l)==we}function WY(l){return Vn(l)&&Gi(l)==je}var XY=Ld($g),YY=Ld(function(l,d){return l<=d});function HP(l){if(!l)return[];if(os(l))return Ud(l)?zi(l):ss(l);if(hf&&l[hf])return Xo(l[hf]());var d=Ii(l),b=d==L?zc:d==Ce?xa:Yc;return b(l)}function Ia(l){if(!l)return l===0?l:0;if(l=Hs(l),l===U||l===-1/0){var d=l<0?-1:1;return d*Q}return l===l?l:0}function dr(l){var d=Ia(l),b=d%1;return d===d?b?d-b:d:0}function WP(l){return l?Hu(dr(l),0,ce):0}function Hs(l){if(typeof l=="number")return l;if(Ts(l))return de;if(qn(l)){var d=typeof l.valueOf=="function"?l.valueOf():l;l=qn(d)?d+"":d}if(typeof l!="string")return l===0?l:+l;l=Vs(l);var b=_t.test(l);return b||Vt.test(l)?Pg(l.slice(2),b?2:8):We.test(l)?de:+l}function XP(l){return Zo(l,as(l))}function KY(l){return l?Hu(dr(l),-9007199254740991,j):l===0?l:0}function rn(l){return l==null?"":As(l)}var ZY=jc(function(l,d){if(Sf(d)||os(d)){Zo(d,mi(d),l);return}for(var b in d)ir.call(d,b)&&mf(l,b,d[b])}),YP=jc(function(l,d){Zo(d,as(d),l)}),jd=jc(function(l,d,b,M){Zo(d,as(d),l,M)}),JY=jc(function(l,d,b,M){Zo(d,mi(d),l,M)}),QY=Pa(qg);function eK(l,d){var b=Uc(l);return d==null?b:PT(b,d)}var tK=br(function(l,d){l=xt(l);var b=-1,M=d.length,z=M>2?d[2]:r;for(z&&$i(d[0],d[1],z)&&(M=1);++b<M;)for(var Z=d[b],fe=as(Z),_e=-1,Pe=fe.length;++_e<Pe;){var et=fe[_e],tt=l[et];(tt===r||bo(tt,ci[et])&&!ir.call(l,et))&&(l[et]=Z[et])}return l}),rK=br(function(l){return l.push(r,hP),$(KP,r,l)});function nK(l,d){return Ho(l,Yt(d,3),Ko)}function iK(l,d){return Ho(l,Yt(d,3),Fg)}function sK(l,d){return l==null?l:Dg(l,Yt(d,3),as)}function oK(l,d){return l==null?l:MT(l,Yt(d,3),as)}function aK(l,d){return l&&Ko(l,Yt(d,3))}function uK(l,d){return l&&Fg(l,Yt(d,3))}function cK(l){return l==null?[]:Td(l,mi(l))}function lK(l){return l==null?[]:Td(l,as(l))}function gm(l,d,b){var M=l==null?r:Wu(l,d);return M===r?b:M}function fK(l,d){return l!=null&&vP(l,d,LH)}function mm(l,d){return l!=null&&vP(l,d,NH)}var hK=aP(function(l,d,b){d!=null&&typeof d.toString!="function"&&(d=dd.call(d)),l[d]=b},_m(us)),dK=aP(function(l,d,b){d!=null&&typeof d.toString!="function"&&(d=dd.call(d)),ir.call(l,d)?l[d].push(b):l[d]=[b]},Yt),pK=br(_f);function mi(l){return os(l)?AT(l):Gg(l)}function as(l){return os(l)?AT(l,!0):jH(l)}function vK(l,d){var b={};return d=Yt(d,3),Ko(l,function(M,z,Z){Aa(b,d(M,z,Z),M)}),b}function gK(l,d){var b={};return d=Yt(d,3),Ko(l,function(M,z,Z){Aa(b,z,d(M,z,Z))}),b}var mK=jc(function(l,d,b){Pd(l,d,b)}),KP=jc(function(l,d,b,M){Pd(l,d,b,M)}),yK=Pa(function(l,d){var b={};if(l==null)return b;var M=!1;d=St(d,function(Z){return Z=su(Z,l),M||(M=Z.length>1),Z}),Zo(l,rm(l),b),M&&(b=$s(b,h|g|y,hW));for(var z=d.length;z--;)Xg(b,d[z]);return b});function _K(l,d){return ZP(l,Gd(Yt(d)))}var bK=Pa(function(l,d){return l==null?{}:WH(l,d)});function ZP(l,d){if(l==null)return{};var b=St(rm(l),function(M){return[M]});return d=Yt(d),GT(l,b,function(M,z){return d(M,z[0])})}function wK(l,d,b){d=su(d,l);var M=-1,z=d.length;for(z||(z=1,l=r);++M<z;){var Z=l==null?r:l[Jo(d[M])];Z===r&&(M=z,Z=b),l=Ra(Z)?Z.call(l):Z}return l}function xK(l,d,b){return l==null?l:wf(l,d,b)}function SK(l,d,b,M){return M=typeof M=="function"?M:r,l==null?l:wf(l,d,b,M)}var JP=lP(mi),QP=lP(as);function EK(l,d,b){var M=cr(l),z=M||au(l)||Xc(l);if(d=Yt(d,4),b==null){var Z=l&&l.constructor;z?b=M?new Z:[]:qn(l)?b=Ra(Z)?Uc(gd(l)):{}:b={}}return(z?oe:Ko)(l,function(fe,_e,Pe){return d(b,fe,_e,Pe)}),b}function AK(l,d){return l==null?!0:Xg(l,d)}function TK(l,d,b){return l==null?l:WT(l,d,Zg(b))}function PK(l,d,b,M){return M=typeof M=="function"?M:r,l==null?l:WT(l,d,Zg(b),M)}function Yc(l){return l==null?[]:uf(l,mi(l))}function CK(l){return l==null?[]:uf(l,as(l))}function RK(l,d,b){return b===r&&(b=d,d=r),b!==r&&(b=Hs(b),b=b===b?b:0),d!==r&&(d=Hs(d),d=d===d?d:0),Hu(Hs(l),d,b)}function IK(l,d,b){return d=Ia(d),b===r?(b=d,d=0):b=Ia(b),l=Hs(l),qH(l,d,b)}function OK(l,d,b){if(b&&typeof b!="boolean"&&$i(l,d,b)&&(d=b=r),b===r&&(typeof d=="boolean"?(b=d,d=r):typeof l=="boolean"&&(b=l,l=r)),l===r&&d===r?(l=0,d=1):(l=Ia(l),d===r?(d=l,l=0):d=Ia(d)),l>d){var M=l;l=d,d=M}if(b||l%1||d%1){var z=ST();return Ri(l+z*(d-l+of("1e-"+((z+"").length-1))),d)}return jg(l,d)}var MK=Hc(function(l,d,b){return d=d.toLowerCase(),l+(b?eC(d):d)});function eC(l){return ym(rn(l).toLowerCase())}function tC(l){return l=rn(l),l&&l.replace(Wn,eu).replace(wg,"")}function kK(l,d,b){l=rn(l),d=As(d);var M=l.length;b=b===r?M:Hu(dr(b),0,M);var z=b;return b-=d.length,b>=0&&l.slice(b,z)==d}function LK(l){return l=rn(l),l&&ri.test(l)?l.replace(vn,Rg):l}function NK(l){return l=rn(l),l&&hi.test(l)?l.replace(jn,"\\$&"):l}var qK=Hc(function(l,d,b){return l+(b?"-":"")+d.toLowerCase()}),DK=Hc(function(l,d,b){return l+(b?" ":"")+d.toLowerCase()}),FK=iP("toLowerCase");function BK(l,d,b){l=rn(l),d=dr(d);var M=d?Yo(l):0;if(!d||M>=d)return l;var z=(d-M)/2;return kd(bd(z),b)+l+kd(_d(z),b)}function zK(l,d,b){l=rn(l),d=dr(d);var M=d?Yo(l):0;return d&&M<d?l+kd(d-M,b):l}function VK(l,d,b){l=rn(l),d=dr(d);var M=d?Yo(l):0;return d&&M<d?kd(d-M,b)+l:l}function GK(l,d,b){return b||d==null?d=0:d&&(d=+d),Y9(rn(l).replace(Qr,""),d||0)}function $K(l,d,b){return(b?$i(l,d,b):d===r)?d=1:d=dr(d),Hg(rn(l),d)}function UK(){var l=arguments,d=rn(l[0]);return l.length<3?d:d.replace(l[1],l[2])}var jK=Hc(function(l,d,b){return l+(b?"_":"")+d.toLowerCase()});function HK(l,d,b){return b&&typeof b!="number"&&$i(l,d,b)&&(d=b=r),b=b===r?ce:b>>>0,b?(l=rn(l),l&&(typeof d=="string"||d!=null&&!vm(d))&&(d=As(d),!d&&is(l))?ou(zi(l),0,b):l.split(d,b)):[]}var WK=Hc(function(l,d,b){return l+(b?" ":"")+ym(d)});function XK(l,d,b){return l=rn(l),b=b==null?0:Hu(dr(b),0,l.length),d=As(d),l.slice(b,b+d.length)==d}function YK(l,d,b){var M=Y.templateSettings;b&&$i(l,d,b)&&(d=r),l=rn(l),d=jd({},d,M,fP);var z=jd({},d.imports,M.imports,fP),Z=mi(z),fe=uf(z,Z),_e,Pe,et=0,tt=d.interpolate||Mt,ot="__p += '",bt=hr((d.escape||Mt).source+"|"+tt.source+"|"+(tt===zr?Lt:Mt).source+"|"+(d.evaluate||Mt).source+"|$","g"),Dt="//# sourceURL="+(ir.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Tg+"]")+`
`;l.replace(bt,function(Jt,Mr,$r,Ps,Ui,Cs){return $r||($r=Ps),ot+=l.slice(et,Cs).replace(en,Ig),Mr&&(_e=!0,ot+=`' +
__e(`+Mr+`) +
'`),Ui&&(Pe=!0,ot+=`';
`+Ui+`;
__p += '`),$r&&(ot+=`' +
((__t = (`+$r+`)) == null ? '' : __t) +
'`),et=Cs+Jt.length,Jt}),ot+=`';
`;var Zt=ir.call(d,"variable")&&d.variable;if(!Zt)ot=`with (obj) {
`+ot+`
}
`;else if(Rt.test(Zt))throw new Qe(a);ot=(Pe?ot.replace(rr,""):ot).replace(Or,"$1").replace(mn,"$1;"),ot="function("+(Zt||"obj")+`) {
`+(Zt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(_e?", __e = _.escape":"")+(Pe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ot+`return __p
}`;var vr=nC(function(){return At(Z,Dt+"return "+ot).apply(r,fe)});if(vr.source=ot,pm(vr))throw vr;return vr}function KK(l){return rn(l).toLowerCase()}function ZK(l){return rn(l).toUpperCase()}function JK(l,d,b){if(l=rn(l),l&&(b||d===r))return Vs(l);if(!l||!(d=As(d)))return l;var M=zi(l),z=zi(d),Z=Yr(M,z),fe=Gu(M,z)+1;return ou(M,Z,fe).join("")}function QK(l,d,b){if(l=rn(l),l&&(b||d===r))return l.slice(0,fd(l)+1);if(!l||!(d=As(d)))return l;var M=zi(l),z=Gu(M,zi(d))+1;return ou(M,0,z).join("")}function eZ(l,d,b){if(l=rn(l),l&&(b||d===r))return l.replace(Qr,"");if(!l||!(d=As(d)))return l;var M=zi(l),z=Yr(M,zi(d));return ou(M,z).join("")}function tZ(l,d){var b=q,M=V;if(qn(d)){var z="separator"in d?d.separator:z;b="length"in d?dr(d.length):b,M="omission"in d?As(d.omission):M}l=rn(l);var Z=l.length;if(is(l)){var fe=zi(l);Z=fe.length}if(b>=Z)return l;var _e=b-Yo(M);if(_e<1)return M;var Pe=fe?ou(fe,0,_e).join(""):l.slice(0,_e);if(z===r)return Pe+M;if(fe&&(_e+=Pe.length-_e),vm(z)){if(l.slice(_e).search(z)){var et,tt=Pe;for(z.global||(z=hr(z.source,rn(at.exec(z))+"g")),z.lastIndex=0;et=z.exec(tt);)var ot=et.index;Pe=Pe.slice(0,ot===r?_e:ot)}}else if(l.indexOf(As(z),_e)!=_e){var bt=Pe.lastIndexOf(z);bt>-1&&(Pe=Pe.slice(0,bt))}return Pe+M}function rZ(l){return l=rn(l),l&&Un.test(l)?l.replace(yn,ff):l}var nZ=Hc(function(l,d,b){return l+(b?" ":"")+d.toUpperCase()}),ym=iP("toUpperCase");function rC(l,d,b){return l=rn(l),d=b?r:d,d===r?cf(l)?be(l):Tr(l):l.match(d)||[]}var nC=br(function(l,d){try{return $(l,r,d)}catch(b){return pm(b)?b:new Qe(b)}}),iZ=Pa(function(l,d){return oe(d,function(b){b=Jo(b),Aa(l,b,hm(l[b],l))}),l});function sZ(l){var d=l==null?0:l.length,b=Yt();return l=d?St(l,function(M){if(typeof M[1]!="function")throw new _r(o);return[b(M[0]),M[1]]}):[],br(function(M){for(var z=-1;++z<d;){var Z=l[z];if($(Z[0],this,M))return $(Z[1],this,M)}})}function oZ(l){return OH($s(l,h))}function _m(l){return function(){return l}}function aZ(l,d){return l==null||l!==l?d:l}var uZ=oP(),cZ=oP(!0);function us(l){return l}function bm(l){return qT(typeof l=="function"?l:$s(l,h))}function lZ(l){return FT($s(l,h))}function fZ(l,d){return BT(l,$s(d,h))}var hZ=br(function(l,d){return function(b){return _f(b,l,d)}}),dZ=br(function(l,d){return function(b){return _f(l,b,d)}});function wm(l,d,b){var M=mi(d),z=Td(d,M);b==null&&!(qn(d)&&(z.length||!M.length))&&(b=d,d=l,l=this,z=Td(d,mi(d)));var Z=!(qn(b)&&"chain"in b)||!!b.chain,fe=Ra(l);return oe(z,function(_e){var Pe=d[_e];l[_e]=Pe,fe&&(l.prototype[_e]=function(){var et=this.__chain__;if(Z||et){var tt=l(this.__wrapped__),ot=tt.__actions__=ss(this.__actions__);return ot.push({func:Pe,args:arguments,thisArg:l}),tt.__chain__=et,tt}return Pe.apply(l,ur([this.value()],arguments))})}),l}function pZ(){return Ln._===this&&(Ln._=z9),this}function xm(){}function vZ(l){return l=dr(l),br(function(d){return zT(d,l)})}var gZ=Qg(St),mZ=Qg(De),yZ=Qg(Nn);function iC(l){return om(l)?wa(Jo(l)):XH(l)}function _Z(l){return function(d){return l==null?r:Wu(l,d)}}var bZ=uP(),wZ=uP(!0);function Sm(){return[]}function Em(){return!1}function xZ(){return{}}function SZ(){return""}function EZ(){return!0}function AZ(l,d){if(l=dr(l),l<1||l>j)return[];var b=ce,M=Ri(l,ce);d=Yt(d),l-=ce;for(var z=zu(M,d);++b<l;)d(b);return z}function TZ(l){return cr(l)?St(l,Jo):Ts(l)?[l]:ss(EP(rn(l)))}function PZ(l){var d=++F9;return rn(l)+d}var CZ=Md(function(l,d){return l+d},0),RZ=em("ceil"),IZ=Md(function(l,d){return l/d},1),OZ=em("floor");function MZ(l){return l&&l.length?Ad(l,us,Bg):r}function kZ(l,d){return l&&l.length?Ad(l,Yt(d,2),Bg):r}function LZ(l){return xs(l,us)}function NZ(l,d){return xs(l,Yt(d,2))}function qZ(l){return l&&l.length?Ad(l,us,$g):r}function DZ(l,d){return l&&l.length?Ad(l,Yt(d,2),$g):r}var FZ=Md(function(l,d){return l*d},1),BZ=em("round"),zZ=Md(function(l,d){return l-d},0);function VZ(l){return l&&l.length?Ci(l,us):0}function GZ(l,d){return l&&l.length?Ci(l,Yt(d,2)):0}return Y.after=lY,Y.ary=NP,Y.assign=ZY,Y.assignIn=YP,Y.assignInWith=jd,Y.assignWith=JY,Y.at=QY,Y.before=qP,Y.bind=hm,Y.bindAll=iZ,Y.bindKey=DP,Y.castArray=xY,Y.chain=MP,Y.chunk=OW,Y.compact=MW,Y.concat=kW,Y.cond=sZ,Y.conforms=oZ,Y.constant=_m,Y.countBy=VX,Y.create=eK,Y.curry=FP,Y.curryRight=BP,Y.debounce=zP,Y.defaults=tK,Y.defaultsDeep=rK,Y.defer=fY,Y.delay=hY,Y.difference=LW,Y.differenceBy=NW,Y.differenceWith=qW,Y.drop=DW,Y.dropRight=FW,Y.dropRightWhile=BW,Y.dropWhile=zW,Y.fill=VW,Y.filter=$X,Y.flatMap=HX,Y.flatMapDeep=WX,Y.flatMapDepth=XX,Y.flatten=CP,Y.flattenDeep=GW,Y.flattenDepth=$W,Y.flip=dY,Y.flow=uZ,Y.flowRight=cZ,Y.fromPairs=UW,Y.functions=cK,Y.functionsIn=lK,Y.groupBy=YX,Y.initial=HW,Y.intersection=WW,Y.intersectionBy=XW,Y.intersectionWith=YW,Y.invert=hK,Y.invertBy=dK,Y.invokeMap=ZX,Y.iteratee=bm,Y.keyBy=JX,Y.keys=mi,Y.keysIn=as,Y.map=Bd,Y.mapKeys=vK,Y.mapValues=gK,Y.matches=lZ,Y.matchesProperty=fZ,Y.memoize=Vd,Y.merge=mK,Y.mergeWith=KP,Y.method=hZ,Y.methodOf=dZ,Y.mixin=wm,Y.negate=Gd,Y.nthArg=vZ,Y.omit=yK,Y.omitBy=_K,Y.once=pY,Y.orderBy=QX,Y.over=gZ,Y.overArgs=vY,Y.overEvery=mZ,Y.overSome=yZ,Y.partial=dm,Y.partialRight=VP,Y.partition=eY,Y.pick=bK,Y.pickBy=ZP,Y.property=iC,Y.propertyOf=_Z,Y.pull=QW,Y.pullAll=IP,Y.pullAllBy=eX,Y.pullAllWith=tX,Y.pullAt=rX,Y.range=bZ,Y.rangeRight=wZ,Y.rearg=gY,Y.reject=nY,Y.remove=nX,Y.rest=mY,Y.reverse=lm,Y.sampleSize=sY,Y.set=xK,Y.setWith=SK,Y.shuffle=oY,Y.slice=iX,Y.sortBy=cY,Y.sortedUniq=fX,Y.sortedUniqBy=hX,Y.split=HK,Y.spread=yY,Y.tail=dX,Y.take=pX,Y.takeRight=vX,Y.takeRightWhile=gX,Y.takeWhile=mX,Y.tap=MX,Y.throttle=_Y,Y.thru=Fd,Y.toArray=HP,Y.toPairs=JP,Y.toPairsIn=QP,Y.toPath=TZ,Y.toPlainObject=XP,Y.transform=EK,Y.unary=bY,Y.union=yX,Y.unionBy=_X,Y.unionWith=bX,Y.uniq=wX,Y.uniqBy=xX,Y.uniqWith=SX,Y.unset=AK,Y.unzip=fm,Y.unzipWith=OP,Y.update=TK,Y.updateWith=PK,Y.values=Yc,Y.valuesIn=CK,Y.without=EX,Y.words=rC,Y.wrap=wY,Y.xor=AX,Y.xorBy=TX,Y.xorWith=PX,Y.zip=CX,Y.zipObject=RX,Y.zipObjectDeep=IX,Y.zipWith=OX,Y.entries=JP,Y.entriesIn=QP,Y.extend=YP,Y.extendWith=jd,wm(Y,Y),Y.add=CZ,Y.attempt=nC,Y.camelCase=MK,Y.capitalize=eC,Y.ceil=RZ,Y.clamp=RK,Y.clone=SY,Y.cloneDeep=AY,Y.cloneDeepWith=TY,Y.cloneWith=EY,Y.conformsTo=PY,Y.deburr=tC,Y.defaultTo=aZ,Y.divide=IZ,Y.endsWith=kK,Y.eq=bo,Y.escape=LK,Y.escapeRegExp=NK,Y.every=GX,Y.find=UX,Y.findIndex=TP,Y.findKey=nK,Y.findLast=jX,Y.findLastIndex=PP,Y.findLastKey=iK,Y.floor=OZ,Y.forEach=kP,Y.forEachRight=LP,Y.forIn=sK,Y.forInRight=oK,Y.forOwn=aK,Y.forOwnRight=uK,Y.get=gm,Y.gt=CY,Y.gte=RY,Y.has=fK,Y.hasIn=mm,Y.head=RP,Y.identity=us,Y.includes=KX,Y.indexOf=jW,Y.inRange=IK,Y.invoke=pK,Y.isArguments=Ku,Y.isArray=cr,Y.isArrayBuffer=IY,Y.isArrayLike=os,Y.isArrayLikeObject=Yn,Y.isBoolean=OY,Y.isBuffer=au,Y.isDate=MY,Y.isElement=kY,Y.isEmpty=LY,Y.isEqual=NY,Y.isEqualWith=qY,Y.isError=pm,Y.isFinite=DY,Y.isFunction=Ra,Y.isInteger=GP,Y.isLength=$d,Y.isMap=$P,Y.isMatch=FY,Y.isMatchWith=BY,Y.isNaN=zY,Y.isNative=VY,Y.isNil=$Y,Y.isNull=GY,Y.isNumber=UP,Y.isObject=qn,Y.isObjectLike=Vn,Y.isPlainObject=Af,Y.isRegExp=vm,Y.isSafeInteger=UY,Y.isSet=jP,Y.isString=Ud,Y.isSymbol=Ts,Y.isTypedArray=Xc,Y.isUndefined=jY,Y.isWeakMap=HY,Y.isWeakSet=WY,Y.join=KW,Y.kebabCase=qK,Y.last=js,Y.lastIndexOf=ZW,Y.lowerCase=DK,Y.lowerFirst=FK,Y.lt=XY,Y.lte=YY,Y.max=MZ,Y.maxBy=kZ,Y.mean=LZ,Y.meanBy=NZ,Y.min=qZ,Y.minBy=DZ,Y.stubArray=Sm,Y.stubFalse=Em,Y.stubObject=xZ,Y.stubString=SZ,Y.stubTrue=EZ,Y.multiply=FZ,Y.nth=JW,Y.noConflict=pZ,Y.noop=xm,Y.now=zd,Y.pad=BK,Y.padEnd=zK,Y.padStart=VK,Y.parseInt=GK,Y.random=OK,Y.reduce=tY,Y.reduceRight=rY,Y.repeat=$K,Y.replace=UK,Y.result=wK,Y.round=BZ,Y.runInContext=ee,Y.sample=iY,Y.size=aY,Y.snakeCase=jK,Y.some=uY,Y.sortedIndex=sX,Y.sortedIndexBy=oX,Y.sortedIndexOf=aX,Y.sortedLastIndex=uX,Y.sortedLastIndexBy=cX,Y.sortedLastIndexOf=lX,Y.startCase=WK,Y.startsWith=XK,Y.subtract=zZ,Y.sum=VZ,Y.sumBy=GZ,Y.template=YK,Y.times=AZ,Y.toFinite=Ia,Y.toInteger=dr,Y.toLength=WP,Y.toLower=KK,Y.toNumber=Hs,Y.toSafeInteger=KY,Y.toString=rn,Y.toUpper=ZK,Y.trim=JK,Y.trimEnd=QK,Y.trimStart=eZ,Y.truncate=tZ,Y.unescape=rZ,Y.uniqueId=PZ,Y.upperCase=nZ,Y.upperFirst=ym,Y.each=kP,Y.eachRight=LP,Y.first=RP,wm(Y,function(){var l={};return Ko(Y,function(d,b){ir.call(Y.prototype,b)||(l[b]=d)}),l}(),{chain:!1}),Y.VERSION=n,oe(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){Y[l].placeholder=Y}),oe(["drop","take"],function(l,d){qr.prototype[l]=function(b){b=b===r?1:li(dr(b),0);var M=this.__filtered__&&!d?new qr(this):this.clone();return M.__filtered__?M.__takeCount__=Ri(b,M.__takeCount__):M.__views__.push({size:Ri(b,ce),type:l+(M.__dir__<0?"Right":"")}),M},qr.prototype[l+"Right"]=function(b){return this.reverse()[l](b).reverse()}}),oe(["filter","map","takeWhile"],function(l,d){var b=d+1,M=b==J||b==K;qr.prototype[l]=function(z){var Z=this.clone();return Z.__iteratees__.push({iteratee:Yt(z,3),type:b}),Z.__filtered__=Z.__filtered__||M,Z}}),oe(["head","last"],function(l,d){var b="take"+(d?"Right":"");qr.prototype[l]=function(){return this[b](1).value()[0]}}),oe(["initial","tail"],function(l,d){var b="drop"+(d?"":"Right");qr.prototype[l]=function(){return this.__filtered__?new qr(this):this[b](1)}}),qr.prototype.compact=function(){return this.filter(us)},qr.prototype.find=function(l){return this.filter(l).head()},qr.prototype.findLast=function(l){return this.reverse().find(l)},qr.prototype.invokeMap=br(function(l,d){return typeof l=="function"?new qr(this):this.map(function(b){return _f(b,l,d)})}),qr.prototype.reject=function(l){return this.filter(Gd(Yt(l)))},qr.prototype.slice=function(l,d){l=dr(l);var b=this;return b.__filtered__&&(l>0||d<0)?new qr(b):(l<0?b=b.takeRight(-l):l&&(b=b.drop(l)),d!==r&&(d=dr(d),b=d<0?b.dropRight(-d):b.take(d-l)),b)},qr.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},qr.prototype.toArray=function(){return this.take(ce)},Ko(qr.prototype,function(l,d){var b=/^(?:filter|find|map|reject)|While$/.test(d),M=/^(?:head|last)$/.test(d),z=Y[M?"take"+(d=="last"?"Right":""):d],Z=M||/^find/.test(d);z&&(Y.prototype[d]=function(){var fe=this.__wrapped__,_e=M?[1]:arguments,Pe=fe instanceof qr,et=_e[0],tt=Pe||cr(fe),ot=function(Mr){var $r=z.apply(Y,ur([Mr],_e));return M&&bt?$r[0]:$r};tt&&b&&typeof et=="function"&&et.length!=1&&(Pe=tt=!1);var bt=this.__chain__,Dt=!!this.__actions__.length,Zt=Z&&!bt,vr=Pe&&!Dt;if(!Z&&tt){fe=vr?fe:new qr(this);var Jt=l.apply(fe,_e);return Jt.__actions__.push({func:Fd,args:[ot],thisArg:r}),new Gs(Jt,bt)}return Zt&&vr?l.apply(this,_e):(Jt=this.thru(ot),Zt?M?Jt.value()[0]:Jt.value():Jt)})}),oe(["pop","push","shift","sort","splice","unshift"],function(l){var d=ui[l],b=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",M=/^(?:pop|shift)$/.test(l);Y.prototype[l]=function(){var z=arguments;if(M&&!this.__chain__){var Z=this.value();return d.apply(cr(Z)?Z:[],z)}return this[b](function(fe){return d.apply(cr(fe)?fe:[],z)})}}),Ko(qr.prototype,function(l,d){var b=Y[d];if(b){var M=b.name+"";ir.call($c,M)||($c[M]=[]),$c[M].push({name:d,func:b})}}),$c[Od(r,S).name]=[{name:"wrapper",func:r}],qr.prototype.clone=rH,qr.prototype.reverse=nH,qr.prototype.value=iH,Y.prototype.at=kX,Y.prototype.chain=LX,Y.prototype.commit=NX,Y.prototype.next=qX,Y.prototype.plant=FX,Y.prototype.reverse=BX,Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=zX,Y.prototype.first=Y.prototype.head,hf&&(Y.prototype[hf]=DX),Y},ke=Oe();vo?((vo.exports=ke)._=ke,Fc._=ke):Ln._=ke}).call(Jpe)}(jf,jf.exports)),jf.exports}var eve=Qpe();const Tn=Fl(eve);var tve=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},rve=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Ep;function Xs(e,t,r){return t.map((n,i)=>e(n,r[i]))}function vp(e,t,r,n,i){return t.map((s,o)=>e(s,r[o],n[o],i[o]))}function ea(e,t,r,n){if(t.length==0)return n==1?1:0;let i=t[t.length-1];n==1?i|=~r:i&=r;for(let s=0;s<t.length-1;s++)i=e(i,t[s]);return i=e(i,i>>>16),i=e(i,i>>>8),i=e(i,i>>>4),i=e(i,i>>>2),i=e(i,i>>>1),i&1}function nve(e){return e>>5}function ia(e){return e&31}function hl(e,t,r,n,i){const s=e>0&&!(n[t]&1<<e-1)&&i[t]&1<<e-1;s&&ia(e)&&(i[t]|=-1<<e),s&&t+1<r&&i.fill(-1,t+1)}function tT(e,t){const r={};function n(i,s){if(r[i]=s,!(i.length*e>=t)){for(let o=0;o<1<<e;o+=1)n(i+o.toString(1<<e),s<<e|o|o<<16);n(i+"x",s<<e|(1<<e)-1)}}return n("",0),Object.seal(r),r}const ive=tT(1,8),sve=tT(3,3),ove=tT(4,8);function Sj(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000"+r[o].toString(16),u=r[o]^n[o];o++;for(let c=0;c<8&&s<t;c++,s+=4)u&15<<4*c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function Ej(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000000000000000000000000000"+r[o].toString(2),u=r[o]^n[o];o++;for(let c=0;c<32&&s<t;c++,s++)u&1<<c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function EE(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const f=e.slice(Math.max(0,c-2),c);c-=f.length;const h=ove[f];ia(a)==0&&u++;const g=(1<<4*f.length)-1;n[u]|=(h>>>16&g)<<a,i[u]|=(h&g)<<a,a+=4*f.length}a<r&&hl(a,u,o,n,i)}function Aj(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const f=e.slice(Math.max(0,c-8),c);c-=f.length;const h=ive[f];ia(a)==0&&u++;const g=(1<<1*f.length)-1;n[u]|=(h>>>16&g)<<a,i[u]|=(h&g)<<a,a+=1*f.length}a<r&&hl(a,u,o,n,i)}class rT extends Error{constructor(t){super(t),Object.setPrototypeOf(this,rT.prototype)}}function yi(e,t){if(!e)throw new rT("Assertion failed: "+t)}class Je{constructor(t,r,n){this._bits=t,this._avec=r,this._bvec=n}static make(t,r){t=t|0;let n,i;switch(r){case!0:case"1":case 1:n=i=-1;break;case!1:case"0":case-1:case void 0:n=i=0;break;case"x":case 0:n=0,i=-1;break;default:yi(!1,"Vector3vl.make() called with invalid initializer")}const s=(t+31)/32|0;return new Je(t,new Uint32Array(s).fill(n),new Uint32Array(s).fill(i))}static zeros(t){return Je.make(t,-1)}static ones(t){return Je.make(t,1)}static xes(t){return Je.make(t,0)}static fromBool(t,r=1){return Je.make(r,t?1:-1)}static concat(...t){const n=t.reduce((u,c)=>c.bits+u,0)+31>>>5;let i=0,s=-1,o=new Uint32Array(n),a=new Uint32Array(n);for(const u of t)if(u.normalize(),ia(i)==0)o.set(u._avec,s+1),a.set(u._bvec,s+1),i+=u._bits,s+=u._bits+31>>>5;else{for(const c in u._avec){if(o[s]|=u._avec[c]<<i,a[s]|=u._bvec[c]<<i,s++,s==n)break;o[s]=u._avec[c]>>>-i,a[s]=u._bvec[c]>>>-i}i+=u._bits,s+1>i+31>>>5&&s--}return new Je(i,o,a)}static fromIterator(t,r,n){return(r&r-1)==0?Je.fromIteratorPow2(t,r,n):Je.fromIteratorAnySkip(t,r,n)}static fromIteratorAnySkip(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const f of t)ia(s)==0&&o++,a[o]|=(f>>>r&c)<<s,u[o]|=(f&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(f>>>r&c)>>>-s,u[o]=(f&c)>>>-s),s+=r;return s<n&&hl(s,o,i,a,u),new Je(n,a,u)}static fromIteratorPow2(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const f of t)ia(s)==0&&o++,a[o]|=(f>>>r&c)<<s,u[o]|=(f&c)<<s,s+=r;return s<n&&hl(s,o,i,a,u),new Je(n,a,u)}static fromArray(t){const r=t.length,n=1,i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<n)-1;for(const f of t){const h=f+1+ +(f>0);ia(s)==0&&o++,a[o]|=(h>>>n&c)<<s,u[o]|=(h&c)<<s,s+=n}return s<r&&hl(s,o,i,a,u),new Je(r,a,u)}static fromBin(t,r){r===void 0&&(r=t.length);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return Aj(t,0,r,i,s),new Je(r,i,s)}static fromOct(t,r){r===void 0&&(r=t.length*3);const i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=7;for(let f=t.length-1;f>=0;f--){const h=sve[t[f]];ia(s)==0&&o++,a[o]|=(h>>>16&c)<<s,u[o]|=(h&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(h>>>16&c)>>>-s,u[o]=(h&c)>>>-s),s+=3}return s<r&&hl(s,o,i,a,u),new Je(r,a,u)}static fromHex(t,r){r===void 0&&(r=t.length*4);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return EE(t,0,r,i,s),new Je(r,i,s)}static fromString(t){const n=/^([0-9]*)'?(b[01x]*|o[0-7x]*|h[0-9a-fx]*|d[0-9]*)$/.exec(t);yi(n!=null,"Vector3vl.fromString() Invalid string");const i=n[1].length?Number(n[1]):void 0,s=n[2].slice(1);switch(n[2][0]){case"b":return Je.fromBin(s,i);case"o":return Je.fromOct(s,i);case"h":return Je.fromHex(s,i);case"d":return Je.fromNumber(BigInt(s),i)}}static fromClonable(t){return new Je(t._bits,t._avec,t._bvec)}static fromNumber(t,r){const n=r===void 0?0:r,i=BigInt(t);if(i>=BigInt(0)){let s=i.toString(2);return Je.fromBin("0".repeat(Math.max(0,n-s.length))+s,r)}else{const s=(-i).toString(2).length;let a=(i+(BigInt(1)<<BigInt(s))).toString(2);return Je.fromBin("1".repeat(Math.max(1,n-s))+"0".repeat(s-a.length)+a,r)}}get bits(){return this._bits}get msb(){return this.get(this._bits-1)}get lsb(){return this.get(0)}get(t){const r=ia(t),n=nve(t),i=this._avec[n]>>>r&1,s=this._bvec[n]>>>r&1;return i+s-1}get isHigh(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>~i==0)&&(n[n.length-1]&t)==t;return r(this._avec)&&r(this._bvec)}get isLow(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>i==0)&&(n[n.length-1]&t)==0;return r(this._avec)&&r(this._bvec)}get isDefined(){if(this._bits==0)return!1;const t=Xs((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]|=~this._lastmask,!t.every(r=>~r==0)}get isFullyDefined(){if(this._bits==0)return!0;const t=Xs((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]&=this._lastmask,!t.some(r=>!!r)}and(t){return yi(t._bits==this._bits,"Vector3vl.and() called with vectors of different sizes"),new Je(this._bits,Xs((r,n)=>r&n,t._avec,this._avec),Xs((r,n)=>r&n,t._bvec,this._bvec))}or(t){return yi(t._bits==this._bits,"Vector3vl.or() called with vectors of different sizes"),new Je(this._bits,Xs((r,n)=>r|n,t._avec,this._avec),Xs((r,n)=>r|n,t._bvec,this._bvec))}xor(t){return yi(t._bits==this._bits,"Vector3vl.xor() called with vectors of different sizes"),new Je(this._bits,vp((r,n,i,s)=>(r|i)&(n^s),t._avec,t._bvec,this._avec,this._bvec),vp((r,n,i,s)=>r&i^(n|s),t._avec,t._bvec,this._avec,this._bvec))}nand(t){return yi(t._bits==this._bits,"Vector3vl.nand() called with vectors of different sizes"),new Je(this._bits,Xs((r,n)=>~(r&n),t._bvec,this._bvec),Xs((r,n)=>~(r&n),t._avec,this._avec))}nor(t){return yi(t._bits==this._bits,"Vector3vl.nor() called with vectors of different sizes"),new Je(this._bits,Xs((r,n)=>~(r|n),t._bvec,this._bvec),Xs((r,n)=>~(r|n),t._avec,this._avec))}xnor(t){return yi(t._bits==this._bits,"Vector3vl.xnor() called with vectors of different sizes"),new Je(this._bits,vp((r,n,i,s)=>~(r&i^(n|s)),t._avec,t._bvec,this._avec,this._bvec),vp((r,n,i,s)=>~((r|i)&(n^s)),t._avec,t._bvec,this._avec,this._bvec))}not(){return new Je(this._bits,this._bvec.map(t=>~t),this._avec.map(t=>~t))}xmask(){const t=Xs((r,n)=>r^n,this._avec,this._bvec);return new Je(this._bits,t,t)}reduceAnd(){return new Je(1,Uint32Array.of(ea((t,r)=>t&r,this._avec,this._lastmask,1)),Uint32Array.of(ea((t,r)=>t&r,this._bvec,this._lastmask,1)))}reduceOr(){return new Je(1,Uint32Array.of(ea((t,r)=>t|r,this._avec,this._lastmask,0)),Uint32Array.of(ea((t,r)=>t|r,this._bvec,this._lastmask,0)))}reduceNand(){return new Je(1,Uint32Array.of(~ea((t,r)=>t&r,this._bvec,this._lastmask,1)),Uint32Array.of(~ea((t,r)=>t&r,this._avec,this._lastmask,1)))}reduceNor(){return new Je(1,Uint32Array.of(~ea((t,r)=>t|r,this._bvec,this._lastmask,0)),Uint32Array.of(~ea((t,r)=>t|r,this._avec,this._lastmask,0)))}reduceXor(){const t=Xs((i,s)=>~i&s,this._avec,this._bvec),r=ea((i,s)=>i|s,t,this._lastmask,0),n=ea((i,s)=>i^s,this._avec,this._lastmask,0);return new Je(1,Uint32Array.of(n&~r),Uint32Array.of(n|r))}reduceXnor(){return this.reduceXor().not()}concat(...t){return Je.concat(this,...t)}slice(t,r){if(t===void 0&&(t=0),r===void 0&&(r=this._bits),r>this.bits&&(r=this.bits),t>r&&(r=t),ia(t)==0){const n=this._avec.slice(t>>>5,r+31>>>5),i=this._bvec.slice(t>>>5,r+31>>>5);return new Je(r-t,n,i)}else{const n=r-t+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);let o=0;i[o]=this._avec[t>>5]>>>t,s[o]=this._bvec[t>>5]>>>t;for(let a=(t>>5)+1;a<=r>>>5&&(i[o]|=this._avec[a]<<-t,s[o]|=this._bvec[a]<<-t,o++,o!=n);a++)i[o]=this._avec[a]>>>t,s[o]=this._bvec[a]>>>t;return new Je(r-t,i,s)}}toIterator(t){return(t&t-1)==0?this.toIteratorPow2(t):this.toIteratorAnySkip(t)}*toIteratorAnySkip(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){let o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const u=r>>-n;o|=(this._avec[i+1]&u)<<-n,a|=(this._bvec[i+1]&u)<<-n}yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r<<n)}}*toIteratorPow2(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){const o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r)}}toArray(){this.normalize();const t=1,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){const a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n,c=a<<t|u;o.push(c-1-+(c>1)),s<<=t,n+=t,s==0&&(i++,s=r)}return o}toBin(){return Ej(0,this._bits,this._avec,this._bvec)}toOct(){this.normalize();const t=3,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){let a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const f=r>>-n;a|=(this._avec[i+1]&f)<<-n,u|=(this._bvec[i+1]&f)<<-n}const c=a<<t|u;7&c&~(c>>3)?o.push("x"):o.push((c>>3).toString()),s<<=t,n+=t,s==0&&(i++,s=r<<n)}return o.reverse().join("")}toHex(){return this.normalize(),Sj(0,this._bits,this._avec,this._bvec)}toString(){return"Vector3vl "+this.toBin()}toClonable(){return{_bits:this._bits,_avec:this._avec,_bvec:this._bvec}}toNumber(t=!1){return t?this.toNumberSigned():(yi(this.isFullyDefined,"Vector3vl.toNumber() called on a not fully defined vector"),yi(this._bits<32,"Vector3vl.toNumber() called on a too wide vector"),this._bits==0?0:Number.parseInt(this.toHex(),16))}toNumberSigned(){return yi(this.isFullyDefined,"Vector3vl.toNumberSigned() called on a not fully defined vector"),yi(this._bits<32,"Vector3vl.toNumberSigned() called on a too wide vector"),yi(this._bits>0,"Vector3vl.toNumberSigned() called on an empty vector"),this.msb==1?Number.parseInt(this.toHex(),16)-(1<<this._bits):Number.parseInt(this.toHex(),16)}toBigInt(t=!1){return t?this.toBigIntSigned():(yi(this.isFullyDefined,"Vector3vl.toBigInt() called on a not fully defined vector"),this._bits==0?BigInt(0):BigInt("0x"+this.toHex()))}toBigIntSigned(){return yi(this.isFullyDefined,"Vector3vl.toBigIntSigned() called on a not fully defined vector"),yi(this._bits>0,"Vector3vl.toBigIntSigned() called on an empty vector"),this.msb==1?BigInt("0x"+this.toHex())-(BigInt(1)<<BigInt(this._bits)):BigInt("0x"+this.toHex())}eq(t){if(t._bits!=this._bits)return!1;this.normalize(),t.normalize();for(const r in this._avec)if(this._avec[r]!=t._avec[r]||this._bvec[r]!=t._bvec[r])return!1;return!0}normalize(){const t=this._lastmask;this._avec[this._avec.length-1]&=t,this._bvec[this._bvec.length-1]&=t}get _lastmask(){return-1>>>-this.bits}}Je.empty=Je.zeros(0);Je.one=Je.ones(1);Je.zero=Je.zeros(1);Je.x=Je.xes(1);class yl{constructor(t,r,n){n===void 0&&(n=0),this._bits=t|0,this._size=r|0,this._wpc=(t+31)/32|0,this._avec=new Uint32Array(r*this._wpc).fill(n>0?-1:0),this._bvec=new Uint32Array(r*this._wpc).fill(n>=0?-1:0),this._size&&this.set(this._size-1,this.get(this._size-1))}static fromData(t){if(t.length==0)return new yl(0,0);const r=new yl(t[0].bits,t.length);for(const n in t){t[n].normalize(),yi(t[n].bits==r._bits,"Mem3vl.fromData() called with vectors of different sizes");for(let i=0;i<r._wpc;i++){const s=Number(n)*r._wpc+i;r._avec[s]=t[n]._avec[i],r._bvec[s]=t[n]._bvec[i]}}return r}get bits(){return this._bits}get words(){return this._size}get(t){const r=this._wpc*t;return new Je(this._bits,this._avec.slice(r,r+this._wpc),this._bvec.slice(r,r+this._wpc))}set(t,r){yi(r.bits==this._bits,"Mem3vl.set() called with a vector with different bit width than the memory"),r.normalize();for(let n=0;n<this._wpc;n++)this._avec[t*this._wpc+n]=r._avec[n],this._bvec[t*this._wpc+n]=r._bvec[n]}toJSON(){const t=[];let r=[],n,i=0;const s=()=>{if(r.length!=0){if(r.reduce((u,c)=>u+c.length,0)==this._bits){const u=r.pop();r.length>0&&t.push(r.join("")),t.push(u)}else t.push(r.join(""));r=[]}},o=()=>{i!=0&&(i==1?n.length==this._bits?(s(),t.push(n)):r.push(n):(s(),t.push(i),t.push(n)),n=void 0,i=0)},a=u=>{n==u?i++:(o(),n=u,i=1)};for(let u=0;u<this._size;u++){const c=()=>{for(let f=0;f<this._wpc;f++){const h=this._avec[u*this._wpc+f]^this._bvec[u*this._wpc+f];for(let g=0;g<4;g++){const y=255<<g*16,m=h&y;if(m!=y||m!=0)return!1}}return!0};this._bits>0&&c()?a(Sj(u*this._wpc,this._bits,this._avec,this._bvec)):a(Ej(u*this._wpc,this._bits,this._avec,this._bvec))}return o(),s(),t}static fromJSON(t,r){const n=Math.ceil(t/4);let i=0;const s=c=>c.length==t||c.length==n?1:c.length/n;for(let c=0;c<r.length;c++)typeof r[c]=="string"?i+=s(r[c]):typeof r[c]=="number"&&(i+=r[c]*s(r[c+1]),c++);const o=new yl(t,i,-1);let a=0;const u=c=>{if(c.length==t)Aj(c,a,t,o._avec,o._bvec),a+=o._wpc;else if(c.length==n)EE(c,a,t,o._avec,o._bvec),a+=o._wpc;else for(let f=0;f<c.length/n;f++)EE(c.slice(f*n,(f+1)*n),a,t,o._avec,o._bvec),a+=o._wpc};for(let c=0;c<r.length;c++)if(typeof r[c]=="string")u(r[c]);else if(typeof r[c]=="number"){for(const f of Array(r[c]).keys())u(r[c+1]);c++}return o}toArray(){return Array(this._size).fill(0).map((t,r)=>this.get(r))}toHex(){return this.toArray().map(t=>t.toHex())}eq(t){if(t._bits!=this._bits||t._size!=this._size)return!1;for(let r=0;r<this._size;r++)if(!t.get(r).eq(this.get(r)))return!1;return!0}}class Jl{constructor(t){Ep.set(this,void 0),this.pattern=t,tve(this,Ep,RegExp("^(?:"+this.pattern+")$"),"f")}validate(t,r){return rve(this,Ep,"f").test(t)}}Ep=new WeakMap;class ave extends Jl{constructor(){super("[0-9a-fx]*"),this.name="hex",this.sort=0}can(t,r){return!0}read(t,r){return Je.fromHex(t,r)}show(t){return t.toHex()}size(t){return Math.ceil(t/4)}}class uve extends Jl{constructor(){super("[01x]*"),this.name="bin",this.sort=0}can(t,r){return!0}read(t,r){return Je.fromBin(t,r)}show(t){return t.toBin()}size(t){return t}}class cve extends Jl{constructor(){super("[0-7x]*"),this.name="oct",this.sort=0}can(t,r){return!0}read(t,r){return Je.fromOct(t,r)}show(t){return t.toOct()}size(t){return Math.ceil(t/3)}}class lve extends Jl{constructor(){super("[0-9]*|x")}get name(){return"dec"}get sort(){return 0}can(t,r){return!0}read(t,r){return t=="x"?Je.xes(r):Je.fromNumber(BigInt(t),r)}show(t){return t.isFullyDefined?t.toBigInt().toString():"x"}size(t){return Math.max(1,Math.ceil(t/Math.log2(10)))}}class fve extends Jl{constructor(){super("-?[0-9]*|x")}get name(){return"dec2c"}get sort(){return 0}can(t,r){return r>0}read(t,r){return t=="x"?Je.xes(r):Je.fromNumber(BigInt(t),r)}show(t){return t.isFullyDefined?t.toBigIntSigned().toString():"x"}size(t){return 1+Math.ceil(t/Math.log2(10))}}class Tj{constructor(){this.displays={},this.addDisplay(new ave),this.addDisplay(new uve),this.addDisplay(new cve),this.addDisplay(new lve),this.addDisplay(new fve)}addDisplay(t){this.displays[t.name]=t}usableDisplays(t,r){const n=[];for(let i of Object.values(this.displays))i.can(t,r)&&n.push(i);return n.sort((i,s)=>i.sort-s.sort?i.sort-s.sort:i.name.localeCompare(s.name)).map(i=>i.name)}show(t,r){return this.displays[t].show(r)}read(t,r,n){return this.displays[t].read(r,n)}pattern(t){return this.displays[t].pattern}validate(t,r,n){return this.displays[t].validate(r,n)}size(t,r){return this.displays[t].size(r)}}const Pj={tagName:"circle",attributes:{r:7,fill:"black","fill-opacity":.3,stroke:"black","stroke-width":2,cursor:"move"}},hve=Zpe.extend(Tn.merge({},Pj)),dve=Kpe.extend(Tn.merge({},Pj)),Cj=SE.extend({update(){return this.relatedView.isShortWire()?(this.options.distance=this.options.distanceShort||this.options.distance,this.options.secondary&&this.hide()):this.options.distance=this.options.distanceLong||this.options.distance,SE.prototype.update.apply(this,arguments)}}),o4=Cj.extend({name:"remove",children:i4.prototype.children,options:i4.prototype.options}),a4=Cj.extend({name:"monitor",children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#001DFF",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"m -2.5,-0.5 a 2,2 0 1 0 4,0 2,2 0 1 0 -4,0 M 1,1 3,3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{action(e){this.notify("link:monitor")}}}),Yp={wire:{stroke:"#4B4F6A",x1:0,y1:0,x2:void 0,y2:0},port:{magnet:void 0,r:7,stroke:"black",fill:"white",strokeWidth:2,strokeOpacity:.5},bits:{ref:"port",fill:"black",fontSize:"7pt"},iolabel:{textVerticalAnchor:"middle",fill:"black",fontSize:"8pt"},decor:{stroke:"black",fill:"transparent"}},bn=ps.define("Gate",{propagation:1,label:"",size:{width:80,height:30},inputSignals:{},outputSignals:{},attrs:{".":{magnet:!1},body:{stroke:"black",strokeWidth:2},text:{fontSize:"8pt",fill:"black"},label:{refX:.5,refDy:3,textAnchor:"middle"}},ports:{groups:{in:{position:"left",attrs:Tn.merge({},Yp,{wire:{x2:-25},port:{magnet:"passive",refX:-25},bits:{refDx:1,refY:-3,textAnchor:"start"},iolabel:{refX:5,textAnchor:"start"}})},out:{position:"right",attrs:Tn.merge({},Yp,{wire:{x2:25},port:{magnet:!0,refX:25},bits:{refX:-1,refY:-3,textAnchor:"end"},iolabel:{refX:-5,textAnchor:"end"}})}}},z:1},{operation(){return{}},initialize(){const e=this.get("ports");e.items&&this._preprocessPorts(e.items),ps.prototype.initialize.apply(this,arguments),this.prepare(),this.bindAttrToProp("label/text","label"),this._unsupportedPropChanges.length>0&&this.on(this._unsupportedPropChanges.map(t=>"change:"+t).join(" "),(t,r,n)=>{if(n.init)return;const i=Tn.intersection(Object.keys(this.changed),this._unsupportedPropChanges);i.forEach(s=>{this.set(s,this.previous(s),{init:!0})}),console.warn('Beta property change support: "'+i+'" changes on '+this.get("type")+" are (currently) not supported.")})},prepare(){},bindAttrToProp(e,t){this.attr(e,this.get(t)),this.on("change:"+t,(r,n)=>this.attr(e,n))},_changeOutputSignals(e){Tn.chain(this.graph.getConnectedLinks(this,{outbound:!0})).groupBy(t=>t.get("source").port).forEach((t,r)=>t.forEach(n=>n.set("signal",e[r]))).value()},_setInput(e,t){const r=Tn.clone(this.get("inputSignals"));r[t]=e,this.set("inputSignals",r)},_clearInput(e){const t=this.getPort(e).bits;this._setInput(Je.xes(t),e)},_preprocessPorts(e){this._resetPortsSignals(e);for(const t of e){if(t.attrs={},t.attrs.bits={text:this._getBitsText(t.bits)},t.labelled){const r={text:"portlabel"in t?t.portlabel:t.id};t.polarity===!1&&(r["text-decoration"]="overline"),t.decor&&(console.assert(t.group=="in"),r.refX=10),t.attrs.iolabel=r}t.decor&&(t.attrs.decor={d:t.decor})}},_setPortsBits(e){const t=Tn.cloneDeep(this.get("ports")),r=[];for(const n in e){const i=e[n],s=t.items.find(function(o){return o.id&&o.id===n});s.bits=i,s.attrs.bits.text=this._getBitsText(i),r.push(s)}this._resetPortsSignals(r),this.set("ports",t),this.graph.getConnectedLinks(this,{outbound:!0}).filter(n=>n.get("source").port in e).forEach(n=>n._changeSource(n.get("source"))),this.graph.getConnectedLinks(this,{inbound:!0}).filter(n=>n.get("target").port in e).forEach(n=>n._changeTarget(n.get("target")))},_getBitsText(e){return e>1?e:""},_resetPortValue(e){return Je.xes(e.bits)},_resetPortsSignals(e){const t={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const r of e)console.assert(r.bits>=0),t[r.dir][r.id]=this._resetPortValue(r);this.set("inputSignals",t.in),this.set("outputSignals",t.out)},_removePortsSignals(e){const t={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const r of e)delete t[r.dir][r.id];this.set("inputSignals",t.in),this.set("outputSignals",t.out)},addPort(e){this.addPorts([e])},addPorts(e){this._preprocessPorts(e),ps.prototype.addPorts.apply(this,arguments)},removePort(e,t){this.removePorts([e])},removePorts(e,t){this._removePortsSignals(e),ps.prototype.removePorts.apply(this,arguments)},_getStackedPosition(e){return function(t,r){const n=e.side||"left",i=e.step||16,s=e.offset||12,o=n=="left"?r.topLeft().x:n=="right"?r.topRight().x:void 0,a=n=="top"?r.topLeft().y:n=="bottom"?r.bottomRight().y:void 0;return o!==void 0?Tn.map(t,function(u,c){return c+=u.idxOffset||0,pe({x:o,y:c*i+s})}):Tn.map(t,function(u,c){return c+=u.idxOffset||0,pe({x:c*i+s,y:a})})}},getLayoutSize(){return this.size()},setLayoutPosition(e){this.set("position",{x:e.x,y:e.y})},portMarkup:[{tagName:"line",className:"wire",selector:"wire"},{tagName:"circle",className:"port",selector:"port"},{tagName:"text",className:"bits",selector:"bits"},{tagName:"text",className:"iolabel",selector:"iolabel"},{tagName:"path",className:"decor",selector:"decor"}],markup:[{tagName:"text",className:"label",selector:"label"}],getGateParams(e){return Tn.cloneDeep(Tn.pick(this.attributes,this._gateParams.concat(e?this._gateLayoutParams:[])))},_gateParams:["label","type","propagation","source_positions"],_gateLayoutParams:["position"],_unsupportedPropChanges:[],_operationHelpers:[],_presentationParams:[]}),Kt=_i.extend({attrs:{signal:{high:{port:{stroke:"#03c03c"}},low:{port:{stroke:"#fc7c68"}},def:{port:{stroke:"#779ecb"}},undef:{port:{stroke:"#999"}}}},presentationAttributes:_i.addPresentationAttributes({inputSignals:"SIGNAL",outputSignals:"SIGNAL2"}),stopprop(e){e.stopPropagation()},confirmUpdate(e){this.hasFlag(e,"SIGNAL")&&this._updatePortSignals("in"),this.hasFlag(e,"SIGNAL2")&&this._updatePortSignals("out"),_i.prototype.confirmUpdate.apply(this,arguments)},_updatePortSignals(e){const t=e==="in"?this.model.get("inputSignals"):e==="out"?this.model.get("outputSignals"):Tn.merge({},this.model.get("inputSignals"),this.model.get("outputSignals"));for(const r in t){const n=t[r],i=this.attrs.signal[n.isDefined?n.isHigh?"high":n.isLow?"low":"def":"undef"];this._applyPortAttrs(r,i)}},_applyAttrs(e){for(const t in e){const r=this.selectors[t];this.setNodeAttributes(r,e[t])}},_applyPortAttrs(e,t){if(e in this._portElementsCache)for(const r in t){const n=this._portElementsCache[e].portSelectors[r];this.setNodeAttributes(n,t[r])}},_updatePorts(){_i.prototype._updatePorts.apply(this,arguments),this._updatePortSignals()}}),Rj=Sp.define("Wire",{attrs:{line:{class:"connection",targetMarker:null},wrapper:{stroke:"red"}},signal:Je.xes(1),bits:1,warning:!1,z:0},{initialize(){Sp.prototype.initialize.apply(this,arguments),this.has("netname")&&this.label(0,{markup:[{tagName:"text",selector:"label"}],attrs:{label:{text:this.get("netname"),fill:"black",fontSize:"8pt"}},position:{distance:.5}})},onAdd(){this._changeSource(this.get("source")),this._was_added=!0},remove(){const e=this.get("target"),t=this.graph.getCell(e.id);t&&"port"in e&&t._clearInput(e.port),Sp.prototype.remove.apply(this,arguments)},_propagateSignal(e,t){const r=this.getTargetElement();r&&(this.get("warning")?r._clearInput(e.port):r._setInput(t,e.port))},_changeSignal(e){this._propagateSignal(this.get("target"),e)},_changeSource(e){const t=this.getSourceElement();t&&"port"in e?(this.set("bits",t.getPort(e.port).bits),this._checkConnection(),this.set("signal",t.get("outputSignals")[e.port])):this.set("signal",Je.xes(this.get("bits")))},_changeTarget(e){if(this._checkConnection(),"port"in e&&this._propagateSignal(e,this.get("signal")),!this.hasChanged("target"))return;const t=this.previous("target"),r=this.graph.getCell(t.id);r&&"port"in t&&r._clearInput(t.port)},_checkConnection(){const e=this.get("target"),t=this.graph.getCell(e.id);this.set("warning",t&&t.getPort(e.port).bits!==this.get("bits")||!1,{silent:!this._was_added})},getWireParams(e){const t={from:{id:this.get("source").id,port:this.get("source").port},to:{id:this.get("target").id,port:this.get("target").port}};return this.has("netname")&&(t.name=this.get("netname")),e&&this.has("vertices")&&this.get("vertices").length>0&&(t.vertices=Tn.cloneDeep(this.get("vertices"))),t},getWirePath(){const e=[];for(let t=this.graph.get("subcircuit");t!=null;t=t.graph.get("subcircuit")){if(!t.has("label"))return null;e.push(t.get("label"))}return e.reverse()}}),pve=Hi.extend({initFlag:Hi.prototype.initFlag.concat(["INIT"]),longWireLength:400,attrs:{signal:{high:{line:{stroke:"#03c03c"}},low:{line:{stroke:"#fc7c68"}},def:{line:{stroke:"#779ecb"}},undef:{line:{stroke:"#999"}}},bits:{bus:{line:{"stroke-width":"4px"}},single:{line:{"stroke-width":"2px"}}},warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}},_wireToolsView:typeof window<"u"?new Gpe({tools:[new Xpe({focusOpacity:.5}),new hve,new dve,new o4({distanceShort:"75%",distanceLong:"50"}),new o4({distance:"-50",secondary:!0}),new a4({distanceShort:"25%",distanceLong:"30"}),new a4({distance:"-30",secondary:!0})]}):null,presentationAttributes:Hi.addPresentationAttributes({signal:"SIGNAL",bits:"BITS",warning:"WARNING"}),initialize(){Hi.prototype.initialize.apply(this,arguments),this.prevModels={source:null,target:null}},confirmUpdate(e){Hi.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"SIGNAL")&&this._updateSignal(),this.hasFlag(e,"BITS")&&this._updateBits(),this.hasFlag(e,"WARNING")&&this._updateWarning()},isShortWire(){return this.getConnectionLength()<this.longWireLength},_updateSignal(){const e=this.model.get("signal"),t=this.attrs.signal[e.isDefined?e.isHigh?"high":e.isLow?"low":"def":"undef"];this._applyAttrs(t)},_updateBits(){const e=this.model.get("bits"),t=this.attrs.bits[e>1?"bus":"single"];this._applyAttrs(t)},_updateWarning(){const e=this.model.get("warning"),t=this.attrs.warning[e?"warn":"none"];this._applyAttrs(t)},_applyAttrs(e){for(const t in e){const r=this.selectors[t];this.setNodeAttributes(r,e[t])}},update(){Hi.prototype.update.apply(this,arguments),this._updateSignal(),this._updateBits(),this._updateWarning()},onRemove(){Hi.prototype.onRemove.apply(this,arguments),this._removeTooltip()},mouseenter(e){Hi.prototype.mouseenter.apply(this,arguments),this.addTools(this._wireToolsView),this._addTooltip({x:e.clientX+5,y:e.clientY+5})},mouseleave(e){Hi.prototype.mouseleave.apply(this,arguments),this.removeTools(),this._removeTooltip()},_addTooltip(e){this.model.get("bits")!=1&&(this.wire_hover||(this.wire_hover=It('<div class="wire_hover">').css("left",e.x).css("top",e.y).appendTo(It(document.body)),this._generateTextForTooltip(),this.listenTo(this.model,"change:signal",this._generateTextForTooltip)))},_removeTooltip(){this.wire_hover&&(this.wire_hover.remove(),this.wire_hover=null,this.stopListening(this.model,"change:signal",this._generateTextForTooltip))},_generateTextForTooltip(){if(!this.wire_hover)return;const e=this.model.get("signal"),t=this.model.graph._display3vl,r=["Hex: "+t.show("hex",e)+"<br>","Dec: "+t.show("dec",e)+"<br>","Oct: "+t.show("oct",e)+"<br>","Bin: "+t.show("bin",e)].join("");this.wire_hover.html(r)},onEndModelChange(e,t,r){typeof t=="object"&&t!=null&&t==this.prevModels[e]&&Object.keys(t.changed).length>0&&!("position"in t.changed)||(Hi.prototype.onEndModelChange.apply(this,arguments),this.prevModels[e]=t)}}),Ft=bn.define("Box",{attrs:{body:{refWidth:1,refHeight:1},tooltip:{refX:0,refY:-30,height:30}}},{initialize(){bn.prototype.initialize.apply(this,arguments),this.on("change:size",(e,t)=>{t.width>this.tooltipMinWidth?this.attr("tooltip",{refWidth:1,width:null}):this.attr("tooltip",{refWidth:null,width:this.tooltipMinWidth})}),this.trigger("change:size",this,this.prop("size"))},markup:bn.prototype.markup.concat([{tagName:"rect",className:"body",selector:"body"}]),markupZoom:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"a",className:"zoom",textContent:"🔍",style:{cursor:"pointer"}}]}]}],tooltipMinWidth:20,decorClock:"M"+[[0,-6],[6,0],[0,6]].map(e=>e.join(" ")).join(" L")}),ii=Kt.extend({_autoResizeBox:!1,render(){Kt.prototype.render.apply(this,arguments),this._autoResizeBox&&!this.model.get("box_resized")&&(this.model.set("box_resized",!0),this.model.prop("size/width",this._calculateBoxWidth()))},_calculateBoxWidth(){const e=Array.from(this.el.querySelectorAll("[port-group=in] > text.iolabel")),t=Array.from(this.el.querySelectorAll("[port-group=out] > text.iolabel")),r=Math.max(...e.map(o=>o.getBBox().width)),n=Math.max(...t.map(o=>o.getBBox().width)),i=o=>o==-1/0?-5:o;return i(r)+i(n)+25}}),ls=Ft.define("NumBase",{numbase:"hex",bits:1},{initialize(){Ft.prototype.initialize.apply(this,arguments),this.on("change:bits",(e,t)=>{this.graph._display3vl.usableDisplays(this.numbaseType,this.get("bits")).includes(this.get("numbase"))||this.set("numbase","hex")})},tooltipMinWidth:70,markupTooltip:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"select",className:"numbase"}]}]}],_gateParams:Ft.prototype._gateParams.concat(["numbase"])}),yu=ii.extend({presentationAttributes:ii.addPresentationAttributes({bits:"BITS",numbase:"NUMBASE"}),_autoResizeBox:!0,events:{"click select.numbase":"stopprop","mousedown select.numbase":"stopprop","touchstart select.numbase":"stopprop","change select.numbase":"_changeNumbase"},_changeNumbase(e){this.model.set("numbase",e.target.value||"bin")},_calculateBoxWidth(){const e=document.createElementNS("http://www.w3.org/2000/svg","text");It(e).text(Array(this.model.get("bits")).fill("0").join("")).attr("class","numvalue").appendTo(this.$el);const t=e.getBBox().width+20;return e.remove(),t},confirmUpdate(e){ii.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"BITS")||this.hasFlag(e,"RENDER"))&&this._makeNumBaseSelector(),this.hasFlag(e,"NUMBASE")&&this._updateNumBaseSelector()},_makeNumBaseSelector(){this.$("select.numbase").empty();const e=this.model.get("numbase"),t=this.model.graph._display3vl;for(const r of t.usableDisplays(this.model.numbaseType,this.model.get("bits")))It("<option>").attr("value",r).prop("selected",r==e).text(r).appendTo(this.$("select.numbase"))},_updateNumBaseSelector(){this.$("select.numbase").val(this.model.get("numbase"))}}),Ao=ls.define("IO",{bits:1,net:"",propagation:0,mode:-1,attrs:{ioname:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontWeight:"bold",fontSize:"10pt"}}},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:this._portDirection,group:this._portDirection,dir:this._portDirection,bits:e}],ls.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{const n={};n[this._portDirection]=r,this._setPortsBits(n),this.get("mode")!=0&&this._checkMode()}),this.bindAttrToProp("text.ioname/text","net")},onAdd(){this._checkMode()},_checkMode(){const e=this.graph&&this.graph.has("subcircuit"),t=this.get("bits"),r=e?0:t==1?1:2;return this.set("mode",r),this.set("box_resized",!1),this.set("markup",r==0?this.markupInSubcircuit:r==1?this.markupSingle:this.markupBus),r},_setPortsBits(e){if(ls.prototype._setPortsBits.apply(this,arguments),this.get("mode")!=0)return;const t=this.graph.get("subcircuit");console.assert(t!=null);const r={};r[this.get("net")]=e[this._portDirection],t._setPortsBits(r)},markupSingle:ls.prototype.markup,markupBus:ls.prototype.markup.concat(ls.prototype.markupTooltip),markupInSubcircuit:ls.prototype.markup.concat([{tagName:"text",className:"ioname",selector:"ioname"}]),_gateParams:ls.prototype._gateParams.concat(["bits","net","order"])}),aa=yu.extend({_calculateBoxWidth(){switch(this.model.get("mode")){case 0:const e=this.selectors.ioname;return e.getAttribute("display")!=="none"?e.getBBox().width+10:20;case 1:return 30;case 2:return yu.prototype._calculateBoxWidth.call(this)}}}),Yh=Ao.define("Input",{attrs:{btnface:{stroke:"black",strokeWidth:2,refX:.2,refY:.2,refHeight:.6,refWidth:.6,cursor:"pointer"},"foreignObject.valinput":{refX:.5,refY:.5,refWidth:-10,refHeight:-10,xAlignment:"middle",yAlignment:"middle"}}},{isInput:!0,_portDirection:"out",_resetPortValue(e){if(e.id=="out"&&e.dir=="out"){const t=this.get("bits");return this.get("mode")==1?Je.zeros(t):Je.xes(t)}else return Ao.prototype._resetPortValue.call(this,e)},_checkMode(){Ao.prototype._checkMode.call(this),this._resetPortsSignals([this.get("ports").items[0]])},setInput(e){this._setInput(e),this.trigger("userChange",this)},toggleInput(){this.setInput(this.get("outputSignals").out.not())},_setInput(e){if(e.bits!=this.get("bits"))throw new Error("setInput: wrong number of bits");this.set("outputSignals",{out:e})},markupSingle:Ao.prototype.markupSingle.concat([{tagName:"rect",className:"btnface",selector:"btnface"}]),markupBus:Ao.prototype.markupBus.concat([{tagName:"foreignObject",className:"valinput",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"text"}}]}]}]),numbaseType:"read"}),nT=aa.extend({attrs:Tn.merge({button:{high:{btnface:{fill:"black"}},low:{btnface:{fill:"white"}}}},aa.prototype.attrs),confirmUpdate(e){aa.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"SIGNAL2")||this.hasFlag(e,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateButton();break;case 2:this._updateNumEntry();break}},_updateButton(){const e=this.model.get("outputSignals").out,t=this.attrs.button[e.isHigh?"high":"low"];this._applyAttrs(t)},_updateNumEntry(){const e=this.model.graph._display3vl;this.$("input").val(e.show(this.model.get("numbase"),this.model.get("outputSignals").out)),this.$("input").removeClass("invalid")},render(){aa.prototype.render.apply(this,arguments),this._updateView()},events:Tn.merge({"click .btnface":"_onButton","mousedown .btnface":"stopprop","touchstart .btnface":"stopprop","click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_onNumEntry"},yu.prototype.events),_onButton(){this.model.toggleInput()},_onNumEntry(e){const t=this.model.get("numbase"),r=this.model.get("bits"),n=this.model.graph._display3vl;if(n.validate(t,e.target.value,r)){const i=n.read(t,e.target.value,r);this.model.setInput(i)}else this.$("input").addClass("invalid")}}),Ij=Yh,vve=nT,Oj=Yh,gve=nT,Kh=Ao.define("Output",{attrs:{led:{refX:.5,refY:.5,refR:.35},value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{isOutput:!0,_portDirection:"in",getOutput(){return this.get("inputSignals").in},markupSingle:Ao.prototype.markupSingle.concat([{tagName:"circle",className:"led",selector:"led"}]),markupBus:Ao.prototype.markupBus.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),numbaseType:"show"}),iT=aa.extend({attrs:Tn.merge({lamp:{high:{led:{fill:"#03c03c"}},low:{led:{fill:"#fc7c68"}},undef:{led:{fill:"#bfc5c6"}}}},aa.prototype.attrs),confirmUpdate(e){aa.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"SIGNAL")||this.hasFlag(e,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateLamp();break;case 2:this._updateNumDisplay();break}},_updateLamp(){const e=this.model.get("inputSignals").in,t=this.attrs.lamp[e.isHigh?"high":e.isLow?"low":"undef"];this._applyAttrs(t)},_updateNumDisplay(){const e=this.model.graph._display3vl;this.$("text.value tspan").text(e.show(this.model.get("numbase"),this.model.get("inputSignals").in))},render(){aa.prototype.render.apply(this,arguments),this._updateView()}}),Mj=Kh,mve=iT,kj=Kh,yve=iT,Lj=ls.define("Constant",{constant:"0",propagation:0,attrs:{value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{initialize(){const t=this.get("constant").length;this.set("bits",t),this.get("ports").items=[{id:"out",group:"out",dir:"out",bits:t}],ls.prototype.initialize.apply(this,arguments),this.on("change:constant",(r,n)=>{const i=n.length;this._setPortsBits({out:i}),this.set("bits",i),this.set("constantCache",Je.fromBin(n,i))})},prepare(){const e=this.get("constant"),t=e.length;this.set("constantCache",Je.fromBin(e,t))},operation(){return{out:this.get("constantCache")}},markup:ls.prototype.markup.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),_gateParams:ls.prototype._gateParams.concat(["constant"]),numbaseType:"show"}),_ve=yu.extend({presentationAttributes:yu.addPresentationAttributes({constantCache:"CONSTANT"}),confirmUpdate(e){yu.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"CONSTANT")||this.hasFlag(e,"NUMBASE"))&&this._showText()},_showText(){const e=this.model.graph._display3vl;this.$("text.value tspan").text(e.show(this.model.get("numbase"),this.model.get("constantCache")))},update(){yu.prototype.update.apply(this,arguments),this._showText()}}),Nj=Ft.define("Clock",{propagation:100,ports:{items:[{id:"out",group:"out",dir:"out",bits:1}]},size:{width:30,height:30}},{_resetPortValue(e){return e.id=="out"&&e.dir=="out"?Je.zero:Ft.prototype._resetPortValue(e)},operation(){return{out:this.get("outputSignals").out.not(),_clock_hack:!0}},tooltipMinWidth:55,markup:Ft.prototype.markup.concat([{tagName:"path",className:"decor",attributes:{d:"M7.5 7.5 L7.5 22.5 L15 22.5 L15 7.5 L22.5 7.5 L22.5 22.5",stroke:"black"}},{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"number",min:1,step:1}}]}]}]),_unsupportedPropChanges:Ft.prototype._unsupportedPropChanges.concat(["bits"])}),bve=ii.extend({presentationAttributes:ii.addPresentationAttributes({propagation:"SIGNAL"}),events:{"click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_changePropagation","input input":"_changePropagation"},render(e){ii.prototype.render.apply(this,arguments),this.updatePropagation()},confirmUpdate(e){ii.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"SIGNAL")&&this.updatePropagation()},_changePropagation(e){const t=e.target.value,r=String(t)==String(Number(t));r&&this.model.set("propagation",Number(t)||1),this.$("input").toggleClass("invalid",!r)},updatePropagation(){this.$("input").val(this.model.get("propagation"))}}),u4=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SP","DEL"];class wve extends Jl{constructor(){super("[ -~ -ÿ�␀-␡]|"+u4.join("|"))}get name(){return"ascii"}get sort(){return 1}can(t,r){return r==7||r==8}read(t,r){if(t.length==1){const n=t.charCodeAt(0);return n==65533?Je.xes(r):n==9249?Je.fromHex("7f",r):n>=9216&&n<=9248?Je.fromHex((n-9216).toString(16),r):Je.fromHex(n.toString(16),r)}else{const n=u4.indexOf(t);return n<0?Je.xes(r):n==33?Je.fromHex("7f",r):Je.fromHex(n.toString(16),r)}}show(t){if(!t.isFullyDefined)return"�";const r=parseInt(t.toHex(),16);return r<=32?String.fromCharCode(9216+r):r==127?"␡":r>127&&r<160?"�":String.fromCharCode(r)}size(t){return 1}}function sT(e,t,r){return'<select name="base">'+e.usableDisplays("read",t).map(i=>'<option value="'+i+'"'+(i==r?' selected="selected"':"")+">"+i+"</option>").join("")+"</select>"}function AE(e,t){for(const r in t)if(!e[r].eq(t[r]))return!1;return!0}const pg="M19 0v32h16c9 0 16-7 16-16S44 0 35 0H20z",Fu="M14.3 0l1.6 2s4.5 5.6 4.5 14s-4.5 14-4.5 14l-1.6 2H28c3.8 0 16.6-.5 25-16h0A28 28 0 0028 0H16.8z",qj="M18-2v36l2-1 32-17h0L20-1z",xve="M6.8-1.2 10 2.7S14.2 8 14.2 16S10 29.3 10 29.3l-3.2 3.9H10l1.7-2.4s4.8-6 4.8-14.8c0-8.9-4.8-14.8-4.8-14.8l-1.7-2.4z",vg={tagName:"path",selector:"xor_arc",attributes:{fill:"#000",d:xve}},kc={tagName:"circle",className:"body",selector:"neg_bubble",attributes:{stroke:"#000","stroke-width":"2px",cx:56,cy:16,r:4}};function Ja(e=[]){return{tagName:"g",selector:"body",children:[{tagName:"path",className:"body gate",selector:"gate"}].concat(e)}}const oa=bn.define("GateSVG",{bits:1,size:{width:60,height:32},ports:{groups:{in:{position:{name:"left",args:{dx:30}},attrs:{wire:{x2:-50},port:{refX:-50}},z:-1},out:{position:{name:"right",args:{dx:-30}},attrs:{wire:{x2:50},port:{refX:50}},z:-1}}}},{markup:bn.prototype.markup.concat([Ja()]),_gateParams:bn.prototype._gateParams.concat(["bits"])}),oT=oa.define("Gate11",{},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e},{id:"out",group:"out",dir:"out",bits:e}],oa.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits({in:r,out:r})})}}),Lc=oa.define("GateX1",{inputs:2,attrs:{gate:{"vector-effect":"non-scaling-stroke"},xor_arc:{"vector-effect":"non-scaling-stroke"},neg_bubble:{"vector-effect":"non-scaling-stroke"}}},{initialize(){const e=this.get("bits"),t=this.get("inputs"),r=[];for(let i=1;i<=t;i++)r.push({id:"in"+i,group:"in",dir:"in",bits:e});r.push({id:"out",group:"out",dir:"out",bits:e}),this.get("ports").items=r;const n=t/2;this.set("size",{width:60*n,height:32*n}),this.attr("body/transform","translate(-4, 0) scale("+n+")"),this.prop("ports/groups/in/position/args/dx",30*n),this.prop("ports/groups/in/attrs/wire/x2",-30*n-20),this.prop("ports/groups/in/attrs/port/refX",-30*n-20),this.prop("ports/groups/out/position/args/dx",-30*n),this.prop("ports/groups/out/attrs/wire/x2",30*n+20),this.prop("ports/groups/out/attrs/port/refX",30*n+20),oa.prototype.initialize.apply(this,arguments),this.on("change:bits",(i,s)=>{const o=this.get("inputs"),a={out:s};for(let u=1;u<=o;u++)a["in"+u]=s;this._setPortsBits(a)})},operation(e){let t=e.in1;for(let r=2;r<=this.get("inputs");r++)t=this.binoperation(t,e["in"+r]);return{out:this.finoperation(t)}},finoperation(e){return e},_gateParams:oa.prototype._gateParams.concat(["inputs"]),_unsupportedPropChanges:oa.prototype._unsupportedPropChanges.concat(["inputs"]),_operationHelpers:oa.prototype._operationHelpers.concat(["binoperation","finoperation"])}),Au=oa.define("GateReduce",{},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e},{id:"out",group:"out",dir:"out",bits:1}],oa.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits({in:r})})}}),Dj=oT.define("Repeater",{attrs:{gate:{d:qj}}},{operation(e){return{out:e.in}}}),Sve=Kt,Fj=oT.define("Not",{attrs:{gate:{d:qj}}},{operation(e){return{out:e.in.not()}},markup:bn.prototype.markup.concat([Ja([kc])])}),Eve=Kt,Bj=Lc.define("Or",{attrs:{gate:{d:Fu}}},{binoperation(e,t){return e.or(t)}}),Ave=Kt,zj=Lc.define("And",{attrs:{gate:{d:pg}}},{binoperation(e,t){return e.and(t)}}),Tve=Kt,Vj=Lc.define("Nor",{attrs:{gate:{d:Fu}}},{binoperation(e,t){return e.or(t)},finoperation(e){return e.not()},markup:bn.prototype.markup.concat([Ja([kc])])}),Pve=Kt,Gj=Lc.define("Nand",{attrs:{gate:{d:pg}}},{binoperation(e,t){return e.and(t)},finoperation(e){return e.not()},markup:bn.prototype.markup.concat([Ja([kc])])}),Cve=Kt,$j=Lc.define("Xor",{attrs:{gate:{d:Fu}}},{binoperation(e,t){return e.xor(t)},markup:bn.prototype.markup.concat([Ja([vg])])}),Rve=Kt,Uj=Lc.define("Xnor",{attrs:{gate:{d:Fu}}},{binoperation(e,t){return e.xor(t)},finoperation(e){return e.not()},markup:bn.prototype.markup.concat([Ja([vg,kc])])}),Ive=Kt,TE=Au.define("OrReduce",{attrs:{gate:{d:Fu}}},{operation(e){return{out:e.in.reduceOr()}}}),Ove=Kt,PE=Au.define("NorReduce",{attrs:{gate:{d:Fu}}},{operation(e){return{out:e.in.reduceNor()}},markup:Au.prototype.markup.concat([kc])}),Mve=Kt,jj=Au.define("AndReduce",{attrs:{gate:{d:pg}}},{operation(e){return{out:e.in.reduceAnd()}}}),kve=Kt,Hj=Au.define("NandReduce",{attrs:{gate:{d:pg}}},{operation(e){return{out:e.in.reduceNand()}},markup:bn.prototype.markup.concat([Ja([kc])])}),Lve=Kt,Wj=Au.define("XorReduce",{attrs:{gate:{d:Fu}}},{operation(e){return{out:e.in.reduceXor()}},markup:bn.prototype.markup.concat([Ja([vg])])}),Nve=Kt,Xj=Au.define("XnorReduce",{attrs:{gate:{d:Fu}}},{operation(e){return{out:e.in.reduceXnor()}},markup:bn.prototype.markup.concat([Ja([vg,kc])])}),qve=Kt;function CE(e){return e<=Number.MAX_SAFE_INTEGER&&e>=-Number.MAX_SAFE_INTEGER}const bi=bn.define("Arith",{size:{width:40,height:40},attrs:{body:{refR:.5,refCx:.5,refCy:.5},oper:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontSize:"12pt"}},ports:{groups:{in:{position:{name:"left",args:{dx:10}},attrs:{wire:{x2:-35},port:{refX:-35}},z:-1},out:{position:{name:"right",args:{dx:-10}},attrs:{wire:{x2:35},port:{refX:35}},z:-1}}}},{markup:bn.prototype.markup.concat([{tagName:"circle",className:"body",selector:"body"},{tagName:"text",className:"oper",selector:"oper"}]),_gateParams:bn.prototype._gateParams.concat(["bits","signed"]),_unsupportedPropChanges:bn.prototype._unsupportedPropChanges.concat(["signed"])}),aT=bi.define("Arith11",{bits:{in:1,out:1},signed:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:e.out}],bi.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})},operation(e){const t=this.get("bits");return e.in.isFullyDefined?{out:Je.fromNumber(this.arithop(e.in.toBigInt(this.get("signed"))),t.out)}:{out:Je.xes(t.out)}},_operationHelpers:bi.prototype._operationHelpers.concat(["arithop"])}),Nc=bi.define("Arith21",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1}},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:e.in1},{id:"in2",group:"in",dir:"in",bits:e.in2},{id:"out",group:"out",dir:"out",bits:e.out}],bi.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})},operation(e){const t=this.get("bits"),r=this.get("signed");return!e.in1.isFullyDefined||!e.in2.isFullyDefined?{out:Je.xes(t.out)}:{out:Je.fromNumber(this.arithop(e.in1.toBigInt(r.in1&&r.in2),e.in2.toBigInt(r.in1&&r.in2)),t.out)}},_operationHelpers:bi.prototype._operationHelpers.concat(["arithop"])});function RE(e,t,r,n,i,s,o){const a=e.get(e.bits-1),u=Je.make(Math.max(0,n-r),o?0:i?a:-1),c=e.concat(u);return(t<0?Je.make(-t,o?0:-1).concat(c):c.slice(t).concat(Je.make(t,o?0:s?c.get(c.bits-1):-1))).slice(0,n)}const uT=bi.define("Shift",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1,out:!1},fillx:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:e.in1},{id:"in2",group:"in",dir:"in",bits:e.in2},{id:"out",group:"out",dir:"out",bits:e.out}],bi.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})},operation(e){const t=this.get("bits"),r=this.get("signed"),n=this.get("fillx");if(!e.in2.isFullyDefined)return{out:Je.xes(t.out)};const i=e.in2.toNumber(r.in2)*this.shiftdir;return{out:RE(e.in1,i,t.in1,t.out,r.in1,r.out,n)}},_gateParams:bi.prototype._gateParams.concat(["fillx"]),_unsupportedPropChanges:bi.prototype._unsupportedPropChanges.concat(["fillx"]),_operationHelpers:bi.prototype._operationHelpers.concat(["shiftdir"])}),yh=bi.define("BaseCompare",{bits:{in1:1,in2:1},signed:{in1:!1,in2:!1}},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:e.in1},{id:"in2",group:"in",dir:"in",bits:e.in2},{id:"out",group:"out",dir:"out",bits:1}],bi.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})}}),Zh=yh.define("Compare",{},{operation(e){this.get("bits");const t=this.get("signed");return!e.in1.isFullyDefined||!e.in2.isFullyDefined?{out:Je.xes(1)}:{out:Je.fromBool(this.arithcomp(e.in1.toBigInt(t.in1&&t.in2),e.in2.toBigInt(t.in1&&t.in2)))}},_operationHelpers:yh.prototype._operationHelpers.concat(["arithcomp"])}),cT=yh.define("EqCompare",{},{operation(e){const t=this.get("bits"),r=this.get("signed"),n=t.in1>=t.in2?e.in1:e.in1.concat(Je.make(t.in2-t.in1,r.in1&&r.in2?e.in1.msb:-1)),i=t.in2>=t.in1?e.in2:e.in2.concat(Je.make(t.in1-t.in2,r.in1&&r.in2?e.in2.msb:-1));return{out:this.bincomp(n,i)}},_operationHelpers:yh.prototype._operationHelpers.concat(["bincomp"])}),Yj=aT.define("Negation",{attrs:{oper:{text:"-"}}},{arithop:e=>-e}),Dve=Kt,Kj=aT.define("UnaryPlus",{attrs:{oper:{text:"+"}}},{arithop:e=>e}),Fve=Kt,Zj=Nc.define("Addition",{attrs:{oper:{text:"+"}}},{arithop:(e,t)=>e+t}),Bve=Kt,Jj=Nc.define("Subtraction",{attrs:{oper:{text:"-"}}},{arithop:(e,t)=>e-t}),zve=Kt,Qj=Nc.define("Multiplication",{attrs:{oper:{text:"×"}}},{arithop:(e,t)=>e*t}),Vve=Kt,e9=Nc.define("Division",{attrs:{oper:{text:"÷"}}},{arithop:(e,t)=>t==0n?e:e/t}),Gve=Kt,t9=Nc.define("Modulo",{attrs:{oper:{text:"%"}}},{arithop:(e,t)=>t==0n?e:e%t}),$ve=Kt,r9=Nc.define("Power",{attrs:{oper:{text:"^"}}},{arithop:(e,t)=>t>=0n?e**t:e==1n?1n:e==-1n?t%2n?-1n:1n:0n}),Uve=Kt,n9=uT.define("ShiftLeft",{attrs:{oper:{text:"≪"}}},{shiftdir:-1}),jve=Kt,i9=uT.define("ShiftRight",{attrs:{oper:{text:"≫"}}},{shiftdir:1}),Hve=Kt,s9=Zh.define("Lt",{attrs:{oper:{text:"<"}}},{arithcomp:(e,t)=>e<t}),Wve=Kt,o9=Zh.define("Le",{attrs:{oper:{text:"≤"}}},{arithcomp:(e,t)=>e<=t}),Xve=Kt,a9=Zh.define("Gt",{attrs:{oper:{text:">"}}},{arithcomp:(e,t)=>e>t}),Yve=Kt,u9=Zh.define("Ge",{attrs:{oper:{text:"≥"}}},{arithcomp:(e,t)=>e>=t}),Kve=Kt,c9=cT.define("Eq",{attrs:{oper:{text:"="}}},{bincomp:(e,t)=>e.xnor(t).reduceAnd()}),Zve=Kt,l9=cT.define("Ne",{attrs:{oper:{text:"≠"}}},{bincomp:(e,t)=>e.xor(t).reduceOr()}),Jve=Kt,ua=bi.define("OpConst",{leftOp:!1,constant:0},{initialize(){bi.prototype.initialize.apply(this,arguments);let e=this.get("constant");(typeof e=="string"||e instanceof String)&&(e=BigInt(e),CE(e)&&(e=Number(e)),this.set("constant",e));const t=()=>{const n=30+String(this.get("constant")).length*10;this.prop("size",{width:n,height:n}),this.attr("oper/text",this.get("leftOp")?this.get("constant")+this.operSymbol:this.operSymbol+this.get("constant"))};t(),this.on("change:bits",(r,n)=>{this._setPortsBits(n)}),this.on("change:constant",()=>t()),this.on("change:leftOp",()=>t())},getGateParams(){const e=bi.prototype.getGateParams.apply(this,arguments);return typeof e.constant=="bigint"&&(CE(e.constant)?e.constant=Number(e.constant):e.constant=String(e.constant)),e},_gateParams:bi.prototype._gateParams.concat(["leftOp","constant"])}),qc=ua.define("ArithConst",{bits:{in:1,out:1},signed:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:e.out}],ua.prototype.initialize.apply(this,arguments)},operation(e){const t=this.get("bits"),r=this.get("signed"),n=this.get("constant");return e.in.isFullyDefined?this.get("leftOp")?{out:Je.fromNumber(this.arithop(BigInt(n),e.in.toBigInt(r.in)),t.out)}:{out:Je.fromNumber(this.arithop(e.in.toBigInt(r.in),BigInt(n)),t.out)}:{out:Je.xes(t.out)}},_operationHelpers:ua.prototype._operationHelpers.concat(["arithop"])}),lT=ua.define("ShiftConst",{bits:{in:1,out:1},signed:{in:!1,out:!1},fillx:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:e.out}],ua.prototype.initialize.apply(this,arguments)},operation(e){const t=this.get("bits"),r=this.get("signed"),n=this.get("fillx"),i=this.get("constant");if(this.get("leftOp")){if(!e.in.isFullyDefined)return{out:Je.xes(t.out)};const s=e.in.toNumber(r.in),o=Je.fromNumber(i);return{out:RE(o,s*this.shiftdir,o.bits,t.out,i<0,r.out,n)}}else return console.assert(CE(i)),{out:RE(e.in,Number(i)*this.shiftdir,t.in,t.out,r.in,r.out,n)}},_gateParams:ua.prototype._gateParams.concat(["fillx"]),_operationHelpers:ua.prototype._operationHelpers.concat(["shiftdir"])}),_h=ua.define("BaseCompareConst",{bits:{in:1},signed:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:1}],ua.prototype.initialize.apply(this,arguments)}}),Jh=_h.define("CompareConst",{},{operation(e){this.get("bits");const t=this.get("signed"),r=this.get("constant");return e.in.isFullyDefined?this.get("leftOp")?{out:Je.fromBool(this.arithcomp(BigInt(r),e.in.toBigInt(t.in)))}:{out:Je.fromBool(this.arithcomp(e.in.toBigInt(t.in),BigInt(r)))}:{out:Je.x}},_operationHelpers:_h.prototype._operationHelpers.concat(["arithcomp"])}),fT=_h.define("EqCompareConst",{},{operation(e){const t=this.get("bits");this.get("signed");const r=this.get("constant");return this.get("leftOp")?{out:this.bincomp(Je.fromNumber(r,t.in),e.in)}:{out:this.bincomp(e.in,Je.fromNumber(r,t.in))}},_operationHelpers:_h.prototype._operationHelpers.concat(["bincomp"])}),Qve=qc.define("AdditionConst",{},{operSymbol:"+",arithop:(e,t)=>e+t}),ege=Kt,tge=qc.define("SubtractionConst",{},{operSymbol:"-",arithop:(e,t)=>e-t}),rge=Kt,nge=qc.define("MultiplicationConst",{},{operSymbol:"×",arithop:(e,t)=>e*t}),ige=Kt,sge=qc.define("DivisionConst",{},{operSymbol:"÷",arithop:(e,t)=>t==0n?e:e/t}),oge=Kt,age=qc.define("ModuloConst",{},{operSymbol:"%",arithop:(e,t)=>t==0n?e:e%t}),uge=Kt,cge=qc.define("PowerConst",{},{operSymbol:"^",arithop:(e,t)=>t>=0n?e**t:e==1n?1n:e==-1n?t%2n?-1n:1n:0n}),lge=Kt,fge=lT.define("ShiftLeftConst",{},{operSymbol:"≪",shiftdir:-1}),hge=Kt,dge=lT.define("ShiftRightConst",{},{operSymbol:"≫",shiftdir:1}),pge=Kt,vge=Jh.define("LtConst",{},{operSymbol:"<",arithcomp:(e,t)=>e<t}),gge=Kt,mge=Jh.define("LeConst",{},{operSymbol:"≤",arithcomp:(e,t)=>e<=t}),yge=Kt,_ge=Jh.define("GtConst",{},{operSymbol:">",arithcomp:(e,t)=>e>t}),bge=Kt,wge=Jh.define("GeConst",{},{operSymbol:"≥",arithcomp:(e,t)=>e>=t}),xge=Kt,Sge=fT.define("EqConst",{},{operSymbol:"=",bincomp:(e,t)=>e.xnor(t).reduceAnd()}),Ege=Kt,Age=fT.define("NeConst",{},{operSymbol:"≠",bincomp:(e,t)=>e.xor(t).reduceOr()}),Tge=Kt,hT=Ft.define("BitExtend",{extend:{input:1,output:1},propagation:0,attrs:{value:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){const e=this.get("extend");console.assert(e.input<=e.output),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.input},{id:"out",group:"out",dir:"out",bits:e.output}],Ft.prototype.initialize.apply(this,arguments),this.on("change:extend",(t,r)=>{this._setPortsBits({in:r.input,out:r.output})})},operation(e){const t=this.get("extend");return{out:e.in.concat(Je.make(t.output-t.input,this._extBit(e.in)))}},markup:Ft.prototype.markup.concat([{tagName:"text",className:"value",selector:"value"}]),_gateParams:Ft.prototype._gateParams.concat(["extend"]),_operationHelpers:Ft.prototype._operationHelpers.concat(["_extBit"])}),dT=ii.extend({_autoResizeBox:!0,_calculateBoxWidth(){return this.el.querySelector("text.value").getBBox().width+10}}),f9=hT.define("ZeroExtend",{attrs:{value:{text:"zero-extend"}}},{_extBit(e){return-1}}),Pge=dT,h9=hT.define("SignExtend",{attrs:{value:{text:"sign-extend"}}},{_extBit(e){return e.get(e.bits-1)}}),Cge=dT,d9=Ft.define("BusSlice",{slice:{first:0,count:1,total:2},propagation:0,size:{width:40,height:24}},{initialize(){const e=this.get("slice"),t=e.count==1?e.first:e.first+"-"+(e.first+e.count-1);this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.total},{id:"out",group:"out",dir:"out",bits:e.count,portlabel:t,labelled:!0}],Ft.prototype.initialize.apply(this,arguments),this.on("change:slice",(r,n)=>{this._setPortsBits({in:n.total,out:n.count})})},operation(e){const t=this.get("slice");return{out:e.in.slice(t.first,t.first+t.count)}},_gateParams:Ft.prototype._gateParams.concat(["slice"])}),Rge=ii.extend({_autoResizeBox:!0}),pT=Ft.define("BusRegroup",{groups:[1],propagation:0,size:{width:40,height:void 0}},{initialize(){var e=0;const t=[],r=this.get("groups");this.get("size").height=r.length*16+8;for(const[i,s]of r.entries()){const o=e+(s>1?"-"+(e+s-1):"");e+=s,t.push({id:this.group_dir+i,group:this.group_dir,dir:this.group_dir,bits:s,portlabel:o,labelled:!0})}this.set("bits",e);const n=this.group_dir=="out"?"in":"out";t.push({id:n,group:n,dir:n,bits:e}),this.get("ports").items=t,Ft.prototype.initialize.apply(this,arguments)},_gateParams:Ft.prototype._gateParams.concat(["groups"]),_unsupportedPropChanges:Ft.prototype._unsupportedPropChanges.concat(["groups"])}),vT=ii.extend({_autoResizeBox:!0}),p9=pT.define("BusGroup",{},{group_dir:"in",operation(e){const t=[];for(const r of this.get("groups").keys())t.push(e["in"+r]);return{out:Je.concat(...t)}}}),Ige=vT,v9=pT.define("BusUngroup",{},{group_dir:"out",operation(e){const t={};let r=0;for(const[n,i]of this.get("groups").entries())t["out"+n]=e.in.slice(r,r+i),r+=i;return t}}),Oge=vT,c4=10,Mge=10,g9=Ft.define("Subcircuit",{propagation:0,warning:!1,attrs:{wrapper:{refWidth:1,refHeight:1,stroke:"red",strokeWidth:10},type:{refX:.5,refY:-10,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){this.bindAttrToProp("text.type/text","celltype");const e=this.get("graph");console.assert(e instanceof Po),e.set("subcircuit",this);const t=e.getCells().filter(c=>c instanceof Ao),r=t.filter(c=>c instanceof Yh),n=t.filter(c=>c instanceof Kh);function i(c,f){return c.has("order")||f.has("order")?c.get("order")-f.get("order"):c.get("net").localeCompare(f.get("net"))}r.sort(i),n.sort(i);const o={width:80,height:Math.max(r.length,n.length)*16+8},a=[],u={};for(const[c,f]of r.entries())a.push({id:f.get("net"),group:"in",dir:"in",bits:f.get("bits"),labelled:!0});for(const[c,f]of n.entries())a.push({id:f.get("net"),group:"out",dir:"out",bits:f.get("bits"),labelled:!0});for(const c of t)u[c.get("net")]=c.get("id");this.set("size",o),this.set("circuitIOmap",u),this.get("ports").items=a,this.set("warning",e._warnings>0),Ft.prototype.initialize.apply(this,arguments)},_resetPortValue(e){const t=this.get("circuitIOmap"),r=this.get("graph");return e.dir=="in"?r.getCell(t[e.id]).get("outputSignals").out:e.dir=="out"?r.getCell(t[e.id]).get("inputSignals").in:Ft.prototype._resetPortValue.call(this,e)},getLayoutSize(){const e=this.size();return e.height+=Mge,e},setLayoutPosition(e){this.set("position",{x:e.x,y:e.y+c4})},getPortsPositions(){const e=Ft.prototype.getPortsPositions.apply(this,arguments),t={};for(const r in e)t[r]={...e[r]},t[r].y=t[r].y+c4;return t},markup:[{tagName:"rect",selector:"wrapper"}].concat(Ft.prototype.markup,[{tagName:"text",className:"type",selector:"type"}],Ft.prototype.markupZoom),_gateParams:Ft.prototype._gateParams.concat(["celltype"]),_unsupportedPropChanges:Ft.prototype._unsupportedPropChanges.concat(["celltype"])}),kge=ii.extend({attrs:Tn.merge({},ii.prototype.attrs,{warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}}),_autoResizeBox:!0,presentationAttributes:ii.addPresentationAttributes({warning:"WARNING"}),confirmUpdate(e){ii.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"WARNING")&&this._updateWarning()},_updateWarning(){const e=this.model.get("warning"),t=this.attrs.warning[e?"warn":"none"];this._applyAttrs(t)},update(){ii.prototype.update.apply(this,arguments),this._updateWarning()},events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"zoomInCircuit"},zoomInCircuit(e){return e.stopPropagation(),this.paper.trigger("open:subcircuit",this.model),!1}}),l4=20,Lge=30,_u=bn.define("GenMux",{bits:{in:1,sel:1},size:{width:40,height:void 0},ports:{groups:{in2:{position:{name:"top",args:{y:5}},attrs:Tn.merge({},Yp,{wire:{x2:0,y2:-25},port:{magnet:"passive",refY:-25},bits:{refDx:-5,refDy:2,textAnchor:"start"}}),z:-1}}},attrs:{label:{refDy:8}}},{initialize(){const e=this.get("bits"),t=[{id:"sel",group:"in2",dir:"in",bits:e.sel},{id:"out",group:"out",dir:"out",bits:e.in}],r=this.muxInputs(e.sel);this.get("size").height=r.length*16+8;const i="M"+[[2,0],[5,5],[10,-5]].map(o=>o.join(" ")).join(" L");for(const[o,a]of r.entries()){const u={id:"in"+o,group:"in",dir:"in",bits:e.in,decor:i};a&&(u.portlabel=String(a),u.labelled=!0),t.push(u)}this.get("ports").items=t,bn.prototype.initialize.apply(this,arguments);const s=o=>this.attr(["body","points"],[[0,-5],[o.width,5],[o.width,o.height-5],[0,o.height+5]].map(a=>a.join(",")).join(" "));s(this.get("size")),this.on("change:size",(o,a)=>s(a))},operation(e){const t=this.muxInput(e.sel);return t===void 0?{out:Je.xes(this.get("bits").in)}:{out:e["in"+t]}},getLayoutSize(){const e=this.size();return e.height+=Lge,e},setLayoutPosition(e){this.set("position",{x:e.x,y:e.y+l4})},getPortsPositions(){const e=bn.prototype.getPortsPositions.apply(this,arguments),t={};for(const r in e)t[r]={...e[r]},t[r].y=t[r].y+l4;return t},markup:bn.prototype.markup.concat([{tagName:"polygon",className:"body",selector:"body"}]),_gateParams:bn.prototype._gateParams.concat(["bits"]),_unsupportedPropChanges:bn.prototype._unsupportedPropChanges.concat(["bits"]),_operationHelpers:bn.prototype._operationHelpers.concat(["muxInput"])}),gg=Kt.extend({initialize(){this.ins=this.model.muxInputs(this.model.get("bits").sel),Kt.prototype.initialize.apply(this,arguments)},confirmUpdate(e){Kt.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"SIGNAL")&&this._updateMux(this.model.get("inputSignals"))},render(){Kt.prototype.render.apply(this,arguments),this._updateMux(this.model.get("inputSignals"))},_updateMux(e){const t=this.model.muxInput(e.sel);for(const r of this.ins.keys())this.$("[port=in"+r+"] path.decor").css("visibility",t==r?"visible":"hidden")}}),m9=_u.define("Mux",{},{muxInputs:e=>Array(1<<e),muxInput:e=>e.isFullyDefined?e.toBigInt().toString():void 0}),Nge=gg,y9=_u.define("Mux1Hot",{attrs:{info:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",text:"1Hot",transform:"rotate(90)"}}},{markup:_u.prototype.markup.concat([{tagName:"text",className:"info",selector:"info"}]),muxInputs:e=>Array(e+1),muxInput:e=>{const t=e.toArray();return e.isFullyDefined&&t.filter(r=>r==1).length<=1?String(t.indexOf(1)+1):void 0}}),qge=gg,Dge=_u.define("MuxSparse",{inputs:void 0,default_input:!1},{initialize(){const e=this.get("inputs");for(let t=0;t<e.length;t++)typeof e[t]!="bigint"&&(e[t]=BigInt(e[t]));_u.prototype.initialize.apply(this,arguments)},muxInputs(e){return this.get("default_input")?["*"].concat(this.get("inputs")):this.get("inputs")},muxInput(e){const t=this.get("default_input");if(!e.isFullyDefined)return;const r=this.get("inputs").indexOf(e.toBigInt());return r<0?t?0:void 0:t?r+1:r},_gateParams:_u.prototype._gateParams.concat(["inputs","default_input"]),_unsupportedPropChanges:_u.prototype._unsupportedPropChanges.concat(["inputs","default_input"])}),Fge=gg,_9=Ft.define("Dff",{bits:1,initial:"x",size:{width:80,height:void 0},ports:{groups:{in:{position:Ft.prototype._getStackedPosition({side:"left"})},out:{position:Ft.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const e=this.get("bits");this.get("initial");const t=this.get("polarity")||{},r=[];this.get("no_data")||r.push({id:"in",group:"in",dir:"in",bits:e,portlabel:"D",labelled:!0}),r.push({id:"out",group:"out",dir:"out",bits:e,portlabel:"Q",labelled:!0}),"arst"in t&&!this.get("arst_value")&&this.set("arst_value",Array(e).fill("0").join("")),"srst"in t&&!this.get("srst_value")&&this.set("srst_value",Array(e).fill("0").join(""));let n=1;"aload"in t&&(n+=2,r.push({id:"ain",group:"in",dir:"in",bits:e,portlabel:"AD",labelled:!0}),r.push({id:"aload",group:"in",dir:"in",bits:1,polarity:t.aload,labelled:!0})),"clock"in t&&(n++,r.push({id:"clk",group:"in",dir:"in",bits:1,polarity:t.clock,decor:Ft.prototype.decorClock,labelled:!0})),"set"in t&&(n++,r.push({id:"set",group:"in",dir:"in",bits:e,polarity:t.set,portlabel:"S",labelled:!0})),"clr"in t&&(n++,r.push({id:"clr",group:"in",dir:"in",bits:e,polarity:t.clr,portlabel:"R",labelled:!0})),"srst"in t&&(n++,r.push({id:"srst",group:"in",dir:"in",bits:1,polarity:t.srst,labelled:!0})),"arst"in t&&(n++,r.push({id:"arst",group:"in",dir:"in",bits:1,polarity:t.arst,labelled:!0})),"enable"in t&&(n++,r.push({id:"en",group:"in",dir:"in",bits:1,polarity:t.enable,labelled:!0})),this.get("size").height=n*16+8,this.get("ports").items=r,this.last_clk=0,Ft.prototype.initialize.apply(this,arguments)},_resetPortValue(e){return e.id=="out"&&e.dir=="out"?Je.fromBin(this.get("initial"),e.bits):Ft.prototype._resetPortValue.call(this,e)},operation(e){const t=this.get("polarity"),r=a=>t[a]?1:-1;let n,i,s;const o=a=>({out:i?a.and(s).or(i):a});if("clock"in t&&(n=this.last_clk,this.last_clk=e.clk.get(0)),"arst"in t&&e.arst.get(0)==r("arst"))return{out:Je.fromBin(this.get("arst_value"),this.get("bits"))};if("aload"in t&&e.aload.get(0)==r("aload"))return{out:e.ain};if("set"in t&&(i=t.set?e.set:e.set.not(),s=t.set?e.set.not():e.set),"clr"in t){i=i||Je.zeros(this.get("bits"));const a=t.clr?e.clr.not():e.clr;s=s?a.and(s):a}return"enable"in t&&e.en.get(0)!=r("enable")&&this.get("enable_srst")?o(this.get("outputSignals").out):!("clock"in t)||e.clk.get(0)==r("clock")&&n==-r("clock")?"srst"in t&&e.srst.get(0)==r("srst")?o(Je.fromBin(this.get("srst_value"),this.get("bits"))):"enable"in t&&e.en.get(0)!=r("enable")&&!this.get("enable_srst")?o(this.get("outputSignals").out):this.get("no_data")?o(this.get("outputSignals").out):o(e.in):o(this.get("outputSignals").out)},_gateParams:Ft.prototype._gateParams.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"]),_unsupportedPropChanges:Ft.prototype._unsupportedPropChanges.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"])}),Bge=ii.extend({_autoResizeBox:!0}),b9=Ft.define("Memory",{bits:1,abits:1,rdports:[],wrports:[],words:void 0,offset:0,attrs:{portsplit:{stroke:"black"}},ports:{groups:{in:{position:Ft.prototype._getStackedPosition({side:"left"})},out:{position:Ft.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const e=this.get("bits"),t=this.get("abits");this.get("rdports"),this.get("wrports");let r=0,n=0;const i=[],s=[];for(const[o,a]of this._memrdports())i.push({id:o+"addr",group:"in",dir:"in",bits:t,portlabel:"addr",labelled:!0},{id:o+"data",group:"out",dir:"out",bits:e,portlabel:"data",labelled:!0,args:{idxOffset:n}}),r+=1,"srst_polarity"in a&&(r++,n++,i.push({id:o+"srst",group:"in",dir:"in",bits:1,portlabel:"srst",polarity:a.srst_polarity,labelled:!0})),"arst_polarity"in a&&(r++,n++,i.push({id:o+"arst",group:"in",dir:"in",bits:1,portlabel:"arst",polarity:a.arst_polarity,labelled:!0})),"enable_polarity"in a&&(r++,n++,i.push({id:o+"en",group:"in",dir:"in",bits:1,portlabel:"en",polarity:a.enable_polarity,labelled:!0})),"clock_polarity"in a&&(r++,n++,i.push({id:o+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:a.clock_polarity,decor:Ft.prototype.decorClock,labelled:!0})),s.push(r);for(const[o,a]of this._memwrports())r+=2,i.push({id:o+"data",group:"in",dir:"in",bits:e,portlabel:"data",labelled:!0},{id:o+"addr",group:"in",dir:"in",bits:t,portlabel:"addr",labelled:!0}),"enable_polarity"in a&&(r++,i.push({id:o+"en",group:"in",dir:"in",bits:a.no_bit_enable?1:e,portlabel:"en",polarity:a.enable_polarity,labelled:!0})),"clock_polarity"in a&&(r++,i.push({id:o+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:a.clock_polarity,decor:Ft.prototype.decorClock,labelled:!0})),s.push(r);s.pop(),this.get("size").height=r*16+8,this.get("ports").items=i,Ft.prototype.initialize.apply(this,arguments),this.removeProp("memdata"),this.on("change:size",(o,a)=>{const u=[];for(const c of s)u.push([[0,16*c+4],[a.width,16*c+4]].map(f=>f.join(" ")).join(" L "));this.attr("path.portsplit/d","M "+u.join(" M "))})},_resetPortValue(e){if(e.dir=="out"){const t=/^rd([0-9]+)data$/.exec(e.id),r=t?this.get("rdports")[t[1]]:{};if("init_value"in r)return Je.fromBin(r.init_value,e.bits)}return Ft.prototype._resetPortValue.call(this,e)},prepare(){const e=this.get("bits");var t=this.get("words");const r=this.get("memdata");t||(t=1<<this.get("abits"),this.prop("words",t,{init:!0})),r?this.memdata=yl.fromJSON(e,r):this.memdata=new yl(e,t),console.assert(this.memdata.words==t),this.last_clk={};for(const[n,i]of this._memports())"clock_polarity"in i&&(this.last_clk[n+"clk"]=0)},operation(e){const t=this.get("bits"),r={},n=(m,_)=>m[_+"_polarity"]?1:-1,i=(m,_)=>!("enable_polarity"in _&&!e[m+"en"].toArray().some(x=>x==n(_,"enable"))),s=(m,_)=>{const x=m+"clk";return"clock_polarity"in _?e[x].get(0)==n(_,"clock")&&this.last_clk[x]==-n(_,"clock"):!0},o=m=>m>=0&&m<this.get("words"),a=(m,_)=>{const x=this._calcaddr(e[m+"addr"]);o(x)?r[m+"data"]=this.memdata.get(x):r[m+"data"]=Je.xes(t)},u=(m,_,x,S)=>{if(_.no_bit_enable||!("enable_polarity"in _))return S;const E=_.enable_polarity?e[m+"en"]:e[m+"en"].not();return S.and(E).or(x.and(E.not()))},c=(m,_)=>{a(m);for(const[x,S]of this.get("wrports").entries()){const E="wr"+x,A=(T,I)=>typeof T=="boolean"?T:T[I];"transparent"in _&&A(_.transparent,x)&&s(E,S)&&i(E,S)&&e[m+"addr"]==e[E+"addr"]&&(r[m+"data"]=u(E,S,r[m+"data"],e[E+"data"])),"collision"in _&&A(_.collision,x)&&s(E,S)&&i(E,S)&&e[m+"addr"]==e[E+"addr"]&&(r[m+"data"]=u(E,S,r[m+"data"],Je.xes(t)))}},f=(m,_)=>{const x=this._calcaddr(e[m+"addr"]);if(o(x)){const S=this.memdata.get(x),E=u(m,_,S,e[m+"data"]),A=!S.eq(E);this.memdata.set(x,E),A&&this.trigger("memChange",x,E)}},h=(m,_)=>{e[m+"srst"].get(0)==n(_,"srst")&&(r[m+"data"]="srst_value"in _?Je.fromBin(_.srst_value,t):Je.zeros(t))},g=(m,_)=>{e[m+"arst"].get(0)==n(_,"arst")&&(r[m+"data"]="arst_value"in _?Je.fromBin(_.arst_value,t):Je.zeros(t))},y=(m,_)=>{if("clock_polarity"in _){const x=m+"clk";this.last_clk[x]=e[x].get(0)}};for(const[m,_]of this._memrdports())r[m+"data"]=this.get("outputSignals")[m+"data"],"clock_polarity"in _&&i(m,_)&&s(m,_)&&c(m,_);for(const[m,_]of this._memwrports())i(m,_)&&s(m,_)&&f(m,_);for(const[m,_]of this._memrdports())!("clock_polarity"in _)&&i(m,_)&&a(m);for(const[m,_]of this._memrdports())"srst_polarity"in _&&(i(m,_)||!("enable_srst"in _))&&s(m,_)&&h(m,_),"arst_polarity"in _&&g(m,_);for(const[m,_]of this._memrdports())y(m,_);for(const[m,_]of this._memwrports())y(m,_);return r},_calcaddr(e){return e.isFullyDefined?e.toNumber()-this.get("offset"):-1},*_memrdports(){for(const[e,t]of this.get("rdports").entries())yield["rd"+e,t]},*_memwrports(){for(const[e,t]of this.get("wrports").entries())yield["wr"+e,t]},*_memports(){yield*this._memrdports(),yield*this._memwrports()},markup:Ft.prototype.markup.concat([{tagName:"path",className:"portsplit",selector:"portsplit"}],Ft.prototype.markupZoom),getGateParams(){const e=Ft.prototype.getGateParams.apply(this,arguments);return e.memdata=this.memdata.toJSON(),e},_gateParams:Ft.prototype._gateParams.concat(["bits","abits","rdports","wrports","words","offset"]),_unsupportedPropChanges:Ft.prototype._unsupportedPropChanges.concat(["bits","abits","rdports","wrports","words","offset"]),_operationHelpers:Ft.prototype._operationHelpers.concat(["_memrdports","_memwrports","_memports","_calcaddr"])}),zge=ii.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(e){e.stopPropagation();const t=this.model,r=t.graph._display3vl,n=It("<div>",{title:"Memory contents: "+t.get("label")}).appendTo("html > body");n.append(It('<div class="btn-toolbar" role="toolbar"><div class="btn-group mr-2" role="group"><button name="prev" type="button" class="btn btn-secondary" title="Previous page">←</button><button name="next" type="button" class="btn btn-secondary" title="Next page">→</button></div><div class="input-group">'+sT(r,t.get("bits"),"hex")+'</div></div><table class="memeditor"></table>'));const i=t.get("words"),s=t.memdata,o=Math.ceil(t.get("abits")/4),a=8;let u,c=0;const f=()=>n.find("select[name=base]").val(),h=E=>{const A=Math.floor((E-c)/u),T=E-c-A*u;return n.find("table tr:nth-child("+(A+1)+") td:nth-child("+(T+2)+") input")},g=E=>{for(const[A,T]of t._memrdports())h(t._calcaddr(E[A+"addr"])).removeClass("isread");for(const[A,T]of t._memwrports())h(t._calcaddr(E[A+"addr"])).removeClass("iswrite")},y=E=>{for(const[A,T]of t._memrdports())h(t._calcaddr(E[A+"addr"])).addClass("isread");for(const[A,T]of t._memwrports())h(t._calcaddr(E[A+"addr"])).addClass("iswrite")},m=()=>{const E=f();n.find("button[name=prev]").prop("disabled",c<=0),n.find("button[name=next]").prop("disabled",c+a*u>=i);let A=n.find("table tr:first-child");const T=t.memdata;for(let I=0;I<a&&!(c+I*u>=i);I++,A=A.next()){const N=(c+I*u).toString(16);let p=A.find("td:first-child");p.text("0".repeat(o-N.length)+N),p=p.next();for(let P=0;P<u&&!(c+I*u+P>=i);P++,p=p.next())p.find("input").val(r.show(E,T.get(c+I*u+P))).removeClass("invalid")}y(t.get("inputSignals"))},_=()=>{const E=f(),A=r.pattern(E),T=r.size(E,t.get("bits"));u=Math.min(i,16,Math.ceil(32/T)),c=Math.max(0,Math.min(i-a*u,c));const I=n.find("table");I.empty();for(let N=0;N<a&&!(c+N*u>=i);N++){const p=It("<tr>");It("<td>").appendTo(p);for(let P=0;P<u&&!(c+N*u+P>=i);P++){const O=It("<td>");It('<input type="text">').attr("size",T).attr("maxlength",T).attr("pattern",A).appendTo(O),O.appendTo(p)}p.appendTo(I)}m()};_(),n.find("select[name=base]").on("change",_),n.find("button[name=prev]").on("click",()=>{g(t.get("inputSignals")),c=Math.max(0,c-a*u),m()}),n.find("button[name=next]").on("click",()=>{g(t.get("inputSignals")),c=Math.min(i-a*u,c+a*u),m()}),n.on("change","input",E=>{const A=f(),T=It(E.target),I=T.closest("td").index()-1,N=T.closest("tr").index(),p=c+N*u+I,P=t.get("bits");if(r.validate(A,E.target.value,P)){const O=r.read(A,E.target.value,P);s.set(p,O),t.trigger("manualMemChange",t,p,O),T.removeClass("invalid")}else T.addClass("invalid")});const x=(E,A)=>{if(E<c||E>c+a*u)return;const T=f(),I=h(E).val(r.show(T,s.get(E))).removeClass("invalid").removeClass("flash");setTimeout(()=>{I.addClass("flash")},10)},S=(E,A)=>{g(t.previous("inputSignals")),y(A)};return t.on("memChange",x),t.on("change:inputSignals",S),this.paper.trigger("open:memorycontent",n,()=>{n.remove(),t.off("memChange",x),t.off("change:inputSignals",S)}),!1}}),w9=Ft.define("FSM",{bits:{in:1,out:1},polarity:{clock:!0},init_state:0,states:1,trans_table:[],size:{width:80,height:3*16+8},ports:{groups:{in:{position:Ft.prototype._getStackedPosition({side:"left"})},out:{position:Ft.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const e=this.get("bits"),t=this.get("polarity"),r=this.get("init_state"),n=this.get("states");this.get("trans_table"),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in,labelled:!0},{id:"clk",group:"in",dir:"in",bits:1,polarity:t.clock,decor:Ft.prototype.decorClock,labelled:!0},{id:"arst",group:"in",dir:"in",bits:1,polarity:t.arst,labelled:!0},{id:"out",group:"out",dir:"out",bits:e.out,labelled:!0}],Ft.prototype.initialize.apply(this,arguments);const i=this.get("current_state");this.fsmgraph=new Po;for(let s=0;s<n;s++){const o=new Upe({stateNo:s,id:"state"+s,isInit:s==r});o.attr("label/text",String(s)),o.resize(100,50),s==r&&o.attr("body/strokeWidth",3),s==i&&o.attr("body/class","current_state"),o.addTo(this.fsmgraph)}for(const[s,o]of this.transitions)for(const a of o){const u=new Sp({id:a.id,ctrlIn:a.ctrlIn,ctrlOut:a.ctrlOut});u.appendLabel({attrs:{text:{text:u.get("ctrlIn").toBin()+"/"+u.get("ctrlOut").toBin()}}}),u.source({id:"state"+s}),u.target({id:"state"+a.stateOut}),u.addTo(this.fsmgraph)}this.listenTo(this,"change:current_state",(s,o)=>{const a=s.previous("current_state");this.fsmgraph.getCell("state"+a).removeAttr("body/class"),this.fsmgraph.getCell("state"+o).attr("body/class","current_state")}),this.listenTo(this,"change:next_trans",(s,o)=>{const a=s.previous("next_trans");if(a){const u=this.fsmgraph.getCell(a);u.removeAttr("line/class"),u.removeAttr("line/targetMarker/class")}o&&this.fsmgraph.getCell(o).attr({line:{class:"next_trans",targetMarker:{class:"next_trans"}}})})},prepare(){const e=this.get("bits");this.transitions=new Map;var t=0;for(const n of this.get("trans_table"))this.transitions.has(n.state_in)||this.transitions.set(n.state_in,[]),this.transitions.get(n.state_in).push({id:"tr"+t,stateOut:n.state_out,ctrlIn:Je.fromBin(n.ctrl_in,e.in),ctrlOut:Je.fromBin(n.ctrl_out,e.out)}),t++;var r=this.get("current_state");r===void 0&&(r=this.get("init_state"),this.set("current_state",r)),this.last_clk=0},operation(e){const t=this.get("bits"),r=this.get("polarity"),n=()=>{const a=this.transitions.get(this.get("current_state"))||[];for(const u of a){const c=u.ctrlIn,f=c.xmask();if(e.in.or(f).eq(c.or(f)))return u}},i=()=>{const a=this.transitions.get(this.get("current_state"))||[],u=e.in.xmask(),c=[];for(const h of a){const g=h.ctrlIn,y=g.xmask().or(u);e.in.or(y).eq(g.or(y))&&c.push(h.ctrlOut)}const f=Je.xes(t.out);if(c.length==0)return f;for(;c.length>1;){const h=c.pop(),g=c[0].xnor(h).or(f);c[0]=c[0].and(g).or(f.and(g.xmask()))}return c[0]},s=a=>r[a]?1:-1;if(e.arst.get(0)==s("arst"))this.set("current_state",this.get("init_state"));else{const a=this.last_clk;if(e.clk.get(0)==s("clock")&&a==-s("clock")){const u=n();this.set("current_state",u?u.stateOut:this.get("init_state"))}}this.last_clk=e.clk.get(0);const o=n();return o?this.set("next_trans",o.id):this.set("next_trans",void 0),{out:i()}},markup:Ft.prototype.markup.concat(Ft.prototype.markupZoom),_gateParams:Ft.prototype._gateParams.concat(["bits","polarity","states","init_state","trans_table"]),_unsupportedPropChanges:Ft.prototype._unsupportedPropChanges.concat(["bits","polarity","states","init_state","trans_table"]),_presentationParams:Ft.prototype._presentationParams.concat(["current_state","next_trans"])}),Vge=ii.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(e){e.stopPropagation();const t=It("<div>",{title:"FSM: "+this.model.get("label")}).appendTo("html > body"),r=It("<div>").appendTo(t),n=this.model.fsmgraph,i=new bj({el:r,model:n});return n.resetCells(n.getCells()),n.get("laid_out")||(mh.layout(n,{dagre:lce,graphlib:hce}),n.set("laid_out",!0)),i.listenTo(n,"change:position",s=>{i.fitToContent({padding:30,allowNewOrigin:"any"})}),i.fitToContent({padding:30,allowNewOrigin:"any"}),this.paper.trigger("open:fsm",t,()=>{i.remove(),t.remove()}),!1}}),hu="#03c03c",ka="#3c3c3c",x9=Ao.define("Display7",{bits:8,size:{width:76.5,height:110},attrs:{LEDs:{fill:ka,transform:"translate(1,1),scale(6)"},a:{points:"1, 1  2, 0  8, 0  9, 1  8, 2  2, 2"},b:{points:"9, 1 10, 2 10, 8  9, 9  8, 8  8, 2"},c:{points:"9, 9 10,10 10,16  9,17  8,16  8,10"},d:{points:"9,17  8,18  2,18  1,17  2,16  8,16"},e:{points:"1,17  0,16  0,10  1, 9  2,10  2,16"},f:{points:"1, 9  0, 8  0, 2  1, 1  2, 2  2, 8"},g:{points:"1, 9  2, 8  8, 8  9, 9  8,10  2,10"},dp:{cx:"11.3",cy:"16.9",r:"1.1"},body:{height:"calc(h)",width:"calc(w)",stroke:"#222222",fill:"#333333"}}},{isOutput:!0,_portDirection:"in",bits:8,getOutput(){return this.get("inputSignals").in},markupBus:ls.prototype.markup.concat([{tagName:"rect",selector:"display"},{tagName:"polygon",selector:"a",groupSelector:"LEDs"},{tagName:"polygon",selector:"b",groupSelector:"LEDs"},{tagName:"polygon",selector:"c",groupSelector:"LEDs"},{tagName:"polygon",selector:"d",groupSelector:"LEDs"},{tagName:"polygon",selector:"e",groupSelector:"LEDs"},{tagName:"polygon",selector:"f",groupSelector:"LEDs"},{tagName:"polygon",selector:"g",groupSelector:"LEDs"},{tagName:"circle",selector:"dp",groupSelector:"LEDs"}])}),Gge=aa.extend({_autoResizeBox:!1,confirmUpdate(e){ii.prototype.confirmUpdate.apply(this,arguments),this._updateDisplay()},_updateDisplay(){const e=this.model.getOutput(),t={dp:{fill:e.get(7)===1?hu:ka},a:{fill:e.get(6)===1?hu:ka},b:{fill:e.get(5)===1?hu:ka},c:{fill:e.get(4)===1?hu:ka},d:{fill:e.get(3)===1?hu:ka},e:{fill:e.get(2)===1?hu:ka},f:{fill:e.get(1)===1?hu:ka},g:{fill:e.get(0)===1?hu:ka}};this._applyAttrs(t)}}),$ge=Object.freeze(Object.defineProperty({__proto__:null,Addition:Zj,AdditionConst:Qve,AdditionConstView:ege,AdditionView:Bve,And:zj,AndReduce:jj,AndReduceView:kve,AndView:Tve,Arith:bi,Arith11:aT,Arith21:Nc,ArithConst:qc,BaseCompare:yh,BaseCompareConst:_h,BitExtend:hT,BitExtendView:dT,Box:Ft,BoxView:ii,BusGroup:p9,BusGroupView:Ige,BusRegroup:pT,BusRegroupView:vT,BusSlice:d9,BusSliceView:Rge,BusUngroup:v9,BusUngroupView:Oge,Button:Ij,ButtonView:vve,Clock:Nj,ClockView:bve,Compare:Zh,CompareConst:Jh,Constant:Lj,ConstantView:_ve,Dff:_9,DffView:Bge,Display7:x9,Display7View:Gge,Division:e9,DivisionConst:sge,DivisionConstView:oge,DivisionView:Gve,Eq:c9,EqCompare:cT,EqCompareConst:fT,EqConst:Sge,EqConstView:Ege,EqView:Zve,FSM:w9,FSMView:Vge,Gate:bn,Gate11:oT,GateReduce:Au,GateSVG:oa,GateView:Kt,GateX1:Lc,Ge:u9,GeConst:wge,GeConstView:xge,GeView:Kve,GenMux:_u,GenMuxView:gg,Gt:a9,GtConst:_ge,GtConstView:bge,GtView:Yve,IO:Ao,IOView:aa,Input:Yh,InputView:nT,Lamp:Mj,LampView:mve,Le:o9,LeConst:mge,LeConstView:yge,LeView:Xve,Lt:s9,LtConst:vge,LtConstView:gge,LtView:Wve,Memory:b9,MemoryView:zge,Modulo:t9,ModuloConst:age,ModuloConstView:uge,ModuloView:$ve,Multiplication:Qj,MultiplicationConst:nge,MultiplicationConstView:ige,MultiplicationView:Vve,Mux:m9,Mux1Hot:y9,Mux1HotView:qge,MuxSparse:Dge,MuxSparseView:Fge,MuxView:Nge,Nand:Gj,NandReduce:Hj,NandReduceView:Lve,NandView:Cve,Ne:l9,NeConst:Age,NeConstView:Tge,NeView:Jve,Negation:Yj,NegationView:Dve,Nor:Vj,NorReduce:PE,NorReduceView:Mve,NorView:Pve,Not:Fj,NotView:Eve,NumBase:ls,NumBaseView:yu,NumDisplay:kj,NumDisplayView:yve,NumEntry:Oj,NumEntryView:gve,OpConst:ua,Or:Bj,OrReduce:TE,OrReduceView:Ove,OrView:Ave,Output:Kh,OutputView:iT,Power:r9,PowerConst:cge,PowerConstView:lge,PowerView:Uve,Repeater:Dj,RepeaterView:Sve,Shift:uT,ShiftConst:lT,ShiftLeft:n9,ShiftLeftConst:fge,ShiftLeftConstView:hge,ShiftLeftView:jve,ShiftRight:i9,ShiftRightConst:dge,ShiftRightConstView:pge,ShiftRightView:Hve,SignExtend:h9,SignExtendView:Cge,Subcircuit:g9,SubcircuitView:kge,Subtraction:Jj,SubtractionConst:tge,SubtractionConstView:rge,SubtractionView:zve,UnaryPlus:Kj,UnaryPlusView:Fve,Wire:Rj,WireView:pve,Xnor:Uj,XnorReduce:Xj,XnorReduceView:qve,XnorView:Ive,Xor:$j,XorReduce:Wj,XorReduceView:Nve,XorView:Rve,ZeroExtend:f9,ZeroExtendView:Pge,portGroupAttrs:Yp},Symbol.toStringTag,{value:"Module"}));var jS,f4;function Uge(){if(f4)return jS;f4=1;var e=function(r,n){return r<n};function t(r){if(!(this instanceof t))return new t(r);this.array=[],this.size=0,this.compare=r||e}return t.prototype.clone=function(){var r=new t(this.compare);return r.size=this.size,r.array=this.array.slice(0,this.size),r},t.prototype.add=function(r){var n=this.size;this.array[this.size]=r,this.size+=1;for(var i,s;n>0&&(i=n-1>>1,s=this.array[i],!!this.compare(r,s));)this.array[n]=s,n=i;this.array[n]=r},t.prototype.heapify=function(r){this.array=r,this.size=r.length;var n;for(n=this.size>>1;n>=0;n--)this._percolateDown(n)},t.prototype._percolateUp=function(r,n){for(var i=this.array[r],s,o;r>0&&(s=r-1>>1,o=this.array[s],!(!n&&!this.compare(i,o)));)this.array[r]=o,r=s;this.array[r]=i},t.prototype._percolateDown=function(r){for(var n=this.size,i=this.size>>>1,s=this.array[r],o,a,u;r<i&&(o=(r<<1)+1,a=o+1,u=this.array[o],a<n&&this.compare(this.array[a],u)&&(o=a,u=this.array[a]),!!this.compare(u,s));)this.array[r]=u,r=o;this.array[r]=s},t.prototype._removeAt=function(r){if(!(r>this.size-1||r<0))return this._percolateUp(r,!0),this.poll()},t.prototype.remove=function(r){for(var n=0;n<this.size;n++)if(!this.compare(this.array[n],r)&&!this.compare(r,this.array[n]))return this._removeAt(n),!0;return!1},t.prototype.removeOne=function(r){if(typeof r=="function"){for(var n=0;n<this.size;n++)if(r(this.array[n]))return this._removeAt(n)}},t.prototype.removeMany=function(r,n){if(typeof r!="function"||this.size<1)return[];n=n?Math.min(n,this.size):this.size;for(var i=0,s=new Array(n),o=0,a=new Array(this.size);i<n&&!this.isEmpty();){var u=this.poll();r(u)?s[i++]=u:a[o++]=u}s.length=i;for(var c=0;c<o;)this.add(a[c++]);return s},t.prototype.peek=function(){if(this.size!=0)return this.array[0]},t.prototype.poll=function(){if(this.size!=0){var r=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,r}},t.prototype.replaceTop=function(r){if(this.size!=0){var n=this.array[0];return this.array[0]=r,this._percolateDown(0),n}},t.prototype.trim=function(){this.array=this.array.slice(0,this.size)},t.prototype.isEmpty=function(){return this.size===0},t.prototype.forEach=function(r){if(!(this.isEmpty()||typeof r!="function"))for(var n=0,i=this.clone();!i.isEmpty();)r(i.poll(),n++)},t.prototype.kSmallest=function(r){if(this.size==0)return[];r=Math.min(this.size,r);var n=new t(this.compare);const i=Math.min((r>0?Math.pow(2,r-1):0)+1,this.size);n.size=i,n.array=this.array.slice(0,i);for(var s=new Array(r),o=0;o<r;o++)s[o]=n.poll();return s},jS=t,jS}var jge=Uge();const Hge=Fl(jge);class S9{constructor(t){this._graph=t}_addGate(t,r){r.get("type")=="Subcircuit"&&this._addGraph(r.get("graph"))}_addLink(t,r){}_addGraph(t){this.listenTo(t,"add",r=>{r.isLink()?this._addLink(t,r):this._addGate(t,r)}),this.listenTo(t,"remove",r=>{r.isLink()?this._removeLink(t,r):this._removeGate(t,r)}),this.listenTo(t,"change:source",(r,n)=>{this._changeLinkSource(t,r,n,r.previous("source"))}),this.listenTo(t,"change:target",(r,n)=>{this._changeLinkTarget(t,r,n,r.previous("target"))}),this.listenTo(t,"change:warning",(r,n)=>{this._changeLinkWarning(t,r,n,r.previous("warning"))});for(const r of t.getElements())this._addGate(t,r);for(const r of t.getLinks())this._addLink(t,r)}_removeGate(t,r){}_removeLink(t,r){}_changeLinkSource(t,r,n,i){}_changeLinkTarget(t,r,n,i){}_changeLinkWarning(t,r,n,i){}}Tn.extend(S9.prototype,ei.Events);class Wge extends S9{constructor(t,{cells:r}){super(t),this._queue=new Map,this._pq=new Hge,this._tick=0,this._cells=r,this._monitorChecks=new Map,this._alarms=new Map,this._alarmQueue=new Map,this._addGraph(t)}get hasPendingEvents(){return this._queue.size>0}get tick(){return this._tick}shutdown(){this.stopListening()}_updateSubcircuit(t,r,n={}){r||(r=t.get("inputSignals"));const i=t.get("circuitIOmap");for(const[s,o]of Object.entries(r)){if(n[s]&&o.eq(n[s]))continue;const a=t.get("graph").getCell(i[s]);console.assert(a.isInput),a._setInput(o)}}_addGate(t,r){super._addGate(t,r),this._enqueue(r),r instanceof this._cells.Subcircuit&&this._updateSubcircuit(r)}_addGraph(t){this.listenTo(t,"manualMemChange",r=>{this._enqueue(r)}),this.listenTo(t,"change:constantCache",r=>{this._enqueue(r)}),this.listenTo(t,"change:inputSignals",(r,n)=>{const i=r.previous("inputSignals");if(!AE(n,i)){if(r instanceof this._cells.Subcircuit&&this._updateSubcircuit(r,n,i),r instanceof this._cells.Output&&r.get("mode")==0){const s=r.graph.get("subcircuit");if(s!=!0){console.assert(s!=null);const o=r.get("net"),a=Tn.clone(s.get("outputSignals"));a[o]=r.getOutput(),s.set("outputSignals",a)}}this._enqueue(r)}}),super._addGraph(t)}_enqueue(t){const r=this._tick+t.get("propagation")|0;(()=>{const i=this._queue.get(r);if(i!==void 0)return i;const s=new Map;return this._queue.set(r,s),this._pq.add(r),s})().set(t,t.get("inputSignals"))}updateGatesNext(){const t=this._pq.poll()|0;console.assert(t>=this._tick),this._tick=t;const r=this._queue.get(t);let n=0;for(;r.size;){const[i,s]=r.entries().next().value;if(r.delete(i),i instanceof this._cells.Subcircuit||i instanceof this._cells.Input||i instanceof this._cells.Output||!i.graph)continue;const a=i.operation(s);"_clock_hack"in a&&(delete a._clock_hack,this._enqueue(i)),i.set("outputSignals",a),n++}return this._queue.delete(t),this._tick=t+1|0,this._checkMonitors(),this.trigger("postUpdateGates",t,n),Promise.resolve(n)}updateGates(){if(this._pq.peek()==this._tick)return this.updateGatesNext();{const t=this._tick|0;return this._tick=t+1|0,this._checkMonitors(),this.trigger("postUpdateGates",t,0),Promise.resolve(0)}}synchronize(){return Promise.resolve()}start(){throw new Error("start() not supported")}startFast(){throw new Error("startFast() not supported")}stop(){return Promise.resolve()}get interval(){throw new Error("interval not supported")}set interval(t){throw new Error("interval not supported")}get running(){return!1}observeGraph(t){}unobserveGraph(t){}monitor(t,r,n,{triggerValues:i,stopOnTrigger:s,oneShot:o}){const a=(u,c)=>{const f=c[r];this._monitorChecks.set(a,{gate:u,sig:f,cb:a,callback:n,triggerValues:i,stopOnTrigger:s,oneShot:o})};return t.on("change:outputSignals",a),i==null&&n(this._tick,t.get("outputSignals")[r]),{gate:t,callback:a}}unmonitor(t){t.gate.off("change:outputSignals",t.callback)}alarm(t,r,{stopOnAlarm:n}){console.assert(t>this._tick);const i=()=>{this.unalarm(i),r()};return this._alarms.set(i,{tick:t,stopOnAlarm:n}),this._alarmQueue.has(t)||this._alarmQueue.set(t,new Set),this._alarmQueue.get(t).add(i),this._pq.add(t-1),this._queue.has(t-1)||this._queue.set(t-1,new Map),i}unalarm(t){const{tick:r}=this._alarms.get(t);this._alarmQueue.get(r).delete(t),this._alarmQueue.get(r).size==0&&this._alarmQueue.delete(r),this._alarms.delete(t)}_checkMonitors(){for(const{gate:t,sig:r,cb:n,callback:i,triggerValues:s,stopOnTrigger:o,oneShot:a}of this._monitorChecks.values()){let u=!0;s!=null&&(u=s.some(c=>r.eq(c))),u&&(a&&t.off("change:outputSignals",n),i(this._tick,r)&&o&&this.stop())}if(this._monitorChecks=new Map,this._alarmQueue.get(this._tick)){for(const t of this._alarmQueue.get(this._tick)){const{stopOnAlarm:r}=this._alarms.get(t);t()&&r&&this.stop()}this._alarmQueue.delete(this._tick)}}}function Xge(e){const t={$not:Fj,$and:zj,$nand:Gj,$or:Bj,$nor:Vj,$xor:$j,$xnor:Uj,$reduce_and:jj,$reduce_nand:Hj,$reduce_or:TE,$reduce_nor:PE,$reduce_xor:Wj,$reduce_xnor:Xj,$reduce_bool:TE,$logic_not:PE,$repeater:Dj,$shl:n9,$shr:i9,$lt:s9,$le:o9,$eq:c9,$ne:l9,$gt:a9,$ge:u9,$constant:Lj,$neg:Yj,$pos:Kj,$add:Zj,$sub:Jj,$mul:Qj,$div:e9,$mod:t9,$pow:r9,$mux:m9,$pmux:y9,$dff:_9,$mem:b9,$fsm:w9,$clock:Nj,$button:Ij,$lamp:Mj,$numdisplay:kj,$numentry:Oj,$input:Yh,$output:Kh,$busgroup:p9,$busungroup:v9,$busslice:d9,$zeroextend:f9,$signextend:h9,$display7:x9};return e in t?t[e]:g9}class E9{constructor(t,{cellsNamespace:r={},engine:n=Wge,engineOptions:i={}}={}){this._cells=Object.assign($ge,r),this._display3vl=new Tj,this._display3vl.addDisplay(new wve),this._graph=this._makeGraph(t,t.subcircuits),i.cells=this._cells,this._engine=new n(this._graph,i),this.makeLabelIndex(),this.listenTo(this._engine,"postUpdateGates",(s,o)=>{this.trigger("postUpdateGates",s,o)})}addDisplay(t){this._display3vl.addDisplay(t),this.trigger("display:add",t)}shutdown(){this.trigger("shutdown"),this.stop(),this._engine.shutdown(),this.stopListening()}hasWarnings(){return this._graph._warnings>0}_makeGraph(t,r,n){n=n||{};const i=new Po;i._display3vl=this._display3vl,i._warnings=0,n.nested&&i.set("subcircuit",!0);const s=a=>{i._warnings+=a,console.assert(i._warnings>=0),i._warnings>0&&this.running&&this.stop();const u=i.get("subcircuit");u==null||u==!0||u.set("warning",i._warnings>0)};this.listenTo(i,"userChange",a=>{this.trigger("userChange",a)}),this.listenTo(i,"change:inputSignals",(a,u)=>{AE(u,a.previous("inputSignals"))||a._changeInputSignals&&a._changeInputSignals(u)}),this.listenTo(i,"change:outputSignals",(a,u)=>{AE(u,a.previous("outputSignals"))||a._changeOutputSignals(u)}),this.listenTo(i,"change:signal",(a,u)=>{a._changeSignal(u)}),this.listenTo(i,"change:source",(a,u)=>{this._labelIndex=null,a._changeSource(u)}),this.listenTo(i,"change:target",(a,u)=>{this._labelIndex=null,a._changeTarget(u)}),this.listenTo(i,"change:warning",(a,u)=>{a.previous("warning")!==u&&s(u?1:-1)}),this.listenTo(i,"add",(a,u,c)=>{this._labelIndex=null,a.onAdd&&a.onAdd(),a.get("warning")&&s(1)}),this.listenTo(i,"remove",(a,u,c)=>{this._labelIndex=null,a.get("warning")&&s(-1)});let o=!1;for(const a in t.devices){const u=t.devices[a];u.position&&(o=!0);const c=u.type in this._cells?this._cells[u.type]:Xge(u.celltype),f=Tn.clone(u);f.id=a,c==this._cells.Subcircuit&&(f.graph=this._makeGraph(r[u.celltype],r,{nested:!0}));const h=new c(f);i.addCell(h)}for(const a of t.connectors)i.addCell(new this._cells.Wire({source:{id:a.from.id,port:a.from.port,magnet:"port"},target:{id:a.to.id,port:a.to.port,magnet:"port"},netname:a.name,vertices:a.vertices||[],source_positions:a.source_positions||[]}));return o&&i.set("laid_out",!0),i}updateGatesNext(t){return this._engine.updateGatesNext(t)}updateGates(t){return this._engine.updateGates(t)}synchronize(){return this._engine.synchronize()}get hasPendingEvents(){return this._engine.hasPendingEvents}get tick(){return this._engine.tick}start(){if(!this.hasWarnings())return this._engine.start()}startFast(){if(!this.hasWarnings())return this._engine.startFast()}stop(t){return this._engine.stop(t)}get interval(){return this._engine.interval}set interval(t){this._engine.interval=t}get running(){return this._engine.running}getInputCells(){return this._graph.getElements().filter(t=>t.isInput)}getOutputCells(){return this._graph.getElements().filter(t=>t.isOutput)}setInput(t,r){const n=this._graph.getCell(t);if(n.isInput)n.setInput(r);else throw new Error("Invalid call to setInput")}getOutput(t){const r=this._graph.getCell(t);if(r.isOutput)return r.getOutput();throw new Error("Invalid call to getOutput")}makeLabelIndex(){if(this._labelIndex)return this._labelIndex;const t=r=>{const n={wires:{},devices:{},subcircuits:{},inputs:{},outputs:{},graph:r};for(const i of r.getElements()){if(i.has("net")&&(i.isInput&&(n.inputs[i.get("net")]=i),i.isOutput&&(n.outputs[i.get("net")]=i)),!i.has("label"))continue;const s=i.get("label");n.devices[s]=i,i instanceof this._cells.Subcircuit&&(n.subcircuits[s]=t(i.get("graph")))}for(const i of r.getLinks())i.has("netname")&&(n.wires[i.get("netname")]=i);return n};return this._labelIndex=t(this._graph)}getLabelIndex(t=[]){const r=(n,i)=>{if(n==t.length)return i;{const s=i.subcircuits[t[n]];if(s)return r(n+1,s)}};return r(0,this.makeLabelIndex())}findWireByLabel(t,r=[]){return this.getLabelIndex(r).wires[t]}findDeviceByLabel(t,r=[]){return this.getLabelIndex(r).devices[t]}findInputByNet(t){return this.getLabelIndex([]).inputs[t]}findOutputByNet(t){return this.getLabelIndex([]).outputs[t]}toJSON(t=!0){const r={},n=s=>{const o={devices:{},connectors:[]},a=s.get("laid_out");for(const u of s.getElements()){const c=o.devices[u.get("id")]=u.getGateParams(t);a||delete c.position,u instanceof this._cells.Subcircuit&&!r[u.get("celltype")]&&(r[u.get("celltype")]=n(u.get("graph")))}for(const u of s.getLinks())o.connectors.push(u.getWireParams(t));return o},i=n(this._graph);return i.subcircuits=r,i}waitForWire(t,r){return r instanceof Je&&(r=[r]),new Promise(n=>{this.monitorWire(t,(i,s)=>{n(i)},{synchronous:!0,oneShot:!0,stopOnTrigger:!0,triggerValues:r})})}waitFor(t,r,n){return n instanceof Je&&(n=[n]),new Promise(i=>{this.monitor(t,r,(s,o)=>{i(s)},{synchronous:!0,oneShot:!0,stopOnTrigger:!0,triggerValues:n})})}monitorWire(t,r,n={}){const i=t.get("source"),s=t.getSourceElement();return s==null?null:this.monitor(s,i.port,r,n)}monitor(t,r,n,i={}){return this._engine.monitor(t,r,n,i)}unmonitor(t){this._engine.unmonitor(t)}observeGraph(t=[]){this._engine.observeGraph(this.getLabelIndex(t).graph)}unobserveGraph(t=[]){this._engine.observeGraph(this.getLabelIndex(t).graph)}alarm(t,r,n={}){return this._engine.alarm(t,r,n)}unalarm(t){this._engine.unalarm(t)}}Tn.extend(E9.prototype,ei.Events);class Yge{constructor(t,r=[]){this._bits=t,this._data=r,r.length==0?this._present=-1:this._present=this._data[this._data.length-1][0]}get bits(){return this._bits}updatePresent(t){this._present=Math.max(this._present,t)}push(t,r){if(console.assert(r.bits==this._bits&&t>=this._present),this._present=t,this._data.length>0){const[n,i]=this._data[this._data.length-1];if(i.eq(r))return;if(console.assert(t>=n),t==n){this._data[this._data.length-1][1]=r;return}}this._data.push([t,r])}getRange(t,r){if(this._data.length==0)return[];const n=a=>{let u=0,c=this._data.length;for(;c>u;){const f=u+c>>1,h=this._data[f][0];if(a==h)return f;a<h?c=f:u=f+1}return u==this._data.length?u-1:u};let i=n(t),s=n(t+r);i>0&&this._data[i][0]>t&&i--,s<this._data.length-1&&this._data[s][0]<t+r&&s++;const o=this._data.slice(i,s+1).map(a=>[a[0],a[1]]);return o[o.length-1][0]<t+r&&this._present>o[o.length-1][0]&&o.push([this._present,o[o.length-1][1]]),o}}const A9={start:0,pixelsPerTick:10,bitColors:["#fc7c68","#999","#03c03c","#779ecb"],gapScale:.2,heightFill:.8,base:"hex",gridWidth:.5,gridColor:"gray",gridStep:1,gridMinDist:10,font:"10px sans-serif",textColor:"black"};Object.freeze(A9);function h4(e,t){var r={};for(const[i,s]of Object.entries(t))r[i]={value:s,writable:!0};return Object.create(e,r)}function T9(e){let t=e.gridStep;for(;t*e.pixelsPerTick<e.gridMinDist;)10*t*e.pixelsPerTick<e.gridMinDist?t*=10:2*t*e.pixelsPerTick>=e.gridMinDist?t*=2:5*t*e.pixelsPerTick>=e.gridMinDist?t*=5:t*=10;return t}function Kge(e,t,r,n=new Tj){t.clearRect(0,0,t.canvas.width,t.canvas.height);const i=t.canvas.width/r.pixelsPerTick;"present"in r&&e.updatePresent(r.present);const s=e.getRange(r.start,Math.ceil(i)),o=s.map((x,S)=>[x,s[S+1]]);o.pop();const a=x=>(Math.max(Math.min(x,r.start+i),r.start)-r.start)*r.pixelsPerTick,u=.5*t.canvas.height,c=(.5-r.heightFill/2)*t.canvas.height,f=(.5+r.heightFill/2)*t.canvas.height,h=x=>[f,u,c][x+1],g=x=>r.bitColors[x+1],y=x=>r.bitColors[x.isDefined?x.isLow?0:x.isHigh?2:3:1],m=t.createLinearGradient(0,f,0,c);m.addColorStop(0,r.bitColors[0]),m.addColorStop(.5,r.bitColors[1]),m.addColorStop(1,r.bitColors[2]),t.lineWidth=r.gridWidth;const _=T9(r);for(let x=r.start-r.start%_;x<r.start+i;x+=_){const S=a(x);t.beginPath(),t.strokeStyle=r.gridColor,t.moveTo(S,0),t.lineTo(S,t.canvas.height),t.stroke()}t.lineWidth=2;for(const[[x,S],[E,A]]of o){const T=a(x),I=a(E);if(e.bits==1){const N=S.get(0),p=A.get(0),P=h(N),O=h(p),q=g(N);g(p);const V=Math.min(Math.abs(P-O)*r.gapScale,r.pixelsPerTick/2);t.beginPath(),t.strokeStyle=m,t.moveTo(I-V,P),t.lineTo(I,O),t.stroke(),t.beginPath(),t.strokeStyle=q,t.moveTo(T,P),t.lineTo(I-V,P),t.stroke()}else{const N=Math.min(Math.abs(c-f)*r.gapScale,r.pixelsPerTick/2),p=y(S),P=y(A),O=S.isDefined,q=A.isDefined;if(O){t.textAlign="center",t.textBaseline="middle",t.font=r.font,t.fillStyle=r.textColor;const V=n.show(r.base,S);t.measureText(V).width<(I-T-N)*2&&t.fillText(V,(T+I-N)/2,t.canvas.height/2,I-T-N)}!O&&!q?(t.beginPath(),t.strokeStyle=p,t.moveTo(T,u),t.lineTo(I,u),t.stroke()):S.eq(A)?(t.strokeStyle=P,t.beginPath(),t.moveTo(T,c),t.lineTo(I,c),t.stroke(),t.beginPath(),t.moveTo(T,f),t.lineTo(I,f),t.stroke()):(t.strokeStyle=P,q?(t.beginPath(),t.moveTo(I,c),t.lineTo(I-N/2,u),t.lineTo(I,f),t.stroke()):(t.beginPath(),t.moveTo(I,u),t.lineTo(I-N/2,u),t.stroke()),t.strokeStyle=p,O?(t.beginPath(),t.moveTo(T,c),t.lineTo(I-N,c),t.lineTo(I-N/2,u),t.lineTo(I-N,f),t.lineTo(T,f),t.stroke()):(t.beginPath(),t.moveTo(T,u),t.lineTo(I-N/2,u),t.stroke()))}}}var P9=function(){if(typeof Map<"u")return Map;function e(t,r){var n=-1;return t.some(function(i,s){return i[0]===r?(n=s,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(r,n){var i=e(this.__entries__,r);~i?this.__entries__[i][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,i=e(n,r);~i&&n.splice(i,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var i=0,s=this.__entries__;i<s.length;i++){var o=s[i];r.call(n,o[1],o[0])}},t}()}(),IE=typeof window<"u"&&typeof document<"u"&&window.document===document,Kp=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Zge=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Kp):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),Jge=2;function Qge(e,t){var r=!1,n=!1,i=0;function s(){r&&(r=!1,e()),n&&a()}function o(){Zge(s)}function a(){var u=Date.now();if(r){if(u-i<Jge)return;n=!0}else r=!0,n=!1,setTimeout(o,t);i=u}return a}var eme=20,tme=["top","right","bottom","left","width","height","size","weight"],rme=typeof MutationObserver<"u",nme=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Qge(this.refresh.bind(this),eme)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!IE||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),rme?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!IE||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,i=tme.some(function(s){return!!~n.indexOf(s)});i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),C9=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},Rl=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||Kp},R9=mg(0,0,0,0);function Zp(e){return parseFloat(e)||0}function d4(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,i){var s=e["border-"+i+"-width"];return n+Zp(s)},0)}function ime(e){for(var t=["top","right","bottom","left"],r={},n=0,i=t;n<i.length;n++){var s=i[n],o=e["padding-"+s];r[s]=Zp(o)}return r}function sme(e){var t=e.getBBox();return mg(0,0,t.width,t.height)}function ome(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return R9;var n=Rl(e).getComputedStyle(e),i=ime(n),s=i.left+i.right,o=i.top+i.bottom,a=Zp(n.width),u=Zp(n.height);if(n.boxSizing==="border-box"&&(Math.round(a+s)!==t&&(a-=d4(n,"left","right")+s),Math.round(u+o)!==r&&(u-=d4(n,"top","bottom")+o)),!ume(e)){var c=Math.round(a+s)-t,f=Math.round(u+o)-r;Math.abs(c)!==1&&(a-=c),Math.abs(f)!==1&&(u-=f)}return mg(i.left,i.top,a,u)}var ame=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Rl(e).SVGGraphicsElement}:function(e){return e instanceof Rl(e).SVGElement&&typeof e.getBBox=="function"}}();function ume(e){return e===Rl(e).document.documentElement}function cme(e){return IE?ame(e)?sme(e):ome(e):R9}function lme(e){var t=e.x,r=e.y,n=e.width,i=e.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(s.prototype);return C9(o,{x:t,y:r,width:n,height:i,top:r,right:t+n,bottom:i+r,left:t}),o}function mg(e,t,r,n){return{x:e,y:t,width:r,height:n}}var fme=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=mg(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=cme(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),hme=function(){function e(t,r){var n=lme(r);C9(this,{target:t,contentRect:n})}return e}(),dme=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new P9,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Rl(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new fme(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Rl(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new hme(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),I9=typeof WeakMap<"u"?new WeakMap:new P9,O9=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=nme.getInstance(),n=new dme(t,r,this);I9.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){O9.prototype[e]=function(){var t;return(t=I9.get(this))[e].apply(t,arguments)}});var pme=function(){return typeof Kp.ResizeObserver<"u"?Kp.ResizeObserver:O9}();function _l(e){const t=[e.cid];for(let r=e.graph.get("subcircuit");r!=null;r=r.graph.get("subcircuit"))t.push(r.cid);return t.reverse(),t.join(".")}function vme(e){const t=[];if(e.has("netname"))t.push(e.get("netname"));else{const r=e.source();t.push(r.port);const n=e.graph.getCell(r.id);n.has("label")?t.push(n.get("label")):t.push(r.id)}for(let r=e.graph.get("subcircuit");r!=null;r=r.graph.get("subcircuit"))r.has("label")?t.push(r.get("label")):t.push(r.id);return t.reverse(),t.join(".")}class gme{constructor(t){this._circuit=t,this._wires=new Map,this.listenTo(this._circuit,"new:paper",r=>this.attachTo(r))}attachTo(t){this.listenTo(t,"link:monitor",r=>{this.addWire(r.model)})}addWire(t){const r=_l(t);if(this._wires.has(r))return;const n=new Yge(t.get("bits")),i={wire:t,waveform:n,monitorId:void 0};this._wires.set(r,i),this.trigger("add",t),i.monitorId=this._circuit.monitorWire(t,(s,o)=>{this._handleChange(s,t,o)})}removeWire(t){typeof t=="string"&&(t=this._wires.get(t).wire),this.trigger("remove",t);const r=_l(t);this._circuit.unmonitor(this._wires.get(r).monitorId),this._wires.delete(r)}getWires(){const t=[];for(const r of this._wires.values())t.push(r.wire);return t}getWiresDesc(){return this.getWires().map(t=>{if(t.has("netname"))return{name:t.get("netname"),path:t.getWirePath(),bits:t.get("bits")}}).filter(t=>t!==void 0)}loadWiresDesc(t){for(const r of t){const n=this._circuit.findWireByLabel(r.name,r.path);n&&n.get("bits")==r.bits&&this.addWire(n)}}_handleChange(t,r,n){this._wires.get(_l(r)).waveform.push(t,n),this.trigger("change",r,n)}}Tn.extend(gme.prototype,ei.Events);class Lye extends ei.View{initialize(t){this._width=800,this._settings=h4(A9,{start:0,pixelsPerTick:5,gridStep:1}),this._settingsFor=new Map,this._live=!0,this._autoredraw=!1,this._idle=null,this._removeButtonMarkup=t.removeButtonMarkup||'<button type="button" name="remove">✖</button>',this._baseSelectorMarkup=t.baseSelectorMarkup||sT,this._bitTriggerMarkup=t.bitTriggerMarkup||'<select name="trigger" title="Trigger"><option value="none"></option><option value="rising">↑</option><option value="falling">↓</option><option value="risefall">↕</option><option value="undef">x</option></select>',this._busTriggerMarkup=t.busTriggerMarkup||'<input type="text" name="trigger" title="Trigger" placeholder="trigger" pattern="[0-9a-fx]*">',this.listenTo(this.model,"add",this._handleAdd),this.listenTo(this.model,"remove",this._handleRemove),this.listenTo(this.model._circuit,"display:add",()=>{this.render()}),this.listenTo(this.model._circuit,"postUpdateGates",f=>{this._live&&(this.start=f-this._width/this._settings.pixelsPerTick),this._settings.present=f,this._idle||(this._idle=requestIdleCallback(()=>{this._drawAll(),this._idle=null},{timeout:100}))}),this.render(),this._resizeObserver=new pme(()=>{this._canvasResize()}),this._resizeObserver.observe(this.el);function r(f){return It(f.target).closest("tr").attr("wireid")}const n=this.model._circuit._display3vl;this.$el.on("click","button[name=remove]",f=>{this.model.removeWire(r(f))}),this.$el.on("input","select[name=base]",f=>{const h=f.target.value,g=this._settingsFor.get(r(f));g.base=h;const m=It(f.target).closest("tr").find("input[name=trigger]");m.attr("pattern",n.pattern(h)),g.trigger.length&&m.val(n.show(h,g.trigger[0])),this.trigger("change")});const i=()=>!0,s=(f,h)=>{const g=this._settingsFor.get(f);if(g.triggerId&&(this.model._circuit.unmonitor(g.triggerId),g.triggerId=null),h.length>0){const y=this.model._wires.get(f).wire;g.triggerId=this.model._circuit.monitorWire(y,i,{triggerValues:h,stopOnTrigger:!0})}g.trigger=h};this.$el.on("input","select[name=trigger]",f=>{const h=r(f);switch(f.target.value){case"rising":s(h,[Je.one]);break;case"falling":s(h,[Je.zero]);break;case"risefall":s(h,[Je.one,Je.zero]);break;case"undef":s(h,[Je.x]);break;default:s(h,[])}}),this.$el.on("change","input[name=trigger]",f=>{const h=r(f),y=this._settingsFor.get(h).base,m=this.model._wires.get(h).waveform.bits;if(f.target.value=="")s(h,[]);else if(n.validate(y,f.target.value,m)){const _=n.read(y,f.target.value,m);s(h,[_]),f.target.value=n.show(y,_)}else s(h,[])}),this.listenTo(this,"change",()=>{this._autoredraw&&this._drawAll()});const o=new Image(0,0);o.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";let a,u;const c=f=>{const h=f.originalEvent.screenX-a;this.start=u-h/this._settings.pixelsPerTick};this.$el.on("dragstart","canvas",f=>{const h=f.originalEvent.dataTransfer;h.setData("text/plain","dragging"),h.setDragImage(o,0,0),a=f.originalEvent.screenX,u=this._settings.start,this.live=!1,It(document).on("dragover",c)}),this.$el.on("dragend","canvas",f=>{It(document).off("dragover",c)}),this.$el.on("wheel","canvas",f=>{f.preventDefault();const h=2**Math.sign(f.originalEvent.deltaY);this.start+=f.originalEvent.offsetX/this._settings.pixelsPerTick*(1-1/h),this.pixelsPerTick*=h})}render(){this.$el.html('<table class="monitor"></table>');for(const t of this.model._wires.values())this.$("table").append(this._handleAdd(t.wire));return this._canvasResize(),this}shutdown(){this.$el.off(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this.stopListening()}get gridStep(){return T9(this._settings)}get autoredraw(){return this._autoredraw}set autoredraw(t){this._autoredraw=t,t&&this._drawAll()}get width(){return this._width}get live(){return this._live}set live(t){this.live!=t&&(this._live=t,this.trigger("change:live",t),this.trigger("change"))}get start(){return this._settings.start}set start(t){this._settings.start!=t&&(this._settings.start=t,this.trigger("change:start",t),this.trigger("change"))}get pixelsPerTick(){return this._settings.pixelsPerTick}set pixelsPerTick(t){this._settings.pixelsPerTick!=t&&(this._settings.pixelsPerTick=t,this.trigger("change:pixelsPerTick",t),this.trigger("change"))}_canvasResize(){this._width=Math.max(this.$el.width()-300,100),this.$("canvas").attr("width",this._width),this.trigger("change:width",this._width),this.trigger("change")}_drawAll(){for(const t of this.model._wires.keys())this._draw(t)}_draw(t){const r=this.model._circuit._display3vl,n=this.$('tr[wireid="'+t+'"]').find("canvas"),i=this.model._wires.get(t).waveform;Kge(i,n[0].getContext("2d"),this._settingsFor.get(t),r)}_handleAdd(t){const r=_l(t);this._settingsFor.set(r,h4(this._settings,{base:"hex",trigger:[],triggerId:null})),this.$("table").append(this._createRow(t))}_handleRemove(t){const r=_l(t);this.$('tr[wireid="'+r+'"]').remove();const n=this._settingsFor.get(r);n.triggerId&&this.model._circuit.unmonitor(n.triggerId),this._settingsFor.delete(r)}_createRow(t){const r=_l(t),n=this._settingsFor.get(r),i=this.model._circuit._display3vl,s=t.get("bits")>1?this._baseSelectorMarkup instanceof Function?this._baseSelectorMarkup(i,t.get("bits"),n.base):this._baseSelectorMarkup:"",o=t.get("bits")>1?this._busTriggerMarkup:this._bitTriggerMarkup,a=It('<tr><td class="name"></td><td>'+s+"</td><td>"+o+"</td><td>"+this._removeButtonMarkup+'</td><td><canvas class="wavecanvas" height="30" draggable="true"></canvas></td></tr>');return a.attr("wireid",r),a.children("td").first().text(vme(t)),a}}let mme=0;class Nye extends ei.View{initialize(t){this._idnum=mme++,this._inputPanelMarkup=t.inputPanelMarkup||'<div data-iopanel="input"></div>',this._outputPanelMarkup=t.outputPanelMarkup||'<div data-iopanel="output"></div>',this._baseSelectorMarkup=t.baseSelectorMarkup||sT,this._labelMarkup=t.labelMarkup||"<label></label>",this._buttonMarkup=t.buttonMarkup||'<input type="checkbox">',this._lampMarkup=t.lampMarkup||'<input type="checkbox">',this._rowMarkup=t.rowMarkup||"<div></div>",this._colMarkup=t.colMarkup||"<div></div>",this._inputMarkup=t.inputMarkup||'<input type="text">',this.render(),this.listenTo(this.model._graph,"add",this._handleAdd),this.listenTo(this.model._graph,"remove",this._handleRemove),this.listenTo(this.model,"display:add",()=>{this.render()})}render(){this.$el.html('<form onsubmit="return false">'+this._inputPanelMarkup+this._outputPanelMarkup+"</form>");for(const t of this.model.getInputCells())this._handleAddInput(t);for(const t of this.model.getOutputCells())this._handleAddOutput(t)}shutdown(){this.$el.off(),this.stopListening()}_id(t){return"iopanel-"+t+"-"+this._idnum}_handleAdd(t){t.isInput?this._handleAddInput(t):t.isOutput&&this._handleAddOutput(t)}_addLabel(t,r){return It(this._labelMarkup).appendTo(t).find("label").addBack("label").text(r.get("net")||r.get("label"))}_addLabelFor(t,r){return this._addLabel(t,r).attr("for",this._id(r.id))}_handleAddInput(t){const r=this.model._display3vl,n=It(this._rowMarkup).appendTo(this.$('div[data-iopanel="input"]'));this._addLabelFor(n,t);const i=It(this._colMarkup).appendTo(n);if(t.get("mode")==1){const o=It(this._buttonMarkup).appendTo(i).find("input").addBack("input").attr("id",this._id(t.id)).on("click",u=>{t.setInput(Je.fromBool(u.target.checked))}),a=(u,c)=>{o.prop("checked",c.out.isHigh)};this.listenTo(t,"change:outputSignals",a),a(t,t.get("outputSignals"))}else{const s=It(this._inputMarkup).appendTo(i);let o="hex";It(this._baseSelectorMarkup(r,t.get("bits"),o)).appendTo(i);let a=r.size(o,t.get("bits"));const u=t.get("bits"),c=s.find("input").addBack("input").prop("size",a).prop("maxlength",a).prop("pattern",r.pattern(o)).on("change",h=>{r.validate(o,h.target.value,u)&&t.setInput(r.read(o,h.target.value,u))}),f=(h,g)=>{s.val(r.show(o,g.out))};this.listenTo(t,"change:outputSignals",f),f(t,t.get("outputSignals")),n.on("input","select[name=base]",h=>{o=h.target.value,a=r.size(o,t.get("bits")),c.prop("size",a).prop("maxlength",a).prop("pattern",r.pattern(o)),f(t,t.get("outputSignals"))})}}_handleAddOutput(t){const r=this.model._display3vl,n=It(this._rowMarkup).appendTo(this.$('div[data-iopanel="input"]'));this._addLabel(n,t);const i=It(this._colMarkup).appendTo(n);if(t.get("bits")==1){const o=It(this._lampMarkup).appendTo(i).find("input").addBack("input").prop("disabled",!0),a=(u,c)=>{const f=u.getOutput();o.prop("checked",f.isHigh),o.prop("indeterminate",!f.isDefined)};this.listenTo(t,"change:inputSignals",a),a(t,t.get("inputSignals"))}else{const s=It(this._inputMarkup).appendTo(i);let o="hex";It(this._baseSelectorMarkup(r,t.get("bits"),o)).appendTo(i);const a=r.size(o,t.get("bits")),u=s.find("input").addBack("input").prop("disabled",!0).prop("size",a),c=(f,h)=>{const g=f.getOutput();s.val(r.show(o,g))};this.listenTo(t,"change:inputSignals",c),c(t,t.get("inputSignals")),n.on("input","select[name=base]",f=>{o=f.target.value,u.prop("size",r.size(o,t.get("bits"))),c(t,t.get("inputSignals"))})}}_handleRemove(t){this.stopListening(t)}}bj.sorting.APPROX,new Rj;function yme(e){let t=new Array;return Object.keys(e).forEach(r=>{const[n,i,s]=r.split("_");e[r].forEach(([o,a])=>{const u={from:{id:`${i}_${s}`,port:n},name:`${r}-${a}`,to:{id:o,port:a.split("_")[0]}};t.push(u)})}),t}class M9 extends E9{constructor(t,r){const n=yme(t.connectors),i={devices:t.devices,connectors:n,subcircuits:t.subcircuits};super(i,r),console.log("CustomHeadlessCircuit Initialized")}}let _me=da.ones(1),bme=da.zeros(1),Ls=Ke(null),Jf=Pn(!1);const Il=()=>C(Jf);let Qh=Pn(0);const wme=()=>C(Qh);Object.defineProperty(M9.prototype,"running",{get(){return!1}});function xme(e){C(Jf)?(console.log("Simulation Stopped"),Ls.set(null),me(Qh,0),me(Jf,!1)):(console.log("Simulation Started"),me(Jf,!0),lt(Ls)===null&&(console.log(lt(Ti)),Ls.set(new M9(lt(Ti)))),k9(e))}function k9(e){if(C(Jf)===!1)return;const t=lt(Ls);if(t===null){console.log("impossible");return}t.updateGates(),me(Qh,t.tick,!0),setTimeout(()=>k9(e),e)}function Sme(e,t){let r=e==null?void 0:e.findWireByLabel(t);return r||(console.warn("Wire not created yet on headless circuit creation or update"),null)}function Eme(e){let t;return e.attributes.signal?(e.attributes.signal._avec[0]==e.attributes.signal._bvec[0]?t=e.attributes.signal._avec[0]:t=-1,t):-1}function Ame(){if(Ls==null){console.log("Circuit is null");return}const e=lt(Ls);if(e===null){console.log("impossible");return}e.updateGates(),me(Qh,e.tick,!0)}function Tme(){if(Ls==null){console.log("Circuit is null");return}const e=lt(Ls);if(e===null){console.log("impossible");return}e.updateGatesNext(),me(Qh,e.tick,!0)}function Pme(e){let t;if(Ls==null){console.log("Circuit is null");return}const r=lt(Ls);if(r===null){console.log("impossible");return}t=r.getLabelIndex().devices[e].attributes.outputSignals.out._avec[0],t==1?r.setInput(e,bme):r.setInput(e,_me)}function gT(e){return[...e].find(r=>/^(in\d+|in_|out_)/.test(r))||null}function Cme(e,t){const r=(u,c)=>u.startsWith(c),n=u=>r(u,"in"),i=u=>r(u,"out"),s=u=>({isInput:n(u),isOutput:i(u)}),{a1:o,a2:a}={a1:s(e),a2:s(t)};return o.isInput&&a.isOutput?"good_in_to_out":a.isInput&&o.isOutput?"good_out_to_in":o.isInput&&a.isInput?"bad_dual_input":"bad_dual_output"}function Rme(e,t){const[r,,]=e.split("_"),n=r.startsWith("out")&&e||t,i=r.startsWith("in")?e:t;return{fromOutputId:n,toInputId:i}}function Ime(e,t){const r=(s,o)=>s+"-"+o,{fromOutputId:n,toInputId:i}=Rme(e,t);return console.log("adding connection",n,i),Ti.addConnection(n,i),r(n,i)}function Ome(e,t){const r=gT(e);if(r===null)return"bad_invalid_drop";const n=[...e].find(o=>o==="linked"),i=Cme(t,r);if(i.startsWith("bad"))return i;const s=o=>o.startsWith("in");return n&&s(r)?"bad_input_already_linked":n&&!s(t)?"good_output_multi_wires":`${i}-${r}`}function p4(e,t,r=Rye){const n=Ome(t,e);if(n.startsWith("bad"))return n;const i=gT(t),s=Ime(e,i);return r(),s}var Mme=Qt("<div></div>");function kme(e,t){xr(t,!0);let r=ge(t,"io",3,"output");const n=u=>{function c(f){f.preventDefault(),f.stopPropagation(),p4(u,f.target.classList),document.removeEventListener("mousedown",c,!0)}return c};function i(u){const c=n(u);document.addEventListener("mousedown",c,!0)}function s(u){const c=gT(u.target.classList);c!==null&&c===t.anchorId?i(c):p4(t.anchorId,u.target.classList),document.removeEventListener("mouseup",s,!0)}xl(()=>{t.connecting&&document.addEventListener("mouseup",s,!0)});var o=Mme();let a;Ut(u=>a=Rn(o,1,`custom_anchor ${r()==="input"&&"input"||"output"} ${t.anchorId??""}`,"svelte-1dytm7c",a,u),[()=>({linked:t.linked,hovering:t.hovering,connecting:t.connecting})]),fr("mousedown",o,u=>{u.preventDefault(),t.linked&&r()==="input"&&!Il()&&Ti.removeConnection(t.anchorId)},!0),rt(e,o),Sr()}Object.assign(SVGElement.prototype,{setLampColors:Lme});function Lme([e,t]){const r=this.querySelector("circle"),n=this.querySelector("line");console.assert(r!==null&&n!==null,"likely tried to call custom svg method on the wrong element"),!(r===null||n===null)&&(r.setAttribute("stroke",t),r.setAttribute("fill",e),n.setAttribute("stroke",e))}function Nme(e,t){const r=["green","var(--lime-green)"],n=["red","var(--lime-red)"];let s=document.querySelector(`#N-${e} svg.LampSVG`);s!==null&&s.setLampColors(t===1&&r||n)}function qme(e,t,r){const n="."+e+"_"+t,i=document.querySelector(`${n}`);if(console.assert(i!==null,"could not find Anchor class when setting anchor colors while running"),i===null)return;const s=(h,g)=>h.classList.contains(g),o=h=>s(h,"on"),a=h=>s(h,"off"),u=h=>[a(h),o(h)],[c,f]=u(i);r===1&&c?(i.classList.remove("off"),i.classList.add("on")):r===0&&f?(i.classList.remove("on"),i.classList.add("off")):r===-1?(i.classList.remove("on"),i.classList.remove("off")):!c&&!f&&i.classList.add(r===1?"on":"off")}function ed(e){return console.assert(e!==null,"A wire was mounted with an empty edgeWrapper binding, maybe it hasn't loaded yet"),e==null?void 0:e.parentElement}function Dme(e){var r;const t=ed(e);return console.assert(t,"edge Wrapper is not null but edgeWrapper binding has no parentElement"),((r=e==null?void 0:e.parentElement)==null?void 0:r.childNodes)??null}const Fme=e=>{const t=e.indexOf("-")+1,r=e.indexOf("/");return e.substring(t,r)};function L9(e){const t=Dme(e);return t&&Array.from(t).find(n=>n.role==="presentation")||null}function N9(e,t){var i;const r=(i=L9(e))==null?void 0:i.getAttribute("id");if(!r)throw new Error("No ID found on the edgeNode");return[t+"-"+Fme(r),r]}const Bme="http://www.w3.org/2000/svg",td=[".handle1",".handle2",".end_point1",".end_point2","#controlPoint1","#controlPoint2"],Si=td.map(e=>e.substring(1));function Ol(e,t){const r=document.createElementNS(Bme,e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.setAttribute(n,t[n]);return r}function v4(e,t,r,n="control-line"){return isNaN(e==null?void 0:e.x)||isNaN(e==null?void 0:e.y)||isNaN(t==null?void 0:t.x)||isNaN(t==null?void 0:t.y)?(console.error("Invalid coordinates provided to createHandleLine:",e,t),Ol("line",{class:r+" "+n,x1:"0",y1:"0",x2:"0",y2:"0"})):Ol("line",{class:r+" "+n,x1:e.x.toString(),y1:e.y.toString(),x2:t.x.toString(),y2:t.y.toString()})}function g4(e,t,r=6,n="end-point"){return isNaN(e==null?void 0:e.x)||isNaN(e==null?void 0:e.y)||isNaN(r)?(console.error("Invalid parameters provided to createEndPointCircle:",e,r),Ol("circle",{class:t+" "+n,cx:"0",cy:"0",r:"6"})):Ol("circle",{class:t+" "+n,cx:e.x.toString(),cy:e.y.toString(),r:r.toString()})}function m4(e,t,r=10,n="control-point"){if(isNaN(e==null?void 0:e.x)||isNaN(e==null?void 0:e.y)||isNaN(r))return console.error("Invalid parameters provided to createControlPointCircle:",e,r),Ol("circle",{class:n,cx:"0",cy:"0",r:"6"});const i=Ol("circle",{class:n,id:t,cx:e.x.toString(),cy:e.y.toString(),r:r.toString()});return i.style.touchAction="none",i}function y4(e){if(!e||typeof e!="string"||e.trim()==="")return console.warn("parseCubicBezierD received invalid input:",e),null;let t="";const r=e.indexOf("M");t=e.substring(r+1).replace("C","");const n=t.split(" ").reduce((i,s)=>(s=s.trim(),s!==""&&(s.endsWith(",")&&(s=s.slice(0,-1)),i.push(s)),i),[]);try{const i={p0:{x:parseFloat(n[0]),y:parseFloat(n[1])},p1:{x:parseFloat(n[2]),y:parseFloat(n[3])},p2:{x:parseFloat(n[4]),y:parseFloat(n[5])},p3:{x:parseFloat(n[6]),y:parseFloat(n[7])}};return isNaN(i.p0.x)||isNaN(i.p0.y)||isNaN(i.p1.x)||isNaN(i.p1.y)||isNaN(i.p2.x)||isNaN(i.p2.y)||isNaN(i.p3.x)||isNaN(i.p3.y)?(console.error("Parsed coordinates resulted in NaN:",e,i),null):i}catch(i){return console.error("Error parsing numbers from path data:",e,i),null}}function zme(e){const t=ed(e);if(!t)throw new Error("Wire is not god");td.forEach(r=>{var i;const n=t.querySelector(r);n&&((i=n.style)==null?void 0:i.display)==="none"&&(n.style.display="")})}function Vme(e){const t=ed(e);if(!t)throw new Error("Wire is not god");td.forEach(r=>{const n=t.querySelector(r);n&&(n.style.display="none")})}function Gme(e){const t=ed(e);if(!t)throw new Error("Wire is not god");td.forEach(r=>{const n=t.querySelector(r);n&&(n.style.display=n.style.display==="none"?"":"none")})}function _4(e,t=""){var A,T,I,N,p,P,O,q,V,W;const r=t!==""&&y4(t)||null;let n=e.getAttribute("d")&&y4(e.getAttribute("d"));if(!n)return console.log("unable to parse path"),null;r&&(r.p0.x-n.p0.x,r.p0.y-n.p0.y,r.p1.x-n.p1.x,r.p1.y-n.p1.y);const i=ed(e);if(!i)throw new Error("Wire is not god");const s=new Map(td.map(G=>[G.substring(1),i.querySelector(G)||null]));let o=new Map([[Si[0],s.get(Si[0])||v4(n.p0,n.p1,"handle1")],[Si[1],s.get(Si[1])||v4(n.p3,n.p2,"handle2")],[Si[2],s.get(Si[2])||g4((r==null?void 0:r.p0)||n.p0,"end_point1")],[Si[3],s.get(Si[3])||g4((r==null?void 0:r.p3)||n.p3,"end_point2")],[Si[4],s.get(Si[4])||m4((r==null?void 0:r.p1)||n.p1,"controlPoint1")],[Si[5],s.get(Si[5])||m4((r==null?void 0:r.p2)||n.p2,"controlPoint2")]]);const a=o.get(Si[2]),u=o.get(Si[4]),c=o.get(Si[5]);if(a){const G=a.getAttribute("cx"),J=a.getAttribute("cy"),se=(r==null?void 0:r.p0.x.toString())||n.p0.x.toString(),K=(r==null?void 0:r.p0.y.toString())||n.p0.y.toString();a.setAttribute("cx",se),a.setAttribute("cy",K);const U=parseFloat(se)-parseFloat(G||""),j=parseFloat(K)-parseFloat(J||"");u==null||u.setAttribute("cx",String(parseFloat(u.getAttribute("cx")||"0")+U)),u==null||u.setAttribute("cy",String(parseFloat(u.getAttribute("cy")||"0")+j)),c==null||c.setAttribute("cx",String(parseFloat(c.getAttribute("cx")||"0")+U)),c==null||c.setAttribute("cy",String(parseFloat(c.getAttribute("cy")||"0")+j))}const f=o.get(Si[3]);if(f){const G=f.getAttribute("cx"),J=f.getAttribute("cy"),se=(r==null?void 0:r.p3.x.toString())||n.p3.x.toString(),K=(r==null?void 0:r.p3.y.toString())||n.p3.y.toString();f.setAttribute("cx",se),f.setAttribute("cy",K);const U=parseFloat(se)-parseFloat(G||""),j=parseFloat(K)-parseFloat(J||"");u==null||u.setAttribute("cx",String(parseFloat(u.getAttribute("cx")||"0")+U)),u==null||u.setAttribute("cy",String(parseFloat(u.getAttribute("cy")||"0")+j)),c==null||c.setAttribute("cx",String(parseFloat(c.getAttribute("cx")||"0")+U)),c==null||c.setAttribute("cy",String(parseFloat(c.getAttribute("cy")||"0")+j))}for(const G of Si)i.appendChild(o.get(G));let h=null,g={x:0,y:0},y={p0:{x:parseFloat((A=o.get("end_point1"))==null?void 0:A.getAttribute("cx")),y:parseFloat((T=o.get("end_point1"))==null?void 0:T.getAttribute("cy"))},p1:{x:parseFloat((I=o.get("controlPoint1"))==null?void 0:I.getAttribute("cx")),y:parseFloat((N=o.get("controlPoint1"))==null?void 0:N.getAttribute("cy"))},p2:{x:parseFloat((p=o.get("controlPoint2"))==null?void 0:p.getAttribute("cx")),y:parseFloat((P=o.get("controlPoint2"))==null?void 0:P.getAttribute("cy"))},p3:{x:parseFloat((O=o.get("end_point2"))==null?void 0:O.getAttribute("cx")),y:parseFloat((q=o.get("end_point2"))==null?void 0:q.getAttribute("cy"))}};function m(){var J,se,K,U,j,Q,de,ce;const G=`M ${y.p0.x} ${y.p0.y} C ${y.p1.x} ${y.p1.y}, ${y.p2.x} ${y.p2.y}, ${y.p3.x} ${y.p3.y}`;if(e.setAttribute("d",G),!o.get("handle1")||!o.get("handle2"))return console.warn("no handles on the edge you tried to update"),null;(J=o.get("handle1"))==null||J.setAttribute("x1",y.p0.x.toString()),(se=o.get("handle1"))==null||se.setAttribute("y1",y.p0.y.toString()),(K=o.get("handle1"))==null||K.setAttribute("x2",y.p1.x.toString()),(U=o.get("handle1"))==null||U.setAttribute("y2",y.p1.y.toString()),(j=o.get("handle2"))==null||j.setAttribute("x1",y.p3.x.toString()),(Q=o.get("handle2"))==null||Q.setAttribute("y1",y.p3.y.toString()),(de=o.get("handle2"))==null||de.setAttribute("x2",y.p2.x.toString()),(ce=o.get("handle2"))==null||ce.setAttribute("y2",y.p2.y.toString())}function _(G){var U,j,Q,de;if(!e)return console.warn("no svg found on get mouse position"),null;const J=e.getScreenCTM();if(!J)return{x:0,y:0};const se=G.clientX??((j=(U=G.touches)==null?void 0:U[0])==null?void 0:j.clientX),K=G.clientY??((de=(Q=G.touches)==null?void 0:Q[0])==null?void 0:de.clientY);return se===void 0||K===void 0?(console.warn("Could not get clientX/Y from event:",G),null):{x:(se-J.e)/J.a,y:(K-J.f)/J.d}}function x(G){if(G.type==="mousedown"&&G.preventDefault(),G.target.classList.contains("control-point")){h=G.target;const J=_(G);if(!J)return;g.x=J.x-parseFloat(h.getAttribute("cx")),g.y=J.y-parseFloat(h.getAttribute("cy")),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}),document.addEventListener("mouseup",E),document.addEventListener("touchend",E),document.addEventListener("mouseleave",E)}}function S(G){if(h){G.type==="touchmove"&&G.preventDefault();const J=_(G);if(!J)return;const se=J.x-g.x,K=J.y-g.y;h.setAttribute("cx",se.toString()),h.setAttribute("cy",K.toString()),h.id==="controlPoint1"?(y.p1.x=se,y.p1.y=K):h.id==="controlPoint2"?(y.p2.x=se,y.p2.y=K):console.warn("reached error"),m()}}function E(G){h&&(document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S),document.removeEventListener("mouseup",E),document.removeEventListener("touchend",E),document.removeEventListener("mouseleave",E),h=null)}(V=o.get("controlPoint1"))==null||V.addEventListener("mousedown",x),(W=o.get("controlPoint2"))==null||W.addEventListener("mousedown",x),m()}var $me=(e,t,r)=>{if(C(t)&&C(r))Gme(C(r));else{if(me(t,!0),!C(r))return;zme(C(r))}},Ume=(e,t,r)=>{e.preventDefault();const n=L9(C(t));!n||!C(t)||(me(r,!1),Vme(C(t)),C(t).setAttribute("d",n.getAttribute("d")),console.warn(n))},jme=In('<path id="bezierCurve" role="presentation"></path>');function Hme(e,t){xr(t,!0);let r=Pn(null);Pi(()=>{let[s,o]=N9(C(r),t.initAncId);t.monitorWire(s),C(r)&&C(n)&&_4(C(r))}),xl(()=>{if(t.currentPath){if(!C(r)||!C(n))return;_4(C(r),t.currentPath)}});let n=Pn(!1);var i=jme();i.__click=[$me,n,r],i.__contextmenu=[Ume,r,n],Su(i,s=>me(r,s),()=>C(r)),Ut(()=>{pt(i,"d",t.currentPath),Rn(i,0,$E(t.wireActive===-1?"":t.wireActive===1?"on":"off"),"svelte-15cv7c7")}),rt(e,i),Sr()}Tu(["click","contextmenu"]);var Wme=In("<path></path>");function Xme(e,t){xr(t,!0);let r=Pn(null);Pi(()=>{let[i,s]=N9(C(r),t.initAncId);t.monitorWire(i)});var n=Wme();Su(n,i=>me(r,i),()=>C(r)),Ut(()=>{Rn(n,0,$E(t.wireActive===-1?"hit-area":t.wireActive===1?"hit-area on":"hit-area off"),"svelte-1gi7ewc"),pt(n,"d",t.currentPath)}),rt(e,n),Sr()}var Yme=In('<svg><path fill="currentColor" d="m9.25 22l-.4-3.2q-.325-.125-.612-.3t-.563-.375L4.7 19.375l-2.75-4.75l2.575-1.95Q4.5 12.5 4.5 12.338v-.675q0-.163.025-.338L1.95 9.375l2.75-4.75l2.975 1.25q.275-.2.575-.375t.6-.3l.4-3.2h5.5l.4 3.2q.325.125.613.3t.562.375l2.975-1.25l2.75 4.75l-2.575 1.95q.025.175.025.338v.674q0 .163-.05.338l2.575 1.95l-2.75 4.75l-2.95-1.25q-.275.2-.575.375t-.6.3l-.4 3.2zM11 20h1.975l.35-2.65q.775-.2 1.438-.587t1.212-.938l2.475 1.025l.975-1.7l-2.15-1.625q.125-.35.175-.737T17.5 12t-.05-.787t-.175-.738l2.15-1.625l-.975-1.7l-2.475 1.05q-.55-.575-1.212-.962t-1.438-.588L13 4h-1.975l-.35 2.65q-.775.2-1.437.588t-1.213.937L5.55 7.15l-.975 1.7l2.15 1.6q-.125.375-.175.75t-.05.8q0 .4.05.775t.175.75l-2.15 1.625l.975 1.7l2.475-1.05q.55.575 1.213.963t1.437.587zm1.05-4.5q1.45 0 2.475-1.025T15.55 12t-1.025-2.475T12.05 8.5q-1.475 0-2.488 1.025T8.55 12t1.013 2.475T12.05 15.5M12 12"></path></svg>');function Kme(e,t){const r=No(t,["$$slots","$$events","$$legacy"]);var n=Yme();let i;Ut(()=>i=Lo(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),rt(e,n)}let Ap=Ke({wireType:"bezier",theme:"light"});var Zme=(e,t)=>me(t,!C(t)),Jme=(e,t)=>me(t,!1),Qme=Qt('<div class="modal svelte-1np6c7d"><h2 class="svelte-1np6c7d">Settings</h2> <div style="display:flex;justify-content:center;align-items:center;" class="svelte-1np6c7d"><p style="margin-right:auto" class="svelte-1np6c7d">Default Wires:</p> <select id="wire-type-select" class="svelte-1np6c7d"><option>Bezier</option><option>Step</option><option>Straight</option></select></div> <div class="svelte-1np6c7d"><p class="svelte-1np6c7d">Theme:</p> <select id="theme-select" class="svelte-1np6c7d"><option>Light</option><option>Dark</option></select></div> <button class="svelte-1np6c7d">Close</button></div>'),e0e=Qt('<button class="launch-button svelte-1np6c7d"><!></button> <!>',1);function t0e(e,t){xr(t,!0);const[r,n]=$n(),i=()=>He(Ap,"$settingsStore",r);let s=Pn(!1);var o=e0e(),a=$t(o);a.__click=[Zme,s];var u=qt(a);Kme(u,{height:30,width:30});var c=gt(a,2);{var f=h=>{var g=Qme(),y=gt(qt(g),2),m=gt(qt(y),2),_=qt(m);_.value=(_.__value="bezier")==null?"":"bezier";var x=gt(_);x.value=(x.__value="step")==null?"":"step";var S=gt(x);S.value=(S.__value="straight")==null?"":"straight";var E=gt(y,2),A=gt(qt(E),2),T=qt(A);T.value=(T.__value="light")==null?"":"light";var I=gt(T);I.value=(I.__value="dark")==null?"":"dark";var N=gt(E,2);N.__click=[Jme,s],wC(m,()=>i().wireType,p=>nc(Ap,dn(i).wireType=p,dn(i))),wC(A,()=>i().theme,p=>nc(Ap,dn(i).theme=p,dn(i))),rt(h,g)};or(c,h=>{C(s)&&h(f)})}rt(e,o),Sr(),n()}Tu(["click"]);function r0e(e,t){xr(t,!0);const[r,n]=$n(),i=()=>He(Ap,"$settingsStore",r),s=()=>He(Ls,"$CircuitEngine",r);let o=Pn(-1),a=Pn(""),u=ge(t,"wireType",19,()=>i().wireType);function c(y,m=_=>me(a,_,!0)){if(!y)return null;m(y);const _=y.includes("cursor");if(_&&console.log("Connecting wire mounted"),_)return null;(s()!==null&&f(s())||(()=>null))()}function f(y,m=_=>me(o,_,!0)){const _=Sme(y,C(a));return _===null?void 0:()=>y.monitorWire(_,S=>{var p;const E=Eme(_);m(E);const{id:A,port:T,magnet:I}=(p=_.attributes)==null?void 0:p.target;if(!A||!T)return;if(qme(T,A,E),!(A&&y.getLabelIndex().outputs[A]))return null;Nme(A,E)})}Ls.subscribe(y=>{if(y===null){me(o,-1);return}(y!==null&&f(y)||(()=>null))()});const h=Mi(()=>u()==="straight"),g=Mi(()=>u()==="step");eE(e,{get straight(){return C(h)},get step(){return C(g)},children:BE,$$slots:{default:(y,m)=>{const _=Mi(()=>m.path);Mi(()=>m.destroy),Mi(()=>m.hovering);var x=gr(),S=$t(x);{var E=T=>{Hme(T,{get initAncId(){return t.initAncId},get currentPath(){return C(_)},get wireActive(){return C(o)},monitorWire:c})},A=(T,I)=>{{var N=p=>{Xme(p,{get initAncId(){return t.initAncId},get currentPath(){return C(_)},get wireActive(){return C(o)},monitorWire:c})};or(T,p=>{(u()==="step"||u()=="straight")&&p(N)},I)}};or(S,T=>{u()==="bezier"?T(E):T(A,!1)})}rt(y,x)}}}),Sr(),n()}var n0e=Qt("<div><!></div>");function ac(e,t){xr(t,!0);let r=ge(t,"location",19,()=>["left","top"]),n=ge(t,"offset",19,()=>[]),i="";r()[0]=="left"?r()[1]=="top"?i="in1":r()[1]=="bot"?i="in2":r()[1]=="mid"&&(i="in"):r()[0]=="right"&&(i="out");const s=`${i}_${t.id}`,o=Rr("rotation");function a(){if(r()[0]==="left"){if(o()===0)return"west";if(o()===90)return"north";if(o()===180)return"east";if(o()===270)return"south"}else{if(o()===0)return"east";if(o()===90)return"south";if(o()===180)return"west";if(o()===270)return"north"}}var u=n0e(),c=qt(u);const f=Mi(a),h=Mi(()=>t.io==="input"&&!0||!1),g=Mi(()=>t.io==="output"&&!0||!1),y=Mi(Il);Bf(c,{id:s,key:s,get direction(){return C(f)},get input(){return C(h)},get output(){return C(g)},get locked(){return C(y)},get connections(){return t.connections},children:BE,$$slots:{default:(m,_)=>{const x=Mi(()=>_.linked),S=Mi(()=>_.hovering),E=Mi(()=>_.connecting);kme(m,{get io(){return t.io},get connecting(){return C(E)},get linked(){return C(x)},anchorId:s,get hovering(){return C(S)}})},edge:(m,_)=>{r0e(m,{initAncId:s,slot:"edge"})}}}),Ut(()=>kr(u,`position:absolute;left: ${n()[0]}%; top: ${n()[1]}%;`)),rt(e,u),Sr()}const i0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='500px'%20height='500px'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23000000'%20d='M105%20105v302h151c148%200%20148-302%200-302H105zm-89%2046v18h71v-18H16zm368.8%2096c.2%206%20.2%2012%200%2018H496v-18H384.8zM16%20343v18h71v-18H16z'/%3e%3c/svg%3e",s0e="data:image/svg+xml,%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NAND%20Gate%20Body%20--%3e%3cpath%20fill='%23000000'%20d='M105%20105v302h151c148%200%20148-302%200-302H105z'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='151'%20width='71'%20height='18'%20fill='%23000000'/%3e%3crect%20x='16'%20y='343'%20width='71'%20height='18'%20fill='%23000000'/%3e%3c!--%20Output%20Circle%20(Inverter)%20--%3e%3ccircle%20cx='384'%20cy='256'%20r='25'%20fill='transparent'%20stroke='black'%20stroke-width='18'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='400'%20y='248'%20width='112'%20height='18'%20fill='%23000000'/%3e%3c/svg%3e",o0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20OR%20Gate%20Body%20with%20Smooth%20Curves%20and%20Proportions%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='12'%20y='160'%20width='100'%20height='18'%20fill='black'/%3e%3crect%20x='12'%20y='340'%20width='100'%20height='18'%20fill='black'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='420'%20y='248'%20width='100'%20height='18'%20fill='black'/%3e%3c/svg%3e",a0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NOR%20Gate%20Body%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='160'%20width='100'%20height='18'%20fill='black'/%3e%3crect%20x='16'%20y='340'%20width='100'%20height='18'%20fill='black'/%3e%3c!--%20Inverter%20(NOT%20Circle)%20--%3e%3ccircle%20cx='440'%20cy='256'%20r='25'%20fill='transparent'%20stroke='black'%20stroke-width='18'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='460'%20y='248'%20width='120'%20height='18'%20fill='black'/%3e%3c/svg%3e",u0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Additional%20Back%20Curve%20for%20XOR%20--%3e%3cpath%20d='%20M%2080,120%20Q%20140,180%20140,256%20Q%20140,332%2080,392'%20fill='none'%20stroke='black'%20stroke-width='14'/%3e%3c!--%20XOR%20Gate%20Body%20(Same%20as%20OR%20Gate)%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='160'%20width='130'%20height='18'%20fill='black'/%3e%3crect%20x='16'%20y='340'%20width='130'%20height='18'%20fill='black'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='420'%20y='248'%20width='120'%20height='18'%20fill='black'/%3e%3c/svg%3e",c0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Adjusted%20Back%20Curve%20to%20Intersect%20Input%20Lines%20--%3e%3cpath%20d='%20M%2080,120%20Q%20140,180%20140,256%20Q%20140,332%2080,392'%20fill='none'%20stroke='black'%20stroke-width='14'/%3e%3c!--%20XNOR%20Gate%20Body%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='160'%20width='130'%20height='18'%20fill='black'/%3e%3crect%20x='16'%20y='340'%20width='130'%20height='18'%20fill='black'/%3e%3c!--%20Inverter%20(NOT%20Circle)%20--%3e%3ccircle%20cx='440'%20cy='256'%20r='25'%20fill='transparent'%20stroke='black'%20stroke-width='12'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='465'%20y='248'%20width='80'%20height='18'%20fill='black'/%3e%3c/svg%3e";var l0e=Qt("<img> <!> <!> <!>",1);function f0e(e,t){xr(t,!0);const r={in1:[-7.5,68.5],in2:[-7.5,7.5],out:[100,37.58]},n={And:i0e,Nand:s0e,Or:o0e,Nor:a0e,Xor:u0e,Xnor:c0e};let i=ge(t,"width",3,80),s=ge(t,"height",3,50),o=ge(t,"gateType",3,"And");const a=n[o()];var u=l0e(),c=$t(u);pt(c,"src",a);var f=gt(c,2);ac(f,{location:["left","bot"],get id(){return t.nodeId},io:"input",get offset(){return r.in2}});var h=gt(f,2);ac(h,{location:["left","top"],get id(){return t.nodeId},io:"input",get offset(){return r.in1}});var g=gt(h,2);ac(g,{location:["right","mid"],get id(){return t.nodeId},io:"output",get offset(){return r.out},get connections(){return lt(Ti).connectors["out_"+t.nodeId]}}),Ut(()=>{pt(c,"alt",`${o()} logic gate`),pt(c,"width",i()),pt(c,"height",s())}),rt(e,u),Sr()}const h0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NOT%20Gate%20Body%20(Triangle)%20--%3e%3cpath%20d='%20M%20120,100%20L%20420,256%20L%20120,412%20Z'%20fill='black'/%3e%3c!--%20Input%20Line%20--%3e%3crect%20x='-20'%20y='248'%20width='115'%20height='18'%20fill='black'/%3e%3c!--%20Inverter%20(NOT%20Circle)%20--%3e%3ccircle%20cx='440'%20cy='256'%20r='30'%20fill='transparent'%20stroke='black'%20stroke-width='18'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='470'%20y='248'%20width='150'%20height='18'%20fill='black'/%3e%3c/svg%3e",d0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NOT%20Gate%20Body%20(Triangle)%20--%3e%3cpath%20d='%20M%20120,100%20L%20420,256%20L%20120,412%20Z'%20fill='black'/%3e%3c!--%20Input%20Line%20--%3e%3crect%20x='-20'%20y='248'%20width='115'%20height='18'%20fill='black'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='400'%20y='248'%20width='150'%20height='18'%20fill='black'/%3e%3c/svg%3e";var p0e=Qt("<img> <!> <!>",1);function v0e(e,t){xr(t,!0);const r={in:[-15,38.7],out:[100,38]},n={Not:h0e,Repeater:d0e};let i=ge(t,"width",3,80),s=ge(t,"height",3,50),o=ge(t,"gateType",3,"Not");var a=p0e(),u=$t(a),c=gt(u,2);ac(c,{location:["left","mid"],get id(){return t.nodeId},io:"input",get offset(){return r.in}});var f=gt(c,2);ac(f,{location:["right","mid"],get id(){return t.nodeId},io:"output",get offset(){return r.out},get connections(){return lt(Ti).connectors["out_"+t.nodeId]}}),Ut(()=>{pt(u,"src",n[o()]),pt(u,"alt",`${o()} logic gate`),pt(u,"width",i()),pt(u,"height",s())}),rt(e,a),Sr()}var g0e=Qt('<div class="button_fix svelte-9i9r2v"><svg width="85" height="65" viewBox="-12 0 95 100" xmlns="http://www.w3.org/2000/svg"><line x1="-50" x2="5" y1="45" y2="45" stroke-width="8"></line><circle cx="50" cy="50" r="45" stroke-width="7"></circle></svg></div> <!>',1);function m0e(e,t){ge(t,"width",3,80),ge(t,"height",3,50);const r=[-5,35.43];var n=g0e(),i=$t(n),s=qt(i);Rn(s,0,"LampSVG");var o=qt(s);pt(o,"stroke","lightgray");var a=gt(o);pt(a,"fill","lightgray"),pt(a,"stroke","gray");var u=gt(i,2);ac(u,{offset:r,location:["left","mid"],get id(){return t.nodeId},io:"input"}),rt(e,n)}function q9(e,t){e.preventDefault();let r=!1;const n=e.clientX,i=e.clientY,s=5,o=c=>{const f=c.clientX-n,h=c.clientY-i;Math.sqrt(f**2+h**2)>s&&(r=!0,u())},a=()=>{r||t(e),u()};function u(){window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",a)}window.addEventListener("mousemove",o),window.addEventListener("mouseup",a)}function Nf(e){const t=new MouseEvent("mouseenter",{bubbles:!0,cancelable:!1}),r=new MouseEvent("mouseleave",{bubbles:!0,cancelable:!1}),n=document.querySelector(`.${e}`);if(!n)return null;n.dispatchEvent(t),n.dispatchEvent(r)}var y0e=In('<svg width="75" height="60" viewBox="-2 2 140 95" xmlns="http://www.w3.org/2000/svg"><rect x="0" y="0" width="100" height="100" fill="black" stroke-width="2"></rect><line x1="100" x2="190" y1="50" y2="50" stroke-width="8"></line><circle role="presentation" cx="50" cy="50" r="30" aria-label="input button node toggle" stroke-width="7"></circle></svg><!>',1);function _0e(e,t){xr(t,!0),ge(t,"width",3,80),ge(t,"height",3,50);let r=Pn(!1),n=Mi(()=>({color:C(r)?"green":"red",outlineColor:C(r)?"var(--lime-green)":"var(--lime-red)"}));const i=[95,40.4];function s(){Il()&&(me(r,!C(r)),Pme(t.nodeId))}Ls.subscribe(g=>{if(g===null){me(r,!1);return}});var o=y0e(),a=$t(o),u=qt(a),c=gt(u),f=gt(c),h=gt(a);ac(h,{offset:i,location:["right","mid"],get id(){return t.nodeId},io:"output",get connections(){return lt(Ti).connectors["out_"+t.nodeId]}}),Ut(()=>{pt(u,"stroke",C(n).outlineColor),pt(c,"stroke",C(n).outlineColor),pt(f,"fill",C(n).color),pt(f,"stroke",C(n).outlineColor)}),fr("mousedown",f,g=>q9(g,s),!0),rt(e,o),Sr()}const D9={"Logic Gates":{svg:void 0,groupElements:[{name:"And",nodeType:"And",icon:EQ},{name:"Nand",nodeType:"Nand",icon:IQ},{name:"Or",nodeType:"Or",icon:TQ},{name:"Nor",nodeType:"Nor",icon:PQ},{name:"Xor",nodeType:"Xor",icon:CQ},{name:"Xnor",nodeType:"Xnor",icon:RQ},{name:"Not",nodeType:"Not",icon:OQ},{name:"Repeater",nodeType:"Repeater",icon:AQ}]},"Input/Output":{svg:void 0,groupElements:[{name:"Lamp",nodeType:"Lamp",icon:MQ},{name:"Button",nodeType:"Button",icon:kQ}]},GhostElement:{svg:void 0,groupElements:[]}};function b0e(e){switch(e){case"And":case"Nor":case"Xor":case"Xnor":case"Or":case"Nand":return f0e;case"Repeater":case"Not":return v0e;case"Button":return _0e;case"Lamp":return m0e;default:return null}}var w0e=In('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21a9 9 0 0 1-.5-17.986V3c-.354.966-.5 1.911-.5 3a9 9 0 0 0 9 9c.239 0 .254.018.488 0A9 9 0 0 1 12 21"></path></svg>');function x0e(e,t){const r=No(t,["$$slots","$$events","$$legacy"]);var n=w0e();let i;Ut(()=>i=Lo(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),rt(e,n)}var S0e=In('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5V3m0 18v-2M7.05 7.05L5.636 5.636m12.728 12.728L16.95 16.95M5 12H3m18 0h-2M7.05 16.95l-1.414 1.414M18.364 5.636L16.95 7.05M16 12a4 4 0 1 1-8 0a4 4 0 0 1 8 0"></path></svg>');function E0e(e,t){const r=No(t,["$$slots","$$events","$$legacy"]);var n=S0e();let i;Ut(()=>i=Lo(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),rt(e,n)}var A0e=Qt('<div class="side_menu_header svelte-h8e8bu"><h2 class="svelte-h8e8bu"><span class="l_cap svelte-h8e8bu">L</span><span class="o_cap svelte-h8e8bu">o</span><span class="g_cap svelte-h8e8bu">g</span><span class="i_cap svelte-h8e8bu">i</span><span class="c_cap svelte-h8e8bu">c</span><span class="a_cap svelte-h8e8bu" style="margin-left:4px;">A</span><span class="p_cap svelte-h8e8bu">P</span></h2> <!></div>');function T0e(e,t){xr(t,!1);let r=qe(!1);Pi(()=>{me(r,localStorage.getItem("theme")==="dark"),i()});function n(){me(r,!C(r)),localStorage.setItem("theme",C(r)?"dark":"light"),i()}function i(){C(r)?document.body.className="dark":document.body.className="light"}Dn();var s=A0e(),o=gt(qt(s),2);{var a=c=>{E0e(c,{onclick:n,style:"color:var(--neon-purple); width:28px;height:28px;margin-top: 5px;margin-right: -8px;"})},u=c=>{x0e(c,{onclick:n,style:"color:grey !important; width:28px;height:28px;margin-top: 5px;margin-right: -8px;"})};or(o,c=>{C(r)?c(a):c(u,!1)})}rt(e,s),Sr()}var P0e=(e,t,r)=>t(C(r),e),C0e=Qt('<li class="svelte-n7sl0f"><button class="gate-button" style="background:none; border:none; padding:0; cursor:pointer;"><img class="svelte-n7sl0f"></button> </li>'),R0e=Qt('<ol class="side_menu_group svelte-n7sl0f"></ol>');function I0e(e,t){xr(t,!0);let r=ge(t,"zIndex",3,0),n=ge(t,"subMenuHeader",3,"Logic Gates");const i=D9[n()].groupElements;let s=null,o=null;function a(m,_,x){o=document.createElement("div"),o.className="drag-ghost",o.style.position="fixed",o.style.pointerEvents="none",o.style.left=_+"px",o.style.top=x+"px",o.style.zIndex="200",o.style.transform="scale(1.3)";const S=document.createElement("img");S.src=m.icon,S.alt=m.nodeType+"drag gate ghost",S.style.width="82px",S.style.opacity="0.7",o.appendChild(S),document.body.appendChild(o)}function u(m,_){o&&(o.style.left=m+"px",o.style.top=_+"px")}function c(){o&&(o.remove(),o=null)}function f(m,_){_.preventDefault(),s=m,a(m,_.pageX,_.pageY)}function h(m){o&&u(m.pageX,m.pageY)}function g(m){if(m.stopPropagation(),s&&o){const _=document.elementFromPoint(m.clientX,m.clientY);u(m.pageX,m.pageY);const x=document.querySelector(".svelvet-wrapper");if(x==null?void 0:x.contains(_)){const E={...m,gateType:s.nodeType};t.createCanvasDevice(E)}s=null,c(),m.stopPropagation()}}Pi(()=>{document.addEventListener("mousemove",h),document.addEventListener("click",g)}),Eh(()=>{document.removeEventListener("mousemove",h),document.removeEventListener("click",g),c()});var y=R0e();ds(y,21,()=>i,mu,(m,_)=>{var x=C0e();x.__mousedown=[P0e,f,_];var S=qt(x),E=qt(S),A=gt(S);Ut(()=>{pt(E,"src",C(_).icon),pt(E,"alt",`${C(_).name??""} logic gate, hand-drawn`),Pu(A,` ${C(_).name??""}`)}),rt(m,x)}),Ut(()=>{kr(y,`z-index:${r()};`),pt(y,"id",`section_${r()??""}`)}),rt(e,y),Sr()}Tu(["mousedown"]);const O0e=""+new URL("line_26-7GG_ennq.svg",import.meta.url).href,M0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20preserveAspectRatio='none'%20id='a'%20data-name='AW'%20xmlns='http://www.w3.org/2000/svg'%20width='500'%20height='27.081'%20viewBox='0%200%20500%2027.081'%3e%3cpath%20id='b'%20data-name='16'%20d='M500,25.653c-.271,.462-.732,.434-1.18,.548-.418,.107-.762,.508-1.277,.879h-22.196c-.256-.224-.609-.535-1.012-.889h-7.665c-.362-.338-.71-.663-1.069-.998h-7.711c-.363-.336-.711-.66-1.076-.998h-8.658c-.498-.437-.823-.963-1.6-.956-4.344,.039-8.688,.019-12.911,.019-.349-.349-.577-.577-.845-.845-1.218-.293-2.5-.073-3.769-.115-1.29-.043-2.584-.01-3.876-.01h-7.267c-1.292,0-2.585,.036-3.876-.01-1.267-.045-2.549,.192-3.758-.121-.274-.274-.502-.502-.784-.784h-28.005c-.379-.333-.732-.644-1.134-.997h-45.514c-.305,.285-.654,.61-1.011,.943h-53.262l-1.063-.992h-118.18c-.251-.251-.479-.479-.708-.708-.129-.08-.251-.214-.387-.228-.319-.034-.645-.011-.968-.011-4.36,0-8.721,.001-13.081-.004-.147,0-.295-.064-.448-.099-.438-.438-.811-.889-1.573-.884-5.006,.036-10.013,.024-15.019,.012-.625-.001-1.267,.129-1.846-.126-.255-.255-.483-.483-.716-.716-.939-.229-1.899-.113-2.85-.114-7.59-.011-15.181-.018-22.771,.012-.774,.003-1.106-.509-1.604-.953h-17.45c-.292,.269-.641,.59-1.009,.929H34.387c-.343-.32-.692-.645-1.055-.984h-11.548c-.393-.35-.746-.663-1.122-.998h-5.724c-.278-.278-.469-.587-.744-.716-.402-.188-.938-.144-1.286-.386-.522-.363-.93-.889-1.387-1.346l-.345-.345c-.923,.165-1.464-.42-1.997-1.03h-.968c-2.05-2.059-4.101-4.118-6.23-6.256-.022-.369-.058-.835-.075-1.301-.034-.93-.106-1.035-1.056-1.154-.334-.042-.612-.094-.829-.465,.284-.322,.579-.658,.876-.995C.607,1.136,.304,.793,0,.451Q.875,0,5.143,0c.244,.192,.491,.38,.728,.579,.123,.103,.23,.227,.369,.366h6.736c.362,.338,.71,.663,1.068,.997h14.493c.364,.337,.713,.66,1.009,.934h16.478c.498-.438,.825-.956,1.6-.955,17.603,.023,35.206,.017,52.809,.022,.307,0,.614,.073,.928,.112,.431,.452,.82,.889,1.579,.871,2.26-.053,4.521-.019,6.782-.019,5.006,0,10.013,.017,15.019-.019,.759-.005,1.142,.431,1.63,.932h12.505c.38,.333,.734,.644,1.137,.998h108.444c.359,.333,.708,.657,1.071,.993h43.567c.357,.333,.705,.658,1.015,.947h3.881c.253-.253,.481-.481,.71-.71,.129-.078,.258-.226,.387-.226,27.764-.01,55.528-.01,83.195-.01,.541,.535,.911,.99,1.674,.987,8.075-.029,16.15-.023,24.224-.01,.785,.001,1.589-.156,2.34,.129,.246,.246,.475,.475,.703,.703,.144,.043,.287,.123,.431,.123,2.745,.007,5.491,.006,8.236,.006s5.491,.03,8.236-.019c.774-.014,1.11,.503,1.606,.952h9.622c.368,.337,.717,.658,1.088,.998h7.707c.356,.333,.705,.659,1.067,.998h7.707c.25,.25,.478,.478,.706,.706,.128,.08,.251,.216,.386,.23,.319,.034,.645,.011,.968,.011,8.236,0,16.473,0,24.709,.004,.148,0,.296,.062,.444,.095,1.256,1.256,2.512,2.512,3.768,3.768,1.374-.003,1.396,.046,1.46,1.249,.017,.322-.015,.647,.007,.969,.029,.428,.425,.7,1.034,.699,.323,0,.646-.005,.969,.002,.155,.003,.309,.03,.466,.047,.491,.678,1.129,1.073,1.992,1.025,2.058,2.058,4.114,4.114,6.166,6.166Z'/%3e%3c/svg%3e",k0e=""+new URL("line_23-6xYtaVUR.svg",import.meta.url).href,L0e=""+new URL("line_24-DEoQpS3B.svg",import.meta.url).href,N0e=""+new URL("line_25-BJNXJfeQ.svg",import.meta.url).href,q0e=""+new URL("line_27-Bg8z01MR.svg",import.meta.url).href,D0e=""+new URL("line_17-DTelLRhX.svg",import.meta.url).href,F0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20preserveAspectRatio='none'%20id='a'%20data-name='AW'%20xmlns='http://www.w3.org/2000/svg'%20width='500'%20height='14.048'%20viewBox='0%200%20500%2014.048'%3e%3cpath%20id='b'%20data-name='20'%20d='M500,11.891c-.491,.804-1.263,1.347-1.881,2.033-.123,.035-.245,.101-.368,.102-1.375,.007-2.751-.032-4.124,.021-.663,.025-.942-.435-1.365-.812h-18.918c-.311-.287-.609-.561-.922-.849h-30.487c-.303-.283-.6-.559-.873-.813h-47.818c-.333,.297-.633,.564-.861,.768h-18.167c-.235-.235-.429-.429-.624-.624-.253-.054-.505-.152-.759-.153-3.42-.01-6.84-.007-10.127-.007-.325,.325-.519,.519-.762,.762-.347,.019-.744,.06-1.143,.06-29.56,.003-59.12,.003-88.68,.003-.138,0-.278-.019-.412,.003-.653,.107-.957-.392-1.398-.828H56.332c-1.237,0-2.476,.022-3.711-.023-.187-.007-.448-.298-.519-.51-.077-.23-.07-.609,.073-.769,.635-.71,1.333-1.365,1.994-2.027h19.006c.43-.625,.988-.935,1.743-.796,.63,.116,1.004-.273,1.355-.691,.804-.252,1.622-.127,2.428-.128,12.374-.009,24.748-.006,37.122-.01,.395,0,.812,.1,1.171-.154,.096-.068,.233-.211,.213-.283-.032-.115-.172-.278-.275-.284-.811-.052-1.625-.097-2.437-.097-13.199-.005-26.398-.004-39.65-.004-.271-.238-.572-.503-.913-.804h-30.452c-.307-.286-.604-.563-.908-.847H19.505c-.307-.285-.603-.562-.912-.849H.37c-.111-.362-.222-.727-.37-1.211C.741,1.461,1.481,.854,2.46,.051H12.864c.218,.192,.519,.457,.861,.758h59.327c.306,.285,.603,.562,.907,.847,4.11,0,8.235,.002,12.359-.012,.098,0,.233-.166,.283-.283,.086-.198-.045-.465-.356-.512-.533-.081-1.085-.036-1.626-.08-.105-.008-.289-.255-.279-.268,.14-.178,.302-.467,.469-.473,1.085-.042,2.172-.022,3.169-.022,.462,.484,.793,.853,1.439,.841,2.336-.041,4.675,.009,7.011-.033,.647-.011,.972,.369,1.433,.841h56.795c.412,0,.83,.041,1.236-.009,.666-.082,.935,.444,1.36,.81h54.397c.308,.286,.605,.561,.914,.847h91.543c.299,.28,.596,.557,.902,.844h44.485c.333,.297,.632,.564,.951,.848h33.767c.665,1.068,1.616,.826,2.549,.656,.195-.194,.389-.389,.583-.583,.122-.037,.244-.108,.366-.108,8.387-.005,16.774-.005,25.229-.005,.263,.225,.566,.483,.928,.793h1.55c.314,.287,.612,.56,.911,.833,.286-.261,.583-.531,.879-.8,4.262,0,8.524,.004,12.786-.008,.302,0,.606,.039,.661,.339,.03,.164-.205,.435-.386,.568-.413,.302-.318,.719-.309,1.111,.002,.104,.138,.258,.245,.297,.241,.087,.5,.146,.756,.164,.943,.065,1.898-.122,2.825,.132,.201,.201,.395,.395,.6,.6,.652,.201,1.335,.091,2.007,.093,5.774,.01,11.549,.017,17.323-.01,.658-.003,.944,.428,1.367,.81h22.215c.312,.286,.611,.559,.926,.849h18.934c.305,.283,.602,.559,.891,.828,.648,.145,1.383-.29,1.95,.339Zm-93.618,.51c-3.829-.031-7.658-.023-11.486-.009-.098,0-.227,.159-.287,.272-.102,.192,.024,.513,.324,.52,1.914,.042,3.828,.021,5.743,.021s3.829,.004,5.743-.012c.099,0,.227-.159,.287-.272,.101-.192-.026-.518-.324-.521Zm14.022,.825c-2.454-.036-4.91-.024-7.364-.008-.098,0-.227,.161-.284,.276-.095,.192,.032,.503,.332,.516,1.226,.051,2.454,.021,3.682,.021s2.455,.006,3.682-.012c.098-.002,.227-.161,.284-.276,.095-.192-.035-.512-.331-.516Z'/%3e%3c/svg%3e",B0e=""+new URL("line_21-BR_oFIB4.svg",import.meta.url).href,z0e=""+new URL("line_29-C9eu5sMJ.svg",import.meta.url).href;var V0e=Qt('<li class="svelte-1m2v4mn"><div class="menu_group_section svelte-1m2v4mn"><button class="svelte-1m2v4mn"><span style="margin-left:5%;"> </span></button> <img class="sketch_bar svelte-1m2v4mn"></div> <!></li>'),G0e=Qt('<nav class="side_menu noselect svelte-1m2v4mn" aria-label="Side Menu"><div class="side_menu_header svelte-1m2v4mn"><!> <img class="wiggle_bar svelte-1m2v4mn" alt="sketched line bottom border for main app bar"></div> <ul class="svelte-1m2v4mn"></ul></nav>');function $0e(e,t){xr(t,!0);const r={line_15:M0e,line_23:k0e,line_24:L0e,line_25:N0e,line_27:q0e,line_17:D0e,line_19:F0e,line_21:B0e,line_29:z0e},n=D9,i=Object.keys(n),s=[15,23,24,25,27,17,19,21,29];function o(x){return Math.floor(Math.random()*x)+1}let a=localStorage.getItem("randomLineSelectionStore");function u(x){return r[`line_${x}`]}if(a===null){const x=i.map(S=>{const E=o(s.length-1),A=s[E],T=u(A);return n[S].svg=T,s.splice(E,1),A});localStorage.setItem("randomLineSelectionStore",JSON.stringify(x))}else JSON.parse(a).forEach((S,E)=>{const A=i[E],T=u(parseInt(S,10));A!==void 0&&(n[A].svg=T)});let c=xo(Array(i.length).fill(!0));function f(x,S){return x[S]?"transition: max-height .4s ease-in; max-height:405px":"transition: max-height .4s ease-out; max-height:75px"}var h=G0e(),g=qt(h),y=qt(g);T0e(y,{});var m=gt(y,2);pt(m,"src",O0e);var _=gt(g,2);ds(_,21,()=>i,mu,(x,S,E)=>{var A=V0e();pt(A,"id",`menu_group_${E??""}`);var T=qt(A),I=qt(T);I.__mousedown=()=>{c[E]=!c[E]};var N=qt(I),p=qt(N),P=gt(I,2),O=gt(T,2);I0e(O,{get createCanvasDevice(){return t.createCanvasDevice},zIndex:E,get subMenuHeader(){return C(S)}}),Ut(q=>{kr(A,q),Pu(p,C(S)),pt(P,"src",n[C(S)].svg),pt(P,"alt",`sketched line bottom border for main app bar section ${C(S)??""}`)},[()=>f(c,E)]),rt(x,A)}),rt(e,h),Sr()}Tu(["mousedown"]);var U0e=(e,t)=>{Il()||q9(e,t)},j0e=Qt("<div><!></div>"),H0e=Qt("<div> </div>");function W0e(e,t){xr(t,!0);const r=(h,g=ks)=>{const y=Mi(()=>t.position!==void 0?!1:"cursor");WE(h,{get drop(){return C(y)},get position(){return t.position},editable:!1,get id(){return t.nodeId},children:(m,_)=>{var x=j0e();x.__mousedown=[U0e,o];var S=qt(x);Ju(S,g,(E,A)=>{A(E,lv({get nodeId(){return t.nodeId}},()=>t.nodeProps))}),Ut(()=>kr(x,`transform:rotate(${C(i)??""}deg)`)),rt(m,x)},$$slots:{default:!0}})};let n=Mi(()=>b0e(t.gateType)),i=Pn(0);const s=()=>C(i),o=h=>{var y;const g=h.target;g?g.nodeName!=="IMG"&&((y=g.parentNode)==null?void 0:y.nodeName)!=="svg"?console.warn('not a part of the node to preform a node action, in this case "rotate" '):me(i,(C(i)+90)%360):console.warn("no event target on node click")};Kr("rotation",s),xl(()=>{if(C(i)||C(i)===0){if(t.nodeId.startsWith("Lamp")){Nf("in_"+t.nodeId);return}Nf("out_"+t.nodeId),Nf("in1_"+t.nodeId),Nf("in2_"+t.nodeId);const h=lt(Ti).connectors["out_"+t.nodeId];h&&h.length>0&&h.forEach(([g,y])=>{Nf(y)})}});var a=gr(),u=$t(a);{var c=h=>{r(h,()=>C(n))},f=h=>{var g=H0e(),y=qt(g);Ut(()=>Pu(y,`Unknown gate type: ${t.gateType??""}`)),rt(h,g)};or(u,h=>{C(n)?h(c):h(f,!1)})}rt(e,a),Sr()}Tu(["mousedown"]);var X0e=In('<svg><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M.5 10.29a.7.7 0 0 0 .37.62a.71.71 0 0 0 .73 0l5.08-3.3a.7.7 0 0 0 0-1.18L1.6 3.11a.71.71 0 0 0-.73 0a.7.7 0 0 0-.37.62z"></path><path d="M6.997 10.29a.7.7 0 0 0 .37.62a.71.71 0 0 0 .73 0l5.08-3.3a.7.7 0 0 0 0-1.18l-5.08-3.32a.71.71 0 0 0-.73 0a.7.7 0 0 0-.37.6zM13.5 2.5v9"></path></g></svg>');function Y0e(e,t){const r=No(t,["$$slots","$$events","$$legacy"]);var n=X0e();let i;Ut(()=>i=Lo(n,i,{viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),rt(e,n)}var K0e=In('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M1.436 12.33a1.14 1.14 0 0 0 .63 1a1.24 1.24 0 0 0 1.22 0l8.65-5.35a1.11 1.11 0 0 0 0-2L3.286.67a1.24 1.24 0 0 0-1.22 0a1.14 1.14 0 0 0-.63 1z"></path></svg>');function Z0e(e,t){const r=No(t,["$$slots","$$events","$$legacy"]);var n=K0e();let i;Ut(()=>i=Lo(n,i,{viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),rt(e,n)}var J0e=In('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M4 .5H1.5a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1H4a1 1 0 0 0 1-1v-11a1 1 0 0 0-1-1m8.5 0H10a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h2.5a1 1 0 0 0 1-1v-11a1 1 0 0 0-1-1"></path></svg>');function Q0e(e,t){const r=No(t,["$$slots","$$events","$$legacy"]);var n=J0e();let i;Ut(()=>i=Lo(n,i,{viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),rt(e,n)}var eye=In('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M13.5.5v13m-13-1.84a1 1 0 0 0 .52.88a1 1 0 0 0 1 0l7.19-4.7a1 1 0 0 0 0-1.68L2 1.5a1 1 0 0 0-1 0a1 1 0 0 0-.52.88Z"></path></svg>');function tye(e,t){const r=No(t,["$$slots","$$events","$$legacy"]);var n=eye();let i;Ut(()=>i=Lo(n,i,{viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),rt(e,n)}var rye=In('<svg><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"></path><path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7M7 3v4a1 1 0 0 0 1 1h7"></path></g></svg>');function nye(e,t){const r=No(t,["$$slots","$$events","$$legacy"]);var n=rye();let i;Ut(()=>i=Lo(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),rt(e,n)}var iye=In('<svg><path fill="currentColor" d="M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zM17 6H7v13h10zM9 17h2V8H9zm4 0h2V8h-2zM7 6v13z"></path></svg>');function sye(e,t){const r=No(t,["$$slots","$$events","$$legacy"]);var n=iye();let i;Ut(()=>i=Lo(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),rt(e,n)}var oye=In('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4m14-7l-5-5l-5 5m5-5v12"></path></svg>');function aye(e,t){const r=No(t,["$$slots","$$events","$$legacy"]);var n=oye();let i;Ut(()=>i=Lo(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),rt(e,n)}const OE=(e,t)=>{let r=()=>GJ(t==null?void 0:t(),[]);var n=gr(),i=$t(n);Ju(i,()=>r().Component,(s,o)=>{o(s,{get style(){return r().styles},get width(){return r().width}})}),rt(e,n)},qf=(e,t=ks,r=ks,n)=>{let i=hn(()=>YZ(n==null?void 0:n(),""));var s=cye();s.__click=[uye,r];var o=qt(s);OE(o,t),Ut(()=>kr(s,C(i))),rt(e,s)};var uye=(e,t)=>t()(),cye=Qt('<button class="svelte-1qv10mw"><!></button>'),lye=(e,t)=>t()(),fye=Qt('<button style="display:flex;align-items: center;padding-block:1px;" class="svelte-1qv10mw"><div style="margin-left: -8px"><!></div> <p id="tickNumber" class="svelte-1qv10mw"> </p></button>'),hye=Qt('<div class="menuRunButtons svelte-1qv10mw"><!> <span class="vl svelte-1qv10mw"></span> <!> <span class="vl svelte-1qv10mw"></span> <!> <span style="margin-right: 7px" class="vl svelte-1qv10mw"></span> <!> <!> <span style="margin-right: 7px" class="vl svelte-1qv10mw"></span> <!></div>');function dye(e,t){xr(t,!0);const[r,n]=$n(),i=()=>He(Ti,"$CircuitStore",r),s=(N,p=ks)=>{var P=fye();P.__click=[lye,p];var O=qt(P),q=qt(O);{var V=se=>{OE(se,()=>o.pauseTick)},W=se=>{OE(se,()=>o.playTick)};or(q,se=>{Il()?se(V):se(W,!1)})}var G=gt(O,2),J=qt(G);Ut((se,K)=>{kr(G,se),Pu(J,K)},[()=>Il()?"border-color:green":"border-color:red",wme]),rt(N,P)},o={playTick:{Component:Z0e,styles:"transform:scale(1.8);",width:40},pauseTick:{Component:Q0e,styles:"transform:scale(1.8);",width:40},updateGates:{Component:tye,styles:"transform:scale(2);",width:40},updateGatesNext:{Component:Y0e,styles:"transform:scale(2.3);",width:50},save:{Component:nye,styles:"transform:scale(2.4);",width:30},trash:{Component:sye,styles:"transform:scale(2.69);",width:30},load:{Component:aye,styles:"transform:scale(2.4);",width:30}},a=()=>{const N=document.querySelector("#logicap");N&&(N.classList.contains("running")?(N.classList.remove("running"),u()):N.classList.add("running"))};function u(){let N,p;const P=["red","var(--lime-red)"],O=document.querySelectorAll("[id^='N-Lamp']");O!==null&&O.forEach(q=>{N=q.querySelector("circle"),p=q.querySelector("line"),!(N===null||p===null)&&(N.setAttribute("stroke",P[1]),N.setAttribute("fill",P[0]),p.setAttribute("stroke",P[0]))})}function c(N){a(),xme(10)}function f(N){Tme()}function h(N){Ame()}function g(N){const p=localStorage.getItem("currActiveTab");if(!p)return console.log("could not download because current active tab name is null"),null;$Q(p)}async function y(N){await UQ(),t.setCanvas(i().devices)}function m(){GQ(),Ti.reset(),t.clearCanvas()}var _=hye(),x=qt(_);s(x,()=>c);var S=gt(x,4);qf(S,()=>o.updateGates,()=>h);var E=gt(S,4);qf(E,()=>o.updateGatesNext,()=>f);var A=gt(E,4);qf(A,()=>o.save,()=>g);var T=gt(A,2);qf(T,()=>o.load,()=>y);var I=gt(T,4);qf(I,()=>o.trash,()=>m,()=>"margin-left: -6px"),rt(e,_),Sr(),n()}Tu(["click"]);const pye=!1;console.log("IS DEVMODE: "+pye);function vye(e=10){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=crypto.getRandomValues(new Uint8Array(e));return Array.from(r,n=>t[n%t.length]).join("")}function gye(){const e=document==null?void 0:document.querySelector("div.svelvet-graph-wrapper");if(!e)return;const{transform:t}=e.style,r=/scale\((.+)\)/,n=t.match(r);if(!n||!n[1])return console.warn("scale property not found on graph-wrapper"),null;const i=parseFloat(n[1]);if(isNaN(i))throw new Error("Scale value is not a valid integer.");localStorage.setItem("SavedScale",i.toString())}function mye(){const e=()=>{const t=document.querySelector(".svelvet-wrapper");if(t){const r=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0});t.dispatchEvent(r);const n=new MouseEvent("mouseup",{bubbles:!0,cancelable:!0});t.dispatchEvent(n)}};document.addEventListener("DOMContentLoaded",()=>{e()})}var yye=In('<svg><path fill="currentColor" d="M5 19V5zv-.025zm0 2q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v7q0 .425-.288.713T20 13t-.712-.288T19 12V5H5v14h7q.425 0 .713.288T13 20t-.288.713T12 21zm14.175-1H16q-.425 0-.712-.288T15 19t.288-.712T16 18h3.175l-.9-.9Q18 16.825 18 16.413t.3-.713q.275-.275.7-.275t.7.275l2.6 2.6q.3.3.3.7t-.3.7l-2.6 2.6q-.275.275-.687.288T18.3 22.3q-.275-.275-.275-.7t.275-.7zM11 13v3q0 .425.288.713T12 17t.713-.288T13 16v-3h3q.425 0 .713-.288T17 12t-.288-.712T16 11h-3V8q0-.425-.288-.712T12 7t-.712.288T11 8v3H8q-.425 0-.712.288T7 12t.288.713T8 13z"></path></svg>');function _ye(e,t){const r=No(t,["$$slots","$$events","$$legacy"]);var n=yye();let i;Ut(()=>i=Lo(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),rt(e,n)}var bye=(e,t,r)=>{e.key==="Enter"?t():e.key==="Escape"&&r()},wye=Qt('<input type="text" class="svelte-1bt3nft">'),xye=async(e,t,r)=>await t(C(r)),Sye=(e,t,r)=>t(C(r)),Eye=Qt('<button type="button" class="tab-title svelte-1bt3nft"> </button>'),Aye=Qt('<div class="tab-item svelte-1bt3nft"><!> <button type="button" class="delete-btn svelte-1bt3nft" title="Delete Tab">×</button></div>'),Tye=(e,t)=>t(),Pye=Qt('<div class="tabs svelte-1bt3nft"><div class="scrollable-tabs svelte-1bt3nft"></div> <button type="button" class="new-tab-btn svelte-1bt3nft"><!></button></div>');function Cye(e,t){xr(t,!0);const[r,n]=$n(),i=()=>He(Ti,"$CircuitStore",r),s=localStorage.getItem("currActiveTab")||"init_circuit";let o=Pn(xo(s)),a=Pn(xo(localStorage.getItem("activeTabList")&&JSON.parse(localStorage.getItem("activeTabList")||"")||[s])),u=Pn(null),c=Pn("");async function f(I){await oh();const N=localStorage.getItem("circuitStoreSave");if(!N){console.log("empty after trying to save, not possible I don't think");return}localStorage.setItem(I,N)}async function h(I){if(C(u)===I)return;if(C(o)===I)return null;await f(C(o)),t.clearDeviceData(),Ti.reset();let N=localStorage.getItem(I);N||(N="",localStorage.setItem(I,N)),localStorage.setItem("circuitStoreSave",N),kp(),t.setDeviceData(i().devices),me(o,I,!0),localStorage.setItem("currActiveTab",I)}function g(){const I=C(a).map(p=>{if(p==="unnamed_circuit")return 0;const P=p.match(/^unnamed_circuit_(\d+)$/);return P?parseInt(P[1]):null}).filter(p=>p!==null).sort((p,P)=>p-P);if(I.length===0||I[0]!==0){C(a).push("unnamed_circuit"),localStorage.setItem("activeTabList",JSON.stringify(C(a)));return}let N=1;for(const p of I){if(p>N)break;N=p+1}C(a).push(`unnamed_circuit_${N}`),localStorage.setItem("activeTabList",JSON.stringify(C(a)))}function y(I){if(C(a).length<=1){alert("Cannot delete the last tab.");return}const N=C(a)[I];if(me(a,C(a).filter((p,P)=>P!==I),!0),localStorage.setItem("activeTabList",JSON.stringify(C(a))),localStorage.removeItem(N),C(o)===N){const p=C(a)[0];me(o,p,!0),localStorage.setItem("currActiveTab",p);let P=localStorage.getItem(p)||"";localStorage.setItem("circuitStoreSave",P),kp(),t.setDeviceData(i().devices)}}function m(I){me(u,I,!0),me(c,I,!0)}function _(){me(u,null),me(c,"")}function x(){if(!C(u))return;const I=C(c).trim();if(!I)return;if(C(a).includes(I)&&I!==C(u)){alert("Tab name already exists! Please choose a different name.");return}me(a,C(a).map(p=>p===C(u)?I:p),!0),localStorage.setItem("activeTabList",JSON.stringify(C(a)));const N=localStorage.getItem(C(u));N!==null&&(localStorage.removeItem(C(u)),localStorage.setItem(I,N)),C(o)===C(u)&&(me(o,I,!0),localStorage.setItem("currActiveTab",I)),me(u,null),me(c,"")}var S=Pye(),E=qt(S);ds(E,23,()=>C(a),(I,N)=>I+N,(I,N,p)=>{var P=Aye(),O=qt(P);{var q=G=>{var J=wye();J.__keydown=[bye,x,_],Z4(J,!0),fr("blur",J,x),u7(J,()=>C(c),se=>me(c,se)),rt(G,J)},V=G=>{var J=Eye();J.__click=[xye,h,N],J.__dblclick=[Sye,m,N];var se=qt(J);Ut(()=>Pu(se,C(N))),rt(G,J)};or(O,G=>{C(u)===C(N)?G(q):G(V,!1)})}var W=gt(O,2);W.__click=G=>{G.stopPropagation(),y(C(p))},rt(I,P)});var A=gt(E,2);A.__click=[Tye,g];var T=qt(A);_ye(T,{}),rt(e,S),Sr(),n()}Tu(["keydown","click","dblclick"]);function Rye(){return console.log("CONNECTED IN APP"),null}var Iye=Qt('<main id="logicap" class="svelte-2kmgjz"><!> <!> <!> <!> <!></main>');function Oye(e,t){xr(t,!0);const[r,n]=$n(),i=()=>He(Ti,"$CircuitStore",r);let s=Pn(xo({...i().devices}));const o=()=>me(s,{},!0),a=E=>me(s,E,!0);let u=Pn(1);Pi(()=>{me(u,parseFloat(localStorage.getItem("SavedScale")||"1"),!0),kp(),me(s,i().devices,!0),mye()}),window.addEventListener("beforeunload",()=>{oh(),gye()});function c(E){const A=E.gateType,T=vye(),I=Ti.addCircuitDevice(A,T);me(s,I,!0),oh()}let f=E=>me(s,E,!0),h="";var g=Iye(),y=qt(g);t0e(y,{});var m=gt(y,2);$0e(m,{createCanvasDevice:c});var _=gt(m,2);dye(_,{clearCanvas:o,get currCircuitName(){return h},setCanvas:f});var x=gt(_,2);Cye(x,{clearDeviceData:o,setDeviceData:a});var S=gt(x,2);zte(S,{theme:"LogiCap",get zoom(){return C(u)},editable:!1,disableSelection:!1,controls:!0,children:(E,A)=>{var T=gr(),I=$t(T);ds(I,17,()=>Object.entries(C(s)),([N,p])=>N,(N,p)=>{let P=()=>C(p)[0],O=()=>C(p)[1];const q=Mi(()=>({...O().type&&{gateType:O().type},width:80,height:50}));W0e(N,{get gateType(){return O().type},get position(){return O().position},get nodeId(){return P()},get nodeProps(){return C(q)}})}),rt(E,T)},$$slots:{default:!0,minimap:(E,A)=>{w7(E,{width:100,corner:"NE",slot:"minimap"})},toggle:(E,A)=>{x7(E,{main:"LogiCap",corner:"NW",alt:"LogiCap",slot:"toggle"})}}}),rt(e,g),Sr(),n()}ZJ(Oye,{target:document.getElementById("app")});export{wC as A,Ms as B,Su as C,Pu as D,Ke as E,Pi as F,Eh as G,qe as H,$t as I,me as J,Kc as K,mp as L,In as M,Ju as N,pt as O,ds as P,ge as a,Xr as b,Ut as c,Rn as d,rt as e,Sr as f,Rr as g,$n as h,Dn as i,or as j,lt as k,qt as l,gt as m,C as n,hn as o,xr as p,kr as q,fr as r,He as s,Qt as t,ro as u,io as v,Nee as w,kye as x,u7 as y,qC as z};
