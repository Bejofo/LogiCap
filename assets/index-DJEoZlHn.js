const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Controls-BbwSeaU6.js","./Icon-DzeLO2S8.js","./DrawerController-IZ5Ri7mN.js","./DrawerController-CDtfjO5V.css"])))=>i.map(i=>d[i]);
var bs=Object.defineProperty;var Ur=e=>{throw TypeError(e)};var ws=(e,t,n)=>t in e?bs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Vr=(e,t,n)=>ws(e,typeof t!="symbol"?t+"":t,n),ur=(e,t,n)=>t.has(e)||Ur("Cannot "+n);var pn=(e,t,n)=>(ur(e,t,"read from private field"),n?n.call(e):t.get(e)),ho=(e,t,n)=>t.has(e)?Ur("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),dr=(e,t,n,r)=>(ur(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),$r=(e,t,n)=>(ur(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const xr=!1;var Po=Array.isArray,Ss=Array.prototype.indexOf,Mr=Array.from,Ni=Object.defineProperty,xn=Object.getOwnPropertyDescriptor,Ai=Object.getOwnPropertyDescriptors,Cs=Object.prototype,Es=Array.prototype,Pr=Object.getPrototypeOf;function go(e){return typeof e=="function"}const bn=()=>{};function Ns(e){return e()}function Go(e){for(var t=0;t<e.length;t++)e[t]()}const He=2,Mi=4,Do=8,Dr=16,dn=32,io=64,Xo=128,cn=256,Fo=512,Ce=1024,Cn=2048,Kn=4096,wn=8192,Qo=16384,As=32768,tr=65536,Pi=1<<17,Ms=1<<19,Di=1<<20,ln=Symbol("$state"),Ii=Symbol("legacy props"),Ps=Symbol("");function Li(e){return e===this.v}function Ir(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Lr(e){return!Ir(e,this.v)}function Ds(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Is(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ls(e){throw new Error("https://svelte.dev/e/effect_orphan")}function ks(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ki(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Ts(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Rs(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Os(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function zs(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function Bs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let so=!1,Ws=!1;function Ys(){so=!0}const kr=1,Tr=2,Ti=4,Gs=8,Xs=16,Fs=1,Hs=2,Ks=4,qs=8,js=16,Ri=1,Us=2,Ie=Symbol();function Rr(){throw new Error("https://svelte.dev/e/invalid_default_snippet")}function lo(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Mt=null;function Zr(e){Mt=e}function It(e){return Oi().get(e)}function jt(e,t){return Oi().set(e,t),t}function oe(e,t=!1,n){Mt={p:Mt,c:null,e:null,m:!1,s:e,x:null,l:null},so&&!t&&(Mt.l={s:null,u:null,r1:[],r2:Xe(!1)})}function re(e){const t=Mt;if(t!==null){e!==void 0&&(t.x=e);const l=t.e;if(l!==null){var n=Qt,r=ee;t.e=null;try{for(var i=0;i<l.length;i++){var s=l[i];un(s.effect),Tn(s.reaction),Hn(s.fn)}}finally{un(n),Tn(r)}}Mt=t.p,t.m=!0}return e||{}}function Io(){return!so||Mt!==null&&Mt.l===null}function Oi(e){return Mt===null&&lo(),Mt.c??(Mt.c=new Map(Vs(Mt)||void 0))}function Vs(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function Xe(e,t){var n={f:0,v:e,reactions:null,equals:Li,rv:0,wv:0};return n}function er(e,t=!1){var r;const n=Xe(e);return t||(n.equals=Lr),so&&Mt!==null&&Mt.l!==null&&((r=Mt.l).s??(r.s=[])).push(n),n}function x(e,t=!1){return $s(er(e,t))}function $s(e){return ee!==null&&!Sn&&ee.f&He&&(an===null?ll([e]):an.push(e)),e}function jn(e,t){return _(e,le(()=>o(e))),t}function _(e,t){return ee!==null&&!Sn&&Io()&&ee.f&(He|Dr)&&(an===null||!an.includes(e))&&Bs(),So(e,t)}function So(e,t){return e.equals(t)||(e.v,e.v=t,e.wv=Ji(),zi(e,Cn),Io()&&Qt!==null&&Qt.f&Ce&&!(Qt.f&(dn|io))&&(mn===null?al([e]):mn.push(e))),t}function zi(e,t){var n=e.reactions;if(n!==null)for(var r=Io(),i=n.length,s=0;s<i;s++){var l=n[s],a=l.f;a&Cn||!r&&l===Qt||(Je(l,t),a&(Ce|cn)&&(a&He?zi(l,Kn):sr(l)))}}let Bi=!1;function $n(e,t=null,n){if(typeof e!="object"||e===null||ln in e)return e;const r=Pr(e);if(r!==Cs&&r!==Es)return e;var i=new Map,s=Po(e),l=Xe(0);s&&i.set("length",Xe(e.length));var a;return new Proxy(e,{defineProperty(c,u,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Rs();var h=i.get(u);return h===void 0?(h=Xe(d.value),i.set(u,h)):_(h,$n(d.value,a)),!0},deleteProperty(c,u){var d=i.get(u);if(d===void 0)u in c&&i.set(u,Xe(Ie));else{if(s&&typeof u=="string"){var h=i.get("length"),f=Number(u);Number.isInteger(f)&&f<h.v&&_(h,f)}_(d,Ie),Jr(l)}return!0},get(c,u,d){var v;if(u===ln)return e;var h=i.get(u),f=u in c;if(h===void 0&&(!f||(v=xn(c,u))!=null&&v.writable)&&(h=Xe($n(f?c[u]:Ie,a)),i.set(u,h)),h!==void 0){var m=o(h);return m===Ie?void 0:m}return Reflect.get(c,u,d)},getOwnPropertyDescriptor(c,u){var d=Reflect.getOwnPropertyDescriptor(c,u);if(d&&"value"in d){var h=i.get(u);h&&(d.value=o(h))}else if(d===void 0){var f=i.get(u),m=f==null?void 0:f.v;if(f!==void 0&&m!==Ie)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return d},has(c,u){var m;if(u===ln)return!0;var d=i.get(u),h=d!==void 0&&d.v!==Ie||Reflect.has(c,u);if(d!==void 0||Qt!==null&&(!h||(m=xn(c,u))!=null&&m.writable)){d===void 0&&(d=Xe(h?$n(c[u],a):Ie),i.set(u,d));var f=o(d);if(f===Ie)return!1}return h},set(c,u,d,h){var A;var f=i.get(u),m=u in c;if(s&&u==="length")for(var v=d;v<f.v;v+=1){var w=i.get(v+"");w!==void 0?_(w,Ie):v in c&&(w=Xe(Ie),i.set(v+"",w))}f===void 0?(!m||(A=xn(c,u))!=null&&A.writable)&&(f=Xe(void 0),_(f,$n(d,a)),i.set(u,f)):(m=f.v!==Ie,_(f,$n(d,a)));var y=Reflect.getOwnPropertyDescriptor(c,u);if(y!=null&&y.set&&y.set.call(h,d),!m){if(s&&typeof u=="string"){var p=i.get("length"),P=Number(u);Number.isInteger(P)&&P>=p.v&&_(p,P+1)}Jr(l)}return!0},ownKeys(c){o(l);var u=Reflect.ownKeys(c).filter(f=>{var m=i.get(f);return m===void 0||m.v!==Ie});for(var[d,h]of i)h.v!==Ie&&!(d in c)&&u.push(d);return u},setPrototypeOf(){Os()}})}function Jr(e,t=1){_(e,e.v+t)}function Qr(e){return e!==null&&typeof e=="object"&&ln in e?e[ln]:e}function tu(e,t){return Object.is(Qr(e),Qr(t))}var Zn,Wi,Yi;function Zs(){if(Zn===void 0){Zn=window;var e=Element.prototype,t=Node.prototype;Wi=xn(t,"firstChild").get,Yi=xn(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function Or(e=""){return document.createTextNode(e)}function _n(e){return Wi.call(e)}function nr(e){return Yi.call(e)}function Ut(e,t){return _n(e)}function ct(e,t){{var n=_n(e);return n instanceof Comment&&n.data===""?nr(n):n}}function dt(e,t=1,n=!1){let r=e;for(;t--;)r=nr(r);return r}function Js(e){e.textContent=""}function Ze(e){var t=He|Cn,n=ee!==null&&ee.f&He?ee:null;return Qt===null||n!==null&&n.f&cn?t|=cn:Qt.f|=Di,{ctx:Mt,deps:null,effects:null,equals:Li,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??Qt}}function ke(e){const t=Ze(e);return t.equals=Lr,t}function Gi(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)kn(t[n])}}function Qs(e){for(var t=e.parent;t!==null;){if(!(t.f&He))return t;t=t.parent}return null}function tl(e){var t,n=Qt;un(Qs(e));try{Gi(e),t=ts(e)}finally{un(n)}return t}function Xi(e){var t=tl(e),n=(Xn||e.f&cn)&&e.deps!==null?Kn:Ce;Je(e,n),e.equals(t)||(e.v=t,e.wv=Ji())}function Fi(e){Qt===null&&ee===null&&Ls(),ee!==null&&ee.f&cn&&Qt===null&&Is(),Yr&&Ds()}function el(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function ao(e,t,n,r=!0){var i=(e&io)!==0,s=Qt,l={ctx:Mt,deps:null,nodes_start:null,nodes_end:null,f:e|Cn,first:null,fn:t,last:null,next:null,parent:i?null:s,prev:null,teardown:null,transitions:null,wv:0};if(n){var a=Qn;try{ti(!0),ir(l),l.f|=As}catch(d){throw kn(l),d}finally{ti(a)}}else t!==null&&sr(l);var c=n&&l.deps===null&&l.first===null&&l.nodes_start===null&&l.teardown===null&&(l.f&(Di|Xo))===0;if(!c&&!i&&r&&(s!==null&&el(l,s),ee!==null&&ee.f&He)){var u=ee;(u.effects??(u.effects=[])).push(l)}return l}function zr(e){const t=ao(Do,null,!1);return Je(t,Ce),t.teardown=e,t}function Ho(e){Fi();var t=Qt!==null&&(Qt.f&dn)!==0&&Mt!==null&&!Mt.m;if(t){var n=Mt;(n.e??(n.e=[])).push({fn:e,effect:Qt,reaction:ee})}else{var r=Hn(e);return r}}function nl(e){return Fi(),co(e)}function ol(e){const t=ao(io,e,!0);return(n={})=>new Promise(r=>{n.outro?Co(t,()=>{kn(t),r(void 0)}):(kn(t),r(void 0))})}function Hn(e){return ao(Mi,e,!1)}function b(e,t){var n=Mt,r={effect:null,ran:!1};n.l.r1.push(r),r.effect=co(()=>{e(),!r.ran&&(r.ran=!0,_(n.l.r2,!0),le(t))})}function Ne(){var e=Mt;co(()=>{if(o(e.l.r2)){for(var t of e.l.r1){var n=t.effect;n.f&Ce&&Je(n,Kn),uo(n)&&ir(n),t.ran=!1}e.l.r2.v=!1}})}function co(e){return ao(Do,e,!0)}function Vt(e,t=[],n=Ze){const r=t.map(n);return or(()=>e(...r.map(o)))}function or(e,t=0){return ao(Do|Dr|t,e,!0)}function no(e,t=!0){return ao(Do|dn,e,!0,t)}function Hi(e){var t=e.teardown;if(t!==null){const n=Yr,r=ee;ei(!0),Tn(null);try{t.call(null)}finally{ei(n),Tn(r)}}}function Ki(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var r=n.next;kn(n,t),n=r}}function rl(e){for(var t=e.first;t!==null;){var n=t.next;t.f&dn||kn(t),t=n}}function kn(e,t=!0){var n=!1;if((t||e.f&Ms)&&e.nodes_start!==null){for(var r=e.nodes_start,i=e.nodes_end;r!==null;){var s=r===i?null:nr(r);r.remove(),r=s}n=!0}Ki(e,t&&!n),Uo(e,0),Je(e,Qo);var l=e.transitions;if(l!==null)for(const c of l)c.stop();Hi(e);var a=e.parent;a!==null&&a.first!==null&&qi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function qi(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Co(e,t){var n=[];Br(e,n,!0),ji(n,()=>{kn(e),t&&t()})}function ji(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function Br(e,t,n){if(!(e.f&wn)){if(e.f^=wn,e.transitions!==null)for(const l of e.transitions)(l.is_global||n)&&t.push(l);for(var r=e.first;r!==null;){var i=r.next,s=(r.f&tr)!==0||(r.f&dn)!==0;Br(r,t,s?n:!1),r=i}}}function Ko(e){Ui(e,!0)}function Ui(e,t){if(e.f&wn){e.f^=wn,e.f&Ce||(e.f^=Ce),uo(e)&&(Je(e,Cn),sr(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&tr)!==0||(n.f&dn)!==0;Ui(n,i?t:!1),n=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let qo=!1,br=[];function Vi(){qo=!1;const e=br.slice();br=[],Go(e)}function Wr(e){qo||(qo=!0,queueMicrotask(Vi)),br.push(e)}function il(){qo&&Vi()}const $i=0,sl=1;let Bo=!1,Wo=$i,Eo=!1,No=null,Qn=!1,Yr=!1;function ti(e){Qn=e}function ei(e){Yr=e}let Gn=[],to=0;let ee=null,Sn=!1;function Tn(e){ee=e}let Qt=null;function un(e){Qt=e}let an=null;function ll(e){an=e}let Le=null,Oe=0,mn=null;function al(e){mn=e}let Zi=1,jo=0,Xn=!1,In=null;function Ji(){return++Zi}function uo(e){var u;var t=e.f;if(t&Cn)return!0;if(t&Kn){var n=e.deps,r=(t&cn)!==0;if(n!==null){var i,s,l=(t&Fo)!==0,a=r&&Qt!==null&&!Xn,c=n.length;if(l||a){for(i=0;i<c;i++)s=n[i],(l||!((u=s==null?void 0:s.reactions)!=null&&u.includes(e)))&&(s.reactions??(s.reactions=[])).push(e);l&&(e.f^=Fo)}for(i=0;i<c;i++)if(s=n[i],uo(s)&&Xi(s),s.wv>e.wv)return!0}(!r||Qt!==null&&!Xn)&&Je(e,Ce)}return!1}function cl(e,t){for(var n=t;n!==null;){if(n.f&Xo)try{n.fn(e);return}catch{n.f^=Xo}n=n.parent}throw Bo=!1,e}function ul(e){return(e.f&Qo)===0&&(e.parent===null||(e.parent.f&Xo)===0)}function rr(e,t,n,r){if(Bo){if(n===null&&(Bo=!1),ul(t))throw e;return}n!==null&&(Bo=!0);{cl(e,t);return}}function Qi(e,t,n=0){var r=e.reactions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];s.f&He?Qi(s,t,n+1):t===s&&(n===0?Je(s,Cn):s.f&Ce&&Je(s,Kn),sr(s))}}function ts(e){var m;var t=Le,n=Oe,r=mn,i=ee,s=Xn,l=an,a=Mt,c=Sn,u=e.f;Le=null,Oe=0,mn=null,ee=u&(dn|io)?null:e,Xn=(u&cn)!==0&&(!Qn||(i===null||c)&&e.parent!==null),an=null,Zr(e.ctx),Sn=!1,jo++;try{var d=(0,e.fn)(),h=e.deps;if(Le!==null){var f;if(Uo(e,Oe),h!==null&&Oe>0)for(h.length=Oe+Le.length,f=0;f<Le.length;f++)h[Oe+f]=Le[f];else e.deps=h=Le;if(!Xn)for(f=Oe;f<h.length;f++)((m=h[f]).reactions??(m.reactions=[])).push(e)}else h!==null&&Oe<h.length&&(Uo(e,Oe),h.length=Oe);if(Io()&&mn!==null&&!(e.f&(He|Kn|Cn)))for(f=0;f<mn.length;f++)Qi(mn[f],e);return i!==null&&jo++,d}finally{Le=t,Oe=n,mn=r,ee=i,Xn=s,an=l,Zr(a),Sn=c}}function dl(e,t){let n=t.reactions;if(n!==null){var r=Ss.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&t.f&He&&(Le===null||!Le.includes(t))&&(Je(t,Kn),t.f&(cn|Fo)||(t.f^=Fo),Gi(t),Uo(t,0))}function Uo(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)dl(e,n[r])}function ir(e){var t=e.f;if(!(t&Qo)){Je(e,Ce);var n=Qt,r=Mt;Qt=e;try{t&Dr?rl(e):Ki(e),Hi(e);var i=ts(e);e.teardown=typeof i=="function"?i:null,e.wv=Zi;var s=e.deps,l;xr&&Ws&&e.f&Cn}catch(a){rr(a,e,n,r||e.ctx)}finally{Qt=n}}}function es(){if(to>1e3){to=0;try{ks()}catch(e){if(No!==null)rr(e,No,null);else throw e}}to++}function ns(e){var t=e.length;if(t!==0){es();var n=Qn;Qn=!0;try{for(var r=0;r<t;r++){var i=e[r];i.f&Ce||(i.f^=Ce);var s=[];os(i,s),fl(s)}}finally{Qn=n}}}function fl(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];if(!(r.f&(Qo|wn)))try{uo(r)&&(ir(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?qi(r):r.fn=null))}catch(i){rr(i,r,null,r.ctx)}}}function hl(){if(Eo=!1,to>1001)return;const e=Gn;Gn=[],ns(e),Eo||(to=0,No=null)}function sr(e){Wo===$i&&(Eo||(Eo=!0,queueMicrotask(hl))),No=e;for(var t=e;t.parent!==null;){t=t.parent;var n=t.f;if(n&(io|dn)){if(!(n&Ce))return;t.f^=Ce}}Gn.push(t)}function os(e,t){var n=e.first,r=[];t:for(;n!==null;){var i=n.f,s=(i&dn)!==0,l=s&&(i&Ce)!==0,a=n.next;if(!l&&!(i&wn))if(i&Do){if(s)n.f^=Ce;else{var c=ee;try{ee=n,uo(n)&&ir(n)}catch(f){rr(f,n,null,n.ctx)}finally{ee=c}}var u=n.first;if(u!==null){n=u;continue}}else i&Mi&&r.push(n);if(a===null){let f=n.parent;for(;f!==null;){if(e===f)break t;var d=f.next;if(d!==null){n=d;continue t}f=f.parent}}n=a}for(var h=0;h<r.length;h++)u=r[h],t.push(u),os(u,t)}function rs(e){var t=Wo,n=Gn;try{es();const i=[];Wo=sl,Gn=i,Eo=!1,ns(n);var r=e==null?void 0:e();return il(),(Gn.length>0||i.length>0)&&rs(),to=0,No=null,r}finally{Wo=t,Gn=n}}async function gl(){await Promise.resolve(),rs()}function o(e){var t=e.f,n=(t&He)!==0;if(In!==null&&In.add(e),ee!==null&&!Sn){an!==null&&an.includes(e)&&zs();var r=ee.deps;e.rv<jo&&(e.rv=jo,Le===null&&r!==null&&r[Oe]===e?Oe++:Le===null?Le=[e]:Le.push(e))}else if(n&&e.deps===null&&e.effects===null){var i=e,s=i.parent;s!==null&&!(s.f&cn)&&(i.f^=cn)}return n&&(i=e,uo(i)&&Xi(i)),e.v}function vl(e){var t=In;In=new Set;var n=In,r;try{if(le(e),t!==null)for(r of In)t.add(r)}finally{In=t}return n}function eu(e){var t=vl(()=>le(e));for(var n of t)if(n.f&Pi)for(const r of n.deps||[])r.f&He||So(r,r.v);else So(n,n.v)}function le(e){var t=Sn;try{return Sn=!0,e()}finally{Sn=t}}const pl=-7169;function Je(e,t){e.f=e.f&pl|t}function nt(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ln in e)wr(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&ln in n&&wr(n)}}}function wr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{wr(e[r],t)}catch{}const n=Pr(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Ai(n);for(let i in r){const s=r[i].get;if(s)try{s.call(e)}catch{}}}}}const ml=["touchstart","touchmove"];function _l(e){return ml.includes(e)}let ni=!1;function yl(){ni||(ni=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function is(e){var t=ee,n=Qt;Tn(null),un(null);try{return e()}finally{Tn(t),un(n)}}function xl(e,t,n,r=n){e.addEventListener(t,()=>is(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),yl()}const bl=new Set,oi=new Set;function wl(e,t,n,r={}){function i(s){if(r.capture||mo.call(t,s),!s.cancelBubble)return is(()=>n==null?void 0:n.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Wr(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function Tt(e,t,n,r,i){var s={capture:r,passive:i},l=wl(e,t,n,s);(t===document.body||t===window||t===document)&&zr(()=>{t.removeEventListener(e,l,s)})}function mo(e){var P;var t=this,n=t.ownerDocument,r=e.type,i=((P=e.composedPath)==null?void 0:P.call(e))||[],s=i[0]||e.target,l=0,a=e.__root;if(a){var c=i.indexOf(a);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var u=i.indexOf(t);if(u===-1)return;c<=u&&(l=c)}if(s=i[l]||e.target,s!==t){Ni(e,"currentTarget",{configurable:!0,get(){return s||n}});var d=ee,h=Qt;Tn(null),un(null);try{for(var f,m=[];s!==null;){var v=s.assignedSlot||s.parentNode||s.host||null;try{var w=s["__"+r];if(w!==void 0&&!s.disabled)if(Po(w)){var[y,...p]=w;y.apply(s,[e,...p])}else w.call(s,e)}catch(A){f?m.push(A):f=A}if(e.cancelBubble||v===t||v===null)break;s=v}if(f){for(let A of m)queueMicrotask(()=>{throw A});throw f}}finally{e.__root=t,delete e.currentTarget,Tn(d),un(h)}}}function ss(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function Ao(e,t){var n=Qt;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function Kt(e,t){var n=(t&Ri)!==0,r=(t&Us)!==0,i,s=!e.startsWith("<!>");return()=>{i===void 0&&(i=ss(s?e:"<!>"+e),n||(i=_n(i)));var l=r?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=_n(l),c=l.lastChild;Ao(a,c)}else Ao(l,l);return l}}function fn(e,t,n="svg"){var r=!e.startsWith("<!>"),i=(t&Ri)!==0,s=`<${n}>${r?e:"<!>"+e}</${n}>`,l;return()=>{if(!l){var a=ss(s),c=_n(a);if(i)for(l=document.createDocumentFragment();_n(c);)l.appendChild(_n(c));else l=_n(c)}var u=l.cloneNode(!0);if(i){var d=_n(u),h=u.lastChild;Ao(d,h)}else Ao(u,u);return u}}function At(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Or();return e.append(t,n),Ao(t,n),e}function O(e,t){e!==null&&e.before(t)}function ls(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function Sl(e,t){return Cl(e,t)}const Un=new Map;function Cl(e,{target:t,anchor:n,props:r={},events:i,context:s,intro:l=!0}){Zs();var a=new Set,c=h=>{for(var f=0;f<h.length;f++){var m=h[f];if(!a.has(m)){a.add(m);var v=_l(m);t.addEventListener(m,mo,{passive:v});var w=Un.get(m);w===void 0?(document.addEventListener(m,mo,{passive:v}),Un.set(m,1)):Un.set(m,w+1)}}};c(Mr(bl)),oi.add(c);var u=void 0,d=ol(()=>{var h=n??t.appendChild(Or());return no(()=>{if(s){oe({});var f=Mt;f.c=s}i&&(r.$$events=i),u=e(h,r)||{},s&&re()}),()=>{var v;for(var f of a){t.removeEventListener(f,mo);var m=Un.get(f);--m===0?(document.removeEventListener(f,mo),Un.delete(f)):Un.set(f,m)}oi.delete(c),h!==n&&((v=h.parentNode)==null||v.removeChild(h))}});return El.set(u,d),u}let El=new WeakMap;function Lt(e,t,n=!1){var r=e,i=null,s=null,l=Ie,a=n?tr:0,c=!1;const u=(h,f=!0)=>{c=!0,d(f,h)},d=(h,f)=>{l!==(l=h)&&(l?(i?Ko(i):f&&(i=no(()=>f(r))),s&&Co(s,()=>{s=null})):(s?Ko(s):f&&(s=no(()=>f(r))),i&&Co(i,()=>{i=null})))};or(()=>{c=!1,t(u),c||d(null,null)},a)}function Jn(e,t){return t}function Nl(e,t,n,r){for(var i=[],s=t.length,l=0;l<s;l++)Br(t[l].e,i,!0);var a=s>0&&i.length===0&&n!==null;if(a){var c=n.parentNode;Js(c),c.append(n),r.clear(),Dn(e,t[0].prev,t[s-1].next)}ji(i,()=>{for(var u=0;u<s;u++){var d=t[u];a||(r.delete(d.k),Dn(e,d.prev,d.next)),kn(d.e,!a)}})}function rn(e,t,n,r,i,s=null){var l=e,a={flags:t,items:new Map,first:null},c=(t&Ti)!==0;if(c){var u=e;l=u.appendChild(Or())}var d=null,h=!1,f=ke(()=>{var m=n();return Po(m)?m:m==null?[]:Mr(m)});or(()=>{var m=o(f),v=m.length;h&&v===0||(h=v===0,Al(m,a,l,i,t,r,n),s!==null&&(v===0?d?Ko(d):d=no(()=>s(l)):d!==null&&Co(d,()=>{d=null})),o(f))})}function Al(e,t,n,r,i,s,l){var Y,it,B,X;var a=(i&Gs)!==0,c=(i&(kr|Tr))!==0,u=e.length,d=t.items,h=t.first,f=h,m,v=null,w,y=[],p=[],P,A,N,I;if(a)for(I=0;I<u;I+=1)P=e[I],A=s(P,I),N=d.get(A),N!==void 0&&((Y=N.a)==null||Y.measure(),(w??(w=new Set)).add(N));for(I=0;I<u;I+=1){if(P=e[I],A=s(P,I),N=d.get(A),N===void 0){var G=f?f.e.nodes_start:n;v=Pl(G,t,v,v===null?t.first:v.next,P,A,I,r,i,l),d.set(A,v),y=[],p=[],f=v.next;continue}if(c&&Ml(N,P,I,i),N.e.f&wn&&(Ko(N.e),a&&((it=N.a)==null||it.unfix(),(w??(w=new Set)).delete(N))),N!==f){if(m!==void 0&&m.has(N)){if(y.length<p.length){var J=p[0],z;v=J.prev;var tt=y[0],V=y[y.length-1];for(z=0;z<y.length;z+=1)ri(y[z],J,n);for(z=0;z<p.length;z+=1)m.delete(p[z]);Dn(t,tt.prev,V.next),Dn(t,v,tt),Dn(t,V,J),f=J,v=V,I-=1,y=[],p=[]}else m.delete(N),ri(N,f,n),Dn(t,N.prev,N.next),Dn(t,N,v===null?t.first:v.next),Dn(t,v,N),v=N;continue}for(y=[],p=[];f!==null&&f.k!==A;)f.e.f&wn||(m??(m=new Set)).add(f),p.push(f),f=f.next;if(f===null)continue;N=f}y.push(N),v=N,f=N.next}if(f!==null||m!==void 0){for(var pt=m===void 0?[]:Mr(m);f!==null;)f.e.f&wn||pt.push(f),f=f.next;var lt=pt.length;if(lt>0){var Q=i&Ti&&u===0?n:null;if(a){for(I=0;I<lt;I+=1)(B=pt[I].a)==null||B.measure();for(I=0;I<lt;I+=1)(X=pt[I].a)==null||X.fix()}Nl(t,pt,Q,d)}}a&&Wr(()=>{var ot;if(w!==void 0)for(N of w)(ot=N.a)==null||ot.apply()}),Qt.first=t.first&&t.first.e,Qt.last=v&&v.e}function Ml(e,t,n,r){r&kr&&So(e.v,t),r&Tr?So(e.i,n):e.i=n}function Pl(e,t,n,r,i,s,l,a,c,u){var d=(c&kr)!==0,h=(c&Xs)===0,f=d?h?er(i):Xe(i):i,m=c&Tr?Xe(l):l,v={i:m,v:f,k:s,a:null,e:null,prev:n,next:r};try{return v.e=no(()=>a(e,f,m,u),Bi),v.e.prev=n&&n.e,v.e.next=r&&r.e,n===null?t.first=v:(n.next=v,n.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function ri(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==r;){var l=nr(s);i.before(s),s=l}}function Dn(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Wt(e,t,n,r,i){var a;var s=(a=t.$$slots)==null?void 0:a[n],l=!1;s===!0&&(s=t[n==="default"?"children":n],l=!0),s===void 0?i!==null&&i(e):s(e,l?()=>r:r)}function Gr(e){const t={};e.children&&(t.default=!0);for(const n in e.$$slots)t[n]=!0;return t}function vo(e,t,n){var r=e,i,s;or(()=>{i!==(i=t())&&(s&&(Co(s),s=null),i&&(s=no(()=>n(r,i))))},tr)}function Yn(e,t,n){Hn(()=>{var r=le(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var i=!1,s={};co(()=>{var l=n();nt(l),i&&Ir(s,l)&&(s=l,r.update(l))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function K(e,t,n,r){var i=e.__attributes??(e.__attributes={});i[t]!==(i[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[Ps]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Dl(e).includes(t)?e[t]=n:e.setAttribute(t,n))}var ii=new Map;function Dl(e){var t=ii.get(e.nodeName);if(t)return t;ii.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=Ai(r);for(var s in n)n[s].set&&t.push(s);r=Pr(r)}return t}function as(e,t,n){var r=e.__className,i=Il(t);(r!==i||Bi)&&(t==null?e.removeAttribute("class"):e.className=i,e.__className=i)}function Il(e,t){return(e??"")+""}function Ht(e,t,n){if(n){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function H(e,t,n,r){var i=e.__styles??(e.__styles={});i[t]!==n&&(i[t]=n,n==null?e.style.removeProperty(t):e.style.setProperty(t,n,""))}function Ll(e,t,n=t){var r=Io();xl(e,"input",i=>{var s=i?e.defaultValue:e.value;if(s=fr(e)?hr(s):s,n(s),r&&s!==(s=t())){var l=e.selectionStart,a=e.selectionEnd;e.value=s??"",a!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(a,e.value.length))}}),le(t)==null&&e.value&&n(fr(e)?hr(e.value):e.value),co(()=>{var i=t();fr(e)&&i===hr(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function fr(e){var t=e.type;return t==="number"||t==="range"}function hr(e){return e===""?null:+e}function Xr(e,t,n){var r=xn(e,t);r&&r.set&&(e[t]=n,zr(()=>{e[t]=null}))}var Ln,eo,Mo,Zo,cs;const Jo=class Jo{constructor(t){ho(this,Zo);ho(this,Ln,new WeakMap);ho(this,eo);ho(this,Mo);dr(this,Mo,t)}observe(t,n){var r=pn(this,Ln).get(t)||new Set;return r.add(n),pn(this,Ln).set(t,r),$r(this,Zo,cs).call(this).observe(t,pn(this,Mo)),()=>{var i=pn(this,Ln).get(t);i.delete(n),i.size===0&&(pn(this,Ln).delete(t),pn(this,eo).unobserve(t))}}};Ln=new WeakMap,eo=new WeakMap,Mo=new WeakMap,Zo=new WeakSet,cs=function(){return pn(this,eo)??dr(this,eo,new ResizeObserver(t=>{for(var n of t){Jo.entries.set(n.target,n);for(var r of pn(this,Ln).get(n.target)||[])r(n)}}))},Vr(Jo,"entries",new WeakMap);let Sr=Jo;var kl=new Sr({box:"border-box"});function si(e,t,n){var r=kl.observe(e,()=>n(e[t]));Hn(()=>(le(()=>n(e[t])),r))}function li(e,t){return e===t||(e==null?void 0:e[ln])===t}function oo(e={},t,n,r){return Hn(()=>{var i,s;return co(()=>{i=s,s=[],le(()=>{e!==n(...s)&&(t(e,...s),i&&li(n(...i),e)&&t(null,...i))})}),()=>{Wr(()=>{s&&li(n(...s),e)&&t(null,...s)})}}),e}function xo(e){return function(...t){var n=t[0];n.target===this&&(e==null||e.apply(this,t))}}function sn(e){return function(...t){var n=t[0];return n.stopPropagation(),e==null?void 0:e.apply(this,t)}}function ze(e){return function(...t){var n=t[0];return n.preventDefault(),e==null?void 0:e.apply(this,t)}}function fe(e=!1){const t=Mt,n=t.l.u;if(!n)return;let r=()=>nt(t.s);if(e){let i=0,s={};const l=Ze(()=>{let a=!1;const c=t.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],a=!0);return a&&i++,i});r=()=>o(l)}n.b.length&&nl(()=>{ai(t,r),Go(n.b)}),Ho(()=>{const i=le(()=>n.m.map(Ns));return()=>{for(const s of i)typeof s=="function"&&s()}}),n.a.length&&Ho(()=>{ai(t,r),Go(n.a)})}function ai(e,t){if(e.l.s)for(const n of e.l.s)o(n);t()}function se(e,t){var s;var n=(s=e.$$events)==null?void 0:s[t.type],r=Po(n)?n.slice():n==null?[]:[n];for(var i of r)i.call(this,t)}function Fr(e,t,n){if(e==null)return t(void 0),n&&n(void 0),bn;const r=le(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Vn=[];function Vo(e,t){return{subscribe:C(e,t).subscribe}}function C(e,t=bn){let n=null;const r=new Set;function i(a){if(Ir(e,a)&&(e=a,n)){const c=!Vn.length;for(const u of r)u[1](),Vn.push(u,e);if(c){for(let u=0;u<Vn.length;u+=2)Vn[u][0](Vn[u+1]);Vn.length=0}}}function s(a){i(a(e))}function l(a,c=bn){const u=[a,c];return r.add(u),r.size===1&&(n=t(i,s)||bn),a(e),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:l}}function bo(e,t,n){const r=!Array.isArray(e),i=r?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=t.length<2;return Vo(n,(l,a)=>{let c=!1;const u=[];let d=0,h=bn;const f=()=>{if(d)return;h();const v=t(r?u[0]:u,l,a);s?l(v):h=typeof v=="function"?v:bn},m=i.map((v,w)=>Fr(v,y=>{u[w]=y,d&=~(1<<w),c&&f()},()=>{d|=1<<w}));return c=!0,f(),function(){Go(m),h(),c=!1}})}function k(e){let t;return Fr(e,n=>t=n)(),t}let To=!1,Cr=Symbol();function E(e,t,n){const r=n[t]??(n[t]={store:null,source:er(void 0),unsubscribe:bn});if(r.store!==e&&!(Cr in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=bn;else{var i=!0;r.unsubscribe=Fr(e,s=>{i?r.source.v=s:_(r.source,s)}),i=!1}return e&&Cr in n?k(e):o(r.source)}function yn(e,t,n){let r=n[t];return r&&r.store!==e&&(r.unsubscribe(),r.unsubscribe=bn),e}function U(e,t){return e.set(t),t}function xe(){const e={};function t(){zr(()=>{for(var n in e)e[n].unsubscribe();Ni(e,Cr,{enumerable:!1,value:!0})})}return[e,t]}function wo(e,t,n){return e.set(n),t}function Tl(e,t,n=1){return e.set(t+n),t}function Rl(e,t,n=1){const r=t+n;return e.set(r),r}function Ol(e){var t=To;try{return To=!1,[e(),To]}finally{To=t}}const zl={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(go(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];go(i)&&(i=i());const s=xn(i,t);if(s&&s.set)return s.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(go(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=xn(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===ln||t===Ii)return!1;for(let n of e.props)if(go(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props){go(n)&&(n=n());for(const r in n)t.includes(r)||t.push(r)}return t}};function Hr(...e){return new Proxy({props:e},zl)}function ci(e){for(var t=Qt,n=Qt;t!==null&&!(t.f&(dn|io));)t=t.parent;try{return un(t),e()}finally{un(n)}}function g(e,t,n,r){var J;var i=(n&Fs)!==0,s=!so||(n&Hs)!==0,l=(n&qs)!==0,a=(n&js)!==0,c=!1,u;l?[u,c]=Ol(()=>e[t]):u=e[t];var d=ln in e||Ii in e,h=l&&(((J=xn(e,t))==null?void 0:J.set)??(d&&t in e&&(z=>e[t]=z)))||void 0,f=r,m=!0,v=!1,w=()=>(v=!0,m&&(m=!1,a?f=le(r):f=r),f);u===void 0&&r!==void 0&&(h&&s&&Ts(),u=w(),h&&h(u));var y;if(s)y=()=>{var z=e[t];return z===void 0?w():(m=!0,v=!1,z)};else{var p=ci(()=>(i?Ze:ke)(()=>e[t]));p.f|=Pi,y=()=>{var z=o(p);return z!==void 0&&(f=void 0),z===void 0?f:z}}if(!(n&Ks))return y;if(h){var P=e.$$legacy;return function(z,tt){return arguments.length>0?((!s||!tt||P||c)&&h(tt?y():z),z):y()}}var A=!1,N=!1,I=er(u),G=ci(()=>Ze(()=>{var z=y(),tt=o(I);return A?(A=!1,N=!0,tt):(N=!1,I.v=z)}));return i||(G.equals=Lr),function(z,tt){if(In!==null&&(A=N,y(),o(I)),arguments.length>0){const V=tt?o(G):s&&l?$n(z):z;return G.equals(V)||(A=!0,_(I,V),v&&f!==void 0&&(f=V),le(()=>o(G))),z}return o(G)}}function Qe(e){Mt===null&&lo(),so&&Mt.l!==null?Kr(Mt).m.push(e):Ho(()=>{const t=le(e);if(typeof t=="function")return t})}function lr(e){Mt===null&&lo(),Qe(()=>()=>le(e))}function Bl(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function ro(){const e=Mt;return e===null&&lo(),(t,n,r)=>{var s;const i=(s=e.s.$$events)==null?void 0:s[t];if(i){const l=Po(i)?i.slice():[i],a=Bl(t,n,r);for(const c of l)c.call(e.x,a);return!a.defaultPrevented}return!0}}function Wl(e){Mt===null&&lo(),Mt.l===null&&ki(),Kr(Mt).b.push(e)}function us(e){Mt===null&&lo(),Mt.l===null&&ki(),Kr(Mt).a.push(e)}function Kr(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Yl="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Yl);Ys();const Gl="modulepreload",Xl=function(e,t){return new URL(e,t).href},ui={},po=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const l=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=Xl(u,r),u in ui)return;ui[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!r)for(let v=l.length-1;v>=0;v--){const w=l[v];if(w.href===u&&(!d||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Gl,d||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((v,w)=>{m.addEventListener("load",v),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(l){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=l,window.dispatchEvent(a),!a.defaultPrevented)throw l}return i.then(l=>{for(const a of l||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};function Fl(e,t){const n=e.clientX-t.clientX,r=e.clientY-t.clientY;return Math.sqrt(n*n+r*r)}function Hl(){const e=()=>Math.floor(Math.random()*256),t=e(),n=e(),r=e();return`rgb(${t},${n},${r})`}const Kl={"(":"round","[":"square","([":"stadium","[[":"subroutine","[(":"cylindrical","((":"circle","{":"rhombus","{{":"hexagon"},di={"-":"straight","~":"bezier"},ds={"(":")","[":"]","{":"}"},ql=/[-=~]*>(?:\s*\|(.+?)\|)?/g,jl=e=>{const t=e.split(`
`),n={parentNodes:[],nodeList:{}};for(const r of t){const{parentNodes:i,childNodes:s,edge:l}=Ul(r);for(const a of i){n.nodeList[a.id]||n.parentNodes.push(a);for(const c of s){if(n.nodeList[a.id]){if(n.nodeList[c.id]&&n.nodeList[c.id].children.some(({node:u})=>u.id===a.id))throw new Error("Circular reference detected");n.nodeList[a.id].children.push({node:n.nodeList[c.id]||c,...l})}else a.children.push({node:n.nodeList[c.id]||c,...l}),n.nodeList[a.id]=a;n.nodeList[c.id]?n.nodeList[c.id].parents.push({node:n.nodeList[a.id]||a}):(c.parents.push({node:n.nodeList[a.id]||a}),n.nodeList[c.id]=c),n.parentNodes=n.parentNodes.filter(u=>u.id!==c.id)}}}return n},Ul=e=>{const t=[],n=[],r=e.trim();let i="";const s=r.match(ql);if(s)i=s[0];else throw new Error("Invalid edge");const[l,a]=r.split(i);for(const u of l.split("&"))t.push(fi(u));for(const u of a.split("&"))n.push(fi(u));const c=Vl(i);return{parentNodes:t,childNodes:n,edge:c}},fi=e=>{e=e.trim();const t=e[0],n=e.slice(1);let r="",i="";const s="Default",l={shape:""},a=[];for(let c=0;c<n.length;c++)if($l(n[c]))a.push(n[c]);else if(ds[a[a.length-1]]===n[c]){i=Kl[a.join("")];break}else r+=n[c];return l.shape=i,l.content=r,{id:t,data:l,type:s,children:[],parents:[],depth:0,nesting:0}},Vl=e=>{e=e.trim();let t="";const[n,r]=e.split("|"),i=n[0];if(i in di)t=di[i];else throw new Error("Not a valid edge type");return r?{shape:t,content:r.trim(),length:Math.floor((n.trim().length-1)/2)}:{shape:t,length:Math.floor((n.trim().length-1)/2)}};function $l(e){return e in ds}function Zl(){return Math.random().toString(36).substring(7)}function Jl(e,t){const n=Math.sign(e.x).toString(),r=Math.sign(e.y).toString(),i=Math.sign(t.x).toString(),s=Math.sign(t.y).toString();return`${n}${r}${i}${s}`}function Ql(e,t){return{1001:`a ${e} ${e} 0 0 1 ${e} ${e}`,"0110":`a ${e} ${e} 0 0 0 ${e} ${e}`,"100-1":`a ${e} ${e} 0 0 0 ${e} -${e}`,"0-110":`a ${e} ${e} 0 0 1 ${e} -${e}`,"-1001":`a ${e} ${e} 0 0 0 -${e} ${e}`,"01-10":`a ${e} ${e} 0 0 1 -${e} ${e}`,"-100-1":`a ${e} ${e} 0 0 1 -${e} -${e}`,"0-1-10":`a ${e} ${e} 0 0 0 -${e} -${e}`}[t]||""}function hi(e,t){const n=t*(Math.PI/180),r=e.x*Math.cos(n)-e.y*Math.sin(n),i=e.x*Math.sin(n)+e.y*Math.cos(n);return{x:r,y:i}}const gi=(e,t,n,r)=>e+` l ${t} ${n} `+r,Te=C({x:0,y:0}),Er=C(0),Fe=C(!1),Nr=C(!1),fs=Vo({x:0,y:0},e=>{const t=s=>{e({x:s.clientX,y:s.clientY})},n=s=>{if(s.touches.length===2){const l=Fl(s.touches[0],s.touches[1]);Er.set(l);const a={x:s.touches[0].clientX,y:s.touches[0].clientY};e(a)}else if(s.touches.length===1){const l=s.touches[0].clientX,a=s.touches[0].clientY;e({x:l,y:a}),Fe.set(!0)}},r=s=>{n(s),window.addEventListener("touchend",i),window.addEventListener("touchmove",n)},i=()=>{Fe.set(!1),Er.set(0),window.removeEventListener("touchmove",n)};return document.addEventListener("mousemove",t),window.addEventListener("touchstart",r,!0),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("touchstart",r),window.removeEventListener("touchmove",n),window.removeEventListener("touchend",i)}});var ta=Kt('<div class="selection-border svelte-10ds4jd"><div class="selection-box svelte-10ds4jd"></div></div>');function ea(e,t){oe(t,!1);const[n,r]=xe(),i=()=>E(I,"$groups",n),s=()=>E(fs,"$cursorPositionRaw",n),l=()=>E(o(a),"$selectedNodes",n),a=x(),c=x(),u=x(),d=x(),h=x(),f=x(),m=x(),v=x(),w=x();let y=g(t,"graph",8),p=g(t,"anchor",8),P=g(t,"adding",8,!1),A=g(t,"creating",8,!1),N=g(t,"color",8,null);const{groups:I}=y();let G,J=x();Qe(z);function z(){G=Array.from(document.querySelectorAll(".svelvet-node")).map(Q=>{const{top:Y,left:it,width:B,height:X}=Q.getBoundingClientRect();return{id:Q.id,top:Y,left:it,width:B,height:X}})}function tt(){if(!G)return;const lt=G.reduce((Q,Y)=>{if(o(h)+p().left<=Y.left&&o(d)+p().top<=Y.top&&o(h)+p().left+Math.abs(o(u))>=Y.left+Y.width&&o(d)+p().top+Math.abs(o(c))>=Y.top+Y.height){const it=Y.id,B=y().nodes.get(it);if(!B)return Q;Q.push(B)}return Q},[]);P()?lt.forEach(Q=>{l().add(Q)}):U(o(a),new Set(lt)),U(o(a),l())}b(()=>i(),()=>{yn(_(a,i().selected.nodes),"$selectedNodes",n)}),b(()=>(s(),nt(p())),()=>{_(c,s().y-p().y-p().top)}),b(()=>(s(),nt(p())),()=>{_(u,s().x-p().x-p().left)}),b(()=>(nt(p()),o(c)),()=>{_(d,Math.min(p().y,p().y+o(c)))}),b(()=>(nt(p()),o(u)),()=>{_(h,Math.min(p().x,p().x+o(u)))}),b(()=>o(d),()=>{_(f,`${o(d)}px`)}),b(()=>o(h),()=>{_(m,`${o(h)}px`)}),b(()=>o(c),()=>{_(v,`${Math.abs(o(c))}px`)}),b(()=>o(u),()=>{_(w,`${Math.abs(o(u))}px`)}),b(()=>(o(u),o(c)),()=>{(o(u)||o(c))&&tt()}),Ne(),fe();var V=ta(),pt=Ut(V);oo(pt,lt=>_(J,lt),()=>o(J)),Vt(()=>{Ht(V,"creating",A()),H(V,"--prop-selection-box-color",N()),H(V,"height",o(v)),H(V,"width",o(w)),H(V,"top",o(f)),H(V,"left",o(m)),Ht(pt,"creating",A())}),O(e,V),re(),r()}const na=3,oa=.1,ra=10,ia=100,sa=50,la="#000",aa="#fff",ca="12px",ua=22,da=1.4,fa=40,_o={north:{x:0,y:-1},south:{x:0,y:1},east:{x:1,y:0},west:{x:-1,y:0},self:{x:0,y:0}};var ha=fn('<circle class="background-dot svelte-rryw83"></circle>'),ga=fn('<line class="background-line svelte-rryw83"></line><line class="background-line svelte-rryw83"></line>',1),va=fn('<circle class="background-dot svelte-rryw83"></circle>'),pa=fn('<line class="background-line svelte-rryw83"></line><line class="background-line svelte-rryw83"></line>',1),ma=fn('<pattern id="graph-coarse-pattern" patternUnits="userSpaceOnUse"><!></pattern>'),_a=fn('<rect width="100%" height="100%" fill="url(#graph-coarse-pattern)"></rect>'),ya=Kt('<div id="background-wrapper" class="svelte-rryw83"><svg class="svelte-rryw83"><defs><pattern id="graph-pattern" patternUnits="userSpaceOnUse"><!></pattern><!></defs><rect width="100%" height="100%" fill="url(#graph-pattern)"></rect><!></svg></div>');function xa(e,t){oe(t,!1);const[n,r]=xe(),i=()=>E(G,"$translationStore",n),s=()=>E(I,"$scaleStore",n),l=x(),a=x(),c=x(),u=x(),d=x(),h=It("graph");let f=g(t,"style",8,"dots"),m=g(t,"gridWidth",8,ua),v=g(t,"dotSize",8,da),w=g(t,"bgColor",8,null),y=g(t,"dotColor",8,null),p=g(t,"opacityThreshold",8,3),P=g(t,"majorGrid",8,0),A=g(t,"minOpacity",8,.4);const N=h.transforms,I=N.scale,G=N.translation;let J=x(),z=x(),tt=x(),V=x(),pt=x(),lt=x(1),Q=x(1);b(()=>i(),()=>{_(l,i())}),b(()=>s(),()=>{_(a,s())}),b(()=>(o(a),nt(m())),()=>{_(c,o(a)*m())}),b(()=>(o(a),nt(v())),()=>{_(u,o(a)*v()/2)}),b(()=>o(c),()=>{_(d,o(c)/2)}),b(()=>(o(z),o(J),o(tt),o(u),o(a),o(l),nt(p()),nt(A())),()=>{var ht,W;_(z,((ht=o(J))==null?void 0:ht.offsetWidth)||0),_(tt,((W=o(J))==null?void 0:W.offsetHeight)||0),_(V,(o(z)+o(u))*(1-o(a))/2+o(l).x),_(pt,(o(tt)+o(u))*(1-o(a))/2+o(l).y),_(lt,o(a)>p()?1:o(a)/p()+A()),_(Q,o(a)>p()/3?1:o(a)/(p()/3)+A())}),Ne(),fe();var Y=ya(),it=Ut(Y),B=Ut(it),X=Ut(B),ot=Ut(X);{var gt=ht=>{var W=ha();Vt(()=>{K(W,"r",o(u)),K(W,"cx",o(d)),K(W,"cy",o(d)),H(W,"--calculated-dot-color",y())}),O(ht,W)},M=ht=>{var W=At(),q=ct(W);{var zt=ut=>{var F=ga(),yt=ct(F);K(yt,"y1",0);var xt=dt(yt);K(xt,"x1",0),Vt(()=>{K(yt,"x1",o(d)),K(yt,"x2",o(d)),K(yt,"y2",o(c)),K(yt,"stroke-width",o(u)),H(yt,"--calculated-dot-color",y()),K(xt,"y1",o(d)),K(xt,"y2",o(d)),K(xt,"x2",o(c)),K(xt,"stroke-width",o(u)),H(xt,"--calculated-dot-color",y())}),O(ut,F)};Lt(q,ut=>{f()==="lines"&&ut(zt)},!0)}O(ht,W)};Lt(ot,ht=>{f()==="dots"?ht(gt):ht(M,!1)})}var Ot=dt(X);{var et=ht=>{var W=ma(),q=Ut(W);{var zt=F=>{var yt=va();Vt(()=>{K(yt,"r",o(u)*2),K(yt,"cx",o(d)),K(yt,"cy",o(d)),H(yt,"--calculated-dot-color",y())}),O(F,yt)},ut=F=>{var yt=At(),xt=ct(yt);{var mt=vt=>{var _t=pa(),ft=ct(_t);K(ft,"y1",0);var $t=dt(ft);K($t,"x1",0),Vt(()=>{K(ft,"x1",o(d)),K(ft,"x2",o(d)),K(ft,"y2",o(c)*P()),K(ft,"stroke-width",o(u)*1.2),H(ft,"--calculated-dot-color",y()),K($t,"y1",o(d)),K($t,"y2",o(d)),K($t,"x2",o(c)*P()),K($t,"stroke-width",o(u)*1.2),H($t,"--calculated-dot-color",y())}),O(vt,_t)};Lt(xt,vt=>{f()==="lines"&&vt(mt)},!0)}O(F,yt)};Lt(q,F=>{f()==="dots"?F(zt):F(ut,!1)})}Vt(()=>{K(W,"x",o(V)),K(W,"y",o(pt)),K(W,"width",o(c)*P()),K(W,"height",o(c)*P())}),O(ht,W)};Lt(Ot,ht=>{P()>0&&ht(et)})}var L=dt(B),Pt=dt(L);{var Yt=ht=>{var W=_a();Vt(()=>K(W,"opacity",o(Q))),O(ht,W)};Lt(Pt,ht=>{P()>0&&ht(Yt)})}oo(Y,ht=>_(J,ht),()=>o(J)),Vt(()=>{H(Y,"--calculated-background-color",w()),K(X,"x",o(V)),K(X,"y",o(pt)),K(X,"width",o(c)),K(X,"height",o(c)),K(L,"opacity",o(lt))}),O(e,Y),re(),r()}var ba=Kt('<div role="button" tabindex="0" class="bounding-box-border svelte-1e5jg43"><div class="bounding-box svelte-1e5jg43"></div></div>');function wa(e,t){oe(t,!1);const[n,r]=xe(),i=()=>E(d(),"$position",n),s=()=>E(m,"$width",n),l=()=>E(v,"$height",n),a=()=>E(h(),"$color",n),c=x();let u=g(t,"dimensions",8),d=g(t,"position",8),h=g(t,"color",8),f=g(t,"groupName",8);const{width:m,height:v}=u(),w=ro();function y(){w("groupClick",{groupName:f()})}b(()=>nt(f()),()=>{_(c,`${f()}-bounding-box`)}),Ne(),fe();var p=ba(),P=Ut(p);Vt(()=>{K(p,"id",o(c)),K(p,"style",`border: solid 4px ${a()??""};`),H(p,"top",`${i().y}px`),H(p,"left",`${i().x}px`),H(p,"width",`${s()}px`),H(p,"height",`${l()}px`),H(P,"background-color",a())}),Tt("contextmenu",p,ze(sn(function(A){se.call(this,t,A)}))),Tt("mousedown",p,ze(sn(y))),O(e,p),re(),r()}function Sa(e,t){oe(t,!1);const[n,r]=xe(),i=()=>E(l,"$groupBoxes",n),l=It("graph").groupBoxes;fe();var a=At(),c=ct(a);rn(c,1,()=>Array.from(i()),([u,d])=>u,(u,d)=>{let h=()=>o(d)[0];wa(u,Hr(()=>o(d)[1],{get groupName(){return h()},$$events:{groupClick(m){se.call(this,t,m)}}}))}),O(e,a),re(),r()}function gr(e){const t=e.style.width,n=e.style.height;e.style.width="fit-content",e.style.height="fit-content";const r=e.offsetWidth,i=e.offsetHeight;return e.style.width=t,e.style.height=n,[r,i]}function hs(e,t,n,r,i){const s={x:0,y:0},l=r.x-i.left-i.width/2,a=r.y-i.top-i.height/2,c=(l-n.x)/e,u=(a-n.y)/e;return s.x=l-c*t,s.y=a-u*t,s}function gs(e,t,n){const r=t*n,i=e-r;return Number(Math.max(oa,Math.min(na,i)).toFixed(9))}const Lo=(e,t,n,r,i,s,l)=>{const{clientX:a,clientY:c}=e,u=s,d=a-n,h=c-t,f=l.x,m=l.y,v=r*(1-s)/2,w=i*(1-s)/2,y=d-f-v,p=h-m-w,P=y/u,A=p/u;return{x:P,y:A}};function Ca(e,t,n){const{top:r,left:i,width:s,height:l}=k(e),a=k(t.scale),c=k(t.translation);return{scaled:Lo({clientX:n.x,clientY:n.y},r,i,s,l,a,c),scale:a}}function Ea(e,t,n){const{scale:r,translation:i}=n,s=k(r),l=k(i),a=t.x-e.x,c=t.y-e.y,u=l.x+a*s,d=l.y+c*s;return{x:u,y:d}}function Na(e,t){return e.x*t.x+e.y*t.y}function Aa(e,t,n){const r=[],i=t.x-e.x,s=t.y-e.y,l=Pa(e.direction,t.direction),a=Na(e.direction,t.direction)===0,c=Ma(e,t),u=ie(e.direction,-1,-1),d=ie(t.direction,-1,-1),h={x:Math.abs(e.direction.y),y:Math.abs(e.direction.x)},f=ie(e.direction,i-n*e.direction.x*(a?1:l?0:2),s-n*e.direction.y*(a?1:l?0:2)),m=ie(t.direction,i+n*t.direction.x*(a?1:l?0:2),s+n*t.direction.y*(a?1:l?0:2)),v=Math.sign(f.x)===-1||Math.sign(f.y)===-1,w=Math.sign(m.x)===1||Math.sign(m.y)===1,y=Math.abs(i),p=Math.abs(s),P=ie(e.direction,n,n),A=ie(d,n,n),N=ie(t.direction,n,n),I=ie(e.direction,y,p),G=ie(d,y,p),J=ie(e.direction,y/2,p/2),z=ie(d,y/2,p/2),tt=ie(h,i,s),V=!c&&!w&&!v,pt=e.x+P.x,lt=e.y+P.y,Q=t.x+N.x,Y=t.y+N.y;if(v&&r.push(P),c&&!w&&!v)r.push(I),r.push(G);else if(l)v||r.push(ie(e.direction,n+y,n+p)),r.push(tt),w||r.push(ie(d,n+y,n+p));else if(V)r.push(J),r.push(tt),r.push(z);else if(v&&w)if(a){const it=Math.abs(pt-Q),B=Math.abs(lt-Y);r.push(ie(t.direction,y<n*2?t.direction.x*(i+t.direction.x*n):y+n,p<n*2?t.direction.y*(s+t.direction.y*n):p+n)),r.push(ie(u,it,B))}else{const it=Math.abs(pt-Q),B=Math.abs(lt-Y);r.push(ie(h,i/2,s/2)),r.push(ie(t.direction,it,B)),r.push(ie(h,i/2,s/2))}else if(v){const it=Math.abs(pt-t.x),B=Math.abs(lt-t.y);r.push(ie(d,y<n*2?y-n:y/2,p<n*2?p-n:p/2)),r.push(ie(u,it,B)),r.push(ie(d,Math.max(n,y/2),Math.max(n,p/2)))}else if(w){const it=Math.abs(Q-e.x),B=Math.abs(Y-e.y);r.push(ie(e.direction,Math.max(n,y/2),Math.max(n,p/2))),r.push(ie(t.direction,it,B)),r.push(ie(e.direction,y<n*2?y-n:y/2,p<n*2?p-n:p/2))}return w&&r.push(A),r}function Ma(e,t){const{x:n,y:r}=e.direction,{x:i,y:s}=t.direction,l=t.x-e.x,a=t.y-e.y;return n*s===i*r?!1:Math.sign(a)===Math.sign(r+s)!=(Math.sign(l)===Math.sign(n+i))}function ie(e,t,n){return{x:e.x*t,y:e.y*n}}function Pa(e,t){return e.x===t.x&&e.y===t.y}function Da(e,t){const{width:n,height:r}=e,{top:i,left:s,right:l,bottom:a}=t,c=l-s,u=a-i;if(!c||!u)return{x:null,y:null,scale:null};const d=s+c/2,h=i+u/2,f=Math.min(n/c,r/u)*.8,m=n/2,v=r/2,w=m-d,y=v-h;return{x:w*f,y:y*f,scale:f}}const Ro=(e,t,n)=>Math.min(Math.abs(e||t)/2,n);function vr(e,t){const r=e.getTotalLength()*t;return e.getPointAtLength(r)}function $o(){const e=new Map,{subscribe:t,set:n,update:r}=C(e);return{subscribe:t,set:n,update:r,add:(s,l)=>(r(a=>(a.set(l,s),a)),e),get:s=>e.get(s)||null,getAll:()=>Array.from(e.values()),delete:s=>{let l=!1;return r(a=>(a.delete(s),l=!0,a)),l},count:()=>e.size}}function Ia(e){const{id:t,inputs:n,outputs:r,resizable:i,dimensions:s,editable:l,direction:a,zIndex:c,position:u,selectionColor:d,borderWidth:h,edge:f}=e,{bgColor:m,borderColor:v,rotation:w,borderRadius:y,connections:p,textColor:P,locked:A,group:N}=e,I=$o(),G=(tt="self")=>{k(I).forEach(V=>{(tt==="self"||k(V.direction)===tt)&&V.recalculatePosition()})};return{id:typeof t=="string"&&t.slice(0,2)==="N-"?t:`N-${t}`,position:C({x:(u==null?void 0:u.x)||0,y:(u==null?void 0:u.y)||0}),dimensions:{width:C((s==null?void 0:s.width)||0),height:C((s==null?void 0:s.height)||(s==null?void 0:s.width))},group:C(N||null),locked:C(A||!1),inputs:C(n),outputs:C(r),recalculateAnchors:G,rotation:C(w||0),moving:C(!1),resizingWidth:C(!1),resizingHeight:C(!1),rotating:C(!1),editable:C(l||!1),resizable:C(i),anchors:I,zIndex:C(c||2),collapsed:C(!1),edge:f||null,borderRadius:C(y),bgColor:C(m||null),direction:C(a),label:C(e.label||""),borderColor:C(v||null),borderWidth:C(h),selectionColor:C(d||null),textColor:C(P||null),connections:C(p)}}function La(e,t){const n=[e,t].sort();return`${n[0]}+${n[1]}`}function vi(e,t,n){var a,c,u,d,h;const{source:r,target:i}=e,l={id:r.id&&i.id?La(r.id,i.id):"cursor",target:e.target,source:e.source,component:t,type:C((n==null?void 0:n.type)||null),color:(n==null?void 0:n.color)||C(null),width:C((n==null?void 0:n.width)||0),animated:C((n==null?void 0:n.animated)||!1),rendered:C(!1),start:(n==null?void 0:n.start)||null,end:(n==null?void 0:n.end)||null};if(n!=null&&n.disconnect&&(l.disconnect=!0),n!=null&&n.label){const f={text:C(n==null?void 0:n.label.text),color:C(((a=n==null?void 0:n.label)==null?void 0:a.color)||la),textColor:C(((c=n==null?void 0:n.label)==null?void 0:c.textColor)||aa),fontSize:C(((u=n==null?void 0:n.label)==null?void 0:u.fontSize)||ca),dimensions:{width:C(((d=n==null?void 0:n.label.dimensions)==null?void 0:d.width)||ia),height:C(((h=n==null?void 0:n.label.dimensions)==null?void 0:h.height)||sa)},borderRadius:C((n==null?void 0:n.label.borderRadius)||ra)};l.label=f}return l}function ka(){const e=new Map,t=new Set,{subscribe:n,set:r,update:i}=C(e),s={subscribe:n,set:r,update:i,add:(l,a)=>{if(typeof a!="string"){const c=Array.from(a),u=c[0],d=c[1];if(u.connected.update(h=>h.add(d)),d.connected.update(h=>h.add(u)),s.match(...Array.from(a)).length)return;t.forEach(h=>h(l,"connection"))}i(c=>(c.set(a,l),c))},getAll:()=>Array.from(e.values()),get:l=>e.get(l)||null,match:(...l)=>Array.from(e.keys()).filter(a=>a==="cursor"?!1:l.every(c=>c?a.has(c):!0)),fetch:(l,a)=>{const c=Array.from(e.keys()).filter(u=>u==="cursor"?!1:[l,a].every(d=>d?u.has(d):!0))[0];return e.get(c)||null},delete:l=>{if(typeof l!="string"){const c=Array.from(l),u=c[0],d=c[1];u.connected.update(h=>(h.delete(d),h)),d.connected.update(h=>(h.delete(u),h))}let a=!1;return i(c=>{const u=c.get(l);return u&&(c.delete(l),a=!0,typeof l!="string"&&t.forEach(d=>d(u,"disconnection"))),c}),a},onEdgeChange:l=>(t.add(l),()=>t.delete(l)),count:()=>e.size};return s}function Ta(e,t,n,r){return bo([e,t,n,r],([s,l,a,c])=>{const u={clientX:s.x,clientY:s.y};return Lo(u,l.top,l.left,l.width,l.height,c,a)})}function Ra(e,t,n,r){const i=C({top:1/0,left:1/0,right:-1/0,bottom:-1/0}),s=C({top:1/0,left:1/0,right:-1/0,bottom:-1/0});let l,a=k(t),c=k(n),u=k(r),d=a.width/c,h=a.height/c;function f(){const{x:v,y:w}=Lo({clientX:a.left,clientY:a.top},a.top,a.left,a.width,a.height,c,u),y=k(s);i.set({top:Math.min(y.top,w),left:Math.min(y.left,v),right:Math.max(y.right,v+d),bottom:Math.max(y.bottom,h+w)})}function m(v=!1){let w=1/0,y=1/0,p=-1/0,P=-1/0;for(const A of e.getAll()){console.log("dentro del for, este es e node:",A);const{x:N,y:I}=k(A.position),G=k(A.dimensions.width),J=k(A.dimensions.height);y=Math.min(y,N),w=Math.min(w,I),p=Math.max(p,N+G),P=Math.max(P,I+J)}s.set({top:w,left:y,right:p,bottom:P}),f(),v&&(l=requestAnimationFrame(()=>m(v)))}return e.subscribe(()=>{console.log("dentro del nodes.subscribe...........Aqui no estan llegando los nodes"),m()}),Nr.subscribe(v=>{v&&m(v),v||cancelAnimationFrame(l)}),Fe.subscribe(v=>{v&&m(v),v||cancelAnimationFrame(l)}),t.subscribe(()=>{a=k(t),d=a.width/c,h=a.height/c,f()}),n.subscribe(()=>{c=k(n),d=a.width/c,h=a.height/c,f()}),r.subscribe(()=>{u=k(r),f()}),{graphBounds:i,nodeBounds:s}}function Oa(e,t,n){const{width:r,height:i,top:s,left:l}=e,a={clientX:r/2,clientY:i/2};return Lo(a,s,l,r,i,n,t)}function vs(e,t){const{zoom:n,editable:r,translation:i,direction:s,locked:l,edge:a,nodes:c}=t,u=C({x:(i==null?void 0:i.x)||0,y:(i==null?void 0:i.y)||0}),d=C({top:0,left:0,width:0,height:0,bottom:0,right:0}),h=C(n),f=C(!1),m=$o(),v=Ra(m,d,h,u),w=bo([d,u,h],([p,P,A])=>Oa(p,P,A));return{id:e,nodes:m,edges:ka(),transforms:{translation:u,scale:h},maxZIndex:C(2),dimensions:d,bounds:v,center:w,mounted:f,direction:s||"LR",editable:r||!1,edge:a||null,editing:C(null),cursor:Ta(fs,d,u,h),locked:C(l||!1),groups:C({selected:{parent:C(null),nodes:C(new Set)},hidden:{parent:C(null),nodes:C(new Set)}}),groupBoxes:$o(),activeGroup:C(null),initialNodePositions:C([])}}function za(e,t,n,r,i,s,l,a,c,u,d,h){const{width:f,height:m}=i,{x:v,y:w}=r,y=k(t.position),p=C({x:v-y.x+f/2,y:w-y.y+m/2}),P=bo([t.position,p],([tt,V])=>({x:tt.x+V.x,y:tt.y+V.y})),A=e.transforms,N=e.dimensions,I=C(c||"self"),G=()=>{const tt=document.getElementById(n),V=k(I),pt=_o[V];if(!tt)return;const{x:lt,y:Q,width:Y,height:it}=tt.getBoundingClientRect(),B=k(p),X=k(P),{scaled:ot,scale:gt}=Ca(N,A,{x:lt,y:Q}),M=ot.x-X.x,Ot=ot.y-X.y;p.set({x:B.x+M+Y/gt/2+pt.x*Y/gt/2,y:B.y+Ot+it/gt/2+pt.y*it/gt/2})},J=bo([t.moving,t.resizingWidth,t.resizingHeight,t.rotating],([tt,V,pt,lt])=>tt||V||pt||lt),z=bo([t.rotation],([tt])=>tt);return{id:n,position:P,offset:p,direction:I,dynamic:C(u||!1),type:a,edge:l,moving:J,mounted:C(!1),recalculatePosition:G,connected:C(new Set),store:s||null,inputKey:d||null,edgeColor:h||C(null),rotation:z,node:t}}const pr=$o(),Oo={width:200,height:100};function Yo(e,t){return{x:Math.round(e/Oo.width)*Oo.width,y:Math.round(t/Oo.height)*Oo.height}}const zo=10;function ps(e){const t=k(e);return Array.from(t).map(r=>k(r.position))}function pi(e,t){console.log("moveNodes called");let n;const r=k(e.groups),i=k(e.activeGroup);if(console.log("Graph Groups:",r),console.log("Active Group:",i),!i)return;const s=r[i].nodes;if(!s)return;const l=k(e.initialNodePositions),{x:a,y:c}=k(Te),u=Array.from(k(s)),d=k(e.groupBoxes);console.log("Group Boxes:",d),u.forEach(f=>f.moving.set(!0)),h();function h(){const f=k(e.cursor);let m=f.x-a,v=f.y-c;if(t){const y=Yo(m,v);m=y.x,v=y.y}const w={x:m,y:v};u.forEach((y,p)=>{const{group:P,position:A}=y,N=l[p];let I;if(i==="selected"){const G=k(P);G&&(I=d.get(G))}if(!I)Ba(N,w,A);else{const G=k(y.dimensions.width),J=k(y.dimensions.height),z=_s(I,G,J);ms(N,w,A,z)}}),k(Fe)?n=requestAnimationFrame(h):cancelAnimationFrame(n)}}function Ba(e,t,n){n.set({x:e.x+t.x,y:e.y+t.y})}function ms(e,t,n,r){n.set({x:Math.min(Math.max(r.left,e.x+t.x),r.right),y:Math.min(Math.max(r.top,e.y+t.y),r.bottom)})}function _s(e,t,n){const{x:r,y:i}=k(e.position);return console.log("Group Box Position:",{x:r,y:i}),{left:r+zo,right:r+k(e.dimensions.width)-t-zo,top:i+zo,bottom:i+k(e.dimensions.height)-n-zo}}function mi(e=1,t,n,r=.1){const i=k(t),{width:s,height:l,top:a,left:c}=i,u=n.scale,d=k(n.translation),h=k(u),f=gs(h,e,r),m=hs(h,f,d,{x:s/2+c,y:l/2+a},i);u.set(f),n.translation.set(m)}var Wa=Kt('<div class="svelvet-graph-wrapper svelte-19pa6i0" role="presentation"><!></div>');function Ya(e,t){oe(t,!1);const[n,r]=xe(),i=()=>E(f,"$translation",n),s=()=>E(h,"$scale",n),l=()=>E(m,"$cursor",n),a=x(),c=x(),u=It("graph"),d=u.transforms,h=d.scale,f=d.translation,m=u.cursor;let v=g(t,"isMovable",8),w=x(),y=x(!1);function p(){U(f,Ea(k(Te),l(),d)),_(w,requestAnimationFrame(p))}b(()=>i(),()=>{_(a,i())}),b(()=>(o(a),s()),()=>{_(c,`translate(${o(a).x}px, ${o(a).y}px) scale(${s()})`)}),b(()=>(nt(v()),o(y),o(w)),()=>{v()&&!o(y)?(_(y,!0),_(w,requestAnimationFrame(p))):(!v()||!o(y))&&(_(y,!1),cancelAnimationFrame(o(w)))}),Ne(),fe();var P=Wa(),A=Ut(P);Wt(A,t,"default",{},null),Vt(()=>H(P,"transform",o(c))),Tt("contextmenu",P,xo(ze(function(N){se.call(this,t,N)}))),Tt("click",P,xo(ze(function(N){se.call(this,t,N)}))),Tt("touchstart",P,xo(ze(function(N){se.call(this,t,N)}))),O(e,P),re(),r()}var Ga=Kt("<!> <!>",1);function Xa(e,t){oe(t,!1);const[n,r]=xe(),i=()=>E(h,"$activeGroup",n),s=()=>E(Fe,"$tracking",n),l=()=>E(v,"$cursor",n),a=()=>E(f,"$groups",n);console.log("Componente GraphRenderer.svelte");const c=It("graph"),u=It("snapTo");let d=g(t,"isMovable",8);const h=c.activeGroup,f=c.groups,m=c.initialNodePositions,v=c.cursor;function w(y){U(Fe,!0);const{groupName:p}=y.detail;U(h,p),U(Te,l()),U(m,ps(a()[p].nodes))}b(()=>(i(),s(),pi),()=>{i()&&s()&&pi(c,u)}),Ne(),fe(),Ya(e,{get isMovable(){return d()},children:(y,p)=>{var P=Ga(),A=ct(P);Wt(A,t,"default",{},null);var N=dt(A,2);Sa(N,{$$events:{groupClick:w}}),O(y,P)},$$slots:{default:!0}}),re(),r()}const Fa=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],Ha=new Set(Fa),_i=e=>Ha.has(e);var Ka=Kt('<input type="text">');function qa(e,t){oe(t,!1);const[n,r]=xe(),i=()=>E(l,"$textStore",n);let s=g(t,"placeholder",8);const l=It("textStore");fe();var a=Ka();Vt(()=>K(a,"placeholder",s())),Tt("keydown",a,sn(function(c){se.call(this,t,c)})),Tt("click",a,sn(function(c){se.call(this,t,c)})),Tt("mousedown",a,sn(function(c){se.call(this,t,c)})),Ll(a,i,c=>U(l,c)),O(e,a),re(),r()}const ja=new Set(["INPUT","SELECT","BUTTON","TEXTAREA"]);var Ua=Kt("<div><!></div>"),Va=Kt('<div class="svelvet-node svelte-1iknrz0" role="button"><!> <div class="anchors left svelte-1iknrz0"><!></div> <div class="anchors right svelte-1iknrz0"><!></div> <div class="anchors top svelte-1iknrz0"><!></div> <div class="anchors bottom svelte-1iknrz0"><!></div></div>');function $a(e,t){oe(t,!1);const[n,r]=xe(),i=()=>E(ht(),"$groups",n),s=()=>E($t,"$position",n),l=()=>E(Me,"$selectedNodes",n),a=()=>E(Ke,"$hiddenNodes",n),c=()=>E(_e,"$resized",n),u=()=>E(X,"$duplicate",n),d=()=>E(q(),"$centerPoint",n),h=()=>E(de,"$widthStore",n),f=()=>E(ae,"$heightStore",n),m=()=>E(Te,"$initialClickPosition",n),v=()=>E(ot,"$graphDOMElement",n),w=()=>E(Ct,"$zIndex",n),y=()=>E(W(),"$maxZIndex",n),p=()=>E(Yt(),"$locked",n),P=()=>E(st,"$nodeLock",n),A=()=>E(Z,"$editable",n),N=()=>E(me,"$group",n),I=()=>E(Ae,"$rotation",n),G=()=>E(Bt,"$bgColor",n),J=()=>E(pe,"$textColor",n),z=()=>E(Re,"$borderColor",n),tt=()=>E($,"$selectionColor",n),V=()=>E(Et,"$borderRadius",n),pt=()=>E(at,"$borderWidth",n),lt=x(),Q=x(),Y=x(),it=x(),B=It("mounted"),X=It("duplicate"),ot=It("graphDOMElement"),gt=ro();let M=g(t,"node",8),Ot=g(t,"isDefault",8),et=g(t,"useDefaults",8),L=g(t,"center",8),Pt=g(t,"nodeStore",8),Yt=g(t,"locked",8),ht=g(t,"groups",8),W=g(t,"maxZIndex",8),q=g(t,"centerPoint",8),zt=g(t,"cursor",8),ut=g(t,"initialNodePositions",8),F=g(t,"activeGroup",8),yt=g(t,"editing",8),xt=g(t,"dimensionsProvided",8,!1),mt=g(t,"title",8);const vt=C(0),_t=C(null),ft=M().id,$t=M().position,de=M().dimensions.width,ae=M().dimensions.height,$=M().selectionColor,Z=M().editable,st=M().locked,Ct=M().zIndex,Bt=M().bgColor,Et=M().borderRadius,pe=M().textColor,me=M().group,Re=M().borderColor,at=M().borderWidth,Ae=M().rotation,{selected:be,hidden:Ee}=i(),Ke=Ee.nodes,Me=be.nodes,_e=C(!1);jt("node",M()),jt("anchorsMounted",vt),jt("resized",_e),jt("nodeConnectEvent",_t),Qe(()=>{if(L()){const kt={x:d().x-h()/2,y:d().y-f()/2};M().position.set(kt),Fe.set(!0),Fe.set(!1)}B.update(kt=>kt+1)}),lr(()=>{o(Q)&&(l().delete(M()),U(Me,l())),B.update(kt=>kt-1)});function tn(){o(Q)?(M()&&l().delete(M()),U(Me,l())):(M()&&l().add(M()),U(Me,l()))}function qt(kt){U(Te,k(zt())),v().focus(),w()!==y()&&w()!==1/0&&U(Ct,Rl(W(),y()));const Dt=kt.target;if(!ja.has(Dt.tagName)&&(kt.preventDefault(),gt("nodeClicked",{node:M(),e:kt}),!(p()||P()))){if("touches"in kt){if(kt.touches&&kt.touches.length>1)return}else kt.button===2&&A()&&U(yt(),M());U(Fe,!0),te(kt)}}function te(kt){let Dt,Pe,De=!1;const ce=N();ce&&(Dt=i()[ce],Pe=k(Dt.parent),De=Pe===M()),De?U(F(),ce):U(F(),"selected"),!kt.shiftKey&&o(Q)?U(F(),"selected"):(!kt.shiftKey&&!o(Q)&&!kt.shiftKey&&(l().clear(),U(Me,l())),tn()),U(ut(),ps(i().selected.nodes))}function en(){Pt().delete(ft)}function qe(kt){const Dt=k(zt()),Pe=Dt.x-m().x,De=Dt.y-m().y;Math.abs(Pe)+Math.abs(De)<4&&gt("nodeReleased",{e:kt,node:M()}),U(_t,kt)}function Be(kt){return kt.addEventListener("mousedown",qt),kt.addEventListener("touchstart",qt),{destroy(){kt.removeEventListener("mousedown",qt),kt.removeEventListener("touchstart",qt)}}}b(()=>s(),()=>{_(lt,s())}),b(()=>(l(),nt(M())),()=>{_(Q,l().has(M()))}),b(()=>(a(),nt(M())),()=>{_(Y,a().has(M()))}),b(()=>(nt(xt()),c()),()=>{_(it,xt()||c())}),b(()=>(o(Q),u(),nt(M())),()=>{o(Q)&&u()&&gt("duplicate",M())}),Ne(),fe();var je=At(),En=ct(je);{var Rn=kt=>{var Dt=Va();K(Dt,"id",ft),K(Dt,"tabindex",0);var Pe=Ut(Dt);{var De=j=>{var bt=Ua();H(bt,"width","fit-content"),H(bt,"height","fit-content");var Rt=Ut(bt);Wt(Rt,t,"default",{grabHandle:Be,get selected(){return o(Q)},destroy:en},null),si(bt,"clientHeight",Gt=>U(ae,Gt)),si(bt,"clientWidth",Gt=>U(de,Gt)),O(j,bt)},ce=j=>{var bt=At(),Rt=ct(bt);Wt(Rt,t,"default",{grabHandle:Be,get selected(){return o(Q)},destroy:en},null),O(j,bt)};Lt(Pe,j=>{o(it)?j(ce,!1):j(De)})}var hn=dt(Pe,2),Nn=Ut(hn);Wt(Nn,t,"anchorWest",{},null);var ge=dt(hn,2),Ue=Ut(ge);Wt(Ue,t,"anchorEast",{},null);var we=dt(ge,2),D=Ut(we);Wt(D,t,"anchorNorth",{},null);var T=dt(we,2),rt=Ut(T);Wt(rt,t,"anchorSouth",{},null),Hn(()=>Tt("contextmenu",Dt,ze(sn(function(j){se.call(this,t,j)})))),Hn(()=>Tt("mouseup",Dt,qe)),Yn(Dt,j=>Be==null?void 0:Be(j)),Vt(()=>{K(Dt,"title",mt()),Ht(Dt,"selected",o(Q)),Ht(Dt,"locked",p()||P()),H(Dt,"top",`${o(lt).y??""}px`),H(Dt,"left",`${o(lt).x??""}px`),H(Dt,"z-index",w()),H(Dt,"width",o(it)?h()+"px":"fit-content"),H(Dt,"height",o(it)?f()+"px":"fit-content"),H(Dt,"transform",`rotate(${I()??""}deg)`),H(Dt,"--prop-background-color",G()||(Ot()||et()?null:"transparent")),H(Dt,"--prop-text-color",J()),H(Dt,"--prop-border-color",z()),H(Dt,"--prop-selection-color",tt()),H(Dt,"--prop-border-radius",V()?`${V()}px`:Ot()||et()?null:"0px"),H(Dt,"--prop-border-width",pt()||(Ot()||et()?null:"0px")),K(hn,"id",`anchors-west-${M().id}`),K(ge,"id",`anchors-east-${M().id}`),K(we,"id",`anchors-north-${M().id}`),K(T,"id",`anchors-south-${M().id}`)}),O(kt,Dt)};Lt(En,kt=>{o(Y)||kt(Rn)})}O(e,je),re(),r()}var Za=Kt('<div class="left svelte-1ryxg7v"></div> <div class="right svelte-1ryxg7v"></div>',1),Ja=Kt('<div class="top svelte-1ryxg7v"></div> <div class="bottom svelte-1ryxg7v"></div>',1),Qa=Kt('<div class="svelte-1ryxg7v"></div>'),tc=Kt('<div class="svelte-1ryxg7v"></div>'),ec=Kt("<!> <!> <!> <!>",1);function nc(e,t){oe(t,!1);const[n,r]=xe(),i=()=>E(X,"$position",n),s=()=>E(L,"$widthStore",n),l=()=>E(et,"$heightStore",n),a=()=>E(gt,"$resizingHeight",n),c=()=>E(Pt,"$cursor",n),u=()=>E(Ot,"$nodeRotation",n),d=()=>E(ot,"$resizingWidth",n),h=()=>E(M,"$rotating",n),f=()=>E(Te,"$initialClickPosition",n),m=x(),v=x(),w=x(),y=It("graph"),p=It("node"),P=It("resized");let A=g(t,"width",8,!1),N=g(t,"height",8,!1),I=g(t,"rotation",8,!1),G=g(t,"minHeight",12,0),J=g(t,"minWidth",12,0),z,tt=A(),V=A(),pt=N(),lt=N(),Q=A()&&N(),Y=0,it=0,B=x(k(p.position));const X=p.position,ot=p.resizingWidth,gt=p.resizingHeight,M=p.rotating,Ot=p.rotation,et=p.dimensions.height,L=p.dimensions.width,Pt=y.cursor;let Yt=x(),ht=x(),W=x(1);Qe(()=>{try{z=document.querySelector(`#${p.id}`),z&&($=>(J($[0]),G($[1])))(gr(z))}catch($){console.error($)}});function q($,Z){const st=Bt=>{Bt.stopPropagation(),Bt.preventDefault(),Z.left||Z.top?_(W,-1):_(W,1),Nr.set(!0),U(Te,k(Pt)),_(Yt,s()),_(ht,l()),_(B,i()),Z.both?U(ot,!0):U(ot,!1),U(ot,Z.left||Z.right||Z.both||!1),U(gt,Z.top||Z.bottom||Z.both||!1),z&&(Et=>(J(Et[0]),G(Et[1])))(gr(z)),window.addEventListener("mouseup",Ct)},Ct=()=>{U(ot,!1),U(gt,!1),Nr.set(!1),window.removeEventListener("mouseup",Ct)};return $.addEventListener("mousedown",st),{destroy(){$.removeEventListener("mousedown",st)}}}function zt($){const Z=Ct=>{Ct.stopPropagation(),Ct.preventDefault(),Y=u(),U(Te,k(Pt));const Bt=f().x-o(w).x,Et=f().y-o(w).y;it=Math.atan2(Et,Bt),U(M,!0),window.addEventListener("mouseup",st)},st=()=>{U(M,!1),window.removeEventListener("mouseup",st)};return $.addEventListener("mousedown",Z),{destroy(){$.removeEventListener("mousedown",Z)}}}function ut(){const $=k(Pt),Z=$.x-o(w).x,st=$.y-o(w).y,Ct=Math.atan2(st,Z),Bt=it-Ct;return Y-F(Bt)}function F($){return $*(180/Math.PI)}Wl(()=>{z&&($=>(J($[0]),G($[1])))(gr(z)),s()<J()&&P.set(!1),l()<G()&&P.set(!1)}),b(()=>(h(),c()),()=>{h()&&(c(),U(Ot,ut()))}),b(()=>(a(),c(),nt(G()),o(ht),o(W),o(B),u()),()=>{if(a()){const $=k(Te),Z=c(),st=Math.max(G(),o(ht)+(Z.y-$.y)*o(W));st>G()?(P.set(!0),U(et,st)):P.set(!1),o(W)===-1&&U(X,{x:o(B).x,y:o(B).y+Z.y-$.y}),u()!==0&&p.position.update(Ct=>({y:o(B).y-(st-o(ht))/2,x:Ct.x}))}}),b(()=>(d(),c(),nt(J()),o(Yt),o(W),o(B),u()),()=>{if(d()){const $=k(Te),Z=c(),st=Math.max(J(),o(Yt)+(Z.x-$.x)*o(W));st>J()?(P.set(!0),U(L,st)):P.set(!1),o(W)===-1&&U(X,{x:o(B).x+Z.x-$.x,y:o(B).y}),u()!==0&&p.position.update(Ct=>({x:o(B).x-(st-o(Yt))/2,y:Ct.y}))}}),b(()=>i(),()=>{_(m,i().x)}),b(()=>i(),()=>{_(v,i().y)}),b(()=>(o(m),s(),o(v),l()),()=>{_(w,{x:o(m)+s()/2,y:o(v)+l()/2})}),Ne(),fe();var yt=ec(),xt=ct(yt);{var mt=$=>{var Z=Za(),st=ct(Z);Yn(st,(Bt,Et)=>q==null?void 0:q(Bt,Et),()=>({left:tt}));var Ct=dt(st,2);Yn(Ct,(Bt,Et)=>q==null?void 0:q(Bt,Et),()=>({right:V})),Vt(()=>{Ht(st,"width",A()),Ht(Ct,"width",A())}),O($,Z)};Lt(xt,$=>{A()&&$(mt)})}var vt=dt(xt,2);{var _t=$=>{var Z=Ja(),st=ct(Z);Yn(st,(Bt,Et)=>q==null?void 0:q(Bt,Et),()=>({top:pt}));var Ct=dt(st,2);Yn(Ct,(Bt,Et)=>q==null?void 0:q(Bt,Et),()=>({bottom:lt})),Vt(()=>{Ht(st,"height",N()),Ht(Ct,"height",N())}),O($,Z)};Lt(vt,$=>{N()&&$(_t)})}var ft=dt(vt,2);{var $t=$=>{var Z=Qa();Ht(Z,"both",Q),Yn(Z,(st,Ct)=>q==null?void 0:q(st,Ct),()=>({both:Q})),O($,Z)};Lt(ft,$=>{Q&&$($t)})}var de=dt(ft,2);{var ae=$=>{var Z=tc();Yn(Z,st=>zt==null?void 0:zt(st)),Vt(()=>Ht(Z,"rotation",I())),O($,Z)};Lt(de,$=>{I()&&$(ae)})}O(e,yt),re(),r()}var oc=Kt('<div class="svelvet-anchor svelte-19t6skv"></div>');function rc(e,t){let n=g(t,"output",8),r=g(t,"input",8),i=g(t,"connecting",8),s=g(t,"connected",8),l=g(t,"hovering",8),a=g(t,"bgColor",8);var c=oc();Vt(()=>{Ht(c,"output",n()),Ht(c,"input",r()),Ht(c,"connected",s()),Ht(c,"connecting",i()),Ht(c,"hovering",l()),H(c,"--prop-anchor-color",a())}),O(e,c)}let mr;function ic(e){const t=e.parentNode;if(!t)return;t.removeChild(e);const n=document.querySelector(".svelvet-graph-wrapper");n&&n.appendChild(e)}var sc=fn('<defs><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="12.5" refY="5" orient="auto"><polygon class="arrow svelte-ppcocz" points="0 0, 15 5, 0 10"></polygon></marker><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="0" refY="5" orient="auto"><polygon class="arrow svelte-ppcocz" points="0 5, 15 0, 15 10"></polygon></marker></defs>'),lc=fn('<path class="edge svelte-ppcocz"></path>'),ac=Kt('<div class="default-label svelte-ppcocz"> </div>'),cc=fn('<foreignObject width="100%" height="100%" class="svelte-ppcocz"><span class="label-wrapper svelte-ppcocz"><!></span></foreignObject>'),uc=fn('<svg class="edges-wrapper svelte-ppcocz"><!><path role="presentation" class="target svelte-ppcocz"></path><!><!></svg>');function yi(e,t){var Mn,gn;const n=Gr(t);oe(t,!1);const[r,i]=xe(),s=()=>E(kt,"$sourceDynamic",r),l=()=>E(Dt,"$targetDynamic",r),a=()=>E(o(J),"$edgeColor",r),c=()=>E(o(z),"$edgeLabel",r),u=()=>E(En,"$sourcePositionStore",r),d=()=>E(Rn,"$targetPositionStore",r),h=()=>E(ce,"$sourceNodePositionStore",r),f=()=>E(hn,"$targetNodePositionStore",r),m=()=>E(en,"$sourceDirection",r),v=()=>E(Be,"$sourceRotation",r),w=()=>E(qe,"$targetDirection",r),y=()=>E(je,"$targetRotation",r),p=()=>E(Nn,"$edgeType",r),P=()=>E(Pe,"$sourceMoving",r),A=()=>E(De,"$targetMoving",r),N=()=>E(o(xt),"$sourceZIndex",r),I=()=>E(o(mt),"$targetZIndex",r),G=x(),J=x(),z=x(),tt=x(),V=x(),pt=x(),lt=x(),Q=x(),Y=x(),it=x(),B=x(),X=x(),ot=x(),gt=x(),M=x(),Ot=x(),et=x(),L=x(),Pt=x(),Yt=x(),ht=x(),W=x(),q=x(),zt=x(),ut=x(),F=x(),yt=x(),xt=x(),mt=x(),vt=x(),_t=x(),ft=It("edgeStore"),$t=It("edgeStyle"),de=It("endStyles"),ae=It("raiseEdgesOnSelect"),$=It("edgesAboveNode");let Z=g(t,"edge",24,()=>It("edge")),st=g(t,"straight",8,$t==="straight"),Ct=g(t,"step",8,$t==="step"),Bt=g(t,"start",24,()=>de[0]),Et=g(t,"end",24,()=>de[1]),pe=g(t,"animate",8,!1),me=g(t,"label",8,""),Re=g(t,"enableHover",8,!1),at=g(t,"edgeClick",8,null),Ae=g(t,"labelPosition",8,.5),be=g(t,"width",8,null),Ee=g(t,"color",8,null),Ke=g(t,"labelColor",8,null),Me=g(t,"textColor",8,null),_e=g(t,"cornerRadius",8,8),tn=g(t,"targetColor",8,null);const qt=Z().source,te=Z().target,en=qt.direction,qe=te.direction,Be=qt.rotation,je=te.rotation,En=qt.position,Rn=te.position,kt=qt.dynamic,Dt=te.dynamic,Pe=qt.moving,De=te.moving,ce=(Mn=qt.node)==null?void 0:Mn.position,hn=(gn=te.node)==null?void 0:gn.position,Nn=Z().type,ge=Z().id;let Ue=x(),we=x(),D=x({x:0,y:0}),T=x(!1),rt=x(!1),j=x(!1),bt=x(!1),Rt=x(!1),Gt=x();Z().rendered.set(!0),Qe(()=>{setTimeout(()=>{o(we)&&_(D,vr(o(we),Ae()))},0),ic(o(Gt))}),us(()=>{o(we)&&_(D,vr(o(we),Ae()))}),lr(()=>{o(Gt).remove(),cancelAnimationFrame(mr)});function he(){o(T)&&(o(we)&&_(D,vr(o(we),Ae())),mr=requestAnimationFrame(he))}function ne(){if(qt.id===null||te.id===null)return;const ue=ft.match(qt,te);ft.delete(ue[0]),qt==null||qt.connected.update(Zt=>(te&&Zt.delete(te),Zt)),te==null||te.connected.update(Zt=>(qt&&Zt.delete(qt),Zt))}b(()=>(s(),l()),()=>{_(G,s()||l())}),b(()=>{},()=>{yn(_(J,(qt==null?void 0:qt.edgeColor)||(te==null?void 0:te.edgeColor)||null),"$edgeColor",r)}),b(()=>nt(Z()),()=>{var ue;yn(_(z,(ue=Z().label)==null?void 0:ue.text),"$edgeLabel",r)}),b(()=>(nt(Ee()),a()),()=>{_(tt,Ee()||a()||null)}),b(()=>(nt(me()),c()),()=>{_(V,me()||c()||"")}),b(()=>o(V),()=>{_(pt,o(V)||n.label)}),b(()=>u(),()=>{_(lt,u())}),b(()=>d(),()=>{_(Q,d())}),b(()=>h(),()=>{_(Y,h())}),b(()=>f(),()=>{_(it,f())}),b(()=>o(lt),()=>{_(B,o(lt).x)}),b(()=>o(lt),()=>{_(X,o(lt).y)}),b(()=>o(Q),()=>{_(ot,o(Q).x)}),b(()=>o(Q),()=>{_(gt,o(Q).y)}),b(()=>(o(ot),o(B)),()=>{_(M,o(ot)-o(B))}),b(()=>(o(gt),o(X)),()=>{_(Ot,o(gt)-o(X))}),b(()=>o(M),()=>{_(et,Math.abs(o(M)))}),b(()=>o(Ot),()=>{_(L,Math.abs(o(Ot)))}),b(()=>o(et),()=>{_(Pt,Math.max(30,Math.min(600,o(et)/2)))}),b(()=>o(L),()=>{_(Yt,Math.max(30,Math.min(600,o(L)/2)))}),b(()=>(o(G),o(it),o(Y),o(j),o(bt),k),()=>{if(o(G)&&qt.node&&te.node){const ue=o(it).x-o(Y).x,Zt=o(it).y-o(Y).y;_(j,Zt>0),_(bt,ue>0);let ye,We;if(o(j)){const Xt=k(qt.node.dimensions.height),Jt=o(Y).y+Xt;ye=o(it).y-Jt}else{const Xt=k(te.node.dimensions.height),Jt=o(it).y+Xt;ye=o(Y).y-Jt}if(o(bt)){const Xt=k(qt.node.dimensions.width),Jt=o(Y).x+Xt;We=o(it).x-Jt}else{const Xt=k(te.node.dimensions.width),Jt=o(it).x+Xt;We=o(Y).x-Jt}_(rt,ye>We)}}),b(()=>(o(G),o(rt),o(j),o(bt),s(),l()),()=>{if(o(G)){let ue,Zt;o(rt)?(ue=o(j)?"south":"north",Zt=o(j)?"north":"south"):(ue=o(bt)?"east":"west",Zt=o(bt)?"west":"east"),s()&&U(en,ue),l()&&U(qe,Zt)}}),b(()=>(m(),v()),()=>{_(ht,hi(_o[m()],v()||0))}),b(()=>(w(),y()),()=>{_(W,hi(_o[w()],y()||0))}),b(()=>(o(B),o(ht),o(Pt)),()=>{_(q,o(B)+o(ht).x*o(Pt))}),b(()=>(o(X),o(ht),o(Yt)),()=>{_(zt,o(X)+o(ht).y*o(Yt))}),b(()=>(o(ot),o(W),o(Pt)),()=>{_(ut,o(ot)+o(W).x*o(Pt))}),b(()=>(o(gt),o(W),o(Yt)),()=>{_(F,o(gt)+o(W).y*o(Yt))}),b(()=>(o(q),o(zt),o(ut),o(F)),()=>{_(yt,`C ${o(q)}, ${o(zt)} ${o(ut)}, ${o(F)}`)}),b(()=>(nt(Ct()),p(),o(B),o(X),nt(st()),o(yt),o(ot),o(gt)),()=>{(!Ct()||ge==="cursor"||p()==="bezier")&&_(Ue,`M ${o(B)}, ${o(X)} ${st()?"":o(yt)} ${o(ot)}, ${o(gt)}`)}),b(()=>(o(pt),o(T),P(),A()),()=>{o(pt)&&!o(T)&&(P()||A()||ge==="cursor")?(_(T,!0),he()):o(T)&&!P()&&!A()&&ge!=="cursor"&&(_(T,!1),cancelAnimationFrame(mr))}),b(()=>(nt(Ct()),p(),o(B),o(X),m(),o(ot),o(gt),w(),nt(_e()),gi),()=>{if(Ct()&&ge!=="cursor"&&!(p()&&p()==="bezier")){const ue={x:o(B),y:o(X),direction:_o[m()]},Zt={x:o(ot),y:o(gt),direction:_o[w()]},ye=Aa(ue,Zt,fa),We=(Xt,Jt,vn)=>{if(Jt<ye.length-1){const On=Jl(Xt,ye[Jt+1]);return Ql(vn,On)}return""};_(Ue,ye.reduce((Xt,Jt,vn)=>{const On=Math.sign(Jt.x),S=Math.sign(Jt.y);let R=Jt.x,St=Jt.y,Nt="";if(_e()){const wt=ye[vn+1]||{x:0,y:0},Ft=ye[vn-1]||{x:0,y:0},ve=Ro(Jt.x,wt.x,_e()),Ve=Ro(wt.y,Jt.y,_e()),Ye=Ro(Ft.x,Jt.x,_e()),Pn=Ro(Ft.y,Jt.y,_e()),$e=Math.min(Ye,Pn),Ge=Math.min(ve,Ve);Jt.x?R=Jt.x-(Ge+$e)*On:St=Jt.y-(Ge+$e)*S,Nt=We(Jt,vn,Ge)}return gi(Xt,R,St,Nt)},`M ${o(B)}, ${o(X)}`))}}),b(()=>{},()=>{yn(_(xt,qt.node.zIndex||0),"$sourceZIndex",r)}),b(()=>{},()=>{yn(_(mt,te.node.zIndex||0),"$targetZIndex",r)}),b(()=>(N(),I()),()=>{_(vt,Math.max(N(),I()))}),b(()=>(o(vt),N(),I()),()=>{_(_t,$==="all"?1e5:$?o(vt):ae===!0?o(vt)-1:ae==="source"?N()-1:ae==="target"?I()-1:0)}),Ne(),fe();var Se=At(),An=ct(Se);{var qn=ue=>{var Zt=uc(),ye=Ut(Zt);{var We=S=>{var R=sc(),St=Ut(R);K(St,"id",ge+"-end-arrow");var Nt=Ut(St),wt=dt(St);K(wt,"id",ge+"-start-arrow");var Ft=Ut(wt);Vt(()=>{H(Nt,"--prop-edge-color",o(tt)),H(Ft,"--prop-edge-color",o(tt))}),O(S,R)};Lt(ye,S=>{(Bt()||Et())&&S(We)})}var Xt=dt(ye);K(Xt,"id",ge+"-target"),oo(Xt,S=>_(we,S),()=>o(we));var Jt=dt(Xt);Wt(Jt,t,"default",{get path(){return o(Ue)},destroy:ne,get hovering(){return o(Rt)}},S=>{var R=lc();K(R,"id",ge),Vt(()=>{K(R,"d",o(Ue)),K(R,"marker-end",Et()==="arrow"?`url(#${ge+"-end-arrow"})`:""),K(R,"marker-start",Bt()==="arrow"?`url(#${ge+"-start-arrow"})`:""),Ht(R,"animate",pe()),H(R,"--prop-edge-color",o(tt)),H(R,"--prop-stroke-width",be()?be()+"px":null)}),O(S,R)});var vn=dt(Jt);{var On=S=>{var R=cc(),St=Ut(R),Nt=Ut(St);Wt(Nt,t,"label",{destroy:ne,get hovering(){return o(Rt)}},wt=>{var Ft=ac(),ve=Ut(Ft);Vt(()=>{H(Ft,"--prop-label-color",Ke()),H(Ft,"--prop-label-text-color",Me()),ls(ve,o(V))}),O(wt,Ft)}),Vt(()=>{K(R,"x",o(D).x),K(R,"y",o(D).y)}),O(S,R)};Lt(vn,S=>{o(pt)&&S(On)})}oo(Zt,S=>_(Gt,S),()=>o(Gt)),Vt(()=>{H(Zt,"z-index",o(_t)),K(Xt,"d",o(Ue)),Ht(Xt,"cursor",ge==="cursor"||!at()&&!Re()),H(Xt,"cursor",at()||o(Rt)?"pointer":"move"),H(Xt,"--prop-target-edge-color",at()||o(Rt)?tn()||null:"transparent")}),Tt("mousedown",Xt,function(...S){var R;(R=at())==null||R.apply(this,S)}),Tt("mouseenter",Xt,()=>_(Rt,!0)),Tt("mouseleave",Xt,()=>_(Rt,!1)),O(ue,Zt)};Lt(An,ue=>{qt&&te&&ue(qn)})}O(e,Se),Xr(t,"destroy",ne);var nn=re({destroy:ne});return i(),nn}function xi(e,t){oe(t,!1);let n=g(t,"edge",8);jt("edge",n()),fe();var r=At(),i=ct(r);Wt(i,t,"default",{},null),O(e,r),re()}let _r;const on=C(null);function dc(e,t,n){if(t==="self")return;const r=e.parentNode;if(!r)return;r.removeChild(e);const i=document.querySelector(`#anchors-${t}-${n.id}`);i&&(i.appendChild(e),e&&n.recalculateAnchors())}var fc=Kt('<div class="anchor-wrapper svelte-bazd6o" role="button" tabindex="0"><!></div> <!> <!>',1);function yo(e,t){oe(t,!1);const[n,r]=xe(),i=()=>E(on,"$connectingFrom",n),s=()=>E(me,"$nodeLevelConnections",n),l=()=>E(Q,"$anchorsMounted",n),a=()=>E(o(P),"$dynamicDirection",n),c=()=>E(z,"$mounted",n),u=()=>E(lt,"$nodeConnectEvent",n),d=()=>E(Ct,"$anchors",n),h=()=>E(o(p),"$connectedAnchors",n),f=()=>E(Bt,"$resizingWidth",n),m=()=>E(Et,"$resizingHeight",n),v=()=>E(pe,"$rotating",n),w=()=>E(et(),"$inputsStore",n),y=x(),p=x(),P=x(),A=It("dynamic"),N=It("node"),I=It("edgeStore"),G=It("cursorAnchor"),J=It("direction"),z=It("mounted"),tt=It("graph"),V=It("nodeStore"),pt=It("graphEdge"),lt=It("nodeConnectEvent"),Q=It("anchorsMounted"),Y=It("flowchart")||void 0;let it=g(t,"bgColor",8,null),B=g(t,"id",8,0),X=g(t,"input",8,!1),ot=g(t,"output",8,!1),gt=g(t,"multiple",24,()=>ot()?!0:!X()),M=g(t,"dynamic",8,A||!1),Ot=g(t,"edge",8,null),et=g(t,"inputsStore",8,null),L=g(t,"key",8,null),Pt=g(t,"outputStore",8,null),Yt=g(t,"connections",28,()=>[]),ht=g(t,"edgeColor",24,()=>C(null)),W=g(t,"edgeLabel",8,""),q=g(t,"locked",8,!1),zt=g(t,"nodeConnect",8,!1),ut=g(t,"edgeStyle",8,null),F=g(t,"endStyles",24,()=>[null,null]),yt=g(t,"invisible",8,!1),xt=g(t,"direction",24,()=>J==="TD"?X()?"north":"south":X()?"west":"east"),mt=g(t,"title",8,"");const vt=ro(),_t=ro();let ft=x(),$t=x(!1),de=x(!1),ae=x(0),$=X()===ot()?null:X()?"input":"output",Z=x([]);const st=N.edge,Ct=N.anchors,Bt=N.resizingWidth,Et=N.resizingHeight,pe=N.rotating,me=N.connections,Re=`A-${B()||Ct.count()+1}/${N.id}`,at=za(tt,N,Re,{x:0,y:0},{width:0,height:0},et()||Pt()||null,Ot()||st||pt||null,$,xt(),M(),L(),ht());Ct.add(at,at.id),Qe(()=>{var T;o(ft)&&at.recalculatePosition();const D=Array.from(k(N.anchors)).reduce((rt,[,j])=>(j.type==="output"&&rt++,rt),0);if((T=s())!=null&&T.length&&!X()){const rt=[];let j=null;s().forEach((bt,Rt)=>{bt&&(j===null&&(j=Rt),(Rt-j)%D===0?(o(Z).push(bt),rt.push(null)):rt.push(bt))}),U(me,rt)}Tl(Q,l())}),us(()=>{o(ft)&&at.recalculatePosition()}),lr(()=>{je(),cancelAnimationFrame(_r)});function Ae(D){var he;I.delete("cursor");const T={x:D.changedTouches[0].clientX,y:D.changedTouches[0].clientY},rt=document.elementFromPoint(T.x,T.y);if(!rt)return;const j=rt.parentElement;if(!j)return;const bt=j.id,Rt=bt.split("/")[1],Gt=(he=V.get(Rt))==null?void 0:he.anchors.get(bt);Gt&&(I.delete("cursor"),be(at,Gt,D))}function be(D,T,rt){const j=qt(D,T);j&&te(),rt.shiftKey||qe(j)}function Ee(D){var T;if("changedTouches"in D&&o(y)){Ae(D);return}if(!o(y)){if((T=h())!=null&&T.size&&!gt()){I.delete("cursor"),D.shiftKey||qe(!1);return}i()&&tn(D)}}function Ke(D){var T;if(!q()){if((T=h())!=null&&T.size&&!gt()&&!i())return En();if(!i())return Me();tn(D)}}function Me(){X()===ot()?(U(on,{anchor:at,store:null,key:null}),_e(at,G)):X()?(U(on,{anchor:at,store:et(),key:L()}),_e(G,at)):ot()&&(U(on,{anchor:at,store:Pt(),key:null}),_e(at,G))}function _e(D,T,rt=!1){const j={color:ht(),label:{text:W()}};rt&&(j.disconnect=!0),ut()&&(j.type=ut()),F()[0]&&(j.start=F()[0]),F()[1]&&(j.start=F()[1]);const bt=vi({source:D,target:T},(D==null?void 0:D.edge)||null,j);I.add(bt,"cursor")}function tn(D){if(I.delete("cursor"),!i())return;const T=i().anchor.type;if(i().anchor===at||T===at.type&&T){qe(!1);return}at.recalculatePosition();let rt,j;X()===ot()?T==="input"?(rt=at,j=i().anchor):(rt=i().anchor,j=at):X()?(rt=i().anchor,j=at):(rt=at,j=i().anchor),be(rt,j,D)}function qt(D,T){if(D===T||k(D.connected).has(at))return!1;const rt={color:ht(),label:{text:W()}};if(Y){const bt=D.node.id.slice(2),Rt=Y.nodeList[bt];if(Rt){const Gt=T.node.id.slice(2),he=Rt.children.filter(ne=>ne.node.id===Gt)[0];if(he){const ne=he;rt.label={text:ne.content}}}}ut()&&(rt.type=ut()),F()[0]&&(rt.start=F()[0]),F()[1]&&(rt.start=F()[1]);const j=vi({source:D,target:T},(D==null?void 0:D.edge)||null,rt);return!D.node||!T.node?!1:(I.add(j,new Set([D,T,D.node,T.node])),!0)}function te(){if(X()&&i()&&i().store)w()&&L()&&et()&&typeof et().set=="function"&&typeof et().update=="function"&&wo(et(),le(w)[L()]=i().store,le(w));else if(ot()&&i()&&i().store){const{store:D,key:T}=i();D&&T&&typeof D.update=="function"&&D.update(rt=>(Pt()&&(rt[T]=Pt()),rt))}}function en(){w()&&L()&&w()[L()]&&wo(et(),le(w)[L()]=C(k(w()[L()])),le(w))}function qe(D){(D||!u())&&(U(on,null),U(lt,null))}function Be(){o($t)&&(o(ft)&&at.recalculatePosition(),_r=requestAnimationFrame(Be))}function je(){I.delete("cursor"),I.match(at).forEach(T=>I.delete(T)),qe(!1),en()}function En(){if(k(at.connected).size>1)return;const D=Array.from(k(at.connected))[0];if(D.type!=="input")if(je(),D.type==="output"){_e(D,G,!0),en();const T=D.store;U(on,{anchor:D,store:T,key:null})}else _e(D,G,!0),U(on,{anchor:D,store:null,key:null})}function Rn(){o(Z).forEach((D,T)=>{if(!D)return;Pe(D)&&Yt(Yt()[T]=null,!0)}),_(Z,o(Z).filter(D=>D!==null))}function kt(){Yt().forEach(D=>{D&&Pe(D)})}function Dt(D){const T=`N-${D[0]}`,rt=V.get(T);if(!rt)return;const j=rt.anchors.get(`A-${D[1]}/N-${D[0]}`);if(!j)return;const bt=I.match(at,j);bt&&I.delete(bt[0])}const Pe=D=>{let T,rt,j=null;Array.isArray(D)?(T=D[0].toString(),rt=D[1].toString()):(T=D.toString(),rt=null);const bt=`N-${T}`,Rt=V.get(bt);if(!Rt)return!1;if(rt){const Gt=`A-${rt}/${bt}`;j=Rt.anchors.get(Gt)||null}else{const Gt=k(Rt.anchors),he=Array.from(Gt.values());if(!he.length)return!1;j=he.reduce((ne,Se)=>!ne&&Se.type==="output"?null:Se.type==="output"?ne:!ne||k(Se.connected).size<k(ne.connected).size?Se:ne,null)}if(!j)return!1;if(qt(at,j),j.store&&(et()||Pt())){if(X()&&j.type==="output")w()&&L()&&et()&&typeof et().set=="function"&&typeof et().update=="function"&&wo(et(),le(w)[L()]=j.store,le(w));else if(ot()&&j.type==="input"){const{store:Gt,inputKey:he}=j;Gt&&he&&typeof Gt.update=="function"&&Gt.update(ne=>(Pt()&&(ne[he]=Pt()),ne))}}return!0};b(()=>i(),()=>{var D;_(y,((D=i())==null?void 0:D.anchor)===at)}),b(()=>{},()=>{yn(_(p,at.connected),"$connectedAnchors",n)}),b(()=>{},()=>{yn(_(P,at==null?void 0:at.direction),"$dynamicDirection",n)}),b(()=>(nt(M()),o(ft),a()),()=>{M()&&o(ft)&&dc(o(ft),a(),N)}),b(()=>(c(),nt(Yt())),()=>{c()===V.count()&&Yt().length&&kt()}),b(()=>(nt(zt()),u()),()=>{zt()&&u()&&Ee(u())}),b(()=>(c(),o(Z)),()=>{c()===V.count()&&o(Z).length&&Rn()}),b(()=>(o(ft),d(),h(),a()),()=>{o(ft)&&(d(),h(),a(),at.recalculatePosition())}),b(()=>(o($t),f(),m(),v()),()=>{!o($t)&&(f()||m()||v())?(_($t,!0),Be()):!f()&&!m()&&o($t)&&!v()&&(_($t,!1),cancelAnimationFrame(_r))}),b(()=>(h(),o(ae)),()=>{if(h()){if(h().size<o(ae))_t("disconnection",{node:N,anchor:at});else if(h().size>o(ae)){const D=Array.from(h()),T=D[D.length-1];vt("connection",{node:N,anchor:at,connectedNode:T.node,connectedAnchor:T})}_(ae,h().size)}}),Ne(),fe();var De=fc(),ce=ct(De),hn=Ut(ce);Wt(hn,t,"default",{get linked(){var D;return((D=h())==null?void 0:D.size)>=1},get hovering(){return o(de)},get connecting(){return o(y)}},D=>{var T=At(),rt=ct(T);{var j=bt=>{const Rt=ke(()=>{var Gt;return((Gt=h())==null?void 0:Gt.size)>=1});rc(bt,{get output(){return ot()},get input(){return X()},get connecting(){return o(y)},get hovering(){return o(de)},get bgColor(){return it()},get connected(){return o(Rt)}})};Lt(rt,bt=>{yt()||bt(j)})}O(D,T)}),oo(ce,D=>_(ft,D),()=>o(ft));var Nn=dt(ce,2);rn(Nn,1,()=>Array.from(h()),D=>D.id,(D,T,rt,j)=>{var bt=At();const Rt=ke(()=>I.fetch(at,o(T)));var Gt=ct(bt);{var he=ne=>{const Se=ke(()=>o(Rt).component);xi(ne,{get edge(){return o(Rt)},children:(An,qn)=>{var nn=At(),Mn=ct(nn);Wt(Mn,t,"edge",{},gn=>{var ue=At(),Zt=ct(ue);{var ye=Xt=>{o(Se)(Xt,{})},We=Xt=>{yi(Xt,{})};Lt(Zt,Xt=>{o(Se)?Xt(ye):Xt(We,!1)})}O(gn,ue)}),O(An,nn)},$$slots:{default:!0}})};Lt(Gt,ne=>{o(Rt)&&o(Rt).source===at&&ne(he)})}O(D,bt)});var ge=dt(Nn,2);{var Ue=D=>{var T=At();const rt=ke(()=>I.get("cursor"));var j=ct(T);{var bt=Rt=>{const Gt=ke(()=>o(rt).component);xi(Rt,{get edge(){return o(rt)},children:(he,ne)=>{var Se=At(),An=ct(Se);Wt(An,t,"edge",{},qn=>{var nn=At(),Mn=ct(nn);{var gn=Zt=>{o(Gt)(Zt,{})},ue=Zt=>{yi(Zt,{})};Lt(Mn,Zt=>{o(Gt)?Zt(gn):Zt(ue,!1)})}O(qn,nn)}),O(he,Se)},$$slots:{default:!0}})};Lt(j,Rt=>{o(rt)&&Rt(bt)})}O(D,T)};Lt(ge,D=>{o(y)&&D(Ue)})}Vt(()=>{K(ce,"id",at==null?void 0:at.id),K(ce,"title",mt()||""),Ht(ce,"locked",q())}),Tt("mouseenter",ce,()=>_(de,!0)),Tt("mouseleave",ce,()=>_(de,!1)),Tt("mousedown",ce,ze(sn(Ke))),Tt("mouseup",ce,sn(Ee)),Tt("touchstart",ce,ze(sn(Ke))),Tt("touchend",ce,sn(Ee)),O(e,De),Xr(t,"disconnect",Dt);var we=re({disconnect:Dt});return r(),we}var hc=Kt("<!> <!>",1),gc=Kt('<div class="input-anchors svelte-j5bq7k"></div> <div class="output-anchors svelte-j5bq7k"></div>',1),vc=Kt('<div class="default-node svelte-j5bq7k"><!> <p class="svelte-j5bq7k"> </p> <!></div>');function pc(e,t){oe(t,!1);const[n,r]=xe(),i=()=>E(v,"$borderRadius",n),s=()=>E(y,"$inputs",n),l=()=>E(p,"$outputs",n),a=()=>E(w,"$textColor",n),c=()=>E(m,"$label",n),u=()=>E(P,"$resizable",n),d=It("dynamic"),h=It("node");let f=g(t,"selected",8);const m=h.label,v=h.borderRadius,w=h.textColor,y=h.inputs,p=h.outputs,P=h.resizable,A=k(h.direction);let N=A==="TD",I=A==="TD",G=A!=="TD",J=A!=="TD";fe();var z=vc(),tt=Ut(z);{var V=B=>{var X=hc(),ot=ct(X);rn(ot,1,()=>({length:s()}),Jn,(M,Ot)=>{yo(M,{$$events:{connection(et){se.call(this,t,et)},disconnection(et){se.call(this,t,et)}}})});var gt=dt(ot,2);rn(gt,1,()=>({length:l()}),Jn,(M,Ot)=>{yo(M,{$$events:{connection(et){se.call(this,t,et)},disconnection(et){se.call(this,t,et)}}})}),O(B,X)},pt=B=>{var X=gc(),ot=ct(X);Ht(ot,"top",N),Ht(ot,"left",G),rn(ot,5,()=>({length:s()}),Jn,(M,Ot)=>{yo(M,{input:!0,direction:N?"north":"west",$$events:{connection(et){se.call(this,t,et)},disconnection(et){se.call(this,t,et)}}})});var gt=dt(ot,2);Ht(gt,"bottom",I),Ht(gt,"right",J),rn(gt,5,()=>({length:l()}),Jn,(M,Ot)=>{yo(M,{output:!0,direction:N?"south":"east",$$events:{connection(et){se.call(this,t,et)},disconnection(et){se.call(this,t,et)}}})}),O(B,X)};Lt(tt,B=>{d?B(V):B(pt,!1)})}var lt=dt(tt,2),Q=Ut(lt),Y=dt(lt,2);{var it=B=>{nc(B,{width:!0,height:!0,rotation:!0})};Lt(Y,B=>{u()&&B(it)})}Vt(()=>{Ht(z,"selected",f()),H(z,"border-radius",`${i()??""}px`),H(lt,"color",a()),ls(Q,c())}),O(e,z),re(),r()}function qr(e,t){const n=Gr(t);oe(t,!1);const[r,i]=xe(),s=()=>E(o(a),"$nodePosition",r),l=()=>E(et,"$nodes",r),a=x(),c=It("graph"),u=It("group");let d=g(t,"position",28,()=>({x:0,y:0})),h=g(t,"drop",8,!1),f=g(t,"dimensions",8,null),m=g(t,"id",8,0),v=g(t,"bgColor",8,null),w=g(t,"borderRadius",8,null),y=g(t,"borderColor",8,null),p=g(t,"borderWidth",8,null),P=g(t,"selectionColor",8,null),A=g(t,"textColor",8,null),N=g(t,"resizable",8,!1),I=g(t,"label",8,""),G=g(t,"inputs",8,1),J=g(t,"outputs",8,1),z=g(t,"width",8,null),tt=g(t,"height",8,null),V=g(t,"TD",8,!1),pt=g(t,"LR",8,!1),lt=g(t,"zIndex",8,1),Q=g(t,"editable",8,!0),Y=g(t,"locked",8,!1),it=g(t,"rotation",8,0),B=g(t,"edge",8,null),X=g(t,"connections",24,()=>[]),ot=g(t,"useDefaults",8,!1),gt=g(t,"center",8,!1),M=g(t,"dynamic",8,!1),Ot=g(t,"title",8,"");const et=c.nodes;jt("dynamic",M());let L=x(),Pt=x(!0);Qe(()=>{const F=V()?"TD":pt()?"LR":c.direction,yt=c.groupBoxes.get(u),xt=c.nodes.count()+1;_(Pt,!n.default),(n.anchorWest||n.anchorEast||n.anchorNorth||n.anchorSouth)&&_(Pt,!1);const mt=f()?f():z()||tt()?{width:z()||tt()||200,height:tt()||z()||100}:o(Pt)?{width:200,height:100}:{width:0,height:0},vt={id:m()||xt,position:h()==="cursor"?{x:k(c.cursor).x,y:k(c.cursor).y}:yt?{x:k(yt.position).x+d().x,y:k(yt.position).y+d().y}:d(),dimensions:mt,editable:Q()||c.editable,label:I(),group:u,resizable:N(),inputs:G(),outputs:J(),zIndex:lt(),direction:F,locked:Y(),rotation:it()};X().length&&(vt.connections=X()),p()&&(vt.borderWidth=p()),w()&&(vt.borderRadius=w()),y()&&(vt.borderColor=y()),P()&&(vt.selectionColor=P()),A()&&(vt.textColor=A()),v()&&(vt.bgColor=v()),B()&&(vt.edge=B()),_(L,Ia(vt)),yt&&c.groups.update(_t=>{const ft=k(_t[u].nodes);return _t[u].nodes.set(new Set([...ft,o(L)])),_t}),c.nodes.add(o(L),o(L).id)}),lr(()=>{c.nodes.delete(o(L).id)});function Yt(F){o(L)&&o(L).connections.set([F])}function ht(F){if(!o(L))return;(Array.isArray(F)?F:[F]).forEach(xt=>{const[mt,vt]=Array.isArray(xt)?xt:[xt,null],_t=`N-${mt}`,ft=c.nodes.get(_t);if(!ft)return;let $t=null;const de=vt?`A-${vt}/${_t}`:null;de&&($t=ft.anchors.get(de));const ae=c.edges.match(o(L),ft,$t);ae.length&&c.edges.delete(ae[ae.length-1])})}jt("connect",Yt),jt("disconnect",ht);let W=x(d());b(()=>(o(L),nt(X())),()=>{o(L)&&o(L).connections.set(X())}),b(()=>(o(L),nt(v())),()=>{o(L)&&o(L).bgColor.set(v())}),b(()=>(o(L),nt(I())),()=>{o(L)&&o(L).label.set(I())}),b(()=>(o(L),nt(A())),()=>{o(L)&&o(L).textColor.set(A())}),b(()=>(o(L),nt(y())),()=>{o(L)&&o(L).borderColor.set(y())}),b(()=>(o(L),nt(P())),()=>{o(L)&&o(L).selectionColor.set(P())}),b(()=>(o(L),nt(N())),()=>{o(L)&&o(L).resizable.set(N())}),b(()=>(o(L),nt(Q())),()=>{o(L)&&o(L).editable.set(Q())}),b(()=>(o(L),nt(Y())),()=>{o(L)&&o(L).locked.set(Y())}),b(()=>(o(L),nt(G())),()=>{o(L)&&o(L).inputs.set(G())}),b(()=>(o(L),nt(J())),()=>{o(L)&&o(L).outputs.set(J())}),b(()=>(o(L),nt(lt())),()=>{o(L)&&o(L).zIndex.set(lt())}),b(()=>o(L),()=>{var F;yn(_(a,o(L)&&((F=o(L))==null?void 0:F.position)),"$nodePosition",r)}),b(()=>(o(L),o(W),s(),nt(d())),()=>{if(o(L)){const{x:F,y:yt}=o(W),{x:xt,y:mt}=s(),{x:vt,y:_t}=d();(vt!==xt||_t!==mt)&&(vt!==F||_t!==yt?(_(W,d()),o(L).position.set(d())):(_(W,s()),d(s())))}}),b(()=>(o(L),nt(G())),()=>{o(L)&&o(L).inputs.set(G())}),b(()=>(o(L),nt(J())),()=>{o(L)&&o(L).outputs.set(J())}),Ne(),fe();var q=At(),zt=ct(q);{var ut=F=>{const yt=ke(()=>gt()||h()==="center"),xt=ke(()=>!!f()||!!z()||!!tt()||o(Pt)||!1);$a(F,{get node(){return o(L)},get center(){return o(yt)},get isDefault(){return o(Pt)},get useDefaults(){return ot()},get dimensionsProvided(){return o(xt)},get nodeStore(){return c.nodes},get locked(){return c.locked},get groups(){return c.groups},get title(){return Ot()},get maxZIndex(){return c.maxZIndex},get centerPoint(){return c.center},get cursor(){return c.cursor},get activeGroup(){return c.activeGroup},get editing(){return c.editing},get initialNodePositions(){return c.initialNodePositions},$$events:{nodeClicked(mt){se.call(this,t,mt)},nodeMount(mt){se.call(this,t,mt)},nodeReleased(mt){se.call(this,t,mt)},duplicate(mt){se.call(this,t,mt)}},children:Rr,$$slots:{default:(mt,vt)=>{const _t=ke(()=>vt.destroy),ft=ke(()=>vt.selected),$t=ke(()=>vt.grabHandle);var de=At(),ae=ct(de);Wt(ae,t,"default",{get selected(){return o(ft)},get grabHandle(){return o($t)},disconnect:ht,connect:Yt,get node(){return o(L)},get destroy(){return o(_t)}},$=>{var Z=At(),st=ct(Z);{var Ct=Bt=>{pc(Bt,{get selected(){return o(ft)},$$events:{connection(Et){se.call(this,t,Et)},disconnection(Et){se.call(this,t,Et)}}})};Lt(st,Bt=>{o(Pt)&&Bt(Ct)})}O($,Z)}),O(mt,de)},anchorWest:(mt,vt)=>{var _t=At(),ft=ct(_t);Wt(ft,t,"anchorWest",{},null),O(mt,_t)},anchorEast:(mt,vt)=>{var _t=At(),ft=ct(_t);Wt(ft,t,"anchorEast",{},null),O(mt,_t)},anchorNorth:(mt,vt)=>{var _t=At(),ft=ct(_t);Wt(ft,t,"anchorNorth",{},null),O(mt,_t)},anchorSouth:(mt,vt)=>{var _t=At(),ft=ct(_t);Wt(ft,t,"anchorSouth",{},null),O(mt,_t)}}})};Lt(zt,F=>{o(L)&&l().get(o(L).id)&&F(ut)})}O(e,q),re(),i()}var mc=Kt('<div class="editor svelte-1nv0yho"><span style="color:white; font-size:45px">Editor</span> <button style="position:absolute; top:10px;right:10px;">X</button> <!> <button>Delete Node</button> <button>Resize Node</button></div>');function _c(e,t){oe(t,!1);const n=x();let r=g(t,"editing",8);const i=It("graph");jt("graph",i),jt("textStore",r().label),jt("colorStore",r().bgColor);let s=x({x:150,y:50});function l(u){u.preventDefault(),_(s,{x:u.clientX,y:u.clientY}),i.editing.set(r())}function a(){i.nodes.delete(r().id),i.editing.set(null)}function c(){const u=r().id,d=i.nodes.get(u);if(d){const h=d.dimensions.width,f=d.dimensions.height,m=prompt("Enter new width (for example:250):",h?h.toString():""),v=prompt("Enter new height (for example:200):",f?f.toString():"");if(m===null||v===null)return;d.dimensions.width.set(parseInt(m,10)||0),d.dimensions.height.set(parseInt(v,10)||0),d.resizingWidth.set(!0),d.resizingHeight.set(!0)}}b(()=>{},()=>{_(n,i.cursor)}),Ne(),fe(),qr(e,{zIndex:1/0,get position(){return o(s)},bgColor:"white",id:"editor",children:(u,d)=>{var h=mc(),f=dt(Ut(h),2),m=dt(f,2);qa(m,{placeholder:"Node Label"});var v=dt(m,2),w=dt(v,2);Tt("click",f,()=>i.editing.set(null)),Tt("click",v,a),Tt("click",w,c),Tt("contextmenu",h,l),O(u,h)},$$slots:{default:!0}}),re()}var yc=Kt("<!> <!>",1),xc=Kt('<section role="presentation" class="svelvet-wrapper svelte-13nq7cv"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></section>');function bc(e,t){oe(t,!1);const[n,r]=xe(),i=()=>E(mt,"$groups",n),s=()=>E(yt,"$dimensionsStore",n),l=()=>E(ae,"$nodeBounds",n),a=()=>E(zt,"$graphDOMElement",n),c=()=>E(Te,"$initialClickPosition",n),u=()=>E(_t,"$selected",n),d=()=>E(ft,"$activeGroup",n),h=()=>E(on,"$connectingFrom",n),f=()=>E(Er,"$touchDistance",n),m=()=>E(F,"$scale",n),v=()=>E(xt,"$translation",n),w=()=>E(de,"$editing",n),y=x();let p=g(t,"graph",8),P=g(t,"width",8),A=g(t,"height",8),N=g(t,"minimap",12,!1),I=g(t,"controls",12,!1),G=g(t,"toggle",8,!1),J=g(t,"fixedZoom",8,!1),z=g(t,"pannable",8,!0),tt=g(t,"disableSelection",8,!1),V=g(t,"ZOOM_INCREMENT",8,.1),pt=g(t,"PAN_INCREMENT",8,50),lt=g(t,"PAN_TIME",8,250),Q=g(t,"MAX_SCALE",8,3),Y=g(t,"MIN_SCALE",8,.2),it=g(t,"selectionColor",8),B=g(t,"backgroundExists",8),X=g(t,"fitView",8,!1),ot=g(t,"trackpadPan",8),gt=g(t,"modifier",8),M=g(t,"theme",12,"light"),Ot=g(t,"title",8),et=g(t,"drawer",12,!1),L=g(t,"contrast",8,!1);console.log("Initial Graph drawer prop:",et());let Pt;const Yt=ro(),ht={},W=C(!1),q=C(0),zt=C(null),ut=p().cursor,F=p().transforms.scale,yt=p().dimensions,xt=p().transforms.translation,mt=p().groups,vt=p().groupBoxes,_t=i().selected.nodes,ft=p().activeGroup,$t=p().initialNodePositions,de=p().editing,ae=p().bounds.nodeBounds;let $=0,Z=1,st=x({x:0,y:0,top:0,left:0}),Ct=x(!1),Bt=x(!1),Et=x(!1),pe=x(!1),me=!1,Re=x(!1),at,Ae=x(null),be=x(null),Ee=x(null),Ke=x(null),Me=x(null);const _e={id:null,position:p().cursor,offset:C({x:0,y:0}),connected:C(new Set),dynamic:C(!1),edge:null,edgeColor:C(null),direction:C("self"),inputKey:null,type:"output",moving:Vo(!1),store:null,mounted:C(!0),rotation:Vo(0),node:{zIndex:C(1/0),rotating:C(!1),position:p().cursor,dimensions:{width:C(0),height:C(0)}}};jt("graphDOMElement",zt),jt("cursorAnchor",_e),jt("duplicate",W),jt("graph",p()),jt("transforms",p().transforms),jt("dimensions",p().dimensions),jt("locked",p().locked),jt("groups",p().groups),jt("bounds",p().bounds),jt("edgeStore",p().edges),jt("nodeStore",p().nodes),jt("mounted",q),Qe(()=>{console.log("Graph component mounted with drawer1:",et()),je()});async function tn(){await gl(),Fe.set(!0);const{x:S,y:R,scale:St}=Da(at,l());S!==null&&R!==null&&St!==null&&(p().transforms.scale.set(St),xt.set({x:S,y:R})),Fe.set(!1),_(Re,!0)}async function qt(){_(be,(await po(async()=>{const{default:S}=await Promise.resolve().then(()=>Gc);return{default:S}},void 0,import.meta.url)).default)}async function te(){_(Ae,(await po(async()=>{const{default:S}=await import("./ThemeToggle-kkT17NNf.js");return{default:S}},[],import.meta.url)).default)}async function en(){_(Ee,(await po(async()=>{const{default:S}=await import("./Controls-BbwSeaU6.js");return{default:S}},__vite__mapDeps([0,1]),import.meta.url)).default)}async function qe(){_(Ke,(await po(async()=>{const{default:S}=await import("./DrawerController-IZ5Ri7mN.js");return{default:S}},__vite__mapDeps([2,1,3]),import.meta.url)).default)}async function Be(){_(Me,(await po(async()=>{const{default:S}=await import("./ContrastTheme-65mNcdO8.js");return{default:S}},[],import.meta.url)).default)}function je(){if(!a())return;const S=a().getBoundingClientRect();at={top:S.top,left:S.left,bottom:S.bottom,right:S.right,width:S.width,height:S.height},p().dimensions.set(at),X()==="resize"&&tn()}function En(S){var St,Nt;if(o(Bt)){const Ft=`${Zl()}/${p().id}`,ve=k(ut),Ve=ve.x-c().x,Ye=ve.y-c().y,Pn=Math.min(c().y,c().y+Ye),$e=Math.min(c().x,c().x+Ve),Ge={width:C(Math.abs(Ve)),height:C(Math.abs(Ye))},fo=C({x:$e,y:Pn}),zn={group:C(Ft),dimensions:Ge,position:fo,color:C(Hl()),moving:C(!1)};vt.add(zn,Ft),Array.from(u()).forEach(Bn=>{Bn.group.set(Ft)}),mt.update(Bn=>{const ar={parent:C(zn),nodes:C(new Set([...u(),zn]))};return Bn[Ft]=ar,Bn}),U(_t,new Set),_(Bt,!1),_(Ct,!1)}d()&&Array.from(k(i()[d()].nodes)).forEach(Ft=>{const ve=Yo(k(Ft.position).x,k(Ft.position).y);Ft.position.set(ve),Ft.moving.set(!1)});const R=p().edges.get("cursor");R&&(p().edges.delete("cursor"),R.disconnect||Yt("edgeDrop",{cursor:k(ut),source:{node:(St=h())==null?void 0:St.anchor.node.id.slice(2),anchor:(Nt=h())==null?void 0:Nt.anchor.id.split("/")[0].slice(2)}})),U(ft,null),U(Te,{x:0,y:0}),U($t,[]),_(Ct,!1),_(pe,!1),U(Fe,!1),S.shiftKey||on.set(null),jn(st,o(st).y=0),jn(st,o(st).x=0)}function Rn(S){if(!z()&&!(S.shiftKey||S.metaKey)||S.button===2)return;a()&&a().focus();const{clientX:R,clientY:St}=S;if(U(Te,k(ut)),S.shiftKey||S.metaKey){S.preventDefault(),_(Ct,!0);const{top:Nt,left:wt}=o(y);jn(st,o(st).y=St-Nt),jn(st,o(st).x=R-wt),jn(st,o(st).top=Nt),jn(st,o(st).left=wt),S.shiftKey&&S.metaKey?_(Bt,!0):_(Bt,!1),S.metaKey&&!S.shiftKey?_(Et,!0):_(Et,!1)}else _(pe,!0),U(_t,new Set),U(_t,u())}function kt(S){U(_t,new Set),U(_t,u()),U(Te,k(ut)),_(pe,!0),S.touches.length===2&&(Pe(),$=f(),Z=m())}function Dt(){_(pe,!1),me=!1}function Pe(){me||(me=!0,Pt=requestAnimationFrame(De))}function De(){if(!me){cancelAnimationFrame(Pt);return}const R=f()/$;U(F,Z*R),Pt=requestAnimationFrame(De)}function ce(S){const{key:R,code:St}=S,Nt=S.target;if(!(Nt.tagName=="INPUT"||Nt.tagName=="TEXTAREA")){if(St==="KeyA"&&S[`${gt()}Key`]){const wt=p().nodes.getAll().filter(Ft=>!k(Ft.locked));U(_t,new Set(wt))}else if(_i(R))D(R,S);else if(R==="=")mi(-1,p().dimensions,p().transforms,V());else if(R==="-")mi(1,p().dimensions,p().transforms,V());else if(R==="0")tn();else if(R==="Control")i().selected.nodes.set(new Set);else if(St==="KeyD"&&S[`${gt()}Key`])W.set(!0),setTimeout(()=>{W.set(!1)},100);else if(R==="Tab"&&(S.altKey||S.ctrlKey))Nn();else if(R==="l")M(M()==="light"?"dark":"light");else if(R==="d")et(!et());else if(R==="m")N(!N());else if(R==="c")I(!I());else if(R==="e"){const wt=Array.from(u())[0];p().editing.set(wt)}else return;S.preventDefault()}}function hn(S){var Ye;S.preventDefault();const R=(Ye=a())==null?void 0:Ye.getBoundingClientRect();if(!R)return;const St=S.clientX-R.left,Nt=S.clientY-R.top,{x:wt,y:Ft}=Yo(St,Nt);if(console.log(`Dropped Node at Snapped Position: (${wt}, ${Ft})`),!Ve)return;const ve={id:`node-${Date.now()}`,rotation:C(0),position:C({x:wt,y:Ft}),moving:C(!1),label:C("New Node"),dimensions:{width:C(200),height:C(100)},inputs:C(2),outputs:C(2),anchors:C([]),group:C(null),collapsed:C(!1),resizingWidth:C(!1),resizingHeight:C(!1),rotating:C(!1),editable:C(!0),locked:C(!1),recalculateAnchors:Pn=>{},resizable:C(!0),zIndex:C(1),edge:null,direction:C("TD"),borderRadius:C(5),borderWidth:C(1),connections:C([]),bgColor:C("#007bff"),borderColor:C("#000"),selectionColor:C("#ff0000"),textColor:C("#fff")};let Ve=null;p().nodes.add(ve,ve.id),Ve=null}function Nn(){const S=p().nodes.getAll(),R=S.findIndex(Nt=>u().has(Nt)),St=R+1;u().delete(S[R]),u().add(S[St])}function ge(S){const{key:R}=S;_i(R)?(clearInterval(ht[R]),delete ht[R]):R==="Shift"&&on.set(null)}function Ue(S){if(J())return;const R=S.shiftKey?.15:1,{clientX:St,clientY:Nt,deltaY:wt}=S,Ft=v(),ve={x:St,y:Nt};if((ot()||S.metaKey)&&wt%1===0){U(xt,{x:wo(xt,le(v).x-=S.deltaX,le(v)),y:wo(xt,le(v).y-=S.deltaY,le(v))});return}if(m()>=Q()&&wt<0||m()<=Y()&&wt>0)return;const Ve=Math.min(.009*R*Math.abs(wt),.08),Ye=gs(m(),Math.sign(wt),Ve),Pn=hs(m(),Ye,Ft,ve,at);F.set(Ye),xt.set(Pn)}function we(S){S.preventDefault()}function D(S,R){const St=R.shiftKey?2:1,Nt=S==="ArrowLeft"||S==="ArrowUp"?1:-1,wt=S==="ArrowLeft"||S==="ArrowRight",Ft=wt?v().x:v().y,ve=Ft+Nt*pt()*St;if(!ht[S]){const Ve=performance.now();let Ye=setInterval(()=>{const Pn=performance.now()-Ve;if(u().size===0){const $e=Ft+(ve-Ft)*(Pn/lt());xt.set({x:wt?$e:v().x,y:wt?v().y:$e})}else{const $e={x:wt?-Nt*2:0,y:wt?0:-Nt*2};Array.from(u()).forEach(Ge=>{const fo=k(Ge.position);let zn;const Bn=k(Ge.group),ar=k(p().groupBoxes);if(Bn&&(zn=ar.get(Bn)),zn){const ko=k(Ge.dimensions.width),cr=k(Ge.dimensions.height),xs=_s(zn,ko,cr);ms(fo,$e,Ge.position,xs)}else{const ko={x:fo.x+$e.x,y:fo.y+$e.y},cr=Yo(ko.x,ko.y);Ge.position.set(cr)}})}},2);ht[S]=Ye}}b(()=>s(),()=>{_(y,s())}),b(()=>nt(M()),()=>{M()&&document.documentElement.setAttribute("svelvet-theme",M())}),b(()=>(o(Re),nt(X())),()=>{!o(Re)&&X()&&tn()}),b(()=>(nt(G()),o(Ae)),()=>{G()&&!o(Ae)&&te()}),b(()=>(nt(N()),o(be)),()=>{N()&&!o(be)&&qt()}),b(()=>(nt(I()),o(Ee)),()=>{I()&&!o(Ee)&&en()}),b(()=>(nt(et()),o(Ke)),()=>{et()&&!o(Ke)&&qe()}),b(()=>(nt(L()),o(Me)),()=>{L()&&!o(Me)&&Be()}),b(()=>nt(et()),()=>{console.log("Reactive Graph drawer prop:",et())}),Ne(),fe();var T=xc();Tt("touchend",Zn,En),Tt("mouseup",Zn,En),Tt("resize",Zn,je),Tt("scroll",Zn,je),K(T,"tabindex",0);var rt=Ut(T);Xa(rt,{get isMovable(){return o(pe)},children:(S,R)=>{var St=yc(),Nt=ct(St);{var wt=ve=>{_c(ve,{get editing(){return w()}})};Lt(Nt,ve=>{w()&&ve(wt)})}var Ft=dt(Nt,2);Wt(Ft,t,"default",{},null),O(S,St)},$$slots:{default:!0}});var j=dt(rt,2);{var bt=S=>{var R=At(),St=ct(R);Wt(St,t,"background",{},null),O(S,R)},Rt=S=>{xa(S,{})};Lt(j,S=>{B()?S(bt):S(Rt,!1)})}var Gt=dt(j,2);{var he=S=>{var R=At(),St=ct(R);vo(St,()=>o(be),(Nt,wt)=>{wt(Nt,{})}),O(S,R)};Lt(Gt,S=>{N()&&S(he)})}var ne=dt(Gt,2);{var Se=S=>{var R=At(),St=ct(R);vo(St,()=>o(Ee),(Nt,wt)=>{wt(Nt,{})}),O(S,R)};Lt(ne,S=>{I()&&S(Se)})}var An=dt(ne,2);{var qn=S=>{var R=At(),St=ct(R);vo(St,()=>o(Ae),(Nt,wt)=>{wt(Nt,{})}),O(S,R)};Lt(An,S=>{G()&&S(qn)})}var nn=dt(An,2);{var Mn=S=>{var R=At(),St=ct(R);vo(St,()=>o(Ke),(Nt,wt)=>{wt(Nt,{})}),O(S,R)};Lt(nn,S=>{et()&&S(Mn)})}var gn=dt(nn,2);{var ue=S=>{var R=At(),St=ct(R);vo(St,()=>o(Me),(Nt,wt)=>{wt(Nt,{})}),O(S,R)};Lt(gn,S=>{L()&&S(ue)})}var Zt=dt(gn,2);Wt(Zt,t,"minimap",{},null);var ye=dt(Zt,2);Wt(ye,t,"drawer",{},null);var We=dt(ye,2);Wt(We,t,"controls",{},null);var Xt=dt(We,2);Wt(Xt,t,"toggle",{},null);var Jt=dt(Xt,2);Wt(Jt,t,"contrast",{},null);var vn=dt(Jt,2);{var On=S=>{ea(S,{get creating(){return o(Bt)},get anchor(){return o(st)},get graph(){return p()},get adding(){return o(Et)},get color(){return it()}})};Lt(vn,S=>{o(Ct)&&!tt()&&S(On)})}oo(T,S=>U(zt,S),()=>a()),Vt(()=>{K(T,"id",p().id),K(T,"title",Ot()),H(T,"width",P()?P()+"px":"100%"),H(T,"height",A()?A()+"px":"100%"),H(T,"cursor",z()?"move":"default")}),Tt("wheel",T,ze(Ue)),Tt("mousedown",T,xo(ze(Rn))),Tt("touchend",T,ze(Dt)),Tt("touchstart",T,xo(ze(kt))),Tt("keydown",T,ce),Tt("keyup",T,ge),Tt("dragover",T,ze(we)),Tt("drop",T,hn),O(e,T),re(),r()}function wc(e){e.parentNodes.forEach(s=>Sc(s));const[t,n]=Cc(e);Ec(t,e),Nc(t);for(let s=0;s<10;s++){let l=!1;for(let a=0;a<=n;a++)if(t[a])for(let c=0;c<t[a].length;c++){const u=t[a][c],d=Mc(t,u,c);d&&(Fn(t[a],c,d),l=!0)}if(!l)break}const r=Pc(t);for(let s=0;s<10&&Dc(t,r);s++);for(let s=0;s<2;s++){let l=!1;for(let a=0;a<=n;a++)for(let c=0;c<t[a].length;c++){const u=t[a][c],d=Ac(t,u,c);d&&(Fn(t[a],c,d),l=!0)}if(!l)break}const i=[];for(let s=0;s<=n;s++)i.push(t[s]);return i}function Sc(e,t=0,n=0){const r=[],i=(s,l=0,a=0)=>{s.depth=Math.max(s.depth,l),s.nesting=Math.max(s.nesting,a),r.push(s);for(const c of s.children){const{node:u,length:d}=c;i(u,d+l,a+1)}};i(e,t,n);for(const s of r)if(s.children.length){s.nesting=s.children[0].node.nesting-1,s.depth=s.children[0].node.depth-s.children[0].length;for(const l of s.children)s.nesting=Math.min(s.nesting,l.node.nesting-1),s.depth=Math.min(s.depth,l.node.depth-l.length)}}function Cc(e){let t=0;const n={};for(const r in e.nodeList){const{depth:i,parents:s,children:l,type:a,data:c}=e.nodeList[r];t=Math.max(t,i),n[i]||(n[i]=[]);const u={id:r,label:c.content,children:[],parents:[],layer:i,type:a.trim()};c.props&&(u.propsId=c.props.trim());for(const d of s)u.parents.push(d.node.id);for(const d of l)u.children.push(d.node.id);n[i].push(u)}return[n,t]}function Ec(e,t){for(const n in t.nodeList)for(const r of t.nodeList[n].children)if(r.node.depth-1>t.nodeList[n].depth){const i=t.nodeList[n].depth+1,s=r.node.depth-1,l=[];let a=0;for(let c=i;c<=s;c++){const u={id:`GHOST_${r.node.id}_${a}`,label:"",children:[],parents:[],layer:c,ignore:!0};l.push(u),a++}for(const c of r.node.parents)l[0].parents.push(c.node.id);l[l.length-1].children.push(r.node.id);for(let c=0;c<l.length-1;c++)l[c].children.push(`GHOST_${r.node.id}_${c+1}`);for(let c=s;c>=i;c--)l.length>0&&e[c].push(l[0]);for(const c of e[t.nodeList[n].depth])c.id===n&&(c.children.push(l[0].id),c.children=c.children.filter(u=>u!==r.node.id))}}function Nc(e){let t=0;for(const n in e)t=Math.max(e[n].length,t);for(const n in e)if(e[n].length<t){const r=Array.from({length:t-e[n].length},()=>({id:"NULL_NODE",children:[],parents:[],layer:parseInt(n),ignore:!0}));e[n]=e[n].concat(r)}}function bi(e,t,n){let r=0,i=0;for(const s of t.parents){for(let l=0;l<e[t.layer-1].length;l++)if(s===e[t.layer-1][l].id){r+=Math.abs(n-l);break}i++}for(const s of t.children){for(let l=0;l<e[t.layer+1].length;l++)if(s===e[t.layer+1][l].id){r+=Math.abs(n-l);break}i++}return isNaN(r/i)?0:r/i}function wi(e,t,n){let r=0,i=0;for(const s of t.parents){for(let l=0;l<e[t.layer-1].length;l++)if(s===e[t.layer-1][l].id){r+=Math.abs(n-l);break}i++}return isNaN(r/i)?0:r/i}function Si(e,t,n){let r=0,i=0;for(const s of t.children){for(let l=0;l<e[t.layer+1].length;l++)if(s===e[t.layer+1][l].id){r+=Math.abs(n-l);break}i++}return isNaN(r/i)?0:r/i}function Ac(e,t,n){const r=Ar(e,t.layer);let i=0;t.layer===0?i=Si(e,t,n):i=wi(e,t,n);let s=i,l=n;for(let a=0;a<e[t.layer].length;a++)if(e[t.layer][a].id==="NULL_NODE"){Fn(e[t.layer],n,a);const u=Ar(e,t.layer);let d=0;t.layer===0?d=Si(e,t,a):d=wi(e,t,a),u<=r&&d<s&&(s=d,l=a),Fn(e[t.layer],a,n)}return l===n?null:l}function Mc(e,t,n){const r={};let i=1/0,s=0;for(let l=0;l<e[t.layer].length;l++){const a=bi(e,t,l),c=bi(e,e[t.layer][l],n);r[l]=a+c}for(const l in r)r[l]<i&&(i=r[l],s=parseInt(l));return s===n?null:s}function Fn(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Pc(e){const t=[];for(const n in e)for(const r of e[n])t.push(r);return t.sort((n,r)=>r.parents.length+r.children.length-(n.parents.length+n.children.length))}function Ar(e,t){let n=0;for(let r=0;r<e[t].length;r++){const i=e[t][r],s=[],l=[];if(e[t-1])for(let a=r+1;a<e[t-1].length;a++)i.parents.includes(e[t-1][a].id)&&s.push(a);if(e[t+1])for(let a=r+1;a<e[t+1].length;a++)i.children.includes(e[t+1][a].id)&&l.push(a);for(let a=r+1;a<e[t].length;a++){const c=e[t][a];if(s.length)for(let u=0;u<e[t-1].length;u++)c.parents.includes(e[t-1][u].id)&&s.forEach(d=>{u<d&&n++});if(l.length)for(let u=0;u<e[t+1].length;u++)c.children.includes(e[t+1][u].id)&&l.forEach(d=>{u<d&&n++})}}return n}function Dc(e,t){let n=!1;for(const r of t){if(r.children.length+r.parents.length===0)return n;let i=0;for(let a=0;a<e[r.layer].length;a++)if(e[r.layer][a].id===r.id){i=a;break}let s=1/0,l=i;for(let a=0;a<e[r.layer].length;a++){Fn(e[r.layer],i,a);const c=Ar(e,r.layer);c<s&&(s=c,l=a),Fn(e[r.layer],a,i)}l!==i&&(Fn(e[r.layer],i,l),n=!0)}return n}function Ic(e,t){oe(t,!1);let n=g(t,"mermaid",8,""),r=g(t,"mermaidConfig",24,()=>({}));const i=jl(n());jt("flowchart",i);const s=wc(i),l=It("graph"),a=100,c=100;let u;Qe(()=>{l.nodes.subscribe(m=>u=Object.fromEntries(m));let f=0;for(const m of s){let v=0,w=-1/0;for(const y of m)y.ignore||(u[`N-${y.id}`].position.update(()=>({x:v,y:f})),u[`N-${y.id}`].dimensions.width.subscribe(p=>v+=p),u[`N-${y.id}`].dimensions.height.subscribe(p=>w=Math.max(w,p))),v+=a;f+=w+c}}),fe();var d=At(),h=ct(d);rn(h,1,()=>s,Jn,(f,m)=>{var v=At(),w=ct(v);rn(w,1,()=>o(m),Jn,(y,p)=>{var P=At(),A=ct(P);{var N=I=>{const G=ke(()=>o(p).children.map(J=>[J,"1"]));qr(I,Hr({get label(){return o(p).label},get id(){return o(p).id},TD:!0},()=>r()[o(p).id],{get connections(){return o(G)}}))};Lt(A,I=>{o(p).ignore||I(N)})}O(y,P)}),O(f,v)}),O(e,d),re()}function Lc(e){var r,i;const t=JSON.parse(e);return vs(t.id,{...t,editable:t.editable,direction:t.direction,locked:t.locked,zoom:((r=t.transforms)==null?void 0:r.scale)??1,translation:((i=t.transforms)==null?void 0:i.translation)??{x:0,y:0},edge:t.edge})}var kc=Kt("<!> <!>",1),Tc=Kt('<div class="svelvet-temp svelte-lsy29y"></div>');function Rc(e,t){const n=Gr(t);oe(t,!1);const r=x(),i=x();let s=g(t,"mermaid",8,""),l=g(t,"theme",8,"light"),a=g(t,"id",8,0),c=g(t,"snapTo",8,0),u=g(t,"zoom",8,1),d=g(t,"TD",8,!1),h=g(t,"editable",8,!0),f=g(t,"locked",8,!1),m=g(t,"width",8,0),v=g(t,"height",8,0),w=g(t,"minimap",8,!1),y=g(t,"controls",8,!1),p=g(t,"toggle",8,!1),P=g(t,"drawer",8,!1),A=g(t,"contrast",8,!1),N=g(t,"fitView",8,!1),I=g(t,"selectionColor",8,"lightblue"),G=g(t,"edgeStyle",8,"bezier"),J=g(t,"endStyles",24,()=>[null,null]),z=g(t,"edge",8,null),tt=g(t,"disableSelection",8,!1),V=g(t,"mermaidConfig",24,()=>({})),pt=g(t,"translation",24,()=>({x:0,y:0})),lt=g(t,"trackpadPan",8,!1),Q=g(t,"modifier",8,"meta"),Y=g(t,"raiseEdgesOnSelect",8,!1),it=g(t,"edgesAboveNode",8,!1),B=g(t,"title",8,""),X=g(t,"fixedZoom",8,!1),ot=g(t,"pannable",8,!0);const gt=ro();let M=x(null),Ot=d()?"TD":"LR";jt("snapTo",c()),jt("edgeStyle",G()),jt("endStyles",J()),jt("graphEdge",z()),jt("raiseEdgesOnSelect",Y()),jt("edgesAboveNode",it()),jt("graph",o(M)),Qe(()=>{console.log("Graph component mounted with drawer:",P());const W=localStorage.getItem("state");if(console.log("stateObject during onMount:",W),W)_(M,Lc(W)),console.log("This is the graph set using reloadStore",o(M)),pr.add(o(M),o(M).id),console.log("graphStore updated",o(M));else{let q=`G-${a()||pr.count()+1}`;_(M,vs(q,{zoom:u(),direction:Ot,editable:h(),locked:f(),translation:pt()})),pr.add(o(M),q)}});function et(W,q){if(!o(M))return;const zt=`N-${W[0]}`,ut=o(M).nodes.get(zt);if(!ut)return;const F=ut.anchors.get(`A-${W[1]}/N-${W[0]}`);if(!F)return;const yt=`N-${q[0]}`,xt=o(M).nodes.get(yt);if(!xt)return;const mt=xt.anchors.get(`A-${q[1]}/N-${q[0]}`);if(!mt)return;const vt=o(M).edges.match(F,mt);vt&&o(M).edges.delete(vt[0])}b(()=>{},()=>{_(r,n.background)}),b(()=>o(M),()=>{_(i,o(M)&&o(M).edges)}),b(()=>(o(M),nt(u())),()=>{o(M)&&o(M).transforms.scale.set(u())}),b(()=>o(i),()=>{o(i)&&o(i).onEdgeChange((W,q)=>{gt(q,{sourceAnchor:W.source,targetAnchor:W.target,sourceNode:W.source.node,targetNode:W.target.node})})}),Ne(),fe();var L=At(),Pt=ct(L);{var Yt=W=>{bc(W,{get width(){return m()},get height(){return v()},get toggle(){return p()},get backgroundExists(){return o(r)},get minimap(){return w()},get graph(){return o(M)},get fitView(){return N()},get fixedZoom(){return X()},get pannable(){return ot()},get theme(){return l()},get drawer(){return P()},get controls(){return y()},get selectionColor(){return I()},get disableSelection(){return tt()},get trackpadPan(){return lt()},get modifier(){return Q()},get title(){return B()},get contrast(){return A()},$$events:{edgeDrop(q){se.call(this,t,q)}},children:(q,zt)=>{var ut=kc(),F=ct(ut);{var yt=mt=>{Ic(mt,{get mermaid(){return s()},get mermaidConfig(){return V()}})};Lt(F,mt=>{s().length&&mt(yt)})}var xt=dt(F,2);Wt(xt,t,"default",{},null),O(q,ut)},$$slots:{default:!0,minimap:(q,zt)=>{var ut=At(),F=ct(ut);Wt(F,t,"minimap",{},null),O(q,ut)},controls:(q,zt)=>{var ut=At(),F=ct(ut);Wt(F,t,"controls",{},null),O(q,ut)},background:(q,zt)=>{var ut=At(),F=ct(ut);Wt(F,t,"background",{},null),O(q,ut)},toggle:(q,zt)=>{var ut=At(),F=ct(ut);Wt(F,t,"toggle",{},null),O(q,ut)},drawer:(q,zt)=>{var ut=At(),F=ct(ut);Wt(F,t,"drawer",{},null),O(q,ut)},contrast:(q,zt)=>{var ut=At(),F=ct(ut);Wt(F,t,"contrast",{},null),O(q,ut)}}})},ht=W=>{var q=Tc();Vt(()=>{H(q,"width",m()?m()+"px":"100%"),H(q,"height",v()?v()+"px":"100%")}),O(W,q)};Lt(Pt,W=>{o(M)?W(Yt):W(ht,!1)})}return O(e,L),Xr(t,"disconnect",et),re({disconnect:et})}var Oc=Kt('<button class="minimap-node svelte-1hs9omb"></button>');function zc(e,t){oe(t,!1);const[n,r]=xe(),i=()=>E(G,"$position",n),s=()=>E(V,"$rotation",n),l=()=>E(o(m),"$zIndex",n),a=()=>E(tt,"$borderRadius",n),c=()=>E(z,"$bgColor",n),u=()=>E(pt,"$width",n),d=()=>E(lt,"$height",n),h=x(),f=x(),m=x(),v=x();let w=g(t,"node",8),y=g(t,"hidden",8,!1),p=g(t,"toggleHidden",8),P=g(t,"top",8),A=g(t,"left",8),N=g(t,"nodeColor",8,null),I=g(t,"hideable",8);const{position:G,dimensions:J,bgColor:z,borderRadius:tt,rotation:V}=w(),{width:pt,height:lt}=J;let Q=x(null);Qe(()=>{var it;try{const B=(it=document.querySelector(`#${w().id}`))==null?void 0:it.firstChild;B&&_(Q,window.getComputedStyle(B).backgroundColor)}catch(B){console.error(B)}}),b(()=>i(),()=>{_(h,i())}),b(()=>s(),()=>{_(f,s())}),b(()=>nt(w()),()=>{yn(_(m,w().zIndex),"$zIndex",n)}),b(()=>o(Q),()=>{_(v,o(Q)==="rgba(0, 0, 0, 0)")}),Ne(),fe();var Y=Oc();Vt(()=>{Ht(Y,"hidden",y()),Ht(Y,"hideable",I()),H(Y,"z-index",l()),H(Y,"border-radius",`${a()??""}px`),H(Y,"--prop-background-color",N()||c()||!o(v)&&o(Q)||null),H(Y,"width",`${u()??""}px`),H(Y,"height",`${d()??""}px`),H(Y,"transform",`rotate(${o(f)??""}deg)`),H(Y,"top",`${o(h).y-P()}px`),H(Y,"left",`${o(h).x-A()}px`)}),Tt("click",Y,()=>{I()&&p()(w())}),O(e,Y),re(),r()}var Bc=Kt('<div class="mini-bounding-box svelte-aoq4g"></div>');function Wc(e,t){oe(t,!1);const[n,r]=xe(),i=()=>E(u(),"$position",n),s=()=>E(v,"$width",n),l=()=>E(w,"$height",n),a=()=>E(d(),"$color",n);let c=g(t,"dimensions",8),u=g(t,"position",8),d=g(t,"color",8),h=g(t,"groupName",8),f=g(t,"top",8),m=g(t,"left",8);const{width:v,height:w}=c();fe();var y=Bc();Vt(()=>{K(y,"id",`mini-${h()}-bounding-box`),K(y,"style",`border: solid 4px ${a()??""};`),H(y,"top",`${i().y-f()}px`),H(y,"left",`${i().x-m()}px`),H(y,"width",`${s()}px`),H(y,"height",`${l()}px`),H(y,"background-color",a())}),O(e,y),re(),r()}var Yc=Kt('<div class="minimap-wrapper svelte-1qxvbux"><div class="node-wrapper svelte-1qxvbux"><!> <!></div> <div class="overlay svelte-1qxvbux"></div></div>');function ys(e,t){oe(t,!1);const[n,r]=xe(),i=()=>E(ut,"$graphBounds",n),s=()=>E(yt,"$groups",n),l=()=>E(mt,"$dimensions",n),a=()=>E(_t,"$scale",n),c=()=>E(ft,"$translation",n),u=()=>E(vt,"$hidden",n),d=()=>E(F,"$nodes",n),h=()=>E($t,"$groupBoxes",n),f=x(),m=x(),v=x(),w=x(),y=x(),p=x(),P=x(),A=x(),N=x(),I=x(),G=x(),J=x(),z=x(),tt=x(),V=x(),pt=x(),lt=x(),Q=x(),Y=x(),it=x(),B=x(),X=x(),ot=x();let gt=It("graph"),M=g(t,"width",8,100),Ot=g(t,"height",24,M),et=g(t,"mapColor",8,null),L=g(t,"nodeColor",8,null),Pt=g(t,"borderColor",8,null),Yt=g(t,"corner",8,"SE"),ht=g(t,"hideable",8,!1);const W=.9,q=M()*W,zt=Ot()*W,ut=gt.bounds.graphBounds,F=gt.nodes,yt=gt.groups,xt=gt.transforms,mt=gt.dimensions,vt=s().hidden.nodes,_t=xt.scale,ft=xt.translation,$t=gt.groupBoxes,de={clientX:0,clientY:0};function ae(Et){u().has(Et)?u().delete(Et):u().add(Et),U(vt,u())}b(()=>i(),()=>{_(f,i())}),b(()=>o(f),()=>{_(m,o(f).top)}),b(()=>o(f),()=>{_(v,o(f).left)}),b(()=>o(f),()=>{_(w,o(f).right)}),b(()=>o(f),()=>{_(y,o(f).bottom)}),b(()=>l(),()=>{_(p,l().width)}),b(()=>l(),()=>{_(P,l().height)}),b(()=>(o(w),o(v)),()=>{_(A,o(w)-o(v))}),b(()=>(o(y),o(m)),()=>{_(N,o(y)-o(m))}),b(()=>(o(A),o(N)),()=>{_(I,o(A)/o(N))}),b(()=>(nt(M()),nt(Ot())),()=>{_(G,M()/Ot())}),b(()=>(o(p),o(P),a(),c()),()=>{_(J,Lo(de,0,0,o(p),o(P),a(),c()))}),b(()=>(o(p),o(A),a()),()=>{_(z,o(p)/o(A)/a())}),b(()=>(o(P),o(N),a()),()=>{_(tt,o(P)/o(N)/a())}),b(()=>(o(J),o(m),o(N)),()=>{_(V,(o(J).y-o(m))/o(N))}),b(()=>(o(J),o(v),o(A)),()=>{_(pt,(o(J).x-o(v))/o(A))}),b(()=>(o(I),o(G)),()=>{_(Q,o(I)>=o(G))}),b(()=>(o(Q),o(A),o(N)),()=>{_(Y,o(Q)?q/o(A):zt/o(N))}),b(()=>(o(N),o(Y)),()=>{_(ot,o(N)*o(Y))}),b(()=>(nt(Ot()),o(ot)),()=>{_(B,(Ot()-o(ot))/2)}),b(()=>(o(A),o(Y)),()=>{_(X,o(A)*o(Y))}),b(()=>(nt(M()),o(X)),()=>{_(it,(M()-o(X))/2)}),b(()=>(o(B),o(V),o(ot),o(it),o(pt),o(X),o(z),o(tt)),()=>{_(lt,`
		top: ${o(B)+o(V)*o(ot)}px;
		left: ${o(it)+o(pt)*o(X)}px;
		width: ${o(z)*o(X)}px;
		height: ${o(tt)*o(ot)}px;`)}),Ne(),fe();var $=Yc(),Z=Ut($),st=Ut(Z);rn(st,1,()=>Array.from(d().entries()),([Et,pe])=>Et,(Et,pe)=>{let me=()=>o(pe)[1];var Re=At(),at=ct(Re);{var Ae=be=>{const Ee=ke(()=>u().has(me()));zc(be,{get node(){return me()},get top(){return o(m)},get left(){return o(v)},get nodeColor(){return L()},get hidden(){return o(Ee)},toggleHidden:ae,get hideable(){return ht()}})};Lt(at,be=>{me().id!=="N-editor"&&be(Ae)})}O(Et,Re)});var Ct=dt(st,2);rn(Ct,1,()=>Array.from(h().entries()),([Et,pe])=>Et,(Et,pe)=>{let me=()=>o(pe)[0];Wc(Et,Hr(()=>o(pe)[1],{get top(){return o(m)},get left(){return o(v)},get groupName(){return me()}}))});var Bt=dt(Z,2);Vt(()=>{Ht($,"SW",Yt()==="SW"),Ht($,"NE",Yt()==="NE"),Ht($,"SE",Yt()==="SE"),Ht($,"NW",Yt()==="NW"),H($,"width",`${M()??""}px`),H($,"height",`${(Ot()?Ot():M())??""}px`),H($,"--prop-minimap-border-color",Pt()),H($,"--prop-minimap-background-color",et()),H(Z,"width",`${o(A)??""}px`),H(Z,"height",`${o(N)??""}px`),H(Z,"transform",`scale(${o(Y)??""})`),K(Bt,"style",o(lt))}),O(e,$),re(),r()}const Gc=Object.freeze(Object.defineProperty({__proto__:null,default:ys},Symbol.toStringTag,{value:"Module"}));let Wn=null;const Xc={devices:{},connectors:[],subcircuits:{}};function Fc(){let e=null;return{start:(t,n)=>{e!==null&&clearTimeout(e),e=setTimeout(()=>{e=null,t()},n)},cancel:()=>{e!==null&&(clearTimeout(e),e=null)}}}const Ci=Fc();let jr=C(Xc);function Hc(e,t=1e3){if(Wn===null)return Wn=e,Ci.start(()=>{Wn=null,console.warn("Timeout waiting for the second connection")},t),!1;{Ci.cancel(),"from"in e=="from"in Wn&&console.warn("both parts of connection are the same, ie: 2 inputs or 2 outputs");const n="from"in e?e:Wn,r="to"in e?e:Wn,i={...n,...r};return Wn=null,i}}var Kc=Kt("<div></div>");function qc(e,t){oe(t,!0);let n=t.portName.startsWith("input")?"input":"output";function r(s,l){const a={id:s,port:l};return l.startsWith("input")?{to:a}:{from:a}}Ho(()=>{if(t.linked&&(n=="input"||n=="output")){const s=r(t.nodeId,t.portName),l=Hc(s);l!==!1&&jr.update(a=>(a.connectors.push(l),a))}else t.linked||console.log("unlinked node")});var i=Kc();as(i,`custom_anchor ${(n==="input"?"input":"output")??""} svelte-a511es`),Vt(()=>{Ht(i,"linked",t.linked),Ht(i,"hovering",t.hovering),Ht(i,"connecting",t.connecting)}),O(e,i),re()}var jc=Kt("<div><!></div>");function yr(e,t){oe(t,!0);let n=g(t,"location",19,()=>["left","top"]),r="";n()[0]=="left"?n()[1]=="top"?r="input1":n()[1]=="bot"&&(r="input2"):n()[0]=="right"&&(r="output");const i=`${t.id}_${r}`;var s=jc(),l=Ut(s);const a=Ze(()=>n()[0]==="left"?"west":"east"),c=Ze(()=>t.io==="input"),u=Ze(()=>t.io==="output");yo(l,{id:i,get direction(){return o(a)},get input(){return o(c)},get output(){return o(u)},multiple:!1,children:Rr,$$slots:{default:(d,h)=>{const f=Ze(()=>h.linked),m=Ze(()=>h.hovering),v=Ze(()=>h.connecting);qc(d,{get connecting(){return o(v)},get linked(){return o(f)},portName:r,get nodeId(){return t.id},get hovering(){return o(m)}})}}}),Vt(()=>as(s,`${n()[0]??""} ${n()[1]??""} svelte-12b90ve`)),O(e,s),re()}const Uc="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%20512%20512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23000000'%20d='M105%20105v302h151c148%200%20148-302%200-302H105zm-89%2046v18h71v-18H16zm368.8%2096c.2%206%20.2%2012%200%2018H496v-18H384.8zM16%20343v18h71v-18H16z'/%3e%3c/svg%3e";var Vc=Kt('<img alt="AND Gate"> <!> <!> <!>',1);function Ei(e,t){oe(t,!0);let n=g(t,"width",3,80),r=g(t,"height",3,50);const i=localStorage.getItem("and_node_num");let s=0;i===null?localStorage.setItem("and_node_num","1"):(s=parseInt(i,10)+1,localStorage.setItem("and_node_num",s.toString()));const l=`And_${s}`;localStorage.setItem(`And_Gate_${s}`,s.toString());const a={type:"And",label:l};jr.update(c=>(c.devices[l]=a,c)),qr(e,{id:l,drop:"cursor",children:Rr,$$slots:{default:(c,u)=>{var d=Vc(),h=ct(d);K(h,"src",Uc);var f=dt(h,2);yr(f,{location:["left","bot"],id:l,io:"input"});var m=dt(f,2);yr(m,{location:["left","top"],id:l,io:"input"});var v=dt(m,2);yr(v,{location:["right","mid"],id:l,io:"output"}),Vt(()=>{K(h,"width",n()),K(h,"height",r())}),O(c,d)}}}),re()}var $c=Kt("<!> <!>",1),Zc=Kt('<div id="app_bar" class="svelte-1hw913a"></div> <div id=""></div> <main class="svelte-1hw913a"><div class="side_menu svelte-1hw913a"></div> <div id="svelvet_canvas" class="svelte-1hw913a"><!></div></main>',1);function Jc(e,t){oe(t,!1),jr.subscribe(l=>{console.log(l.connectors)}),fe();var n=Zc(),r=dt(ct(n),4),i=dt(Ut(r),2),s=Ut(i);Rc(s,{theme:"LogiCap",fitView:!0,edgeStyle:"step",children:(l,a)=>{var c=$c(),u=ct(c);Ei(u,{width:80,height:50});var d=dt(u,2);Ei(d,{width:80,height:50}),O(l,c)},$$slots:{default:!0,minimap:(l,a)=>{ys(l,{width:100,corner:"NE",slot:"minimap"})}}}),O(e,n),re()}Sl(Jc,{target:document.getElementById("app")});export{mi as A,Fe as B,Da as C,ke as D,xl as E,Hn as F,tu as G,eu as H,Ll as I,ze as J,oo as K,C as L,lr as M,ct as N,jn as O,Yo as P,fn as Q,vo as R,K as S,rn as T,g as a,pr as b,o as c,dt as d,Ht as e,H as f,k as g,ls as h,fe as i,Tt as j,sn as k,O as l,x as m,re as n,Qe as o,oe as p,Kt as q,Ut as r,_ as s,Vt as t,It as u,Wt as v,Lt as w,as as x,xe as y,E as z};
