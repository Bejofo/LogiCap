const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Controls-B8yG8pDc.js","./Icon-CGI24_U3.js","./DrawerController-B014PFWq.js","./DrawerController-CDtfjO5V.css"])))=>i.map(i=>d[i]);
var IZ=Object.defineProperty;var tC=e=>{throw TypeError(e)};var OZ=(e,t,r)=>t in e?IZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var rC=(e,t,r)=>OZ(e,typeof t!="symbol"?t+"":t,r),_m=(e,t,r)=>t.has(e)||tC("Cannot "+r);var Ma=(e,t,r)=>(_m(e,t,"read from private field"),r?r.call(e):t.get(e)),Tf=(e,t,r)=>t.has(e)?tC("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),bm=(e,t,r,n)=>(_m(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),nC=(e,t,r)=>(_m(e,t,"access private method"),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const iC=!1;var _h=Array.isArray,MZ=Array.prototype.indexOf,TE=Array.from,d4=Object.defineProperty,Ba=Object.getOwnPropertyDescriptor,p4=Object.getOwnPropertyDescriptors,kZ=Object.prototype,LZ=Array.prototype,PE=Object.getPrototypeOf,sC=Object.isExtensible;function Pf(e){return typeof e=="function"}const Ls=()=>{};function NZ(e){return e()}function Jf(e){for(var t=0;t<e.length;t++)e[t]()}function qZ(e,t,r=!1){return e===void 0?r?t():t:e}const Co=2,g4=4,Yp=8,CE=16,$a=32,Il=64,wp=128,no=256,xp=512,_s=1024,Ua=2048,fc=4096,za=8192,Kp=16384,DZ=32768,Zp=65536,v4=1<<17,FZ=1<<19,m4=1<<20,zS=1<<21,aa=Symbol("$state"),y4=Symbol("legacy props"),BZ=Symbol("");function _4(e){return e===this.v}function Jp(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function zZ(e,t){return e!==t}function RE(e){return!Jp(e,this.v)}function VZ(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function GZ(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function $Z(e){throw new Error("https://svelte.dev/e/effect_orphan")}function UZ(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function b4(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function jZ(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function HZ(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function WZ(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function XZ(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ol=!1,YZ=!1;function KZ(){Ol=!0}const IE=1,OE=2,w4=4,ZZ=8,JZ=16,QZ=1,eJ=2,tJ=4,rJ=8,nJ=16,x4=1,iJ=2,$i=Symbol(),sJ="http://www.w3.org/1999/xhtml";function ME(){throw new Error("https://svelte.dev/e/invalid_default_snippet")}function Ml(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Ir=null;function oC(e){Ir=e}function kr(e){return S4().get(e)}function Qr(e,t){return S4().set(e,t),t}function xr(e,t=!1,r){var n=Ir={p:Ir,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Ol&&!t&&(Ir.l={s:null,u:null,r1:[],r2:eh(!1)}),eg(()=>{n.d=!0})}function Sr(e){const t=Ir;if(t!==null){e!==void 0&&(t.x=e);const o=t.e;if(o!==null){var r=gn,n=nn;t.e=null;try{for(var i=0;i<o.length;i++){var s=o[i];bu(s.effect),la(s.reaction),ic(s.fn)}}finally{bu(r),la(n)}}Ir=t.p,t.m=!0}return e||{}}function kl(){return!Ol||Ir!==null&&Ir.l===null}function S4(e){return Ir===null&&Ml(),Ir.c??(Ir.c=new Map(oJ(Ir)||void 0))}function oJ(e){let t=e.p;for(;t!==null;){const r=t.c;if(r!==null)return r;t=t.p}return null}function xo(e,t){if(typeof e!="object"||e===null||aa in e)return e;const r=PE(e);if(r!==kZ&&r!==LZ)return e;var n=new Map,i=_h(e),s=ti(0),o=nn,a=u=>{var c=nn;la(o);var f;return f=u(),la(c),f};return i&&n.set("length",ti(e.length)),new Proxy(e,{defineProperty(u,c,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&HZ();var h=n.get(c);return h===void 0?(h=a(()=>ti(f.value)),n.set(c,h)):we(h,a(()=>xo(f.value))),!0},deleteProperty(u,c){var f=n.get(c);if(f===void 0)c in u&&n.set(c,a(()=>ti($i)));else{if(i&&typeof c=="string"){var h=n.get("length"),g=Number(c);Number.isInteger(g)&&g<h.v&&we(h,g)}we(f,$i),aC(s)}return!0},get(u,c,f){var m;if(c===aa)return e;var h=n.get(c),g=c in u;if(h===void 0&&(!g||(m=Ba(u,c))!=null&&m.writable)&&(h=a(()=>ti(xo(g?u[c]:$i))),n.set(c,h)),h!==void 0){var y=R(h);return y===$i?void 0:y}return Reflect.get(u,c,f)},getOwnPropertyDescriptor(u,c){var f=Reflect.getOwnPropertyDescriptor(u,c);if(f&&"value"in f){var h=n.get(c);h&&(f.value=R(h))}else if(f===void 0){var g=n.get(c),y=g==null?void 0:g.v;if(g!==void 0&&y!==$i)return{enumerable:!0,configurable:!0,value:y,writable:!0}}return f},has(u,c){var y;if(c===aa)return!0;var f=n.get(c),h=f!==void 0&&f.v!==$i||Reflect.has(u,c);if(f!==void 0||gn!==null&&(!h||(y=Ba(u,c))!=null&&y.writable)){f===void 0&&(f=a(()=>ti(h?xo(u[c]):$i)),n.set(c,f));var g=R(f);if(g===$i)return!1}return h},set(u,c,f,h){var A;var g=n.get(c),y=c in u;if(i&&c==="length")for(var m=f;m<g.v;m+=1){var _=n.get(m+"");_!==void 0?we(_,$i):m in u&&(_=a(()=>ti($i)),n.set(m+"",_))}g===void 0?(!y||(A=Ba(u,c))!=null&&A.writable)&&(g=a(()=>ti(void 0)),we(g,a(()=>xo(f))),n.set(c,g)):(y=g.v!==$i,we(g,a(()=>xo(f))));var b=Reflect.getOwnPropertyDescriptor(u,c);if(b!=null&&b.set&&b.set.call(h,f),!y){if(i&&typeof c=="string"){var S=n.get("length"),E=Number(c);Number.isInteger(E)&&E>=S.v&&we(S,E+1)}aC(s)}return!0},ownKeys(u){R(s);var c=Reflect.ownKeys(u).filter(g=>{var y=n.get(g);return y===void 0||y.v!==$i});for(var[f,h]of n)h.v!==$i&&!(f in u)&&c.push(f);return c},setPrototypeOf(){WZ()}})}function aC(e,t=1){we(e,e.v+t)}function uC(e){try{if(e!==null&&typeof e=="object"&&aa in e)return e[aa]}catch{}return e}function rye(e,t){return Object.is(uC(e),uC(t))}const Qf=new Map;function eh(e,t){var r={f:0,v:e,reactions:null,equals:_4,rv:0,wv:0};return r}function ti(e,t){const r=eh(e);return D4(r),r}function qe(e,t=!1){var n;const r=eh(e);return t||(r.equals=RE),Ol&&Ir!==null&&Ir.l!==null&&((n=Ir.l).s??(n.s=[])).push(r),r}function Yc(e,t){return we(e,Pn(()=>R(e))),t}function we(e,t,r=!1){nn!==null&&!na&&kl()&&(nn.f&(Co|CE))!==0&&!(Ki!=null&&Ki.includes(e))&&XZ();let n=r?xo(t):t;return th(e,n)}function th(e,t){if(!e.equals(t)){var r=e.v;wh?Qf.set(e,t):Qf.set(e,r),e.v=t,e.wv=B4(),E4(e,Ua),kl()&&gn!==null&&(gn.f&_s)!==0&&(gn.f&($a|Il))===0&&(Ys===null?yJ([e]):Ys.push(e))}return t}function E4(e,t){var r=e.reactions;if(r!==null)for(var n=kl(),i=r.length,s=0;s<i;s++){var o=r[s],a=o.f;(a&Ua)===0&&(!n&&o===gn||(Ro(o,t),(a&(_s|no))!==0&&((a&Co)!==0?E4(o,fc):ig(o))))}}let aJ=!1;var il,A4,T4,P4;function uJ(){if(il===void 0){il=window,A4=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;T4=Ba(t,"firstChild").get,P4=Ba(t,"nextSibling").get,sC(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),sC(r)&&(r.__t=void 0)}}function kE(e=""){return document.createTextNode(e)}function Na(e){return T4.call(e)}function Qp(e){return P4.call(e)}function $t(e,t){return Na(e)}function Gt(e,t){{var r=Na(e);return r instanceof Comment&&r.data===""?Qp(r):r}}function xt(e,t=1,r=!1){let n=e;for(;t--;)n=Qp(n);return n}function cJ(e){e.textContent=""}function _l(e){var t=Co|Ua,r=nn!==null&&(nn.f&Co)!==0?nn:null;return gn===null||r!==null&&(r.f&no)!==0?t|=no:gn.f|=m4,{ctx:Ir,deps:null,effects:null,equals:_4,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:r??gn}}function ls(e){const t=_l(e);return D4(t),t}function hn(e){const t=_l(e);return t.equals=RE,t}function C4(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)_u(t[r])}}function lJ(e){for(var t=e.parent;t!==null;){if((t.f&Co)===0)return t;t=t.parent}return null}function fJ(e){var t,r=gn;bu(lJ(e));try{C4(e),t=V4(e)}finally{bu(r)}return t}function R4(e){var t=fJ(e),r=(pu||(e.f&no)!==0)&&e.deps!==null?fc:_s;Ro(e,r),e.equals(t)||(e.v=t,e.wv=B4())}function I4(e){gn===null&&nn===null&&$Z(),nn!==null&&(nn.f&no)!==0&&gn===null&&GZ(),wh&&VZ()}function hJ(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Ll(e,t,r,n=!0){var i=gn,s={ctx:Ir,deps:null,nodes_start:null,nodes_end:null,f:e|Ua,first:null,fn:t,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(r)try{ng(s),s.f|=DZ}catch(u){throw _u(s),u}else t!==null&&ig(s);var o=r&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(m4|wp))===0;if(!o&&n&&(i!==null&&hJ(s,i),nn!==null&&(nn.f&Co)!==0)){var a=nn;(a.effects??(a.effects=[])).push(s)}return s}function eg(e){const t=Ll(Yp,null,!1);return Ro(t,_s),t.teardown=e,t}function bl(e){I4();var t=gn!==null&&(gn.f&$a)!==0&&Ir!==null&&!Ir.m;if(t){var r=Ir;(r.e??(r.e=[])).push({fn:e,effect:gn,reaction:nn})}else{var n=ic(e);return n}}function dJ(e){return I4(),Nl(e)}function pJ(e){const t=Ll(Il,e,!0);return(r={})=>new Promise(n=>{r.outro?wl(t,()=>{_u(t),n(void 0)}):(_u(t),n(void 0))})}function ic(e){return Ll(g4,e,!1)}function Fe(e,t){var r=Ir,n={effect:null,ran:!1};r.l.r1.push(n),n.effect=Nl(()=>{e(),!n.ran&&(n.ran=!0,we(r.l.r2,!0),Pn(t))})}function Qi(){var e=Ir;Nl(()=>{if(R(e.l.r2)){for(var t of e.l.r1){var r=t.effect;(r.f&_s)!==0&&Ro(r,fc),ql(r)&&ng(r),t.ran=!1}e.l.r2.v=!1}})}function Nl(e){return Ll(Yp,e,!0)}function Ht(e,t=[],r=_l){const n=t.map(r);return bh(()=>e(...n.map(R)))}function bh(e,t=0){return Ll(Yp|CE|t,e,!0)}function sc(e,t=!0){return Ll(Yp|$a,e,!0,t)}function O4(e){var t=e.teardown;if(t!==null){const r=wh,n=nn;lC(!0),la(null);try{t.call(null)}finally{lC(r),la(n)}}}function M4(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var n=r.next;(r.f&Il)!==0?r.parent=null:_u(r,t),r=n}}function gJ(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&$a)===0&&_u(t),t=r}}function _u(e,t=!0){var r=!1;if((t||(e.f&FZ)!==0)&&e.nodes_start!==null){for(var n=e.nodes_start,i=e.nodes_end;n!==null;){var s=n===i?null:Qp(n);n.remove(),n=s}r=!0}M4(e,t&&!r),Pp(e,0),Ro(e,Kp);var o=e.transitions;if(o!==null)for(const u of o)u.stop();O4(e);var a=e.parent;a!==null&&a.first!==null&&k4(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function k4(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function wl(e,t){var r=[];LE(e,r,!0),L4(r,()=>{_u(e),t&&t()})}function L4(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var i of e)i.out(n)}else t()}function LE(e,t,r){if((e.f&za)===0){if(e.f^=za,e.transitions!==null)for(const o of e.transitions)(o.is_global||r)&&t.push(o);for(var n=e.first;n!==null;){var i=n.next,s=(n.f&Zp)!==0||(n.f&$a)!==0;LE(n,t,s?r:!1),n=i}}}function Sp(e){N4(e,!0)}function N4(e,t){if((e.f&za)!==0){e.f^=za,(e.f&_s)===0&&(e.f^=_s),ql(e)&&(Ro(e,Ua),ig(e));for(var r=e.first;r!==null;){var n=r.next,i=(r.f&Zp)!==0||(r.f&$a)!==0;N4(r,i?t:!1),r=n}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let rh=[],VS=[];function q4(){var e=rh;rh=[],Jf(e)}function vJ(){var e=VS;VS=[],Jf(e)}function tg(e){rh.length===0&&queueMicrotask(q4),rh.push(e)}function cC(){rh.length>0&&q4(),VS.length>0&&vJ()}let hp=!1,Ep=!1,Ap=null,Qu=!1,wh=!1;function lC(e){wh=e}let jf=[];let nn=null,na=!1;function la(e){nn=e}let gn=null;function bu(e){gn=e}let Ki=null;function mJ(e){Ki=e}function D4(e){nn!==null&&nn.f&zS&&(Ki===null?mJ([e]):Ki.push(e))}let Hi=null,Is=0,Ys=null;function yJ(e){Ys=e}let F4=1,Tp=0,pu=!1,hu=null;function B4(){return++F4}function ql(e){var h;var t=e.f;if((t&Ua)!==0)return!0;if((t&fc)!==0){var r=e.deps,n=(t&no)!==0;if(r!==null){var i,s,o=(t&xp)!==0,a=n&&gn!==null&&!pu,u=r.length;if(o||a){var c=e,f=c.parent;for(i=0;i<u;i++)s=r[i],(o||!((h=s==null?void 0:s.reactions)!=null&&h.includes(c)))&&(s.reactions??(s.reactions=[])).push(c);o&&(c.f^=xp),a&&f!==null&&(f.f&no)===0&&(c.f^=no)}for(i=0;i<u;i++)if(s=r[i],ql(s)&&R4(s),s.wv>e.wv)return!0}(!n||gn!==null&&!pu)&&Ro(e,_s)}return!1}function _J(e,t){for(var r=t;r!==null;){if((r.f&wp)!==0)try{r.fn(e);return}catch{r.f^=wp}r=r.parent}throw hp=!1,e}function bJ(e){return(e.f&Kp)===0&&(e.parent===null||(e.parent.f&wp)===0)}function rg(e,t,r,n){if(hp){if(r===null&&(hp=!1),bJ(t))throw e;return}r!==null&&(hp=!0);{_J(e,t);return}}function z4(e,t,r=!0){var n=e.reactions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];Ki!=null&&Ki.includes(e)||((s.f&Co)!==0?z4(s,t,!1):t===s&&(r?Ro(s,Ua):(s.f&_s)!==0&&Ro(s,fc),ig(s)))}}function V4(e){var y;var t=Hi,r=Is,n=Ys,i=nn,s=pu,o=Ki,a=Ir,u=na,c=e.f;Hi=null,Is=0,Ys=null,pu=(c&no)!==0&&(na||!Qu||nn===null),nn=(c&($a|Il))===0?e:null,Ki=null,oC(e.ctx),na=!1,Tp++,e.f|=zS;try{var f=(0,e.fn)(),h=e.deps;if(Hi!==null){var g;if(Pp(e,Is),h!==null&&Is>0)for(h.length=Is+Hi.length,g=0;g<Hi.length;g++)h[Is+g]=Hi[g];else e.deps=h=Hi;if(!pu)for(g=Is;g<h.length;g++)((y=h[g]).reactions??(y.reactions=[])).push(e)}else h!==null&&Is<h.length&&(Pp(e,Is),h.length=Is);if(kl()&&Ys!==null&&!na&&h!==null&&(e.f&(Co|fc|Ua))===0)for(g=0;g<Ys.length;g++)z4(Ys[g],e);return i!==null&&(Tp++,Ys!==null&&(n===null?n=Ys:n.push(...Ys))),f}finally{Hi=t,Is=r,Ys=n,nn=i,pu=s,Ki=o,oC(a),na=u,e.f^=zS}}function wJ(e,t){let r=t.reactions;if(r!==null){var n=MZ.call(r,e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}r===null&&(t.f&Co)!==0&&(Hi===null||!Hi.includes(t))&&(Ro(t,fc),(t.f&(no|xp))===0&&(t.f^=xp),C4(t),Pp(t,0))}function Pp(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)wJ(e,r[n])}function ng(e){var t=e.f;if((t&Kp)===0){Ro(e,_s);var r=gn,n=Ir,i=Qu;gn=e,Qu=!0;try{(t&CE)!==0?gJ(e):M4(e),O4(e);var s=V4(e);e.teardown=typeof s=="function"?s:null,e.wv=F4;var o=e.deps,a;iC&&YZ&&e.f&Ua}catch(u){rg(u,e,r,n||e.ctx)}finally{Qu=i,gn=r}}}function xJ(){try{UZ()}catch(e){if(Ap!==null)rg(e,Ap,null);else throw e}}function G4(){var e=Qu;try{var t=0;for(Qu=!0;jf.length>0;){t++>1e3&&xJ();var r=jf,n=r.length;jf=[];for(var i=0;i<n;i++){var s=EJ(r[i]);SJ(s)}}}finally{Ep=!1,Qu=e,Ap=null,Qf.clear()}}function SJ(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var n=e[r];if((n.f&(Kp|za))===0)try{ql(n)&&(ng(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?k4(n):n.fn=null))}catch(i){rg(i,n,null,n.ctx)}}}function ig(e){Ep||(Ep=!0,queueMicrotask(G4));for(var t=Ap=e;t.parent!==null;){t=t.parent;var r=t.f;if((r&(Il|$a))!==0){if((r&_s)===0)return;t.f^=_s}}jf.push(t)}function EJ(e){for(var t=[],r=e;r!==null;){var n=r.f,i=(n&($a|Il))!==0,s=i&&(n&_s)!==0;if(!s&&(n&za)===0){if((n&g4)!==0)t.push(r);else if(i)r.f^=_s;else{var o=nn;try{nn=r,ql(r)&&ng(r)}catch(c){rg(c,r,null,r.ctx)}finally{nn=o}}var a=r.first;if(a!==null){r=a;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)r=u.next,u=u.parent}return t}function AJ(e){var t;for(cC();jf.length>0;)Ep=!0,G4(),cC();return t}async function TJ(){await Promise.resolve(),AJ()}function R(e){var t=e.f,r=(t&Co)!==0;if(hu!==null&&hu.add(e),nn!==null&&!na){if(!(Ki!=null&&Ki.includes(e))){var n=nn.deps;e.rv<Tp&&(e.rv=Tp,Hi===null&&n!==null&&n[Is]===e?Is++:Hi===null?Hi=[e]:(!pu||!Hi.includes(e))&&Hi.push(e))}}else if(r&&e.deps===null&&e.effects===null){var i=e,s=i.parent;s!==null&&(s.f&no)===0&&(i.f^=no)}return r&&(i=e,ql(i)&&R4(i)),wh&&Qf.has(e)?Qf.get(e):e.v}function PJ(e){var t=hu;hu=new Set;var r=hu,n;try{if(Pn(e),t!==null)for(n of hu)t.add(n)}finally{hu=t}return r}function nye(e){var t=PJ(()=>Pn(e));for(var r of t)if((r.f&v4)!==0)for(const n of r.deps||[])(n.f&Co)===0&&th(n,n.v);else th(r,r.v)}function Pn(e){var t=na;try{return na=!0,e()}finally{na=t}}const CJ=-7169;function Ro(e,t){e.f=e.f&CJ|t}function RJ(e,t){var r={};for(var n in e)t.includes(n)||(r[n]=e[n]);return r}function Vt(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(aa in e)GS(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&aa in r&&GS(r)}}}function GS(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{GS(e[n],t)}catch{}const r=PE(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=p4(r);for(let i in n){const s=n[i].get;if(s)try{s.call(e)}catch{}}}}}function IJ(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const OJ=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function MJ(e){return OJ.includes(e)}const kJ={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function LJ(e){return e=e.toLowerCase(),kJ[e]??e}const NJ=["touchstart","touchmove"];function qJ(e){return NJ.includes(e)}function DJ(e,t){if(t){const r=document.body;e.autofocus=!0,tg(()=>{document.activeElement===r&&e.focus()})}}let fC=!1;function FJ(){fC||(fC=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function $4(e){var t=nn,r=gn;la(null),bu(null);try{return e()}finally{la(t),bu(r)}}function BJ(e,t,r,n=r){e.addEventListener(t,()=>$4(r));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),FJ()}const U4=new Set,$S=new Set;function j4(e,t,r,n={}){function i(s){if(n.capture||qf.call(t,s),!s.cancelBubble)return $4(()=>r==null?void 0:r.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?tg(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function pr(e,t,r,n,i){var s={capture:n,passive:i},o=j4(e,t,r,s);(t===document.body||t===window||t===document)&&eg(()=>{t.removeEventListener(e,o,s)})}function hc(e){for(var t=0;t<e.length;t++)U4.add(e[t]);for(var r of $S)r(e)}function qf(e){var E;var t=this,r=t.ownerDocument,n=e.type,i=((E=e.composedPath)==null?void 0:E.call(e))||[],s=i[0]||e.target,o=0,a=e.__root;if(a){var u=i.indexOf(a);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;u<=c&&(o=u)}if(s=i[o]||e.target,s!==t){d4(e,"currentTarget",{configurable:!0,get(){return s||r}});var f=nn,h=gn;la(null),bu(null);try{for(var g,y=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var _=s["__"+n];if(_!=null&&(!s.disabled||e.target===s))if(_h(_)){var[b,...S]=_;b.apply(s,[e,...S])}else _.call(s,e)}catch(A){g?y.push(A):g=A}if(e.cancelBubble||m===t||m===null)break;s=m}if(g){for(let A of y)queueMicrotask(()=>{throw A});throw g}}finally{e.__root=t,delete e.currentTarget,la(f),bu(h)}}}function H4(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function nh(e,t){var r=gn;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function nr(e,t){var r=(t&x4)!==0,n=(t&iJ)!==0,i,s=!e.startsWith("<!>");return()=>{i===void 0&&(i=H4(s?e:"<!>"+e),r||(i=Na(i)));var o=n||A4?document.importNode(i,!0):i.cloneNode(!0);if(r){var a=Na(o),u=o.lastChild;nh(a,u)}else nh(o,o);return o}}function Nn(e,t,r="svg"){var n=!e.startsWith("<!>"),i=(t&x4)!==0,s=`<${r}>${n?e:"<!>"+e}</${r}>`,o;return()=>{if(!o){var a=H4(s),u=Na(a);if(i)for(o=document.createDocumentFragment();Na(u);)o.appendChild(Na(u));else o=Na(u)}var c=o.cloneNode(!0);if(i){var f=Na(c),h=c.lastChild;nh(f,h)}else nh(c,c);return c}}function vr(){var e=document.createDocumentFragment(),t=document.createComment(""),r=kE();return e.append(t,r),nh(t,r),e}function nt(e,t){e!==null&&e.before(t)}function Eu(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r+"")}function zJ(e,t){return VJ(e,t)}const Kc=new Map;function VJ(e,{target:t,anchor:r,props:n={},events:i,context:s,intro:o=!0}){uJ();var a=new Set,u=h=>{for(var g=0;g<h.length;g++){var y=h[g];if(!a.has(y)){a.add(y);var m=qJ(y);t.addEventListener(y,qf,{passive:m});var _=Kc.get(y);_===void 0?(document.addEventListener(y,qf,{passive:m}),Kc.set(y,1)):Kc.set(y,_+1)}}};u(TE(U4)),$S.add(u);var c=void 0,f=pJ(()=>{var h=r??t.appendChild(kE());return sc(()=>{if(s){xr({});var g=Ir;g.c=s}i&&(n.$$events=i),c=e(h,n)||{},s&&Sr()}),()=>{var m;for(var g of a){t.removeEventListener(g,qf);var y=Kc.get(g);--y===0?(document.removeEventListener(g,qf),Kc.delete(g)):Kc.set(g,y)}$S.delete(u),h!==r&&((m=h.parentNode)==null||m.removeChild(h))}});return GJ.set(c,f),c}let GJ=new WeakMap;function lr(e,t,[r,n]=[0,0]){var i=e,s=null,o=null,a=$i,u=r>0?Zp:0,c=!1;const f=(g,y=!0)=>{c=!0,h(y,g)},h=(g,y)=>{a!==(a=g)&&(a?(s?Sp(s):y&&(s=sc(()=>y(i))),o&&wl(o,()=>{o=null})):(o?Sp(o):y&&(o=sc(()=>y(i,[r+1,n]))),s&&wl(s,()=>{s=null})))};bh(()=>{c=!1,t(f),c||h(null,null)},u)}function NE(e,t,r){var n=e,i=$i,s,o=kl()?zZ:Jp;bh(()=>{o(i,i=t())&&(s&&wl(s),s=sc(()=>r(n)))})}function gu(e,t){return t}function $J(e,t,r,n){for(var i=[],s=t.length,o=0;o<s;o++)LE(t[o].e,i,!0);var a=s>0&&i.length===0&&r!==null;if(a){var u=r.parentNode;cJ(u),u.append(r),n.clear(),fu(e,t[0].prev,t[s-1].next)}L4(i,()=>{for(var c=0;c<s;c++){var f=t[c];a||(n.delete(f.k),fu(e,f.prev,f.next)),_u(f.e,!a)}})}function ds(e,t,r,n,i,s=null){var o=e,a={flags:t,items:new Map,first:null},u=(t&w4)!==0;if(u){var c=e;o=c.appendChild(kE())}var f=null,h=!1,g=hn(()=>{var y=r();return _h(y)?y:y==null?[]:TE(y)});bh(()=>{var y=R(g),m=y.length;h&&m===0||(h=m===0,UJ(y,a,o,i,t,n,r),s!==null&&(m===0?f?Sp(f):f=sc(()=>s(o)):f!==null&&wl(f,()=>{f=null})),R(g))})}function UJ(e,t,r,n,i,s,o){var ee,ae,K,U;var a=(i&ZZ)!==0,u=(i&(IE|OE))!==0,c=e.length,f=t.items,h=t.first,g=h,y,m=null,_,b=[],S=[],E,A,T,I;if(a)for(I=0;I<c;I+=1)E=e[I],A=s(E,I),T=f.get(A),T!==void 0&&((ee=T.a)==null||ee.measure(),(_??(_=new Set)).add(T));for(I=0;I<c;I+=1){if(E=e[I],A=s(E,I),T=f.get(A),T===void 0){var q=g?g.e.nodes_start:r;m=HJ(q,t,m,m===null?t.first:m.next,E,A,I,n,i,o),f.set(A,m),b=[],S=[],g=m.next;continue}if(u&&jJ(T,E,I,i),(T.e.f&za)!==0&&(Sp(T.e),a&&((ae=T.a)==null||ae.unfix(),(_??(_=new Set)).delete(T))),T!==g){if(y!==void 0&&y.has(T)){if(b.length<S.length){var p=S[0],P;m=p.prev;var O=b[0],N=b[b.length-1];for(P=0;P<b.length;P+=1)hC(b[P],p,r);for(P=0;P<S.length;P+=1)y.delete(S[P]);fu(t,O.prev,N.next),fu(t,m,O),fu(t,N,p),g=p,m=N,I-=1,b=[],S=[]}else y.delete(T),hC(T,g,r),fu(t,T.prev,T.next),fu(t,T,m===null?t.first:m.next),fu(t,m,T),m=T;continue}for(b=[],S=[];g!==null&&g.k!==A;)(g.e.f&za)===0&&(y??(y=new Set)).add(g),S.push(g),g=g.next;if(g===null)continue;T=g}b.push(T),m=T,g=T.next}if(g!==null||y!==void 0){for(var V=y===void 0?[]:TE(y);g!==null;)(g.e.f&za)===0&&V.push(g),g=g.next;var W=V.length;if(W>0){var G=(i&w4)!==0&&c===0?r:null;if(a){for(I=0;I<W;I+=1)(K=V[I].a)==null||K.measure();for(I=0;I<W;I+=1)(U=V[I].a)==null||U.fix()}$J(t,V,G,f)}}a&&tg(()=>{var j;if(_!==void 0)for(T of _)(j=T.a)==null||j.apply()}),gn.first=t.first&&t.first.e,gn.last=m&&m.e}function jJ(e,t,r,n){(n&IE)!==0&&th(e.v,t),(n&OE)!==0?th(e.i,r):e.i=r}function HJ(e,t,r,n,i,s,o,a,u,c){var f=(u&IE)!==0,h=(u&JZ)===0,g=f?h?qe(i):eh(i):i,y=(u&OE)===0?o:eh(o),m={i:y,v:g,k:s,a:null,e:null,prev:r,next:n};try{return m.e=sc(()=>a(e,g,y,c),aJ),m.e.prev=r&&r.e,m.e.next=n&&n.e,r===null?t.first=m:(r.next=m,r.e.next=m.e),n!==null&&(n.prev=m,n.e.prev=m.e),m}finally{}}function hC(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,s=e.e.nodes_start;s!==n;){var o=Qp(s);i.before(s),s=o}}function fu(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Xr(e,t,r,n,i){var a;var s=(a=t.$$slots)==null?void 0:a[r],o=!1;s===!0&&(s=t[r==="default"?"children":r],o=!0),s===void 0?i!==null&&i(e):s(e,o?()=>n:n)}function qE(e){const t={};e.children&&(t.default=!0);for(const r in e.$$slots)t[r]=!0;return t}function Yu(e,t,r){var n=e,i,s;bh(()=>{i!==(i=t())&&(s&&(wl(s),s=null),i&&(s=sc(()=>r(n,i))))},Zp)}function Xu(e,t,r){ic(()=>{var n=Pn(()=>t(e,r==null?void 0:r())||{});if(r&&(n!=null&&n.update)){var i=!1,s={};Nl(()=>{var o=r();Vt(o),i&&Jp(s,o)&&(s=o,n.update(o))}),i=!0}if(n!=null&&n.destroy)return()=>n.destroy()})}function W4(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=W4(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function WJ(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=W4(e))&&(n&&(n+=" "),n+=t);return n}function DE(e){return typeof e=="object"?WJ(e):e??""}const dC=[...` 	
\r\fÂ \v\uFEFF`];function XJ(e,t,r){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),r){for(var i in r)if(r[i])n=n?n+" "+i:i;else if(n.length)for(var s=i.length,o=0;(o=n.indexOf(i,o))>=0;){var a=o+s;(o===0||dC.includes(n[o-1]))&&(a===n.length||dC.includes(n[a]))?n=(o===0?"":n.substring(0,o))+n.substring(a+1):o=a}}return n===""?null:n}function pC(e,t=!1){var r=t?" !important;":";",n="";for(var i in e){var s=e[i];s!=null&&s!==""&&(n+=" "+i+": "+s+r)}return n}function wm(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function YJ(e,t){if(t){var r="",n,i;if(Array.isArray(t)?(n=t[0],i=t[1]):n=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,o=0,a=!1,u=[];n&&u.push(...Object.keys(n).map(wm)),i&&u.push(...Object.keys(i).map(wm));var c=0,f=-1;const _=e.length;for(var h=0;h<_;h++){var g=e[h];if(a?g==="/"&&e[h-1]==="*"&&(a=!1):s?s===g&&(s=!1):g==="/"&&e[h+1]==="*"?a=!0:g==='"'||g==="'"?s=g:g==="("?o++:g===")"&&o--,!a&&s===!1&&o===0){if(g===":"&&f===-1)f=h;else if(g===";"||h===_-1){if(f!==-1){var y=wm(e.substring(c,f).trim());if(!u.includes(y)){g!==";"&&h++;var m=e.substring(c,h).trim();r+=" "+m+";"}}c=h+1,f=-1}}}}return n&&(r+=pC(n)),i&&(r+=pC(i,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function Cn(e,t,r,n,i,s){var o=e.__className;if(o!==r||o===void 0){var a=XJ(r,n,s);a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a),e.__className=r}else if(s&&i!==s)for(var u in s){var c=!!s[u];(i==null||c!==!!i[u])&&e.classList.toggle(u,c)}return s}function xm(e,t={},r,n){for(var i in r){var s=r[i];t[i]!==s&&(r[i]==null?e.style.removeProperty(i):e.style.setProperty(i,s,n))}}function Rr(e,t,r,n){var i=e.__style;if(i!==t){var s=YJ(t,n);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}else n&&(Array.isArray(n)?(xm(e,r==null?void 0:r[0],n[0]),xm(e,r==null?void 0:r[1],n[1],"important")):xm(e,r,n));return n}const Cf=Symbol("class"),Rf=Symbol("style"),X4=Symbol("is custom element"),Y4=Symbol("is html");function KJ(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function pt(e,t,r,n){var i=K4(e);i[t]!==(i[t]=r)&&(t==="loading"&&(e[BZ]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Z4(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function ha(e,t,r,n,i=!1){var s=K4(e),o=s[X4],a=!s[Y4],u=t||{},c=e.tagName==="OPTION";for(var f in t)f in r||(r[f]=null);r.class?r.class=DE(r.class):r[Cf]&&(r.class=null),r[Rf]&&(r.style??(r.style=null));var h=Z4(e);for(const E in r){let A=r[E];if(c&&E==="value"&&A==null){e.value=e.__value="",u[E]=A;continue}if(E==="class"){var g=e.namespaceURI==="http://www.w3.org/1999/xhtml";Cn(e,g,A,n,t==null?void 0:t[Cf],r[Cf]),u[E]=A,u[Cf]=r[Cf];continue}if(E==="style"){Rr(e,A,t==null?void 0:t[Rf],r[Rf]),u[E]=A,u[Rf]=r[Rf];continue}var y=u[E];if(A!==y){u[E]=A;var m=E[0]+E[1];if(m!=="$$")if(m==="on"){const T={},I="$$"+E;let q=E.slice(2);var _=MJ(q);if(IJ(q)&&(q=q.slice(0,-7),T.capture=!0),!_&&y){if(A!=null)continue;e.removeEventListener(q,u[I],T),u[I]=null}if(A!=null)if(_)e[`__${q}`]=A,hc([q]);else{let p=function(P){u[E].call(this,P)};u[I]=j4(q,e,p,T)}else _&&(e[`__${q}`]=void 0)}else if(E==="style")pt(e,E,A);else if(E==="autofocus")DJ(e,!!A);else if(!o&&(E==="__value"||E==="value"&&A!=null))e.value=e.__value=A;else if(E==="selected"&&c)KJ(e,A);else{var b=E;a||(b=LJ(b));var S=b==="defaultValue"||b==="defaultChecked";if(A==null&&!o&&!S)if(s[E]=null,b==="value"||b==="checked"){let T=e;const I=t===void 0;if(b==="value"){let q=T.defaultValue;T.removeAttribute(b),T.defaultValue=q,T.value=T.__value=I?q:null}else{let q=T.defaultChecked;T.removeAttribute(b),T.defaultChecked=q,T.checked=I?q:!1}}else e.removeAttribute(E);else S||h.includes(b)&&(o||typeof A!="string")?e[b]=A:typeof A!="function"&&pt(e,b,A)}}}return u}function K4(e){return e.__attributes??(e.__attributes={[X4]:e.nodeName.includes("-"),[Y4]:e.namespaceURI===sJ})}var gC=new Map;function Z4(e){var t=gC.get(e.nodeName);if(t)return t;gC.set(e.nodeName,t=[]);for(var r,n=e,i=Element.prototype;i!==n;){r=p4(n);for(var s in r)r[s].set&&t.push(s);n=PE(n)}return t}function ZJ(e,t,r=t){var n=kl();BJ(e,"input",i=>{var s=i?e.defaultValue:e.value;if(s=Sm(e)?Em(s):s,r(s),n&&s!==(s=t())){var o=e.selectionStart,a=e.selectionEnd;e.value=s??"",a!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(a,e.value.length))}}),Pn(t)==null&&e.value&&r(Sm(e)?Em(e.value):e.value),Nl(()=>{var i=t();Sm(e)&&i===Em(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Sm(e){var t=e.type;return t==="number"||t==="range"}function Em(e){return e===""?null:+e}function FE(e,t,r){var n=Ba(e,t);n&&n.set&&(e[t]=r,eg(()=>{e[t]=null}))}var du,yl,yh,Wp,J4;const Xp=class Xp{constructor(t){Tf(this,Wp);Tf(this,du,new WeakMap);Tf(this,yl);Tf(this,yh);bm(this,yh,t)}observe(t,r){var n=Ma(this,du).get(t)||new Set;return n.add(r),Ma(this,du).set(t,n),nC(this,Wp,J4).call(this).observe(t,Ma(this,yh)),()=>{var i=Ma(this,du).get(t);i.delete(r),i.size===0&&(Ma(this,du).delete(t),Ma(this,yl).unobserve(t))}}};du=new WeakMap,yl=new WeakMap,yh=new WeakMap,Wp=new WeakSet,J4=function(){return Ma(this,yl)??bm(this,yl,new ResizeObserver(t=>{for(var r of t){Xp.entries.set(r.target,r);for(var n of Ma(this,du).get(r.target)||[])n(r)}}))},rC(Xp,"entries",new WeakMap);let US=Xp;var JJ=new US({box:"border-box"});function vC(e,t,r){var n=JJ.observe(e,()=>r(e[t]));ic(()=>(Pn(()=>r(e[t])),n))}function mC(e,t){return e===t||(e==null?void 0:e[aa])===t}function wu(e={},t,r,n){return ic(()=>{var i,s;return Nl(()=>{i=s,s=[],Pn(()=>{e!==r(...s)&&(t(e,...s),i&&mC(r(...i),e)&&t(null,...i))})}),()=>{tg(()=>{s&&mC(r(...s),e)&&t(null,...s)})}}),e}function Hf(e){return function(...t){var r=t[0];r.target===this&&(e==null||e.apply(this,t))}}function ro(e){return function(...t){var r=t[0];return r.stopPropagation(),e==null?void 0:e.apply(this,t)}}function ks(e){return function(...t){var r=t[0];return r.preventDefault(),e==null?void 0:e.apply(this,t)}}function qn(e=!1){const t=Ir,r=t.l.u;if(!r)return;let n=()=>Vt(t.s);if(e){let i=0,s={};const o=_l(()=>{let a=!1;const u=t.s;for(const c in u)u[c]!==s[c]&&(s[c]=u[c],a=!0);return a&&i++,i});n=()=>R(o)}r.b.length&&dJ(()=>{yC(t,n),Jf(r.b)}),bl(()=>{const i=Pn(()=>r.m.map(NZ));return()=>{for(const s of i)typeof s=="function"&&s()}}),r.a.length&&bl(()=>{yC(t,n),Jf(r.a)})}function yC(e,t){if(e.l.s)for(const r of e.l.s)R(r);t()}function Tn(e,t){var s;var r=(s=e.$$events)==null?void 0:s[t.type],n=_h(r)?r.slice():r==null?[]:[r];for(var i of n)i.call(this,t)}function BE(e,t,r){if(e==null)return t(void 0),r&&r(void 0),Ls;const n=Pn(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const Zc=[];function Cp(e,t){return{subscribe:Ke(e,t).subscribe}}function Ke(e,t=Ls){let r=null;const n=new Set;function i(a){if(Jp(e,a)&&(e=a,r)){const u=!Zc.length;for(const c of n)c[1](),Zc.push(c,e);if(u){for(let c=0;c<Zc.length;c+=2)Zc[c][0](Zc[c+1]);Zc.length=0}}}function s(a){i(a(e))}function o(a,u=Ls){const c=[a,u];return n.add(c),n.size===1&&(r=t(i,s)||Ls),a(e),()=>{n.delete(c),n.size===0&&r&&(r(),r=null)}}return{set:i,update:s,subscribe:o}}function Wf(e,t,r){const n=!Array.isArray(e),i=n?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=t.length<2;return Cp(r,(o,a)=>{let u=!1;const c=[];let f=0,h=Ls;const g=()=>{if(f)return;h();const m=t(n?c[0]:c,o,a);s?o(m):h=typeof m=="function"?m:Ls},y=i.map((m,_)=>BE(m,b=>{c[_]=b,f&=~(1<<_),u&&g()},()=>{f|=1<<_}));return u=!0,g(),function(){Jf(y),h(),u=!1}})}function lt(e){let t;return BE(e,r=>t=r)(),t}let $d=!1,jS=Symbol();function Ye(e,t,r){const n=r[t]??(r[t]={store:null,source:qe(void 0),unsubscribe:Ls});if(n.store!==e&&!(jS in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=Ls;else{var i=!0;n.unsubscribe=BE(e,s=>{i?n.source.v=s:we(n.source,s)}),i=!1}return e&&jS in r?lt(e):R(n.source)}function qa(e,t,r){let n=r[t];return n&&n.store!==e&&(n.unsubscribe(),n.unsubscribe=Ls),e}function Ot(e,t){return e.set(t),t}function ii(){const e={};function t(){eg(()=>{for(var r in e)e[r].unsubscribe();d4(e,jS,{enumerable:!1,value:!0})})}return[e,t]}function Xf(e,t,r){return e.set(r),t}function QJ(e,t,r=1){return e.set(t+r),t}function eQ(e,t,r=1){const n=t+r;return e.set(n),n}function tQ(e){var t=$d;try{return $d=!1,[e(),$d]}finally{$d=t}}const rQ={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function da(e,t,r){return new Proxy({props:e,exclude:t},rQ)}const nQ={get(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(Pf(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n)return n[t]}},set(e,t,r){let n=e.props.length;for(;n--;){let i=e.props[n];Pf(i)&&(i=i());const s=Ba(i,t);if(s&&s.set)return s.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(Pf(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n){const i=Ba(n,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===aa||t===y4)return!1;for(let r of e.props)if(Pf(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props){Pf(r)&&(r=r());for(const n in r)t.includes(n)||t.push(n)}return t}};function sg(...e){return new Proxy({props:e},nQ)}function _C(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function ve(e,t,r,n){var p;var i=(r&QZ)!==0,s=!Ol||(r&eJ)!==0,o=(r&rJ)!==0,a=(r&nJ)!==0,u=!1,c;o?[c,u]=tQ(()=>e[t]):c=e[t];var f=aa in e||y4 in e,h=o&&(((p=Ba(e,t))==null?void 0:p.set)??(f&&t in e&&(P=>e[t]=P)))||void 0,g=n,y=!0,m=!1,_=()=>(m=!0,y&&(y=!1,a?g=Pn(n):g=n),g);c===void 0&&n!==void 0&&(h&&s&&jZ(),c=_(),h&&h(c));var b;if(s)b=()=>{var P=e[t];return P===void 0?_():(y=!0,m=!1,P)};else{var S=(i?_l:hn)(()=>e[t]);S.f|=v4,b=()=>{var P=R(S);return P!==void 0&&(g=void 0),P===void 0?g:P}}if((r&tJ)===0)return b;if(h){var E=e.$$legacy;return function(P,O){return arguments.length>0?((!s||!O||E||u)&&h(O?b():P),P):b()}}var A=!1,T=!1,I=qe(c),q=_l(()=>{var P=b(),O=R(I);return A?(A=!1,T=!0,O):(T=!1,I.v=P)});return o&&R(q),i||(q.equals=RE),function(P,O){if(hu!==null&&(A=T,b(),R(I)),arguments.length>0){const N=O?R(q):s&&o?xo(P):P;if(!q.equals(N)){if(A=!0,we(I,N),m&&g!==void 0&&(g=N),_C(q))return P;Pn(()=>R(q))}return P}return _C(q)?q.v:R(q)}}function Ti(e){Ir===null&&Ml(),Ol&&Ir.l!==null?zE(Ir).m.push(e):bl(()=>{const t=Pn(e);if(typeof t=="function")return t})}function xh(e){Ir===null&&Ml(),Ti(()=>()=>Pn(e))}function iQ(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function xl(){const e=Ir;return e===null&&Ml(),(t,r,n)=>{var s;const i=(s=e.s.$$events)==null?void 0:s[t];if(i){const o=_h(i)?i.slice():[i],a=iQ(t,r,n);for(const u of o)u.call(e.x,a);return!a.defaultPrevented}return!0}}function sQ(e){Ir===null&&Ml(),Ir.l===null&&b4(),zE(Ir).b.push(e)}function Q4(e){Ir===null&&Ml(),Ir.l===null&&b4(),zE(Ir).a.push(e)}function zE(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const oQ="5";var h4;typeof window<"u"&&((h4=window.__svelte??(window.__svelte={})).v??(h4.v=new Set)).add(oQ);KZ();const aQ="modulepreload",uQ=function(e,t){return new URL(e,t).href},bC={},If=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=uQ(c,n),c in bC)return;bC[c]=!0;const f=c.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(!!n)for(let m=o.length-1;m>=0;m--){const _=o[m];if(_.href===c&&(!f||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":aQ,f||(y.as="script"),y.crossOrigin="",y.href=c,u&&y.setAttribute("nonce",u),document.head.appendChild(y),f)return new Promise((m,_)=>{y.addEventListener("load",m),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};function cQ(e,t){const r=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.sqrt(r*r+n*n)}function lQ(){const e=()=>Math.floor(Math.random()*256),t=e(),r=e(),n=e();return`rgb(${t},${r},${n})`}const fQ={"(":"round","[":"square","([":"stadium","[[":"subroutine","[(":"cylindrical","((":"circle","{":"rhombus","{{":"hexagon"},wC={"-":"straight","~":"bezier"},eV={"(":")","[":"]","{":"}"},hQ=/[-=~]*>(?:\s*\|(.+?)\|)?/g,dQ=e=>{const t=e.split(`
`),r={parentNodes:[],nodeList:{}};for(const n of t){const{parentNodes:i,childNodes:s,edge:o}=pQ(n);for(const a of i){r.nodeList[a.id]||r.parentNodes.push(a);for(const u of s){if(r.nodeList[a.id]){if(r.nodeList[u.id]&&r.nodeList[u.id].children.some(({node:c})=>c.id===a.id))throw new Error("Circular reference detected");r.nodeList[a.id].children.push({node:r.nodeList[u.id]||u,...o})}else a.children.push({node:r.nodeList[u.id]||u,...o}),r.nodeList[a.id]=a;r.nodeList[u.id]?r.nodeList[u.id].parents.push({node:r.nodeList[a.id]||a}):(u.parents.push({node:r.nodeList[a.id]||a}),r.nodeList[u.id]=u),r.parentNodes=r.parentNodes.filter(c=>c.id!==u.id)}}}return r},pQ=e=>{const t=[],r=[],n=e.trim();let i="";const s=n.match(hQ);if(s)i=s[0];else throw new Error("Invalid edge");const[o,a]=n.split(i);for(const c of o.split("&"))t.push(xC(c));for(const c of a.split("&"))r.push(xC(c));const u=gQ(i);return{parentNodes:t,childNodes:r,edge:u}},xC=e=>{e=e.trim();const t=e[0],r=e.slice(1);let n="",i="";const s="Default",o={shape:""},a=[];for(let u=0;u<r.length;u++)if(vQ(r[u]))a.push(r[u]);else if(eV[a[a.length-1]]===r[u]){i=fQ[a.join("")];break}else n+=r[u];return o.shape=i,o.content=n,{id:t,data:o,type:s,children:[],parents:[],depth:0,nesting:0}},gQ=e=>{e=e.trim();let t="";const[r,n]=e.split("|"),i=r[0];if(i in wC)t=wC[i];else throw new Error("Not a valid edge type");return n?{shape:t,content:n.trim(),length:Math.floor((r.trim().length-1)/2)}:{shape:t,length:Math.floor((r.trim().length-1)/2)}};function vQ(e){return e in eV}function mQ(){return Math.random().toString(36).substring(7)}function yQ(e,t){const r=Math.sign(e.x).toString(),n=Math.sign(e.y).toString(),i=Math.sign(t.x).toString(),s=Math.sign(t.y).toString();return`${r}${n}${i}${s}`}function _Q(e,t){return{1001:`a ${e} ${e} 0 0 1 ${e} ${e}`,"0110":`a ${e} ${e} 0 0 0 ${e} ${e}`,"100-1":`a ${e} ${e} 0 0 0 ${e} -${e}`,"0-110":`a ${e} ${e} 0 0 1 ${e} -${e}`,"-1001":`a ${e} ${e} 0 0 0 -${e} ${e}`,"01-10":`a ${e} ${e} 0 0 1 -${e} ${e}`,"-100-1":`a ${e} ${e} 0 0 1 -${e} -${e}`,"0-1-10":`a ${e} ${e} 0 0 0 -${e} -${e}`}[t]||""}function SC(e,t){const r=t*(Math.PI/180),n=e.x*Math.cos(r)-e.y*Math.sin(r),i=e.x*Math.sin(r)+e.y*Math.cos(r);return{x:n,y:i}}const EC=(e,t,r,n)=>e+` l ${t} ${r} `+n,hs=Ke({x:0,y:0}),HS=Ke(0),io=Ke(!1),WS=Ke(!1),tV=Cp({x:0,y:0},e=>{const t=s=>{e({x:s.clientX,y:s.clientY})},r=s=>{if(s.touches.length===2){const o=cQ(s.touches[0],s.touches[1]);HS.set(o);const a={x:s.touches[0].clientX,y:s.touches[0].clientY};e(a)}else if(s.touches.length===1){const o=s.touches[0].clientX,a=s.touches[0].clientY;e({x:o,y:a}),io.set(!0)}},n=s=>{r(s),window.addEventListener("touchend",i),window.addEventListener("touchmove",r)},i=()=>{io.set(!1),HS.set(0),window.removeEventListener("touchmove",r)};return document.addEventListener("mousemove",t),window.addEventListener("touchstart",n,!0),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("touchstart",n),window.removeEventListener("touchmove",r),window.removeEventListener("touchend",i)}});var bQ=nr("<div><div></div></div>");function wQ(e,t){xr(t,!1);const[r,n]=ii(),i=()=>Ye(I,"$groups",r),s=()=>Ye(tV,"$cursorPositionRaw",r),o=()=>Ye(R(a),"$selectedNodes",r),a=qe(),u=qe(),c=qe(),f=qe(),h=qe(),g=qe(),y=qe(),m=qe(),_=qe();let b=ve(t,"graph",8),S=ve(t,"anchor",8),E=ve(t,"adding",8,!1),A=ve(t,"creating",8,!1),T=ve(t,"color",8,null);const{groups:I}=b();let q,p=qe();Ti(P);function P(){q=Array.from(document.querySelectorAll(".svelvet-node")).map(K=>{const{top:U,left:j,width:J,height:de}=K.getBoundingClientRect();return{id:K.id,top:U,left:j,width:J,height:de}})}function O(){if(!q)return;const ae=q.reduce((K,U)=>{if(R(h)+S().left<=U.left&&R(f)+S().top<=U.top&&R(h)+S().left+Math.abs(R(c))>=U.left+U.width&&R(f)+S().top+Math.abs(R(u))>=U.top+U.height){const j=U.id,J=b().nodes.get(j);if(!J)return K;K.push(J)}return K},[]);E()?ae.forEach(K=>{o().add(K)}):Ot(R(a),new Set(ae)),Ot(R(a),o())}Fe(()=>i(),()=>{qa(we(a,i().selected.nodes),"$selectedNodes",r)}),Fe(()=>(s(),Vt(S())),()=>{we(u,s().y-S().y-S().top)}),Fe(()=>(s(),Vt(S())),()=>{we(c,s().x-S().x-S().left)}),Fe(()=>(Vt(S()),R(u)),()=>{we(f,Math.min(S().y,S().y+R(u)))}),Fe(()=>(Vt(S()),R(c)),()=>{we(h,Math.min(S().x,S().x+R(c)))}),Fe(()=>R(f),()=>{we(g,`${R(f)}px`)}),Fe(()=>R(h),()=>{we(y,`${R(h)}px`)}),Fe(()=>R(u),()=>{we(m,`${Math.abs(R(u))}px`)}),Fe(()=>R(c),()=>{we(_,`${Math.abs(R(c))}px`)}),Fe(()=>(R(c),R(u)),()=>{(R(c)||R(u))&&O()}),Qi(),qn();var N=bQ();let V,W;var G=$t(N);let ee;wu(G,ae=>we(p,ae),()=>R(p)),Ht((ae,K)=>{V=Cn(N,1,"selection-border svelte-10ds4jd",null,V,ae),W=Rr(N,"",W,{"--prop-selection-box-color":T(),height:R(m),width:R(_),top:R(g),left:R(y)}),ee=Cn(G,1,"selection-box svelte-10ds4jd",null,ee,K)},[()=>({creating:A()}),()=>({creating:A()})],hn),nt(e,N),Sr(),n()}const xQ=3,SQ=.1,EQ=10,AQ=100,TQ=50,PQ="#000",CQ="#fff",RQ="12px",IQ=22,OQ=1.4,MQ=40,Df={north:{x:0,y:-1},south:{x:0,y:1},east:{x:1,y:0},west:{x:-1,y:0},self:{x:0,y:0}};var kQ=Nn('<circle class="background-dot svelte-rryw83"></circle>'),LQ=Nn('<line class="background-line svelte-rryw83"></line><line class="background-line svelte-rryw83"></line>',1),NQ=Nn('<circle class="background-dot svelte-rryw83"></circle>'),qQ=Nn('<line class="background-line svelte-rryw83"></line><line class="background-line svelte-rryw83"></line>',1),DQ=Nn('<pattern id="graph-coarse-pattern" patternUnits="userSpaceOnUse"><!></pattern>'),FQ=Nn('<rect width="100%" height="100%" fill="url(#graph-coarse-pattern)"></rect>'),BQ=nr('<div id="background-wrapper" class="svelte-rryw83"><svg class="svelte-rryw83"><defs><pattern id="graph-pattern" patternUnits="userSpaceOnUse"><!></pattern><!></defs><rect width="100%" height="100%" fill="url(#graph-pattern)"></rect><!></svg></div>');function zQ(e,t){xr(t,!1);const[r,n]=ii(),i=()=>Ye(q,"$translationStore",r),s=()=>Ye(I,"$scaleStore",r),o=qe(),a=qe(),u=qe(),c=qe(),f=qe(),h=kr("graph");let g=ve(t,"style",8,"dots"),y=ve(t,"gridWidth",8,IQ),m=ve(t,"dotSize",8,OQ),_=ve(t,"bgColor",8,null),b=ve(t,"dotColor",8,null),S=ve(t,"opacityThreshold",8,3),E=ve(t,"majorGrid",8,0),A=ve(t,"minOpacity",8,.4);const T=h.transforms,I=T.scale,q=T.translation;let p=qe(),P=qe(),O=qe(),N=qe(),V=qe(),W=qe(1),G=qe(1);Fe(()=>i(),()=>{we(o,i())}),Fe(()=>s(),()=>{we(a,s())}),Fe(()=>(R(a),Vt(y())),()=>{we(u,R(a)*y())}),Fe(()=>(R(a),Vt(m())),()=>{we(c,R(a)*m()/2)}),Fe(()=>R(u),()=>{we(f,R(u)/2)}),Fe(()=>(R(P),R(p),R(O),R(c),R(a),R(o),Vt(S()),Vt(A())),()=>{var te,le;we(P,((te=R(p))==null?void 0:te.offsetWidth)||0),we(O,((le=R(p))==null?void 0:le.offsetHeight)||0),we(N,(R(P)+R(c))*(1-R(a))/2+R(o).x),we(V,(R(O)+R(c))*(1-R(a))/2+R(o).y),we(W,R(a)>S()?1:R(a)/S()+A()),we(G,R(a)>S()/3?1:R(a)/(S()/3)+A())}),Qi(),qn();var ee=BQ();let ae;var K=$t(ee),U=$t(K),j=$t(U),J=$t(j);{var de=te=>{var le=kQ();let We;Ht(()=>{pt(le,"r",R(c)),pt(le,"cx",R(f)),pt(le,"cy",R(f)),We=Rr(le,"",We,{"--calculated-dot-color":b()})}),nt(te,le)},ce=(te,le)=>{{var We=Ne=>{var Re=LQ(),rt=Gt(Re);pt(rt,"y1",0);let Ve;var L=xt(rt);pt(L,"x1",0);let B;Ht(()=>{pt(rt,"x1",R(f)),pt(rt,"x2",R(f)),pt(rt,"y2",R(u)),pt(rt,"stroke-width",R(c)),Ve=Rr(rt,"",Ve,{"--calculated-dot-color":b()}),pt(L,"y1",R(f)),pt(L,"y2",R(f)),pt(L,"x2",R(u)),pt(L,"stroke-width",R(c)),B=Rr(L,"",B,{"--calculated-dot-color":b()})}),nt(Ne,Re)};lr(te,Ne=>{g()==="lines"&&Ne(We)},le)}};lr(J,te=>{g()==="dots"?te(de):te(ce,!1)})}var Te=xt(j);{var Se=te=>{var le=DQ(),We=$t(le);{var Ne=rt=>{var Ve=NQ();let L;Ht(()=>{pt(Ve,"r",R(c)*2),pt(Ve,"cx",R(f)),pt(Ve,"cy",R(f)),L=Rr(Ve,"",L,{"--calculated-dot-color":b()})}),nt(rt,Ve)},Re=(rt,Ve)=>{{var L=B=>{var H=qQ(),X=Gt(H);pt(X,"y1",0);let xe;var ue=xt(X);pt(ue,"x1",0);let Ae;Ht(()=>{pt(X,"x1",R(f)),pt(X,"x2",R(f)),pt(X,"y2",R(u)*E()),pt(X,"stroke-width",R(c)*1.2),xe=Rr(X,"",xe,{"--calculated-dot-color":b()}),pt(ue,"y1",R(f)),pt(ue,"y2",R(f)),pt(ue,"x2",R(u)*E()),pt(ue,"stroke-width",R(c)*1.2),Ae=Rr(ue,"",Ae,{"--calculated-dot-color":b()})}),nt(B,H)};lr(rt,B=>{g()==="lines"&&B(L)},Ve)}};lr(We,rt=>{g()==="dots"?rt(Ne):rt(Re,!1)})}Ht(()=>{pt(le,"x",R(N)),pt(le,"y",R(V)),pt(le,"width",R(u)*E()),pt(le,"height",R(u)*E())}),nt(te,le)};lr(Te,te=>{E()>0&&te(Se)})}var re=xt(U),oe=xt(re);{var ne=te=>{var le=FQ();Ht(()=>pt(le,"opacity",R(G))),nt(te,le)};lr(oe,te=>{E()>0&&te(ne)})}wu(ee,te=>we(p,te),()=>R(p)),Ht(()=>{ae=Rr(ee,"",ae,{"--calculated-background-color":_()}),pt(j,"x",R(N)),pt(j,"y",R(V)),pt(j,"width",R(u)),pt(j,"height",R(u)),pt(re,"opacity",R(W))}),nt(e,ee),Sr(),n()}var VQ=nr('<div role="button" tabindex="0" class="bounding-box-border svelte-1e5jg43"><div class="bounding-box svelte-1e5jg43"></div></div>');function GQ(e,t){xr(t,!1);const[r,n]=ii(),i=()=>Ye(f(),"$position",r),s=()=>Ye(y,"$width",r),o=()=>Ye(m,"$height",r),a=()=>Ye(h(),"$color",r),u=qe();let c=ve(t,"dimensions",8),f=ve(t,"position",8),h=ve(t,"color",8),g=ve(t,"groupName",8);const{width:y,height:m}=c(),_=xl();function b(){_("groupClick",{groupName:g()})}Fe(()=>Vt(g()),()=>{we(u,`${g()}-bounding-box`)}),Qi(),qn();var S=VQ();let E;var A=$t(S);let T;Ht(()=>{pt(S,"id",R(u)),E=Rr(S,`border: solid 4px ${a()??""};`,E,{top:`${i().y}px`,left:`${i().x}px`,width:`${s()}px`,height:`${o()}px`}),T=Rr(A,"",T,{"background-color":a()})}),pr("contextmenu",S,ks(ro(function(I){Tn.call(this,t,I)}))),pr("mousedown",S,ks(ro(b))),nt(e,S),Sr(),n()}function $Q(e,t){xr(t,!1);const[r,n]=ii(),i=()=>Ye(o,"$groupBoxes",r),o=kr("graph").groupBoxes;qn();var a=vr(),u=Gt(a);ds(u,1,()=>Array.from(i()),([c,f])=>c,(c,f)=>{let h=()=>R(f)[0];GQ(c,sg(()=>R(f)[1],{get groupName(){return h()},$$events:{groupClick(y){Tn.call(this,t,y)}}}))}),nt(e,a),Sr(),n()}function Am(e){const t=e.style.width,r=e.style.height;e.style.width="fit-content",e.style.height="fit-content";const n=e.offsetWidth,i=e.offsetHeight;return e.style.width=t,e.style.height=r,[n,i]}function rV(e,t,r,n,i){const s={x:0,y:0},o=n.x-i.left-i.width/2,a=n.y-i.top-i.height/2,u=(o-r.x)/e,c=(a-r.y)/e;return s.x=o-u*t,s.y=a-c*t,s}function nV(e,t,r){const n=t*r,i=e-n;return Number(Math.max(SQ,Math.min(xQ,i)).toFixed(9))}const Sh=(e,t,r,n,i,s,o)=>{const{clientX:a,clientY:u}=e,c=s,f=a-r,h=u-t,g=o.x,y=o.y,m=n*(1-s)/2,_=i*(1-s)/2,b=f-g-m,S=h-y-_,E=b/c,A=S/c;return{x:E,y:A}};function UQ(e,t,r){const{top:n,left:i,width:s,height:o}=lt(e),a=lt(t.scale),u=lt(t.translation);return{scaled:Sh({clientX:r.x,clientY:r.y},n,i,s,o,a,u),scale:a}}function jQ(e,t,r){const{scale:n,translation:i}=r,s=lt(n),o=lt(i),a=t.x-e.x,u=t.y-e.y,c=o.x+a*s,f=o.y+u*s;return{x:c,y:f}}function HQ(e,t){return e.x*t.x+e.y*t.y}function WQ(e,t,r){const n=[],i=t.x-e.x,s=t.y-e.y,o=YQ(e.direction,t.direction),a=HQ(e.direction,t.direction)===0,u=XQ(e,t),c=Sn(e.direction,-1,-1),f=Sn(t.direction,-1,-1),h={x:Math.abs(e.direction.y),y:Math.abs(e.direction.x)},g=Sn(e.direction,i-r*e.direction.x*(a?1:o?0:2),s-r*e.direction.y*(a?1:o?0:2)),y=Sn(t.direction,i+r*t.direction.x*(a?1:o?0:2),s+r*t.direction.y*(a?1:o?0:2)),m=Math.sign(g.x)===-1||Math.sign(g.y)===-1,_=Math.sign(y.x)===1||Math.sign(y.y)===1,b=Math.abs(i),S=Math.abs(s),E=Sn(e.direction,r,r),A=Sn(f,r,r),T=Sn(t.direction,r,r),I=Sn(e.direction,b,S),q=Sn(f,b,S),p=Sn(e.direction,b/2,S/2),P=Sn(f,b/2,S/2),O=Sn(h,i,s),N=!u&&!_&&!m,V=e.x+E.x,W=e.y+E.y,G=t.x+T.x,ee=t.y+T.y;if(m&&n.push(E),u&&!_&&!m)n.push(I),n.push(q);else if(o)m||n.push(Sn(e.direction,r+b,r+S)),n.push(O),_||n.push(Sn(f,r+b,r+S));else if(N)n.push(p),n.push(O),n.push(P);else if(m&&_)if(a){const ae=Math.abs(V-G),K=Math.abs(W-ee);n.push(Sn(t.direction,b<r*2?t.direction.x*(i+t.direction.x*r):b+r,S<r*2?t.direction.y*(s+t.direction.y*r):S+r)),n.push(Sn(c,ae,K))}else{const ae=Math.abs(V-G),K=Math.abs(W-ee);n.push(Sn(h,i/2,s/2)),n.push(Sn(t.direction,ae,K)),n.push(Sn(h,i/2,s/2))}else if(m){const ae=Math.abs(V-t.x),K=Math.abs(W-t.y);n.push(Sn(f,b<r*2?b-r:b/2,S<r*2?S-r:S/2)),n.push(Sn(c,ae,K)),n.push(Sn(f,Math.max(r,b/2),Math.max(r,S/2)))}else if(_){const ae=Math.abs(G-e.x),K=Math.abs(ee-e.y);n.push(Sn(e.direction,Math.max(r,b/2),Math.max(r,S/2))),n.push(Sn(t.direction,ae,K)),n.push(Sn(e.direction,b<r*2?b-r:b/2,S<r*2?S-r:S/2))}return _&&n.push(A),n}function XQ(e,t){const{x:r,y:n}=e.direction,{x:i,y:s}=t.direction,o=t.x-e.x,a=t.y-e.y;return r*s===i*n?!1:Math.sign(a)===Math.sign(n+s)!=(Math.sign(o)===Math.sign(r+i))}function Sn(e,t,r){return{x:e.x*t,y:e.y*r}}function YQ(e,t){return e.x===t.x&&e.y===t.y}function KQ(e,t){const{width:r,height:n}=e,{top:i,left:s,right:o,bottom:a}=t,u=o-s,c=a-i;if(!u||!c)return{x:null,y:null,scale:null};const f=s+u/2,h=i+c/2,g=Math.min(r/u,n/c)*.8,y=r/2,m=n/2,_=y-f,b=m-h;return{x:_*g,y:b*g,scale:g}}const Ud=(e,t,r)=>Math.min(Math.abs(e||t)/2,r);function Tm(e,t){const n=e.getTotalLength()*t;return e.getPointAtLength(n)}function Rp(){const e=new Map,{subscribe:t,set:r,update:n}=Ke(e);return{subscribe:t,set:r,update:n,add:(s,o)=>(n(a=>(a.set(o,s),a)),e),get:s=>e.get(s)||null,getAll:()=>Array.from(e.values()),delete:s=>{let o=!1;return n(a=>(a.delete(s),o=!0,a)),o},count:()=>e.size}}function ZQ(e){const{id:t,inputs:r,outputs:n,resizable:i,dimensions:s,editable:o,direction:a,zIndex:u,position:c,selectionColor:f,borderWidth:h,edge:g}=e,{bgColor:y,borderColor:m,rotation:_,borderRadius:b,connections:S,textColor:E,locked:A,group:T}=e,I=Rp(),q=(O="self")=>{lt(I).forEach(N=>{(O==="self"||lt(N.direction)===O)&&N.recalculatePosition()})};return{id:typeof t=="string"&&t.slice(0,2)==="N-"?t:`N-${t}`,position:Ke({x:(c==null?void 0:c.x)||0,y:(c==null?void 0:c.y)||0}),dimensions:{width:Ke((s==null?void 0:s.width)||0),height:Ke((s==null?void 0:s.height)||(s==null?void 0:s.width))},group:Ke(T||null),locked:Ke(A||!1),inputs:Ke(r),outputs:Ke(n),recalculateAnchors:q,rotation:Ke(_||0),moving:Ke(!1),resizingWidth:Ke(!1),resizingHeight:Ke(!1),rotating:Ke(!1),editable:Ke(o||!1),resizable:Ke(i),anchors:I,zIndex:Ke(u||2),collapsed:Ke(!1),edge:g||null,borderRadius:Ke(b),bgColor:Ke(y||null),direction:Ke(a),label:Ke(e.label||""),borderColor:Ke(m||null),borderWidth:Ke(h),selectionColor:Ke(f||null),textColor:Ke(E||null),connections:Ke(S)}}function JQ(e,t){const r=[e,t].sort();return`${r[0]}+${r[1]}`}function AC(e,t,r){var a,u,c,f,h;const{source:n,target:i}=e,o={id:n.id&&i.id?JQ(n.id,i.id):"cursor",target:e.target,source:e.source,component:t,type:Ke((r==null?void 0:r.type)||null),color:(r==null?void 0:r.color)||Ke(null),width:Ke((r==null?void 0:r.width)||0),animated:Ke((r==null?void 0:r.animated)||!1),rendered:Ke(!1),start:(r==null?void 0:r.start)||null,end:(r==null?void 0:r.end)||null};if(r!=null&&r.disconnect&&(o.disconnect=!0),r!=null&&r.label){const g={text:Ke(r==null?void 0:r.label.text),color:Ke(((a=r==null?void 0:r.label)==null?void 0:a.color)||PQ),textColor:Ke(((u=r==null?void 0:r.label)==null?void 0:u.textColor)||CQ),fontSize:Ke(((c=r==null?void 0:r.label)==null?void 0:c.fontSize)||RQ),dimensions:{width:Ke(((f=r==null?void 0:r.label.dimensions)==null?void 0:f.width)||AQ),height:Ke(((h=r==null?void 0:r.label.dimensions)==null?void 0:h.height)||TQ)},borderRadius:Ke((r==null?void 0:r.label.borderRadius)||EQ)};o.label=g}return o}function QQ(){const e=new Map,t=new Set,{subscribe:r,set:n,update:i}=Ke(e),s={subscribe:r,set:n,update:i,add:(o,a)=>{if(typeof a!="string"){const u=Array.from(a),c=u[0],f=u[1];if(c.connected.update(h=>h.add(f)),f.connected.update(h=>h.add(c)),s.match(...Array.from(a)).length)return;t.forEach(h=>h(o,"connection"))}i(u=>(u.set(a,o),u))},getAll:()=>Array.from(e.values()),get:o=>e.get(o)||null,match:(...o)=>Array.from(e.keys()).filter(a=>a==="cursor"?!1:o.every(u=>u?a.has(u):!0)),fetch:(o,a)=>{const u=Array.from(e.keys()).filter(c=>c==="cursor"?!1:[o,a].every(f=>f?c.has(f):!0))[0];return e.get(u)||null},delete:o=>{if(typeof o!="string"){const u=Array.from(o),c=u[0],f=u[1];c.connected.update(h=>(h.delete(f),h)),f.connected.update(h=>(h.delete(c),h))}let a=!1;return i(u=>{const c=u.get(o);return c&&(u.delete(o),a=!0,typeof o!="string"&&t.forEach(f=>f(c,"disconnection"))),u}),a},onEdgeChange:o=>(t.add(o),()=>t.delete(o)),count:()=>e.size};return s}function eee(e,t,r,n){return Wf([e,t,r,n],([s,o,a,u])=>{const c={clientX:s.x,clientY:s.y};return Sh(c,o.top,o.left,o.width,o.height,u,a)})}function tee(e,t,r,n){const i=Ke({top:1/0,left:1/0,right:-1/0,bottom:-1/0}),s=Ke({top:1/0,left:1/0,right:-1/0,bottom:-1/0});let o,a=lt(t),u=lt(r),c=lt(n),f=a.width/u,h=a.height/u;function g(){const{x:m,y:_}=Sh({clientX:a.left,clientY:a.top},a.top,a.left,a.width,a.height,u,c),b=lt(s);i.set({top:Math.min(b.top,_),left:Math.min(b.left,m),right:Math.max(b.right,m+f),bottom:Math.max(b.bottom,h+_)})}function y(m=!1){let _=1/0,b=1/0,S=-1/0,E=-1/0;for(const A of e.getAll()){console.log("dentro del for, este es e node:",A);const{x:T,y:I}=lt(A.position),q=lt(A.dimensions.width),p=lt(A.dimensions.height);b=Math.min(b,T),_=Math.min(_,I),S=Math.max(S,T+q),E=Math.max(E,I+p)}s.set({top:_,left:b,right:S,bottom:E}),g(),m&&(o=requestAnimationFrame(()=>y(m)))}return e.subscribe(()=>{console.log("dentro del nodes.subscribe...........Aqui no estan llegando los nodes"),y()}),WS.subscribe(m=>{m&&y(m),m||cancelAnimationFrame(o)}),io.subscribe(m=>{m&&y(m),m||cancelAnimationFrame(o)}),t.subscribe(()=>{a=lt(t),f=a.width/u,h=a.height/u,g()}),r.subscribe(()=>{u=lt(r),f=a.width/u,h=a.height/u,g()}),n.subscribe(()=>{c=lt(n),g()}),{graphBounds:i,nodeBounds:s}}function ree(e,t,r){const{width:n,height:i,top:s,left:o}=e,a={clientX:n/2,clientY:i/2};return Sh(a,s,o,n,i,r,t)}function iV(e,t){const{zoom:r,editable:n,translation:i,direction:s,locked:o,edge:a,nodes:u}=t,c=Ke({x:(i==null?void 0:i.x)||0,y:(i==null?void 0:i.y)||0}),f=Ke({top:0,left:0,width:0,height:0,bottom:0,right:0}),h=Ke(r),g=Ke(!1),y=Rp(),m=tee(y,f,h,c),_=Wf([f,c,h],([S,E,A])=>ree(S,E,A));return{id:e,nodes:y,edges:QQ(),transforms:{translation:c,scale:h},maxZIndex:Ke(2),dimensions:f,bounds:m,center:_,mounted:g,direction:s||"LR",editable:n||!1,edge:a||null,editing:Ke(null),cursor:eee(tV,f,c,h),locked:Ke(o||!1),groups:Ke({selected:{parent:Ke(null),nodes:Ke(new Set)},hidden:{parent:Ke(null),nodes:Ke(new Set)}}),groupBoxes:Rp(),activeGroup:Ke(null),initialNodePositions:Ke([])}}function nee(e,t,r,n,i,s,o,a,u,c,f,h){const{width:g,height:y}=i,{x:m,y:_}=n,b=lt(t.position),S=Ke({x:m-b.x+g/2,y:_-b.y+y/2}),E=Wf([t.position,S],([O,N])=>({x:O.x+N.x,y:O.y+N.y})),A=e.transforms,T=e.dimensions,I=Ke(u||"self"),q=()=>{const O=document.getElementById(r),N=lt(I),V=Df[N];if(!O)return;const{x:W,y:G,width:ee,height:ae}=O.getBoundingClientRect(),K=lt(S),U=lt(E),{scaled:j,scale:J}=UQ(T,A,{x:W,y:G}),de=j.x-U.x,ce=j.y-U.y;S.set({x:K.x+de+ee/J/2+V.x*ee/J/2,y:K.y+ce+ae/J/2+V.y*ae/J/2})},p=Wf([t.moving,t.resizingWidth,t.resizingHeight,t.rotating],([O,N,V,W])=>O||N||V||W),P=Wf([t.rotation],([O])=>O);return{id:r,position:E,offset:S,direction:I,dynamic:Ke(c||!1),type:a,edge:o,moving:p,mounted:Ke(!1),recalculatePosition:q,connected:Ke(new Set),store:s||null,inputKey:f||null,edgeColor:h||Ke(null),rotation:P,node:t}}const Yf=Rp(),jd={width:200,height:100};function dp(e,t){return{x:Math.round(e/jd.width)*jd.width,y:Math.round(t/jd.height)*jd.height}}const Hd=10;function sV(e){const t=lt(e);return Array.from(t).map(n=>lt(n.position))}function TC(e,t){console.log("moveNodes called");let r;const n=lt(e.groups),i=lt(e.activeGroup);if(console.log("Graph Groups:",n),console.log("Active Group:",i),!i)return;const s=n[i].nodes;if(!s)return;const o=lt(e.initialNodePositions),{x:a,y:u}=lt(hs),c=Array.from(lt(s)),f=lt(e.groupBoxes);console.log("Group Boxes:",f),c.forEach(g=>g.moving.set(!0)),h();function h(){const g=lt(e.cursor);let y=g.x-a,m=g.y-u;if(t){const b=dp(y,m);y=b.x,m=b.y}const _={x:y,y:m};c.forEach((b,S)=>{const{group:E,position:A}=b,T=o[S];let I;if(i==="selected"){const q=lt(E);q&&(I=f.get(q))}if(!I)iee(T,_,A);else{const q=lt(b.dimensions.width),p=lt(b.dimensions.height),P=aV(I,q,p);oV(T,_,A,P)}}),lt(io)?r=requestAnimationFrame(h):cancelAnimationFrame(r)}}function iee(e,t,r){r.set({x:e.x+t.x,y:e.y+t.y})}function oV(e,t,r,n){r.set({x:Math.min(Math.max(n.left,e.x+t.x),n.right),y:Math.min(Math.max(n.top,e.y+t.y),n.bottom)})}function aV(e,t,r){const{x:n,y:i}=lt(e.position);return console.log("Group Box Position:",{x:n,y:i}),{left:n+Hd,right:n+lt(e.dimensions.width)-t-Hd,top:i+Hd,bottom:i+lt(e.dimensions.height)-r-Hd}}function PC(e=1,t,r,n=.1){const i=lt(t),{width:s,height:o,top:a,left:u}=i,c=r.scale,f=lt(r.translation),h=lt(c),g=nV(h,e,n),y=rV(h,g,f,{x:s/2+u,y:o/2+a},i);c.set(g),r.translation.set(y)}var see=nr('<div class="svelvet-graph-wrapper svelte-19pa6i0" role="presentation"><!></div>');function oee(e,t){xr(t,!1);const[r,n]=ii(),i=()=>Ye(g,"$translation",r),s=()=>Ye(h,"$scale",r),o=()=>Ye(y,"$cursor",r),a=qe(),u=qe(),c=kr("graph"),f=c.transforms,h=f.scale,g=f.translation,y=c.cursor;let m=ve(t,"isMovable",8),_=qe(),b=qe(!1);function S(){Ot(g,jQ(lt(hs),o(),f)),we(_,requestAnimationFrame(S))}Fe(()=>i(),()=>{we(a,i())}),Fe(()=>(R(a),s()),()=>{we(u,`translate(${R(a).x}px, ${R(a).y}px) scale(${s()})`)}),Fe(()=>(Vt(m()),R(b),R(_)),()=>{m()&&!R(b)?(we(b,!0),we(_,requestAnimationFrame(S))):(!m()||!R(b))&&(we(b,!1),cancelAnimationFrame(R(_)))}),Qi(),qn();var E=see();let A;var T=$t(E);Xr(T,t,"default",{},null),Ht(()=>A=Rr(E,"",A,{transform:R(u)})),pr("contextmenu",E,Hf(ks(function(I){Tn.call(this,t,I)}))),pr("click",E,Hf(ks(function(I){Tn.call(this,t,I)}))),pr("touchstart",E,Hf(ks(function(I){Tn.call(this,t,I)}))),nt(e,E),Sr(),n()}var aee=nr("<!> <!>",1);function uee(e,t){xr(t,!1);const[r,n]=ii(),i=()=>Ye(h,"$activeGroup",r),s=()=>Ye(io,"$tracking",r),o=()=>Ye(m,"$cursor",r),a=()=>Ye(g,"$groups",r);console.log("Componente GraphRenderer.svelte");const u=kr("graph"),c=kr("snapTo");let f=ve(t,"isMovable",8);const h=u.activeGroup,g=u.groups,y=u.initialNodePositions,m=u.cursor;function _(b){Ot(io,!0);const{groupName:S}=b.detail;Ot(h,S),Ot(hs,o()),Ot(y,sV(a()[S].nodes))}Fe(()=>(i(),s(),TC),()=>{i()&&s()&&TC(u,c)}),Qi(),qn(),oee(e,{get isMovable(){return f()},children:(b,S)=>{var E=aee(),A=Gt(E);Xr(A,t,"default",{},null);var T=xt(A,2);$Q(T,{$$events:{groupClick:_}}),nt(b,E)},$$slots:{default:!0}}),Sr(),n()}const cee=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],lee=new Set(cee),CC=e=>lee.has(e);var fee=nr('<input type="text">');function hee(e,t){xr(t,!1);const[r,n]=ii(),i=()=>Ye(o,"$textStore",r);let s=ve(t,"placeholder",8);const o=kr("textStore");qn();var a=fee();Ht(()=>pt(a,"placeholder",s())),pr("keydown",a,ro(function(u){Tn.call(this,t,u)})),pr("click",a,ro(function(u){Tn.call(this,t,u)})),pr("mousedown",a,ro(function(u){Tn.call(this,t,u)})),ZJ(a,i,u=>Ot(o,u)),nt(e,a),Sr(),n()}const dee=new Set(["INPUT","SELECT","BUTTON","TEXTAREA"]);var pee=nr("<div><!></div>"),gee=nr('<div role="button"><!> <div class="anchors left svelte-1iknrz0"><!></div> <div class="anchors right svelte-1iknrz0"><!></div> <div class="anchors top svelte-1iknrz0"><!></div> <div class="anchors bottom svelte-1iknrz0"><!></div></div>');function vee(e,t){xr(t,!1);const[r,n]=ii(),i=()=>Ye(ne(),"$groups",r),s=()=>Ye(xe,"$position",r),o=()=>Ye(Lr,"$selectedNodes",r),a=()=>Ye(cr,"$hiddenNodes",r),u=()=>Ye(Br,"$resized",r),c=()=>Ye(U,"$duplicate",r),f=()=>Ye(le(),"$centerPoint",r),h=()=>Ye(ue,"$widthStore",r),g=()=>Ye(Ae,"$heightStore",r),y=()=>Ye(hs,"$initialClickPosition",r),m=()=>Ye(j,"$graphDOMElement",r),_=()=>Ye(Ie,"$zIndex",r),b=()=>Ye(te(),"$maxZIndex",r),S=()=>Ye(oe(),"$locked",r),E=()=>Ye(Le,"$nodeLock",r),A=()=>Ye(Be,"$editable",r),T=()=>Ye(mt,"$group",r),I=()=>Ye(Wt,"$rotation",r),q=()=>Ye(be,"$bgColor",r),p=()=>Ye(ct,"$textColor",r),P=()=>Ye(ft,"$borderColor",r),O=()=>Ye(Ce,"$selectionColor",r),N=()=>Ye(je,"$borderRadius",r),V=()=>Ye(it,"$borderWidth",r),W=qe(),G=qe(),ee=qe(),ae=qe(),K=kr("mounted"),U=kr("duplicate"),j=kr("graphDOMElement"),J=xl();let de=ve(t,"node",8),ce=ve(t,"isDefault",8),Te=ve(t,"useDefaults",8),Se=ve(t,"center",8),re=ve(t,"nodeStore",8),oe=ve(t,"locked",8),ne=ve(t,"groups",8),te=ve(t,"maxZIndex",8),le=ve(t,"centerPoint",8),We=ve(t,"cursor",8),Ne=ve(t,"initialNodePositions",8),Re=ve(t,"activeGroup",8),rt=ve(t,"editing",8),Ve=ve(t,"dimensionsProvided",8,!1),L=ve(t,"title",8);const B=Ke(0),H=Ke(null),X=de().id,xe=de().position,ue=de().dimensions.width,Ae=de().dimensions.height,Ce=de().selectionColor,Be=de().editable,Le=de().locked,Ie=de().zIndex,be=de().bgColor,je=de().borderRadius,ct=de().textColor,mt=de().group,ft=de().borderColor,it=de().borderWidth,Wt=de().rotation,{selected:yr,hidden:Qt}=i(),cr=Qt.nodes,Lr=yr.nodes,Br=Ke(!1);Qr("node",de()),Qr("anchorsMounted",B),Qr("resized",Br),Qr("nodeConnectEvent",H),Ti(()=>{if(Se()){const Ft={x:f().x-h()/2,y:f().y-g()/2};de().position.set(Ft),io.set(!0),io.set(!1)}K.update(Ft=>Ft+1)}),xh(()=>{R(G)&&(o().delete(de()),Ot(Lr,o())),K.update(Ft=>Ft-1)});function bn(){R(G)?(de()&&o().delete(de()),Ot(Lr,o())):(de()&&o().add(de()),Ot(Lr,o()))}function tr(Ft){Ot(hs,lt(We())),m().focus(),_()!==b()&&_()!==1/0&&Ot(Ie,eQ(te(),b()));const zr=Ft.target;if(!dee.has(zr.tagName)&&(Ft.preventDefault(),J("nodeClicked",{node:de(),e:Ft}),!(S()||E()))){if("touches"in Ft){if(Ft.touches&&Ft.touches.length>1)return}else Ft.button===2&&A()&&Ot(rt(),de());Ot(io,!0),Or(Ft)}}function Or(Ft){let zr,Fn,wn=!1;const jr=T();jr&&(zr=i()[jr],Fn=lt(zr.parent),wn=Fn===de()),wn?Ot(Re(),jr):Ot(Re(),"selected"),!Ft.shiftKey&&R(G)?Ot(Re(),"selected"):(!Ft.shiftKey&&!R(G)&&!Ft.shiftKey&&(o().clear(),Ot(Lr,o())),bn()),Ot(Ne(),sV(i().selected.nodes))}function vn(){re().delete(X)}function mn(Ft){const zr=lt(We()),Fn=zr.x-y().x,wn=zr.y-y().y;Math.abs(Fn)+Math.abs(wn)<4&&J("nodeReleased",{e:Ft,node:de()}),Ot(H,Ft)}function pn(Ft){return Ft.addEventListener("mousedown",tr),Ft.addEventListener("touchstart",tr),{destroy(){Ft.removeEventListener("mousedown",tr),Ft.removeEventListener("touchstart",tr)}}}Fe(()=>s(),()=>{we(W,s())}),Fe(()=>(o(),Vt(de())),()=>{we(G,o().has(de()))}),Fe(()=>(a(),Vt(de())),()=>{we(ee,a().has(de()))}),Fe(()=>(Vt(Ve()),u()),()=>{we(ae,Ve()||u())}),Fe(()=>(R(G),c(),Vt(de())),()=>{R(G)&&c()&&J("duplicate",de())}),Qi(),qn();var Gn=vr(),ei=Gt(Gn);{var Bt=Ft=>{var zr=gee();pt(zr,"id",X);let Fn;pt(zr,"tabindex",0);let wn;var jr=$t(zr);{var $n=Lt=>{var at=pee();Rr(at,"",{},{width:"fit-content",height:"fit-content"});var He=$t(at);Xr(He,t,"default",{grabHandle:pn,get selected(){return R(G)},destroy:vn},null),vC(at,"clientHeight",yt=>Ot(Ae,yt)),vC(at,"clientWidth",yt=>Ot(ue,yt)),nt(Lt,at)},hi=Lt=>{var at=vr(),He=Gt(at);Xr(He,t,"default",{grabHandle:pn,get selected(){return R(G)},destroy:vn},null),nt(Lt,at)};lr(jr,Lt=>{R(ae)?Lt(hi,!1):Lt($n)})}var Jr=xt(jr,2),Un=$t(Jr);Xr(Un,t,"anchorWest",{},null);var On=xt(Jr,2),di=$t(On);Xr(di,t,"anchorEast",{},null);var Xe=xt(On,2),Et=$t(Xe);Xr(Et,t,"anchorNorth",{},null);var Rt=xt(Xe,2),kt=$t(Rt);Xr(kt,t,"anchorSouth",{},null),ic(()=>pr("contextmenu",zr,ks(ro(function(Lt){Tn.call(this,t,Lt)})))),ic(()=>pr("mouseup",zr,mn)),Xu(zr,Lt=>pn==null?void 0:pn(Lt)),Ht(Lt=>{Fn=Cn(zr,1,"svelvet-node svelte-1iknrz0",null,Fn,Lt),pt(zr,"title",L()),wn=Rr(zr,"",wn,{top:`${R(W).y??""}px`,left:`${R(W).x??""}px`,"z-index":_(),width:R(ae)?h()+"px":"fit-content",height:R(ae)?g()+"px":"fit-content",transform:`rotate(${I()??""}deg)`,"--prop-background-color":q()||(ce()||Te()?null:"transparent"),"--prop-text-color":p(),"--prop-border-color":P(),"--prop-selection-color":O(),"--prop-border-radius":N()?`${N()}px`:ce()||Te()?null:"0px","--prop-border-width":V()||(ce()||Te()?null:"0px")}),pt(Jr,"id",`anchors-west-${de().id}`),pt(On,"id",`anchors-east-${de().id}`),pt(Xe,"id",`anchors-north-${de().id}`),pt(Rt,"id",`anchors-south-${de().id}`)},[()=>({selected:R(G),locked:S()||E()})],hn),nt(Ft,zr)};lr(ei,Ft=>{R(ee)||Ft(Bt)})}nt(e,Gn),Sr(),n()}var mee=nr("<div></div> <div></div>",1),yee=nr("<div></div> <div></div>",1),_ee=nr("<div></div>"),bee=nr("<div></div>"),wee=nr("<!> <!> <!> <!>",1);function xee(e,t){xr(t,!1);const[r,n]=ii(),i=()=>Ye(U,"$position",r),s=()=>Ye(Se,"$widthStore",r),o=()=>Ye(Te,"$heightStore",r),a=()=>Ye(J,"$resizingHeight",r),u=()=>Ye(re,"$cursor",r),c=()=>Ye(ce,"$nodeRotation",r),f=()=>Ye(j,"$resizingWidth",r),h=()=>Ye(de,"$rotating",r),g=()=>Ye(hs,"$initialClickPosition",r),y=qe(),m=qe(),_=qe(),b=kr("graph"),S=kr("node"),E=kr("resized");let A=ve(t,"width",8,!1),T=ve(t,"height",8,!1),I=ve(t,"rotation",8,!1),q=ve(t,"minHeight",12,0),p=ve(t,"minWidth",12,0),P,O=A(),N=A(),V=T(),W=T(),G=A()&&T(),ee=0,ae=0,K=qe(lt(S.position));const U=S.position,j=S.resizingWidth,J=S.resizingHeight,de=S.rotating,ce=S.rotation,Te=S.dimensions.height,Se=S.dimensions.width,re=b.cursor;let oe=qe(),ne=qe(),te=qe(1);Ti(()=>{try{P=document.querySelector(`#${S.id}`),P&&(Ce=>(p(Ce[0]),q(Ce[1])))(Am(P))}catch(Ce){console.error(Ce)}});function le(Ce,Be){const Le=be=>{be.stopPropagation(),be.preventDefault(),Be.left||Be.top?we(te,-1):we(te,1),WS.set(!0),Ot(hs,lt(re)),we(oe,s()),we(ne,o()),we(K,i()),Be.both?Ot(j,!0):Ot(j,!1),Ot(j,Be.left||Be.right||Be.both||!1),Ot(J,Be.top||Be.bottom||Be.both||!1),P&&(je=>(p(je[0]),q(je[1])))(Am(P)),window.addEventListener("mouseup",Ie)},Ie=()=>{Ot(j,!1),Ot(J,!1),WS.set(!1),window.removeEventListener("mouseup",Ie)};return Ce.addEventListener("mousedown",Le),{destroy(){Ce.removeEventListener("mousedown",Le)}}}function We(Ce){const Be=Ie=>{Ie.stopPropagation(),Ie.preventDefault(),ee=c(),Ot(hs,lt(re));const be=g().x-R(_).x,je=g().y-R(_).y;ae=Math.atan2(je,be),Ot(de,!0),window.addEventListener("mouseup",Le)},Le=()=>{Ot(de,!1),window.removeEventListener("mouseup",Le)};return Ce.addEventListener("mousedown",Be),{destroy(){Ce.removeEventListener("mousedown",Be)}}}function Ne(){const Ce=lt(re),Be=Ce.x-R(_).x,Le=Ce.y-R(_).y,Ie=Math.atan2(Le,Be),be=ae-Ie;return ee-Re(be)}function Re(Ce){return Ce*(180/Math.PI)}sQ(()=>{P&&(Ce=>(p(Ce[0]),q(Ce[1])))(Am(P)),s()<p()&&E.set(!1),o()<q()&&E.set(!1)}),Fe(()=>(h(),u()),()=>{h()&&(u(),Ot(ce,Ne()))}),Fe(()=>(a(),u(),Vt(q()),R(ne),R(te),R(K),c()),()=>{if(a()){const Ce=lt(hs),Be=u(),Le=Math.max(q(),R(ne)+(Be.y-Ce.y)*R(te));Le>q()?(E.set(!0),Ot(Te,Le)):E.set(!1),R(te)===-1&&Ot(U,{x:R(K).x,y:R(K).y+Be.y-Ce.y}),c()!==0&&S.position.update(Ie=>({y:R(K).y-(Le-R(ne))/2,x:Ie.x}))}}),Fe(()=>(f(),u(),Vt(p()),R(oe),R(te),R(K),c()),()=>{if(f()){const Ce=lt(hs),Be=u(),Le=Math.max(p(),R(oe)+(Be.x-Ce.x)*R(te));Le>p()?(E.set(!0),Ot(Se,Le)):E.set(!1),R(te)===-1&&Ot(U,{x:R(K).x+Be.x-Ce.x,y:R(K).y}),c()!==0&&S.position.update(Ie=>({x:R(K).x-(Le-R(oe))/2,y:Ie.y}))}}),Fe(()=>i(),()=>{we(y,i().x)}),Fe(()=>i(),()=>{we(m,i().y)}),Fe(()=>(R(y),s(),R(m),o()),()=>{we(_,{x:R(y)+s()/2,y:R(m)+o()/2})}),Qi(),qn();var rt=wee(),Ve=Gt(rt);{var L=Ce=>{var Be=mee(),Le=Gt(Be);let Ie;Xu(Le,(ct,mt)=>le==null?void 0:le(ct,mt),()=>({left:O}));var be=xt(Le,2);let je;Xu(be,(ct,mt)=>le==null?void 0:le(ct,mt),()=>({right:N})),Ht((ct,mt)=>{Ie=Cn(Le,1,"left svelte-1ryxg7v",null,Ie,ct),je=Cn(be,1,"right svelte-1ryxg7v",null,je,mt)},[()=>({width:A()}),()=>({width:A()})],hn),nt(Ce,Be)};lr(Ve,Ce=>{A()&&Ce(L)})}var B=xt(Ve,2);{var H=Ce=>{var Be=yee(),Le=Gt(Be);let Ie;Xu(Le,(ct,mt)=>le==null?void 0:le(ct,mt),()=>({top:V}));var be=xt(Le,2);let je;Xu(be,(ct,mt)=>le==null?void 0:le(ct,mt),()=>({bottom:W})),Ht((ct,mt)=>{Ie=Cn(Le,1,"top svelte-1ryxg7v",null,Ie,ct),je=Cn(be,1,"bottom svelte-1ryxg7v",null,je,mt)},[()=>({height:T()}),()=>({height:T()})],hn),nt(Ce,Be)};lr(B,Ce=>{T()&&Ce(H)})}var X=xt(B,2);{var xe=Ce=>{var Be=_ee();Cn(Be,1,"svelte-1ryxg7v",null,{},{both:G}),Xu(Be,(Le,Ie)=>le==null?void 0:le(Le,Ie),()=>({both:G})),nt(Ce,Be)};lr(X,Ce=>{G&&Ce(xe)})}var ue=xt(X,2);{var Ae=Ce=>{var Be=bee();let Le;Xu(Be,Ie=>We==null?void 0:We(Ie)),Ht(Ie=>Le=Cn(Be,1,"svelte-1ryxg7v",null,Le,Ie),[()=>({rotation:I()})],hn),nt(Ce,Be)};lr(ue,Ce=>{I()&&Ce(Ae)})}nt(e,rt),Sr(),n()}var See=nr("<div></div>");function Eee(e,t){let r=ve(t,"output",8),n=ve(t,"input",8),i=ve(t,"connecting",8),s=ve(t,"connected",8),o=ve(t,"hovering",8),a=ve(t,"bgColor",8);var u=See();let c,f;Ht(h=>{c=Cn(u,1,"svelvet-anchor svelte-19t6skv",null,c,h),f=Rr(u,"",f,{"--prop-anchor-color":a()})},[()=>({output:r(),input:n(),connected:s(),connecting:i(),hovering:o()})],hn),nt(e,u)}let Pm;function Aee(e){const t=e.parentNode;if(!t)return;t.removeChild(e);const r=document.querySelector(".svelvet-graph-wrapper");r&&r.appendChild(e)}var Tee=Nn('<defs><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="12.5" refY="5" orient="auto"><polygon class="arrow svelte-ppcocz" points="0 0, 15 5, 0 10"></polygon></marker><marker viewBox="0 0 15 15" markerWidth="15" markerHeight="10" refX="0" refY="5" orient="auto"><polygon class="arrow svelte-ppcocz" points="0 5, 15 0, 15 10"></polygon></marker></defs>'),Pee=Nn("<path></path>"),Cee=nr('<div class="default-label svelte-ppcocz"> </div>'),Ree=Nn('<foreignObject width="100%" height="100%" class="svelte-ppcocz"><span class="label-wrapper svelte-ppcocz"><!></span></foreignObject>'),Iee=Nn('<svg class="edges-wrapper svelte-ppcocz"><!><path role="presentation"></path><!><!></svg>');function XS(e,t){var Mt,en;const r=qE(t);xr(t,!1);const[n,i]=ii(),s=()=>Ye(Ft,"$sourceDynamic",n),o=()=>Ye(zr,"$targetDynamic",n),a=()=>Ye(R(p),"$edgeColor",n),u=()=>Ye(R(P),"$edgeLabel",n),c=()=>Ye(ei,"$sourcePositionStore",n),f=()=>Ye(Bt,"$targetPositionStore",n),h=()=>Ye(jr,"$sourceNodePositionStore",n),g=()=>Ye($n,"$targetNodePositionStore",n),y=()=>Ye(vn,"$sourceDirection",n),m=()=>Ye(pn,"$sourceRotation",n),_=()=>Ye(mn,"$targetDirection",n),b=()=>Ye(Gn,"$targetRotation",n),S=()=>Ye(hi,"$edgeType",n),E=()=>Ye(Fn,"$sourceMoving",n),A=()=>Ye(wn,"$targetMoving",n),T=()=>Ye(R(Ve),"$sourceZIndex",n),I=()=>Ye(R(L),"$targetZIndex",n),q=qe(),p=qe(),P=qe(),O=qe(),N=qe(),V=qe(),W=qe(),G=qe(),ee=qe(),ae=qe(),K=qe(),U=qe(),j=qe(),J=qe(),de=qe(),ce=qe(),Te=qe(),Se=qe(),re=qe(),oe=qe(),ne=qe(),te=qe(),le=qe(),We=qe(),Ne=qe(),Re=qe(),rt=qe(),Ve=qe(),L=qe(),B=qe(),H=qe(),X=kr("edgeStore"),xe=kr("edgeStyle"),ue=kr("endStyles"),Ae=kr("raiseEdgesOnSelect"),Ce=kr("edgesAboveNode");let Be=ve(t,"edge",24,()=>kr("edge")),Le=ve(t,"straight",8,xe==="straight"),Ie=ve(t,"step",8,xe==="step"),be=ve(t,"start",24,()=>ue[0]),je=ve(t,"end",24,()=>ue[1]),ct=ve(t,"animate",8,!1),mt=ve(t,"label",8,""),ft=ve(t,"enableHover",8,!1),it=ve(t,"edgeClick",8,null),Wt=ve(t,"labelPosition",8,.5),yr=ve(t,"width",8,null),Qt=ve(t,"color",8,null),cr=ve(t,"labelColor",8,null),Lr=ve(t,"textColor",8,null),Br=ve(t,"cornerRadius",8,8),bn=ve(t,"targetColor",8,null);const tr=Be().source,Or=Be().target,vn=tr.direction,mn=Or.direction,pn=tr.rotation,Gn=Or.rotation,ei=tr.position,Bt=Or.position,Ft=tr.dynamic,zr=Or.dynamic,Fn=tr.moving,wn=Or.moving,jr=(Mt=tr.node)==null?void 0:Mt.position,$n=(en=Or.node)==null?void 0:en.position,hi=Be().type,Jr=Be().id;let Un=qe(),On=qe(),di=qe({x:0,y:0}),Xe=qe(!1),Et=qe(!1),Rt=qe(!1),kt=qe(!1),Lt=qe(!1),at=qe();Be().rendered.set(!0),Ti(()=>{setTimeout(()=>{R(On)&&we(di,Tm(R(On),Wt()))},0),Aee(R(at))}),Q4(()=>{R(On)&&we(di,Tm(R(On),Wt()))}),xh(()=>{R(at).remove(),cancelAnimationFrame(Pm)});function He(){R(Xe)&&(R(On)&&we(di,Tm(R(On),Wt())),Pm=requestAnimationFrame(He))}function yt(){if(tr.id===null||Or.id===null)return;const Er=X.match(tr,Or);X.delete(Er[0]),tr==null||tr.connected.update(Nr=>(Or&&Nr.delete(Or),Nr)),Or==null||Or.connected.update(Nr=>(tr&&Nr.delete(tr),Nr))}Fe(()=>(s(),o()),()=>{we(q,s()||o())}),Fe(()=>{},()=>{qa(we(p,(tr==null?void 0:tr.edgeColor)||(Or==null?void 0:Or.edgeColor)||null),"$edgeColor",n)}),Fe(()=>Vt(Be()),()=>{var Er;qa(we(P,(Er=Be().label)==null?void 0:Er.text),"$edgeLabel",n)}),Fe(()=>(Vt(Qt()),a()),()=>{we(O,Qt()||a()||null)}),Fe(()=>(Vt(mt()),u()),()=>{we(N,mt()||u()||"")}),Fe(()=>R(N),()=>{we(V,R(N)||r.label)}),Fe(()=>c(),()=>{we(W,c())}),Fe(()=>f(),()=>{we(G,f())}),Fe(()=>h(),()=>{we(ee,h())}),Fe(()=>g(),()=>{we(ae,g())}),Fe(()=>R(W),()=>{we(K,R(W).x)}),Fe(()=>R(W),()=>{we(U,R(W).y)}),Fe(()=>R(G),()=>{we(j,R(G).x)}),Fe(()=>R(G),()=>{we(J,R(G).y)}),Fe(()=>(R(j),R(K)),()=>{we(de,R(j)-R(K))}),Fe(()=>(R(J),R(U)),()=>{we(ce,R(J)-R(U))}),Fe(()=>R(de),()=>{we(Te,Math.abs(R(de)))}),Fe(()=>R(ce),()=>{we(Se,Math.abs(R(ce)))}),Fe(()=>R(Te),()=>{we(re,Math.max(30,Math.min(600,R(Te)/2)))}),Fe(()=>R(Se),()=>{we(oe,Math.max(30,Math.min(600,R(Se)/2)))}),Fe(()=>(R(q),R(ae),R(ee),R(Rt),R(kt),lt),()=>{if(R(q)&&tr.node&&Or.node){const Er=R(ae).x-R(ee).x,Nr=R(ae).y-R(ee).y;we(Rt,Nr>0),we(kt,Er>0);let Vr,Ar;if(R(Rt)){const xn=lt(tr.node.dimensions.height),Xt=R(ee).y+xn;Vr=R(ae).y-Xt}else{const xn=lt(Or.node.dimensions.height),Xt=R(ae).y+xn;Vr=R(ee).y-Xt}if(R(kt)){const xn=lt(tr.node.dimensions.width),Xt=R(ee).x+xn;Ar=R(ae).x-Xt}else{const xn=lt(Or.node.dimensions.width),Xt=R(ae).x+xn;Ar=R(ee).x-Xt}we(Et,Vr>Ar)}}),Fe(()=>(R(q),R(Et),R(Rt),R(kt),s(),o()),()=>{if(R(q)){let Er,Nr;R(Et)?(Er=R(Rt)?"south":"north",Nr=R(Rt)?"north":"south"):(Er=R(kt)?"east":"west",Nr=R(kt)?"west":"east"),s()&&Ot(vn,Er),o()&&Ot(mn,Nr)}}),Fe(()=>(y(),m()),()=>{we(ne,SC(Df[y()],m()||0))}),Fe(()=>(_(),b()),()=>{we(te,SC(Df[_()],b()||0))}),Fe(()=>(R(K),R(ne),R(re)),()=>{we(le,R(K)+R(ne).x*R(re))}),Fe(()=>(R(U),R(ne),R(oe)),()=>{we(We,R(U)+R(ne).y*R(oe))}),Fe(()=>(R(j),R(te),R(re)),()=>{we(Ne,R(j)+R(te).x*R(re))}),Fe(()=>(R(J),R(te),R(oe)),()=>{we(Re,R(J)+R(te).y*R(oe))}),Fe(()=>(R(le),R(We),R(Ne),R(Re)),()=>{we(rt,`C ${R(le)}, ${R(We)} ${R(Ne)}, ${R(Re)}`)}),Fe(()=>(Vt(Ie()),S(),R(K),R(U),Vt(Le()),R(rt),R(j),R(J)),()=>{(!Ie()||Jr==="cursor"||S()==="bezier")&&we(Un,`M ${R(K)}, ${R(U)} ${Le()?"":R(rt)} ${R(j)}, ${R(J)}`)}),Fe(()=>(R(V),R(Xe),E(),A()),()=>{R(V)&&!R(Xe)&&(E()||A()||Jr==="cursor")?(we(Xe,!0),He()):R(Xe)&&!E()&&!A()&&Jr!=="cursor"&&(we(Xe,!1),cancelAnimationFrame(Pm))}),Fe(()=>(Vt(Ie()),S(),R(K),R(U),y(),R(j),R(J),_(),Vt(Br()),EC),()=>{if(Ie()&&Jr!=="cursor"&&!(S()&&S()==="bezier")){const Er={x:R(K),y:R(U),direction:Df[y()]},Nr={x:R(j),y:R(J),direction:Df[_()]},Vr=WQ(Er,Nr,MQ),Ar=(xn,Xt,pi)=>{if(Xt<Vr.length-1){const wi=yQ(xn,Vr[Xt+1]);return _Q(pi,wi)}return""};we(Un,Vr.reduce((xn,Xt,pi)=>{const wi=Math.sign(Xt.x),qi=Math.sign(Xt.y);let Ze=Xt.x,gt=Xt.y,ht="";if(Br()){const dt=Vr[pi+1]||{x:0,y:0},Ct=Vr[pi-1]||{x:0,y:0},rr=Ud(Xt.x,dt.x,Br()),Hr=Ud(dt.y,Xt.y,Br()),cn=Ud(Ct.x,Xt.x,Br()),Gr=Ud(Ct.y,Xt.y,Br()),yn=Math.min(cn,Gr),Bn=Math.min(rr,Hr);Xt.x?Ze=Xt.x-(Bn+yn)*wi:gt=Xt.y-(Bn+yn)*qi,ht=Ar(Xt,pi,Bn)}return EC(xn,Ze,gt,ht)},`M ${R(K)}, ${R(U)}`))}}),Fe(()=>{},()=>{qa(we(Ve,tr.node.zIndex||0),"$sourceZIndex",n)}),Fe(()=>{},()=>{qa(we(L,Or.node.zIndex||0),"$targetZIndex",n)}),Fe(()=>(T(),I()),()=>{we(B,Math.max(T(),I()))}),Fe(()=>(R(B),T(),I()),()=>{we(H,Ce==="all"?1e5:Ce?R(B):Ae===!0?R(B)-1:Ae==="source"?T()-1:Ae==="target"?I()-1:0)}),Qi(),qn();var Tt=vr(),zt=Gt(Tt);{var an=Er=>{var Nr=Iee();let Vr;var Ar=$t(Nr);{var xn=ht=>{var dt=Tee(),Ct=$t(dt);pt(Ct,"id",Jr+"-end-arrow");var rr=$t(Ct);let Hr;var cn=xt(Ct);pt(cn,"id",Jr+"-start-arrow");var Gr=$t(cn);let yn;Ht(()=>{Hr=Rr(rr,"",Hr,{"--prop-edge-color":R(O)}),yn=Rr(Gr,"",yn,{"--prop-edge-color":R(O)})}),nt(ht,dt)};lr(Ar,ht=>{(be()||je())&&ht(xn)})}var Xt=xt(Ar);pt(Xt,"id",Jr+"-target");let pi,wi;wu(Xt,ht=>we(On,ht),()=>R(On));var qi=xt(Xt);Xr(qi,t,"default",{get path(){return R(Un)},destroy:yt,get hovering(){return R(Lt)}},ht=>{var dt=Pee();pt(dt,"id",Jr);let Ct,rr;Ht(Hr=>{Ct=Cn(dt,0,"edge svelte-ppcocz",null,Ct,Hr),pt(dt,"d",R(Un)),pt(dt,"marker-end",je()==="arrow"?`url(#${Jr+"-end-arrow"})`:""),pt(dt,"marker-start",be()==="arrow"?`url(#${Jr+"-start-arrow"})`:""),rr=Rr(dt,"",rr,{"--prop-edge-color":R(O),"--prop-stroke-width":yr()?yr()+"px":null})},[()=>({animate:ct()})],hn),nt(ht,dt)});var Ze=xt(qi);{var gt=ht=>{var dt=Ree(),Ct=$t(dt),rr=$t(Ct);Xr(rr,t,"label",{destroy:yt,get hovering(){return R(Lt)}},Hr=>{var cn=Cee();let Gr;var yn=$t(cn);Ht(()=>{Gr=Rr(cn,"",Gr,{"--prop-label-color":cr(),"--prop-label-text-color":Lr()}),Eu(yn,R(N))}),nt(Hr,cn)}),Ht(()=>{pt(dt,"x",R(di).x),pt(dt,"y",R(di).y)}),nt(ht,dt)};lr(Ze,ht=>{R(V)&&ht(gt)})}wu(Nr,ht=>we(at,ht),()=>R(at)),Ht(ht=>{Vr=Rr(Nr,"",Vr,{"z-index":R(H)}),pi=Cn(Xt,0,"target svelte-ppcocz",null,pi,ht),pt(Xt,"d",R(Un)),wi=Rr(Xt,"",wi,{cursor:it()||R(Lt)?"pointer":"move","--prop-target-edge-color":it()||R(Lt)?bn()||null:"transparent"})},[()=>({cursor:Jr==="cursor"||!it()&&!ft()})],hn),pr("mousedown",Xt,function(...ht){var dt;(dt=it())==null||dt.apply(this,ht)}),pr("mouseenter",Xt,()=>we(Lt,!0)),pr("mouseleave",Xt,()=>we(Lt,!1)),nt(Er,Nr)};lr(zt,Er=>{tr&&Or&&Er(an)})}nt(e,Tt),FE(t,"destroy",yt);var jn=Sr({destroy:yt});return i(),jn}function RC(e,t){xr(t,!1);let r=ve(t,"edge",8);Qr("edge",r()),qn();var n=vr(),i=Gt(n);Xr(i,t,"default",{},null),nt(e,n),Sr()}let Cm;const ea=Ke(null);function Oee(e,t,r){if(t==="self")return;const n=e.parentNode;if(!n)return;n.removeChild(e);const i=document.querySelector(`#anchors-${t}-${r.id}`);i&&(i.appendChild(e),e&&r.recalculateAnchors())}var Mee=nr('<div role="button" tabindex="0"><!></div> <!> <!>',1);function Ff(e,t){xr(t,!1);const[r,n]=ii(),i=()=>Ye(ea,"$connectingFrom",r),s=()=>Ye(mt,"$nodeLevelConnections",r),o=()=>Ye(G,"$anchorsMounted",r),a=()=>Ye(R(E),"$dynamicDirection",r),u=()=>Ye(P,"$mounted",r),c=()=>Ye(W,"$nodeConnectEvent",r),f=()=>Ye(Ie,"$anchors",r),h=()=>Ye(R(S),"$connectedAnchors",r),g=()=>Ye(be,"$resizingWidth",r),y=()=>Ye(je,"$resizingHeight",r),m=()=>Ye(ct,"$rotating",r),_=()=>Ye(Te(),"$inputsStore",r),b=qe(),S=qe(),E=qe(),A=kr("dynamic"),T=kr("node"),I=kr("edgeStore"),q=kr("cursorAnchor"),p=kr("direction"),P=kr("mounted"),O=kr("graph"),N=kr("nodeStore"),V=kr("graphEdge"),W=kr("nodeConnectEvent"),G=kr("anchorsMounted"),ee=kr("flowchart")||void 0;let ae=ve(t,"bgColor",8,null),K=ve(t,"id",8,0),U=ve(t,"input",8,!1),j=ve(t,"output",8,!1),J=ve(t,"multiple",24,()=>j()?!0:!U()),de=ve(t,"dynamic",8,A||!1),ce=ve(t,"edge",8,null),Te=ve(t,"inputsStore",8,null),Se=ve(t,"key",8,null),re=ve(t,"outputStore",8,null),oe=ve(t,"connections",28,()=>[]),ne=ve(t,"edgeColor",24,()=>Ke(null)),te=ve(t,"edgeLabel",8,""),le=ve(t,"locked",8,!1),We=ve(t,"nodeConnect",8,!1),Ne=ve(t,"edgeStyle",8,null),Re=ve(t,"endStyles",24,()=>[null,null]),rt=ve(t,"invisible",8,!1),Ve=ve(t,"direction",24,()=>p==="TD"?U()?"north":"south":U()?"west":"east"),L=ve(t,"title",8,"");const B=xl(),H=xl();let X=qe(),xe=qe(!1),ue=qe(!1),Ae=qe(0),Ce=U()===j()?null:U()?"input":"output",Be=qe([]);const Le=T.edge,Ie=T.anchors,be=T.resizingWidth,je=T.resizingHeight,ct=T.rotating,mt=T.connections,ft=`A-${K()||Ie.count()+1}/${T.id}`,it=nee(O,T,ft,{x:0,y:0},{width:0,height:0},Te()||re()||null,ce()||Le||V||null,Ce,Ve(),de(),Se(),ne());Ie.add(it,it.id),Ti(()=>{var Et;R(X)&&it.recalculatePosition();const Xe=Array.from(lt(T.anchors)).reduce((Rt,[,kt])=>(kt.type==="output"&&Rt++,Rt),0);if((Et=s())!=null&&Et.length&&!U()){const Rt=[];let kt=null;s().forEach((Lt,at)=>{Lt&&(kt===null&&(kt=at),(at-kt)%Xe===0?(R(Be).push(Lt),Rt.push(null)):Rt.push(Lt))}),Ot(mt,Rt)}QJ(G,o())}),Q4(()=>{R(X)&&it.recalculatePosition()}),xh(()=>{Gn(),cancelAnimationFrame(Cm)});function Wt(Xe){var yt;I.delete("cursor");const Et={x:Xe.changedTouches[0].clientX,y:Xe.changedTouches[0].clientY},Rt=document.elementFromPoint(Et.x,Et.y);if(!Rt)return;const kt=Rt.parentElement;if(!kt)return;const Lt=kt.id,at=Lt.split("/")[1],He=(yt=N.get(at))==null?void 0:yt.anchors.get(Lt);He&&(I.delete("cursor"),yr(it,He,Xe))}function yr(Xe,Et,Rt){const kt=tr(Xe,Et);kt&&Or(),Rt.shiftKey||mn(kt)}function Qt(Xe){var Et;if("changedTouches"in Xe&&R(b)){Wt(Xe);return}if(!R(b)){if((Et=h())!=null&&Et.size&&!J()){I.delete("cursor"),Xe.shiftKey||mn(!1);return}i()&&bn(Xe)}}function cr(Xe){var Et;if(!le()){if((Et=h())!=null&&Et.size&&!J()&&!i())return ei();if(!i())return Lr();bn(Xe)}}function Lr(){U()===j()?(Ot(ea,{anchor:it,store:null,key:null}),Br(it,q)):U()?(Ot(ea,{anchor:it,store:Te(),key:Se()}),Br(q,it)):j()&&(Ot(ea,{anchor:it,store:re(),key:null}),Br(it,q))}function Br(Xe,Et,Rt=!1){const kt={color:ne(),label:{text:te()}};Rt&&(kt.disconnect=!0),Ne()&&(kt.type=Ne()),Re()[0]&&(kt.start=Re()[0]),Re()[1]&&(kt.start=Re()[1]);const Lt=AC({source:Xe,target:Et},(Xe==null?void 0:Xe.edge)||null,kt);I.add(Lt,"cursor")}function bn(Xe){if(I.delete("cursor"),!i())return;const Et=i().anchor.type;if(i().anchor===it||Et===it.type&&Et){mn(!1);return}it.recalculatePosition();let Rt,kt;U()===j()?Et==="input"?(Rt=it,kt=i().anchor):(Rt=i().anchor,kt=it):U()?(Rt=i().anchor,kt=it):(Rt=it,kt=i().anchor),yr(Rt,kt,Xe)}function tr(Xe,Et){if(Xe===Et||lt(Xe.connected).has(it))return!1;const Rt={color:ne(),label:{text:te()}};if(ee){const Lt=Xe.node.id.slice(2),at=ee.nodeList[Lt];if(at){const He=Et.node.id.slice(2),yt=at.children.filter(Tt=>Tt.node.id===He)[0];if(yt){const Tt=yt;Rt.label={text:Tt.content}}}}Ne()&&(Rt.type=Ne()),Re()[0]&&(Rt.start=Re()[0]),Re()[1]&&(Rt.start=Re()[1]);const kt=AC({source:Xe,target:Et},(Xe==null?void 0:Xe.edge)||null,Rt);return!Xe.node||!Et.node?!1:(I.add(kt,new Set([Xe,Et,Xe.node,Et.node])),!0)}function Or(){if(U()&&i()&&i().store)_()&&Se()&&Te()&&typeof Te().set=="function"&&typeof Te().update=="function"&&Xf(Te(),Pn(_)[Se()]=i().store,Pn(_));else if(j()&&i()&&i().store){const{store:Xe,key:Et}=i();Xe&&Et&&typeof Xe.update=="function"&&Xe.update(Rt=>(re()&&(Rt[Et]=re()),Rt))}}function vn(){_()&&Se()&&_()[Se()]&&Xf(Te(),Pn(_)[Se()]=Ke(lt(_()[Se()])),Pn(_))}function mn(Xe){(Xe||!c())&&(Ot(ea,null),Ot(W,null))}function pn(){R(xe)&&(R(X)&&it.recalculatePosition(),Cm=requestAnimationFrame(pn))}function Gn(){I.delete("cursor"),I.match(it).forEach(Et=>I.delete(Et)),mn(!1),vn()}function ei(){if(lt(it.connected).size>1)return;const Xe=Array.from(lt(it.connected))[0];if(Xe.type!=="input")if(Gn(),Xe.type==="output"){Br(Xe,q,!0),vn();const Et=Xe.store;Ot(ea,{anchor:Xe,store:Et,key:null})}else Br(Xe,q,!0),Ot(ea,{anchor:Xe,store:null,key:null})}function Bt(){R(Be).forEach((Xe,Et)=>{if(!Xe)return;Fn(Xe)&&oe(oe()[Et]=null,!0)}),we(Be,R(Be).filter(Xe=>Xe!==null))}function Ft(){oe().forEach(Xe=>{Xe&&Fn(Xe)})}function zr(Xe){const Et=`N-${Xe[0]}`,Rt=N.get(Et);if(!Rt)return;const kt=Rt.anchors.get(`A-${Xe[1]}/N-${Xe[0]}`);if(!kt)return;const Lt=I.match(it,kt);Lt&&I.delete(Lt[0])}const Fn=Xe=>{let Et,Rt,kt=null;Array.isArray(Xe)?(Et=Xe[0].toString(),Rt=Xe[1].toString()):(Et=Xe.toString(),Rt=null);const Lt=`N-${Et}`,at=N.get(Lt);if(!at)return!1;if(Rt){const He=`A-${Rt}/${Lt}`;kt=at.anchors.get(He)||null}else{const He=lt(at.anchors),yt=Array.from(He.values());if(!yt.length)return!1;kt=yt.reduce((Tt,zt)=>!Tt&&zt.type==="output"?null:zt.type==="output"?Tt:!Tt||lt(zt.connected).size<lt(Tt.connected).size?zt:Tt,null)}if(!kt)return!1;if(tr(it,kt),kt.store&&(Te()||re())){if(U()&&kt.type==="output")_()&&Se()&&Te()&&typeof Te().set=="function"&&typeof Te().update=="function"&&Xf(Te(),Pn(_)[Se()]=kt.store,Pn(_));else if(j()&&kt.type==="input"){const{store:He,inputKey:yt}=kt;He&&yt&&typeof He.update=="function"&&He.update(Tt=>(re()&&(Tt[yt]=re()),Tt))}}return!0};Fe(()=>i(),()=>{var Xe;we(b,((Xe=i())==null?void 0:Xe.anchor)===it)}),Fe(()=>{},()=>{qa(we(S,it&&it.connected),"$connectedAnchors",r)}),Fe(()=>{},()=>{qa(we(E,it==null?void 0:it.direction),"$dynamicDirection",r)}),Fe(()=>(Vt(de()),R(X),a()),()=>{de()&&R(X)&&Oee(R(X),a(),T)}),Fe(()=>(u(),Vt(oe())),()=>{u()===N.count()&&oe().length&&Ft()}),Fe(()=>(Vt(We()),c()),()=>{We()&&c()&&Qt(c())}),Fe(()=>(u(),R(Be)),()=>{u()===N.count()&&R(Be).length&&Bt()}),Fe(()=>(R(X),f(),h(),a()),()=>{R(X)&&(f(),h(),a(),it.recalculatePosition())}),Fe(()=>(R(xe),g(),y(),m()),()=>{!R(xe)&&(g()||y()||m())?(we(xe,!0),pn()):!g()&&!y()&&R(xe)&&!m()&&(we(xe,!1),cancelAnimationFrame(Cm))}),Fe(()=>(h(),R(Ae)),()=>{if(h()){if(h().size<R(Ae))H("disconnection",{node:T,anchor:it});else if(h().size>R(Ae)){const Xe=Array.from(h()),Et=Xe[Xe.length-1];B("connection",{node:T,anchor:it,connectedNode:Et.node,connectedAnchor:Et})}we(Ae,h().size)}}),Qi(),qn();var wn=Mee(),jr=Gt(wn);let $n;var hi=$t(jr);Xr(hi,t,"default",{get linked(){var Xe;return((Xe=h())==null?void 0:Xe.size)>=1},get hovering(){return R(ue)},get connecting(){return R(b)}},Xe=>{var Et=vr(),Rt=Gt(Et);{var kt=Lt=>{const at=hn(()=>{var He;return((He=h())==null?void 0:He.size)>=1});Eee(Lt,{get output(){return j()},get input(){return U()},get connecting(){return R(b)},get hovering(){return R(ue)},get bgColor(){return ae()},get connected(){return R(at)}})};lr(Rt,Lt=>{rt()||Lt(kt)})}nt(Xe,Et)}),wu(jr,Xe=>we(X,Xe),()=>R(X));var Jr=xt(jr,2);ds(Jr,1,()=>Array.from(h()),Xe=>Xe.id,(Xe,Et,Rt,kt)=>{var Lt=vr();const at=hn(()=>I.fetch(it,R(Et)));var He=Gt(Lt);{var yt=Tt=>{const zt=hn(()=>R(at).component);RC(Tt,{get edge(){return R(at)},children:(an,jn)=>{var Mt=vr(),en=Gt(Mt);Xr(en,t,"edge",{},Er=>{var Nr=vr(),Vr=Gt(Nr);{var Ar=Xt=>{R(zt)(Xt,{})},xn=Xt=>{XS(Xt,{})};lr(Vr,Xt=>{R(zt)?Xt(Ar):Xt(xn,!1)})}nt(Er,Nr)}),nt(an,Mt)},$$slots:{default:!0}})};lr(He,Tt=>{R(at)&&R(at).source===it&&Tt(yt)})}nt(Xe,Lt)});var Un=xt(Jr,2);{var On=Xe=>{var Et=vr();const Rt=hn(()=>I.get("cursor"));var kt=Gt(Et);{var Lt=at=>{const He=hn(()=>R(Rt).component);RC(at,{get edge(){return R(Rt)},children:(yt,Tt)=>{var zt=vr(),an=Gt(zt);Xr(an,t,"edge",{},jn=>{var Mt=vr(),en=Gt(Mt);{var Er=Vr=>{R(He)(Vr,{})},Nr=Vr=>{XS(Vr,{})};lr(en,Vr=>{R(He)?Vr(Er):Vr(Nr,!1)})}nt(jn,Mt)}),nt(yt,zt)},$$slots:{default:!0}})};lr(kt,at=>{R(Rt)&&at(Lt)})}nt(Xe,Et)};lr(Un,Xe=>{R(b)&&Xe(On)})}Ht(Xe=>{pt(jr,"id",it==null?void 0:it.id),$n=Cn(jr,1,"anchor-wrapper svelte-bazd6o",null,$n,Xe),pt(jr,"title",L()||"")},[()=>({locked:le()})],hn),pr("mouseenter",jr,()=>we(ue,!0)),pr("mouseleave",jr,()=>we(ue,!1)),pr("mousedown",jr,ks(ro(cr))),pr("mouseup",jr,ro(Qt)),pr("touchstart",jr,ks(ro(cr))),pr("touchend",jr,ro(Qt)),nt(e,wn),FE(t,"disconnect",zr);var di=Sr({disconnect:zr});return n(),di}var kee=nr("<!> <!>",1),Lee=nr("<div></div> <div></div>",1),Nee=nr('<div><!> <p class="svelte-j5bq7k"> </p> <!></div>');function qee(e,t){xr(t,!1);const[r,n]=ii(),i=()=>Ye(m,"$borderRadius",r),s=()=>Ye(b,"$inputs",r),o=()=>Ye(S,"$outputs",r),a=()=>Ye(_,"$textColor",r),u=()=>Ye(y,"$label",r),c=()=>Ye(E,"$resizable",r),f=kr("dynamic"),h=kr("node");let g=ve(t,"selected",8);const y=h.label,m=h.borderRadius,_=h.textColor,b=h.inputs,S=h.outputs,E=h.resizable,A=lt(h.direction);let T=A==="TD",I=A==="TD",q=A!=="TD",p=A!=="TD";qn();var P=Nee();let O,N;var V=$t(P);{var W=J=>{var de=kee(),ce=Gt(de);ds(ce,1,()=>({length:s()}),gu,(Se,re)=>{Ff(Se,{$$events:{connection(oe){Tn.call(this,t,oe)},disconnection(oe){Tn.call(this,t,oe)}}})});var Te=xt(ce,2);ds(Te,1,()=>({length:o()}),gu,(Se,re)=>{Ff(Se,{$$events:{connection(oe){Tn.call(this,t,oe)},disconnection(oe){Tn.call(this,t,oe)}}})}),nt(J,de)},G=J=>{var de=Lee(),ce=Gt(de);Cn(ce,1,"input-anchors svelte-j5bq7k",null,{},{top:T,left:q}),ds(ce,5,()=>({length:s()}),gu,(Se,re)=>{Ff(Se,{input:!0,direction:T?"north":"west",$$events:{connection(oe){Tn.call(this,t,oe)},disconnection(oe){Tn.call(this,t,oe)}}})});var Te=xt(ce,2);Cn(Te,1,"output-anchors svelte-j5bq7k",null,{},{bottom:I,right:p}),ds(Te,5,()=>({length:o()}),gu,(Se,re)=>{Ff(Se,{output:!0,direction:T?"south":"east",$$events:{connection(oe){Tn.call(this,t,oe)},disconnection(oe){Tn.call(this,t,oe)}}})}),nt(J,de)};lr(V,J=>{f?J(W):J(G,!1)})}var ee=xt(V,2);let ae;var K=$t(ee),U=xt(ee,2);{var j=J=>{xee(J,{width:!0,height:!0,rotation:!0})};lr(U,J=>{c()&&J(j)})}Ht(J=>{O=Cn(P,1,"default-node svelte-j5bq7k",null,O,J),N=Rr(P,"",N,{"border-radius":`${i()??""}px`}),ae=Rr(ee,"",ae,{color:a()}),Eu(K,u())},[()=>({selected:g()})],hn),nt(e,P),Sr(),n()}function VE(e,t){const r=qE(t);xr(t,!1);const[n,i]=ii(),s=()=>Ye(R(a),"$nodePosition",n),o=()=>Ye(Te,"$nodes",n),a=qe(),u=kr("graph"),c=kr("group");let f=ve(t,"position",28,()=>({x:0,y:0})),h=ve(t,"drop",8,!1),g=ve(t,"dimensions",8,null),y=ve(t,"id",8,0),m=ve(t,"bgColor",8,null),_=ve(t,"borderRadius",8,null),b=ve(t,"borderColor",8,null),S=ve(t,"borderWidth",8,null),E=ve(t,"selectionColor",8,null),A=ve(t,"textColor",8,null),T=ve(t,"resizable",8,!1),I=ve(t,"label",8,""),q=ve(t,"inputs",8,1),p=ve(t,"outputs",8,1),P=ve(t,"width",8,null),O=ve(t,"height",8,null),N=ve(t,"TD",8,!1),V=ve(t,"LR",8,!1),W=ve(t,"zIndex",8,1),G=ve(t,"editable",8,!0),ee=ve(t,"locked",8,!1),ae=ve(t,"rotation",8,0),K=ve(t,"edge",8,null),U=ve(t,"connections",24,()=>[]),j=ve(t,"useDefaults",8,!1),J=ve(t,"center",8,!1),de=ve(t,"dynamic",8,!1),ce=ve(t,"title",8,"");const Te=u.nodes;Qr("dynamic",de());let Se=qe(),re=qe(!0);Ti(()=>{const Re=N()?"TD":V()?"LR":u.direction,rt=u.groupBoxes.get(c),Ve=u.nodes.count()+1;we(re,!r.default),(r.anchorWest||r.anchorEast||r.anchorNorth||r.anchorSouth)&&we(re,!1);const L=g()?g():P()||O()?{width:P()||O()||200,height:O()||P()||100}:R(re)?{width:200,height:100}:{width:0,height:0},B={id:y()||Ve,position:h()==="cursor"?{x:lt(u.cursor).x,y:lt(u.cursor).y}:rt?{x:lt(rt.position).x+f().x,y:lt(rt.position).y+f().y}:f(),dimensions:L,editable:G()||u.editable,label:I(),group:c,resizable:T(),inputs:q(),outputs:p(),zIndex:W(),direction:Re,locked:ee(),rotation:ae()};U().length&&(B.connections=U()),S()&&(B.borderWidth=S()),_()&&(B.borderRadius=_()),b()&&(B.borderColor=b()),E()&&(B.selectionColor=E()),A()&&(B.textColor=A()),m()&&(B.bgColor=m()),K()&&(B.edge=K()),we(Se,ZQ(B)),rt&&u.groups.update(H=>{const X=lt(H[c].nodes);return H[c].nodes.set(new Set([...X,R(Se)])),H}),u.nodes.add(R(Se),R(Se).id)}),xh(()=>{u.nodes.delete(R(Se).id)});function oe(Re){R(Se)&&R(Se).connections.set([Re])}function ne(Re){if(!R(Se))return;(Array.isArray(Re)?Re:[Re]).forEach(Ve=>{const[L,B]=Array.isArray(Ve)?Ve:[Ve,null],H=`N-${L}`,X=u.nodes.get(H);if(!X)return;let xe=null;const ue=B?`A-${B}/${H}`:null;ue&&(xe=X.anchors.get(ue));const Ae=u.edges.match(R(Se),X,xe);Ae.length&&u.edges.delete(Ae[Ae.length-1])})}Qr("connect",oe),Qr("disconnect",ne);let te=qe(f());Fe(()=>(R(Se),Vt(U())),()=>{R(Se)&&R(Se).connections.set(U())}),Fe(()=>(R(Se),Vt(m())),()=>{R(Se)&&R(Se).bgColor.set(m())}),Fe(()=>(R(Se),Vt(I())),()=>{R(Se)&&R(Se).label.set(I())}),Fe(()=>(R(Se),Vt(A())),()=>{R(Se)&&R(Se).textColor.set(A())}),Fe(()=>(R(Se),Vt(b())),()=>{R(Se)&&R(Se).borderColor.set(b())}),Fe(()=>(R(Se),Vt(E())),()=>{R(Se)&&R(Se).selectionColor.set(E())}),Fe(()=>(R(Se),Vt(T())),()=>{R(Se)&&R(Se).resizable.set(T())}),Fe(()=>(R(Se),Vt(G())),()=>{R(Se)&&R(Se).editable.set(G())}),Fe(()=>(R(Se),Vt(ee())),()=>{R(Se)&&R(Se).locked.set(ee())}),Fe(()=>(R(Se),Vt(q())),()=>{R(Se)&&R(Se).inputs.set(q())}),Fe(()=>(R(Se),Vt(p())),()=>{R(Se)&&R(Se).outputs.set(p())}),Fe(()=>(R(Se),Vt(W())),()=>{R(Se)&&R(Se).zIndex.set(W())}),Fe(()=>R(Se),()=>{var Re;qa(we(a,R(Se)&&((Re=R(Se))==null?void 0:Re.position)),"$nodePosition",n)}),Fe(()=>(R(Se),R(te),s(),Vt(f())),()=>{if(R(Se)){const{x:Re,y:rt}=R(te),{x:Ve,y:L}=s(),{x:B,y:H}=f();(B!==Ve||H!==L)&&(B!==Re||H!==rt?(we(te,f()),R(Se).position.set(f())):(we(te,s()),f(s())))}}),Fe(()=>(R(Se),Vt(q())),()=>{R(Se)&&R(Se).inputs.set(q())}),Fe(()=>(R(Se),Vt(p())),()=>{R(Se)&&R(Se).outputs.set(p())}),Qi(),qn();var le=vr(),We=Gt(le);{var Ne=Re=>{const rt=hn(()=>J()||h()==="center"),Ve=hn(()=>!!g()||!!P()||!!O()||R(re)||!1);vee(Re,{get node(){return R(Se)},get center(){return R(rt)},get isDefault(){return R(re)},get useDefaults(){return j()},get dimensionsProvided(){return R(Ve)},get nodeStore(){return u.nodes},get locked(){return u.locked},get groups(){return u.groups},get title(){return ce()},get maxZIndex(){return u.maxZIndex},get centerPoint(){return u.center},get cursor(){return u.cursor},get activeGroup(){return u.activeGroup},get editing(){return u.editing},get initialNodePositions(){return u.initialNodePositions},$$events:{nodeClicked(L){Tn.call(this,t,L)},nodeMount(L){Tn.call(this,t,L)},nodeReleased(L){Tn.call(this,t,L)},duplicate(L){Tn.call(this,t,L)}},children:ME,$$slots:{default:(L,B)=>{const H=hn(()=>B.destroy),X=hn(()=>B.selected),xe=hn(()=>B.grabHandle);var ue=vr(),Ae=Gt(ue);Xr(Ae,t,"default",{get selected(){return R(X)},get grabHandle(){return R(xe)},disconnect:ne,connect:oe,get node(){return R(Se)},get destroy(){return R(H)}},Ce=>{var Be=vr(),Le=Gt(Be);{var Ie=be=>{qee(be,{get selected(){return R(X)},$$events:{connection(je){Tn.call(this,t,je)},disconnection(je){Tn.call(this,t,je)}}})};lr(Le,be=>{R(re)&&be(Ie)})}nt(Ce,Be)}),nt(L,ue)},anchorWest:(L,B)=>{var H=vr(),X=Gt(H);Xr(X,t,"anchorWest",{},null),nt(L,H)},anchorEast:(L,B)=>{var H=vr(),X=Gt(H);Xr(X,t,"anchorEast",{},null),nt(L,H)},anchorNorth:(L,B)=>{var H=vr(),X=Gt(H);Xr(X,t,"anchorNorth",{},null),nt(L,H)},anchorSouth:(L,B)=>{var H=vr(),X=Gt(H);Xr(X,t,"anchorSouth",{},null),nt(L,H)}}})};lr(We,Re=>{R(Se)&&o().get(R(Se).id)&&Re(Ne)})}nt(e,le),Sr(),i()}var Dee=nr('<div class="editor svelte-1nv0yho"><span style="color:white; font-size:45px">Editor</span> <button style="position:absolute; top:10px;right:10px;">X</button> <!> <button>Delete Node</button> <button>Resize Node</button></div>');function Fee(e,t){xr(t,!1);const r=qe();let n=ve(t,"editing",8);const i=kr("graph");Qr("graph",i),Qr("textStore",n().label),Qr("colorStore",n().bgColor);let s=qe({x:150,y:50});function o(c){c.preventDefault(),we(s,{x:c.clientX,y:c.clientY}),i.editing.set(n())}function a(){i.nodes.delete(n().id),i.editing.set(null)}function u(){const c=n().id,f=i.nodes.get(c);if(f){const h=f.dimensions.width,g=f.dimensions.height,y=prompt("Enter new width (for example:250):",h?h.toString():""),m=prompt("Enter new height (for example:200):",g?g.toString():"");if(y===null||m===null)return;f.dimensions.width.set(parseInt(y,10)||0),f.dimensions.height.set(parseInt(m,10)||0),f.resizingWidth.set(!0),f.resizingHeight.set(!0)}}Fe(()=>{},()=>{we(r,i.cursor)}),Qi(),qn(),VE(e,{zIndex:1/0,get position(){return R(s)},bgColor:"white",id:"editor",children:(c,f)=>{var h=Dee(),g=xt($t(h),2),y=xt(g,2);hee(y,{placeholder:"Node Label"});var m=xt(y,2),_=xt(m,2);pr("click",g,()=>i.editing.set(null)),pr("click",m,a),pr("click",_,u),pr("contextmenu",h,o),nt(c,h)},$$slots:{default:!0}}),Sr()}var Bee=nr("<!> <!>",1),zee=nr('<section role="presentation" class="svelvet-wrapper svelte-13nq7cv"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></section>');function Vee(e,t){xr(t,!1);const[r,n]=ii(),i=()=>Ye(L,"$groups",r),s=()=>Ye(rt,"$dimensionsStore",r),o=()=>Ye(Ae,"$nodeBounds",r),a=()=>Ye(We,"$graphDOMElement",r),u=()=>Ye(hs,"$initialClickPosition",r),c=()=>Ye(H,"$selected",r),f=()=>Ye(X,"$activeGroup",r),h=()=>Ye(ea,"$connectingFrom",r),g=()=>Ye(HS,"$touchDistance",r),y=()=>Ye(Re,"$scale",r),m=()=>Ye(Ve,"$translation",r),_=()=>Ye(ue,"$editing",r),b=qe();let S=ve(t,"graph",8),E=ve(t,"width",8),A=ve(t,"height",8),T=ve(t,"minimap",12,!1),I=ve(t,"controls",12,!1),q=ve(t,"toggle",8,!1),p=ve(t,"fixedZoom",8,!1),P=ve(t,"pannable",8,!0),O=ve(t,"disableSelection",8,!1),N=ve(t,"ZOOM_INCREMENT",8,.1),V=ve(t,"PAN_INCREMENT",8,50),W=ve(t,"PAN_TIME",8,250),G=ve(t,"MAX_SCALE",8,3),ee=ve(t,"MIN_SCALE",8,.2),ae=ve(t,"selectionColor",8),K=ve(t,"backgroundExists",8),U=ve(t,"fitView",8,!1),j=ve(t,"trackpadPan",8),J=ve(t,"modifier",8),de=ve(t,"theme",12,"light"),ce=ve(t,"title",8),Te=ve(t,"drawer",12,!1),Se=ve(t,"contrast",8,!1);console.log("Initial Graph drawer prop:",Te());let re;const oe=xl(),ne={},te=Ke(!1),le=Ke(0),We=Ke(null),Ne=S().cursor,Re=S().transforms.scale,rt=S().dimensions,Ve=S().transforms.translation,L=S().groups,B=S().groupBoxes,H=i().selected.nodes,X=S().activeGroup,xe=S().initialNodePositions,ue=S().editing,Ae=S().bounds.nodeBounds;let Ce=0,Be=1,Le=qe({x:0,y:0,top:0,left:0}),Ie=qe(!1),be=qe(!1),je=qe(!1),ct=qe(!1),mt=!1,ft=qe(!1),it,Wt=qe(null),yr=qe(null),Qt=qe(null),cr=qe(null),Lr=qe(null);const Br={id:null,position:S().cursor,offset:Ke({x:0,y:0}),connected:Ke(new Set),dynamic:Ke(!1),edge:null,edgeColor:Ke(null),direction:Ke("self"),inputKey:null,type:"output",moving:Cp(!1),store:null,mounted:Ke(!0),rotation:Cp(0),node:{zIndex:Ke(1/0),rotating:Ke(!1),position:S().cursor,dimensions:{width:Ke(0),height:Ke(0)}}};Qr("graphDOMElement",We),Qr("cursorAnchor",Br),Qr("duplicate",te),Qr("graph",S()),Qr("transforms",S().transforms),Qr("dimensions",S().dimensions),Qr("locked",S().locked),Qr("groups",S().groups),Qr("bounds",S().bounds),Qr("edgeStore",S().edges),Qr("nodeStore",S().nodes),Qr("mounted",le),Ti(()=>{console.log("Graph component mounted with drawer1:",Te()),Gn()});async function bn(){await TJ(),io.set(!0);const{x:Ze,y:gt,scale:ht}=KQ(it,o());Ze!==null&&gt!==null&&ht!==null&&(S().transforms.scale.set(ht),Ve.set({x:Ze,y:gt})),io.set(!1),we(ft,!0)}async function tr(){we(yr,(await If(async()=>{const{default:Ze}=await Promise.resolve().then(()=>ate);return{default:Ze}},void 0,import.meta.url)).default)}async function Or(){we(Wt,(await If(async()=>{const{default:Ze}=await Promise.resolve().then(()=>hte);return{default:Ze}},void 0,import.meta.url)).default)}async function vn(){we(Qt,(await If(async()=>{const{default:Ze}=await import("./Controls-B8yG8pDc.js");return{default:Ze}},__vite__mapDeps([0,1]),import.meta.url)).default)}async function mn(){we(cr,(await If(async()=>{const{default:Ze}=await import("./DrawerController-B014PFWq.js");return{default:Ze}},__vite__mapDeps([2,1,3]),import.meta.url)).default)}async function pn(){we(Lr,(await If(async()=>{const{default:Ze}=await import("./ContrastTheme-zMIm3pze.js");return{default:Ze}},[],import.meta.url)).default)}function Gn(){if(!a())return;const Ze=a().getBoundingClientRect();it={top:Ze.top,left:Ze.left,bottom:Ze.bottom,right:Ze.right,width:Ze.width,height:Ze.height},S().dimensions.set(it),U()==="resize"&&bn()}function ei(Ze){var ht,dt;if(R(be)){const rr=`${mQ()}/${S().id}`,Hr=lt(Ne),cn=Hr.x-u().x,Gr=Hr.y-u().y,yn=Math.min(u().y,u().y+Gr),Bn=Math.min(u().x,u().x+cn),gi={width:Ke(Math.abs(cn)),height:Ke(Math.abs(Gr))},zo=Ke({x:Bn,y:yn}),xs={group:Ke(rr),dimensions:gi,position:zo,color:Ke(lQ()),moving:Ke(!1)};B.add(xs,rr),Array.from(c()).forEach(Hn=>{Hn.group.set(rr)}),L.update(Hn=>{const _a={parent:Ke(xs),nodes:Ke(new Set([...c(),xs]))};return Hn[rr]=_a,Hn}),Ot(H,new Set),we(be,!1),we(Ie,!1)}f()&&Array.from(lt(i()[f()].nodes)).forEach(rr=>{const Hr=dp(lt(rr.position).x,lt(rr.position).y);rr.position.set(Hr),rr.moving.set(!1)});const gt=S().edges.get("cursor");gt&&(S().edges.delete("cursor"),gt.disconnect||oe("edgeDrop",{cursor:lt(Ne),source:{node:(ht=h())==null?void 0:ht.anchor.node.id.slice(2),anchor:(dt=h())==null?void 0:dt.anchor.id.split("/")[0].slice(2)}})),Ot(X,null),Ot(hs,{x:0,y:0}),Ot(xe,[]),we(Ie,!1),we(ct,!1),Ot(io,!1),Ze.shiftKey||ea.set(null),Yc(Le,R(Le).y=0),Yc(Le,R(Le).x=0)}function Bt(Ze){if(!P()&&!(Ze.shiftKey||Ze.metaKey)||Ze.button===2)return;a()&&a().focus();const{clientX:gt,clientY:ht}=Ze;if(Ot(hs,lt(Ne)),Ze.shiftKey||Ze.metaKey){Ze.preventDefault(),we(Ie,!0);const{top:dt,left:Ct}=R(b);Yc(Le,R(Le).y=ht-dt),Yc(Le,R(Le).x=gt-Ct),Yc(Le,R(Le).top=dt),Yc(Le,R(Le).left=Ct),Ze.shiftKey&&Ze.metaKey?we(be,!0):we(be,!1),Ze.metaKey&&!Ze.shiftKey?we(je,!0):we(je,!1)}else we(ct,!0),Ot(H,new Set),Ot(H,c())}function Ft(Ze){Ot(H,new Set),Ot(H,c()),Ot(hs,lt(Ne)),we(ct,!0),Ze.touches.length===2&&(Fn(),Ce=g(),Be=y())}function zr(){we(ct,!1),mt=!1}function Fn(){mt||(mt=!0,re=requestAnimationFrame(wn))}function wn(){if(!mt){cancelAnimationFrame(re);return}const gt=g()/Ce;Ot(Re,Be*gt),re=requestAnimationFrame(wn)}function jr(Ze){const{key:gt,code:ht}=Ze,dt=Ze.target;if(!(dt.tagName=="INPUT"||dt.tagName=="TEXTAREA")){if(ht==="KeyA"&&Ze[`${J()}Key`]){const Ct=S().nodes.getAll().filter(rr=>!lt(rr.locked));Ot(H,new Set(Ct))}else if(CC(gt))di(gt,Ze);else if(gt==="=")PC(-1,S().dimensions,S().transforms,N());else if(gt==="-")PC(1,S().dimensions,S().transforms,N());else if(gt==="0")bn();else if(gt==="Control")i().selected.nodes.set(new Set);else if(ht==="KeyD"&&Ze[`${J()}Key`])te.set(!0),setTimeout(()=>{te.set(!1)},100);else if(gt==="Tab"&&(Ze.altKey||Ze.ctrlKey))hi();else if(gt==="l")de(de()==="light"?"dark":"light");else if(gt==="d")Te(!Te());else if(gt==="m")T(!T());else if(gt==="c")I(!I());else if(gt==="e"){const Ct=Array.from(c())[0];S().editing.set(Ct)}else return;Ze.preventDefault()}}function $n(Ze){var Gr;Ze.preventDefault();const gt=(Gr=a())==null?void 0:Gr.getBoundingClientRect();if(!gt)return;const ht=Ze.clientX-gt.left,dt=Ze.clientY-gt.top,{x:Ct,y:rr}=dp(ht,dt);if(console.log(`Dropped Node at Snapped Position: (${Ct}, ${rr})`),!cn)return;const Hr={id:`node-${Date.now()}`,rotation:Ke(0),position:Ke({x:Ct,y:rr}),moving:Ke(!1),label:Ke("New Node"),dimensions:{width:Ke(200),height:Ke(100)},inputs:Ke(2),outputs:Ke(2),anchors:Ke([]),group:Ke(null),collapsed:Ke(!1),resizingWidth:Ke(!1),resizingHeight:Ke(!1),rotating:Ke(!1),editable:Ke(!0),locked:Ke(!1),recalculateAnchors:yn=>{},resizable:Ke(!0),zIndex:Ke(1),edge:null,direction:Ke("TD"),borderRadius:Ke(5),borderWidth:Ke(1),connections:Ke([]),bgColor:Ke("#007bff"),borderColor:Ke("#000"),selectionColor:Ke("#ff0000"),textColor:Ke("#fff")};let cn=null;S().nodes.add(Hr,Hr.id),cn=null}function hi(){const Ze=S().nodes.getAll(),gt=Ze.findIndex(dt=>c().has(dt)),ht=gt+1;c().delete(Ze[gt]),c().add(Ze[ht])}function Jr(Ze){const{key:gt}=Ze;CC(gt)?(clearInterval(ne[gt]),delete ne[gt]):gt==="Shift"&&ea.set(null)}function Un(Ze){if(p())return;const gt=Ze.shiftKey?.15:1,{clientX:ht,clientY:dt,deltaY:Ct}=Ze,rr=m(),Hr={x:ht,y:dt};if((j()||Ze.metaKey)&&Ct%1===0){Ot(Ve,{x:Xf(Ve,Pn(m).x-=Ze.deltaX,Pn(m)),y:Xf(Ve,Pn(m).y-=Ze.deltaY,Pn(m))});return}if(y()>=G()&&Ct<0||y()<=ee()&&Ct>0)return;const cn=Math.min(.009*gt*Math.abs(Ct),.08),Gr=nV(y(),Math.sign(Ct),cn),yn=rV(y(),Gr,rr,Hr,it);Re.set(Gr),Ve.set(yn)}function On(Ze){Ze.preventDefault()}function di(Ze,gt){const ht=gt.shiftKey?2:1,dt=Ze==="ArrowLeft"||Ze==="ArrowUp"?1:-1,Ct=Ze==="ArrowLeft"||Ze==="ArrowRight",rr=Ct?m().x:m().y,Hr=rr+dt*V()*ht;if(!ne[Ze]){const cn=performance.now();let Gr=setInterval(()=>{const yn=performance.now()-cn;if(c().size===0){const Bn=rr+(Hr-rr)*(yn/W());Ve.set({x:Ct?Bn:m().x,y:Ct?m().y:Bn})}else{const Bn={x:Ct?-dt*2:0,y:Ct?0:-dt*2};Array.from(c()).forEach(gi=>{const zo=lt(gi.position);let xs;const Hn=lt(gi.group),_a=lt(S().groupBoxes);if(Hn&&(xs=_a.get(Hn)),xs){const ts=lt(gi.dimensions.width),ba=lt(gi.dimensions.height),Vo=aV(xs,ts,ba);oV(zo,Bn,gi.position,Vo)}else{const ts={x:zo.x+Bn.x,y:zo.y+Bn.y},ba=dp(ts.x,ts.y);gi.position.set(ba)}})}},2);ne[Ze]=Gr}}Fe(()=>s(),()=>{we(b,s())}),Fe(()=>Vt(de()),()=>{de()&&document.documentElement.setAttribute("svelvet-theme",de())}),Fe(()=>(R(ft),Vt(U())),()=>{!R(ft)&&U()&&bn()}),Fe(()=>(Vt(q()),R(Wt)),()=>{q()&&!R(Wt)&&Or()}),Fe(()=>(Vt(T()),R(yr)),()=>{T()&&!R(yr)&&tr()}),Fe(()=>(Vt(I()),R(Qt)),()=>{I()&&!R(Qt)&&vn()}),Fe(()=>(Vt(Te()),R(cr)),()=>{Te()&&!R(cr)&&mn()}),Fe(()=>(Vt(Se()),R(Lr)),()=>{Se()&&!R(Lr)&&pn()}),Fe(()=>Vt(Te()),()=>{console.log("Reactive Graph drawer prop:",Te())}),Qi(),qn();var Xe=zee();pr("touchend",il,ei),pr("mouseup",il,ei),pr("resize",il,Gn),pr("scroll",il,Gn),pt(Xe,"tabindex",0);let Et;var Rt=$t(Xe);uee(Rt,{get isMovable(){return R(ct)},children:(Ze,gt)=>{var ht=Bee(),dt=Gt(ht);{var Ct=Hr=>{Fee(Hr,{get editing(){return _()}})};lr(dt,Hr=>{_()&&Hr(Ct)})}var rr=xt(dt,2);Xr(rr,t,"default",{},null),nt(Ze,ht)},$$slots:{default:!0}});var kt=xt(Rt,2);{var Lt=Ze=>{var gt=vr(),ht=Gt(gt);Xr(ht,t,"background",{},null),nt(Ze,gt)},at=Ze=>{zQ(Ze,{})};lr(kt,Ze=>{K()?Ze(Lt):Ze(at,!1)})}var He=xt(kt,2);{var yt=Ze=>{var gt=vr(),ht=Gt(gt);Yu(ht,()=>R(yr),(dt,Ct)=>{Ct(dt,{})}),nt(Ze,gt)};lr(He,Ze=>{T()&&Ze(yt)})}var Tt=xt(He,2);{var zt=Ze=>{var gt=vr(),ht=Gt(gt);Yu(ht,()=>R(Qt),(dt,Ct)=>{Ct(dt,{})}),nt(Ze,gt)};lr(Tt,Ze=>{I()&&Ze(zt)})}var an=xt(Tt,2);{var jn=Ze=>{var gt=vr(),ht=Gt(gt);Yu(ht,()=>R(Wt),(dt,Ct)=>{Ct(dt,{})}),nt(Ze,gt)};lr(an,Ze=>{q()&&Ze(jn)})}var Mt=xt(an,2);{var en=Ze=>{var gt=vr(),ht=Gt(gt);Yu(ht,()=>R(cr),(dt,Ct)=>{Ct(dt,{})}),nt(Ze,gt)};lr(Mt,Ze=>{Te()&&Ze(en)})}var Er=xt(Mt,2);{var Nr=Ze=>{var gt=vr(),ht=Gt(gt);Yu(ht,()=>R(Lr),(dt,Ct)=>{Ct(dt,{})}),nt(Ze,gt)};lr(Er,Ze=>{Se()&&Ze(Nr)})}var Vr=xt(Er,2);Xr(Vr,t,"minimap",{},null);var Ar=xt(Vr,2);Xr(Ar,t,"drawer",{},null);var xn=xt(Ar,2);Xr(xn,t,"controls",{},null);var Xt=xt(xn,2);Xr(Xt,t,"toggle",{},null);var pi=xt(Xt,2);Xr(pi,t,"contrast",{},null);var wi=xt(pi,2);{var qi=Ze=>{wQ(Ze,{get creating(){return R(be)},get anchor(){return R(Le)},get graph(){return S()},get adding(){return R(je)},get color(){return ae()}})};lr(wi,Ze=>{R(Ie)&&!O()&&Ze(qi)})}wu(Xe,Ze=>Ot(We,Ze),()=>a()),Ht(()=>{pt(Xe,"id",S().id),pt(Xe,"title",ce()),Et=Rr(Xe,"",Et,{width:E()?E()+"px":"100%",height:A()?A()+"px":"100%",cursor:P()?"move":"default"})}),pr("wheel",Xe,ks(Un)),pr("mousedown",Xe,Hf(ks(Bt))),pr("touchend",Xe,ks(zr)),pr("touchstart",Xe,Hf(ks(Ft))),pr("keydown",Xe,jr),pr("keyup",Xe,Jr),pr("dragover",Xe,ks(On)),pr("drop",Xe,$n),nt(e,Xe),Sr(),n()}function Gee(e){e.parentNodes.forEach(s=>$ee(s));const[t,r]=Uee(e);jee(t,e),Hee(t);for(let s=0;s<10;s++){let o=!1;for(let a=0;a<=r;a++)if(t[a])for(let u=0;u<t[a].length;u++){const c=t[a][u],f=Xee(t,c,u);f&&(ec(t[a],u,f),o=!0)}if(!o)break}const n=Yee(t);for(let s=0;s<10&&Kee(t,n);s++);for(let s=0;s<2;s++){let o=!1;for(let a=0;a<=r;a++)for(let u=0;u<t[a].length;u++){const c=t[a][u],f=Wee(t,c,u);f&&(ec(t[a],u,f),o=!0)}if(!o)break}const i=[];for(let s=0;s<=r;s++)i.push(t[s]);return i}function $ee(e,t=0,r=0){const n=[],i=(s,o=0,a=0)=>{s.depth=Math.max(s.depth,o),s.nesting=Math.max(s.nesting,a),n.push(s);for(const u of s.children){const{node:c,length:f}=u;i(c,f+o,a+1)}};i(e,t,r);for(const s of n)if(s.children.length){s.nesting=s.children[0].node.nesting-1,s.depth=s.children[0].node.depth-s.children[0].length;for(const o of s.children)s.nesting=Math.min(s.nesting,o.node.nesting-1),s.depth=Math.min(s.depth,o.node.depth-o.length)}}function Uee(e){let t=0;const r={};for(const n in e.nodeList){const{depth:i,parents:s,children:o,type:a,data:u}=e.nodeList[n];t=Math.max(t,i),r[i]||(r[i]=[]);const c={id:n,label:u.content,children:[],parents:[],layer:i,type:a.trim()};u.props&&(c.propsId=u.props.trim());for(const f of s)c.parents.push(f.node.id);for(const f of o)c.children.push(f.node.id);r[i].push(c)}return[r,t]}function jee(e,t){for(const r in t.nodeList)for(const n of t.nodeList[r].children)if(n.node.depth-1>t.nodeList[r].depth){const i=t.nodeList[r].depth+1,s=n.node.depth-1,o=[];let a=0;for(let u=i;u<=s;u++){const c={id:`GHOST_${n.node.id}_${a}`,label:"",children:[],parents:[],layer:u,ignore:!0};o.push(c),a++}for(const u of n.node.parents)o[0].parents.push(u.node.id);o[o.length-1].children.push(n.node.id);for(let u=0;u<o.length-1;u++)o[u].children.push(`GHOST_${n.node.id}_${u+1}`);for(let u=s;u>=i;u--)o.length>0&&e[u].push(o[0]);for(const u of e[t.nodeList[r].depth])u.id===r&&(u.children.push(o[0].id),u.children=u.children.filter(c=>c!==n.node.id))}}function Hee(e){let t=0;for(const r in e)t=Math.max(e[r].length,t);for(const r in e)if(e[r].length<t){const n=Array.from({length:t-e[r].length},()=>({id:"NULL_NODE",children:[],parents:[],layer:parseInt(r),ignore:!0}));e[r]=e[r].concat(n)}}function IC(e,t,r){let n=0,i=0;for(const s of t.parents){for(let o=0;o<e[t.layer-1].length;o++)if(s===e[t.layer-1][o].id){n+=Math.abs(r-o);break}i++}for(const s of t.children){for(let o=0;o<e[t.layer+1].length;o++)if(s===e[t.layer+1][o].id){n+=Math.abs(r-o);break}i++}return isNaN(n/i)?0:n/i}function OC(e,t,r){let n=0,i=0;for(const s of t.parents){for(let o=0;o<e[t.layer-1].length;o++)if(s===e[t.layer-1][o].id){n+=Math.abs(r-o);break}i++}return isNaN(n/i)?0:n/i}function MC(e,t,r){let n=0,i=0;for(const s of t.children){for(let o=0;o<e[t.layer+1].length;o++)if(s===e[t.layer+1][o].id){n+=Math.abs(r-o);break}i++}return isNaN(n/i)?0:n/i}function Wee(e,t,r){const n=YS(e,t.layer);let i=0;t.layer===0?i=MC(e,t,r):i=OC(e,t,r);let s=i,o=r;for(let a=0;a<e[t.layer].length;a++)if(e[t.layer][a].id==="NULL_NODE"){ec(e[t.layer],r,a);const c=YS(e,t.layer);let f=0;t.layer===0?f=MC(e,t,a):f=OC(e,t,a),c<=n&&f<s&&(s=f,o=a),ec(e[t.layer],a,r)}return o===r?null:o}function Xee(e,t,r){const n={};let i=1/0,s=0;for(let o=0;o<e[t.layer].length;o++){const a=IC(e,t,o),u=IC(e,e[t.layer][o],r);n[o]=a+u}for(const o in n)n[o]<i&&(i=n[o],s=parseInt(o));return s===r?null:s}function ec(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Yee(e){const t=[];for(const r in e)for(const n of e[r])t.push(n);return t.sort((r,n)=>n.parents.length+n.children.length-(r.parents.length+r.children.length))}function YS(e,t){let r=0;for(let n=0;n<e[t].length;n++){const i=e[t][n],s=[],o=[];if(e[t-1])for(let a=n+1;a<e[t-1].length;a++)i.parents.includes(e[t-1][a].id)&&s.push(a);if(e[t+1])for(let a=n+1;a<e[t+1].length;a++)i.children.includes(e[t+1][a].id)&&o.push(a);for(let a=n+1;a<e[t].length;a++){const u=e[t][a];if(s.length)for(let c=0;c<e[t-1].length;c++)u.parents.includes(e[t-1][c].id)&&s.forEach(f=>{c<f&&r++});if(o.length)for(let c=0;c<e[t+1].length;c++)u.children.includes(e[t+1][c].id)&&o.forEach(f=>{c<f&&r++})}}return r}function Kee(e,t){let r=!1;for(const n of t){if(n.children.length+n.parents.length===0)return r;let i=0;for(let a=0;a<e[n.layer].length;a++)if(e[n.layer][a].id===n.id){i=a;break}let s=1/0,o=i;for(let a=0;a<e[n.layer].length;a++){ec(e[n.layer],i,a);const u=YS(e,n.layer);u<s&&(s=u,o=a),ec(e[n.layer],a,i)}o!==i&&(ec(e[n.layer],i,o),r=!0)}return r}function Zee(e,t){xr(t,!1);let r=ve(t,"mermaid",8,""),n=ve(t,"mermaidConfig",24,()=>({}));const i=dQ(r());Qr("flowchart",i);const s=Gee(i),o=kr("graph"),a=100,u=100;let c;Ti(()=>{o.nodes.subscribe(y=>c=Object.fromEntries(y));let g=0;for(const y of s){let m=0,_=-1/0;for(const b of y)b.ignore||(c[`N-${b.id}`].position.update(()=>({x:m,y:g})),c[`N-${b.id}`].dimensions.width.subscribe(S=>m+=S),c[`N-${b.id}`].dimensions.height.subscribe(S=>_=Math.max(_,S))),m+=a;g+=_+u}}),qn();var f=vr(),h=Gt(f);ds(h,1,()=>s,gu,(g,y)=>{var m=vr(),_=Gt(m);ds(_,1,()=>R(y),gu,(b,S)=>{var E=vr(),A=Gt(E);{var T=I=>{const q=hn(()=>R(S).children.map(p=>[p,"1"]));VE(I,sg({get label(){return R(S).label},get id(){return R(S).id},TD:!0},()=>n()[R(S).id],{get connections(){return R(q)}}))};lr(A,I=>{R(S).ignore||I(T)})}nt(b,E)}),nt(g,m)}),nt(e,f),Sr()}function Jee(e){var n,i;const t=JSON.parse(e);return iV(t.id,{...t,editable:t.editable,direction:t.direction,locked:t.locked,zoom:((n=t.transforms)==null?void 0:n.scale)??1,translation:((i=t.transforms)==null?void 0:i.translation)??{x:0,y:0},edge:t.edge})}var Qee=nr("<!> <!>",1),ete=nr('<div class="svelvet-temp svelte-lsy29y"></div>');function tte(e,t){const r=qE(t);xr(t,!1);const n=qe(),i=qe();let s=ve(t,"mermaid",8,""),o=ve(t,"theme",8,"light"),a=ve(t,"id",8,0),u=ve(t,"snapTo",8,0),c=ve(t,"zoom",8,1),f=ve(t,"TD",8,!1),h=ve(t,"editable",8,!0),g=ve(t,"locked",8,!1),y=ve(t,"width",8,0),m=ve(t,"height",8,0),_=ve(t,"minimap",8,!1),b=ve(t,"controls",8,!1),S=ve(t,"toggle",8,!1),E=ve(t,"drawer",8,!1),A=ve(t,"contrast",8,!1),T=ve(t,"fitView",8,!1),I=ve(t,"selectionColor",8,"lightblue"),q=ve(t,"edgeStyle",8,"bezier"),p=ve(t,"endStyles",24,()=>[null,null]),P=ve(t,"edge",8,null),O=ve(t,"disableSelection",8,!1),N=ve(t,"mermaidConfig",24,()=>({})),V=ve(t,"translation",24,()=>({x:0,y:0})),W=ve(t,"trackpadPan",8,!1),G=ve(t,"modifier",8,"meta"),ee=ve(t,"raiseEdgesOnSelect",8,!1),ae=ve(t,"edgesAboveNode",8,!1),K=ve(t,"title",8,""),U=ve(t,"fixedZoom",8,!1),j=ve(t,"pannable",8,!0);const J=xl();let de=qe(null),ce=f()?"TD":"LR";Qr("snapTo",u()),Qr("edgeStyle",q()),Qr("endStyles",p()),Qr("graphEdge",P()),Qr("raiseEdgesOnSelect",ee()),Qr("edgesAboveNode",ae()),Qr("graph",R(de)),Ti(()=>{console.log("Graph component mounted with drawer:",E());const te=localStorage.getItem("state");if(console.log("stateObject during onMount:",te),te)we(de,Jee(te)),console.log("This is the graph set using reloadStore",R(de)),Yf.add(R(de),R(de).id),console.log("graphStore updated",R(de));else{let le=`G-${a()||Yf.count()+1}`;we(de,iV(le,{zoom:c(),direction:ce,editable:h(),locked:g(),translation:V()})),Yf.add(R(de),le)}});function Te(te,le){if(!R(de))return;const We=`N-${te[0]}`,Ne=R(de).nodes.get(We);if(!Ne)return;const Re=Ne.anchors.get(`A-${te[1]}/N-${te[0]}`);if(!Re)return;const rt=`N-${le[0]}`,Ve=R(de).nodes.get(rt);if(!Ve)return;const L=Ve.anchors.get(`A-${le[1]}/N-${le[0]}`);if(!L)return;const B=R(de).edges.match(Re,L);B&&R(de).edges.delete(B[0])}Fe(()=>{},()=>{we(n,r.background)}),Fe(()=>R(de),()=>{we(i,R(de)&&R(de).edges)}),Fe(()=>(R(de),Vt(c())),()=>{R(de)&&R(de).transforms.scale.set(c())}),Fe(()=>R(i),()=>{R(i)&&R(i).onEdgeChange((te,le)=>{J(le,{sourceAnchor:te.source,targetAnchor:te.target,sourceNode:te.source.node,targetNode:te.target.node})})}),Qi(),qn();var Se=vr(),re=Gt(Se);{var oe=te=>{Vee(te,{get width(){return y()},get height(){return m()},get toggle(){return S()},get backgroundExists(){return R(n)},get minimap(){return _()},get graph(){return R(de)},get fitView(){return T()},get fixedZoom(){return U()},get pannable(){return j()},get theme(){return o()},get drawer(){return E()},get controls(){return b()},get selectionColor(){return I()},get disableSelection(){return O()},get trackpadPan(){return W()},get modifier(){return G()},get title(){return K()},get contrast(){return A()},$$events:{edgeDrop(le){Tn.call(this,t,le)}},children:(le,We)=>{var Ne=Qee(),Re=Gt(Ne);{var rt=L=>{Zee(L,{get mermaid(){return s()},get mermaidConfig(){return N()}})};lr(Re,L=>{s().length&&L(rt)})}var Ve=xt(Re,2);Xr(Ve,t,"default",{},null),nt(le,Ne)},$$slots:{default:!0,minimap:(le,We)=>{var Ne=vr(),Re=Gt(Ne);Xr(Re,t,"minimap",{},null),nt(le,Ne)},controls:(le,We)=>{var Ne=vr(),Re=Gt(Ne);Xr(Re,t,"controls",{},null),nt(le,Ne)},background:(le,We)=>{var Ne=vr(),Re=Gt(Ne);Xr(Re,t,"background",{},null),nt(le,Ne)},toggle:(le,We)=>{var Ne=vr(),Re=Gt(Ne);Xr(Re,t,"toggle",{},null),nt(le,Ne)},drawer:(le,We)=>{var Ne=vr(),Re=Gt(Ne);Xr(Re,t,"drawer",{},null),nt(le,Ne)},contrast:(le,We)=>{var Ne=vr(),Re=Gt(Ne);Xr(Re,t,"contrast",{},null),nt(le,Ne)}}})},ne=te=>{var le=ete();let We;Ht(()=>We=Rr(le,"",We,{width:y()?y()+"px":"100%",height:m()?m()+"px":"100%"})),nt(te,le)};lr(re,te=>{R(de)?te(oe):te(ne,!1)})}return nt(e,Se),FE(t,"disconnect",Te),Sr({disconnect:Te})}var rte=nr("<button></button>");function nte(e,t){xr(t,!1);const[r,n]=ii(),i=()=>Ye(q,"$position",r),s=()=>Ye(N,"$rotation",r),o=()=>Ye(R(y),"$zIndex",r),a=()=>Ye(O,"$borderRadius",r),u=()=>Ye(P,"$bgColor",r),c=()=>Ye(V,"$width",r),f=()=>Ye(W,"$height",r),h=qe(),g=qe(),y=qe(),m=qe();let _=ve(t,"node",8),b=ve(t,"hidden",8,!1),S=ve(t,"toggleHidden",8),E=ve(t,"top",8),A=ve(t,"left",8),T=ve(t,"nodeColor",8,null),I=ve(t,"hideable",8);const{position:q,dimensions:p,bgColor:P,borderRadius:O,rotation:N}=_(),{width:V,height:W}=p;let G=qe(null);Ti(()=>{var U;try{const j=(U=document.querySelector(`#${_().id}`))==null?void 0:U.firstChild;j&&we(G,window.getComputedStyle(j).backgroundColor)}catch(j){console.error(j)}}),Fe(()=>i(),()=>{we(h,i())}),Fe(()=>s(),()=>{we(g,s())}),Fe(()=>Vt(_()),()=>{qa(we(y,_().zIndex),"$zIndex",r)}),Fe(()=>R(G),()=>{we(m,R(G)==="rgba(0, 0, 0, 0)")}),Qi(),qn();var ee=rte();let ae,K;Ht(U=>{ae=Cn(ee,1,"minimap-node svelte-1hs9omb",null,ae,U),K=Rr(ee,"",K,{"z-index":o(),"border-radius":`${a()??""}px`,"--prop-background-color":T()||u()||!R(m)&&R(G)||null,width:`${c()??""}px`,height:`${f()??""}px`,transform:`rotate(${R(g)??""}deg)`,top:`${R(h).y-E()}px`,left:`${R(h).x-A()}px`})},[()=>({hidden:b(),hideable:I()})],hn),pr("click",ee,()=>{I()&&S()(_())}),nt(e,ee),Sr(),n()}var ite=nr('<div class="mini-bounding-box svelte-aoq4g"></div>');function ste(e,t){xr(t,!1);const[r,n]=ii(),i=()=>Ye(c(),"$position",r),s=()=>Ye(m,"$width",r),o=()=>Ye(_,"$height",r),a=()=>Ye(f(),"$color",r);let u=ve(t,"dimensions",8),c=ve(t,"position",8),f=ve(t,"color",8),h=ve(t,"groupName",8),g=ve(t,"top",8),y=ve(t,"left",8);const{width:m,height:_}=u();qn();var b=ite();let S;Ht(()=>{pt(b,"id",`mini-${h()}-bounding-box`),S=Rr(b,`border: solid 4px ${a()??""};`,S,{top:`${i().y-g()}px`,left:`${i().x-y()}px`,width:`${s()}px`,height:`${o()}px`,"background-color":a()})}),nt(e,b),Sr(),n()}var ote=nr('<div><div class="node-wrapper svelte-1qxvbux"><!> <!></div> <div class="overlay svelte-1qxvbux"></div></div>');function uV(e,t){xr(t,!1);const[r,n]=ii(),i=()=>Ye(Ne,"$graphBounds",r),s=()=>Ye(rt,"$groups",r),o=()=>Ye(L,"$dimensions",r),a=()=>Ye(H,"$scale",r),u=()=>Ye(X,"$translation",r),c=()=>Ye(B,"$hidden",r),f=()=>Ye(Re,"$nodes",r),h=()=>Ye(xe,"$groupBoxes",r),g=qe(),y=qe(),m=qe(),_=qe(),b=qe(),S=qe(),E=qe(),A=qe(),T=qe(),I=qe(),q=qe(),p=qe(),P=qe(),O=qe(),N=qe(),V=qe(),W=qe(),G=qe(),ee=qe(),ae=qe(),K=qe(),U=qe(),j=qe();let J=kr("graph"),de=ve(t,"width",8,100),ce=ve(t,"height",24,de),Te=ve(t,"mapColor",8,null),Se=ve(t,"nodeColor",8,null),re=ve(t,"borderColor",8,null),oe=ve(t,"corner",8,"SE"),ne=ve(t,"hideable",8,!1);const te=.9,le=de()*te,We=ce()*te,Ne=J.bounds.graphBounds,Re=J.nodes,rt=J.groups,Ve=J.transforms,L=J.dimensions,B=s().hidden.nodes,H=Ve.scale,X=Ve.translation,xe=J.groupBoxes,ue={clientX:0,clientY:0};function Ae(ft){c().has(ft)?c().delete(ft):c().add(ft),Ot(B,c())}Fe(()=>i(),()=>{we(g,i())}),Fe(()=>R(g),()=>{we(y,R(g).top)}),Fe(()=>R(g),()=>{we(m,R(g).left)}),Fe(()=>R(g),()=>{we(_,R(g).right)}),Fe(()=>R(g),()=>{we(b,R(g).bottom)}),Fe(()=>o(),()=>{we(S,o().width)}),Fe(()=>o(),()=>{we(E,o().height)}),Fe(()=>(R(_),R(m)),()=>{we(A,R(_)-R(m))}),Fe(()=>(R(b),R(y)),()=>{we(T,R(b)-R(y))}),Fe(()=>(R(A),R(T)),()=>{we(I,R(A)/R(T))}),Fe(()=>(Vt(de()),Vt(ce())),()=>{we(q,de()/ce())}),Fe(()=>(R(S),R(E),a(),u()),()=>{we(p,Sh(ue,0,0,R(S),R(E),a(),u()))}),Fe(()=>(R(S),R(A),a()),()=>{we(P,R(S)/R(A)/a())}),Fe(()=>(R(E),R(T),a()),()=>{we(O,R(E)/R(T)/a())}),Fe(()=>(R(p),R(y),R(T)),()=>{we(N,(R(p).y-R(y))/R(T))}),Fe(()=>(R(p),R(m),R(A)),()=>{we(V,(R(p).x-R(m))/R(A))}),Fe(()=>(R(I),R(q)),()=>{we(G,R(I)>=R(q))}),Fe(()=>(R(G),R(A),R(T)),()=>{we(ee,R(G)?le/R(A):We/R(T))}),Fe(()=>(R(T),R(ee)),()=>{we(j,R(T)*R(ee))}),Fe(()=>(Vt(ce()),R(j)),()=>{we(K,(ce()-R(j))/2)}),Fe(()=>(R(A),R(ee)),()=>{we(U,R(A)*R(ee))}),Fe(()=>(Vt(de()),R(U)),()=>{we(ae,(de()-R(U))/2)}),Fe(()=>(R(K),R(N),R(j),R(ae),R(V),R(U),R(P),R(O)),()=>{we(W,`
		top: ${R(K)+R(N)*R(j)}px;
		left: ${R(ae)+R(V)*R(U)}px;
		width: ${R(P)*R(U)}px;
		height: ${R(O)*R(j)}px;`)}),Qi(),qn();var Ce=ote();let Be,Le;var Ie=$t(Ce);let be;var je=$t(Ie);ds(je,1,()=>Array.from(f().entries()),([ft,it])=>ft,(ft,it)=>{let Wt=()=>R(it)[1];var yr=vr(),Qt=Gt(yr);{var cr=Lr=>{const Br=hn(()=>c().has(Wt()));nte(Lr,{get node(){return Wt()},get top(){return R(y)},get left(){return R(m)},get nodeColor(){return Se()},get hidden(){return R(Br)},toggleHidden:Ae,get hideable(){return ne()}})};lr(Qt,Lr=>{Wt().id!=="N-editor"&&Lr(cr)})}nt(ft,yr)});var ct=xt(je,2);ds(ct,1,()=>Array.from(h().entries()),([ft,it])=>ft,(ft,it)=>{let Wt=()=>R(it)[0];ste(ft,sg(()=>R(it)[1],{get top(){return R(y)},get left(){return R(m)},get groupName(){return Wt()}}))});var mt=xt(Ie,2);Ht(ft=>{Be=Cn(Ce,1,"minimap-wrapper svelte-1qxvbux",null,Be,ft),Le=Rr(Ce,"",Le,{width:`${de()??""}px`,height:`${(ce()?ce():de())??""}px`,"--prop-minimap-border-color":re(),"--prop-minimap-background-color":Te()}),be=Rr(Ie,"",be,{width:`${R(A)??""}px`,height:`${R(T)??""}px`,transform:`scale(${R(ee)??""})`}),Rr(mt,R(W))},[()=>({SW:oe()==="SW",NE:oe()==="NE",SE:oe()==="SE",NW:oe()==="NW"})],hn),nt(e,Ce),Sr(),n()}const ate=Object.freeze(Object.defineProperty({__proto__:null,default:uV},Symbol.toStringTag,{value:"Module"}));function ute(e){return e&&typeof e.subscribe=="function"}function pp(e){const t={};for(const r in e){const n=e[r];if(r==="nodes"&&typeof n=="object"&&typeof n.getAll=="function"){const i=n.getAll();t[r]=i.map(s=>pp(s))}else if(ute(n)){const i=lt(n);t[r]=typeof i=="object"&&i!==null?pp(i):i}else typeof n=="object"&&n!==null?t[r]=pp(n):t[r]=n}return t}function cte(e,t){return t instanceof DOMRectReadOnly?{x:t.x,y:t.y,width:t.width,height:t.height}:t}function lte(e){console.log("graph state object:",e);const t=pp(e),r=JSON.stringify(t,cte);return localStorage.setItem("state",r),r}var fte=nr('<div><button class="svelte-1vnlnjg"><span class="material-symbols-outlined svelte-1vnlnjg"> </span></button> <button class="save-button NW svelte-1vnlnjg">Save</button></div>');function cV(e,t){xr(t,!1),console.log("Componente ThemeToggle.svelte");let r=ve(t,"main",8,"light"),n=ve(t,"alt",8,"dark"),i=ve(t,"mainIcon",8,"light_mode"),s=ve(t,"altIcon",8,"dark_mode"),o=ve(t,"corner",8,"NE"),a=ve(t,"bgColor",8,null),u=ve(t,"iconColor",8,null),c=qe(r());function f(){const A=document.documentElement.getAttribute("svelvet-theme");let T;!A||A===r()?T=n():T=r(),we(c,T),document.documentElement.setAttribute("svelvet-theme",T),localStorage.setItem("currentTheme",T)}Ti(()=>{const A=localStorage.getItem("currentTheme");A?(document.documentElement.setAttribute("svelvet-theme",A),we(c,A)):(document.documentElement.setAttribute("svelvet-theme",r()),we(c,r()));const T=localStorage.getItem("state");if(T){console.log("Al renderizar la aplicacion este componente se ejecuta en este orden");const I=JSON.parse(T);if(I&&I.nodes){const q=lt(Yf);console.log(q),q.set("G-1",I),console.log("Restaurando nodos:",I.nodes)}}});let h=qe();Yf.subscribe(A=>{we(h,A.get("G-1")),console.log("Graph from store:",R(h))}),qn();var g=fte();let y,m;var _=$t(g),b=$t(_),S=$t(b),E=xt(_,2);Ht(A=>{y=Cn(g,1,"controls-wrapper svelte-1vnlnjg",null,y,A),m=Rr(g,"",m,{"--prop-theme-toggle-color":a(),"--prop-theme-toggle-text-color":u()}),Eu(S,R(c)===r()?s():i())},[()=>({SW:o()==="SW",NE:o()==="NE",SE:o()==="SE",NW:o()==="NW"})],hn),pr("mousedown",_,ro(f)),pr("touchstart",_,ro(f)),pr("click",E,()=>{lte(R(h))}),nt(e,g),Sr()}const hte=Object.freeze(Object.defineProperty({__proto__:null,default:cV},Symbol.toStringTag,{value:"Module"}));function dte(e,t){return{type:"Lamp",net:e,inputs:(t==null?void 0:t.inputs)||1,outputs:(t==null?void 0:t.outputs)||0,order:(t==null?void 0:t.order)||0,bits:(t==null?void 0:t.bits)||1,label:(t==null?void 0:t.label)||e,...(t==null?void 0:t.position)&&{position:{x:t.position.x,y:t.position.y}}}}function pte(e,t){return{type:"Button",label:(t==null?void 0:t.label)||e,net:(t==null?void 0:t.net)||e,bits:(t==null?void 0:t.bits)||1,...(t==null?void 0:t.position)&&{position:{x:t.position.x,y:t.position.y}}}}function ou(e,t,r){return{type:e,label:t,inputs:2,...(r==null?void 0:r.position)&&{position:{x:r.position.x,y:r.position.y}}}}const kC={Button:pte,Lamp:dte,And:(e,t)=>ou("And",e,...t?[t]:[]),Nand:(e,t)=>ou("Nand",e,...t?[t]:[]),Or:(e,t)=>ou("Or",e,...t?[t]:[]),Nor:(e,t)=>ou("Nor",e,...t?[t]:[]),Xor:(e,t)=>ou("Xor",e,...t?[t]:[]),Xnor:(e,t)=>ou("Xnor",e,...t?[t]:[]),Not:(e,t)=>ou("Not",e,...t?[t]:[]),Repeater:(e,t)=>ou("Repeater",e,...t?[t]:[])},gte=()=>{const e={devices:{},connectors:{},subcircuits:{}},{subscribe:t,set:r,update:n}=Ke(e);return{subscribe:t,set:r,update:n,reset:()=>n(()=>({devices:{},connectors:{},subcircuits:{}})),addConnection:(i,s)=>{const o=s.substring(s.indexOf("_")+1);n(a=>(i in a.connectors||(a.connectors[i]=new Array),a.connectors[i]=[...a.connectors[i],[o,s]],console.log(a.connectors),a))},removeConnection:i=>{n(s=>{const o={};for(const a in s.connectors)o[a]=[...s.connectors[a].filter(([,u])=>u!==i)];return s.connectors=o,s})},findOutputAnchor:i=>{n(s=>{const o={};for(const a in s.connectors)o[a]=[...s.connectors[a].filter(([,u])=>u!==i)];return s.connectors=o,s})},addCircuitDevice:(i,s,o)=>{const a=`${i}_${s}`;let u=null;if(n(c=>{const f=o===void 0?kC[i](a):kC[i](a,o);return c.devices[a]=f,u=c.devices,c}),u===null)throw new Error("devices null after setting devices");return u}}},Zi=gte();function vte(e){const t=JSON.parse(e);return t.nodes.length===0?(console.warn("save json exists but there are no nodes"),null):t.nodes.map(n=>{let[i,s]=n.id.substring(2).split("_");return{nodeType:i,uuid:s,position:n.position}})}function GE(e){return localStorage.getItem(e)||(console.warn(`No saved "${e}" found in localStorage.`),null)}function mte(){const t=GE("state");if(!t)return console.warn("svelvet save unsucessful"),null;const r=vte(t);if(r===null)return null;Zi.update(n=>(r.forEach(({nodeType:i,uuid:s,position:o})=>{const a=`${i}_${s}`;n.devices[a].position=o}),n))}function yte(){GE("circuitStoreSave"),localStorage.setItem("circuitStoreSave",JSON.stringify(lt(Zi)))}function _te(){const e=document.querySelector(".save-button"),t=new MouseEvent("click",{bubbles:!0,cancelable:!0});e==null||e.dispatchEvent(t)}async function ih(){_te(),mte(),yte()}function bte(e){if(!(e!=null&&e.devices)||!(e!=null&&e.connectors)||!(e!=null&&e.subcircuits))throw new Error("Parsed circuit object is missing required properties");Object.keys(e.devices).length===0&&console.log("Loaded in a valid circuit with empty devices")}function lV(e="default"){let t=e==="default"?GE("circuitStoreSave"):e;if(!t)return;const r=JSON.parse(t);bte(r),Zi.set(r)}function wte(){ih();const e=localStorage.getItem("circuitStoreSave");e?e==='{"devices":{},"connectors":[],"subcircuits":{}}'?console.warn("EMPTY on delete, do not set prevCircuitStore just empty stores."):localStorage.setItem("prevCircuitStore",e):console.warn("we saved before deleting so this should not be possible"),localStorage.removeItem("circuitStoreSave")}var xte=Nn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21a9 9 0 0 1-.5-17.986V3c-.354.966-.5 1.911-.5 3a9 9 0 0 0 9 9c.239 0 .254.018.488 0A9 9 0 0 1 12 21"></path></svg>');function Ste(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=xte();let i;Ht(()=>i=ha(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),nt(e,n)}var Ete=Nn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5V3m0 18v-2M7.05 7.05L5.636 5.636m12.728 12.728L16.95 16.95M5 12H3m18 0h-2M7.05 16.95l-1.414 1.414M18.364 5.636L16.95 7.05M16 12a4 4 0 1 1-8 0a4 4 0 0 1 8 0"></path></svg>');function Ate(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=Ete();let i;Ht(()=>i=ha(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),nt(e,n)}var Tte=nr('<div class="side_menu_header svelte-h8e8bu"><h2 class="svelte-h8e8bu"><span class="l_cap svelte-h8e8bu">L</span><span class="o_cap svelte-h8e8bu">o</span><span class="g_cap svelte-h8e8bu">g</span><span class="i_cap svelte-h8e8bu">i</span><span class="c_cap svelte-h8e8bu">c</span><span class="a_cap svelte-h8e8bu" style="margin-left:4px;">A</span><span class="p_cap svelte-h8e8bu">P</span></h2> <!></div>');function Pte(e,t){xr(t,!1);let r=qe(!1);Ti(()=>{we(r,localStorage.getItem("theme")==="dark"),i()});function n(){we(r,!R(r)),localStorage.setItem("theme",R(r)?"dark":"light"),i()}function i(){R(r)?document.body.className="dark":document.body.className="light"}qn();var s=Tte(),o=xt($t(s),2);{var a=c=>{Ate(c,{onclick:n,style:"color:var(--neon-purple); width:28px;height:28px;margin-top: 5px;margin-right: -8px;"})},u=c=>{Ste(c,{onclick:n,style:"color:grey !important; width:28px;height:28px;margin-top: 5px;margin-right: -8px;"})};lr(o,c=>{R(r)?c(a):c(u,!1)})}nt(e,s),Sr()}const Cte=""+new URL("And-vPRNnjli.webp",import.meta.url).href,Rte=""+new URL("Buffer-B3Uvsw-c.webp",import.meta.url).href,Ite=""+new URL("Or-D6Cm5Ena.webp",import.meta.url).href,Ote=""+new URL("Nor-CgPoSiw3.webp",import.meta.url).href,Mte=""+new URL("Xor-FwkKBC7T.webp",import.meta.url).href,kte=""+new URL("Xnor-D92Hxo_S.webp",import.meta.url).href,Lte=""+new URL("Nand-CeX_LhnV.webp",import.meta.url).href,Nte=""+new URL("Not-CKmu_FXd.webp",import.meta.url).href,qte=""+new URL("outputIcon-C9FYfgf8.png",import.meta.url).href,Dte=""+new URL("inputIcon-6hipRhQs.png",import.meta.url).href;function Ws(e,t,r){return t.map((n,i)=>e(n,r[i]))}function Wd(e,t,r,n,i){return t.map((s,o)=>e(s,r[o],n[o],i[o]))}function Zo(e,t,r,n){if(t.length==0)return n==1?1:0;let i=t[t.length-1];n==1?i|=~r:i&=r;for(let s=0;s<t.length-1;s++)i=e(i,t[s]);return i=e(i,i>>>16),i=e(i,i>>>8),i=e(i,i>>>4),i=e(i,i>>>2),i=e(i,i>>>1),i&1}function Fte(e){return e>>5}function ta(e){return e&31}function sl(e,t,r,n,i){const s=e>0&&!(n[t]&1<<e-1)&&i[t]&1<<e-1;s&&ta(e)&&(i[t]|=-1<<e),s&&t+1<r&&i.fill(-1,t+1)}function $E(e,t){const r={};function n(i,s){if(r[i]=s,!(i.length*e>=t)){for(let o=0;o<1<<e;o+=1)n(i+o.toString(1<<e),s<<e|o|o<<16);n(i+"x",s<<e|(1<<e)-1)}}return n("",0),Object.seal(r),r}const Bte=$E(1,8),zte=$E(3,3),Vte=$E(4,8);function Gte(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000"+r[o].toString(16),u=r[o]^n[o];o++;for(let c=0;c<8&&s<t;c++,s+=4)u&15<<4*c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function $te(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000000000000000000000000000"+r[o].toString(2),u=r[o]^n[o];o++;for(let c=0;c<32&&s<t;c++,s++)u&1<<c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function Ute(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const f=e.slice(Math.max(0,c-2),c);c-=f.length;const h=Vte[f];ta(a)==0&&u++;const g=(1<<4*f.length)-1;n[u]|=(h>>>16&g)<<a,i[u]|=(h&g)<<a,a+=4*f.length}a<r&&sl(a,u,o,n,i)}function jte(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const f=e.slice(Math.max(0,c-8),c);c-=f.length;const h=Bte[f];ta(a)==0&&u++;const g=(1<<1*f.length)-1;n[u]|=(h>>>16&g)<<a,i[u]|=(h&g)<<a,a+=1*f.length}a<r&&sl(a,u,o,n,i)}let Hte=class fV extends Error{constructor(t){super(t),Object.setPrototypeOf(this,fV.prototype)}};function Ii(e,t){if(!e)throw new Hte("Assertion failed: "+t)}let fa=class Cr{constructor(t,r,n){this._bits=t,this._avec=r,this._bvec=n}static make(t,r){t=t|0;let n,i;switch(r){case!0:case"1":case 1:n=i=-1;break;case!1:case"0":case-1:case void 0:n=i=0;break;case"x":case 0:n=0,i=-1;break;default:Ii(!1,"Vector3vl.make() called with invalid initializer")}const s=(t+31)/32|0;return new Cr(t,new Uint32Array(s).fill(n),new Uint32Array(s).fill(i))}static zeros(t){return Cr.make(t,-1)}static ones(t){return Cr.make(t,1)}static xes(t){return Cr.make(t,0)}static fromBool(t,r=1){return Cr.make(r,t?1:-1)}static concat(...t){const n=t.reduce((u,c)=>c.bits+u,0)+31>>>5;let i=0,s=-1,o=new Uint32Array(n),a=new Uint32Array(n);for(const u of t)if(u.normalize(),ta(i)==0)o.set(u._avec,s+1),a.set(u._bvec,s+1),i+=u._bits,s+=u._bits+31>>>5;else{for(const c in u._avec){if(o[s]|=u._avec[c]<<i,a[s]|=u._bvec[c]<<i,s++,s==n)break;o[s]=u._avec[c]>>>-i,a[s]=u._bvec[c]>>>-i}i+=u._bits,s+1>i+31>>>5&&s--}return new Cr(i,o,a)}static fromIterator(t,r,n){return(r&r-1)==0?Cr.fromIteratorPow2(t,r,n):Cr.fromIteratorAnySkip(t,r,n)}static fromIteratorAnySkip(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const f of t)ta(s)==0&&o++,a[o]|=(f>>>r&c)<<s,u[o]|=(f&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(f>>>r&c)>>>-s,u[o]=(f&c)>>>-s),s+=r;return s<n&&sl(s,o,i,a,u),new Cr(n,a,u)}static fromIteratorPow2(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const f of t)ta(s)==0&&o++,a[o]|=(f>>>r&c)<<s,u[o]|=(f&c)<<s,s+=r;return s<n&&sl(s,o,i,a,u),new Cr(n,a,u)}static fromArray(t){const r=t.length,n=1,i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<n)-1;for(const f of t){const h=f+1+ +(f>0);ta(s)==0&&o++,a[o]|=(h>>>n&c)<<s,u[o]|=(h&c)<<s,s+=n}return s<r&&sl(s,o,i,a,u),new Cr(r,a,u)}static fromBin(t,r){r===void 0&&(r=t.length);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return jte(t,0,r,i,s),new Cr(r,i,s)}static fromOct(t,r){r===void 0&&(r=t.length*3);const i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=7;for(let f=t.length-1;f>=0;f--){const h=zte[t[f]];ta(s)==0&&o++,a[o]|=(h>>>16&c)<<s,u[o]|=(h&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(h>>>16&c)>>>-s,u[o]=(h&c)>>>-s),s+=3}return s<r&&sl(s,o,i,a,u),new Cr(r,a,u)}static fromHex(t,r){r===void 0&&(r=t.length*4);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return Ute(t,0,r,i,s),new Cr(r,i,s)}static fromString(t){const n=/^([0-9]*)'?(b[01x]*|o[0-7x]*|h[0-9a-fx]*|d[0-9]*)$/.exec(t);Ii(n!=null,"Vector3vl.fromString() Invalid string");const i=n[1].length?Number(n[1]):void 0,s=n[2].slice(1);switch(n[2][0]){case"b":return Cr.fromBin(s,i);case"o":return Cr.fromOct(s,i);case"h":return Cr.fromHex(s,i);case"d":return Cr.fromNumber(BigInt(s),i)}}static fromClonable(t){return new Cr(t._bits,t._avec,t._bvec)}static fromNumber(t,r){const n=r===void 0?0:r,i=BigInt(t);if(i>=BigInt(0)){let s=i.toString(2);return Cr.fromBin("0".repeat(Math.max(0,n-s.length))+s,r)}else{const s=(-i).toString(2).length;let a=(i+(BigInt(1)<<BigInt(s))).toString(2);return Cr.fromBin("1".repeat(Math.max(1,n-s))+"0".repeat(s-a.length)+a,r)}}get bits(){return this._bits}get msb(){return this.get(this._bits-1)}get lsb(){return this.get(0)}get(t){const r=ta(t),n=Fte(t),i=this._avec[n]>>>r&1,s=this._bvec[n]>>>r&1;return i+s-1}get isHigh(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>~i==0)&&(n[n.length-1]&t)==t;return r(this._avec)&&r(this._bvec)}get isLow(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>i==0)&&(n[n.length-1]&t)==0;return r(this._avec)&&r(this._bvec)}get isDefined(){if(this._bits==0)return!1;const t=Ws((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]|=~this._lastmask,!t.every(r=>~r==0)}get isFullyDefined(){if(this._bits==0)return!0;const t=Ws((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]&=this._lastmask,!t.some(r=>!!r)}and(t){return Ii(t._bits==this._bits,"Vector3vl.and() called with vectors of different sizes"),new Cr(this._bits,Ws((r,n)=>r&n,t._avec,this._avec),Ws((r,n)=>r&n,t._bvec,this._bvec))}or(t){return Ii(t._bits==this._bits,"Vector3vl.or() called with vectors of different sizes"),new Cr(this._bits,Ws((r,n)=>r|n,t._avec,this._avec),Ws((r,n)=>r|n,t._bvec,this._bvec))}xor(t){return Ii(t._bits==this._bits,"Vector3vl.xor() called with vectors of different sizes"),new Cr(this._bits,Wd((r,n,i,s)=>(r|i)&(n^s),t._avec,t._bvec,this._avec,this._bvec),Wd((r,n,i,s)=>r&i^(n|s),t._avec,t._bvec,this._avec,this._bvec))}nand(t){return Ii(t._bits==this._bits,"Vector3vl.nand() called with vectors of different sizes"),new Cr(this._bits,Ws((r,n)=>~(r&n),t._bvec,this._bvec),Ws((r,n)=>~(r&n),t._avec,this._avec))}nor(t){return Ii(t._bits==this._bits,"Vector3vl.nor() called with vectors of different sizes"),new Cr(this._bits,Ws((r,n)=>~(r|n),t._bvec,this._bvec),Ws((r,n)=>~(r|n),t._avec,this._avec))}xnor(t){return Ii(t._bits==this._bits,"Vector3vl.xnor() called with vectors of different sizes"),new Cr(this._bits,Wd((r,n,i,s)=>~(r&i^(n|s)),t._avec,t._bvec,this._avec,this._bvec),Wd((r,n,i,s)=>~((r|i)&(n^s)),t._avec,t._bvec,this._avec,this._bvec))}not(){return new Cr(this._bits,this._bvec.map(t=>~t),this._avec.map(t=>~t))}xmask(){const t=Ws((r,n)=>r^n,this._avec,this._bvec);return new Cr(this._bits,t,t)}reduceAnd(){return new Cr(1,Uint32Array.of(Zo((t,r)=>t&r,this._avec,this._lastmask,1)),Uint32Array.of(Zo((t,r)=>t&r,this._bvec,this._lastmask,1)))}reduceOr(){return new Cr(1,Uint32Array.of(Zo((t,r)=>t|r,this._avec,this._lastmask,0)),Uint32Array.of(Zo((t,r)=>t|r,this._bvec,this._lastmask,0)))}reduceNand(){return new Cr(1,Uint32Array.of(~Zo((t,r)=>t&r,this._bvec,this._lastmask,1)),Uint32Array.of(~Zo((t,r)=>t&r,this._avec,this._lastmask,1)))}reduceNor(){return new Cr(1,Uint32Array.of(~Zo((t,r)=>t|r,this._bvec,this._lastmask,0)),Uint32Array.of(~Zo((t,r)=>t|r,this._avec,this._lastmask,0)))}reduceXor(){const t=Ws((i,s)=>~i&s,this._avec,this._bvec),r=Zo((i,s)=>i|s,t,this._lastmask,0),n=Zo((i,s)=>i^s,this._avec,this._lastmask,0);return new Cr(1,Uint32Array.of(n&~r),Uint32Array.of(n|r))}reduceXnor(){return this.reduceXor().not()}concat(...t){return Cr.concat(this,...t)}slice(t,r){if(t===void 0&&(t=0),r===void 0&&(r=this._bits),r>this.bits&&(r=this.bits),t>r&&(r=t),ta(t)==0){const n=this._avec.slice(t>>>5,r+31>>>5),i=this._bvec.slice(t>>>5,r+31>>>5);return new Cr(r-t,n,i)}else{const n=r-t+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);let o=0;i[o]=this._avec[t>>5]>>>t,s[o]=this._bvec[t>>5]>>>t;for(let a=(t>>5)+1;a<=r>>>5&&(i[o]|=this._avec[a]<<-t,s[o]|=this._bvec[a]<<-t,o++,o!=n);a++)i[o]=this._avec[a]>>>t,s[o]=this._bvec[a]>>>t;return new Cr(r-t,i,s)}}toIterator(t){return(t&t-1)==0?this.toIteratorPow2(t):this.toIteratorAnySkip(t)}*toIteratorAnySkip(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){let o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const u=r>>-n;o|=(this._avec[i+1]&u)<<-n,a|=(this._bvec[i+1]&u)<<-n}yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r<<n)}}*toIteratorPow2(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){const o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r)}}toArray(){this.normalize();const t=1,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){const a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n,c=a<<t|u;o.push(c-1-+(c>1)),s<<=t,n+=t,s==0&&(i++,s=r)}return o}toBin(){return $te(0,this._bits,this._avec,this._bvec)}toOct(){this.normalize();const t=3,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){let a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const f=r>>-n;a|=(this._avec[i+1]&f)<<-n,u|=(this._bvec[i+1]&f)<<-n}const c=a<<t|u;7&c&~(c>>3)?o.push("x"):o.push((c>>3).toString()),s<<=t,n+=t,s==0&&(i++,s=r<<n)}return o.reverse().join("")}toHex(){return this.normalize(),Gte(0,this._bits,this._avec,this._bvec)}toString(){return"Vector3vl "+this.toBin()}toClonable(){return{_bits:this._bits,_avec:this._avec,_bvec:this._bvec}}toNumber(t=!1){return t?this.toNumberSigned():(Ii(this.isFullyDefined,"Vector3vl.toNumber() called on a not fully defined vector"),Ii(this._bits<32,"Vector3vl.toNumber() called on a too wide vector"),this._bits==0?0:Number.parseInt(this.toHex(),16))}toNumberSigned(){return Ii(this.isFullyDefined,"Vector3vl.toNumberSigned() called on a not fully defined vector"),Ii(this._bits<32,"Vector3vl.toNumberSigned() called on a too wide vector"),Ii(this._bits>0,"Vector3vl.toNumberSigned() called on an empty vector"),this.msb==1?Number.parseInt(this.toHex(),16)-(1<<this._bits):Number.parseInt(this.toHex(),16)}toBigInt(t=!1){return t?this.toBigIntSigned():(Ii(this.isFullyDefined,"Vector3vl.toBigInt() called on a not fully defined vector"),this._bits==0?BigInt(0):BigInt("0x"+this.toHex()))}toBigIntSigned(){return Ii(this.isFullyDefined,"Vector3vl.toBigIntSigned() called on a not fully defined vector"),Ii(this._bits>0,"Vector3vl.toBigIntSigned() called on an empty vector"),this.msb==1?BigInt("0x"+this.toHex())-(BigInt(1)<<BigInt(this._bits)):BigInt("0x"+this.toHex())}eq(t){if(t._bits!=this._bits)return!1;this.normalize(),t.normalize();for(const r in this._avec)if(this._avec[r]!=t._avec[r]||this._bvec[r]!=t._bvec[r])return!1;return!0}normalize(){const t=this._lastmask;this._avec[this._avec.length-1]&=t,this._bvec[this._bvec.length-1]&=t}get _lastmask(){return-1>>>-this.bits}};fa.empty=fa.zeros(0);fa.one=fa.ones(1);fa.zero=fa.zeros(1);fa.x=fa.xes(1);var Oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Wte(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var LC={},NC={},Rm={exports:{}},qC;function Ur(){if(qC)return Rm.exports;qC=1;var e=Rm.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();return typeof __g=="number"&&(__g=e),Rm.exports}var Im,DC;function ao(){if(DC)return Im;DC=1;var e={}.hasOwnProperty;return Im=function(t,r){return e.call(t,r)},Im}var Om,FC;function Zr(){return FC||(FC=1,Om=function(e){try{return!!e()}catch{return!0}}),Om}var Mm,BC;function Dn(){return BC||(BC=1,Mm=!Zr()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})),Mm}var km={exports:{}},zC;function Lo(){if(zC)return km.exports;zC=1;var e=km.exports={version:"2.6.12"};return typeof __e=="number"&&(__e=e),km.exports}var Lm={},Nm,VC;function on(){return VC||(VC=1,Nm=function(e){return typeof e=="object"?e!==null:typeof e=="function"}),Nm}var qm,GC;function mr(){if(GC)return qm;GC=1;var e=on();return qm=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t},qm}var Dm,$C;function UE(){if($C)return Dm;$C=1;var e=on(),t=Ur().document,r=e(t)&&e(t.createElement);return Dm=function(n){return r?t.createElement(n):{}},Dm}var Fm,UC;function hV(){return UC||(UC=1,Fm=!Dn()&&!Zr()(function(){return Object.defineProperty(UE()("div"),"a",{get:function(){return 7}}).a!=7})),Fm}var Bm,jC;function pa(){if(jC)return Bm;jC=1;var e=on();return Bm=function(t,r){if(!e(t))return t;var n,i;if(r&&typeof(n=t.toString)=="function"&&!e(i=n.call(t))||typeof(n=t.valueOf)=="function"&&!e(i=n.call(t))||!r&&typeof(n=t.toString)=="function"&&!e(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},Bm}var HC;function Qn(){if(HC)return Lm;HC=1;var e=mr(),t=hV(),r=pa(),n=Object.defineProperty;return Lm.f=Dn()?Object.defineProperty:function(s,o,a){if(e(s),o=r(o,!0),e(a),t)try{return n(s,o,a)}catch{}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(s[o]=a.value),s},Lm}var zm,WC;function dc(){return WC||(WC=1,zm=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}),zm}var Vm,XC;function Ns(){if(XC)return Vm;XC=1;var e=Qn(),t=dc();return Vm=Dn()?function(r,n,i){return e.f(r,n,t(1,i))}:function(r,n,i){return r[n]=i,r},Vm}var Gm={exports:{}},$m,YC;function pc(){if(YC)return $m;YC=1;var e=0,t=Math.random();return $m=function(r){return"Symbol(".concat(r===void 0?"":r,")_",(++e+t).toString(36))},$m}var Um={exports:{}},jm,KC;function Au(){return KC||(KC=1,jm=!1),jm}var ZC;function Eh(){if(ZC)return Um.exports;ZC=1;var e=Lo(),t=Ur(),r="__core-js_shared__",n=t[r]||(t[r]={});return(Um.exports=function(i,s){return n[i]||(n[i]=s!==void 0?s:{})})("versions",[]).push({version:e.version,mode:Au()?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"}),Um.exports}var Hm,JC;function Xte(){return JC||(JC=1,Hm=Eh()("native-function-to-string",Function.toString)),Hm}var QC;function qs(){if(QC)return Gm.exports;QC=1;var e=Ur(),t=Ns(),r=ao(),n=pc()("src"),i=Xte(),s="toString",o=(""+i).split(s);return Lo().inspectSource=function(a){return i.call(a)},(Gm.exports=function(a,u,c,f){var h=typeof c=="function";h&&(r(c,"name")||t(c,"name",u)),a[u]!==c&&(h&&(r(c,n)||t(c,n,a[u]?""+a[u]:o.join(String(u)))),a===e?a[u]=c:f?a[u]?a[u]=c:t(a,u,c):(delete a[u],t(a,u,c)))})(Function.prototype,s,function(){return typeof this=="function"&&this[n]||i.call(this)}),Gm.exports}var Wm,eR;function es(){return eR||(eR=1,Wm=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}),Wm}var Xm,tR;function No(){if(tR)return Xm;tR=1;var e=es();return Xm=function(t,r,n){if(e(t),r===void 0)return t;switch(n){case 1:return function(i){return t.call(r,i)};case 2:return function(i,s){return t.call(r,i,s)};case 3:return function(i,s,o){return t.call(r,i,s,o)}}return function(){return t.apply(r,arguments)}},Xm}var Ym,rR;function ze(){if(rR)return Ym;rR=1;var e=Ur(),t=Lo(),r=Ns(),n=qs(),i=No(),s="prototype",o=function(a,u,c){var f=a&o.F,h=a&o.G,g=a&o.S,y=a&o.P,m=a&o.B,_=h?e:g?e[u]||(e[u]={}):(e[u]||{})[s],b=h?t:t[u]||(t[u]={}),S=b[s]||(b[s]={}),E,A,T,I;h&&(c=u);for(E in c)A=!f&&_&&_[E]!==void 0,T=(A?_:c)[E],I=m&&A?i(T,e):y&&typeof T=="function"?i(Function.call,T):T,_&&n(_,E,T,a&o.U),b[E]!=T&&r(b,E,I),y&&S[E]!=T&&(S[E]=T)};return e.core=t,o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,o.U=64,o.R=128,Ym=o,Ym}var Km={exports:{}},nR;function Tu(){if(nR)return Km.exports;nR=1;var e=pc()("meta"),t=on(),r=ao(),n=Qn().f,i=0,s=Object.isExtensible||function(){return!0},o=!Zr()(function(){return s(Object.preventExtensions({}))}),a=function(g){n(g,e,{value:{i:"O"+ ++i,w:{}}})},u=function(g,y){if(!t(g))return typeof g=="symbol"?g:(typeof g=="string"?"S":"P")+g;if(!r(g,e)){if(!s(g))return"F";if(!y)return"E";a(g)}return g[e].i},c=function(g,y){if(!r(g,e)){if(!s(g))return!0;if(!y)return!1;a(g)}return g[e].w},f=function(g){return o&&h.NEED&&s(g)&&!r(g,e)&&a(g),g},h=Km.exports={KEY:e,NEED:!1,fastKey:u,getWeak:c,onFreeze:f};return Km.exports}var Zm={exports:{}},iR;function En(){if(iR)return Zm.exports;iR=1;var e=Eh()("wks"),t=pc(),r=Ur().Symbol,n=typeof r=="function",i=Zm.exports=function(s){return e[s]||(e[s]=n&&r[s]||(n?r:t)("Symbol."+s))};return i.store=e,Zm.exports}var Jm,sR;function Fl(){if(sR)return Jm;sR=1;var e=Qn().f,t=ao(),r=En()("toStringTag");return Jm=function(n,i,s){n&&!t(n=s?n:n.prototype,r)&&e(n,r,{configurable:!0,value:i})},Jm}var Qm={},oR;function dV(){return oR||(oR=1,Qm.f=En()),Qm}var e0,aR;function jE(){if(aR)return e0;aR=1;var e=Ur(),t=Lo(),r=Au(),n=dV(),i=Qn().f;return e0=function(s){var o=t.Symbol||(t.Symbol=r?{}:e.Symbol||{});s.charAt(0)!="_"&&!(s in o)&&i(o,s,{value:n.f(s)})},e0}var t0,uR;function qo(){if(uR)return t0;uR=1;var e={}.toString;return t0=function(t){return e.call(t).slice(8,-1)},t0}var r0,cR;function Ah(){if(cR)return r0;cR=1;var e=qo();return r0=Object("z").propertyIsEnumerable(0)?Object:function(t){return e(t)=="String"?t.split(""):Object(t)},r0}var n0,lR;function ga(){return lR||(lR=1,n0=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}),n0}var i0,fR;function uo(){if(fR)return i0;fR=1;var e=Ah(),t=ga();return i0=function(r){return e(t(r))},i0}var s0,hR;function Do(){if(hR)return s0;hR=1;var e=Math.ceil,t=Math.floor;return s0=function(r){return isNaN(r=+r)?0:(r>0?t:e)(r)},s0}var o0,dR;function Rn(){if(dR)return o0;dR=1;var e=Do(),t=Math.min;return o0=function(r){return r>0?t(e(r),9007199254740991):0},o0}var a0,pR;function gc(){if(pR)return a0;pR=1;var e=Do(),t=Math.max,r=Math.min;return a0=function(n,i){return n=e(n),n<0?t(n+i,0):r(n,i)},a0}var u0,gR;function og(){if(gR)return u0;gR=1;var e=uo(),t=Rn(),r=gc();return u0=function(n){return function(i,s,o){var a=e(i),u=t(a.length),c=r(o,u),f;if(n&&s!=s){for(;u>c;)if(f=a[c++],f!=f)return!0}else for(;u>c;c++)if((n||c in a)&&a[c]===s)return n||c||0;return!n&&-1}},u0}var c0,vR;function HE(){if(vR)return c0;vR=1;var e=Eh()("keys"),t=pc();return c0=function(r){return e[r]||(e[r]=t(r))},c0}var l0,mR;function pV(){if(mR)return l0;mR=1;var e=ao(),t=uo(),r=og()(!1),n=HE()("IE_PROTO");return l0=function(i,s){var o=t(i),a=0,u=[],c;for(c in o)c!=n&&e(o,c)&&u.push(c);for(;s.length>a;)e(o,c=s[a++])&&(~r(u,c)||u.push(c));return u},l0}var f0,yR;function WE(){return yR||(yR=1,f0="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")),f0}var h0,_R;function vc(){if(_R)return h0;_R=1;var e=pV(),t=WE();return h0=Object.keys||function(n){return e(n,t)},h0}var d0={},bR;function ag(){return bR||(bR=1,d0.f=Object.getOwnPropertySymbols),d0}var p0={},wR;function Th(){return wR||(wR=1,p0.f={}.propertyIsEnumerable),p0}var g0,xR;function Yte(){if(xR)return g0;xR=1;var e=vc(),t=ag(),r=Th();return g0=function(n){var i=e(n),s=t.f;if(s)for(var o=s(n),a=r.f,u=0,c;o.length>u;)a.call(n,c=o[u++])&&i.push(c);return i},g0}var v0,SR;function ug(){if(SR)return v0;SR=1;var e=qo();return v0=Array.isArray||function(r){return e(r)=="Array"},v0}var m0,ER;function si(){if(ER)return m0;ER=1;var e=ga();return m0=function(t){return Object(e(t))},m0}var y0,AR;function gV(){if(AR)return y0;AR=1;var e=Qn(),t=mr(),r=vc();return y0=Dn()?Object.defineProperties:function(i,s){t(i);for(var o=r(s),a=o.length,u=0,c;a>u;)e.f(i,c=o[u++],s[c]);return i},y0}var _0,TR;function XE(){if(TR)return _0;TR=1;var e=Ur().document;return _0=e&&e.documentElement,_0}var b0,PR;function mc(){if(PR)return b0;PR=1;var e=mr(),t=gV(),r=WE(),n=HE()("IE_PROTO"),i=function(){},s="prototype",o=function(){var a=UE()("iframe"),u=r.length,c="<",f=">",h;for(a.style.display="none",XE().appendChild(a),a.src="javascript:",h=a.contentWindow.document,h.open(),h.write(c+"script"+f+"document.F=Object"+c+"/script"+f),h.close(),o=h.F;u--;)delete o[s][r[u]];return o()};return b0=Object.create||function(u,c){var f;return u!==null?(i[s]=e(u),f=new i,i[s]=null,f[n]=u):f=o(),c===void 0?f:t(f,c)},b0}var w0={},x0={},CR;function yc(){if(CR)return x0;CR=1;var e=pV(),t=WE().concat("length","prototype");return x0.f=Object.getOwnPropertyNames||function(n){return e(n,t)},x0}var RR;function vV(){if(RR)return w0;RR=1;var e=uo(),t=yc().f,r={}.toString,n=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(s){try{return t(s)}catch{return n.slice()}};return w0.f=function(o){return n&&r.call(o)=="[object Window]"?i(o):t(e(o))},w0}var S0={},IR;function co(){if(IR)return S0;IR=1;var e=Th(),t=dc(),r=uo(),n=pa(),i=ao(),s=hV(),o=Object.getOwnPropertyDescriptor;return S0.f=Dn()?o:function(u,c){if(u=r(u),c=n(c,!0),s)try{return o(u,c)}catch{}if(i(u,c))return t(!e.f.call(u,c),u[c])},S0}var OR;function Kte(){if(OR)return NC;OR=1;var e=Ur(),t=ao(),r=Dn(),n=ze(),i=qs(),s=Tu().KEY,o=Zr(),a=Eh(),u=Fl(),c=pc(),f=En(),h=dV(),g=jE(),y=Yte(),m=ug(),_=mr(),b=on(),S=si(),E=uo(),A=pa(),T=dc(),I=mc(),q=vV(),p=co(),P=ag(),O=Qn(),N=vc(),V=p.f,W=O.f,G=q.f,ee=e.Symbol,ae=e.JSON,K=ae&&ae.stringify,U="prototype",j=f("_hidden"),J=f("toPrimitive"),de={}.propertyIsEnumerable,ce=a("symbol-registry"),Te=a("symbols"),Se=a("op-symbols"),re=Object[U],oe=typeof ee=="function"&&!!P.f,ne=e.QObject,te=!ne||!ne[U]||!ne[U].findChild,le=r&&o(function(){return I(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a!=7})?function(Le,Ie,be){var je=V(re,Ie);je&&delete re[Ie],W(Le,Ie,be),je&&Le!==re&&W(re,Ie,je)}:W,We=function(Le){var Ie=Te[Le]=I(ee[U]);return Ie._k=Le,Ie},Ne=oe&&typeof ee.iterator=="symbol"?function(Le){return typeof Le=="symbol"}:function(Le){return Le instanceof ee},Re=function(Ie,be,je){return Ie===re&&Re(Se,be,je),_(Ie),be=A(be,!0),_(je),t(Te,be)?(je.enumerable?(t(Ie,j)&&Ie[j][be]&&(Ie[j][be]=!1),je=I(je,{enumerable:T(0,!1)})):(t(Ie,j)||W(Ie,j,T(1,{})),Ie[j][be]=!0),le(Ie,be,je)):W(Ie,be,je)},rt=function(Ie,be){_(Ie);for(var je=y(be=E(be)),ct=0,mt=je.length,ft;mt>ct;)Re(Ie,ft=je[ct++],be[ft]);return Ie},Ve=function(Ie,be){return be===void 0?I(Ie):rt(I(Ie),be)},L=function(Ie){var be=de.call(this,Ie=A(Ie,!0));return this===re&&t(Te,Ie)&&!t(Se,Ie)?!1:be||!t(this,Ie)||!t(Te,Ie)||t(this,j)&&this[j][Ie]?be:!0},B=function(Ie,be){if(Ie=E(Ie),be=A(be,!0),!(Ie===re&&t(Te,be)&&!t(Se,be))){var je=V(Ie,be);return je&&t(Te,be)&&!(t(Ie,j)&&Ie[j][be])&&(je.enumerable=!0),je}},H=function(Ie){for(var be=G(E(Ie)),je=[],ct=0,mt;be.length>ct;)!t(Te,mt=be[ct++])&&mt!=j&&mt!=s&&je.push(mt);return je},X=function(Ie){for(var be=Ie===re,je=G(be?Se:E(Ie)),ct=[],mt=0,ft;je.length>mt;)t(Te,ft=je[mt++])&&(!be||t(re,ft))&&ct.push(Te[ft]);return ct};oe||(ee=function(){if(this instanceof ee)throw TypeError("Symbol is not a constructor!");var Ie=c(arguments.length>0?arguments[0]:void 0),be=function(je){this===re&&be.call(Se,je),t(this,j)&&t(this[j],Ie)&&(this[j][Ie]=!1),le(this,Ie,T(1,je))};return r&&te&&le(re,Ie,{configurable:!0,set:be}),We(Ie)},i(ee[U],"toString",function(){return this._k}),p.f=B,O.f=Re,yc().f=q.f=H,Th().f=L,P.f=X,r&&!Au()&&i(re,"propertyIsEnumerable",L,!0),h.f=function(Le){return We(f(Le))}),n(n.G+n.W+n.F*!oe,{Symbol:ee});for(var xe="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ue=0;xe.length>ue;)f(xe[ue++]);for(var Ae=N(f.store),Ce=0;Ae.length>Ce;)g(Ae[Ce++]);n(n.S+n.F*!oe,"Symbol",{for:function(Le){return t(ce,Le+="")?ce[Le]:ce[Le]=ee(Le)},keyFor:function(Ie){if(!Ne(Ie))throw TypeError(Ie+" is not a symbol!");for(var be in ce)if(ce[be]===Ie)return be},useSetter:function(){te=!0},useSimple:function(){te=!1}}),n(n.S+n.F*!oe,"Object",{create:Ve,defineProperty:Re,defineProperties:rt,getOwnPropertyDescriptor:B,getOwnPropertyNames:H,getOwnPropertySymbols:X});var Be=o(function(){P.f(1)});return n(n.S+n.F*Be,"Object",{getOwnPropertySymbols:function(Ie){return P.f(S(Ie))}}),ae&&n(n.S+n.F*(!oe||o(function(){var Le=ee();return K([Le])!="[null]"||K({a:Le})!="{}"||K(Object(Le))!="{}"})),"JSON",{stringify:function(Ie){for(var be=[Ie],je=1,ct,mt;arguments.length>je;)be.push(arguments[je++]);if(mt=ct=be[1],!(!b(ct)&&Ie===void 0||Ne(Ie)))return m(ct)||(ct=function(ft,it){if(typeof mt=="function"&&(it=mt.call(this,ft,it)),!Ne(it))return it}),be[1]=ct,K.apply(ae,be)}}),ee[U][J]||Ns()(ee[U],J,ee[U].valueOf),u(ee,"Symbol"),u(Math,"Math",!0),u(e.JSON,"JSON",!0),NC}var MR={},kR;function Zte(){if(kR)return MR;kR=1;var e=ze();return e(e.S,"Object",{create:mc()}),MR}var LR={},NR;function Jte(){if(NR)return LR;NR=1;var e=ze();return e(e.S+e.F*!Dn(),"Object",{defineProperty:Qn().f}),LR}var qR={},DR;function Qte(){if(DR)return qR;DR=1;var e=ze();return e(e.S+e.F*!Dn(),"Object",{defineProperties:gV()}),qR}var FR={},E0,BR;function va(){if(BR)return E0;BR=1;var e=ze(),t=Lo(),r=Zr();return E0=function(n,i){var s=(t.Object||{})[n]||Object[n],o={};o[n]=i(s),e(e.S+e.F*r(function(){s(1)}),"Object",o)},E0}var zR;function ere(){if(zR)return FR;zR=1;var e=uo(),t=co().f;return va()("getOwnPropertyDescriptor",function(){return function(n,i){return t(e(n),i)}}),FR}var VR={},A0,GR;function lo(){if(GR)return A0;GR=1;var e=ao(),t=si(),r=HE()("IE_PROTO"),n=Object.prototype;return A0=Object.getPrototypeOf||function(i){return i=t(i),e(i,r)?i[r]:typeof i.constructor=="function"&&i instanceof i.constructor?i.constructor.prototype:i instanceof Object?n:null},A0}var $R;function tre(){if($R)return VR;$R=1;var e=si(),t=lo();return va()("getPrototypeOf",function(){return function(n){return t(e(n))}}),VR}var UR={},jR;function rre(){if(jR)return UR;jR=1;var e=si(),t=vc();return va()("keys",function(){return function(n){return t(e(n))}}),UR}var HR={},WR;function nre(){return WR||(WR=1,va()("getOwnPropertyNames",function(){return vV().f})),HR}var XR={},YR;function ire(){if(YR)return XR;YR=1;var e=on(),t=Tu().onFreeze;return va()("freeze",function(r){return function(i){return r&&e(i)?r(t(i)):i}}),XR}var KR={},ZR;function sre(){if(ZR)return KR;ZR=1;var e=on(),t=Tu().onFreeze;return va()("seal",function(r){return function(i){return r&&e(i)?r(t(i)):i}}),KR}var JR={},QR;function ore(){if(QR)return JR;QR=1;var e=on(),t=Tu().onFreeze;return va()("preventExtensions",function(r){return function(i){return r&&e(i)?r(t(i)):i}}),JR}var eI={},tI;function are(){if(tI)return eI;tI=1;var e=on();return va()("isFrozen",function(t){return function(n){return e(n)?t?t(n):!1:!0}}),eI}var rI={},nI;function ure(){if(nI)return rI;nI=1;var e=on();return va()("isSealed",function(t){return function(n){return e(n)?t?t(n):!1:!0}}),rI}var iI={},sI;function cre(){if(sI)return iI;sI=1;var e=on();return va()("isExtensible",function(t){return function(n){return e(n)?t?t(n):!0:!1}}),iI}var oI={},T0,aI;function mV(){if(aI)return T0;aI=1;var e=Dn(),t=vc(),r=ag(),n=Th(),i=si(),s=Ah(),o=Object.assign;return T0=!o||Zr()(function(){var a={},u={},c=Symbol(),f="abcdefghijklmnopqrst";return a[c]=7,f.split("").forEach(function(h){u[h]=h}),o({},a)[c]!=7||Object.keys(o({},u)).join("")!=f})?function(u,c){for(var f=i(u),h=arguments.length,g=1,y=r.f,m=n.f;h>g;)for(var _=s(arguments[g++]),b=y?t(_).concat(y(_)):t(_),S=b.length,E=0,A;S>E;)A=b[E++],(!e||m.call(_,A))&&(f[A]=_[A]);return f}:o,T0}var uI;function lre(){if(uI)return oI;uI=1;var e=ze();return e(e.S+e.F,"Object",{assign:mV()}),oI}var cI={},P0,lI;function yV(){return lI||(lI=1,P0=Object.is||function(t,r){return t===r?t!==0||1/t===1/r:t!=t&&r!=r}),P0}var fI;function fre(){if(fI)return cI;fI=1;var e=ze();return e(e.S,"Object",{is:yV()}),cI}var hI={},C0,dI;function YE(){if(dI)return C0;dI=1;var e=on(),t=mr(),r=function(n,i){if(t(n),!e(i)&&i!==null)throw TypeError(i+": can't set as prototype!")};return C0={set:Object.setPrototypeOf||("__proto__"in{}?function(n,i,s){try{s=No()(Function.call,co().f(Object.prototype,"__proto__").set,2),s(n,[]),i=!(n instanceof Array)}catch{i=!0}return function(a,u){return r(a,u),i?a.__proto__=u:s(a,u),a}}({},!1):void 0),check:r},C0}var pI;function hre(){if(pI)return hI;pI=1;var e=ze();return e(e.S,"Object",{setPrototypeOf:YE().set}),hI}var gI={},R0,vI;function Bl(){if(vI)return R0;vI=1;var e=qo(),t=En()("toStringTag"),r=e(function(){return arguments}())=="Arguments",n=function(i,s){try{return i[s]}catch{}};return R0=function(i){var s,o,a;return i===void 0?"Undefined":i===null?"Null":typeof(o=n(s=Object(i),t))=="string"?o:r?e(s):(a=e(s))=="Object"&&typeof s.callee=="function"?"Arguments":a},R0}var mI;function dre(){if(mI)return gI;mI=1;var e=Bl(),t={};return t[En()("toStringTag")]="z",t+""!="[object z]"&&qs()(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0),gI}var yI={},I0,_I;function _V(){return _I||(_I=1,I0=function(e,t,r){var n=r===void 0;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}),I0}var O0,bI;function bV(){if(bI)return O0;bI=1;var e=es(),t=on(),r=_V(),n=[].slice,i={},s=function(o,a,u){if(!(a in i)){for(var c=[],f=0;f<a;f++)c[f]="a["+f+"]";i[a]=Function("F,a","return new F("+c.join(",")+")")}return i[a](o,u)};return O0=Function.bind||function(a){var u=e(this),c=n.call(arguments,1),f=function(){var h=c.concat(n.call(arguments));return this instanceof f?s(u,h.length,h):r(u,h,a)};return t(u.prototype)&&(f.prototype=u.prototype),f},O0}var wI;function pre(){if(wI)return yI;wI=1;var e=ze();return e(e.P,"Function",{bind:bV()}),yI}var xI={},SI;function gre(){if(SI)return xI;SI=1;var e=Qn().f,t=Function.prototype,r=/^\s*function ([^ (]*)/,n="name";return n in t||Dn()&&e(t,n,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch{return""}}}),xI}var EI={},AI;function vre(){if(AI)return EI;AI=1;var e=on(),t=lo(),r=En()("hasInstance"),n=Function.prototype;return r in n||Qn().f(n,r,{value:function(i){if(typeof this!="function"||!e(i))return!1;if(!e(this.prototype))return i instanceof this;for(;i=t(i);)if(this.prototype===i)return!0;return!1}}),EI}var TI={},M0,PI;function KE(){return PI||(PI=1,M0=`	
\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\uFEFF`),M0}var k0,CI;function zl(){if(CI)return k0;CI=1;var e=ze(),t=ga(),r=Zr(),n=KE(),i="["+n+"]",s="âÂ",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),u=function(f,h,g){var y={},m=r(function(){return!!n[f]()||s[f]()!=s}),_=y[f]=m?h(c):n[f];g&&(y[g]=_),e(e.P+e.F*m,"String",y)},c=u.trim=function(f,h){return f=String(t(f)),h&1&&(f=f.replace(o,"")),h&2&&(f=f.replace(a,"")),f};return k0=u,k0}var L0,RI;function wV(){if(RI)return L0;RI=1;var e=Ur().parseInt,t=zl().trim,r=KE(),n=/^[-+]?0[xX]/;return L0=e(r+"08")!==8||e(r+"0x16")!==22?function(s,o){var a=t(String(s),3);return e(a,o>>>0||(n.test(a)?16:10))}:e,L0}var II;function mre(){if(II)return TI;II=1;var e=ze(),t=wV();return e(e.G+e.F*(parseInt!=t),{parseInt:t}),TI}var OI={},N0,MI;function xV(){if(MI)return N0;MI=1;var e=Ur().parseFloat,t=zl().trim;return N0=1/e(KE()+"-0")!==-1/0?function(n){var i=t(String(n),3),s=e(i);return s===0&&i.charAt(0)=="-"?-0:s}:e,N0}var kI;function yre(){if(kI)return OI;kI=1;var e=ze(),t=xV();return e(e.G+e.F*(parseFloat!=t),{parseFloat:t}),OI}var LI={},q0,NI;function ZE(){if(NI)return q0;NI=1;var e=on(),t=YE().set;return q0=function(r,n,i){var s=n.constructor,o;return s!==i&&typeof s=="function"&&(o=s.prototype)!==i.prototype&&e(o)&&t&&t(r,o),r},q0}var qI;function _re(){if(qI)return LI;qI=1;var e=Ur(),t=ao(),r=qo(),n=ZE(),i=pa(),s=Zr(),o=yc().f,a=co().f,u=Qn().f,c=zl().trim,f="Number",h=e[f],g=h,y=h.prototype,m=r(mc()(y))==f,_="trim"in String.prototype,b=function(T){var I=i(T,!1);if(typeof I=="string"&&I.length>2){I=_?I.trim():c(I,3);var q=I.charCodeAt(0),p,P,O;if(q===43||q===45){if(p=I.charCodeAt(2),p===88||p===120)return NaN}else if(q===48){switch(I.charCodeAt(1)){case 66:case 98:P=2,O=49;break;case 79:case 111:P=8,O=55;break;default:return+I}for(var N=I.slice(2),V=0,W=N.length,G;V<W;V++)if(G=N.charCodeAt(V),G<48||G>O)return NaN;return parseInt(N,P)}}return+I};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(I){var q=arguments.length<1?0:I,p=this;return p instanceof h&&(m?s(function(){y.valueOf.call(p)}):r(p)!=f)?n(new g(b(q)),p,h):b(q)};for(var S=Dn()?o(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0,A;S.length>E;E++)t(g,A=S[E])&&!t(h,A)&&u(h,A,a(g,A));h.prototype=y,y.constructor=h,qs()(e,f,h)}return LI}var DI={},D0,FI;function SV(){if(FI)return D0;FI=1;var e=qo();return D0=function(t,r){if(typeof t!="number"&&e(t)!="Number")throw TypeError(r);return+t},D0}var F0,BI;function JE(){if(BI)return F0;BI=1;var e=Do(),t=ga();return F0=function(n){var i=String(t(this)),s="",o=e(n);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(i+=i))o&1&&(s+=i);return s},F0}var zI;function bre(){if(zI)return DI;zI=1;var e=ze(),t=Do(),r=SV(),n=JE(),i=1 .toFixed,s=Math.floor,o=[0,0,0,0,0,0],a="Number.toFixed: incorrect invocation!",u="0",c=function(m,_){for(var b=-1,S=_;++b<6;)S+=m*o[b],o[b]=S%1e7,S=s(S/1e7)},f=function(m){for(var _=6,b=0;--_>=0;)b+=o[_],o[_]=s(b/m),b=b%m*1e7},h=function(){for(var m=6,_="";--m>=0;)if(_!==""||m===0||o[m]!==0){var b=String(o[m]);_=_===""?b:_+n.call(u,7-b.length)+b}return _},g=function(m,_,b){return _===0?b:_%2===1?g(m,_-1,b*m):g(m*m,_/2,b)},y=function(m){for(var _=0,b=m;b>=4096;)_+=12,b/=4096;for(;b>=2;)_+=1,b/=2;return _};return e(e.P+e.F*(!!i&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!Zr()(function(){i.call({})})),"Number",{toFixed:function(_){var b=r(this,a),S=t(_),E="",A=u,T,I,q,p;if(S<0||S>20)throw RangeError(a);if(b!=b)return"NaN";if(b<=-1e21||b>=1e21)return String(b);if(b<0&&(E="-",b=-b),b>1e-21)if(T=y(b*g(2,69,1))-69,I=T<0?b*g(2,-T,1):b/g(2,T,1),I*=4503599627370496,T=52-T,T>0){for(c(0,I),q=S;q>=7;)c(1e7,0),q-=7;for(c(g(10,q,1),0),q=T-1;q>=23;)f(1<<23),q-=23;f(1<<q),c(1,1),f(2),A=h()}else c(0,I),c(1<<-T,0),A=h()+n.call(u,S);return S>0?(p=A.length,A=E+(p<=S?"0."+n.call(u,S-p)+A:A.slice(0,p-S)+"."+A.slice(p-S))):A=E+A,A}}),DI}var VI={},GI;function wre(){if(GI)return VI;GI=1;var e=ze(),t=Zr(),r=SV(),n=1 .toPrecision;return e(e.P+e.F*(t(function(){return n.call(1,void 0)!=="1"})||!t(function(){n.call({})})),"Number",{toPrecision:function(s){var o=r(this,"Number#toPrecision: incorrect invocation!");return s===void 0?n.call(o):n.call(o,s)}}),VI}var $I={},UI;function xre(){if(UI)return $I;UI=1;var e=ze();return e(e.S,"Number",{EPSILON:Math.pow(2,-52)}),$I}var jI={},HI;function Sre(){if(HI)return jI;HI=1;var e=ze(),t=Ur().isFinite;return e(e.S,"Number",{isFinite:function(n){return typeof n=="number"&&t(n)}}),jI}var WI={},B0,XI;function EV(){if(XI)return B0;XI=1;var e=on(),t=Math.floor;return B0=function(n){return!e(n)&&isFinite(n)&&t(n)===n},B0}var YI;function Ere(){if(YI)return WI;YI=1;var e=ze();return e(e.S,"Number",{isInteger:EV()}),WI}var KI={},ZI;function Are(){if(ZI)return KI;ZI=1;var e=ze();return e(e.S,"Number",{isNaN:function(r){return r!=r}}),KI}var JI={},QI;function Tre(){if(QI)return JI;QI=1;var e=ze(),t=EV(),r=Math.abs;return e(e.S,"Number",{isSafeInteger:function(i){return t(i)&&r(i)<=9007199254740991}}),JI}var eO={},tO;function Pre(){if(tO)return eO;tO=1;var e=ze();return e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991}),eO}var rO={},nO;function Cre(){if(nO)return rO;nO=1;var e=ze();return e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991}),rO}var iO={},sO;function Rre(){if(sO)return iO;sO=1;var e=ze(),t=xV();return e(e.S+e.F*(Number.parseFloat!=t),"Number",{parseFloat:t}),iO}var oO={},aO;function Ire(){if(aO)return oO;aO=1;var e=ze(),t=wV();return e(e.S+e.F*(Number.parseInt!=t),"Number",{parseInt:t}),oO}var uO={},z0,cO;function AV(){return cO||(cO=1,z0=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}),z0}var lO;function Ore(){if(lO)return uO;lO=1;var e=ze(),t=AV(),r=Math.sqrt,n=Math.acosh;return e(e.S+e.F*!(n&&Math.floor(n(Number.MAX_VALUE))==710&&n(1/0)==1/0),"Math",{acosh:function(s){return(s=+s)<1?NaN:s>9490626562425156e-8?Math.log(s)+Math.LN2:t(s-1+r(s-1)*r(s+1))}}),uO}var fO={},hO;function Mre(){if(hO)return fO;hO=1;var e=ze(),t=Math.asinh;function r(n){return!isFinite(n=+n)||n==0?n:n<0?-r(-n):Math.log(n+Math.sqrt(n*n+1))}return e(e.S+e.F*!(t&&1/t(0)>0),"Math",{asinh:r}),fO}var dO={},pO;function kre(){if(pO)return dO;pO=1;var e=ze(),t=Math.atanh;return e(e.S+e.F*!(t&&1/t(-0)<0),"Math",{atanh:function(n){return(n=+n)==0?n:Math.log((1+n)/(1-n))/2}}),dO}var gO={},V0,vO;function QE(){return vO||(vO=1,V0=Math.sign||function(t){return(t=+t)==0||t!=t?t:t<0?-1:1}),V0}var mO;function Lre(){if(mO)return gO;mO=1;var e=ze(),t=QE();return e(e.S,"Math",{cbrt:function(n){return t(n=+n)*Math.pow(Math.abs(n),1/3)}}),gO}var yO={},_O;function Nre(){if(_O)return yO;_O=1;var e=ze();return e(e.S,"Math",{clz32:function(r){return(r>>>=0)?31-Math.floor(Math.log(r+.5)*Math.LOG2E):32}}),yO}var bO={},wO;function qre(){if(wO)return bO;wO=1;var e=ze(),t=Math.exp;return e(e.S,"Math",{cosh:function(n){return(t(n=+n)+t(-n))/2}}),bO}var xO={},G0,SO;function e2(){if(SO)return G0;SO=1;var e=Math.expm1;return G0=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||e(-2e-17)!=-2e-17?function(r){return(r=+r)==0?r:r>-1e-6&&r<1e-6?r+r*r/2:Math.exp(r)-1}:e,G0}var EO;function Dre(){if(EO)return xO;EO=1;var e=ze(),t=e2();return e(e.S+e.F*(t!=Math.expm1),"Math",{expm1:t}),xO}var AO={},$0,TO;function TV(){if(TO)return $0;TO=1;var e=QE(),t=Math.pow,r=t(2,-52),n=t(2,-23),i=t(2,127)*(2-n),s=t(2,-126),o=function(a){return a+1/r-1/r};return $0=Math.fround||function(u){var c=Math.abs(u),f=e(u),h,g;return c<s?f*o(c/s/n)*s*n:(h=(1+n/r)*c,g=h-(h-c),g>i||g!=g?f*(1/0):f*g)},$0}var PO;function Fre(){if(PO)return AO;PO=1;var e=ze();return e(e.S,"Math",{fround:TV()}),AO}var CO={},RO;function Bre(){if(RO)return CO;RO=1;var e=ze(),t=Math.abs;return e(e.S,"Math",{hypot:function(n,i){for(var s=0,o=0,a=arguments.length,u=0,c,f;o<a;)c=t(arguments[o++]),u<c?(f=u/c,s=s*f*f+1,u=c):c>0?(f=c/u,s+=f*f):s+=c;return u===1/0?1/0:u*Math.sqrt(s)}}),CO}var IO={},OO;function zre(){if(OO)return IO;OO=1;var e=ze(),t=Math.imul;return e(e.S+e.F*Zr()(function(){return t(4294967295,5)!=-5||t.length!=2}),"Math",{imul:function(n,i){var s=65535,o=+n,a=+i,u=s&o,c=s&a;return 0|u*c+((s&o>>>16)*c+u*(s&a>>>16)<<16>>>0)}}),IO}var MO={},kO;function Vre(){if(kO)return MO;kO=1;var e=ze();return e(e.S,"Math",{log10:function(r){return Math.log(r)*Math.LOG10E}}),MO}var LO={},NO;function Gre(){if(NO)return LO;NO=1;var e=ze();return e(e.S,"Math",{log1p:AV()}),LO}var qO={},DO;function $re(){if(DO)return qO;DO=1;var e=ze();return e(e.S,"Math",{log2:function(r){return Math.log(r)/Math.LN2}}),qO}var FO={},BO;function Ure(){if(BO)return FO;BO=1;var e=ze();return e(e.S,"Math",{sign:QE()}),FO}var zO={},VO;function jre(){if(VO)return zO;VO=1;var e=ze(),t=e2(),r=Math.exp;return e(e.S+e.F*Zr()(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(i){return Math.abs(i=+i)<1?(t(i)-t(-i))/2:(r(i-1)-r(-i-1))*(Math.E/2)}}),zO}var GO={},$O;function Hre(){if($O)return GO;$O=1;var e=ze(),t=e2(),r=Math.exp;return e(e.S,"Math",{tanh:function(i){var s=t(i=+i),o=t(-i);return s==1/0?1:o==1/0?-1:(s-o)/(r(i)+r(-i))}}),GO}var UO={},jO;function Wre(){if(jO)return UO;jO=1;var e=ze();return e(e.S,"Math",{trunc:function(r){return(r>0?Math.floor:Math.ceil)(r)}}),UO}var HO={},WO;function Xre(){if(WO)return HO;WO=1;var e=ze(),t=gc(),r=String.fromCharCode,n=String.fromCodePoint;return e(e.S+e.F*(!!n&&n.length!=1),"String",{fromCodePoint:function(s){for(var o=[],a=arguments.length,u=0,c;a>u;){if(c=+arguments[u++],t(c,1114111)!==c)throw RangeError(c+" is not a valid code point");o.push(c<65536?r(c):r(((c-=65536)>>10)+55296,c%1024+56320))}return o.join("")}}),HO}var XO={},YO;function Yre(){if(YO)return XO;YO=1;var e=ze(),t=uo(),r=Rn();return e(e.S,"String",{raw:function(i){for(var s=t(i.raw),o=r(s.length),a=arguments.length,u=[],c=0;o>c;)u.push(String(s[c++])),c<a&&u.push(String(arguments[c]));return u.join("")}}),XO}var KO={},ZO;function Kre(){return ZO||(ZO=1,zl()("trim",function(e){return function(){return e(this,3)}})),KO}var JO={},U0,QO;function cg(){if(QO)return U0;QO=1;var e=Do(),t=ga();return U0=function(r){return function(n,i){var s=String(t(n)),o=e(i),a=s.length,u,c;return o<0||o>=a?r?"":void 0:(u=s.charCodeAt(o),u<55296||u>56319||o+1===a||(c=s.charCodeAt(o+1))<56320||c>57343?r?s.charAt(o):u:r?s.slice(o,o+2):(u-55296<<10)+(c-56320)+65536)}},U0}var j0,eM;function Vl(){return eM||(eM=1,j0={}),j0}var H0,tM;function t2(){if(tM)return H0;tM=1;var e=mc(),t=dc(),r=Fl(),n={};return Ns()(n,En()("iterator"),function(){return this}),H0=function(i,s,o){i.prototype=e(n,{next:t(1,o)}),r(i,s+" Iterator")},H0}var W0,rM;function r2(){if(rM)return W0;rM=1;var e=Au(),t=ze(),r=qs(),n=Ns(),i=Vl(),s=t2(),o=Fl(),a=lo(),u=En()("iterator"),c=!([].keys&&"next"in[].keys()),f="@@iterator",h="keys",g="values",y=function(){return this};return W0=function(m,_,b,S,E,A,T){s(b,_,S);var I=function(U){if(!c&&U in O)return O[U];switch(U){case h:return function(){return new b(this,U)};case g:return function(){return new b(this,U)}}return function(){return new b(this,U)}},q=_+" Iterator",p=E==g,P=!1,O=m.prototype,N=O[u]||O[f]||E&&O[E],V=N||I(E),W=E?p?I("entries"):V:void 0,G=_=="Array"&&O.entries||N,ee,ae,K;if(G&&(K=a(G.call(new m)),K!==Object.prototype&&K.next&&(o(K,q,!0),!e&&typeof K[u]!="function"&&n(K,u,y))),p&&N&&N.name!==g&&(P=!0,V=function(){return N.call(this)}),(!e||T)&&(c||P||!O[u])&&n(O,u,V),i[_]=V,i[q]=y,E)if(ee={values:p?V:I(g),keys:A?V:I(h),entries:W},T)for(ae in ee)ae in O||r(O,ae,ee[ae]);else t(t.P+t.F*(c||P),_,ee);return ee},W0}var nM;function Zre(){if(nM)return JO;nM=1;var e=cg()(!0);return r2()(String,"String",function(t){this._t=String(t),this._i=0},function(){var t=this._t,r=this._i,n;return r>=t.length?{value:void 0,done:!0}:(n=e(t,r),this._i+=n.length,{value:n,done:!1})}),JO}var iM={},sM;function Jre(){if(sM)return iM;sM=1;var e=ze(),t=cg()(!1);return e(e.P,"String",{codePointAt:function(n){return t(this,n)}}),iM}var oM={},X0,aM;function lg(){if(aM)return X0;aM=1;var e=on(),t=qo(),r=En()("match");return X0=function(n){var i;return e(n)&&((i=n[r])!==void 0?!!i:t(n)=="RegExp")},X0}var Y0,uM;function n2(){if(uM)return Y0;uM=1;var e=lg(),t=ga();return Y0=function(r,n,i){if(e(n))throw TypeError("String#"+i+" doesn't accept regex!");return String(t(r))},Y0}var K0,cM;function i2(){if(cM)return K0;cM=1;var e=En()("match");return K0=function(t){var r=/./;try{"/./"[t](r)}catch{try{return r[e]=!1,!"/./"[t](r)}catch{}}return!0},K0}var lM;function Qre(){if(lM)return oM;lM=1;var e=ze(),t=Rn(),r=n2(),n="endsWith",i=""[n];return e(e.P+e.F*i2()(n),"String",{endsWith:function(o){var a=r(this,o,n),u=arguments.length>1?arguments[1]:void 0,c=t(a.length),f=u===void 0?c:Math.min(t(u),c),h=String(o);return i?i.call(a,h,f):a.slice(f-h.length,f)===h}}),oM}var fM={},hM;function ene(){if(hM)return fM;hM=1;var e=ze(),t=n2(),r="includes";return e(e.P+e.F*i2()(r),"String",{includes:function(i){return!!~t(this,i,r).indexOf(i,arguments.length>1?arguments[1]:void 0)}}),fM}var dM={},pM;function tne(){if(pM)return dM;pM=1;var e=ze();return e(e.P,"String",{repeat:JE()}),dM}var gM={},vM;function rne(){if(vM)return gM;vM=1;var e=ze(),t=Rn(),r=n2(),n="startsWith",i=""[n];return e(e.P+e.F*i2()(n),"String",{startsWith:function(o){var a=r(this,o,n),u=t(Math.min(arguments.length>1?arguments[1]:void 0,a.length)),c=String(o);return i?i.call(a,c,u):a.slice(u,u+c.length)===c}}),gM}var mM={},Z0,yM;function Ds(){if(yM)return Z0;yM=1;var e=ze(),t=Zr(),r=ga(),n=/"/g,i=function(s,o,a,u){var c=String(r(s)),f="<"+o;return a!==""&&(f+=" "+a+'="'+String(u).replace(n,"&quot;")+'"'),f+">"+c+"</"+o+">"};return Z0=function(s,o){var a={};a[s]=o(i),e(e.P+e.F*t(function(){var u=""[s]('"');return u!==u.toLowerCase()||u.split('"').length>3}),"String",a)},Z0}var _M;function nne(){return _M||(_M=1,Ds()("anchor",function(e){return function(r){return e(this,"a","name",r)}})),mM}var bM={},wM;function ine(){return wM||(wM=1,Ds()("big",function(e){return function(){return e(this,"big","","")}})),bM}var xM={},SM;function sne(){return SM||(SM=1,Ds()("blink",function(e){return function(){return e(this,"blink","","")}})),xM}var EM={},AM;function one(){return AM||(AM=1,Ds()("bold",function(e){return function(){return e(this,"b","","")}})),EM}var TM={},PM;function ane(){return PM||(PM=1,Ds()("fixed",function(e){return function(){return e(this,"tt","","")}})),TM}var CM={},RM;function une(){return RM||(RM=1,Ds()("fontcolor",function(e){return function(r){return e(this,"font","color",r)}})),CM}var IM={},OM;function cne(){return OM||(OM=1,Ds()("fontsize",function(e){return function(r){return e(this,"font","size",r)}})),IM}var MM={},kM;function lne(){return kM||(kM=1,Ds()("italics",function(e){return function(){return e(this,"i","","")}})),MM}var LM={},NM;function fne(){return NM||(NM=1,Ds()("link",function(e){return function(r){return e(this,"a","href",r)}})),LM}var qM={},DM;function hne(){return DM||(DM=1,Ds()("small",function(e){return function(){return e(this,"small","","")}})),qM}var FM={},BM;function dne(){return BM||(BM=1,Ds()("strike",function(e){return function(){return e(this,"strike","","")}})),FM}var zM={},VM;function pne(){return VM||(VM=1,Ds()("sub",function(e){return function(){return e(this,"sub","","")}})),zM}var GM={},$M;function gne(){return $M||($M=1,Ds()("sup",function(e){return function(){return e(this,"sup","","")}})),GM}var UM={},jM;function vne(){if(jM)return UM;jM=1;var e=ze();return e(e.S,"Date",{now:function(){return new Date().getTime()}}),UM}var HM={},WM;function mne(){if(WM)return HM;WM=1;var e=ze(),t=si(),r=pa();return e(e.P+e.F*Zr()(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1}),"Date",{toJSON:function(i){var s=t(this),o=r(s);return typeof o=="number"&&!isFinite(o)?null:s.toISOString()}}),HM}var XM={},J0,YM;function yne(){if(YM)return J0;YM=1;var e=Zr(),t=Date.prototype.getTime,r=Date.prototype.toISOString,n=function(i){return i>9?i:"0"+i};return J0=e(function(){return r.call(new Date(-5e13-1))!="0385-07-25T07:06:39.999Z"})||!e(function(){r.call(new Date(NaN))})?function(){if(!isFinite(t.call(this)))throw RangeError("Invalid time value");var s=this,o=s.getUTCFullYear(),a=s.getUTCMilliseconds(),u=o<0?"-":o>9999?"+":"";return u+("00000"+Math.abs(o)).slice(u?-6:-4)+"-"+n(s.getUTCMonth()+1)+"-"+n(s.getUTCDate())+"T"+n(s.getUTCHours())+":"+n(s.getUTCMinutes())+":"+n(s.getUTCSeconds())+"."+(a>99?a:"0"+n(a))+"Z"}:r,J0}var KM;function _ne(){if(KM)return XM;KM=1;var e=ze(),t=yne();return e(e.P+e.F*(Date.prototype.toISOString!==t),"Date",{toISOString:t}),XM}var ZM={},JM;function bne(){if(JM)return ZM;JM=1;var e=Date.prototype,t="Invalid Date",r="toString",n=e[r],i=e.getTime;return new Date(NaN)+""!=t&&qs()(e,r,function(){var o=i.call(this);return o===o?n.call(this):t}),ZM}var QM={},Q0,ek;function wne(){if(ek)return Q0;ek=1;var e=mr(),t=pa(),r="number";return Q0=function(n){if(n!=="string"&&n!==r&&n!=="default")throw TypeError("Incorrect hint");return t(e(this),n!=r)},Q0}var tk;function xne(){if(tk)return QM;tk=1;var e=En()("toPrimitive"),t=Date.prototype;return e in t||Ns()(t,e,wne()),QM}var rk={},nk;function Sne(){if(nk)return rk;nk=1;var e=ze();return e(e.S,"Array",{isArray:ug()}),rk}var ik={},ey,sk;function PV(){if(sk)return ey;sk=1;var e=mr();return ey=function(t,r,n,i){try{return i?r(e(n)[0],n[1]):r(n)}catch(o){var s=t.return;throw s!==void 0&&e(s.call(t)),o}},ey}var ty,ok;function s2(){if(ok)return ty;ok=1;var e=Vl(),t=En()("iterator"),r=Array.prototype;return ty=function(n){return n!==void 0&&(e.Array===n||r[t]===n)},ty}var ry,ak;function o2(){if(ak)return ry;ak=1;var e=Qn(),t=dc();return ry=function(r,n,i){n in r?e.f(r,n,t(0,i)):r[n]=i},ry}var ny,uk;function a2(){if(uk)return ny;uk=1;var e=Bl(),t=En()("iterator"),r=Vl();return ny=Lo().getIteratorMethod=function(n){if(n!=null)return n[t]||n["@@iterator"]||r[e(n)]},ny}var iy,ck;function fg(){if(ck)return iy;ck=1;var e=En()("iterator"),t=!1;try{var r=[7][e]();r.return=function(){t=!0},Array.from(r,function(){throw 2})}catch{}return iy=function(n,i){if(!i&&!t)return!1;var s=!1;try{var o=[7],a=o[e]();a.next=function(){return{done:s=!0}},o[e]=function(){return a},n(o)}catch{}return s},iy}var lk;function Ene(){if(lk)return ik;lk=1;var e=No(),t=ze(),r=si(),n=PV(),i=s2(),s=Rn(),o=o2(),a=a2();return t(t.S+t.F*!fg()(function(u){Array.from(u)}),"Array",{from:function(c){var f=r(c),h=typeof this=="function"?this:Array,g=arguments.length,y=g>1?arguments[1]:void 0,m=y!==void 0,_=0,b=a(f),S,E,A,T;if(m&&(y=e(y,g>2?arguments[2]:void 0,2)),b!=null&&!(h==Array&&i(b)))for(T=b.call(f),E=new h;!(A=T.next()).done;_++)o(E,_,m?n(T,y,[A.value,_],!0):A.value);else for(S=s(f.length),E=new h(S);S>_;_++)o(E,_,m?y(f[_],_):f[_]);return E.length=_,E}}),ik}var fk={},hk;function Ane(){if(hk)return fk;hk=1;var e=ze(),t=o2();return e(e.S+e.F*Zr()(function(){function r(){}return!(Array.of.call(r)instanceof r)}),"Array",{of:function(){for(var n=0,i=arguments.length,s=new(typeof this=="function"?this:Array)(i);i>n;)t(s,n,arguments[n++]);return s.length=i,s}}),fk}var dk={},sy,pk;function Fo(){if(pk)return sy;pk=1;var e=Zr();return sy=function(t,r){return!!t&&e(function(){r?t.call(null,function(){},1):t.call(null)})},sy}var gk;function Tne(){if(gk)return dk;gk=1;var e=ze(),t=uo(),r=[].join;return e(e.P+e.F*(Ah()!=Object||!Fo()(r)),"Array",{join:function(i){return r.call(t(this),i===void 0?",":i)}}),dk}var vk={},mk;function Pne(){if(mk)return vk;mk=1;var e=ze(),t=XE(),r=qo(),n=gc(),i=Rn(),s=[].slice;return e(e.P+e.F*Zr()(function(){t&&s.call(t)}),"Array",{slice:function(a,u){var c=i(this.length),f=r(this);if(u=u===void 0?c:u,f=="Array")return s.call(this,a,u);for(var h=n(a,c),g=n(u,c),y=i(g-h),m=new Array(y),_=0;_<y;_++)m[_]=f=="String"?this.charAt(h+_):this[h+_];return m}}),vk}var yk={},_k;function Cne(){if(_k)return yk;_k=1;var e=ze(),t=es(),r=si(),n=Zr(),i=[].sort,s=[1,2,3];return e(e.P+e.F*(n(function(){s.sort(void 0)})||!n(function(){s.sort(null)})||!Fo()(i)),"Array",{sort:function(a){return a===void 0?i.call(r(this)):i.call(r(this),t(a))}}),yk}var bk={},oy,wk;function Rne(){if(wk)return oy;wk=1;var e=on(),t=ug(),r=En()("species");return oy=function(n){var i;return t(n)&&(i=n.constructor,typeof i=="function"&&(i===Array||t(i.prototype))&&(i=void 0),e(i)&&(i=i[r],i===null&&(i=void 0))),i===void 0?Array:i},oy}var ay,xk;function u2(){if(xk)return ay;xk=1;var e=Rne();return ay=function(t,r){return new(e(t))(r)},ay}var uy,Sk;function ma(){if(Sk)return uy;Sk=1;var e=No(),t=Ah(),r=si(),n=Rn(),i=u2();return uy=function(s,o){var a=s==1,u=s==2,c=s==3,f=s==4,h=s==6,g=s==5||h,y=o||i;return function(m,_,b){for(var S=r(m),E=t(S),A=e(_,b,3),T=n(E.length),I=0,q=a?y(m,T):u?y(m,0):void 0,p,P;T>I;I++)if((g||I in E)&&(p=E[I],P=A(p,I,S),s)){if(a)q[I]=P;else if(P)switch(s){case 3:return!0;case 5:return p;case 6:return I;case 2:q.push(p)}else if(f)return!1}return h?-1:c||f?f:q}},uy}var Ek;function Ine(){if(Ek)return bk;Ek=1;var e=ze(),t=ma()(0),r=Fo()([].forEach,!0);return e(e.P+e.F*!r,"Array",{forEach:function(i){return t(this,i,arguments[1])}}),bk}var Ak={},Tk;function One(){if(Tk)return Ak;Tk=1;var e=ze(),t=ma()(1);return e(e.P+e.F*!Fo()([].map,!0),"Array",{map:function(n){return t(this,n,arguments[1])}}),Ak}var Pk={},Ck;function Mne(){if(Ck)return Pk;Ck=1;var e=ze(),t=ma()(2);return e(e.P+e.F*!Fo()([].filter,!0),"Array",{filter:function(n){return t(this,n,arguments[1])}}),Pk}var Rk={},Ik;function kne(){if(Ik)return Rk;Ik=1;var e=ze(),t=ma()(3);return e(e.P+e.F*!Fo()([].some,!0),"Array",{some:function(n){return t(this,n,arguments[1])}}),Rk}var Ok={},Mk;function Lne(){if(Mk)return Ok;Mk=1;var e=ze(),t=ma()(4);return e(e.P+e.F*!Fo()([].every,!0),"Array",{every:function(n){return t(this,n,arguments[1])}}),Ok}var kk={},cy,Lk;function CV(){if(Lk)return cy;Lk=1;var e=es(),t=si(),r=Ah(),n=Rn();return cy=function(i,s,o,a,u){e(s);var c=t(i),f=r(c),h=n(c.length),g=u?h-1:0,y=u?-1:1;if(o<2)for(;;){if(g in f){a=f[g],g+=y;break}if(g+=y,u?g<0:h<=g)throw TypeError("Reduce of empty array with no initial value")}for(;u?g>=0:h>g;g+=y)g in f&&(a=s(a,f[g],g,c));return a},cy}var Nk;function Nne(){if(Nk)return kk;Nk=1;var e=ze(),t=CV();return e(e.P+e.F*!Fo()([].reduce,!0),"Array",{reduce:function(n){return t(this,n,arguments.length,arguments[1],!1)}}),kk}var qk={},Dk;function qne(){if(Dk)return qk;Dk=1;var e=ze(),t=CV();return e(e.P+e.F*!Fo()([].reduceRight,!0),"Array",{reduceRight:function(n){return t(this,n,arguments.length,arguments[1],!0)}}),qk}var Fk={},Bk;function Dne(){if(Bk)return Fk;Bk=1;var e=ze(),t=og()(!1),r=[].indexOf,n=!!r&&1/[1].indexOf(1,-0)<0;return e(e.P+e.F*(n||!Fo()(r)),"Array",{indexOf:function(s){return n?r.apply(this,arguments)||0:t(this,s,arguments[1])}}),Fk}var zk={},Vk;function Fne(){if(Vk)return zk;Vk=1;var e=ze(),t=uo(),r=Do(),n=Rn(),i=[].lastIndexOf,s=!!i&&1/[1].lastIndexOf(1,-0)<0;return e(e.P+e.F*(s||!Fo()(i)),"Array",{lastIndexOf:function(a){if(s)return i.apply(this,arguments)||0;var u=t(this),c=n(u.length),f=c-1;for(arguments.length>1&&(f=Math.min(f,r(arguments[1]))),f<0&&(f=c+f);f>=0;f--)if(f in u&&u[f]===a)return f||0;return-1}}),zk}var Gk={},ly,$k;function RV(){if($k)return ly;$k=1;var e=si(),t=gc(),r=Rn();return ly=[].copyWithin||function(i,s){var o=e(this),a=r(o.length),u=t(i,a),c=t(s,a),f=arguments.length>2?arguments[2]:void 0,h=Math.min((f===void 0?a:t(f,a))-c,a-u),g=1;for(c<u&&u<c+h&&(g=-1,c+=h-1,u+=h-1);h-- >0;)c in o?o[u]=o[c]:delete o[u],u+=g,c+=g;return o},ly}var fy,Uk;function Pu(){if(Uk)return fy;Uk=1;var e=En()("unscopables"),t=Array.prototype;return t[e]==null&&Ns()(t,e,{}),fy=function(r){t[e][r]=!0},fy}var jk;function Bne(){if(jk)return Gk;jk=1;var e=ze();return e(e.P,"Array",{copyWithin:RV()}),Pu()("copyWithin"),Gk}var Hk={},hy,Wk;function c2(){if(Wk)return hy;Wk=1;var e=si(),t=gc(),r=Rn();return hy=function(i){for(var s=e(this),o=r(s.length),a=arguments.length,u=t(a>1?arguments[1]:void 0,o),c=a>2?arguments[2]:void 0,f=c===void 0?o:t(c,o);f>u;)s[u++]=i;return s},hy}var Xk;function zne(){if(Xk)return Hk;Xk=1;var e=ze();return e(e.P,"Array",{fill:c2()}),Pu()("fill"),Hk}var Yk={},Kk;function Vne(){if(Kk)return Yk;Kk=1;var e=ze(),t=ma()(5),r="find",n=!0;return r in[]&&Array(1)[r](function(){n=!1}),e(e.P+e.F*n,"Array",{find:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0)}}),Pu()(r),Yk}var Zk={},Jk;function Gne(){if(Jk)return Zk;Jk=1;var e=ze(),t=ma()(6),r="findIndex",n=!0;return r in[]&&Array(1)[r](function(){n=!1}),e(e.P+e.F*n,"Array",{findIndex:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0)}}),Pu()(r),Zk}var Qk={},dy,eL;function _c(){if(eL)return dy;eL=1;var e=Ur(),t=Qn(),r=Dn(),n=En()("species");return dy=function(i){var s=e[i];r&&s&&!s[n]&&t.f(s,n,{configurable:!0,get:function(){return this}})},dy}var tL;function $ne(){return tL||(tL=1,_c()("Array")),Qk}var py,rL;function IV(){return rL||(rL=1,py=function(e,t){return{value:t,done:!!e}}),py}var gy,nL;function l2(){if(nL)return gy;nL=1;var e=Pu(),t=IV(),r=Vl(),n=uo();return gy=r2()(Array,"Array",function(i,s){this._t=n(i),this._i=0,this._k=s},function(){var i=this._t,s=this._k,o=this._i++;return!i||o>=i.length?(this._t=void 0,t(1)):s=="keys"?t(0,o):s=="values"?t(0,i[o]):t(0,[o,i[o]])},"values"),r.Arguments=r.Array,e("keys"),e("values"),e("entries"),gy}var iL={},vy,sL;function Ph(){if(sL)return vy;sL=1;var e=mr();return vy=function(){var t=e(this),r="";return t.global&&(r+="g"),t.ignoreCase&&(r+="i"),t.multiline&&(r+="m"),t.unicode&&(r+="u"),t.sticky&&(r+="y"),r},vy}var oL;function Une(){if(oL)return iL;oL=1;var e=Ur(),t=ZE(),r=Qn().f,n=yc().f,i=lg(),s=Ph(),o=e.RegExp,a=o,u=o.prototype,c=/a/g,f=/a/g,h=new o(c)!==c;if(Dn()&&(!h||Zr()(function(){return f[En()("match")]=!1,o(c)!=c||o(f)==f||o(c,"i")!="/a/i"}))){o=function(b,S){var E=this instanceof o,A=i(b),T=S===void 0;return!E&&A&&b.constructor===o&&T?b:t(h?new a(A&&!T?b.source:b,S):a((A=b instanceof o)?b.source:b,A&&T?s.call(b):S),E?this:u,o)};for(var g=function(_){_ in o||r(o,_,{configurable:!0,get:function(){return a[_]},set:function(b){a[_]=b}})},y=n(a),m=0;y.length>m;)g(y[m++]);u.constructor=o,o.prototype=u,qs()(e,"RegExp",o)}return _c()("RegExp"),iL}var aL={},my,uL;function f2(){if(uL)return my;uL=1;var e=Ph(),t=RegExp.prototype.exec,r=String.prototype.replace,n=t,i="lastIndex",s=function(){var u=/a/,c=/b*/g;return t.call(u,"a"),t.call(c,"a"),u[i]!==0||c[i]!==0}(),o=/()??/.exec("")[1]!==void 0,a=s||o;return a&&(n=function(c){var f=this,h,g,y,m;return o&&(g=new RegExp("^"+f.source+"$(?!\\s)",e.call(f))),s&&(h=f[i]),y=t.call(f,c),s&&y&&(f[i]=f.global?y.index+y[0].length:h),o&&y&&y.length>1&&r.call(y[0],g,function(){for(m=1;m<arguments.length-2;m++)arguments[m]===void 0&&(y[m]=void 0)}),y}),my=n,my}var cL;function OV(){if(cL)return aL;cL=1;var e=f2();return ze()({target:"RegExp",proto:!0,forced:e!==/./.exec},{exec:e}),aL}var lL={},fL={},hL;function MV(){return hL||(hL=1,Dn()&&/./g.flags!="g"&&Qn().f(RegExp.prototype,"flags",{configurable:!0,get:Ph()})),fL}var dL;function jne(){if(dL)return lL;dL=1,MV();var e=mr(),t=Ph(),r=Dn(),n="toString",i=/./[n],s=function(o){qs()(RegExp.prototype,n,o,!0)};return Zr()(function(){return i.call({source:"a",flags:"b"})!="/a/b"})?s(function(){var a=e(this);return"/".concat(a.source,"/","flags"in a?a.flags:!r&&a instanceof RegExp?t.call(a):void 0)}):i.name!=n&&s(function(){return i.call(this)}),lL}var pL={},yy,gL;function h2(){if(gL)return yy;gL=1;var e=cg()(!0);return yy=function(t,r,n){return r+(n?e(t,r).length:1)},yy}var _y,vL;function hg(){if(vL)return _y;vL=1;var e=Bl(),t=RegExp.prototype.exec;return _y=function(r,n){var i=r.exec;if(typeof i=="function"){var s=i.call(r,n);if(typeof s!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if(e(r)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return t.call(r,n)},_y}var by,mL;function dg(){if(mL)return by;mL=1,OV();var e=qs(),t=Ns(),r=Zr(),n=ga(),i=En(),s=f2(),o=i("species"),a=!r(function(){var c=/./;return c.exec=function(){var f=[];return f.groups={a:"7"},f},"".replace(c,"$<a>")!=="7"}),u=function(){var c=/(?:)/,f=c.exec;c.exec=function(){return f.apply(this,arguments)};var h="ab".split(c);return h.length===2&&h[0]==="a"&&h[1]==="b"}();return by=function(c,f,h){var g=i(c),y=!r(function(){var A={};return A[g]=function(){return 7},""[c](A)!=7}),m=y?!r(function(){var A=!1,T=/a/;return T.exec=function(){return A=!0,null},c==="split"&&(T.constructor={},T.constructor[o]=function(){return T}),T[g](""),!A}):void 0;if(!y||!m||c==="replace"&&!a||c==="split"&&!u){var _=/./[g],b=h(n,g,""[c],function(T,I,q,p,P){return I.exec===s?y&&!P?{done:!0,value:_.call(I,q,p)}:{done:!0,value:T.call(q,I,p)}:{done:!1}}),S=b[0],E=b[1];e(String.prototype,c,S),t(RegExp.prototype,g,f==2?function(A,T){return E.call(A,this,T)}:function(A){return E.call(A,this)})}},by}var yL;function Hne(){if(yL)return pL;yL=1;var e=mr(),t=Rn(),r=h2(),n=hg();return dg()("match",1,function(i,s,o,a){return[function(c){var f=i(this),h=c==null?void 0:c[s];return h!==void 0?h.call(c,f):new RegExp(c)[s](String(f))},function(u){var c=a(o,u,this);if(c.done)return c.value;var f=e(u),h=String(this);if(!f.global)return n(f,h);var g=f.unicode;f.lastIndex=0;for(var y=[],m=0,_;(_=n(f,h))!==null;){var b=String(_[0]);y[m]=b,b===""&&(f.lastIndex=r(h,t(f.lastIndex),g)),m++}return m===0?null:y}]}),pL}var _L={},bL;function Wne(){if(bL)return _L;bL=1;var e=mr(),t=si(),r=Rn(),n=Do(),i=h2(),s=hg(),o=Math.max,a=Math.min,u=Math.floor,c=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,h=function(g){return g===void 0?g:String(g)};return dg()("replace",2,function(g,y,m,_){return[function(E,A){var T=g(this),I=E==null?void 0:E[y];return I!==void 0?I.call(E,T,A):m.call(String(T),E,A)},function(S,E){var A=_(m,S,this,E);if(A.done)return A.value;var T=e(S),I=String(this),q=typeof E=="function";q||(E=String(E));var p=T.global;if(p){var P=T.unicode;T.lastIndex=0}for(var O=[];;){var N=s(T,I);if(N===null||(O.push(N),!p))break;var V=String(N[0]);V===""&&(T.lastIndex=i(I,r(T.lastIndex),P))}for(var W="",G=0,ee=0;ee<O.length;ee++){N=O[ee];for(var ae=String(N[0]),K=o(a(n(N.index),I.length),0),U=[],j=1;j<N.length;j++)U.push(h(N[j]));var J=N.groups;if(q){var de=[ae].concat(U,K,I);J!==void 0&&de.push(J);var ce=String(E.apply(void 0,de))}else ce=b(ae,I,K,U,J,E);K>=G&&(W+=I.slice(G,K)+ce,G=K+ae.length)}return W+I.slice(G)}];function b(S,E,A,T,I,q){var p=A+S.length,P=T.length,O=f;return I!==void 0&&(I=t(I),O=c),m.call(q,O,function(N,V){var W;switch(V.charAt(0)){case"$":return"$";case"&":return S;case"`":return E.slice(0,A);case"'":return E.slice(p);case"<":W=I[V.slice(1,-1)];break;default:var G=+V;if(G===0)return N;if(G>P){var ee=u(G/10);return ee===0?N:ee<=P?T[ee-1]===void 0?V.charAt(1):T[ee-1]+V.charAt(1):N}W=T[G-1]}return W===void 0?"":W})}}),_L}var wL={},xL;function Xne(){if(xL)return wL;xL=1;var e=mr(),t=yV(),r=hg();return dg()("search",1,function(n,i,s,o){return[function(u){var c=n(this),f=u==null?void 0:u[i];return f!==void 0?f.call(u,c):new RegExp(u)[i](String(c))},function(a){var u=o(s,a,this);if(u.done)return u.value;var c=e(a),f=String(this),h=c.lastIndex;t(h,0)||(c.lastIndex=0);var g=r(c,f);return t(c.lastIndex,h)||(c.lastIndex=h),g===null?-1:g.index}]}),wL}var SL={},wy,EL;function Ch(){if(EL)return wy;EL=1;var e=mr(),t=es(),r=En()("species");return wy=function(n,i){var s=e(n).constructor,o;return s===void 0||(o=e(s)[r])==null?i:t(o)},wy}var AL;function Yne(){if(AL)return SL;AL=1;var e=lg(),t=mr(),r=Ch(),n=h2(),i=Rn(),s=hg(),o=f2(),a=Zr(),u=Math.min,c=[].push,f="split",h="length",g="lastIndex",y=4294967295,m=!a(function(){});return dg()("split",2,function(_,b,S,E){var A;return"abbc"[f](/(b)*/)[1]=="c"||"test"[f](/(?:)/,-1)[h]!=4||"ab"[f](/(?:ab)*/)[h]!=2||"."[f](/(.?)(.?)/)[h]!=4||"."[f](/()()/)[h]>1||""[f](/.?/)[h]?A=function(T,I){var q=String(this);if(T===void 0&&I===0)return[];if(!e(T))return S.call(q,T,I);for(var p=[],P=(T.ignoreCase?"i":"")+(T.multiline?"m":"")+(T.unicode?"u":"")+(T.sticky?"y":""),O=0,N=I===void 0?y:I>>>0,V=new RegExp(T.source,P+"g"),W,G,ee;(W=o.call(V,q))&&(G=V[g],!(G>O&&(p.push(q.slice(O,W.index)),W[h]>1&&W.index<q[h]&&c.apply(p,W.slice(1)),ee=W[0][h],O=G,p[h]>=N)));)V[g]===W.index&&V[g]++;return O===q[h]?(ee||!V.test(""))&&p.push(""):p.push(q.slice(O)),p[h]>N?p.slice(0,N):p}:"0"[f](void 0,0)[h]?A=function(T,I){return T===void 0&&I===0?[]:S.call(this,T,I)}:A=S,[function(I,q){var p=_(this),P=I==null?void 0:I[b];return P!==void 0?P.call(I,p,q):A.call(String(p),I,q)},function(T,I){var q=E(A,T,this,I,A!==S);if(q.done)return q.value;var p=t(T),P=String(this),O=r(p,RegExp),N=p.unicode,V=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(m?"y":"g"),W=new O(m?p:"^(?:"+p.source+")",V),G=I===void 0?y:I>>>0;if(G===0)return[];if(P.length===0)return s(W,P)===null?[P]:[];for(var ee=0,ae=0,K=[];ae<P.length;){W.lastIndex=m?ae:0;var U=s(W,m?P:P.slice(ae)),j;if(U===null||(j=u(i(W.lastIndex+(m?0:ae)),P.length))===ee)ae=n(P,ae,N);else{if(K.push(P.slice(ee,ae)),K.length===G)return K;for(var J=1;J<=U.length-1;J++)if(K.push(U[J]),K.length===G)return K;ae=ee=j}}return K.push(P.slice(ee)),K}]}),SL}var TL={},xy,PL;function bc(){return PL||(PL=1,xy=function(e,t,r,n){if(!(e instanceof t)||n!==void 0&&n in e)throw TypeError(r+": incorrect invocation!");return e}),xy}var Sy={exports:{}},CL;function wc(){if(CL)return Sy.exports;CL=1;var e=No(),t=PV(),r=s2(),n=mr(),i=Rn(),s=a2(),o={},a={},u=Sy.exports=function(c,f,h,g,y){var m=y?function(){return c}:s(c),_=e(h,g,f?2:1),b=0,S,E,A,T;if(typeof m!="function")throw TypeError(c+" is not iterable!");if(r(m)){for(S=i(c.length);S>b;b++)if(T=f?_(n(E=c[b])[0],E[1]):_(c[b]),T===o||T===a)return T}else for(A=m.call(c);!(E=A.next()).done;)if(T=t(A,_,E.value,f),T===o||T===a)return T};return u.BREAK=o,u.RETURN=a,Sy.exports}var Ey,RL;function d2(){if(RL)return Ey;RL=1;var e=No(),t=_V(),r=XE(),n=UE(),i=Ur(),s=i.process,o=i.setImmediate,a=i.clearImmediate,u=i.MessageChannel,c=i.Dispatch,f=0,h={},g="onreadystatechange",y,m,_,b=function(){var E=+this;if(h.hasOwnProperty(E)){var A=h[E];delete h[E],A()}},S=function(E){b.call(E.data)};return(!o||!a)&&(o=function(A){for(var T=[],I=1;arguments.length>I;)T.push(arguments[I++]);return h[++f]=function(){t(typeof A=="function"?A:Function(A),T)},y(f),f},a=function(A){delete h[A]},qo()(s)=="process"?y=function(E){s.nextTick(e(b,E,1))}:c&&c.now?y=function(E){c.now(e(b,E,1))}:u?(m=new u,_=m.port2,m.port1.onmessage=S,y=e(_.postMessage,_,1)):i.addEventListener&&typeof postMessage=="function"&&!i.importScripts?(y=function(E){i.postMessage(E+"","*")},i.addEventListener("message",S,!1)):g in n("script")?y=function(E){r.appendChild(n("script"))[g]=function(){r.removeChild(this),b.call(E)}}:y=function(E){setTimeout(e(b,E,1),0)}),Ey={set:o,clear:a},Ey}var Ay,IL;function p2(){if(IL)return Ay;IL=1;var e=Ur(),t=d2().set,r=e.MutationObserver||e.WebKitMutationObserver,n=e.process,i=e.Promise,s=qo()(n)=="process";return Ay=function(){var o,a,u,c=function(){var y,m;for(s&&(y=n.domain)&&y.exit();o;){m=o.fn,o=o.next;try{m()}catch(_){throw o?u():a=void 0,_}}a=void 0,y&&y.enter()};if(s)u=function(){n.nextTick(c)};else if(r&&!(e.navigator&&e.navigator.standalone)){var f=!0,h=document.createTextNode("");new r(c).observe(h,{characterData:!0}),u=function(){h.data=f=!f}}else if(i&&i.resolve){var g=i.resolve(void 0);u=function(){g.then(c)}}else u=function(){t.call(e,c)};return function(y){var m={fn:y,next:void 0};a&&(a.next=m),o||(o=m,u()),a=m}},Ay}var Ty={},OL;function g2(){if(OL)return Ty;OL=1;var e=es();function t(r){var n,i;this.promise=new r(function(s,o){if(n!==void 0||i!==void 0)throw TypeError("Bad Promise constructor");n=s,i=o}),this.resolve=e(n),this.reject=e(i)}return Ty.f=function(r){return new t(r)},Ty}var Py,ML;function kV(){return ML||(ML=1,Py=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}),Py}var Cy,kL;function pg(){if(kL)return Cy;kL=1;var e=Ur(),t=e.navigator;return Cy=t&&t.userAgent||"",Cy}var Ry,LL;function LV(){if(LL)return Ry;LL=1;var e=mr(),t=on(),r=g2();return Ry=function(n,i){if(e(n),t(i)&&i.constructor===n)return i;var s=r.f(n),o=s.resolve;return o(i),s.promise},Ry}var Iy,NL;function xc(){if(NL)return Iy;NL=1;var e=qs();return Iy=function(t,r,n){for(var i in r)e(t,i,r[i],n);return t},Iy}var qL;function Kne(){if(qL)return TL;qL=1;var e=Au(),t=Ur(),r=No(),n=Bl(),i=ze(),s=on(),o=es(),a=bc(),u=wc(),c=Ch(),f=d2().set,h=p2()(),g=g2(),y=kV(),m=pg(),_=LV(),b="Promise",S=t.TypeError,E=t.process,A=E&&E.versions,T=A&&A.v8||"",I=t[b],q=n(E)=="process",p=function(){},P,O,N,V,W=O=g.f,G=!!function(){try{var ce=I.resolve(1),Te=(ce.constructor={})[En()("species")]=function(Se){Se(p,p)};return(q||typeof PromiseRejectionEvent=="function")&&ce.then(p)instanceof Te&&T.indexOf("6.6")!==0&&m.indexOf("Chrome/66")===-1}catch{}}(),ee=function(ce){var Te;return s(ce)&&typeof(Te=ce.then)=="function"?Te:!1},ae=function(ce,Te){if(!ce._n){ce._n=!0;var Se=ce._c;h(function(){for(var re=ce._v,oe=ce._s==1,ne=0,te=function(le){var We=oe?le.ok:le.fail,Ne=le.resolve,Re=le.reject,rt=le.domain,Ve,L,B;try{We?(oe||(ce._h==2&&j(ce),ce._h=1),We===!0?Ve=re:(rt&&rt.enter(),Ve=We(re),rt&&(rt.exit(),B=!0)),Ve===le.promise?Re(S("Promise-chain cycle")):(L=ee(Ve))?L.call(Ve,Ne,Re):Ne(Ve)):Re(re)}catch(H){rt&&!B&&rt.exit(),Re(H)}};Se.length>ne;)te(Se[ne++]);ce._c=[],ce._n=!1,Te&&!ce._h&&K(ce)})}},K=function(ce){f.call(t,function(){var Te=ce._v,Se=U(ce),re,oe,ne;if(Se&&(re=y(function(){q?E.emit("unhandledRejection",Te,ce):(oe=t.onunhandledrejection)?oe({promise:ce,reason:Te}):(ne=t.console)&&ne.error&&ne.error("Unhandled promise rejection",Te)}),ce._h=q||U(ce)?2:1),ce._a=void 0,Se&&re.e)throw re.v})},U=function(ce){return ce._h!==1&&(ce._a||ce._c).length===0},j=function(ce){f.call(t,function(){var Te;q?E.emit("rejectionHandled",ce):(Te=t.onrejectionhandled)&&Te({promise:ce,reason:ce._v})})},J=function(ce){var Te=this;Te._d||(Te._d=!0,Te=Te._w||Te,Te._v=ce,Te._s=2,Te._a||(Te._a=Te._c.slice()),ae(Te,!0))},de=function(ce){var Te=this,Se;if(!Te._d){Te._d=!0,Te=Te._w||Te;try{if(Te===ce)throw S("Promise can't be resolved itself");(Se=ee(ce))?h(function(){var re={_w:Te,_d:!1};try{Se.call(ce,r(de,re,1),r(J,re,1))}catch(oe){J.call(re,oe)}}):(Te._v=ce,Te._s=1,ae(Te,!1))}catch(re){J.call({_w:Te,_d:!1},re)}}};return G||(I=function(Te){a(this,I,b,"_h"),o(Te),P.call(this);try{Te(r(de,this,1),r(J,this,1))}catch(Se){J.call(this,Se)}},P=function(Te){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},P.prototype=xc()(I.prototype,{then:function(Te,Se){var re=W(c(this,I));return re.ok=typeof Te=="function"?Te:!0,re.fail=typeof Se=="function"&&Se,re.domain=q?E.domain:void 0,this._c.push(re),this._a&&this._a.push(re),this._s&&ae(this,!1),re.promise},catch:function(ce){return this.then(void 0,ce)}}),N=function(){var ce=new P;this.promise=ce,this.resolve=r(de,ce,1),this.reject=r(J,ce,1)},g.f=W=function(ce){return ce===I||ce===V?new N(ce):O(ce)}),i(i.G+i.W+i.F*!G,{Promise:I}),Fl()(I,b),_c()(b),V=Lo()[b],i(i.S+i.F*!G,b,{reject:function(Te){var Se=W(this),re=Se.reject;return re(Te),Se.promise}}),i(i.S+i.F*(e||!G),b,{resolve:function(Te){return _(e&&this===V?I:this,Te)}}),i(i.S+i.F*!(G&&fg()(function(ce){I.all(ce).catch(p)})),b,{all:function(Te){var Se=this,re=W(Se),oe=re.resolve,ne=re.reject,te=y(function(){var le=[],We=0,Ne=1;u(Te,!1,function(Re){var rt=We++,Ve=!1;le.push(void 0),Ne++,Se.resolve(Re).then(function(L){Ve||(Ve=!0,le[rt]=L,--Ne||oe(le))},ne)}),--Ne||oe(le)});return te.e&&ne(te.v),re.promise},race:function(Te){var Se=this,re=W(Se),oe=re.reject,ne=y(function(){u(Te,!1,function(te){Se.resolve(te).then(re.resolve,oe)})});return ne.e&&oe(ne.v),re.promise}}),TL}var Oy,DL;function oc(){if(DL)return Oy;DL=1;var e=on();return Oy=function(t,r){if(!e(t)||t._t!==r)throw TypeError("Incompatible receiver, "+r+" required!");return t},Oy}var My,FL;function NV(){if(FL)return My;FL=1;var e=Qn().f,t=mc(),r=xc(),n=No(),i=bc(),s=wc(),o=r2(),a=IV(),u=_c(),c=Dn(),f=Tu().fastKey,h=oc(),g=c?"_s":"size",y=function(m,_){var b=f(_),S;if(b!=="F")return m._i[b];for(S=m._f;S;S=S.n)if(S.k==_)return S};return My={getConstructor:function(m,_,b,S){var E=m(function(A,T){i(A,E,_,"_i"),A._t=_,A._i=t(null),A._f=void 0,A._l=void 0,A[g]=0,T!=null&&s(T,b,A[S],A)});return r(E.prototype,{clear:function(){for(var T=h(this,_),I=T._i,q=T._f;q;q=q.n)q.r=!0,q.p&&(q.p=q.p.n=void 0),delete I[q.i];T._f=T._l=void 0,T[g]=0},delete:function(A){var T=h(this,_),I=y(T,A);if(I){var q=I.n,p=I.p;delete T._i[I.i],I.r=!0,p&&(p.n=q),q&&(q.p=p),T._f==I&&(T._f=q),T._l==I&&(T._l=p),T[g]--}return!!I},forEach:function(T){h(this,_);for(var I=n(T,arguments.length>1?arguments[1]:void 0,3),q;q=q?q.n:this._f;)for(I(q.v,q.k,this);q&&q.r;)q=q.p},has:function(T){return!!y(h(this,_),T)}}),c&&e(E.prototype,"size",{get:function(){return h(this,_)[g]}}),E},def:function(m,_,b){var S=y(m,_),E,A;return S?S.v=b:(m._l=S={i:A=f(_,!0),k:_,v:b,p:E=m._l,n:void 0,r:!1},m._f||(m._f=S),E&&(E.n=S),m[g]++,A!=="F"&&(m._i[A]=S)),m},getEntry:y,setStrong:function(m,_,b){o(m,_,function(S,E){this._t=h(S,_),this._k=E,this._l=void 0},function(){for(var S=this,E=S._k,A=S._l;A&&A.r;)A=A.p;return!S._t||!(S._l=A=A?A.n:S._t._f)?(S._t=void 0,a(1)):E=="keys"?a(0,A.k):E=="values"?a(0,A.v):a(0,[A.k,A.v])},b?"entries":"values",!b,!0),u(_)}},My}var ky,BL;function gg(){if(BL)return ky;BL=1;var e=Ur(),t=ze(),r=qs(),n=xc(),i=Tu(),s=wc(),o=bc(),a=on(),u=Zr(),c=fg(),f=Fl(),h=ZE();return ky=function(g,y,m,_,b,S){var E=e[g],A=E,T=b?"set":"add",I=A&&A.prototype,q={},p=function(G){var ee=I[G];r(I,G,G=="delete"?function(ae){return S&&!a(ae)?!1:ee.call(this,ae===0?0:ae)}:G=="has"?function(K){return S&&!a(K)?!1:ee.call(this,K===0?0:K)}:G=="get"?function(K){return S&&!a(K)?void 0:ee.call(this,K===0?0:K)}:G=="add"?function(K){return ee.call(this,K===0?0:K),this}:function(K,U){return ee.call(this,K===0?0:K,U),this})};if(typeof A!="function"||!(S||I.forEach&&!u(function(){new A().entries().next()})))A=_.getConstructor(y,g,b,T),n(A.prototype,m),i.NEED=!0;else{var P=new A,O=P[T](S?{}:-0,1)!=P,N=u(function(){P.has(1)}),V=c(function(G){new A(G)}),W=!S&&u(function(){for(var G=new A,ee=5;ee--;)G[T](ee,ee);return!G.has(-0)});V||(A=y(function(G,ee){o(G,A,g);var ae=h(new E,G,A);return ee!=null&&s(ee,b,ae[T],ae),ae}),A.prototype=I,I.constructor=A),(N||W)&&(p("delete"),p("has"),b&&p("get")),(W||O)&&p(T),S&&I.clear&&delete I.clear}return f(A,g),q[g]=A,t(t.G+t.W+t.F*(A!=E),q),S||_.setStrong(A,g,b),A},ky}var Ly,zL;function qV(){if(zL)return Ly;zL=1;var e=NV(),t=oc(),r="Map";return Ly=gg()(r,function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}},{get:function(i){var s=e.getEntry(t(this,r),i);return s&&s.v},set:function(i,s){return e.def(t(this,r),i===0?0:i,s)}},e,!0),Ly}var Ny,VL;function DV(){if(VL)return Ny;VL=1;var e=NV(),t=oc(),r="Set";return Ny=gg()(r,function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}},{add:function(i){return e.def(t(this,r),i=i===0?0:i,i)}},e),Ny}var qy={exports:{}},Dy,GL;function FV(){if(GL)return Dy;GL=1;var e=xc(),t=Tu().getWeak,r=mr(),n=on(),i=bc(),s=wc(),o=ma(),a=ao(),u=oc(),c=o(5),f=o(6),h=0,g=function(_){return _._l||(_._l=new y)},y=function(){this.a=[]},m=function(_,b){return c(_.a,function(S){return S[0]===b})};return y.prototype={get:function(_){var b=m(this,_);if(b)return b[1]},has:function(_){return!!m(this,_)},set:function(_,b){var S=m(this,_);S?S[1]=b:this.a.push([_,b])},delete:function(_){var b=f(this.a,function(S){return S[0]===_});return~b&&this.a.splice(b,1),!!~b}},Dy={getConstructor:function(_,b,S,E){var A=_(function(T,I){i(T,A,b,"_i"),T._t=b,T._i=h++,T._l=void 0,I!=null&&s(I,S,T[E],T)});return e(A.prototype,{delete:function(T){if(!n(T))return!1;var I=t(T);return I===!0?g(u(this,b)).delete(T):I&&a(I,this._i)&&delete I[this._i]},has:function(I){if(!n(I))return!1;var q=t(I);return q===!0?g(u(this,b)).has(I):q&&a(q,this._i)}}),A},def:function(_,b,S){var E=t(r(b),!0);return E===!0?g(_).set(b,S):E[_._i]=S,_},ufstore:g},Dy}var $L;function BV(){if($L)return qy.exports;$L=1;var e=Ur(),t=ma()(0),r=qs(),n=Tu(),i=mV(),s=FV(),o=on(),a=oc(),u=oc(),c=!e.ActiveXObject&&"ActiveXObject"in e,f="WeakMap",h=n.getWeak,g=Object.isExtensible,y=s.ufstore,m,_=function(E){return function(){return E(this,arguments.length>0?arguments[0]:void 0)}},b={get:function(A){if(o(A)){var T=h(A);return T===!0?y(a(this,f)).get(A):T?T[this._i]:void 0}},set:function(A,T){return s.def(a(this,f),A,T)}},S=qy.exports=gg()(f,_,b,s,!0,!0);return u&&c&&(m=s.getConstructor(_,f),i(m.prototype,b),n.NEED=!0,t(["delete","has","get","set"],function(E){var A=S.prototype,T=A[E];r(A,E,function(I,q){if(o(I)&&!g(I)){this._f||(this._f=new m);var p=this._f[E](I,q);return E=="set"?this:p}return T.call(this,I,q)})})),qy.exports}var UL={},jL;function Zne(){if(jL)return UL;jL=1;var e=FV(),t=oc(),r="WeakSet";return gg()(r,function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}},{add:function(i){return e.def(t(this,r),i,!0)}},e,!1,!0),UL}var HL={},Fy,WL;function vg(){if(WL)return Fy;WL=1;for(var e=Ur(),t=Ns(),r=pc(),n=r("typed_array"),i=r("view"),s=!!(e.ArrayBuffer&&e.DataView),o=s,a=0,u=9,c,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");a<u;)(c=e[f[a++]])?(t(c.prototype,n,!0),t(c.prototype,i,!0)):o=!1;return Fy={ABV:s,CONSTR:o,TYPED:n,VIEW:i},Fy}var By={},zy,XL;function zV(){if(XL)return zy;XL=1;var e=Do(),t=Rn();return zy=function(r){if(r===void 0)return 0;var n=e(r),i=t(n);if(n!==i)throw RangeError("Wrong length!");return i},zy}var YL;function v2(){return YL||(YL=1,function(e){var t=Ur(),r=Dn(),n=Au(),i=vg(),s=Ns(),o=xc(),a=Zr(),u=bc(),c=Do(),f=Rn(),h=zV(),g=yc().f,y=Qn().f,m=c2(),_=Fl(),b="ArrayBuffer",S="DataView",E="prototype",A="Wrong length!",T="Wrong index!",I=t[b],q=t[S],p=t.Math,P=t.RangeError,O=t.Infinity,N=I,V=p.abs,W=p.pow,G=p.floor,ee=p.log,ae=p.LN2,K="buffer",U="byteLength",j="byteOffset",J=r?"_b":K,de=r?"_l":U,ce=r?"_o":j;function Te(ue,Ae,Ce){var Be=new Array(Ce),Le=Ce*8-Ae-1,Ie=(1<<Le)-1,be=Ie>>1,je=Ae===23?W(2,-24)-W(2,-77):0,ct=0,mt=ue<0||ue===0&&1/ue<0?1:0,ft,it,Wt;for(ue=V(ue),ue!=ue||ue===O?(it=ue!=ue?1:0,ft=Ie):(ft=G(ee(ue)/ae),ue*(Wt=W(2,-ft))<1&&(ft--,Wt*=2),ft+be>=1?ue+=je/Wt:ue+=je*W(2,1-be),ue*Wt>=2&&(ft++,Wt/=2),ft+be>=Ie?(it=0,ft=Ie):ft+be>=1?(it=(ue*Wt-1)*W(2,Ae),ft=ft+be):(it=ue*W(2,be-1)*W(2,Ae),ft=0));Ae>=8;Be[ct++]=it&255,it/=256,Ae-=8);for(ft=ft<<Ae|it,Le+=Ae;Le>0;Be[ct++]=ft&255,ft/=256,Le-=8);return Be[--ct]|=mt*128,Be}function Se(ue,Ae,Ce){var Be=Ce*8-Ae-1,Le=(1<<Be)-1,Ie=Le>>1,be=Be-7,je=Ce-1,ct=ue[je--],mt=ct&127,ft;for(ct>>=7;be>0;mt=mt*256+ue[je],je--,be-=8);for(ft=mt&(1<<-be)-1,mt>>=-be,be+=Ae;be>0;ft=ft*256+ue[je],je--,be-=8);if(mt===0)mt=1-Ie;else{if(mt===Le)return ft?NaN:ct?-O:O;ft=ft+W(2,Ae),mt=mt-Ie}return(ct?-1:1)*ft*W(2,mt-Ae)}function re(ue){return ue[3]<<24|ue[2]<<16|ue[1]<<8|ue[0]}function oe(ue){return[ue&255]}function ne(ue){return[ue&255,ue>>8&255]}function te(ue){return[ue&255,ue>>8&255,ue>>16&255,ue>>24&255]}function le(ue){return Te(ue,52,8)}function We(ue){return Te(ue,23,4)}function Ne(ue,Ae,Ce){y(ue[E],Ae,{get:function(){return this[Ce]}})}function Re(ue,Ae,Ce,Be){var Le=+Ce,Ie=h(Le);if(Ie+Ae>ue[de])throw P(T);var be=ue[J]._b,je=Ie+ue[ce],ct=be.slice(je,je+Ae);return Be?ct:ct.reverse()}function rt(ue,Ae,Ce,Be,Le,Ie){var be=+Ce,je=h(be);if(je+Ae>ue[de])throw P(T);for(var ct=ue[J]._b,mt=je+ue[ce],ft=Be(+Le),it=0;it<Ae;it++)ct[mt+it]=ft[Ie?it:Ae-it-1]}if(!i.ABV)I=function(Ae){u(this,I,b);var Ce=h(Ae);this._b=m.call(new Array(Ce),0),this[de]=Ce},q=function(Ae,Ce,Be){u(this,q,S),u(Ae,I,S);var Le=Ae[de],Ie=c(Ce);if(Ie<0||Ie>Le)throw P("Wrong offset!");if(Be=Be===void 0?Le-Ie:f(Be),Ie+Be>Le)throw P(A);this[J]=Ae,this[ce]=Ie,this[de]=Be},r&&(Ne(I,U,"_l"),Ne(q,K,"_b"),Ne(q,U,"_l"),Ne(q,j,"_o")),o(q[E],{getInt8:function(Ae){return Re(this,1,Ae)[0]<<24>>24},getUint8:function(Ae){return Re(this,1,Ae)[0]},getInt16:function(Ae){var Ce=Re(this,2,Ae,arguments[1]);return(Ce[1]<<8|Ce[0])<<16>>16},getUint16:function(Ae){var Ce=Re(this,2,Ae,arguments[1]);return Ce[1]<<8|Ce[0]},getInt32:function(Ae){return re(Re(this,4,Ae,arguments[1]))},getUint32:function(Ae){return re(Re(this,4,Ae,arguments[1]))>>>0},getFloat32:function(Ae){return Se(Re(this,4,Ae,arguments[1]),23,4)},getFloat64:function(Ae){return Se(Re(this,8,Ae,arguments[1]),52,8)},setInt8:function(Ae,Ce){rt(this,1,Ae,oe,Ce)},setUint8:function(Ae,Ce){rt(this,1,Ae,oe,Ce)},setInt16:function(Ae,Ce){rt(this,2,Ae,ne,Ce,arguments[2])},setUint16:function(Ae,Ce){rt(this,2,Ae,ne,Ce,arguments[2])},setInt32:function(Ae,Ce){rt(this,4,Ae,te,Ce,arguments[2])},setUint32:function(Ae,Ce){rt(this,4,Ae,te,Ce,arguments[2])},setFloat32:function(Ae,Ce){rt(this,4,Ae,We,Ce,arguments[2])},setFloat64:function(Ae,Ce){rt(this,8,Ae,le,Ce,arguments[2])}});else{if(!a(function(){I(1)})||!a(function(){new I(-1)})||a(function(){return new I,new I(1.5),new I(NaN),I.name!=b})){I=function(Ae){return u(this,I),new N(h(Ae))};for(var Ve=I[E]=N[E],L=g(N),B=0,H;L.length>B;)(H=L[B++])in I||s(I,H,N[H]);n||(Ve.constructor=I)}var X=new q(new I(2)),xe=q[E].setInt8;X.setInt8(0,2147483648),X.setInt8(1,2147483649),(X.getInt8(0)||!X.getInt8(1))&&o(q[E],{setInt8:function(Ae,Ce){xe.call(this,Ae,Ce<<24>>24)},setUint8:function(Ae,Ce){xe.call(this,Ae,Ce<<24>>24)}},!0)}_(I,b),_(q,S),s(q[E],i.VIEW,!0),e[b]=I,e[S]=q}(By)),By}var KL;function Jne(){if(KL)return HL;KL=1;var e=ze(),t=vg(),r=v2(),n=mr(),i=gc(),s=Rn(),o=on(),a=Ur().ArrayBuffer,u=Ch(),c=r.ArrayBuffer,f=r.DataView,h=t.ABV&&a.isView,g=c.prototype.slice,y=t.VIEW,m="ArrayBuffer";return e(e.G+e.W+e.F*(a!==c),{ArrayBuffer:c}),e(e.S+e.F*!t.CONSTR,m,{isView:function(b){return h&&h(b)||o(b)&&y in b}}),e(e.P+e.U+e.F*Zr()(function(){return!new c(2).slice(1,void 0).byteLength}),m,{slice:function(b,S){if(g!==void 0&&S===void 0)return g.call(n(this),b);for(var E=n(this).byteLength,A=i(b,E),T=i(S===void 0?E:S,E),I=new(u(this,c))(s(T-A)),q=new f(this),p=new f(I),P=0;A<T;)p.setUint8(P++,q.getUint8(A++));return I}}),_c()(m),HL}var ZL={},JL;function Qne(){if(JL)return ZL;JL=1;var e=ze();return e(e.G+e.W+e.F*!vg().ABV,{DataView:v2().DataView}),ZL}var QL={},Xd={exports:{}},eN;function ja(){if(eN)return Xd.exports;if(eN=1,Dn()){var e=Au(),t=Ur(),r=Zr(),n=ze(),i=vg(),s=v2(),o=No(),a=bc(),u=dc(),c=Ns(),f=xc(),h=Do(),g=Rn(),y=zV(),m=gc(),_=pa(),b=ao(),S=Bl(),E=on(),A=si(),T=s2(),I=mc(),q=lo(),p=yc().f,P=a2(),O=pc(),N=En(),V=ma(),W=og(),G=Ch(),ee=l2(),ae=Vl(),K=fg(),U=_c(),j=c2(),J=RV(),de=Qn(),ce=co(),Te=de.f,Se=ce.f,re=t.RangeError,oe=t.TypeError,ne=t.Uint8Array,te="ArrayBuffer",le="Shared"+te,We="BYTES_PER_ELEMENT",Ne="prototype",Re=Array[Ne],rt=s.ArrayBuffer,Ve=s.DataView,L=V(0),B=V(2),H=V(3),X=V(4),xe=V(5),ue=V(6),Ae=W(!0),Ce=W(!1),Be=ee.values,Le=ee.keys,Ie=ee.entries,be=Re.lastIndexOf,je=Re.reduce,ct=Re.reduceRight,mt=Re.join,ft=Re.sort,it=Re.slice,Wt=Re.toString,yr=Re.toLocaleString,Qt=N("iterator"),cr=N("toStringTag"),Lr=O("typed_constructor"),Br=O("def_constructor"),bn=i.CONSTR,tr=i.TYPED,Or=i.VIEW,vn="Wrong length!",mn=V(1,function(at,He){return Ft(G(at,at[Br]),He)}),pn=r(function(){return new ne(new Uint16Array([1]).buffer)[0]===1}),Gn=!!ne&&!!ne[Ne].set&&r(function(){new ne(1).set({})}),ei=function(at,He){var yt=h(at);if(yt<0||yt%He)throw re("Wrong offset!");return yt},Bt=function(at){if(E(at)&&tr in at)return at;throw oe(at+" is not a typed array!")},Ft=function(at,He){if(!(E(at)&&Lr in at))throw oe("It is not a typed array constructor!");return new at(He)},zr=function(at,He){return Fn(G(at,at[Br]),He)},Fn=function(at,He){for(var yt=0,Tt=He.length,zt=Ft(at,Tt);Tt>yt;)zt[yt]=He[yt++];return zt},wn=function(at,He,yt){Te(at,He,{get:function(){return this._d[yt]}})},jr=function(He){var yt=A(He),Tt=arguments.length,zt=Tt>1?arguments[1]:void 0,an=zt!==void 0,jn=P(yt),Mt,en,Er,Nr,Vr,Ar;if(jn!=null&&!T(jn)){for(Ar=jn.call(yt),Er=[],Mt=0;!(Vr=Ar.next()).done;Mt++)Er.push(Vr.value);yt=Er}for(an&&Tt>2&&(zt=o(zt,arguments[2],2)),Mt=0,en=g(yt.length),Nr=Ft(this,en);en>Mt;Mt++)Nr[Mt]=an?zt(yt[Mt],Mt):yt[Mt];return Nr},$n=function(){for(var He=0,yt=arguments.length,Tt=Ft(this,yt);yt>He;)Tt[He]=arguments[He++];return Tt},hi=!!ne&&r(function(){yr.call(new ne(1))}),Jr=function(){return yr.apply(hi?it.call(Bt(this)):Bt(this),arguments)},Un={copyWithin:function(He,yt){return J.call(Bt(this),He,yt,arguments.length>2?arguments[2]:void 0)},every:function(He){return X(Bt(this),He,arguments.length>1?arguments[1]:void 0)},fill:function(He){return j.apply(Bt(this),arguments)},filter:function(He){return zr(this,B(Bt(this),He,arguments.length>1?arguments[1]:void 0))},find:function(He){return xe(Bt(this),He,arguments.length>1?arguments[1]:void 0)},findIndex:function(He){return ue(Bt(this),He,arguments.length>1?arguments[1]:void 0)},forEach:function(He){L(Bt(this),He,arguments.length>1?arguments[1]:void 0)},indexOf:function(He){return Ce(Bt(this),He,arguments.length>1?arguments[1]:void 0)},includes:function(He){return Ae(Bt(this),He,arguments.length>1?arguments[1]:void 0)},join:function(He){return mt.apply(Bt(this),arguments)},lastIndexOf:function(He){return be.apply(Bt(this),arguments)},map:function(He){return mn(Bt(this),He,arguments.length>1?arguments[1]:void 0)},reduce:function(He){return je.apply(Bt(this),arguments)},reduceRight:function(He){return ct.apply(Bt(this),arguments)},reverse:function(){for(var He=this,yt=Bt(He).length,Tt=Math.floor(yt/2),zt=0,an;zt<Tt;)an=He[zt],He[zt++]=He[--yt],He[yt]=an;return He},some:function(He){return H(Bt(this),He,arguments.length>1?arguments[1]:void 0)},sort:function(He){return ft.call(Bt(this),He)},subarray:function(He,yt){var Tt=Bt(this),zt=Tt.length,an=m(He,zt);return new(G(Tt,Tt[Br]))(Tt.buffer,Tt.byteOffset+an*Tt.BYTES_PER_ELEMENT,g((yt===void 0?zt:m(yt,zt))-an))}},On=function(He,yt){return zr(this,it.call(Bt(this),He,yt))},di=function(He){Bt(this);var yt=ei(arguments[1],1),Tt=this.length,zt=A(He),an=g(zt.length),jn=0;if(an+yt>Tt)throw re(vn);for(;jn<an;)this[yt+jn]=zt[jn++]},Xe={entries:function(){return Ie.call(Bt(this))},keys:function(){return Le.call(Bt(this))},values:function(){return Be.call(Bt(this))}},Et=function(at,He){return E(at)&&at[tr]&&typeof He!="symbol"&&He in at&&String(+He)==String(He)},Rt=function(He,yt){return Et(He,yt=_(yt,!0))?u(2,He[yt]):Se(He,yt)},kt=function(He,yt,Tt){return Et(He,yt=_(yt,!0))&&E(Tt)&&b(Tt,"value")&&!b(Tt,"get")&&!b(Tt,"set")&&!Tt.configurable&&(!b(Tt,"writable")||Tt.writable)&&(!b(Tt,"enumerable")||Tt.enumerable)?(He[yt]=Tt.value,He):Te(He,yt,Tt)};bn||(ce.f=Rt,de.f=kt),n(n.S+n.F*!bn,"Object",{getOwnPropertyDescriptor:Rt,defineProperty:kt}),r(function(){Wt.call({})})&&(Wt=yr=function(){return mt.call(this)});var Lt=f({},Un);f(Lt,Xe),c(Lt,Qt,Xe.values),f(Lt,{slice:On,set:di,constructor:function(){},toString:Wt,toLocaleString:Jr}),wn(Lt,"buffer","b"),wn(Lt,"byteOffset","o"),wn(Lt,"byteLength","l"),wn(Lt,"length","e"),Te(Lt,cr,{get:function(){return this[tr]}}),Xd.exports=function(at,He,yt,Tt){Tt=!!Tt;var zt=at+(Tt?"Clamped":"")+"Array",an="get"+at,jn="set"+at,Mt=t[zt],en=Mt||{},Er=Mt&&q(Mt),Nr=!Mt||!i.ABV,Vr={},Ar=Mt&&Mt[Ne],xn=function(gt,ht){var dt=gt._d;return dt.v[an](ht*He+dt.o,pn)},Xt=function(gt,ht,dt){var Ct=gt._d;Tt&&(dt=(dt=Math.round(dt))<0?0:dt>255?255:dt&255),Ct.v[jn](ht*He+Ct.o,dt,pn)},pi=function(gt,ht){Te(gt,ht,{get:function(){return xn(this,ht)},set:function(dt){return Xt(this,ht,dt)},enumerable:!0})};Nr?(Mt=yt(function(gt,ht,dt,Ct){a(gt,Mt,zt,"_d");var rr=0,Hr=0,cn,Gr,yn,Bn;if(!E(ht))yn=y(ht),Gr=yn*He,cn=new rt(Gr);else if(ht instanceof rt||(Bn=S(ht))==te||Bn==le){cn=ht,Hr=ei(dt,He);var gi=ht.byteLength;if(Ct===void 0){if(gi%He||(Gr=gi-Hr,Gr<0))throw re(vn)}else if(Gr=g(Ct)*He,Gr+Hr>gi)throw re(vn);yn=Gr/He}else return tr in ht?Fn(Mt,ht):jr.call(Mt,ht);for(c(gt,"_d",{b:cn,o:Hr,l:Gr,e:yn,v:new Ve(cn)});rr<yn;)pi(gt,rr++)}),Ar=Mt[Ne]=I(Lt),c(Ar,"constructor",Mt)):(!r(function(){Mt(1)})||!r(function(){new Mt(-1)})||!K(function(gt){new Mt,new Mt(null),new Mt(1.5),new Mt(gt)},!0))&&(Mt=yt(function(gt,ht,dt,Ct){a(gt,Mt,zt);var rr;return E(ht)?ht instanceof rt||(rr=S(ht))==te||rr==le?Ct!==void 0?new en(ht,ei(dt,He),Ct):dt!==void 0?new en(ht,ei(dt,He)):new en(ht):tr in ht?Fn(Mt,ht):jr.call(Mt,ht):new en(y(ht))}),L(Er!==Function.prototype?p(en).concat(p(Er)):p(en),function(gt){gt in Mt||c(Mt,gt,en[gt])}),Mt[Ne]=Ar,e||(Ar.constructor=Mt));var wi=Ar[Qt],qi=!!wi&&(wi.name=="values"||wi.name==null),Ze=Xe.values;c(Mt,Lr,!0),c(Ar,tr,zt),c(Ar,Or,!0),c(Ar,Br,Mt),(Tt?new Mt(1)[cr]!=zt:!(cr in Ar))&&Te(Ar,cr,{get:function(){return zt}}),Vr[zt]=Mt,n(n.G+n.W+n.F*(Mt!=en),Vr),n(n.S,zt,{BYTES_PER_ELEMENT:He}),n(n.S+n.F*r(function(){en.of.call(Mt,1)}),zt,{from:jr,of:$n}),We in Ar||c(Ar,We,He),n(n.P,zt,Un),U(zt),n(n.P+n.F*Gn,zt,{set:di}),n(n.P+n.F*!qi,zt,Xe),!e&&Ar.toString!=Wt&&(Ar.toString=Wt),n(n.P+n.F*r(function(){new Mt(1).slice()}),zt,{slice:On}),n(n.P+n.F*(r(function(){return[1,2].toLocaleString()!=new Mt([1,2]).toLocaleString()})||!r(function(){Ar.toLocaleString.call([1,2])})),zt,{toLocaleString:Jr}),ae[zt]=qi?wi:Ze,!e&&!qi&&c(Ar,Qt,Ze)}}else Xd.exports=function(){};return Xd.exports}var tN;function eie(){return tN||(tN=1,ja()("Int8",1,function(e){return function(r,n,i){return e(this,r,n,i)}})),QL}var rN={},nN;function tie(){return nN||(nN=1,ja()("Uint8",1,function(e){return function(r,n,i){return e(this,r,n,i)}})),rN}var iN={},sN;function rie(){return sN||(sN=1,ja()("Uint8",1,function(e){return function(r,n,i){return e(this,r,n,i)}},!0)),iN}var oN={},aN;function nie(){return aN||(aN=1,ja()("Int16",2,function(e){return function(r,n,i){return e(this,r,n,i)}})),oN}var uN={},cN;function iie(){return cN||(cN=1,ja()("Uint16",2,function(e){return function(r,n,i){return e(this,r,n,i)}})),uN}var lN={},fN;function sie(){return fN||(fN=1,ja()("Int32",4,function(e){return function(r,n,i){return e(this,r,n,i)}})),lN}var hN={},dN;function oie(){return dN||(dN=1,ja()("Uint32",4,function(e){return function(r,n,i){return e(this,r,n,i)}})),hN}var pN={},gN;function aie(){return gN||(gN=1,ja()("Float32",4,function(e){return function(r,n,i){return e(this,r,n,i)}})),pN}var vN={},mN;function uie(){return mN||(mN=1,ja()("Float64",8,function(e){return function(r,n,i){return e(this,r,n,i)}})),vN}var yN={},_N;function cie(){if(_N)return yN;_N=1;var e=ze(),t=es(),r=mr(),n=(Ur().Reflect||{}).apply,i=Function.apply;return e(e.S+e.F*!Zr()(function(){n(function(){})}),"Reflect",{apply:function(o,a,u){var c=t(o),f=r(u);return n?n(c,a,f):i.call(c,a,f)}}),yN}var bN={},wN;function lie(){if(wN)return bN;wN=1;var e=ze(),t=mc(),r=es(),n=mr(),i=on(),s=Zr(),o=bV(),a=(Ur().Reflect||{}).construct,u=s(function(){function f(){}return!(a(function(){},[],f)instanceof f)}),c=!s(function(){a(function(){})});return e(e.S+e.F*(u||c),"Reflect",{construct:function(h,g){r(h),n(g);var y=arguments.length<3?h:r(arguments[2]);if(c&&!u)return a(h,g,y);if(h==y){switch(g.length){case 0:return new h;case 1:return new h(g[0]);case 2:return new h(g[0],g[1]);case 3:return new h(g[0],g[1],g[2]);case 4:return new h(g[0],g[1],g[2],g[3])}var m=[null];return m.push.apply(m,g),new(o.apply(h,m))}var _=y.prototype,b=t(i(_)?_:Object.prototype),S=Function.apply.call(h,b,g);return i(S)?S:b}}),bN}var xN={},SN;function fie(){if(SN)return xN;SN=1;var e=Qn(),t=ze(),r=mr(),n=pa();return t(t.S+t.F*Zr()(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(s,o,a){r(s),o=n(o,!0),r(a);try{return e.f(s,o,a),!0}catch{return!1}}}),xN}var EN={},AN;function hie(){if(AN)return EN;AN=1;var e=ze(),t=co().f,r=mr();return e(e.S,"Reflect",{deleteProperty:function(i,s){var o=t(r(i),s);return o&&!o.configurable?!1:delete i[s]}}),EN}var TN={},PN;function die(){if(PN)return TN;PN=1;var e=ze(),t=mr(),r=function(n){this._t=t(n),this._i=0;var i=this._k=[],s;for(s in n)i.push(s)};return t2()(r,"Object",function(){var n=this,i=n._k,s;do if(n._i>=i.length)return{value:void 0,done:!0};while(!((s=i[n._i++])in n._t));return{value:s,done:!1}}),e(e.S,"Reflect",{enumerate:function(i){return new r(i)}}),TN}var CN={},RN;function pie(){if(RN)return CN;RN=1;var e=co(),t=lo(),r=ao(),n=ze(),i=on(),s=mr();function o(a,u){var c=arguments.length<3?a:arguments[2],f,h;if(s(a)===c)return a[u];if(f=e.f(a,u))return r(f,"value")?f.value:f.get!==void 0?f.get.call(c):void 0;if(i(h=t(a)))return o(h,u,c)}return n(n.S,"Reflect",{get:o}),CN}var IN={},ON;function gie(){if(ON)return IN;ON=1;var e=co(),t=ze(),r=mr();return t(t.S,"Reflect",{getOwnPropertyDescriptor:function(i,s){return e.f(r(i),s)}}),IN}var MN={},kN;function vie(){if(kN)return MN;kN=1;var e=ze(),t=lo(),r=mr();return e(e.S,"Reflect",{getPrototypeOf:function(i){return t(r(i))}}),MN}var LN={},NN;function mie(){if(NN)return LN;NN=1;var e=ze();return e(e.S,"Reflect",{has:function(r,n){return n in r}}),LN}var qN={},DN;function yie(){if(DN)return qN;DN=1;var e=ze(),t=mr(),r=Object.isExtensible;return e(e.S,"Reflect",{isExtensible:function(i){return t(i),r?r(i):!0}}),qN}var FN={},Vy,BN;function VV(){if(BN)return Vy;BN=1;var e=yc(),t=ag(),r=mr(),n=Ur().Reflect;return Vy=n&&n.ownKeys||function(s){var o=e.f(r(s)),a=t.f;return a?o.concat(a(s)):o},Vy}var zN;function _ie(){if(zN)return FN;zN=1;var e=ze();return e(e.S,"Reflect",{ownKeys:VV()}),FN}var VN={},GN;function bie(){if(GN)return VN;GN=1;var e=ze(),t=mr(),r=Object.preventExtensions;return e(e.S,"Reflect",{preventExtensions:function(i){t(i);try{return r&&r(i),!0}catch{return!1}}}),VN}var $N={},UN;function wie(){if(UN)return $N;UN=1;var e=Qn(),t=co(),r=lo(),n=ao(),i=ze(),s=dc(),o=mr(),a=on();function u(c,f,h){var g=arguments.length<4?c:arguments[3],y=t.f(o(c),f),m,_;if(!y){if(a(_=r(c)))return u(_,f,h,g);y=s(0)}if(n(y,"value")){if(y.writable===!1||!a(g))return!1;if(m=t.f(g,f)){if(m.get||m.set||m.writable===!1)return!1;m.value=h,e.f(g,f,m)}else e.f(g,f,s(0,h));return!0}return y.set===void 0?!1:(y.set.call(g,h),!0)}return i(i.S,"Reflect",{set:u}),$N}var jN={},HN;function xie(){if(HN)return jN;HN=1;var e=ze(),t=YE();return t&&e(e.S,"Reflect",{setPrototypeOf:function(n,i){t.check(n,i);try{return t.set(n,i),!0}catch{return!1}}}),jN}var WN={},XN;function Sie(){if(XN)return WN;XN=1;var e=ze(),t=og()(!0);return e(e.P,"Array",{includes:function(n){return t(this,n,arguments.length>1?arguments[1]:void 0)}}),Pu()("includes"),WN}var YN={},Gy,KN;function GV(){if(KN)return Gy;KN=1;var e=ug(),t=on(),r=Rn(),n=No(),i=En()("isConcatSpreadable");function s(o,a,u,c,f,h,g,y){for(var m=f,_=0,b=g?n(g,y,3):!1,S,E;_<c;){if(_ in u){if(S=b?b(u[_],_,a):u[_],E=!1,t(S)&&(E=S[i],E=E!==void 0?!!E:e(S)),E&&h>0)m=s(o,a,S,r(S.length),m,h-1)-1;else{if(m>=9007199254740991)throw TypeError();o[m]=S}m++}_++}return m}return Gy=s,Gy}var ZN;function Eie(){if(ZN)return YN;ZN=1;var e=ze(),t=GV(),r=si(),n=Rn(),i=es(),s=u2();return e(e.P,"Array",{flatMap:function(a){var u=r(this),c,f;return i(a),c=n(u.length),f=s(u,0),t(f,u,u,c,0,1,a,arguments[1]),f}}),Pu()("flatMap"),YN}var JN={},QN;function Aie(){if(QN)return JN;QN=1;var e=ze(),t=GV(),r=si(),n=Rn(),i=Do(),s=u2();return e(e.P,"Array",{flatten:function(){var a=arguments[0],u=r(this),c=n(u.length),f=s(u,0);return t(f,u,u,c,0,a===void 0?1:i(a)),f}}),Pu()("flatten"),JN}var eq={},tq;function Tie(){if(tq)return eq;tq=1;var e=ze(),t=cg()(!0),r=Zr(),n=r(function(){return"ð ®·".at(0)!=="ð ®·"});return e(e.P+e.F*n,"String",{at:function(s){return t(this,s)}}),eq}var rq={},$y,nq;function $V(){if(nq)return $y;nq=1;var e=Rn(),t=JE(),r=ga();return $y=function(n,i,s,o){var a=String(r(n)),u=a.length,c=s===void 0?" ":String(s),f=e(i);if(f<=u||c=="")return a;var h=f-u,g=t.call(c,Math.ceil(h/c.length));return g.length>h&&(g=g.slice(0,h)),o?g+a:a+g},$y}var iq;function Pie(){if(iq)return rq;iq=1;var e=ze(),t=$V(),r=pg(),n=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);return e(e.P+e.F*n,"String",{padStart:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0,!0)}}),rq}var sq={},oq;function Cie(){if(oq)return sq;oq=1;var e=ze(),t=$V(),r=pg(),n=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);return e(e.P+e.F*n,"String",{padEnd:function(s){return t(this,s,arguments.length>1?arguments[1]:void 0,!1)}}),sq}var aq={},uq;function Rie(){return uq||(uq=1,zl()("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")),aq}var cq={},lq;function Iie(){return lq||(lq=1,zl()("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")),cq}var fq={},hq;function Oie(){if(hq)return fq;hq=1;var e=ze(),t=ga(),r=Rn(),n=lg(),i=Ph(),s=RegExp.prototype,o=function(a,u){this._r=a,this._s=u};return t2()(o,"RegExp String",function(){var u=this._r.exec(this._s);return{value:u,done:u===null}}),e(e.P,"String",{matchAll:function(u){if(t(this),!n(u))throw TypeError(u+" is not a regexp!");var c=String(this),f="flags"in s?String(u.flags):i.call(u),h=new RegExp(u.source,~f.indexOf("g")?f:"g"+f);return h.lastIndex=r(u.lastIndex),new o(h,c)}}),fq}var dq={},pq;function Mie(){return pq||(pq=1,jE()("asyncIterator")),dq}var gq={},vq;function kie(){return vq||(vq=1,jE()("observable")),gq}var mq={},yq;function Lie(){if(yq)return mq;yq=1;var e=ze(),t=VV(),r=uo(),n=co(),i=o2();return e(e.S,"Object",{getOwnPropertyDescriptors:function(o){for(var a=r(o),u=n.f,c=t(a),f={},h=0,g,y;c.length>h;)y=u(a,g=c[h++]),y!==void 0&&i(f,g,y);return f}}),mq}var _q={},Uy,bq;function UV(){if(bq)return Uy;bq=1;var e=Dn(),t=vc(),r=uo(),n=Th().f;return Uy=function(i){return function(s){for(var o=r(s),a=t(o),u=a.length,c=0,f=[],h;u>c;)h=a[c++],(!e||n.call(o,h))&&f.push(i?[h,o[h]]:o[h]);return f}},Uy}var wq;function Nie(){if(wq)return _q;wq=1;var e=ze(),t=UV()(!1);return e(e.S,"Object",{values:function(n){return t(n)}}),_q}var xq={},Sq;function qie(){if(Sq)return xq;Sq=1;var e=ze(),t=UV()(!0);return e(e.S,"Object",{entries:function(n){return t(n)}}),xq}var Eq={},jy,Aq;function mg(){return Aq||(Aq=1,jy=Au()||!Zr()(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete Ur()[e]})),jy}var Tq;function Die(){if(Tq)return Eq;Tq=1;var e=ze(),t=si(),r=es(),n=Qn();return Dn()&&e(e.P+mg(),"Object",{__defineGetter__:function(s,o){n.f(t(this),s,{get:r(o),enumerable:!0,configurable:!0})}}),Eq}var Pq={},Cq;function Fie(){if(Cq)return Pq;Cq=1;var e=ze(),t=si(),r=es(),n=Qn();return Dn()&&e(e.P+mg(),"Object",{__defineSetter__:function(s,o){n.f(t(this),s,{set:r(o),enumerable:!0,configurable:!0})}}),Pq}var Rq={},Iq;function Bie(){if(Iq)return Rq;Iq=1;var e=ze(),t=si(),r=pa(),n=lo(),i=co().f;return Dn()&&e(e.P+mg(),"Object",{__lookupGetter__:function(o){var a=t(this),u=r(o,!0),c;do if(c=i(a,u))return c.get;while(a=n(a))}}),Rq}var Oq={},Mq;function zie(){if(Mq)return Oq;Mq=1;var e=ze(),t=si(),r=pa(),n=lo(),i=co().f;return Dn()&&e(e.P+mg(),"Object",{__lookupSetter__:function(o){var a=t(this),u=r(o,!0),c;do if(c=i(a,u))return c.set;while(a=n(a))}}),Oq}var kq={},Hy,Lq;function jV(){if(Lq)return Hy;Lq=1;var e=wc();return Hy=function(t,r){var n=[];return e(t,!1,n.push,n,r),n},Hy}var Wy,Nq;function HV(){if(Nq)return Wy;Nq=1;var e=Bl(),t=jV();return Wy=function(r){return function(){if(e(this)!=r)throw TypeError(r+"#toJSON isn't generic");return t(this)}},Wy}var qq;function Vie(){if(qq)return kq;qq=1;var e=ze();return e(e.P+e.R,"Map",{toJSON:HV()("Map")}),kq}var Dq={},Fq;function Gie(){if(Fq)return Dq;Fq=1;var e=ze();return e(e.P+e.R,"Set",{toJSON:HV()("Set")}),Dq}var Bq={},Xy,zq;function yg(){if(zq)return Xy;zq=1;var e=ze();return Xy=function(t){e(e.S,t,{of:function(){for(var n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];return new this(i)}})},Xy}var Vq;function $ie(){return Vq||(Vq=1,yg()("Map")),Bq}var Gq={},$q;function Uie(){return $q||($q=1,yg()("Set")),Gq}var Uq={},jq;function jie(){return jq||(jq=1,yg()("WeakMap")),Uq}var Hq={},Wq;function Hie(){return Wq||(Wq=1,yg()("WeakSet")),Hq}var Xq={},Yy,Yq;function _g(){if(Yq)return Yy;Yq=1;var e=ze(),t=es(),r=No(),n=wc();return Yy=function(i){e(e.S,i,{from:function(o){var a=arguments[1],u,c,f,h;return t(this),u=a!==void 0,u&&t(a),o==null?new this:(c=[],u?(f=0,h=r(a,arguments[2],2),n(o,!1,function(g){c.push(h(g,f++))})):n(o,!1,c.push,c),new this(c))}})},Yy}var Kq;function Wie(){return Kq||(Kq=1,_g()("Map")),Xq}var Zq={},Jq;function Xie(){return Jq||(Jq=1,_g()("Set")),Zq}var Qq={},e3;function Yie(){return e3||(e3=1,_g()("WeakMap")),Qq}var t3={},r3;function Kie(){return r3||(r3=1,_g()("WeakSet")),t3}var n3={},i3;function Zie(){if(i3)return n3;i3=1;var e=ze();return e(e.G,{global:Ur()}),n3}var s3={},o3;function Jie(){if(o3)return s3;o3=1;var e=ze();return e(e.S,"System",{global:Ur()}),s3}var a3={},u3;function Qie(){if(u3)return a3;u3=1;var e=ze(),t=qo();return e(e.S,"Error",{isError:function(n){return t(n)==="Error"}}),a3}var c3={},l3;function ese(){if(l3)return c3;l3=1;var e=ze();return e(e.S,"Math",{clamp:function(r,n,i){return Math.min(i,Math.max(n,r))}}),c3}var f3={},h3;function tse(){if(h3)return f3;h3=1;var e=ze();return e(e.S,"Math",{DEG_PER_RAD:Math.PI/180}),f3}var d3={},p3;function rse(){if(p3)return d3;p3=1;var e=ze(),t=180/Math.PI;return e(e.S,"Math",{degrees:function(n){return n*t}}),d3}var g3={},Ky,v3;function WV(){return v3||(v3=1,Ky=Math.scale||function(t,r,n,i,s){return arguments.length===0||t!=t||r!=r||n!=n||i!=i||s!=s?NaN:t===1/0||t===-1/0?t:(t-r)*(s-i)/(n-r)+i}),Ky}var m3;function nse(){if(m3)return g3;m3=1;var e=ze(),t=WV(),r=TV();return e(e.S,"Math",{fscale:function(i,s,o,a,u){return r(t(i,s,o,a,u))}}),g3}var y3={},_3;function ise(){if(_3)return y3;_3=1;var e=ze();return e(e.S,"Math",{iaddh:function(r,n,i,s){var o=r>>>0,a=n>>>0,u=i>>>0;return a+(s>>>0)+((o&u|(o|u)&~(o+u>>>0))>>>31)|0}}),y3}var b3={},w3;function sse(){if(w3)return b3;w3=1;var e=ze();return e(e.S,"Math",{isubh:function(r,n,i,s){var o=r>>>0,a=n>>>0,u=i>>>0;return a-(s>>>0)-((~o&u|~(o^u)&o-u>>>0)>>>31)|0}}),b3}var x3={},S3;function ose(){if(S3)return x3;S3=1;var e=ze();return e(e.S,"Math",{imulh:function(r,n){var i=65535,s=+r,o=+n,a=s&i,u=o&i,c=s>>16,f=o>>16,h=(c*u>>>0)+(a*u>>>16);return c*f+(h>>16)+((a*f>>>0)+(h&i)>>16)}}),x3}var E3={},A3;function ase(){if(A3)return E3;A3=1;var e=ze();return e(e.S,"Math",{RAD_PER_DEG:180/Math.PI}),E3}var T3={},P3;function use(){if(P3)return T3;P3=1;var e=ze(),t=Math.PI/180;return e(e.S,"Math",{radians:function(n){return n*t}}),T3}var C3={},R3;function cse(){if(R3)return C3;R3=1;var e=ze();return e(e.S,"Math",{scale:WV()}),C3}var I3={},O3;function lse(){if(O3)return I3;O3=1;var e=ze();return e(e.S,"Math",{umulh:function(r,n){var i=65535,s=+r,o=+n,a=s&i,u=o&i,c=s>>>16,f=o>>>16,h=(c*u>>>0)+(a*u>>>16);return c*f+(h>>>16)+((a*f>>>0)+(h&i)>>>16)}}),I3}var M3={},k3;function fse(){if(k3)return M3;k3=1;var e=ze();return e(e.S,"Math",{signbit:function(r){return(r=+r)!=r?r:r==0?1/r==1/0:r>0}}),M3}var L3={},N3;function hse(){if(N3)return L3;N3=1;var e=ze(),t=Lo(),r=Ur(),n=Ch(),i=LV();return e(e.P+e.R,"Promise",{finally:function(s){var o=n(this,t.Promise||r.Promise),a=typeof s=="function";return this.then(a?function(u){return i(o,s()).then(function(){return u})}:s,a?function(u){return i(o,s()).then(function(){throw u})}:s)}}),L3}var q3={},D3;function dse(){if(D3)return q3;D3=1;var e=ze(),t=g2(),r=kV();return e(e.S,"Promise",{try:function(n){var i=t.f(this),s=r(n);return(s.e?i.reject:i.resolve)(s.v),i.promise}}),q3}var F3={},Zy,B3;function Ha(){if(B3)return Zy;B3=1;var e=qV(),t=ze(),r=Eh()("metadata"),n=r.store||(r.store=new(BV())),i=function(h,g,y){var m=n.get(h);if(!m){if(!y)return;n.set(h,m=new e)}var _=m.get(g);if(!_){if(!y)return;m.set(g,_=new e)}return _},s=function(h,g,y){var m=i(g,y,!1);return m===void 0?!1:m.has(h)},o=function(h,g,y){var m=i(g,y,!1);return m===void 0?void 0:m.get(h)},a=function(h,g,y,m){i(y,m,!0).set(h,g)},u=function(h,g){var y=i(h,g,!1),m=[];return y&&y.forEach(function(_,b){m.push(b)}),m},c=function(h){return h===void 0||typeof h=="symbol"?h:String(h)},f=function(h){t(t.S,"Reflect",h)};return Zy={store:n,map:i,has:s,get:o,set:a,keys:u,key:c,exp:f},Zy}var z3;function pse(){if(z3)return F3;z3=1;var e=Ha(),t=mr(),r=e.key,n=e.set;return e.exp({defineMetadata:function(s,o,a,u){n(s,o,t(a),r(u))}}),F3}var V3={},G3;function gse(){if(G3)return V3;G3=1;var e=Ha(),t=mr(),r=e.key,n=e.map,i=e.store;return e.exp({deleteMetadata:function(o,a){var u=arguments.length<3?void 0:r(arguments[2]),c=n(t(a),u,!1);if(c===void 0||!c.delete(o))return!1;if(c.size)return!0;var f=i.get(a);return f.delete(u),!!f.size||i.delete(a)}}),V3}var $3={},U3;function vse(){if(U3)return $3;U3=1;var e=Ha(),t=mr(),r=lo(),n=e.has,i=e.get,s=e.key,o=function(a,u,c){var f=n(a,u,c);if(f)return i(a,u,c);var h=r(u);return h!==null?o(a,h,c):void 0};return e.exp({getMetadata:function(u,c){return o(u,t(c),arguments.length<3?void 0:s(arguments[2]))}}),$3}var j3={},H3;function mse(){if(H3)return j3;H3=1;var e=DV(),t=jV(),r=Ha(),n=mr(),i=lo(),s=r.keys,o=r.key,a=function(u,c){var f=s(u,c),h=i(u);if(h===null)return f;var g=a(h,c);return g.length?f.length?t(new e(f.concat(g))):g:f};return r.exp({getMetadataKeys:function(c){return a(n(c),arguments.length<2?void 0:o(arguments[1]))}}),j3}var W3={},X3;function yse(){if(X3)return W3;X3=1;var e=Ha(),t=mr(),r=e.get,n=e.key;return e.exp({getOwnMetadata:function(s,o){return r(s,t(o),arguments.length<3?void 0:n(arguments[2]))}}),W3}var Y3={},K3;function _se(){if(K3)return Y3;K3=1;var e=Ha(),t=mr(),r=e.keys,n=e.key;return e.exp({getOwnMetadataKeys:function(s){return r(t(s),arguments.length<2?void 0:n(arguments[1]))}}),Y3}var Z3={},J3;function bse(){if(J3)return Z3;J3=1;var e=Ha(),t=mr(),r=lo(),n=e.has,i=e.key,s=function(o,a,u){var c=n(o,a,u);if(c)return!0;var f=r(a);return f!==null?s(o,f,u):!1};return e.exp({hasMetadata:function(a,u){return s(a,t(u),arguments.length<3?void 0:i(arguments[2]))}}),Z3}var Q3={},eD;function wse(){if(eD)return Q3;eD=1;var e=Ha(),t=mr(),r=e.has,n=e.key;return e.exp({hasOwnMetadata:function(s,o){return r(s,t(o),arguments.length<3?void 0:n(arguments[2]))}}),Q3}var tD={},rD;function xse(){if(rD)return tD;rD=1;var e=Ha(),t=mr(),r=es(),n=e.key,i=e.set;return e.exp({metadata:function(o,a){return function(c,f){i(o,a,(f!==void 0?t:r)(c),n(f))}}}),tD}var nD={},iD;function Sse(){if(iD)return nD;iD=1;var e=ze(),t=p2()(),r=Ur().process,n=qo()(r)=="process";return e(e.G,{asap:function(s){var o=n&&r.domain;t(o?o.bind(s):s)}}),nD}var sD={},oD;function Ese(){if(oD)return sD;oD=1;var e=ze(),t=Ur(),r=Lo(),n=p2()(),i=En()("observable"),s=es(),o=mr(),a=bc(),u=xc(),c=Ns(),f=wc(),h=f.RETURN,g=function(A){return A==null?void 0:s(A)},y=function(A){var T=A._c;T&&(A._c=void 0,T())},m=function(A){return A._o===void 0},_=function(A){m(A)||(A._o=void 0,y(A))},b=function(A,T){o(A),this._c=void 0,this._o=A,A=new S(this);try{var I=T(A),q=I;I!=null&&(typeof I.unsubscribe=="function"?I=function(){q.unsubscribe()}:s(I),this._c=I)}catch(p){A.error(p);return}m(this)&&y(this)};b.prototype=u({},{unsubscribe:function(){_(this)}});var S=function(A){this._s=A};S.prototype=u({},{next:function(T){var I=this._s;if(!m(I)){var q=I._o;try{var p=g(q.next);if(p)return p.call(q,T)}catch(P){try{_(I)}finally{throw P}}}},error:function(T){var I=this._s;if(m(I))throw T;var q=I._o;I._o=void 0;try{var p=g(q.error);if(!p)throw T;T=p.call(q,T)}catch(P){try{y(I)}finally{throw P}}return y(I),T},complete:function(T){var I=this._s;if(!m(I)){var q=I._o;I._o=void 0;try{var p=g(q.complete);T=p?p.call(q,T):void 0}catch(P){try{y(I)}finally{throw P}}return y(I),T}}});var E=function(T){a(this,E,"Observable","_f")._f=s(T)};return u(E.prototype,{subscribe:function(T){return new b(T,this._f)},forEach:function(T){var I=this;return new(r.Promise||t.Promise)(function(q,p){s(T);var P=I.subscribe({next:function(O){try{return T(O)}catch(N){p(N),P.unsubscribe()}},error:p,complete:q})})}}),u(E,{from:function(T){var I=typeof this=="function"?this:E,q=g(o(T)[i]);if(q){var p=o(q.call(T));return p.constructor===I?p:new I(function(P){return p.subscribe(P)})}return new I(function(P){var O=!1;return n(function(){if(!O){try{if(f(T,!1,function(N){if(P.next(N),O)return h})===h)return}catch(N){if(O)throw N;P.error(N);return}P.complete()}}),function(){O=!0}})},of:function(){for(var T=0,I=arguments.length,q=new Array(I);T<I;)q[T]=arguments[T++];return new(typeof this=="function"?this:E)(function(p){var P=!1;return n(function(){if(!P){for(var O=0;O<q.length;++O)if(p.next(q[O]),P)return;p.complete()}}),function(){P=!0}})}}),c(E.prototype,i,function(){return this}),e(e.G,{Observable:E}),_c()("Observable"),sD}var aD={},uD;function Ase(){if(uD)return aD;uD=1;var e=Ur(),t=ze(),r=pg(),n=[].slice,i=/MSIE .\./.test(r),s=function(o){return function(a,u){var c=arguments.length>2,f=c?n.call(arguments,2):!1;return o(c?function(){(typeof a=="function"?a:Function(a)).apply(this,f)}:a,u)}};return t(t.G+t.B+t.F*i,{setTimeout:s(e.setTimeout),setInterval:s(e.setInterval)}),aD}var cD={},lD;function Tse(){if(lD)return cD;lD=1;var e=ze(),t=d2();return e(e.G+e.B,{setImmediate:t.set,clearImmediate:t.clear}),cD}var fD={},hD;function Pse(){if(hD)return fD;hD=1;for(var e=l2(),t=vc(),r=qs(),n=Ur(),i=Ns(),s=Vl(),o=En(),a=o("iterator"),u=o("toStringTag"),c=s.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=t(f),g=0;g<h.length;g++){var y=h[g],m=f[y],_=n[y],b=_&&_.prototype,S;if(b&&(b[a]||i(b,a,c),b[u]||i(b,u,y),s[y]=c,m))for(S in e)b[S]||r(b,S,e[S],!0)}return fD}var Jy,dD;function Cse(){return dD||(dD=1,Kte(),Zte(),Jte(),Qte(),ere(),tre(),rre(),nre(),ire(),sre(),ore(),are(),ure(),cre(),lre(),fre(),hre(),dre(),pre(),gre(),vre(),mre(),yre(),_re(),bre(),wre(),xre(),Sre(),Ere(),Are(),Tre(),Pre(),Cre(),Rre(),Ire(),Ore(),Mre(),kre(),Lre(),Nre(),qre(),Dre(),Fre(),Bre(),zre(),Vre(),Gre(),$re(),Ure(),jre(),Hre(),Wre(),Xre(),Yre(),Kre(),Zre(),Jre(),Qre(),ene(),tne(),rne(),nne(),ine(),sne(),one(),ane(),une(),cne(),lne(),fne(),hne(),dne(),pne(),gne(),vne(),mne(),_ne(),bne(),xne(),Sne(),Ene(),Ane(),Tne(),Pne(),Cne(),Ine(),One(),Mne(),kne(),Lne(),Nne(),qne(),Dne(),Fne(),Bne(),zne(),Vne(),Gne(),$ne(),l2(),Une(),OV(),jne(),MV(),Hne(),Wne(),Xne(),Yne(),Kne(),qV(),DV(),BV(),Zne(),Jne(),Qne(),eie(),tie(),rie(),nie(),iie(),sie(),oie(),aie(),uie(),cie(),lie(),fie(),hie(),die(),pie(),gie(),vie(),mie(),yie(),_ie(),bie(),wie(),xie(),Sie(),Eie(),Aie(),Tie(),Pie(),Cie(),Rie(),Iie(),Oie(),Mie(),kie(),Lie(),Nie(),qie(),Die(),Fie(),Bie(),zie(),Vie(),Gie(),$ie(),Uie(),jie(),Hie(),Wie(),Xie(),Yie(),Kie(),Zie(),Jie(),Qie(),ese(),tse(),rse(),nse(),ise(),sse(),ose(),ase(),use(),cse(),lse(),fse(),hse(),dse(),pse(),gse(),vse(),mse(),yse(),_se(),bse(),wse(),xse(),Sse(),Ese(),Ase(),Tse(),Pse(),Jy=Lo()),Jy}var gp={exports:{}},Rse=gp.exports,pD;function Ise(){return pD||(pD=1,function(e){(function(t){var r=Object.prototype,n=r.hasOwnProperty,i,s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag",c=t.regeneratorRuntime;if(c){e.exports=c;return}c=t.regeneratorRuntime=e.exports;function f(U,j,J,de){var ce=j&&j.prototype instanceof S?j:S,Te=Object.create(ce.prototype),Se=new ee(de||[]);return Te._invoke=N(U,J,Se),Te}c.wrap=f;function h(U,j,J){try{return{type:"normal",arg:U.call(j,J)}}catch(de){return{type:"throw",arg:de}}}var g="suspendedStart",y="suspendedYield",m="executing",_="completed",b={};function S(){}function E(){}function A(){}var T={};T[o]=function(){return this};var I=Object.getPrototypeOf,q=I&&I(I(ae([])));q&&q!==r&&n.call(q,o)&&(T=q);var p=A.prototype=S.prototype=Object.create(T);E.prototype=p.constructor=A,A.constructor=E,A[u]=E.displayName="GeneratorFunction";function P(U){["next","throw","return"].forEach(function(j){U[j]=function(J){return this._invoke(j,J)}})}c.isGeneratorFunction=function(U){var j=typeof U=="function"&&U.constructor;return j?j===E||(j.displayName||j.name)==="GeneratorFunction":!1},c.mark=function(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,A):(U.__proto__=A,u in U||(U[u]="GeneratorFunction")),U.prototype=Object.create(p),U},c.awrap=function(U){return{__await:U}};function O(U){function j(ce,Te,Se,re){var oe=h(U[ce],U,Te);if(oe.type==="throw")re(oe.arg);else{var ne=oe.arg,te=ne.value;return te&&typeof te=="object"&&n.call(te,"__await")?Promise.resolve(te.__await).then(function(le){j("next",le,Se,re)},function(le){j("throw",le,Se,re)}):Promise.resolve(te).then(function(le){ne.value=le,Se(ne)},re)}}typeof t.process=="object"&&t.process.domain&&(j=t.process.domain.bind(j));var J;function de(ce,Te){function Se(){return new Promise(function(re,oe){j(ce,Te,re,oe)})}return J=J?J.then(Se,Se):Se()}this._invoke=de}P(O.prototype),O.prototype[a]=function(){return this},c.AsyncIterator=O,c.async=function(U,j,J,de){var ce=new O(f(U,j,J,de));return c.isGeneratorFunction(j)?ce:ce.next().then(function(Te){return Te.done?Te.value:ce.next()})};function N(U,j,J){var de=g;return function(Te,Se){if(de===m)throw new Error("Generator is already running");if(de===_){if(Te==="throw")throw Se;return K()}for(J.method=Te,J.arg=Se;;){var re=J.delegate;if(re){var oe=V(re,J);if(oe){if(oe===b)continue;return oe}}if(J.method==="next")J.sent=J._sent=J.arg;else if(J.method==="throw"){if(de===g)throw de=_,J.arg;J.dispatchException(J.arg)}else J.method==="return"&&J.abrupt("return",J.arg);de=m;var ne=h(U,j,J);if(ne.type==="normal"){if(de=J.done?_:y,ne.arg===b)continue;return{value:ne.arg,done:J.done}}else ne.type==="throw"&&(de=_,J.method="throw",J.arg=ne.arg)}}}function V(U,j){var J=U.iterator[j.method];if(J===i){if(j.delegate=null,j.method==="throw"){if(U.iterator.return&&(j.method="return",j.arg=i,V(U,j),j.method==="throw"))return b;j.method="throw",j.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}var de=h(J,U.iterator,j.arg);if(de.type==="throw")return j.method="throw",j.arg=de.arg,j.delegate=null,b;var ce=de.arg;if(!ce)return j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,b;if(ce.done)j[U.resultName]=ce.value,j.next=U.nextLoc,j.method!=="return"&&(j.method="next",j.arg=i);else return ce;return j.delegate=null,b}P(p),p[u]="Generator",p[o]=function(){return this},p.toString=function(){return"[object Generator]"};function W(U){var j={tryLoc:U[0]};1 in U&&(j.catchLoc=U[1]),2 in U&&(j.finallyLoc=U[2],j.afterLoc=U[3]),this.tryEntries.push(j)}function G(U){var j=U.completion||{};j.type="normal",delete j.arg,U.completion=j}function ee(U){this.tryEntries=[{tryLoc:"root"}],U.forEach(W,this),this.reset(!0)}c.keys=function(U){var j=[];for(var J in U)j.push(J);return j.reverse(),function de(){for(;j.length;){var ce=j.pop();if(ce in U)return de.value=ce,de.done=!1,de}return de.done=!0,de}};function ae(U){if(U){var j=U[o];if(j)return j.call(U);if(typeof U.next=="function")return U;if(!isNaN(U.length)){var J=-1,de=function ce(){for(;++J<U.length;)if(n.call(U,J))return ce.value=U[J],ce.done=!1,ce;return ce.value=i,ce.done=!0,ce};return de.next=de}}return{next:K}}c.values=ae;function K(){return{value:i,done:!0}}ee.prototype={constructor:ee,reset:function(U){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(G),!U)for(var j in this)j.charAt(0)==="t"&&n.call(this,j)&&!isNaN(+j.slice(1))&&(this[j]=i)},stop:function(){this.done=!0;var U=this.tryEntries[0],j=U.completion;if(j.type==="throw")throw j.arg;return this.rval},dispatchException:function(U){if(this.done)throw U;var j=this;function J(oe,ne){return Te.type="throw",Te.arg=U,j.next=oe,ne&&(j.method="next",j.arg=i),!!ne}for(var de=this.tryEntries.length-1;de>=0;--de){var ce=this.tryEntries[de],Te=ce.completion;if(ce.tryLoc==="root")return J("end");if(ce.tryLoc<=this.prev){var Se=n.call(ce,"catchLoc"),re=n.call(ce,"finallyLoc");if(Se&&re){if(this.prev<ce.catchLoc)return J(ce.catchLoc,!0);if(this.prev<ce.finallyLoc)return J(ce.finallyLoc)}else if(Se){if(this.prev<ce.catchLoc)return J(ce.catchLoc,!0)}else if(re){if(this.prev<ce.finallyLoc)return J(ce.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(U,j){for(var J=this.tryEntries.length-1;J>=0;--J){var de=this.tryEntries[J];if(de.tryLoc<=this.prev&&n.call(de,"finallyLoc")&&this.prev<de.finallyLoc){var ce=de;break}}ce&&(U==="break"||U==="continue")&&ce.tryLoc<=j&&j<=ce.finallyLoc&&(ce=null);var Te=ce?ce.completion:{};return Te.type=U,Te.arg=j,ce?(this.method="next",this.next=ce.finallyLoc,b):this.complete(Te)},complete:function(U,j){if(U.type==="throw")throw U.arg;return U.type==="break"||U.type==="continue"?this.next=U.arg:U.type==="return"?(this.rval=this.arg=U.arg,this.method="return",this.next="end"):U.type==="normal"&&j&&(this.next=j),b},finish:function(U){for(var j=this.tryEntries.length-1;j>=0;--j){var J=this.tryEntries[j];if(J.finallyLoc===U)return this.complete(J.completion,J.afterLoc),G(J),b}},catch:function(U){for(var j=this.tryEntries.length-1;j>=0;--j){var J=this.tryEntries[j];if(J.tryLoc===U){var de=J.completion;if(de.type==="throw"){var ce=de.arg;G(J)}return ce}}throw new Error("illegal catch attempt")},delegateYield:function(U,j,J){return this.delegate={iterator:ae(U),resultName:j,nextLoc:J},this.method==="next"&&(this.arg=i),b}}})(typeof Oi=="object"?Oi:typeof window=="object"?window:typeof self=="object"?self:Rse)}(gp)),gp.exports}var gD={},Qy,vD;function Ose(){return vD||(vD=1,Qy=function(e,t){var r=t===Object(t)?function(n){return t[n]}:t;return function(n){return String(n).replace(e,r)}}),Qy}var mD;function Mse(){if(mD)return gD;mD=1;var e=ze(),t=Ose()(/[\\^$*+?.()|[\]{}]/g,"\\$&");return e(e.S,"RegExp",{escape:function(n){return t(n)}}),gD}var e_,yD;function kse(){return yD||(yD=1,Mse(),e_=Lo().RegExp.escape),e_}var _D;function Lse(){if(_D)return LC;if(_D=1,Cse(),Ise(),kse(),Oi._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");Oi._babelPolyfill=!0;var e="defineProperty";function t(r,n,i){r[n]||Object[e](r,n,{writable:!0,configurable:!0,value:i})}return t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(r){[][r]&&t(Array,r,Function.call.bind([][r]))}),LC}Lse();function m2(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var t_,bD;function Nse(){if(bD)return t_;bD=1;function e(){this.__data__=[],this.size=0}return t_=e,t_}var r_,wD;function Gl(){if(wD)return r_;wD=1;function e(t,r){return t===r||t!==t&&r!==r}return r_=e,r_}var n_,xD;function bg(){if(xD)return n_;xD=1;var e=Gl();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return n_=t,n_}var i_,SD;function qse(){if(SD)return i_;SD=1;var e=bg(),t=Array.prototype,r=t.splice;function n(i){var s=this.__data__,o=e(s,i);if(o<0)return!1;var a=s.length-1;return o==a?s.pop():r.call(s,o,1),--this.size,!0}return i_=n,i_}var s_,ED;function Dse(){if(ED)return s_;ED=1;var e=bg();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return s_=t,s_}var o_,AD;function Fse(){if(AD)return o_;AD=1;var e=bg();function t(r){return e(this.__data__,r)>-1}return o_=t,o_}var a_,TD;function Bse(){if(TD)return a_;TD=1;var e=bg();function t(r,n){var i=this.__data__,s=e(i,r);return s<0?(++this.size,i.push([r,n])):i[s][1]=n,this}return a_=t,a_}var u_,PD;function wg(){if(PD)return u_;PD=1;var e=Nse(),t=qse(),r=Dse(),n=Fse(),i=Bse();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var c=o[a];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,u_=s,u_}var c_,CD;function zse(){if(CD)return c_;CD=1;var e=wg();function t(){this.__data__=new e,this.size=0}return c_=t,c_}var l_,RD;function Vse(){if(RD)return l_;RD=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return l_=e,l_}var f_,ID;function Gse(){if(ID)return f_;ID=1;function e(t){return this.__data__.get(t)}return f_=e,f_}var h_,OD;function $se(){if(OD)return h_;OD=1;function e(t){return this.__data__.has(t)}return h_=e,h_}var d_,MD;function XV(){if(MD)return d_;MD=1;var e=typeof Oi=="object"&&Oi&&Oi.Object===Object&&Oi;return d_=e,d_}var p_,kD;function Bo(){if(kD)return p_;kD=1;var e=XV(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return p_=r,p_}var g_,LD;function $l(){if(LD)return g_;LD=1;var e=Bo(),t=e.Symbol;return g_=t,g_}var v_,ND;function Use(){if(ND)return v_;ND=1;var e=$l(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function s(o){var a=r.call(o,i),u=o[i];try{o[i]=void 0;var c=!0}catch{}var f=n.call(o);return c&&(a?o[i]=u:delete o[i]),f}return v_=s,v_}var m_,qD;function jse(){if(qD)return m_;qD=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return m_=r,m_}var y_,DD;function Sc(){if(DD)return y_;DD=1;var e=$l(),t=Use(),r=jse(),n="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function o(a){return a==null?a===void 0?i:n:s&&s in Object(a)?t(a):r(a)}return y_=o,y_}var __,FD;function fo(){if(FD)return __;FD=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return __=e,__}var b_,BD;function Rh(){if(BD)return b_;BD=1;var e=Sc(),t=fo(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(a){if(!t(a))return!1;var u=e(a);return u==n||u==i||u==r||u==s}return b_=o,b_}var w_,zD;function Hse(){if(zD)return w_;zD=1;var e=Bo(),t=e["__core-js_shared__"];return w_=t,w_}var x_,VD;function Wse(){if(VD)return x_;VD=1;var e=Hse(),t=function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!t&&t in n}return x_=r,x_}var S_,GD;function YV(){if(GD)return S_;GD=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return S_=r,S_}var E_,$D;function Xse(){if($D)return E_;$D=1;var e=Rh(),t=Wse(),r=fo(),n=YV(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,u=o.toString,c=a.hasOwnProperty,f=RegExp("^"+u.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(g){if(!r(g)||t(g))return!1;var y=e(g)?f:s;return y.test(n(g))}return E_=h,E_}var A_,UD;function Yse(){if(UD)return A_;UD=1;function e(t,r){return t==null?void 0:t[r]}return A_=e,A_}var T_,jD;function Ec(){if(jD)return T_;jD=1;var e=Xse(),t=Yse();function r(n,i){var s=t(n,i);return e(s)?s:void 0}return T_=r,T_}var P_,HD;function y2(){if(HD)return P_;HD=1;var e=Ec(),t=Bo(),r=e(t,"Map");return P_=r,P_}var C_,WD;function xg(){if(WD)return C_;WD=1;var e=Ec(),t=e(Object,"create");return C_=t,C_}var R_,XD;function Kse(){if(XD)return R_;XD=1;var e=xg();function t(){this.__data__=e?e(null):{},this.size=0}return R_=t,R_}var I_,YD;function Zse(){if(YD)return I_;YD=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return I_=e,I_}var O_,KD;function Jse(){if(KD)return O_;KD=1;var e=xg(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(s){var o=this.__data__;if(e){var a=o[s];return a===t?void 0:a}return n.call(o,s)?o[s]:void 0}return O_=i,O_}var M_,ZD;function Qse(){if(ZD)return M_;ZD=1;var e=xg(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var s=this.__data__;return e?s[i]!==void 0:r.call(s,i)}return M_=n,M_}var k_,JD;function eoe(){if(JD)return k_;JD=1;var e=xg(),t="__lodash_hash_undefined__";function r(n,i){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=e&&i===void 0?t:i,this}return k_=r,k_}var L_,QD;function toe(){if(QD)return L_;QD=1;var e=Kse(),t=Zse(),r=Jse(),n=Qse(),i=eoe();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var c=o[a];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,L_=s,L_}var N_,eF;function roe(){if(eF)return N_;eF=1;var e=toe(),t=wg(),r=y2();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return N_=n,N_}var q_,tF;function noe(){if(tF)return q_;tF=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return q_=e,q_}var D_,rF;function Sg(){if(rF)return D_;rF=1;var e=noe();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return D_=t,D_}var F_,nF;function ioe(){if(nF)return F_;nF=1;var e=Sg();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return F_=t,F_}var B_,iF;function soe(){if(iF)return B_;iF=1;var e=Sg();function t(r){return e(this,r).get(r)}return B_=t,B_}var z_,sF;function ooe(){if(sF)return z_;sF=1;var e=Sg();function t(r){return e(this,r).has(r)}return z_=t,z_}var V_,oF;function aoe(){if(oF)return V_;oF=1;var e=Sg();function t(r,n){var i=e(this,r),s=i.size;return i.set(r,n),this.size+=i.size==s?0:1,this}return V_=t,V_}var G_,aF;function _2(){if(aF)return G_;aF=1;var e=roe(),t=ioe(),r=soe(),n=ooe(),i=aoe();function s(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var c=o[a];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,G_=s,G_}var $_,uF;function uoe(){if(uF)return $_;uF=1;var e=wg(),t=y2(),r=_2(),n=200;function i(s,o){var a=this.__data__;if(a instanceof e){var u=a.__data__;if(!t||u.length<n-1)return u.push([s,o]),this.size=++a.size,this;a=this.__data__=new r(u)}return a.set(s,o),this.size=a.size,this}return $_=i,$_}var U_,cF;function Eg(){if(cF)return U_;cF=1;var e=wg(),t=zse(),r=Vse(),n=Gse(),i=$se(),s=uoe();function o(a){var u=this.__data__=new e(a);this.size=u.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=i,o.prototype.set=s,U_=o,U_}var j_,lF;function b2(){if(lF)return j_;lF=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}return j_=e,j_}var H_,fF;function KV(){if(fF)return H_;fF=1;var e=Ec(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return H_=t,H_}var W_,hF;function Ag(){if(hF)return W_;hF=1;var e=KV();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return W_=t,W_}var X_,dF;function Tg(){if(dF)return X_;dF=1;var e=Ag(),t=Gl(),r=Object.prototype,n=r.hasOwnProperty;function i(s,o,a){var u=s[o];(!(n.call(s,o)&&t(u,a))||a===void 0&&!(o in s))&&e(s,o,a)}return X_=i,X_}var Y_,pF;function Ih(){if(pF)return Y_;pF=1;var e=Tg(),t=Ag();function r(n,i,s,o){var a=!s;s||(s={});for(var u=-1,c=i.length;++u<c;){var f=i[u],h=o?o(s[f],n[f],f,s,n):void 0;h===void 0&&(h=n[f]),a?t(s,f,h):e(s,f,h)}return s}return Y_=r,Y_}var K_,gF;function coe(){if(gF)return K_;gF=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return K_=e,K_}var Z_,vF;function ya(){if(vF)return Z_;vF=1;function e(t){return t!=null&&typeof t=="object"}return Z_=e,Z_}var J_,mF;function loe(){if(mF)return J_;mF=1;var e=Sc(),t=ya(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return J_=n,J_}var Q_,yF;function Oh(){if(yF)return Q_;yF=1;var e=loe(),t=ya(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,s=e(function(){return arguments}())?e:function(o){return t(o)&&n.call(o,"callee")&&!i.call(o,"callee")};return Q_=s,Q_}var eb,_F;function oi(){if(_F)return eb;_F=1;var e=Array.isArray;return eb=e,eb}var Bf={exports:{}},tb,bF;function foe(){if(bF)return tb;bF=1;function e(){return!1}return tb=e,tb}Bf.exports;var wF;function Ul(){return wF||(wF=1,function(e,t){var r=Bo(),n=foe(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,a=o?r.Buffer:void 0,u=a?a.isBuffer:void 0,c=u||n;e.exports=c}(Bf,Bf.exports)),Bf.exports}var rb,xF;function Pg(){if(xF)return rb;xF=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var s=typeof n;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return rb=r,rb}var nb,SF;function w2(){if(SF)return nb;SF=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return nb=t,nb}var ib,EF;function hoe(){if(EF)return ib;EF=1;var e=Sc(),t=w2(),r=ya(),n="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",a="[object Error]",u="[object Function]",c="[object Map]",f="[object Number]",h="[object Object]",g="[object RegExp]",y="[object Set]",m="[object String]",_="[object WeakMap]",b="[object ArrayBuffer]",S="[object DataView]",E="[object Float32Array]",A="[object Float64Array]",T="[object Int8Array]",I="[object Int16Array]",q="[object Int32Array]",p="[object Uint8Array]",P="[object Uint8ClampedArray]",O="[object Uint16Array]",N="[object Uint32Array]",V={};V[E]=V[A]=V[T]=V[I]=V[q]=V[p]=V[P]=V[O]=V[N]=!0,V[n]=V[i]=V[b]=V[s]=V[S]=V[o]=V[a]=V[u]=V[c]=V[f]=V[h]=V[g]=V[y]=V[m]=V[_]=!1;function W(G){return r(G)&&t(G.length)&&!!V[e(G)]}return ib=W,ib}var sb,AF;function Cg(){if(AF)return sb;AF=1;function e(t){return function(r){return t(r)}}return sb=e,sb}var zf={exports:{}};zf.exports;var TF;function x2(){return TF||(TF=1,function(e,t){var r=XV(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s&&r.process,a=function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a}(zf,zf.exports)),zf.exports}var ob,PF;function Mh(){if(PF)return ob;PF=1;var e=hoe(),t=Cg(),r=x2(),n=r&&r.isTypedArray,i=n?t(n):e;return ob=i,ob}var ab,CF;function ZV(){if(CF)return ab;CF=1;var e=coe(),t=Oh(),r=oi(),n=Ul(),i=Pg(),s=Mh(),o=Object.prototype,a=o.hasOwnProperty;function u(c,f){var h=r(c),g=!h&&t(c),y=!h&&!g&&n(c),m=!h&&!g&&!y&&s(c),_=h||g||y||m,b=_?e(c.length,String):[],S=b.length;for(var E in c)(f||a.call(c,E))&&!(_&&(E=="length"||y&&(E=="offset"||E=="parent")||m&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||i(E,S)))&&b.push(E);return b}return ab=u,ab}var ub,RF;function Rg(){if(RF)return ub;RF=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return ub=t,ub}var cb,IF;function JV(){if(IF)return cb;IF=1;function e(t,r){return function(n){return t(r(n))}}return cb=e,cb}var lb,OF;function doe(){if(OF)return lb;OF=1;var e=JV(),t=e(Object.keys,Object);return lb=t,lb}var fb,MF;function S2(){if(MF)return fb;MF=1;var e=Rg(),t=doe(),r=Object.prototype,n=r.hasOwnProperty;function i(s){if(!e(s))return t(s);var o=[];for(var a in Object(s))n.call(s,a)&&a!="constructor"&&o.push(a);return o}return fb=i,fb}var hb,kF;function Wa(){if(kF)return hb;kF=1;var e=Rh(),t=w2();function r(n){return n!=null&&t(n.length)&&!e(n)}return hb=r,hb}var db,LF;function Cu(){if(LF)return db;LF=1;var e=ZV(),t=S2(),r=Wa();function n(i){return r(i)?e(i):t(i)}return db=n,db}var pb,NF;function poe(){if(NF)return pb;NF=1;var e=Ih(),t=Cu();function r(n,i){return n&&e(i,t(i),n)}return pb=r,pb}var gb,qF;function goe(){if(qF)return gb;qF=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return gb=e,gb}var vb,DF;function voe(){if(DF)return vb;DF=1;var e=fo(),t=Rg(),r=goe(),n=Object.prototype,i=n.hasOwnProperty;function s(o){if(!e(o))return r(o);var a=t(o),u=[];for(var c in o)c=="constructor"&&(a||!i.call(o,c))||u.push(c);return u}return vb=s,vb}var mb,FF;function Ac(){if(FF)return mb;FF=1;var e=ZV(),t=voe(),r=Wa();function n(i){return r(i)?e(i,!0):t(i)}return mb=n,mb}var yb,BF;function moe(){if(BF)return yb;BF=1;var e=Ih(),t=Ac();function r(n,i){return n&&e(i,t(i),n)}return yb=r,yb}var Vf={exports:{}};Vf.exports;var zF;function QV(){return zF||(zF=1,function(e,t){var r=Bo(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s?r.Buffer:void 0,a=o?o.allocUnsafe:void 0;function u(c,f){if(f)return c.slice();var h=c.length,g=a?a(h):new c.constructor(h);return c.copy(g),g}e.exports=u}(Vf,Vf.exports)),Vf.exports}var _b,VF;function e7(){if(VF)return _b;VF=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return _b=e,_b}var bb,GF;function t7(){if(GF)return bb;GF=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,s=0,o=[];++n<i;){var a=t[n];r(a,n,t)&&(o[s++]=a)}return o}return bb=e,bb}var wb,$F;function r7(){if($F)return wb;$F=1;function e(){return[]}return wb=e,wb}var xb,UF;function E2(){if(UF)return xb;UF=1;var e=t7(),t=r7(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(a){return n.call(o,a)}))}:t;return xb=s,xb}var Sb,jF;function yoe(){if(jF)return Sb;jF=1;var e=Ih(),t=E2();function r(n,i){return e(n,t(n),i)}return Sb=r,Sb}var Eb,HF;function A2(){if(HF)return Eb;HF=1;function e(t,r){for(var n=-1,i=r.length,s=t.length;++n<i;)t[s+n]=r[n];return t}return Eb=e,Eb}var Ab,WF;function Ig(){if(WF)return Ab;WF=1;var e=JV(),t=e(Object.getPrototypeOf,Object);return Ab=t,Ab}var Tb,XF;function n7(){if(XF)return Tb;XF=1;var e=A2(),t=Ig(),r=E2(),n=r7(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var a=[];o;)e(a,r(o)),o=t(o);return a}:n;return Tb=s,Tb}var Pb,YF;function _oe(){if(YF)return Pb;YF=1;var e=Ih(),t=n7();function r(n,i){return e(n,t(n),i)}return Pb=r,Pb}var Cb,KF;function i7(){if(KF)return Cb;KF=1;var e=A2(),t=oi();function r(n,i,s){var o=i(n);return t(n)?o:e(o,s(n))}return Cb=r,Cb}var Rb,ZF;function s7(){if(ZF)return Rb;ZF=1;var e=i7(),t=E2(),r=Cu();function n(i){return e(i,r,t)}return Rb=n,Rb}var Ib,JF;function boe(){if(JF)return Ib;JF=1;var e=i7(),t=n7(),r=Ac();function n(i){return e(i,r,t)}return Ib=n,Ib}var Ob,QF;function woe(){if(QF)return Ob;QF=1;var e=Ec(),t=Bo(),r=e(t,"DataView");return Ob=r,Ob}var Mb,e6;function xoe(){if(e6)return Mb;e6=1;var e=Ec(),t=Bo(),r=e(t,"Promise");return Mb=r,Mb}var kb,t6;function o7(){if(t6)return kb;t6=1;var e=Ec(),t=Bo(),r=e(t,"Set");return kb=r,kb}var Lb,r6;function Soe(){if(r6)return Lb;r6=1;var e=Ec(),t=Bo(),r=e(t,"WeakMap");return Lb=r,Lb}var Nb,n6;function jl(){if(n6)return Nb;n6=1;var e=woe(),t=y2(),r=xoe(),n=o7(),i=Soe(),s=Sc(),o=YV(),a="[object Map]",u="[object Object]",c="[object Promise]",f="[object Set]",h="[object WeakMap]",g="[object DataView]",y=o(e),m=o(t),_=o(r),b=o(n),S=o(i),E=s;return(e&&E(new e(new ArrayBuffer(1)))!=g||t&&E(new t)!=a||r&&E(r.resolve())!=c||n&&E(new n)!=f||i&&E(new i)!=h)&&(E=function(A){var T=s(A),I=T==u?A.constructor:void 0,q=I?o(I):"";if(q)switch(q){case y:return g;case m:return a;case _:return c;case b:return f;case S:return h}return T}),Nb=E,Nb}var qb,i6;function Eoe(){if(i6)return qb;i6=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var i=n.length,s=new n.constructor(i);return i&&typeof n[0]=="string"&&t.call(n,"index")&&(s.index=n.index,s.input=n.input),s}return qb=r,qb}var Db,s6;function a7(){if(s6)return Db;s6=1;var e=Bo(),t=e.Uint8Array;return Db=t,Db}var Fb,o6;function T2(){if(o6)return Fb;o6=1;var e=a7();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return Fb=t,Fb}var Bb,a6;function Aoe(){if(a6)return Bb;a6=1;var e=T2();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return Bb=t,Bb}var zb,u6;function Toe(){if(u6)return zb;u6=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return zb=t,zb}var Vb,c6;function Poe(){if(c6)return Vb;c6=1;var e=$l(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return Vb=n,Vb}var Gb,l6;function u7(){if(l6)return Gb;l6=1;var e=T2();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return Gb=t,Gb}var $b,f6;function Coe(){if(f6)return $b;f6=1;var e=T2(),t=Aoe(),r=Toe(),n=Poe(),i=u7(),s="[object Boolean]",o="[object Date]",a="[object Map]",u="[object Number]",c="[object RegExp]",f="[object Set]",h="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",m="[object DataView]",_="[object Float32Array]",b="[object Float64Array]",S="[object Int8Array]",E="[object Int16Array]",A="[object Int32Array]",T="[object Uint8Array]",I="[object Uint8ClampedArray]",q="[object Uint16Array]",p="[object Uint32Array]";function P(O,N,V){var W=O.constructor;switch(N){case y:return e(O);case s:case o:return new W(+O);case m:return t(O,V);case _:case b:case S:case E:case A:case T:case I:case q:case p:return i(O,V);case a:return new W;case u:case h:return new W(O);case c:return r(O);case f:return new W;case g:return n(O)}}return $b=P,$b}var Ub,h6;function c7(){if(h6)return Ub;h6=1;var e=fo(),t=Object.create,r=function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var s=new n;return n.prototype=void 0,s}}();return Ub=r,Ub}var jb,d6;function l7(){if(d6)return jb;d6=1;var e=c7(),t=Ig(),r=Rg();function n(i){return typeof i.constructor=="function"&&!r(i)?e(t(i)):{}}return jb=n,jb}var Hb,p6;function Roe(){if(p6)return Hb;p6=1;var e=jl(),t=ya(),r="[object Map]";function n(i){return t(i)&&e(i)==r}return Hb=n,Hb}var Wb,g6;function Ioe(){if(g6)return Wb;g6=1;var e=Roe(),t=Cg(),r=x2(),n=r&&r.isMap,i=n?t(n):e;return Wb=i,Wb}var Xb,v6;function Ooe(){if(v6)return Xb;v6=1;var e=jl(),t=ya(),r="[object Set]";function n(i){return t(i)&&e(i)==r}return Xb=n,Xb}var Yb,m6;function Moe(){if(m6)return Yb;m6=1;var e=Ooe(),t=Cg(),r=x2(),n=r&&r.isSet,i=n?t(n):e;return Yb=i,Yb}var Kb,y6;function f7(){if(y6)return Kb;y6=1;var e=Eg(),t=b2(),r=Tg(),n=poe(),i=moe(),s=QV(),o=e7(),a=yoe(),u=_oe(),c=s7(),f=boe(),h=jl(),g=Eoe(),y=Coe(),m=l7(),_=oi(),b=Ul(),S=Ioe(),E=fo(),A=Moe(),T=Cu(),I=Ac(),q=1,p=2,P=4,O="[object Arguments]",N="[object Array]",V="[object Boolean]",W="[object Date]",G="[object Error]",ee="[object Function]",ae="[object GeneratorFunction]",K="[object Map]",U="[object Number]",j="[object Object]",J="[object RegExp]",de="[object Set]",ce="[object String]",Te="[object Symbol]",Se="[object WeakMap]",re="[object ArrayBuffer]",oe="[object DataView]",ne="[object Float32Array]",te="[object Float64Array]",le="[object Int8Array]",We="[object Int16Array]",Ne="[object Int32Array]",Re="[object Uint8Array]",rt="[object Uint8ClampedArray]",Ve="[object Uint16Array]",L="[object Uint32Array]",B={};B[O]=B[N]=B[re]=B[oe]=B[V]=B[W]=B[ne]=B[te]=B[le]=B[We]=B[Ne]=B[K]=B[U]=B[j]=B[J]=B[de]=B[ce]=B[Te]=B[Re]=B[rt]=B[Ve]=B[L]=!0,B[G]=B[ee]=B[Se]=!1;function H(X,xe,ue,Ae,Ce,Be){var Le,Ie=xe&q,be=xe&p,je=xe&P;if(ue&&(Le=Ce?ue(X,Ae,Ce,Be):ue(X)),Le!==void 0)return Le;if(!E(X))return X;var ct=_(X);if(ct){if(Le=g(X),!Ie)return o(X,Le)}else{var mt=h(X),ft=mt==ee||mt==ae;if(b(X))return s(X,Ie);if(mt==j||mt==O||ft&&!Ce){if(Le=be||ft?{}:m(X),!Ie)return be?u(X,i(Le,X)):a(X,n(Le,X))}else{if(!B[mt])return Ce?X:{};Le=y(X,mt,Ie)}}Be||(Be=new e);var it=Be.get(X);if(it)return it;Be.set(X,Le),A(X)?X.forEach(function(Qt){Le.add(H(Qt,xe,ue,Qt,X,Be))}):S(X)&&X.forEach(function(Qt,cr){Le.set(cr,H(Qt,xe,ue,cr,X,Be))});var Wt=je?be?f:c:be?I:T,yr=ct?void 0:Wt(X);return t(yr||X,function(Qt,cr){yr&&(cr=Qt,Qt=X[cr]),r(Le,cr,H(Qt,xe,ue,cr,X,Be))}),Le}return Kb=H,Kb}var Zb,_6;function koe(){if(_6)return Zb;_6=1;var e=f7(),t=4;function r(n){return e(n,t)}return Zb=r,Zb}var Jb,b6;function P2(){if(b6)return Jb;b6=1;function e(t){return function(){return t}}return Jb=e,Jb}var Qb,w6;function Loe(){if(w6)return Qb;w6=1;function e(t){return function(r,n,i){for(var s=-1,o=Object(r),a=i(r),u=a.length;u--;){var c=a[t?u:++s];if(n(o[c],c,o)===!1)break}return r}}return Qb=e,Qb}var e1,x6;function C2(){if(x6)return e1;x6=1;var e=Loe(),t=e();return e1=t,e1}var t1,S6;function R2(){if(S6)return t1;S6=1;var e=C2(),t=Cu();function r(n,i){return n&&e(n,i,t)}return t1=r,t1}var r1,E6;function Noe(){if(E6)return r1;E6=1;var e=Wa();function t(r,n){return function(i,s){if(i==null)return i;if(!e(i))return r(i,s);for(var o=i.length,a=n?o:-1,u=Object(i);(n?a--:++a<o)&&s(u[a],a,u)!==!1;);return i}}return r1=t,r1}var n1,A6;function Og(){if(A6)return n1;A6=1;var e=R2(),t=Noe(),r=t(e);return n1=r,n1}var i1,T6;function Tc(){if(T6)return i1;T6=1;function e(t){return t}return i1=e,i1}var s1,P6;function h7(){if(P6)return s1;P6=1;var e=Tc();function t(r){return typeof r=="function"?r:e}return s1=t,s1}var o1,C6;function d7(){if(C6)return o1;C6=1;var e=b2(),t=Og(),r=h7(),n=oi();function i(s,o){var a=n(s)?e:t;return a(s,r(o))}return o1=i,o1}var a1,R6;function p7(){return R6||(R6=1,a1=d7()),a1}var u1,I6;function qoe(){if(I6)return u1;I6=1;var e=Og();function t(r,n){var i=[];return e(r,function(s,o,a){n(s,o,a)&&i.push(s)}),i}return u1=t,u1}var c1,O6;function Doe(){if(O6)return c1;O6=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return c1=t,c1}var l1,M6;function Foe(){if(M6)return l1;M6=1;function e(t){return this.__data__.has(t)}return l1=e,l1}var f1,k6;function g7(){if(k6)return f1;k6=1;var e=_2(),t=Doe(),r=Foe();function n(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new e;++s<o;)this.add(i[s])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,f1=n,f1}var h1,L6;function Boe(){if(L6)return h1;L6=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return h1=e,h1}var d1,N6;function v7(){if(N6)return d1;N6=1;function e(t,r){return t.has(r)}return d1=e,d1}var p1,q6;function m7(){if(q6)return p1;q6=1;var e=g7(),t=Boe(),r=v7(),n=1,i=2;function s(o,a,u,c,f,h){var g=u&n,y=o.length,m=a.length;if(y!=m&&!(g&&m>y))return!1;var _=h.get(o),b=h.get(a);if(_&&b)return _==a&&b==o;var S=-1,E=!0,A=u&i?new e:void 0;for(h.set(o,a),h.set(a,o);++S<y;){var T=o[S],I=a[S];if(c)var q=g?c(I,T,S,a,o,h):c(T,I,S,o,a,h);if(q!==void 0){if(q)continue;E=!1;break}if(A){if(!t(a,function(p,P){if(!r(A,P)&&(T===p||f(T,p,u,c,h)))return A.push(P)})){E=!1;break}}else if(!(T===I||f(T,I,u,c,h))){E=!1;break}}return h.delete(o),h.delete(a),E}return p1=s,p1}var g1,D6;function zoe(){if(D6)return g1;D6=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,s){n[++r]=[s,i]}),n}return g1=e,g1}var v1,F6;function I2(){if(F6)return v1;F6=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return v1=e,v1}var m1,B6;function Voe(){if(B6)return m1;B6=1;var e=$l(),t=a7(),r=Gl(),n=m7(),i=zoe(),s=I2(),o=1,a=2,u="[object Boolean]",c="[object Date]",f="[object Error]",h="[object Map]",g="[object Number]",y="[object RegExp]",m="[object Set]",_="[object String]",b="[object Symbol]",S="[object ArrayBuffer]",E="[object DataView]",A=e?e.prototype:void 0,T=A?A.valueOf:void 0;function I(q,p,P,O,N,V,W){switch(P){case E:if(q.byteLength!=p.byteLength||q.byteOffset!=p.byteOffset)return!1;q=q.buffer,p=p.buffer;case S:return!(q.byteLength!=p.byteLength||!V(new t(q),new t(p)));case u:case c:case g:return r(+q,+p);case f:return q.name==p.name&&q.message==p.message;case y:case _:return q==p+"";case h:var G=i;case m:var ee=O&o;if(G||(G=s),q.size!=p.size&&!ee)return!1;var ae=W.get(q);if(ae)return ae==p;O|=a,W.set(q,p);var K=n(G(q),G(p),O,N,V,W);return W.delete(q),K;case b:if(T)return T.call(q)==T.call(p)}return!1}return m1=I,m1}var y1,z6;function Goe(){if(z6)return y1;z6=1;var e=s7(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(s,o,a,u,c,f){var h=a&t,g=e(s),y=g.length,m=e(o),_=m.length;if(y!=_&&!h)return!1;for(var b=y;b--;){var S=g[b];if(!(h?S in o:n.call(o,S)))return!1}var E=f.get(s),A=f.get(o);if(E&&A)return E==o&&A==s;var T=!0;f.set(s,o),f.set(o,s);for(var I=h;++b<y;){S=g[b];var q=s[S],p=o[S];if(u)var P=h?u(p,q,S,o,s,f):u(q,p,S,s,o,f);if(!(P===void 0?q===p||c(q,p,a,u,f):P)){T=!1;break}I||(I=S=="constructor")}if(T&&!I){var O=s.constructor,N=o.constructor;O!=N&&"constructor"in s&&"constructor"in o&&!(typeof O=="function"&&O instanceof O&&typeof N=="function"&&N instanceof N)&&(T=!1)}return f.delete(s),f.delete(o),T}return y1=i,y1}var _1,V6;function $oe(){if(V6)return _1;V6=1;var e=Eg(),t=m7(),r=Voe(),n=Goe(),i=jl(),s=oi(),o=Ul(),a=Mh(),u=1,c="[object Arguments]",f="[object Array]",h="[object Object]",g=Object.prototype,y=g.hasOwnProperty;function m(_,b,S,E,A,T){var I=s(_),q=s(b),p=I?f:i(_),P=q?f:i(b);p=p==c?h:p,P=P==c?h:P;var O=p==h,N=P==h,V=p==P;if(V&&o(_)){if(!o(b))return!1;I=!0,O=!1}if(V&&!O)return T||(T=new e),I||a(_)?t(_,b,S,E,A,T):r(_,b,p,S,E,A,T);if(!(S&u)){var W=O&&y.call(_,"__wrapped__"),G=N&&y.call(b,"__wrapped__");if(W||G){var ee=W?_.value():_,ae=G?b.value():b;return T||(T=new e),A(ee,ae,S,E,T)}}return V?(T||(T=new e),n(_,b,S,E,A,T)):!1}return _1=m,_1}var b1,G6;function y7(){if(G6)return b1;G6=1;var e=$oe(),t=ya();function r(n,i,s,o,a){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,s,o,r,a)}return b1=r,b1}var w1,$6;function Uoe(){if($6)return w1;$6=1;var e=Eg(),t=y7(),r=1,n=2;function i(s,o,a,u){var c=a.length,f=c,h=!u;if(s==null)return!f;for(s=Object(s);c--;){var g=a[c];if(h&&g[2]?g[1]!==s[g[0]]:!(g[0]in s))return!1}for(;++c<f;){g=a[c];var y=g[0],m=s[y],_=g[1];if(h&&g[2]){if(m===void 0&&!(y in s))return!1}else{var b=new e;if(u)var S=u(m,_,y,s,o,b);if(!(S===void 0?t(_,m,r|n,u,b):S))return!1}}return!0}return w1=i,w1}var x1,U6;function _7(){if(U6)return x1;U6=1;var e=fo();function t(r){return r===r&&!e(r)}return x1=t,x1}var S1,j6;function joe(){if(j6)return S1;j6=1;var e=_7(),t=Cu();function r(n){for(var i=t(n),s=i.length;s--;){var o=i[s],a=n[o];i[s]=[o,a,e(a)]}return i}return S1=r,S1}var E1,H6;function b7(){if(H6)return E1;H6=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return E1=e,E1}var A1,W6;function Hoe(){if(W6)return A1;W6=1;var e=Uoe(),t=joe(),r=b7();function n(i){var s=t(i);return s.length==1&&s[0][2]?r(s[0][0],s[0][1]):function(o){return o===i||e(o,i,s)}}return A1=n,A1}var T1,X6;function Hl(){if(X6)return T1;X6=1;var e=Sc(),t=ya(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return T1=n,T1}var P1,Y6;function O2(){if(Y6)return P1;Y6=1;var e=oi(),t=Hl(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,o){if(e(s))return!1;var a=typeof s;return a=="number"||a=="symbol"||a=="boolean"||s==null||t(s)?!0:n.test(s)||!r.test(s)||o!=null&&s in Object(o)}return P1=i,P1}var C1,K6;function Woe(){if(K6)return C1;K6=1;var e=_2(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var o=arguments,a=i?i.apply(this,o):o[0],u=s.cache;if(u.has(a))return u.get(a);var c=n.apply(this,o);return s.cache=u.set(a,c)||u,c};return s.cache=new(r.Cache||e),s}return r.Cache=e,C1=r,C1}var R1,Z6;function Xoe(){if(Z6)return R1;Z6=1;var e=Woe(),t=500;function r(n){var i=e(n,function(o){return s.size===t&&s.clear(),o}),s=i.cache;return i}return R1=r,R1}var I1,J6;function Yoe(){if(J6)return I1;J6=1;var e=Xoe(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(o,a,u,c){s.push(u?c.replace(r,"$1"):a||o)}),s});return I1=n,I1}var O1,Q6;function Mg(){if(Q6)return O1;Q6=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,s=Array(i);++n<i;)s[n]=r(t[n],n,t);return s}return O1=e,O1}var M1,eB;function Koe(){if(eB)return M1;eB=1;var e=$l(),t=Mg(),r=oi(),n=Hl(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function o(a){if(typeof a=="string")return a;if(r(a))return t(a,o)+"";if(n(a))return s?s.call(a):"";var u=a+"";return u=="0"&&1/a==-1/0?"-0":u}return M1=o,M1}var k1,tB;function w7(){if(tB)return k1;tB=1;var e=Koe();function t(r){return r==null?"":e(r)}return k1=t,k1}var L1,rB;function kg(){if(rB)return L1;rB=1;var e=oi(),t=O2(),r=Yoe(),n=w7();function i(s,o){return e(s)?s:t(s,o)?[s]:r(n(s))}return L1=i,L1}var N1,nB;function kh(){if(nB)return N1;nB=1;var e=Hl();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return N1=t,N1}var q1,iB;function Lg(){if(iB)return q1;iB=1;var e=kg(),t=kh();function r(n,i){i=e(i,n);for(var s=0,o=i.length;n!=null&&s<o;)n=n[t(i[s++])];return s&&s==o?n:void 0}return q1=r,q1}var D1,sB;function Zoe(){if(sB)return D1;sB=1;var e=Lg();function t(r,n,i){var s=r==null?void 0:e(r,n);return s===void 0?i:s}return D1=t,D1}var F1,oB;function Joe(){if(oB)return F1;oB=1;function e(t,r){return t!=null&&r in Object(t)}return F1=e,F1}var B1,aB;function x7(){if(aB)return B1;aB=1;var e=kg(),t=Oh(),r=oi(),n=Pg(),i=w2(),s=kh();function o(a,u,c){u=e(u,a);for(var f=-1,h=u.length,g=!1;++f<h;){var y=s(u[f]);if(!(g=a!=null&&c(a,y)))break;a=a[y]}return g||++f!=h?g:(h=a==null?0:a.length,!!h&&i(h)&&n(y,h)&&(r(a)||t(a)))}return B1=o,B1}var z1,uB;function S7(){if(uB)return z1;uB=1;var e=Joe(),t=x7();function r(n,i){return n!=null&&t(n,i,e)}return z1=r,z1}var V1,cB;function Qoe(){if(cB)return V1;cB=1;var e=y7(),t=Zoe(),r=S7(),n=O2(),i=_7(),s=b7(),o=kh(),a=1,u=2;function c(f,h){return n(f)&&i(h)?s(o(f),h):function(g){var y=t(g,f);return y===void 0&&y===h?r(g,f):e(h,y,a|u)}}return V1=c,V1}var G1,lB;function E7(){if(lB)return G1;lB=1;function e(t){return function(r){return r==null?void 0:r[t]}}return G1=e,G1}var $1,fB;function eae(){if(fB)return $1;fB=1;var e=Lg();function t(r){return function(n){return e(n,r)}}return $1=t,$1}var U1,hB;function tae(){if(hB)return U1;hB=1;var e=E7(),t=eae(),r=O2(),n=kh();function i(s){return r(s)?e(n(s)):t(s)}return U1=i,U1}var j1,dB;function Xa(){if(dB)return j1;dB=1;var e=Hoe(),t=Qoe(),r=Tc(),n=oi(),i=tae();function s(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?t(o[0],o[1]):e(o):i(o)}return j1=s,j1}var H1,pB;function A7(){if(pB)return H1;pB=1;var e=t7(),t=qoe(),r=Xa(),n=oi();function i(s,o){var a=n(s)?e:t;return a(s,r(o,3))}return H1=i,H1}var W1,gB;function rae(){if(gB)return W1;gB=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n,i){return n!=null&&t.call(n,i)}return W1=r,W1}var X1,vB;function T7(){if(vB)return X1;vB=1;var e=rae(),t=x7();function r(n,i){return n!=null&&t(n,i,e)}return X1=r,X1}var Y1,mB;function nae(){if(mB)return Y1;mB=1;var e=S2(),t=jl(),r=Oh(),n=oi(),i=Wa(),s=Ul(),o=Rg(),a=Mh(),u="[object Map]",c="[object Set]",f=Object.prototype,h=f.hasOwnProperty;function g(y){if(y==null)return!0;if(i(y)&&(n(y)||typeof y=="string"||typeof y.splice=="function"||s(y)||a(y)||r(y)))return!y.length;var m=t(y);if(m==u||m==c)return!y.size;if(o(y))return!e(y).length;for(var _ in y)if(h.call(y,_))return!1;return!0}return Y1=g,Y1}var K1,yB;function P7(){if(yB)return K1;yB=1;function e(t){return t===void 0}return K1=e,K1}var Z1,_B;function C7(){if(_B)return Z1;_B=1;var e=Og(),t=Wa();function r(n,i){var s=-1,o=t(n)?Array(n.length):[];return e(n,function(a,u,c){o[++s]=i(a,u,c)}),o}return Z1=r,Z1}var J1,bB;function R7(){if(bB)return J1;bB=1;var e=Mg(),t=Xa(),r=C7(),n=oi();function i(s,o){var a=n(s)?e:r;return a(s,t(o,3))}return J1=i,J1}var Q1,wB;function iae(){if(wB)return Q1;wB=1;function e(t,r,n,i){var s=-1,o=t==null?0:t.length;for(i&&o&&(n=t[++s]);++s<o;)n=r(n,t[s],s,t);return n}return Q1=e,Q1}var ew,xB;function sae(){if(xB)return ew;xB=1;function e(t,r,n,i,s){return s(t,function(o,a,u){n=i?(i=!1,o):r(n,o,a,u)}),n}return ew=e,ew}var tw,SB;function I7(){if(SB)return tw;SB=1;var e=iae(),t=Og(),r=Xa(),n=sae(),i=oi();function s(o,a,u){var c=i(o)?e:n,f=arguments.length<3;return c(o,r(a,4),u,f,t)}return tw=s,tw}var rw,EB;function oae(){if(EB)return rw;EB=1;var e=Sc(),t=oi(),r=ya(),n="[object String]";function i(s){return typeof s=="string"||!t(s)&&r(s)&&e(s)==n}return rw=i,rw}var nw,AB;function aae(){if(AB)return nw;AB=1;var e=E7(),t=e("length");return nw=t,nw}var iw,TB;function uae(){if(TB)return iw;TB=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,s="\\ufe0e\\ufe0f",o="\\u200d",a=RegExp("["+o+e+i+s+"]");function u(c){return a.test(c)}return iw=u,iw}var sw,PB;function cae(){if(PB)return sw;PB=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,s="\\ufe0e\\ufe0f",o="["+e+"]",a="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",c="(?:"+a+"|"+u+")",f="[^"+e+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",m=c+"?",_="["+s+"]?",b="(?:"+y+"(?:"+[f,h,g].join("|")+")"+_+m+")*",S=_+m+b,E="(?:"+[f+a+"?",a,h,g,o].join("|")+")",A=RegExp(u+"(?="+u+")|"+E+S,"g");function T(I){for(var q=A.lastIndex=0;A.test(I);)++q;return q}return sw=T,sw}var ow,CB;function lae(){if(CB)return ow;CB=1;var e=aae(),t=uae(),r=cae();function n(i){return t(i)?r(i):e(i)}return ow=n,ow}var aw,RB;function fae(){if(RB)return aw;RB=1;var e=S2(),t=jl(),r=Wa(),n=oae(),i=lae(),s="[object Map]",o="[object Set]";function a(u){if(u==null)return 0;if(r(u))return n(u)?i(u):u.length;var c=t(u);return c==s||c==o?u.size:e(u).length}return aw=a,aw}var uw,IB;function hae(){if(IB)return uw;IB=1;var e=b2(),t=c7(),r=R2(),n=Xa(),i=Ig(),s=oi(),o=Ul(),a=Rh(),u=fo(),c=Mh();function f(h,g,y){var m=s(h),_=m||o(h)||c(h);if(g=n(g,4),y==null){var b=h&&h.constructor;_?y=m?new b:[]:u(h)?y=a(b)?t(i(h)):{}:y={}}return(_?e:r)(h,function(S,E,A){return g(y,S,E,A)}),y}return uw=f,uw}var cw,OB;function dae(){if(OB)return cw;OB=1;var e=$l(),t=Oh(),r=oi(),n=e?e.isConcatSpreadable:void 0;function i(s){return r(s)||t(s)||!!(n&&s&&s[n])}return cw=i,cw}var lw,MB;function M2(){if(MB)return lw;MB=1;var e=A2(),t=dae();function r(n,i,s,o,a){var u=-1,c=n.length;for(s||(s=t),a||(a=[]);++u<c;){var f=n[u];i>0&&s(f)?i>1?r(f,i-1,s,o,a):e(a,f):o||(a[a.length]=f)}return a}return lw=r,lw}var fw,kB;function pae(){if(kB)return fw;kB=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return fw=e,fw}var hw,LB;function O7(){if(LB)return hw;LB=1;var e=pae(),t=Math.max;function r(n,i,s){return i=t(i===void 0?n.length-1:i,0),function(){for(var o=arguments,a=-1,u=t(o.length-i,0),c=Array(u);++a<u;)c[a]=o[i+a];a=-1;for(var f=Array(i+1);++a<i;)f[a]=o[a];return f[i]=s(c),e(n,this,f)}}return hw=r,hw}var dw,NB;function gae(){if(NB)return dw;NB=1;var e=P2(),t=KV(),r=Tc(),n=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:r;return dw=n,dw}var pw,qB;function vae(){if(qB)return pw;qB=1;var e=800,t=16,r=Date.now;function n(i){var s=0,o=0;return function(){var a=r(),u=t-(a-o);if(o=a,u>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return pw=n,pw}var gw,DB;function M7(){if(DB)return gw;DB=1;var e=gae(),t=vae(),r=t(e);return gw=r,gw}var vw,FB;function Ng(){if(FB)return vw;FB=1;var e=Tc(),t=O7(),r=M7();function n(i,s){return r(t(i,s,e),i+"")}return vw=n,vw}var mw,BB;function k7(){if(BB)return mw;BB=1;function e(t,r,n,i){for(var s=t.length,o=n+(i?1:-1);i?o--:++o<s;)if(r(t[o],o,t))return o;return-1}return mw=e,mw}var yw,zB;function mae(){if(zB)return yw;zB=1;function e(t){return t!==t}return yw=e,yw}var _w,VB;function yae(){if(VB)return _w;VB=1;function e(t,r,n){for(var i=n-1,s=t.length;++i<s;)if(t[i]===r)return i;return-1}return _w=e,_w}var bw,GB;function _ae(){if(GB)return bw;GB=1;var e=k7(),t=mae(),r=yae();function n(i,s,o){return s===s?r(i,s,o):e(i,t,o)}return bw=n,bw}var ww,$B;function bae(){if($B)return ww;$B=1;var e=_ae();function t(r,n){var i=r==null?0:r.length;return!!i&&e(r,n,0)>-1}return ww=t,ww}var xw,UB;function wae(){if(UB)return xw;UB=1;function e(t,r,n){for(var i=-1,s=t==null?0:t.length;++i<s;)if(n(r,t[i]))return!0;return!1}return xw=e,xw}var Sw,jB;function xae(){if(jB)return Sw;jB=1;function e(){}return Sw=e,Sw}var Ew,HB;function Sae(){if(HB)return Ew;HB=1;var e=o7(),t=xae(),r=I2(),n=1/0,i=e&&1/r(new e([,-0]))[1]==n?function(s){return new e(s)}:t;return Ew=i,Ew}var Aw,WB;function Eae(){if(WB)return Aw;WB=1;var e=g7(),t=bae(),r=wae(),n=v7(),i=Sae(),s=I2(),o=200;function a(u,c,f){var h=-1,g=t,y=u.length,m=!0,_=[],b=_;if(f)m=!1,g=r;else if(y>=o){var S=c?null:i(u);if(S)return s(S);m=!1,g=n,b=new e}else b=c?[]:_;e:for(;++h<y;){var E=u[h],A=c?c(E):E;if(E=f||E!==0?E:0,m&&A===A){for(var T=b.length;T--;)if(b[T]===A)continue e;c&&b.push(A),_.push(E)}else g(b,A,f)||(b!==_&&b.push(A),_.push(E))}return _}return Aw=a,Aw}var Tw,XB;function L7(){if(XB)return Tw;XB=1;var e=Wa(),t=ya();function r(n){return t(n)&&e(n)}return Tw=r,Tw}var Pw,YB;function Aae(){if(YB)return Pw;YB=1;var e=M2(),t=Ng(),r=Eae(),n=L7(),i=t(function(s){return r(e(s,1,n,!0))});return Pw=i,Pw}var Cw,KB;function Tae(){if(KB)return Cw;KB=1;var e=Mg();function t(r,n){return e(n,function(i){return r[i]})}return Cw=t,Cw}var Rw,ZB;function N7(){if(ZB)return Rw;ZB=1;var e=Tae(),t=Cu();function r(n){return n==null?[]:e(n,t(n))}return Rw=r,Rw}var Iw,JB;function ho(){if(JB)return Iw;JB=1;var e;if(typeof m2=="function")try{e={clone:koe(),constant:P2(),each:p7(),filter:A7(),has:T7(),isArray:oi(),isEmpty:nae(),isFunction:Rh(),isUndefined:P7(),keys:Cu(),map:R7(),reduce:I7(),size:fae(),transform:hae(),union:Aae(),values:N7()}}catch{}return e||(e=window._),Iw=e,Iw}var Ow,QB;function k2(){if(QB)return Ow;QB=1;var e=ho();Ow=i;var t="\0",r="\0",n="";function i(f){this._isDirected=e.has(f,"directed")?f.directed:!0,this._isMultigraph=e.has(f,"multigraph")?f.multigraph:!1,this._isCompound=e.has(f,"compound")?f.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(f){return this._label=f,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultNodeLabelFn=f,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var f=this;return e.filter(this.nodes(),function(h){return e.isEmpty(f._in[h])})},i.prototype.sinks=function(){var f=this;return e.filter(this.nodes(),function(h){return e.isEmpty(f._out[h])})},i.prototype.setNodes=function(f,h){var g=arguments,y=this;return e.each(f,function(m){g.length>1?y.setNode(m,h):y.setNode(m)}),this},i.prototype.setNode=function(f,h){return e.has(this._nodes,f)?(arguments.length>1&&(this._nodes[f]=h),this):(this._nodes[f]=arguments.length>1?h:this._defaultNodeLabelFn(f),this._isCompound&&(this._parent[f]=r,this._children[f]={},this._children[r][f]=!0),this._in[f]={},this._preds[f]={},this._out[f]={},this._sucs[f]={},++this._nodeCount,this)},i.prototype.node=function(f){return this._nodes[f]},i.prototype.hasNode=function(f){return e.has(this._nodes,f)},i.prototype.removeNode=function(f){var h=this;if(e.has(this._nodes,f)){var g=function(y){h.removeEdge(h._edgeObjs[y])};delete this._nodes[f],this._isCompound&&(this._removeFromParentsChildList(f),delete this._parent[f],e.each(this.children(f),function(y){h.setParent(y)}),delete this._children[f]),e.each(e.keys(this._in[f]),g),delete this._in[f],delete this._preds[f],e.each(e.keys(this._out[f]),g),delete this._out[f],delete this._sucs[f],--this._nodeCount}return this},i.prototype.setParent=function(f,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(h))h=r;else{h+="";for(var g=h;!e.isUndefined(g);g=this.parent(g))if(g===f)throw new Error("Setting "+h+" as parent of "+f+" would create a cycle");this.setNode(h)}return this.setNode(f),this._removeFromParentsChildList(f),this._parent[f]=h,this._children[h][f]=!0,this},i.prototype._removeFromParentsChildList=function(f){delete this._children[this._parent[f]][f]},i.prototype.parent=function(f){if(this._isCompound){var h=this._parent[f];if(h!==r)return h}},i.prototype.children=function(f){if(e.isUndefined(f)&&(f=r),this._isCompound){var h=this._children[f];if(h)return e.keys(h)}else{if(f===r)return this.nodes();if(this.hasNode(f))return[]}},i.prototype.predecessors=function(f){var h=this._preds[f];if(h)return e.keys(h)},i.prototype.successors=function(f){var h=this._sucs[f];if(h)return e.keys(h)},i.prototype.neighbors=function(f){var h=this.predecessors(f);if(h)return e.union(h,this.successors(f))},i.prototype.isLeaf=function(f){var h;return this.isDirected()?h=this.successors(f):h=this.neighbors(f),h.length===0},i.prototype.filterNodes=function(f){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var g=this;e.each(this._nodes,function(_,b){f(b)&&h.setNode(b,_)}),e.each(this._edgeObjs,function(_){h.hasNode(_.v)&&h.hasNode(_.w)&&h.setEdge(_,g.edge(_))});var y={};function m(_){var b=g.parent(_);return b===void 0||h.hasNode(b)?(y[_]=b,b):b in y?y[b]:m(b)}return this._isCompound&&e.each(h.nodes(),function(_){h.setParent(_,m(_))}),h},i.prototype.setDefaultEdgeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultEdgeLabelFn=f,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(f,h){var g=this,y=arguments;return e.reduce(f,function(m,_){return y.length>1?g.setEdge(m,_,h):g.setEdge(m,_),_}),this},i.prototype.setEdge=function(){var f,h,g,y,m=!1,_=arguments[0];typeof _=="object"&&_!==null&&"v"in _?(f=_.v,h=_.w,g=_.name,arguments.length===2&&(y=arguments[1],m=!0)):(f=_,h=arguments[1],g=arguments[3],arguments.length>2&&(y=arguments[2],m=!0)),f=""+f,h=""+h,e.isUndefined(g)||(g=""+g);var b=a(this._isDirected,f,h,g);if(e.has(this._edgeLabels,b))return m&&(this._edgeLabels[b]=y),this;if(!e.isUndefined(g)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(h),this._edgeLabels[b]=m?y:this._defaultEdgeLabelFn(f,h,g);var S=u(this._isDirected,f,h,g);return f=S.v,h=S.w,Object.freeze(S),this._edgeObjs[b]=S,s(this._preds[h],f),s(this._sucs[f],h),this._in[h][b]=S,this._out[f][b]=S,this._edgeCount++,this},i.prototype.edge=function(f,h,g){var y=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,f,h,g);return this._edgeLabels[y]},i.prototype.hasEdge=function(f,h,g){var y=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,f,h,g);return e.has(this._edgeLabels,y)},i.prototype.removeEdge=function(f,h,g){var y=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,f,h,g),m=this._edgeObjs[y];return m&&(f=m.v,h=m.w,delete this._edgeLabels[y],delete this._edgeObjs[y],o(this._preds[h],f),o(this._sucs[f],h),delete this._in[h][y],delete this._out[f][y],this._edgeCount--),this},i.prototype.inEdges=function(f,h){var g=this._in[f];if(g){var y=e.values(g);return h?e.filter(y,function(m){return m.v===h}):y}},i.prototype.outEdges=function(f,h){var g=this._out[f];if(g){var y=e.values(g);return h?e.filter(y,function(m){return m.w===h}):y}},i.prototype.nodeEdges=function(f,h){var g=this.inEdges(f,h);if(g)return g.concat(this.outEdges(f,h))};function s(f,h){f[h]?f[h]++:f[h]=1}function o(f,h){--f[h]||delete f[h]}function a(f,h,g,y){var m=""+h,_=""+g;if(!f&&m>_){var b=m;m=_,_=b}return m+n+_+n+(e.isUndefined(y)?t:y)}function u(f,h,g,y){var m=""+h,_=""+g;if(!f&&m>_){var b=m;m=_,_=b}var S={v:m,w:_};return y&&(S.name=y),S}function c(f,h){return a(f,h.v,h.w,h.name)}return Ow}var Mw,e8;function Pae(){return e8||(e8=1,Mw="2.1.8"),Mw}var kw,t8;function Cae(){return t8||(t8=1,kw={Graph:k2(),version:Pae()}),kw}var Lw,r8;function Rae(){if(r8)return Lw;r8=1;var e=ho(),t=k2();Lw={write:r,read:s};function r(o){var a={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:n(o),edges:i(o)};return e.isUndefined(o.graph())||(a.value=e.clone(o.graph())),a}function n(o){return e.map(o.nodes(),function(a){var u=o.node(a),c=o.parent(a),f={v:a};return e.isUndefined(u)||(f.value=u),e.isUndefined(c)||(f.parent=c),f})}function i(o){return e.map(o.edges(),function(a){var u=o.edge(a),c={v:a.v,w:a.w};return e.isUndefined(a.name)||(c.name=a.name),e.isUndefined(u)||(c.value=u),c})}function s(o){var a=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(u){a.setNode(u.v,u.value),u.parent&&a.setParent(u.v,u.parent)}),e.each(o.edges,function(u){a.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),a}return Lw}var Nw,n8;function Iae(){if(n8)return Nw;n8=1;var e=ho();Nw=t;function t(r){var n={},i=[],s;function o(a){e.has(n,a)||(n[a]=!0,s.push(a),e.each(r.successors(a),o),e.each(r.predecessors(a),o))}return e.each(r.nodes(),function(a){s=[],o(a),s.length&&i.push(s)}),i}return Nw}var qw,i8;function q7(){if(i8)return qw;i8=1;var e=ho();qw=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(r){return r.key})},t.prototype.has=function(r){return e.has(this._keyIndices,r)},t.prototype.priority=function(r){var n=this._keyIndices[r];if(n!==void 0)return this._arr[n].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(r,n){var i=this._keyIndices;if(r=String(r),!e.has(i,r)){var s=this._arr,o=s.length;return i[r]=o,s.push({key:r,priority:n}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},t.prototype.decrease=function(r,n){var i=this._keyIndices[r];if(n>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[i].priority+" New: "+n);this._arr[i].priority=n,this._decrease(i)},t.prototype._heapify=function(r){var n=this._arr,i=2*r,s=i+1,o=r;i<n.length&&(o=n[i].priority<n[o].priority?i:o,s<n.length&&(o=n[s].priority<n[o].priority?s:o),o!==r&&(this._swap(r,o),this._heapify(o)))},t.prototype._decrease=function(r){for(var n=this._arr,i=n[r].priority,s;r!==0&&(s=r>>1,!(n[s].priority<i));)this._swap(r,s),r=s},t.prototype._swap=function(r,n){var i=this._arr,s=this._keyIndices,o=i[r],a=i[n];i[r]=a,i[n]=o,s[a.key]=r,s[o.key]=n},qw}var Dw,s8;function D7(){if(s8)return Dw;s8=1;var e=ho(),t=q7();Dw=n;var r=e.constant(1);function n(s,o,a,u){return i(s,String(o),a||r,u||function(c){return s.outEdges(c)})}function i(s,o,a,u){var c={},f=new t,h,g,y=function(m){var _=m.v!==h?m.v:m.w,b=c[_],S=a(m),E=g.distance+S;if(S<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+m+" Weight: "+S);E<b.distance&&(b.distance=E,b.predecessor=h,f.decrease(_,E))};for(s.nodes().forEach(function(m){var _=m===o?0:Number.POSITIVE_INFINITY;c[m]={distance:_},f.add(m,_)});f.size()>0&&(h=f.removeMin(),g=c[h],g.distance!==Number.POSITIVE_INFINITY);)u(h).forEach(y);return c}return Dw}var Fw,o8;function Oae(){if(o8)return Fw;o8=1;var e=D7(),t=ho();Fw=r;function r(n,i,s){return t.transform(n.nodes(),function(o,a){o[a]=e(n,a,i,s)},{})}return Fw}var Bw,a8;function F7(){if(a8)return Bw;a8=1;var e=ho();Bw=t;function t(r){var n=0,i=[],s={},o=[];function a(u){var c=s[u]={onStack:!0,lowlink:n,index:n++};if(i.push(u),r.successors(u).forEach(function(g){e.has(s,g)?s[g].onStack&&(c.lowlink=Math.min(c.lowlink,s[g].index)):(a(g),c.lowlink=Math.min(c.lowlink,s[g].lowlink))}),c.lowlink===c.index){var f=[],h;do h=i.pop(),s[h].onStack=!1,f.push(h);while(u!==h);o.push(f)}}return r.nodes().forEach(function(u){e.has(s,u)||a(u)}),o}return Bw}var zw,u8;function Mae(){if(u8)return zw;u8=1;var e=ho(),t=F7();zw=r;function r(n){return e.filter(t(n),function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return zw}var Vw,c8;function kae(){if(c8)return Vw;c8=1;var e=ho();Vw=r;var t=e.constant(1);function r(i,s,o){return n(i,s||t,o||function(a){return i.outEdges(a)})}function n(i,s,o){var a={},u=i.nodes();return u.forEach(function(c){a[c]={},a[c][c]={distance:0},u.forEach(function(f){c!==f&&(a[c][f]={distance:Number.POSITIVE_INFINITY})}),o(c).forEach(function(f){var h=f.v===c?f.w:f.v,g=s(f);a[c][h]={distance:g,predecessor:c}})}),u.forEach(function(c){var f=a[c];u.forEach(function(h){var g=a[h];u.forEach(function(y){var m=g[c],_=f[y],b=g[y],S=m.distance+_.distance;S<b.distance&&(b.distance=S,b.predecessor=_.predecessor)})})}),a}return Vw}var Gw,l8;function B7(){if(l8)return Gw;l8=1;var e=ho();Gw=t,t.CycleException=r;function t(n){var i={},s={},o=[];function a(u){if(e.has(s,u))throw new r;e.has(i,u)||(s[u]=!0,i[u]=!0,e.each(n.predecessors(u),a),delete s[u],o.push(u))}if(e.each(n.sinks(),a),e.size(i)!==n.nodeCount())throw new r;return o}function r(){}return r.prototype=new Error,Gw}var $w,f8;function Lae(){if(f8)return $w;f8=1;var e=B7();$w=t;function t(r){try{e(r)}catch(n){if(n instanceof e.CycleException)return!1;throw n}return!0}return $w}var Uw,h8;function z7(){if(h8)return Uw;h8=1;var e=ho();Uw=t;function t(n,i,s){e.isArray(i)||(i=[i]);var o=(n.isDirected()?n.successors:n.neighbors).bind(n),a=[],u={};return e.each(i,function(c){if(!n.hasNode(c))throw new Error("Graph does not have node: "+c);r(n,c,s==="post",u,o,a)}),a}function r(n,i,s,o,a,u){e.has(o,i)||(o[i]=!0,s||u.push(i),e.each(a(i),function(c){r(n,c,s,o,a,u)}),s&&u.push(i))}return Uw}var jw,d8;function Nae(){if(d8)return jw;d8=1;var e=z7();jw=t;function t(r,n){return e(r,n,"post")}return jw}var Hw,p8;function qae(){if(p8)return Hw;p8=1;var e=z7();Hw=t;function t(r,n){return e(r,n,"pre")}return Hw}var Ww,g8;function Dae(){if(g8)return Ww;g8=1;var e=ho(),t=k2(),r=q7();Ww=n;function n(i,s){var o=new t,a={},u=new r,c;function f(g){var y=g.v===c?g.w:g.v,m=u.priority(y);if(m!==void 0){var _=s(g);_<m&&(a[y]=c,u.decrease(y,_))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(g){u.add(g,Number.POSITIVE_INFINITY),o.setNode(g)}),u.decrease(i.nodes()[0],0);for(var h=!1;u.size()>0;){if(c=u.removeMin(),e.has(a,c))o.setEdge(c,a[c]);else{if(h)throw new Error("Input graph is not connected: "+i);h=!0}i.nodeEdges(c).forEach(f)}return o}return Ww}var Xw,v8;function Fae(){return v8||(v8=1,Xw={components:Iae(),dijkstra:D7(),dijkstraAll:Oae(),findCycles:Mae(),floydWarshall:kae(),isAcyclic:Lae(),postorder:Nae(),preorder:qae(),prim:Dae(),tarjan:F7(),topsort:B7()}),Xw}var Yw,m8;function V7(){if(m8)return Yw;m8=1;var e=Cae();return Yw={Graph:e.Graph,json:Rae(),alg:Fae(),version:e.version},Yw}var Kw,y8;function Io(){if(y8)return Kw;y8=1;var e;if(typeof m2=="function")try{e=V7()}catch{}return e||(e=window.graphlib),Kw=e,Kw}var Zw,_8;function Bae(){if(_8)return Zw;_8=1;var e=f7(),t=1,r=4;function n(i){return e(i,t|r)}return Zw=n,Zw}var Jw,b8;function qg(){if(b8)return Jw;b8=1;var e=Gl(),t=Wa(),r=Pg(),n=fo();function i(s,o,a){if(!n(a))return!1;var u=typeof o;return(u=="number"?t(a)&&r(o,a.length):u=="string"&&o in a)?e(a[o],s):!1}return Jw=i,Jw}var Qw,w8;function zae(){if(w8)return Qw;w8=1;var e=Ng(),t=Gl(),r=qg(),n=Ac(),i=Object.prototype,s=i.hasOwnProperty,o=e(function(a,u){a=Object(a);var c=-1,f=u.length,h=f>2?u[2]:void 0;for(h&&r(u[0],u[1],h)&&(f=1);++c<f;)for(var g=u[c],y=n(g),m=-1,_=y.length;++m<_;){var b=y[m],S=a[b];(S===void 0||t(S,i[b])&&!s.call(a,b))&&(a[b]=g[b])}return a});return Qw=o,Qw}var ex,x8;function Vae(){if(x8)return ex;x8=1;var e=Xa(),t=Wa(),r=Cu();function n(i){return function(s,o,a){var u=Object(s);if(!t(s)){var c=e(o,3);s=r(s),o=function(h){return c(u[h],h,u)}}var f=i(s,o,a);return f>-1?u[c?s[f]:f]:void 0}}return ex=n,ex}var tx,S8;function Gae(){if(S8)return tx;S8=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return tx=t,tx}var rx,E8;function $ae(){if(E8)return rx;E8=1;var e=Gae(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return rx=r,rx}var nx,A8;function Uae(){if(A8)return nx;A8=1;var e=$ae(),t=fo(),r=Hl(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function u(c){if(typeof c=="number")return c;if(r(c))return n;if(t(c)){var f=typeof c.valueOf=="function"?c.valueOf():c;c=t(f)?f+"":f}if(typeof c!="string")return c===0?c:+c;c=e(c);var h=s.test(c);return h||o.test(c)?a(c.slice(2),h?2:8):i.test(c)?n:+c}return nx=u,nx}var ix,T8;function G7(){if(T8)return ix;T8=1;var e=Uae(),t=1/0,r=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-1/0){var s=i<0?-1:1;return s*r}return i===i?i:0}return ix=n,ix}var sx,P8;function jae(){if(P8)return sx;P8=1;var e=G7();function t(r){var n=e(r),i=n%1;return n===n?i?n-i:n:0}return sx=t,sx}var ox,C8;function Hae(){if(C8)return ox;C8=1;var e=k7(),t=Xa(),r=jae(),n=Math.max;function i(s,o,a){var u=s==null?0:s.length;if(!u)return-1;var c=a==null?0:r(a);return c<0&&(c=n(u+c,0)),e(s,t(o,3),c)}return ox=i,ox}var ax,R8;function Wae(){if(R8)return ax;R8=1;var e=Vae(),t=Hae(),r=e(t);return ax=r,ax}var ux,I8;function $7(){if(I8)return ux;I8=1;var e=M2();function t(r){var n=r==null?0:r.length;return n?e(r,1):[]}return ux=t,ux}var cx,O8;function Xae(){if(O8)return cx;O8=1;var e=C2(),t=h7(),r=Ac();function n(i,s){return i==null?i:e(i,t(s),r)}return cx=n,cx}var lx,M8;function Yae(){if(M8)return lx;M8=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return lx=e,lx}var fx,k8;function Kae(){if(k8)return fx;k8=1;var e=Ag(),t=R2(),r=Xa();function n(i,s){var o={};return s=r(s,3),t(i,function(a,u,c){e(o,u,s(a,u,c))}),o}return fx=n,fx}var hx,L8;function L2(){if(L8)return hx;L8=1;var e=Hl();function t(r,n,i){for(var s=-1,o=r.length;++s<o;){var a=r[s],u=n(a);if(u!=null&&(c===void 0?u===u&&!e(u):i(u,c)))var c=u,f=a}return f}return hx=t,hx}var dx,N8;function Zae(){if(N8)return dx;N8=1;function e(t,r){return t>r}return dx=e,dx}var px,q8;function Jae(){if(q8)return px;q8=1;var e=L2(),t=Zae(),r=Tc();function n(i){return i&&i.length?e(i,r,t):void 0}return px=n,px}var gx,D8;function U7(){if(D8)return gx;D8=1;var e=Ag(),t=Gl();function r(n,i,s){(s!==void 0&&!t(n[i],s)||s===void 0&&!(i in n))&&e(n,i,s)}return gx=r,gx}var vx,F8;function Qae(){if(F8)return vx;F8=1;var e=Sc(),t=Ig(),r=ya(),n="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,a=s.hasOwnProperty,u=o.call(Object);function c(f){if(!r(f)||e(f)!=n)return!1;var h=t(f);if(h===null)return!0;var g=a.call(h,"constructor")&&h.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==u}return vx=c,vx}var mx,B8;function j7(){if(B8)return mx;B8=1;function e(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}return mx=e,mx}var yx,z8;function eue(){if(z8)return yx;z8=1;var e=Ih(),t=Ac();function r(n){return e(n,t(n))}return yx=r,yx}var _x,V8;function tue(){if(V8)return _x;V8=1;var e=U7(),t=QV(),r=u7(),n=e7(),i=l7(),s=Oh(),o=oi(),a=L7(),u=Ul(),c=Rh(),f=fo(),h=Qae(),g=Mh(),y=j7(),m=eue();function _(b,S,E,A,T,I,q){var p=y(b,E),P=y(S,E),O=q.get(P);if(O){e(b,E,O);return}var N=I?I(p,P,E+"",b,S,q):void 0,V=N===void 0;if(V){var W=o(P),G=!W&&u(P),ee=!W&&!G&&g(P);N=P,W||G||ee?o(p)?N=p:a(p)?N=n(p):G?(V=!1,N=t(P,!0)):ee?(V=!1,N=r(P,!0)):N=[]:h(P)||s(P)?(N=p,s(p)?N=m(p):(!f(p)||c(p))&&(N=i(P))):V=!1}V&&(q.set(P,N),T(N,P,A,I,q),q.delete(P)),e(b,E,N)}return _x=_,_x}var bx,G8;function rue(){if(G8)return bx;G8=1;var e=Eg(),t=U7(),r=C2(),n=tue(),i=fo(),s=Ac(),o=j7();function a(u,c,f,h,g){u!==c&&r(c,function(y,m){if(g||(g=new e),i(y))n(u,c,m,f,a,h,g);else{var _=h?h(o(u,m),y,m+"",u,c,g):void 0;_===void 0&&(_=y),t(u,m,_)}},s)}return bx=a,bx}var wx,$8;function nue(){if($8)return wx;$8=1;var e=Ng(),t=qg();function r(n){return e(function(i,s){var o=-1,a=s.length,u=a>1?s[a-1]:void 0,c=a>2?s[2]:void 0;for(u=n.length>3&&typeof u=="function"?(a--,u):void 0,c&&t(s[0],s[1],c)&&(u=a<3?void 0:u,a=1),i=Object(i);++o<a;){var f=s[o];f&&n(i,f,o,u)}return i})}return wx=r,wx}var xx,U8;function iue(){if(U8)return xx;U8=1;var e=rue(),t=nue(),r=t(function(n,i,s){e(n,i,s)});return xx=r,xx}var Sx,j8;function H7(){if(j8)return Sx;j8=1;function e(t,r){return t<r}return Sx=e,Sx}var Ex,H8;function sue(){if(H8)return Ex;H8=1;var e=L2(),t=H7(),r=Tc();function n(i){return i&&i.length?e(i,r,t):void 0}return Ex=n,Ex}var Ax,W8;function oue(){if(W8)return Ax;W8=1;var e=L2(),t=Xa(),r=H7();function n(i,s){return i&&i.length?e(i,t(s,2),r):void 0}return Ax=n,Ax}var Tx,X8;function aue(){if(X8)return Tx;X8=1;var e=Bo(),t=function(){return e.Date.now()};return Tx=t,Tx}var Px,Y8;function uue(){if(Y8)return Px;Y8=1;var e=Tg(),t=kg(),r=Pg(),n=fo(),i=kh();function s(o,a,u,c){if(!n(o))return o;a=t(a,o);for(var f=-1,h=a.length,g=h-1,y=o;y!=null&&++f<h;){var m=i(a[f]),_=u;if(m==="__proto__"||m==="constructor"||m==="prototype")return o;if(f!=g){var b=y[m];_=c?c(b,m,y):void 0,_===void 0&&(_=n(b)?b:r(a[f+1])?[]:{})}e(y,m,_),y=y[m]}return o}return Px=s,Px}var Cx,K8;function cue(){if(K8)return Cx;K8=1;var e=Lg(),t=uue(),r=kg();function n(i,s,o){for(var a=-1,u=s.length,c={};++a<u;){var f=s[a],h=e(i,f);o(h,f)&&t(c,r(f,i),h)}return c}return Cx=n,Cx}var Rx,Z8;function lue(){if(Z8)return Rx;Z8=1;var e=cue(),t=S7();function r(n,i){return e(n,i,function(s,o){return t(n,o)})}return Rx=r,Rx}var Ix,J8;function fue(){if(J8)return Ix;J8=1;var e=$7(),t=O7(),r=M7();function n(i){return r(t(i,void 0,e),i+"")}return Ix=n,Ix}var Ox,Q8;function hue(){if(Q8)return Ox;Q8=1;var e=lue(),t=fue(),r=t(function(n,i){return n==null?{}:e(n,i)});return Ox=r,Ox}var Mx,ez;function due(){if(ez)return Mx;ez=1;var e=Math.ceil,t=Math.max;function r(n,i,s,o){for(var a=-1,u=t(e((i-n)/(s||1)),0),c=Array(u);u--;)c[o?u:++a]=n,n+=s;return c}return Mx=r,Mx}var kx,tz;function pue(){if(tz)return kx;tz=1;var e=due(),t=qg(),r=G7();function n(i){return function(s,o,a){return a&&typeof a!="number"&&t(s,o,a)&&(o=a=void 0),s=r(s),o===void 0?(o=s,s=0):o=r(o),a=a===void 0?s<o?1:-1:r(a),e(s,o,a,i)}}return kx=n,kx}var Lx,rz;function gue(){if(rz)return Lx;rz=1;var e=pue(),t=e();return Lx=t,Lx}var Nx,nz;function vue(){if(nz)return Nx;nz=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return Nx=e,Nx}var qx,iz;function mue(){if(iz)return qx;iz=1;var e=Hl();function t(r,n){if(r!==n){var i=r!==void 0,s=r===null,o=r===r,a=e(r),u=n!==void 0,c=n===null,f=n===n,h=e(n);if(!c&&!h&&!a&&r>n||a&&u&&f&&!c&&!h||s&&u&&f||!i&&f||!o)return 1;if(!s&&!a&&!h&&r<n||h&&i&&o&&!s&&!a||c&&i&&o||!u&&o||!f)return-1}return 0}return qx=t,qx}var Dx,sz;function yue(){if(sz)return Dx;sz=1;var e=mue();function t(r,n,i){for(var s=-1,o=r.criteria,a=n.criteria,u=o.length,c=i.length;++s<u;){var f=e(o[s],a[s]);if(f){if(s>=c)return f;var h=i[s];return f*(h=="desc"?-1:1)}}return r.index-n.index}return Dx=t,Dx}var Fx,oz;function _ue(){if(oz)return Fx;oz=1;var e=Mg(),t=Lg(),r=Xa(),n=C7(),i=vue(),s=Cg(),o=yue(),a=Tc(),u=oi();function c(f,h,g){h.length?h=e(h,function(_){return u(_)?function(b){return t(b,_.length===1?_[0]:_)}:_}):h=[a];var y=-1;h=e(h,s(r));var m=n(f,function(_,b,S){var E=e(h,function(A){return A(_)});return{criteria:E,index:++y,value:_}});return i(m,function(_,b){return o(_,b,g)})}return Fx=c,Fx}var Bx,az;function bue(){if(az)return Bx;az=1;var e=M2(),t=_ue(),r=Ng(),n=qg(),i=r(function(s,o){if(s==null)return[];var a=o.length;return a>1&&n(s,o[0],o[1])?o=[]:a>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),t(s,e(o,1),[])});return Bx=i,Bx}var zx,uz;function wue(){if(uz)return zx;uz=1;var e=w7(),t=0;function r(n){var i=++t;return e(n)+i}return zx=r,zx}var Vx,cz;function xue(){if(cz)return Vx;cz=1;function e(t,r,n){for(var i=-1,s=t.length,o=r.length,a={};++i<s;){var u=i<o?r[i]:void 0;n(a,t[i],u)}return a}return Vx=e,Vx}var Gx,lz;function Sue(){if(lz)return Gx;lz=1;var e=Tg(),t=xue();function r(n,i){return t(n||[],i||[],e)}return Gx=r,Gx}var $x,fz;function In(){if(fz)return $x;fz=1;var e;if(typeof m2=="function")try{e={cloneDeep:Bae(),constant:P2(),defaults:zae(),each:p7(),filter:A7(),find:Wae(),flatten:$7(),forEach:d7(),forIn:Xae(),has:T7(),isUndefined:P7(),last:Yae(),map:R7(),mapValues:Kae(),max:Jae(),merge:iue(),min:sue(),minBy:oue(),now:aue(),pick:hue(),range:gue(),reduce:I7(),sortBy:bue(),uniqueId:wue(),values:N7(),zipObject:Sue()}}catch{}return e||(e=window._),$x=e,$x}var Ux,hz;function Eue(){if(hz)return Ux;hz=1,Ux=e;function e(){var n={};n._next=n._prev=n,this._sentinel=n}e.prototype.dequeue=function(){var n=this._sentinel,i=n._prev;if(i!==n)return t(i),i},e.prototype.enqueue=function(n){var i=this._sentinel;n._prev&&n._next&&t(n),n._next=i._next,i._next._prev=n,i._next=n,n._prev=i},e.prototype.toString=function(){for(var n=[],i=this._sentinel,s=i._prev;s!==i;)n.push(JSON.stringify(s,r)),s=s._prev;return"["+n.join(", ")+"]"};function t(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function r(n,i){if(n!=="_next"&&n!=="_prev")return i}return Ux}var jx,dz;function Aue(){if(dz)return jx;dz=1;var e=In(),t=Io().Graph,r=Eue();jx=i;var n=e.constant(1);function i(c,f){if(c.nodeCount()<=1)return[];var h=a(c,f||n),g=s(h.graph,h.buckets,h.zeroIdx);return e.flatten(e.map(g,function(y){return c.outEdges(y.v,y.w)}),!0)}function s(c,f,h){for(var g=[],y=f[f.length-1],m=f[0],_;c.nodeCount();){for(;_=m.dequeue();)o(c,f,h,_);for(;_=y.dequeue();)o(c,f,h,_);if(c.nodeCount()){for(var b=f.length-2;b>0;--b)if(_=f[b].dequeue(),_){g=g.concat(o(c,f,h,_,!0));break}}}return g}function o(c,f,h,g,y){var m=y?[]:void 0;return e.forEach(c.inEdges(g.v),function(_){var b=c.edge(_),S=c.node(_.v);y&&m.push({v:_.v,w:_.w}),S.out-=b,u(f,h,S)}),e.forEach(c.outEdges(g.v),function(_){var b=c.edge(_),S=_.w,E=c.node(S);E.in-=b,u(f,h,E)}),c.removeNode(g.v),m}function a(c,f){var h=new t,g=0,y=0;e.forEach(c.nodes(),function(b){h.setNode(b,{v:b,in:0,out:0})}),e.forEach(c.edges(),function(b){var S=h.edge(b.v,b.w)||0,E=f(b),A=S+E;h.setEdge(b.v,b.w,A),y=Math.max(y,h.node(b.v).out+=E),g=Math.max(g,h.node(b.w).in+=E)});var m=e.range(y+g+3).map(function(){return new r}),_=g+1;return e.forEach(h.nodes(),function(b){u(m,_,h.node(b))}),{graph:h,buckets:m,zeroIdx:_}}function u(c,f,h){h.out?h.in?c[h.out-h.in+f].enqueue(h):c[c.length-1].enqueue(h):c[0].enqueue(h)}return jx}var Hx,pz;function Tue(){if(pz)return Hx;pz=1;var e=In(),t=Aue();Hx={run:r,undo:i};function r(s){var o=s.graph().acyclicer==="greedy"?t(s,a(s)):n(s);e.forEach(o,function(u){var c=s.edge(u);s.removeEdge(u),c.forwardName=u.name,c.reversed=!0,s.setEdge(u.w,u.v,c,e.uniqueId("rev"))});function a(u){return function(c){return u.edge(c).weight}}}function n(s){var o=[],a={},u={};function c(f){e.has(u,f)||(u[f]=!0,a[f]=!0,e.forEach(s.outEdges(f),function(h){e.has(a,h.w)?o.push(h):c(h.w)}),delete a[f])}return e.forEach(s.nodes(),c),o}function i(s){e.forEach(s.edges(),function(o){var a=s.edge(o);if(a.reversed){s.removeEdge(o);var u=a.forwardName;delete a.reversed,delete a.forwardName,s.setEdge(o.w,o.v,a,u)}})}return Hx}var Wx,gz;function gs(){if(gz)return Wx;gz=1;var e=In(),t=Io().Graph;Wx={addDummyNode:r,simplify:n,asNonCompoundGraph:i,successorWeights:s,predecessorWeights:o,intersectRect:a,buildLayerMatrix:u,normalizeRanks:c,removeEmptyRanks:f,addBorderNode:h,maxRank:g,partition:y,time:m,notime:_};function r(b,S,E,A){var T;do T=e.uniqueId(A);while(b.hasNode(T));return E.dummy=S,b.setNode(T,E),T}function n(b){var S=new t().setGraph(b.graph());return e.forEach(b.nodes(),function(E){S.setNode(E,b.node(E))}),e.forEach(b.edges(),function(E){var A=S.edge(E.v,E.w)||{weight:0,minlen:1},T=b.edge(E);S.setEdge(E.v,E.w,{weight:A.weight+T.weight,minlen:Math.max(A.minlen,T.minlen)})}),S}function i(b){var S=new t({multigraph:b.isMultigraph()}).setGraph(b.graph());return e.forEach(b.nodes(),function(E){b.children(E).length||S.setNode(E,b.node(E))}),e.forEach(b.edges(),function(E){S.setEdge(E,b.edge(E))}),S}function s(b){var S=e.map(b.nodes(),function(E){var A={};return e.forEach(b.outEdges(E),function(T){A[T.w]=(A[T.w]||0)+b.edge(T).weight}),A});return e.zipObject(b.nodes(),S)}function o(b){var S=e.map(b.nodes(),function(E){var A={};return e.forEach(b.inEdges(E),function(T){A[T.v]=(A[T.v]||0)+b.edge(T).weight}),A});return e.zipObject(b.nodes(),S)}function a(b,S){var E=b.x,A=b.y,T=S.x-E,I=S.y-A,q=b.width/2,p=b.height/2;if(!T&&!I)throw new Error("Not possible to find intersection inside of the rectangle");var P,O;return Math.abs(I)*q>Math.abs(T)*p?(I<0&&(p=-p),P=p*T/I,O=p):(T<0&&(q=-q),P=q,O=q*I/T),{x:E+P,y:A+O}}function u(b){var S=e.map(e.range(g(b)+1),function(){return[]});return e.forEach(b.nodes(),function(E){var A=b.node(E),T=A.rank;e.isUndefined(T)||(S[T][A.order]=E)}),S}function c(b){var S=e.min(e.map(b.nodes(),function(E){return b.node(E).rank}));e.forEach(b.nodes(),function(E){var A=b.node(E);e.has(A,"rank")&&(A.rank-=S)})}function f(b){var S=e.min(e.map(b.nodes(),function(I){return b.node(I).rank})),E=[];e.forEach(b.nodes(),function(I){var q=b.node(I).rank-S;E[q]||(E[q]=[]),E[q].push(I)});var A=0,T=b.graph().nodeRankFactor;e.forEach(E,function(I,q){e.isUndefined(I)&&q%T!==0?--A:A&&e.forEach(I,function(p){b.node(p).rank+=A})})}function h(b,S,E,A){var T={width:0,height:0};return arguments.length>=4&&(T.rank=E,T.order=A),r(b,"border",T,S)}function g(b){return e.max(e.map(b.nodes(),function(S){var E=b.node(S).rank;if(!e.isUndefined(E))return E}))}function y(b,S){var E={lhs:[],rhs:[]};return e.forEach(b,function(A){S(A)?E.lhs.push(A):E.rhs.push(A)}),E}function m(b,S){var E=e.now();try{return S()}finally{console.log(b+" time: "+(e.now()-E)+"ms")}}function _(b,S){return S()}return Wx}var Xx,vz;function Pue(){if(vz)return Xx;vz=1;var e=In(),t=gs();Xx={run:r,undo:i};function r(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(o){n(s,o)})}function n(s,o){var a=o.v,u=s.node(a).rank,c=o.w,f=s.node(c).rank,h=o.name,g=s.edge(o),y=g.labelRank;if(f!==u+1){s.removeEdge(o);var m,_,b;for(b=0,++u;u<f;++b,++u)g.points=[],_={width:0,height:0,edgeLabel:g,edgeObj:o,rank:u},m=t.addDummyNode(s,"edge",_,"_d"),u===y&&(_.width=g.width,_.height=g.height,_.dummy="edge-label",_.labelpos=g.labelpos),s.setEdge(a,m,{weight:g.weight},h),b===0&&s.graph().dummyChains.push(m),a=m;s.setEdge(a,c,{weight:g.weight},h)}}function i(s){e.forEach(s.graph().dummyChains,function(o){var a=s.node(o),u=a.edgeLabel,c;for(s.setEdge(a.edgeObj,u);a.dummy;)c=s.successors(o)[0],s.removeNode(o),u.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(u.x=a.x,u.y=a.y,u.width=a.width,u.height=a.height),o=c,a=s.node(o)})}return Xx}var Yx,mz;function Ip(){if(mz)return Yx;mz=1;var e=In();Yx={longestPath:t,slack:r};function t(n){var i={};function s(o){var a=n.node(o);if(e.has(i,o))return a.rank;i[o]=!0;var u=e.min(e.map(n.outEdges(o),function(c){return s(c.w)-n.edge(c).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),a.rank=u}e.forEach(n.sources(),s)}function r(n,i){return n.node(i.w).rank-n.node(i.v).rank-n.edge(i).minlen}return Yx}var Kx,yz;function W7(){if(yz)return Kx;yz=1;var e=In(),t=Io().Graph,r=Ip().slack;Kx=n;function n(a){var u=new t({directed:!1}),c=a.nodes()[0],f=a.nodeCount();u.setNode(c,{});for(var h,g;i(u,a)<f;)h=s(u,a),g=u.hasNode(h.v)?r(a,h):-r(a,h),o(u,a,g);return u}function i(a,u){function c(f){e.forEach(u.nodeEdges(f),function(h){var g=h.v,y=f===g?h.w:g;!a.hasNode(y)&&!r(u,h)&&(a.setNode(y,{}),a.setEdge(f,y,{}),c(y))})}return e.forEach(a.nodes(),c),a.nodeCount()}function s(a,u){return e.minBy(u.edges(),function(c){if(a.hasNode(c.v)!==a.hasNode(c.w))return r(u,c)})}function o(a,u,c){e.forEach(a.nodes(),function(f){u.node(f).rank+=c})}return Kx}var Zx,_z;function Cue(){if(_z)return Zx;_z=1;var e=In(),t=W7(),r=Ip().slack,n=Ip().longestPath,i=Io().alg.preorder,s=Io().alg.postorder,o=gs().simplify;Zx=a,a.initLowLimValues=h,a.initCutValues=u,a.calcCutValue=f,a.leaveEdge=y,a.enterEdge=m,a.exchangeEdges=_;function a(A){A=o(A),n(A);var T=t(A);h(T),u(T,A);for(var I,q;I=y(T);)q=m(T,A,I),_(T,A,I,q)}function u(A,T){var I=s(A,A.nodes());I=I.slice(0,I.length-1),e.forEach(I,function(q){c(A,T,q)})}function c(A,T,I){var q=A.node(I),p=q.parent;A.edge(I,p).cutvalue=f(A,T,I)}function f(A,T,I){var q=A.node(I),p=q.parent,P=!0,O=T.edge(I,p),N=0;return O||(P=!1,O=T.edge(p,I)),N=O.weight,e.forEach(T.nodeEdges(I),function(V){var W=V.v===I,G=W?V.w:V.v;if(G!==p){var ee=W===P,ae=T.edge(V).weight;if(N+=ee?ae:-ae,S(A,I,G)){var K=A.edge(I,G).cutvalue;N+=ee?-K:K}}}),N}function h(A,T){arguments.length<2&&(T=A.nodes()[0]),g(A,{},1,T)}function g(A,T,I,q,p){var P=I,O=A.node(q);return T[q]=!0,e.forEach(A.neighbors(q),function(N){e.has(T,N)||(I=g(A,T,I,N,q))}),O.low=P,O.lim=I++,p?O.parent=p:delete O.parent,I}function y(A){return e.find(A.edges(),function(T){return A.edge(T).cutvalue<0})}function m(A,T,I){var q=I.v,p=I.w;T.hasEdge(q,p)||(q=I.w,p=I.v);var P=A.node(q),O=A.node(p),N=P,V=!1;P.lim>O.lim&&(N=O,V=!0);var W=e.filter(T.edges(),function(G){return V===E(A,A.node(G.v),N)&&V!==E(A,A.node(G.w),N)});return e.minBy(W,function(G){return r(T,G)})}function _(A,T,I,q){var p=I.v,P=I.w;A.removeEdge(p,P),A.setEdge(q.v,q.w,{}),h(A),u(A,T),b(A,T)}function b(A,T){var I=e.find(A.nodes(),function(p){return!T.node(p).parent}),q=i(A,I);q=q.slice(1),e.forEach(q,function(p){var P=A.node(p).parent,O=T.edge(p,P),N=!1;O||(O=T.edge(P,p),N=!0),T.node(p).rank=T.node(P).rank+(N?O.minlen:-O.minlen)})}function S(A,T,I){return A.hasEdge(T,I)}function E(A,T,I){return I.low<=T.lim&&T.lim<=I.lim}return Zx}var Jx,bz;function Rue(){if(bz)return Jx;bz=1;var e=Ip(),t=e.longestPath,r=W7(),n=Cue();Jx=i;function i(u){switch(u.graph().ranker){case"network-simplex":a(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:a(u)}}var s=t;function o(u){t(u),r(u)}function a(u){n(u)}return Jx}var Qx,wz;function Iue(){if(wz)return Qx;wz=1;var e=In();Qx=t;function t(i){var s=n(i);e.forEach(i.graph().dummyChains,function(o){for(var a=i.node(o),u=a.edgeObj,c=r(i,s,u.v,u.w),f=c.path,h=c.lca,g=0,y=f[g],m=!0;o!==u.w;){if(a=i.node(o),m){for(;(y=f[g])!==h&&i.node(y).maxRank<a.rank;)g++;y===h&&(m=!1)}if(!m){for(;g<f.length-1&&i.node(y=f[g+1]).minRank<=a.rank;)g++;y=f[g]}i.setParent(o,y),o=i.successors(o)[0]}})}function r(i,s,o,a){var u=[],c=[],f=Math.min(s[o].low,s[a].low),h=Math.max(s[o].lim,s[a].lim),g,y;g=o;do g=i.parent(g),u.push(g);while(g&&(s[g].low>f||h>s[g].lim));for(y=g,g=a;(g=i.parent(g))!==y;)c.push(g);return{path:u.concat(c.reverse()),lca:y}}function n(i){var s={},o=0;function a(u){var c=o;e.forEach(i.children(u),a),s[u]={low:c,lim:o++}}return e.forEach(i.children(),a),s}return Qx}var eS,xz;function Oue(){if(xz)return eS;xz=1;var e=In(),t=gs();eS={run:r,cleanup:o};function r(a){var u=t.addDummyNode(a,"root",{},"_root"),c=i(a),f=e.max(e.values(c))-1,h=2*f+1;a.graph().nestingRoot=u,e.forEach(a.edges(),function(y){a.edge(y).minlen*=h});var g=s(a)+1;e.forEach(a.children(),function(y){n(a,u,h,g,f,c,y)}),a.graph().nodeRankFactor=h}function n(a,u,c,f,h,g,y){var m=a.children(y);if(!m.length){y!==u&&a.setEdge(u,y,{weight:0,minlen:c});return}var _=t.addBorderNode(a,"_bt"),b=t.addBorderNode(a,"_bb"),S=a.node(y);a.setParent(_,y),S.borderTop=_,a.setParent(b,y),S.borderBottom=b,e.forEach(m,function(E){n(a,u,c,f,h,g,E);var A=a.node(E),T=A.borderTop?A.borderTop:E,I=A.borderBottom?A.borderBottom:E,q=A.borderTop?f:2*f,p=T!==I?1:h-g[y]+1;a.setEdge(_,T,{weight:q,minlen:p,nestingEdge:!0}),a.setEdge(I,b,{weight:q,minlen:p,nestingEdge:!0})}),a.parent(y)||a.setEdge(u,_,{weight:0,minlen:h+g[y]})}function i(a){var u={};function c(f,h){var g=a.children(f);g&&g.length&&e.forEach(g,function(y){c(y,h+1)}),u[f]=h}return e.forEach(a.children(),function(f){c(f,1)}),u}function s(a){return e.reduce(a.edges(),function(u,c){return u+a.edge(c).weight},0)}function o(a){var u=a.graph();a.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(a.edges(),function(c){var f=a.edge(c);f.nestingEdge&&a.removeEdge(c)})}return eS}var tS,Sz;function Mue(){if(Sz)return tS;Sz=1;var e=In(),t=gs();tS=r;function r(i){function s(o){var a=i.children(o),u=i.node(o);if(a.length&&e.forEach(a,s),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var c=u.minRank,f=u.maxRank+1;c<f;++c)n(i,"borderLeft","_bl",o,u,c),n(i,"borderRight","_br",o,u,c)}}e.forEach(i.children(),s)}function n(i,s,o,a,u,c){var f={width:0,height:0,rank:c,borderType:s},h=u[s][c-1],g=t.addDummyNode(i,"border",f,o);u[s][c]=g,i.setParent(g,a),h&&i.setEdge(h,g,{weight:1})}return tS}var rS,Ez;function kue(){if(Ez)return rS;Ez=1;var e=In();rS={adjust:t,undo:r};function t(c){var f=c.graph().rankdir.toLowerCase();(f==="lr"||f==="rl")&&n(c)}function r(c){var f=c.graph().rankdir.toLowerCase();(f==="bt"||f==="rl")&&s(c),(f==="lr"||f==="rl")&&(a(c),n(c))}function n(c){e.forEach(c.nodes(),function(f){i(c.node(f))}),e.forEach(c.edges(),function(f){i(c.edge(f))})}function i(c){var f=c.width;c.width=c.height,c.height=f}function s(c){e.forEach(c.nodes(),function(f){o(c.node(f))}),e.forEach(c.edges(),function(f){var h=c.edge(f);e.forEach(h.points,o),e.has(h,"y")&&o(h)})}function o(c){c.y=-c.y}function a(c){e.forEach(c.nodes(),function(f){u(c.node(f))}),e.forEach(c.edges(),function(f){var h=c.edge(f);e.forEach(h.points,u),e.has(h,"x")&&u(h)})}function u(c){var f=c.x;c.x=c.y,c.y=f}return rS}var nS,Az;function Lue(){if(Az)return nS;Az=1;var e=In();nS=t;function t(r){var n={},i=e.filter(r.nodes(),function(c){return!r.children(c).length}),s=e.max(e.map(i,function(c){return r.node(c).rank})),o=e.map(e.range(s+1),function(){return[]});function a(c){if(!e.has(n,c)){n[c]=!0;var f=r.node(c);o[f.rank].push(c),e.forEach(r.successors(c),a)}}var u=e.sortBy(i,function(c){return r.node(c).rank});return e.forEach(u,a),o}return nS}var iS,Tz;function Nue(){if(Tz)return iS;Tz=1;var e=In();iS=t;function t(n,i){for(var s=0,o=1;o<i.length;++o)s+=r(n,i[o-1],i[o]);return s}function r(n,i,s){for(var o=e.zipObject(s,e.map(s,function(g,y){return y})),a=e.flatten(e.map(i,function(g){return e.sortBy(e.map(n.outEdges(g),function(y){return{pos:o[y.w],weight:n.edge(y).weight}}),"pos")}),!0),u=1;u<s.length;)u<<=1;var c=2*u-1;u-=1;var f=e.map(new Array(c),function(){return 0}),h=0;return e.forEach(a.forEach(function(g){var y=g.pos+u;f[y]+=g.weight;for(var m=0;y>0;)y%2&&(m+=f[y+1]),y=y-1>>1,f[y]+=g.weight;h+=g.weight*m})),h}return iS}var sS,Pz;function que(){if(Pz)return sS;Pz=1;var e=In();sS=t;function t(r,n){return e.map(n,function(i){var s=r.inEdges(i);if(s.length){var o=e.reduce(s,function(a,u){var c=r.edge(u),f=r.node(u.v);return{sum:a.sum+c.weight*f.order,weight:a.weight+c.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return sS}var oS,Cz;function Due(){if(Cz)return oS;Cz=1;var e=In();oS=t;function t(i,s){var o={};e.forEach(i,function(u,c){var f=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:c};e.isUndefined(u.barycenter)||(f.barycenter=u.barycenter,f.weight=u.weight)}),e.forEach(s.edges(),function(u){var c=o[u.v],f=o[u.w];!e.isUndefined(c)&&!e.isUndefined(f)&&(f.indegree++,c.out.push(o[u.w]))});var a=e.filter(o,function(u){return!u.indegree});return r(a)}function r(i){var s=[];function o(c){return function(f){f.merged||(e.isUndefined(f.barycenter)||e.isUndefined(c.barycenter)||f.barycenter>=c.barycenter)&&n(c,f)}}function a(c){return function(f){f.in.push(c),--f.indegree===0&&i.push(f)}}for(;i.length;){var u=i.pop();s.push(u),e.forEach(u.in.reverse(),o(u)),e.forEach(u.out,a(u))}return e.map(e.filter(s,function(c){return!c.merged}),function(c){return e.pick(c,["vs","i","barycenter","weight"])})}function n(i,s){var o=0,a=0;i.weight&&(o+=i.barycenter*i.weight,a+=i.weight),s.weight&&(o+=s.barycenter*s.weight,a+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/a,i.weight=a,i.i=Math.min(s.i,i.i),s.merged=!0}return oS}var aS,Rz;function Fue(){if(Rz)return aS;Rz=1;var e=In(),t=gs();aS=r;function r(s,o){var a=t.partition(s,function(_){return e.has(_,"barycenter")}),u=a.lhs,c=e.sortBy(a.rhs,function(_){return-_.i}),f=[],h=0,g=0,y=0;u.sort(i(!!o)),y=n(f,c,y),e.forEach(u,function(_){y+=_.vs.length,f.push(_.vs),h+=_.barycenter*_.weight,g+=_.weight,y=n(f,c,y)});var m={vs:e.flatten(f,!0)};return g&&(m.barycenter=h/g,m.weight=g),m}function n(s,o,a){for(var u;o.length&&(u=e.last(o)).i<=a;)o.pop(),s.push(u.vs),a++;return a}function i(s){return function(o,a){return o.barycenter<a.barycenter?-1:o.barycenter>a.barycenter?1:s?a.i-o.i:o.i-a.i}}return aS}var uS,Iz;function Bue(){if(Iz)return uS;Iz=1;var e=In(),t=que(),r=Due(),n=Fue();uS=i;function i(a,u,c,f){var h=a.children(u),g=a.node(u),y=g?g.borderLeft:void 0,m=g?g.borderRight:void 0,_={};y&&(h=e.filter(h,function(I){return I!==y&&I!==m}));var b=t(a,h);e.forEach(b,function(I){if(a.children(I.v).length){var q=i(a,I.v,c,f);_[I.v]=q,e.has(q,"barycenter")&&o(I,q)}});var S=r(b,c);s(S,_);var E=n(S,f);if(y&&(E.vs=e.flatten([y,E.vs,m],!0),a.predecessors(y).length)){var A=a.node(a.predecessors(y)[0]),T=a.node(a.predecessors(m)[0]);e.has(E,"barycenter")||(E.barycenter=0,E.weight=0),E.barycenter=(E.barycenter*E.weight+A.order+T.order)/(E.weight+2),E.weight+=2}return E}function s(a,u){e.forEach(a,function(c){c.vs=e.flatten(c.vs.map(function(f){return u[f]?u[f].vs:f}),!0)})}function o(a,u){e.isUndefined(a.barycenter)?(a.barycenter=u.barycenter,a.weight=u.weight):(a.barycenter=(a.barycenter*a.weight+u.barycenter*u.weight)/(a.weight+u.weight),a.weight+=u.weight)}return uS}var cS,Oz;function zue(){if(Oz)return cS;Oz=1;var e=In(),t=Io().Graph;cS=r;function r(i,s,o){var a=n(i),u=new t({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(c){return i.node(c)});return e.forEach(i.nodes(),function(c){var f=i.node(c),h=i.parent(c);(f.rank===s||f.minRank<=s&&s<=f.maxRank)&&(u.setNode(c),u.setParent(c,h||a),e.forEach(i[o](c),function(g){var y=g.v===c?g.w:g.v,m=u.edge(y,c),_=e.isUndefined(m)?0:m.weight;u.setEdge(y,c,{weight:i.edge(g).weight+_})}),e.has(f,"minRank")&&u.setNode(c,{borderLeft:f.borderLeft[s],borderRight:f.borderRight[s]}))}),u}function n(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return cS}var lS,Mz;function Vue(){if(Mz)return lS;Mz=1;var e=In();lS=t;function t(r,n,i){var s={},o;e.forEach(i,function(a){for(var u=r.parent(a),c,f;u;){if(c=r.parent(u),c?(f=s[c],s[c]=u):(f=o,o=u),f&&f!==u){n.setEdge(f,u);return}u=c}})}return lS}var fS,kz;function Gue(){if(kz)return fS;kz=1;var e=In(),t=Lue(),r=Nue(),n=Bue(),i=zue(),s=Vue(),o=Io().Graph,a=gs();fS=u;function u(g){var y=a.maxRank(g),m=c(g,e.range(1,y+1),"inEdges"),_=c(g,e.range(y-1,-1,-1),"outEdges"),b=t(g);h(g,b);for(var S=Number.POSITIVE_INFINITY,E,A=0,T=0;T<4;++A,++T){f(A%2?m:_,A%4>=2),b=a.buildLayerMatrix(g);var I=r(g,b);I<S&&(T=0,E=e.cloneDeep(b),S=I)}h(g,E)}function c(g,y,m){return e.map(y,function(_){return i(g,_,m)})}function f(g,y){var m=new o;e.forEach(g,function(_){var b=_.graph().root,S=n(_,b,m,y);e.forEach(S.vs,function(E,A){_.node(E).order=A}),s(_,m,S.vs)})}function h(g,y){e.forEach(y,function(m){e.forEach(m,function(_,b){g.node(_).order=b})})}return fS}var hS,Lz;function $ue(){if(Lz)return hS;Lz=1;var e=In(),t=Io().Graph,r=gs();hS={positionX:m,findType1Conflicts:n,findType2Conflicts:i,addConflict:o,hasConflict:a,verticalAlignment:u,horizontalCompaction:c,alignCoordinates:g,findSmallestWidthAlignment:h,balance:y};function n(S,E){var A={};function T(I,q){var p=0,P=0,O=I.length,N=e.last(q);return e.forEach(q,function(V,W){var G=s(S,V),ee=G?S.node(G).order:O;(G||V===N)&&(e.forEach(q.slice(P,W+1),function(ae){e.forEach(S.predecessors(ae),function(K){var U=S.node(K),j=U.order;(j<p||ee<j)&&!(U.dummy&&S.node(ae).dummy)&&o(A,K,ae)})}),P=W+1,p=ee)}),q}return e.reduce(E,T),A}function i(S,E){var A={};function T(q,p,P,O,N){var V;e.forEach(e.range(p,P),function(W){V=q[W],S.node(V).dummy&&e.forEach(S.predecessors(V),function(G){var ee=S.node(G);ee.dummy&&(ee.order<O||ee.order>N)&&o(A,G,V)})})}function I(q,p){var P=-1,O,N=0;return e.forEach(p,function(V,W){if(S.node(V).dummy==="border"){var G=S.predecessors(V);G.length&&(O=S.node(G[0]).order,T(p,N,W,P,O),N=W,P=O)}T(p,N,p.length,O,q.length)}),p}return e.reduce(E,I),A}function s(S,E){if(S.node(E).dummy)return e.find(S.predecessors(E),function(A){return S.node(A).dummy})}function o(S,E,A){if(E>A){var T=E;E=A,A=T}var I=S[E];I||(S[E]=I={}),I[A]=!0}function a(S,E,A){if(E>A){var T=E;E=A,A=T}return e.has(S[E],A)}function u(S,E,A,T){var I={},q={},p={};return e.forEach(E,function(P){e.forEach(P,function(O,N){I[O]=O,q[O]=O,p[O]=N})}),e.forEach(E,function(P){var O=-1;e.forEach(P,function(N){var V=T(N);if(V.length){V=e.sortBy(V,function(K){return p[K]});for(var W=(V.length-1)/2,G=Math.floor(W),ee=Math.ceil(W);G<=ee;++G){var ae=V[G];q[N]===N&&O<p[ae]&&!a(A,N,ae)&&(q[ae]=N,q[N]=I[N]=I[ae],O=p[ae])}}})}),{root:I,align:q}}function c(S,E,A,T,I){var q={},p=f(S,E,A,I),P=I?"borderLeft":"borderRight";function O(W,G){for(var ee=p.nodes(),ae=ee.pop(),K={};ae;)K[ae]?W(ae):(K[ae]=!0,ee.push(ae),ee=ee.concat(G(ae))),ae=ee.pop()}function N(W){q[W]=p.inEdges(W).reduce(function(G,ee){return Math.max(G,q[ee.v]+p.edge(ee))},0)}function V(W){var G=p.outEdges(W).reduce(function(ae,K){return Math.min(ae,q[K.w]-p.edge(K))},Number.POSITIVE_INFINITY),ee=S.node(W);G!==Number.POSITIVE_INFINITY&&ee.borderType!==P&&(q[W]=Math.max(q[W],G))}return O(N,p.predecessors.bind(p)),O(V,p.successors.bind(p)),e.forEach(T,function(W){q[W]=q[A[W]]}),q}function f(S,E,A,T){var I=new t,q=S.graph(),p=_(q.nodesep,q.edgesep,T);return e.forEach(E,function(P){var O;e.forEach(P,function(N){var V=A[N];if(I.setNode(V),O){var W=A[O],G=I.edge(W,V);I.setEdge(W,V,Math.max(p(S,N,O),G||0))}O=N})}),I}function h(S,E){return e.minBy(e.values(E),function(A){var T=Number.NEGATIVE_INFINITY,I=Number.POSITIVE_INFINITY;return e.forIn(A,function(q,p){var P=b(S,p)/2;T=Math.max(q+P,T),I=Math.min(q-P,I)}),T-I})}function g(S,E){var A=e.values(E),T=e.min(A),I=e.max(A);e.forEach(["u","d"],function(q){e.forEach(["l","r"],function(p){var P=q+p,O=S[P],N;if(O!==E){var V=e.values(O);N=p==="l"?T-e.min(V):I-e.max(V),N&&(S[P]=e.mapValues(O,function(W){return W+N}))}})})}function y(S,E){return e.mapValues(S.ul,function(A,T){if(E)return S[E.toLowerCase()][T];var I=e.sortBy(e.map(S,T));return(I[1]+I[2])/2})}function m(S){var E=r.buildLayerMatrix(S),A=e.merge(n(S,E),i(S,E)),T={},I;e.forEach(["u","d"],function(p){I=p==="u"?E:e.values(E).reverse(),e.forEach(["l","r"],function(P){P==="r"&&(I=e.map(I,function(W){return e.values(W).reverse()}));var O=(p==="u"?S.predecessors:S.successors).bind(S),N=u(S,I,A,O),V=c(S,I,N.root,N.align,P==="r");P==="r"&&(V=e.mapValues(V,function(W){return-W})),T[p+P]=V})});var q=h(S,T);return g(T,q),y(T,S.graph().align)}function _(S,E,A){return function(T,I,q){var p=T.node(I),P=T.node(q),O=0,N;if(O+=p.width/2,e.has(p,"labelpos"))switch(p.labelpos.toLowerCase()){case"l":N=-p.width/2;break;case"r":N=p.width/2;break}if(N&&(O+=A?N:-N),N=0,O+=(p.dummy?E:S)/2,O+=(P.dummy?E:S)/2,O+=P.width/2,e.has(P,"labelpos"))switch(P.labelpos.toLowerCase()){case"l":N=P.width/2;break;case"r":N=-P.width/2;break}return N&&(O+=A?N:-N),N=0,O}}function b(S,E){return S.node(E).width}return hS}var dS,Nz;function Uue(){if(Nz)return dS;Nz=1;var e=In(),t=gs(),r=$ue().positionX;dS=n;function n(s){s=t.asNonCompoundGraph(s),i(s),e.forEach(r(s),function(o,a){s.node(a).x=o})}function i(s){var o=t.buildLayerMatrix(s),a=s.graph().ranksep,u=0;e.forEach(o,function(c){var f=e.max(e.map(c,function(h){return s.node(h).height}));e.forEach(c,function(h){s.node(h).y=u+f/2}),u+=f+a})}return dS}var pS,qz;function jue(){if(qz)return pS;qz=1;var e=In(),t=Tue(),r=Pue(),n=Rue(),i=gs().normalizeRanks,s=Iue(),o=gs().removeEmptyRanks,a=Oue(),u=Mue(),c=kue(),f=Gue(),h=Uue(),g=gs(),y=Io().Graph;pS=m;function m(re,oe){var ne=oe&&oe.debugTiming?g.time:g.notime;ne("layout",function(){var te=ne("  buildLayoutGraph",function(){return O(re)});ne("  runLayout",function(){_(te,ne)}),ne("  updateInputGraph",function(){b(re,te)})})}function _(re,oe){oe("    makeSpaceForEdgeLabels",function(){N(re)}),oe("    removeSelfEdges",function(){J(re)}),oe("    acyclic",function(){t.run(re)}),oe("    nestingGraph.run",function(){a.run(re)}),oe("    rank",function(){n(g.asNonCompoundGraph(re))}),oe("    injectEdgeLabelProxies",function(){V(re)}),oe("    removeEmptyRanks",function(){o(re)}),oe("    nestingGraph.cleanup",function(){a.cleanup(re)}),oe("    normalizeRanks",function(){i(re)}),oe("    assignRankMinMax",function(){W(re)}),oe("    removeEdgeLabelProxies",function(){G(re)}),oe("    normalize.run",function(){r.run(re)}),oe("    parentDummyChains",function(){s(re)}),oe("    addBorderSegments",function(){u(re)}),oe("    order",function(){f(re)}),oe("    insertSelfEdges",function(){de(re)}),oe("    adjustCoordinateSystem",function(){c.adjust(re)}),oe("    position",function(){h(re)}),oe("    positionSelfEdges",function(){ce(re)}),oe("    removeBorderNodes",function(){j(re)}),oe("    normalize.undo",function(){r.undo(re)}),oe("    fixupEdgeLabelCoords",function(){K(re)}),oe("    undoCoordinateSystem",function(){c.undo(re)}),oe("    translateGraph",function(){ee(re)}),oe("    assignNodeIntersects",function(){ae(re)}),oe("    reversePoints",function(){U(re)}),oe("    acyclic.undo",function(){t.undo(re)})}function b(re,oe){e.forEach(re.nodes(),function(ne){var te=re.node(ne),le=oe.node(ne);te&&(te.x=le.x,te.y=le.y,oe.children(ne).length&&(te.width=le.width,te.height=le.height))}),e.forEach(re.edges(),function(ne){var te=re.edge(ne),le=oe.edge(ne);te.points=le.points,e.has(le,"x")&&(te.x=le.x,te.y=le.y)}),re.graph().width=oe.graph().width,re.graph().height=oe.graph().height}var S=["nodesep","edgesep","ranksep","marginx","marginy"],E={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},A=["acyclicer","ranker","rankdir","align"],T=["width","height"],I={width:0,height:0},q=["minlen","weight","width","height","labeloffset"],p={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},P=["labelpos"];function O(re){var oe=new y({multigraph:!0,compound:!0}),ne=Se(re.graph());return oe.setGraph(e.merge({},E,Te(ne,S),e.pick(ne,A))),e.forEach(re.nodes(),function(te){var le=Se(re.node(te));oe.setNode(te,e.defaults(Te(le,T),I)),oe.setParent(te,re.parent(te))}),e.forEach(re.edges(),function(te){var le=Se(re.edge(te));oe.setEdge(te,e.merge({},p,Te(le,q),e.pick(le,P)))}),oe}function N(re){var oe=re.graph();oe.ranksep/=2,e.forEach(re.edges(),function(ne){var te=re.edge(ne);te.minlen*=2,te.labelpos.toLowerCase()!=="c"&&(oe.rankdir==="TB"||oe.rankdir==="BT"?te.width+=te.labeloffset:te.height+=te.labeloffset)})}function V(re){e.forEach(re.edges(),function(oe){var ne=re.edge(oe);if(ne.width&&ne.height){var te=re.node(oe.v),le=re.node(oe.w),We={rank:(le.rank-te.rank)/2+te.rank,e:oe};g.addDummyNode(re,"edge-proxy",We,"_ep")}})}function W(re){var oe=0;e.forEach(re.nodes(),function(ne){var te=re.node(ne);te.borderTop&&(te.minRank=re.node(te.borderTop).rank,te.maxRank=re.node(te.borderBottom).rank,oe=e.max(oe,te.maxRank))}),re.graph().maxRank=oe}function G(re){e.forEach(re.nodes(),function(oe){var ne=re.node(oe);ne.dummy==="edge-proxy"&&(re.edge(ne.e).labelRank=ne.rank,re.removeNode(oe))})}function ee(re){var oe=Number.POSITIVE_INFINITY,ne=0,te=Number.POSITIVE_INFINITY,le=0,We=re.graph(),Ne=We.marginx||0,Re=We.marginy||0;function rt(Ve){var L=Ve.x,B=Ve.y,H=Ve.width,X=Ve.height;oe=Math.min(oe,L-H/2),ne=Math.max(ne,L+H/2),te=Math.min(te,B-X/2),le=Math.max(le,B+X/2)}e.forEach(re.nodes(),function(Ve){rt(re.node(Ve))}),e.forEach(re.edges(),function(Ve){var L=re.edge(Ve);e.has(L,"x")&&rt(L)}),oe-=Ne,te-=Re,e.forEach(re.nodes(),function(Ve){var L=re.node(Ve);L.x-=oe,L.y-=te}),e.forEach(re.edges(),function(Ve){var L=re.edge(Ve);e.forEach(L.points,function(B){B.x-=oe,B.y-=te}),e.has(L,"x")&&(L.x-=oe),e.has(L,"y")&&(L.y-=te)}),We.width=ne-oe+Ne,We.height=le-te+Re}function ae(re){e.forEach(re.edges(),function(oe){var ne=re.edge(oe),te=re.node(oe.v),le=re.node(oe.w),We,Ne;ne.points?(We=ne.points[0],Ne=ne.points[ne.points.length-1]):(ne.points=[],We=le,Ne=te),ne.points.unshift(g.intersectRect(te,We)),ne.points.push(g.intersectRect(le,Ne))})}function K(re){e.forEach(re.edges(),function(oe){var ne=re.edge(oe);if(e.has(ne,"x"))switch((ne.labelpos==="l"||ne.labelpos==="r")&&(ne.width-=ne.labeloffset),ne.labelpos){case"l":ne.x-=ne.width/2+ne.labeloffset;break;case"r":ne.x+=ne.width/2+ne.labeloffset;break}})}function U(re){e.forEach(re.edges(),function(oe){var ne=re.edge(oe);ne.reversed&&ne.points.reverse()})}function j(re){e.forEach(re.nodes(),function(oe){if(re.children(oe).length){var ne=re.node(oe),te=re.node(ne.borderTop),le=re.node(ne.borderBottom),We=re.node(e.last(ne.borderLeft)),Ne=re.node(e.last(ne.borderRight));ne.width=Math.abs(Ne.x-We.x),ne.height=Math.abs(le.y-te.y),ne.x=We.x+ne.width/2,ne.y=te.y+ne.height/2}}),e.forEach(re.nodes(),function(oe){re.node(oe).dummy==="border"&&re.removeNode(oe)})}function J(re){e.forEach(re.edges(),function(oe){if(oe.v===oe.w){var ne=re.node(oe.v);ne.selfEdges||(ne.selfEdges=[]),ne.selfEdges.push({e:oe,label:re.edge(oe)}),re.removeEdge(oe)}})}function de(re){var oe=g.buildLayerMatrix(re);e.forEach(oe,function(ne){var te=0;e.forEach(ne,function(le,We){var Ne=re.node(le);Ne.order=We+te,e.forEach(Ne.selfEdges,function(Re){g.addDummyNode(re,"selfedge",{width:Re.label.width,height:Re.label.height,rank:Ne.rank,order:We+ ++te,e:Re.e,label:Re.label},"_se")}),delete Ne.selfEdges})})}function ce(re){e.forEach(re.nodes(),function(oe){var ne=re.node(oe);if(ne.dummy==="selfedge"){var te=re.node(ne.e.v),le=te.x+te.width/2,We=te.y,Ne=ne.x-le,Re=te.height/2;re.setEdge(ne.e,ne.label),re.removeNode(oe),ne.label.points=[{x:le+2*Ne/3,y:We-Re},{x:le+5*Ne/6,y:We-Re},{x:le+Ne,y:We},{x:le+5*Ne/6,y:We+Re},{x:le+2*Ne/3,y:We+Re}],ne.label.x=ne.x,ne.label.y=ne.y}})}function Te(re,oe){return e.mapValues(e.pick(re,oe),Number)}function Se(re){var oe={};return e.forEach(re,function(ne,te){oe[te.toLowerCase()]=ne}),oe}return pS}var gS,Dz;function Hue(){if(Dz)return gS;Dz=1;var e=In(),t=gs(),r=Io().Graph;gS={debugOrdering:n};function n(i){var s=t.buildLayerMatrix(i),o=new r({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(a){o.setNode(a,{label:a}),o.setParent(a,"layer"+i.node(a).rank)}),e.forEach(i.edges(),function(a){o.setEdge(a.v,a.w,{},a.name)}),e.forEach(s,function(a,u){var c="layer"+u;o.setNode(c,{rank:"same"}),e.reduce(a,function(f,h){return o.setEdge(f,h,{style:"invis"}),h})}),o}return gS}var vS,Fz;function Wue(){return Fz||(Fz=1,vS="0.8.5"),vS}var mS,Bz;function Xue(){return Bz||(Bz=1,mS={graphlib:Io(),layout:jue(),debug:Hue(),util:{time:gs().time,notime:gs().notime},version:Wue()}),mS}var Yue=Xue();const Kue=Dl(Yue);var Zue=V7();const Jue=Dl(Zue),La={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},Que=Object.keys(La).map(e=>La[e]).join(""),yS="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",ece=/\s/g,zz=new RegExp(`^(${yS}\\*)?([${Que}])(/${yS})?([-+]{1,2}${yS})?$`,"g");function X7(e){throw new Error(`Invalid calc() expression: ${e}`)}function tce(e,t){const r=zz.exec(e.replace(ece,""));r||X7(e),zz.lastIndex=0;const[,n,i,s,o]=r,{x:a,y:u,width:c,height:f}=t;let h=0;switch(i){case La.width:{h=c;break}case La.height:{h=f;break}case La.x:{h=a;break}case La.y:{h=u;break}case La.minimum:{h=Math.min(f,c);break}case La.maximum:{h=Math.max(f,c);break}case La.diagonal:{h=Math.sqrt(f*f+c*c);break}}return n&&(h*=parseFloat(n)),s&&(h/=parseFloat(s.slice(1))),o&&(h+=rce(o)),h}function rce(e){if(!e)return 0;const[t]=e;switch(t){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}function Qs(e){return typeof e=="string"&&e.includes("calc")}const Y7="calc(",Vz=Y7.length;function eo(e,t){let r=e,n=0;do{let i=r.indexOf(Y7,n);if(i===-1)return r;let s=i+Vz,o=1;e:do{switch(r[s]){case"(":{o++;break}case")":{if(o--,o===0)break e;break}case void 0:X7(r)}s++}while(!0);let a=r.slice(i+Vz,s);Qs(a)&&(a=eo(a,t));const u=String(tce(a,t));r=r.slice(0,i)+u+r.slice(s+1),n=i+u.length}while(!0)}const{round:nce,floor:ice,PI:K7}=Math,sce={linear:function(e,t,r){var n=e[1]-e[0],i=t[1]-t[0];return(r-e[0])/n*i+t[0]||0}},Oo=function(e){return e%360+(e<0?360:0)},ac=function(e,t){return t*nce(e/t)},Dg=function(e){return 180*e/K7%360},vs=function(e,t){return t=t||!1,e=t?e:e%360,e*K7/180},KS=function(e,t){if(t===void 0)t=e===void 0?1:e,e=0;else if(t<e){const r=e;e=t,t=r}return ice(Math.random()*(t-e+1)+e)},{cos:Yd,sin:_S,atan2:oce}=Math,Z7=function(e,t){var r=vs(e.y),n=vs(t.y),i=e.x,s=t.x,o=vs(s-i),a=_S(o)*Yd(n),u=Yd(r)*_S(n)-_S(r)*Yd(n)*Yd(o),c=Dg(oce(a,u)),f=["NE","E","SE","S","SW","W","NW","N"],h=c-22.5;return h<0&&(h+=360),h=parseInt(h/45),f[h]},N2=function(e,t){var r=e.x,n=e.y,i=t.x,s=t.y;return(r-=i)*r+(n-=s)*n},J7=function(e,t){return Math.sqrt(N2(e,t))},dr={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:Op,cos:ZS,sin:JS,sqrt:Gz,min:$z,max:Uz,atan2:ace,round:jz,pow:uce,PI:Hz}=Math,pe=function(e,t){if(!(this instanceof pe))return new pe(e,t);if(typeof e=="string"){var r=e.split(e.indexOf("@")===-1?" ":"@");e=parseFloat(r[0]),t=parseFloat(r[1])}else Object(e)===e&&(t=e.y,e=e.x);this.x=e===void 0?0:e,this.y=t===void 0?0:t};pe.fromPolar=function(e,t,r){r=new pe(r);var n=Op(e*ZS(t)),i=Op(e*JS(t)),s=Oo(Dg(t));return s<90?i=-i:s<180?(n=-n,i=-i):s<270&&(n=-n),new pe(r.x+n,r.y+i)};pe.random=function(e,t,r,n){return new pe(KS(e,t),KS(r,n))};pe.prototype={type:dr.Point,chooseClosest:function(e){var t=e.length;if(t===1)return new pe(e[0]);for(var r=null,n=1/0,i=0;i<t;i++){var s=new pe(e[i]),o=this.squaredDistance(s);o<n&&(r=s,n=o)}return r},adhereToRect:function(e){return e.containsPoint(this)?this:(this.x=$z(Uz(this.x,e.x),e.x+e.width),this.y=$z(Uz(this.y,e.y),e.y+e.height),this)},angleBetween:function(e,t){var r=this.equals(e)||this.equals(t)?NaN:this.theta(t)-this.theta(e);return r<0&&(r+=360),r},bearing:function(e){return Z7(this,e)},changeInAngle:function(e,t,r){return this.clone().offset(-e,-t).theta(r)-this.theta(r)},clone:function(){return new pe(this)},cross:function(e,t){return e&&t?(t.x-this.x)*(e.y-this.y)-(t.y-this.y)*(e.x-this.x):NaN},difference:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),new pe(this.x-(e||0),this.y-(t||0))},distance:function(e){return J7(this,e)},dot:function(e){return e?this.x*e.x+this.y*e.y:NaN},equals:function(e){return!!e&&this.x===e.x&&this.y===e.y},lerp:function(e,t){var r=this.x,n=this.y;return new pe((1-t)*r+t*e.x,(1-t)*n+t*e.y)},magnitude:function(){return Gz(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(e){return Op(e.x-this.x)+Op(e.y-this.y)},move:function(e,t){var r=vs(new pe(e).theta(this)),n=this.offset(ZS(r)*t,-JS(r)*t);return n},normalize:function(e){var t=(e||1)/this.magnitude();return this.scale(t,t)},offset:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x+=e||0,this.y+=t||0,this},reflection:function(e){return new pe(e).move(this,this.distance(e))},rotate:function(e,t){if(t===0)return this;e=e||new pe(0,0),t=vs(Oo(-t));var r=ZS(t),n=JS(t),i=r*(this.x-e.x)-n*(this.y-e.y)+e.x,s=n*(this.x-e.x)+r*(this.y-e.y)+e.y;return this.x=i,this.y=s,this},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=uce(10,e);break}return this.x=jz(this.x*t)/t,this.y=jz(this.y*t)/t,this},scale:function(e,t,r){return r=r&&new pe(r)||new pe(0,0),this.x=r.x+e*(this.x-r.x),this.y=r.y+t*(this.y-r.y),this},snapToGrid:function(e,t){return this.x=ac(this.x,e),this.y=ac(this.y,t||e),this},squaredDistance:function(e){return N2(this,e)},theta:function(e){e=new pe(e);var t=-(e.y-this.y),r=e.x-this.x,n=ace(t,r);return n<0&&(n=2*Hz+n),180*n/Hz},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(e){e=e&&new pe(e)||new pe(0,0);var t=this.x,r=this.y;return this.x=Gz((t-e.x)*(t-e.x)+(r-e.y)*(r-e.y)),this.y=vs(e.theta(new pe(t,r))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x=e||0,this.y=t||0,this},vectorAngle:function(e){var t=new pe(0,0);return t.angleBetween(this,e)}};pe.prototype.translate=pe.prototype.offset;const Mp=pe,{max:bS,min:wS}=Math,bt=function(e,t){if(!(this instanceof bt))return new bt(e,t);if(e instanceof bt)return new bt(e.start,e.end);this.start=new pe(e),this.end=new pe(t)};bt.prototype={type:dr.Line,angle:function(){var e=new pe(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)},bbox:function(){var e=wS(this.start.x,this.end.x),t=wS(this.start.y,this.end.y),r=bS(this.start.x,this.end.x),n=bS(this.start.y,this.end.y);return new vt(e,t,r-e,n-t)},bearing:function(){return Z7(this.start,this.end)},clone:function(){return new bt(this.start,this.end)},closestPoint:function(e){return this.pointAt(this.closestPointNormalizedLength(e))},closestPointLength:function(e){return this.closestPointNormalizedLength(e)*this.length()},closestPointNormalizedLength:function(e){var t=this.vector().dot(new bt(this.start,e).vector()),r=wS(1,bS(0,t/this.squaredLength()));return r!==r?0:r},closestPointTangent:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))},containsPoint:function(e){var t=this.start,r=this.end;if(t.cross(e,r)!==0)return!1;var n=this.length();return!(new bt(t,e).length()>n||new bt(e,r).length()>n)},divideAt:function(e){var t=this.pointAt(e);return[new bt(this.start,t),new bt(t,this.end)]},divideAtLength:function(e){var t=this.pointAtLength(e);return[new bt(this.start,t),new bt(t,this.end)]},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y},intersect:function(e,t){if(e&&e.intersectionWithLine){var r=e.intersectionWithLine(this,t);return r&&e instanceof bt&&(r=r[0]),r}return null},intersectionWithLine:function(e){var t=new pe(this.end.x-this.start.x,this.end.y-this.start.y),r=new pe(e.end.x-e.start.x,e.end.y-e.start.y),n=t.x*r.y-t.y*r.x,i=new pe(e.start.x-this.start.x,e.start.y-this.start.y),s=i.x*r.y-i.y*r.x,o=i.x*t.y-i.y*t.x;if(n===0||s*n<0||o*n<0)return null;if(n>0){if(s>n||o>n)return null}else if(s<n||o<n)return null;return[new pe(this.start.x+s*t.x/n,this.start.y+s*t.y/n)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return J7(this.start,this.end)},midpoint:function(){return new pe((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(e){const t=this.clone();if(!this.isDifferentiable())return t;const{start:r,end:n}=t,i=r.clone().rotate(n,270),s=n.clone().rotate(r,90);return r.move(s,e),n.move(i,e),t},pointAt:function(e){var t=this.start,r=this.end;return e<=0?t.clone():e>=1?r.clone():t.lerp(r,e)},pointAtLength:function(e){var t=this.start,r=this.end,n=!0;e<0&&(n=!1,e=-e);var i=this.length();return e>=i?n?r.clone():t.clone():this.pointAt((n?e:i-e)/i)},pointOffset:function(e){e=new pe(e);var t=this.start,r=this.end,n=(r.x-t.x)*(e.y-t.y)-(r.y-t.y)*(e.x-t.x);return n/this.length()},rotate:function(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this},round:function(e){return this.start.round(e),this.end.round(e),this},scale:function(e,t,r){return this.start.scale(e,t,r),this.end.scale(e,t,r),this},setLength:function(e){var t=this.length();if(!t)return this;var r=e/t;return this.scale(r,r,this.start)},squaredLength:function(){return N2(this.start,this.end)},tangentAt:function(e){if(!this.isDifferentiable())return null;var t=this.start,r=this.end,n=this.pointAt(e),i=new bt(t,r);return i.translate(n.x-t.x,n.y-t.y),i},tangentAtLength:function(e){if(!this.isDifferentiable())return null;var t=this.start,r=this.end,n=this.pointAtLength(e),i=new bt(t,r);return i.translate(n.x-t.x,n.y-t.y),i},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(e,t){return this.start.translate(e,t),this.end.translate(e,t),this},vector:function(){return new pe(this.end.x-this.start.x,this.end.y-this.start.y)}};bt.prototype.intersection=bt.prototype.intersect;const tc=bt,{sqrt:Wz,round:Kd,pow:cce}=Math,Xi=function(e,t,r){if(!(this instanceof Xi))return new Xi(e,t,r);if(e instanceof Xi)return new Xi(new pe(e.x,e.y),e.a,e.b);e=new pe(e),this.x=e.x,this.y=e.y,this.a=t,this.b=r};Xi.fromRect=function(e){return e=new vt(e),new Xi(e.center(),e.width/2,e.height/2)};Xi.prototype={type:dr.Ellipse,bbox:function(){return new vt(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new pe(this.x,this.y)},clone:function(){return new Xi(this)},containsPoint:function(e){return this.normalizedDistance(e)<=1},equals:function(e){return!!e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b},inflate:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.a+=2*e,this.b+=2*t,this},intersectionWithLine:function(e){var t=[],r=e.start,n=e.end,i=this.a,s=this.b,o=e.vector(),a=r.difference(new pe(this)),u=new pe(o.x/(i*i),o.y/(s*s)),c=new pe(a.x/(i*i),a.y/(s*s)),f=o.dot(u),h=o.dot(c),g=a.dot(c)-1,y=h*h-f*g;if(y<0)return null;if(y>0){var m=Wz(y),_=(-h-m)/f,b=(-h+m)/f;if((_<0||1<_)&&(b<0||1<b))return null;0<=_&&_<=1&&t.push(r.lerp(n,_)),0<=b&&b<=1&&t.push(r.lerp(n,b))}else{var S=-h/f;if(0<=S&&S<=1)t.push(r.lerp(n,S));else return null}return t},intersectionWithLineFromCenterToPoint:function(e,t){e=new pe(e),t&&e.rotate(new pe(this.x,this.y),t);var r=e.x-this.x,n=e.y-this.y,i;if(r===0)return i=this.bbox().pointNearestToPoint(e),t?i.rotate(new pe(this.x,this.y),-t):i;var s=n/r,o=s*s,a=this.a*this.a,u=this.b*this.b,c=Wz(1/(1/a+o/u));c=r<0?-c:c;var f=s*c;return i=new pe(this.x+c,this.y+f),t?i.rotate(new pe(this.x,this.y),-t):i},normalizedDistance:function(e){var t=e.x,r=e.y,n=this.a,i=this.b,s=this.x,o=this.y;return(t-s)*(t-s)/(n*n)+(r-o)*(r-o)/(i*i)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=cce(10,e);break}return this.x=Kd(this.x*t)/t,this.y=Kd(this.y*t)/t,this.a=Kd(this.a*t)/t,this.b=Kd(this.b*t)/t,this},tangentTheta:function(e){var t=30,r=e.x,n=e.y,i=this.a,s=this.b,o=this.bbox().center(),a=o.x,u=o.y,c=r>o.x+i/2,f=r<o.x-i/2,h,g;return c||f?(h=r>o.x?n-t:n+t,g=i*i/(r-a)-i*i*(n-u)*(h-u)/(s*s*(r-a))+a):(g=n>o.y?r+t:r-t,h=s*s/(n-u)-s*s*(r-a)*(g-a)/(i*i*(n-u))+u),new pe(g,h).theta(e)},toString:function(){return new pe(this.x,this.y).toString()+" "+this.a+" "+this.b}};const lce=Xi,{abs:Xz,cos:fce,sin:hce,min:Of,max:Yz,round:Zd,pow:dce}=Math,vt=function(e,t,r,n){if(!(this instanceof vt))return new vt(e,t,r,n);Object(e)===e&&(t=e.y,r=e.width,n=e.height,e=e.x),this.x=e===void 0?0:e,this.y=t===void 0?0:t,this.width=r===void 0?0:r,this.height=n===void 0?0:n};vt.fromEllipse=function(e){return e=new Xi(e),new vt(e.x-e.a,e.y-e.b,2*e.a,2*e.b)};vt.fromPointUnion=function(...e){if(e.length===0)return null;const t=new pe;let r,n,i,s;r=n=1/0,i=s=-1/0;for(let o=0;o<e.length;o++){t.update(e[o]);const a=t.x,u=t.y;a<r&&(r=a),a>i&&(i=a),u<n&&(n=u),u>s&&(s=u)}return new vt(r,n,i-r,s-n)};vt.fromRectUnion=function(...e){if(e.length===0)return null;const t=new vt;let r,n,i,s;r=n=1/0,i=s=-1/0;for(let o=0;o<e.length;o++){t.update(e[o]);const a=t.x,u=t.y,c=a+t.width,f=u+t.height;a<r&&(r=a),c>i&&(i=c),u<n&&(n=u),f>s&&(s=f)}return new vt(r,n,i-r,s-n)};vt.prototype={type:dr.Rect,bbox:function(e){return this.clone().rotateAroundCenter(e)},rotateAroundCenter:function(e){if(!e)return this;const{width:t,height:r}=this,n=vs(e),i=Xz(hce(n)),s=Xz(fce(n)),o=t*s+r*i,a=t*i+r*s;return this.x+=(t-o)/2,this.y+=(r-a)/2,this.width=o,this.height=a,this},bottomLeft:function(){return new pe(this.x,this.y+this.height)},bottomLine:function(){return new bt(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new pe(this.x+this.width/2,this.y+this.height)},center:function(){return new pe(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new vt(this)},containsPoint:function(e){return e instanceof pe||(e=new pe(e)),e.x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},containsRect:function(e){var t=new vt(this).normalize(),r=new vt(e).normalize(),n=t.width,i=t.height,s=r.width,o=r.height;if(!n||!i||!s||!o)return!1;var a=t.x,u=t.y,c=r.x,f=r.y;return s+=c,n+=a,o+=f,i+=u,a<=c&&s<=n&&u<=f&&o<=i},corner:function(){return new pe(this.x+this.width,this.y+this.height)},equals:function(e){var t=new vt(this).normalize(),r=new vt(e).normalize();return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height},inflate:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},intersect:function(e){var t=this.origin(),r=this.corner(),n=e.origin(),i=e.corner();if(i.x<=t.x||i.y<=t.y||n.x>=r.x||n.y>=r.y)return null;var s=Yz(t.x,n.x),o=Yz(t.y,n.y);return new vt(s,o,Of(r.x,i.x)-s,Of(r.y,i.y)-o)},intersectionWithLine:function(e){var t=this,r=[t.topLine(),t.rightLine(),t.bottomLine(),t.leftLine()],n=[],i=[],s,o,a=r.length;for(o=0;o<a;o++)s=e.intersect(r[o]),s!==null&&i.indexOf(s.toString())<0&&(n.push(s),i.push(s.toString()));return n.length>0?n:null},intersectionWithLineFromCenterToPoint:function(e,t){e=new pe(e);var r=new pe(this.x+this.width/2,this.y+this.height/2),n;t&&e.rotate(r,t);for(var i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],s=new bt(r,e),o=i.length-1;o>=0;--o){var a=i[o].intersection(s);if(a!==null){n=a;break}}return n&&t&&n.rotate(r,-t),n},leftLine:function(){return new bt(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new pe(this.x,this.y+this.height/2)},maxRectScaleToFit:function(e,t){e=new vt(e),t||(t=e.center());var r,n,i,s,o,a,u,c,f=t.x,h=t.y;r=n=i=s=o=a=u=c=1/0;var g=e.topLeft();g.x<f&&(r=(this.x-f)/(g.x-f)),g.y<h&&(o=(this.y-h)/(g.y-h));var y=e.bottomRight();y.x>f&&(n=(this.x+this.width-f)/(y.x-f)),y.y>h&&(a=(this.y+this.height-h)/(y.y-h));var m=e.topRight();m.x>f&&(i=(this.x+this.width-f)/(m.x-f)),m.y<h&&(u=(this.y-h)/(m.y-h));var _=e.bottomLeft();return _.x<f&&(s=(this.x-f)/(_.x-f)),_.y>h&&(c=(this.y+this.height-h)/(_.y-h)),{sx:Of(r,n,i,s),sy:Of(o,a,u,c)}},maxRectUniformScaleToFit:function(e,t){var r=this.maxRectScaleToFit(e,t);return Of(r.sx,r.sy)},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},normalize:function(){var e=this.x,t=this.y,r=this.width,n=this.height;return this.width<0&&(e=this.x+this.width,r=-this.width),this.height<0&&(t=this.y+this.height,n=-this.height),this.x=e,this.y=t,this.width=r,this.height=n,this},offset:function(e,t){return pe.prototype.offset.call(this,e,t)},origin:function(){return new pe(this.x,this.y)},pointNearestToPoint:function(e){if(e=new pe(e),this.containsPoint(e)){var t=this.sideNearestToPoint(e);switch(t){case"right":return new pe(this.x+this.width,e.y);case"left":return new pe(this.x,e.y);case"bottom":return new pe(e.x,this.y+this.height);case"top":return new pe(e.x,this.y)}}return e.adhereToRect(this)},rightLine:function(){return new bt(this.topRight(),this.bottomRight())},rightMiddle:function(){return new pe(this.x+this.width,this.y+this.height/2)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=dce(10,e);break}return this.x=Zd(this.x*t)/t,this.y=Zd(this.y*t)/t,this.width=Zd(this.width*t)/t,this.height=Zd(this.height*t)/t,this},scale:function(e,t,r){return r=this.origin().scale(e,t,r),this.x=r.x,this.y=r.y,this.width*=e,this.height*=t,this},sideNearestToPoint:function(e){e=new pe(e);var t=e.x-this.x,r=this.x+this.width-e.x,n=e.y-this.y,i=this.y+this.height-e.y,s=t,o="left";return r<s&&(s=r,o="right"),n<s&&(s=n,o="top"),i<s&&(o="bottom"),o},snapToGrid:function(e,t){var r=this.origin().snapToGrid(e,t),n=this.corner().snapToGrid(e,t);return this.x=r.x,this.y=r.y,this.width=n.x-r.x,this.height=n.y-r.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new bt(this.topLeft(),this.topRight())},topMiddle:function(){return new pe(this.x+this.width/2,this.y)},topRight:function(){return new pe(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(e){return vt.fromRectUnion(this,e)},update:function(e,t,r,n){return Object(e)===e&&(t=e.y,r=e.width,n=e.height,e=e.x),this.x=e||0,this.y=t||0,this.width=r||0,this.height=n||0,this}};vt.prototype.bottomRight=vt.prototype.corner;vt.prototype.topLeft=vt.prototype.origin;vt.prototype.translate=vt.prototype.offset;const pce=vt;function Q7(e){const t=e.trim();if(t==="")return[];const r=[],n=t.split(/\b\s*,\s*|,\s*|\s+/),i=n.length;for(let s=0;s<i;s+=2)r.push({x:+n[s],y:+n[s+1]});return r}function eG(e){const t=e.length;if(t===0)return[];const r=[];for(let n=0;n<t;n++){const i=e[n].clone();r.push(i)}return r}function tG(e){const{abs:t}=Math;var r,n,i=e.length;if(i===0)return[];var s;for(r=0;r<i;r++)(s===void 0||e[r].y<s.y||e[r].y===s.y&&e[r].x>s.x)&&(s=e[r]);var o=[];for(r=0;r<i;r++){var a=s.theta(e[r]);a===0&&(a=360);var u=[e[r],r,a];o.push(u)}if(o.sort(function(G,ee){var ae=G[2]-ee[2];return ae===0&&(ae=ee[1]-G[1]),ae}),o.length>2){var c=o[o.length-1];o.unshift(c)}for(var f={},h=[],g,y,m,_,b,S;o.length!==0;)if(g=o.pop(),y=g[0],!f.hasOwnProperty(g[0]+"@@"+g[1]))for(var E=!1;!E;)if(h.length<2)h.push(g),E=!0;else{m=h.pop(),_=m[0],b=h.pop(),S=b[0];var A=S.cross(_,y);if(A<0)h.push(b),h.push(m),h.push(g),E=!0;else if(A===0){var T=1e-10,I=_.angleBetween(S,y);t(I-180)<T||_.equals(y)||S.equals(_)?(f[m[0]+"@@"+m[1]]=_,h.push(b)):t((I+1)%360-1)<T&&(h.push(b),o.push(m))}else f[m[0]+"@@"+m[1]]=_,h.push(b)}h.length>2&&h.pop();var q,p=-1;for(n=h.length,r=0;r<n;r++){var P=h[r][1];(q===void 0||P<q)&&(q=P,p=r)}var O=[];if(p>0){var N=h.slice(p),V=h.slice(0,p);O=N.concat(V)}else O=h;var W=[];for(n=O.length,r=0;r<n;r++)W.push(O[r][0]);return W}const dn=function(e){if(!(this instanceof dn))return new dn(e);if(typeof e=="string")return new dn.parse(e);this.points=Array.isArray(e)?e.map(pe):[]};dn.parse=function(e){return new dn(Q7(e))};dn.fromRect=function(e){return new dn([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft(),e.topLeft()])};dn.prototype={type:dr.Polyline,bbox:function(){var e=1/0,t=-1/0,r=1/0,n=-1/0,i=this.points,s=i.length;if(s===0)return null;for(var o=0;o<s;o++){var a=i[o],u=a.x,c=a.y;u<e&&(e=u),u>t&&(t=u),c<r&&(r=c),c>n&&(n=c)}return new vt(e,r,t-e,n-r)},clone:function(){return new dn(eG(this.points))},closestPoint:function(e){var t=this.closestPointLength(e);return this.pointAtLength(t)},closestPointLength:function(e){var t=this.lengthPoints(),r=t.length;if(r===0||r===1)return 0;for(var n,i=1/0,s=0,o=r-1,a=0;a<o;a++){var u=new bt(t[a],t[a+1]),c=u.length(),f=u.closestPointNormalizedLength(e),h=u.pointAt(f),g=h.squaredDistance(e);g<i&&(i=g,n=s+f*c),s+=c}return n},closestPointNormalizedLength:function(e){var t=this.closestPointLength(e);if(t===0)return 0;var r=this.length();return r===0?0:t/r},closestPointTangent:function(e){var t=this.closestPointLength(e);return this.tangentAtLength(t)},containsPoint:function(e){var t=this.points,r=t.length;if(r===0)return!1;for(var n=e.x,i=e.y,s=r-1,o=0,a=0,u=new bt,c=new bt,f=new pe;o<r;o++){var h=t[s],g=t[o];if(e.equals(h)||(u.start=h,u.end=g,u.containsPoint(e)))return!0;if(i<=h.y&&i>g.y||i>h.y&&i<=g.y){var y=h.x-n>g.x-n?h.x-n:g.x-n;y>=0&&(f.x=n+y,f.y=i,c.start=e,c.end=f,u.intersect(c)&&a++)}s=o}return a%2===1},close:function(){const{start:e,end:t,points:r}=this;return e&&t&&!e.equals(t)&&r.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new dn(tG(this.points))},equals:function(e){if(!e)return!1;var t=this.points,r=e.points,n=t.length;if(r.length!==n)return!1;for(var i=0;i<n;i++){var s=t[i],o=e.points[i];if(!s.equals(o))return!1}return!0},intersectionWithLine:function(e){for(var t=new bt(e),r=[],n=this.lengthPoints(),i=new bt,s=0,o=n.length-1;s<o;s++){i.start=n[s],i.end=n[s+1];var a=t.intersectionWithLine(i);a&&r.push(a[0])}return r.length>0?r:null},isDifferentiable:function(){var e=this.points,t=e.length;if(t===0)return!1;for(var r=new bt,n=t-1,i=0;i<n;i++)if(r.start=e[i],r.end=e[i+1],r.isDifferentiable())return!0;return!1},length:function(){var e=this.lengthPoints(),t=e.length;if(t===0)return 0;for(var r=0,n=t-1,i=0;i<n;i++)r+=e[i].distance(e[i+1]);return r},pointAt:function(e){var t=this.lengthPoints(),r=t.length;if(r===0)return null;if(r===1||e<=0)return t[0].clone();if(e>=1)return t[r-1].clone();var n=this.length(),i=n*e;return this.pointAtLength(i)},pointAtLength:function(e){var t=this.lengthPoints(),r=t.length;if(r===0)return null;if(r===1)return t[0].clone();var n=!0;e<0&&(n=!1,e=-e);for(var i=0,s=r-1,o=0;o<s;o++){var a=n?o:s-1-o,u=t[a],c=t[a+1],f=new bt(u,c),h=u.distance(c);if(e<=i+h)return f.pointAtLength((n?1:-1)*(e-i));i+=h}var g=n?t[r-1]:t[0];return g.clone()},round:function(e){for(var t=this.points,r=t.length,n=0;n<r;n++)t[n].round(e);return this},scale:function(e,t,r){for(var n=this.points,i=n.length,s=0;s<i;s++)n[s].scale(e,t,r);return this},simplify:function(e={}){const t=this.points;if(t.length<3)return this;const r=e.threshold||1e-10;let n=0;for(;t[n+2];){const i=n,s=n+1,o=n+2,a=t[i],u=t[s],c=t[o];new bt(a,c).closestPoint(u).distance(u)<=r?t.splice(s,1):n+=1}return this},tangentAt:function(e){var t=this.lengthPoints(),r=t.length;if(r===0||r===1)return null;e<0&&(e=0),e>1&&(e=1);var n=this.length(),i=n*e;return this.tangentAtLength(i)},tangentAtLength:function(e){var t=this.lengthPoints(),r=t.length;if(r===0||r===1)return null;var n=!0;e<0&&(n=!1,e=-e);for(var i,s=0,o=r-1,a=0;a<o;a++){var u=n?a:o-1-a,c=t[u],f=t[u+1],h=new bt(c,f),g=c.distance(f);if(h.isDifferentiable()){if(e<=s+g)return h.tangentAtLength((n?1:-1)*(e-s));i=h}s+=g}if(i){var y=n?1:0;return i.tangentAt(y)}return null},toString:function(){return this.points+""},translate:function(e,t){for(var r=this.points,n=r.length,i=0;i<n;i++)r[i].translate(e,t);return this},serialize:function(){var e=this.points,t=e.length;if(t===0)return"";for(var r="",n=0;n<t;n++){var i=e[n];r+=i.x+","+i.y+" "}return r.trim()}};Object.defineProperty(dn.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.points,t=e.length;return t===0?null:this.points[0]}});Object.defineProperty(dn.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.points,t=e.length;return t===0?null:this.points[t-1]}});const{abs:Jd,sqrt:gce,min:Kz,max:Zz,pow:xS}=Math,Kr=function(e,t,r,n){if(!(this instanceof Kr))return new Kr(e,t,r,n);if(e instanceof Kr)return new Kr(e.start,e.controlPoint1,e.controlPoint2,e.end);this.start=new pe(e),this.controlPoint1=new pe(t),this.controlPoint2=new pe(r),this.end=new pe(n)};Kr.throughPoints=function(){function e(r){var n=[],i=[],s=r.length-1,o;if(s==1)return n[0]=new pe((2*r[0].x+r[1].x)/3,(2*r[0].y+r[1].y)/3),i[0]=new pe(2*n[0].x-r[0].x,2*n[0].y-r[0].y),[n,i];var a=[];for(o=1;o<s-1;o++)a[o]=4*r[o].x+2*r[o+1].x;a[0]=r[0].x+2*r[1].x,a[s-1]=(8*r[s-1].x+r[s].x)/2;var u=t(a);for(o=1;o<s-1;++o)a[o]=4*r[o].y+2*r[o+1].y;a[0]=r[0].y+2*r[1].y,a[s-1]=(8*r[s-1].y+r[s].y)/2;var c=t(a);for(o=0;o<s;o++)n.push(new pe(u[o],c[o])),o<s-1?i.push(new pe(2*r[o+1].x-u[o+1],2*r[o+1].y-c[o+1])):i.push(new pe((r[s].x+u[s-1])/2,(r[s].y+c[s-1])/2));return[n,i]}function t(r){var n=r.length,i=[],s=[],o=2;i[0]=r[0]/o;for(var a=1;a<n;a++)s[a]=1/o,o=(a<n-1?4:3.5)-s[a],i[a]=(r[a]-i[a-1])/o;for(a=1;a<n;a++)i[n-a-1]-=s[n-a]*i[n-a];return i}return function(r){if(!r||Array.isArray(r)&&r.length<2)throw new Error("At least 2 points are required");for(var n=e(r),i=[],s=n[0].length,o=0;o<s;o++){var a=new pe(n[0][o].x,n[0][o].y),u=new pe(n[1][o].x,n[1][o].y);i.push(new Kr(r[o],a,u,r[o+1]))}return i}}();Kr.prototype={type:dr.Curve,bbox:function(){for(var e=this.start,t=this.controlPoint1,r=this.controlPoint2,n=this.end,i=e.x,s=e.y,o=t.x,a=t.y,u=r.x,c=r.y,f=n.x,h=n.y,g=new Array,y=new Array,m=[new Array,new Array],_,b,S,E,A,T,I,q,p=0;p<2;++p){if(p===0?(b=6*i-12*o+6*u,_=-3*i+9*o-9*u+3*f,S=3*o-3*i):(b=6*s-12*a+6*c,_=-3*s+9*a-9*c+3*h,S=3*a-3*s),Jd(_)<1e-12){if(Jd(b)<1e-12)continue;E=-S/b,0<E&&E<1&&y.push(E);continue}I=b*b-4*S*_,q=gce(I),!(I<0)&&(A=(-b+q)/(2*_),0<A&&A<1&&y.push(A),T=(-b-q)/(2*_),0<T&&T<1&&y.push(T))}for(var P=y.length,O=P,N,V,W;P--;)E=y[P],N=1-E,V=N*N*N*i+3*N*N*E*o+3*N*E*E*u+E*E*E*f,m[0][P]=V,W=N*N*N*s+3*N*N*E*a+3*N*E*E*c+E*E*E*h,m[1][P]=W,g[P]={X:V,Y:W};y[O]=0,y[O+1]=1,g[O]={X:i,Y:s},g[O+1]={X:f,Y:h},m[0][O]=i,m[1][O]=s,m[0][O+1]=f,m[1][O+1]=h,y.length=O+2,m[0].length=O+2,m[1].length=O+2,g.length=O+2;var G=Kz.apply(null,m[0]),ee=Kz.apply(null,m[1]),ae=Zz.apply(null,m[0]),K=Zz.apply(null,m[1]);return new vt(G,ee,ae-G,K-ee)},clone:function(){return new Kr(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(e,t){return this.pointAtT(this.closestPointT(e,t))},closestPointLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i={precision:r,subdivisions:n};return this.lengthAtT(this.closestPointT(e,i),i)},closestPointNormalizedLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i={precision:r,subdivisions:n},s=this.closestPointLength(e,i);if(!s)return 0;var o=this.length(i);return o===0?0:s/o},closestPointT:function(e,t){t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i,s,o,a,u,c,f,h=n.length,g=h?1/h:0,y=0;y<h;y++){var m=n[y],_=m.start.distance(e),b=m.end.distance(e),S=_+b;(!f||S<f)&&(i=m,s=y*g,o=(y+1)*g,a=_,u=b,c=m.start.distance(m.end),f=S)}for(var E=xS(10,-r);;){var A=a?Jd(a-u)/a:0,T=u?Jd(a-u)/u:0,I=A<E||T<E,q=a?a<c*E:!0,p=u?u<c*E:!0,P=q||p;if(I||P)return a<=u?s:o;var O=i.divide(.5);g/=2;var N=O[0].start.distance(e),V=O[0].end.distance(e),W=N+V,G=O[1].start.distance(e),ee=O[1].end.distance(e),ae=G+ee;W<=ae?(i=O[0],o-=g,a=N,u=V):(i=O[1],s+=g,a=G,u=ee)}},closestPointTangent:function(e,t){return this.tangentAtT(this.closestPointT(e,t))},containsPoint:function(e,t){var r=this.toPolyline(t);return r.containsPoint(e)},divideAt:function(e,t){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var r=this.tAt(e,t);return this.divideAtT(r)},divideAtLength:function(e,t){var r=this.tAtLength(e,t);return this.divideAtT(r)},divideAtT:function(e){var t=this.start,r=this.controlPoint1,n=this.controlPoint2,i=this.end;if(e<=0)return[new Kr(t,t,t,t),new Kr(t,r,n,i)];if(e>=1)return[new Kr(t,r,n,i),new Kr(i,i,i,i)];var s=this.getSkeletonPoints(e),o=s.startControlPoint1,a=s.startControlPoint2,u=s.divider,c=s.dividerControlPoint1,f=s.dividerControlPoint2;return[new Kr(t,o,a,u),new Kr(u,c,f,i)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.controlPoint1.x===e.controlPoint1.x&&this.controlPoint1.y===e.controlPoint1.y&&this.controlPoint2.x===e.controlPoint2.x&&this.controlPoint2.y===e.controlPoint2.y&&this.end.x===e.end.x&&this.end.y===e.end.y},getSkeletonPoints:function(e){var t=this.start,r=this.controlPoint1,n=this.controlPoint2,i=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:n.clone()};if(e>=1)return{startControlPoint1:r.clone(),startControlPoint2:n.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var s=new bt(t,r).pointAt(e),o=new bt(r,n).pointAt(e),a=new bt(n,i).pointAt(e),u=new bt(s,o).pointAt(e),c=new bt(o,a).pointAt(e),f=new bt(u,c).pointAt(e),h={startControlPoint1:s,startControlPoint2:u,divider:f,dividerControlPoint1:c,dividerControlPoint2:a};return h},getSubdivisions:function(e){e=e||{};var t=e.precision===void 0?this.PRECISION:e.precision,r=this.start,n=this.controlPoint1,i=this.controlPoint2,s=this.end,o=[new Kr(r,n,i,s)];if(t===0)return o;var a=!this.isDifferentiable();if(a)return o;var u=this.endpointDistance(),c=xS(10,-t),f=2,h=n.cross(r,s)===0&&i.cross(r,s)===0;h&&(f=2*t);for(var g=0;;){g+=1;for(var y=[],m=o.length,_=0;_<m;_++){var b=o[_],S=b.divide(.5);y.push(S[0],S[1])}for(var E=0,A=y.length,T=0;T<A;T++){var I=y[T];E+=I.endpointDistance()}if(g>=f){var q=E!==0?(E-u)/E:0;if(q<c)return y}o=y,u=E}},isDifferentiable:function(){var e=this.start,t=this.controlPoint1,r=this.controlPoint2,n=this.end;return!(e.equals(t)&&t.equals(r)&&r.equals(n))},length:function(e){e=e||{};for(var t=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:t}):e.subdivisions,n=0,i=r.length,s=0;s<i;s++){var o=r[s];n+=o.endpointDistance()}return n},lengthAtT:function(e,t){if(e<=0)return 0;t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=this.divide(e)[0],i=n.length({precision:r});return i},pointAt:function(e,t){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var r=this.tAt(e,t);return this.pointAtT(r)},pointAtLength:function(e,t){var r=this.tAtLength(e,t);return this.pointAtT(r)},pointAtT:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider},PRECISION:3,round:function(e){return this.start.round(e),this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,r){return this.start.scale(e,t,r),this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this},tangentAt:function(e,t){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var r=this.tAt(e,t);return this.tangentAtT(r)},tangentAtLength:function(e,t){if(!this.isDifferentiable())return null;var r=this.tAtLength(e,t);return this.tangentAtT(r)},tangentAtT:function(e){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var t=this.getSkeletonPoints(e),r=t.startControlPoint2,n=t.dividerControlPoint1,i=t.divider,s=new bt(r,n);return s.translate(i.x-r.x,i.y-r.y),s},tAt:function(e,t){if(e<=0)return 0;if(e>=1)return 1;t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:r}):t.subdivisions,i={precision:r,subdivisions:n},s=this.length(i),o=s*e;return this.tAtLength(o,i)},tAtLength:function(e,t){var r=!0;e<0&&(r=!1,e=-e),t=t||{};for(var n=t.precision===void 0?this.PRECISION:t.precision,i=t.subdivisions===void 0?this.getSubdivisions({precision:n}):t.subdivisions,s={precision:n,subdivisions:i},o,a,u,c,f,h=0,g=i.length,y=1/g,m=0;m<g;m++){var _=r?m:g-1-m,b=i[m],S=b.endpointDistance();if(e<=h+S){o=b,a=_*y,u=(_+1)*y,c=r?e-h:S+h-e,f=r?S+h-e:e-h;break}h+=S}if(!o)return r?1:0;for(var E=this.length(s),A=xS(10,-n);;){var T;if(T=E!==0?c/E:0,T<A)return a;if(T=E!==0?f/E:0,T<A)return u;var I,q,p=o.divide(.5);y/=2;var P=p[0].endpointDistance(),O=p[1].endpointDistance();c<=P?(o=p[0],u-=y,I=c,q=P-I):(o=p[1],a+=y,I=c-P,q=O-I),c=I,f=q}},toPoints:function(e){e=e||{};for(var t=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:t}):e.subdivisions,n=[r[0].start.clone()],i=r.length,s=0;s<i;s++){var o=r[s];n.push(o.end.clone())}return n},toPolyline:function(e){return new dn(this.toPoints(e))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}};Kr.prototype.divide=Kr.prototype.divideAtT;function Lh(e){var t,r,n=[];for(r=arguments.length,t=1;t<r;t++)n.push(arguments[t]);if(!e)throw new Error("Missing a parent object.");var i=Object.create(e);for(r=n.length,t=0;t<r;t++){var s=n[t],o,a;for(a in s)s.hasOwnProperty(a)&&(delete i[a],o=Object.getOwnPropertyDescriptor(s,a),Object.defineProperty(i,a,o))}return i}const Nt=function(e){if(!(this instanceof Nt))return new Nt(e);if(typeof e=="string")return new Nt.parse(e);this.segments=[];var t,r;if(e)if(Array.isArray(e)&&e.length!==0)if(e=e.reduce(function(a,u){return a.concat(u)},[]),r=e.length,e[0].isSegment)for(t=0;t<r;t++){var n=e[t];this.appendSegment(n)}else{var i=null;for(t=0;t<r;t++){var s=e[t];if(!(s instanceof bt||s instanceof Kr))throw new Error("Cannot construct a path segment from the provided object.");t===0&&this.appendSegment(Nt.createSegment("M",s.start)),i&&!i.end.equals(s.start)&&this.appendSegment(Nt.createSegment("M",s.start)),s instanceof bt?this.appendSegment(Nt.createSegment("L",s.end)):s instanceof Kr&&this.appendSegment(Nt.createSegment("C",s.controlPoint1,s.controlPoint2,s.end)),i=s}}else if(e.isSegment)this.appendSegment(e);else if(e instanceof bt)this.appendSegment(Nt.createSegment("M",e.start)),this.appendSegment(Nt.createSegment("L",e.end));else if(e instanceof Kr)this.appendSegment(Nt.createSegment("M",e.start)),this.appendSegment(Nt.createSegment("C",e.controlPoint1,e.controlPoint2,e.end));else if(e instanceof dn){if(!(e.points&&e.points.length!==0))return;for(r=e.points.length,t=0;t<r;t++){var o=e.points[t];t===0?this.appendSegment(Nt.createSegment("M",o)):this.appendSegment(Nt.createSegment("L",o))}}else throw new Error("Cannot construct a path from the provided object.")};Nt.parse=function(e){if(!e)return new Nt;for(var t=new Nt,r=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,n=e.match(r),i=n.length,s=0;s<i;s++){var o=n[s],a=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,u=o.match(a),c=Nt.createSegment.apply(this,u);t.appendSegment(c)}return t};Nt.createSegment=function(e){if(!e)throw new Error("Type must be provided.");var t=Nt.segmentTypes[e];if(!t)throw new Error(e+" is not a recognized path segment type.");for(var r=[],n=arguments.length,i=1;i<n;i++)r.push(arguments[i]);return ua(t,r)};Nt.prototype={type:dr.Path,appendSegment:function(e){var t=this.segments,r=t.length,n,i=r!==0?t[r-1]:null,s=null;if(Array.isArray(e)){if(e=e.reduce(function(c,f){return c.concat(f)},[]),!e[0].isSegment)throw new Error("Segments required.");for(var o=e.length,a=0;a<o;a++){var u=e[a];n=this.prepareSegment(u,i,s),t.push(n),i=n}}else{if(!e||!e.isSegment)throw new Error("Segment required.");n=this.prepareSegment(e,i,s),t.push(n)}},bbox:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r,n=0;n<t;n++){var i=e[n];if(i.isVisible){var s=i.bbox();r=r?r.union(s):s}}if(r)return r;var o=e[t-1];return new vt(o.end.x,o.end.y,0,0)},clone:function(){for(var e=this.segments,t=e.length,r=new Nt,n=0;n<t;n++){var i=e[n].clone();r.appendSegment(i)}return r},closestPoint:function(e,t){var r=this.closestPointT(e,t);return r?this.pointAtT(r):null},closestPointLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,i={precision:r,segmentSubdivisions:n},s=this.closestPointT(e,i);return s?this.lengthAtT(s,i):0},closestPointNormalizedLength:function(e,t){t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,n=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,i={precision:r,segmentSubdivisions:n},s=this.closestPointLength(e,i);if(s===0)return 0;var o=this.length(i);return o===0?0:s/o},closestPointT:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;t=t||{};for(var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o,a=1/0,u=0;u<n;u++){var c=r[u],f=s[u];if(c.isVisible){var h=c.closestPointT(e,{precision:i,subdivisions:f}),g=c.pointAtT(h),y=new bt(g,e).squaredLength();y<a&&(o={segmentIndex:u,value:h},a=y)}}return o||{segmentIndex:n-1,value:1}},closestPointTangent:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;t=t||{};for(var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o,a=1/0,u=0;u<n;u++){var c=r[u],f=s[u];if(c.isDifferentiable()){var h=c.closestPointT(e,{precision:i,subdivisions:f}),g=c.pointAtT(h),y=new bt(g,e).squaredLength();y<a&&(o=c.tangentAtT(h),a=y)}}return o||null},containsPoint:function(e,t){var r=this.toPolylines(t);if(!r)return!1;for(var n=r.length,i=0,s=0;s<n;s++){var o=r[s];o.containsPoint(e)&&i++}return i%2===1},divideAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.divideAtLength(u,o)},divideAtLength:function(e,t){var r=this.segments.length;if(r===0)return null;var n=!0;e<0&&(n=!1,e=-e),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o,a,u=0,c,f,h,g,y;for(o=0;o<r;o++){var m=n?o:r-1-o;a=this.getSegment(m);var _=s[m],b=a.length({precision:i,subdivisions:_});if(a.isDifferentiable()&&(h=a,g=m,e<=u+b)){f=m,c=a.divideAtLength((n?1:-1)*(e-u),{precision:i,subdivisions:_});break}u+=b}if(!h)return null;c||(f=g,y=n?1:0,c=h.divideAtT(y));var S=this.clone();S.replaceSegment(f,c);var E=f,A=f+1,T=f+2;c[0].isDifferentiable()||(S.removeSegment(E),A-=1,T-=1);var I=S.getSegment(A).start;S.insertSegment(A,Nt.createSegment("M",I)),T+=1,c[1].isDifferentiable()||(S.removeSegment(T-1),T-=1);var q=T-E-1;for(o=T;o<S.segments.length;o++){var p=this.getSegment(o-q);if(a=S.getSegment(o),a.type==="Z"&&!p.subpathStartSegment.end.equals(a.subpathStartSegment.end)){var P=Nt.createSegment("L",p.end);S.replaceSegment(o,P)}}var O=new Nt(S.segments.slice(0,A)),N=new Nt(S.segments.slice(A));return[O,N]},equals:function(e){if(!e)return!1;var t=this.segments,r=e.segments,n=t.length;if(r.length!==n)return!1;for(var i=0;i<n;i++){var s=t[i],o=r[i];if(s.type!==o.type||!s.equals(o))return!1}return!0},getSegment:function(e){var t=this.segments,r=t.length;if(r===0)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");return t[e]},getSegmentSubdivisions:function(e){var t=this.segments,r=t.length;e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,i=[],s=0;s<r;s++){var o=t[s],a=o.getSubdivisions({precision:n});i.push(a)}return i},getSubpaths:function(){const t=this.clone().validate().segments,r=t.length,n=[];for(let i=0;i<r;i++){const s=t[i];s.isSubpathStart?n.push(new Nt(s)):n[n.length-1].appendSegment(s)}return n},insertSegment:function(e,t){var r=this.segments,n=r.length;if(e<0&&(e=n+e+1),e>n||e<0)throw new Error("Index out of range.");var i,s=null,o=null;if(n!==0&&(e>=1?(s=r[e-1],o=s.nextSegment):o=r[0]),Array.isArray(t)){if(t=t.reduce(function(f,h){return f.concat(h)},[]),!t[0].isSegment)throw new Error("Segments required.");for(var a=t.length,u=0;u<a;u++){var c=t[u];i=this.prepareSegment(c,s,o),r.splice(e+u,0,i),s=i}}else{if(!t||!t.isSegment)throw new Error("Segment required.");i=this.prepareSegment(t,s,o),r.splice(e,0,i)}},intersectionWithLine:function(e,t){var r=null,n=this.toPolylines(t);if(!n)return null;for(var i=0,s=n.length;i<s;i++){var o=n[i],a=e.intersect(o);a&&(r||(r=[]),Array.isArray(a)?Array.prototype.push.apply(r,a):r.push(a))}return r},isDifferentiable:function(){for(var e=this.segments,t=e.length,r=0;r<t;r++){var n=e[r];if(n.isDifferentiable())return!0}return!1},isValid:function(){var e=this.segments,t=e.length===0||e[0].type==="M";return t},length:function(e){var t=this.segments,r=t.length;if(r===0)return 0;e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,i=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,s=0,o=0;o<r;o++){var a=t[o],u=i[o];s+=a.length({subdivisions:u})}return s},lengthAtT:function(e,t){var r=this.segments,n=r.length;if(n===0)return 0;var i=e.segmentIndex;if(i<0)return 0;var s=e.value;i>=n?(i=n-1,s=1):s<0?s=0:s>1&&(s=1),t=t||{};for(var o=t.precision===void 0?this.PRECISION:t.precision,a=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions,u,c=0,f=0;f<i;f++){var h=r[f];u=a[f],c+=h.length({precisison:o,subdivisions:u})}return h=r[i],u=a[i],c+=h.lengthAtT(s,{precisison:o,subdivisions:u}),c},pointAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.pointAtLength(u,o)},pointAtLength:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;if(e===0)return this.start.clone();var i=!0;e<0&&(i=!1,e=-e),t=t||{};for(var s=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,a,u=0,c=0;c<n;c++){var f=i?c:n-1-c,h=r[f],g=o[f],y=h.length({precision:s,subdivisions:g});if(h.isVisible){if(e<=u+y)return h.pointAtLength((i?1:-1)*(e-u),{precision:s,subdivisions:g});a=h}u+=y}if(a)return i?a.end:a.start;var m=r[n-1];return m.end.clone()},pointAtT:function(e){var t=this.segments,r=t.length;if(r===0)return null;var n=e.segmentIndex;if(n<0)return t[0].pointAtT(0);if(n>=r)return t[r-1].pointAtT(1);var i=e.value;return i<0?i=0:i>1&&(i=1),t[n].pointAtT(i)},PRECISION:3,prepareSegment:function(e,t,r){e.previousSegment=t,e.nextSegment=r,t&&(t.nextSegment=e),r&&(r.previousSegment=e);var n=e;return e.isSubpathStart&&(e.subpathStartSegment=e,n=r),n&&this.updateSubpathStartSegment(n),e},removeSegment:function(e){var t=this.segments,r=t.length;if(r===0)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");var n=t.splice(e,1)[0],i=n.previousSegment,s=n.nextSegment;i&&(i.nextSegment=s),s&&(s.previousSegment=i),n.isSubpathStart&&s&&this.updateSubpathStartSegment(s)},replaceSegment:function(e,t){var r=this.segments,n=r.length;if(n===0)throw new Error("Path has no segments.");if(e<0&&(e=n+e),e>=n||e<0)throw new Error("Index out of range.");var i,s=r[e],o=s.previousSegment,a=s.nextSegment,u=s.isSubpathStart;if(Array.isArray(t)){if(t=t.reduce(function(g,y){return g.concat(y)},[]),!t[0].isSegment)throw new Error("Segments required.");r.splice(e,1);for(var c=t.length,f=0;f<c;f++){var h=t[f];i=this.prepareSegment(h,o,a),r.splice(e+f,0,i),o=i,u&&i.isSubpathStart&&(u=!1)}}else{if(!t||!t.isSegment)throw new Error("Segment required.");i=this.prepareSegment(t,o,a),r.splice(e,1,i),u&&i.isSubpathStart&&(u=!1)}u&&a&&this.updateSubpathStartSegment(a)},round:function(e){for(var t=this.segments,r=t.length,n=0;n<r;n++){var i=t[n];i.round(e)}return this},scale:function(e,t,r){for(var n=this.segments,i=n.length,s=0;s<i;s++){var o=n[s];o.scale(e,t,r)}return this},segmentAt:function(e,t){var r=this.segmentIndexAt(e,t);return r?this.getSegment(r):null},segmentAtLength:function(e,t){var r=this.segmentIndexAtLength(e,t);return r?this.getSegment(r):null},segmentIndexAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.segmentIndexAtLength(u,o)},segmentIndexAtLength:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;var i=!0;e<0&&(i=!1,e=-e),t=t||{};for(var s=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,a=null,u=0,c=0;c<n;c++){var f=i?c:n-1-c,h=r[f],g=o[f],y=h.length({precision:s,subdivisions:g});if(h.isVisible){if(e<=u+y)return f;a=f}u+=y}return a},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var i=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),u=a*e;return this.tangentAtLength(u,o)},tangentAtLength:function(e,t){var r=this.segments,n=r.length;if(n===0)return null;var i=!0;e<0&&(i=!1,e=-e),t=t||{};for(var s=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,a,u=0,c=0;c<n;c++){var f=i?c:n-1-c,h=r[f],g=o[f],y=h.length({precision:s,subdivisions:g});if(h.isDifferentiable()){if(e<=u+y)return h.tangentAtLength((i?1:-1)*(e-u),{precision:s,subdivisions:g});a=h}u+=y}if(a){var m=i?1:0;return a.tangentAtT(m)}return null},tangentAtT:function(e){var t=this.segments,r=t.length;if(r===0)return null;var n=e.segmentIndex;if(n<0)return t[0].tangentAtT(0);if(n>=r)return t[r-1].tangentAtT(1);var i=e.value;return i<0?i=0:i>1&&(i=1),t[n].tangentAtT(i)},toPoints:function(e){var t=this.segments,r=t.length;if(r===0)return null;e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,i=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,s=[],o=[],a=0;a<r;a++){var u=t[a];if(u.isVisible){var c=i[a];if(c.length>0){var f=c.map(function(h){return h.start});Array.prototype.push.apply(o,f)}else o.push(u.start)}else o.length>0&&(o.push(t[a-1].end),s.push(o),o=[])}return o.length>0&&(o.push(this.end),s.push(o)),s},toPolylines:function(e){var t=[],r=this.toPoints(e);if(!r)return null;for(var n=0,i=r.length;n<i;n++)t.push(new dn(r[n]));return t},toString:function(){for(var e=this.segments,t=e.length,r="",n=0;n<t;n++){var i=e[n];r+=i.serialize()+" "}return r.trim()},translate:function(e,t){for(var r=this.segments,n=r.length,i=0;i<n;i++){var s=r[i];s.translate(e,t)}return this},updateSubpathStartSegment:function(e){for(var t=e.previousSegment;e&&!e.isSubpathStart;)t?e.subpathStartSegment=t.subpathStartSegment:e.subpathStartSegment=null,t=e,e=e.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,Nt.createSegment("M",0,0)),this}};Object.defineProperty(Nt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r=0;r<t;r++){var n=e[r];if(n.isVisible)return n.start}return e[t-1].end}});Object.defineProperty(Nt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var r=t-1;r>=0;r--){var n=e[r];if(n.isVisible)return n.end}return e[t-1].end}});function ua(e,t){return t.unshift(null),new(Function.prototype.bind.apply(e,t))}var Pc={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(e){if(e<=0)return 0;var t=this.length();return e>=1?t:t*e},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(Pc,"end",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(Pc,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}});Object.defineProperty(Pc,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var Ei=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof Ei))return ua(Ei,e);if(t===0)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var n;if(e[0]instanceof bt){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+t+" lines provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===2)return this.end=new pe(+e[0],+e[1]),this;if(t<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+t+" coordinates provided).");var i;for(n=[],r=0;r<t;r+=2)i=e.slice(r,r+2),n.push(ua(Ei,i));return n}else{if(t===1)return this.end=new pe(e[0]),this;var s;for(n=[],r=0;r<t;r+=1)s=e[r],n.push(new Ei(s));return n}},rG={clone:function(){return new Ei(this.end)},divideAt:function(e){var t=new bt(this.start,this.end),r=t.divideAt(e);return[new Ei(r[0]),new Ei(r[1])]},divideAtLength:function(e){var t=new bt(this.start,this.end),r=t.divideAtLength(e);return[new Ei(r[0]),new Ei(r[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return this.previousSegment?!this.start.equals(this.end):!1},round:function(e){return this.end.round(e),this},scale:function(e,t,r){return this.end.scale(e,t,r),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty(rG,"type",{configurable:!0,enumerable:!0,value:"L"});Ei.prototype=Lh(Pc,bt.prototype,rG);var Os=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof Os))return ua(Os,e);if(t===0)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var n;if(e[0]instanceof Kr){if(t===1)return this.controlPoint1=e[0].controlPoint1.clone(),this.controlPoint2=e[0].controlPoint2.clone(),this.end=e[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" curves provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===6)return this.controlPoint1=new pe(+e[0],+e[1]),this.controlPoint2=new pe(+e[2],+e[3]),this.end=new pe(+e[4],+e[5]),this;if(t<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" coordinates provided).");var i;for(n=[],r=0;r<t;r+=6)i=e.slice(r,r+6),n.push(ua(Os,i));return n}else{if(t===3)return this.controlPoint1=new pe(e[0]),this.controlPoint2=new pe(e[1]),this.end=new pe(e[2]),this;if(t<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" points provided).");var s;for(n=[],r=0;r<t;r+=3)s=e.slice(r,r+3),n.push(ua(Os,s));return n}},nG={clone:function(){return new Os(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(e,t){var r=new Kr(this.start,this.controlPoint1,this.controlPoint2,this.end),n=r.divideAt(e,t);return[new Os(n[0]),new Os(n[1])]},divideAtLength:function(e,t){var r=new Kr(this.start,this.controlPoint1,this.controlPoint2,this.end),n=r.divideAtLength(e,t);return[new Os(n[0]),new Os(n[1])]},divideAtT:function(e){var t=new Kr(this.start,this.controlPoint1,this.controlPoint2,this.end),r=t.divideAtT(e);return[new Os(r[0]),new Os(r[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var e=this.start,t=this.controlPoint1,r=this.controlPoint2,n=this.end;return!(e.equals(t)&&t.equals(r)&&r.equals(n))},round:function(e){return this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,r){return this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this},serialize:function(){var e=this.controlPoint1,t=this.controlPoint2,r=this.end;return this.type+" "+e.x+" "+e.y+" "+t.x+" "+t.y+" "+r.x+" "+r.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}};Object.defineProperty(nG,"type",{configurable:!0,enumerable:!0,value:"C"});Os.prototype=Lh(Pc,Kr.prototype,nG);var Zu=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof Zu))return ua(Zu,e);if(t===0)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var n;if(e[0]instanceof bt){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" lines provided).")}else if(e[0]instanceof Kr){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" curves provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===2)return this.end=new pe(+e[0],+e[1]),this;if(t<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" coordinates provided).");var i;for(n=[],r=0;r<t;r+=2)i=e.slice(r,r+2),r===0?n.push(ua(Zu,i)):n.push(ua(Ei,i));return n}else{if(t===1)return this.end=new pe(e[0]),this;var s;for(n=[],r=0;r<t;r+=1)s=e[r],r===0?n.push(new Zu(s)):n.push(new Ei(s));return n}},q2={bbox:function(){return null},clone:function(){return new Zu(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(e){return this.end.equals(e.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(e){return this.end.round(e),this},scale:function(e,t,r){return this.end.scale(e,t,r),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty(q2,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}});Object.defineProperty(q2,"type",{configurable:!0,enumerable:!0,value:"M"});Zu.prototype=Lh(Pc,q2);var Sl=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof Sl))return ua(Sl,e);if(t>0)throw new Error("Closepath constructor expects no arguments.");return this},D2={clone:function(){return new Sl},divideAt:function(e){var t=new bt(this.start,this.end),r=t.divideAt(e);return[r[1].isDifferentiable()?new Ei(r[0]):this.clone(),new Ei(r[1])]},divideAtLength:function(e){var t=new bt(this.start,this.end),r=t.divideAtLength(e);return[r[1].isDifferentiable()?new Ei(r[0]):this.clone(),new Ei(r[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(D2,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}});Object.defineProperty(D2,"type",{configurable:!0,enumerable:!0,value:"Z"});Sl.prototype=Lh(Pc,bt.prototype,D2);var vce=Nt.segmentTypes={L:Ei,C:Os,M:Zu,Z:Sl,z:Sl};Nt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(vce).join("")+",.]*$");Nt.isDataSupported=function(e){return typeof e!="string"?!1:this.regexSupportedData.test(e)};const mce={curveThroughPoints:function(e){return console.warn("deprecated"),new Nt(Kr.throughPoints(e)).serialize()},getCurveControlPoints:function(e){console.warn("deprecated");var t=[],r=[],n=e.length-1,i;if(n==1)return t[0]=new pe((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),r[0]=new pe(2*t[0].x-e[0].x,2*t[0].y-e[0].y),[t,r];var s=[];for(i=1;i<n-1;i++)s[i]=4*e[i].x+2*e[i+1].x;s[0]=e[0].x+2*e[1].x,s[n-1]=(8*e[n-1].x+e[n].x)/2;var o=this.getFirstControlPoints(s);for(i=1;i<n-1;++i)s[i]=4*e[i].y+2*e[i+1].y;s[0]=e[0].y+2*e[1].y,s[n-1]=(8*e[n-1].y+e[n].y)/2;var a=this.getFirstControlPoints(s);for(i=0;i<n;i++)t.push(new pe(o[i],a[i])),i<n-1?r.push(new pe(2*e[i+1].x-o[i+1],2*e[i+1].y-a[i+1])):r.push(new pe((e[n].x+o[n-1])/2,(e[n].y+a[n-1])/2));return[t,r]},getCurveDivider:function(e,t,r,n){console.warn("deprecated");var i=new Kr(e,t,r,n);return function(o){var a=i.divide(o);return[{p0:a[0].start,p1:a[0].controlPoint1,p2:a[0].controlPoint2,p3:a[0].end},{p0:a[1].start,p1:a[1].controlPoint1,p2:a[1].controlPoint2,p3:a[1].end}]}},getFirstControlPoints:function(e){console.warn("deprecated");var t=e.length,r=[],n=[],i=2;r[0]=e[0]/i;for(var s=1;s<t;s++)n[s]=1/i,i=(s<t-1?4:3.5)-n[s],r[s]=(e[s]-r[s-1])/i;for(s=1;s<t;s++)r[t-s-1]-=n[t-s]*r[t-s];return r},getInversionSolver:function(e,t,r,n){console.warn("deprecated");var i=new Kr(e,t,r,n);return function(o){return i.closestPointT(o)}}},ms=function(e){if(!(this instanceof ms))return new ms(e);if(typeof e=="string")return new ms.parse(e);this.points=Array.isArray(e)?e.map(pe):[]};ms.parse=function(e){return new ms(Q7(e))};ms.fromRect=function(e){return new ms([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft()])};ms.prototype=Lh(dn.prototype,{type:dr.Polygon,clone:function(){return new ms(eG(this.points))},convexHull:function(){return new ms(tG(this.points))},lengthPoints:function(){const{start:e,end:t,points:r}=this;return r.length<=1||e.equals(t)?r:[...r,e.clone()]}});function iG(e,t,r,n){switch(e.type){case dr.Line:{switch(t.type){case dr.Line:return Ju(e,t)}break}case dr.Ellipse:{switch(t.type){case dr.Line:return F2(e,t);case dr.Ellipse:return sG(e,t)}break}case dr.Rect:{switch(t.type){case dr.Line:return oG(e,t);case dr.Ellipse:return aG(e,t);case dr.Rect:return B2(e,t)}break}case dr.Polyline:{switch(t.type){case dr.Line:return Fg(e,t);case dr.Ellipse:return z2(e,t);case dr.Rect:return uG(e,t);case dr.Polyline:return cG(e,t)}break}case dr.Polygon:{switch(t.type){case dr.Line:return V2(e,t);case dr.Ellipse:return Bg(e,t);case dr.Rect:return lG(e,t);case dr.Polyline:return fG(e,t);case dr.Polygon:return hG(e,t)}break}case dr.Path:{switch(t.type){case dr.Line:return dG(e,t,r);case dr.Ellipse:return pG(e,t,r);case dr.Rect:return gG(e,t,r);case dr.Polyline:return G2(e,t,r);case dr.Polygon:return zg(e,t,r);case dr.Path:return vG(e,t,r,n)}break}}switch(t.type){case dr.Ellipse:case dr.Rect:case dr.Polyline:case dr.Polygon:case dr.Path:return iG(t,e,n,r);default:throw Error(`The intersection for ${e} and ${t} could not be found.`)}}function Ju(e,t){const r=e.start.x,n=e.start.y,i=e.end.x,s=e.end.y,o=t.start.x,a=t.start.y,u=t.end.x,c=t.end.y,f=i-r,h=s-n,g=u-o,y=c-a,m=r-o,_=n-a,b=f*y-g*h,S=(f*_-h*m)/b,E=(g*_-y*m)/b;return S>=0&&S<=1&&E>=0&&E<=1}function F2(e,t){const r=e.a,n=e.b,i=e.x,s=e.y,o=t.start.x-i,a=t.end.x-i,u=t.start.y-s,c=t.end.y-s,f=r*r,h=n*n,g=a-o,y=c-u,m=g*g/f+y*y/h,_=2*o*g/f+2*u*y/h,b=o*o/f+u*u/h-1,S=_*_-4*m*b;if(S===0){const E=-_/2/m;return E>=0&&E<=1}else if(S>0){const E=Math.sqrt(S),A=(-_+E)/2/m,T=(-_-E)/2/m;return A>=0&&A<=1||T>=0&&T<=1}return!1}function sG(e,t){return yce(e,0,t,0)}function oG(e,t){const{start:r,end:n}=t,{x:i,y:s,width:o,height:a}=e;return r.x>i+o&&n.x>i+o||r.x<i&&n.x<i||r.y>s+a&&n.y>s+a||r.y<s&&n.y<s?!1:e.containsPoint(t.start)||e.containsPoint(t.end)?!0:Ju(e.topLine(),t)||Ju(e.rightLine(),t)||Ju(e.bottomLine(),t)||Ju(e.leftLine(),t)}function aG(e,t){return B2(e,vt.fromEllipse(t))?Bg(ms.fromRect(e),t):!1}function B2(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function Fg(e,t){return mG(e,t,{interior:!1})}function z2(e,t){return yG(e,t,{interior:!1})}function uG(e,t){return _G(e,t,{interior:!1})}function cG(e,t){return Vg(e,t,{interior:!1})}function V2(e,t){return mG(e,t,{interior:!0})}function Bg(e,t){return yG(e,t,{interior:!0})}function lG(e,t){return _G(e,t,{interior:!0})}function fG(e,t){return Vg(e,t,{interior:!0})}function hG(e,t){return $2(e,t,{interior:!0})}function dG(e,t,r){return e.getSubpaths().some(n=>{const[i]=n.toPolylines(r),{type:s}=n.getSegment(-1);return s==="Z"?V2(i,t):Fg(i,t)})}function pG(e,t,r){return e.getSubpaths().some(n=>{const[i]=n.toPolylines(r),{type:s}=n.getSegment(-1);return s==="Z"?Bg(i,t):z2(i,t)})}function gG(e,t,r){return zg(e,ms.fromRect(t),r)}function G2(e,t,r){return bG(e,t,r,{interior:!1})}function zg(e,t,r){return bG(e,t,r,{interior:!0})}function vG(e,t,r,n){return e.getSubpaths().some(i=>{const[s]=i.toPolylines(r),{type:o}=i.getSegment(-1);return o==="Z"?zg(t,s,n):G2(t,s,n)})}function mG(e,t,r={}){const{interior:n=!1}=r;let i;if(n){if(e.containsPoint(t.start))return!0;const{start:a,end:u,points:c}=e;i=u.equals(a)?c:[...c,a]}else i=e.points;const{length:s}=i,o=new bt;for(let a=0;a<s-1;a++)if(o.start=i[a],o.end=i[a+1],Ju(t,o))return!0;return!1}function yG(e,t,r={}){const{start:n,end:i,points:s}=e;if(t.containsPoint(n))return!0;let o;const{interior:a=!1}=r;if(a){if(e.containsPoint(t.center()))return!0;o=i.equals(n)?s:[...s,n]}else o=s;const{length:u}=o,c=new bt;for(let f=0;f<u-1;f++)if(c.start=o[f],c.end=o[f+1],F2(t,c))return!0;return!1}function _G(e,t,r){const n=ms.fromRect(t);return $2(e,n,r)}function bG(e,t,r,n){return e.getSubpaths().some(i=>{const[s]=i.toPolylines(r),{type:o}=i.getSegment(-1);return o==="Z"?$2(t,s,n):Vg(t,s,n)})}function Vg(e,t,r={}){const{interior:n=!1}=r;let i;if(n){const{start:u}=t;if(e.containsPoint(u))return!0;i=e.clone().close()}else i=e;const s=t.points,{length:o}=s,a=new bt;for(let u=0;u<o-1;u++)if(a.start=s[u],a.end=s[u+1],Fg(i,a))return!0;return!1}function $2(e,t,r){return t.containsPoint(e.start)||Vg(e,t.clone().close(),r)}function yce(e,t,r,n){const{cos:i,sin:s}=Math,o=s(t),a=i(t),u=s(n),c=i(n),f=o*o,h=a*a,g=o*a,y=u*u,m=c*c,_=u*c,b=e.a*e.a,S=e.b*e.b,E=r.a*r.a,A=r.b*r.b,T=b*f+S*h,I=E*y+A*m,q=b*h+S*f,p=E*m+A*y;let P=2*(S-b)*g,O=2*(A-E)*_,N=-2*T*e.x-P*e.y,V=-2*I*r.x-O*r.y,W=-P*e.x-2*q*e.y,G=-O*r.x-2*p*r.y;const ee=T*e.x*e.x+q*e.y*e.y+P*e.x*e.y-b*S,ae=I*r.x*r.x+p*r.y*r.y+O*r.x*r.y-E*A;P=P/2,O=O/2,N=N/2,V=V/2,W=W/2,G=G/2;const K=au([[T,P,N],[P,q,W],[N,W,ee]]),U=au([[I,O,V],[O,p,G],[V,G,ae]]),j=.33333333*(au([[I,P,N],[O,q,W],[V,W,ee]])+au([[T,O,N],[P,p,W],[N,G,ee]])+au([[T,P,V],[P,q,G],[N,W,ae]])),J=.33333333*(au([[T,O,V],[P,p,G],[N,G,ae]])+au([[I,P,V],[O,q,G],[V,W,ae]])+au([[I,O,N],[O,p,W],[V,G,ee]])),de=Qd([[K,j],[j,J]]),ce=Qd([[K,J],[j,U]]),Te=Qd([[j,J],[J,U]]);return!(Qd([[2*de,ce],[ce,2*Te]])>0&&(J>0||j>0))}function Qd(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}function au(e){return e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0]}const _ce=Object.freeze(Object.defineProperty({__proto__:null,ellipseWithEllipse:sG,ellipseWithLine:F2,exists:iG,lineWithLine:Ju,pathWithEllipse:pG,pathWithLine:dG,pathWithPath:vG,pathWithPolygon:zg,pathWithPolyline:G2,pathWithRect:gG,polygonWithEllipse:Bg,polygonWithLine:V2,polygonWithPolygon:hG,polygonWithPolyline:fG,polygonWithRect:lG,polylineWithEllipse:z2,polylineWithLine:Fg,polylineWithPolyline:cG,polylineWithRect:uG,rectWithEllipse:aG,rectWithLine:oG,rectWithRect:B2},Symbol.toStringTag,{value:"Module"})),bce=_ce,wce=Object.freeze(Object.defineProperty({__proto__:null,Curve:Kr,Ellipse:Xi,Line:bt,Path:Nt,Point:pe,Polygon:ms,Polyline:dn,Rect:vt,bezier:mce,ellipse:lce,intersection:bce,line:tc,normalizeAngle:Oo,point:Mp,random:KS,rect:pce,scale:sce,snapToGrid:ac,toDeg:Dg,toRad:vs,types:dr},Symbol.toStringTag,{value:"Module"}));var SS={},U2="1.13.7",Jz=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},Gg=Array.prototype,j2=Object.prototype,Qz=typeof Symbol<"u"?Symbol.prototype:null,xce=Gg.push,Nh=Gg.slice,sh=j2.toString,Sce=j2.hasOwnProperty,wG=typeof ArrayBuffer<"u",Ece=typeof DataView<"u",Ace=Array.isArray,e5=Object.keys,t5=Object.create,r5=wG&&ArrayBuffer.isView,Tce=isNaN,Pce=isFinite,xG=!{toString:null}.propertyIsEnumerable("toString"),n5=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Cce=Math.pow(2,53)-1;function Ji(e,t){return t=t==null?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var s=Array(t+1);for(i=0;i<t;i++)s[i]=arguments[i];return s[t]=n,e.apply(this,s)}}function Ru(e){var t=typeof e;return t==="function"||t==="object"&&!!e}function SG(e){return e===null}function H2(e){return e===void 0}function W2(e){return e===!0||e===!1||sh.call(e)==="[object Boolean]"}function EG(e){return!!(e&&e.nodeType===1)}function Li(e){var t="[object "+e+"]";return function(r){return sh.call(r)===t}}const $g=Li("String"),X2=Li("Number"),AG=Li("Date"),TG=Li("RegExp"),PG=Li("Error"),Y2=Li("Symbol"),K2=Li("ArrayBuffer");var CG=Li("Function"),Rce=Jz.document&&Jz.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof Rce!="function"&&(CG=function(e){return typeof e=="function"||!1});const ki=CG,RG=Li("Object");var IG=Ece&&(!/\[native code\]/.test(String(DataView))||RG(new DataView(new ArrayBuffer(8)))),Z2=typeof Map<"u"&&RG(new Map),Ice=Li("DataView");function Oce(e){return e!=null&&ki(e.getInt8)&&K2(e.buffer)}const oh=IG?Oce:Ice,Iu=Ace||Li("Array");function Ou(e,t){return e!=null&&Sce.call(e,t)}var QS=Li("Arguments");(function(){QS(arguments)||(QS=function(e){return Ou(e,"callee")})})();const Ug=QS;function OG(e){return!Y2(e)&&Pce(e)&&!isNaN(parseFloat(e))}function J2(e){return X2(e)&&Tce(e)}function Q2(e){return function(){return e}}function MG(e){return function(t){var r=e(t);return typeof r=="number"&&r>=0&&r<=Cce}}function kG(e){return function(t){return t==null?void 0:t[e]}}const kp=kG("byteLength"),Mce=MG(kp);var kce=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function Lce(e){return r5?r5(e)&&!oh(e):Mce(e)&&kce.test(sh.call(e))}const eA=wG?Lce:Q2(!1),bs=kG("length");function Nce(e){for(var t={},r=e.length,n=0;n<r;++n)t[e[n]]=!0;return{contains:function(i){return t[i]===!0},push:function(i){return t[i]=!0,e.push(i)}}}function LG(e,t){t=Nce(t);var r=n5.length,n=e.constructor,i=ki(n)&&n.prototype||j2,s="constructor";for(Ou(e,s)&&!t.contains(s)&&t.push(s);r--;)s=n5[r],s in e&&e[s]!==i[s]&&!t.contains(s)&&t.push(s)}function fi(e){if(!Ru(e))return[];if(e5)return e5(e);var t=[];for(var r in e)Ou(e,r)&&t.push(r);return xG&&LG(e,t),t}function NG(e){if(e==null)return!0;var t=bs(e);return typeof t=="number"&&(Iu(e)||$g(e)||Ug(e))?t===0:bs(fi(e))===0}function tA(e,t){var r=fi(t),n=r.length;if(e==null)return!n;for(var i=Object(e),s=0;s<n;s++){var o=r[s];if(t[o]!==i[o]||!(o in i))return!1}return!0}function sn(e){if(e instanceof sn)return e;if(!(this instanceof sn))return new sn(e);this._wrapped=e}sn.VERSION=U2;sn.prototype.value=function(){return this._wrapped};sn.prototype.valueOf=sn.prototype.toJSON=sn.prototype.value;sn.prototype.toString=function(){return String(this._wrapped)};function i5(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,kp(e))}var s5="[object DataView]";function eE(e,t,r,n){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var i=typeof e;return i!=="function"&&i!=="object"&&typeof t!="object"?!1:qG(e,t,r,n)}function qG(e,t,r,n){e instanceof sn&&(e=e._wrapped),t instanceof sn&&(t=t._wrapped);var i=sh.call(e);if(i!==sh.call(t))return!1;if(IG&&i=="[object Object]"&&oh(e)){if(!oh(t))return!1;i=s5}switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return Qz.valueOf.call(e)===Qz.valueOf.call(t);case"[object ArrayBuffer]":case s5:return qG(i5(e),i5(t),r,n)}var s=i==="[object Array]";if(!s&&eA(e)){var o=kp(e);if(o!==kp(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;s=!0}if(!s){if(typeof e!="object"||typeof t!="object")return!1;var a=e.constructor,u=t.constructor;if(a!==u&&!(ki(a)&&a instanceof a&&ki(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var c=r.length;c--;)if(r[c]===e)return n[c]===t;if(r.push(e),n.push(t),s){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!eE(e[c],t[c],r,n))return!1}else{var f=fi(e),h;if(c=f.length,fi(t).length!==c)return!1;for(;c--;)if(h=f[c],!(Ou(t,h)&&eE(e[h],t[h],r,n)))return!1}return r.pop(),n.pop(),!0}function DG(e,t){return eE(e,t)}function Wl(e){if(!Ru(e))return[];var t=[];for(var r in e)t.push(r);return xG&&LG(e,t),t}function rA(e){var t=bs(e);return function(r){if(r==null)return!1;var n=Wl(r);if(bs(n))return!1;for(var i=0;i<t;i++)if(!ki(r[e[i]]))return!1;return e!==zG||!ki(r[nA])}}var nA="forEach",FG="has",iA=["clear","delete"],BG=["get",FG,"set"],qce=iA.concat(nA,BG),zG=iA.concat(BG),Dce=["add"].concat(iA,nA,FG);const VG=Z2?rA(qce):Li("Map"),GG=Z2?rA(zG):Li("WeakMap"),$G=Z2?rA(Dce):Li("Set"),UG=Li("WeakSet");function Cc(e){for(var t=fi(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n}function jG(e){for(var t=fi(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n}function sA(e){for(var t={},r=fi(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t}function ah(e){var t=[];for(var r in e)ki(e[r])&&t.push(r);return t.sort()}function oA(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||r==null)return r;for(var i=1;i<n;i++)for(var s=arguments[i],o=e(s),a=o.length,u=0;u<a;u++){var c=o[u];(!t||r[c]===void 0)&&(r[c]=s[c])}return r}}const aA=oA(Wl),El=oA(fi),uA=oA(Wl,!0);function Fce(){return function(){}}function HG(e){if(!Ru(e))return{};if(t5)return t5(e);var t=Fce();t.prototype=e;var r=new t;return t.prototype=null,r}function WG(e,t){var r=HG(e);return t&&El(r,t),r}function XG(e){return Ru(e)?Iu(e)?e.slice():aA({},e):e}function YG(e,t){return t(e),e}function cA(e){return Iu(e)?e:[e]}sn.toPath=cA;function qh(e){return sn.toPath(e)}function lA(e,t){for(var r=t.length,n=0;n<r;n++){if(e==null)return;e=e[t[n]]}return r?e:void 0}function fA(e,t,r){var n=lA(e,qh(t));return H2(n)?r:n}function KG(e,t){t=qh(t);for(var r=t.length,n=0;n<r;n++){var i=t[n];if(!Ou(e,i))return!1;e=e[i]}return!!r}function jg(e){return e}function uc(e){return e=El({},e),function(t){return tA(t,e)}}function Hg(e){return e=qh(e),function(t){return lA(t,e)}}function Dh(e,t,r){if(t===void 0)return e;switch(r??3){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,s){return e.call(t,n,i,s)};case 4:return function(n,i,s,o){return e.call(t,n,i,s,o)}}return function(){return e.apply(t,arguments)}}function ZG(e,t,r){return e==null?jg:ki(e)?Dh(e,t,r):Ru(e)&&!Iu(e)?uc(e):Hg(e)}function Wg(e,t){return ZG(e,t,1/0)}sn.iteratee=Wg;function ws(e,t,r){return sn.iteratee!==Wg?sn.iteratee(e,t):ZG(e,t,r)}function JG(e,t,r){t=ws(t,r);for(var n=fi(e),i=n.length,s={},o=0;o<i;o++){var a=n[o];s[a]=t(e[a],a,e)}return s}function hA(){}function QG(e){return e==null?hA:function(t){return fA(e,t)}}function e$(e,t,r){var n=Array(Math.max(0,e));t=Dh(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n}function Lp(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}const Al=Date.now||function(){return new Date().getTime()};function t$(e){var t=function(s){return e[s]},r="(?:"+fi(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(s){return s=s==null?"":""+s,n.test(s)?s.replace(i,t):s}}const r$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n$=t$(r$),Bce=sA(r$),i$=t$(Bce),s$=sn.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ES=/(.)^/,zce={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Vce=/\\|'|\r|\n|\u2028|\u2029/g;function Gce(e){return"\\"+zce[e]}var $ce=/^\s*(\w|\$)+\s*$/;function o$(e,t,r){!t&&r&&(t=r),t=uA({},t,sn.templateSettings);var n=RegExp([(t.escape||ES).source,(t.interpolate||ES).source,(t.evaluate||ES).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(n,function(c,f,h,g,y){return s+=e.slice(i,y).replace(Vce,Gce),i=y+c.length,f?s+=`'+
((__t=(`+f+`))==null?'':_.escape(__t))+
'`:h?s+=`'+
((__t=(`+h+`))==null?'':__t)+
'`:g&&(s+=`';
`+g+`
__p+='`),c}),s+=`';
`;var o=t.variable;if(o){if(!$ce.test(o))throw new Error("variable is not a bare identifier: "+o)}else s=`with(obj||{}){
`+s+`}
`,o="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var a;try{a=new Function(o,"_",s)}catch(c){throw c.source=s,c}var u=function(c){return a.call(this,c,sn)};return u.source="function("+o+`){
`+s+"}",u}function a$(e,t,r){t=qh(t);var n=t.length;if(!n)return ki(r)?r.call(e):r;for(var i=0;i<n;i++){var s=e==null?void 0:e[t[i]];s===void 0&&(s=r,i=n),e=ki(s)?s.call(e):s}return e}var Uce=0;function u$(e){var t=++Uce+"";return e?e+t:t}function c$(e){var t=sn(e);return t._chain=!0,t}function l$(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var s=HG(e.prototype),o=e.apply(s,i);return Ru(o)?o:s}var Rc=Ji(function(e,t){var r=Rc.placeholder,n=function(){for(var i=0,s=t.length,o=Array(s),a=0;a<s;a++)o[a]=t[a]===r?arguments[i++]:t[a];for(;i<arguments.length;)o.push(arguments[i++]);return l$(e,n,this,this,o)};return n});Rc.placeholder=sn;const dA=Ji(function(e,t,r){if(!ki(e))throw new TypeError("Bind must be called on a function");var n=Ji(function(i){return l$(e,n,t,this,r.concat(i))});return n}),Fs=MG(bs);function Ic(e,t,r,n){if(n=n||[],!t&&t!==0)t=1/0;else if(t<=0)return n.concat(e);for(var i=n.length,s=0,o=bs(e);s<o;s++){var a=e[s];if(Fs(a)&&(Iu(a)||Ug(a)))if(t>1)Ic(a,t-1,r,n),i=n.length;else for(var u=0,c=a.length;u<c;)n[i++]=a[u++];else r||(n[i++]=a)}return n}const f$=Ji(function(e,t){t=Ic(t,!1,!1);var r=t.length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=dA(e[n],e)}return e});function h$(e,t){var r=function(n){var i=r.cache,s=""+(t?t.apply(this,arguments):n);return Ou(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return r.cache={},r}const pA=Ji(function(e,t,r){return setTimeout(function(){return e.apply(null,r)},t)}),d$=Rc(pA,sn,1);function p$(e,t,r){var n,i,s,o,a=0;r||(r={});var u=function(){a=r.leading===!1?0:Al(),n=null,o=e.apply(i,s),n||(i=s=null)},c=function(){var f=Al();!a&&r.leading===!1&&(a=f);var h=t-(f-a);return i=this,s=arguments,h<=0||h>t?(n&&(clearTimeout(n),n=null),a=f,o=e.apply(i,s),n||(i=s=null)):!n&&r.trailing!==!1&&(n=setTimeout(u,h)),o};return c.cancel=function(){clearTimeout(n),a=0,n=i=s=null},c}function g$(e,t,r){var n,i,s,o,a,u=function(){var f=Al()-i;t>f?n=setTimeout(u,t-f):(n=null,r||(o=e.apply(a,s)),n||(s=a=null))},c=Ji(function(f){return a=this,s=f,i=Al(),n||(n=setTimeout(u,t),r&&(o=e.apply(a,s))),o});return c.cancel=function(){clearTimeout(n),n=s=a=null},c}function v$(e,t){return Rc(t,e)}function Xg(e){return function(){return!e.apply(this,arguments)}}function m$(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}}function y$(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function gA(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}}const _$=Rc(gA,2);function vA(e,t,r){t=ws(t,r);for(var n=fi(e),i,s=0,o=n.length;s<o;s++)if(i=n[s],t(e[i],i,e))return i}function b$(e){return function(t,r,n){r=ws(r,n);for(var i=bs(t),s=e>0?0:i-1;s>=0&&s<i;s+=e)if(r(t[s],s,t))return s;return-1}}const Yg=b$(1),mA=b$(-1);function yA(e,t,r,n){r=ws(r,n,1);for(var i=r(t),s=0,o=bs(e);s<o;){var a=Math.floor((s+o)/2);r(e[a])<i?s=a+1:o=a}return s}function w$(e,t,r){return function(n,i,s){var o=0,a=bs(n);if(typeof s=="number")e>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(r&&s&&a)return s=r(n,i),n[s]===i?s:-1;if(i!==i)return s=t(Nh.call(n,o,a),J2),s>=0?s+o:-1;for(s=e>0?o:a-1;s>=0&&s<a;s+=e)if(n[s]===i)return s;return-1}}const _A=w$(1,Yg,yA),x$=w$(-1,mA);function uh(e,t,r){var n=Fs(e)?Yg:vA,i=n(e,t,r);if(i!==void 0&&i!==-1)return e[i]}function S$(e,t){return uh(e,uc(t))}function Mo(e,t,r){t=Dh(t,r);var n,i;if(Fs(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var s=fi(e);for(n=0,i=s.length;n<i;n++)t(e[s[n]],s[n],e)}return e}function Ga(e,t,r){t=ws(t,r);for(var n=!Fs(e)&&fi(e),i=(n||e).length,s=Array(i),o=0;o<i;o++){var a=n?n[o]:o;s[o]=t(e[a],a,e)}return s}function E$(e){var t=function(r,n,i,s){var o=!Fs(r)&&fi(r),a=(o||r).length,u=e>0?0:a-1;for(s||(i=r[o?o[u]:u],u+=e);u>=0&&u<a;u+=e){var c=o?o[u]:u;i=n(i,r[c],c,r)}return i};return function(r,n,i,s){var o=arguments.length>=3;return t(r,Dh(n,s,4),i,o)}}const fl=E$(1),Np=E$(-1);function xu(e,t,r){var n=[];return t=ws(t,r),Mo(e,function(i,s,o){t(i,s,o)&&n.push(i)}),n}function A$(e,t,r){return xu(e,Xg(ws(t)),r)}function qp(e,t,r){t=ws(t,r);for(var n=!Fs(e)&&fi(e),i=(n||e).length,s=0;s<i;s++){var o=n?n[s]:s;if(!t(e[o],o,e))return!1}return!0}function Dp(e,t,r){t=ws(t,r);for(var n=!Fs(e)&&fi(e),i=(n||e).length,s=0;s<i;s++){var o=n?n[s]:s;if(t(e[o],o,e))return!0}return!1}function so(e,t,r,n){return Fs(e)||(e=Cc(e)),(typeof r!="number"||n)&&(r=0),_A(e,t,r)>=0}const T$=Ji(function(e,t,r){var n,i;return ki(t)?i=t:(t=qh(t),n=t.slice(0,-1),t=t[t.length-1]),Ga(e,function(s){var o=i;if(!o){if(n&&n.length&&(s=lA(s,n)),s==null)return;o=s[t]}return o==null?o:o.apply(s,r)})});function Kg(e,t){return Ga(e,Hg(t))}function P$(e,t){return xu(e,uc(t))}function bA(e,t,r){var n=-1/0,i=-1/0,s,o;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=Fs(e)?e:Cc(e);for(var a=0,u=e.length;a<u;a++)s=e[a],s!=null&&s>n&&(n=s)}else t=ws(t,r),Mo(e,function(c,f,h){o=t(c,f,h),(o>i||o===-1/0&&n===-1/0)&&(n=c,i=o)});return n}function C$(e,t,r){var n=1/0,i=1/0,s,o;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=Fs(e)?e:Cc(e);for(var a=0,u=e.length;a<u;a++)s=e[a],s!=null&&s<n&&(n=s)}else t=ws(t,r),Mo(e,function(c,f,h){o=t(c,f,h),(o<i||o===1/0&&n===1/0)&&(n=c,i=o)});return n}var jce=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function wA(e){return e?Iu(e)?Nh.call(e):$g(e)?e.match(jce):Fs(e)?Ga(e,jg):Cc(e):[]}function xA(e,t,r){if(t==null||r)return Fs(e)||(e=Cc(e)),e[Lp(e.length-1)];var n=wA(e),i=bs(n);t=Math.max(Math.min(t,i),0);for(var s=i-1,o=0;o<t;o++){var a=Lp(o,s),u=n[o];n[o]=n[a],n[a]=u}return n.slice(0,t)}function R$(e){return xA(e,1/0)}function I$(e,t,r){var n=0;return t=ws(t,r),Kg(Ga(e,function(i,s,o){return{value:i,index:n++,criteria:t(i,s,o)}}).sort(function(i,s){var o=i.criteria,a=s.criteria;if(o!==a){if(o>a||o===void 0)return 1;if(o<a||a===void 0)return-1}return i.index-s.index}),"value")}function Zg(e,t){return function(r,n,i){var s=t?[[],[]]:{};return n=ws(n,i),Mo(r,function(o,a){var u=n(o,a,r);e(s,o,u)}),s}}const O$=Zg(function(e,t,r){Ou(e,r)?e[r].push(t):e[r]=[t]}),M$=Zg(function(e,t,r){e[r]=t}),k$=Zg(function(e,t,r){Ou(e,r)?e[r]++:e[r]=1}),L$=Zg(function(e,t,r){e[r?0:1].push(t)},!0);function N$(e){return e==null?0:Fs(e)?e.length:fi(e).length}function Hce(e,t,r){return t in r}const SA=Ji(function(e,t){var r={},n=t[0];if(e==null)return r;ki(n)?(t.length>1&&(n=Dh(n,t[1])),t=Wl(e)):(n=Hce,t=Ic(t,!1,!1),e=Object(e));for(var i=0,s=t.length;i<s;i++){var o=t[i],a=e[o];n(a,o,e)&&(r[o]=a)}return r}),q$=Ji(function(e,t){var r=t[0],n;return ki(r)?(r=Xg(r),t.length>1&&(n=t[1])):(t=Ga(Ic(t,!1,!1),String),r=function(i,s){return!so(t,s)}),SA(e,r,n)});function EA(e,t,r){return Nh.call(e,0,Math.max(0,e.length-(t==null||r?1:t)))}function hl(e,t,r){return e==null||e.length<1?t==null||r?void 0:[]:t==null||r?e[0]:EA(e,e.length-t)}function rc(e,t,r){return Nh.call(e,t==null||r?1:t)}function D$(e,t,r){return e==null||e.length<1?t==null||r?void 0:[]:t==null||r?e[e.length-1]:rc(e,Math.max(0,e.length-t))}function F$(e){return xu(e,Boolean)}function B$(e,t){return Ic(e,t,!1)}const AA=Ji(function(e,t){return t=Ic(t,!0,!0),xu(e,function(r){return!so(t,r)})}),z$=Ji(function(e,t){return AA(e,t)});function ch(e,t,r,n){W2(t)||(n=r,r=t,t=!1),r!=null&&(r=ws(r,n));for(var i=[],s=[],o=0,a=bs(e);o<a;o++){var u=e[o],c=r?r(u,o,e):u;t&&!r?((!o||s!==c)&&i.push(u),s=c):r?so(s,c)||(s.push(c),i.push(u)):so(i,u)||i.push(u)}return i}const V$=Ji(function(e){return ch(Ic(e,!0,!0))});function G$(e){for(var t=[],r=arguments.length,n=0,i=bs(e);n<i;n++){var s=e[n];if(!so(t,s)){var o;for(o=1;o<r&&so(arguments[o],s);o++);o===r&&t.push(s)}}return t}function lh(e){for(var t=e&&bA(e,bs).length||0,r=Array(t),n=0;n<t;n++)r[n]=Kg(e,n);return r}const $$=Ji(lh);function U$(e,t){for(var r={},n=0,i=bs(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r}function j$(e,t,r){t==null&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),s=0;s<n;s++,e+=r)i[s]=e;return i}function H$(e,t){if(t==null||t<1)return[];for(var r=[],n=0,i=e.length;n<i;)r.push(Nh.call(e,n,n+=t));return r}function TA(e,t){return e._chain?sn(t).chain():t}function PA(e){return Mo(ah(e),function(t){var r=sn[t]=e[t];sn.prototype[t]=function(){var n=[this._wrapped];return xce.apply(n,arguments),TA(this,r.apply(sn,n))}}),sn}Mo(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=Gg[e];sn.prototype[e]=function(){var r=this._wrapped;return r!=null&&(t.apply(r,arguments),(e==="shift"||e==="splice")&&r.length===0&&delete r[0]),TA(this,r)}});Mo(["concat","join","slice"],function(e){var t=Gg[e];sn.prototype[e]=function(){var r=this._wrapped;return r!=null&&(r=t.apply(r,arguments)),TA(this,r)}});const Wce=Object.freeze(Object.defineProperty({__proto__:null,VERSION:U2,after:y$,all:qp,allKeys:Wl,any:Dp,assign:El,before:gA,bind:dA,bindAll:f$,chain:c$,chunk:H$,clone:XG,collect:Ga,compact:F$,compose:m$,constant:Q2,contains:so,countBy:k$,create:WG,debounce:g$,default:sn,defaults:uA,defer:d$,delay:pA,detect:uh,difference:AA,drop:rc,each:Mo,escape:n$,every:qp,extend:aA,extendOwn:El,filter:xu,find:uh,findIndex:Yg,findKey:vA,findLastIndex:mA,findWhere:S$,first:hl,flatten:B$,foldl:fl,foldr:Np,forEach:Mo,functions:ah,get:fA,groupBy:O$,has:KG,head:hl,identity:jg,include:so,includes:so,indexBy:M$,indexOf:_A,initial:EA,inject:fl,intersection:G$,invert:sA,invoke:T$,isArguments:Ug,isArray:Iu,isArrayBuffer:K2,isBoolean:W2,isDataView:oh,isDate:AG,isElement:EG,isEmpty:NG,isEqual:DG,isError:PG,isFinite:OG,isFunction:ki,isMap:VG,isMatch:tA,isNaN:J2,isNull:SG,isNumber:X2,isObject:Ru,isRegExp:TG,isSet:$G,isString:$g,isSymbol:Y2,isTypedArray:eA,isUndefined:H2,isWeakMap:GG,isWeakSet:UG,iteratee:Wg,keys:fi,last:D$,lastIndexOf:x$,map:Ga,mapObject:JG,matcher:uc,matches:uc,max:bA,memoize:h$,methods:ah,min:C$,mixin:PA,negate:Xg,noop:hA,now:Al,object:U$,omit:q$,once:_$,pairs:jG,partial:Rc,partition:L$,pick:SA,pluck:Kg,property:Hg,propertyOf:QG,random:Lp,range:j$,reduce:fl,reduceRight:Np,reject:A$,rest:rc,restArguments:Ji,result:a$,sample:xA,select:xu,shuffle:R$,size:N$,some:Dp,sortBy:I$,sortedIndex:yA,tail:rc,take:hl,tap:YG,template:o$,templateSettings:s$,throttle:p$,times:e$,toArray:wA,toPath:cA,transpose:lh,unescape:i$,union:V$,uniq:ch,unique:ch,uniqueId:u$,unzip:lh,values:Cc,where:P$,without:z$,wrap:v$,zip:$$},Symbol.toStringTag,{value:"Module"}));var tE=PA(Wce);tE._=tE;const Xce=Object.freeze(Object.defineProperty({__proto__:null,VERSION:U2,after:y$,all:qp,allKeys:Wl,any:Dp,assign:El,before:gA,bind:dA,bindAll:f$,chain:c$,chunk:H$,clone:XG,collect:Ga,compact:F$,compose:m$,constant:Q2,contains:so,countBy:k$,create:WG,debounce:g$,default:tE,defaults:uA,defer:d$,delay:pA,detect:uh,difference:AA,drop:rc,each:Mo,escape:n$,every:qp,extend:aA,extendOwn:El,filter:xu,find:uh,findIndex:Yg,findKey:vA,findLastIndex:mA,findWhere:S$,first:hl,flatten:B$,foldl:fl,foldr:Np,forEach:Mo,functions:ah,get:fA,groupBy:O$,has:KG,head:hl,identity:jg,include:so,includes:so,indexBy:M$,indexOf:_A,initial:EA,inject:fl,intersection:G$,invert:sA,invoke:T$,isArguments:Ug,isArray:Iu,isArrayBuffer:K2,isBoolean:W2,isDataView:oh,isDate:AG,isElement:EG,isEmpty:NG,isEqual:DG,isError:PG,isFinite:OG,isFunction:ki,isMap:VG,isMatch:tA,isNaN:J2,isNull:SG,isNumber:X2,isObject:Ru,isRegExp:TG,isSet:$G,isString:$g,isSymbol:Y2,isTypedArray:eA,isUndefined:H2,isWeakMap:GG,isWeakSet:UG,iteratee:Wg,keys:fi,last:D$,lastIndexOf:x$,map:Ga,mapObject:JG,matcher:uc,matches:uc,max:bA,memoize:h$,methods:ah,min:C$,mixin:PA,negate:Xg,noop:hA,now:Al,object:U$,omit:q$,once:_$,pairs:jG,partial:Rc,partition:L$,pick:SA,pluck:Kg,property:Hg,propertyOf:QG,random:Lp,range:j$,reduce:fl,reduceRight:Np,reject:A$,rest:rc,restArguments:Ji,result:a$,sample:xA,select:xu,shuffle:R$,size:N$,some:Dp,sortBy:I$,sortedIndex:yA,tail:rc,take:hl,tap:YG,template:o$,templateSettings:s$,throttle:p$,times:e$,toArray:wA,toPath:cA,transpose:lh,unescape:i$,union:V$,uniq:ch,unique:ch,uniqueId:u$,unzip:lh,values:Cc,where:P$,without:z$,wrap:v$,zip:$$},Symbol.toStringTag,{value:"Module"})),Yce=Wte(Xce);var vp={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var Kce=vp.exports,o5;function W$(){return o5||(o5=1,function(e){(function(t,r){e.exports=t.document?r(t,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return r(n)}})(typeof window<"u"?window:Kce,function(t,r){var n=[],i=Object.getPrototypeOf,s=n.slice,o=n.flat?function(v){return n.flat.call(v)}:function(v){return n.concat.apply([],v)},a=n.push,u=n.indexOf,c={},f=c.toString,h=c.hasOwnProperty,g=h.toString,y=g.call(Object),m={},_=function(x){return typeof x=="function"&&typeof x.nodeType!="number"&&typeof x.item!="function"},b=function(x){return x!=null&&x===x.window},S=t.document,E={type:!0,src:!0,nonce:!0,noModule:!0};function A(v,x,C){C=C||S;var k,D,F=C.createElement("script");if(F.text=v,x)for(k in E)D=x[k]||x.getAttribute&&x.getAttribute(k),D&&F.setAttribute(k,D);C.head.appendChild(F).parentNode.removeChild(F)}function T(v){return v==null?v+"":typeof v=="object"||typeof v=="function"?c[f.call(v)]||"object":typeof v}var I="3.7.1",q=/HTML$/i,p=function(v,x){return new p.fn.init(v,x)};p.fn=p.prototype={jquery:I,constructor:p,length:0,toArray:function(){return s.call(this)},get:function(v){return v==null?s.call(this):v<0?this[v+this.length]:this[v]},pushStack:function(v){var x=p.merge(this.constructor(),v);return x.prevObject=this,x},each:function(v){return p.each(this,v)},map:function(v){return this.pushStack(p.map(this,function(x,C){return v.call(x,C,x)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(p.grep(this,function(v,x){return(x+1)%2}))},odd:function(){return this.pushStack(p.grep(this,function(v,x){return x%2}))},eq:function(v){var x=this.length,C=+v+(v<0?x:0);return this.pushStack(C>=0&&C<x?[this[C]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},p.extend=p.fn.extend=function(){var v,x,C,k,D,F,$=arguments[0]||{},he=1,se=arguments.length,Ee=!1;for(typeof $=="boolean"&&(Ee=$,$=arguments[he]||{},he++),typeof $!="object"&&!_($)&&($={}),he===se&&($=this,he--);he<se;he++)if((v=arguments[he])!=null)for(x in v)k=v[x],!(x==="__proto__"||$===k)&&(Ee&&k&&(p.isPlainObject(k)||(D=Array.isArray(k)))?(C=$[x],D&&!Array.isArray(C)?F=[]:!D&&!p.isPlainObject(C)?F={}:F=C,D=!1,$[x]=p.extend(Ee,F,k)):k!==void 0&&($[x]=k));return $},p.extend({expando:"jQuery"+(I+Math.random()).replace(/\D/g,""),isReady:!0,error:function(v){throw new Error(v)},noop:function(){},isPlainObject:function(v){var x,C;return!v||f.call(v)!=="[object Object]"?!1:(x=i(v),x?(C=h.call(x,"constructor")&&x.constructor,typeof C=="function"&&g.call(C)===y):!0)},isEmptyObject:function(v){var x;for(x in v)return!1;return!0},globalEval:function(v,x,C){A(v,{nonce:x&&x.nonce},C)},each:function(v,x){var C,k=0;if(P(v))for(C=v.length;k<C&&x.call(v[k],k,v[k])!==!1;k++);else for(k in v)if(x.call(v[k],k,v[k])===!1)break;return v},text:function(v){var x,C="",k=0,D=v.nodeType;if(!D)for(;x=v[k++];)C+=p.text(x);return D===1||D===11?v.textContent:D===9?v.documentElement.textContent:D===3||D===4?v.nodeValue:C},makeArray:function(v,x){var C=x||[];return v!=null&&(P(Object(v))?p.merge(C,typeof v=="string"?[v]:v):a.call(C,v)),C},inArray:function(v,x,C){return x==null?-1:u.call(x,v,C)},isXMLDoc:function(v){var x=v&&v.namespaceURI,C=v&&(v.ownerDocument||v).documentElement;return!q.test(x||C&&C.nodeName||"HTML")},merge:function(v,x){for(var C=+x.length,k=0,D=v.length;k<C;k++)v[D++]=x[k];return v.length=D,v},grep:function(v,x,C){for(var k,D=[],F=0,$=v.length,he=!C;F<$;F++)k=!x(v[F],F),k!==he&&D.push(v[F]);return D},map:function(v,x,C){var k,D,F=0,$=[];if(P(v))for(k=v.length;F<k;F++)D=x(v[F],F,C),D!=null&&$.push(D);else for(F in v)D=x(v[F],F,C),D!=null&&$.push(D);return o($)},guid:1,support:m}),typeof Symbol=="function"&&(p.fn[Symbol.iterator]=n[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(v,x){c["[object "+x+"]"]=x.toLowerCase()});function P(v){var x=!!v&&"length"in v&&v.length,C=T(v);return _(v)||b(v)?!1:C==="array"||x===0||typeof x=="number"&&x>0&&x-1 in v}function O(v,x){return v.nodeName&&v.nodeName.toLowerCase()===x.toLowerCase()}var N=n.pop,V=n.sort,W=n.splice,G="[\\x20\\t\\r\\n\\f]",ee=new RegExp("^"+G+"+|((?:^|[^\\\\])(?:\\\\.)*)"+G+"+$","g");p.contains=function(v,x){var C=x&&x.parentNode;return v===C||!!(C&&C.nodeType===1&&(v.contains?v.contains(C):v.compareDocumentPosition&&v.compareDocumentPosition(C)&16))};var ae=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function K(v,x){return x?v==="\0"?"ï¿½":v.slice(0,-1)+"\\"+v.charCodeAt(v.length-1).toString(16)+" ":"\\"+v}p.escapeSelector=function(v){return(v+"").replace(ae,K)};var U=S,j=a;(function(){var v,x,C,k,D,F=j,$,he,se,Ee,De,Ge=p.expando,Me=0,ut=0,St=Bu(),ar=Bu(),sr=Bu(),ai=Bu(),kn=function(ie,_e){return ie===_e&&(D=!0),0},Bs="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",zs="(?:\\\\[\\da-fA-F]{1,6}"+G+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Tr="\\["+G+"*("+zs+")(?:"+G+"*([*^$|!~]?=)"+G+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+zs+"))|)"+G+"*\\]",Uo=":("+zs+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Tr+")*)|.*)\\)|)",Pr=new RegExp(G+"+","g"),un=new RegExp("^"+G+"*,"+G+"*"),qu=new RegExp("^"+G+"*([>+~]|"+G+")"+G+"*"),Fc=new RegExp(G+"|>"),Ss=new RegExp(Uo),wa=new RegExp("^"+zs+"$"),ns={ID:new RegExp("^#("+zs+")"),CLASS:new RegExp("^\\.("+zs+")"),TAG:new RegExp("^("+zs+"|[*])"),ATTR:new RegExp("^"+Tr),PSEUDO:new RegExp("^"+Uo),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+G+"*(even|odd|(([+-]|)(\\d*)n|)"+G+"*(?:([+-]|)"+G+"*(\\d+)|))"+G+"*\\)|)","i"),bool:new RegExp("^(?:"+Bs+")$","i"),needsContext:new RegExp("^"+G+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+G+"*((?:-\\d)?\\d*)"+G+"*\\)|)(?=[^-]|$)","i")},vo=/^(?:input|select|textarea|button)$/i,jo=/^h\d$/i,Pi=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Du=/[+~]/,mo=new RegExp("\\\\[\\da-fA-F]{1,6}"+G+"?|\\\\([^\\r\\n\\f])","g"),Vs=function(ie,_e){var Oe="0x"+ie.slice(1)-65536;return _e||(Oe<0?String.fromCharCode(Oe+65536):String.fromCharCode(Oe>>10|55296,Oe&1023|56320))},Di=function(){Ho()},uf=xa(function(ie){return ie.disabled===!0&&O(ie,"fieldset")},{dir:"parentNode",next:"legend"});function Fu(){try{return $.activeElement}catch{}}try{F.apply(n=s.call(U.childNodes),U.childNodes),n[U.childNodes.length].nodeType}catch{F={apply:function(_e,Oe){j.apply(_e,s.call(Oe))},call:function(_e){j.apply(_e,s.call(arguments,1))}}}function Yr(ie,_e,Oe,ke){var Q,me,ge,Ue,Qe,At,Pt,wt=_e&&_e.ownerDocument,fr=_e?_e.nodeType:9;if(Oe=Oe||[],typeof ie!="string"||!ie||fr!==1&&fr!==9&&fr!==11)return Oe;if(!ke&&(Ho(_e),_e=_e||$,se)){if(fr!==11&&(Qe=Pi.exec(ie)))if(Q=Qe[1]){if(fr===9)if(ge=_e.getElementById(Q)){if(ge.id===Q)return F.call(Oe,ge),Oe}else return Oe;else if(wt&&(ge=wt.getElementById(Q))&&Yr.contains(_e,ge)&&ge.id===Q)return F.call(Oe,ge),Oe}else{if(Qe[2])return F.apply(Oe,_e.getElementsByTagName(ie)),Oe;if((Q=Qe[3])&&_e.getElementsByClassName)return F.apply(Oe,_e.getElementsByClassName(Q)),Oe}if(!ai[ie+" "]&&(!Ee||!Ee.test(ie))){if(Pt=ie,wt=_e,fr===1&&(Fc.test(ie)||qu.test(ie))){for(wt=Du.test(ie)&&cf(_e.parentNode)||_e,(wt!=_e||!m.scope)&&((Ue=_e.getAttribute("id"))?Ue=p.escapeSelector(Ue):_e.setAttribute("id",Ue=Ge)),At=Qa(ie),me=At.length;me--;)At[me]=(Ue?"#"+Ue:":scope")+" "+As(At[me]);Pt=At.join(",")}try{return F.apply(Oe,wt.querySelectorAll(Pt)),Oe}catch{ai(ie,!0)}finally{Ue===Ge&&_e.removeAttribute("id")}}}return cd(ie.replace(ee,"$1"),_e,Oe,ke)}function Bu(){var ie=[];function _e(Oe,ke){return ie.push(Oe+" ")>x.cacheLength&&delete _e[ie.shift()],_e[Oe+" "]=ke}return _e}function Es(ie){return ie[Ge]=!0,ie}function Ja(ie){var _e=$.createElement("fieldset");try{return!!ie(_e)}catch{return!1}finally{_e.parentNode&&_e.parentNode.removeChild(_e),_e=null}}function Sv(ie){return function(_e){return O(_e,"input")&&_e.type===ie}}function Ev(ie){return function(_e){return(O(_e,"input")||O(_e,"button"))&&_e.type===ie}}function ad(ie){return function(_e){return"form"in _e?_e.parentNode&&_e.disabled===!1?"label"in _e?"label"in _e.parentNode?_e.parentNode.disabled===ie:_e.disabled===ie:_e.isDisabled===ie||_e.isDisabled!==!ie&&uf(_e)===ie:_e.disabled===ie:"label"in _e?_e.disabled===ie:!1}}function is(ie){return Es(function(_e){return _e=+_e,Es(function(Oe,ke){for(var Q,me=ie([],Oe.length,_e),ge=me.length;ge--;)Oe[Q=me[ge]]&&(Oe[Q]=!(ke[Q]=Oe[Q]))})})}function cf(ie){return ie&&typeof ie.getElementsByTagName<"u"&&ie}function Ho(ie){var _e,Oe=ie?ie.ownerDocument||ie:U;return Oe==$||Oe.nodeType!==9||!Oe.documentElement||($=Oe,he=$.documentElement,se=!p.isXMLDoc($),De=he.matches||he.webkitMatchesSelector||he.msMatchesSelector,he.msMatchesSelector&&U!=$&&(_e=$.defaultView)&&_e.top!==_e&&_e.addEventListener("unload",Di),m.getById=Ja(function(ke){return he.appendChild(ke).id=p.expando,!$.getElementsByName||!$.getElementsByName(p.expando).length}),m.disconnectedMatch=Ja(function(ke){return De.call(ke,"*")}),m.scope=Ja(function(){return $.querySelectorAll(":scope")}),m.cssHas=Ja(function(){try{return $.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),m.getById?(x.filter.ID=function(ke){var Q=ke.replace(mo,Vs);return function(me){return me.getAttribute("id")===Q}},x.find.ID=function(ke,Q){if(typeof Q.getElementById<"u"&&se){var me=Q.getElementById(ke);return me?[me]:[]}}):(x.filter.ID=function(ke){var Q=ke.replace(mo,Vs);return function(me){var ge=typeof me.getAttributeNode<"u"&&me.getAttributeNode("id");return ge&&ge.value===Q}},x.find.ID=function(ke,Q){if(typeof Q.getElementById<"u"&&se){var me,ge,Ue,Qe=Q.getElementById(ke);if(Qe){if(me=Qe.getAttributeNode("id"),me&&me.value===ke)return[Qe];for(Ue=Q.getElementsByName(ke),ge=0;Qe=Ue[ge++];)if(me=Qe.getAttributeNode("id"),me&&me.value===ke)return[Qe]}return[]}}),x.find.TAG=function(ke,Q){return typeof Q.getElementsByTagName<"u"?Q.getElementsByTagName(ke):Q.querySelectorAll(ke)},x.find.CLASS=function(ke,Q){if(typeof Q.getElementsByClassName<"u"&&se)return Q.getElementsByClassName(ke)},Ee=[],Ja(function(ke){var Q;he.appendChild(ke).innerHTML="<a id='"+Ge+"' href='' disabled='disabled'></a><select id='"+Ge+"-\r\\' disabled='disabled'><option selected=''></option></select>",ke.querySelectorAll("[selected]").length||Ee.push("\\["+G+"*(?:value|"+Bs+")"),ke.querySelectorAll("[id~="+Ge+"-]").length||Ee.push("~="),ke.querySelectorAll("a#"+Ge+"+*").length||Ee.push(".#.+[+~]"),ke.querySelectorAll(":checked").length||Ee.push(":checked"),Q=$.createElement("input"),Q.setAttribute("type","hidden"),ke.appendChild(Q).setAttribute("name","D"),he.appendChild(ke).disabled=!0,ke.querySelectorAll(":disabled").length!==2&&Ee.push(":enabled",":disabled"),Q=$.createElement("input"),Q.setAttribute("name",""),ke.appendChild(Q),ke.querySelectorAll("[name='']").length||Ee.push("\\["+G+"*name"+G+"*="+G+`*(?:''|"")`)}),m.cssHas||Ee.push(":has"),Ee=Ee.length&&new RegExp(Ee.join("|")),kn=function(ke,Q){if(ke===Q)return D=!0,0;var me=!ke.compareDocumentPosition-!Q.compareDocumentPosition;return me||(me=(ke.ownerDocument||ke)==(Q.ownerDocument||Q)?ke.compareDocumentPosition(Q):1,me&1||!m.sortDetached&&Q.compareDocumentPosition(ke)===me?ke===$||ke.ownerDocument==U&&Yr.contains(U,ke)?-1:Q===$||Q.ownerDocument==U&&Yr.contains(U,Q)?1:k?u.call(k,ke)-u.call(k,Q):0:me&4?-1:1)}),$}Yr.matches=function(ie,_e){return Yr(ie,null,null,_e)},Yr.matchesSelector=function(ie,_e){if(Ho(ie),se&&!ai[_e+" "]&&(!Ee||!Ee.test(_e)))try{var Oe=De.call(ie,_e);if(Oe||m.disconnectedMatch||ie.document&&ie.document.nodeType!==11)return Oe}catch{ai(_e,!0)}return Yr(_e,$,null,[ie]).length>0},Yr.contains=function(ie,_e){return(ie.ownerDocument||ie)!=$&&Ho(ie),p.contains(ie,_e)},Yr.attr=function(ie,_e){(ie.ownerDocument||ie)!=$&&Ho(ie);var Oe=x.attrHandle[_e.toLowerCase()],ke=Oe&&h.call(x.attrHandle,_e.toLowerCase())?Oe(ie,_e,!se):void 0;return ke!==void 0?ke:ie.getAttribute(_e)},Yr.error=function(ie){throw new Error("Syntax error, unrecognized expression: "+ie)},p.uniqueSort=function(ie){var _e,Oe=[],ke=0,Q=0;if(D=!m.sortStable,k=!m.sortStable&&s.call(ie,0),V.call(ie,kn),D){for(;_e=ie[Q++];)_e===ie[Q]&&(ke=Oe.push(Q));for(;ke--;)W.call(ie,Oe[ke],1)}return k=null,ie},p.fn.uniqueSort=function(){return this.pushStack(p.uniqueSort(s.apply(this)))},x=p.expr={cacheLength:50,createPseudo:Es,match:ns,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ie){return ie[1]=ie[1].replace(mo,Vs),ie[3]=(ie[3]||ie[4]||ie[5]||"").replace(mo,Vs),ie[2]==="~="&&(ie[3]=" "+ie[3]+" "),ie.slice(0,4)},CHILD:function(ie){return ie[1]=ie[1].toLowerCase(),ie[1].slice(0,3)==="nth"?(ie[3]||Yr.error(ie[0]),ie[4]=+(ie[4]?ie[5]+(ie[6]||1):2*(ie[3]==="even"||ie[3]==="odd")),ie[5]=+(ie[7]+ie[8]||ie[3]==="odd")):ie[3]&&Yr.error(ie[0]),ie},PSEUDO:function(ie){var _e,Oe=!ie[6]&&ie[2];return ns.CHILD.test(ie[0])?null:(ie[3]?ie[2]=ie[4]||ie[5]||"":Oe&&Ss.test(Oe)&&(_e=Qa(Oe,!0))&&(_e=Oe.indexOf(")",Oe.length-_e)-Oe.length)&&(ie[0]=ie[0].slice(0,_e),ie[2]=Oe.slice(0,_e)),ie.slice(0,3))}},filter:{TAG:function(ie){var _e=ie.replace(mo,Vs).toLowerCase();return ie==="*"?function(){return!0}:function(Oe){return O(Oe,_e)}},CLASS:function(ie){var _e=St[ie+" "];return _e||(_e=new RegExp("(^|"+G+")"+ie+"("+G+"|$)"))&&St(ie,function(Oe){return _e.test(typeof Oe.className=="string"&&Oe.className||typeof Oe.getAttribute<"u"&&Oe.getAttribute("class")||"")})},ATTR:function(ie,_e,Oe){return function(ke){var Q=Yr.attr(ke,ie);return Q==null?_e==="!=":_e?(Q+="",_e==="="?Q===Oe:_e==="!="?Q!==Oe:_e==="^="?Oe&&Q.indexOf(Oe)===0:_e==="*="?Oe&&Q.indexOf(Oe)>-1:_e==="$="?Oe&&Q.slice(-Oe.length)===Oe:_e==="~="?(" "+Q.replace(Pr," ")+" ").indexOf(Oe)>-1:_e==="|="?Q===Oe||Q.slice(0,Oe.length+1)===Oe+"-":!1):!0}},CHILD:function(ie,_e,Oe,ke,Q){var me=ie.slice(0,3)!=="nth",ge=ie.slice(-4)!=="last",Ue=_e==="of-type";return ke===1&&Q===0?function(Qe){return!!Qe.parentNode}:function(Qe,At,Pt){var wt,fr,jt,_r,ui,vi=me!==ge?"nextSibling":"previousSibling",ci=Qe.parentNode,Bi=Ue&&Qe.nodeName.toLowerCase(),yo=!Pt&&!Ue,ir=!1;if(ci){if(me){for(;vi;){for(jt=Qe;jt=jt[vi];)if(Ue?O(jt,Bi):jt.nodeType===1)return!1;ui=vi=ie==="only"&&!ui&&"nextSibling"}return!0}if(ui=[ge?ci.firstChild:ci.lastChild],ge&&yo){for(fr=ci[Ge]||(ci[Ge]={}),wt=fr[ie]||[],_r=wt[0]===Me&&wt[1],ir=_r&&wt[2],jt=_r&&ci.childNodes[_r];jt=++_r&&jt&&jt[vi]||(ir=_r=0)||ui.pop();)if(jt.nodeType===1&&++ir&&jt===Qe){fr[ie]=[Me,_r,ir];break}}else if(yo&&(fr=Qe[Ge]||(Qe[Ge]={}),wt=fr[ie]||[],_r=wt[0]===Me&&wt[1],ir=_r),ir===!1)for(;(jt=++_r&&jt&&jt[vi]||(ir=_r=0)||ui.pop())&&!((Ue?O(jt,Bi):jt.nodeType===1)&&++ir&&(yo&&(fr=jt[Ge]||(jt[Ge]={}),fr[ie]=[Me,ir]),jt===Qe)););return ir-=Q,ir===ke||ir%ke===0&&ir/ke>=0}}},PSEUDO:function(ie,_e){var Oe,ke=x.pseudos[ie]||x.setFilters[ie.toLowerCase()]||Yr.error("unsupported pseudo: "+ie);return ke[Ge]?ke(_e):ke.length>1?(Oe=[ie,ie,"",_e],x.setFilters.hasOwnProperty(ie.toLowerCase())?Es(function(Q,me){for(var ge,Ue=ke(Q,_e),Qe=Ue.length;Qe--;)ge=u.call(Q,Ue[Qe]),Q[ge]=!(me[ge]=Ue[Qe])}):function(Q){return ke(Q,0,Oe)}):ke}},pseudos:{not:Es(function(ie){var _e=[],Oe=[],ke=ff(ie.replace(ee,"$1"));return ke[Ge]?Es(function(Q,me,ge,Ue){for(var Qe,At=ke(Q,null,Ue,[]),Pt=Q.length;Pt--;)(Qe=At[Pt])&&(Q[Pt]=!(me[Pt]=Qe))}):function(Q,me,ge){return _e[0]=Q,ke(_e,null,ge,Oe),_e[0]=null,!Oe.pop()}}),has:Es(function(ie){return function(_e){return Yr(ie,_e).length>0}}),contains:Es(function(ie){return ie=ie.replace(mo,Vs),function(_e){return(_e.textContent||p.text(_e)).indexOf(ie)>-1}}),lang:Es(function(ie){return wa.test(ie||"")||Yr.error("unsupported lang: "+ie),ie=ie.replace(mo,Vs).toLowerCase(),function(_e){var Oe;do if(Oe=se?_e.lang:_e.getAttribute("xml:lang")||_e.getAttribute("lang"))return Oe=Oe.toLowerCase(),Oe===ie||Oe.indexOf(ie+"-")===0;while((_e=_e.parentNode)&&_e.nodeType===1);return!1}}),target:function(ie){var _e=t.location&&t.location.hash;return _e&&_e.slice(1)===ie.id},root:function(ie){return ie===he},focus:function(ie){return ie===Fu()&&$.hasFocus()&&!!(ie.type||ie.href||~ie.tabIndex)},enabled:ad(!1),disabled:ad(!0),checked:function(ie){return O(ie,"input")&&!!ie.checked||O(ie,"option")&&!!ie.selected},selected:function(ie){return ie.parentNode&&ie.parentNode.selectedIndex,ie.selected===!0},empty:function(ie){for(ie=ie.firstChild;ie;ie=ie.nextSibling)if(ie.nodeType<6)return!1;return!0},parent:function(ie){return!x.pseudos.empty(ie)},header:function(ie){return jo.test(ie.nodeName)},input:function(ie){return vo.test(ie.nodeName)},button:function(ie){return O(ie,"input")&&ie.type==="button"||O(ie,"button")},text:function(ie){var _e;return O(ie,"input")&&ie.type==="text"&&((_e=ie.getAttribute("type"))==null||_e.toLowerCase()==="text")},first:is(function(){return[0]}),last:is(function(ie,_e){return[_e-1]}),eq:is(function(ie,_e,Oe){return[Oe<0?Oe+_e:Oe]}),even:is(function(ie,_e){for(var Oe=0;Oe<_e;Oe+=2)ie.push(Oe);return ie}),odd:is(function(ie,_e){for(var Oe=1;Oe<_e;Oe+=2)ie.push(Oe);return ie}),lt:is(function(ie,_e,Oe){var ke;for(Oe<0?ke=Oe+_e:Oe>_e?ke=_e:ke=Oe;--ke>=0;)ie.push(ke);return ie}),gt:is(function(ie,_e,Oe){for(var ke=Oe<0?Oe+_e:Oe;++ke<_e;)ie.push(ke);return ie})}},x.pseudos.nth=x.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[v]=Sv(v);for(v in{submit:!0,reset:!0})x.pseudos[v]=Ev(v);function Bc(){}Bc.prototype=x.filters=x.pseudos,x.setFilters=new Bc;function Qa(ie,_e){var Oe,ke,Q,me,ge,Ue,Qe,At=ar[ie+" "];if(At)return _e?0:At.slice(0);for(ge=ie,Ue=[],Qe=x.preFilter;ge;){(!Oe||(ke=un.exec(ge)))&&(ke&&(ge=ge.slice(ke[0].length)||ge),Ue.push(Q=[])),Oe=!1,(ke=qu.exec(ge))&&(Oe=ke.shift(),Q.push({value:Oe,type:ke[0].replace(ee," ")}),ge=ge.slice(Oe.length));for(me in x.filter)(ke=ns[me].exec(ge))&&(!Qe[me]||(ke=Qe[me](ke)))&&(Oe=ke.shift(),Q.push({value:Oe,type:me,matches:ke}),ge=ge.slice(Oe.length));if(!Oe)break}return _e?ge.length:ge?Yr.error(ie):ar(ie,Ue).slice(0)}function As(ie){for(var _e=0,Oe=ie.length,ke="";_e<Oe;_e++)ke+=ie[_e].value;return ke}function xa(ie,_e,Oe){var ke=_e.dir,Q=_e.next,me=Q||ke,ge=Oe&&me==="parentNode",Ue=ut++;return _e.first?function(Qe,At,Pt){for(;Qe=Qe[ke];)if(Qe.nodeType===1||ge)return ie(Qe,At,Pt);return!1}:function(Qe,At,Pt){var wt,fr,jt=[Me,Ue];if(Pt){for(;Qe=Qe[ke];)if((Qe.nodeType===1||ge)&&ie(Qe,At,Pt))return!0}else for(;Qe=Qe[ke];)if(Qe.nodeType===1||ge)if(fr=Qe[Ge]||(Qe[Ge]={}),Q&&O(Qe,Q))Qe=Qe[ke]||Qe;else{if((wt=fr[me])&&wt[0]===Me&&wt[1]===Ue)return jt[2]=wt[2];if(fr[me]=jt,jt[2]=ie(Qe,At,Pt))return!0}return!1}}function lf(ie){return ie.length>1?function(_e,Oe,ke){for(var Q=ie.length;Q--;)if(!ie[Q](_e,Oe,ke))return!1;return!0}:ie[0]}function Av(ie,_e,Oe){for(var ke=0,Q=_e.length;ke<Q;ke++)Yr(ie,_e[ke],Oe);return Oe}function zc(ie,_e,Oe,ke,Q){for(var me,ge=[],Ue=0,Qe=ie.length,At=_e!=null;Ue<Qe;Ue++)(me=ie[Ue])&&(!Oe||Oe(me,ke,Q))&&(ge.push(me),At&&_e.push(Ue));return ge}function Wo(ie,_e,Oe,ke,Q,me){return ke&&!ke[Ge]&&(ke=Wo(ke)),Q&&!Q[Ge]&&(Q=Wo(Q,me)),Es(function(ge,Ue,Qe,At){var Pt,wt,fr,jt,_r=[],ui=[],vi=Ue.length,ci=ge||Av(_e||"*",Qe.nodeType?[Qe]:Qe,[]),Bi=ie&&(ge||!_e)?zc(ci,_r,ie,Qe,At):ci;if(Oe?(jt=Q||(ge?ie:vi||ke)?[]:Ue,Oe(Bi,jt,Qe,At)):jt=Bi,ke)for(Pt=zc(jt,ui),ke(Pt,[],Qe,At),wt=Pt.length;wt--;)(fr=Pt[wt])&&(jt[ui[wt]]=!(Bi[ui[wt]]=fr));if(ge){if(Q||ie){if(Q){for(Pt=[],wt=jt.length;wt--;)(fr=jt[wt])&&Pt.push(Bi[wt]=fr);Q(null,jt=[],Pt,At)}for(wt=jt.length;wt--;)(fr=jt[wt])&&(Pt=Q?u.call(ge,fr):_r[wt])>-1&&(ge[Pt]=!(Ue[Pt]=fr))}}else jt=zc(jt===Ue?jt.splice(vi,jt.length):jt),Q?Q(null,Ue,jt,At):F.apply(Ue,jt)})}function Fi(ie){for(var _e,Oe,ke,Q=ie.length,me=x.relative[ie[0].type],ge=me||x.relative[" "],Ue=me?1:0,Qe=xa(function(wt){return wt===_e},ge,!0),At=xa(function(wt){return u.call(_e,wt)>-1},ge,!0),Pt=[function(wt,fr,jt){var _r=!me&&(jt||fr!=C)||((_e=fr).nodeType?Qe(wt,fr,jt):At(wt,fr,jt));return _e=null,_r}];Ue<Q;Ue++)if(Oe=x.relative[ie[Ue].type])Pt=[xa(lf(Pt),Oe)];else{if(Oe=x.filter[ie[Ue].type].apply(null,ie[Ue].matches),Oe[Ge]){for(ke=++Ue;ke<Q&&!x.relative[ie[ke].type];ke++);return Wo(Ue>1&&lf(Pt),Ue>1&&As(ie.slice(0,Ue-1).concat({value:ie[Ue-2].type===" "?"*":""})).replace(ee,"$1"),Oe,Ue<ke&&Fi(ie.slice(Ue,ke)),ke<Q&&Fi(ie=ie.slice(ke)),ke<Q&&As(ie))}Pt.push(Oe)}return lf(Pt)}function ud(ie,_e){var Oe=_e.length>0,ke=ie.length>0,Q=function(me,ge,Ue,Qe,At){var Pt,wt,fr,jt=0,_r="0",ui=me&&[],vi=[],ci=C,Bi=me||ke&&x.find.TAG("*",At),yo=Me+=ci==null?1:Math.random()||.1,ir=Bi.length;for(At&&(C=ge==$||ge||At);_r!==ir&&(Pt=Bi[_r])!=null;_r++){if(ke&&Pt){for(wt=0,!ge&&Pt.ownerDocument!=$&&(Ho(Pt),Ue=!se);fr=ie[wt++];)if(fr(Pt,ge||$,Ue)){F.call(Qe,Pt);break}At&&(Me=yo)}Oe&&((Pt=!fr&&Pt)&&jt--,me&&ui.push(Pt))}if(jt+=_r,Oe&&_r!==jt){for(wt=0;fr=_e[wt++];)fr(ui,vi,ge,Ue);if(me){if(jt>0)for(;_r--;)ui[_r]||vi[_r]||(vi[_r]=N.call(Qe));vi=zc(vi)}F.apply(Qe,vi),At&&!me&&vi.length>0&&jt+_e.length>1&&p.uniqueSort(Qe)}return At&&(Me=yo,C=ci),ui};return Oe?Es(Q):Q}function ff(ie,_e){var Oe,ke=[],Q=[],me=sr[ie+" "];if(!me){for(_e||(_e=Qa(ie)),Oe=_e.length;Oe--;)me=Fi(_e[Oe]),me[Ge]?ke.push(me):Q.push(me);me=sr(ie,ud(Q,ke)),me.selector=ie}return me}function cd(ie,_e,Oe,ke){var Q,me,ge,Ue,Qe,At=typeof ie=="function"&&ie,Pt=!ke&&Qa(ie=At.selector||ie);if(Oe=Oe||[],Pt.length===1){if(me=Pt[0]=Pt[0].slice(0),me.length>2&&(ge=me[0]).type==="ID"&&_e.nodeType===9&&se&&x.relative[me[1].type]){if(_e=(x.find.ID(ge.matches[0].replace(mo,Vs),_e)||[])[0],_e)At&&(_e=_e.parentNode);else return Oe;ie=ie.slice(me.shift().value.length)}for(Q=ns.needsContext.test(ie)?0:me.length;Q--&&(ge=me[Q],!x.relative[Ue=ge.type]);)if((Qe=x.find[Ue])&&(ke=Qe(ge.matches[0].replace(mo,Vs),Du.test(me[0].type)&&cf(_e.parentNode)||_e))){if(me.splice(Q,1),ie=ke.length&&As(me),!ie)return F.apply(Oe,ke),Oe;break}}return(At||ff(ie,Pt))(ke,_e,!se,Oe,!_e||Du.test(ie)&&cf(_e.parentNode)||_e),Oe}m.sortStable=Ge.split("").sort(kn).join("")===Ge,Ho(),m.sortDetached=Ja(function(ie){return ie.compareDocumentPosition($.createElement("fieldset"))&1}),p.find=Yr,p.expr[":"]=p.expr.pseudos,p.unique=p.uniqueSort,Yr.compile=ff,Yr.select=cd,Yr.setDocument=Ho,Yr.tokenize=Qa,Yr.escape=p.escapeSelector,Yr.getText=p.text,Yr.isXML=p.isXMLDoc,Yr.selectors=p.expr,Yr.support=p.support,Yr.uniqueSort=p.uniqueSort})();var J=function(v,x,C){for(var k=[],D=C!==void 0;(v=v[x])&&v.nodeType!==9;)if(v.nodeType===1){if(D&&p(v).is(C))break;k.push(v)}return k},de=function(v,x){for(var C=[];v;v=v.nextSibling)v.nodeType===1&&v!==x&&C.push(v);return C},ce=p.expr.match.needsContext,Te=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Se(v,x,C){return _(x)?p.grep(v,function(k,D){return!!x.call(k,D,k)!==C}):x.nodeType?p.grep(v,function(k){return k===x!==C}):typeof x!="string"?p.grep(v,function(k){return u.call(x,k)>-1!==C}):p.filter(x,v,C)}p.filter=function(v,x,C){var k=x[0];return C&&(v=":not("+v+")"),x.length===1&&k.nodeType===1?p.find.matchesSelector(k,v)?[k]:[]:p.find.matches(v,p.grep(x,function(D){return D.nodeType===1}))},p.fn.extend({find:function(v){var x,C,k=this.length,D=this;if(typeof v!="string")return this.pushStack(p(v).filter(function(){for(x=0;x<k;x++)if(p.contains(D[x],this))return!0}));for(C=this.pushStack([]),x=0;x<k;x++)p.find(v,D[x],C);return k>1?p.uniqueSort(C):C},filter:function(v){return this.pushStack(Se(this,v||[],!1))},not:function(v){return this.pushStack(Se(this,v||[],!0))},is:function(v){return!!Se(this,typeof v=="string"&&ce.test(v)?p(v):v||[],!1).length}});var re,oe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,ne=p.fn.init=function(v,x,C){var k,D;if(!v)return this;if(C=C||re,typeof v=="string")if(v[0]==="<"&&v[v.length-1]===">"&&v.length>=3?k=[null,v,null]:k=oe.exec(v),k&&(k[1]||!x))if(k[1]){if(x=x instanceof p?x[0]:x,p.merge(this,p.parseHTML(k[1],x&&x.nodeType?x.ownerDocument||x:S,!0)),Te.test(k[1])&&p.isPlainObject(x))for(k in x)_(this[k])?this[k](x[k]):this.attr(k,x[k]);return this}else return D=S.getElementById(k[2]),D&&(this[0]=D,this.length=1),this;else return!x||x.jquery?(x||C).find(v):this.constructor(x).find(v);else{if(v.nodeType)return this[0]=v,this.length=1,this;if(_(v))return C.ready!==void 0?C.ready(v):v(p)}return p.makeArray(v,this)};ne.prototype=p.fn,re=p(S);var te=/^(?:parents|prev(?:Until|All))/,le={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(v){var x=p(v,this),C=x.length;return this.filter(function(){for(var k=0;k<C;k++)if(p.contains(this,x[k]))return!0})},closest:function(v,x){var C,k=0,D=this.length,F=[],$=typeof v!="string"&&p(v);if(!ce.test(v)){for(;k<D;k++)for(C=this[k];C&&C!==x;C=C.parentNode)if(C.nodeType<11&&($?$.index(C)>-1:C.nodeType===1&&p.find.matchesSelector(C,v))){F.push(C);break}}return this.pushStack(F.length>1?p.uniqueSort(F):F)},index:function(v){return v?typeof v=="string"?u.call(p(v),this[0]):u.call(this,v.jquery?v[0]:v):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(v,x){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(v,x))))},addBack:function(v){return this.add(v==null?this.prevObject:this.prevObject.filter(v))}});function We(v,x){for(;(v=v[x])&&v.nodeType!==1;);return v}p.each({parent:function(v){var x=v.parentNode;return x&&x.nodeType!==11?x:null},parents:function(v){return J(v,"parentNode")},parentsUntil:function(v,x,C){return J(v,"parentNode",C)},next:function(v){return We(v,"nextSibling")},prev:function(v){return We(v,"previousSibling")},nextAll:function(v){return J(v,"nextSibling")},prevAll:function(v){return J(v,"previousSibling")},nextUntil:function(v,x,C){return J(v,"nextSibling",C)},prevUntil:function(v,x,C){return J(v,"previousSibling",C)},siblings:function(v){return de((v.parentNode||{}).firstChild,v)},children:function(v){return de(v.firstChild)},contents:function(v){return v.contentDocument!=null&&i(v.contentDocument)?v.contentDocument:(O(v,"template")&&(v=v.content||v),p.merge([],v.childNodes))}},function(v,x){p.fn[v]=function(C,k){var D=p.map(this,x,C);return v.slice(-5)!=="Until"&&(k=C),k&&typeof k=="string"&&(D=p.filter(k,D)),this.length>1&&(le[v]||p.uniqueSort(D),te.test(v)&&D.reverse()),this.pushStack(D)}});var Ne=/[^\x20\t\r\n\f]+/g;function Re(v){var x={};return p.each(v.match(Ne)||[],function(C,k){x[k]=!0}),x}p.Callbacks=function(v){v=typeof v=="string"?Re(v):p.extend({},v);var x,C,k,D,F=[],$=[],he=-1,se=function(){for(D=D||v.once,k=x=!0;$.length;he=-1)for(C=$.shift();++he<F.length;)F[he].apply(C[0],C[1])===!1&&v.stopOnFalse&&(he=F.length,C=!1);v.memory||(C=!1),x=!1,D&&(C?F=[]:F="")},Ee={add:function(){return F&&(C&&!x&&(he=F.length-1,$.push(C)),function De(Ge){p.each(Ge,function(Me,ut){_(ut)?(!v.unique||!Ee.has(ut))&&F.push(ut):ut&&ut.length&&T(ut)!=="string"&&De(ut)})}(arguments),C&&!x&&se()),this},remove:function(){return p.each(arguments,function(De,Ge){for(var Me;(Me=p.inArray(Ge,F,Me))>-1;)F.splice(Me,1),Me<=he&&he--}),this},has:function(De){return De?p.inArray(De,F)>-1:F.length>0},empty:function(){return F&&(F=[]),this},disable:function(){return D=$=[],F=C="",this},disabled:function(){return!F},lock:function(){return D=$=[],!C&&!x&&(F=C=""),this},locked:function(){return!!D},fireWith:function(De,Ge){return D||(Ge=Ge||[],Ge=[De,Ge.slice?Ge.slice():Ge],$.push(Ge),x||se()),this},fire:function(){return Ee.fireWith(this,arguments),this},fired:function(){return!!k}};return Ee};function rt(v){return v}function Ve(v){throw v}function L(v,x,C,k){var D;try{v&&_(D=v.promise)?D.call(v).done(x).fail(C):v&&_(D=v.then)?D.call(v,x,C):x.apply(void 0,[v].slice(k))}catch(F){C.apply(void 0,[F])}}p.extend({Deferred:function(v){var x=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],C="pending",k={state:function(){return C},always:function(){return D.done(arguments).fail(arguments),this},catch:function(F){return k.then(null,F)},pipe:function(){var F=arguments;return p.Deferred(function($){p.each(x,function(he,se){var Ee=_(F[se[4]])&&F[se[4]];D[se[1]](function(){var De=Ee&&Ee.apply(this,arguments);De&&_(De.promise)?De.promise().progress($.notify).done($.resolve).fail($.reject):$[se[0]+"With"](this,Ee?[De]:arguments)})}),F=null}).promise()},then:function(F,$,he){var se=0;function Ee(De,Ge,Me,ut){return function(){var St=this,ar=arguments,sr=function(){var kn,Bs;if(!(De<se)){if(kn=Me.apply(St,ar),kn===Ge.promise())throw new TypeError("Thenable self-resolution");Bs=kn&&(typeof kn=="object"||typeof kn=="function")&&kn.then,_(Bs)?ut?Bs.call(kn,Ee(se,Ge,rt,ut),Ee(se,Ge,Ve,ut)):(se++,Bs.call(kn,Ee(se,Ge,rt,ut),Ee(se,Ge,Ve,ut),Ee(se,Ge,rt,Ge.notifyWith))):(Me!==rt&&(St=void 0,ar=[kn]),(ut||Ge.resolveWith)(St,ar))}},ai=ut?sr:function(){try{sr()}catch(kn){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(kn,ai.error),De+1>=se&&(Me!==Ve&&(St=void 0,ar=[kn]),Ge.rejectWith(St,ar))}};De?ai():(p.Deferred.getErrorHook?ai.error=p.Deferred.getErrorHook():p.Deferred.getStackHook&&(ai.error=p.Deferred.getStackHook()),t.setTimeout(ai))}}return p.Deferred(function(De){x[0][3].add(Ee(0,De,_(he)?he:rt,De.notifyWith)),x[1][3].add(Ee(0,De,_(F)?F:rt)),x[2][3].add(Ee(0,De,_($)?$:Ve))}).promise()},promise:function(F){return F!=null?p.extend(F,k):k}},D={};return p.each(x,function(F,$){var he=$[2],se=$[5];k[$[1]]=he.add,se&&he.add(function(){C=se},x[3-F][2].disable,x[3-F][3].disable,x[0][2].lock,x[0][3].lock),he.add($[3].fire),D[$[0]]=function(){return D[$[0]+"With"](this===D?void 0:this,arguments),this},D[$[0]+"With"]=he.fireWith}),k.promise(D),v&&v.call(D,D),D},when:function(v){var x=arguments.length,C=x,k=Array(C),D=s.call(arguments),F=p.Deferred(),$=function(he){return function(se){k[he]=this,D[he]=arguments.length>1?s.call(arguments):se,--x||F.resolveWith(k,D)}};if(x<=1&&(L(v,F.done($(C)).resolve,F.reject,!x),F.state()==="pending"||_(D[C]&&D[C].then)))return F.then();for(;C--;)L(D[C],$(C),F.reject);return F.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(v,x){t.console&&t.console.warn&&v&&B.test(v.name)&&t.console.warn("jQuery.Deferred exception: "+v.message,v.stack,x)},p.readyException=function(v){t.setTimeout(function(){throw v})};var H=p.Deferred();p.fn.ready=function(v){return H.then(v).catch(function(x){p.readyException(x)}),this},p.extend({isReady:!1,readyWait:1,ready:function(v){(v===!0?--p.readyWait:p.isReady)||(p.isReady=!0,!(v!==!0&&--p.readyWait>0)&&H.resolveWith(S,[p]))}}),p.ready.then=H.then;function X(){S.removeEventListener("DOMContentLoaded",X),t.removeEventListener("load",X),p.ready()}S.readyState==="complete"||S.readyState!=="loading"&&!S.documentElement.doScroll?t.setTimeout(p.ready):(S.addEventListener("DOMContentLoaded",X),t.addEventListener("load",X));var xe=function(v,x,C,k,D,F,$){var he=0,se=v.length,Ee=C==null;if(T(C)==="object"){D=!0;for(he in C)xe(v,x,he,C[he],!0,F,$)}else if(k!==void 0&&(D=!0,_(k)||($=!0),Ee&&($?(x.call(v,k),x=null):(Ee=x,x=function(De,Ge,Me){return Ee.call(p(De),Me)})),x))for(;he<se;he++)x(v[he],C,$?k:k.call(v[he],he,x(v[he],C)));return D?v:Ee?x.call(v):se?x(v[0],C):F},ue=/^-ms-/,Ae=/-([a-z])/g;function Ce(v,x){return x.toUpperCase()}function Be(v){return v.replace(ue,"ms-").replace(Ae,Ce)}var Le=function(v){return v.nodeType===1||v.nodeType===9||!+v.nodeType};function Ie(){this.expando=p.expando+Ie.uid++}Ie.uid=1,Ie.prototype={cache:function(v){var x=v[this.expando];return x||(x={},Le(v)&&(v.nodeType?v[this.expando]=x:Object.defineProperty(v,this.expando,{value:x,configurable:!0}))),x},set:function(v,x,C){var k,D=this.cache(v);if(typeof x=="string")D[Be(x)]=C;else for(k in x)D[Be(k)]=x[k];return D},get:function(v,x){return x===void 0?this.cache(v):v[this.expando]&&v[this.expando][Be(x)]},access:function(v,x,C){return x===void 0||x&&typeof x=="string"&&C===void 0?this.get(v,x):(this.set(v,x,C),C!==void 0?C:x)},remove:function(v,x){var C,k=v[this.expando];if(k!==void 0){if(x!==void 0)for(Array.isArray(x)?x=x.map(Be):(x=Be(x),x=x in k?[x]:x.match(Ne)||[]),C=x.length;C--;)delete k[x[C]];(x===void 0||p.isEmptyObject(k))&&(v.nodeType?v[this.expando]=void 0:delete v[this.expando])}},hasData:function(v){var x=v[this.expando];return x!==void 0&&!p.isEmptyObject(x)}};var be=new Ie,je=new Ie,ct=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,mt=/[A-Z]/g;function ft(v){return v==="true"?!0:v==="false"?!1:v==="null"?null:v===+v+""?+v:ct.test(v)?JSON.parse(v):v}function it(v,x,C){var k;if(C===void 0&&v.nodeType===1)if(k="data-"+x.replace(mt,"-$&").toLowerCase(),C=v.getAttribute(k),typeof C=="string"){try{C=ft(C)}catch{}je.set(v,x,C)}else C=void 0;return C}p.extend({hasData:function(v){return je.hasData(v)||be.hasData(v)},data:function(v,x,C){return je.access(v,x,C)},removeData:function(v,x){je.remove(v,x)},_data:function(v,x,C){return be.access(v,x,C)},_removeData:function(v,x){be.remove(v,x)}}),p.fn.extend({data:function(v,x){var C,k,D,F=this[0],$=F&&F.attributes;if(v===void 0){if(this.length&&(D=je.get(F),F.nodeType===1&&!be.get(F,"hasDataAttrs"))){for(C=$.length;C--;)$[C]&&(k=$[C].name,k.indexOf("data-")===0&&(k=Be(k.slice(5)),it(F,k,D[k])));be.set(F,"hasDataAttrs",!0)}return D}return typeof v=="object"?this.each(function(){je.set(this,v)}):xe(this,function(he){var se;if(F&&he===void 0)return se=je.get(F,v),se!==void 0||(se=it(F,v),se!==void 0)?se:void 0;this.each(function(){je.set(this,v,he)})},null,x,arguments.length>1,null,!0)},removeData:function(v){return this.each(function(){je.remove(this,v)})}}),p.extend({queue:function(v,x,C){var k;if(v)return x=(x||"fx")+"queue",k=be.get(v,x),C&&(!k||Array.isArray(C)?k=be.access(v,x,p.makeArray(C)):k.push(C)),k||[]},dequeue:function(v,x){x=x||"fx";var C=p.queue(v,x),k=C.length,D=C.shift(),F=p._queueHooks(v,x),$=function(){p.dequeue(v,x)};D==="inprogress"&&(D=C.shift(),k--),D&&(x==="fx"&&C.unshift("inprogress"),delete F.stop,D.call(v,$,F)),!k&&F&&F.empty.fire()},_queueHooks:function(v,x){var C=x+"queueHooks";return be.get(v,C)||be.access(v,C,{empty:p.Callbacks("once memory").add(function(){be.remove(v,[x+"queue",C])})})}}),p.fn.extend({queue:function(v,x){var C=2;return typeof v!="string"&&(x=v,v="fx",C--),arguments.length<C?p.queue(this[0],v):x===void 0?this:this.each(function(){var k=p.queue(this,v,x);p._queueHooks(this,v),v==="fx"&&k[0]!=="inprogress"&&p.dequeue(this,v)})},dequeue:function(v){return this.each(function(){p.dequeue(this,v)})},clearQueue:function(v){return this.queue(v||"fx",[])},promise:function(v,x){var C,k=1,D=p.Deferred(),F=this,$=this.length,he=function(){--k||D.resolveWith(F,[F])};for(typeof v!="string"&&(x=v,v=void 0),v=v||"fx";$--;)C=be.get(F[$],v+"queueHooks"),C&&C.empty&&(k++,C.empty.add(he));return he(),D.promise(x)}});var Wt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,yr=new RegExp("^(?:([+-])=|)("+Wt+")([a-z%]*)$","i"),Qt=["Top","Right","Bottom","Left"],cr=S.documentElement,Lr=function(v){return p.contains(v.ownerDocument,v)},Br={composed:!0};cr.getRootNode&&(Lr=function(v){return p.contains(v.ownerDocument,v)||v.getRootNode(Br)===v.ownerDocument});var bn=function(v,x){return v=x||v,v.style.display==="none"||v.style.display===""&&Lr(v)&&p.css(v,"display")==="none"};function tr(v,x,C,k){var D,F,$=20,he=k?function(){return k.cur()}:function(){return p.css(v,x,"")},se=he(),Ee=C&&C[3]||(p.cssNumber[x]?"":"px"),De=v.nodeType&&(p.cssNumber[x]||Ee!=="px"&&+se)&&yr.exec(p.css(v,x));if(De&&De[3]!==Ee){for(se=se/2,Ee=Ee||De[3],De=+se||1;$--;)p.style(v,x,De+Ee),(1-F)*(1-(F=he()/se||.5))<=0&&($=0),De=De/F;De=De*2,p.style(v,x,De+Ee),C=C||[]}return C&&(De=+De||+se||0,D=C[1]?De+(C[1]+1)*C[2]:+C[2],k&&(k.unit=Ee,k.start=De,k.end=D)),D}var Or={};function vn(v){var x,C=v.ownerDocument,k=v.nodeName,D=Or[k];return D||(x=C.body.appendChild(C.createElement(k)),D=p.css(x,"display"),x.parentNode.removeChild(x),D==="none"&&(D="block"),Or[k]=D,D)}function mn(v,x){for(var C,k,D=[],F=0,$=v.length;F<$;F++)k=v[F],k.style&&(C=k.style.display,x?(C==="none"&&(D[F]=be.get(k,"display")||null,D[F]||(k.style.display="")),k.style.display===""&&bn(k)&&(D[F]=vn(k))):C!=="none"&&(D[F]="none",be.set(k,"display",C)));for(F=0;F<$;F++)D[F]!=null&&(v[F].style.display=D[F]);return v}p.fn.extend({show:function(){return mn(this,!0)},hide:function(){return mn(this)},toggle:function(v){return typeof v=="boolean"?v?this.show():this.hide():this.each(function(){bn(this)?p(this).show():p(this).hide()})}});var pn=/^(?:checkbox|radio)$/i,Gn=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ei=/^$|^module$|\/(?:java|ecma)script/i;(function(){var v=S.createDocumentFragment(),x=v.appendChild(S.createElement("div")),C=S.createElement("input");C.setAttribute("type","radio"),C.setAttribute("checked","checked"),C.setAttribute("name","t"),x.appendChild(C),m.checkClone=x.cloneNode(!0).cloneNode(!0).lastChild.checked,x.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!x.cloneNode(!0).lastChild.defaultValue,x.innerHTML="<option></option>",m.option=!!x.lastChild})();var Bt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Bt.tbody=Bt.tfoot=Bt.colgroup=Bt.caption=Bt.thead,Bt.th=Bt.td,m.option||(Bt.optgroup=Bt.option=[1,"<select multiple='multiple'>","</select>"]);function Ft(v,x){var C;return typeof v.getElementsByTagName<"u"?C=v.getElementsByTagName(x||"*"):typeof v.querySelectorAll<"u"?C=v.querySelectorAll(x||"*"):C=[],x===void 0||x&&O(v,x)?p.merge([v],C):C}function zr(v,x){for(var C=0,k=v.length;C<k;C++)be.set(v[C],"globalEval",!x||be.get(x[C],"globalEval"))}var Fn=/<|&#?\w+;/;function wn(v,x,C,k,D){for(var F,$,he,se,Ee,De,Ge=x.createDocumentFragment(),Me=[],ut=0,St=v.length;ut<St;ut++)if(F=v[ut],F||F===0)if(T(F)==="object")p.merge(Me,F.nodeType?[F]:F);else if(!Fn.test(F))Me.push(x.createTextNode(F));else{for($=$||Ge.appendChild(x.createElement("div")),he=(Gn.exec(F)||["",""])[1].toLowerCase(),se=Bt[he]||Bt._default,$.innerHTML=se[1]+p.htmlPrefilter(F)+se[2],De=se[0];De--;)$=$.lastChild;p.merge(Me,$.childNodes),$=Ge.firstChild,$.textContent=""}for(Ge.textContent="",ut=0;F=Me[ut++];){if(k&&p.inArray(F,k)>-1){D&&D.push(F);continue}if(Ee=Lr(F),$=Ft(Ge.appendChild(F),"script"),Ee&&zr($),C)for(De=0;F=$[De++];)ei.test(F.type||"")&&C.push(F)}return Ge}var jr=/^([^.]*)(?:\.(.+)|)/;function $n(){return!0}function hi(){return!1}function Jr(v,x,C,k,D,F){var $,he;if(typeof x=="object"){typeof C!="string"&&(k=k||C,C=void 0);for(he in x)Jr(v,he,C,k,x[he],F);return v}if(k==null&&D==null?(D=C,k=C=void 0):D==null&&(typeof C=="string"?(D=k,k=void 0):(D=k,k=C,C=void 0)),D===!1)D=hi;else if(!D)return v;return F===1&&($=D,D=function(se){return p().off(se),$.apply(this,arguments)},D.guid=$.guid||($.guid=p.guid++)),v.each(function(){p.event.add(this,x,D,k,C)})}p.event={global:{},add:function(v,x,C,k,D){var F,$,he,se,Ee,De,Ge,Me,ut,St,ar,sr=be.get(v);if(Le(v))for(C.handler&&(F=C,C=F.handler,D=F.selector),D&&p.find.matchesSelector(cr,D),C.guid||(C.guid=p.guid++),(se=sr.events)||(se=sr.events=Object.create(null)),($=sr.handle)||($=sr.handle=function(ai){return typeof p<"u"&&p.event.triggered!==ai.type?p.event.dispatch.apply(v,arguments):void 0}),x=(x||"").match(Ne)||[""],Ee=x.length;Ee--;)he=jr.exec(x[Ee])||[],ut=ar=he[1],St=(he[2]||"").split(".").sort(),ut&&(Ge=p.event.special[ut]||{},ut=(D?Ge.delegateType:Ge.bindType)||ut,Ge=p.event.special[ut]||{},De=p.extend({type:ut,origType:ar,data:k,handler:C,guid:C.guid,selector:D,needsContext:D&&p.expr.match.needsContext.test(D),namespace:St.join(".")},F),(Me=se[ut])||(Me=se[ut]=[],Me.delegateCount=0,(!Ge.setup||Ge.setup.call(v,k,St,$)===!1)&&v.addEventListener&&v.addEventListener(ut,$)),Ge.add&&(Ge.add.call(v,De),De.handler.guid||(De.handler.guid=C.guid)),D?Me.splice(Me.delegateCount++,0,De):Me.push(De),p.event.global[ut]=!0)},remove:function(v,x,C,k,D){var F,$,he,se,Ee,De,Ge,Me,ut,St,ar,sr=be.hasData(v)&&be.get(v);if(!(!sr||!(se=sr.events))){for(x=(x||"").match(Ne)||[""],Ee=x.length;Ee--;){if(he=jr.exec(x[Ee])||[],ut=ar=he[1],St=(he[2]||"").split(".").sort(),!ut){for(ut in se)p.event.remove(v,ut+x[Ee],C,k,!0);continue}for(Ge=p.event.special[ut]||{},ut=(k?Ge.delegateType:Ge.bindType)||ut,Me=se[ut]||[],he=he[2]&&new RegExp("(^|\\.)"+St.join("\\.(?:.*\\.|)")+"(\\.|$)"),$=F=Me.length;F--;)De=Me[F],(D||ar===De.origType)&&(!C||C.guid===De.guid)&&(!he||he.test(De.namespace))&&(!k||k===De.selector||k==="**"&&De.selector)&&(Me.splice(F,1),De.selector&&Me.delegateCount--,Ge.remove&&Ge.remove.call(v,De));$&&!Me.length&&((!Ge.teardown||Ge.teardown.call(v,St,sr.handle)===!1)&&p.removeEvent(v,ut,sr.handle),delete se[ut])}p.isEmptyObject(se)&&be.remove(v,"handle events")}},dispatch:function(v){var x,C,k,D,F,$,he=new Array(arguments.length),se=p.event.fix(v),Ee=(be.get(this,"events")||Object.create(null))[se.type]||[],De=p.event.special[se.type]||{};for(he[0]=se,x=1;x<arguments.length;x++)he[x]=arguments[x];if(se.delegateTarget=this,!(De.preDispatch&&De.preDispatch.call(this,se)===!1)){for($=p.event.handlers.call(this,se,Ee),x=0;(D=$[x++])&&!se.isPropagationStopped();)for(se.currentTarget=D.elem,C=0;(F=D.handlers[C++])&&!se.isImmediatePropagationStopped();)(!se.rnamespace||F.namespace===!1||se.rnamespace.test(F.namespace))&&(se.handleObj=F,se.data=F.data,k=((p.event.special[F.origType]||{}).handle||F.handler).apply(D.elem,he),k!==void 0&&(se.result=k)===!1&&(se.preventDefault(),se.stopPropagation()));return De.postDispatch&&De.postDispatch.call(this,se),se.result}},handlers:function(v,x){var C,k,D,F,$,he=[],se=x.delegateCount,Ee=v.target;if(se&&Ee.nodeType&&!(v.type==="click"&&v.button>=1)){for(;Ee!==this;Ee=Ee.parentNode||this)if(Ee.nodeType===1&&!(v.type==="click"&&Ee.disabled===!0)){for(F=[],$={},C=0;C<se;C++)k=x[C],D=k.selector+" ",$[D]===void 0&&($[D]=k.needsContext?p(D,this).index(Ee)>-1:p.find(D,this,null,[Ee]).length),$[D]&&F.push(k);F.length&&he.push({elem:Ee,handlers:F})}}return Ee=this,se<x.length&&he.push({elem:Ee,handlers:x.slice(se)}),he},addProp:function(v,x){Object.defineProperty(p.Event.prototype,v,{enumerable:!0,configurable:!0,get:_(x)?function(){if(this.originalEvent)return x(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[v]},set:function(C){Object.defineProperty(this,v,{enumerable:!0,configurable:!0,writable:!0,value:C})}})},fix:function(v){return v[p.expando]?v:new p.Event(v)},special:{load:{noBubble:!0},click:{setup:function(v){var x=this||v;return pn.test(x.type)&&x.click&&O(x,"input")&&Un(x,"click",!0),!1},trigger:function(v){var x=this||v;return pn.test(x.type)&&x.click&&O(x,"input")&&Un(x,"click"),!0},_default:function(v){var x=v.target;return pn.test(x.type)&&x.click&&O(x,"input")&&be.get(x,"click")||O(x,"a")}},beforeunload:{postDispatch:function(v){v.result!==void 0&&v.originalEvent&&(v.originalEvent.returnValue=v.result)}}}};function Un(v,x,C){if(!C){be.get(v,x)===void 0&&p.event.add(v,x,$n);return}be.set(v,x,!1),p.event.add(v,x,{namespace:!1,handler:function(k){var D,F=be.get(this,x);if(k.isTrigger&1&&this[x]){if(F)(p.event.special[x]||{}).delegateType&&k.stopPropagation();else if(F=s.call(arguments),be.set(this,x,F),this[x](),D=be.get(this,x),be.set(this,x,!1),F!==D)return k.stopImmediatePropagation(),k.preventDefault(),D}else F&&(be.set(this,x,p.event.trigger(F[0],F.slice(1),this)),k.stopPropagation(),k.isImmediatePropagationStopped=$n)}})}p.removeEvent=function(v,x,C){v.removeEventListener&&v.removeEventListener(x,C)},p.Event=function(v,x){if(!(this instanceof p.Event))return new p.Event(v,x);v&&v.type?(this.originalEvent=v,this.type=v.type,this.isDefaultPrevented=v.defaultPrevented||v.defaultPrevented===void 0&&v.returnValue===!1?$n:hi,this.target=v.target&&v.target.nodeType===3?v.target.parentNode:v.target,this.currentTarget=v.currentTarget,this.relatedTarget=v.relatedTarget):this.type=v,x&&p.extend(this,x),this.timeStamp=v&&v.timeStamp||Date.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:hi,isPropagationStopped:hi,isImmediatePropagationStopped:hi,isSimulated:!1,preventDefault:function(){var v=this.originalEvent;this.isDefaultPrevented=$n,v&&!this.isSimulated&&v.preventDefault()},stopPropagation:function(){var v=this.originalEvent;this.isPropagationStopped=$n,v&&!this.isSimulated&&v.stopPropagation()},stopImmediatePropagation:function(){var v=this.originalEvent;this.isImmediatePropagationStopped=$n,v&&!this.isSimulated&&v.stopImmediatePropagation(),this.stopPropagation()}},p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},p.event.addProp),p.each({focus:"focusin",blur:"focusout"},function(v,x){function C(k){if(S.documentMode){var D=be.get(this,"handle"),F=p.event.fix(k);F.type=k.type==="focusin"?"focus":"blur",F.isSimulated=!0,D(k),F.target===F.currentTarget&&D(F)}else p.event.simulate(x,k.target,p.event.fix(k))}p.event.special[v]={setup:function(){var k;if(Un(this,v,!0),S.documentMode)k=be.get(this,x),k||this.addEventListener(x,C),be.set(this,x,(k||0)+1);else return!1},trigger:function(){return Un(this,v),!0},teardown:function(){var k;if(S.documentMode)k=be.get(this,x)-1,k?be.set(this,x,k):(this.removeEventListener(x,C),be.remove(this,x));else return!1},_default:function(k){return be.get(k.target,v)},delegateType:x},p.event.special[x]={setup:function(){var k=this.ownerDocument||this.document||this,D=S.documentMode?this:k,F=be.get(D,x);F||(S.documentMode?this.addEventListener(x,C):k.addEventListener(v,C,!0)),be.set(D,x,(F||0)+1)},teardown:function(){var k=this.ownerDocument||this.document||this,D=S.documentMode?this:k,F=be.get(D,x)-1;F?be.set(D,x,F):(S.documentMode?this.removeEventListener(x,C):k.removeEventListener(v,C,!0),be.remove(D,x))}}}),p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(v,x){p.event.special[v]={delegateType:x,bindType:x,handle:function(C){var k,D=this,F=C.relatedTarget,$=C.handleObj;return(!F||F!==D&&!p.contains(D,F))&&(C.type=$.origType,k=$.handler.apply(this,arguments),C.type=x),k}}}),p.fn.extend({on:function(v,x,C,k){return Jr(this,v,x,C,k)},one:function(v,x,C,k){return Jr(this,v,x,C,k,1)},off:function(v,x,C){var k,D;if(v&&v.preventDefault&&v.handleObj)return k=v.handleObj,p(v.delegateTarget).off(k.namespace?k.origType+"."+k.namespace:k.origType,k.selector,k.handler),this;if(typeof v=="object"){for(D in v)this.off(D,x,v[D]);return this}return(x===!1||typeof x=="function")&&(C=x,x=void 0),C===!1&&(C=hi),this.each(function(){p.event.remove(this,v,C,x)})}});var On=/<script|<style|<link/i,di=/checked\s*(?:[^=]|=\s*.checked.)/i,Xe=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Et(v,x){return O(v,"table")&&O(x.nodeType!==11?x:x.firstChild,"tr")&&p(v).children("tbody")[0]||v}function Rt(v){return v.type=(v.getAttribute("type")!==null)+"/"+v.type,v}function kt(v){return(v.type||"").slice(0,5)==="true/"?v.type=v.type.slice(5):v.removeAttribute("type"),v}function Lt(v,x){var C,k,D,F,$,he,se;if(x.nodeType===1){if(be.hasData(v)&&(F=be.get(v),se=F.events,se)){be.remove(x,"handle events");for(D in se)for(C=0,k=se[D].length;C<k;C++)p.event.add(x,D,se[D][C])}je.hasData(v)&&($=je.access(v),he=p.extend({},$),je.set(x,he))}}function at(v,x){var C=x.nodeName.toLowerCase();C==="input"&&pn.test(v.type)?x.checked=v.checked:(C==="input"||C==="textarea")&&(x.defaultValue=v.defaultValue)}function He(v,x,C,k){x=o(x);var D,F,$,he,se,Ee,De=0,Ge=v.length,Me=Ge-1,ut=x[0],St=_(ut);if(St||Ge>1&&typeof ut=="string"&&!m.checkClone&&di.test(ut))return v.each(function(ar){var sr=v.eq(ar);St&&(x[0]=ut.call(this,ar,sr.html())),He(sr,x,C,k)});if(Ge&&(D=wn(x,v[0].ownerDocument,!1,v,k),F=D.firstChild,D.childNodes.length===1&&(D=F),F||k)){for($=p.map(Ft(D,"script"),Rt),he=$.length;De<Ge;De++)se=D,De!==Me&&(se=p.clone(se,!0,!0),he&&p.merge($,Ft(se,"script"))),C.call(v[De],se,De);if(he)for(Ee=$[$.length-1].ownerDocument,p.map($,kt),De=0;De<he;De++)se=$[De],ei.test(se.type||"")&&!be.access(se,"globalEval")&&p.contains(Ee,se)&&(se.src&&(se.type||"").toLowerCase()!=="module"?p._evalUrl&&!se.noModule&&p._evalUrl(se.src,{nonce:se.nonce||se.getAttribute("nonce")},Ee):A(se.textContent.replace(Xe,""),se,Ee))}return v}function yt(v,x,C){for(var k,D=x?p.filter(x,v):v,F=0;(k=D[F])!=null;F++)!C&&k.nodeType===1&&p.cleanData(Ft(k)),k.parentNode&&(C&&Lr(k)&&zr(Ft(k,"script")),k.parentNode.removeChild(k));return v}p.extend({htmlPrefilter:function(v){return v},clone:function(v,x,C){var k,D,F,$,he=v.cloneNode(!0),se=Lr(v);if(!m.noCloneChecked&&(v.nodeType===1||v.nodeType===11)&&!p.isXMLDoc(v))for($=Ft(he),F=Ft(v),k=0,D=F.length;k<D;k++)at(F[k],$[k]);if(x)if(C)for(F=F||Ft(v),$=$||Ft(he),k=0,D=F.length;k<D;k++)Lt(F[k],$[k]);else Lt(v,he);return $=Ft(he,"script"),$.length>0&&zr($,!se&&Ft(v,"script")),he},cleanData:function(v){for(var x,C,k,D=p.event.special,F=0;(C=v[F])!==void 0;F++)if(Le(C)){if(x=C[be.expando]){if(x.events)for(k in x.events)D[k]?p.event.remove(C,k):p.removeEvent(C,k,x.handle);C[be.expando]=void 0}C[je.expando]&&(C[je.expando]=void 0)}}}),p.fn.extend({detach:function(v){return yt(this,v,!0)},remove:function(v){return yt(this,v)},text:function(v){return xe(this,function(x){return x===void 0?p.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=x)})},null,v,arguments.length)},append:function(){return He(this,arguments,function(v){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var x=Et(this,v);x.appendChild(v)}})},prepend:function(){return He(this,arguments,function(v){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var x=Et(this,v);x.insertBefore(v,x.firstChild)}})},before:function(){return He(this,arguments,function(v){this.parentNode&&this.parentNode.insertBefore(v,this)})},after:function(){return He(this,arguments,function(v){this.parentNode&&this.parentNode.insertBefore(v,this.nextSibling)})},empty:function(){for(var v,x=0;(v=this[x])!=null;x++)v.nodeType===1&&(p.cleanData(Ft(v,!1)),v.textContent="");return this},clone:function(v,x){return v=v??!1,x=x??v,this.map(function(){return p.clone(this,v,x)})},html:function(v){return xe(this,function(x){var C=this[0]||{},k=0,D=this.length;if(x===void 0&&C.nodeType===1)return C.innerHTML;if(typeof x=="string"&&!On.test(x)&&!Bt[(Gn.exec(x)||["",""])[1].toLowerCase()]){x=p.htmlPrefilter(x);try{for(;k<D;k++)C=this[k]||{},C.nodeType===1&&(p.cleanData(Ft(C,!1)),C.innerHTML=x);C=0}catch{}}C&&this.empty().append(x)},null,v,arguments.length)},replaceWith:function(){var v=[];return He(this,arguments,function(x){var C=this.parentNode;p.inArray(this,v)<0&&(p.cleanData(Ft(this)),C&&C.replaceChild(x,this))},v)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(v,x){p.fn[v]=function(C){for(var k,D=[],F=p(C),$=F.length-1,he=0;he<=$;he++)k=he===$?this:this.clone(!0),p(F[he])[x](k),a.apply(D,k.get());return this.pushStack(D)}});var Tt=new RegExp("^("+Wt+")(?!px)[a-z%]+$","i"),zt=/^--/,an=function(v){var x=v.ownerDocument.defaultView;return(!x||!x.opener)&&(x=t),x.getComputedStyle(v)},jn=function(v,x,C){var k,D,F={};for(D in x)F[D]=v.style[D],v.style[D]=x[D];k=C.call(v);for(D in x)v.style[D]=F[D];return k},Mt=new RegExp(Qt.join("|"),"i");(function(){function v(){if(Ee){se.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ee.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",cr.appendChild(se).appendChild(Ee);var De=t.getComputedStyle(Ee);C=De.top!=="1%",he=x(De.marginLeft)===12,Ee.style.right="60%",F=x(De.right)===36,k=x(De.width)===36,Ee.style.position="absolute",D=x(Ee.offsetWidth/3)===12,cr.removeChild(se),Ee=null}}function x(De){return Math.round(parseFloat(De))}var C,k,D,F,$,he,se=S.createElement("div"),Ee=S.createElement("div");Ee.style&&(Ee.style.backgroundClip="content-box",Ee.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle=Ee.style.backgroundClip==="content-box",p.extend(m,{boxSizingReliable:function(){return v(),k},pixelBoxStyles:function(){return v(),F},pixelPosition:function(){return v(),C},reliableMarginLeft:function(){return v(),he},scrollboxSize:function(){return v(),D},reliableTrDimensions:function(){var De,Ge,Me,ut;return $==null&&(De=S.createElement("table"),Ge=S.createElement("tr"),Me=S.createElement("div"),De.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ge.style.cssText="box-sizing:content-box;border:1px solid",Ge.style.height="1px",Me.style.height="9px",Me.style.display="block",cr.appendChild(De).appendChild(Ge).appendChild(Me),ut=t.getComputedStyle(Ge),$=parseInt(ut.height,10)+parseInt(ut.borderTopWidth,10)+parseInt(ut.borderBottomWidth,10)===Ge.offsetHeight,cr.removeChild(De)),$}}))})();function en(v,x,C){var k,D,F,$,he=zt.test(x),se=v.style;return C=C||an(v),C&&($=C.getPropertyValue(x)||C[x],he&&$&&($=$.replace(ee,"$1")||void 0),$===""&&!Lr(v)&&($=p.style(v,x)),!m.pixelBoxStyles()&&Tt.test($)&&Mt.test(x)&&(k=se.width,D=se.minWidth,F=se.maxWidth,se.minWidth=se.maxWidth=se.width=$,$=C.width,se.width=k,se.minWidth=D,se.maxWidth=F)),$!==void 0?$+"":$}function Er(v,x){return{get:function(){if(v()){delete this.get;return}return(this.get=x).apply(this,arguments)}}}var Nr=["Webkit","Moz","ms"],Vr=S.createElement("div").style,Ar={};function xn(v){for(var x=v[0].toUpperCase()+v.slice(1),C=Nr.length;C--;)if(v=Nr[C]+x,v in Vr)return v}function Xt(v){var x=p.cssProps[v]||Ar[v];return x||(v in Vr?v:Ar[v]=xn(v)||v)}var pi=/^(none|table(?!-c[ea]).+)/,wi={position:"absolute",visibility:"hidden",display:"block"},qi={letterSpacing:"0",fontWeight:"400"};function Ze(v,x,C){var k=yr.exec(x);return k?Math.max(0,k[2]-(C||0))+(k[3]||"px"):x}function gt(v,x,C,k,D,F){var $=x==="width"?1:0,he=0,se=0,Ee=0;if(C===(k?"border":"content"))return 0;for(;$<4;$+=2)C==="margin"&&(Ee+=p.css(v,C+Qt[$],!0,D)),k?(C==="content"&&(se-=p.css(v,"padding"+Qt[$],!0,D)),C!=="margin"&&(se-=p.css(v,"border"+Qt[$]+"Width",!0,D))):(se+=p.css(v,"padding"+Qt[$],!0,D),C!=="padding"?se+=p.css(v,"border"+Qt[$]+"Width",!0,D):he+=p.css(v,"border"+Qt[$]+"Width",!0,D));return!k&&F>=0&&(se+=Math.max(0,Math.ceil(v["offset"+x[0].toUpperCase()+x.slice(1)]-F-se-he-.5))||0),se+Ee}function ht(v,x,C){var k=an(v),D=!m.boxSizingReliable()||C,F=D&&p.css(v,"boxSizing",!1,k)==="border-box",$=F,he=en(v,x,k),se="offset"+x[0].toUpperCase()+x.slice(1);if(Tt.test(he)){if(!C)return he;he="auto"}return(!m.boxSizingReliable()&&F||!m.reliableTrDimensions()&&O(v,"tr")||he==="auto"||!parseFloat(he)&&p.css(v,"display",!1,k)==="inline")&&v.getClientRects().length&&(F=p.css(v,"boxSizing",!1,k)==="border-box",$=se in v,$&&(he=v[se])),he=parseFloat(he)||0,he+gt(v,x,C||(F?"border":"content"),$,k,he)+"px"}p.extend({cssHooks:{opacity:{get:function(v,x){if(x){var C=en(v,"opacity");return C===""?"1":C}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(v,x,C,k){if(!(!v||v.nodeType===3||v.nodeType===8||!v.style)){var D,F,$,he=Be(x),se=zt.test(x),Ee=v.style;if(se||(x=Xt(he)),$=p.cssHooks[x]||p.cssHooks[he],C!==void 0){if(F=typeof C,F==="string"&&(D=yr.exec(C))&&D[1]&&(C=tr(v,x,D),F="number"),C==null||C!==C)return;F==="number"&&!se&&(C+=D&&D[3]||(p.cssNumber[he]?"":"px")),!m.clearCloneStyle&&C===""&&x.indexOf("background")===0&&(Ee[x]="inherit"),(!$||!("set"in $)||(C=$.set(v,C,k))!==void 0)&&(se?Ee.setProperty(x,C):Ee[x]=C)}else return $&&"get"in $&&(D=$.get(v,!1,k))!==void 0?D:Ee[x]}},css:function(v,x,C,k){var D,F,$,he=Be(x),se=zt.test(x);return se||(x=Xt(he)),$=p.cssHooks[x]||p.cssHooks[he],$&&"get"in $&&(D=$.get(v,!0,C)),D===void 0&&(D=en(v,x,k)),D==="normal"&&x in qi&&(D=qi[x]),C===""||C?(F=parseFloat(D),C===!0||isFinite(F)?F||0:D):D}}),p.each(["height","width"],function(v,x){p.cssHooks[x]={get:function(C,k,D){if(k)return pi.test(p.css(C,"display"))&&(!C.getClientRects().length||!C.getBoundingClientRect().width)?jn(C,wi,function(){return ht(C,x,D)}):ht(C,x,D)},set:function(C,k,D){var F,$=an(C),he=!m.scrollboxSize()&&$.position==="absolute",se=he||D,Ee=se&&p.css(C,"boxSizing",!1,$)==="border-box",De=D?gt(C,x,D,Ee,$):0;return Ee&&he&&(De-=Math.ceil(C["offset"+x[0].toUpperCase()+x.slice(1)]-parseFloat($[x])-gt(C,x,"border",!1,$)-.5)),De&&(F=yr.exec(k))&&(F[3]||"px")!=="px"&&(C.style[x]=k,k=p.css(C,x)),Ze(C,k,De)}}}),p.cssHooks.marginLeft=Er(m.reliableMarginLeft,function(v,x){if(x)return(parseFloat(en(v,"marginLeft"))||v.getBoundingClientRect().left-jn(v,{marginLeft:0},function(){return v.getBoundingClientRect().left}))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(v,x){p.cssHooks[v+x]={expand:function(C){for(var k=0,D={},F=typeof C=="string"?C.split(" "):[C];k<4;k++)D[v+Qt[k]+x]=F[k]||F[k-2]||F[0];return D}},v!=="margin"&&(p.cssHooks[v+x].set=Ze)}),p.fn.extend({css:function(v,x){return xe(this,function(C,k,D){var F,$,he={},se=0;if(Array.isArray(k)){for(F=an(C),$=k.length;se<$;se++)he[k[se]]=p.css(C,k[se],!1,F);return he}return D!==void 0?p.style(C,k,D):p.css(C,k)},v,x,arguments.length>1)}});function dt(v,x,C,k,D){return new dt.prototype.init(v,x,C,k,D)}p.Tween=dt,dt.prototype={constructor:dt,init:function(v,x,C,k,D,F){this.elem=v,this.prop=C,this.easing=D||p.easing._default,this.options=x,this.start=this.now=this.cur(),this.end=k,this.unit=F||(p.cssNumber[C]?"":"px")},cur:function(){var v=dt.propHooks[this.prop];return v&&v.get?v.get(this):dt.propHooks._default.get(this)},run:function(v){var x,C=dt.propHooks[this.prop];return this.options.duration?this.pos=x=p.easing[this.easing](v,this.options.duration*v,0,1,this.options.duration):this.pos=x=v,this.now=(this.end-this.start)*x+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),C&&C.set?C.set(this):dt.propHooks._default.set(this),this}},dt.prototype.init.prototype=dt.prototype,dt.propHooks={_default:{get:function(v){var x;return v.elem.nodeType!==1||v.elem[v.prop]!=null&&v.elem.style[v.prop]==null?v.elem[v.prop]:(x=p.css(v.elem,v.prop,""),!x||x==="auto"?0:x)},set:function(v){p.fx.step[v.prop]?p.fx.step[v.prop](v):v.elem.nodeType===1&&(p.cssHooks[v.prop]||v.elem.style[Xt(v.prop)]!=null)?p.style(v.elem,v.prop,v.now+v.unit):v.elem[v.prop]=v.now}}},dt.propHooks.scrollTop=dt.propHooks.scrollLeft={set:function(v){v.elem.nodeType&&v.elem.parentNode&&(v.elem[v.prop]=v.now)}},p.easing={linear:function(v){return v},swing:function(v){return .5-Math.cos(v*Math.PI)/2},_default:"swing"},p.fx=dt.prototype.init,p.fx.step={};var Ct,rr,Hr=/^(?:toggle|show|hide)$/,cn=/queueHooks$/;function Gr(){rr&&(S.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Gr):t.setTimeout(Gr,p.fx.interval),p.fx.tick())}function yn(){return t.setTimeout(function(){Ct=void 0}),Ct=Date.now()}function Bn(v,x){var C,k=0,D={height:v};for(x=x?1:0;k<4;k+=2-x)C=Qt[k],D["margin"+C]=D["padding"+C]=v;return x&&(D.opacity=D.width=v),D}function gi(v,x,C){for(var k,D=(Hn.tweeners[x]||[]).concat(Hn.tweeners["*"]),F=0,$=D.length;F<$;F++)if(k=D[F].call(C,x,v))return k}function zo(v,x,C){var k,D,F,$,he,se,Ee,De,Ge="width"in x||"height"in x,Me=this,ut={},St=v.style,ar=v.nodeType&&bn(v),sr=be.get(v,"fxshow");C.queue||($=p._queueHooks(v,"fx"),$.unqueued==null&&($.unqueued=0,he=$.empty.fire,$.empty.fire=function(){$.unqueued||he()}),$.unqueued++,Me.always(function(){Me.always(function(){$.unqueued--,p.queue(v,"fx").length||$.empty.fire()})}));for(k in x)if(D=x[k],Hr.test(D)){if(delete x[k],F=F||D==="toggle",D===(ar?"hide":"show"))if(D==="show"&&sr&&sr[k]!==void 0)ar=!0;else continue;ut[k]=sr&&sr[k]||p.style(v,k)}if(se=!p.isEmptyObject(x),!(!se&&p.isEmptyObject(ut))){Ge&&v.nodeType===1&&(C.overflow=[St.overflow,St.overflowX,St.overflowY],Ee=sr&&sr.display,Ee==null&&(Ee=be.get(v,"display")),De=p.css(v,"display"),De==="none"&&(Ee?De=Ee:(mn([v],!0),Ee=v.style.display||Ee,De=p.css(v,"display"),mn([v]))),(De==="inline"||De==="inline-block"&&Ee!=null)&&p.css(v,"float")==="none"&&(se||(Me.done(function(){St.display=Ee}),Ee==null&&(De=St.display,Ee=De==="none"?"":De)),St.display="inline-block")),C.overflow&&(St.overflow="hidden",Me.always(function(){St.overflow=C.overflow[0],St.overflowX=C.overflow[1],St.overflowY=C.overflow[2]})),se=!1;for(k in ut)se||(sr?"hidden"in sr&&(ar=sr.hidden):sr=be.access(v,"fxshow",{display:Ee}),F&&(sr.hidden=!ar),ar&&mn([v],!0),Me.done(function(){ar||mn([v]),be.remove(v,"fxshow");for(k in ut)p.style(v,k,ut[k])})),se=gi(ar?sr[k]:0,k,Me),k in sr||(sr[k]=se.start,ar&&(se.end=se.start,se.start=0))}}function xs(v,x){var C,k,D,F,$;for(C in v)if(k=Be(C),D=x[k],F=v[C],Array.isArray(F)&&(D=F[1],F=v[C]=F[0]),C!==k&&(v[k]=F,delete v[C]),$=p.cssHooks[k],$&&"expand"in $){F=$.expand(F),delete v[k];for(C in F)C in v||(v[C]=F[C],x[C]=D)}else x[k]=D}function Hn(v,x,C){var k,D,F=0,$=Hn.prefilters.length,he=p.Deferred().always(function(){delete se.elem}),se=function(){if(D)return!1;for(var Ge=Ct||yn(),Me=Math.max(0,Ee.startTime+Ee.duration-Ge),ut=Me/Ee.duration||0,St=1-ut,ar=0,sr=Ee.tweens.length;ar<sr;ar++)Ee.tweens[ar].run(St);return he.notifyWith(v,[Ee,St,Me]),St<1&&sr?Me:(sr||he.notifyWith(v,[Ee,1,0]),he.resolveWith(v,[Ee]),!1)},Ee=he.promise({elem:v,props:p.extend({},x),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},C),originalProperties:x,originalOptions:C,startTime:Ct||yn(),duration:C.duration,tweens:[],createTween:function(Ge,Me){var ut=p.Tween(v,Ee.opts,Ge,Me,Ee.opts.specialEasing[Ge]||Ee.opts.easing);return Ee.tweens.push(ut),ut},stop:function(Ge){var Me=0,ut=Ge?Ee.tweens.length:0;if(D)return this;for(D=!0;Me<ut;Me++)Ee.tweens[Me].run(1);return Ge?(he.notifyWith(v,[Ee,1,0]),he.resolveWith(v,[Ee,Ge])):he.rejectWith(v,[Ee,Ge]),this}}),De=Ee.props;for(xs(De,Ee.opts.specialEasing);F<$;F++)if(k=Hn.prefilters[F].call(Ee,v,De,Ee.opts),k)return _(k.stop)&&(p._queueHooks(Ee.elem,Ee.opts.queue).stop=k.stop.bind(k)),k;return p.map(De,gi,Ee),_(Ee.opts.start)&&Ee.opts.start.call(v,Ee),Ee.progress(Ee.opts.progress).done(Ee.opts.done,Ee.opts.complete).fail(Ee.opts.fail).always(Ee.opts.always),p.fx.timer(p.extend(se,{elem:v,anim:Ee,queue:Ee.opts.queue})),Ee}p.Animation=p.extend(Hn,{tweeners:{"*":[function(v,x){var C=this.createTween(v,x);return tr(C.elem,v,yr.exec(x),C),C}]},tweener:function(v,x){_(v)?(x=v,v=["*"]):v=v.match(Ne);for(var C,k=0,D=v.length;k<D;k++)C=v[k],Hn.tweeners[C]=Hn.tweeners[C]||[],Hn.tweeners[C].unshift(x)},prefilters:[zo],prefilter:function(v,x){x?Hn.prefilters.unshift(v):Hn.prefilters.push(v)}}),p.speed=function(v,x,C){var k=v&&typeof v=="object"?p.extend({},v):{complete:C||!C&&x||_(v)&&v,duration:v,easing:C&&x||x&&!_(x)&&x};return p.fx.off?k.duration=0:typeof k.duration!="number"&&(k.duration in p.fx.speeds?k.duration=p.fx.speeds[k.duration]:k.duration=p.fx.speeds._default),(k.queue==null||k.queue===!0)&&(k.queue="fx"),k.old=k.complete,k.complete=function(){_(k.old)&&k.old.call(this),k.queue&&p.dequeue(this,k.queue)},k},p.fn.extend({fadeTo:function(v,x,C,k){return this.filter(bn).css("opacity",0).show().end().animate({opacity:x},v,C,k)},animate:function(v,x,C,k){var D=p.isEmptyObject(v),F=p.speed(x,C,k),$=function(){var he=Hn(this,p.extend({},v),F);(D||be.get(this,"finish"))&&he.stop(!0)};return $.finish=$,D||F.queue===!1?this.each($):this.queue(F.queue,$)},stop:function(v,x,C){var k=function(D){var F=D.stop;delete D.stop,F(C)};return typeof v!="string"&&(C=x,x=v,v=void 0),x&&this.queue(v||"fx",[]),this.each(function(){var D=!0,F=v!=null&&v+"queueHooks",$=p.timers,he=be.get(this);if(F)he[F]&&he[F].stop&&k(he[F]);else for(F in he)he[F]&&he[F].stop&&cn.test(F)&&k(he[F]);for(F=$.length;F--;)$[F].elem===this&&(v==null||$[F].queue===v)&&($[F].anim.stop(C),D=!1,$.splice(F,1));(D||!C)&&p.dequeue(this,v)})},finish:function(v){return v!==!1&&(v=v||"fx"),this.each(function(){var x,C=be.get(this),k=C[v+"queue"],D=C[v+"queueHooks"],F=p.timers,$=k?k.length:0;for(C.finish=!0,p.queue(this,v,[]),D&&D.stop&&D.stop.call(this,!0),x=F.length;x--;)F[x].elem===this&&F[x].queue===v&&(F[x].anim.stop(!0),F.splice(x,1));for(x=0;x<$;x++)k[x]&&k[x].finish&&k[x].finish.call(this);delete C.finish})}}),p.each(["toggle","show","hide"],function(v,x){var C=p.fn[x];p.fn[x]=function(k,D,F){return k==null||typeof k=="boolean"?C.apply(this,arguments):this.animate(Bn(x,!0),k,D,F)}}),p.each({slideDown:Bn("show"),slideUp:Bn("hide"),slideToggle:Bn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(v,x){p.fn[v]=function(C,k,D){return this.animate(x,C,k,D)}}),p.timers=[],p.fx.tick=function(){var v,x=0,C=p.timers;for(Ct=Date.now();x<C.length;x++)v=C[x],!v()&&C[x]===v&&C.splice(x--,1);C.length||p.fx.stop(),Ct=void 0},p.fx.timer=function(v){p.timers.push(v),p.fx.start()},p.fx.interval=13,p.fx.start=function(){rr||(rr=!0,Gr())},p.fx.stop=function(){rr=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(v,x){return v=p.fx&&p.fx.speeds[v]||v,x=x||"fx",this.queue(x,function(C,k){var D=t.setTimeout(C,v);k.stop=function(){t.clearTimeout(D)}})},function(){var v=S.createElement("input"),x=S.createElement("select"),C=x.appendChild(S.createElement("option"));v.type="checkbox",m.checkOn=v.value!=="",m.optSelected=C.selected,v=S.createElement("input"),v.value="t",v.type="radio",m.radioValue=v.value==="t"}();var _a,ts=p.expr.attrHandle;p.fn.extend({attr:function(v,x){return xe(this,p.attr,v,x,arguments.length>1)},removeAttr:function(v){return this.each(function(){p.removeAttr(this,v)})}}),p.extend({attr:function(v,x,C){var k,D,F=v.nodeType;if(!(F===3||F===8||F===2)){if(typeof v.getAttribute>"u")return p.prop(v,x,C);if((F!==1||!p.isXMLDoc(v))&&(D=p.attrHooks[x.toLowerCase()]||(p.expr.match.bool.test(x)?_a:void 0)),C!==void 0){if(C===null){p.removeAttr(v,x);return}return D&&"set"in D&&(k=D.set(v,C,x))!==void 0?k:(v.setAttribute(x,C+""),C)}return D&&"get"in D&&(k=D.get(v,x))!==null?k:(k=p.find.attr(v,x),k??void 0)}},attrHooks:{type:{set:function(v,x){if(!m.radioValue&&x==="radio"&&O(v,"input")){var C=v.value;return v.setAttribute("type",x),C&&(v.value=C),x}}}},removeAttr:function(v,x){var C,k=0,D=x&&x.match(Ne);if(D&&v.nodeType===1)for(;C=D[k++];)v.removeAttribute(C)}}),_a={set:function(v,x,C){return x===!1?p.removeAttr(v,C):v.setAttribute(C,C),C}},p.each(p.expr.match.bool.source.match(/\w+/g),function(v,x){var C=ts[x]||p.find.attr;ts[x]=function(k,D,F){var $,he,se=D.toLowerCase();return F||(he=ts[se],ts[se]=$,$=C(k,D,F)!=null?se:null,ts[se]=he),$}});var ba=/^(?:input|select|textarea|button)$/i,Vo=/^(?:a|area)$/i;p.fn.extend({prop:function(v,x){return xe(this,p.prop,v,x,arguments.length>1)},removeProp:function(v){return this.each(function(){delete this[p.propFix[v]||v]})}}),p.extend({prop:function(v,x,C){var k,D,F=v.nodeType;if(!(F===3||F===8||F===2))return(F!==1||!p.isXMLDoc(v))&&(x=p.propFix[x]||x,D=p.propHooks[x]),C!==void 0?D&&"set"in D&&(k=D.set(v,C,x))!==void 0?k:v[x]=C:D&&"get"in D&&(k=D.get(v,x))!==null?k:v[x]},propHooks:{tabIndex:{get:function(v){var x=p.find.attr(v,"tabindex");return x?parseInt(x,10):ba.test(v.nodeName)||Vo.test(v.nodeName)&&v.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(p.propHooks.selected={get:function(v){var x=v.parentNode;return x&&x.parentNode&&x.parentNode.selectedIndex,null},set:function(v){var x=v.parentNode;x&&(x.selectedIndex,x.parentNode&&x.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});function Go(v){var x=v.match(Ne)||[];return x.join(" ")}function $o(v){return v.getAttribute&&v.getAttribute("class")||""}function Ql(v){return Array.isArray(v)?v:typeof v=="string"?v.match(Ne)||[]:[]}p.fn.extend({addClass:function(v){var x,C,k,D,F,$;return _(v)?this.each(function(he){p(this).addClass(v.call(this,he,$o(this)))}):(x=Ql(v),x.length?this.each(function(){if(k=$o(this),C=this.nodeType===1&&" "+Go(k)+" ",C){for(F=0;F<x.length;F++)D=x[F],C.indexOf(" "+D+" ")<0&&(C+=D+" ");$=Go(C),k!==$&&this.setAttribute("class",$)}}):this)},removeClass:function(v){var x,C,k,D,F,$;return _(v)?this.each(function(he){p(this).removeClass(v.call(this,he,$o(this)))}):arguments.length?(x=Ql(v),x.length?this.each(function(){if(k=$o(this),C=this.nodeType===1&&" "+Go(k)+" ",C){for(F=0;F<x.length;F++)for(D=x[F];C.indexOf(" "+D+" ")>-1;)C=C.replace(" "+D+" "," ");$=Go(C),k!==$&&this.setAttribute("class",$)}}):this):this.attr("class","")},toggleClass:function(v,x){var C,k,D,F,$=typeof v,he=$==="string"||Array.isArray(v);return _(v)?this.each(function(se){p(this).toggleClass(v.call(this,se,$o(this),x),x)}):typeof x=="boolean"&&he?x?this.addClass(v):this.removeClass(v):(C=Ql(v),this.each(function(){if(he)for(F=p(this),D=0;D<C.length;D++)k=C[D],F.hasClass(k)?F.removeClass(k):F.addClass(k);else(v===void 0||$==="boolean")&&(k=$o(this),k&&be.set(this,"__className__",k),this.setAttribute&&this.setAttribute("class",k||v===!1?"":be.get(this,"__className__")||""))}))},hasClass:function(v){var x,C,k=0;for(x=" "+v+" ";C=this[k++];)if(C.nodeType===1&&(" "+Go($o(C))+" ").indexOf(x)>-1)return!0;return!1}});var Qh=/\r/g;p.fn.extend({val:function(v){var x,C,k,D=this[0];return arguments.length?(k=_(v),this.each(function(F){var $;this.nodeType===1&&(k?$=v.call(this,F,p(this).val()):$=v,$==null?$="":typeof $=="number"?$+="":Array.isArray($)&&($=p.map($,function(he){return he==null?"":he+""})),x=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],(!x||!("set"in x)||x.set(this,$,"value")===void 0)&&(this.value=$))})):D?(x=p.valHooks[D.type]||p.valHooks[D.nodeName.toLowerCase()],x&&"get"in x&&(C=x.get(D,"value"))!==void 0?C:(C=D.value,typeof C=="string"?C.replace(Qh,""):C??"")):void 0}}),p.extend({valHooks:{option:{get:function(v){var x=p.find.attr(v,"value");return x??Go(p.text(v))}},select:{get:function(v){var x,C,k,D=v.options,F=v.selectedIndex,$=v.type==="select-one",he=$?null:[],se=$?F+1:D.length;for(F<0?k=se:k=$?F:0;k<se;k++)if(C=D[k],(C.selected||k===F)&&!C.disabled&&(!C.parentNode.disabled||!O(C.parentNode,"optgroup"))){if(x=p(C).val(),$)return x;he.push(x)}return he},set:function(v,x){for(var C,k,D=v.options,F=p.makeArray(x),$=D.length;$--;)k=D[$],(k.selected=p.inArray(p.valHooks.option.get(k),F)>-1)&&(C=!0);return C||(v.selectedIndex=-1),F}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(v,x){if(Array.isArray(x))return v.checked=p.inArray(p(v).val(),x)>-1}},m.checkOn||(p.valHooks[this].get=function(v){return v.getAttribute("value")===null?"on":v.value})});var Za=t.location,ef={guid:Date.now()},qc=/\?/;p.parseXML=function(v){var x,C;if(!v||typeof v!="string")return null;try{x=new t.DOMParser().parseFromString(v,"text/xml")}catch{}return C=x&&x.getElementsByTagName("parsererror")[0],(!x||C)&&p.error("Invalid XML: "+(C?p.map(C.childNodes,function(k){return k.textContent}).join(`
`):v)),x};var ed=/^(?:focusinfocus|focusoutblur)$/,td=function(v){v.stopPropagation()};p.extend(p.event,{trigger:function(v,x,C,k){var D,F,$,he,se,Ee,De,Ge,Me=[C||S],ut=h.call(v,"type")?v.type:v,St=h.call(v,"namespace")?v.namespace.split("."):[];if(F=Ge=$=C=C||S,!(C.nodeType===3||C.nodeType===8)&&!ed.test(ut+p.event.triggered)&&(ut.indexOf(".")>-1&&(St=ut.split("."),ut=St.shift(),St.sort()),se=ut.indexOf(":")<0&&"on"+ut,v=v[p.expando]?v:new p.Event(ut,typeof v=="object"&&v),v.isTrigger=k?2:3,v.namespace=St.join("."),v.rnamespace=v.namespace?new RegExp("(^|\\.)"+St.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,v.result=void 0,v.target||(v.target=C),x=x==null?[v]:p.makeArray(x,[v]),De=p.event.special[ut]||{},!(!k&&De.trigger&&De.trigger.apply(C,x)===!1))){if(!k&&!De.noBubble&&!b(C)){for(he=De.delegateType||ut,ed.test(he+ut)||(F=F.parentNode);F;F=F.parentNode)Me.push(F),$=F;$===(C.ownerDocument||S)&&Me.push($.defaultView||$.parentWindow||t)}for(D=0;(F=Me[D++])&&!v.isPropagationStopped();)Ge=F,v.type=D>1?he:De.bindType||ut,Ee=(be.get(F,"events")||Object.create(null))[v.type]&&be.get(F,"handle"),Ee&&Ee.apply(F,x),Ee=se&&F[se],Ee&&Ee.apply&&Le(F)&&(v.result=Ee.apply(F,x),v.result===!1&&v.preventDefault());return v.type=ut,!k&&!v.isDefaultPrevented()&&(!De._default||De._default.apply(Me.pop(),x)===!1)&&Le(C)&&se&&_(C[ut])&&!b(C)&&($=C[se],$&&(C[se]=null),p.event.triggered=ut,v.isPropagationStopped()&&Ge.addEventListener(ut,td),C[ut](),v.isPropagationStopped()&&Ge.removeEventListener(ut,td),p.event.triggered=void 0,$&&(C[se]=$)),v.result}},simulate:function(v,x,C){var k=p.extend(new p.Event,C,{type:v,isSimulated:!0});p.event.trigger(k,null,x)}}),p.fn.extend({trigger:function(v,x){return this.each(function(){p.event.trigger(v,x,this)})},triggerHandler:function(v,x){var C=this[0];if(C)return p.event.trigger(v,x,C,!0)}});var hv=/\[\]$/,tf=/\r?\n/g,dv=/^(?:submit|button|image|reset|file)$/i,pv=/^(?:input|select|textarea|keygen)/i;function rf(v,x,C,k){var D;if(Array.isArray(x))p.each(x,function(F,$){C||hv.test(v)?k(v,$):rf(v+"["+(typeof $=="object"&&$!=null?F:"")+"]",$,C,k)});else if(!C&&T(x)==="object")for(D in x)rf(v+"["+D+"]",x[D],C,k);else k(v,x)}p.param=function(v,x){var C,k=[],D=function(F,$){var he=_($)?$():$;k[k.length]=encodeURIComponent(F)+"="+encodeURIComponent(he??"")};if(v==null)return"";if(Array.isArray(v)||v.jquery&&!p.isPlainObject(v))p.each(v,function(){D(this.name,this.value)});else for(C in v)rf(C,v[C],x,D);return k.join("&")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var v=p.prop(this,"elements");return v?p.makeArray(v):this}).filter(function(){var v=this.type;return this.name&&!p(this).is(":disabled")&&pv.test(this.nodeName)&&!dv.test(v)&&(this.checked||!pn.test(v))}).map(function(v,x){var C=p(this).val();return C==null?null:Array.isArray(C)?p.map(C,function(k){return{name:x.name,value:k.replace(tf,`\r
`)}}):{name:x.name,value:C.replace(tf,`\r
`)}}).get()}});var gv=/%20/g,nf=/#.*$/,vv=/([?&])_=[^&]*/,mv=/^(.*?):[ \t]*([^\r\n]*)$/mg,yv=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,_v=/^(?:GET|HEAD)$/,bv=/^\/\//,ln={},tn={},rd="*/".concat("*"),sf=S.createElement("a");sf.href=Za.href;function nd(v){return function(x,C){typeof x!="string"&&(C=x,x="*");var k,D=0,F=x.toLowerCase().match(Ne)||[];if(_(C))for(;k=F[D++];)k[0]==="+"?(k=k.slice(1)||"*",(v[k]=v[k]||[]).unshift(C)):(v[k]=v[k]||[]).push(C)}}function id(v,x,C,k){var D={},F=v===tn;function $(he){var se;return D[he]=!0,p.each(v[he]||[],function(Ee,De){var Ge=De(x,C,k);if(typeof Ge=="string"&&!F&&!D[Ge])return x.dataTypes.unshift(Ge),$(Ge),!1;if(F)return!(se=Ge)}),se}return $(x.dataTypes[0])||!D["*"]&&$("*")}function of(v,x){var C,k,D=p.ajaxSettings.flatOptions||{};for(C in x)x[C]!==void 0&&((D[C]?v:k||(k={}))[C]=x[C]);return k&&p.extend(!0,v,k),v}function wv(v,x,C){for(var k,D,F,$,he=v.contents,se=v.dataTypes;se[0]==="*";)se.shift(),k===void 0&&(k=v.mimeType||x.getResponseHeader("Content-Type"));if(k){for(D in he)if(he[D]&&he[D].test(k)){se.unshift(D);break}}if(se[0]in C)F=se[0];else{for(D in C){if(!se[0]||v.converters[D+" "+se[0]]){F=D;break}$||($=D)}F=F||$}if(F)return F!==se[0]&&se.unshift(F),C[F]}function sd(v,x,C,k){var D,F,$,he,se,Ee={},De=v.dataTypes.slice();if(De[1])for($ in v.converters)Ee[$.toLowerCase()]=v.converters[$];for(F=De.shift();F;)if(v.responseFields[F]&&(C[v.responseFields[F]]=x),!se&&k&&v.dataFilter&&(x=v.dataFilter(x,v.dataType)),se=F,F=De.shift(),F){if(F==="*")F=se;else if(se!=="*"&&se!==F){if($=Ee[se+" "+F]||Ee["* "+F],!$){for(D in Ee)if(he=D.split(" "),he[1]===F&&($=Ee[se+" "+he[0]]||Ee["* "+he[0]],$)){$===!0?$=Ee[D]:Ee[D]!==!0&&(F=he[0],De.unshift(he[1]));break}}if($!==!0)if($&&v.throws)x=$(x);else try{x=$(x)}catch(Ge){return{state:"parsererror",error:$?Ge:"No conversion from "+se+" to "+F}}}}return{state:"success",data:x}}p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Za.href,type:"GET",isLocal:yv.test(Za.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":rd,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(v,x){return x?of(of(v,p.ajaxSettings),x):of(p.ajaxSettings,v)},ajaxPrefilter:nd(ln),ajaxTransport:nd(tn),ajax:function(v,x){typeof v=="object"&&(x=v,v=void 0),x=x||{};var C,k,D,F,$,he,se,Ee,De,Ge,Me=p.ajaxSetup({},x),ut=Me.context||Me,St=Me.context&&(ut.nodeType||ut.jquery)?p(ut):p.event,ar=p.Deferred(),sr=p.Callbacks("once memory"),ai=Me.statusCode||{},kn={},Bs={},zs="canceled",Tr={readyState:0,getResponseHeader:function(Pr){var un;if(se){if(!F)for(F={};un=mv.exec(D);)F[un[1].toLowerCase()+" "]=(F[un[1].toLowerCase()+" "]||[]).concat(un[2]);un=F[Pr.toLowerCase()+" "]}return un==null?null:un.join(", ")},getAllResponseHeaders:function(){return se?D:null},setRequestHeader:function(Pr,un){return se==null&&(Pr=Bs[Pr.toLowerCase()]=Bs[Pr.toLowerCase()]||Pr,kn[Pr]=un),this},overrideMimeType:function(Pr){return se==null&&(Me.mimeType=Pr),this},statusCode:function(Pr){var un;if(Pr)if(se)Tr.always(Pr[Tr.status]);else for(un in Pr)ai[un]=[ai[un],Pr[un]];return this},abort:function(Pr){var un=Pr||zs;return C&&C.abort(un),Uo(0,un),this}};if(ar.promise(Tr),Me.url=((v||Me.url||Za.href)+"").replace(bv,Za.protocol+"//"),Me.type=x.method||x.type||Me.method||Me.type,Me.dataTypes=(Me.dataType||"*").toLowerCase().match(Ne)||[""],Me.crossDomain==null){he=S.createElement("a");try{he.href=Me.url,he.href=he.href,Me.crossDomain=sf.protocol+"//"+sf.host!=he.protocol+"//"+he.host}catch{Me.crossDomain=!0}}if(Me.data&&Me.processData&&typeof Me.data!="string"&&(Me.data=p.param(Me.data,Me.traditional)),id(ln,Me,x,Tr),se)return Tr;Ee=p.event&&Me.global,Ee&&p.active++===0&&p.event.trigger("ajaxStart"),Me.type=Me.type.toUpperCase(),Me.hasContent=!_v.test(Me.type),k=Me.url.replace(nf,""),Me.hasContent?Me.data&&Me.processData&&(Me.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Me.data=Me.data.replace(gv,"+")):(Ge=Me.url.slice(k.length),Me.data&&(Me.processData||typeof Me.data=="string")&&(k+=(qc.test(k)?"&":"?")+Me.data,delete Me.data),Me.cache===!1&&(k=k.replace(vv,"$1"),Ge=(qc.test(k)?"&":"?")+"_="+ef.guid+++Ge),Me.url=k+Ge),Me.ifModified&&(p.lastModified[k]&&Tr.setRequestHeader("If-Modified-Since",p.lastModified[k]),p.etag[k]&&Tr.setRequestHeader("If-None-Match",p.etag[k])),(Me.data&&Me.hasContent&&Me.contentType!==!1||x.contentType)&&Tr.setRequestHeader("Content-Type",Me.contentType),Tr.setRequestHeader("Accept",Me.dataTypes[0]&&Me.accepts[Me.dataTypes[0]]?Me.accepts[Me.dataTypes[0]]+(Me.dataTypes[0]!=="*"?", "+rd+"; q=0.01":""):Me.accepts["*"]);for(De in Me.headers)Tr.setRequestHeader(De,Me.headers[De]);if(Me.beforeSend&&(Me.beforeSend.call(ut,Tr,Me)===!1||se))return Tr.abort();if(zs="abort",sr.add(Me.complete),Tr.done(Me.success),Tr.fail(Me.error),C=id(tn,Me,x,Tr),!C)Uo(-1,"No Transport");else{if(Tr.readyState=1,Ee&&St.trigger("ajaxSend",[Tr,Me]),se)return Tr;Me.async&&Me.timeout>0&&($=t.setTimeout(function(){Tr.abort("timeout")},Me.timeout));try{se=!1,C.send(kn,Uo)}catch(Pr){if(se)throw Pr;Uo(-1,Pr)}}function Uo(Pr,un,qu,Fc){var Ss,wa,ns,vo,jo,Pi=un;se||(se=!0,$&&t.clearTimeout($),C=void 0,D=Fc||"",Tr.readyState=Pr>0?4:0,Ss=Pr>=200&&Pr<300||Pr===304,qu&&(vo=wv(Me,Tr,qu)),!Ss&&p.inArray("script",Me.dataTypes)>-1&&p.inArray("json",Me.dataTypes)<0&&(Me.converters["text script"]=function(){}),vo=sd(Me,vo,Tr,Ss),Ss?(Me.ifModified&&(jo=Tr.getResponseHeader("Last-Modified"),jo&&(p.lastModified[k]=jo),jo=Tr.getResponseHeader("etag"),jo&&(p.etag[k]=jo)),Pr===204||Me.type==="HEAD"?Pi="nocontent":Pr===304?Pi="notmodified":(Pi=vo.state,wa=vo.data,ns=vo.error,Ss=!ns)):(ns=Pi,(Pr||!Pi)&&(Pi="error",Pr<0&&(Pr=0))),Tr.status=Pr,Tr.statusText=(un||Pi)+"",Ss?ar.resolveWith(ut,[wa,Pi,Tr]):ar.rejectWith(ut,[Tr,Pi,ns]),Tr.statusCode(ai),ai=void 0,Ee&&St.trigger(Ss?"ajaxSuccess":"ajaxError",[Tr,Me,Ss?wa:ns]),sr.fireWith(ut,[Tr,Pi]),Ee&&(St.trigger("ajaxComplete",[Tr,Me]),--p.active||p.event.trigger("ajaxStop")))}return Tr},getJSON:function(v,x,C){return p.get(v,x,C,"json")},getScript:function(v,x){return p.get(v,void 0,x,"script")}}),p.each(["get","post"],function(v,x){p[x]=function(C,k,D,F){return _(k)&&(F=F||D,D=k,k=void 0),p.ajax(p.extend({url:C,type:x,dataType:F,data:k,success:D},p.isPlainObject(C)&&C))}}),p.ajaxPrefilter(function(v){var x;for(x in v.headers)x.toLowerCase()==="content-type"&&(v.contentType=v.headers[x]||"")}),p._evalUrl=function(v,x,C){return p.ajax({url:v,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(k){p.globalEval(k,x,C)}})},p.fn.extend({wrapAll:function(v){var x;return this[0]&&(_(v)&&(v=v.call(this[0])),x=p(v,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&x.insertBefore(this[0]),x.map(function(){for(var C=this;C.firstElementChild;)C=C.firstElementChild;return C}).append(this)),this},wrapInner:function(v){return _(v)?this.each(function(x){p(this).wrapInner(v.call(this,x))}):this.each(function(){var x=p(this),C=x.contents();C.length?C.wrapAll(v):x.append(v)})},wrap:function(v){var x=_(v);return this.each(function(C){p(this).wrapAll(x?v.call(this,C):v)})},unwrap:function(v){return this.parent(v).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}}),p.expr.pseudos.hidden=function(v){return!p.expr.pseudos.visible(v)},p.expr.pseudos.visible=function(v){return!!(v.offsetWidth||v.offsetHeight||v.getClientRects().length)},p.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var xv={0:200,1223:204},Mn=p.ajaxSettings.xhr();m.cors=!!Mn&&"withCredentials"in Mn,m.ajax=Mn=!!Mn,p.ajaxTransport(function(v){var x,C;if(m.cors||Mn&&!v.crossDomain)return{send:function(k,D){var F,$=v.xhr();if($.open(v.type,v.url,v.async,v.username,v.password),v.xhrFields)for(F in v.xhrFields)$[F]=v.xhrFields[F];v.mimeType&&$.overrideMimeType&&$.overrideMimeType(v.mimeType),!v.crossDomain&&!k["X-Requested-With"]&&(k["X-Requested-With"]="XMLHttpRequest");for(F in k)$.setRequestHeader(F,k[F]);x=function(he){return function(){x&&(x=C=$.onload=$.onerror=$.onabort=$.ontimeout=$.onreadystatechange=null,he==="abort"?$.abort():he==="error"?typeof $.status!="number"?D(0,"error"):D($.status,$.statusText):D(xv[$.status]||$.status,$.statusText,($.responseType||"text")!=="text"||typeof $.responseText!="string"?{binary:$.response}:{text:$.responseText},$.getAllResponseHeaders()))}},$.onload=x(),C=$.onerror=$.ontimeout=x("error"),$.onabort!==void 0?$.onabort=C:$.onreadystatechange=function(){$.readyState===4&&t.setTimeout(function(){x&&C()})},x=x("abort");try{$.send(v.hasContent&&v.data||null)}catch(he){if(x)throw he}},abort:function(){x&&x()}}}),p.ajaxPrefilter(function(v){v.crossDomain&&(v.contents.script=!1)}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(v){return p.globalEval(v),v}}}),p.ajaxPrefilter("script",function(v){v.cache===void 0&&(v.cache=!1),v.crossDomain&&(v.type="GET")}),p.ajaxTransport("script",function(v){if(v.crossDomain||v.scriptAttrs){var x,C;return{send:function(k,D){x=p("<script>").attr(v.scriptAttrs||{}).prop({charset:v.scriptCharset,src:v.url}).on("load error",C=function(F){x.remove(),C=null,F&&D(F.type==="error"?404:200,F.type)}),S.head.appendChild(x[0])},abort:function(){C&&C()}}}});var Dc=[],go=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var v=Dc.pop()||p.expando+"_"+ef.guid++;return this[v]=!0,v}}),p.ajaxPrefilter("json jsonp",function(v,x,C){var k,D,F,$=v.jsonp!==!1&&(go.test(v.url)?"url":typeof v.data=="string"&&(v.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&go.test(v.data)&&"data");if($||v.dataTypes[0]==="jsonp")return k=v.jsonpCallback=_(v.jsonpCallback)?v.jsonpCallback():v.jsonpCallback,$?v[$]=v[$].replace(go,"$1"+k):v.jsonp!==!1&&(v.url+=(qc.test(v.url)?"&":"?")+v.jsonp+"="+k),v.converters["script json"]=function(){return F||p.error(k+" was not called"),F[0]},v.dataTypes[0]="json",D=t[k],t[k]=function(){F=arguments},C.always(function(){D===void 0?p(t).removeProp(k):t[k]=D,v[k]&&(v.jsonpCallback=x.jsonpCallback,Dc.push(k)),F&&_(D)&&D(F[0]),F=D=void 0}),"script"}),m.createHTMLDocument=function(){var v=S.implementation.createHTMLDocument("").body;return v.innerHTML="<form></form><form></form>",v.childNodes.length===2}(),p.parseHTML=function(v,x,C){if(typeof v!="string")return[];typeof x=="boolean"&&(C=x,x=!1);var k,D,F;return x||(m.createHTMLDocument?(x=S.implementation.createHTMLDocument(""),k=x.createElement("base"),k.href=S.location.href,x.head.appendChild(k)):x=S),D=Te.exec(v),F=!C&&[],D?[x.createElement(D[1])]:(D=wn([v],x,F),F&&F.length&&p(F).remove(),p.merge([],D.childNodes))},p.fn.load=function(v,x,C){var k,D,F,$=this,he=v.indexOf(" ");return he>-1&&(k=Go(v.slice(he)),v=v.slice(0,he)),_(x)?(C=x,x=void 0):x&&typeof x=="object"&&(D="POST"),$.length>0&&p.ajax({url:v,type:D||"GET",dataType:"html",data:x}).done(function(se){F=arguments,$.html(k?p("<div>").append(p.parseHTML(se)).find(k):se)}).always(C&&function(se,Ee){$.each(function(){C.apply(this,F||[se.responseText,Ee,se])})}),this},p.expr.pseudos.animated=function(v){return p.grep(p.timers,function(x){return v===x.elem}).length},p.offset={setOffset:function(v,x,C){var k,D,F,$,he,se,Ee,De=p.css(v,"position"),Ge=p(v),Me={};De==="static"&&(v.style.position="relative"),he=Ge.offset(),F=p.css(v,"top"),se=p.css(v,"left"),Ee=(De==="absolute"||De==="fixed")&&(F+se).indexOf("auto")>-1,Ee?(k=Ge.position(),$=k.top,D=k.left):($=parseFloat(F)||0,D=parseFloat(se)||0),_(x)&&(x=x.call(v,C,p.extend({},he))),x.top!=null&&(Me.top=x.top-he.top+$),x.left!=null&&(Me.left=x.left-he.left+D),"using"in x?x.using.call(v,Me):Ge.css(Me)}},p.fn.extend({offset:function(v){if(arguments.length)return v===void 0?this:this.each(function(D){p.offset.setOffset(this,v,D)});var x,C,k=this[0];if(k)return k.getClientRects().length?(x=k.getBoundingClientRect(),C=k.ownerDocument.defaultView,{top:x.top+C.pageYOffset,left:x.left+C.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var v,x,C,k=this[0],D={top:0,left:0};if(p.css(k,"position")==="fixed")x=k.getBoundingClientRect();else{for(x=this.offset(),C=k.ownerDocument,v=k.offsetParent||C.documentElement;v&&(v===C.body||v===C.documentElement)&&p.css(v,"position")==="static";)v=v.parentNode;v&&v!==k&&v.nodeType===1&&(D=p(v).offset(),D.top+=p.css(v,"borderTopWidth",!0),D.left+=p.css(v,"borderLeftWidth",!0))}return{top:x.top-D.top-p.css(k,"marginTop",!0),left:x.left-D.left-p.css(k,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var v=this.offsetParent;v&&p.css(v,"position")==="static";)v=v.offsetParent;return v||cr})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(v,x){var C=x==="pageYOffset";p.fn[v]=function(k){return xe(this,function(D,F,$){var he;if(b(D)?he=D:D.nodeType===9&&(he=D.defaultView),$===void 0)return he?he[x]:D[F];he?he.scrollTo(C?he.pageXOffset:$,C?$:he.pageYOffset):D[F]=$},v,k,arguments.length)}}),p.each(["top","left"],function(v,x){p.cssHooks[x]=Er(m.pixelPosition,function(C,k){if(k)return k=en(C,x),Tt.test(k)?p(C).position()[x]+"px":k})}),p.each({Height:"height",Width:"width"},function(v,x){p.each({padding:"inner"+v,content:x,"":"outer"+v},function(C,k){p.fn[k]=function(D,F){var $=arguments.length&&(C||typeof D!="boolean"),he=C||(D===!0||F===!0?"margin":"border");return xe(this,function(se,Ee,De){var Ge;return b(se)?k.indexOf("outer")===0?se["inner"+v]:se.document.documentElement["client"+v]:se.nodeType===9?(Ge=se.documentElement,Math.max(se.body["scroll"+v],Ge["scroll"+v],se.body["offset"+v],Ge["offset"+v],Ge["client"+v])):De===void 0?p.css(se,Ee,he):p.style(se,Ee,De,he)},x,$?D:void 0,$)}})}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(v,x){p.fn[x]=function(C){return this.on(x,C)}}),p.fn.extend({bind:function(v,x,C){return this.on(v,null,x,C)},unbind:function(v,x){return this.off(v,null,x)},delegate:function(v,x,C,k){return this.on(x,v,C,k)},undelegate:function(v,x,C){return arguments.length===1?this.off(v,"**"):this.off(x,v||"**",C)},hover:function(v,x){return this.on("mouseenter",v).on("mouseleave",x||v)}}),p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(v,x){p.fn[x]=function(C,k){return arguments.length>0?this.on(x,null,C,k):this.trigger(x)}});var od=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;p.proxy=function(v,x){var C,k,D;if(typeof x=="string"&&(C=v[x],x=v,v=C),!!_(v))return k=s.call(arguments,2),D=function(){return v.apply(x||this,k.concat(s.call(arguments)))},D.guid=v.guid=v.guid||p.guid++,D},p.holdReady=function(v){v?p.readyWait++:p.ready(!0)},p.isArray=Array.isArray,p.parseJSON=JSON.parse,p.nodeName=O,p.isFunction=_,p.isWindow=b,p.camelCase=Be,p.type=T,p.now=Date.now,p.isNumeric=function(v){var x=p.type(v);return(x==="number"||x==="string")&&!isNaN(v-parseFloat(v))},p.trim=function(v){return v==null?"":(v+"").replace(od,"$1")};var af=t.jQuery,rs=t.$;return p.noConflict=function(v){return t.$===p&&(t.$=rs),v&&t.jQuery===p&&(t.jQuery=af),p},typeof r>"u"&&(t.jQuery=t.$=p),p})}(vp)),vp.exports}var a5;function Zce(){return a5||(a5=1,function(e){(function(t){var r=typeof self=="object"&&self.self===self&&self||typeof Oi=="object"&&Oi.global===Oi&&Oi;{var n=Yce,i;try{i=W$()}catch{}t(r,e,n,i)}})(function(t,r,n,i){var s=t.Backbone,o=Array.prototype.slice;r.VERSION="1.4.1",r.$=i,r.noConflict=function(){return t.Backbone=s,this},r.emulateHTTP=!1,r.emulateJSON=!1;var a=r.Events={},u=/\s+/,c,f=function(L,B,H,X,xe){var ue=0,Ae;if(H&&typeof H=="object")for(X!==void 0&&("context"in xe)&&xe.context===void 0&&(xe.context=X),Ae=n.keys(H);ue<Ae.length;ue++)B=f(L,B,Ae[ue],H[Ae[ue]],xe);else if(H&&u.test(H))for(Ae=H.split(u);ue<Ae.length;ue++)B=L(B,Ae[ue],X,xe);else B=L(B,H,X,xe);return B};a.on=function(L,B,H){if(this._events=f(h,this._events||{},L,B,{context:H,ctx:this,listening:c}),c){var X=this._listeners||(this._listeners={});X[c.id]=c,c.interop=!1}return this},a.listenTo=function(L,B,H){if(!L)return this;var X=L._listenId||(L._listenId=n.uniqueId("l")),xe=this._listeningTo||(this._listeningTo={}),ue=c=xe[X];ue||(this._listenId||(this._listenId=n.uniqueId("l")),ue=c=xe[X]=new S(this,L));var Ae=g(L,B,H,this);if(c=void 0,Ae)throw Ae;return ue.interop&&ue.on(B,H),this};var h=function(L,B,H,X){if(H){var xe=L[B]||(L[B]=[]),ue=X.context,Ae=X.ctx,Ce=X.listening;Ce&&Ce.count++,xe.push({callback:H,context:ue,ctx:ue||Ae,listening:Ce})}return L},g=function(L,B,H,X){try{L.on(B,H,X)}catch(xe){return xe}};a.off=function(L,B,H){return this._events?(this._events=f(y,this._events,L,B,{context:H,listeners:this._listeners}),this):this},a.stopListening=function(L,B,H){var X=this._listeningTo;if(!X)return this;for(var xe=L?[L._listenId]:n.keys(X),ue=0;ue<xe.length;ue++){var Ae=X[xe[ue]];if(!Ae)break;Ae.obj.off(B,H,this),Ae.interop&&Ae.off(B,H)}return n.isEmpty(X)&&(this._listeningTo=void 0),this};var y=function(L,B,H,X){if(L){var xe=X.context,ue=X.listeners,Ae=0,Ce;if(!B&&!xe&&!H){for(Ce=n.keys(ue);Ae<Ce.length;Ae++)ue[Ce[Ae]].cleanup();return}for(Ce=B?[B]:n.keys(L);Ae<Ce.length;Ae++){B=Ce[Ae];var Be=L[B];if(!Be)break;for(var Le=[],Ie=0;Ie<Be.length;Ie++){var be=Be[Ie];if(H&&H!==be.callback&&H!==be.callback._callback||xe&&xe!==be.context)Le.push(be);else{var je=be.listening;je&&je.off(B,H)}}Le.length?L[B]=Le:delete L[B]}return L}};a.once=function(L,B,H){var X=f(m,{},L,B,this.off.bind(this));return typeof L=="string"&&H==null&&(B=void 0),this.on(X,B,H)},a.listenToOnce=function(L,B,H){var X=f(m,{},B,H,this.stopListening.bind(this,L));return this.listenTo(L,X)};var m=function(L,B,H,X){if(H){var xe=L[B]=n.once(function(){X(B,xe),H.apply(this,arguments)});xe._callback=H}return L};a.trigger=function(L){if(!this._events)return this;for(var B=Math.max(0,arguments.length-1),H=Array(B),X=0;X<B;X++)H[X]=arguments[X+1];return f(_,this._events,L,void 0,H),this};var _=function(L,B,H,X){if(L){var xe=L[B],ue=L.all;xe&&ue&&(ue=ue.slice()),xe&&b(xe,X),ue&&b(ue,[B].concat(X))}return L},b=function(L,B){var H,X=-1,xe=L.length,ue=B[0],Ae=B[1],Ce=B[2];switch(B.length){case 0:for(;++X<xe;)(H=L[X]).callback.call(H.ctx);return;case 1:for(;++X<xe;)(H=L[X]).callback.call(H.ctx,ue);return;case 2:for(;++X<xe;)(H=L[X]).callback.call(H.ctx,ue,Ae);return;case 3:for(;++X<xe;)(H=L[X]).callback.call(H.ctx,ue,Ae,Ce);return;default:for(;++X<xe;)(H=L[X]).callback.apply(H.ctx,B);return}},S=function(L,B){this.id=L._listenId,this.listener=L,this.obj=B,this.interop=!0,this.count=0,this._events=void 0};S.prototype.on=a.on,S.prototype.off=function(L,B){var H;this.interop?(this._events=f(y,this._events,L,B,{context:void 0,listeners:void 0}),H=!this._events):(this.count--,H=this.count===0),H&&this.cleanup()},S.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},a.bind=a.on,a.unbind=a.off,n.extend(r,a);var E=r.Model=function(L,B){var H=L||{};B||(B={}),this.preinitialize.apply(this,arguments),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},B.collection&&(this.collection=B.collection),B.parse&&(H=this.parse(H,B)||{});var X=n.result(this,"defaults");H=n.defaults(n.extend({},X,H),X),this.set(H,B),this.changed={},this.initialize.apply(this,arguments)};n.extend(E.prototype,a,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(L){return n.clone(this.attributes)},sync:function(){return r.sync.apply(this,arguments)},get:function(L){return this.attributes[L]},escape:function(L){return n.escape(this.get(L))},has:function(L){return this.get(L)!=null},matches:function(L){return!!n.iteratee(L,this)(this.attributes)},set:function(L,B,H){if(L==null)return this;var X;if(typeof L=="object"?(X=L,H=B):(X={})[L]=B,H||(H={}),!this._validate(X,H))return!1;var xe=H.unset,ue=H.silent,Ae=[],Ce=this._changing;this._changing=!0,Ce||(this._previousAttributes=n.clone(this.attributes),this.changed={});var Be=this.attributes,Le=this.changed,Ie=this._previousAttributes;for(var be in X)B=X[be],n.isEqual(Be[be],B)||Ae.push(be),n.isEqual(Ie[be],B)?delete Le[be]:Le[be]=B,xe?delete Be[be]:Be[be]=B;if(this.idAttribute in X){var je=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,je,H)}if(!ue){Ae.length&&(this._pending=H);for(var ct=0;ct<Ae.length;ct++)this.trigger("change:"+Ae[ct],this,Be[Ae[ct]],H)}if(Ce)return this;if(!ue)for(;this._pending;)H=this._pending,this._pending=!1,this.trigger("change",this,H);return this._pending=!1,this._changing=!1,this},unset:function(L,B){return this.set(L,void 0,n.extend({},B,{unset:!0}))},clear:function(L){var B={};for(var H in this.attributes)B[H]=void 0;return this.set(B,n.extend({},L,{unset:!0}))},hasChanged:function(L){return L==null?!n.isEmpty(this.changed):n.has(this.changed,L)},changedAttributes:function(L){if(!L)return this.hasChanged()?n.clone(this.changed):!1;var B=this._changing?this._previousAttributes:this.attributes,H={},X;for(var xe in L){var ue=L[xe];n.isEqual(B[xe],ue)||(H[xe]=ue,X=!0)}return X?H:!1},previous:function(L){return L==null||!this._previousAttributes?null:this._previousAttributes[L]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(L){L=n.extend({parse:!0},L);var B=this,H=L.success;return L.success=function(X){var xe=L.parse?B.parse(X,L):X;if(!B.set(xe,L))return!1;H&&H.call(L.context,B,X,L),B.trigger("sync",B,X,L)},Ve(this,L),this.sync("read",this,L)},save:function(L,B,H){var X;L==null||typeof L=="object"?(X=L,H=B):(X={})[L]=B,H=n.extend({validate:!0,parse:!0},H);var xe=H.wait;if(X&&!xe){if(!this.set(X,H))return!1}else if(!this._validate(X,H))return!1;var ue=this,Ae=H.success,Ce=this.attributes;H.success=function(Ie){ue.attributes=Ce;var be=H.parse?ue.parse(Ie,H):Ie;if(xe&&(be=n.extend({},X,be)),be&&!ue.set(be,H))return!1;Ae&&Ae.call(H.context,ue,Ie,H),ue.trigger("sync",ue,Ie,H)},Ve(this,H),X&&xe&&(this.attributes=n.extend({},Ce,X));var Be=this.isNew()?"create":H.patch?"patch":"update";Be==="patch"&&!H.attrs&&(H.attrs=X);var Le=this.sync(Be,this,H);return this.attributes=Ce,Le},destroy:function(L){L=L?n.clone(L):{};var B=this,H=L.success,X=L.wait,xe=function(){B.stopListening(),B.trigger("destroy",B,B.collection,L)};L.success=function(Ae){X&&xe(),H&&H.call(L.context,B,Ae,L),B.isNew()||B.trigger("sync",B,Ae,L)};var ue=!1;return this.isNew()?n.defer(L.success):(Ve(this,L),ue=this.sync("delete",this,L)),X||xe(),ue},url:function(){var L=n.result(this,"urlRoot")||n.result(this.collection,"url")||rt();if(this.isNew())return L;var B=this.get(this.idAttribute);return L.replace(/[^\/]$/,"$&/")+encodeURIComponent(B)},parse:function(L,B){return L},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(L){return this._validate({},n.extend({},L,{validate:!0}))},_validate:function(L,B){if(!B.validate||!this.validate)return!0;L=n.extend({},this.attributes,L);var H=this.validationError=this.validate(L,B)||null;return H?(this.trigger("invalid",this,H,n.extend(B,{validationError:H})),!1):!0}});var A=r.Collection=function(L,B){B||(B={}),this.preinitialize.apply(this,arguments),B.model&&(this.model=B.model),B.comparator!==void 0&&(this.comparator=B.comparator),this._reset(),this.initialize.apply(this,arguments),L&&this.reset(L,n.extend({silent:!0},B))},T={add:!0,remove:!0,merge:!0},I={add:!0,remove:!1},q=function(L,B,H){H=Math.min(Math.max(H,0),L.length);var X=Array(L.length-H),xe=B.length,ue;for(ue=0;ue<X.length;ue++)X[ue]=L[ue+H];for(ue=0;ue<xe;ue++)L[ue+H]=B[ue];for(ue=0;ue<X.length;ue++)L[ue+xe+H]=X[ue]};n.extend(A.prototype,a,{model:E,preinitialize:function(){},initialize:function(){},toJSON:function(L){return this.map(function(B){return B.toJSON(L)})},sync:function(){return r.sync.apply(this,arguments)},add:function(L,B){return this.set(L,n.extend({merge:!1},B,I))},remove:function(L,B){B=n.extend({},B);var H=!n.isArray(L);L=H?[L]:L.slice();var X=this._removeModels(L,B);return!B.silent&&X.length&&(B.changes={added:[],merged:[],removed:X},this.trigger("update",this,B)),H?X[0]:X},set:function(L,B){if(L!=null){B=n.extend({},T,B),B.parse&&!this._isModel(L)&&(L=this.parse(L,B)||[]);var H=!n.isArray(L);L=H?[L]:L.slice();var X=B.at;X!=null&&(X=+X),X>this.length&&(X=this.length),X<0&&(X+=this.length+1);var xe=[],ue=[],Ae=[],Ce=[],Be={},Le=B.add,Ie=B.merge,be=B.remove,je=!1,ct=this.comparator&&X==null&&B.sort!==!1,mt=n.isString(this.comparator)?this.comparator:null,ft,it;for(it=0;it<L.length;it++){ft=L[it];var Wt=this.get(ft);if(Wt){if(Ie&&ft!==Wt){var yr=this._isModel(ft)?ft.attributes:ft;B.parse&&(yr=Wt.parse(yr,B)),Wt.set(yr,B),Ae.push(Wt),ct&&!je&&(je=Wt.hasChanged(mt))}Be[Wt.cid]||(Be[Wt.cid]=!0,xe.push(Wt)),L[it]=Wt}else Le&&(ft=L[it]=this._prepareModel(ft,B),ft&&(ue.push(ft),this._addReference(ft,B),Be[ft.cid]=!0,xe.push(ft)))}if(be){for(it=0;it<this.length;it++)ft=this.models[it],Be[ft.cid]||Ce.push(ft);Ce.length&&this._removeModels(Ce,B)}var Qt=!1,cr=!ct&&Le&&be;if(xe.length&&cr?(Qt=this.length!==xe.length||n.some(this.models,function(Lr,Br){return Lr!==xe[Br]}),this.models.length=0,q(this.models,xe,0),this.length=this.models.length):ue.length&&(ct&&(je=!0),q(this.models,ue,X??this.length),this.length=this.models.length),je&&this.sort({silent:!0}),!B.silent){for(it=0;it<ue.length;it++)X!=null&&(B.index=X+it),ft=ue[it],ft.trigger("add",ft,this,B);(je||Qt)&&this.trigger("sort",this,B),(ue.length||Ce.length||Ae.length)&&(B.changes={added:ue,removed:Ce,merged:Ae},this.trigger("update",this,B))}return H?L[0]:L}},reset:function(L,B){B=B?n.clone(B):{};for(var H=0;H<this.models.length;H++)this._removeReference(this.models[H],B);return B.previousModels=this.models,this._reset(),L=this.add(L,n.extend({silent:!0},B)),B.silent||this.trigger("reset",this,B),L},push:function(L,B){return this.add(L,n.extend({at:this.length},B))},pop:function(L){var B=this.at(this.length-1);return this.remove(B,L)},unshift:function(L,B){return this.add(L,n.extend({at:0},B))},shift:function(L){var B=this.at(0);return this.remove(B,L)},slice:function(){return o.apply(this.models,arguments)},get:function(L){if(L!=null)return this._byId[L]||this._byId[this.modelId(this._isModel(L)?L.attributes:L,L.idAttribute)]||L.cid&&this._byId[L.cid]},has:function(L){return this.get(L)!=null},at:function(L){return L<0&&(L+=this.length),this.models[L]},where:function(L,B){return this[B?"find":"filter"](L)},findWhere:function(L){return this.where(L,!0)},sort:function(L){var B=this.comparator;if(!B)throw new Error("Cannot sort a set without a comparator");L||(L={});var H=B.length;return n.isFunction(B)&&(B=B.bind(this)),H===1||n.isString(B)?this.models=this.sortBy(B):this.models.sort(B),L.silent||this.trigger("sort",this,L),this},pluck:function(L){return this.map(L+"")},fetch:function(L){L=n.extend({parse:!0},L);var B=L.success,H=this;return L.success=function(X){var xe=L.reset?"reset":"set";H[xe](X,L),B&&B.call(L.context,H,X,L),H.trigger("sync",H,X,L)},Ve(this,L),this.sync("read",this,L)},create:function(L,B){B=B?n.clone(B):{};var H=B.wait;if(L=this._prepareModel(L,B),!L)return!1;H||this.add(L,B);var X=this,xe=B.success;return B.success=function(ue,Ae,Ce){H&&X.add(ue,Ce),xe&&xe.call(Ce.context,ue,Ae,Ce)},L.save(null,B),L},parse:function(L,B){return L},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(L,B){return L[B||this.model.prototype.idAttribute||"id"]},values:function(){return new P(this,O)},keys:function(){return new P(this,N)},entries:function(){return new P(this,V)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(L,B){if(this._isModel(L))return L.collection||(L.collection=this),L;B=B?n.clone(B):{},B.collection=this;var H;return this.model.prototype?H=new this.model(L,B):H=this.model(L,B),H.validationError?(this.trigger("invalid",this,H.validationError,B),!1):H},_removeModels:function(L,B){for(var H=[],X=0;X<L.length;X++){var xe=this.get(L[X]);if(xe){var ue=this.indexOf(xe);this.models.splice(ue,1),this.length--,delete this._byId[xe.cid];var Ae=this.modelId(xe.attributes,xe.idAttribute);Ae!=null&&delete this._byId[Ae],B.silent||(B.index=ue,xe.trigger("remove",xe,this,B)),H.push(xe),this._removeReference(xe,B)}}return H},_isModel:function(L){return L instanceof E},_addReference:function(L,B){this._byId[L.cid]=L;var H=this.modelId(L.attributes,L.idAttribute);H!=null&&(this._byId[H]=L),L.on("all",this._onModelEvent,this)},_removeReference:function(L,B){delete this._byId[L.cid];var H=this.modelId(L.attributes,L.idAttribute);H!=null&&delete this._byId[H],this===L.collection&&delete L.collection,L.off("all",this._onModelEvent,this)},_onModelEvent:function(L,B,H,X){if(B){if((L==="add"||L==="remove")&&H!==this)return;if(L==="destroy"&&this.remove(B,X),L==="changeId"){var xe=this.modelId(B.previousAttributes(),B.idAttribute),ue=this.modelId(B.attributes,B.idAttribute);xe!=null&&delete this._byId[xe],ue!=null&&(this._byId[ue]=B)}}this.trigger.apply(this,arguments)}});var p=typeof Symbol=="function"&&Symbol.iterator;p&&(A.prototype[p]=A.prototype.values);var P=function(L,B){this._collection=L,this._kind=B,this._index=0},O=1,N=2,V=3;p&&(P.prototype[p]=function(){return this}),P.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var L=this._collection.at(this._index);this._index++;var B;if(this._kind===O)B=L;else{var H=this._collection.modelId(L.attributes,L.idAttribute);this._kind===N?B=H:B=[H,L]}return{value:B,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var W=r.View=function(L){this.cid=n.uniqueId("view"),this.preinitialize.apply(this,arguments),n.extend(this,n.pick(L,ee)),this._ensureElement(),this.initialize.apply(this,arguments)},G=/^(\S+)\s*(.*)$/,ee=["model","collection","el","id","attributes","className","tagName","events"];n.extend(W.prototype,a,{tagName:"div",$:function(L){return this.$el.find(L)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(L){return this.undelegateEvents(),this._setElement(L),this.delegateEvents(),this},_setElement:function(L){this.$el=L instanceof r.$?L:r.$(L),this.el=this.$el[0]},delegateEvents:function(L){if(L||(L=n.result(this,"events")),!L)return this;this.undelegateEvents();for(var B in L){var H=L[B];if(n.isFunction(H)||(H=this[H]),!!H){var X=B.match(G);this.delegate(X[1],X[2],H.bind(this))}}return this},delegate:function(L,B,H){return this.$el.on(L+".delegateEvents"+this.cid,B,H),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(L,B,H){return this.$el.off(L+".delegateEvents"+this.cid,B,H),this},_createElement:function(L){return document.createElement(L)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var L=n.extend({},n.result(this,"attributes"));this.id&&(L.id=n.result(this,"id")),this.className&&(L.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(L)}},_setAttributes:function(L){this.$el.attr(L)}});var ae=function(L,B,H,X){switch(B){case 1:return function(){return L[H](this[X])};case 2:return function(xe){return L[H](this[X],xe)};case 3:return function(xe,ue){return L[H](this[X],U(xe,this),ue)};case 4:return function(xe,ue,Ae){return L[H](this[X],U(xe,this),ue,Ae)};default:return function(){var xe=o.call(arguments);return xe.unshift(this[X]),L[H].apply(L,xe)}}},K=function(L,B,H,X){n.each(H,function(xe,ue){B[ue]&&(L.prototype[ue]=ae(B,xe,ue,X))})},U=function(L,B){return n.isFunction(L)?L:n.isObject(L)&&!B._isModel(L)?j(L):n.isString(L)?function(H){return H.get(L)}:L},j=function(L){var B=n.matches(L);return function(H){return B(H.attributes)}},J={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},de={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};n.each([[A,J,"models"],[E,de,"attributes"]],function(L){var B=L[0],H=L[1],X=L[2];B.mixin=function(xe){var ue=n.reduce(n.functions(xe),function(Ae,Ce){return Ae[Ce]=0,Ae},{});K(B,xe,ue,X)},K(B,n,H,X)}),r.sync=function(L,B,H){var X=ce[L];n.defaults(H||(H={}),{emulateHTTP:r.emulateHTTP,emulateJSON:r.emulateJSON});var xe={type:X,dataType:"json"};if(H.url||(xe.url=n.result(B,"url")||rt()),H.data==null&&B&&(L==="create"||L==="update"||L==="patch")&&(xe.contentType="application/json",xe.data=JSON.stringify(H.attrs||B.toJSON(H))),H.emulateJSON&&(xe.contentType="application/x-www-form-urlencoded",xe.data=xe.data?{model:xe.data}:{}),H.emulateHTTP&&(X==="PUT"||X==="DELETE"||X==="PATCH")){xe.type="POST",H.emulateJSON&&(xe.data._method=X);var ue=H.beforeSend;H.beforeSend=function(Be){if(Be.setRequestHeader("X-HTTP-Method-Override",X),ue)return ue.apply(this,arguments)}}xe.type!=="GET"&&!H.emulateJSON&&(xe.processData=!1);var Ae=H.error;H.error=function(Be,Le,Ie){H.textStatus=Le,H.errorThrown=Ie,Ae&&Ae.call(H.context,Be,Le,Ie)};var Ce=H.xhr=r.ajax(n.extend(xe,H));return B.trigger("request",B,Ce,H),Ce};var ce={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};r.ajax=function(){return r.$.ajax.apply(r.$,arguments)};var Te=r.Router=function(L){L||(L={}),this.preinitialize.apply(this,arguments),L.routes&&(this.routes=L.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Se=/\((.*?)\)/g,re=/(\(\?)?:\w+/g,oe=/\*\w+/g,ne=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(Te.prototype,a,{preinitialize:function(){},initialize:function(){},route:function(L,B,H){n.isRegExp(L)||(L=this._routeToRegExp(L)),n.isFunction(B)&&(H=B,B=""),H||(H=this[B]);var X=this;return r.history.route(L,function(xe){var ue=X._extractParameters(L,xe);X.execute(H,ue,B)!==!1&&(X.trigger.apply(X,["route:"+B].concat(ue)),X.trigger("route",B,ue),r.history.trigger("route",X,B,ue))}),this},execute:function(L,B,H){L&&L.apply(this,B)},navigate:function(L,B){return r.history.navigate(L,B),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var L,B=n.keys(this.routes);(L=B.pop())!=null;)this.route(L,this.routes[L])}},_routeToRegExp:function(L){return L=L.replace(ne,"\\$&").replace(Se,"(?:$1)?").replace(re,function(B,H){return H?B:"([^/?]+)"}).replace(oe,"([^?]*?)"),new RegExp("^"+L+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(L,B){var H=L.exec(B).slice(1);return n.map(H,function(X,xe){return xe===H.length-1?X||null:X?decodeURIComponent(X):null})}});var te=r.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},le=/^[#\/]|\s+$/g,We=/^\/+|\/+$/g,Ne=/#.*$/;te.started=!1,n.extend(te.prototype,a,{interval:50,atRoot:function(){var L=this.location.pathname.replace(/[^\/]$/,"$&/");return L===this.root&&!this.getSearch()},matchRoot:function(){var L=this.decodeFragment(this.location.pathname),B=L.slice(0,this.root.length-1)+"/";return B===this.root},decodeFragment:function(L){return decodeURI(L.replace(/%25/g,"%2525"))},getSearch:function(){var L=this.location.href.replace(/#.*/,"").match(/\?.+/);return L?L[0]:""},getHash:function(L){var B=(L||this).location.href.match(/#(.*)$/);return B?B[1]:""},getPath:function(){var L=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return L.charAt(0)==="/"?L.slice(1):L},getFragment:function(L){return L==null&&(this._usePushState||!this._wantsHashChange?L=this.getPath():L=this.getHash()),L.replace(le,"")},start:function(L){if(te.started)throw new Error("Backbone.history has already been started");if(te.started=!0,this.options=n.extend({root:"/"},this.options,L),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(We,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var B=this.root.slice(0,-1)||"/";return this.location.replace(B+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var H=document.body,X=H.insertBefore(this.iframe,H.firstChild).contentWindow;X.document.open(),X.document.close(),X.location.hash="#"+this.fragment}var xe=window.addEventListener||function(ue,Ae){return attachEvent("on"+ue,Ae)};if(this._usePushState?xe("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?xe("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var L=window.removeEventListener||function(B,H){return detachEvent("on"+B,H)};this._usePushState?L("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&L("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),te.started=!1},route:function(L,B){this.handlers.unshift({route:L,callback:B})},checkUrl:function(L){var B=this.getFragment();if(B===this.fragment&&this.iframe&&(B=this.getHash(this.iframe.contentWindow)),B===this.fragment)return!1;this.iframe&&this.navigate(B),this.loadUrl()},loadUrl:function(L){return this.matchRoot()?(L=this.fragment=this.getFragment(L),n.some(this.handlers,function(B){if(B.route.test(L))return B.callback(L),!0})):!1},navigate:function(L,B){if(!te.started)return!1;(!B||B===!0)&&(B={trigger:!!B}),L=this.getFragment(L||"");var H=this.root;(L===""||L.charAt(0)==="?")&&(H=H.slice(0,-1)||"/");var X=H+L;L=L.replace(Ne,"");var xe=this.decodeFragment(L);if(this.fragment!==xe){if(this.fragment=xe,this._usePushState)this.history[B.replace?"replaceState":"pushState"]({},document.title,X);else if(this._wantsHashChange){if(this._updateHash(this.location,L,B.replace),this.iframe&&L!==this.getHash(this.iframe.contentWindow)){var ue=this.iframe.contentWindow;B.replace||(ue.document.open(),ue.document.close()),this._updateHash(ue.location,L,B.replace)}}else return this.location.assign(X);if(B.trigger)return this.loadUrl(L)}},_updateHash:function(L,B,H){if(H){var X=L.href.replace(/(javascript:|#).*$/,"");L.replace(X+"#"+B)}else L.hash="#"+B}}),r.history=new te;var Re=function(L,B){var H=this,X;return L&&n.has(L,"constructor")?X=L.constructor:X=function(){return H.apply(this,arguments)},n.extend(X,H,B),X.prototype=n.create(H.prototype,L),X.prototype.constructor=X,X.__super__=H.prototype,X};E.extend=A.extend=Te.extend=W.extend=te.extend=Re;var rt=function(){throw new Error('A "url" property or function must be specified')},Ve=function(L,B){var H=B.error;B.error=function(X){H&&H.call(B.context,L,X,B),L.trigger("error",L,X,B)}};return r})}(SS)),SS}var Jce=Zce();const Jn=Dl(Jce);var Qce=W$();const It=Dl(Qce),$e=function(){var e=typeof window=="object"&&!!window.SVGAngle;if(!e)return function(){throw new Error("SVG is required to use Vectorizer.")};var t={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},r="1.1",n=Math,i=n.PI,s=n.atan2,o=n.sqrt,a=n.min,u=n.max,c=n.cos,f=n.sin,h=function(p,P,O){if(!(this instanceof h))return h.apply(Object.create(h.prototype),arguments);if(p){if(h.isV(p)&&(p=p.node),P=P||{},h.isString(p)){if(p=p.trim(),p.toLowerCase()==="svg")p=h.createSvgDocument();else if(p[0]==="<"){var N=h.createSvgDocument(p);if(N.childNodes.length>1){var V=[],W,G;for(W=0,G=N.childNodes.length;W<G;W++){var ee=N.childNodes[W];V.push(new h(document.importNode(ee,!0)))}return V}p=document.importNode(N.firstChild,!0)}else p=document.createElementNS(t.svg,p);h.ensureId(p)}return this.node=p,this.setAttributes(P),O&&this.append(O),this}},g=h.prototype;Object.defineProperty(g,"id",{enumerable:!0,get:function(){return this.node.id},set:function(p){this.node.id=p}}),g.getTransformToElement=function(p){var P=this.node;if(h.isSVGGraphicsElement(p)&&h.isSVGGraphicsElement(P)){var O=h.toNode(p).getScreenCTM(),N=P.getScreenCTM();if(O&&N)return O.inverse().multiply(N)}return h.createSVGMatrix()},g.transform=function(p,P){var O=this.node;if(h.isUndefined(p))return h.transformStringToMatrix(this.attr("transform"));if(P&&P.absolute)return this.attr("transform",h.matrixToTransformString(p));var N=h.createSVGTransform(p);return O.transform.baseVal.appendItem(N),this},g.translate=function(p,P,O){O=O||{},P=P||0;var N=this.attr("transform")||"",V=h.parseTransformString(N);if(N=V.value,h.isUndefined(p))return V.translate;N=N.replace(/translate\([^)]*\)/g,"").trim();var W=O.absolute?p:V.translate.tx+p,G=O.absolute?P:V.translate.ty+P,ee="translate("+W+","+G+")";return this.attr("transform",(ee+" "+N).trim()),this},g.rotate=function(p,P,O,N){N=N||{};var V=this.attr("transform")||"",W=h.parseTransformString(V);if(V=W.value,h.isUndefined(p))return W.rotate;V=V.replace(/rotate\([^)]*\)/g,"").trim(),p%=360;var G=N.absolute?p:W.rotate.angle+p,ee=P!==void 0&&O!==void 0?","+P+","+O:"",ae="rotate("+G+ee+")";return this.attr("transform",(V+" "+ae).trim()),this},g.scale=function(p,P){P=h.isUndefined(P)?p:P;var O=this.attr("transform")||"",N=h.parseTransformString(O);if(O=N.value,h.isUndefined(p))return N.scale;O=O.replace(/scale\([^)]*\)/g,"").trim();var V="scale("+p+","+P+")";return this.attr("transform",(O+" "+V).trim()),this},g.bbox=function(p,P){var O,N=this.node,V=N.ownerSVGElement;if(!V)return new vt(0,0,0,0);try{O=N.getBBox()}catch{O={x:N.clientLeft,y:N.clientTop,width:N.clientWidth,height:N.clientHeight}}if(p)return new vt(O);var W=this.getTransformToElement(P||V);return h.transformRect(O,W)},g.getBBox=function(p){var P={},O,N=this.node,V=N.ownerSVGElement;if(!V||!h.isSVGGraphicsElement(N))return new vt(0,0,0,0);if(p&&(p.target&&(P.target=h.toNode(p.target)),p.recursive&&(P.recursive=p.recursive)),P.recursive){var G=this.children(),ee=G.length;if(ee===0)return this.getBBox({target:P.target,recursive:!1});P.target||(P.target=this);for(var ae=0;ae<ee;ae++){var K=G[ae],U;K.children().length===0?U=K.getBBox({target:P.target,recursive:!1}):U=K.getBBox({target:P.target,recursive:!0}),O?O=O.union(U):O=U}return O}else{try{O=N.getBBox()}catch{O={x:N.clientLeft,y:N.clientTop,width:N.clientWidth,height:N.clientHeight}}if(P.target){var W=this.getTransformToElement(P.target);return h.transformRect(O,W)}else return new vt(O)}};function y(p,P){p||(p={});var O=h("textPath"),N=p.d;if(N&&p["xlink:href"]===void 0){var V=h("path").attr("d",N).appendTo(P.defs());O.attr("xlink:href","#"+V.id)}return h.isObject(p)&&O.attr(p),O.node}function m(p,P,O){O||(O={});for(var N=O.includeAnnotationIndices,V=O.eol,W=O.lineHeight,G=O.baseSize,ee=0,ae={},K=P.length-1,U=0;U<=K;U++){var j=P[U],J=null;if(h.isObject(j)){var de=j.attrs,ce=h("tspan",de),Te=ce.node,Se=j.t;V&&U===K&&(Se+=V),Te.textContent=Se;var re=de.class;re&&ce.addClass(re),N&&ce.attr("annotations",j.annotations),J=parseFloat(de["font-size"]),isFinite(J)||(J=G),J&&J>ee&&(ee=J)}else V&&U===K&&(j+=V),Te=document.createTextNode(j||" "),G&&G>ee&&(ee=G);p.appendChild(Te)}return ee&&(ae.maxFontSize=ee),W?ae.lineHeight=W:ee&&(ae.lineHeight=ee*1.2),ae}var _=/em$/;function b(p,P){var O=parseFloat(p);return _.test(p)?O*P:O}function S(p,P,O,N){if(!Array.isArray(P))return 0;var V=P.length;if(!V)return 0;for(var W=P[0],G=b(W.maxFontSize,O)||O,ee=0,ae=b(N,O),K=1;K<V;K++){W=P[K];var U=b(W.lineHeight,O)||ae;ee+=U}var j=b(W.maxFontSize,O)||O,J;switch(p){case"middle":J=G/2-.15*j-ee/2;break;case"bottom":J=-(.25*j)-ee;break;default:case"top":J=.8*G;break}return J}g.text=function(p,P){if(p&&typeof p!="string")throw new Error("Vectorizer: text() expects the first argument to be a string.");p=h.sanitizeText(p),P||(P={});var O=P.displayEmpty,N=P.eol,V=P.textPath,W=P.textVerticalAnchor,G=W==="middle"||W==="bottom"||W==="top",ee=P.x;ee===void 0&&(ee=this.attr("x")||0);var ae=P.includeAnnotationIndices,K=P.annotations;K&&!h.isArray(K)&&(K=[K]);var U=P.lineHeight,j=U==="auto",J=j?"1.5em":U||"1em";this.empty(),this.attr({"xml:space":"preserve",display:p||O?null:"none"});var de=parseFloat(this.attr("font-size"));de||(de=16,(G||K)&&this.attr("font-size",de));var ce=document,Te;V?(typeof V=="string"&&(V={d:V}),Te=y(V,this)):Te=ce.createDocumentFragment();for(var Se=0,re=p.split(`
`),oe=[],ne,te=0,le=re.length-1;te<=le;te++){var We=J,Ne="v-line",Re=ce.createElementNS(t.svg,"tspan"),rt=re[te],Ve;if(rt)if(K){var L=h.annotateString(rt,K,{offset:-Se,includeAnnotationIndices:ae});Ve=m(Re,L,{includeAnnotationIndices:ae,eol:te!==le&&N,lineHeight:j?null:J,baseSize:de});var B=Ve.lineHeight;B&&j&&te!==0&&(We=B),te===0&&(ne=Ve.maxFontSize*.8)}else N&&te!==le&&(rt+=N),Re.textContent=rt;else{Re.textContent="-",Ne+=" v-empty-line";var H=Re.style;if(H.fillOpacity=0,H.strokeOpacity=0,K){Ve={},L=h.findAnnotationsAtIndex(K,Se);let xe=de;for(let ue=L.length;ue>0;ue--){const Ae=L[ue-1].attrs;if(!Ae||!("font-size"in Ae))continue;const Ce=parseFloat(Ae["font-size"]);if(isFinite(Ce)){xe=Ce;break}}j&&(te>0?We=xe*1.2:ne=xe*.8),Re.setAttribute("font-size",xe),Ve.maxFontSize=xe}}Ve&&oe.push(Ve),te>0&&Re.setAttribute("dy",We),(te>0||V)&&Re.setAttribute("x",ee),Re.className.baseVal=Ne,Te.appendChild(Re),Se+=rt.length+1}if(G)if(K)We=S(W,oe,de,J);else if(W==="top")We="0.8em";else{var X;switch(le>0?(X=parseFloat(J)||1,X*=le,_.test(J)||(X/=de)):X=0,W){case"middle":We=.3-X/2+"em";break;case"bottom":We=-X-.3+"em";break}}else W===0?We="0em":W?We=W:(We=0,this.attr("y")===null&&this.attr("y",ne||"0.8em"));return Te.firstChild.setAttribute("dy",We),this.append(Te),this},g.removeAttr=function(p){const P=I[p],{ns:O,local:N}=h.qualifyAttr(P),V=this.node;return O?V.hasAttributeNS(O,N)&&V.removeAttributeNS(O,N):V.hasAttribute(P)&&V.removeAttribute(P),this},g.attr=function(p,P){if(h.isUndefined(p)){for(var O=this.node.attributes,N={},V=0;V<O.length;V++)N[O[V].name]=O[V].value;return N}if(h.isString(p)&&h.isUndefined(P))return this.node.getAttribute(I[p]);if(typeof p=="object")for(var W in p)p.hasOwnProperty(W)&&this.setAttribute(W,p[W]);else this.setAttribute(p,P);return this},g.normalizePath=function(){var p=this.tagName();return p==="PATH"&&this.attr("d",h.normalizePathData(this.attr("d"))),this},g.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},g.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},g.setAttributes=function(p){for(var P in p)p.hasOwnProperty(P)&&this.setAttribute(P,p[P]);return this},g.append=function(p){h.isArray(p)||(p=[p]);for(var P=0,O=p.length;P<O;P++)this.node.appendChild(h.toNode(p[P]));return this},g.prepend=function(p){var P=this.node.firstChild;return P?h(P).before(p):this.append(p)},g.before=function(p){var P=this.node,O=P.parentNode;if(O){h.isArray(p)||(p=[p]);for(var N=0,V=p.length;N<V;N++)O.insertBefore(h.toNode(p[N]),P)}return this},g.appendTo=function(p){return h.toNode(p).appendChild(this.node),this},g.svg=function(){return this.node instanceof window.SVGSVGElement?this:h(this.node.ownerSVGElement)},g.tagName=function(){return this.node.tagName.toUpperCase()},g.defs=function(){var p=this.svg()||this,P=p.node.getElementsByTagName("defs")[0];return P?h(P):h("defs").appendTo(p)},g.clone=function(){var p=h(this.node.cloneNode(!0));return p.node.id=h.uniqueId(),p},g.findOne=function(p){var P=this.node.querySelector(p);return P?h(P):void 0},g.find=function(p){var P=[],O=this.node.querySelectorAll(p);if(O)for(var N=0;N<O.length;N++)P.push(h(O[N]));return P},g.children=function(){for(var p=this.node.childNodes,P=[],O=0;O<p.length;O++){var N=p[O];N.nodeType===1&&P.push(h(p[O]))}return P},g.parent=function(){return h(this.node.parentNode)||null},g.index=function(){for(var p=0,P=this.node.previousSibling;P;)P.nodeType===1&&p++,P=P.previousSibling;return p},g.findParentByClass=function(p,P){for(var O=this.node.ownerSVGElement,N=this.node.parentNode;N&&N!==P&&N!==O;){var V=h(N);if(V.hasClass(p))return V;N=N.parentNode}return null},g.contains=function(p){var P=this.node,O=h.toNode(p),N=O&&O.parentNode;return P===N||!!(N&&N.nodeType===1&&P.compareDocumentPosition(N)&16)},g.toLocalPoint=function(p,P){var O=this.svg().node,N=O.createSVGPoint();N.x=p,N.y=P;try{var V=N.matrixTransform(O.getScreenCTM().inverse()),W=this.getTransformToElement(O).inverse()}catch{return N}return V.matrixTransform(W)},g.translateCenterToPoint=function(p){var P=this.getBBox({target:this.svg()}),O=P.center();return this.translate(p.x-O.x,p.y-O.y),this},g.translateAndAutoOrient=function(p,P,O){p=new pe(p),P=new pe(P),O||(O=this.svg());var N=this.scale();this.attr("transform","");var V=this.getBBox({target:O}).scale(N.sx,N.sy),W=h.createSVGTransform();W.setTranslate(-V.x-V.width/2,-V.y-V.height/2);var G=h.createSVGTransform(),ee=p.angleBetween(P,p.clone().offset(1,0));ee&&G.setRotate(ee,0,0);var ae=h.createSVGTransform(),K=p.clone().move(P,V.width/2);ae.setTranslate(2*p.x-K.x,2*p.y-K.y);var U=this.getTransformToElement(O),j=h.createSVGTransform();return j.setMatrix(ae.matrix.multiply(G.matrix.multiply(W.matrix.multiply(U.scale(N.sx,N.sy))))),this.attr("transform",h.matrixToTransformString(j.matrix)),this},g.animateAlongPath=function(p,P){P=h.toNode(P);var O=h.ensureId(P),N=h("animateMotion",p),V=h("mpath",{"xlink:href":"#"+O});N.append(V),this.append(N);try{N.node.beginElement()}catch{if(document.documentElement.getAttribute("smiling")==="fake"){var W=N.node;W.animators=[];var G=W.getAttribute("id");G&&(id2anim[G]=W);for(var ee=getTargets(W),ae=0,K=ee.length;ae<K;ae++){var U=ee[ae],j=new Animator(W,U,ae);animators.push(j),W.animators[ae]=j,j.register()}}}return this};const E=/[^\x20\t\r\n\f]+/g;function A(p){return h.isString(p)?p.trim().match(E)||[]:[]}g.hasClass=function(p){return h.isString(p)?this.node.classList.contains(p.trim()):!1},g.addClass=function(p){return this.node.classList.add(...A(p)),this},g.removeClass=function(p){return this.node.classList.remove(...A(p)),this},g.toggleClass=function(p,P){const O=A(p);for(let N=0;N<O.length;N++)this.node.classList.toggle(O[N],P);return this},g.sample=function(p){p=p||1;for(var P=this.node,O=P.getTotalLength(),N=[],V=0,W;V<O;)W=P.getPointAtLength(V),N.push({x:W.x,y:W.y,distance:V}),V+=p;return N},g.convertToPath=function(){var p=h("path");p.attr(this.attr());var P=this.convertToPathData();return P&&p.attr("d",P),p},g.convertToPathData=function(){var p=this.tagName();switch(p){case"PATH":return this.attr("d");case"LINE":return h.convertLineToPathData(this.node);case"POLYGON":return h.convertPolygonToPathData(this.node);case"POLYLINE":return h.convertPolylineToPathData(this.node);case"ELLIPSE":return h.convertEllipseToPathData(this.node);case"CIRCLE":return h.convertCircleToPathData(this.node);case"RECT":return h.convertRectToPathData(this.node)}throw new Error(p+" cannot be converted to PATH.")},h.prototype.toGeometryShape=function(){var p,P,O,N,V,W,G,ee,ae,K,U,j,J,de,ce;switch(this.tagName()){case"RECT":return p=parseFloat(this.attr("x"))||0,P=parseFloat(this.attr("y"))||0,O=parseFloat(this.attr("width"))||0,N=parseFloat(this.attr("height"))||0,new vt(p,P,O,N);case"CIRCLE":return V=parseFloat(this.attr("cx"))||0,W=parseFloat(this.attr("cy"))||0,G=parseFloat(this.attr("r"))||0,new Xi({x:V,y:W},G,G);case"ELLIPSE":return V=parseFloat(this.attr("cx"))||0,W=parseFloat(this.attr("cy"))||0,ee=parseFloat(this.attr("rx"))||0,ae=parseFloat(this.attr("ry"))||0,new Xi({x:V,y:W},ee,ae);case"POLYLINE":return K=h.getPointsFromSvgNode(this),new dn(K);case"POLYGON":return K=h.getPointsFromSvgNode(this),K.length>1&&K.push(K[0]),new dn(K);case"PATH":return U=this.attr("d"),Nt.isDataSupported(U)||(U=h.normalizePathData(U)),new Nt(U);case"LINE":return j=parseFloat(this.attr("x1"))||0,de=parseFloat(this.attr("y1"))||0,J=parseFloat(this.attr("x2"))||0,ce=parseFloat(this.attr("y2"))||0,new bt({x:j,y:de},{x:J,y:ce})}return this.getBBox()},g.findIntersection=function(p,P){var O=this.svg().node;P=P||O;var N=this.getBBox({target:P}),V=N.center();if(N.intersectionWithLineFromCenterToPoint(p)){var W,G=this.tagName();if(G==="RECT"){var ee=new vt(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),ae=this.getTransformToElement(P),K=h.decomposeMatrix(ae),U=O.createSVGTransform();U.setRotate(-K.rotation,V.x,V.y);var j=h.transformRect(ee,U.matrix.multiply(ae));W=new vt(j).intersectionWithLineFromCenterToPoint(p,K.rotation)}else if(G==="PATH"||G==="POLYGON"||G==="POLYLINE"||G==="CIRCLE"||G==="ELLIPSE"){var J=G==="PATH"?this:this.convertToPath(),de=J.sample(),ce=1/0,Te=[],Se,re,oe,ne,te,le;for(Se=0;Se<de.length;Se++)re=de[Se],oe=h.createSVGPoint(re.x,re.y),oe=oe.matrixTransform(this.getTransformToElement(P)),re=new pe(oe),ne=re.distance(V),te=re.distance(p)*1.1,le=ne+te,le<ce?(ce=le,Te=[{sample:re,refDistance:te}]):le<ce+1&&Te.push({sample:re,refDistance:te});Te.sort(function(We,Ne){return We.refDistance-Ne.refDistance}),Te[0]&&(W=Te[0].sample)}return W}},g.setAttribute=function(p,P){const O=this.node;if(P===null)return this.removeAttr(p),this;const N=I[p],{ns:V}=h.qualifyAttr(N);return V?O.setAttributeNS(V,N,P):N==="id"?O.id=P:O.setAttribute(N,P),this},h.createSvgDocument=function(p){if(p){const O=`<svg xmlns="${t.svg}" xmlns:xlink="${t.xlink}" version="${r}">${p}</svg>`,{documentElement:N}=h.parseXML(O,{async:!1});return N}const P=document.createElementNS(t.svg,"svg");return P.setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),P.setAttribute("version",r),P},h.createSVGStyle=function(p){const{node:P}=h("style",{type:"text/css"},[h.createCDATASection(p)]);return P},h.createCDATASection=function(p=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(p)},h.idCounter=0,h.uniqueId=function(){return"v-"+ ++h.idCounter},h.toNode=function(p){return h.isV(p)?p.node:p.nodeName&&p||p[0]},h.ensureId=function(p){return p=h.toNode(p),p.id||(p.id=h.uniqueId())},h.sanitizeText=function(p){return(p||"").replace(/ /g,"Â ")},h.isUndefined=function(p){return typeof p>"u"},h.isString=function(p){return typeof p=="string"},h.isObject=function(p){return p&&typeof p=="object"},h.isArray=Array.isArray,h.parseXML=function(p,P){P=P||{};var O;try{var N=new DOMParser;h.isUndefined(P.async)||(N.async=P.async),O=N.parseFromString(p,"text/xml")}catch{O=void 0}if(!O||O.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+p);return O};const T=Object.create(null);["baseFrequency","baseProfile","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].forEach(p=>T[p]=p);const I=new Proxy(T,{get(p,P){return h.supportCamelCaseAttributes?P in p?p[P]:p[P]=P.replace(/[A-Z]/g,"-$&").toLowerCase():P}});Object.defineProperty(h,"attributeNames",{value:I,writable:!1}),Object.defineProperty(h,"supportCamelCaseAttributes",{value:!1,writable:!0}),h.qualifyAttr=function(p){if(p.indexOf(":")!==-1){var P=p.split(":");return{ns:t[P[0]],local:P[1]}}return{ns:null,local:p}},h.transformSeparatorRegex=/[ ,]+/,h.transformRegex=/\b\w+\([^()]+\)/g,h.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,h.transformTranslateRegex=/\btranslate\(([^()]+)\)/,h.transformRotateRegex=/\brotate\(([^()]+)\)/,h.transformScaleRegex=/\bscale\(([^()]+)\)/,h.transformStringToMatrix=function(p){let P=h.createSVGMatrix();const O=p&&p.match(h.transformRegex);if(!O)return P;const N=O.length;for(let V=0;V<N;V++){const G=O[V].match(h.transformFunctionRegex);if(G){let ee,ae,K,U,j,J=h.createSVGMatrix();const de=G[1].toLowerCase(),ce=G[2].split(h.transformSeparatorRegex);switch(de){case"scale":ee=parseFloat(ce[0]),ae=ce[1]===void 0?ee:parseFloat(ce[1]),J=J.scaleNonUniform(ee,ae);break;case"translate":K=parseFloat(ce[0]),U=parseFloat(ce[1]),J=J.translate(K,U);break;case"rotate":j=parseFloat(ce[0]),K=parseFloat(ce[1])||0,U=parseFloat(ce[2])||0,K!==0||U!==0?J=J.translate(K,U).rotate(j).translate(-K,-U):J=J.rotate(j);break;case"skewx":j=parseFloat(ce[0]),J=J.skewX(j);break;case"skewy":j=parseFloat(ce[0]),J=J.skewY(j);break;case"matrix":J.a=parseFloat(ce[0]),J.b=parseFloat(ce[1]),J.c=parseFloat(ce[2]),J.d=parseFloat(ce[3]),J.e=parseFloat(ce[4]),J.f=parseFloat(ce[5]);break;default:continue}P=P.multiply(J)}}return P},h.matrixToTransformString=function(p){return p||(p=!0),"matrix("+(p.a!==void 0?p.a:1)+","+(p.b!==void 0?p.b:0)+","+(p.c!==void 0?p.c:0)+","+(p.d!==void 0?p.d:1)+","+(p.e!==void 0?p.e:0)+","+(p.f!==void 0?p.f:0)+")"},h.parseTransformString=function(p){var P,O,N;if(p){var V=h.transformSeparatorRegex;if(p.trim().indexOf("matrix")>=0){var W=h.transformStringToMatrix(p),G=h.decomposeMatrix(W);P=[G.translateX,G.translateY],N=[G.scaleX,G.scaleY],O=[G.rotation];var ee=[];(P[0]!==0||P[1]!==0)&&ee.push("translate("+P+")"),(N[0]!==1||N[1]!==1)&&ee.push("scale("+N+")"),O[0]!==0&&ee.push("rotate("+O+")"),p=ee.join(" ")}else{const K=p.match(h.transformTranslateRegex);K&&(P=K[1].split(V));const U=p.match(h.transformRotateRegex);U&&(O=U[1].split(V));const j=p.match(h.transformScaleRegex);j&&(N=j[1].split(V))}}var ae=N&&N[0]?parseFloat(N[0]):1;return{value:p,translate:{tx:P&&P[0]?parseInt(P[0],10):0,ty:P&&P[1]?parseInt(P[1],10):0},rotate:{angle:O&&O[0]?parseInt(O[0],10):0,cx:O&&O[1]?parseInt(O[1],10):void 0,cy:O&&O[2]?parseInt(O[2],10):void 0},scale:{sx:ae,sy:N&&N[1]?parseFloat(N[1]):ae}}},h.deltaTransformPoint=function(p,P){var O=P.x*p.a+P.y*p.c+0,N=P.x*p.b+P.y*p.d+0;return{x:O,y:N}},h.decomposeMatrix=function(p){var P=h.deltaTransformPoint(p,{x:0,y:1}),O=h.deltaTransformPoint(p,{x:1,y:0}),N=180/i*s(P.y,P.x)-90,V=180/i*s(O.y,O.x);return{translateX:p.e,translateY:p.f,scaleX:o(p.a*p.a+p.b*p.b),scaleY:o(p.c*p.c+p.d*p.d),skewX:N,skewY:V,rotation:N}},h.matrixToScale=function(p){var P,O,N,V;return p?(P=h.isUndefined(p.a)?1:p.a,V=h.isUndefined(p.d)?1:p.d,O=p.b,N=p.c):P=V=1,{sx:O?o(P*P+O*O):P,sy:N?o(N*N+V*V):V}},h.matrixToRotate=function(p){var P={x:0,y:1};return p&&(P=h.deltaTransformPoint(p,P)),{angle:Oo(Dg(s(P.y,P.x))-90)}},h.matrixToTranslate=function(p){return{tx:p&&p.e||0,ty:p&&p.f||0}},h.isV=function(p){return p instanceof h},h.isVElement=h.isV,h.isSVGGraphicsElement=function(p){return p?(p=h.toNode(p),p instanceof SVGElement&&typeof p.getScreenCTM=="function"):!1};var q=h("svg").node;return h.createSVGMatrix=function(p){var P=q.createSVGMatrix();for(var O in p)P[O]=p[O];return P},h.createSVGTransform=function(p){return h.isUndefined(p)?q.createSVGTransform():(p instanceof SVGMatrix||(p=h.createSVGMatrix(p)),q.createSVGTransformFromMatrix(p))},h.createSVGPoint=function(p,P){var O=q.createSVGPoint();return O.x=p,O.y=P,O},h.transformRect=function(p,P){var O=q.createSVGPoint();O.x=p.x,O.y=p.y;var N=O.matrixTransform(P);O.x=p.x+p.width,O.y=p.y;var V=O.matrixTransform(P);O.x=p.x+p.width,O.y=p.y+p.height;var W=O.matrixTransform(P);O.x=p.x,O.y=p.y+p.height;var G=O.matrixTransform(P),ee=a(N.x,V.x,W.x,G.x),ae=u(N.x,V.x,W.x,G.x),K=a(N.y,V.y,W.y,G.y),U=u(N.y,V.y,W.y,G.y);return new vt(ee,K,ae-ee,U-K)},h.transformPoint=function(p,P){return new pe(h.createSVGPoint(p.x,p.y).matrixTransform(P))},h.transformLine=function(p,P){return new bt(h.transformPoint(p.start,P),h.transformPoint(p.end,P))},h.transformPolyline=function(p,P){var O=p instanceof dn?p.points:p;h.isArray(O)||(O=[]);for(var N=[],V=0,W=O.length;V<W;V++)N[V]=h.transformPoint(O[V],P);return new dn(N)},h.styleToObject=function(p){for(var P={},O=p.split(";"),N=0;N<O.length;N++){var V=O[N],W=V.split("=");P[W[0].trim()]=W[1].trim()}return P},h.createSlicePathData=function(p,P,O,N){var V=2*i-1e-6,W=p,G=P,ee=O,ae=N,K=(ae<ee&&(K=ee,ee=ae,ae=K),ae-ee),U=K<i?"0":"1",j=c(ee),J=f(ee),de=c(ae),ce=f(ae);return K>=V?W?"M0,"+G+"A"+G+","+G+" 0 1,1 0,"+-G+"A"+G+","+G+" 0 1,1 0,"+G+"M0,"+W+"A"+W+","+W+" 0 1,0 0,"+-W+"A"+W+","+W+" 0 1,0 0,"+W+"Z":"M0,"+G+"A"+G+","+G+" 0 1,1 0,"+-G+"A"+G+","+G+" 0 1,1 0,"+G+"Z":W?"M"+G*j+","+G*J+"A"+G+","+G+" 0 "+U+",1 "+G*de+","+G*ce+"L"+W*de+","+W*ce+"A"+W+","+W+" 0 "+U+",0 "+W*j+","+W*J+"Z":"M"+G*j+","+G*J+"A"+G+","+G+" 0 "+U+",1 "+G*de+","+G*ce+"L0,0Z"},h.mergeAttrs=function(p,P){for(var O in P)O==="class"?p[O]=p[O]?p[O]+" "+P[O]:P[O]:O==="style"?h.isObject(p[O])&&h.isObject(P[O])?p[O]=h.mergeAttrs(p[O],P[O]):h.isObject(p[O])?p[O]=h.mergeAttrs(p[O],h.styleToObject(P[O])):h.isObject(P[O])?p[O]=h.mergeAttrs(h.styleToObject(p[O]),P[O]):p[O]=h.mergeAttrs(h.styleToObject(p[O]),h.styleToObject(P[O])):p[O]=P[O];return p},h.annotateString=function(p,P,O){P=P||[],O=O||{};for(var N=O.offset||0,V=[],W,G=[],ee,ae,K=0;K<p.length;K++){ee=G[K]=p[K];for(var U=0;U<P.length;U++){var j=P[U],J=j.start+N,de=j.end+N;K>=J&&K<de&&(h.isObject(ee)?ee.attrs=h.mergeAttrs(h.mergeAttrs({},ee.attrs),j.attrs):ee=G[K]={t:p[K],attrs:j.attrs},O.includeAnnotationIndices&&(ee.annotations||(ee.annotations=[])).push(U))}ae=G[K-1],ae?h.isObject(ee)&&h.isObject(ae)?JSON.stringify(ee.attrs)===JSON.stringify(ae.attrs)?W.t+=ee.t:(V.push(W),W=ee):h.isObject(ee)||h.isObject(ae)?(V.push(W),W=ee):W=(W||"")+ee:W=ee}return W&&V.push(W),V},h.findAnnotationsAtIndex=function(p,P){var O=[];return p&&p.forEach(function(N){N.start<P&&P<=N.end&&O.push(N)}),O},h.findAnnotationsBetweenIndexes=function(p,P,O){var N=[];return p&&p.forEach(function(V){(P>=V.start&&P<V.end||O>V.start&&O<=V.end||V.start>=P&&V.end<O)&&N.push(V)}),N},h.shiftAnnotations=function(p,P,O){return p&&p.forEach(function(N){N.start<P&&N.end>=P?N.end+=O:N.start>=P&&(N.start+=O,N.end+=O)}),p},h.convertLineToPathData=function(p){p=h(p);var P=["M",p.attr("x1"),p.attr("y1"),"L",p.attr("x2"),p.attr("y2")].join(" ");return P},h.convertPolygonToPathData=function(p){var P=h.getPointsFromSvgNode(p);return P.length===0?null:h.svgPointsToPath(P)+" Z"},h.convertPolylineToPathData=function(p){var P=h.getPointsFromSvgNode(p);return P.length===0?null:h.svgPointsToPath(P)},h.svgPointsToPath=function(p){for(var P=0,O=p.length;P<O;P++)p[P]=p[P].x+" "+p[P].y;return"M "+p.join(" L")},h.getPointsFromSvgNode=function(p){p=h.toNode(p);var P=[],O=p.points;if(O)for(var N=0,V=O.numberOfItems;N<V;N++)P.push(O.getItem(N));return P},h.KAPPA=.551784,h.convertCircleToPathData=function(p){p=h(p);var P=parseFloat(p.attr("cx"))||0,O=parseFloat(p.attr("cy"))||0,N=parseFloat(p.attr("r")),V=N*h.KAPPA,W=["M",P,O-N,"C",P+V,O-N,P+N,O-V,P+N,O,"C",P+N,O+V,P+V,O+N,P,O+N,"C",P-V,O+N,P-N,O+V,P-N,O,"C",P-N,O-V,P-V,O-N,P,O-N,"Z"].join(" ");return W},h.convertEllipseToPathData=function(p){p=h(p);var P=parseFloat(p.attr("cx"))||0,O=parseFloat(p.attr("cy"))||0,N=parseFloat(p.attr("rx")),V=parseFloat(p.attr("ry"))||N,W=N*h.KAPPA,G=V*h.KAPPA,ee=["M",P,O-V,"C",P+W,O-V,P+N,O-G,P+N,O,"C",P+N,O+G,P+W,O+V,P,O+V,"C",P-W,O+V,P-N,O+G,P-N,O,"C",P-N,O-G,P-W,O-V,P,O-V,"Z"].join(" ");return ee},h.convertRectToPathData=function(p){return p=h(p),h.rectToPath({x:parseFloat(p.attr("x"))||0,y:parseFloat(p.attr("y"))||0,width:parseFloat(p.attr("width"))||0,height:parseFloat(p.attr("height"))||0,rx:parseFloat(p.attr("rx"))||0,ry:parseFloat(p.attr("ry"))||0})},h.rectToPath=function(p){var P,O=p.x,N=p.y,V=p.width,W=p.height,G=a(p.rx||p["top-rx"]||0,V/2),ee=a(p.rx||p["bottom-rx"]||0,V/2),ae=a(p.ry||p["top-ry"]||0,W/2),K=a(p.ry||p["bottom-ry"]||0,W/2);return G||ee||ae||K?P=["M",O,N+ae,"v",W-ae-K,"a",ee,K,0,0,0,ee,K,"h",V-2*ee,"a",ee,K,0,0,0,ee,-K,"v",-(W-K-ae),"a",G,ae,0,0,0,-G,-ae,"h",-(V-2*G),"a",G,ae,0,0,0,-G,ae,"Z"]:P=["M",O,N,"H",O+V,"V",N+W,"H",O,"V",N,"Z"],P.join(" ")},h.normalizePathData=function(){var p=`	
\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029`,P=new RegExp("([a-z])["+p+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+p+"]*,?["+p+"]*)+)","ig"),O=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+p+"]*,?["+p+"]*","ig"),N=Math,V=N.PI,W=N.sin,G=N.cos,ee=N.tan,ae=N.asin,K=N.sqrt,U=N.abs;function j(re,oe,ne,te,le,We){var Ne=.3333333333333333,Re=2/3;return[Ne*re+Re*ne,Ne*oe+Re*te,Ne*le+Re*ne,Ne*We+Re*te,le,We]}function J(re,oe,ne){var te=re*G(ne)-oe*W(ne),le=re*W(ne)+oe*G(ne);return{x:te,y:le}}function de(re,oe,ne,te,le,We,Ne,Re,rt,Ve){var L=V*120/180,B=V/180*(+le||0),H=[],X;if(Ve)je=Ve[0],ct=Ve[1],Ie=Ve[2],be=Ve[3];else{X=J(re,oe,-B),re=X.x,oe=X.y,X=J(Re,rt,-B),Re=X.x,rt=X.y;var xe=(re-Re)/2,ue=(oe-rt)/2,Ae=xe*xe/(ne*ne)+ue*ue/(te*te);Ae>1&&(Ae=K(Ae),ne=Ae*ne,te=Ae*te);var Ce=ne*ne,Be=te*te,Le=(We==Ne?-1:1)*K(U((Ce*Be-Ce*ue*ue-Be*xe*xe)/(Ce*ue*ue+Be*xe*xe))),Ie=Le*ne*ue/te+(re+Re)/2,be=Le*-te*xe/ne+(oe+rt)/2,je=ae(((oe-be)/te).toFixed(9)),ct=ae(((rt-be)/te).toFixed(9));je=re<Ie?V-je:je,ct=Re<Ie?V-ct:ct,je<0&&(je=V*2+je),ct<0&&(ct=V*2+ct),Ne&&je>ct&&(je=je-V*2),!Ne&&ct>je&&(ct=ct-V*2)}var mt=ct-je;if(U(mt)>L){var ft=ct,it=Re,Wt=rt;ct=je+L*(Ne&&ct>je?1:-1),Re=Ie+ne*G(ct),rt=be+te*W(ct),H=de(Re,rt,ne,te,le,0,Ne,it,Wt,[ct,ft,Ie,be])}mt=ct-je;var yr=G(je),Qt=W(je),cr=G(ct),Lr=W(ct),Br=ee(mt/4),bn=4/3*(ne*Br),tr=4/3*(te*Br),Or=[re,oe],vn=[re+bn*Qt,oe-tr*yr],mn=[Re+bn*Lr,rt-tr*cr],pn=[Re,rt];if(vn[0]=2*Or[0]-vn[0],vn[1]=2*Or[1]-vn[1],Ve)return[vn,mn,pn].concat(H);H=[vn,mn,pn].concat(H).join().split(",");for(var Gn=[],ei=H.length,Bt=0;Bt<ei;Bt++)Gn[Bt]=Bt%2?J(H[Bt-1],H[Bt],B).y:J(H[Bt],H[Bt+1],B).x;return Gn}function ce(re){if(!re)return null;var oe={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},ne=[];return String(re).replace(P,function(te,le,We){var Ne=[],Re=le.toLowerCase();for(We.replace(O,function(rt,Ve){Ve&&Ne.push(+Ve)}),Re==="m"&&Ne.length>2&&(ne.push([le].concat(Ne.splice(0,2))),Re="l",le=le==="m"?"l":"L");Ne.length>=oe[Re]&&(ne.push([le].concat(Ne.splice(0,oe[Re]))),!!oe[Re]););}),ne}function Te(re){if((!Array.isArray(re)||!Array.isArray(re&&re[0]))&&(re=ce(re)),!re||!re.length)return[["M",0,0]];for(var oe=[],ne=0,te=0,le=0,We=0,Ne=0,Re,rt=re.length,Ve=Ne;Ve<rt;Ve++){var L=[];oe.push(L);var B=re[Ve];if(Re=B[0],Re!=Re.toUpperCase()){L[0]=Re.toUpperCase();var H,X;switch(L[0]){case"A":L[1]=B[1],L[2]=B[2],L[3]=B[3],L[4]=B[4],L[5]=B[5],L[6]=+B[6]+ne,L[7]=+B[7]+te;break;case"V":L[1]=+B[1]+te;break;case"H":L[1]=+B[1]+ne;break;case"M":for(le=+B[1]+ne,We=+B[2]+te,H=B.length,X=1;X<H;X++)L[X]=+B[X]+(X%2?ne:te);break;default:for(H=B.length,X=1;X<H;X++)L[X]=+B[X]+(X%2?ne:te);break}}else for(var xe=B.length,ue=0;ue<xe;ue++)L[ue]=B[ue];switch(L[0]){case"Z":ne=+le,te=+We;break;case"H":ne=L[1];break;case"V":te=L[1];break;case"M":le=L[L.length-2],We=L[L.length-1],ne=L[L.length-2],te=L[L.length-1];break;default:ne=L[L.length-2],te=L[L.length-1];break}}return oe}function Se(re){var oe=Te(re),ne={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function te(H,X,xe){var ue,Ae;if(!H)return["C",X.x,X.y,X.x,X.y,X.x,X.y];switch(H[0]in{T:1,Q:1}||(X.qx=null,X.qy=null),H[0]){case"M":X.X=H[1],X.Y=H[2];break;case"A":parseFloat(H[1])===0||parseFloat(H[2])===0?H=["L",H[6],H[7]]:H=["C"].concat(de.apply(0,[X.x,X.y].concat(H.slice(1))));break;case"S":xe==="C"||xe==="S"?(ue=X.x*2-X.bx,Ae=X.y*2-X.by):(ue=X.x,Ae=X.y),H=["C",ue,Ae].concat(H.slice(1));break;case"T":xe==="Q"||xe==="T"?(X.qx=X.x*2-X.qx,X.qy=X.y*2-X.qy):(X.qx=X.x,X.qy=X.y),H=["C"].concat(j(X.x,X.y,X.qx,X.qy,H[1],H[2]));break;case"Q":X.qx=H[1],X.qy=H[2],H=["C"].concat(j(X.x,X.y,H[1],H[2],H[3],H[4]));break;case"H":H=["L"].concat(H[1],X.y);break;case"V":H=["L"].concat(X.x,H[1]);break}return H}function le(H,X){if(H[X].length>7){H[X].shift();for(var xe=H[X];xe.length;)We[X]="A",H.splice(X++,0,["C"].concat(xe.splice(0,6)));H.splice(X,1),rt=oe.length}}for(var We=[],Ne="",Re="",rt=oe.length,Ve=0;Ve<rt;Ve++){oe[Ve]&&(Ne=oe[Ve][0]),Ne!=="C"&&(We[Ve]=Ne,Ve>0&&(Re=We[Ve-1])),oe[Ve]=te(oe[Ve],ne,Re),We[Ve]!=="A"&&Ne==="C"&&(We[Ve]="C"),le(oe,Ve);var L=oe[Ve],B=L.length;ne.x=L[B-2],ne.y=L[B-1],ne.bx=parseFloat(L[B-4])||ne.x,ne.by=parseFloat(L[B-3])||ne.y}return(!oe[0][0]||oe[0][0]!=="M")&&oe.unshift(["M",0,0]),oe}return function(re){return Se(re).join(",").split(",").join(" ")}}(),h.namespace=t,h.g=wce,h}(),yu={classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},fh="[object Arguments]",rE="[object Array]",Jg="[object Boolean]",CA="[object Date]",X$="[object Error]",ele="[object Function]",Fh="[object Map]",Qg="[object Number]",tle="[object Null]",ol="[object Object]",RA="[object RegExp]",Bh="[object Set]",ev="[object String]",tv="[object Symbol]",rle="[object Undefined]",nle="[object WeakMap]",IA="[object ArrayBuffer]",OA="[object DataView]",Y$="[object Float32Array]",K$="[object Float64Array]",Z$="[object Int8Array]",J$="[object Int16Array]",Q$="[object Int32Array]",eU="[object Uint8Array]",tU="[object Uint8ClampedArray]",rU="[object Uint16Array]",nU="[object Uint32Array]",ile={[fh]:!0,[rE]:!0,[IA]:!0,[OA]:!0,[Jg]:!0,[CA]:!0,[Y$]:!0,[K$]:!0,[Z$]:!0,[J$]:!0,[Q$]:!0,[Fh]:!0,[Qg]:!0,[ol]:!0,[RA]:!0,[Bh]:!0,[ev]:!0,[tv]:!0,[eU]:!0,[tU]:!0,[rU]:!0,[nU]:!0,[X$]:!1,[ele]:!1,[nle]:!1},MA="\\ud800-\\udfff",sle="\\u0300-\\u036f",ole="\\ufe20-\\ufe2f",ale="\\u20d0-\\u20ff",ule="\\u1ab0-\\u1aff",cle="\\u1dc0-\\u1dff",lle=sle+ole+ale+ule+cle,iU="\\u2700-\\u27bf",sU="a-z\\xdf-\\xf6\\xf8-\\xff",fle="\\xac\\xb1\\xd7\\xf7",hle="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",dle="\\u2000-\\u206f",ple=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",oU="A-Z\\xc0-\\xd6\\xd8-\\xde",gle="\\ufe0e\\ufe0f",aU=fle+hle+dle+ple,uU="['â]",u5=`[${aU}]`,kA=`[${lle}]`,cU="\\d",vle=`[${iU}]`,lU=`[${sU}]`,fU=`[^${MA}${aU+cU+iU+sU+oU}]`,nE="\\ud83c[\\udffb-\\udfff]",mle=`(?:${kA}|${nE})`,hU=`[^${MA}]`,LA="(?:\\ud83c[\\udde6-\\uddff]){2}",NA="[\\ud800-\\udbff][\\udc00-\\udfff]",rl=`[${oU}]`,yle="\\u200d",c5=`(?:${lU}|${fU})`,_le=`(?:${rl}|${fU})`,l5=`(?:${uU}(?:d|ll|m|re|s|t|ve))?`,f5=`(?:${uU}(?:D|LL|M|RE|S|T|VE))?`,dU=`${mle}?`,pU=`[${gle}]?`,ble=`(?:${yle}(?:${[hU,LA,NA].join("|")})${pU+dU})*`,wle="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xle="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",gU=pU+dU+ble,Sle=`(?:${[vle,LA,NA].join("|")})${gU}`,Ele=RegExp([`${rl}?${lU}+${l5}(?=${[u5,rl,"$"].join("|")})`,`${_le}+${f5}(?=${[u5,rl+c5,"$"].join("|")})`,`${rl}?${c5}+${l5}`,`${rl}+${f5}`,xle,wle,`${cU}+`,Sle].join("|"),"g"),qA=200,iE="__hash_undefined__",Ale=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,Tle=`[${MA}]`,Ple=`${hU}${kA}?`,Cle=`(?:${[Ple,kA,LA,NA,Tle].join("|")})`,vU=RegExp(`${nE}(?=${nE})|${Cle+gU}`,"g"),Rle=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ile=/^\w*$/,Ole=46,Mle=/\\(\\)?/g,kle=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),Lle=/^(?:0|[1-9]\d*)$/,Nle=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),qle=4294967294,Dle=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,mU=e=>vU.test(e),Fle=e=>e.match(vU)||[],Ble=e=>e.split(""),yU=e=>mU(e)?Fle(e):Ble(e),zle=e=>e==null?[]:zh(e).map(t=>e[t]),zh=e=>po(e)?_U(e):Object.keys(Object(e)),Vle=e=>{if(!rv(e))return Object.keys(e);var t=[];for(var r in Object(e))hasOwnProperty.call(e,r)&&r!="constructor"&&t.push(r);return t},_U=(e,t)=>{const r=Array.isArray(e),n=!r&&ko(e)&&oo(e)===fh,i=!r&&!n&&Gh(e),s=r||n||i,o=e.length,a=new Array(s?o:0);let u=s?-1:o;for(;++u<o;)a[u]=`${u}`;for(const c in e)(t||hasOwnProperty.call(e,c))&&!(s&&(c==="length"||VA(c,o)))&&a.push(c);return a},ep=(e,t)=>{let{length:r}=e;for(;r--;)if(Xl(e[r][0],t))return r;return-1},Xl=(e,t)=>e===t||e!==e&&t!==t,ko=e=>e!=null&&typeof e=="object",Fp=(e,t,r)=>{if(!Wr(r))return!1;const n=typeof t;return(n=="number"?po(r)&&t>-1&&t<r.length:n=="string"&&t in r)?Xl(r[t],e):!1},Gle=e=>ko(e)&&oo(e)==Bh,$le=e=>ko(e)&&oo(e)==Fh,rv=e=>{const t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Object.prototype;return e===r},Yl=(e,t,r)=>{const n=e[t];(!(hasOwnProperty.call(e,t)&&Xl(n,r))||r===void 0&&!(t in e))&&(e[t]=r)},Vh=(e,t,r)=>{let n=-1;const i=t.length;for(;++n<i;){const s=t[n];Yl(r,s,e[s])}return r},po=e=>e!=null&&typeof e!="function"&&typeof e.length=="number"&&e.length>-1&&e.length%1===0,Tl=e=>typeof e=="symbol"||ko(e)&&oo(e)===tv,Ule=e=>{const t=e.length;let r=new e.constructor(t);return t&&typeof e[0]=="string"&&hasOwnProperty.call(e,"index")&&(r.index=e.index,r.input=e.input),r},DA=(e,t)=>{let r=-1;const n=e.length;for(t||(t=new Array(n));++r<n;)t[r]=e[r];return t},oo=e=>e==null?e===void 0?rle:tle:Object.prototype.toString.call(e),FA=e=>{const t=new e.constructor(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t},bU=(e,t)=>{const r=t?FA(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},jle=e=>{const t=new e.constructor(e.source,/\w*$/.exec(e));return t.lastIndex=e.lastIndex,t},wU=e=>typeof e.constructor=="function"&&!rv(e)?Object.create(Object.getPrototypeOf(e)):{},BA=e=>e==null?[]:(e=Object(e),Object.getOwnPropertySymbols(e).filter(r=>propertyIsEnumerable.call(e,r))),Hle=(e,t)=>Vh(e,BA(e),t);function Wle(e,t){const r=t?FA(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}const Xle=(e,t,r)=>{const n=e.constructor;switch(t){case IA:return FA(e);case Jg:case CA:return new n(+e);case OA:return Wle(e,r);case Y$:case K$:case Z$:case J$:case Q$:case eU:case tU:case rU:case nU:return bU(e,r);case Fh:return new n(e);case Qg:case ev:return new n(e);case RA:return jle(e);case Bh:return new n;case tv:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(e)):{}}},Gh=e=>ko(e)&&Ale.test(oo(e)),sE=e=>{const t=Object.keys(e);return!Array.isArray(e)&&e!=null&&t.push(...BA(Object(e))),t},xU=e=>{const t=[];for(;e;)t.push(...BA(e)),e=Object.getPrototypeOf(Object(e));return t},SU=e=>{const t=[];for(const r in e)t.push(r);return Array.isArray(e)||t.push(...xU(e)),t},tp=({__data__:e},t)=>{const r=e;return ofe(t)?r[typeof t=="string"?"string":"hash"]:r.map},Yle=(e,t,r,n)=>{const i=sE(e),s=i.length,a=sE(t).length;if(s!=a)return!1;let u,c=s;for(;c--;)if(u=i[c],!hasOwnProperty.call(t,u))return!1;const f=n.get(e),h=n.get(t);if(f&&h)return f==t&&h==e;let g=!0;n.set(e,t),n.set(t,e);let y;for(;++c<s;){u=i[c];const m=e[u],_=t[u];if(!(m===_||r(m,_,n))){g=!1;break}y||(y=u=="constructor")}if(g&&!y){const m=e.constructor,_=t.constructor;m!=_&&"constructor"in e&&"constructor"in t&&!(typeof m=="function"&&m instanceof m&&typeof _=="function"&&_ instanceof _)&&(g=!1)}return n.delete(e),n.delete(t),g},nv=(e,t,r)=>e===t?!0:e==null||t==null||!ko(e)&&!ko(t)?e!==e&&t!==t:Kle(e,t,nv,r),Kle=(e,t,r,n)=>{let i=Array.isArray(e);const s=Array.isArray(t);let o=i?rE:oo(e),a=s?rE:oo(t);o=o==fh?ol:o,a=a==fh?ol:a;let u=o==ol;const c=a==ol,f=o==a;if(f&&!u)return n||(n=new pl),i||Gh(e)?EU(e,t,!1,r,n):Qle(e,t,o,r,n);const h=u&&hasOwnProperty.call(e,"__wrapped__"),g=c&&hasOwnProperty.call(t,"__wrapped__");if(h||g){const y=h?e.value():e,m=g?t.value():t;return n||(n=new pl),r(y,m,n)}return f?(n||(n=new pl),Yle(e,t,r,n)):!1},EU=(e,t,r,n,i)=>{const s=e.length,o=t.length;if(s!=o)return!1;const a=i.get(e),u=i.get(t);if(a&&u)return a==t&&u==e;let c=-1,f=!0;const h=r?new dh:void 0;for(i.set(e,t),i.set(t,e);++c<s;){const g=e[c],y=t[c];if(h){if(!Zle(t,(m,_)=>{if(!Jle(h,_)&&(g===m||n(g,m,i)))return h.push(_)})){f=!1;break}}else if(!(g===y||n(g,y,i))){f=!1;break}}return i.delete(e),i.delete(t),f},Zle=(e,t)=>{let r=-1;const n=e==null?0:e.length;for(;++r<n;)if(t(e[r],r,e))return!0;return!1},Jle=(e,t)=>e.has(t),h5=(e,t,r,n)=>!(e.byteLength!=t.byteLength||!r(new Uint8Array(e),new Uint8Array(t),n)),Qle=(e,t,r,n,i)=>{switch(r){case OA:return e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset?!1:(e=e.buffer,t=t.buffer,h5(e,t,n,i));case IA:return h5(e,t,n,i);case Jg:case CA:case Qg:return Xl(+e,+t);case X$:return e.name==t.name&&e.message==t.message;case RA:case ev:return e==`${t}`;case Fh:let s=AU;case Bh:if(s||(s=iv),e.size!=t.size)return!1;const o=i.get(e);if(o)return o==t;i.set(e,t);const a=EU(s(e),s(t),!0,n,i);return i.delete(e),a;case tv:return Symbol.prototype.valueOf.call(e)==Symbol.prototype.valueOf.call(t)}return!1},AU=e=>{let t=-1,r=Array(e.size);return e.forEach((n,i)=>{r[++t]=[i,n]}),r},iv=e=>{let t=-1;const r=new Array(e.size);return e.forEach(n=>{r[++t]=n}),r},zA=(e,t)=>{if(Array.isArray(e))return!1;const r=typeof e;return r==="number"||r==="boolean"||e==null||Tl(e)?!0:Ile.test(e)||!Rle.test(e)||t!=null&&e in Object(t)},efe=e=>{const t=[];return e.charCodeAt(0)===Ole&&t.push(""),e.replace(kle,(r,n,i,s)=>{let o=r;i?o=s.replace(Mle,"$1"):n&&(o=n.trim()),t.push(o)}),t},Mu=(e,t)=>Array.isArray(e)?e:zA(e,t)?[e]:efe(`${e}`),$h=(e,t)=>{t=Mu(t,e);let r=0;const n=t.length;for(;e!=null&&r<n;)e=e[ku(t[r])],r++;return r&&r==n?e:void 0};function tfe(e,t){if(e!==t){const r=e!==void 0,n=e===null,i=e===e,s=Tl(e),o=t!==void 0,a=t===null,u=t===t,c=Tl(t);if(!a&&!c&&!s&&e>t||s&&o&&u&&!a&&!c||n&&o&&u||!r&&u||!i)return 1;if(!n&&!s&&!c&&e<t||c&&r&&i&&!n&&!s||a&&r&&i||!o&&i||!u)return-1}return 0}function rfe(e,t,r){let n=-1;const i=e.criteria,s=t.criteria,o=i.length,a=r.length;for(;++n<o;){const u=n<a?r[n]:null,f=(u&&typeof u=="function"?u:tfe)(i[n],s[n]);if(f)return u&&typeof u!="function"?f*(u=="desc"?-1:1):f}return e.index-t.index}const TU=(e,t)=>{let r=(o,a)=>!!(o==null?0:o.length)&&o.indexOf(a)>-1,n=!0;const i=[],s=t.length;if(!e.length)return i;t.length>=qA&&(r=(o,a)=>o.has(a),n=!1,t=new dh(t));e:for(let o in e){let a=e[o];const u=a;if(a=a!==0?a:0,n&&u===u){let c=s;for(;c--;)if(t[c]===u)continue e;i.push(a)}else r(t,u)||i.push(a)}return i},ku=e=>{if(typeof e=="string"||Tl(e))return e;const t=`${e}`;return t=="0"&&1/e==-1/0?"-0":t},dl=(e,t=!1,r=!1,n=!0,i,s,o,a)=>{let u;if(i&&(u=o?i(e,s,o,a):i(e)),u!==void 0)return u;if(!Wr(e))return e;const c=Array.isArray(e),f=oo(e);if(c){if(u=Ule(e),!t)return DA(e,u)}else{const m=typeof e=="function";if(f===ol||f===fh||m&&!o){if(u=r||m?{}:wU(e),!t)return r?nfe(e,Vh(e,Object.keys(e),u)):Hle(e,Object.assign(u,e))}else{if(m||!ile[f])return o?e:{};u=Xle(e,f,t)}}a||(a=new pl);const h=a.get(e);if(h)return h;if(a.set(e,u),$le(e))return e.forEach((m,_)=>{u.set(_,dl(m,t,r,n,i,_,e,a))}),u;if(Gle(e))return e.forEach(m=>{u.add(dl(m,t,r,n,i,m,e,a))}),u;if(Gh(e))return u;const y=c?void 0:(n?r?SU:sE:r?CU:zh)(e);return(y||e).forEach((m,_)=>{y&&(_=m,m=e[_]),Yl(u,_,dl(m,t,r,n,i,_,e,a))}),u},nfe=(e,t)=>Vh(e,xU(e),t),PU=(e,t)=>t.length<2?e:$h(e,t.slice(0,-1)),ife=(e,t,r)=>{if(!Wr(e))return e;t=Mu(t,e);const n=t.length,i=n-1;let s=-1,o=e;for(;o!=null&&++s<n;){const a=ku(t[s]);let u=r;if(s!=i){const c=o[a];u=void 0,u===void 0&&(u=Wr(c)?c:VA(t[s+1])?[]:{})}Yl(o,a,u),o=o[a]}return e},VA=(e,t)=>{const r=typeof e;return t=t??Number.MAX_SAFE_INTEGER,!!t&&(r==="number"||r!=="symbol"&&Lle.test(e))&&e>-1&&e%1==0&&e<t},sfe=(e,t)=>{t=Mu(t,e),e=PU(e,t);const r=t[t.length-1];return e==null||delete e[ku(r)]},ofe=e=>{const t=typeof e;return t==="string"||t==="number"||t==="symbol"||t==="boolean"?e!=="__proto__":e===null},CU=e=>{const t=[];for(const r in e)t.push(r);return t},afe=e=>{e=Object(e);const t={};for(const r in e)t[r]=e[r];return t},d5=(e,t)=>{if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]};function RU(e,t=!1){return(r,...n)=>{let i=-1,s=n.length,o=s>1?n[s-1]:void 0;const a=s>2?n[2]:void 0;for(o=e.length>3&&typeof o=="function"?(s--,o):t?(u,c)=>{if(Array.isArray(u)&&!Array.isArray(c))return c}:void 0,a&&Fp(n[0],n[1],a)&&(o=s<3?void 0:o,s=1),r=Object(r);++i<s;){const u=n[i];u&&e(r,u,i,o)}return r}}const GA=(e,t,r,n,i)=>{e!==t&&Zs(t,(s,o)=>{if(Wr(s))i||(i=new pl),ufe(e,t,o,r,GA,n,i);else{let a=n?n(e[o],s,`${o}`,e,t,i):void 0;a===void 0&&(a=s),oE(e,o,a)}})},ufe=(e,t,r,n,i,s,o)=>{const a=d5(e,r),u=d5(t,r),c=o.get(u);if(c){oE(e,r,c);return}let f=s?s(a,u,`${r}`,e,t,o):void 0,h=f===void 0;if(h){const g=Array.isArray(u),y=!g&&Gh(u);f=u,g||y?Array.isArray(a)?f=a:ko(a)&&po(a)?f=DA(a):y?(h=!1,f=bU(u,!0)):f=[]:Kn(u)||hh(u)?(f=a,hh(a)?f=afe(a):(typeof a=="function"||!Wr(a))&&(f=wU(u))):h=!1}h&&(o.set(u,f),i(f,u,n,s,o),o.delete(u)),oE(e,r,f)},oE=(e,t,r)=>{(r!==void 0&&!Xl(e[t],r)||r===void 0&&!(t in e))&&Yl(e,t,r)};function cfe(e,t,r){const n=Object(e),i=r(e);let{length:s}=i,o=-1;for(;s--;){const a=i[++o];if(t(n[a],a,n)===!1)break}return e}const lfe=(e,t)=>e&&cfe(e,t,zh),$A=(e,t)=>{if(e==null)return e;if(!po(e))return lfe(e,t);const r=e.length,n=Object(e);let i=-1;for(;++i<r&&t(n[i],i,n)!==!1;);return e};function ffe(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}const hfe=Set&&1/iv(new Set([void 0,-0]))[1]==1/0?e=>new Set(e):()=>{};function IU(e,t,r,n,i,s){return Wr(e)&&Wr(t)&&(s.set(t,e),GA(e,t,void 0,IU,s),s.delete(t)),e}function dfe(e,t,r){t.length?t=t.map(o=>Array.isArray(o)?a=>$h(a,o.length===1?o[0]:o):o):t=[o=>o];let n=-1,i=-1;const s=po(e)?new Array(e.length):[];return $A(e,o=>{const a=t.map(u=>u(o));s[++i]={criteria:a,index:++n,value:o}}),pfe(s,(o,a)=>rfe(o,a,r))}function pfe(e,t){let{length:r}=e;for(e.sort(t);r--;)e[r]=e[r].value;return e}function OU(e){return e===e&&!Wr(e)}function MU(e,t){return r=>r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}function kU(e,t){return e!=null&&Ofe(e,t,Ife)}function gfe(e,t){return zA(e)&&OU(t)?MU(ku(e),t):r=>{const n=$h(r,e);return n===void 0&&n===t?kU(r,e):nv(t,n)}}function vfe(e){const t=mfe(e);return t.length===1&&t[0][2]?MU(t[0][0],t[0][1]):r=>r===e||yfe(r,e,t)}function mfe(e){const t=zh(e);let r=t.length;for(;r--;){const n=t[r],i=e[n];t[r]=[n,i,OU(i)]}return t}function yfe(e,t,r,n){let i=r.length;const s=i;if(e==null)return!s;let o;for(e=Object(e);i--;)if(o=r[i],o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1;for(;++i<s;){o=r[i];const a=o[0],u=e[a],c=o[1];if(o[2]){if(u===void 0&&!(a in e))return!1}else{const f=new pl;if(!nv(c,u,f))return!1}}return!0}function _fe(e){return zA(e)?bfe(ku(e)):wfe(e)}function bfe(e){return t=>t==null?void 0:t[e]}function wfe(e){return t=>$h(t,e)}function xfe(e){return typeof e=="function"?e:e==null?t=>t:typeof e=="object"?Array.isArray(e)?gfe(e[0],e[1]):vfe(e):_fe(e)}function sv(){const e=xfe;return arguments.length?e(arguments[0]):e}const Sfe=(e,t,r,n)=>{let i=-1;const s=e==null?0:e.length;for(n&&s&&(r=e[++i]);++i<s;)r=t(r,e[i],i,e);return r},Efe=(e,t,r,n,i)=>(i(e,(s,o,a)=>{r=n?(n=!1,s):t(r,s,o,a)}),r);function Afe(e,t,r){const n=Array.isArray(e)?Sfe:Efe,i=arguments.length<3;return n(e,t,r,i,$A)}const Tfe=e=>Array.isArray(e)||hh(e)||!!(e&&e[Symbol.isConcatSpreadable]);function LU(e,t,r,n,i){let s=-1;const o=e.length;for(r||(r=Tfe),i||(i=[]);++s<o;){var a=e[s];t>0&&r(a)?t>1?LU(a,t-1,r,n,i):i.push(...a):i[i.length]=a}return i}const hh=e=>ko(e)&&oo(e)=="[object Arguments]",Pfe=(e,t)=>Cfe(e,t,(r,n)=>kU(e,n)),Cfe=(e,t,r)=>{let n=-1;const i=t.length,s={};for(;++n<i;){const o=t[n],a=$h(e,o);r(a,o)&&ife(s,Mu(o,e),a)}return s},Rfe=e=>typeof e=="number"&&e>-1&&e%1==0&&e<=Number.MAX_SAFE_INTEGER,Ife=(e,t)=>e!=null&&t in Object(e),Ofe=(e,t,r)=>{t=Mu(t,e);for(var n=-1,i=t.length,s=!1;++n<i;){var o=ku(t[n]);if(!(s=e!=null&&r(e,o)))break;e=e[o]}return s||++n!=i?s:(i=e==null?0:e.length,!!i&&Rfe(i)&&VA(o,i)&&(Array.isArray(e)||hh(e)))},Mfe=e=>e.match(Dle),kfe=e=>e.match(Ele),Lfe=(e,t)=>(Nle(e)?kfe(e):Mfe(e))||[],Nfe=(e,t,r)=>{const{length:n}=e;return r=r===void 0?n:r,e.slice(t,r)},qfe=Dfe("toUpperCase");function Dfe(e){return t=>{if(!t)return"";const r=mU(t)?yU(t):void 0,n=r?r[0]:t[0],i=r?Nfe(r,1).join(""):t.slice(1);return n[e]()+i}}class pl{constructor(t){const r=this.__data__=new AS(t);this.size=r.size}clear(){this.__data__=new AS,this.size=0}delete(t){const r=this.__data__,n=r.delete(t);return this.size=r.size,n}get(t){return this.__data__.get(t)}has(t){return this.__data__.has(t)}set(t,r){let n=this.__data__;if(n instanceof AS){const i=n.__data__;if(i.length<qA-1)return i.push([t,r]),this.size=++n.size,this;n=this.__data__=new NU(i)}return n.set(t,r),this.size=n.size,this}}class AS{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.clear();++r<n;){const i=t[r];this.set(i[0],i[1])}}clear(){this.__data__=[],this.size=0}delete(t){const r=this.__data__,n=ep(r,t);if(n<0)return!1;const i=r.length-1;return n==i?r.pop():r.splice(n,1),--this.size,!0}get(t){const r=this.__data__,n=ep(r,t);return n<0?void 0:r[n][1]}has(t){return ep(this.__data__,t)>-1}set(t,r){const n=this.__data__,i=ep(n,t);return i<0?(++this.size,n.push([t,r])):n[i][1]=r,this}}class NU{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.clear();++r<n;){const i=t[r];this.set(i[0],i[1])}}clear(){this.size=0,this.__data__={hash:new p5,map:new Map,string:new p5}}delete(t){const r=tp(this,t).delete(t);return this.size-=r?1:0,r}get(t){return tp(this,t).get(t)}has(t){return tp(this,t).has(t)}set(t,r){const n=tp(this,t),i=n.size;return n.set(t,r),this.size+=n.size==i?0:1,this}}class p5{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.clear();++r<n;){const i=t[r];this.set(i[0],i[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(t){const r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}get(t){const n=this.__data__[t];return n===iE?void 0:n}has(t){return this.__data__[t]!==void 0}set(t,r){const n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r===void 0?iE:r,this}}class dh{constructor(t){let r=-1;const n=t==null?0:t.length;for(this.__data__=new NU;++r<n;)this.add(t[r])}add(t){return this.__data__.set(t,iE),this}has(t){return this.__data__.has(t)}}dh.prototype.push=dh.prototype.add;const Ffe=function(e){var t=Object.prototype.toString;return e===!0||e===!1||!!e&&typeof e=="object"&&t.call(e)===Jg},Wr=function(e){return!!e&&(typeof e=="object"||typeof e=="function")},fs=function(e){var t=Object.prototype.toString;return typeof e=="number"||!!e&&typeof e=="object"&&t.call(e)===Qg},Mi=function(e){var t=Object.prototype.toString;return typeof e=="string"||!!e&&typeof e=="object"&&t.call(e)===ev},Ut=RU((e,t)=>{if(rv(t)||po(t)){Vh(t,zh(t),e);return}for(var r in t)hasOwnProperty.call(t,r)&&Yl(e,r,t[r])}),Bfe=(e,...t)=>{let r=-1,n=t.length;const i=n>2?t[2]:void 0;for(i&&Fp(t[0],t[1],i)&&(n=1);++r<n;){const s=t[r];if(s==null)continue;const o=Object.keys(s),a=o.length;let u=-1;for(;++u<a;){const c=o[u],f=e[c];(f===void 0||Xl(f,Object.prototype[c])&&!hasOwnProperty.call(e,c))&&(e[c]=s[c])}}return e},Ms=Bfe,zfe=function(...t){return t.push(void 0,IU),ri.apply(void 0,t)},UA=zfe,To=(e,t,...r)=>{let n=-1;const i=typeof t=="function",s=po(e)?new Array(e.length):[];return $A(e,o=>{s[++n]=i?t.apply(o,r):Vfe(o,t,...r)}),s},Vfe=(e,t,...r)=>{t=Mu(t,e),e=PU(e,t);const n=e==null?e:e[ku(ffe(t))];return n==null?void 0:n.apply(e,r)},qU=(e,t,r)=>{let n=0,i=e==null?0:e.length;if(i==0)return 0;r=sv(r,2),t=r(t);const s=t!==t,o=t===null,a=Tl(t),u=t===void 0;for(;n<i;){let c;const f=Math.floor((n+i)/2),h=r(e[f]),g=h!==void 0,y=h===null,m=h===h,_=Tl(h);s?c=m:u?c=m&&g:o?c=m&&g&&!y:a?c=m&&g&&!y&&!_:y||_?c=!1:c=h<t,c?n=f+1:i=f}return Math.min(i,qle)},Uh=(e,t)=>{let r=-1,n=(u,c)=>!!(u==null?0:u.length)&&u.indexOf(c)>-1;t=sv(t,2);let i=!0;const{length:s}=e,o=[];let a=o;if(s>=qA){const u=t?null:hfe(e);if(u)return iv(u);i=!1,n=(c,f)=>c.has(f),a=new dh}else a=t?[]:o;e:for(;++r<s;){let u=e[r];const c=t?t(u):u;if(u=u!==0?u:0,i&&c===c){let f=a.length;for(;f--;)if(a[f]===c)continue e;t&&a.push(c),o.push(u)}else n(a,c)||(a!==o&&a.push(c),o.push(u))}return o},Qo=e=>dl(e),Ks=e=>dl(e,!0),Da=e=>{if(e==null)return!0;if(po(e)&&(Array.isArray(e)||typeof e=="string"||typeof e.splice=="function"||Gh(e)||hh(e)))return!e.length;const t=oo(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(rv(e))return!Vle(e).length;for(const r in e)if(hasOwnProperty.call(e,r))return!1;return!0},al=(e,t)=>nv(e,t),fn=e=>typeof e=="function",Kn=e=>{if(!ko(e)||oo(e)!="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},Fr=e=>{if(!e)return[];if(po(e))return Mi(e)?yU(e):DA(e);if(Symbol.iterator&&Symbol.iterator in Object(e)){const n=e[Symbol.iterator]();let i;const s=[];for(;!(i=n.next()).done;)s.push(i.value);return s}const t=oo(e);return(t==Fh?AU:t==Bh?iv:zle)(e)};function Gfe(e,t,r){if(typeof e!="function")throw new TypeError("Expected a function");let n,i,s,o,a,u,c=0,f=!1,h=!1,g=!0;const y=!t&&t!==0&&window&&typeof window.requestAnimationFrame=="function";t=+t||0,Wr(r)&&(f=!!r.leading,h="maxWait"in r,s=h?Math.max(20,t):s,g="trailing"in r?!!r.trailing:g);function m(p){const P=n,O=i;return n=i=void 0,c=p,o=e.apply(O,P),o}function _(p,P){return y?(window.cancelAnimationFrame(a),window.requestAnimationFrame(p)):setTimeout(p,P)}function b(p){if(y)return window.cancelAnimationFrame(p);clearTimeout(p)}function S(p){return c=p,a=_(T,t),f?m(p):o}function E(p){const P=p-u,O=p-c,N=t-P;return h?Math.min(N,s-O):N}function A(p){const P=p-u,O=p-c;return u===void 0||P>=t||P<0||h&&O>=s}function T(){const p=Date.now();if(A(p))return I(p);a=_(T,E(p))}function I(p){return a=void 0,g&&n?m(p):(n=i=void 0,o)}function q(...p){const P=Date.now(),O=A(P);if(n=p,i=this,u=P,O){if(a===void 0)return S(u);if(h)return a=_(T,t),m(u)}return a===void 0&&(a=_(T,t)),o}return q.cancel=()=>{a!==void 0&&b(a),c=0,n=u=i=a=void 0},q.flush=()=>a===void 0?o:I(Date.now()),q.pending=()=>a!==void 0,q}const $fe=(e,t)=>(t=sv(t,2),Afe(e,(r,n,i)=>(i=t(n),hasOwnProperty.call(r,i)?r[i].push(n):Yl(r,i,[n]),r),{})),TS=(e,t=[])=>{if(e==null)return[];const r=t.length;return r>1&&Fp(e,t[0],t[1])?t=[]:r>2&&Fp(t[0],t[1],t[2])&&(t=[t[0]]),Array.isArray(t)||(t=[sv(t,2)]),dfe(e,t.flat(1),[])},Ufe=e=>(e==null?0:e.length)?LU(e,1/0):[],g5=(e,...t)=>po(e)?TU(e,t):[],jfe=(e,...t)=>ko(e)&&po(e)?TU(e,t.flat(1)):[],aE=(...e)=>{const t=e.flat(1);return Uh(t)},Fa=(e,t)=>{if(e==null)return!1;typeof t=="string"&&(t=t.split("."));let r=-1,n=e;for(;++r<t.length;){if(!n||!hasOwnProperty.call(n,t[r]))return!1;n=n[t[r]]}return!0},Zn=(e,t,r)=>{t=Mu(t,e);let n=-1,i=t.length;for(i||(i=1,e=void 0);++n<i;){let s=e==null?void 0:e[ku(t[n])];s===void 0&&(n=i,s=r),e=typeof s=="function"?s.call(e):s}return e},cc=(e,...t)=>{let r={};if(e==null)return r;let n=!1;t=t.flat(1).map(s=>(s=Mu(s,e),n||(n=s.length>1),s)),Vh(e,SU(e),r),n&&(r=dl(r,!0,!0,!0,s=>Kn(s)?void 0:s));let i=t.length;for(;i--;)sfe(r,t[i]);return r},Hfe=(e,...t)=>e==null?{}:Pfe(e,t.flat(1/0)),Zs=(e,t=r=>r)=>{let r=-1;const n=Object(e),i=po(e)?_U(e,!0):CU(e);let s=i.length;for(;s--;){const o=i[++r];if(t(n[o],o,n)===!1)break}},Wfe=(e="")=>Lfe(`${e}`.replace(/['\u2019]/g,"")).reduce((t,r,n)=>(r=r.toLowerCase(),t+(n?qfe(r):r)),"");let Xfe=0;const Yfe=(e="")=>{const t=++Xfe;return`${e}`+t},ri=RU((e,t,r,n)=>{GA(e,t,r,n)},!0),So=function(e){return e&&e.toString().split(" ").map(function(t){return t.substr(0,yu.classNamePrefix.length)!==yu.classNamePrefix&&(t=yu.classNamePrefix+t),t}).join(" ")},Kfe=function(e){return e&&e.toString().split(" ").map(function(t){return t.substr(0,yu.classNamePrefix.length)===yu.classNamePrefix&&(t=t.substr(yu.classNamePrefix.length)),t}).join(" ")},Bp=function(e,t){const r={},n={},i=$e.namespace.svg,s=t||i,o=document.createDocumentFragment(),a=function(u,c,f){for(let h=0;h<u.length;h++){const g=u[h];if(typeof g=="string"){const T=document.createTextNode(g);c.appendChild(T);continue}if(!g.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");const y=g.tagName;let m;g.hasOwnProperty("namespaceURI")&&(f=g.namespaceURI),m=document.createElementNS(f,y);const _=f===i,b=_?$e:It,S=g.attributes;S&&b(m).attr(S);const E=g.style;if(E&&It(m).css(E),g.hasOwnProperty("className")){const T=g.className;_?m.className.baseVal=T:m.className=T}if(g.hasOwnProperty("textContent")&&(m.textContent=g.textContent),g.hasOwnProperty("selector")){const T=g.selector;if(r[T])throw new Error("json-dom-parser: selector must be unique");r[T]=m,b(m).attr("joint-selector",T)}if(g.hasOwnProperty("groupSelector")){let T=g.groupSelector;Array.isArray(T)||(T=[T]);for(let I=0;I<T.length;I++){const q=T[I];let p=n[q];p||(p=n[q]=[]),p.push(m)}}c.appendChild(m);const A=g.children;Array.isArray(A)&&a(A,m,f)}};return a(e,o,s),{fragment:o,selectors:r,groupSelectors:n}},rp=function(e){let t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);t=(t<<5)-t+n,t=t&t}return t},ph=function(e,t,r){for(var n=Array.isArray(t)?t:t.split(r||"/"),i,s=0,o=n.length;s<o;)if(i=n[s++],Object(e)===e&&i in e)e=e[i];else return;return e},DU=function(e,t){return typeof t!="string"&&typeof t!="number"&&(t=String(t)),!(t==="constructor"&&typeof e[t]=="function"||t==="__proto__")},uE=function(e,t,r,n){const i=Array.isArray(t)?t:t.split(n||"/"),s=i.length-1;let o=e,a=0;for(;a<s;a++){const u=i[a];if(!DU(o,u))return e;o=o[u]||(o[u]={})}return o[i[s]]=r,e},v5=function(e,t,r){const n=Array.isArray(t)?t:t.split(r),i=n.length-1;let s=e,o=0;for(;o<i;o++){const a=n[o];if(!DU(s,a))return e;const u=s[a];if(!u)return e;s=u}return delete s[n[i]],e},Zfe=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,r=e==="x"?t:t&3|8;return r.toString(16)})},ul=function(e){return ul.id=ul.id||1,e===void 0?"j_"+ul.id++:(e.id=e.id===void 0?"j_"+ul.id++:e.id,e.id)},Jfe=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},Yn=function(e){if(e.normalized)return e;const{originalEvent:t,target:r}=e,n=t&&t.changedTouches&&t.changedTouches[0];if(n)for(let i in n)e[i]===void 0&&(e[i]=n[i]);if(r){const i=r.correspondingUseElement;i&&(e.target=i)}return e.normalized=!0,e},Qfe=function(e){let i=0,s=0,o=0,a=0;return"detail"in e&&(s=e.detail),"wheelDelta"in e&&(s=-e.wheelDelta/120),"wheelDeltaY"in e&&(s=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(i=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(i=s,s=0),o="deltaX"in e?e.deltaX:i*10,a="deltaY"in e?e.deltaY:s*10,(o||a)&&e.deltaMode&&(e.deltaMode==1?(o*=40,a*=40):(o*=800,a*=800)),e.deltaX===0&&e.deltaY!==0&&e.shiftKey&&(o=a,a=0,i=s,s=0),o&&!i&&(i=o<1?-1:1),a&&!s&&(s=a<1?-1:1),{spinX:i,spinY:s,deltaX:o,deltaY:a}},ehe=function(e,t){return e>t?t:e<-50?-50:e},cE=function(){var e;if(typeof window<"u"&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var t=0;e=function(r){var n=new Date().getTime(),i=Math.max(0,16-(n-t)),s=setTimeout(function(){r(n+i)},i);return t=n+i,s}}return function(r,n,...i){return e(n!==void 0?r.bind(n,...i):r)}}(),lE=function(){var e,t=typeof window<"u";return t&&(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),e=e||clearTimeout,t?e.bind(window):e}(),Ai=function(e){return Mi(e)&&e.slice(-1)==="%"},the=function(e,t){function r(a){var u=new RegExp("(?:\\d+(?:\\.\\d+)*)("+a+")$").exec(e);return u?u[1]:null}var n=parseFloat(e);if(Number.isNaN(n))return null;var i={};i.value=n;var s;if(t==null)s="[A-Za-z]*";else if(Array.isArray(t)){if(t.length===0)return null;s=t.join("|")}else Mi(t)&&(s=t);var o=r(s);return o===null?null:(i.unit=o,i)},Kf=0;function rhe(e,t){const r=e.split(t);let n=1;for(let i=0,s=r.length-1;i<s;i++){const o=[];(i>0||r[0]!=="")&&o.push(Kf),o.push(t),(i<s-1||r[s]!=="")&&o.push(Kf),r.splice(n,0,...o),n+=o.length+1}return r.filter(i=>i!=="")}function m5(e,t){if(e===null)return t.getBBox().height;switch(e.unit){case"em":return t.getBBox().height*e.value;case"px":case"":return e.value}}const FU=function(e,t,r={},n={}){var i=t.width,s=t.height,o=n.svgDocument||$e("svg").node,a=$e("tspan").node,u=$e("text").attr(r).append(a).node,c=document.createTextNode("");u.style.opacity=0,u.style.display="block",a.style.display="block",a.appendChild(c),o.appendChild(u),n.svgDocument||document.body.appendChild(o);const f=n.preserveSpaces,h=" ",g=n.separator||n.separator===""?n.separator:h,y=typeof g=="string"?g:h;var m=n.eol||`
`,_=n.hyphen?new RegExp(n.hyphen):/[^\w\d\u00C0-\u1FFF\u2800-\uFFFD]/,b=n.maxLineCount;fs(b)||(b=1/0);var S=e.split(g),E=[],A=[],T,I,q;f&&$e(a).attr("xml:space","preserve");for(var p=0,P=0,O=S.length;p<O;p++){var N=S[p];if(!(!N&&!f)&&typeof N=="string"){var V=!1;if(N.indexOf(m)>=0)if(N.length>1){const de=rhe(S[p],m);S.splice(p,1,...de),p--,O=S.length;continue}else{if(f&&typeof S[p-1]=="string"){S.splice(p,Kf,"",Kf),O+=2,p--;continue}A[++P]=!f||typeof S[p+1]=="string"?"":void 0,V=!0}if(!V){let de;if(f?de=A[P]!==void 0?A[P]+y+N:N:de=A[P]?A[P]+y+N:N,c.data=de,a.getComputedTextLength()<=i)A[P]=de,(T||I)&&(E[P++]=!0,T=0,I=0);else{if(!A[P]||T){var W=!!T;if(T=N.length-1,W||!T){if(!T){if(!A[P]){A=[];break}S.splice(p,2,N+S[p+1]),O--,E[P++]=!0,p--;continue}S[p]=N.substring(0,T);const ce=S[p+1];S[p+1]=N.substring(T)+(ce===void 0||ce===Kf?"":ce)}else{if(I)S.splice(p,2,S[p]+S[p+1]),I=0;else{var G=N.search(_);G>-1&&G!==N.length-1&&G!==0&&(I=G+1,T=0),S.splice(p,1,N.substring(0,I||T),N.substring(I||T)),O++}P&&!E[P-1]&&P--}(!f||A[P]!=="")&&p--;continue}P++,p--}}var ee=null;if(A.length>b)ee=b-1;else if(s!==void 0){if(q===void 0&&c.data!=="")if(r.lineHeight==="auto")q=m5({value:1.5,unit:"em"},u);else{const de=the(r.lineHeight,["em","px",""]);q=m5(de,u)}q*A.length>s&&(ee=Math.floor(s/q)-1)}if(ee!==null){A.splice(ee+1);var ae=n.ellipsis;if(!ae||ee<0)break;typeof ae!="string"&&(ae="â¦");var K=A[ee];if(!K&&!V)break;var U=K.length,j,J;do{if(J=K[U],j=K.substring(0,U),J?J.match(g)&&(j+=J):j+=y,j+=ae,c.data=j,a.getComputedTextLength()<=i){A[ee]=j;break}U--}while(U>=0);break}}}return n.svgDocument?o.removeChild(u):document.body.removeChild(o),A.join(m)},nhe=function(e){var t=It(It.parseHTML("<div>"+e+"</div>",null,!1));return t.find("*").each(function(){var r=this;It.each(r.attributes,function(){var n=this,i=n.name,s=n.value;(i.startsWith("on")||s.startsWith("javascript:")||s.startsWith("data:")||s.startsWith("vbscript:"))&&It(r).removeAttr(i)})}),t.html()},ihe=function(e,t){var r=It(e),n=r.map(function(){var i=this,s=i.parentNode,o=s.insertBefore(document.createTextNode(""),i.nextSibling);return function(){if(s===this)throw new Error("You can't sort elements if any one is a descendant of another.");s.insertBefore(this,o),s.removeChild(o)}});return Array.prototype.sort.call(r,t).each(function(i){n[i].call(this)})},lc=function(e){if(Object(e)!==e){var t=0;return isFinite(e)&&(t=+e),{top:t,right:t,bottom:t,left:t}}var r,n,i,s;return r=n=i=s=0,isFinite(e.vertical)&&(r=i=+e.vertical),isFinite(e.horizontal)&&(n=s=+e.horizontal),isFinite(e.top)&&(r=+e.top),isFinite(e.right)&&(n=+e.right),isFinite(e.bottom)&&(i=+e.bottom),isFinite(e.left)&&(s=+e.left),{top:r,right:n,bottom:i,left:s}},she={linear:function(e){return e}},BU={number:function(e,t){var r=t-e;return function(n){return e+r*n}},object:function(e,t){var r=Object.keys(e);return function(n){var i,s,o={};for(i=r.length-1;i!=-1;i--)s=r[i],o[s]=e[s]+(t[s]-e[s])*n;return o}}},ohe={outline:function(e){var t='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',r=Number.isFinite(e.margin)?e.margin:2,n=Number.isFinite(e.width)?e.width:1;return Ui(t)({color:e.color||"blue",opacity:Number.isFinite(e.opacity)?e.opacity:1,outerRadius:r+n,innerRadius:r})},highlight:function(e){var t='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>';return Ui(t)({color:e.color||"red",width:Number.isFinite(e.width)?e.width:1,blur:Number.isFinite(e.blur)?e.blur:0,opacity:Number.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var t=Number.isFinite(e.x)?e.x:2;return Ui('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(e.y)?[t,e.y]:t})},dropShadow:function(e){var t="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return Ui(t)({dx:e.dx||0,dy:e.dy||0,opacity:Number.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:Number.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Ui('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},sepia:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Ui('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},saturate:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Ui('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-t})},hueRotate:function(e){return Ui('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Ui('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:1-t})},brightness:function(e){return Ui('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(e.amount)?e.amount:1})},contrast:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return Ui('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:.5-t/2})}},Ui=function(e){var t=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(r){return r=r||{},e.replace(t,function(n){for(var i=Array.from(arguments),s=i.slice(1,4).find(function(u){return!!u}),o=s.split("."),a=r[o.shift()];a!==void 0&&o.length;)a=a[o.shift()];return a!==void 0?a:""})}},Mf=function(){};function zU(e){e=Uh(e);const t=Fr(e).reduce(function(r,n){return r[n.id]=n.clone(),r},{});return Fr(e).forEach(function(r){const n=t[r.id];if(n.isLink()){const o=n.source(),a=n.target();o.id&&t[o.id]&&n.prop("source/id",t[o.id].id),a.id&&t[a.id]&&n.prop("target/id",t[a.id].id)}const i=r.get("parent");i&&t[i]&&n.set("parent",t[i].id);const s=Fr(r.get("embeds")).reduce(function(o,a){return t[a]&&o.push(t[a].id),o},[]);Da(s)||n.set("embeds",s)}),t}const ahe=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"],uhe=ahe.reduce((e,t)=>(e[t]=!0,e),{}),che={qualify:function(e){return Kn(e)},set:function(e,t,r){Object.keys(e).forEach(function(n){if(uhe[n]&&n in r){const i=e[n];r.tagName==="SELECT"&&Array.isArray(i)?Array.from(r.options).forEach(function(s,o){s.selected=i.includes(s.value)}):r[n]=i}})}};function uu(e,t){return function(r,n){var i=Ai(r);r=parseFloat(r),i&&(r/=100);var s={};if(isFinite(r)){var o=i||r>=0&&r<=1?r*n[t]:Math.max(r+n[t],0);s[e]=o}return s}}function np(e,t,r){return function(n,i){var s=Ai(n);n=parseFloat(n),s&&(n/=100);var o;if(isFinite(n)){var a=i[r]();s||n>0&&n<1?o=a[e]+i[t]*n:o=a[e]+n}var u=pe();return u[e]=o||0,u}}function y5(e,t,r){return function(n,i){var s;n==="middle"?s=i[t]/2:n===r?s=i[t]:isFinite(n)?s=n>-1&&n<1?-i[t]*n:-n:Ai(n)?s=i[t]*parseFloat(n)/100:s=0;var o=pe();return o[e]=-(i[e]+s),o}}function VU(e,t){var r="joint-shape",n=t&&t.resetOffset;return function(i,s,o){var a=It(o),u=a.data(r);if(!u||u.value!==i){var c=e(i);u={value:i,shape:c,shapeBBox:c.bbox()},a.data(r,u)}var f=u.shape.clone(),h=u.shapeBBox.clone(),g=h.origin(),y=s.origin();h.x=y.x,h.y=y.y;var m=s.maxRectScaleToFit(h,y),_=h.width===0||s.width===0?1:m.sx,b=h.height===0||s.height===0?1:m.sy;return f.scale(_,b,g),n&&f.translate(-g.x,-g.y),f}}function _5(e){function t(n){return new Nt($e.normalizePathData(n))}var r=VU(t,e);return function(n,i,s){var o=r(n,i,s);return{d:o.serialize()}}}function b5(e){var t=VU(dn,e);return function(r,n,i){var s=t(r,n,i);return{points:s.serialize()}}}function ip(e,t){var r=new pe(1,0);return function(n){var i,s,o=this[e](n);return o?(s=t.rotate?o.vector().vectorAngle(r):0,i=o.start):(i=this.path.start,s=0),s===0?{transform:"translate("+i.x+","+i.y+")"}:{transform:"translate("+i.x+","+i.y+") rotate("+s+")"}}}function w5(e){return function(r,n,i){const s=$e(i);s.attr(e)!==r&&s.attr(e,r)}}function Jc(e,t,r){return r.text!==void 0}function kf(){return this.model.isLink()}function PS(e){var t={},r=e.stroke;typeof r=="string"&&(t.stroke=r,t.fill=r);var n=e.strokeOpacity;return n===void 0&&(n=e["stroke-opacity"]),n===void 0&&(n=e.opacity),n!==void 0&&(t["stroke-opacity"]=n,t["fill-opacity"]=n),t}function x5(e){const{paper:t}=this;return`url(#${e.type==="pattern"?t.definePattern(e):t.defineGradient(e)})`}const or={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:w5("href")},xlinkHref:{set:w5("xlink:href")},filter:{qualify:Kn,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}},fill:{qualify:Kn,set:x5},stroke:{qualify:Kn,set:x5},sourceMarker:{qualify:Kn,set:function(e,t,r,n){return e=Ut(PS(n),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},targetMarker:{qualify:Kn,set:function(e,t,r,n){return e=Ut(PS(n),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},vertexMarker:{qualify:Kn,set:function(e,t,r,n){return e=Ut(PS(n),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},text:{qualify:function(e,t,r){return!r.textWrap||!Kn(r.textWrap)},set:function(e,t,r,n){const i=It(r),s="joint-text",o=i.data(s),{lineHeight:a,annotations:u,textVerticalAnchor:c,eol:f,displayEmpty:h}=n;let g=n.textPath,y=n.x;Qs(y)&&(y=eo(y,t));let m=n["font-size"]||n.fontSize;Qs(m)&&(m=eo(m,t));const _=JSON.stringify([e,a,u,c,f,h,g,y,m]);if(o===void 0||o!==_){if(m&&r.setAttribute("font-size",m),Wr(g)){const b=g.selector;if(typeof b=="string"){const[S]=this.findBySelector(b);S instanceof SVGPathElement&&(g=Ut({"xlink:href":"#"+S.id},g))}}$e(r).text(""+e,{lineHeight:a,annotations:u,textPath:g,x:y,textVerticalAnchor:c,eol:f,displayEmpty:h}),i.data(s,_)}}},textWrap:{qualify:Kn,set:function(e,t,r,n){var i={},s=e.width||0;Ai(s)?i.width=t.width*parseFloat(s)/100:Qs(s)?i.width=Number(eo(s,t)):e.width===null?i.width=1/0:s<=0?i.width=t.width+s:i.width=s;var o=e.height||0;Ai(o)?i.height=t.height*parseFloat(o)/100:Qs(o)?i.height=Number(eo(o,t)):e.height===null||(o<=0?i.height=t.height+o:i.height=o);var a,u=e.text;if(u===void 0&&(u=n.text),u!==void 0){const c=e.breakText||FU,f=n["font-size"]||n.fontSize;a=c(""+u,i,{"font-weight":n["font-weight"]||n.fontWeight,"font-size":Qs(f)?eo(f,t):f,"font-family":n["font-family"]||n.fontFamily,lineHeight:n.lineHeight,"letter-spacing":"letter-spacing"in n?n["letter-spacing"]:n.letterSpacing},{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,separator:e.separator,maxLineCount:e.maxLineCount,preserveSpaces:e.preserveSpaces})}else a="";or.text.set.call(this,a,t,r,n)}},title:{qualify:function(e,t){return t instanceof SVGElement},set:function(e,t,r){var n=It(r),i="joint-title",s=n.data(i);if(s===void 0||s!==e){if(n.data(i,e),r.tagName==="title"){r.textContent=e;return}var o=r.firstElementChild;if(o&&o.tagName==="title")o.textContent=e;else{var a=document.createElementNS(r.namespaceURI,"title");a.textContent=e,r.insertBefore(a,o)}}}},lineHeight:{qualify:Jc},textVerticalAnchor:{qualify:Jc},textPath:{qualify:Jc},annotations:{qualify:Jc},eol:{qualify:Jc},displayEmpty:{qualify:Jc},port:{set:function(e){return e===null||e.id===void 0?e:e.id}},style:{qualify:Kn,set:function(e,t,r){It(r).css(e)}},html:{set:function(e,t,r){It(r).html(e+"")}},props:che,ref:{},refX:{position:np("x","width","origin")},refY:{position:np("y","height","origin")},refDx:{position:np("x","width","corner")},refDy:{position:np("y","height","corner")},refWidth:{set:uu("width","width")},refHeight:{set:uu("height","height")},refRx:{set:uu("rx","width")},refRy:{set:uu("ry","height")},refRInscribed:{set:function(e){var t=uu(e,"width"),r=uu(e,"height");return function(n,i){var s=i.height>i.width?t:r;return s(n,i)}}("r")},refRCircumscribed:{set:function(e,t){var r=Ai(e);e=parseFloat(e),r&&(e/=100);var n=Math.sqrt(t.height*t.height+t.width*t.width),i;return isFinite(e)&&(r||e>=0&&e<=1?i=e*n:i=Math.max(e+n,0)),{r:i}}},refCx:{set:uu("cx","width")},refCy:{set:uu("cy","height")},xAlignment:{offset:y5("x","width","right")},yAlignment:{offset:y5("y","height","bottom")},resetOffset:{offset:function(e,t){return e?{x:-t.x,y:-t.y}:{x:0,y:0}}},refDResetOffset:{set:_5({resetOffset:!0})},refDKeepOffset:{set:_5({resetOffset:!1})},refPointsResetOffset:{set:b5({resetOffset:!0})},refPointsKeepOffset:{set:b5({resetOffset:!1})},connection:{qualify:kf,set:function({stubs:e=0}){let t;if(isFinite(e)&&e!==0){let r;e<0?r=(this.getConnectionLength()+e)/2:r=e;const n=this.getConnection(),i=this.getConnectionSubdivisions(),s=n.divideAtLength(r,{segmentSubdivisions:i}),o=n.divideAtLength(-r,{segmentSubdivisions:i});s&&o&&(t=`${s[0].serialize()} ${o[1].serialize()}`)}return{d:t||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:kf,set:ip("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:kf,set:ip("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:kf,set:ip("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:kf,set:ip("getTangentAtRatio",{rotate:!1})}};or["xlink:href"]=or.xlinkHref;["transform","d","points","cx","cy","x1","x2","y1","y2","x","y","dx","dy"].forEach(e=>{or[e]={qualify:Qs,set:function(r,n){return{[e]:eo(r,n)}}}});["width","height","r","rx","ry","font-size","stroke-width"].forEach(e=>{or[e]={qualify:Qs,set:function(r,n){return{[e]:Math.max(0,eo(r,n))}}}});or.refR=or.refRInscribed;or.refD=or.refDResetOffset;or.refPoints=or.refPointsResetOffset;or.atConnectionLength=or.atConnectionLengthKeepGradient;or.atConnectionRatio=or.atConnectionRatioKeepGradient;or.fontSize=or["font-size"];or.strokeWidth=or["stroke-width"];or.refX2=or.refX;or.refY2=or.refY;or.refWidth2=or.refWidth;or.refHeight2=or.refHeight;or["ref-x"]=or.refX;or["ref-y"]=or.refY;or["ref-dy"]=or.refDy;or["ref-dx"]=or.refDx;or["ref-width"]=or.refWidth;or["ref-height"]=or.refHeight;or["x-alignment"]=or.xAlignment;or["y-alignment"]=or.yAlignment;const GU=or,ca=Jn.Model.extend({constructor:function(e,t){var r,n=e||{};typeof this.preinitialize=="function"&&this.preinitialize.apply(this,arguments),this.cid=Yfe("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(n=this.parse(n,t)||{}),(r=Zn(this,"defaults"))&&(n=ri({},r,n)),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,t,r){throw new Error("Must define a translate() method.")},toJSON:function(){const t=Zn(this.constructor.prototype,"defaults").attrs||{},r=this.attributes.attrs,n={};Zs(r,function(s,o){const a=t[o];Zs(s,function(u,c){Wr(u)&&!Array.isArray(u)?Zs(u,function(f,h){(!a||!a[c]||!al(a[c][h],f))&&(n[o]=n[o]||{},(n[o][c]||(n[o][c]={}))[h]=f)}):(!a||!al(a[c],u))&&(n[o]=n[o]||{},n[o][c]=u)})});const i=Ks(cc(this.attributes,"attrs"));return i.attrs=n,i},initialize:function(e){const t=this.getIdAttribute();(!e||e[t]===void 0)&&this.set(t,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return Zfe()},processPorts:function(){var e=this.ports,t={};Zs(this.get("attrs"),function(s,o){s&&s.port&&(s.port.id!==void 0?t[s.port.id]=s.port:t[s.port]={id:s.port})});var r={};if(Zs(e,function(s,o){t[o]||(r[o]=!0)}),this.graph&&!Da(r)){var n=this.graph.getConnectedLinks(this,{inbound:!0});n.forEach(function(s){r[s.get("target").port]&&s.remove()});var i=this.graph.getConnectedLinks(this,{outbound:!0});i.forEach(function(s){r[s.get("source").port]&&s.remove()})}this.ports=t},remove:function(e={}){const{graph:t,collection:r}=this;if(!t)return r&&r.remove(this,e),this;t.startBatch("remove");const n=this.getParentCell();n&&n.unembed(this,e);const i=this.getEmbeddedCells();for(let s=0,o=i.length;s<o;s++){const a=i[s];a&&a.remove(e)}return this.trigger("remove",this,t.attributes.cells,e),t.stopBatch("remove"),this},toFront:function(e){var t=this.graph;if(t){e=Ms(e||{},{foregroundEmbeds:!0});let r;e.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:e.breadthFirst!==!1,sortSiblings:e.foregroundEmbeds}),r.unshift(this)):r=[this];const n=e.foregroundEmbeds?r:TS(r,u=>u.z());let s=t.maxZIndex()-r.length+1;const o=t.get("cells");let a=o.indexOf(n[0])!==o.length-r.length;a||(a=n.some(function(u,c){return u.z()!==s+c})),a&&(this.startBatch("to-front"),s=s+r.length,n.forEach(function(u,c){u.set("z",s+c,e)}),this.stopBatch("to-front"))}return this},toBack:function(e){var t=this.graph;if(t){e=Ms(e||{},{foregroundEmbeds:!0});let n;e.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:e.breadthFirst!==!1,sortSiblings:e.foregroundEmbeds}),n.unshift(this)):n=[this];const i=e.foregroundEmbeds?n:TS(n,a=>a.z());let s=t.minZIndex();var r=t.get("cells");let o=r.indexOf(i[0])!==0;o||(o=i.some(function(a,u){return a.z()!==s+u})),o&&(this.startBatch("to-back"),s-=n.length,i.forEach(function(a,u){a.set("z",s+u,e)}),this.stopBatch("to-back"))}return this},parent:function(e,t){return e===void 0?this.get("parent"):this.set("parent",e,t)},embed:function(e,t){const r=Array.isArray(e)?e:[e];if(!this.canEmbed(r))throw new Error("Recursive embedding not allowed.");if(r.some(n=>n.isEmbedded()&&this.id!==n.parent()))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(r,t),this},unembed:function(e,t){const r=Array.isArray(e)?e:[e];return this._unembedCells(r,t),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every(r=>this!==r&&!this.isEmbeddedIn(r))},_embedCells:function(e,t){const r="embed";this.startBatch(r);const n=Ut([],this.get("embeds"));e.forEach(i=>{n[i.isLink()?"unshift":"push"](i.id),i.parent(this.id,t)}),this.set("embeds",Uh(n),t),this.stopBatch(r)},_unembedCells:function(e,t){const r="unembed";this.startBatch(r),e.forEach(n=>n.unset("parent",t)),this.set("embeds",g5(this.get("embeds"),...e.map(n=>n.id)),t),this.stopBatch(r)},getParentCell:function(){var e=this.parent(),t=this.graph;return e&&t&&t.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var t=this.getParentCell();t;)e.push(t),t=t.getParentCell();return e},getEmbeddedCells:function(e){if(e=e||{},!this.graph)return[];if(e.deep)return e.breadthFirst?this._getEmbeddedCellsBfs(e.sortSiblings):this._getEmbeddedCellsDfs(e.sortSiblings);const t=this.get("embeds");if(Da(t))return[];let r=t.map(this.graph.getCell,this.graph);return e.sortSiblings&&(r=TS(r,n=>n.z())),r},_getEmbeddedCellsBfs:function(e){const t=[],r=[];for(r.push(this);r.length>0;){const n=r.shift();t.push(n);const i=n.getEmbeddedCells({sortSiblings:e});r.push(...i)}return t.shift(),t},_getEmbeddedCellsDfs:function(e){const t=[],r=[];for(r.push(this);r.length>0;){const n=r.pop();t.push(n);const i=n.getEmbeddedCells({sortSiblings:e});for(let s=i.length-1;s>=0;--s)r.push(i[s])}return t.shift(),t},isEmbeddedIn:function(e,t){var r=Mi(e)?e:e.id,n=this.parent();if(t=Ut({deep:!0},t),this.graph&&t.deep){for(;n;){if(n===r)return!0;n=this.graph.getCell(n).parent()}return!1}else return n===r},isEmbedded:function(){return!!this.parent()},clone:function(e){if(e=e||{},e.deep)return Fr(zU([this].concat(this.getEmbeddedCells({deep:!0}))));var t=Jn.Model.prototype.clone.apply(this,arguments);return t.set(this.getIdAttribute(),this.generateId()),t.unset("embeds"),t.unset("parent"),t},prop:function(e,t,r){var n="/",i=Mi(e);if(i||Array.isArray(e))if(arguments.length>1){var s,o;i?(s=e,o=s.split("/")):(s=e.join(n),o=e.slice());var a=o[0],u=o.length;const A=r||{};A.propertyPath=s,A.propertyValue=t,A.propertyPathArray=o,"rewrite"in A||(A.rewrite=!1);for(var c={},f=c,h=a,g=1;g<u;g++){var y=o[g],m=Number.isFinite(i?Number(y):y);f=f[h]=m?[]:{},h=y}c=uE(c,o,t,"/");var _=ri({},this.attributes);A.rewrite&&v5(_,s,"/");var b=ri(_,c);return this.set(a,b[a],A)}else return ph(this.attributes,e,n);const S=t||{};S.propertyPath=null,S.propertyValue=e,S.propertyPathArray=[],"rewrite"in S||(S.rewrite=!1);const E={};for(const A in e){const{changedValue:T}=ri({},{changedValue:this.attributes[A]},{changedValue:e[A]});E[A]=T}return this.set(E,S)},removeProp:function(e,t){t=t||{};var r=Array.isArray(e)?e:e.split("/"),n=r[0];if(n==="attrs"&&(t.dirty=!0),r.length===1)return this.unset(e,t);var i=r.slice(1),s=this.get(n);return s==null?this:(s=Ks(s),v5(s,i,"/"),this.set(n,s,t))},attr:function(e,t,r){var n=Array.from(arguments);return n.length===0?this.get("attrs"):(Array.isArray(e)?n[0]=["attrs"].concat(e):Mi(e)?n[0]="attrs/"+e:n[0]={attrs:e},this.prop.apply(this,n))},removeAttr:function(e,t){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,t)},transition:function(e,t,r,n){n=n||"/";var i={duration:100,delay:10,timingFunction:she.linear,valueFunction:BU.number};r=Ut(i,r);var s=0,o,a=(function(h){var g,y,m;s=s||h,h-=s,y=h/r.duration,y<1?this._transitionIds[e]=g=cE(a):(y=1,delete this._transitionIds[e]),m=o(r.timingFunction(y)),r.transitionId=g,this.prop(e,m,r),g||this.trigger("transition:end",this,e)}).bind(this);const{_scheduledTransitionIds:u}=this;let c;var f=h=>{u[e]&&(u[e]=g5(u[e],c),u[e].length===0&&delete u[e]),this.stopPendingTransitions(e,n),o=r.valueFunction(ph(this.attributes,e,n),t),this._transitionIds[e]=cE(h),this.trigger("transition:start",this,e)};return c=setTimeout(f,r.delay,a),u[e]||(u[e]=[]),u[e].push(c),c},getTransitions:function(){return aE(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(e,t="/"){const{_scheduledTransitionIds:r={}}=this;let n=Object.keys(r);if(e){const i=e.split(t);n=n.filter(s=>al(i,s.split(t).slice(0,i.length)))}return n.forEach(i=>{r[i].forEach(o=>clearTimeout(o)),delete r[i]}),this},stopPendingTransitions(e,t="/"){const{_transitionIds:r={}}=this;let n=Object.keys(r);if(e){const i=e.split(t);n=n.filter(s=>al(i,s.split(t).slice(0,i.length)))}n.forEach(i=>{const s=r[i];lE(s),delete r[i],this.trigger("transition:end",this,i)})},stopTransitions:function(e,t="/"){return this.stopScheduledTransitions(e,t),this.stopPendingTransitions(e,t),this},addTo:function(e,t){return e.addCell(this,t),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,t){return this.graph&&this.graph.startBatch(e,Ut({},t,{cell:this})),this},stopBatch:function(e,t){return this.graph&&this.graph.stopBatch(e,Ut({},t,{cell:this})),this},getChangeFlag:function(e){var t=0;if(!e)return t;for(var r in e)!e.hasOwnProperty(r)||!this.hasChanged(r)||(t|=e[r]);return t},angle:function(){return 0},position:function(){return new pe(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new pe},getBBox:function(){return new vt(0,0,0,0)},getPointRotatedAroundCenter(e,t,r){const n=new pe(t,r);return e&&n.rotate(this.getBBox().center(),e),n},getAbsolutePointFromRelative(e,t){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,t))},getRelativePointFromAbsolute(e,t){return this.getPointRotatedAroundCenter(this.angle(),e,t).difference(this.position())}},{getAttributeDefinition:function(e){var t=this.attributes,r=GU;return t&&t[e]||r[e]},define:function(e,t,r,n){r=Ut({defaults:UA({type:e},t,this.prototype.defaults)},r);var i=this.extend(r,n);return typeof joint<"u"&&Fa(joint,"shapes")&&uE(joint.shapes,e,i,"."),i}}),lhe=function(e,t,r){if(Mi(r)){if(!fE[r])throw new Error('Unknown wrapper: "'+r+'"');r=fE[r]}if(!fn(r))throw new Error("Wrapper must be a function.");Fr(t).forEach(function(n){e[n]=r(e[n])})},fE={cells:function(e){return function(){var t=Array.from(arguments),r=t.length,n=r>0&&t[0]||[],i=r>1&&t[r-1]||{};return Array.isArray(n)||(i instanceof ca?n=t:n instanceof ca&&(t.length>1&&t.pop(),n=t)),i instanceof ca&&(i={}),e.call(this,n,i)}}},Vn={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function $U(e,t){const r=new vt(e);switch(t){case void 0:throw new Error("Position required");case Vn.LEFT:case"leftMiddle":return r.leftMiddle();case Vn.RIGHT:case"rightMiddle":return r.rightMiddle();case Vn.TOP:case"topMiddle":return r.topMiddle();case Vn.BOTTOM:case"bottomMiddle":return r.bottomMiddle();case Vn.TOP_LEFT:case"topLeft":case"origin":return r.topLeft();case Vn.TOP_RIGHT:case"topRight":return r.topRight();case Vn.BOTTOM_LEFT:case"bottomLeft":return r.bottomLeft();case Vn.BOTTOM_RIGHT:case"bottomRight":case"corner":return r.bottomRight();case Vn.CENTER:return r.center();default:throw new Error(`Unknown position: ${t}`)}}function UU(e,t,r){var n=e.toJSON();return n.angle=t||0,Ms({},r,n)}function jh(e,t,r,n){return e.map(function(i,s,o){var a=this.pointAt((s+.5)/o.length);return(i.dx||i.dy)&&a.offset(i.dx||0,i.dy||0),UU(a.round(),0,jA(n,i))},tc(t,r))}function jU(e,t,r,n){var i=t.center(),s=t.width/t.height,o=t.topMiddle(),a=Xi.fromRect(t);return e.map(function(u,c,f){var h=r+n(c,f.length),g=o.clone().rotate(i,-h).scale(s,1,i),y=u.compensateRotation?-a.tangentTheta(g):0;return(u.dx||u.dy)&&g.offset(u.dx||0,u.dy||0),u.dr&&g.move(i,u.dr),UU(g.round(),y,jA(t,u))})}function jA(e,t){let{x:r,y:n,angle:i}=t;return Ai(r)?r=parseFloat(r)/100*e.width:Qs(r)&&(r=Number(eo(r,e))),Ai(n)?n=parseFloat(n)/100*e.height:Qs(n)&&(n=Number(eo(n,e))),{x:r,y:n,angle:i}}function hE(e,t){const{x:r,y:n}=jA(e,t);return new pe(r||0,n||0)}const fhe=function(e,t){return e.map(r=>{const n=hE(t,r).round().toJSON();return n.angle=r.angle||0,n})},hhe=function(e,t,r){return r.fn(e,t,r)},dhe=function(e,t,r){var n=hE(t,r.start||t.origin()),i=hE(t,r.end||t.corner());return jh(e,n,i,t)},phe=function(e,t,r){return jh(e,t.origin(),t.bottomLeft(),t)},ghe=function(e,t,r){return jh(e,t.topRight(),t.corner(),t)},vhe=function(e,t,r){return jh(e,t.origin(),t.topRight(),t)},mhe=function(e,t,r){return jh(e,t.bottomLeft(),t.corner(),t)},yhe=function(e,t,r){var n=r.startAngle||0,i=r.step||360/e.length;return jU(e,t,n,function(s){return s*i})},_he=function(e,t,r){var n=r.startAngle||0,i=r.step||20;return jU(e,t,n,function(s,o){return(s+.5-o/2)*i})},bhe=Object.freeze(Object.defineProperty({__proto__:null,absolute:fhe,bottom:mhe,ellipse:_he,ellipseSpread:yhe,fn:hhe,left:phe,line:dhe,right:ghe,top:vhe},Symbol.toStringTag,{value:"Module"}));function Lu(e,t){return UA({},e,t,{x:0,y:0,angle:0,attrs:{}})}function HU(e){var t=e.center(),r=t.theta(e.origin()),n=t.theta(e.bottomLeft()),i=t.theta(e.corner()),s=t.theta(e.topRight());return[r,s,i,n]}function WU(e,t,r,n){n=Ms({},n,{offset:15});var i=t.center().theta(e),s,o,a,u,c=n.offset,f=0;const[h,g,y,m]=HU(t);i<g||i>y?(a=".3em",s=c,o=0,u="start"):i<h?(s=0,o=-c,r?(f=-90,u="start",a=".3em"):(u="middle",a="0")):i<m?(a=".3em",s=-c,o=0,u="end"):(s=0,o=c,r?(f=90,u="start",a=".3em"):(u="middle",a=".6em"));var _=Math.round;return Lu(n,{x:_(s),y:_(o),angle:f,attrs:{labelText:{y:a,textAnchor:u}}})}function XU(e,t,r,n){n=Ms({},n,{offset:15});var i=t.center().theta(e),s,o,a,u,c=n.offset,f=0;const[h,g,y,m]=HU(t);i<g||i>y?(a=".3em",s=-c,o=0,u="end"):i<h?(s=0,o=c,r?(f=90,u="start",a=".3em"):(u="middle",a=".6em")):i<m?(a=".3em",s=c,o=0,u="start"):(s=0,o=-c,r?(f=-90,u="start",a=".3em"):(u="middle",a="0"));var _=Math.round;return Lu(n,{x:_(s),y:_(o),angle:f,attrs:{labelText:{y:a,textAnchor:u}}})}function YU(e,t,r){r=Ms({},r,{offset:20});var n=Mp(0,0),i=-e.theta(n),s=i,o=e.clone().move(n,r.offset).difference(e).round(),a=".3em",u;(i+90)%180===0?(u=t?"end":"middle",!t&&i===-270&&(a="0em")):i>-270&&i<-90?(u="start",s=i-180):u="end";var c=Math.round;return Lu(r,{x:c(o.x),y:c(o.y),angle:t?s:0,attrs:{labelText:{y:a,textAnchor:u}}})}const whe=function(e,t,r){return Lu(r)},xhe=function(e,t,r){return Lu(r,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},She=function(e,t,r){return Lu(r,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},Ehe=function(e,t,r){return Lu(r,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},Ahe=function(e,t,r){return Lu(r,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},The=function(e,t,r){return WU(e,t,!0,r)},Phe=function(e,t,r){return WU(e,t,!1,r)},Che=function(e,t,r){return XU(e,t,!0,r)},Rhe=function(e,t,r){return XU(e,t,!1,r)},Ihe=function(e,t,r){return YU(e.difference(t.center()),!1,r)},Ohe=function(e,t,r){return YU(e.difference(t.center()),!0,r)},Mhe=Object.freeze(Object.defineProperty({__proto__:null,bottom:Ahe,inside:Rhe,insideOriented:Che,left:xhe,manual:whe,outside:Phe,outsideOriented:The,radial:Ihe,radialOriented:Ohe,right:She,top:Ehe},Symbol.toStringTag,{value:"Module"})),Kl=ca.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,t,r){if(e===void 0)return Qo(this.get("source"));var n,i,s=e instanceof ca;if(s)return n=Qo(t)||{},n.id=e.id,i=r,this.set("source",n,i);var o=!Kn(e);return o?(n=Qo(t)||{},n.x=e.x,n.y=e.y,i=r,this.set("source",n,i)):(n=e,i=t,this.set("source",n,i))},target:function(e,t,r){if(e===void 0)return Qo(this.get("target"));var n,i,s=e instanceof ca;if(s)return n=Qo(t)||{},n.id=e.id,i=r,this.set("target",n,i);var o=!Kn(e);return o?(n=Qo(t)||{},n.x=e.x,n.y=e.y,i=r,this.set("target",n,i)):(n=e,i=t,this.set("target",n,i))},router:function(e,t,r){if(e===void 0){var n=this.get("router");return n?typeof n=="object"?Qo(n):n:this.get("manhattan")?{name:"orthogonal"}:null}var i=typeof e=="object"||typeof e=="function",s=i?e:{name:e,args:t},o=i?t:r;return this.set("router",s,o)},connector:function(e,t,r){if(e===void 0){var n=this.get("connector");return n?typeof n=="object"?Qo(n):n:this.get("smooth")?{name:"smooth"}:null}var i=typeof e=="object"||typeof e=="function",s=i?e:{name:e,args:t},o=i?t:r;return this.set("connector",s,o)},label:function(e,t,r){var n=this.labels();return e=isFinite(e)&&e!==null?e|0:0,e<0&&(e=n.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],t,r)},labels:function(e,t){return arguments.length===0?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,t))},hasLabels:function(){const{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,t,r){if(!t)throw new Error("dia.Link: no label provided");var n=this.labels(),i=n.length;return e=isFinite(e)&&e!==null?e|0:i,e<0&&(e=i+e+1),n.splice(e,0,t),this.labels(n,r)},appendLabel:function(e,t){return this.insertLabel(-1,e,t)},removeLabel:function(e,t){var r=this.labels();return e=isFinite(e)&&e!==null?e|0:-1,r.splice(e,1),this.labels(r,t)},vertex:function(e,t,r){var n=this.vertices();if(e=isFinite(e)&&e!==null?e|0:0,e<0&&(e=n.length+e),arguments.length<=1)return this.prop(["vertices",e]);var i=this._normalizeVertex(t);return this.prop(["vertices",e],i,r)},vertices:function(e,t){if(arguments.length===0)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var r=[],n=0;n<e.length;n++){var i=e[n],s=this._normalizeVertex(i);r.push(s)}return this.set("vertices",r,t)},insertVertex:function(e,t,r){if(!t)throw new Error("dia.Link: no vertex provided");var n=this.vertices(),i=n.length;e=isFinite(e)&&e!==null?e|0:i,e<0&&(e=i+e+1);var s=this._normalizeVertex(t);return n.splice(e,0,s),this.vertices(n,r)},removeVertex:function(e,t){var r=this.vertices();return e=isFinite(e)&&e!==null?e|0:-1,r.splice(e,1),this.vertices(r,t)},_normalizeVertex:function(e){var t=!Kn(e);return t?{x:e.x,y:e.y}:e},translate:function(e,t,r){return r=r||{},r.translateBy=r.translateBy||this.id,r.tx=e,r.ty=t,this.applyToPoints(function(n){return{x:(n.x||0)+e,y:(n.y||0)+t}},r)},scale:function(e,t,r,n){return this.applyToPoints(function(i){return pe(i).scale(e,t,r).toJSON()},n)},applyToPoints:function(e,t){if(!fn(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var r={},{source:n,target:i}=this.attributes;n.id||(r.source=e(n)),i.id||(r.target=e(i));var s=this.vertices();return s.length>0&&(r.vertices=s.map(e)),this.set(r,t)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new pe(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new pe(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const e=[this.getSourcePoint(),...this.vertices().map(pe),this.getTargetPoint()];return new dn(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var t;if(this.graph){var r=this.getSourceElement(),n=this.getTargetElement(),i=this.getParentCell();r&&n&&(r===n||r.isEmbeddedIn(n)?t=n:n.isEmbeddedIn(r)?t=r:t=this.graph.getCommonAncestor(r,n)),i&&(!t||t.id!==i.id)&&i.unembed(this,e),t&&t.embed(this,e)}return t},hasLoop:function(e){e=e||{};var{source:t,target:r}=this.attributes,n=t.id,i=r.id;if(!n||!i)return!1;var s=n===i;if(!s&&e.deep&&this.graph){var o=this.getSourceCell(),a=this.getTargetCell();s=o.isEmbeddedIn(a)||a.isEmbeddedIn(o)}return s},getSourceCell:function(){const{graph:e,attributes:t}=this;var r=t.source;return r&&r.id&&e&&e.getCell(r.id)||null},getSourceElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){const{graph:e,attributes:t}=this;var r=t.target;return r&&r.id&&e&&e.getCell(r.id)||null},getTargetElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var t=[this,this.getSourceElement(),this.getTargetElement()].filter(function(r){return!!r});e=this.graph.getCommonAncestor.apply(this.graph,t)}return e||null},isRelationshipEmbeddedIn:function(e){var t=Mi(e)||fs(e)?e:e.id,r=this.getRelationshipAncestor();return!!r&&(r.id===t||r.isEmbeddedIn(t))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},t={};return t.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,t.position=e.position,t.attrs=e.attrs,t.size=e.size,t}},{endsEqual:function(e,t){var r=e.port===t.port||!e.port&&!t.port;return e.id===t.id&&r}});var KU=function(e){var t=Ks(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=bhe,this.portLabelLayoutNamespace=Mhe,this._init(t)};KU.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter(function(t){return t.group===e})},getGroupPortsMetrics:function(e,t){var r=this.getGroup(e),n=this.getPortsByGroup(e),i=r.position||{},s=i.name,o=this.portLayoutNamespace;o[s]||(s="left");var a=i.args||{},u=n.map(function(h){return h&&h.position&&h.position.args}),c=o[s](u,t,a),f={ports:n,result:[]};return Fr(c).reduce((function(h,g,y){var m=h.ports[y];return h.result.push({portId:m.id,portTransformation:g,labelTransformation:this._getPortLabelLayout(m,pe(g),t),portAttrs:m.attrs,portSize:m.size,labelSize:m.label.size}),h}).bind(this),f),f.result},_getPortLabelLayout:function(e,t,r){var n=this.portLabelLayoutNamespace,i=e.label.position.name||"left";return n[i]?n[i](t,r,e.label.position.args):null},_init:function(e){if(Wr(e.groups))for(var t=Object.keys(e.groups),r=0,n=t.length;r<n;r++){var i=t[r];this.groups[i]=this._evaluateGroup(e.groups[i])}for(var s=Fr(e.items),o=0,a=s.length;o<a;o++)this.ports.push(this._evaluatePort(s[o]))},_evaluateGroup:function(e){return ri(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var t=Ut({},e),r=this.getGroup(e.group);return t.markup=t.markup||r.markup,t.attrs=ri({},r.attrs,t.attrs),t.position=this._createPositionNode(r,t),t.label=ri({},r.label,this._getLabel(t)),t.z=this._getZIndex(r,t),t.size=Ut({},r.size,t.size),t},_getZIndex:function(e,t){return fs(t.z)?t.z:fs(e.z)||e.z==="auto"?e.z:"auto"},_createPositionNode:function(e,t){return ri({name:"left",args:{}},e.position,{args:t.args})},_getPosition:function(e,t){var r={},n;fn(e)?(n="fn",r.fn=e):Mi(e)?n=e:e===void 0?n=t?"left":null:Array.isArray(e)?(n="absolute",r.x=e[0],r.y=e[1]):Wr(e)&&(n=e.name,Ut(r,e.args));var i={args:r};return n&&(i.name=n),i},_getLabel:function(e,t){var r=e.label||{},n=r;return n.position=this._getPosition(r.position,t),n}};const khe={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var e=this.get("ports")||{},t={};Fr(e.items).forEach(function(a){t[a.id]=!0});var r=this.previous("ports")||{},n={};Fr(r.items).forEach(function(a){t[a.id]||(n[a.id]=!0)});var i=this.graph;if(i&&!Da(n)){var s=i.getConnectedLinks(this,{inbound:!0});s.forEach(function(a){n[a.get("target").port]&&a.remove()});var o=i.getConnectedLinks(this,{outbound:!0});o.forEach(function(a){n[a.get("source").port]&&a.remove()})}},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return this.getPortIndex(e)!==-1},getPorts:function(){return Ks(this.prop("ports/items"))||[]},getGroupPorts:function(e){const t=Fr(this.prop(["ports","items"])).filter(r=>r.group===e);return Ks(t)},getPort:function(e){return Ks(Fr(this.prop("ports/items")).find(function(t){return t.id&&t.id===e}))},getPortsPositions:function(e){var t=this._portSettingsData.getGroupPortsMetrics(e,vt(this.size()));return t.reduce(function(r,n){var i=n.portTransformation;return r[n.portId]={x:i.x,y:i.y,angle:i.angle},r},{})},getPortIndex:function(e){var t=Wr(e)?e.id:e;return this._isValidPortId(t)?Fr(this.prop("ports/items")).findIndex(function(r){return r.id===t}):-1},addPort:function(e,t){if(!Wr(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var r=Ut([],this.prop("ports/items"));return r.push(e),this.prop("ports/items",r,t),this},insertPort:function(e,t,r){const n=typeof e=="number"?e:this.getPortIndex(e);if(!Wr(t)||Array.isArray(t))throw new Error("dia.Element: insertPort requires an object.");const i=Ut([],this.prop("ports/items"));return i.splice(n,0,t),this.prop("ports/items",i,r),this},portProp:function(e,t,r,n){var i=this.getPortIndex(e);if(i===-1)throw new Error("Element: unable to find port with id "+e);var s=Array.prototype.slice.call(arguments,1);return Array.isArray(t)?s[0]=["ports","items",i].concat(t):Mi(t)?s[0]=["ports/items/",i,"/",t].join(""):(s=["ports/items/"+i],Kn(t)&&(s.push(t),s.push(r))),this.prop.apply(this,s)},_validatePorts:function(){var e=this.get("ports")||{},t=[];e=e||{};var r=Fr(e.items);return r.forEach(function(n){typeof n!="object"&&t.push("Element: invalid port ",n),this._isValidPortId(n.id)||(n.id=this.generatePortId())},this),Uh(r,"id").length!==r.length&&t.push("Element: found id duplicities in ports."),t},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return e!=null&&!Wr(e)},addPorts:function(e,t){return e.length&&this.prop("ports/items",Ut([],this.prop("ports/items")).concat(e),t),this},removePort:function(e,t){const r=t||{},n=this.getPortIndex(e);if(n!==-1){const i=Ut([],this.prop(["ports","items"]));i.splice(n,1),r.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],i,r),this.stopBatch("port-remove")}return this},removePorts:function(e,t){let r,n;if(Array.isArray(e)){if(r=t||{},e.length===0)return this.this;n=Ut([],this.prop(["ports","items"])).filter(function(s){return!e.some(function(o){const a=Wr(o)?o.id:o;return s.id===a})})}else r=e||{},n=[];return this.startBatch("port-remove"),r.rewrite=!0,this.prop(["ports","items"],n,r),this.stopBatch("port-remove"),this},_createPortData:function(){var e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));var t;this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new KU(this.get("ports"));var r=this._portSettingsData.getPorts();if(t){var n=r.filter(function(s){if(!t.find(function(o){return o.id===s.id}))return s}),i=t.filter(function(s){if(!r.find(function(o){return o.id===s.id}))return s});i.length>0&&this.trigger("ports:remove",this,i),n.length>0&&this.trigger("ports:add",this,n)}}},Lhe={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],t=this._getContainerElement(),r=0,n=t.node.childNodes.length;r<n;r++)e.push(t.node.childNodes[r]);var i=$fe(this.model._portSettingsData.getPorts(),"z"),s="auto";Fr(i[s]).forEach(function(f){var h=this._getPortElement(f);t.append(h),e.push(h)},this);for(var o=Object.keys(i),a=0;a<o.length;a++){var u=o[a];if(u!==s){var c=parseInt(u,10);this._appendPorts(i[u],c,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,t,r){var n=this._getContainerElement(),i=Fr(e).map(this._getPortElement,this);r[t]||t<0?$e(r[Math.max(t,0)]).before(i):n.append(i)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNode:function(e,t){const r=this._portElementsCache[e];if(!r)return null;if(!t)return r.portContentElement.node;const n=r.portElement.node,i=r.portSelectors,[s=null]=this.findBySelector(t,n,i);return s},_updatePorts:function(){this._updatePortGroup(void 0);var e=Object.keys(this.model._portSettingsData.groups);e.forEach(this._updatePortGroup,this)},_removePorts:function(){To(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let t,r,n,i;var s=$e(this.portContainerMarkup).addClass("joint-port"),o=this._getPortMarkup(e);if(Array.isArray(o)){var a=this.parseDOMJSON(o,s.node),u=a.fragment;u.childNodes.length>1?t=$e("g").append(u):t=$e(u.firstChild),i=a.selectors}else t=$e(o),Array.isArray(t)&&(t=$e("g").append(t));if(!t)throw new Error("ElementView: Invalid port markup.");t.attr({port:e.id,"port-group":e.group});const c=this._getPortLabelMarkup(e.label);if(Array.isArray(c)){const{fragment:_,selectors:b}=this.parseDOMJSON(c,s.node),S=_.childNodes.length;S>0&&(n=b,r=S===1?$e(_.firstChild):$e("g").append(_))}else r=$e(c),Array.isArray(r)&&(r=$e("g").append(r));var f;if(i&&n){for(var h in n)if(i[h]&&h!==this.selector)throw new Error("ElementView: selectors within port must be unique.");f=Ut({},i,n)}else f=i||n||{};const g="portRoot",y="labelRoot",m="labelText";if(g in f||(f[g]=t.node),r){const _=r.node;if(y in f||(f[y]=_),!(m in f)){const b=r.tagName()==="TEXT"?_:Array.from(_.querySelectorAll("text"));f[m]=b,n||(n={}),n[m]=b}}return s.append(t.addClass("joint-port-body")),r&&s.append(r.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:s,portLabelElement:r,portSelectors:f,portLabelSelectors:n,portContentElement:t,portContentSelectors:i},s},_updatePortGroup:function(e){for(var t=vt(this.model.size()),r=this.model._portSettingsData.getGroupPortsMetrics(e,t),n=0,i=r.length;n<i;n++){var s=r[n],o=s.portId,a=this._portElementsCache[o]||{},u=s.portTransformation,c=s.labelTransformation;c&&a.portLabelElement&&(this.updateDOMSubtreeAttributes(a.portLabelElement.node,c.attrs,{rootBBox:new vt(s.labelSize),selectors:a.portLabelSelectors}),this.applyPortTransform(a.portLabelElement,c,-u.angle||0)),this.updateDOMSubtreeAttributes(a.portElement.node,s.portAttrs,{rootBBox:new vt(s.portSize),selectors:a.portSelectors}),this.applyPortTransform(a.portElement,u)}},applyPortTransform:function(e,t,r){var n=$e.createSVGMatrix().rotate(r||0).translate(t.x||0,t.y||0).rotate(t.angle||0);e.transform(n,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Ni=ca.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),ca.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,t,r){const n=fs(t);r=(n?r:e)||{};const{parentRelative:i,deep:s,restrictedArea:o}=r;let a;if(i){if(!this.graph)throw new Error("Element must be part of a graph.");const u=this.getParentCell();u&&!u.isLink()&&(a=u.get("position"))}if(n){if(a&&(e+=a.x,t+=a.y),s||o){const{x:u,y:c}=this.get("position");this.translate(e-u,t-c,r)}else this.set("position",{x:e,y:t},r);return this}else{const u=pe(this.get("position"));return i?u.difference(a):u}},translate:function(e,t,r){if(e=e||0,t=t||0,e===0&&t===0)return this;r=r||{},r.translateBy=r.translateBy||this.id;var n=this.get("position")||{x:0,y:0},i=r.restrictedArea;if(i&&r.translateBy===this.id)if(typeof i=="function"){var s=i.call(this,n.x+e,n.y+t,r);e=s.x-n.x,t=s.y-n.y}else{var o=this.getBBox({deep:!0}),a=n.x-o.x,u=n.y-o.y,c=Math.max(i.x+a,Math.min(i.x+i.width+a-o.width,n.x+e)),f=Math.max(i.y+u,Math.min(i.y+i.height+u-o.height,n.y+t));e=c-n.x,t=f-n.y}var h={x:n.x+e,y:n.y+t};return r.tx=e,r.ty=t,r.transition?(Wr(r.transition)||(r.transition={}),this.transition("position",h,Ut({},r.transition,{valueFunction:BU.object})),To(this.getEmbeddedCells(),"translate",e,t,r)):(this.startBatch("translate",r),this.set("position",h,r),To(this.getEmbeddedCells(),"translate",e,t,r),this.stopBatch("translate",r)),this},size:function(e,t,r){var n=this.get("size");return e===void 0?{width:n.width,height:n.height}:(Wr(e)&&(r=t,t=fs(e.height)?e.height:n.height,e=fs(e.width)?e.width:n.width),this.resize(e,t,r))},resize:function(e,t,r){if(r=r||{},this.startBatch("resize",r),r.direction){var n=this.get("size");switch(r.direction){case"left":case"right":t=n.height;break;case"top":case"bottom":e=n.width;break}var i=Oo(this.get("angle")||0),s=this.getBBox(),o;if(i){var a={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[r.direction];r.absolute&&(a+=Math.floor((i+45)/90),a%=4);var u=s[["bottomLeft","corner","topRight","origin"][a]](),c=pe(u).rotate(s.center(),-i),f=Math.sqrt(e*e+t*t)/2,h=a*Math.PI/2;h+=Math.atan(a%2==0?t/e:e/t),h-=vs(i);var g=pe.fromPolar(f,h,c);o=pe(g).offset(e/-2,t/-2)}else switch(o=s.topLeft(),r.direction){case"top":case"top-right":o.offset(0,s.height-t);break;case"left":case"bottom-left":o.offset(s.width-e,0);break;case"top-left":o.offset(s.width-e,s.height-t);break}this.set("size",{width:e,height:t},r),this.position(o.x,o.y,r)}else this.set("size",{width:e,height:t},r);return this.stopBatch("resize",r),this},scale:function(e,t,r,n){var i=this.getBBox().scale(e,t,r);return this.startBatch("scale",n),this.position(i.x,i.y,n),this.resize(i.width,i.height,n),this.stopBatch("scale"),this},fitEmbeds:function(e){return this.fitToChildren(e)},fitToChildren:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");const r=this.getEmbeddedCells().filter(n=>n.isElement());return r.length===0?this:(this.startBatch("fit-embeds",e),e.deep&&To(r,"fitToChildren",e),this._fitToElements(Object.assign({elements:r},e)),this.stopBatch("fit-embeds"),this)},fitParent:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");if(e.deep&&e.terminator&&(e.terminator===this||e.terminator===this.id))return this;const r=this.getParentCell();if(!r||!r.isElement())return this;const n=r.getEmbeddedCells().filter(i=>i.isElement());return n.length===0?this:(this.startBatch("fit-parent",e),r._fitToElements(Object.assign({elements:n},e)),e.deep&&r.fitParent(e),this.stopBatch("fit-parent"),this)},_fitToElements:function(e={}){const t=this.graph.getCellsBBox(e.elements);if(!t)return;const{expandOnly:r,shrinkOnly:n}=e;if(r&&n)return;let{x:i,y:s,width:o,height:a}=t;const{left:u,right:c,top:f,bottom:h}=lc(e.padding);i-=u,s-=f,o+=u+c,a+=h+f;let g=new vt(i,s,o,a);if(r)g=this.getBBox().union(g);else if(n){const y=this.getBBox().intersect(g);if(!y)return;g=y}this.set({position:{x:g.x,y:g.y},size:{width:g.width,height:g.height}},e)},rotate:function(e,t,r,n){if(r){var i=this.getBBox().center(),s=this.get("size"),o=this.get("position");i.rotate(r,this.get("angle")-e);var a=i.x-s.width/2-o.x,u=i.y-s.height/2-o.y;this.startBatch("rotate",{angle:e,absolute:t,origin:r}),this.position(o.x+a,o.y+u,n),this.rotate(e,t,null,n),this.stopBatch("rotate")}else this.set("angle",t?e:(this.get("angle")+e)%360,n);return this},angle:function(){return Oo(this.get("angle")||0)},getBBox:function(e={}){const{graph:t,attributes:r}=this,{deep:n,rotate:i}=e;if(n&&t){const h=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return h.push(this),t.getCellsBBox(h,e)}const{angle:s=0,position:{x:o,y:a},size:{width:u,height:c}}=r,f=new vt(o,a,u,c);return i&&f.rotateAroundCenter(s),f},getPointFromConnectedLink:function(e,t){var r=this.getBBox(),n=r.center(),i=e.get(t);if(!i)return n;var s=i.port;if(!s||!this.hasPort(s))return n;var o=this.portProp(s,["group"]),a=this.getPortsPositions(o),u=new pe(a[s]).offset(r.origin()),c=this.angle();return c&&u.rotate(n,-c),u}});Ut(Ni.prototype,khe);const Nhe=Jn.Collection.extend({initialize:function(e,t){t.cellNamespace?this.cellNamespace=t.cellNamespace:this.cellNamespace=typeof joint<"u"&&Fa(joint,"shapes")?joint.shapes:null,this.graph=t.graph},model:function(e,t){var r=t.collection,n=r.cellNamespace,i=e.type==="link"?Kl:ph(n,e.type,".")||Ni,s=new i(e,t);return t.dry||(s.graph=r.graph),s},comparator:function(e){return e.get("z")||0}}),Po=Jn.Model.extend({initialize:function(e,t){t=t||{};var r=new Nhe([],{model:t.cellModel,cellNamespace:t.cellNamespace,graph:this});Jn.Model.prototype.set.call(this,"cells",r),r.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},r.on("add",this._restructureOnAdd,this),r.on("remove",this._restructureOnRemove,this),r.on("reset",this._restructureOnReset,this),r.on("change:source",this._restructureOnChangeSource,this),r.on("change:target",this._restructureOnChangeTarget,this),r.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:t,target:r}=e.attributes;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0),r.id&&((this._in[r.id]||(this._in[r.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:t,target:r}=e.attributes;t.id&&this._out[t.id]&&this._out[t.id][e.id]&&delete this._out[t.id][e.id],r.id&&this._in[r.id]&&this._in[r.id][e.id]&&delete this._in[r.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var t=e.previous("source");t.id&&this._out[t.id]&&delete this._out[t.id][e.id];var r=e.attributes.source;r.id&&((this._out[r.id]||(this._out[r.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var t=e.previous("target");t.id&&this._in[t.id]&&delete this._in[t.id][e.id];var r=e.get("target");r.id&&((this._in[r.id]||(this._in[r.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(){var e=Jn.Model.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(),e},fromJSON:function(e,t){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,t)},set:function(e,t,r){var n;return typeof e=="object"?(n=e,r=t):(n={})[e]=t,n.hasOwnProperty("cells")&&(this.resetCells(n.cells,r),n=cc(n,"cells")),Jn.Model.prototype.set.call(this,n,r)},clear:function(e){e=Ut({},e,{clear:!0});var t=this.get("cells");if(t.length===0)return this;this.startBatch("clear",e);var r=t.sortBy(function(n){return n.isLink()?1:2});do r.shift().remove(e);while(r.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e,t){var r;if(e instanceof Jn.Model?(r=e.attributes,!e.graph&&(!t||!t.dry)&&(e.graph=this)):r=e,!Mi(r.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,t){return Array.isArray(e)?this.addCells(e,t):(e instanceof Jn.Model?e.has("z")||e.set("z",this.maxZIndex()+1):e.z===void 0&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,t),t||{}),this)},addCells:function(e,t){return e.length===0?this:(e=Ufe(e),t.maxPosition=t.position=e.length-1,this.startBatch("add",t),e.forEach(function(r){this.addCell(r,t),t.position--},this),this.stopBatch("add",t),this)},resetCells:function(e,t){var r=Fr(e).map(function(n){return this._prepareCell(n,t)},this);return this.get("cells").reset(r,t),this},removeCells:function(e,t){return e.length&&(this.startBatch("remove"),To(e,"remove",t),this.stopBatch("remove")),this},_removeCell:function(e,t,r){r=r||{},r.clear||(r.disconnectLinks?this.disconnectLinks(e,r):this.removeLinks(e,r)),this.get("cells").remove(e,{silent:!0}),e.graph===this&&(e.graph=null)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(e=>e.isElement())},getLinks:function(){return this.get("cells").filter(e=>e.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,t){t=t||{};var r=t.indirect,n=t.inbound,i=t.outbound;n===void 0&&i===void 0&&(n=i=!0);var s=[],o={};i&&a(this,e),n&&u(this,e);function a(h,g){if(Zs(h.getOutboundEdges(g.id),(function(m,_){if(!o[_]){var b=h.getCell(_);s.push(b),o[_]=!0,r&&(n&&u(h,b),i&&a(h,b))}}).bind(h)),r&&g.isLink()){var y=g.getTargetCell();y&&y.isLink()&&(o[y.id]||(s.push(y),a(h,y)))}}function u(h,g){if(Zs(h.getInboundEdges(g.id),(function(m,_){if(!o[_]){var b=h.getCell(_);s.push(b),o[_]=!0,r&&(n&&u(h,b),i&&a(h,b))}}).bind(h)),r&&g.isLink()){var y=g.getSourceCell();y&&y.isLink()&&(o[y.id]||(s.push(y),u(h,y)))}}if(t.deep){var c=e.getEmbeddedCells({deep:!0}),f={};c.forEach(function(h){h.isElement()&&(f[h.id]=!0)}),c.forEach(function(h){h.isLink()||(i&&Zs(this.getOutboundEdges(h.id),(function(g,y){if(!o[y]){var m=this.getCell(y),{source:_,target:b}=m.attributes,S=_.id,E=b.id;if(!t.includeEnclosed&&S&&f[S]&&E&&f[E])return;s.push(this.getCell(y)),o[y]=!0}}).bind(this)),n&&Zs(this.getInboundEdges(h.id),(function(g,y){if(!o[y]){var m=this.getCell(y),{source:_,target:b}=m.attributes,S=_.id,E=b.id;if(!t.includeEnclosed&&S&&f[S]&&E&&f[E])return;s.push(this.getCell(y)),o[y]=!0}}).bind(this)))},this)}return s},getNeighbors:function(e,t){t||(t={});var r=t.inbound,n=t.outbound;r===void 0&&n===void 0&&(r=n=!0);var i=this.getConnectedLinks(e,t).reduce((function(a,u){var{source:c,target:f}=u.attributes,h=u.hasLoop(t);if(r&&Fa(c,"id")&&!a[c.id]){var g=this.getCell(c.id);g.isElement()&&(h||g&&g!==e&&(!t.deep||!g.isEmbeddedIn(e)))&&(a[c.id]=g)}if(n&&Fa(f,"id")&&!a[f.id]){var y=this.getCell(f.id);y.isElement()&&(h||y&&y!==e&&(!t.deep||!y.isEmbeddedIn(e)))&&(a[f.id]=y)}return a}).bind(this),{});if(e.isLink()){if(r){var s=e.getSourceCell();s&&s.isElement()&&!i[s.id]&&(i[s.id]=s)}if(n){var o=e.getTargetCell();o&&o.isElement()&&!i[o.id]&&(i[o.id]=o)}}return Fr(i)},getCommonAncestor:function(){var e=Array.from(arguments).map(function(r){for(var n=[],i=r.get("parent");i;)n.push(i),i=this.getCell(i).get("parent");return n},this);e=e.sort(function(r,n){return r.length-n.length});var t=Fr(e.shift()).find(function(r){return e.every(function(n){return n.includes(r)})});return this.getCell(t)},getSuccessors:function(e,t){t=t||{};var r=[];return this.search(e,function(n){n!==e&&r.push(n)},Ut({},t,{outbound:!0})),r},cloneCells:zU,cloneSubgraph:function(e,t){var r=this.getSubgraph(e,t);return this.cloneCells(r)},getSubgraph:function(e,t){t=t||{};var r=[],n={},i=[],s=[];return Fr(e).forEach(function(o){if(n[o.id]||(r.push(o),n[o.id]=o,o.isLink()?s.push(o):i.push(o)),t.deep){var a=o.getEmbeddedCells({deep:!0});a.forEach(function(u){n[u.id]||(r.push(u),n[u.id]=u,u.isLink()?s.push(u):i.push(u))})}}),s.forEach(function(o){var{source:a,target:u}=o.attributes;if(a.id&&!n[a.id]){var c=this.getCell(a.id);r.push(c),n[c.id]=c,i.push(c)}if(u.id&&!n[u.id]){var f=this.getCell(u.id);r.push(this.getCell(u.id)),n[f.id]=f,i.push(f)}},this),i.forEach(function(o){var a=this.getConnectedLinks(o,t);a.forEach(function(u){var{source:c,target:f}=u.attributes;!n[u.id]&&c.id&&n[c.id]&&f.id&&n[f.id]&&(r.push(u),n[u.id]=u)})},this),r},getPredecessors:function(e,t){t=t||{};var r=[];return this.search(e,function(n){n!==e&&r.push(n)},Ut({},t,{inbound:!0})),r},search:function(e,t,r){r=r||{},r.breadthFirst?this.bfs(e,t,r):this.dfs(e,t,r)},bfs:function(e,t,r={}){const n={},i={},s=[];for(s.push(e),i[e.id]=0;s.length>0;){var o=s.shift();if(n[o.id]||(n[o.id]=!0,t.call(this,o,i[o.id])===!1))continue;const a=this.getNeighbors(o,r);for(let u=0,c=a.length;u<c;u++){const f=a[u];i[f.id]=i[o.id]+1,s.push(f)}}},dfs:function(e,t,r={}){const n={},i={},s=[];for(s.push(e),i[e.id]=0;s.length>0;){const o=s.pop();if(n[o.id]||(n[o.id]=!0,t.call(this,o,i[o.id])===!1))continue;const a=this.getNeighbors(o,r),u=s.length;for(let c=0,f=a.length;c<f;c++){const h=a[c];i[h.id]=i[o.id]+1,s.splice(u,0,h)}}},getSources:function(){var e=[];return Zs(this._nodes,(function(t,r){(!this._in[r]||Da(this._in[r]))&&e.push(this.getCell(r))}).bind(this)),e},getSinks:function(){var e=[];return Zs(this._nodes,(function(t,r){(!this._out[r]||Da(this._out[r]))&&e.push(this.getCell(r))}).bind(this)),e},isSource:function(e){return!this._in[e.id]||Da(this._in[e.id])},isSink:function(e){return!this._out[e.id]||Da(this._out[e.id])},isSuccessor:function(e,t){var r=!1;return this.search(e,function(n){if(n===t&&n!==e)return r=!0,!1},{outbound:!0}),r},isPredecessor:function(e,t){var r=!1;return this.search(e,function(n){if(n===t&&n!==e)return r=!0,!1},{inbound:!0}),r},isNeighbor:function(e,t,r){r=r||{};var n=r.inbound,i=r.outbound;n===void 0&&i===void 0&&(n=i=!0);var s=!1;return this.getConnectedLinks(e,r).forEach(function(o){var{source:a,target:u}=o.attributes;if(n&&Fa(a,"id")&&a.id===t.id||i&&Fa(u,"id")&&u.id===t.id)return s=!0,!1}),s},disconnectLinks:function(e,t){this.getConnectedLinks(e).forEach(function(r){r.set(r.attributes.source.id===e.id?"source":"target",{x:0,y:0},t)})},removeLinks:function(e,t){To(this.getConnectedLinks(e),"remove",t)},findModelsFromPoint:function(e){return this.getElements().filter(t=>t.getBBox({rotate:!0}).containsPoint(e))},findModelsInArea:function(e,t={}){const r=new vt(e),{strict:n=!1}=t,i=n?"containsRect":"intersect";return this.getElements().filter(s=>r[i](s.getBBox({rotate:!0})))},findModelsUnderElement:function(e,t={}){const{searchBy:r="bbox"}=t,n=e.getBBox().rotateAroundCenter(e.angle());return(r==="bbox"?this.findModelsInArea(n):this.findModelsFromPoint($U(n,r))).filter(s=>e.id!==s.id&&!s.isEmbeddedIn(e))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,t={}){const{rotate:r=!0}=t;return Fr(e).reduce(function(n,i){const s=i.getBBox({rotate:r});return s?n?n.union(s):s:n},null)},translate:function(e,t,r){var n=this.getCells().filter(function(i){return!i.isEmbedded()});return To(n,"translate",e,t,r),this},resize:function(e,t,r){return this.resizeCells(e,t,this.getCells(),r)},resizeCells:function(e,t,r,n){var i=this.getCellsBBox(r);if(i){var s=Math.max(e/i.width,0),o=Math.max(t/i.height,0);To(r,"scale",s,o,i.origin(),n)}return this},startBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",Ut({},t,{batchName:e}))},stopBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",Ut({},t,{batchName:e}))},hasActiveBatch:function(e){const t=this._batches;let r;return arguments.length===0?r=Object.keys(t):Array.isArray(e)?r=e:r=[e],r.some(n=>t[n]>0)}},{validations:{multiLinks:function(e,t){var{source:r,target:n}=t.attributes;if(r.id&&n.id){var i=t.getSourceCell();if(i){var s=e.getConnectedLinks(i,{outbound:!0}),o=s.filter(function(a){var{source:u,target:c}=a.attributes;return u&&u.id===r.id&&(!u.port||u.port===r.port)&&c&&c.id===n.id&&(!c.port||c.port===n.port)});if(o.length>1)return!1}}return!0},linkPinning:function(e,t){var{source:r,target:n}=t.attributes;return r.id&&n.id}}});lhe(Po.prototype,["resetCells","addCells","removeCells"],fE.cells);const Ku={},Va=Jn.View.extend({options:{},theme:null,themeClassNamePrefix:So("theme-"),requireSetThemeOverride:!1,defaultTheme:yu.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=Ut({},this.options,e),Jn.View.call(this,e)},initialize:function(){Ku[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return this.el.parentNode!==null},renderChildren:function(e){if(e||(e=Zn(this,"children")),e){var t=this.svgElement,r=$e.namespace[t?"svg":"xhtml"],n=Bp(e,r);(t?this.vel:this.$el).empty().append(n.fragment),this.childNodes=n.selectors}return this},findAttribute:function(e,t){for(var r=t;r&&r.nodeType===1;){var n=r.getAttribute(e);if(n)return n;if(r===this.el)return null;r=r.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(Zn(this,"el"));else{var e=Zn(this,"tagName"),t=Ut({},Zn(this,"attributes")),r=Ut({},Zn(this,"style"));this.id&&(t.id=Zn(this,"id")),this.setElement(this._createElement(e)),this._setAttributes(t),this._setStyle(r)}this._ensureElClassName()},_setAttributes:function(e){this.svgElement?this.vel.attr(e):this.$el.attr(e)},_setStyle:function(e){this.$el.css(e)},_createElement:function(e){return this.svgElement?document.createElementNS($e.namespace.svg,e):document.createElement(e)},_setElement:function(e){this.$el=e instanceof Jn.$?e:Jn.$(e),this.el=this.$el[0],this.svgElement&&(this.vel=$e(this.el))},_ensureElClassName:function(){var e=Zn(this,"className");if(e){var t=So(e);this.svgElement?this.vel.removeClass(e).addClass(t):this.$el.removeClass(e).addClass(t)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(e,t){return t=t||{},this.theme&&this.requireSetThemeOverride&&!t.override?this:(this.removeThemeClassName(),this.addThemeClassName(e),this.onSetTheme(this.theme,e),this.theme=e,this)},addThemeClassName:function(e){if(e=e||this.theme,!e)return this;var t=this.themeClassNamePrefix+e;return this.svgElement?this.vel.addClass(t):this.$el.addClass(t),this},removeThemeClassName:function(e){e=e||this.theme;var t=this.themeClassNamePrefix+e;return this.svgElement?this.vel.removeClass(t):this.$el.removeClass(t),this},onSetTheme:function(e,t){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Ku[this.cid]=null,Jn.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(e,t,r){if(!t)return this;r||(r={});var n=this.getEventNamespace();for(var i in t){var s=t[i];typeof s!="function"&&(s=this[s]),s&&It(e).on(i+n,r,s.bind(this))}return this},undelegateElementEvents:function(e){return It(e).off(this.getEventNamespace()),this},delegateDocumentEvents:function(e,t){return e||(e=Zn(this,"documentEvents")),this.delegateElementEvents(document,e,t)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(e,t){if(!e)throw new Error("eventData(): event object required.");var r=e.data,n="__"+this.cid+"__";return t===void 0?r?r[n]||{}:{}:(r||(r=e.data={}),r[n]||(r[n]={}),Ut(r[n],t),this)},stopPropagation:function(e){return this.eventData(e,{propagationStopped:!0}),this},isPropagationStopped:function(e){return!!this.eventData(e).propagationStopped}},{extend:function(){var e=Array.from(arguments),t=e[0]&&Ut({},e[0])||{},r=e[1]&&Ut({},e[1])||{},n=t.render||this.prototype&&this.prototype.render||null;return t.render=function(){return typeof n=="function"&&n.apply(this,arguments),this.render.__render__===n&&this.onRender(),this},t.render.__render__=n,Jn.View.extend.call(this,t,r)}}),S5="dbltap";if(It.event&&!(S5 in It.event.special)){const e=yu.doubleTapInterval,t=30;It.event.special[S5]={bindType:"touchend",delegateType:"touchend",handle:function(r,...n){const{handleObj:i,target:s}=r,o=It.data(s),a=new Date().getTime(),u="lastTouch"in o?a-o.lastTouch:0;u<e&&u>t?(o.lastTouch=null,r.type=i.origType,i.handler.call(this,r,...n)):o.lastTouch=a}}}const Js={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},qhe=Va.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return So(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,t){this.el.insertBefore(e,this.insertPivot(t))},insertNode:function(e){const{el:t}=this;e.parentNode!==t&&t.appendChild(e)},insertPivot:function(e){const{el:t,pivotNodes:r}=this;e=+e,e||(e=0);let n=r[e];if(n)return n;n=r[e]=document.createComment("z-index:"+(e+1));let i=-1/0;for(let s in r)s=+s,s<e&&s>i&&(i=s,e-1);if(i!==-1/0){const s=r[i];t.insertBefore(n,s.nextSibling)}else t.insertBefore(n,t.firstChild);return n},removePivots:function(){const{el:e,pivotNodes:t}=this;for(let r in t)e.removeChild(t[r]);this.pivotNodes={}}});function Lf(e){return e?Array.isArray(e)?e:[e]:[]}const Eo=Va.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(e,t){const{paper:r}=e;this.cellView=e,this.nodeSelector=t,r&&(this.updateRequested=!0,r.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:e,nodeSelector:t}=this;return e.isMounted()?(this.update(e,t),this.mount(),this.transform(),0):(this.postponedUpdate=!0,0)},findNode(e,t=null){let r;if(typeof t=="string")[r]=e.findBySelector(t);else if(Kn(t)){const n=e.model.isLink(),{label:i=null,port:s,selector:o}=t;n&&i!==null?r=e.findLabelNode(i,o):!n&&s?r=e.findPortNode(s,o):[r]=e.findBySelector(o)}else t&&(r=$e.toNode(t),r instanceof SVGElement||(r=null));return r||null},getNodeMatrix(e,t){const{options:r}=this,{layer:n}=r,{rotatableNode:i}=e,s=e.getNodeMatrix(t);return i?n?i.contains(t)?s:e.getRootRotateMatrix().inverse().multiply(s):e.getNodeRotateMatrix(t).multiply(s):s},mount(){const{MOUNTABLE:e,cellView:t,el:r,options:n,transformGroup:i,detachedTransformGroup:s,postponedUpdate:o,nodeSelector:a}=this;if(!e||i)return;if(o){this.update(t,a),this.transform();return}const{vel:u,paper:c}=t,{layer:f}=n;if(f){let h;s?(h=s,this.detachedTransformGroup=null):h=$e("g").addClass("highlight-transform").append(r),this.transformGroup=h,c.getLayerView(f).insertSortedNode(h.node,n.z)}else(!r.parentNode||r.nextSibling)&&u.append(r)},unmount(){const{MOUNTABLE:e,transformGroup:t,vel:r}=this;e&&(t?(this.transformGroup=null,this.detachedTransformGroup=t,t.remove()):r.remove())},transform(){const{transformGroup:e,cellView:t,updateRequested:r}=this;if(!e||t.model.isLink()||r)return;const n=t.getRootTranslateMatrix(),i=t.getRootRotateMatrix(),s=n.multiply(i);e.attr("transform",$e.matrixToTransformString(s))},update(){const{node:e,cellView:t,nodeSelector:r,updateRequested:n,id:i}=this;if(n)return;this.postponedUpdate=!1;const s=this.node=this.findNode(t,r);e&&this.unhighlight(t,e),s?(this.highlight(t,s),this.mount()):(this.unmount(),t.notify("cell:highlight:invalid",i,this))},onRemove(){const{node:e,cellView:t,id:r,constructor:n}=this;e&&this.unhighlight(t,e),this.unmount(),n._removeRef(t,r)},highlight(e,t){},unhighlight(e,t){},listenToUpdateAttributes(e){const t=Zn(this,"UPDATE_ATTRIBUTES");!Array.isArray(t)||t.length===0||this.listenTo(e.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){const{cellView:e}=this;if(!e)return;const{model:t,paper:r}=e;Zn(this,"UPDATE_ATTRIBUTES").some(i=>t.hasChanged(i))&&r.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(e,t,r){const n=this.uniqueId(t,r);this.add(e,t,n,r)},unhighlight:function(e,t,r){const n=this.uniqueId(t,r);this.remove(e,n)},get(e,t=null){const{cid:r}=e,{_views:n}=this,i=n[r];if(t===null){const s=[];if(!i)return s;for(let o in i){const a=i[o];a instanceof this&&s.push(a)}return s}else{if(!i)return null;if(t in i){const s=i[t];if(s instanceof this)return s}return null}},add(e,t,r,n={}){if(!r)throw new Error("dia.HighlighterView: An ID required.");const i=Eo.get(e,r);i&&i.remove();const s=new this(n);return s.id=r,this._addRef(e,r,s),s.requestUpdate(e,t),s.listenToUpdateAttributes(e),s},_addRef(e,t,r){const{cid:n}=e,{_views:i}=this;let s=i[n];s||(s=i[n]={}),s[t]=r},_removeRef(e,t){const{cid:r}=e,{_views:n}=this,i=n[r];if(i){t&&delete i[t];for(let s in i)return;delete n[r]}},remove(e,t=null){Lf(this.get(e,t)).forEach(r=>{r.remove()})},removeAll(e,t=null){const{_views:r}=this;for(let n in r)for(let i in r[n]){const s=r[n][i];s.cellView.paper===e&&s instanceof this&&(t===null||i===t)&&s.remove()}},update(e,t=null,r=!1){Lf(this.get(e,t)).forEach(n=>{(r||n.UPDATABLE)&&n.update()})},transform(e,t=null){Lf(this.get(e,t)).forEach(r=>{r.UPDATABLE&&r.transform()})},unmount(e,t=null){Lf(this.get(e,t)).forEach(r=>r.unmount())},mount(e,t=null){Lf(this.get(e,t)).forEach(r=>r.mount())},uniqueId(e,t=""){return $e.ensureId(e)+JSON.stringify(t)}}),Qc={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},Dhe={TOOLS:"TOOLS"},wr=Va.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],t=this.model.get("type");return t&&t.toLowerCase().split(".").forEach(function(r,n,i){e.push("type-"+i.slice(0,n+1).join("-"))}),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var e={},t={},r=0,n,i,s,o=Zn(this,"presentationAttributes");for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];for(Array.isArray(u)||(u=[u]),n=0,i=u.length;n<i;n++){s=u[n];var c=e[s];c||(c=e[s]=1<<r++),t[a]|=c}}var f=Zn(this,"initFlag");for(Array.isArray(f)||(f=[f]),n=0,i=f.length;n<i;n++)s=f[n],e[s]||(e[s]=1<<r++);if(r>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=e,this._presentationAttributes=t},hasFlag:function(e,t){return e&this.getFlag(t)},removeFlag:function(e,t){return e^e&this.getFlag(t)},getFlag:function(e){var t=this._flags;if(!t)return 0;var r=0;if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)r|=t[e[n]];else r|=t[e];return r},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||ul(this),Va.call(this,e)},initialize:function(){this.setFlags(),Va.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,t){var r=e.getChangeFlag(this._presentationAttributes);t.updateHandled||!r||(t.dirty&&this.hasFlag(r,"UPDATE")&&(r|=this.getFlag("RENDER")),t.tool&&(t.async=!1),this.requestUpdate(r,t))},requestUpdate:function(e,t){const{paper:r}=this;r&&e>0&&r.requestViewUpdate(this,e,this.UPDATE_PRIORITY,t)},parseDOMJSON:function(e,t){var r=Bp(e),n=r.selectors,i=r.groupSelectors;for(var s in i){if(n[s])throw new Error("dia.CellView: ambiguous group selector");n[s]=i[s]}if(t){var o=this.selector;if(n[o])throw new Error("dia.CellView: ambiguous root selector.");n[o]=t}return{fragment:r.fragment,selectors:n}},can:function(e){var t=fn(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Wr(t)&&t[e]!==!1||Ffe(t)&&t!==!1},findBySelector:function(e,t,r){if(t||(t=this.el),r||(r=this.selectors),!e||e===".")return[t];if(r){var n=r[e];if(n)return Array.isArray(n)?n:[n]}return It(t).find(e).toArray()},notify:function(e){if(this.paper){var t=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(t)),this.paper.trigger.apply(this.paper,[e,this].concat(t))}},getBBox:function(e){var t;if(e&&e.useModelGeometry){var r=this.model;t=r.getBBox().bbox(r.angle())}else t=this.getNodeBBox(this.el);return this.paper.localToPaperRect(t)},getNodeBBox:function(e){const t=this.getNodeBoundingRect(e),r=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(e)),n=this.getNodeMatrix(e);return $e.transformRect(t,r.multiply(n))},getNodeRotateMatrix(e){return!this.rotatableNode||this.rotatableNode.contains(e)?this.getRootRotateMatrix():$e.createSVGMatrix()},getNodeUnrotatedBBox:function(e){var t=this.getNodeBoundingRect(e),r=this.getNodeMatrix(e),n=this.getRootTranslateMatrix();return $e.transformRect(t,n.multiply(r))},getRootTranslateMatrix:function(){var e=this.model,t=e.position(),r=$e.createSVGMatrix().translate(t.x,t.y);return r},getRootRotateMatrix:function(){var e=$e.createSVGMatrix(),t=this.model,r=t.angle();if(r){var n=t.getBBox(),i=n.width/2,s=n.height/2;e=e.translate(i,s).rotate(r).translate(-i,-s)}return e},_notifyHighlight:function(e,t,r={}){const{el:n}=this;let i;if(typeof t=="string"?[i=n]=this.findBySelector(t):[i=n]=this.$(t),r.partial=i!==n,r.type===void 0){let s;switch(!0){case r.embedding:s=Qc.EMBEDDING;break;case r.connecting:s=Qc.CONNECTING;break;case r.magnetAvailability:s=Qc.MAGNET_AVAILABILITY;break;case r.elementAvailability:s=Qc.ELEMENT_AVAILABILITY;break;default:s=Qc.DEFAULT;break}r.type=s}return this.notify(e,i,r),this},highlight:function(e,t){return this._notifyHighlight("cell:highlight",e,t)},unhighlight:function(e,t={}){return this._notifyHighlight("cell:unhighlight",e,t)},findMagnet:function(e){const t=this.el;let r=this.$(e)[0];r||(r=t);do{const n=r.getAttribute("magnet"),i=r===t;if((n||i)&&n!=="false")return r;if(i)return;r=r.parentNode}while(r)},findProxyNode:function(e,t){e||(e=this.el);const r=e.getAttribute(`${t}-selector`);if(r){const[n]=this.findBySelector(r);if(n)return n}return e},getSelector:function(e,t){var r;if(e===this.el)return typeof t=="string"&&(r="> "+t),r;if(e){var n=$e(e).index()+1;r=e.tagName+":nth-child("+n+")",t&&(r+=" > "+t),r=this.getSelector(e.parentNode,r)}return r},addLinkFromMagnet:function(e,t,r){var n=this.paper,i=n.model,s=n.getDefaultLink(this,e);return s.set({source:this.getLinkEnd(e,t,r,s,"source"),target:{x:t,y:r}}).addTo(i,{async:!1,ui:!0}),s.findView(n)},getLinkEnd:function(e,...t){var r=this.model,n=r.id,i=this.findAttribute("port",e),s=e.getAttribute("joint-selector"),o={id:n};return s!=null&&(o.magnet=s),i!=null?(o.port=i,!r.hasPort(i)&&!s&&(o.selector=this.getSelector(e))):s==null&&this.el!==e&&(o.selector=this.getSelector(e)),this.customizeLinkEnd(o,e,...t)},customizeLinkEnd:function(e,t,r,n,i,s){const{paper:o}=this,{connectionStrategy:a}=o.options;if(typeof a=="function"){var u=a.call(o,e,this,t,new pe(r,n),i,s,o);if(u)return u}return e},getMagnetFromLinkEnd:function(e){var t=this.el,r=e.port,n=e.magnet,i=this.model,s;return r!=null&&i.isElement()&&i.hasPort(r)?s=this.findPortNode(r,n)||t:(n||(n=e.selector),!n&&r!=null&&(n='[port="'+r+'"]'),s=this.findBySelector(n,t,this.selectors)[0]),this.findProxyNode(s,"magnet")},dragLinkStart:function(e,t,r,n){this.model.startBatch("add-link");const i=this.addLinkFromMagnet(t,r,n);i.notifyPointerdown(e,r,n),i.eventData(e,i.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:i})},dragLink:function(e,t,r){var n=this.eventData(e),i=n.linkView;if(i)i.pointermove(e,t,r);else{var s=this.paper,o=s.options.magnetThreshold,a=this.getEventTarget(e),u=n.targetMagnet;if(o==="onleave"){if(u===a||$e(u).contains(a))return}else if(s.eventData(e).mousemoved<=o)return;this.dragLinkStart(e,u,t,r)}},dragLinkEnd:function(e,t,r){var n=this.eventData(e),i=n.linkView;i&&(i.pointerup(e,t,r),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,t){Da(t)||(e instanceof SVGElement?$e(e).attr(t):It(e).attr(t))},processNodeAttributes:function(e,t){var r,n,i,s,o,a,u,c,f,h=[];for(r in t)t.hasOwnProperty(r)&&(n=t[r],i=this.getAttributeDefinition(r),i&&(!fn(i.qualify)||i.qualify.call(this,n,e,t,this))?(Mi(i.set)&&(a||(a={}),a[i.set]=n),n!==null&&h.push(r,i)):(a||(a={}),a[Jfe(r)]=n));for(s=0,o=h.length;s<o;s+=2)r=h[s],i=h[s+1],n=t[r],fn(i.set)&&(u||(u={}),u[r]=n),fn(i.position)&&(c||(c={}),c[r]=n),fn(i.offset)&&(f||(f={}),f[r]=n);return{raw:t,normal:a,set:u,position:c,offset:f}},updateRelativeAttributes:function(e,t,r,n){n||(n={});var i,s,o,a=t.raw||{},u=t.normal||{},c=t.set,f=t.position,h=t.offset;for(i in c){s=c[i],o=this.getAttributeDefinition(i);var g=o.set.call(this,s,r.clone(),e,a,this);Wr(g)?Ut(u,g):g!==void 0&&(u[i]=g)}if(e instanceof HTMLElement){this.setNodeAttributes(e,u);return}var y=u.transform,m=$e.transformStringToMatrix(y),_=pe(m.e,m.f);y&&(u=cc(u,"transform"),m.e=m.f=0);var b,S,E;if(f||h){var A=this.getNodeScale(e,n.scalableNode);b=A.sx,S=A.sy}var T=!1;for(i in f)s=f[i],o=this.getAttributeDefinition(i),E=o.position.call(this,s,r.clone(),e,a,this),E&&(_.offset(pe(E).scale(b,S)),T||(T=!0));this.setNodeAttributes(e,u);var I=!1;if(h){var q=this.getNodeBoundingRect(e);if(q.width>0&&q.height>0){var p=$e.transformRect(q,m).scale(1/b,1/S);for(i in h)s=h[i],o=this.getAttributeDefinition(i),E=o.offset.call(this,s,p,e,a,this),E&&(_.offset(pe(E).scale(b,S)),I||(I=!0))}}(y!==void 0||T||I)&&(_.round(1),m.e=_.x,m.f=_.y,e.setAttribute("transform",$e.matrixToTransformString(m)))},getNodeScale:function(e,t){var r,n;if(t&&t.contains(e)){var i=t.scale();r=1/i.sx,n=1/i.sy}else r=1,n=1;return{sx:r,sy:n}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(e){var t=this.metrics;if(!t)return{};var r=$e.ensureId(e),n=t[r];return n||(n=t[r]={}),n},getNodeData:function(e){var t=this.nodeCache(e);return t.data||(t.data={}),t.data},getNodeBoundingRect:function(e){var t=this.nodeCache(e);return t.boundingRect===void 0&&(t.boundingRect=$e(e).getBBox()),new vt(t.boundingRect)},getNodeMatrix:function(e){const t=this.nodeCache(e);if(t.magnetMatrix===void 0){const{rotatableNode:r,el:n}=this;let i;r&&r.contains(e)?i=r:i=n,t.magnetMatrix=$e(e).getTransformToElement(i)}return $e.createSVGMatrix(t.magnetMatrix)},getNodeShape:function(e){var t=this.nodeCache(e);return t.geometryShape===void 0&&(t.geometryShape=$e(e).toGeometryShape()),t.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,t,r,n){var i,s,o,a,u={},c=[];for(var f in e)if(e.hasOwnProperty(f)&&(o=e[f],!!Kn(o))){var h=r[f]=this.findBySelector(f,t,n);for(i=0,s=h.length;i<s;i++){var g=h[i];a=$e.ensureId(g);var y=n&&n[f]===g,m=u[a];if(m){m.array||(c.push(a),m.array=!0,m.attributes=[m.attributes],m.selectedLength=[m.selectedLength]);var _=m.attributes,b=m.selectedLength;if(y)_.unshift(o),b.unshift(-1);else{var S=qU(b,s);_.splice(S,0,o),b.splice(S,0,s)}}else u[a]={attributes:o,selectedLength:y?-1:s,node:g,array:!1}}}for(i=0,s=c.length;i<s;i++)a=c[i],o=u[a],o.attributes=ri({},...o.attributes.reverse());return u},getEventTarget:function(e,t={}){const{target:r,type:n,clientX:i=0,clientY:s=0}=e;return t.fromPoint||n==="touchmove"||n==="touchend"||"pointerId"in e&&r.hasPointerCapture(e.pointerId)?document.elementFromPoint(i,s):r},updateDOMSubtreeAttributes:function(e,t,r){r||(r={}),r.rootBBox||(r.rootBBox=vt()),r.selectors||(r.selectors=this.selectors);var n={},i={},s=[],o=[],a,u,c,f,h,g=r.roAttributes,y=this.findNodesAttributes(g||t,e,n,r.selectors),m=g?this.findNodesAttributes(t,e,n,r.selectors):y;for(var _ in y)if(f=y[_],c=f.attributes,u=f.node,h=this.processNodeAttributes(u,c),!h.set&&!h.position&&!h.offset)this.setNodeAttributes(u,h.normal);else{var b=m[_]&&m[_].attributes,S=b&&c.ref===void 0?b.ref:c.ref,E;if(S){if(E=(n[S]||this.findBySelector(S,e,r.selectors))[0],!E)throw new Error('dia.CellView: "'+S+'" reference does not exist.')}else E=null;if(a={node:u,refNode:E,processedAttributes:h,allAttributes:b},E){var A=o.findIndex(function(T){return T.refNode===u});A>-1?o.splice(A,0,a):o.push(a)}else s.push(a)}s.push(...o);for(let T=0,I=s.length;T<I;T++){a=s[T],u=a.node,E=a.refNode;const q=E?$e.ensureId(E):"";let p=i[q];p||(p=i[q]=E?$e(E).getBBox({target:Fhe(u,E)}):r.rootBBox),g?(h=this.processNodeAttributes(u,a.allAttributes),this.mergeProcessedAttributes(h,a.processedAttributes)):h=a.processedAttributes,this.updateRelativeAttributes(u,h,p,r)}},mergeProcessedAttributes:function(e,t){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),Ut(e.set,t.set),Ut(e.position,t.position),Ut(e.offset,t.offset);var r=e.normal&&e.normal.transform;r!==void 0&&t.normal&&(t.normal.transform=r),e.normal=t.normal},onMount(e){e||(this.mountTools(),Eo.mount(this))},onDetach(){this.unmountTools(),Eo.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var t=this._toolsView;return t?e?t.getName()===e:!0:!1},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){const e=this._toolsView;return e&&e.unmount(),this},mountTools(){const e=this._toolsView;return e&&!e.isMounted()&&e.mount(),this},updateTools:function(e){var t=this._toolsView;return t&&t.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools();break}},removeHighlighters:function(){Eo.remove(this)},updateHighlighters:function(e=!1){Eo.update(this,null,e)},transformHighlighters:function(){Eo.transform(this)},preventDefaultInteraction(e){this.eventData(e,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(e){const{defaultInteractionPrevented:t=!1}=this.eventData(e);return t},pointerdblclick:function(e,t,r){this.notify("cell:pointerdblclick",e,t,r)},pointerclick:function(e,t,r){this.notify("cell:pointerclick",e,t,r)},contextmenu:function(e,t,r){this.notify("cell:contextmenu",e,t,r)},pointerdown:function(e,t,r){const{model:n}=this,{graph:i}=n;i&&(n.startBatch("pointer"),this.eventData(e,{graph:i})),this.notify("cell:pointerdown",e,t,r)},pointermove:function(e,t,r){this.notify("cell:pointermove",e,t,r)},pointerup:function(e,t,r){const{graph:n}=this.eventData(e);this.notify("cell:pointerup",e,t,r),n&&n.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,t,r,n){this.notify("cell:mousewheel",e,t,r,n)},onevent:function(e,t,r,n){this.notify(t,e,r,n)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){const{paper:t,model:r}=this;if(t.isAsync()){if(r.isLink()){const s=r.getSourceElement();if(s){const a=t.findViewByModel(s);a&&(t.dumpView(a),t.checkViewVisibility(a))}const o=r.getTargetElement();if(o){const a=t.findViewByModel(o);a&&(t.dumpView(a),t.checkViewVisibility(a))}}t.dumpView(this),t.checkViewVisibility(this)}const n=this.getEventTarget(e,{fromPoint:!0}),i=t.findView(n);i!==this&&(this.mouseleave(e),i&&i.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e}},{Flags:Dhe,Highlighting:Qc,addPresentationAttributes:function(e){return ri({},Zn(this.prototype,"presentationAttributes"),e,function(t,r){if(!(!t||!r)&&(typeof t=="string"&&(t=[t]),typeof r=="string"&&(r=[r]),Array.isArray(t)&&Array.isArray(r)))return Uh(t.concat(r))})}});function Fhe(e,t){let r=e;do{if(r.contains(t))return r;r=r.parentNode}while(r);return null}const Dr={TOOLS:wr.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},el={MOVE:"move",MAGNET:"magnet"},_i=wr.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=wr.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){wr.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[Dr.UPDATE],position:[Dr.TRANSLATE,Dr.TOOLS],size:[Dr.RESIZE,Dr.PORTS,Dr.TOOLS],angle:[Dr.ROTATE,Dr.TOOLS],markup:[Dr.RENDER],ports:[Dr.PORTS]},initFlag:[Dr.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,t){this.hasFlag(e,Dr.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(e,Dr.RENDER))this.render(),this.updateTools(t),this.updateHighlighters(!0),r=!0,e=this.removeFlag(e,[Dr.RENDER,Dr.UPDATE,Dr.RESIZE,Dr.TRANSLATE,Dr.ROTATE,Dr.PORTS,Dr.TOOLS]);else{let n=!1;this.hasFlag(e,Dr.RESIZE)&&(this.resize(t),n=!0,e=this.removeFlag(e,[Dr.RESIZE,Dr.UPDATE]),e=this.removeFlag(e,Dr.PORTS)),this.hasFlag(e,Dr.UPDATE)&&(this.update(this.model,null,t),e=this.removeFlag(e,Dr.UPDATE),n=!0,e=this.removeFlag(e,Dr.PORTS)),this.hasFlag(e,Dr.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,Dr.TRANSLATE),r=!0),this.hasFlag(e,Dr.ROTATE)&&(this.rotate(),e=this.removeFlag(e,Dr.ROTATE),r=!0),this.hasFlag(e,Dr.PORTS)&&(this._renderPorts(),n=!0,e=this.removeFlag(e,Dr.PORTS)),n&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(e,Dr.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,Dr.TOOLS)),e},_initializePorts:function(){},update:function(e,t){this.cleanNodesCache(),this._removePorts();var r=this.model,n=r.attr();this.updateDOMSubtreeAttributes(this.el,n,{rootBBox:new vt(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:t===n?null:t}),this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.ElementView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if(typeof t=="string")return this.renderStringMarkup(t);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el),r=this.selectors=t.selectors;this.rotatableNode=$e(r[this.rotatableSelector])||null,this.scalableNode=$e(r[this.scalableSelector])||null,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=this.vel;t.append($e(e)),this.rotatableNode=t.findOne(".rotatable"),this.scalableNode=t.findOne(".scalable");var r=this.selectors={};r[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode){this.rgRotate(),this.update();return}this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),t=this.getRotateString();t&&(e+=" "+t),this.vel.attr("transform",e)},getTranslateString:function(){var e=this.model.attributes.position;return"translate("+e.x+","+e.y+")"},getRotateString:function(){var e=this.model.attributes,t=e.angle;if(!t)return null;var r=e.size;return"rotate("+t+","+r.width/2+","+r.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var t=this.model,r=t.angle(),n=t.size(),i=this.scalableNode,s=!1;i.node.getElementsByTagName("path").length>0&&(s=!0);var o=i.getBBox({recursive:s}),a=n.width/(o.width||1),u=n.height/(o.height||1);i.attr("transform","scale("+a+","+u+")");var c=this.rotatableNode,f=c&&c.attr("transform");if(f){c.attr("transform",f+" rotate("+-r+","+n.width/2+","+n.height/2+")");var h=i.getBBox({target:this.paper.cells});t.set("position",{x:h.x,y:h.y},Ut({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){const t=e.model||this.model,n=(e.paper||this.paper).model,i=e.initialZIndices={},s=t.getEmbeddedCells({deep:!0}),o=n.getConnectedLinks(t,{deep:!0,includeEnclosed:!0});[t,...s,...o].forEach(c=>i[c.id]=c.attributes.z),t.startBatch("to-front"),t.toFront({deep:!0,ui:!0});const a=n.getElements().reduce((c,f)=>Math.max(c,f.attributes.z||0),0);o.forEach(c=>{c.attributes.z<=a&&c.set("z",a+1,{ui:!0})}),t.stopBatch("to-front");const u=t.parent();u?(n.getCell(u).unembed(t,{ui:!0}),e.initialParentId=u):e.initialParentId=null},processEmbedding:function(e={},t,r,n){const i=e.model||this.model,s=e.paper||this.paper,o=s.model,{findParentBy:a,frontParentOnly:u,validateEmbedding:c}=s.options;let f;fn(a)?f=Fr(a.call(o,this,t,r,n)):a==="pointer"?f=Fr(o.findModelsFromPoint({x:r,y:n})):f=o.findModelsUnderElement(i,{searchBy:a}),f=f.filter(y=>y instanceof ca&&i.id!==y.id&&!y.isEmbeddedIn(i)),u&&(f=f.slice(-1));let h=null;const g=e.candidateEmbedView;for(let y=f.length-1;y>=0;y--){const m=f[y];if(g&&g.model.id==m.id){h=g;break}else{const _=m.findView(s);if(!fn(c)||c.call(s,this,_)){h=_;break}}}h&&h!=g&&(this.clearEmbedding(e),e.candidateEmbedView=h.highlight(h.findProxyNode(null,"container"),{embedding:!0})),!h&&g&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var t=e.candidateEmbedView;t&&(t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){const t=e.candidateEmbedView,r=e.model||this.model,n=e.paper||this.paper;if(t)t.model.embed(r,{ui:!0}),t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{const{validateUnembedding:i}=n.options,{initialParentId:s}=e;if(s&&typeof i=="function"&&!i.call(n,this)){this._disallowUnembed(e);return}}n.model.getConnectedLinks(r,{deep:!0}).forEach(i=>{i.reparent({ui:!0})})},_disallowUnembed:function(e){const{model:t,whenNotAllowed:r="revert"}=e,n=t||this.model,s=(e.paper||this.paper).model;switch(r){case"remove":{n.remove({ui:!0});break}case"revert":{const{initialParentId:o,initialPosition:a,initialZIndices:u}=e;if(a){const{x:f,y:h}=a;n.position(f,h,{deep:!0,ui:!0})}u&&Object.keys(u).forEach(f=>{const h=s.getCell(f);h&&h.set("z",u[f],{ui:!0})});const c=s.getCell(o);c&&c.embed(n,{ui:!0});break}}},getDelegatedView:function(){for(var e=this,t=e.model,r=e.paper;e&&!t.isLink();){if(!t.isEmbedded()||e.can("stopDelegation"))return e;t=t.getParentCell(),e=r.findViewByModel(t)}return null},findProxyNode:function(e,t){e||(e=this.el);const r=e.getAttribute(`${t}-selector`);if(r){const n=this.findAttribute("port",e);if(n){const i=this.findPortNode(n,r);if(i)return i}else{const[i]=this.findBySelector(r);if(i)return i}}return e},notifyPointerdown(e,t,r){wr.prototype.pointerdown.call(this,e,t,r),this.notify("element:pointerdown",e,t,r)},notifyPointermove(e,t,r){wr.prototype.pointermove.call(this,e,t,r),this.notify("element:pointermove",e,t,r)},notifyPointerup(e,t,r){this.notify("element:pointerup",e,t,r),wr.prototype.pointerup.call(this,e,t,r)},pointerdblclick:function(e,t,r){wr.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,t,r)},pointerclick:function(e,t,r){wr.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,t,r)},contextmenu:function(e,t,r){wr.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,t,r)},pointerdown:function(e,t,r){this.notifyPointerdown(e,t,r),this.dragStart(e,t,r)},pointermove:function(e,t,r){const n=this.eventData(e),{targetMagnet:i,action:s,delegatedView:o}=n;switch(i&&this.magnetpointermove(e,i,t,r),s){case el.MAGNET:this.dragMagnet(e,t,r);break;case el.MOVE:(o||this).drag(e,t,r);default:if(n.preventPointerEvents)break;this.notifyPointermove(e,t,r);break}this.eventData(e,n)},pointerup:function(e,t,r){const n=this.eventData(e),{targetMagnet:i,action:s,delegatedView:o}=n;switch(i&&this.magnetpointerup(e,i,t,r),s){case el.MAGNET:this.dragMagnetEnd(e,t,r);break;case el.MOVE:(o||this).dragEnd(e,t,r);default:if(n.preventPointerEvents)break;this.notifyPointerup(e,t,r)}i&&this.magnetpointerclick(e,i,t,r),this.checkMouseleave(e)},mouseover:function(e){wr.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){wr.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){wr.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){wr.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,t,r,n){wr.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,t,r,n)},onmagnet:function(e,t,r){const{currentTarget:n}=e;this.magnetpointerdown(e,n,t,r),this.eventData(e,{targetMagnet:n}),this.dragMagnetStart(e,t,r)},magnetpointerdown:function(e,t,r,n){this.notify("element:magnet:pointerdown",e,t,r,n)},magnetpointermove:function(e,t,r,n){this.notify("element:magnet:pointermove",e,t,r,n)},magnetpointerup:function(e,t,r,n){this.notify("element:magnet:pointerup",e,t,r,n)},magnetpointerdblclick:function(e,t,r,n){this.notify("element:magnet:pointerdblclick",e,t,r,n)},magnetcontextmenu:function(e,t,r,n){this.notify("element:magnet:contextmenu",e,t,r,n)},dragStart:function(e,t,r){if(this.isDefaultInteractionPrevented(e))return;var n=this.getDelegatedView();if(!n||!n.can("elementMove"))return;this.eventData(e,{action:el.MOVE,delegatedView:n});const i=n.model.position();n.eventData(e,{initialPosition:i,pointerOffset:i.difference(t,r),restrictedArea:this.paper.getRestrictedArea(n,t,r)})},dragMagnetStart:function(e,t,r){const{paper:n}=this,i=e.isPropagationStopped();if(i&&this.eventData(e,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(e)||!this.can("addLinkFromMagnet"))return;const{targetMagnet:s=e.currentTarget}=this.eventData(e);if(e.stopPropagation(),!n.options.validateMagnet.call(n,this,s,e)){i?this.dragStart(e,t,r):this.pointerdown(e,t,r);return}n.options.magnetThreshold<=0&&this.dragLinkStart(e,s,t,r),this.eventData(e,{action:el.MAGNET})},drag:function(e,t,r){var n=this.paper,i=n.options.gridSize,s=this.model,o=this.eventData(e),{pointerOffset:a,restrictedArea:u,embedding:c}=o,f=ac(t+a.x,i),h=ac(r+a.y,i);s.position(f,h,{restrictedArea:u,deep:!0,ui:!0}),n.options.embeddingMode&&(c||(this.prepareEmbedding(o),c=!0),this.processEmbedding(o,e,t,r)),this.eventData(e,{embedding:c})},dragMagnet:function(e,t,r){this.dragLink(e,t,r)},dragEnd:function(e,t,r){var n=this.eventData(e);n.embedding&&this.finalizeEmbedding(n)},dragMagnetEnd:function(e,t,r){this.dragLinkEnd(e,t,r)},magnetpointerclick:function(e,t,r,n){var i=this.paper;i.eventData(e).mousemoved>i.options.clickThreshold||this.notify("element:magnet:pointerclick",e,t,r,n)}},{Flags:Dr});Ut(_i.prototype,Lhe);const Bhe=function(e,t,r){return e},zhe=function(e,t,r){var n=t.side||"bottom",i=lc(t.padding||40),s=r.sourceBBox,o=r.targetBBox,a=s.center(),u=o.center(),c,f,h;switch(n){case"bottom":h=1,c="y",f="height";break;case"top":h=-1,c="y",f="height";break;case"left":h=-1,c="x",f="width";break;case"right":h=1,c="x",f="width";break;default:throw new Error("Router: invalid side")}return a[c]+=h*(s[f]/2+i[n]),u[c]+=h*(o[f]/2+i[n]),h*(a[c]-u[c])>0?u[c]=a[c]:a[c]=u[c],[a].concat(e,u)};var Vhe={N:"S",S:"N",E:"W",W:"E"},Ghe={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function zp(e,t,r){var n=new pe(e.x,t.y);return r.containsPoint(n)&&(n=new pe(t.x,e.y)),n}function dE(e,t){return e[t==="W"||t==="E"?"width":"height"]}function Yi(e,t){return e.x===t.x?e.y>t.y?"N":"S":e.y===t.y?e.x>t.x?"W":"E":null}function sp(e){return new vt(e.x,e.y,0,0)}function Vp(e){var t=lc(e.padding||e.elementPadding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function ZU(e,t){return e.sourceBBox.clone().moveAndExpand(Vp(t))}function JU(e,t){return e.targetBBox.clone().moveAndExpand(Vp(t))}function $he(e,t){if(e.sourceAnchor)return e.sourceAnchor;var r=ZU(e,t);return r.center()}function Uhe(e,t){if(e.targetAnchor)return e.targetAnchor;var r=JU(e,t);return r.center()}function QU(e,t,r){var n=new pe(e.x,t.y),i=new pe(t.x,e.y),s=Yi(e,n),o=Yi(e,i),a=Vhe[r],u=s===r||s!==a&&(o===a||o!==r)?n:i;return{points:[u],direction:Yi(u,t)}}function mp(e,t,r){var n=zp(e,t,r);return{points:[n],direction:Yi(n,t)}}function jhe(e,t,r,n){var i={},s=[new pe(e.x,t.y),new pe(t.x,e.y)],o=s.filter(function(h){return!r.containsPoint(h)}),a=o.filter(function(h){return Yi(h,e)!==n}),u;if(a.length>0)u=a.filter(function(h){return Yi(e,h)===n}).pop(),u=u||a[0],i.points=[u],i.direction=Yi(u,t);else{u=jfe(s,o)[0];var c=new pe(t).move(u,-dE(r,n)/2),f=zp(c,e,r);i.points=[f,c],i.direction=Yi(c,t)}return i}function Hhe(e,t,r,n){var i=mp(t,e,n),s=i.points[0];if(r.containsPoint(s)){i=mp(e,t,r);var o=i.points[0];if(n.containsPoint(o)){var a=new pe(e).move(o,-dE(r,Yi(e,o))/2),u=new pe(t).move(s,-dE(n,Yi(t,s))/2),c=new bt(a,u).midpoint(),f=mp(e,c,r),h=QU(c,t,f.direction);i.points=[f.points[0],h.points[0]],i.direction=h.direction}}return i}function CS(e,t,r,n,i){var s={},o=r.union(n).inflate(1),a=o.center().distance(t)>o.center().distance(e),u=a?t:e,c=a?e:t,f,h,g;return i?(f=pe.fromPolar(o.width+o.height,Ghe[i],u),f=o.pointNearestToPoint(f).move(f,-1)):f=o.pointNearestToPoint(u).move(u,1),h=zp(f,c,o),f.round().equals(h.round())?(h=pe.fromPolar(o.width+o.height,vs(f.theta(u))+Math.PI/2,c),h=o.pointNearestToPoint(h).move(c,1).round(),g=zp(f,h,o),s.points=a?[h,g,f]:[f,g,h]):s.points=a?[h,f]:[f,h],s.direction=Yi(a?f:h,t),s}function pE(e,t,r){var n=ZU(r,t),i=JU(r,t),s=$he(r,t),o=Uhe(r,t);n=n.union(sp(s)),i=i.union(sp(o)),e=Fr(e).map(pe),e.unshift(s),e.push(o);for(var a,u=[],c=0,f=e.length-1;c<f;c++){var h=null,g=e[c],y=e[c+1],m=!!Yi(g,y);if(c===0)c+1===f?n.intersect(i.clone().inflate(1))?h=CS(g,y,n,i):m||(h=Hhe(g,y,n,i)):n.containsPoint(y)?h=CS(g,y,n,sp(y).moveAndExpand(Vp(t))):m||(h=mp(g,y,n));else if(c+1===f){var _=m&&Yi(y,g)===a;i.containsPoint(g)||_?h=CS(g,y,sp(g).moveAndExpand(Vp(t)),i,a):m||(h=jhe(g,y,i,a))}else m||(h=QU(g,y,a));h?(Array.prototype.push.apply(u,h.points),a=h.direction):a=Yi(g,y),c+1<f&&u.push(y)}return u}var ej={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,t=this.cost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:-e,offsetY:0,cost:t},{offsetX:0,offsetY:e,cost:t},{offsetX:0,offsetY:-e,cost:t}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,t,r){if(!fn(pE))throw new Error("Manhattan requires the orthogonal router as default fallback.");return pE(e,Ut({},ej,t),r)},fallbackRoute:function(e,t,r){return null},draggingRoute:null};function HA(e){this.map={},this.options=e,this.mapGridSize=100}HA.prototype.build=function(e,t){var r=this.options,n=Fr(r.excludeEnds).reduce(function(u,c){var f=t.get(c);if(f){var h=e.getCell(f.id);h&&u.push(h)}return u},[]),i=[],s=e.getCell(t.get("source").id);s&&(i=aE(i,s.getAncestors().map(function(u){return u.id})));var o=e.getCell(t.get("target").id);o&&(i=aE(i,o.getAncestors().map(function(u){return u.id})));var a=this.mapGridSize;return e.getElements().reduce(function(u,c){var f=Fr(r.excludeTypes).includes(c.get("type")),h=n.find(function(T){return T.id===c.id}),g=i.includes(c.id),y=f||h||g;if(!y)for(var m=c.getBBox().moveAndExpand(r.paddingBox),_=m.origin().snapToGrid(a),b=m.corner().snapToGrid(a),S=_.x;S<=b.x;S+=a)for(var E=_.y;E<=b.y;E+=a){var A=S+"@"+E;u[A]=u[A]||[],u[A].push(m)}return u},this.map),this};HA.prototype.isPointAccessible=function(e){var t=e.clone().snapToGrid(this.mapGridSize).toString();return Fr(this.map[t]).every(function(r){return!r.containsPoint(e)})};function Oc(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}Oc.prototype.add=function(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=t;var r=qU(this.items,e,(function(n){return this.values[n]}).bind(this));this.items.splice(r,0,e)};Oc.prototype.remove=function(e){this.hash[e]=this.CLOSE};Oc.prototype.isOpen=function(e){return this.hash[e]===this.OPEN};Oc.prototype.isClose=function(e){return this.hash[e]===this.CLOSE};Oc.prototype.isEmpty=function(){return this.items.length===0};Oc.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};function tj(e,t){return t&&t.paddingBox?e.sourceBBox.clone().moveAndExpand(t.paddingBox):e.sourceBBox.clone()}function rj(e,t){return t&&t.paddingBox?e.targetBBox.clone().moveAndExpand(t.paddingBox):e.targetBBox.clone()}function nj(e,t){if(e.sourceAnchor)return e.sourceAnchor;var r=tj(e,t);return r.center()}function Whe(e,t){if(e.targetAnchor)return e.targetAnchor;var r=rj(e,t);return r.center()}function RS(e,t,r,n,i){var s=360/r,o=e.theta(Xhe(e,t,n,i)),a=Oo(o+s/2);return s*Math.floor(a/s)}function Xhe(e,t,r,n){var i=n.step,s=t.x-e.x,o=t.y-e.y,a=s/r.x,u=o/r.y,c=a*i,f=u*i;return new pe(e.x+c,e.y+f)}function E5(e,t){var r=Math.abs(e-t);return r>180?360-r:r}function Yhe(e,t,r){var n=r.step;Fr(r.directions).forEach(function(i){i.gridOffsetX=i.offsetX/n*t.x,i.gridOffsetY=i.offsetY/n*t.y})}function Khe(e,t,r){return{source:t.clone(),x:A5(r.x-t.x,e),y:A5(r.y-t.y,e)}}function A5(e,t){if(!e)return t;var r=Math.abs(e),n=Math.round(r/t);if(!n)return r;var i=n*t,s=r-i,o=s/n;return t+o}function Zhe(e,t){var r=t.source,n=ac(e.x-r.x,t.x)+r.x,i=ac(e.y-r.y,t.y)+r.y;return new pe(n,i)}function Gf(e,t){return e.round(t)}function yp(e,t,r){return Gf(Zhe(e.clone(),t),r)}function Zf(e){return e.clone().toString()}function IS(e){return new pe(e.x===0?0:Math.abs(e.x)/e.x,e.y===0?0:Math.abs(e.y)/e.y)}function Jhe(e,t,r,n,i,s,o){for(var a=[],u=IS(i.difference(r)),c=Zf(r),f=e[c],h;f;){h=t[c];var g=IS(h.difference(f));g.equals(u)||(a.unshift(h),u=g),c=Zf(f),f=e[c]}var y=t[c],m=IS(y.difference(n));return m.equals(u)||a.unshift(y),a}function T5(e,t){for(var r=1/0,n=0,i=t.length;n<i;n++){var s=e.manhattanDistance(t[n]);s<r&&(r=s)}return r}function P5(e,t,r,n,i){var s=i.precision,o=i.directionMap,a=e.difference(t.center()),u=Wr(o)?Object.keys(o):[],c=Fr(r),f=u.reduce(function(h,g){if(c.includes(g)){for(var y=o[g],m=new pe(e.x+y.x*(Math.abs(a.x)+t.width),e.y+y.y*(Math.abs(a.y)+t.height)),_=new bt(e,m),b=_.intersect(t)||[],S=b.length,E,A=null,T=0;T<S;T++){var I=b[T],q=e.squaredDistance(I);(E===void 0||q>E)&&(E=q,A=I)}if(A){var p=yp(A,n,s);t.containsPoint(p)&&(p=yp(p.offset(y.x*n.x,y.y*n.y),n,s)),h.push(p)}}return h},[]);return t.containsPoint(e)||f.push(yp(e,n,s)),f}function Qhe(e,t,r,n){var i=n.precision,s,o;e instanceof vt?s=Gf(nj(this,n).clone(),i):s=Gf(e.clone(),i),t instanceof vt?o=Gf(Whe(this,n).clone(),i):o=Gf(t.clone(),i);var a=Khe(n.step,s,o),u,c,f,h;if(e instanceof vt?(u=s,f=P5(u,e,n.startDirections,a,n)):(u=s,f=[u]),t instanceof vt?(c=o,h=P5(o,t,n.endDirections,a,n)):(c=o,h=[c]),f=f.filter(Re=>!r(Re)),h=h.filter(Re=>!r(Re)),f.length>0&&h.length>0){for(var g=new Oc,y={},m={},_={},b=0,S=f.length;b<S;b++){var E=f[b],A=Zf(E);g.add(A,T5(E,h)),y[A]=E,_[A]=0}var T=n.previousDirectionAngle,I=T===void 0,q,p,P=n.directions;Yhe(P,a,n);for(var O=P.length,N=Fr(h).reduce(function(Re,rt){var Ve=Zf(rt);return Re.push(Ve),Re},[]),V=n.maximumLoops;!g.isEmpty()&&V>0;){var W=g.pop(),G=y[W],ee=m[W],ae=_[W],K=ee===void 0,U=G.equals(u),j;K?I?U?j=null:j=RS(u,G,O,a,n):j=T:j=RS(ee,G,O,a,n);var J=f.length===h.length;if(J){for(var de=0;de<f.length;de++)if(!f[de].equals(h[de])){J=!1;break}}var ce=K&&J;if(!ce&&N.indexOf(W)>=0)return n.previousDirectionAngle=j,Jhe(m,y,G,u,c);for(b=0;b<O;b++){q=P[b];var Te=q.angle;if(p=E5(j,Te),!(!(I&&U)&&p>n.maxAllowedDirectionChange)){var Se=yp(G.clone().offset(q.gridOffsetX,q.gridOffsetY),a,i),re=Zf(Se);if(!(g.isClose(re)||r(Se))){if(N.indexOf(re)>=0){var oe=Se.equals(c);if(!oe){var ne=RS(Se,c,O,a,n),te=E5(Te,ne);if(te>n.maxAllowedDirectionChange)continue}}var le=q.cost,We=U?0:n.penalties[p],Ne=ae+le+We;(!g.isOpen(re)||Ne<_[re])&&(y[re]=Se,m[re]=G,_[re]=Ne,g.add(re,Ne+T5(Se,h)))}}}V--}}return n.fallbackRoute.call(this,u,c,n)}function ede(e){if(e.directions=Zn(e,"directions"),e.penalties=Zn(e,"penalties"),e.paddingBox=Zn(e,"paddingBox"),e.padding=Zn(e,"padding"),e.padding){var t=lc(e.padding);e.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}Fr(e.directions).forEach(function(r){var n=new pe(0,0),i=new pe(r.offsetX,r.offsetY);r.angle=Oo(n.theta(i))})}function tde(e,t,r){ede(t),r.options.perpendicular=!!t.perpendicular;var n=tj(r,t),i=rj(r,t),s=nj(r,t);let o;if(typeof t.isPointObstacle=="function")o=t.isPointObstacle;else{const A=new HA(t);A.build(r.paper.model,r.model),o=T=>!A.isPointAccessible(T)}for(var a=Fr(e).map(pe),u=[],c=s,f,h,g=0,y=a.length;g<=y;g++){var m=null;if(h=f||n,f=a[g],!f){f=i;var _=!r.model.get("source").id||!r.model.get("target").id;if(_&&fn(t.draggingRoute)){var b=h===n?s:h,S=f.origin();m=t.draggingRoute.call(r,b,S,t)}}if(m=m||Qhe.call(r,h,f,o,t),m===null)return t.fallbackRouter(e,t,r);var E=m[0];E&&E.equals(c)&&m.shift(),c=m[m.length-1]||c,Array.prototype.push.apply(u,m)}return u}const gE=function(e,t,r){return tde(e,Ut({},ej,t),r)};var rde={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,t=this.cost(),r=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:e,offsetY:e,cost:r},{offsetX:0,offsetY:e,cost:t},{offsetX:-e,offsetY:e,cost:r},{offsetX:-e,offsetY:0,cost:t},{offsetX:-e,offsetY:-e,cost:r},{offsetX:0,offsetY:-e,cost:t},{offsetX:e,offsetY:-e,cost:r}]},fallbackRoute:function(e,t,r){var n=e.theta(t),i=[],s={x:t.x,y:e.y},o={x:e.x,y:t.y};if(n%180>90){var a=s;s=o,o=a}var u=n%90<45?s:o,c=new bt(e,u),f=90*Math.ceil(n/90),h=pe.fromPolar(c.squaredLength(),vs(f+135),u),g=new bt(t,h),y=c.intersection(g),m=y||t,_=y?m:e,b=360/r.directions.length,S=_.theta(t),E=Oo(S+b/2),A=b*Math.floor(E/b);return r.previousDirectionAngle=A,m&&i.push(m.round()),i.push(t),i}};const nde=function(e,t,r){if(!fn(gE))throw new Error("Metro requires the manhattan router.");return gE(e,Ut({},rde,t),r)},st={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},C5=[st.LEFT,st.RIGHT,st.TOP,st.BOTTOM],cl={[st.LEFT]:st.RIGHT,[st.RIGHT]:st.LEFT,[st.TOP]:st.BOTTOM,[st.BOTTOM]:st.TOP},ide=[st.TOP,st.BOTTOM],op={0:st.RIGHT,180:st.LEFT,270:st.TOP,90:st.BOTTOM};function $f(e){return e.angle()}function ap(e){return new dn(e).simplify({threshold:1}).points}function Gp(e,t){const{point:r,x0:n,y0:i,view:s,bbox:o,direction:a}=e,{point:u,x0:c,y0:f,view:h,bbox:g,direction:y}=t;let m;if(s)s.model.isLink()?m=R5(u,r,s):a===st.ANCHOR_SIDE?m=o.sideNearestToPoint(r):a===st.MAGNET_SIDE?m=s.model.getBBox().sideNearestToPoint(r):m=a;else{const b=new vt(n,i,0,0);m=C5.includes(a)?a:b.sideNearestToPoint(u)}let _;if(h)h.model.isLink()?_=R5(r,u,h):y===st.ANCHOR_SIDE?_=g.sideNearestToPoint(u):y===st.MAGNET_SIDE?_=h.model.getBBox().sideNearestToPoint(u):_=y;else{const b=new vt(c,f,0,0);_=C5.includes(y)?y:b.sideNearestToPoint(r)}return[m,_]}function sde(e,t,r){const{x0:n,y0:i,width:s,height:o,point:a,margin:u}=e,c=n+s,f=i+o,h=n-u,g=c+u,y=i-u,{x:m}=a,{x0:_,y0:b}=t;return _===m&&b<i?st.BOTTOM:_<m&&b<y?st.RIGHT:_>m&&b<y?st.LEFT:_<h&&b>=i||_>g&&b>=i?st.TOP:_>=h&&_<=m&&b>f||_<=g&&_>=m&&b>f?r.point.x<_?st.RIGHT:st.LEFT:st.TOP}function ode(e,t,r){const{x0:n,y0:i,width:s,height:o,point:a,margin:u}=e,c=n+s,f=i+o,h=n-u,g=c+u,y=f+u,{x:m}=a,{x0:_,y0:b}=t;return _===m&&b>f?st.TOP:_<m&&b>y?st.RIGHT:_>m&&b>y?st.LEFT:_<h&&b<=f||_>g&&b<=f?st.BOTTOM:_>=h&&_<=m&&b<i||_<=g&&_>=m&&b<i?r.point.x<_?st.RIGHT:st.LEFT:st.BOTTOM}function ade(e,t,r){const{y0:n,x0:i,width:s,height:o,point:a,margin:u}=e,c=i+s,f=n+o,h=i-u,g=n-u,y=f+u,{x:m,y:_}=a,{x0:b,y0:S}=t;return b<m&&S===_?st.RIGHT:b<=h&&S<_?st.BOTTOM:b<=h&&S>_?st.TOP:b>=i&&S<=g||b>=i&&S>=y?st.LEFT:b>c&&S>=g&&S<=_||b>c&&S<=y&&S>=_?r.point.y<S?st.BOTTOM:st.TOP:st.LEFT}function ude(e,t,r){const{y0:n,x0:i,width:s,height:o,point:a,margin:u}=e,c=i+s,f=n+o,h=c+u,g=n-u,y=f+u,{x:m,y:_}=a,{x0:b,y0:S}=t;return b>m&&S===_?st.LEFT:b>=h&&S<_?st.BOTTOM:b>=h&&S>_?st.TOP:b<=c&&S<=g||b<=c&&S>=y?st.RIGHT:b<i&&S>=g&&S<=_||b<i&&S<=y&&S>=_?r.point.y<S?st.BOTTOM:st.TOP:st.RIGHT}function cde(e,t,r){const[n]=Gp(e,t);switch(n){case st.TOP:return sde(e,t,r);case st.RIGHT:return ude(e,t,r);case st.BOTTOM:return ode(e,t,r);case st.LEFT:return ade(e,t,r)}}function R5(e,t,r){const n=r.getTangentAtLength(r.getClosestPointLength(t)),i=Math.round($f(n)/90)*90;if(i%180===0&&e.y===t.y)return e.x<t.x?st.LEFT:st.RIGHT;if(e.x===t.x)return e.y<t.y?st.TOP:st.BOTTOM;switch(i){case 0:case 180:case 360:return e.y<t.y?st.TOP:st.BOTTOM;case 90:case 270:return e.x<t.x?st.LEFT:st.RIGHT}}function I5(e,t,r,n,i,s,o){n===st.AUTO&&(n=i?st.MAGNET_SIDE:st.ANCHOR_SIDE);const a=e&&e.model.isElement(),{x:u,y:c,width:f=0,height:h=0}=a?vt.fromRectUnion(r,e.model.getBBox()):s;return{point:t,x0:u,y0:c,view:e,bbox:r,width:f,height:h,direction:n,margin:a?o:0}}function OS({x:e,y:t}){const r=new pe(e,t);return{point:r,x0:r.x,y0:r.y,view:null,bbox:new vt(e,t,0,0),width:0,height:0,direction:null,margin:0}}function O5(e,t,r){const n=t.point.clone(),{x0:i,y0:s,width:o,height:a}=t;switch(e){case"left":n.x=i-r;break;case"right":n.x=i+o+r;break;case"top":n.y=s-r;break;case"bottom":n.y=s+a+r;break}return n}function cu(e,t){const{point:r,x0:n,y0:i,view:s,width:o,height:a,margin:u}=e,{point:c,x0:f,y0:h,width:g,height:y,margin:m}=t,_=f+g,b=h+y,S=n+o,E=i+a,A=s&&s.model.isElement(),T=n-u,I=S+u,q=i-u,p=E+u,P=f-m,O=_+m,N=h-m,V=b+m,[W,G]=Gp(e,t),ee=O5(W,{point:r,x0:n,y0:i,width:o,height:a},u),ae=O5(G,{point:c,x0:f,y0:h,width:g,height:y},m),{x:K,y:U}=ee,{x:j,y:J}=ae,de=(f+_)/2,ce=(h+b)/2,Te=(n+S)/2,Se=(i+E)/2,re=(Te<de?S+f:_+n)/2,oe=(Se<ce?E+h:b+i)/2;if(W==="left"&&G==="right"){if(T<=O){let te=oe;return S<=f&&(b>=q&&J<U?te=Math.min(N,q):h<=p&&J>=U&&(te=Math.max(V,p))),[{x:K,y:U},{x:K,y:te},{x:j,y:te},{x:j,y:J}]}const ne=(K+j)/2;return[{x:ne,y:U},{x:ne,y:J}]}else if(W==="right"&&G==="left"){if(I>=P){let te=oe;return K>_&&(b>=q&&J<U?te=Math.min(N,q):h<=p&&J>=U&&(te=Math.max(V,p))),[{x:K,y:U},{x:K,y:te},{x:j,y:te},{x:j,y:J}]}const ne=(K+j)/2;return[{x:ne,y:U},{x:ne,y:J}]}else if(W==="top"&&G==="bottom"){if(U<J){let te=re,le=U;return U<h&&(_>=T&&j<K?te=Math.min(P,T):f<=I&&j>=K&&(te=Math.max(O,I))),[{x:K,y:le},{x:te,y:le},{x:te,y:J},{x:j,y:J}]}const ne=(U+J)/2;return[{x:K,y:ne},{x:j,y:ne}]}else if(W==="bottom"&&G==="top"){if(U-u>J){let te=re,le=U;return U>b&&(_>=T&&j<K?te=Math.min(P,T):f<=I&&j>=K&&(te=Math.max(O,I))),[{x:K,y:le},{x:te,y:le},{x:te,y:J},{x:j,y:J}]}const ne=(U+J)/2;return[{x:K,y:ne},{x:j,y:ne}]}else if(W==="top"&&G==="top"){let ne,te=Math.min((E+h)/2,J),le=Math.min((i+b)/2,U);if(J<U){if(K>=O||K<=P)return[{x:K,y:Math.min(U,J)},{x:j,y:Math.min(U,J)}];j>K?ne=Math.min(K,P):ne=Math.max(K,O)}else{if(j>=I||j<=T)return[{x:K,y:Math.min(U,J)},{x:j,y:Math.min(U,J)}];j>=K?ne=Math.max(j,I):ne=Math.min(j,T)}return[{x:K,y:le},{x:ne,y:le},{x:ne,y:te},{x:j,y:te}]}else if(W==="bottom"&&G==="bottom"){let ne,te=Math.max((i+b)/2,J),le=Math.max((E+h)/2,U);if(J>U){if(K>=O||K<=P)return[{x:K,y:Math.max(U,J)},{x:j,y:Math.max(U,J)}];j>K?ne=Math.min(K,P):ne=Math.max(K,O)}else{if(j>=I||j<=T)return[{x:K,y:Math.max(U,J)},{x:j,y:Math.max(U,J)}];j>=K?ne=Math.max(j,I):ne=Math.min(j,T)}return[{x:K,y:le},{x:ne,y:le},{x:ne,y:te},{x:j,y:te}]}else if(W==="left"&&G==="left"){let ne,te=Math.min((S+f)/2,j),le=Math.min((n+_)/2,K);return j>K?J<=U?ne=Math.min(q,J):ne=Math.max(p,J):J>=U?ne=Math.min(N,U):ne=Math.max(V,U),[{x:le,y:U},{x:le,y:ne},{x:te,y:ne},{x:te,y:J}]}else if(W==="right"&&G==="right"){let ne,te=Math.max((n+_)/2,j),le=Math.max((S+f)/2,K);return j<K?J<=U?ne=Math.min(q,J):ne=Math.max(p,J):J>=U?ne=Math.min(N,U):ne=Math.max(V,U),[{x:le,y:U},{x:le,y:ne},{x:te,y:ne},{x:te,y:J}]}else if(W==="top"&&G==="right"){if(U>J){if(K<j){let te=oe;return(te>ce||!A)&&te<V&&K<f&&(te=N),[{x:K,y:te},{x:j,y:te},{x:j,y:J}]}return[{x:K,y:J}]}const ne=Math.max(re,O);if(j<K&&J>i&&J<E)return[{x:K,y:U},{x:ne,y:U},{x:ne,y:J}];if(ne>T&&J>i||f>S){const te=Math.min(i-u,h-m),le=Math.max(S+u,_+m);return[{x:K,y:te},{x:le,y:te},{x:le,y:J}]}return[{x:K,y:U},{x:Math.max(ne,j),y:U},{x:Math.max(ne,j),y:J}]}else if(W==="top"&&G==="left"){if(U>J){if(K>j){let te=oe;return(te>ce||!A)&&te<V&&K>_&&(te=N),[{x:K,y:te},{x:j,y:te},{x:j,y:J}]}return[{x:K,y:J}]}const ne=Math.min(P,re);if(K<j&&E>=J)return[{x:K,y:U},{x:ne,y:U},{x:ne,y:J}];if(ne<I&&U<b){const te=Math.min(q,N),le=Math.min(T,P);return[{x:K,y:te},{x:le,y:te},{x:le,y:J}]}return[{x:K,y:U},{x:ne,y:U},{x:ne,y:J}]}else if(W==="bottom"&&G==="right"){if(U<J){if(K<j){let te=oe;return(te<ce||!A)&&te>N&&K<f&&(te=V),[{x:K,y:te},{x:j,y:te},{x:j,y:J}]}return[{x:K,y:J}]}else if(n<j){const te=Math.max(p,V),le=Math.max(I,O);return[{x:K,y:te},{x:le,y:te},{x:le,y:J}]}const ne=re;return[{x:K,y:U},{x:ne,y:U},{x:ne,y:J}]}else if(W==="bottom"&&G==="left"){if(U<J){if(K>j){let te=oe;return(te<ce||!A)&&te>N&&K>_&&(te=V),[{x:K,y:te},{x:j,y:te},{x:j,y:J}]}return[{x:K,y:J}]}else if(S>j){const te=Math.max(p,V),le=Math.min(T,P);return[{x:K,y:te},{x:le,y:te},{x:le,y:J}]}const ne=re;return[{x:K,y:U},{x:ne,y:U},{x:ne,y:J}]}else if(W==="left"&&G==="bottom"){if(K>=j&&U>=V)return[{x:j,y:U}];if(K>=_&&U<J){const le=re;return[{x:le,y:U},{x:le,y:J},{x:j,y:J}]}if(j<S&&b<=i){const le=oe;return[{x:K,y:U},{x:K,y:le},{x:j,y:le}]}const ne=Math.min(P,K),te=Math.max(p,V);return[{x:ne,y:U},{x:ne,y:te},{x:j,y:te}]}else if(W==="left"&&G==="top"){if(K>j&&U<N)return[{x:j,y:U}];if(K>=_&&U>J){const le=re;return[{x:le,y:U},{x:le,y:J},{x:j,y:J}]}if(j<=S&&J>U){const le=oe;return[{x:K,y:U},{x:K,y:le},{x:j,y:le}]}const ne=J<U?Math.min(T,P):T,te=Math.min(q,N);return[{x:ne,y:U},{x:ne,y:te},{x:j,y:te}]}else if(W==="right"&&G==="top"){if(K<=j&&U<N)return[{x:j,y:U}];if(S<f&&U>J){let le=re;return[{x:le,y:U},{x:le,y:J},{x:j,y:J}]}if(j<K&&h>E){const le=oe;return[{x:K,y:U},{x:K,y:le},{x:j,y:le}]}const ne=Math.max(I,O),te=Math.min(q,N);return[{x:ne,y:U},{x:ne,y:te},{x:j,y:te}]}else if(W==="right"&&G==="bottom"){if(K<=j&&U>=V)return[{x:j,y:U}];if(K<=P&&U<J){const le=re;return[{x:le,y:U},{x:le,y:J},{x:j,y:J}]}if(j>n&&b<i){const le=oe;return[{x:K,y:U},{x:K,y:le},{x:j,y:le}]}const ne=Math.max(O,K),te=Math.max(p,V);return[{x:ne,y:U},{x:ne,y:te},{x:j,y:te}]}}function ij(e,t,r){const{sourceDirection:n=st.AUTO,targetDirection:i=st.AUTO}=t,s=t.margin||20,o=t.useVertices||!1,a=!!r.model.source().port,u=I5(r.sourceView,r.sourceAnchor,r.sourceBBox,n,a,r.sourceAnchor,s),c=!!r.model.target().port,f=I5(r.targetView,r.targetAnchor,r.targetBBox,i,c,r.targetAnchor,s);let h=[];if(!o||e.length===0)return ap(cu(u,f));const g=e.map(_=>OS(_)),[y]=g;if(u.view&&u.view.model.isElement()&&u.view.model.getBBox().inflate(s).containsPoint(y.point)){const[_]=Gp(u,y),b=_,S=OS(u.point);S.margin=s,S.direction=_,y.direction=b,h.push(...cu(S,y),y.point)}else{const _=g[1]||f,b=cde(u,y,_);y.direction=b,h.push(...cu(u,y),y.point)}for(let _=0;_<g.length-1;_++){const b=g[_],S=g[_+1],E=new bt(b.point,S.point),A=$f(E);if(A%90===0){const q=op[A],p=cl[q];if(q!==b.direction)h.push(b.point,S.point),S.direction=p;else{const P=Oo(A-90);let O=0,N=0;P===90?N=-s:P===180?O=-s:P===270?N=s:P===0&&(O=s);const V={x:b.point.x+O,y:b.point.y+N},W={x:S.point.x+O,y:S.point.y+N},G=new bt(S.point,W);S.direction=op[$f(G)],h.push(b.point,V,W,S.point)}continue}const[T,I]=MS(b,S);b.direction=T,S.direction=I,h.push(...cu(b,S),S.point)}const m=g[g.length-1];if(f.view&&f.view.model.isElement())if(f.view.model.getBBox().inflate(s).containsPoint(m.point)){const[_]=MS(m,f),b=OS(f.point),[,S]=Gp(m,f);b.margin=s,b.direction=S,m.direction=_,h.push(...cu(m,b))}else{const _=ap(h),b=new bt(_[_.length-2],m.point),S=op[Math.round($f(b))];m.direction=S;let E=cu(m,f);const[A,T]=ap([...E,f.point]),I=new bt(A,T),q=Math.round($f(I)),p=op[q];p!==S&&S===cl[p]&&(m.margin=s,E=cu(m,f)),h.push(...E)}else{const[_]=MS(m,f);m.direction=_,h.push(...cu(m,f))}return ap(h)}function MS(e,t){const r=e.direction,n=ide.includes(r);let i=e.direction,s=t.direction;if(n){const o=e.point.y>t.point.y,a=t.point.x-e.point.x;r===st.BOTTOM?(i=o?cl[r]:a>=0?st.RIGHT:st.LEFT,a>0?s=o?st.LEFT:st.TOP:a<0&&(s=o?st.RIGHT:st.TOP)):(i=o?a>=0?st.RIGHT:st.LEFT:cl[r],a>0?s=o?st.BOTTOM:st.LEFT:a<0&&(s=o?st.BOTTOM:st.RIGHT))}else{const o=e.point.x>t.point.x,a=t.point.y-e.point.y;r===st.RIGHT?(i=o?cl[r]:a>=0?st.BOTTOM:st.TOP,a>0?s=o?st.TOP:st.LEFT:a<0&&(s=o?st.BOTTOM:st.LEFT)):(i=o?a>=0?st.BOTTOM:st.TOP:cl[r],a>0?s=o?st.RIGHT:st.TOP:a<0&&(s=o?st.RIGHT:st.BOTTOM))}return[i,s]}ij.Directions=st;const lde=ij,fde=Object.freeze(Object.defineProperty({__proto__:null,manhattan:gE,metro:nde,normal:Bhe,oneSide:zhe,orthogonal:pE,rightAngle:lde},Symbol.toStringTag,{value:"Module"})),nl={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},hde=Object.values(nl),dde=10,pde=1,WA=function(e,t,r=[],n={}){const{cornerType:i=nl.POINT,cornerRadius:s=dde,cornerPreserveAspectRatio:o=!1,precision:a=pde,raw:u=!1}=n;if(hde.indexOf(i)===-1)throw new Error("Invalid `cornerType` provided to `straight` connector.");let c;if(i===nl.POINT||!s){const f=[e].concat(r).concat([t]),h=new dn(f);c=new Nt(h)}else{c=new Nt,c.appendSegment(Nt.createSegment("M",e));let f;const h=r.length;for(let g=0;g<h;g++){const y=new pe(r[g]),m=r[g-1]||e,_=r[g+1]||t,b=f||y.distance(m)/2;f=y.distance(_)/2;let S,E;o?S=E=-Math.min(s,b,f):(S=-Math.min(s,b),E=-Math.min(s,f));const A=y.clone().move(m,S).round(a),T=y.clone().move(_,E).round(a);switch(c.appendSegment(Nt.createSegment("L",A)),i){case nl.CUBIC:{const I=.3333333333333333,q=2/3,p=new pe(I*A.x+q*y.x,q*y.y+I*A.y),P=new pe(I*T.x+q*y.x,q*y.y+I*T.y);c.appendSegment(Nt.createSegment("C",p,P,T));break}case nl.LINE:{c.appendSegment(Nt.createSegment("L",T));break}case nl.GAP:{c.appendSegment(Nt.createSegment("M",T));break}}}c.appendSegment(Nt.createSegment("L",t))}return u?c:c.serialize()};var gde=5,M5=["arc","gap","cubic"],vde=0,k5=1,mde=["smooth"],up=1/3,cp=2/3;function L5(e,t){let{x:r,y:n}=e,{x:i,y:s}=t;if(r>i){let o=r;r=i,i=o,o=n,n=s,s=o}if(n>s){let o=r;r=i,i=o,o=n,n=s,s=o}return[new pe(r,n),new pe(i,s)]}function yde(e,t){const[{x:r,y:n},{x:i,y:s}]=L5(e.start,e.end),[{x:o,y:a},{x:u,y:c}]=L5(t.start,t.end),f=r<=u&&o<=i,h=n<=c&&a<=s;return f&&h}function kS(e,t,r){var n=[].concat(e,r,t);return n.reduce(function(i,s,o){var a=n[o+1];return a!=null&&(i[o]=tc(s,a)),i},[])}function _de(e){var t=e.paper,r=t._jumpOverUpdateList;if(r==null){r=t._jumpOverUpdateList=[];var n=t.model;n.on("batch:stop",function(){this.hasActiveBatch()||bde(t)}),n.on("reset",function(){r=t._jumpOverUpdateList=[]})}r.indexOf(e)<0&&(r.push(e),e.listenToOnce(e.model,"change:connector remove",function(){r.splice(r.indexOf(e),1)}))}function bde(e){for(var t=e._jumpOverUpdateList,r=0;r<t.length;r++){const n=t[r],i=n.getFlag(n.constructor.Flags.CONNECTOR);n.requestUpdate(i)}}function wde(e,t){return Fr(t).reduce(function(r,n){var i=e.intersection(n);return i&&r.push(i),r},[])}function N5(e,t){return tc(e,t).squaredLength()}function xde(e,t,r){return t.reduce(function(n,i,s){if(i.skip===!0)return n;var o=n.pop()||e,a=Mp(i).move(o.start,-r),u=Mp(i).move(o.start,+r),c=t[s+1];if(c!=null){var f=u.distance(c);f<=r&&(u=c.move(o.start,f),c.skip=!0)}else{var h=a.distance(o.end);if(h<r*2+k5)return n.push(o),n}var g=u.distance(o.start);if(g<r*2+k5)return n.push(o),n;var y=tc(a,u);return y.isJump=!0,n.push(tc(o.start,a),y,tc(u,o.end)),n},[])}function q5(e,t,r,n){var i=new Nt,s;return s=Nt.createSegment("M",e[0].start),i.appendSegment(s),Fr(e).forEach(function(o,a){if(o.isJump){var u,c,f,h;if(r==="arc"){u=-90,c=o.start.difference(o.end);var g=+(c.x<0||c.x===0&&c.y<0);g&&(u+=180);var y=o.midpoint(),m=new bt(y,o.end).rotate(y,u),_;_=new bt(o.start,y),f=_.pointAt(2/3).rotate(o.start,u),h=m.pointAt(1/3).rotate(m.end,-u),s=Nt.createSegment("C",f,h,m.end),i.appendSegment(s),_=new bt(y,o.end),f=m.pointAt(1/3).rotate(m.end,u),h=_.pointAt(1/3).rotate(o.end,-u),s=Nt.createSegment("C",f,h,o.end),i.appendSegment(s)}else if(r==="gap")s=Nt.createSegment("M",o.end),i.appendSegment(s);else if(r==="cubic"){u=o.start.theta(o.end);var b=t*.6,S=t*1.35;c=o.start.difference(o.end),g=+(c.x<0||c.x===0&&c.y<0),g&&(S*=-1),f=pe(o.start.x+b,o.start.y+S).rotate(o.start,u),h=pe(o.end.x-b,o.end.y+S).rotate(o.end,u),s=Nt.createSegment("C",f,h,o.end),i.appendSegment(s)}}else{var E=e[a+1];n==0||!E||E.isJump?(s=Nt.createSegment("L",o.end),i.appendSegment(s)):Sde(n,i,o.end,o.start,E.end)}}),i}function Sde(e,t,r,n,i){var s=r.distance(n)/2,o=r.distance(i)/2,a=-Math.min(e,s),u=-Math.min(e,o),c=r.clone().move(n,a).round(),f=r.clone().move(i,u).round(),h=new pe(up*c.x+cp*r.x,cp*r.y+up*c.y),g=new pe(up*f.x+cp*r.x,cp*r.y+up*f.y),y;y=Nt.createSegment("L",c),t.appendSegment(y),y=Nt.createSegment("C",h,g,f),t.appendSegment(y)}const Ede=function(e,t,r,n){_de(this);var i=n.raw,s=n.size||gde,o=n.jump&&(""+n.jump).toLowerCase(),a=n.radius||vde,u=n.ignoreConnectors||mde;M5.indexOf(o)===-1&&(o=M5[0]);var c=this.paper,f=c.model,h=f.getLinks();if(h.length===1)return q5(kS(e,t,r),s,o,a);var g=this.model,y=h.indexOf(g),m=c.options.defaultConnector||{},_=h.filter(function(I,q){var p=I.get("connector")||m;return Fr(u).includes(p.name)?!1:q>y?p.name!=="jumpover":!0}),b=_.map(function(I){return c.findViewByModel(I)}),S=kS(e,t,r),E=b.map(function(I){return I==null?[]:I===this?S:kS(I.sourcePoint,I.targetPoint,I.route)},this),A=S.reduce(function(I,q){var p=_.reduce(function(P,O,N){if(O!==g){const V=E[N].slice(),W=V.findIndex(ee=>yde(q,ee));W>-1&&q.containsPoint(V[W].end)&&V.splice(W+1,1);const G=wde(q,V);P.push.apply(P,G)}return P},[]).sort(function(P,O){return N5(q.start,P)-N5(q.start,O)});return p.length>0?I.push.apply(I,xde(q,p,s)):I.push(q),I},[]),T=q5(A,s,o,a);return i?T:T.serialize()},Ade=function(e,t,r=[],n={}){const{raw:i}=n;return WA(e,t,r,{cornerType:"point",raw:i})},Tde=10,Pde=0,Cde=function(e,t,r=[],n={}){const{radius:i=Tde,raw:s}=n;return WA(e,t,r,{cornerType:"cubic",cornerRadius:i,precision:Pde,raw:s})},Rde=function(e,t,r,n){var i=n&&n.raw,s;if(r&&r.length!==0){var o=[e].concat(r).concat([t]),a=Kr.throughPoints(o);s=new Nt(a)}else{s=new Nt;var u;if(u=Nt.createSegment("M",e),s.appendSegment(u),Math.abs(e.x-t.x)>=Math.abs(e.y-t.y)){var c=(e.x+t.x)/2;u=Nt.createSegment("C",c,e.y,c,t.y,t.x,t.y),s.appendSegment(u)}else{var f=(e.y+t.y)/2;u=Nt.createSegment("C",e.x,f,t.x,f,t.x,t.y),s.appendSegment(u)}}return i?s:s.serialize()},to={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Wi={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},XA=function(e,t,r=[],n={},i){const s=!!n.raw,{direction:o=to.AUTO,precision:a=3}=n,u={coeff:n.distanceCoefficient||.6,angleTangentCoefficient:n.angleTangentCoefficient||80,tau:n.tension||.5,sourceTangent:n.sourceTangent?new pe(n.sourceTangent):null,targetTangent:n.targetTangent?new pe(n.targetTangent):null,rotate:!!n.rotate};typeof n.sourceDirection=="string"?u.sourceDirection=n.sourceDirection:typeof n.sourceDirection=="number"?u.sourceDirection=new pe(1,0).rotate(null,n.sourceDirection):u.sourceDirection=n.sourceDirection?new pe(n.sourceDirection).normalize():null,typeof n.targetDirection=="string"?u.targetDirection=n.targetDirection:typeof n.targetDirection=="number"?u.targetDirection=new pe(1,0).rotate(null,n.targetDirection):u.targetDirection=n.targetDirection?new pe(n.targetDirection).normalize():null;const c=[e,...r,t].map(_=>new pe(_));let f;if(u.sourceTangent)f=u.sourceTangent;else{const _=Lde(i,c,o,u),b=c[0].distance(c[1])*u.coeff,S=c[1].difference(c[0]).normalize(),E=vE(_,S);if(E>Math.PI/4){const A=b+(E-Math.PI/4)*u.angleTangentCoefficient;f=_.clone().scale(A,A)}else f=_.clone().scale(b,b)}let h;if(u.targetTangent)h=u.targetTangent;else{const _=Nde(i,c,o,u),b=c.length-1,S=c[b-1].distance(c[b])*u.coeff,E=c[b-1].difference(c[b]).normalize(),A=vE(_,E);if(A>Math.PI/4){const T=S+(A-Math.PI/4)*u.angleTangentCoefficient;h=_.clone().scale(T,T)}else h=_.clone().scale(S,S)}const y=Dde(c,f,h,u).map(_=>Fde(_,u)),m=new Nt(y).round(a);return s?m:m.serialize()};XA.Directions=to;XA.TangentDirections=Wi;function Ide(e,t,r){const{sourceBBox:n}=e;let i,s;if(!e.sourceView)n.x>t[1].x?i="right":i="left";else if(s=e.sourceView.model.angle(),r.rotate&&s){const a=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),u=t[0].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[0]);let o;switch(i){case"left":o=new pe(-1,0);break;case"right":default:o=new pe(1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function Ode(e,t,r){const{targetBBox:n}=e;let i,s;if(!e.targetView)n.x>t[t.length-2].x?i="left":i="right";else if(s=e.targetView.model.angle(),r.rotate&&s){const a=e.targetView.getNodeUnrotatedBBox(e.targetView.el),u=t[t.length-1].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[t.length-1]);let o;switch(i){case"left":o=new pe(-1,0);break;case"right":default:o=new pe(1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function Mde(e,t,r){const{sourceBBox:n}=e;let i,s;if(!e.sourceView)n.y>t[1].y?i="bottom":i="top";else if(s=e.sourceView.model.angle(),r.rotate&&s){const a=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),u=t[0].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[0]);let o;switch(i){case"top":o=new pe(0,-1);break;case"bottom":default:o=new pe(0,1);break}return r.rotate&&s&&o.rotate(null,-s),o}function kde(e,t,r){const{targetBBox:n}=e;let i,s;if(!e.targetView)n.y>t[t.length-2].y?i="top":i="bottom";else if(s=e.targetView.model.angle(),r.rotate&&s){const a=e.targetView.getNodeUnrotatedBBox(e.targetView.el),u=t[t.length-1].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[t.length-1]);let o;switch(i){case"top":o=new pe(0,-1);break;case"bottom":default:o=new pe(0,1);break}return r.rotate&&s&&o.rotate(null,-s),o}function D5(e,t,r){const{sourceBBox:n}=e;let i,s;if(!e.sourceView)i=n.sideNearestToPoint(t[1]);else if(s=e.sourceView.model.angle(),r.rotate&&s){const a=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),u=t[0].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[0]);let o;switch(i){case"top":o=new pe(0,-1);break;case"bottom":o=new pe(0,1);break;case"right":o=new pe(1,0);break;case"left":o=new pe(-1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function F5(e,t,r){const{targetBBox:n}=e;let i,s;if(!e.targetView)i=n.sideNearestToPoint(t[t.length-2]);else if(s=e.targetView.model.angle(),r.rotate&&s){const a=e.targetView.getNodeUnrotatedBBox(e.targetView.el),u=t[t.length-1].clone();u.rotate(n.center(),s),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(t[t.length-1]);let o;switch(i){case"top":o=new pe(0,-1);break;case"bottom":o=new pe(0,1);break;case"right":o=new pe(1,0);break;case"left":o=new pe(-1,0);break}return r.rotate&&s&&o.rotate(null,-s),o}function B5(e,t,r){return t[1].difference(t[0]).normalize()}function z5(e,t,r){const n=t.length-1;return t[n-1].difference(t[n]).normalize()}function V5(e,t,r){const{sourceBBox:n}=e,i=n.center();return t[0].difference(i).normalize()}function G5(e,t,r){const{targetBBox:n}=e,i=n.center();return t[t.length-1].difference(i).normalize()}function Lde(e,t,r,n){if(n.sourceDirection)switch(n.sourceDirection){case Wi.UP:return new pe(0,-1);case Wi.DOWN:return new pe(0,1);case Wi.LEFT:return new pe(-1,0);case Wi.RIGHT:return new pe(1,0);case Wi.AUTO:return D5(e,t,n);case Wi.CLOSEST_POINT:return B5(e,t);case Wi.OUTWARDS:return V5(e,t);default:return n.sourceDirection}switch(r){case to.HORIZONTAL:return Ide(e,t,n);case to.VERTICAL:return Mde(e,t,n);case to.CLOSEST_POINT:return B5(e,t);case to.OUTWARDS:return V5(e,t);case to.AUTO:default:return D5(e,t,n)}}function Nde(e,t,r,n){if(n.targetDirection)switch(n.targetDirection){case Wi.UP:return new pe(0,-1);case Wi.DOWN:return new pe(0,1);case Wi.LEFT:return new pe(-1,0);case Wi.RIGHT:return new pe(1,0);case Wi.AUTO:return F5(e,t,n);case Wi.CLOSEST_POINT:return z5(e,t);case Wi.OUTWARDS:return G5(e,t);default:return n.targetDirection}switch(r){case to.HORIZONTAL:return Ode(e,t,n);case to.VERTICAL:return kde(e,t,n);case to.CLOSEST_POINT:return z5(e,t);case to.OUTWARDS:return G5(e,t);case to.AUTO:default:return F5(e,t,n)}}function qde(e,t){const r=Math.cos(t),n=Math.sin(t),i=r*e.x-n*e.y,s=n*e.x+r*e.y;e.x=i,e.y=s}function vE(e,t){let r=e.dot(t)/(e.magnitude()*t.magnitude());return r<-1&&(r=-1),r>1&&(r=1),Math.acos(r)}function $5(e,t){return e.x*t.y-e.y*t.x}function Dde(e,t,r,n){const{tau:i,coeff:s}=n,o=[],a=[],u=[],c=e.length-1;for(let f=0;f<c;f++)o[f]=e[f].distance(e[f+1]);a[0]=t,a[c]=r;for(let f=1;f<c;f++){let h,g;f===1?h=e[f-1].clone().offset(a[f-1].x,a[f-1].y):h=e[f-1].clone(),f===c-1?g=e[f+1].clone().offset(a[f+1].x,a[f+1].y):g=e[f+1].clone();const y=h.difference(e[f]).normalize(),m=g.difference(e[f]).normalize(),_=vE(y,m);let b=(Math.PI-_)/2,S;const E=$5(y,m);let A;A=$5(e[f].difference(e[f+1]),e[f].difference(e[f-1])),E<0&&(b=-b),_<Math.PI/2&&(b<0&&A<0||b>0&&A>0)&&(b=b-Math.PI),S=m.clone(),qde(S,b);const T=S.clone(),I=S.clone(),q=o[f-1]*s,p=o[f]*s;T.scale(q,q),I.scale(p,p),a[f]=[T,I]}for(let f=0;f<c;f++){let h,g;f===0?h=e[f+1].difference(a[f].x/i,a[f].y/i):h=e[f+1].difference(a[f][1].x/i,a[f][1].y/i),f===c-1?g=e[f].clone().offset(a[f+1].x/i,a[f+1].y/i):g=e[f].difference(a[f+1][0].x/i,a[f+1][0].y/i),u[f]=[h,e[f],e[f+1],g]}return u}function Fde(e,t){const{tau:r}=t,n=new pe;n.x=e[1].x+(e[2].x-e[0].x)/(6*r),n.y=e[1].y+(e[2].y-e[0].y)/(6*r);const i=new pe;return i.x=e[2].x+(e[3].x-e[1].x)/(6*r),i.y=e[2].y+(e[3].y-e[1].y)/(6*r),new Kr(e[1],n,i,e[2])}const Bde=Object.freeze(Object.defineProperty({__proto__:null,curve:XA,jumpover:Ede,normal:Ade,rounded:Cde,smooth:Rde,straight:WA},Symbol.toStringTag,{value:"Module"})),er={TOOLS:wr.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},ji=wr.extend({className:function(){var e=wr.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){wr.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[er.RENDER],attrs:[er.UPDATE],router:[er.UPDATE],connector:[er.CONNECTOR],smooth:[er.UPDATE],manhattan:[er.UPDATE],toolMarkup:[er.LEGACY_TOOLS],labels:[er.LABELS],labelMarkup:[er.LABELS],vertices:[er.VERTICES,er.UPDATE],vertexMarkup:[er.VERTICES],source:[er.SOURCE,er.UPDATE],target:[er.TARGET,er.UPDATE]},initFlag:[er.RENDER,er.SOURCE,er.TARGET,er.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(e,t){if(t||(t={}),this.hasFlag(e,er.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,er.SOURCE)}if(this.hasFlag(e,er.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,er.TARGET)}const{paper:r,sourceView:n,targetView:i}=this;if(r&&(n&&!r.isViewMounted(n)||i&&!r.isViewMounted(i)))return e;if(this.hasFlag(e,er.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(t),e=this.removeFlag(e,[er.RENDER,er.UPDATE,er.VERTICES,er.LABELS,er.TOOLS,er.LEGACY_TOOLS,er.CONNECTOR]),e;let s=!1;this.hasFlag(e,er.VERTICES)&&(this.renderVertexMarkers(),e=this.removeFlag(e,er.VERTICES));const{model:o}=this,{attributes:a}=o;let u=this.hasFlag(e,er.LABELS),c=this.hasFlag(e,er.LEGACY_TOOLS);u&&(this.onLabelsChange(o,a.labels,t),e=this.removeFlag(e,er.LABELS),s=!0),c&&(this.renderTools(),e=this.removeFlag(e,er.LEGACY_TOOLS));const f=this.hasFlag(e,er.UPDATE),h=this.hasFlag(e,er.CONNECTOR);return(f||h)&&(f?t.translateBy&&o.isRelationshipEmbeddedIn(t.translateBy)?this.translate(t.tx,t.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(t),e=this.removeFlag(e,[er.UPDATE,er.TOOLS,er.CONNECTOR]),u=!1,c=!1,s=!0),u&&this.updateLabelPositions(),c&&this.updateToolsPosition(),s&&this.updateHighlighters(),this.hasFlag(e,er.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,er.TOOLS)),e},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(er.UPDATE),e)},isLabelsRenderRequired:function(e={}){const t=this.model.previous("labels");if(!t)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var r=e.propertyPathArray||[],n=r.length;if(n>1){var i=!!t[r[1]];if(i){if(n===2)return"markup"in Object(e.propertyValue);if(r[2]!=="markup")return!1}}}return!0},onLabelsChange:function(e,t,r){this.isLabelsRenderRequired(r)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.LinkView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if(typeof t=="string")return this.renderStringMarkup(t);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el);this.selectors=t.selectors,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=$e(e);Array.isArray(t)||(t=[t]);for(var r=this._V,n=0,i=t.length;n<i;n++){var s=t[n],o=s.attr("class");o&&(o=Kfe(o),r[It.camelCase(o)]=s)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(t)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if(typeof e=="string")return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var t=$e(e),r=document.createDocumentFragment();if(!Array.isArray(t))r.appendChild(t.node);else for(var n=0,i=t.length;n<i;n++){var s=t[n].node;r.appendChild(s)}return{fragment:r,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var t=e.fragment;if(!(e.fragment instanceof DocumentFragment)||!e.fragment.hasChildNodes())throw new Error("dia.LinkView: invalid label markup.");var r,n=t.childNodes;return n.length>1||n[0].nodeName.toUpperCase()!=="G"?r=$e("g").append(t):r=$e(n[0]),r.addClass("label"),{node:r.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,t=e.labels,r=this._labelCache={},n=this._labelSelectors={},i=this.model,s=i.attributes.labels||[],o=s.length;if(o===0)return t&&t.remove(),this;t?t.empty():(t=e.labels=$e("g").addClass("labels"),this.options.labelsLayer&&(t.addClass(So(Zn(this,"className"))),t.attr("model-id",i.id)));for(var a=0;a<o;a++){var u=s[a],c=this._normalizeLabelMarkup(this._getLabelMarkup(u.markup)),f,h;if(c)f=c.node,h=c.selectors;else{var g=i._builtins.defaultLabel,y=this._normalizeLabelMarkup(this._getLabelMarkup(g.markup)),m=i._getDefaultLabel(),_=this._normalizeLabelMarkup(this._getLabelMarkup(m.markup)),b=_||y;f=b.node,h=b.selectors}f.setAttribute("label-idx",a),t.append(f),r[a]=f;var S=this.selector;if(h[S])throw new Error("dia.LinkView: ambiguous label root selector.");h[S]=f,n[a]=h}return t.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:e,paper:t,model:r,_V:n,options:i}=this,{labels:s}=n;if(!s||!r.hasLabels())return;const{node:o}=s;i.labelsLayer?t.getLayerView(i.labelsLayer).insertSortedNode(o,r.get("z")):o.parentNode!==e&&e.appendChild(o)},unmountLabels:function(){const{options:e,_V:t}=this;if(!t)return;const{labels:r}=t;r&&e.labelsLayer&&r.remove()},findLabelNode:function(e,t){const r=this._labelCache[e];if(!r)return null;const n=this._labelSelectors[e],[i=null]=this.findBySelector(t,r,n);return i},_mergeLabelAttrs:function(e,t,r,n){return t===null?null:t===void 0?r===null?null:r===void 0?e?void 0:n:e?r:ri({},n,r):e?ri({},r,t):ri({},n,r,t)},_mergeLabelSize:function(e,t){return e===null?null:e===void 0?t===null?null:t===void 0?void 0:t:ri({},t,e)},updateLabels:function(){if(!this._V.labels)return this;for(var e=this.model,t=e.get("labels")||[],r=this.can("labelMove"),n=e._builtins.defaultLabel,i=n.attrs,s=e._getDefaultLabel(),o=s.markup,a=s.attrs,u=s.size,c=0,f=t.length;c<f;c++){var h=this._labelCache[c];h.setAttribute("cursor",r?"move":"default");var g=this._labelSelectors[c],y=t[c],m=y.markup,_=y.attrs,b=y.size,S=this._mergeLabelAttrs(m||o,_,a,i),E=this._mergeLabelSize(b,u);this.updateDOMSubtreeAttributes(h,S,{rootBBox:new vt(E),selectors:g})}return this},renderTools:function(){if(!this._V.linkTools)return this;var e=It(this._V.linkTools.node).empty(),t=Ui(this.model.get("toolMarkup")||this.model.toolMarkup),r=$e(t());if(e.append(r.node),this._toolCache=r,this.options.doubleLinkTools){var n;this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(t=Ui(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),n=$e(t())):n=r.clone(),e.append(n.node),this._tool2Cache=n}return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var e=It(this._V.markerVertices.node).empty(),t=Ui(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(r,n){e.append($e(t(Ut({idx:n},r))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var e=It(this._V.markerArrowheads.node);e.empty();var t=Ui(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=$e(t({end:"source"})),this._V.targetArrowhead=$e(t({end:"target"})),e.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(e){const r=this.model,n=r.vertices(),i=[this.sourceAnchor,...n,this.targetAnchor],s=i.length,o=new dn(i);o.simplify({threshold:.001});const a=o.points.map(c=>c.toJSON()),u=a.length;return s===u?0:(r.vertices(a.slice(1,u-1),e),s-u)},updateDefaultConnectionPath:function(){var e=this._V;e.connection&&e.connection.attr("d",this.getSerializedConnection()),e.connectionWrap&&e.connectionWrap.attr("d",this.getSerializedConnection()),e.markerSource&&e.markerTarget&&this._translateAndAutoOrientArrows(e.markerSource,e.markerTarget)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new pe(this.sourceAnchor);case"target":return new pe(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new pe(this.sourcePoint);case"target":return new pe(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var t=this.sourceView;if(!t)break;return this.sourceMagnet||t.el;case"target":var r=this.targetView;if(!r)break;return this.targetMagnet||r.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,t=0){const{route:r,path:n}=this;if(!r||!n)return;const i=new dn(r);i.translate(e,t),this.route=i.points,this._translateConnectionPoints(e,t),n.translate(e,t),this.updateDOM()},updateDOM(){const{el:e,model:t,selectors:r}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,t.attr(),{selectors:r}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:e}=this,t=e.vertices(),r=this.findAnchors(t),n=this.sourceAnchor=r.source,i=this.targetAnchor=r.target,s=this.findRoute(t);this.route=s;var o=this.findConnectionPoints(s,n,i);this.sourcePoint=o.source,this.targetPoint=o.target},updatePath:function(){const{route:e,sourcePoint:t,targetPoint:r}=this,n=this.findMarkerPoints(e,t,r),i=this.findPath(e,n.source||t,n.target||r);this.path=i},findMarkerPoints:function(e,t,r){var n=e[0],i=e[e.length-1],s=this._markerCache,o,a;return this._V.markerSource&&(s.sourceBBox=s.sourceBBox||this._V.markerSource.getBBox(),o=pe(t).move(n||r,s.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(s.targetBBox=s.targetBBox||this._V.markerTarget.getBBox(),a=pe(r).move(i||t,s.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),s.sourcePoint=o||t.clone(),s.targetPoint=a||r.clone(),{source:o,target:a}},findAnchorsOrdered:function(e,t,r,n){var i,s,o,a,u=this.model,c=u.get(e),f=u.get(r),h=this.getEndView(e),g=this.getEndView(r),y=this.getEndMagnet(e),m=this.getEndMagnet(r);h?(t?o=new pe(t):g?o=m:o=new pe(f),i=this.getAnchor(c.anchor,h,y,o,e)):i=new pe(c),g?(a=new pe(n||i),s=this.getAnchor(f.anchor,g,m,a,r)):s=new pe(f);var _={};return _[e]=i,_[r]=s,_},findAnchors:function(e){var t=this.model,r=e[0],n=e[e.length-1];return t.target().priority&&!t.source().priority?this.findAnchorsOrdered("target",n,"source",r):this.findAnchorsOrdered("source",r,"target",n)},findConnectionPoints:function(e,t,r){var n=e[0],i=e[e.length-1],s=this.model,o=s.get("source"),a=s.get("target"),u=this.sourceView,c=this.targetView,f=this.paper.options,h,g,y;if(u&&!u.isNodeConnection(this.sourceMagnet)){h=this.sourceMagnet||u.el;var m=o.connectionPoint||f.defaultConnectionPoint,_=n||r,b=new bt(_,t);y=this.getConnectionPoint(m,u,h,b,"source")}else y=t;var S;if(c&&!c.isNodeConnection(this.targetMagnet)){g=this.targetMagnet||c.el;var E=a.connectionPoint||f.defaultConnectionPoint,A=i||t,T=new bt(A,r);S=this.getConnectionPoint(E,c,g,T,"target")}else S=r;return{source:y,target:S}},getAnchor:function(e,t,r,n,i){var s=t.isNodeConnection(r),o=this.paper.options;if(e||(s?e=o.defaultLinkAnchor:o.perpendicularLinks||this.options.perpendicular?e={name:"perpendicular"}:e=o.defaultAnchor),!e)throw new Error("Anchor required.");var a;if(typeof e=="function")a=e;else{var u=e.name,c=s?"linkAnchorNamespace":"anchorNamespace";if(a=o[c][u],typeof a!="function")throw new Error("Unknown anchor: "+u)}var f=a.call(this,t,r,n,e.args||{},i,this);return f?f.round(this.decimalsRounding):new pe},getConnectionPoint:function(e,t,r,n,i){var s,o=n.end,a=this.paper.options;if(typeof a.linkConnectionPoint=="function"){var u=r===t.el?void 0:r;if(s=a.linkConnectionPoint(this,t,u,n.start,i),s)return s}if(!e)return o;var c;if(typeof e=="function")c=e;else{var f=e.name;if(c=a.connectionPointNamespace[f],typeof c!="function")throw new Error("Unknown connection point: "+f)}return s=c.call(this,n,t,r,e.args||{},i,this),s?s.round(this.decimalsRounding):o},_translateConnectionPoints:function(e,t){var r=this._markerCache;r.sourcePoint.offset(e,t),r.targetPoint.offset(e,t),this.sourcePoint.offset(e,t),this.targetPoint.offset(e,t),this.sourceAnchor.offset(e,t),this.targetAnchor.offset(e,t)},_getDefaultLabelPositionProperty:function(){var e=this.model,t=e._builtins.defaultLabel,r=t.position,n=e._getDefaultLabel(),i=this._normalizeLabelPosition(n.position);return ri({},r,i)},_normalizeLabelPosition:function(e){return typeof e=="number"?{distance:e,offset:null,angle:0,args:null}:e},_mergeLabelPositionProperty:function(e,t){return e===null?null:e===void 0?t===null?null:t:ri({},t,e)},updateLabelPositions:function(){if(!this._V.labels)return this;var e=this.path;if(!e)return this;var t=this.model,r=t.get("labels")||[];if(!r.length)return this;for(var n=this._getDefaultLabelPositionProperty(),i=0,s=r.length;i<s;i++){var o=this._labelCache[i];if(o){var a=r[i],u=this._normalizeLabelPosition(a.position),c=this._mergeLabelPositionProperty(u,n),f=this._getLabelTransformationMatrix(c);o.setAttribute("transform",$e.matrixToTransformString(f)),this._cleanLabelMatrices(i)}}return this},_cleanLabelMatrices:function(e){const{metrics:t,_labelSelectors:r}=this,n=r[e];if(n)for(let i in n){const{id:s}=n[i];s&&s in t&&delete t[s].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var e="",t=this.options.linkToolsOffset,r=this.getConnectionLength();if(!Number.isNaN(r)){r<this.options.shortLinkLength&&(e="scale(.5)",t/=2);var n=this.getPointAtLength(t);if(this._toolCache.attr("transform","translate("+n.x+", "+n.y+") "+e),this.options.doubleLinkTools&&r>=this.options.longLinkLength){var i=this.options.doubleLinkToolsOffset||t;n=this.getPointAtLength(r-i),this._tool2Cache.attr("transform","translate("+n.x+", "+n.y+") "+e),this._tool2Cache.attr("display","inline")}else this.options.doubleLinkTools&&this._tool2Cache.attr("display","none")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if(It.css(this._V.markerArrowheads.node,"display")==="none")return this;var e=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(e),this._V.targetArrowhead.scale(e),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(e){const{model:t,paper:r}=this,n=`${e}View`,i=t.get(e),s=i&&i.id;if(!s)return this[n]=null,this.updateEndMagnet(e),!0;const o=r.getModelById(s);if(!o)throw new Error("LinkView: invalid "+e+" cell.");const a=o.findView(r);return a?(this[n]=a,this.updateEndMagnet(e),!0):!1},updateEndMagnet:function(e){const t=`${e}Magnet`,r=this.getEndView(e);if(r){let n=r.getMagnetFromLinkEnd(this.model.get(e));n===r.el&&(n=null),this[t]=n}else this[t]=null},_translateAndAutoOrientArrows:function(e,t){var r=Fr(this.route);e&&e.translateAndAutoOrient(this.sourcePoint,r[0]||this.targetPoint,this.paper.cells),t&&t.translateAndAutoOrient(this.targetPoint,r[r.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionProperty:function(e){return this.model.label(e).position||{}},_getLabelPositionAngle:function(e){var t=this._getLabelPositionProperty(e);return t.angle||0},_getLabelPositionArgs:function(e){var t=this._getLabelPositionProperty(e);return t.args},_getDefaultLabelPositionArgs:function(){var e=this.model._getDefaultLabel(),t=e.position||{};return t.args},_mergeLabelPositionArgs:function(e,t){return e===null?null:e===void 0?t===null?null:t:ri({},t,e)},addLabel:function(e,t,r,n){var i,s,o=0,a;typeof e!="number"?(i=e.x,s=e.y,typeof t=="number"?(o=t,a=r):a=t):(i=e,s=t,typeof r=="number"?(o=r,a=n):a=r);var u=this._getDefaultLabelPositionArgs(),c=a,f=this._mergeLabelPositionArgs(c,u),h={position:this.getLabelPosition(i,s,o,f)},g=-1;return this.model.insertLabel(g,h,a),g},addVertex:function(e,t,r){var n=typeof e!="number",i=n?e.x:e,s=n?e.y:t,o=n?t:r,a={x:i,y:s},u=this.getVertexIndex(i,s);return this.model.insertVertex(u,a,o),u},sendToken:function(e,t,r){function n(h,g){return function(){h.remove(),typeof g=="function"&&g()}}var i,s,o;Wr(t)?(i=t.duration,s=t.direction==="reverse",o=t.connection):(i=t,s=!1,o=null),i=i||1e3;var a={dur:i+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};s&&(a.keyPoints="1;0",a.keyTimes="0;1");var u=$e(e),c;if(typeof o=="string")c=this.findBySelector(o,this.el,this.selectors)[0];else{var f=this._V;c=f.connection?f.connection.node:this.el.querySelector("path")}if(!(c instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");u.appendTo(this.paper.cells).animateAlongPath(a,c),setTimeout(n(u,r),i)},findRoute:function(e){e||(e=[]);var t=this.paper.options.routerNamespace||fde,r=this.model.router(),n=this.paper.options.defaultRouter;if(!r)if(n)r=n;else return e.map(pe);var i=fn(r)?r:t[r.name];if(!fn(i))throw new Error('dia.LinkView: unknown router: "'+r.name+'".');var s=r.args||{},o=i.call(this,e,s,this);return o||e.map(pe)},findPath:function(e,t,r){var n=this.paper.options.connectorNamespace||Bde,i=this.model.connector(),s=this.paper.options.defaultConnector;i||(i=s||{});var o=fn(i)?i:n[i.name];if(!fn(o))throw new Error('dia.LinkView: unknown connector: "'+i.name+'".');var a=Qo(i.args||{});a.raw=!0;var u=o.call(this,t,r,e,a,this);return typeof u=="string"&&(u=new Nt($e.normalizePathData(u))),u},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("data"))return t.data;var r=e.serialize();return t.data=r,r},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("segmentSubdivisions"))return t.segmentSubdivisions;var r=e.getSegmentSubdivisions();return t.segmentSubdivisions=r,r},getConnectionLength:function(){var e=this.path;if(!e)return 0;var t=this.metrics;if(t.hasOwnProperty("length"))return t.length;var r=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return t.length=r,r},getPointAtLength:function(e){var t=this.path;return t?t.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var t=this.path;return t?(Ai(e)&&(e=parseFloat(e)/100),t.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var t=this.path;return t?t.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var t=this.path;return t?t.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var t=this.path;return t?t.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var t=this.path;return t?t.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var t=this.path;return t?t.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,t,r,n){var i={},s=0,o;typeof r=="number"?(s=r,o=n):o=r,o&&(i.args=o);var a=!(o&&o.absoluteDistance),u=o&&o.absoluteDistance&&o.reverseDistance,c=o&&o.absoluteOffset,f=this.path,h={segmentSubdivisions:this.getConnectionSubdivisions()},g=new pe(e,t),y=f.closestPointT(g,h),m=f.lengthAtT(y,h);a&&(m=m/this.getConnectionLength()||0),u&&(m=-1*(this.getConnectionLength()-m)||1),i.distance=m;var _;c||(_=f.tangentAtT(y));var b;if(_)b=_.pointOffset(g);else{var S=f.pointAtT(y),E=g.difference(S);b={x:E.x,y:E.y}}return i.offset=b,i.angle=s,i},_getLabelTransformationMatrix:function(e){var t,r=0,n={};if(typeof e=="number")t=e;else if(typeof e.distance=="number")n=e.args||{},t=e.distance,r=e.angle||0;else throw new Error("dia.LinkView: invalid label position distance.");var i=t>0&&t<=1,s=0,o={x:0,y:0};if(e.offset){var a=e.offset;typeof a=="number"&&(s=a),a.x&&(o.x=a.x),a.y&&(o.y=a.y)}var u=o.x!==0||o.y!==0||s===0,c=n.keepGradient,f=n.ensureLegibility,h=this.path,g={segmentSubdivisions:this.getConnectionSubdivisions()},y=i?t*this.getConnectionLength():t,m=h.tangentAtLength(y,g),_,b=r;if(m){if(u)_=m.start.clone(),_.offset(o);else{var S=m.clone();S.rotate(m.start,-90),S.setLength(s),_=S.end}c&&(b=m.angle()+r,f&&(b=Oo((b+90)%180-90)))}else _=h.start.clone(),u&&_.offset(o);return $e.createSVGMatrix().translate(_.x,_.y).rotate(b)},getLabelCoordinates:function(e){var t=this._getLabelTransformationMatrix(e);return new pe(t.e,t.f)},getVertexIndex:function(e,t){for(var r=this.model,n=r.vertices(),i=this.getClosestPointLength(new pe(e,t)),s=0,o=n.length;s<o;s++){var a=n[s],u=this.getClosestPointLength(a);if(i<u)break}return s},notifyPointerdown(e,t,r){wr.prototype.pointerdown.call(this,e,t,r),this.notify("link:pointerdown",e,t,r)},notifyPointermove(e,t,r){wr.prototype.pointermove.call(this,e,t,r),this.notify("link:pointermove",e,t,r)},notifyPointerup(e,t,r){this.notify("link:pointerup",e,t,r),wr.prototype.pointerup.call(this,e,t,r)},pointerdblclick:function(e,t,r){wr.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,t,r)},pointerclick:function(e,t,r){wr.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,t,r)},contextmenu:function(e,t,r){wr.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,t,r)},pointerdown:function(e,t,r){this.notifyPointerdown(e,t,r);var n=e.target.getAttribute("class");switch(n){case"marker-vertex":this.dragVertexStart(e,t,r);return;case"marker-vertex-remove":case"marker-vertex-remove-area":this.dragVertexRemoveStart(e,t,r);return;case"marker-arrowhead":this.dragArrowheadStart(e,t,r);return;case"connection":case"connection-wrap":this.dragConnectionStart(e,t,r);return;case"marker-source":case"marker-target":return}this.dragStart(e,t,r)},pointermove:function(e,t,r){var n=this._dragData;n&&this.eventData(e,n);var i=this.eventData(e);switch(i.action){case"vertex-move":this.dragVertex(e,t,r);break;case"label-move":this.dragLabel(e,t,r);break;case"arrowhead-move":this.dragArrowhead(e,t,r);break;case"move":this.drag(e,t,r);break}n&&Ut(n,this.eventData(e)),this.notifyPointermove(e,t,r)},pointerup:function(e,t,r){var n=this._dragData;n&&(this.eventData(e,n),this._dragData=null);var i=this.eventData(e);switch(i.action){case"vertex-move":this.dragVertexEnd(e,t,r);break;case"label-move":this.dragLabelEnd(e,t,r);break;case"arrowhead-move":this.dragArrowheadEnd(e,t,r);break;case"move":this.dragEnd(e,t,r)}this.notifyPointerup(e,t,r),this.checkMouseleave(e)},mouseover:function(e){wr.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){wr.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){wr.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){wr.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,t,r,n){wr.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,t,r,n)},onevent:function(e,t,r,n){var i=$e(e.target).findParentByClass("link-tool",this.el);if(i){if(e.stopPropagation(),this.can("useLinkTools"))if(t==="remove"){this.model.remove({ui:!0});return}else this.notify(t,e,r,n);this.notifyPointerdown(e,r,n),this.paper.delegateDragEvents(this,e.data)}else wr.prototype.onevent.apply(this,arguments)},onlabel:function(e,t,r){this.notifyPointerdown(e,t,r),this.dragLabelStart(e,t,r);var n=this.eventData(e).stopPropagation;n&&e.stopPropagation()},dragConnectionStart:function(e,t,r){if(this.can("vertexAdd")){var n=this.addVertex({x:t,y:r},{ui:!0});this.eventData(e,{action:"vertex-move",vertexIdx:n})}},dragLabelStart:function(e,t,r){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(e))return;var n=e.currentTarget,i=parseInt(n.getAttribute("label-idx"),10),s=this._getDefaultLabelPositionProperty(),o=this._normalizeLabelPosition(this._getLabelPositionProperty(i)),a=this._mergeLabelPositionProperty(o,s),u=this.getLabelCoordinates(a),c=u.x-t,f=u.y-r,h=this._getLabelPositionAngle(i),g=this._getLabelPositionArgs(i),y=this._getDefaultLabelPositionArgs(),m=this._mergeLabelPositionArgs(g,y);this.eventData(e,{action:"label-move",labelIdx:i,dx:c,dy:f,positionAngle:h,positionArgs:m,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragVertexStart:function(e,t,r){if(this.can("vertexMove")){var n=e.target,i=parseInt(n.getAttribute("idx"),10);this.eventData(e,{action:"vertex-move",vertexIdx:i})}},dragVertexRemoveStart:function(e,t,r){if(this.can("vertexRemove")){var n=e.target,i=parseInt(n.getAttribute("idx"),10);this.model.removeVertex(i)}},dragArrowheadStart:function(e,t,r){if(this.can("arrowheadMove")){var n=e.target,i=n.getAttribute("end"),s=this.startArrowheadMove(i,{ignoreBackwardsCompatibility:!0});this.eventData(e,s)}},dragStart:function(e,t,r){this.isDefaultInteractionPrevented(e)||this.can("linkMove")&&this.eventData(e,{action:"move",dx:t,dy:r})},dragLabel:function(e,t,r){var n=this.eventData(e),i={position:this.getLabelPosition(t+n.dx,r+n.dy,n.positionAngle,n.positionArgs)};this.paper.options.snapLabels&&delete i.position.offset;const s={ui:!0};this.paper.isAsync()&&e.type==="touchmove"&&(s.async=!1),this.model.label(n.labelIdx,i,s)},dragVertex:function(e,t,r){var n=this.eventData(e);this.model.vertex(n.vertexIdx,{x:t,y:r},{ui:!0})},dragArrowhead:function(e,t,r){this.paper.options.snapLinks?!this._snapArrowhead(e,t,r)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(e,t,r):this.paper.options.snapLinksSelf?this._snapArrowheadSelf(e,t,r):this._connectArrowhead(this.getEventTarget(e),t,r,this.eventData(e))},drag:function(e,t,r){var n=this.eventData(e);this.model.translate(t-n.dx,r-n.dy,{ui:!0}),this.eventData(e,{dx:t,dy:r})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(e,t,r){var n=this.eventData(e),i=this.paper;i.options.snapLinks?this._snapArrowheadEnd(n):this._connectArrowheadEnd(n,t,r),i.linkAllowed(this)?(this._finishEmbedding(n),this._notifyConnectEvent(n,e)):this._disallow(n),this._afterArrowheadMove(n)},dragEnd:function(){},_disallow:function(e){switch(e.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(e.arrowhead,e.initialEnd,{ui:!0});break}},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,t){var r=e.arrowhead,n=e.initialEnd,i=this.model.prop(r),s=i&&!Kl.endsEqual(n,i);if(s){var o=this.paper;n.id&&this.notify("link:disconnect",t,o.findViewByModel(n.id),e.initialMagnet,r),i.id&&this.notify("link:connect",t,o.findViewByModel(i.id),e.magnetUnderPointer,r)}},_snapToPoints:function(e,t,r){let n=null,i=1/0,s=null,o=1/0,a=e.x,u=e.y;for(let c=0;c<t.length;c++){const f=Math.abs(t[c].x-e.x);f<i&&(i=f,n=t[c]);const h=Math.abs(t[c].y-e.y);h<o&&(o=h,s=t[c])}return i<r&&(a=n.x),o<r&&(u=s.y),{x:a,y:u}},_snapArrowheadSelf:function(e,t,r){const{paper:n,model:i}=this,{snapLinksSelf:s}=n.options,o=this.eventData(e),a=s.radius||20,u=this.getEndAnchor(o.arrowhead==="source"?"target":"source"),c=i.vertices(),f=[u,...c],h=this._snapToPoints({x:t,y:r},f,a),g=n.localToClientPoint(h);this._connectArrowhead(document.elementFromPoint(g.x,g.y),h.x,h.y,this.eventData(e))},_snapArrowhead:function(e,t,r){const{paper:n}=this,{snapLinks:i,connectionStrategy:s}=n.options,o=this.eventData(e);let a=!1;var u=i.radius||50,c=n.findViewsInArea({x:t-u,y:r-u,width:2*u,height:2*u}),f=o.closestView||null,h=o.closestMagnet||null,g=o.magnetProxy||null;o.closestView=o.closestMagnet=o.magnetProxy=null;var y=Number.MAX_VALUE,m=new pe(t,r);c.forEach(function(I){const q=[];I.el.getAttribute("magnet")!=="false"&&q.push({bbox:I.model.getBBox(),magnet:I.el}),I.$("[magnet]").toArray().forEach(p=>{q.push({bbox:I.getNodeBBox(p),magnet:p})}),q.forEach(p=>{const{magnet:P,bbox:O}=p,N=O.center().squaredDistance(m);N<y&&(h===P||n.options.validateConnection.apply(n,o.validateConnectionArgs(I,I.el===P?null:P)))&&(y=N,o.closestView=I,o.closestMagnet=P)})},this);var _,b=null,S=o.closestView,E=o.closestMagnet;E&&(b=o.magnetProxy=S.findProxyNode(E,"highlighter"));var A=o.arrowhead,T=h!==E;if(f&&T&&f.unhighlight(g,{connecting:!0,snapping:!0}),S){const{prevEnd:I,prevX:q,prevY:p}=o;if(o.prevX=t,o.prevY=r,a=!0,!T&&(typeof s!="function"||q===t&&p===r)||(_=S.getLinkEnd(E,t,r,this.model,A),!T&&al(I,_)))return a;o.prevEnd=_,T&&S.highlight(b,{connecting:!0,snapping:!0})}else _={x:t,y:r};return this.model.set(A,_||{x:t,y:r},{ui:!0}),f&&this.notify("link:snap:disconnect",e,f,h,A),S&&this.notify("link:snap:connect",e,S,E,A),a},_snapArrowheadEnd:function(e){var t=e.closestView,r=e.closestMagnet;t&&r&&(t.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=t.findMagnet(r)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,t,r,n){const{paper:i,model:s}=this;if(n.eventTarget!==e){n.magnetProxy&&n.viewUnderPointer.unhighlight(n.magnetProxy,{connecting:!0});const o=n.viewUnderPointer=i.findView(e);if(o){const a=n.magnetUnderPointer=o.findMagnet(e),u=n.magnetProxy=o.findProxyNode(a,"highlighter");a&&this.paper.options.validateConnection.apply(i,n.validateConnectionArgs(o,a))?u&&o.highlight(u,{connecting:!0}):(n.magnetUnderPointer=null,n.magnetProxy=null)}else n.magnetUnderPointer=null,n.magnetProxy=null}n.eventTarget=e,s.set(n.arrowhead,{x:t,y:r},{ui:!0})},_connectArrowheadEnd:function(e={},t,r){const{model:n}=this,{viewUnderPointer:i,magnetUnderPointer:s,magnetProxy:o,arrowhead:a}=e;if(!s||!o||!i)return;i.unhighlight(o,{connecting:!0});const u=i.getLinkEnd(s,t,r,n,a);n.set(a,u,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var t=this.el.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){e.z!==null&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var t=[];t[4]=e,t[5]=this;var r,n=0,i=0;e==="source"?(n=2,r="target"):(i=2,r="source");var s=this.model.get(r);if(s.id){var o=t[n]=this.paper.findViewByModel(s.id),a=o.getMagnetFromLinkEnd(s);a===o.el&&(a=void 0),t[n+1]=a}function u(c,f){return t[i]=c,t[i+1]=c.el===f?void 0:f,t}return u},_markAvailableMagnets:function(e){function t(h,g){var y=h.paper,m=y.options.validateConnection;return m.apply(y,this.validateConnectionArgs(h,g))}var r=this.paper,n=r.model.getCells();e.marked={};for(var i=0,s=n.length;i<s;i++){var o=n[i].findView(r);if(o){var a=Array.prototype.slice.call(o.el.querySelectorAll("[magnet]"));o.el.getAttribute("magnet")!=="false"&&a.push(o.el);var u=a.filter(t.bind(e,o));if(u.length>0){for(var c=0,f=u.length;c<f;c++)o.highlight(u[c],{magnetAvailability:!0});o.highlight(null,{elementAvailability:!0}),e.marked[o.model.id]=u}}}},_unmarkAvailableMagnets:function(e){for(var t=Object.keys(e.marked),r,n,i=0,s=t.length;i<s;i++){r=t[i],n=e.marked[r];var o=this.paper.findViewByModel(r);if(o){for(var a=0,u=n.length;a<u;a++)o.unhighlight(n[a],{magnetAvailability:!0});o.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,t){t||(t={});var r={action:"arrowhead-move",arrowhead:e,whenNotAllowed:t.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:Qo(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(r),t.ignoreBackwardsCompatibility!==!0&&(this._dragData=r),r},onMount:function(){wr.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){wr.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){wr.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:er});Object.defineProperty(ji.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var t=this.model.source();return new vt(t.x,t.y)}var r=this.sourceMagnet;return e.isNodeConnection(r)?new vt(this.sourceAnchor):e.getNodeBBox(r||e.el)}});Object.defineProperty(ji.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var t=this.model.target();return new vt(t.x,t.y)}var r=this.targetMagnet;return e.isNodeConnection(r)?new vt(this.targetAnchor):e.getNodeBBox(r||e.el)}});const zde=Eo.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,t){const{options:r}=this,{useFirstSubpath:n}=r;let i;try{const s=$e(t);if(i=s.convertToPathData().trim(),s.tagName()==="PATH"&&n){const o=i.search(/.M/i)+1;o>0&&(i=i.substr(0,o))}}catch{const o=e.getNodeBoundingRect(t);i=$e.rectToPath(Ut({},r,o.toJSON()))}return i},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,t){const{vel:r,options:n}=this,{padding:i,layer:s}=n;let o=this.getNodeMatrix(e,t);if(i){!s&&t===e.el&&r.remove();let a=e.getNodeBoundingRect(t);const u=a.x+a.width/2,c=a.y+a.height/2;a=$e.transformRect(a,o);const f=Math.max(a.width,1),h=Math.max(a.height,1),g=(f+i)/f,y=(h+i)/h,m=$e.createSVGMatrix({a:g,b:0,c:0,d:y,e:u-g*u,f:c-y*c});o=o.multiply(m)}r.attr({d:this.getPathData(e,t),transform:$e.matrixToTransformString(o)})},highlight(e,t){const{vel:r,options:n}=this;r.attr(n.attrs),e.isNodeConnection(t)?this.highlightConnection(e):this.highlightNode(e,t)}}),U5=20;function Vde(e,t){const r=e.children();for(;r.length>0;){const n=r.shift();t(n)&&r.push(...n.children())}}const Gde=Eo.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:U5,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,t){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:r,MASK_REPLACE_TAGS:n,MASK_REMOVE_TAGS:i}=this,s=t.tagName();if(!$e.isSVGGraphicsElement(t)||i.includes(s))return t.remove(),!1;if(n.includes(s)){const o=e.vel.findOne(`#${t.id}`);if(o){const{node:a}=o;let u=e.getNodeBoundingRect(a);e.model.isElement()&&(u=$e.transformRect(u,e.getNodeMatrix(a)));const c=$e("rect",u.toJSON()),{x:f,y:h}=u.center(),{angle:g,cx:y=f,cy:m=h}=o.rotate();g&&c.rotate(g,y,m),t.parent().append(c)}return t.remove(),!1}return r.forEach(o=>{o==="fill"&&t.attr("fill")==="none"||t.removeAttr(o)}),!0},transformMaskRoot(e,t){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:r}=this;r.forEach(n=>{t.removeAttr(n)})},getMaskShape(e,t){const{options:r,MASK_REPLACE_TAGS:n}=this,{deep:i}=r,s=t.tagName();let o;if(s==="G"){if(!i)return null;o=t.clone(),Vde(o,a=>this.transformMaskChild(e,a))}else{if(n.includes(s))return null;o=t.clone()}return this.transformMaskRoot(e,o),o},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,t){const{VISIBLE:r,INVISIBLE:n,options:i}=this,{padding:s,attrs:o}=i,a="stroke-width"in o?o["stroke-width"]:1,u=t.attr("fill")!=="none";let c=parseFloat(t.attr("stroke-width"));isNaN(c)&&(c=1);const f=c+s*2,h=f+a*2;let g=this.getMaskShape(e,t);if(!g){const y=e.getNodeBoundingRect(t.node);y.inflate(y.width?0:.5,y.height?0:.5),g=$e("rect",y.toJSON())}return g.attr(o),$e("mask",{id:this.getMaskId()}).append([g.clone().attr({fill:u?r:"none",stroke:r,"stroke-width":h}),g.clone().attr({fill:u?n:"none",stroke:n,"stroke-width":f})])},removeMask(e){const t=e.svg.getElementById(this.getMaskId());t&&e.defs.removeChild(t)},addMask(e,t){e.defs.appendChild(t.node)},highlight(e,t){const{options:r,vel:n}=this,{padding:i,attrs:s,maskClip:o=U5,layer:a}=r,u="stroke"in s?s.stroke:"#000000";!a&&t===e.el&&n.remove();const c=e.getNodeBoundingRect(t).inflate(i+o),f=this.getNodeMatrix(e,t),h=this.getMask(e,$e(t));this.addMask(e.paper,h),n.attr(c.toJSON()),n.attr({transform:$e.matrixToTransformString(f),mask:`url(#${h.id})`,fill:u})},unhighlight(e){this.removeMask(e.paper)}}),$de=Eo.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:So("highlight-opacity"),highlight:function(e,t){$e(t).addClass(this.opacityClassName)},unhighlight:function(e,t){$e(t).removeClass(this.opacityClassName)}}),j5=So("highlighted"),Ude=Eo.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:j5},highlight:function(e,t){$e(t).addClass(this.options.className)},unhighlight:function(e,t){$e(t).removeClass(this.options.className)}},{className:j5}),LS={ROW:"row",COLUMN:"column"},jde=Eo.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(e,t){const r=e.model,{attribute:n,size:i=20,gap:s=5,direction:o=LS.ROW}=this.options;if(!n)throw new Error("List: attribute is required");const a=typeof i=="number"?{width:i,height:i}:i,u=o===LS.ROW,c=u?a.width:a.height;let f=r.get(n);Array.isArray(f)||(f=[]);const h=this._prevItems||[],g=f.map((b,S)=>al(h[S],f[S]));if(h.length!==f.length||g.some(b=>!b)){const b=this.vel.children(),S=f.map((E,A)=>{const T=A in b?b[A].node:null;if(g[A])return T;const I=this.createListItem(E,a,T);if(!I)return null;if(!(I instanceof SVGElement))throw new Error("List: item must be an SVGElement");I.dataset.index=A,I.dataset.attribute=n;const q=A*(c+s);return I.setAttribute("transform",u?`translate(${q}, 0)`:`translate(0, ${q})`),I});this.vel.empty().append(S),this._prevItems=f}const y=f.length,m=y===0?0:y*c+(y-1)*s,_=u?{width:m,height:a.height}:{width:a.width,height:m};this.position(r,_)},position(e,t){const{vel:r,options:n}=this,{margin:i=5,position:s="top-left"}=n,{width:o,height:a}=e.size(),{left:u,right:c,top:f,bottom:h}=lc(i),g=new vt(u,f,o-(u+c),a-(f+h));let{x:y,y:m}=$U(g,s);switch(s){case Vn.CENTER:case Vn.TOP:case Vn.BOTTOM:{y-=t.width/2;break}case Vn.RIGHT:case Vn.BOTTOM_RIGHT:case Vn.TOP_RIGHT:{y-=t.width;break}}switch(s){case Vn.CENTER:case Vn.RIGHT:case Vn.LEFT:{m-=t.height/2;break}case Vn.BOTTOM:case Vn.BOTTOM_RIGHT:case Vn.BOTTOM_LEFT:{m-=t.height;break}}r.attr("transform",`translate(${y}, ${m})`)}},{Directions:LS,Positions:Vn}),Hde=Object.freeze(Object.defineProperty({__proto__:null,addClass:Ude,list:jde,mask:Gde,opacity:$de,stroke:zde},Symbol.toStringTag,{value:"Module"}));function Wde(e,t,r,n){var i="ratio"in n?n.ratio:.5;return e.getPointAtRatio(i)}function Xde(e,t,r,n){var i="length"in n?n.length:20;return e.getPointAtLength(i)}function Yde(e,t,r,n){var i=1e6,s=e.getConnection(),o=e.getConnectionSubdivisions(),a=new bt(r.clone().offset(0,i),r.clone().offset(0,-1e6)),u=new bt(r.clone().offset(i,0),r.clone().offset(-1e6,0)),c=a.intersect(s,{segmentSubdivisions:o}),f=u.intersect(s,{segmentSubdivisions:o}),h=[];return c&&Array.prototype.push.apply(h,c),f&&Array.prototype.push.apply(h,f),h.length>0?r.chooseClosest(h):"fallbackAt"in n?sj(e,n.fallbackAt):oj(e,t,r,n)}function Kde(e,t,r,n){var i=e.getClosestPoint(r);return i||new pe}function Hh(e){return function(t,r,n,i){if(n instanceof Element){var s=this.paper.findView(n),o;if(s)if(s.isNodeConnection(n)){var a="fixedAt"in i?i.fixedAt:"50%";o=sj(s,a)}else o=s.getNodeBBox(n).center();else o=new pe;return e.call(this,t,r,o,i)}return e.apply(this,arguments)}}function sj(e,t){var r=parseFloat(t);return Ai(t)?e.getPointAtRatio(r/100):e.getPointAtLength(r)}const Zde=Hh(Yde),oj=Hh(Kde),Jde=Object.freeze(Object.defineProperty({__proto__:null,connectionClosest:oj,connectionLength:Xde,connectionPerpendicular:Zde,connectionRatio:Wde,resolveRef:Hh},Symbol.toStringTag,{value:"Module"}));function ov(e,t,r){if(Kn(r)){const{x:i,y:s}=r;if(isFinite(s)){const o=new bt(t,e),{start:a,end:u}=o.parallel(s);t=a,e=u}r=i}if(!isFinite(r))return e;var n=e.distance(t);return r===0&&n>0?e:e.move(t,-Math.min(r,n-1))}function YA(e){var t=e.getAttribute("stroke-width");return t===null?0:parseFloat(t)||0}function Qde(e,t,r=0){let n,i,s,o;const{start:a,end:u}=e;switch(t){case"left":n="x",i=u,s=a,o=-1;break;case"right":n="x",i=a,s=u,o=1;break;case"top":n="y",i=u,s=a,o=-1;break;case"bottom":n="y",i=a,s=u,o=1;break;default:return}a[n]<u[n]?i[n]=s[n]:s[n]=i[n],isFinite(r)&&(i[n]+=o*r,s[n]+=o*r)}function epe(e,t,r,n){let{offset:i,alignOffset:s,align:o}=n;return o&&Qde(e,o,s),ov(e.end,e.start,i)}function aj(e,t,r,n){var i=t.getNodeBBox(r);n.stroke&&i.inflate(YA(r)/2);var s=e.intersect(i),o=s?e.start.chooseClosest(s):e.end;return ov(o,e.start,n.offset)}function tpe(e,t,r,n){var i=t.model.angle();if(i===0)return aj(e,t,r,n);var s=t.getNodeUnrotatedBBox(r);n.stroke&&s.inflate(YA(r)/2);var o=s.center(),a=e.clone().rotate(o,i),u=a.setLength(1e6).intersect(s),c=u?a.start.chooseClosest(u).rotate(o,-i):e.end;return ov(c,e.start,n.offset)}function rpe(e){if(!e)return null;var t=e;do{var r=t.tagName;if(typeof r!="string")return null;if(r=r.toUpperCase(),r==="G")t=t.firstElementChild;else if(r==="TITLE")t=t.nextElementSibling;else break}while(t);return t}var NS="segmentSubdivisons",qS="shapeBBox";function npe(e,t,r,n){var i,s,o=n.selector,a=e.end;if(typeof o=="string"?i=t.findBySelector(o)[0]:o===!1?i=r:Array.isArray(o)?i=ph(r,o):i=rpe(r),!$e.isSVGGraphicsElement(i)){if(i===r||!$e.isSVGGraphicsElement(r))return a;i=r}var u=t.getNodeShape(i),c=t.getNodeMatrix(i),f=t.getRootTranslateMatrix(),h=t.getRootRotateMatrix(),g=f.multiply(h).multiply(c),y=g.inverse(),m=$e.transformLine(e,y),_=m.start.clone(),b=t.getNodeData(i);if(n.insideout===!1){b[qS]||(b[qS]=u.bbox());var S=b[qS];if(S.containsPoint(_))return a}var E;if(u instanceof Nt){var A=n.precision||2;b[NS]||(b[NS]=u.getSegmentSubdivisions({precision:A})),E={precision:A,segmentSubdivisions:b[NS]}}n.extrapolate===!0&&m.setLength(1e6),s=m.intersect(u,E),s?$e.isArray(s)&&(s=_.chooseClosest(s)):n.sticky===!0&&(u instanceof vt?s=u.pointNearestToPoint(_):u instanceof Xi?s=u.intersectionWithLineFromCenterToPoint(_):s=u.closestPoint(_,E));var T=s?$e.transformPoint(s,g):a,I=n.offset||0;return n.stroke&&(I+=YA(i)/2),ov(T,e.start,I)}const ipe=epe,spe=aj,ope=tpe,ape=npe,upe=Object.freeze(Object.defineProperty({__proto__:null,anchor:ipe,bbox:spe,boundary:ape,rectangle:ope},Symbol.toStringTag,{value:"Module"}));function Ya(e){return function(t,r,n,i){var s=!!i.rotate,o=s?t.getNodeUnrotatedBBox(r):t.getNodeBBox(r),a=o[e](),u=i.dx;if(u){var c=Ai(u);u=parseFloat(u),isFinite(u)&&(c&&(u/=100,u*=o.width),a.x+=u)}var f=i.dy;if(f){var h=Ai(f);f=parseFloat(f),isFinite(f)&&(h&&(f/=100,f*=o.height),a.y+=f)}return s?a.rotate(t.model.getBBox().center(),-t.model.angle()):a}}function cpe(e,t,r,n){var i=e.model.angle(),s=e.getNodeBBox(t),o=s.center(),a=s.origin(),u=s.corner(),c=n.padding;if(isFinite(c)||(c=0),a.y+c<=r.y&&r.y<=u.y-c){var f=r.y-o.y;o.x+=i===0||i===180?0:f*1/Math.tan(vs(i)),o.y+=f}else if(a.x+c<=r.x&&r.x<=u.x-c){var h=r.x-o.x;o.y+=i===90||i===270?0:h*Math.tan(vs(i)),o.x+=h}return o}function lpe(e,t,r,n){var i=!!n.rotate,s,o,a;i?(s=e.getNodeUnrotatedBBox(t),a=e.model.getBBox().center(),o=e.model.angle()):s=e.getNodeBBox(t);var u=n.padding;isFinite(u)&&s.inflate(u),i&&r.rotate(a,o);var c=s.sideNearestToPoint(r),f;switch(c){case"left":f=s.leftMiddle();break;case"right":f=s.rightMiddle();break;case"top":f=s.topMiddle();break;case"bottom":f=s.bottomMiddle();break}return i?f.rotate(a,-o):f}function fpe(e,t,r,n,i){return e.model.getPointFromConnectedLink(this.model,i).offset(n.dx,n.dy)}const hpe=Ya("center"),dpe=Ya("topMiddle"),ppe=Ya("bottomMiddle"),gpe=Ya("leftMiddle"),vpe=Ya("rightMiddle"),mpe=Ya("origin"),ype=Ya("topRight"),_pe=Ya("bottomLeft"),bpe=Ya("corner"),wpe=Hh(cpe),xpe=Hh(lpe),Spe=fpe,Epe=Object.freeze(Object.defineProperty({__proto__:null,bottom:ppe,bottomLeft:_pe,bottomRight:bpe,center:hpe,left:gpe,midSide:xpe,modelCenter:Spe,perpendicular:wpe,right:vpe,top:dpe,topLeft:mpe,topRight:ype},Symbol.toStringTag,{value:"Module"})),tl={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},Ape=50,H5=20,W5=1e3,Tpe=1/0,lp=9007199254740991,DS=wr.Highlighting,X5={[DS.DEFAULT]:{name:"stroke",options:{padding:3}},[DS.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[DS.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},Ppe=[{name:Js.BACK},{name:Js.CELLS},{name:Js.LABELS},{name:Js.FRONT},{name:Js.TOOLS}],uj=Va.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,perpendicularLinks:!1,elementView:_i,linkView:ji,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,t){return!1},highlighting:X5,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new Kl,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(e,t,r){return t.getAttribute("magnet")!=="passive"},validateConnection:function(e,t,r,n,i,s){return(i==="target"?r:e)instanceof _i},embeddingMode:!1,validateEmbedding:function(e,t){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:tl.EXACT,frozen:!1,autoFreeze:!1,onViewUpdate:function(e,t,r,n,i){t&(e.FLAG_INSERT|e.FLAG_REMOVE)||n.mounting||n.isolate||i.requestConnectedLinksUpdate(e,r,n)},onViewPostponed:function(e,t,r){return r.forcePostponedViewUpdate(e,t)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:Hde,anchorNamespace:Epe,linkAnchorNamespace:Jde,connectionPointNamespace:upe,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,init:function(){const{options:e,el:t}=this;e.cellViewNamespace||(e.cellViewNamespace=typeof joint<"u"&&Fa(joint,"shapes")?joint.shapes:null);const r=this.model=e.model||new Po;this._layers={},this.setGrid(e.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.$document=It(t.ownerDocument),this.resetViews(r.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(e,t,r){var n=r.position;this.isAsync()||!fs(n)?this.renderView(e,r):(r.maxPosition===n&&this.freeze({key:"addCells"}),this.renderView(e,r),n===0&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,t,r){const n=this.findViewByModel(e);n&&this.requestViewUpdate(n,n.FLAG_REMOVE,n.UPDATE_PRIORITY,r)},onCellChange:function(e,t){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===tl.APPROX){const r=this.findViewByModel(e);r&&this.requestViewUpdate(r,r.FLAG_INSERT,r.UPDATE_PRIORITY,t)}},onGraphReset:function(e,t){this.resetLayers(),this.resetViews(e.models,t)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var t=e&&e.batchName,r=this.model;if(!this.isAsync()){var n=this.UPDATE_DELAYING_BATCHES;n.includes(t)&&!r.hasActiveBatch(n)&&this.updateViews(e)}var i=this.SORT_DELAYING_BATCHES;i.includes(t)&&!r.hasActiveBatch(i)&&this.sortViews()}},cloneOptions:function(){const{options:e}=this,{defaultConnector:t,defaultRouter:r,defaultConnectionPoint:n,defaultAnchor:i,defaultLinkAnchor:s,origin:o,highlighting:a,cellViewNamespace:u,interactive:c}=e;!u&&typeof joint<"u"&&Fa(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),fn(t)||(e.defaultConnector=Ks(t)),fn(r)||(e.defaultRouter=Ks(r)),fn(n)||(e.defaultConnectionPoint=Ks(n)),fn(i)||(e.defaultAnchor=Ks(i)),fn(s)||(e.defaultLinkAnchor=Ks(s)),Kn(c)&&(e.interactive=Ut({},c)),Kn(a)&&(e.highlighting=UA({},a,X5)),e.origin=Ut({},o)},children:function(){var e=$e.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:So("paper-background"),selector:"background"},{namespaceURI:e.xhtml,tagName:"div",className:So("paper-grid"),selector:"grid"},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:So("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){const{_layers:t}=this;if(e in t)return t[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();const{childNodes:e,options:t}=this,{svg:r,defs:n,layers:i,background:s,grid:o}=e;return r.style.overflow=t.overflow?"visible":"hidden",this.svg=r,this.defs=n,this.layers=i,this.$background=It(s),this.$grid=It(o),this.renderLayers(),$e.ensureId(r),t.background&&this.drawBackground(t.background),t.drawGrid&&this.drawGrid(),this},renderLayers:function(e=Ppe){this.removeLayers(),e.forEach(({name:i,sorted:s})=>{const o=new qhe({name:i});this.layers.appendChild(o.el),this._layers[i]=o});const t=this.getLayerView(Js.CELLS),r=this.getLayerView(Js.TOOLS),n=this.getLayerView(Js.LABELS);this.tools=r.el,this.cells=this.viewport=t.el,t.vel.addClass(So("viewport")),n.vel.addClass(So("viewport"))},removeLayers:function(){const{_layers:e}=this;Object.keys(e).forEach(t=>{e[t].remove(),delete e[t]})},resetLayers:function(){const{_layers:e}=this;Object.keys(e).forEach(t=>{e[t].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(e){var t=this.layers;if(e===void 0){var r=t.getAttribute("transform");return(this._viewportTransformString||null)===r?e=this._viewportMatrix:(e=t.getCTM(),this._viewportMatrix=e,this._viewportTransformString=r),$e.createSVGMatrix(e)}e=$e.createSVGMatrix(e);var n=$e.matrixToTransformString(e);return t.setAttribute("transform",n),this._viewportMatrix=e,this._viewportTransformString=t.getAttribute("transform"),this},clientMatrix:function(){return $e.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,t,r){if(e instanceof wr)for(var n=e.model,i=this.model.getConnectedLinks(n),s=0,o=i.length;s<o;s++){var a=i[s],u=this.findViewByModel(a);if(u){var c=["UPDATE"];a.getTargetCell()===n&&c.push("TARGET"),a.getSourceCell()===n&&c.push("SOURCE");var f=Math.max(t+1,u.UPDATE_PRIORITY);this.scheduleViewUpdate(u,u.getFlag(c),f,r)}}},forcePostponedViewUpdate:function(e,t){if(!e||!(e instanceof wr))return!1;var r=e.model;if(r.isElement())return!1;if((t&e.getFlag(["SOURCE","TARGET"]))===0){var n={silent:!0},i=0,s=this.findViewByModel(r.getSourceCell());s&&!this.isViewMounted(s)&&(i=this.dumpView(s,n),e.updateEndMagnet("source"));var o=0,a=this.findViewByModel(r.getTargetCell());if(a&&!this.isViewMounted(a)&&(o=this.dumpView(a,n),e.updateEndMagnet("target")),i===0&&o===0)return!this.dumpView(e,n)}return!1},requestViewUpdate:function(e,t,r,n){n||(n={}),this.scheduleViewUpdate(e,t,r,n);var i=this.isAsync();if(!(this.isFrozen()||i&&n.async!==!1)&&!this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES)){var s=this.updateViews(n);i&&this.notifyAfterRender(s,n)}},scheduleViewUpdate:function(e,t,r,n){const{_updates:i,options:s}=this;i.idle&&s.autoFreeze&&(i.idle=!1,this.unfreeze());const{FLAG_REMOVE:o,FLAG_INSERT:a,UPDATE_PRIORITY:u,cid:c}=e;let f=i.priorities[r];if(f||(f=i.priorities[r]={}),r>u)for(let y=r-1;y>=u;y--){const m=i.priorities[y];!m||!(c in m)||(f[c]|=m[c],delete m[c])}let h=f[c]||0;if((h&t)===t)return;h||i.count++,t&o&&h&a?f[c]^=a:t&a&&h&o&&(f[c]^=o),f[c]|=t;const g=s.onViewUpdate;typeof g=="function"&&g.call(this,e,t,r,n||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var t=this._updates,r=e.cid,n=t.priorities[e.UPDATE_PRIORITY],i=this.registerMountedView(e)|n[r];return delete n[r],i},dumpView:function(e,t={}){const r=this.dumpViewUpdate(e);if(!r)return 0;const n=!t.silent;n&&this.notifyBeforeRender(t);const i=this.updateView(e,r,t);if(n){const s={updated:1,priority:e.UPDATE_PRIORITY};this.notifyAfterRender(s,t)}return i},updateView:function(e,t,r){if(!e)return 0;const{FLAG_REMOVE:n,FLAG_INSERT:i,FLAG_INIT:s,model:o}=e;if(e instanceof wr){if(t&n)return this.removeView(o),0;if(t&i){const a=!!(t&s);a&&(t^=s),this.insertView(e,a),t^=i}}return t?e.confirmUpdate(t,r||{}):0},requireView:function(e,t){var r=this.findViewByModel(e);return r?(this.dumpView(r,t),r):null},registerUnmountedView:function(e){var t=e.cid,r=this._updates;if(t in r.unmounted)return 0;var n=r.unmounted[t]|=e.FLAG_INSERT;return r.unmountedCids.push(t),delete r.mounted[t],n},registerMountedView:function(e){var t=e.cid,r=this._updates;if(t in r.mounted)return 0;r.mounted[t]=!0,r.mountedCids.push(t);var n=r.unmounted[t]||0;return delete r.unmounted[t],n},isViewMounted:function(e){if(!e)return!1;var t=e.cid,r=this._updates;return t in r.mounted},dumpViews:function(e){var t=Ms({},e,{viewport:null});this.checkViewport(t),this.updateViews(t)},updateViews:function(e){this.notifyBeforeRender(e);let t,r=0,n=0,i=lp;do n++,t=this.updateViewsBatch(e),r+=t.updated,i=Math.min(t.priority,i);while(!t.empty);const s={updated:r,batches:n,priority:i};return this.notifyAfterRender(s,e),s},hasScheduledUpdates:function(){const e=this._updates.priorities,t=Object.keys(e);let r=t.length;for(;r>0&&r--;)for(let n in e[t[r]])return!0;return!1},updateViewsAsync:function(e,t){e||(e={}),t||(t={processed:0,priority:lp});const{_updates:r,options:n}=this,i=r.id;if(i){lE(i),t.processed===0&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);const s=this.updateViewsBatch(e),o=Ms({},e,{mountBatchSize:W5-s.mounted,unmountBatchSize:W5-s.unmounted}),a=this.checkViewport(o),u=a.unmounted,c=a.mounted;let f=t.processed;const h=r.count;s.updated>0?(f+=s.updated+s.unmounted,s.processed=f,t.priority=Math.min(s.priority,t.priority),s.empty&&c===0?(s.unmounted+=u,s.mounted+=c,s.priority=t.priority,this.notifyAfterRender(s,e),t.processed=0,t.priority=lp,r.count=0):t.processed=f):r.idle||n.autoFreeze&&(this.freeze(),r.idle=!0,this.trigger("render:idle",e));const g=e.progress;if(h&&typeof g=="function"&&g.call(this,s.empty,f,h,s,this),r.id!==i)return}if(r.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");r.id=cE(this.updateViewsAsync,this,e,t)},notifyBeforeRender:function(e={}){let t=e.beforeRender;typeof t!="function"&&(t=this.options.beforeRender,typeof t!="function")||t.call(this,e,this)},notifyAfterRender:function(e,t={}){let r=t.afterRender;typeof r!="function"&&(r=this.options.afterRender),typeof r=="function"&&r.call(this,e,t,this),this.trigger("render:done",e,t)},updateViewsBatch:function(e){e||(e={});var t=e.batchSize||Tpe,r=this._updates,n=0,i=0,s=0,o=0,a=lp,u=!0,c=this.options,f=r.priorities,h="viewport"in e?e.viewport:c.viewport;typeof h!="function"&&(h=null);var g=c.onViewPostponed;typeof g!="function"&&(g=null);var y=Object.keys(f);e:for(var m=0,_=y.length;m<_;m++){var b=+y[m],S=f[b];for(var E in S){if(n>=t){u=!1;break e}var A=Ku[E];if(!A){delete S[E];continue}var T=S[E];if((T&A.FLAG_REMOVE)===0){var I=E in r.unmounted;if(A.DETACHABLE&&h&&!h.call(this,A,!I,this)){I||(this.registerUnmountedView(A),this.detachView(A)),r.unmounted[E]|=T,delete S[E],s++;continue}I&&(T|=A.FLAG_INSERT,o++),T|=this.registerMountedView(A)}var q=this.updateView(A,T,e);if(q>0&&(S[E]=q,!g||!g.call(this,A,q,this)||S[E])){i++,u=!1;continue}a>b&&(a=b),n++,delete S[E]}}return{priority:a,updated:n,postponed:i,unmounted:s,mounted:o,empty:u}},getUnmountedViews:function(){const e=this._updates,t=Object.keys(e.unmounted),r=t.length,n=new Array(r);for(var i=0;i<r;i++)n[i]=Ku[t[i]];return n},getMountedViews:function(){const e=this._updates,t=Object.keys(e.mounted),r=t.length,n=new Array(r);for(var i=0;i<r;i++)n[i]=Ku[t[i]];return n},checkUnmountedViews:function(e,t){t||(t={});var r=0;typeof e!="function"&&(e=null);for(var n=("mountBatchSize"in t)?t.mountBatchSize:1/0,i=this._updates,s=i.unmountedCids,o=i.unmounted,a=0,u=Math.min(s.length,n);a<u;a++){var c=s[a];if(c in o){var f=Ku[c];if(f){if(f.DETACHABLE&&e&&!e.call(this,f,!1,this)){s.push(c);continue}r++;var h=this.registerMountedView(f);h&&this.scheduleViewUpdate(f,h,f.UPDATE_PRIORITY,{mounting:!0})}}}return s.splice(0,a),r},checkMountedViews:function(e,t){t||(t={});var r=0;if(typeof e!="function")return r;for(var n=("unmountBatchSize"in t)?t.unmountBatchSize:1/0,i=this._updates,s=i.mountedCids,o=i.mounted,a=0,u=Math.min(s.length,n);a<u;a++){var c=s[a];if(c in o){var f=Ku[c];if(f){if(!f.DETACHABLE||e.call(this,f,!0,this)){s.push(c);continue}r++;var h=this.registerUnmountedView(f);h&&this.detachView(f)}}}return s.splice(0,a),r},checkViewVisibility:function(e,t={}){let r="viewport"in t?t.viewport:this.options.viewport;typeof r!="function"&&(r=null);const n=this._updates,{mounted:i,unmounted:s}=n,o=!e.DETACHABLE||!r||r.call(this,e,!1,this);let a=!1,u=!1;if(e.cid in i&&!o){this.registerUnmountedView(e)&&this.detachView(e);const h=n.mountedCids.indexOf(e.cid);n.mountedCids.splice(h,1),a=!0}if(!a&&e.cid in s&&o){const f=n.unmountedCids.indexOf(e.cid);n.unmountedCids.splice(f,1);var c=this.registerMountedView(e);c&&this.scheduleViewUpdate(e,c,e.UPDATE_PRIORITY,{mounting:!0}),u=!0}return{mounted:u?1:0,unmounted:a?1:0}},checkViewport:function(e){var t=Ms({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),r="viewport"in t?t.viewport:this.options.viewport,n=this.checkMountedViews(r,t);if(n>0){var i=this._updates.unmountedCids;t.mountBatchSize=Math.min(i.length-n,t.mountBatchSize)}var s=this.checkUnmountedViews(r,t);return{mounted:s,unmounted:n}},freeze:function(e){e||(e={});var t=this._updates,r=e.key,n=this.options.frozen,i=t.freezeKey;if(r&&r!==i){if(n&&i)return;t.freezeKey=r,t.keyFrozen=n}this.options.frozen=!0;var s=t.id;t.id=null,this.isAsync()&&s&&lE(s)},unfreeze:function(e){e||(e={});var t=this._updates,r=e.key,n=t.freezeKey;r&&n&&r!==n||(t.freezeKey=null,!(r&&r===n&&t.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=t.keyFrozen=!1,t.sort&&(this.sortViews(),t.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===tl.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,t=e.width,r=e.height;return fs(t)||(t=this.el.clientWidth),fs(r)||(r=this.el.clientHeight),{width:t,height:r}},setDimensions:function(e,t){const{options:r}=this,{width:n,height:i}=r;let s=e===void 0?n:e,o=t===void 0?i:t;if(n===s&&i===o)return;r.width=s,r.height=o,this._setDimensions();const a=this.getComputedSize();this.trigger("resize",a.width,a.height)},_setDimensions:function(){const{options:e}=this;let t=e.width,r=e.height;fs(t)&&(t=Math.round(t)),fs(r)&&(r=Math.round(r)),this.$el.css({width:t===null?"":t,height:r===null?"":r})},setOrigin:function(e,t){return this.translate(e||0,t||0)},fitToContent:function(e,t,r,n){Wr(e)?n=e:n=Ut({gridWidth:e,gridHeight:t,padding:r},n);const{x:i,y:s,width:o,height:a}=this.getFitToContentArea(n),{sx:u,sy:c}=this.scale();return this.setOrigin(-i*u,-s*c),this.setDimensions(o*u,a*c),new vt(i,s,o,a)},getFitToContentArea:function(e={}){const t=e.gridWidth||1,r=e.gridHeight||1,n=lc(e.padding||0),i=Math.max(e.minWidth||0,t),s=Math.max(e.minHeight||0,r),o=e.maxWidth||Number.MAX_VALUE,a=e.maxHeight||Number.MAX_VALUE,u=e.allowNewOrigin,c="contentArea"in e?new vt(e.contentArea):this.getContentArea(e),{sx:f,sy:h}=this.scale();c.x*=f,c.y*=h,c.width*=f,c.height*=h;let g=Math.ceil((c.width+c.x)/t),y=Math.ceil((c.height+c.y)/r);e.allowNegativeBottomRight||(g=Math.max(g,1),y=Math.max(y,1)),g*=t,y*=r;let m=0;(u==="negative"&&c.x<0||u==="positive"&&c.x>=0||u==="any")&&(m=Math.ceil(-c.x/t)*t,m+=n.left,g+=m);let _=0;return(u==="negative"&&c.y<0||u==="positive"&&c.y>=0||u==="any")&&(_=Math.ceil(-c.y/r)*r,_+=n.top,y+=_),g+=n.right,y+=n.bottom,g=Math.max(g,i),y=Math.max(y,s),g=Math.min(g,o),y=Math.min(y,a),new vt(-m/f,-_/h,g/f,y/h)},transformToFitContent:function(e){e||(e={});let t,r;if("contentArea"in e){const b=e.contentArea;t=this.localToPaperRect(b),r=new pe(b)}else t=this.getContentBBox(e),r=this.paperToLocalPoint(t);if(!t.width||!t.height)return;Ms(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});const n=lc(e.padding),i=e.minScaleX||e.minScale,s=e.maxScaleX||e.maxScale,o=e.minScaleY||e.minScale,a=e.maxScaleY||e.maxScale;let u;if(e.fittingBBox)u=e.fittingBBox;else{const b=this.translate(),S=this.getComputedSize();u={x:b.tx,y:b.ty,width:S.width,height:S.height}}u=new vt(u).moveAndExpand({x:n.left,y:n.top,width:-n.left-n.right,height:-n.top-n.bottom});const c=this.scale();let f=u.width/t.width*c.sx,h=u.height/t.height*c.sy;if(e.preserveAspectRatio&&(f=h=Math.min(f,h)),e.scaleGrid){const b=e.scaleGrid;f=b*Math.floor(f/b),h=b*Math.floor(h/b)}f=Math.min(s,Math.max(i,f)),h=Math.min(a,Math.max(o,h));const g={x:f/c.sx,y:h/c.sy},y=this.options.origin;let m=u.x-r.x*f-y.x,_=u.y-r.y*h-y.y;switch(e.verticalAlign){case"middle":_=_+(u.height-t.height*g.y)/2;break;case"bottom":_=_+(u.height-t.height*g.y);break}switch(e.horizontalAlign){case"middle":m=m+(u.width-t.width*g.x)/2;break;case"right":m=m+(u.width-t.width*g.x);break}this.scale(f,h),this.translate(m,_)},scaleContentToFit:function(e){this.transformToFitContent(e)},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new vt:$e(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){const{restrictTranslate:t}=this.options;let r;return fn(t)?r=t.apply(this,e):t===!0?r=this.getArea():t?r=new vt(t):r=null,r},createViewForModel:function(e){const{options:t}=this;var r,n,i=t.cellViewNamespace,s=e.get("type")+"View",o=ph(i,s,".");e.isLink()?(r=t.linkView,n=ji):(r=t.elementView,n=_i);var a=r.prototype instanceof Jn.View?o||r:r.call(this,e)||o||n;return new a({model:e,interactive:t.interactive,labelsLayer:t.labelsLayer===!0?Js.LABELS:t.labelsLayer})},removeView:function(e){const{id:t}=e,{_views:r,_updates:n}=this,i=r[t];if(i){var{cid:s}=i;const{mounted:o,unmounted:a}=n;i.remove(),delete r[t],delete o[s],delete a[s]}return i},renderView:function(e,t){const{id:r}=e,n=this._views;let i,s,o=!0;return r in n&&(i=n[r],i.model===e?(s=i.FLAG_INSERT,o=!1):this.removeView(e)),o&&(i=n[r]=this.createViewForModel(e),i.paper=this,s=this.registerUnmountedView(i)|this.FLAG_INIT|i.getFlag(Zn(i,"initFlag"))),this.requestViewUpdate(i,s,i.UPDATE_PRIORITY,t),i},onImageDragStart:function(){return!1},resetViews:function(e,t){t||(t={}),e||(e=[]),this._resetUpdates(),this.removeViews();const r=this.options.autoFreeze?null:"reset";this.freeze({key:r});for(var n=0,i=e.length;n<i;n++)this.renderView(e[n],t);this.unfreeze({key:r}),this.sortViews()},removeViews:function(){To(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen()){this._updates.sort=!0;return}this.sortViewsExact()}},sortViewsExact:function(){var e=It(this.cells).children("[model-id]"),t=this.model.get("cells");ihe(e,function(r,n){var i=t.get(r.getAttribute("model-id")),s=t.get(n.getAttribute("model-id")),o=i.attributes.z||0,a=s.attributes.z||0;return o===a?0:o<a?-1:1})},insertView:function(e,t){const r=this.getLayerView(Js.CELLS),{el:n,model:i}=e;switch(this.options.sorting){case tl.APPROX:r.insertSortedNode(n,i.get("z"));break;case tl.EXACT:default:r.insertNode(n);break}e.onMount(t)},detachView(e){e.unmount(),e.onDetach()},scale:function(e,t,r,n){if(e===void 0)return $e.matrixToScale(this.matrix());t===void 0&&(t=e),r===void 0&&(r=0,n=0);var i=this.translate();if(r||n||i.tx||i.ty){var s=i.tx-r*(e-1),o=i.ty-n*(t-1);this.translate(s,o)}e=Math.max(e||0,this.MIN_SCALE),t=Math.max(t||0,this.MIN_SCALE);var a=this.matrix();return a.a=e,a.d=t,this.matrix(a),this.trigger("scale",e,t,r,n),this},rotate:function(e,t,r){if(e===void 0)return $e.matrixToRotate(this.matrix());if(t===void 0){var n=this.cells.getBBox();t=n.width/2,r=n.height/2}var i=this.matrix().translate(t,r).rotate(e).translate(-t,-r);return this.matrix(i),this},translate:function(e,t){if(e===void 0)return $e.matrixToTranslate(this.matrix());const{options:r}=this,{origin:n,drawGrid:i}=r;e||(e=0),t||(t=0);const s=this.matrix();if(s.e===e&&s.f===t)return this;s.e=e,s.f=t,this.matrix(s);const{tx:o,ty:a}=this.translate();return n.x=o,n.y=a,this.trigger("translate",o,a),i&&this.drawGrid(),this},findView:function(e){var t=Mi(e)?this.cells.querySelector(e):e instanceof It?e[0]:e,r=this.findAttribute("model-id",t);if(r)return this._views[r]},findViewByModel:function(e){var t=Mi(e)||fs(e)?e:e&&e.id;return this._views[t]},findViewsFromPoint:function(e){e=new pe(e);var t=this.model.getElements().map(this.findViewByModel,this);return t.filter(function(r){return r&&r.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,t){t=Ms(t||{},{strict:!1}),e=new vt(e);var r=this.model.getElements().map(this.findViewByModel,this),n=t.strict?"containsRect":"intersect";return r.filter(function(i){return i&&e[n](i.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...t){typeof e=="string"&&this.trigger("tools:event",e,...t)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,t){return this.clientToLocalPoint(e,t).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,t){var r=new pe(e,t),n=$e.transformPoint(r,this.matrix());return n},localToPaperRect:function(e,t,r,n){var i=new vt(e,t,r,n),s=$e.transformRect(i,this.matrix());return s},paperToLocalPoint:function(e,t){var r=new pe(e,t),n=$e.transformPoint(r,this.matrix().inverse());return n},paperToLocalRect:function(e,t,r,n){var i=new vt(e,t,r,n),s=$e.transformRect(i,this.matrix().inverse());return s},localToClientPoint:function(e,t){var r=new pe(e,t),n=$e.transformPoint(r,this.clientMatrix());return n},localToClientRect:function(e,t,r,n){var i=new vt(e,t,r,n),s=$e.transformRect(i,this.clientMatrix());return s},clientToLocalPoint:function(e,t){var r=new pe(e,t),n=$e.transformPoint(r,this.clientMatrix().inverse());return n},clientToLocalRect:function(e,t,r,n){var i=new vt(e,t,r,n),s=$e.transformRect(i,this.clientMatrix().inverse());return s},localToPagePoint:function(e,t){return this.localToPaperPoint(e,t).offset(this.pageOffset())},localToPageRect:function(e,t,r,n){return this.localToPaperRect(e,t,r,n).offset(this.pageOffset())},pageToLocalPoint:function(e,t){var r=new pe(e,t),n=r.difference(this.pageOffset());return this.paperToLocalPoint(n)},pageToLocalRect:function(e,t,r,n){var i=this.pageOffset(),s=new vt(e,t,r,n);return s.x-=i.x,s.y-=i.y,this.paperToLocalRect(s)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new pe(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof ji))throw new Error("Must provide a linkView.");var t=e.model,r=this.options,n=this.model,i=n.constructor.validations;return!(!r.multiLinks&&!i.multiLinks.call(this,n,t)||!r.linkPinning&&!i.linkPinning.call(this,n,t)||typeof r.allowLink=="function"&&!r.allowLink.call(this,e,this))},getDefaultLink:function(e,t){return fn(this.options.defaultLink)?this.options.defaultLink.call(this,e,t):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:t,type:r}=e;const{highlighting:n,highlighterNamespace:i}=this.options;if(t===void 0){if(!n||r&&(t=n[r],t===!1))return!1;t||(t=n.default)}if(!t)return!1;Mi(t)&&(t={name:t});const s=t.name,o=i[s];if(!o)throw new Error('Unknown highlighter ("'+s+'")');if(typeof o.highlight!="function")throw new Error('Highlighter ("'+s+'") is missing required highlight() method');if(typeof o.unhighlight!="function")throw new Error('Highlighter ("'+s+'") is missing required unhighlight() method');return{highlighter:o,options:t.options||{},name:s}},onCellHighlight:function(e,t,r){const n=this.resolveHighlighter(r);if(!n)return;const{highlighter:i,options:s}=n;i.highlight(e,t,s)},onCellUnhighlight:function(e,t,r){const n=this.resolveHighlighter(r);if(!n)return;const{highlighter:i,options:s}=n;i.unhighlight(e,t,s)},pointerdblclick:function(e){e.preventDefault(),e=Yn(e);var t=this.findView(e.target);if(!this.guard(e,t)){var r=this.snapToGrid(e.clientX,e.clientY);t?t.pointerdblclick(e,r.x,r.y):this.trigger("blank:pointerdblclick",e,r.x,r.y)}},pointerclick:function(e){var t=this.eventData(e);if(t.mousemoved<=this.options.clickThreshold){e=Yn(e);var r=this.findView(e.target);if(this.guard(e,r))return;var n=this.snapToGrid(e.clientX,e.clientY);r?r.pointerclick(e,n.x,n.y):this.trigger("blank:pointerclick",e,n.x,n.y)}},contextmenu:function(e){if(this.options.preventContextMenu&&e.preventDefault(),this.contextMenuFired){this.contextMenuFired=!1;return}e=Yn(e),this.contextMenuTrigger(e)},contextMenuTrigger:function(e){var t=this.findView(e.target);if(!this.guard(e,t)){var r=this.snapToGrid(e.clientX,e.clientY);t?t.contextmenu(e,r.x,r.y):this.trigger("blank:contextmenu",e,r.x,r.y)}},pointerdown:function(e){e=Yn(e);const{target:t,button:r}=e,n=this.findView(t),i=r===2;if(n){if(!i&&this.guard(e,n))return;const s=this.FORM_CONTROL_TAG_NAMES.includes(t.tagName);this.options.preventDefaultViewAction&&!s&&e.preventDefault(),s&&n.preventDefaultInteraction(e);const o=this.customEventTrigger(e,n);if(o){if(o.isPropagationStopped())return;e.data=o.data}const a=t.closest("[magnet]");if(a&&n.el!==a&&n.el.contains(a)){const u=Yn(It.Event(e.originalEvent,{data:e.data,currentTarget:a}));if(this.onmagnet(u),u.isDefaultPrevented()&&e.preventDefault(),u.isPropagationStopped()){if(i)return;this.delegateDragEvents(n,u.data);return}e.data=u.data}}if(i){this.contextMenuFired=!0;const s=It.Event(e.originalEvent,{type:"contextmenu",data:e.data});this.contextMenuTrigger(s)}else{const s=this.snapToGrid(e.clientX,e.clientY);n?n.pointerdown(e,s.x,s.y):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,s.x,s.y)),this.delegateDragEvents(n,e.data)}},pointermove:function(e){var t=this.eventData(e);t.mousemoved||(t.mousemoved=0,this.undelegateEvents());var r=++t.mousemoved;if(!(r<=this.options.moveThreshold)){e=Yn(e);var n=this.snapToGrid(e.clientX,e.clientY),i=t.sourceView;i?i.pointermove(e,n.x,n.y):this.trigger("blank:pointermove",e,n.x,n.y),this.eventData(e,t)}},pointerup:function(e){this.undelegateDocumentEvents();var t=Yn(e),r=this.snapToGrid(t.clientX,t.clientY),n=this.eventData(e).sourceView;n?n.pointerup(t,r.x,r.y):this.trigger("blank:pointerup",t,r.x,r.y),t.isPropagationStopped()||this.pointerclick(It.Event(e.originalEvent,{type:"click",data:e.data})),this.delegateEvents()},mouseover:function(e){e=Yn(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=Yn(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=Yn(e);const{target:t,relatedTarget:r,currentTarget:n}=e,i=this.findView(t);if(this.guard(e,i))return;const s=this.findView(r);i&&(s===i||(i.mouseenter(e),this.el.contains(r)))||s||n===this.el&&this.trigger("paper:mouseenter",e)},mouseleave:function(e){e=Yn(e);const{target:t,relatedTarget:r,currentTarget:n}=e,i=this.findView(t);if(this.guard(e,i))return;const s=this.findView(r);i&&(s===i||(i.mouseleave(e),this.el.contains(r)))||s||n===this.el&&this.trigger("paper:mouseleave",e)},_processMouseWheelEvtBuf:Gfe(function(){const{event:e,deltas:t}=this._mw_evt_buffer,r=t.reduce((o,a)=>o+ehe(a,Ape),0),n=Math.pow(.995,r),{x:i,y:s}=this.clientToLocalPoint(e.clientX,e.clientY);this.trigger("paper:pinch",e,i,s,n),this._mw_evt_buffer={event:null,deltas:[]}},H5,{maxWait:H5}),mousewheel:function(e){e=Yn(e);const t=this.findView(e.target);if(this.guard(e,t))return;const r=e.originalEvent,n=this.snapToGrid(r.clientX,r.clientY),{deltaX:i,deltaY:s}=Qfe(r),o=this._events["paper:pinch"];if(e.ctrlKey&&o&&o.length>0)r.preventDefault(),this._mw_evt_buffer.event=r,this._mw_evt_buffer.deltas.push(s),this._processMouseWheelEvtBuf();else{const a=Math.max(-1,Math.min(1,r.wheelDelta));t?t.mousewheel(e,n.x,n.y,a):this.trigger("blank:mousewheel",e,n.x,n.y,a),this.trigger("paper:pan",e,i,s)}},onevent:function(e){var t=e.currentTarget,r=t.getAttribute("event");if(r){var n=this.findView(t);if(n){if(e=Yn(e),this.guard(e,n))return;var i=this.snapToGrid(e.clientX,e.clientY);n.onevent(e,r,i.x,i.y)}}},magnetEvent:function(e,t){var r=e.currentTarget,n=r.getAttribute("magnet");if(n){var i=this.findView(r);if(i){if(e=Yn(e),this.guard(e,i))return;var s=this.snapToGrid(e.clientX,e.clientY);t.call(this,i,e,r,s.x,s.y)}}},onmagnet:function(e){if(e.button===2){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;const t=It.Event(e.originalEvent,{type:"contextmenu",data:e.data,currentTarget:e.currentTarget});this.magnetContextMenuTrigger(t),t.isPropagationStopped()&&e.stopPropagation()}else this.magnetEvent(e,function(t,r,n,i,s){t.onmagnet(r,i,s)})},magnetpointerdblclick:function(e){this.magnetEvent(e,function(t,r,n,i,s){t.magnetpointerdblclick(r,n,i,s)})},magnetcontextmenu:function(e){if(this.options.preventContextMenu&&e.preventDefault(),this.magnetContextMenuFired){this.magnetContextMenuFired=!1;return}this.magnetContextMenuTrigger(e)},magnetContextMenuTrigger:function(e){this.magnetEvent(e,function(t,r,n,i,s){t.magnetcontextmenu(r,n,i,s)})},onlabel:function(e){var t=e.currentTarget,r=this.findView(t);if(!r||(e=Yn(e),this.guard(e,r)))return;const n=this.customEventTrigger(e,r,t);if(n){if(n.isPropagationStopped())return;e.data=n.data}var i=this.snapToGrid(e.clientX,e.clientY);r.onlabel(e,i.x,i.y)},getPointerArgs(e){const t=Yn(e),{x:r,y:n}=this.snapToGrid(t.clientX,t.clientY);return[t,r,n]},delegateDragEvents:function(e,t){t||(t={}),this.eventData({data:t},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,t)},guard:function(e,t){if(e.type==="mousedown"&&e.button===2||this.options.guard&&this.options.guard(e,t))return!0;if(e.data&&e.data.guarded!==void 0)return e.data.guarded;const{target:r}=e;return this.GUARDED_TAG_NAMES.includes(r.tagName)?!0:!(t&&t.model&&t.model instanceof ca||this.svg===r||this.el===r||It.contains(this.svg,r))},setGridSize:function(e){const{options:t}=this;return t.gridSize=e,t.drawGrid&&!t.drawGridSize&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:$e("svg",{width:"100%",height:"100%"},$e("defs")),patterns:{},add:function(e,t){$e(this.root.node.childNodes[0]).append(t),this.patterns[e]=t,this.root.append($e("rect",{width:"100%",height:"100%",fill:"url(#"+e+")"}))},get:function(e){return this.patterns[e]},exist:function(e){return this.patterns[e]!==void 0}}),this._gridCache},setGrid:function(e){this.clearGrid(),this._gridCache=null,this._gridSettings=[];var t=Array.isArray(e)?e:[e||{}];return t.forEach(function(r){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(r))},this),this},_resolveDrawGridOption:function(e){var t=this.constructor.gridPatterns;if(Mi(e)&&Array.isArray(t[e]))return t[e].map(function(u){return Ut({},u)});var r=e||{args:[{}]},n=Array.isArray(r),i=r.name;if(!n&&!i&&!r.markup&&(i="dot"),i&&Array.isArray(t[i])){var s=t[i].map(function(u){return Ut({},u)}),o=Array.isArray(r.args)?r.args:[r.args||{}];Ms(o[0],cc(e,"args"));for(var a=0;a<o.length;a++)s[a]&&Ut(s[a],o[a]);return s}return n?r:[r]},drawGrid:function(e){const t=this.options.drawGridSize||this.options.gridSize;if(t<=1)return this.clearGrid();var r=Array.isArray(e)?e:[e],n=this.matrix(),i=this._getGridRefs();this._gridSettings.forEach(function(o,a){var u="pattern_"+a,c=ri(o,r[a],{sx:n.a||1,sy:n.d||1,ox:n.e||0,oy:n.f||0});c.width=t*(n.a||1)*(c.scaleFactor||1),c.height=t*(n.d||1)*(c.scaleFactor||1),i.exist(u)||i.add(u,$e("pattern",{id:u,patternUnits:"userSpaceOnUse"},$e(c.markup)));var f=i.get(u);fn(c.update)&&c.update(f.node.childNodes[0],c);var h=c.ox%c.width;h<0&&(h+=c.width);var g=c.oy%c.height;g<0&&(g+=c.height),f.attr({x:h,y:g,width:c.width,height:c.height})});var s=new XMLSerializer().serializeToString(i.root.node);return s="url(data:image/svg+xml;base64,"+btoa(s)+")",this.$grid.css("backgroundImage",s),this},updateBackgroundImage:function(e){e=e||{};var t=e.position||"center",r=e.size||"auto auto",n=this.scale(),i=this.translate();if(Wr(t)){var s=i.tx+n.sx*(t.x||0),o=i.ty+n.sy*(t.y||0);t=s+"px "+o+"px"}Wr(r)&&(r=new vt(r).scale(n.sx,n.sy),r=r.width+"px "+r.height+"px"),this.$background.css({backgroundSize:r,backgroundPosition:t})},drawBackgroundImage:function(e,t){if(!(e instanceof HTMLImageElement)){this.$background.css("backgroundImage","");return}if(!(!this._background||this._background.id!==t.id)){t=t||{};var r,n=t.size,i=t.repeat||"no-repeat",s=t.opacity||1,o=Math.abs(t.quality)||1,a=this.constructor.backgroundPatterns[Wfe(i)];if(fn(a)){e.width*=o,e.height*=o;var u=a(e,t);if(!(u instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");r=u.toDataURL("image/png"),i="repeat",Wr(n)?(n.width*=u.width/e.width,n.height*=u.height/e.height):n===void 0&&(t.size={width:u.width/o,height:u.height/o})}else r=e.src,n===void 0&&(t.size={width:e.width,height:e.height});this.$background.css({opacity:s,backgroundRepeat:i,backgroundImage:"url("+r+")"}),this.updateBackgroundImage(t)}},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(e=e||{},this.updateBackgroundColor(e.color),e.image){e=this._background=Ks(e),ul(e);var t=document.createElement("img");t.onload=this.drawBackgroundImage.bind(this,t,e),t.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,To(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!Wr(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var t=e.id,r=e.name;if(t||(t=r+this.svg.id+rp(JSON.stringify(e))),!this.isDefined(t)){var n=ohe,i=n[r]&&n[r](e.args||{});if(!i)throw new Error("Non-existing filter "+r);var s=Ut({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},e.attrs,{id:t});$e(i,s).appendTo(this.defs)}return t},defineGradient:function(e){if(!Wr(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:t,defs:r}=this,{type:n,id:i=n+t.id+rp(JSON.stringify(e)),stops:s,attrs:o={}}=e;if(this.isDefined(i))return i;const a=Fr(s).map(({offset:c,color:f,opacity:h})=>$e("stop").attr({offset:c,"stop-color":f,"stop-opacity":Number.isFinite(h)?h:1})),u=$e(n,o,a);return u.id=i,u.appendTo(r),i},definePattern:function(e){if(!Wr(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:t,defs:r}=this,{id:n=t.id+rp(JSON.stringify(e)),markup:i,attrs:s={}}=e;if(!i)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(n))return n;const o=$e("pattern",{patternUnits:"userSpaceOnUse"});if(o.id=n,o.attr(s),typeof i=="string")o.append($e(i));else{const{fragment:a}=Bp(i);o.append(a)}return o.appendTo(r),n},defineMarker:function(e){if(!Wr(e))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");const{svg:t,defs:r}=this,{id:n=t.id+rp(JSON.stringify(e)),markup:i,attrs:s={},markerUnits:o="userSpaceOnUse"}=e;if(this.isDefined(n))return n;const a=$e("marker",{orient:"auto",overflow:"visible",markerUnits:o});a.id=n,a.attr(s);let u;if(i){let h;if(typeof i=="string")h=$e(i),h=Array.isArray(h)?h:[h];else{const{fragment:g}=Bp(i);h=$e(g).children()}h.length>1?u=$e("g").append(h):u=h[0]}else{const{type:h="path"}=e;u=$e(h)}const c=cc(e,"type","id","markup","attrs","markerUnits");return Object.keys(c).forEach(h=>{const g=c[h],y=u.attr(h);if(y==null)u.attr(h,g);else switch(h){case"transform":u.attr(h,g+" "+y);break}}),u.appendTo(a),a.appendTo(r),n},customEventTrigger:function(e,t,r=t.el){const n=e.target.closest("[event]");if(n&&r!==n&&t.el.contains(n)){const i=Yn(It.Event(e.originalEvent,{data:e.data,currentTarget:n}));return this.onevent(i),i.isDefaultPrevented()&&e.preventDefault(),i}return null}},{sorting:tl,Layers:Js,backgroundPatterns:{flipXy:function(e){var t=document.createElement("canvas"),r=e.width,n=e.height;t.width=2*r,t.height=2*n;var i=t.getContext("2d");return i.drawImage(e,0,0,r,n),i.setTransform(-1,0,0,-1,t.width,t.height),i.drawImage(e,0,0,r,n),i.setTransform(-1,0,0,1,t.width,0),i.drawImage(e,0,0,r,n),i.setTransform(1,0,0,-1,0,t.height),i.drawImage(e,0,0,r,n),t},flipX:function(e){var t=document.createElement("canvas"),r=e.width,n=e.height;t.width=r*2,t.height=n;var i=t.getContext("2d");return i.drawImage(e,0,0,r,n),i.translate(2*r,0),i.scale(-1,1),i.drawImage(e,0,0,r,n),t},flipY:function(e){var t=document.createElement("canvas"),r=e.width,n=e.height;t.width=r,t.height=n*2;var i=t.getContext("2d");return i.drawImage(e,0,0,r,n),i.translate(0,2*n),i.scale(1,-1),i.drawImage(e,0,0,r,n),t},watermark:function(e,t){t=t||{};var r=e.width,n=e.height,i=document.createElement("canvas");i.width=r*3,i.height=n*3;for(var s=i.getContext("2d"),o=fs(t.watermarkAngle)?-t.watermarkAngle:-20,a=vs(o),u=i.width/4,c=i.height/4,f=0;f<4;f++)for(var h=0;h<4;h++)(f+h)%2>0&&(s.setTransform(1,0,0,1,(2*f-1)*u,(2*h-1)*c),s.rotate(a),s.drawImage(e,-r/2,-n/2,r,n));return i}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,t){$e(e).attr({width:t.thickness*t.sx,height:t.thickness*t.sy,fill:t.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,t){var r=t.sx<=1?t.thickness*t.sx:t.thickness;$e(e).attr({width:r,height:r,fill:t.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,t){var r,n=t.width,i=t.height,s=t.thickness;n-s>=0&&i-s>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",$e(e).attr({d:r,stroke:t.color,"stroke-width":t.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,t){var r,n=t.width,i=t.height,s=t.thickness;n-s>=0&&i-s>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",$e(e).attr({d:r,stroke:t.color,"stroke-width":t.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(e,t){var r,n=t.width,i=t.height,s=t.thickness;n-s>=0&&i-s>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",$e(e).attr({d:r,stroke:t.color,"stroke-width":t.thickness})}}]}}),av=Va.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var e=this.name;e&&this.vel.attr("data-tool-name",e)},configure:function(e,t){return this.relatedView=e,this.paper=e.paper,this.parentView=t,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(e){e&&e.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var e=this.options.focusOpacity;isFinite(e)&&(this.el.style.opacity=e),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(e){const{paper:t,relatedView:r}=this;return!t||!r?!0:t.guard(e,r)}}),Cpe=Va.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(e){e=Ut(this.options,e);var t=e.tools;if(!Array.isArray(t))return this;var r=e.relatedView;if(!(r instanceof wr))return this;for(var n=this.tools=[],i=0,s=t.length;i<s;i++){var o=t[i];o instanceof av&&(o.configure(r,this),this.vel.append(o.el),n.push(o))}return this.isRendered=!1,r.requestUpdate(r.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(e){e||(e={});var t=this.tools;if(!t)return this;for(var r=this.isRendered,n=0,i=t.length;n<i;n++){var s=t[n];r?e.tool!==s.cid&&s.isVisible()&&s.update():s.render()}return this.isMounted()||this.mount(),r||(this.blurTool(),this.isRendered=!0),this},focusTool:function(e){var t=this.tools;if(!t)return this;for(var r=0,n=t.length;r<n;r++){var i=t[r];e===i?i.show():i.hide()}return this},blurTool:function(e){var t=this.tools;if(!t)return this;for(var r=0,n=t.length;r<n;r++){var i=t[r];i!==e&&!i.isVisible()&&(i.show(),i.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var e=this.tools;if(!e)return this;for(var t=0,r=e.length;t<r;t++)e[t].remove();this.tools=null},mount:function(){const{options:e,el:t}=this,{relatedView:r,layer:n=Js.TOOLS,z:i}=e;return r&&(n?r.paper.getLayerView(n).insertSortedNode(t,i):r.el.appendChild(t)),this}}),gh={exportElement:function(e){return e.size()},exportLink:function(e){var t=e.get("labelSize")||{},r={minLen:e.get("minLen")||1,weight:e.get("weight")||1,labelpos:e.get("labelPosition")||"c",labeloffset:e.get("labelOffset")||0,width:t.width||0,height:t.height||0};return r},importElement:function(e,t,r){var n=this.getCell(t),i=r.node(t);e.setPosition?e.setPosition(n,i):n.set("position",{x:i.x-i.width/2,y:i.y-i.height/2})},importLink:function(e,t,r){const i=this.getCell(t.name),s=r.edge(t),o=s.points||[],a=new dn(o);if(e.setVertices||e.setLinkVertices)if(fn(e.setVertices))e.setVertices(i,o);else{a.simplify({threshold:.001});const u=a.points.map(f=>f.toJSON()),c=u.length;i.set("vertices",u.slice(1,c-1))}if(e.setLabels&&"x"in s&&"y"in s){const u={x:s.x,y:s.y};if(fn(e.setLabels))e.setLabels(i,u,o);else{const c=a.closestPointLength(u),f=a.pointAtLength(c),h=c/a.length(),g=new pe(u).difference(f).toJSON();i.label(0,{position:{distance:h,offset:g}})}}},layout:function(e,t){var r;e instanceof Po?r=e:r=new Po().resetCells(e,{dry:!0,sort:!1}),e=null,t=Ms(t||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink});const n=t.dagre||(typeof dagre<"u"?dagre:void 0);if(n===void 0)throw new Error('The the "dagre" utility is a mandatory dependency.');var i=gh.toGraphLib(r,{graphlib:t.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:t.exportElement,setEdgeLabel:t.exportLink,setEdgeName:function(f){return f.id}}),s={},o=t.marginX||0,a=t.marginY||0;if(t.rankDir&&(s.rankdir=t.rankDir),t.align&&(s.align=t.align),t.nodeSep&&(s.nodesep=t.nodeSep),t.edgeSep&&(s.edgesep=t.edgeSep),t.rankSep&&(s.ranksep=t.rankSep),t.ranker&&(s.ranker=t.ranker),o&&(s.marginx=o),a&&(s.marginy=a),i.setGraph(s),n.layout(i,{debugTiming:!!t.debugTiming}),r.startBatch("layout"),gh.fromGraphLib(i,{importNode:this.importElement.bind(r,t),importEdge:this.importLink.bind(r,t)}),t.resizeClusters){var u=i.nodes().filter(function(f){return i.children(f).length>0}).map(r.getCell.bind(r)).sort(function(f,h){return h.getAncestors().length-f.getAncestors().length});To(u,"fitToChildren",{padding:t.clusterPadding})}r.stopBatch("layout");var c=i.graph();return new vt(o,a,Math.abs(c.width-2*o),Math.abs(c.height-2*a))},fromGraphLib:function(e,t){t=t||{};var r=t.importNode||Mf,n=t.importEdge||Mf,i=this instanceof Po?this:new Po;return e.nodes().forEach(function(s){r.call(i,s,e,i,t)}),e.edges().forEach(function(s){n.call(i,s,e,i,t)}),i},toGraphLib:function(e,t){t=t||{};const r=t.graphlib||(typeof graphlib<"u"?graphlib:void 0);if(r===void 0)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var n=Hfe(t,"directed","compound","multigraph"),i=new r.Graph(n),s=t.setNodeLabel||Mf,o=t.setEdgeLabel||Mf,a=t.setEdgeName||Mf,u=e.get("cells"),c=0,f=u.length;c<f;c++){var h=u.at(c);if(h.isLink()){var g=h.get("source"),y=h.get("target");if(!g.id||!y.id)break;i.setEdge(g.id,y.id,o(h),a(h))}else if(i.setNode(h.id,s(h)),i.isCompound()&&h.has("parent")){var m=h.get("parent");u.has(m)&&i.setParent(h.id,m)}}return i}};Po.prototype.toGraphLib=function(e){return gh.toGraphLib(this,e)};Po.prototype.fromGraphLib=function(e,t){return gh.fromGraphLib.call(this,e,t)};const cj={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(e,t){return this._tests[e]=t},test:function(e){var t=this._tests[e];if(!t)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var r=this._results[e];if(typeof r<"u")return r;try{r=t()}catch{r=!1}return this._results[e]=r,r}},ps=Ni.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}});ps.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'});_i.extend({presentationAttributes:_i.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var e=_i.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(e,"SCALE")&&(this.resize(),e=this.removeFlag(e,"SCALE")),e}});ps.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'});ps.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'});ps.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'});ps.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'});ps.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'});ps.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'});const Rpe=ps.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'});Rpe.define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}});const $p=cj.test("svgforeignobject");ps.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',$p?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),ps.prototype.initialize.apply(this,arguments)},updateSize:function(e,t){this.attr({".fobj":Ut({},t),div:{style:Ut({},t)}})},updateContent:function(e,t){$p?this.attr({".content":{html:nhe(t)}}):this.attr({".content":{text:t}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}});_i.extend({presentationAttributes:$p?_i.prototype.presentationAttributes:_i.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var e=_i.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(e,"CONTENT")&&(this.updateContent(this.model),e=this.removeFlag(e,"CONTENT")),e},update:function(e,t){var r=this.model;if($p)_i.prototype.update.call(this,r,t);else{var n=cc(t||r.get("attrs"),".content");_i.prototype.update.call(this,r,n),(!t||Fa(t,".content"))&&this.updateContent(r,t)}},updateContent:function(e,t){var r=ri({},(t||e.get("attrs"))[".content"]);r=cc(r,"text");var n=FU(e.get("content"),e.get("size"),r,{svgDocument:this.paper.svg}),i=uE({},".content",r,"/");i[".content"].text=n,_i.prototype.update.call(this,e,i)}});Ni.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]});const Ipe=Ni.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]});Ni.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]});Ni.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]});Ni.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]});Ni.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]});Ni.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]});Ni.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]});Ni.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]});Ni.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]});Ni.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]});var FS=10;Ni.define("standard.Cylinder",{attrs:{body:{lateralArea:FS,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:FS,refRx:"50%",ry:FS,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,t){if(e===void 0)return this.attr("body/lateralArea");var r=Ai(e),n={lateralArea:e},i=r?{refCy:e,refRy:e,cy:null,ry:null}:{refCy:null,refRy:null,cy:e,ry:e};return this.attr({body:n,top:i},t)}},{attributes:{lateralArea:{set:function(e,t){var r=Ai(e);r&&(e=parseFloat(e)/100);var n=t.x,i=t.y,s=t.width,o=t.height,a=s/2,u=r?o*e:e,c=$e.KAPPA,f=c*a,h=c*(r?o*e:e),g=n,y=n+s/2,m=n+s,_=i+u,b=_-u,S=i+o-u,E=i+o,A=["M",g,_,"L",g,S,"C",n,S+h,y-f,E,y,E,"C",y+f,E,m,S+h,m,S,"L",m,_,"C",m,_-h,y+f,b,y,b,"C",y-f,b,g,_-h,g,_,"Z"];return{d:A.join(" ")}}}}});var Ope={tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]},Mpe={tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},kpe=cj.test("svgforeignobject")?Ope:Mpe;Ni.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},kpe]},{attributes:{text:{set:function(e,t,r,n){if(r instanceof HTMLElement)r.textContent=e;else{var i=n.style||{},s={text:e,width:-5,height:"100%"},o=Ut({textVerticalAnchor:"middle"},i);return GU.textWrap.set.call(this,s,t,r,o),{fill:i.color||null}}},position:function(e,t,r){if(r instanceof SVGElement)return t.center()}}}});const _p=Kl.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]});Kl.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none",cursor:"pointer"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]});Kl.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none","pointer-events":"none"}},{tagName:"path",selector:"line",attributes:{fill:"none",cursor:"pointer"}}]});var Y5=Va.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick",dbltap:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(e,t){const{vel:r,options:n}=this,{scale:i}=n;let s=$e.createSVGMatrix().translate(e,t);i&&(s=s.scale(i)),r.transform(s,{absolute:!0})},onPointerDown:function(e){this.options.guard(e)||(e.stopPropagation(),e.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,e.data),this.trigger("will-change",this,e))},onPointerMove:function(e){this.trigger("changing",this,e)},onDoubleClick:function(e){this.trigger("remove",this,e)},onPointerUp:function(e){this.trigger("changed",this,e),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}});const Lpe=av.extend({name:"vertices",options:{handleClass:Y5,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0,scale:null},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},onRender:function(){return this.options.vertexAdding&&(this.renderChildren(),this.updatePath()),this.resetHandles(),this.renderHandles(),this},update:function(){var e=this.relatedView,t=e.model.vertices();return t.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var e=this.handles;if(this.handles=[],this.stopListening(),!!Array.isArray(e))for(var t=0,r=e.length;t<r;t++)e[t].remove()},renderHandles:function(){for(var e=this.relatedView,t=e.model.vertices(),r=0,n=t.length;r<n;r++){var i=t[r],s=new this.options.handleClass({index:r,paper:this.paper,scale:this.options.scale,guard:o=>this.guard(o)});s.render(),s.position(i.x,i.y),this.simulateRelatedView(s.el),s.vel.appendTo(this.el),this.handles.push(s),this.startHandleListening(s)}},updateHandles:function(){for(var e=this.relatedView,t=e.model.vertices(),r=0,n=t.length;r<n;r++){var i=t[r],s=this.handles[r];if(!s)return;s.position(i.x,i.y)}},updatePath:function(){var e=this.childNodes.connection;e&&e.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(e){var t=this.relatedView;t.can("vertexMove")&&(this.listenTo(e,"will-change",this.onHandleWillChange),this.listenTo(e,"changing",this.onHandleChanging),this.listenTo(e,"changed",this.onHandleChanged)),t.can("vertexRemove")&&this.listenTo(e,"remove",this.onHandleRemove)},getNeighborPoints:function(e){var t=this.relatedView,r=t.model.vertices(),n=e>0?r[e-1]:t.sourceAnchor,i=e<r.length-1?r[e+1]:t.targetAnchor;return{prev:new pe(n),next:new pe(i)}},onHandleWillChange:function(e,t){this.focus();const{relatedView:r,options:n}=this;r.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),n.stopPropagation||r.notifyPointerdown(...r.paper.getPointerArgs(t))},onHandleChanging:function(e,t){const{options:r,relatedView:n}=this;var i=e.options.index,[s,o,a]=n.paper.getPointerArgs(t),u={x:o,y:a};this.snapVertex(u,i),n.model.vertex(i,u,{ui:!0,tool:this.cid}),e.position(u.x,u.y),r.stopPropagation||n.notifyPointermove(s,o,a)},onHandleChanged:function(e,t){const{options:r,relatedView:n}=this;if(r.vertexAdding&&this.updatePath(),!!r.redundancyRemoval){var i=n.removeRedundantLinearVertices({ui:!0,tool:this.cid});i&&this.render(),this.blur(),n.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(t).vertexAdded&&n.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var[s,o,a]=n.paper.getPointerArgs(t);r.stopPropagation||n.notifyPointerup(s,o,a),n.checkMouseleave(s)}},snapVertex:function(e,t){var r=this.options.snapRadius;if(r>0){var n=this.getNeighborPoints(t),i=n.prev,s=n.next;Math.abs(e.x-i.x)<r?e.x=i.x:Math.abs(e.x-s.x)<r&&(e.x=s.x),Math.abs(e.y-i.y)<r?e.y=n.prev.y:Math.abs(e.y-s.y)<r&&(e.y=s.y)}},onHandleRemove:function(e,t){var r=e.options.index,n=this.relatedView;n.model.removeVertex(r,{ui:!0}),this.options.vertexAdding&&this.updatePath(),n.checkMouseleave(Yn(t))},onPathPointerDown:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=Yn(e),r=this.paper.snapToGrid(t.clientX,t.clientY).toJSON(),n=this.relatedView;n.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var i=n.getVertexIndex(r.x,r.y);this.snapVertex(r,i),n.model.insertVertex(i,r,{ui:!0,tool:this.cid}),this.update();var s=this.handles[i];this.eventData(t,{vertexAdded:!0}),s.onPointerDown(t)}},onRemove:function(){this.resetHandles()}},{VertexHandle:Y5});function Npe(e,t){const{model:r}=e;return t?r.getBBox():r.isLink()?e.getConnection().bbox():e.getNodeUnrotatedBBox(e.el)}const lj=av.extend({tagName:"path",xAxisVector:new pe(1,0),events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{scale:null},onRender:function(){this.update()},update:function(){var e=this.ratio,t=this.relatedView,r=t.getTangentAtRatio(e),n,i;if(r?(n=r.start,i=r.vector().vectorAngle(this.xAxisVector)||0):(n=t.getPointAtRatio(e),i=0),!n)return this;var s=$e.createSVGMatrix().translate(n.x,n.y).rotate(i);const{scale:o}=this.options;return o&&(s=s.scale(o)),this.vel.transform(s,{absolute:!0}),this},onPointerDown:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.relatedView;t.model.startBatch("arrowhead-move",{ui:!0,tool:this.cid}),t.can("arrowheadMove")&&(t.startArrowheadMove(this.arrowheadType),this.delegateDocumentEvents(),t.paper.undelegateEvents()),this.focus(),this.el.style.pointerEvents="none"}},onPointerMove:function(e){var t=Yn(e),r=this.paper.snapToGrid(t.clientX,t.clientY);this.relatedView.pointermove(t,r.x,r.y)},onPointerUp:function(e){this.undelegateDocumentEvents();var t=this.relatedView,r=t.paper,n=Yn(e),i=r.snapToGrid(n.clientX,n.clientY);t.pointerup(n,i.x,i.y),r.delegateEvents(),this.blur(),this.el.style.pointerEvents="",t.model.stopBatch("arrowhead-move",{ui:!0,tool:this.cid})}}),qpe=lj.extend({name:"target-arrowhead",ratio:1,arrowheadType:"target",attributes:{d:"M -10 -8 10 0 -10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"target-arrowhead"}}),Dpe=lj.extend({name:"source-arrowhead",ratio:0,arrowheadType:"source",attributes:{d:"M 10 -8 -10 0 10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"source-arrowhead"}}),mE=av.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,scale:null,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){const{vel:e}=this;e.transform(this.getCellMatrix(),{absolute:!0})},getCellMatrix(){return this.relatedView.model.isLink()?this.getLinkMatrix():this.getElementMatrix()},getElementMatrix(){const{relatedView:e,options:t}=this;let{x:r=0,y:n=0,offset:i={},useModelGeometry:s,rotate:o,scale:a}=t,u=Npe(e,s);const c=e.model.angle();o||(u=u.bbox(c));const{x:f=0,y:h=0}=i;Ai(r)?r=parseFloat(r)/100*u.width:Qs(r)&&(r=Number(eo(r,u))),Ai(n)?n=parseFloat(n)/100*u.height:Qs(n)&&(n=Number(eo(n,u)));let g=$e.createSVGMatrix().translate(u.x+u.width/2,u.y+u.height/2);return o&&(g=g.rotate(c)),g=g.translate(r+f-u.width/2,n+h-u.height/2),a&&(g=g.scale(a)),g},getLinkMatrix(){const{relatedView:e,options:t}=this,{offset:r=0,distance:n=0,rotate:i,scale:s}=t;let o,a,u;Ai(n)?o=e.getTangentAtRatio(parseFloat(n)/100):o=e.getTangentAtLength(n),o?(a=o.start,u=o.vector().vectorAngle(new pe(1,0))||0):(a=e.getConnection().start,u=0);let c=$e.createSVGMatrix().translate(a.x,a.y).rotate(u).translate(0,r);return i||(c=c.rotate(-u)),s&&(c=c.scale(s)),c},onPointerDown:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.options.action;typeof t=="function"&&t.call(this.relatedView,e,this.relatedView,this)}}}),K5=mE.extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(e,t,r){t.model.remove({ui:!0,tool:r.cid})}}});var Uf={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Fpe=Uf.exports,Z5;function Bpe(){return Z5||(Z5=1,function(e,t){(function(){var r,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",h=1,g=2,y=4,m=1,_=2,b=1,S=2,E=4,A=8,T=16,I=32,q=64,p=128,P=256,O=512,N=30,V="...",W=800,G=16,ee=1,ae=2,K=3,U=1/0,j=9007199254740991,J=17976931348623157e292,de=NaN,ce=4294967295,Te=ce-1,Se=ce>>>1,re=[["ary",p],["bind",b],["bindKey",S],["curry",A],["curryRight",T],["flip",O],["partial",I],["partialRight",q],["rearg",P]],oe="[object Arguments]",ne="[object Array]",te="[object AsyncFunction]",le="[object Boolean]",We="[object Date]",Ne="[object DOMException]",Re="[object Error]",rt="[object Function]",Ve="[object GeneratorFunction]",L="[object Map]",B="[object Number]",H="[object Null]",X="[object Object]",xe="[object Promise]",ue="[object Proxy]",Ae="[object RegExp]",Ce="[object Set]",Be="[object String]",Le="[object Symbol]",Ie="[object Undefined]",be="[object WeakMap]",je="[object WeakSet]",ct="[object ArrayBuffer]",mt="[object DataView]",ft="[object Float32Array]",it="[object Float64Array]",Wt="[object Int8Array]",yr="[object Int16Array]",Qt="[object Int32Array]",cr="[object Uint8Array]",Lr="[object Uint8ClampedArray]",Br="[object Uint16Array]",bn="[object Uint32Array]",tr=/\b__p \+= '';/g,Or=/\b(__p \+=) '' \+/g,vn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mn=/&(?:amp|lt|gt|quot|#39);/g,pn=/[&<>"']/g,Gn=RegExp(mn.source),ei=RegExp(pn.source),Bt=/<%-([\s\S]+?)%>/g,Ft=/<%([\s\S]+?)%>/g,zr=/<%=([\s\S]+?)%>/g,Fn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wn=/^\w*$/,jr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$n=/[\\^$.*+?()[\]{}|]/g,hi=RegExp($n.source),Jr=/^\s+/,Un=/\s/,On=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,di=/\{\n\/\* \[wrapped with (.+)\] \*/,Xe=/,? & /,Et=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Rt=/[()=,{}\[\]\/\s]/,kt=/\\(\\)?/g,Lt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,at=/\w*$/,He=/^[-+]0x[0-9a-f]+$/i,yt=/^0b[01]+$/i,Tt=/^\[object .+?Constructor\]$/,zt=/^0o[0-7]+$/i,an=/^(?:0|[1-9]\d*)$/,jn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Mt=/($^)/,en=/['\n\r\u2028\u2029\\]/g,Er="\\ud800-\\udfff",Nr="\\u0300-\\u036f",Vr="\\ufe20-\\ufe2f",Ar="\\u20d0-\\u20ff",xn=Nr+Vr+Ar,Xt="\\u2700-\\u27bf",pi="a-z\\xdf-\\xf6\\xf8-\\xff",wi="\\xac\\xb1\\xd7\\xf7",qi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ze="\\u2000-\\u206f",gt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ht="A-Z\\xc0-\\xd6\\xd8-\\xde",dt="\\ufe0e\\ufe0f",Ct=wi+qi+Ze+gt,rr="['â]",Hr="["+Er+"]",cn="["+Ct+"]",Gr="["+xn+"]",yn="\\d+",Bn="["+Xt+"]",gi="["+pi+"]",zo="[^"+Er+Ct+yn+Xt+pi+ht+"]",xs="\\ud83c[\\udffb-\\udfff]",Hn="(?:"+Gr+"|"+xs+")",_a="[^"+Er+"]",ts="(?:\\ud83c[\\udde6-\\uddff]){2}",ba="[\\ud800-\\udbff][\\udc00-\\udfff]",Vo="["+ht+"]",Go="\\u200d",$o="(?:"+gi+"|"+zo+")",Ql="(?:"+Vo+"|"+zo+")",Qh="(?:"+rr+"(?:d|ll|m|re|s|t|ve))?",Za="(?:"+rr+"(?:D|LL|M|RE|S|T|VE))?",ef=Hn+"?",qc="["+dt+"]?",ed="(?:"+Go+"(?:"+[_a,ts,ba].join("|")+")"+qc+ef+")*",td="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",hv="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",tf=qc+ef+ed,dv="(?:"+[Bn,ts,ba].join("|")+")"+tf,pv="(?:"+[_a+Gr+"?",Gr,ts,ba,Hr].join("|")+")",rf=RegExp(rr,"g"),gv=RegExp(Gr,"g"),nf=RegExp(xs+"(?="+xs+")|"+pv+tf,"g"),vv=RegExp([Vo+"?"+gi+"+"+Qh+"(?="+[cn,Vo,"$"].join("|")+")",Ql+"+"+Za+"(?="+[cn,Vo+$o,"$"].join("|")+")",Vo+"?"+$o+"+"+Qh,Vo+"+"+Za,hv,td,yn,dv].join("|"),"g"),mv=RegExp("["+Go+Er+xn+dt+"]"),yv=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_v=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],bv=-1,ln={};ln[ft]=ln[it]=ln[Wt]=ln[yr]=ln[Qt]=ln[cr]=ln[Lr]=ln[Br]=ln[bn]=!0,ln[oe]=ln[ne]=ln[ct]=ln[le]=ln[mt]=ln[We]=ln[Re]=ln[rt]=ln[L]=ln[B]=ln[X]=ln[Ae]=ln[Ce]=ln[Be]=ln[be]=!1;var tn={};tn[oe]=tn[ne]=tn[ct]=tn[mt]=tn[le]=tn[We]=tn[ft]=tn[it]=tn[Wt]=tn[yr]=tn[Qt]=tn[L]=tn[B]=tn[X]=tn[Ae]=tn[Ce]=tn[Be]=tn[Le]=tn[cr]=tn[Lr]=tn[Br]=tn[bn]=!0,tn[Re]=tn[rt]=tn[be]=!1;var rd={Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã:"C",Ã§:"c",Ã:"D",Ã°:"d",Ã:"E",Ã:"E",Ã:"E",Ã:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",Ã:"I",Ã:"I",Ã:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã:"N",Ã±:"n",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã:"U",Ã:"U",Ã:"U",Ã:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã:"Ae",Ã¦:"ae",Ã:"Th",Ã¾:"th",Ã:"ss",Ä:"A",Ä:"A",Ä:"A",Ä:"a",Ä:"a",Ä:"a",Ä:"C",Ä:"C",Ä:"C",Ä:"C",Ä:"c",Ä:"c",Ä:"c",Ä:"c",Ä:"D",Ä:"D",Ä:"d",Ä:"d",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"G",Ä:"G",Ä :"G",Ä¢:"G",Ä:"g",Ä:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å:"l",Å:"l",Å:"N",Å:"N",Å:"N",Å:"N",Å:"n",Å:"n",Å:"n",Å:"n",Å:"O",Å:"O",Å:"O",Å:"o",Å:"o",Å:"o",Å:"R",Å:"R",Å:"R",Å:"r",Å:"r",Å:"r",Å:"S",Å:"S",Å:"S",Å :"S",Å:"s",Å:"s",Å:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å:"Oe",Å:"oe",Å:"'n",Å¿:"s"},sf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nd={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},id={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},of=parseFloat,wv=parseInt,sd=typeof Oi=="object"&&Oi&&Oi.Object===Object&&Oi,xv=typeof self=="object"&&self&&self.Object===Object&&self,Mn=sd||xv||Function("return this")(),Dc=t&&!t.nodeType&&t,go=Dc&&!0&&e&&!e.nodeType&&e,od=go&&go.exports===Dc,af=od&&sd.process,rs=function(){try{var Q=go&&go.require&&go.require("util").types;return Q||af&&af.binding&&af.binding("util")}catch{}}(),v=rs&&rs.isArrayBuffer,x=rs&&rs.isDate,C=rs&&rs.isMap,k=rs&&rs.isRegExp,D=rs&&rs.isSet,F=rs&&rs.isTypedArray;function $(Q,me,ge){switch(ge.length){case 0:return Q.call(me);case 1:return Q.call(me,ge[0]);case 2:return Q.call(me,ge[0],ge[1]);case 3:return Q.call(me,ge[0],ge[1],ge[2])}return Q.apply(me,ge)}function he(Q,me,ge,Ue){for(var Qe=-1,At=Q==null?0:Q.length;++Qe<At;){var Pt=Q[Qe];me(Ue,Pt,ge(Pt),Q)}return Ue}function se(Q,me){for(var ge=-1,Ue=Q==null?0:Q.length;++ge<Ue&&me(Q[ge],ge,Q)!==!1;);return Q}function Ee(Q,me){for(var ge=Q==null?0:Q.length;ge--&&me(Q[ge],ge,Q)!==!1;);return Q}function De(Q,me){for(var ge=-1,Ue=Q==null?0:Q.length;++ge<Ue;)if(!me(Q[ge],ge,Q))return!1;return!0}function Ge(Q,me){for(var ge=-1,Ue=Q==null?0:Q.length,Qe=0,At=[];++ge<Ue;){var Pt=Q[ge];me(Pt,ge,Q)&&(At[Qe++]=Pt)}return At}function Me(Q,me){var ge=Q==null?0:Q.length;return!!ge&&un(Q,me,0)>-1}function ut(Q,me,ge){for(var Ue=-1,Qe=Q==null?0:Q.length;++Ue<Qe;)if(ge(me,Q[Ue]))return!0;return!1}function St(Q,me){for(var ge=-1,Ue=Q==null?0:Q.length,Qe=Array(Ue);++ge<Ue;)Qe[ge]=me(Q[ge],ge,Q);return Qe}function ar(Q,me){for(var ge=-1,Ue=me.length,Qe=Q.length;++ge<Ue;)Q[Qe+ge]=me[ge];return Q}function sr(Q,me,ge,Ue){var Qe=-1,At=Q==null?0:Q.length;for(Ue&&At&&(ge=Q[++Qe]);++Qe<At;)ge=me(ge,Q[Qe],Qe,Q);return ge}function ai(Q,me,ge,Ue){var Qe=Q==null?0:Q.length;for(Ue&&Qe&&(ge=Q[--Qe]);Qe--;)ge=me(ge,Q[Qe],Qe,Q);return ge}function kn(Q,me){for(var ge=-1,Ue=Q==null?0:Q.length;++ge<Ue;)if(me(Q[ge],ge,Q))return!0;return!1}var Bs=wa("length");function zs(Q){return Q.split("")}function Tr(Q){return Q.match(Et)||[]}function Uo(Q,me,ge){var Ue;return ge(Q,function(Qe,At,Pt){if(me(Qe,At,Pt))return Ue=At,!1}),Ue}function Pr(Q,me,ge,Ue){for(var Qe=Q.length,At=ge+(Ue?1:-1);Ue?At--:++At<Qe;)if(me(Q[At],At,Q))return At;return-1}function un(Q,me,ge){return me===me?Av(Q,me,ge):Pr(Q,Fc,ge)}function qu(Q,me,ge,Ue){for(var Qe=ge-1,At=Q.length;++Qe<At;)if(Ue(Q[Qe],me))return Qe;return-1}function Fc(Q){return Q!==Q}function Ss(Q,me){var ge=Q==null?0:Q.length;return ge?Pi(Q,me)/ge:de}function wa(Q){return function(me){return me==null?r:me[Q]}}function ns(Q){return function(me){return Q==null?r:Q[me]}}function vo(Q,me,ge,Ue,Qe){return Qe(Q,function(At,Pt,wt){ge=Ue?(Ue=!1,At):me(ge,At,Pt,wt)}),ge}function jo(Q,me){var ge=Q.length;for(Q.sort(me);ge--;)Q[ge]=Q[ge].value;return Q}function Pi(Q,me){for(var ge,Ue=-1,Qe=Q.length;++Ue<Qe;){var At=me(Q[Ue]);At!==r&&(ge=ge===r?At:ge+At)}return ge}function Du(Q,me){for(var ge=-1,Ue=Array(Q);++ge<Q;)Ue[ge]=me(ge);return Ue}function mo(Q,me){return St(me,function(ge){return[ge,Q[ge]]})}function Vs(Q){return Q&&Q.slice(0,ud(Q)+1).replace(Jr,"")}function Di(Q){return function(me){return Q(me)}}function uf(Q,me){return St(me,function(ge){return Q[ge]})}function Fu(Q,me){return Q.has(me)}function Yr(Q,me){for(var ge=-1,Ue=Q.length;++ge<Ue&&un(me,Q[ge],0)>-1;);return ge}function Bu(Q,me){for(var ge=Q.length;ge--&&un(me,Q[ge],0)>-1;);return ge}function Es(Q,me){for(var ge=Q.length,Ue=0;ge--;)Q[ge]===me&&++Ue;return Ue}var Ja=ns(rd),Sv=ns(sf);function Ev(Q){return"\\"+id[Q]}function ad(Q,me){return Q==null?r:Q[me]}function is(Q){return mv.test(Q)}function cf(Q){return yv.test(Q)}function Ho(Q){for(var me,ge=[];!(me=Q.next()).done;)ge.push(me.value);return ge}function Bc(Q){var me=-1,ge=Array(Q.size);return Q.forEach(function(Ue,Qe){ge[++me]=[Qe,Ue]}),ge}function Qa(Q,me){return function(ge){return Q(me(ge))}}function As(Q,me){for(var ge=-1,Ue=Q.length,Qe=0,At=[];++ge<Ue;){var Pt=Q[ge];(Pt===me||Pt===f)&&(Q[ge]=f,At[Qe++]=ge)}return At}function xa(Q){var me=-1,ge=Array(Q.size);return Q.forEach(function(Ue){ge[++me]=Ue}),ge}function lf(Q){var me=-1,ge=Array(Q.size);return Q.forEach(function(Ue){ge[++me]=[Ue,Ue]}),ge}function Av(Q,me,ge){for(var Ue=ge-1,Qe=Q.length;++Ue<Qe;)if(Q[Ue]===me)return Ue;return-1}function zc(Q,me,ge){for(var Ue=ge+1;Ue--;)if(Q[Ue]===me)return Ue;return Ue}function Wo(Q){return is(Q)?cd(Q):Bs(Q)}function Fi(Q){return is(Q)?ie(Q):zs(Q)}function ud(Q){for(var me=Q.length;me--&&Un.test(Q.charAt(me)););return me}var ff=ns(nd);function cd(Q){for(var me=nf.lastIndex=0;nf.test(Q);)++me;return me}function ie(Q){return Q.match(nf)||[]}function _e(Q){return Q.match(vv)||[]}var Oe=function Q(me){me=me==null?Mn:ke.defaults(Mn.Object(),me,ke.pick(Mn,_v));var ge=me.Array,Ue=me.Date,Qe=me.Error,At=me.Function,Pt=me.Math,wt=me.Object,fr=me.RegExp,jt=me.String,_r=me.TypeError,ui=ge.prototype,vi=At.prototype,ci=wt.prototype,Bi=me["__core-js_shared__"],yo=vi.toString,ir=ci.hasOwnProperty,AH=0,hT=function(){var l=/[^.]+$/.exec(Bi&&Bi.keys&&Bi.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),ld=ci.toString,TH=yo.call(wt),PH=Mn._,CH=fr("^"+yo.call(ir).replace($n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fd=od?me.Buffer:r,eu=me.Symbol,hd=me.Uint8Array,dT=fd?fd.allocUnsafe:r,dd=Qa(wt.getPrototypeOf,wt),pT=wt.create,gT=ci.propertyIsEnumerable,pd=ui.splice,vT=eu?eu.isConcatSpreadable:r,hf=eu?eu.iterator:r,zu=eu?eu.toStringTag:r,gd=function(){try{var l=ju(wt,"defineProperty");return l({},"",{}),l}catch{}}(),RH=me.clearTimeout!==Mn.clearTimeout&&me.clearTimeout,IH=Ue&&Ue.now!==Mn.Date.now&&Ue.now,OH=me.setTimeout!==Mn.setTimeout&&me.setTimeout,vd=Pt.ceil,md=Pt.floor,Tv=wt.getOwnPropertySymbols,MH=fd?fd.isBuffer:r,mT=me.isFinite,kH=ui.join,LH=Qa(wt.keys,wt),li=Pt.max,Ci=Pt.min,NH=Ue.now,qH=me.parseInt,yT=Pt.random,DH=ui.reverse,Pv=ju(me,"DataView"),df=ju(me,"Map"),Cv=ju(me,"Promise"),Vc=ju(me,"Set"),pf=ju(me,"WeakMap"),gf=ju(wt,"create"),yd=pf&&new pf,Gc={},FH=Hu(Pv),BH=Hu(df),zH=Hu(Cv),VH=Hu(Vc),GH=Hu(pf),_d=eu?eu.prototype:r,vf=_d?_d.valueOf:r,_T=_d?_d.toString:r;function Y(l){if(zn(l)&&!ur(l)&&!(l instanceof qr)){if(l instanceof Gs)return l;if(ir.call(l,"__wrapped__"))return bP(l)}return new Gs(l)}var $c=function(){function l(){}return function(d){if(!Ln(d))return{};if(pT)return pT(d);l.prototype=d;var w=new l;return l.prototype=r,w}}();function bd(){}function Gs(l,d){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=r}Y.templateSettings={escape:Bt,evaluate:Ft,interpolate:zr,variable:"",imports:{_:Y}},Y.prototype=bd.prototype,Y.prototype.constructor=Y,Gs.prototype=$c(bd.prototype),Gs.prototype.constructor=Gs;function qr(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ce,this.__views__=[]}function $H(){var l=new qr(this.__wrapped__);return l.__actions__=ss(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=ss(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=ss(this.__views__),l}function UH(){if(this.__filtered__){var l=new qr(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function jH(){var l=this.__wrapped__.value(),d=this.__dir__,w=ur(l),M=d<0,z=w?l.length:0,Z=nW(0,z,this.__views__),fe=Z.start,ye=Z.end,Pe=ye-fe,et=M?ye:fe-1,tt=this.__iteratees__,ot=tt.length,_t=0,qt=Ci(Pe,this.__takeCount__);if(!w||!M&&z==Pe&&qt==Pe)return $T(l,this.__actions__);var Zt=[];e:for(;Pe--&&_t<qt;){et+=d;for(var gr=-1,Jt=l[et];++gr<ot;){var Mr=tt[gr],$r=Mr.iteratee,Cs=Mr.type,Gi=$r(Jt);if(Cs==ae)Jt=Gi;else if(!Gi){if(Cs==ee)continue e;break e}}Zt[_t++]=Jt}return Zt}qr.prototype=$c(bd.prototype),qr.prototype.constructor=qr;function Vu(l){var d=-1,w=l==null?0:l.length;for(this.clear();++d<w;){var M=l[d];this.set(M[0],M[1])}}function HH(){this.__data__=gf?gf(null):{},this.size=0}function WH(l){var d=this.has(l)&&delete this.__data__[l];return this.size-=d?1:0,d}function XH(l){var d=this.__data__;if(gf){var w=d[l];return w===u?r:w}return ir.call(d,l)?d[l]:r}function YH(l){var d=this.__data__;return gf?d[l]!==r:ir.call(d,l)}function KH(l,d){var w=this.__data__;return this.size+=this.has(l)?0:1,w[l]=gf&&d===r?u:d,this}Vu.prototype.clear=HH,Vu.prototype.delete=WH,Vu.prototype.get=XH,Vu.prototype.has=YH,Vu.prototype.set=KH;function Sa(l){var d=-1,w=l==null?0:l.length;for(this.clear();++d<w;){var M=l[d];this.set(M[0],M[1])}}function ZH(){this.__data__=[],this.size=0}function JH(l){var d=this.__data__,w=wd(d,l);if(w<0)return!1;var M=d.length-1;return w==M?d.pop():pd.call(d,w,1),--this.size,!0}function QH(l){var d=this.__data__,w=wd(d,l);return w<0?r:d[w][1]}function e9(l){return wd(this.__data__,l)>-1}function t9(l,d){var w=this.__data__,M=wd(w,l);return M<0?(++this.size,w.push([l,d])):w[M][1]=d,this}Sa.prototype.clear=ZH,Sa.prototype.delete=JH,Sa.prototype.get=QH,Sa.prototype.has=e9,Sa.prototype.set=t9;function Ea(l){var d=-1,w=l==null?0:l.length;for(this.clear();++d<w;){var M=l[d];this.set(M[0],M[1])}}function r9(){this.size=0,this.__data__={hash:new Vu,map:new(df||Sa),string:new Vu}}function n9(l){var d=kd(this,l).delete(l);return this.size-=d?1:0,d}function i9(l){return kd(this,l).get(l)}function s9(l){return kd(this,l).has(l)}function o9(l,d){var w=kd(this,l),M=w.size;return w.set(l,d),this.size+=w.size==M?0:1,this}Ea.prototype.clear=r9,Ea.prototype.delete=n9,Ea.prototype.get=i9,Ea.prototype.has=s9,Ea.prototype.set=o9;function Gu(l){var d=-1,w=l==null?0:l.length;for(this.__data__=new Ea;++d<w;)this.add(l[d])}function a9(l){return this.__data__.set(l,u),this}function u9(l){return this.__data__.has(l)}Gu.prototype.add=Gu.prototype.push=a9,Gu.prototype.has=u9;function _o(l){var d=this.__data__=new Sa(l);this.size=d.size}function c9(){this.__data__=new Sa,this.size=0}function l9(l){var d=this.__data__,w=d.delete(l);return this.size=d.size,w}function f9(l){return this.__data__.get(l)}function h9(l){return this.__data__.has(l)}function d9(l,d){var w=this.__data__;if(w instanceof Sa){var M=w.__data__;if(!df||M.length<i-1)return M.push([l,d]),this.size=++w.size,this;w=this.__data__=new Ea(M)}return w.set(l,d),this.size=w.size,this}_o.prototype.clear=c9,_o.prototype.delete=l9,_o.prototype.get=f9,_o.prototype.has=h9,_o.prototype.set=d9;function bT(l,d){var w=ur(l),M=!w&&Wu(l),z=!w&&!M&&su(l),Z=!w&&!M&&!z&&Wc(l),fe=w||M||z||Z,ye=fe?Du(l.length,jt):[],Pe=ye.length;for(var et in l)(d||ir.call(l,et))&&!(fe&&(et=="length"||z&&(et=="offset"||et=="parent")||Z&&(et=="buffer"||et=="byteLength"||et=="byteOffset")||Ca(et,Pe)))&&ye.push(et);return ye}function wT(l){var d=l.length;return d?l[Bv(0,d-1)]:r}function p9(l,d){return Ld(ss(l),$u(d,0,l.length))}function g9(l){return Ld(ss(l))}function Rv(l,d,w){(w!==r&&!bo(l[d],w)||w===r&&!(d in l))&&Aa(l,d,w)}function mf(l,d,w){var M=l[d];(!(ir.call(l,d)&&bo(M,w))||w===r&&!(d in l))&&Aa(l,d,w)}function wd(l,d){for(var w=l.length;w--;)if(bo(l[w][0],d))return w;return-1}function v9(l,d,w,M){return tu(l,function(z,Z,fe){d(M,z,w(z),fe)}),M}function xT(l,d){return l&&Yo(d,mi(d),l)}function m9(l,d){return l&&Yo(d,as(d),l)}function Aa(l,d,w){d=="__proto__"&&gd?gd(l,d,{configurable:!0,enumerable:!0,value:w,writable:!0}):l[d]=w}function Iv(l,d){for(var w=-1,M=d.length,z=ge(M),Z=l==null;++w<M;)z[w]=Z?r:lm(l,d[w]);return z}function $u(l,d,w){return l===l&&(w!==r&&(l=l<=w?l:w),d!==r&&(l=l>=d?l:d)),l}function $s(l,d,w,M,z,Z){var fe,ye=d&h,Pe=d&g,et=d&y;if(w&&(fe=z?w(l,M,z,Z):w(l)),fe!==r)return fe;if(!Ln(l))return l;var tt=ur(l);if(tt){if(fe=sW(l),!ye)return ss(l,fe)}else{var ot=Ri(l),_t=ot==rt||ot==Ve;if(su(l))return HT(l,ye);if(ot==X||ot==oe||_t&&!z){if(fe=Pe||_t?{}:fP(l),!ye)return Pe?X9(l,m9(fe,l)):W9(l,xT(fe,l))}else{if(!tn[ot])return z?l:{};fe=oW(l,ot,ye)}}Z||(Z=new _o);var qt=Z.get(l);if(qt)return qt;Z.set(l,fe),zP(l)?l.forEach(function(Jt){fe.add($s(Jt,d,w,Jt,l,Z))}):FP(l)&&l.forEach(function(Jt,Mr){fe.set(Mr,$s(Jt,d,w,Mr,l,Z))});var Zt=et?Pe?Kv:Yv:Pe?as:mi,gr=tt?r:Zt(l);return se(gr||l,function(Jt,Mr){gr&&(Mr=Jt,Jt=l[Mr]),mf(fe,Mr,$s(Jt,d,w,Mr,l,Z))}),fe}function y9(l){var d=mi(l);return function(w){return ST(w,l,d)}}function ST(l,d,w){var M=w.length;if(l==null)return!M;for(l=wt(l);M--;){var z=w[M],Z=d[z],fe=l[z];if(fe===r&&!(z in l)||!Z(fe))return!1}return!0}function ET(l,d,w){if(typeof l!="function")throw new _r(o);return Ef(function(){l.apply(r,w)},d)}function yf(l,d,w,M){var z=-1,Z=Me,fe=!0,ye=l.length,Pe=[],et=d.length;if(!ye)return Pe;w&&(d=St(d,Di(w))),M?(Z=ut,fe=!1):d.length>=i&&(Z=Fu,fe=!1,d=new Gu(d));e:for(;++z<ye;){var tt=l[z],ot=w==null?tt:w(tt);if(tt=M||tt!==0?tt:0,fe&&ot===ot){for(var _t=et;_t--;)if(d[_t]===ot)continue e;Pe.push(tt)}else Z(d,ot,M)||Pe.push(tt)}return Pe}var tu=ZT(Xo),AT=ZT(Mv,!0);function _9(l,d){var w=!0;return tu(l,function(M,z,Z){return w=!!d(M,z,Z),w}),w}function xd(l,d,w){for(var M=-1,z=l.length;++M<z;){var Z=l[M],fe=d(Z);if(fe!=null&&(ye===r?fe===fe&&!Ps(fe):w(fe,ye)))var ye=fe,Pe=Z}return Pe}function b9(l,d,w,M){var z=l.length;for(w=hr(w),w<0&&(w=-w>z?0:z+w),M=M===r||M>z?z:hr(M),M<0&&(M+=z),M=w>M?0:GP(M);w<M;)l[w++]=d;return l}function TT(l,d){var w=[];return tu(l,function(M,z,Z){d(M,z,Z)&&w.push(M)}),w}function xi(l,d,w,M,z){var Z=-1,fe=l.length;for(w||(w=uW),z||(z=[]);++Z<fe;){var ye=l[Z];d>0&&w(ye)?d>1?xi(ye,d-1,w,M,z):ar(z,ye):M||(z[z.length]=ye)}return z}var Ov=JT(),PT=JT(!0);function Xo(l,d){return l&&Ov(l,d,mi)}function Mv(l,d){return l&&PT(l,d,mi)}function Sd(l,d){return Ge(d,function(w){return Ra(l[w])})}function Uu(l,d){d=nu(d,l);for(var w=0,M=d.length;l!=null&&w<M;)l=l[Ko(d[w++])];return w&&w==M?l:r}function CT(l,d,w){var M=d(l);return ur(l)?M:ar(M,w(l))}function zi(l){return l==null?l===r?Ie:H:zu&&zu in wt(l)?rW(l):gW(l)}function kv(l,d){return l>d}function w9(l,d){return l!=null&&ir.call(l,d)}function x9(l,d){return l!=null&&d in wt(l)}function S9(l,d,w){return l>=Ci(d,w)&&l<li(d,w)}function Lv(l,d,w){for(var M=w?ut:Me,z=l[0].length,Z=l.length,fe=Z,ye=ge(Z),Pe=1/0,et=[];fe--;){var tt=l[fe];fe&&d&&(tt=St(tt,Di(d))),Pe=Ci(tt.length,Pe),ye[fe]=!w&&(d||z>=120&&tt.length>=120)?new Gu(fe&&tt):r}tt=l[0];var ot=-1,_t=ye[0];e:for(;++ot<z&&et.length<Pe;){var qt=tt[ot],Zt=d?d(qt):qt;if(qt=w||qt!==0?qt:0,!(_t?Fu(_t,Zt):M(et,Zt,w))){for(fe=Z;--fe;){var gr=ye[fe];if(!(gr?Fu(gr,Zt):M(l[fe],Zt,w)))continue e}_t&&_t.push(Zt),et.push(qt)}}return et}function E9(l,d,w,M){return Xo(l,function(z,Z,fe){d(M,w(z),Z,fe)}),M}function _f(l,d,w){d=nu(d,l),l=gP(l,d);var M=l==null?l:l[Ko(js(d))];return M==null?r:$(M,l,w)}function RT(l){return zn(l)&&zi(l)==oe}function A9(l){return zn(l)&&zi(l)==ct}function T9(l){return zn(l)&&zi(l)==We}function bf(l,d,w,M,z){return l===d?!0:l==null||d==null||!zn(l)&&!zn(d)?l!==l&&d!==d:P9(l,d,w,M,bf,z)}function P9(l,d,w,M,z,Z){var fe=ur(l),ye=ur(d),Pe=fe?ne:Ri(l),et=ye?ne:Ri(d);Pe=Pe==oe?X:Pe,et=et==oe?X:et;var tt=Pe==X,ot=et==X,_t=Pe==et;if(_t&&su(l)){if(!su(d))return!1;fe=!0,tt=!1}if(_t&&!tt)return Z||(Z=new _o),fe||Wc(l)?uP(l,d,w,M,z,Z):eW(l,d,Pe,w,M,z,Z);if(!(w&m)){var qt=tt&&ir.call(l,"__wrapped__"),Zt=ot&&ir.call(d,"__wrapped__");if(qt||Zt){var gr=qt?l.value():l,Jt=Zt?d.value():d;return Z||(Z=new _o),z(gr,Jt,w,M,Z)}}return _t?(Z||(Z=new _o),tW(l,d,w,M,z,Z)):!1}function C9(l){return zn(l)&&Ri(l)==L}function Nv(l,d,w,M){var z=w.length,Z=z,fe=!M;if(l==null)return!Z;for(l=wt(l);z--;){var ye=w[z];if(fe&&ye[2]?ye[1]!==l[ye[0]]:!(ye[0]in l))return!1}for(;++z<Z;){ye=w[z];var Pe=ye[0],et=l[Pe],tt=ye[1];if(fe&&ye[2]){if(et===r&&!(Pe in l))return!1}else{var ot=new _o;if(M)var _t=M(et,tt,Pe,l,d,ot);if(!(_t===r?bf(tt,et,m|_,M,ot):_t))return!1}}return!0}function IT(l){if(!Ln(l)||lW(l))return!1;var d=Ra(l)?CH:Tt;return d.test(Hu(l))}function R9(l){return zn(l)&&zi(l)==Ae}function I9(l){return zn(l)&&Ri(l)==Ce}function O9(l){return zn(l)&&zd(l.length)&&!!ln[zi(l)]}function OT(l){return typeof l=="function"?l:l==null?us:typeof l=="object"?ur(l)?LT(l[0],l[1]):kT(l):QP(l)}function qv(l){if(!Sf(l))return LH(l);var d=[];for(var w in wt(l))ir.call(l,w)&&w!="constructor"&&d.push(w);return d}function M9(l){if(!Ln(l))return pW(l);var d=Sf(l),w=[];for(var M in l)M=="constructor"&&(d||!ir.call(l,M))||w.push(M);return w}function Dv(l,d){return l<d}function MT(l,d){var w=-1,M=os(l)?ge(l.length):[];return tu(l,function(z,Z,fe){M[++w]=d(z,Z,fe)}),M}function kT(l){var d=Jv(l);return d.length==1&&d[0][2]?dP(d[0][0],d[0][1]):function(w){return w===l||Nv(w,l,d)}}function LT(l,d){return em(l)&&hP(d)?dP(Ko(l),d):function(w){var M=lm(w,l);return M===r&&M===d?fm(w,l):bf(d,M,m|_)}}function Ed(l,d,w,M,z){l!==d&&Ov(d,function(Z,fe){if(z||(z=new _o),Ln(Z))k9(l,d,fe,w,Ed,M,z);else{var ye=M?M(rm(l,fe),Z,fe+"",l,d,z):r;ye===r&&(ye=Z),Rv(l,fe,ye)}},as)}function k9(l,d,w,M,z,Z,fe){var ye=rm(l,w),Pe=rm(d,w),et=fe.get(Pe);if(et){Rv(l,w,et);return}var tt=Z?Z(ye,Pe,w+"",l,d,fe):r,ot=tt===r;if(ot){var _t=ur(Pe),qt=!_t&&su(Pe),Zt=!_t&&!qt&&Wc(Pe);tt=Pe,_t||qt||Zt?ur(ye)?tt=ye:Wn(ye)?tt=ss(ye):qt?(ot=!1,tt=HT(Pe,!0)):Zt?(ot=!1,tt=WT(Pe,!0)):tt=[]:Af(Pe)||Wu(Pe)?(tt=ye,Wu(ye)?tt=$P(ye):(!Ln(ye)||Ra(ye))&&(tt=fP(Pe))):ot=!1}ot&&(fe.set(Pe,tt),z(tt,Pe,M,Z,fe),fe.delete(Pe)),Rv(l,w,tt)}function NT(l,d){var w=l.length;if(w)return d+=d<0?w:0,Ca(d,w)?l[d]:r}function qT(l,d,w){d.length?d=St(d,function(Z){return ur(Z)?function(fe){return Uu(fe,Z.length===1?Z[0]:Z)}:Z}):d=[us];var M=-1;d=St(d,Di(Yt()));var z=MT(l,function(Z,fe,ye){var Pe=St(d,function(et){return et(Z)});return{criteria:Pe,index:++M,value:Z}});return jo(z,function(Z,fe){return H9(Z,fe,w)})}function L9(l,d){return DT(l,d,function(w,M){return fm(l,M)})}function DT(l,d,w){for(var M=-1,z=d.length,Z={};++M<z;){var fe=d[M],ye=Uu(l,fe);w(ye,fe)&&wf(Z,nu(fe,l),ye)}return Z}function N9(l){return function(d){return Uu(d,l)}}function Fv(l,d,w,M){var z=M?qu:un,Z=-1,fe=d.length,ye=l;for(l===d&&(d=ss(d)),w&&(ye=St(l,Di(w)));++Z<fe;)for(var Pe=0,et=d[Z],tt=w?w(et):et;(Pe=z(ye,tt,Pe,M))>-1;)ye!==l&&pd.call(ye,Pe,1),pd.call(l,Pe,1);return l}function FT(l,d){for(var w=l?d.length:0,M=w-1;w--;){var z=d[w];if(w==M||z!==Z){var Z=z;Ca(z)?pd.call(l,z,1):Gv(l,z)}}return l}function Bv(l,d){return l+md(yT()*(d-l+1))}function q9(l,d,w,M){for(var z=-1,Z=li(vd((d-l)/(w||1)),0),fe=ge(Z);Z--;)fe[M?Z:++z]=l,l+=w;return fe}function zv(l,d){var w="";if(!l||d<1||d>j)return w;do d%2&&(w+=l),d=md(d/2),d&&(l+=l);while(d);return w}function br(l,d){return nm(pP(l,d,us),l+"")}function D9(l){return wT(Xc(l))}function F9(l,d){var w=Xc(l);return Ld(w,$u(d,0,w.length))}function wf(l,d,w,M){if(!Ln(l))return l;d=nu(d,l);for(var z=-1,Z=d.length,fe=Z-1,ye=l;ye!=null&&++z<Z;){var Pe=Ko(d[z]),et=w;if(Pe==="__proto__"||Pe==="constructor"||Pe==="prototype")return l;if(z!=fe){var tt=ye[Pe];et=M?M(tt,Pe,ye):r,et===r&&(et=Ln(tt)?tt:Ca(d[z+1])?[]:{})}mf(ye,Pe,et),ye=ye[Pe]}return l}var BT=yd?function(l,d){return yd.set(l,d),l}:us,B9=gd?function(l,d){return gd(l,"toString",{configurable:!0,enumerable:!1,value:dm(d),writable:!0})}:us;function z9(l){return Ld(Xc(l))}function Us(l,d,w){var M=-1,z=l.length;d<0&&(d=-d>z?0:z+d),w=w>z?z:w,w<0&&(w+=z),z=d>w?0:w-d>>>0,d>>>=0;for(var Z=ge(z);++M<z;)Z[M]=l[M+d];return Z}function V9(l,d){var w;return tu(l,function(M,z,Z){return w=d(M,z,Z),!w}),!!w}function Ad(l,d,w){var M=0,z=l==null?M:l.length;if(typeof d=="number"&&d===d&&z<=Se){for(;M<z;){var Z=M+z>>>1,fe=l[Z];fe!==null&&!Ps(fe)&&(w?fe<=d:fe<d)?M=Z+1:z=Z}return z}return Vv(l,d,us,w)}function Vv(l,d,w,M){var z=0,Z=l==null?0:l.length;if(Z===0)return 0;d=w(d);for(var fe=d!==d,ye=d===null,Pe=Ps(d),et=d===r;z<Z;){var tt=md((z+Z)/2),ot=w(l[tt]),_t=ot!==r,qt=ot===null,Zt=ot===ot,gr=Ps(ot);if(fe)var Jt=M||Zt;else et?Jt=Zt&&(M||_t):ye?Jt=Zt&&_t&&(M||!qt):Pe?Jt=Zt&&_t&&!qt&&(M||!gr):qt||gr?Jt=!1:Jt=M?ot<=d:ot<d;Jt?z=tt+1:Z=tt}return Ci(Z,Te)}function zT(l,d){for(var w=-1,M=l.length,z=0,Z=[];++w<M;){var fe=l[w],ye=d?d(fe):fe;if(!w||!bo(ye,Pe)){var Pe=ye;Z[z++]=fe===0?0:fe}}return Z}function VT(l){return typeof l=="number"?l:Ps(l)?de:+l}function Ts(l){if(typeof l=="string")return l;if(ur(l))return St(l,Ts)+"";if(Ps(l))return _T?_T.call(l):"";var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}function ru(l,d,w){var M=-1,z=Me,Z=l.length,fe=!0,ye=[],Pe=ye;if(w)fe=!1,z=ut;else if(Z>=i){var et=d?null:J9(l);if(et)return xa(et);fe=!1,z=Fu,Pe=new Gu}else Pe=d?[]:ye;e:for(;++M<Z;){var tt=l[M],ot=d?d(tt):tt;if(tt=w||tt!==0?tt:0,fe&&ot===ot){for(var _t=Pe.length;_t--;)if(Pe[_t]===ot)continue e;d&&Pe.push(ot),ye.push(tt)}else z(Pe,ot,w)||(Pe!==ye&&Pe.push(ot),ye.push(tt))}return ye}function Gv(l,d){return d=nu(d,l),l=gP(l,d),l==null||delete l[Ko(js(d))]}function GT(l,d,w,M){return wf(l,d,w(Uu(l,d)),M)}function Td(l,d,w,M){for(var z=l.length,Z=M?z:-1;(M?Z--:++Z<z)&&d(l[Z],Z,l););return w?Us(l,M?0:Z,M?Z+1:z):Us(l,M?Z+1:0,M?z:Z)}function $T(l,d){var w=l;return w instanceof qr&&(w=w.value()),sr(d,function(M,z){return z.func.apply(z.thisArg,ar([M],z.args))},w)}function $v(l,d,w){var M=l.length;if(M<2)return M?ru(l[0]):[];for(var z=-1,Z=ge(M);++z<M;)for(var fe=l[z],ye=-1;++ye<M;)ye!=z&&(Z[z]=yf(Z[z]||fe,l[ye],d,w));return ru(xi(Z,1),d,w)}function UT(l,d,w){for(var M=-1,z=l.length,Z=d.length,fe={};++M<z;){var ye=M<Z?d[M]:r;w(fe,l[M],ye)}return fe}function Uv(l){return Wn(l)?l:[]}function jv(l){return typeof l=="function"?l:us}function nu(l,d){return ur(l)?l:em(l,d)?[l]:_P(rn(l))}var G9=br;function iu(l,d,w){var M=l.length;return w=w===r?M:w,!d&&w>=M?l:Us(l,d,w)}var jT=RH||function(l){return Mn.clearTimeout(l)};function HT(l,d){if(d)return l.slice();var w=l.length,M=dT?dT(w):new l.constructor(w);return l.copy(M),M}function Hv(l){var d=new l.constructor(l.byteLength);return new hd(d).set(new hd(l)),d}function $9(l,d){var w=d?Hv(l.buffer):l.buffer;return new l.constructor(w,l.byteOffset,l.byteLength)}function U9(l){var d=new l.constructor(l.source,at.exec(l));return d.lastIndex=l.lastIndex,d}function j9(l){return vf?wt(vf.call(l)):{}}function WT(l,d){var w=d?Hv(l.buffer):l.buffer;return new l.constructor(w,l.byteOffset,l.length)}function XT(l,d){if(l!==d){var w=l!==r,M=l===null,z=l===l,Z=Ps(l),fe=d!==r,ye=d===null,Pe=d===d,et=Ps(d);if(!ye&&!et&&!Z&&l>d||Z&&fe&&Pe&&!ye&&!et||M&&fe&&Pe||!w&&Pe||!z)return 1;if(!M&&!Z&&!et&&l<d||et&&w&&z&&!M&&!Z||ye&&w&&z||!fe&&z||!Pe)return-1}return 0}function H9(l,d,w){for(var M=-1,z=l.criteria,Z=d.criteria,fe=z.length,ye=w.length;++M<fe;){var Pe=XT(z[M],Z[M]);if(Pe){if(M>=ye)return Pe;var et=w[M];return Pe*(et=="desc"?-1:1)}}return l.index-d.index}function YT(l,d,w,M){for(var z=-1,Z=l.length,fe=w.length,ye=-1,Pe=d.length,et=li(Z-fe,0),tt=ge(Pe+et),ot=!M;++ye<Pe;)tt[ye]=d[ye];for(;++z<fe;)(ot||z<Z)&&(tt[w[z]]=l[z]);for(;et--;)tt[ye++]=l[z++];return tt}function KT(l,d,w,M){for(var z=-1,Z=l.length,fe=-1,ye=w.length,Pe=-1,et=d.length,tt=li(Z-ye,0),ot=ge(tt+et),_t=!M;++z<tt;)ot[z]=l[z];for(var qt=z;++Pe<et;)ot[qt+Pe]=d[Pe];for(;++fe<ye;)(_t||z<Z)&&(ot[qt+w[fe]]=l[z++]);return ot}function ss(l,d){var w=-1,M=l.length;for(d||(d=ge(M));++w<M;)d[w]=l[w];return d}function Yo(l,d,w,M){var z=!w;w||(w={});for(var Z=-1,fe=d.length;++Z<fe;){var ye=d[Z],Pe=M?M(w[ye],l[ye],ye,w,l):r;Pe===r&&(Pe=l[ye]),z?Aa(w,ye,Pe):mf(w,ye,Pe)}return w}function W9(l,d){return Yo(l,Qv(l),d)}function X9(l,d){return Yo(l,cP(l),d)}function Pd(l,d){return function(w,M){var z=ur(w)?he:v9,Z=d?d():{};return z(w,l,Yt(M,2),Z)}}function Uc(l){return br(function(d,w){var M=-1,z=w.length,Z=z>1?w[z-1]:r,fe=z>2?w[2]:r;for(Z=l.length>3&&typeof Z=="function"?(z--,Z):r,fe&&Vi(w[0],w[1],fe)&&(Z=z<3?r:Z,z=1),d=wt(d);++M<z;){var ye=w[M];ye&&l(d,ye,M,Z)}return d})}function ZT(l,d){return function(w,M){if(w==null)return w;if(!os(w))return l(w,M);for(var z=w.length,Z=d?z:-1,fe=wt(w);(d?Z--:++Z<z)&&M(fe[Z],Z,fe)!==!1;);return w}}function JT(l){return function(d,w,M){for(var z=-1,Z=wt(d),fe=M(d),ye=fe.length;ye--;){var Pe=fe[l?ye:++z];if(w(Z[Pe],Pe,Z)===!1)break}return d}}function Y9(l,d,w){var M=d&b,z=xf(l);function Z(){var fe=this&&this!==Mn&&this instanceof Z?z:l;return fe.apply(M?w:this,arguments)}return Z}function QT(l){return function(d){d=rn(d);var w=is(d)?Fi(d):r,M=w?w[0]:d.charAt(0),z=w?iu(w,1).join(""):d.slice(1);return M[l]()+z}}function jc(l){return function(d){return sr(ZP(KP(d).replace(rf,"")),l,"")}}function xf(l){return function(){var d=arguments;switch(d.length){case 0:return new l;case 1:return new l(d[0]);case 2:return new l(d[0],d[1]);case 3:return new l(d[0],d[1],d[2]);case 4:return new l(d[0],d[1],d[2],d[3]);case 5:return new l(d[0],d[1],d[2],d[3],d[4]);case 6:return new l(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new l(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var w=$c(l.prototype),M=l.apply(w,d);return Ln(M)?M:w}}function K9(l,d,w){var M=xf(l);function z(){for(var Z=arguments.length,fe=ge(Z),ye=Z,Pe=Hc(z);ye--;)fe[ye]=arguments[ye];var et=Z<3&&fe[0]!==Pe&&fe[Z-1]!==Pe?[]:As(fe,Pe);if(Z-=et.length,Z<w)return iP(l,d,Cd,z.placeholder,r,fe,et,r,r,w-Z);var tt=this&&this!==Mn&&this instanceof z?M:l;return $(tt,this,fe)}return z}function eP(l){return function(d,w,M){var z=wt(d);if(!os(d)){var Z=Yt(w,3);d=mi(d),w=function(ye){return Z(z[ye],ye,z)}}var fe=l(d,w,M);return fe>-1?z[Z?d[fe]:fe]:r}}function tP(l){return Pa(function(d){var w=d.length,M=w,z=Gs.prototype.thru;for(l&&d.reverse();M--;){var Z=d[M];if(typeof Z!="function")throw new _r(o);if(z&&!fe&&Md(Z)=="wrapper")var fe=new Gs([],!0)}for(M=fe?M:w;++M<w;){Z=d[M];var ye=Md(Z),Pe=ye=="wrapper"?Zv(Z):r;Pe&&tm(Pe[0])&&Pe[1]==(p|A|I|P)&&!Pe[4].length&&Pe[9]==1?fe=fe[Md(Pe[0])].apply(fe,Pe[3]):fe=Z.length==1&&tm(Z)?fe[ye]():fe.thru(Z)}return function(){var et=arguments,tt=et[0];if(fe&&et.length==1&&ur(tt))return fe.plant(tt).value();for(var ot=0,_t=w?d[ot].apply(this,et):tt;++ot<w;)_t=d[ot].call(this,_t);return _t}})}function Cd(l,d,w,M,z,Z,fe,ye,Pe,et){var tt=d&p,ot=d&b,_t=d&S,qt=d&(A|T),Zt=d&O,gr=_t?r:xf(l);function Jt(){for(var Mr=arguments.length,$r=ge(Mr),Cs=Mr;Cs--;)$r[Cs]=arguments[Cs];if(qt)var Gi=Hc(Jt),Rs=Es($r,Gi);if(M&&($r=YT($r,M,z,qt)),Z&&($r=KT($r,Z,fe,qt)),Mr-=Rs,qt&&Mr<et){var Xn=As($r,Gi);return iP(l,d,Cd,Jt.placeholder,w,$r,Xn,ye,Pe,et-Mr)}var wo=ot?w:this,Oa=_t?wo[l]:l;return Mr=$r.length,ye?$r=vW($r,ye):Zt&&Mr>1&&$r.reverse(),tt&&Pe<Mr&&($r.length=Pe),this&&this!==Mn&&this instanceof Jt&&(Oa=gr||xf(Oa)),Oa.apply(wo,$r)}return Jt}function rP(l,d){return function(w,M){return E9(w,l,d(M),{})}}function Rd(l,d){return function(w,M){var z;if(w===r&&M===r)return d;if(w!==r&&(z=w),M!==r){if(z===r)return M;typeof w=="string"||typeof M=="string"?(w=Ts(w),M=Ts(M)):(w=VT(w),M=VT(M)),z=l(w,M)}return z}}function Wv(l){return Pa(function(d){return d=St(d,Di(Yt())),br(function(w){var M=this;return l(d,function(z){return $(z,M,w)})})})}function Id(l,d){d=d===r?" ":Ts(d);var w=d.length;if(w<2)return w?zv(d,l):d;var M=zv(d,vd(l/Wo(d)));return is(d)?iu(Fi(M),0,l).join(""):M.slice(0,l)}function Z9(l,d,w,M){var z=d&b,Z=xf(l);function fe(){for(var ye=-1,Pe=arguments.length,et=-1,tt=M.length,ot=ge(tt+Pe),_t=this&&this!==Mn&&this instanceof fe?Z:l;++et<tt;)ot[et]=M[et];for(;Pe--;)ot[et++]=arguments[++ye];return $(_t,z?w:this,ot)}return fe}function nP(l){return function(d,w,M){return M&&typeof M!="number"&&Vi(d,w,M)&&(w=M=r),d=Ia(d),w===r?(w=d,d=0):w=Ia(w),M=M===r?d<w?1:-1:Ia(M),q9(d,w,M,l)}}function Od(l){return function(d,w){return typeof d=="string"&&typeof w=="string"||(d=Hs(d),w=Hs(w)),l(d,w)}}function iP(l,d,w,M,z,Z,fe,ye,Pe,et){var tt=d&A,ot=tt?fe:r,_t=tt?r:fe,qt=tt?Z:r,Zt=tt?r:Z;d|=tt?I:q,d&=~(tt?q:I),d&E||(d&=-4);var gr=[l,d,z,qt,ot,Zt,_t,ye,Pe,et],Jt=w.apply(r,gr);return tm(l)&&vP(Jt,gr),Jt.placeholder=M,mP(Jt,l,d)}function Xv(l){var d=Pt[l];return function(w,M){if(w=Hs(w),M=M==null?0:Ci(hr(M),292),M&&mT(w)){var z=(rn(w)+"e").split("e"),Z=d(z[0]+"e"+(+z[1]+M));return z=(rn(Z)+"e").split("e"),+(z[0]+"e"+(+z[1]-M))}return d(w)}}var J9=Vc&&1/xa(new Vc([,-0]))[1]==U?function(l){return new Vc(l)}:vm;function sP(l){return function(d){var w=Ri(d);return w==L?Bc(d):w==Ce?lf(d):mo(d,l(d))}}function Ta(l,d,w,M,z,Z,fe,ye){var Pe=d&S;if(!Pe&&typeof l!="function")throw new _r(o);var et=M?M.length:0;if(et||(d&=-97,M=z=r),fe=fe===r?fe:li(hr(fe),0),ye=ye===r?ye:hr(ye),et-=z?z.length:0,d&q){var tt=M,ot=z;M=z=r}var _t=Pe?r:Zv(l),qt=[l,d,w,M,z,tt,ot,Z,fe,ye];if(_t&&dW(qt,_t),l=qt[0],d=qt[1],w=qt[2],M=qt[3],z=qt[4],ye=qt[9]=qt[9]===r?Pe?0:l.length:li(qt[9]-et,0),!ye&&d&(A|T)&&(d&=-25),!d||d==b)var Zt=Y9(l,d,w);else d==A||d==T?Zt=K9(l,d,ye):(d==I||d==(b|I))&&!z.length?Zt=Z9(l,d,w,M):Zt=Cd.apply(r,qt);var gr=_t?BT:vP;return mP(gr(Zt,qt),l,d)}function oP(l,d,w,M){return l===r||bo(l,ci[w])&&!ir.call(M,w)?d:l}function aP(l,d,w,M,z,Z){return Ln(l)&&Ln(d)&&(Z.set(d,l),Ed(l,d,r,aP,Z),Z.delete(d)),l}function Q9(l){return Af(l)?r:l}function uP(l,d,w,M,z,Z){var fe=w&m,ye=l.length,Pe=d.length;if(ye!=Pe&&!(fe&&Pe>ye))return!1;var et=Z.get(l),tt=Z.get(d);if(et&&tt)return et==d&&tt==l;var ot=-1,_t=!0,qt=w&_?new Gu:r;for(Z.set(l,d),Z.set(d,l);++ot<ye;){var Zt=l[ot],gr=d[ot];if(M)var Jt=fe?M(gr,Zt,ot,d,l,Z):M(Zt,gr,ot,l,d,Z);if(Jt!==r){if(Jt)continue;_t=!1;break}if(qt){if(!kn(d,function(Mr,$r){if(!Fu(qt,$r)&&(Zt===Mr||z(Zt,Mr,w,M,Z)))return qt.push($r)})){_t=!1;break}}else if(!(Zt===gr||z(Zt,gr,w,M,Z))){_t=!1;break}}return Z.delete(l),Z.delete(d),_t}function eW(l,d,w,M,z,Z,fe){switch(w){case mt:if(l.byteLength!=d.byteLength||l.byteOffset!=d.byteOffset)return!1;l=l.buffer,d=d.buffer;case ct:return!(l.byteLength!=d.byteLength||!Z(new hd(l),new hd(d)));case le:case We:case B:return bo(+l,+d);case Re:return l.name==d.name&&l.message==d.message;case Ae:case Be:return l==d+"";case L:var ye=Bc;case Ce:var Pe=M&m;if(ye||(ye=xa),l.size!=d.size&&!Pe)return!1;var et=fe.get(l);if(et)return et==d;M|=_,fe.set(l,d);var tt=uP(ye(l),ye(d),M,z,Z,fe);return fe.delete(l),tt;case Le:if(vf)return vf.call(l)==vf.call(d)}return!1}function tW(l,d,w,M,z,Z){var fe=w&m,ye=Yv(l),Pe=ye.length,et=Yv(d),tt=et.length;if(Pe!=tt&&!fe)return!1;for(var ot=Pe;ot--;){var _t=ye[ot];if(!(fe?_t in d:ir.call(d,_t)))return!1}var qt=Z.get(l),Zt=Z.get(d);if(qt&&Zt)return qt==d&&Zt==l;var gr=!0;Z.set(l,d),Z.set(d,l);for(var Jt=fe;++ot<Pe;){_t=ye[ot];var Mr=l[_t],$r=d[_t];if(M)var Cs=fe?M($r,Mr,_t,d,l,Z):M(Mr,$r,_t,l,d,Z);if(!(Cs===r?Mr===$r||z(Mr,$r,w,M,Z):Cs)){gr=!1;break}Jt||(Jt=_t=="constructor")}if(gr&&!Jt){var Gi=l.constructor,Rs=d.constructor;Gi!=Rs&&"constructor"in l&&"constructor"in d&&!(typeof Gi=="function"&&Gi instanceof Gi&&typeof Rs=="function"&&Rs instanceof Rs)&&(gr=!1)}return Z.delete(l),Z.delete(d),gr}function Pa(l){return nm(pP(l,r,SP),l+"")}function Yv(l){return CT(l,mi,Qv)}function Kv(l){return CT(l,as,cP)}var Zv=yd?function(l){return yd.get(l)}:vm;function Md(l){for(var d=l.name+"",w=Gc[d],M=ir.call(Gc,d)?w.length:0;M--;){var z=w[M],Z=z.func;if(Z==null||Z==l)return z.name}return d}function Hc(l){var d=ir.call(Y,"placeholder")?Y:l;return d.placeholder}function Yt(){var l=Y.iteratee||pm;return l=l===pm?OT:l,arguments.length?l(arguments[0],arguments[1]):l}function kd(l,d){var w=l.__data__;return cW(d)?w[typeof d=="string"?"string":"hash"]:w.map}function Jv(l){for(var d=mi(l),w=d.length;w--;){var M=d[w],z=l[M];d[w]=[M,z,hP(z)]}return d}function ju(l,d){var w=ad(l,d);return IT(w)?w:r}function rW(l){var d=ir.call(l,zu),w=l[zu];try{l[zu]=r;var M=!0}catch{}var z=ld.call(l);return M&&(d?l[zu]=w:delete l[zu]),z}var Qv=Tv?function(l){return l==null?[]:(l=wt(l),Ge(Tv(l),function(d){return gT.call(l,d)}))}:mm,cP=Tv?function(l){for(var d=[];l;)ar(d,Qv(l)),l=dd(l);return d}:mm,Ri=zi;(Pv&&Ri(new Pv(new ArrayBuffer(1)))!=mt||df&&Ri(new df)!=L||Cv&&Ri(Cv.resolve())!=xe||Vc&&Ri(new Vc)!=Ce||pf&&Ri(new pf)!=be)&&(Ri=function(l){var d=zi(l),w=d==X?l.constructor:r,M=w?Hu(w):"";if(M)switch(M){case FH:return mt;case BH:return L;case zH:return xe;case VH:return Ce;case GH:return be}return d});function nW(l,d,w){for(var M=-1,z=w.length;++M<z;){var Z=w[M],fe=Z.size;switch(Z.type){case"drop":l+=fe;break;case"dropRight":d-=fe;break;case"take":d=Ci(d,l+fe);break;case"takeRight":l=li(l,d-fe);break}}return{start:l,end:d}}function iW(l){var d=l.match(di);return d?d[1].split(Xe):[]}function lP(l,d,w){d=nu(d,l);for(var M=-1,z=d.length,Z=!1;++M<z;){var fe=Ko(d[M]);if(!(Z=l!=null&&w(l,fe)))break;l=l[fe]}return Z||++M!=z?Z:(z=l==null?0:l.length,!!z&&zd(z)&&Ca(fe,z)&&(ur(l)||Wu(l)))}function sW(l){var d=l.length,w=new l.constructor(d);return d&&typeof l[0]=="string"&&ir.call(l,"index")&&(w.index=l.index,w.input=l.input),w}function fP(l){return typeof l.constructor=="function"&&!Sf(l)?$c(dd(l)):{}}function oW(l,d,w){var M=l.constructor;switch(d){case ct:return Hv(l);case le:case We:return new M(+l);case mt:return $9(l,w);case ft:case it:case Wt:case yr:case Qt:case cr:case Lr:case Br:case bn:return WT(l,w);case L:return new M;case B:case Be:return new M(l);case Ae:return U9(l);case Ce:return new M;case Le:return j9(l)}}function aW(l,d){var w=d.length;if(!w)return l;var M=w-1;return d[M]=(w>1?"& ":"")+d[M],d=d.join(w>2?", ":" "),l.replace(On,`{
/* [wrapped with `+d+`] */
`)}function uW(l){return ur(l)||Wu(l)||!!(vT&&l&&l[vT])}function Ca(l,d){var w=typeof l;return d=d??j,!!d&&(w=="number"||w!="symbol"&&an.test(l))&&l>-1&&l%1==0&&l<d}function Vi(l,d,w){if(!Ln(w))return!1;var M=typeof d;return(M=="number"?os(w)&&Ca(d,w.length):M=="string"&&d in w)?bo(w[d],l):!1}function em(l,d){if(ur(l))return!1;var w=typeof l;return w=="number"||w=="symbol"||w=="boolean"||l==null||Ps(l)?!0:wn.test(l)||!Fn.test(l)||d!=null&&l in wt(d)}function cW(l){var d=typeof l;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?l!=="__proto__":l===null}function tm(l){var d=Md(l),w=Y[d];if(typeof w!="function"||!(d in qr.prototype))return!1;if(l===w)return!0;var M=Zv(w);return!!M&&l===M[0]}function lW(l){return!!hT&&hT in l}var fW=Bi?Ra:ym;function Sf(l){var d=l&&l.constructor,w=typeof d=="function"&&d.prototype||ci;return l===w}function hP(l){return l===l&&!Ln(l)}function dP(l,d){return function(w){return w==null?!1:w[l]===d&&(d!==r||l in wt(w))}}function hW(l){var d=Fd(l,function(M){return w.size===c&&w.clear(),M}),w=d.cache;return d}function dW(l,d){var w=l[1],M=d[1],z=w|M,Z=z<(b|S|p),fe=M==p&&w==A||M==p&&w==P&&l[7].length<=d[8]||M==(p|P)&&d[7].length<=d[8]&&w==A;if(!(Z||fe))return l;M&b&&(l[2]=d[2],z|=w&b?0:E);var ye=d[3];if(ye){var Pe=l[3];l[3]=Pe?YT(Pe,ye,d[4]):ye,l[4]=Pe?As(l[3],f):d[4]}return ye=d[5],ye&&(Pe=l[5],l[5]=Pe?KT(Pe,ye,d[6]):ye,l[6]=Pe?As(l[5],f):d[6]),ye=d[7],ye&&(l[7]=ye),M&p&&(l[8]=l[8]==null?d[8]:Ci(l[8],d[8])),l[9]==null&&(l[9]=d[9]),l[0]=d[0],l[1]=z,l}function pW(l){var d=[];if(l!=null)for(var w in wt(l))d.push(w);return d}function gW(l){return ld.call(l)}function pP(l,d,w){return d=li(d===r?l.length-1:d,0),function(){for(var M=arguments,z=-1,Z=li(M.length-d,0),fe=ge(Z);++z<Z;)fe[z]=M[d+z];z=-1;for(var ye=ge(d+1);++z<d;)ye[z]=M[z];return ye[d]=w(fe),$(l,this,ye)}}function gP(l,d){return d.length<2?l:Uu(l,Us(d,0,-1))}function vW(l,d){for(var w=l.length,M=Ci(d.length,w),z=ss(l);M--;){var Z=d[M];l[M]=Ca(Z,w)?z[Z]:r}return l}function rm(l,d){if(!(d==="constructor"&&typeof l[d]=="function")&&d!="__proto__")return l[d]}var vP=yP(BT),Ef=OH||function(l,d){return Mn.setTimeout(l,d)},nm=yP(B9);function mP(l,d,w){var M=d+"";return nm(l,aW(M,mW(iW(M),w)))}function yP(l){var d=0,w=0;return function(){var M=NH(),z=G-(M-w);if(w=M,z>0){if(++d>=W)return arguments[0]}else d=0;return l.apply(r,arguments)}}function Ld(l,d){var w=-1,M=l.length,z=M-1;for(d=d===r?M:d;++w<d;){var Z=Bv(w,z),fe=l[Z];l[Z]=l[w],l[w]=fe}return l.length=d,l}var _P=hW(function(l){var d=[];return l.charCodeAt(0)===46&&d.push(""),l.replace(jr,function(w,M,z,Z){d.push(z?Z.replace(kt,"$1"):M||w)}),d});function Ko(l){if(typeof l=="string"||Ps(l))return l;var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}function Hu(l){if(l!=null){try{return yo.call(l)}catch{}try{return l+""}catch{}}return""}function mW(l,d){return se(re,function(w){var M="_."+w[0];d&w[1]&&!Me(l,M)&&l.push(M)}),l.sort()}function bP(l){if(l instanceof qr)return l.clone();var d=new Gs(l.__wrapped__,l.__chain__);return d.__actions__=ss(l.__actions__),d.__index__=l.__index__,d.__values__=l.__values__,d}function yW(l,d,w){(w?Vi(l,d,w):d===r)?d=1:d=li(hr(d),0);var M=l==null?0:l.length;if(!M||d<1)return[];for(var z=0,Z=0,fe=ge(vd(M/d));z<M;)fe[Z++]=Us(l,z,z+=d);return fe}function _W(l){for(var d=-1,w=l==null?0:l.length,M=0,z=[];++d<w;){var Z=l[d];Z&&(z[M++]=Z)}return z}function bW(){var l=arguments.length;if(!l)return[];for(var d=ge(l-1),w=arguments[0],M=l;M--;)d[M-1]=arguments[M];return ar(ur(w)?ss(w):[w],xi(d,1))}var wW=br(function(l,d){return Wn(l)?yf(l,xi(d,1,Wn,!0)):[]}),xW=br(function(l,d){var w=js(d);return Wn(w)&&(w=r),Wn(l)?yf(l,xi(d,1,Wn,!0),Yt(w,2)):[]}),SW=br(function(l,d){var w=js(d);return Wn(w)&&(w=r),Wn(l)?yf(l,xi(d,1,Wn,!0),r,w):[]});function EW(l,d,w){var M=l==null?0:l.length;return M?(d=w||d===r?1:hr(d),Us(l,d<0?0:d,M)):[]}function AW(l,d,w){var M=l==null?0:l.length;return M?(d=w||d===r?1:hr(d),d=M-d,Us(l,0,d<0?0:d)):[]}function TW(l,d){return l&&l.length?Td(l,Yt(d,3),!0,!0):[]}function PW(l,d){return l&&l.length?Td(l,Yt(d,3),!0):[]}function CW(l,d,w,M){var z=l==null?0:l.length;return z?(w&&typeof w!="number"&&Vi(l,d,w)&&(w=0,M=z),b9(l,d,w,M)):[]}function wP(l,d,w){var M=l==null?0:l.length;if(!M)return-1;var z=w==null?0:hr(w);return z<0&&(z=li(M+z,0)),Pr(l,Yt(d,3),z)}function xP(l,d,w){var M=l==null?0:l.length;if(!M)return-1;var z=M-1;return w!==r&&(z=hr(w),z=w<0?li(M+z,0):Ci(z,M-1)),Pr(l,Yt(d,3),z,!0)}function SP(l){var d=l==null?0:l.length;return d?xi(l,1):[]}function RW(l){var d=l==null?0:l.length;return d?xi(l,U):[]}function IW(l,d){var w=l==null?0:l.length;return w?(d=d===r?1:hr(d),xi(l,d)):[]}function OW(l){for(var d=-1,w=l==null?0:l.length,M={};++d<w;){var z=l[d];M[z[0]]=z[1]}return M}function EP(l){return l&&l.length?l[0]:r}function MW(l,d,w){var M=l==null?0:l.length;if(!M)return-1;var z=w==null?0:hr(w);return z<0&&(z=li(M+z,0)),un(l,d,z)}function kW(l){var d=l==null?0:l.length;return d?Us(l,0,-1):[]}var LW=br(function(l){var d=St(l,Uv);return d.length&&d[0]===l[0]?Lv(d):[]}),NW=br(function(l){var d=js(l),w=St(l,Uv);return d===js(w)?d=r:w.pop(),w.length&&w[0]===l[0]?Lv(w,Yt(d,2)):[]}),qW=br(function(l){var d=js(l),w=St(l,Uv);return d=typeof d=="function"?d:r,d&&w.pop(),w.length&&w[0]===l[0]?Lv(w,r,d):[]});function DW(l,d){return l==null?"":kH.call(l,d)}function js(l){var d=l==null?0:l.length;return d?l[d-1]:r}function FW(l,d,w){var M=l==null?0:l.length;if(!M)return-1;var z=M;return w!==r&&(z=hr(w),z=z<0?li(M+z,0):Ci(z,M-1)),d===d?zc(l,d,z):Pr(l,Fc,z,!0)}function BW(l,d){return l&&l.length?NT(l,hr(d)):r}var zW=br(AP);function AP(l,d){return l&&l.length&&d&&d.length?Fv(l,d):l}function VW(l,d,w){return l&&l.length&&d&&d.length?Fv(l,d,Yt(w,2)):l}function GW(l,d,w){return l&&l.length&&d&&d.length?Fv(l,d,r,w):l}var $W=Pa(function(l,d){var w=l==null?0:l.length,M=Iv(l,d);return FT(l,St(d,function(z){return Ca(z,w)?+z:z}).sort(XT)),M});function UW(l,d){var w=[];if(!(l&&l.length))return w;var M=-1,z=[],Z=l.length;for(d=Yt(d,3);++M<Z;){var fe=l[M];d(fe,M,l)&&(w.push(fe),z.push(M))}return FT(l,z),w}function im(l){return l==null?l:DH.call(l)}function jW(l,d,w){var M=l==null?0:l.length;return M?(w&&typeof w!="number"&&Vi(l,d,w)?(d=0,w=M):(d=d==null?0:hr(d),w=w===r?M:hr(w)),Us(l,d,w)):[]}function HW(l,d){return Ad(l,d)}function WW(l,d,w){return Vv(l,d,Yt(w,2))}function XW(l,d){var w=l==null?0:l.length;if(w){var M=Ad(l,d);if(M<w&&bo(l[M],d))return M}return-1}function YW(l,d){return Ad(l,d,!0)}function KW(l,d,w){return Vv(l,d,Yt(w,2),!0)}function ZW(l,d){var w=l==null?0:l.length;if(w){var M=Ad(l,d,!0)-1;if(bo(l[M],d))return M}return-1}function JW(l){return l&&l.length?zT(l):[]}function QW(l,d){return l&&l.length?zT(l,Yt(d,2)):[]}function eX(l){var d=l==null?0:l.length;return d?Us(l,1,d):[]}function tX(l,d,w){return l&&l.length?(d=w||d===r?1:hr(d),Us(l,0,d<0?0:d)):[]}function rX(l,d,w){var M=l==null?0:l.length;return M?(d=w||d===r?1:hr(d),d=M-d,Us(l,d<0?0:d,M)):[]}function nX(l,d){return l&&l.length?Td(l,Yt(d,3),!1,!0):[]}function iX(l,d){return l&&l.length?Td(l,Yt(d,3)):[]}var sX=br(function(l){return ru(xi(l,1,Wn,!0))}),oX=br(function(l){var d=js(l);return Wn(d)&&(d=r),ru(xi(l,1,Wn,!0),Yt(d,2))}),aX=br(function(l){var d=js(l);return d=typeof d=="function"?d:r,ru(xi(l,1,Wn,!0),r,d)});function uX(l){return l&&l.length?ru(l):[]}function cX(l,d){return l&&l.length?ru(l,Yt(d,2)):[]}function lX(l,d){return d=typeof d=="function"?d:r,l&&l.length?ru(l,r,d):[]}function sm(l){if(!(l&&l.length))return[];var d=0;return l=Ge(l,function(w){if(Wn(w))return d=li(w.length,d),!0}),Du(d,function(w){return St(l,wa(w))})}function TP(l,d){if(!(l&&l.length))return[];var w=sm(l);return d==null?w:St(w,function(M){return $(d,r,M)})}var fX=br(function(l,d){return Wn(l)?yf(l,d):[]}),hX=br(function(l){return $v(Ge(l,Wn))}),dX=br(function(l){var d=js(l);return Wn(d)&&(d=r),$v(Ge(l,Wn),Yt(d,2))}),pX=br(function(l){var d=js(l);return d=typeof d=="function"?d:r,$v(Ge(l,Wn),r,d)}),gX=br(sm);function vX(l,d){return UT(l||[],d||[],mf)}function mX(l,d){return UT(l||[],d||[],wf)}var yX=br(function(l){var d=l.length,w=d>1?l[d-1]:r;return w=typeof w=="function"?(l.pop(),w):r,TP(l,w)});function PP(l){var d=Y(l);return d.__chain__=!0,d}function _X(l,d){return d(l),l}function Nd(l,d){return d(l)}var bX=Pa(function(l){var d=l.length,w=d?l[0]:0,M=this.__wrapped__,z=function(Z){return Iv(Z,l)};return d>1||this.__actions__.length||!(M instanceof qr)||!Ca(w)?this.thru(z):(M=M.slice(w,+w+(d?1:0)),M.__actions__.push({func:Nd,args:[z],thisArg:r}),new Gs(M,this.__chain__).thru(function(Z){return d&&!Z.length&&Z.push(r),Z}))});function wX(){return PP(this)}function xX(){return new Gs(this.value(),this.__chain__)}function SX(){this.__values__===r&&(this.__values__=VP(this.value()));var l=this.__index__>=this.__values__.length,d=l?r:this.__values__[this.__index__++];return{done:l,value:d}}function EX(){return this}function AX(l){for(var d,w=this;w instanceof bd;){var M=bP(w);M.__index__=0,M.__values__=r,d?z.__wrapped__=M:d=M;var z=M;w=w.__wrapped__}return z.__wrapped__=l,d}function TX(){var l=this.__wrapped__;if(l instanceof qr){var d=l;return this.__actions__.length&&(d=new qr(this)),d=d.reverse(),d.__actions__.push({func:Nd,args:[im],thisArg:r}),new Gs(d,this.__chain__)}return this.thru(im)}function PX(){return $T(this.__wrapped__,this.__actions__)}var CX=Pd(function(l,d,w){ir.call(l,w)?++l[w]:Aa(l,w,1)});function RX(l,d,w){var M=ur(l)?De:_9;return w&&Vi(l,d,w)&&(d=r),M(l,Yt(d,3))}function IX(l,d){var w=ur(l)?Ge:TT;return w(l,Yt(d,3))}var OX=eP(wP),MX=eP(xP);function kX(l,d){return xi(qd(l,d),1)}function LX(l,d){return xi(qd(l,d),U)}function NX(l,d,w){return w=w===r?1:hr(w),xi(qd(l,d),w)}function CP(l,d){var w=ur(l)?se:tu;return w(l,Yt(d,3))}function RP(l,d){var w=ur(l)?Ee:AT;return w(l,Yt(d,3))}var qX=Pd(function(l,d,w){ir.call(l,w)?l[w].push(d):Aa(l,w,[d])});function DX(l,d,w,M){l=os(l)?l:Xc(l),w=w&&!M?hr(w):0;var z=l.length;return w<0&&(w=li(z+w,0)),Vd(l)?w<=z&&l.indexOf(d,w)>-1:!!z&&un(l,d,w)>-1}var FX=br(function(l,d,w){var M=-1,z=typeof d=="function",Z=os(l)?ge(l.length):[];return tu(l,function(fe){Z[++M]=z?$(d,fe,w):_f(fe,d,w)}),Z}),BX=Pd(function(l,d,w){Aa(l,w,d)});function qd(l,d){var w=ur(l)?St:MT;return w(l,Yt(d,3))}function zX(l,d,w,M){return l==null?[]:(ur(d)||(d=d==null?[]:[d]),w=M?r:w,ur(w)||(w=w==null?[]:[w]),qT(l,d,w))}var VX=Pd(function(l,d,w){l[w?0:1].push(d)},function(){return[[],[]]});function GX(l,d,w){var M=ur(l)?sr:vo,z=arguments.length<3;return M(l,Yt(d,4),w,z,tu)}function $X(l,d,w){var M=ur(l)?ai:vo,z=arguments.length<3;return M(l,Yt(d,4),w,z,AT)}function UX(l,d){var w=ur(l)?Ge:TT;return w(l,Bd(Yt(d,3)))}function jX(l){var d=ur(l)?wT:D9;return d(l)}function HX(l,d,w){(w?Vi(l,d,w):d===r)?d=1:d=hr(d);var M=ur(l)?p9:F9;return M(l,d)}function WX(l){var d=ur(l)?g9:z9;return d(l)}function XX(l){if(l==null)return 0;if(os(l))return Vd(l)?Wo(l):l.length;var d=Ri(l);return d==L||d==Ce?l.size:qv(l).length}function YX(l,d,w){var M=ur(l)?kn:V9;return w&&Vi(l,d,w)&&(d=r),M(l,Yt(d,3))}var KX=br(function(l,d){if(l==null)return[];var w=d.length;return w>1&&Vi(l,d[0],d[1])?d=[]:w>2&&Vi(d[0],d[1],d[2])&&(d=[d[0]]),qT(l,xi(d,1),[])}),Dd=IH||function(){return Mn.Date.now()};function ZX(l,d){if(typeof d!="function")throw new _r(o);return l=hr(l),function(){if(--l<1)return d.apply(this,arguments)}}function IP(l,d,w){return d=w?r:d,d=l&&d==null?l.length:d,Ta(l,p,r,r,r,r,d)}function OP(l,d){var w;if(typeof d!="function")throw new _r(o);return l=hr(l),function(){return--l>0&&(w=d.apply(this,arguments)),l<=1&&(d=r),w}}var om=br(function(l,d,w){var M=b;if(w.length){var z=As(w,Hc(om));M|=I}return Ta(l,M,d,w,z)}),MP=br(function(l,d,w){var M=b|S;if(w.length){var z=As(w,Hc(MP));M|=I}return Ta(d,M,l,w,z)});function kP(l,d,w){d=w?r:d;var M=Ta(l,A,r,r,r,r,r,d);return M.placeholder=kP.placeholder,M}function LP(l,d,w){d=w?r:d;var M=Ta(l,T,r,r,r,r,r,d);return M.placeholder=LP.placeholder,M}function NP(l,d,w){var M,z,Z,fe,ye,Pe,et=0,tt=!1,ot=!1,_t=!0;if(typeof l!="function")throw new _r(o);d=Hs(d)||0,Ln(w)&&(tt=!!w.leading,ot="maxWait"in w,Z=ot?li(Hs(w.maxWait)||0,d):Z,_t="trailing"in w?!!w.trailing:_t);function qt(Xn){var wo=M,Oa=z;return M=z=r,et=Xn,fe=l.apply(Oa,wo),fe}function Zt(Xn){return et=Xn,ye=Ef(Mr,d),tt?qt(Xn):fe}function gr(Xn){var wo=Xn-Pe,Oa=Xn-et,eC=d-wo;return ot?Ci(eC,Z-Oa):eC}function Jt(Xn){var wo=Xn-Pe,Oa=Xn-et;return Pe===r||wo>=d||wo<0||ot&&Oa>=Z}function Mr(){var Xn=Dd();if(Jt(Xn))return $r(Xn);ye=Ef(Mr,gr(Xn))}function $r(Xn){return ye=r,_t&&M?qt(Xn):(M=z=r,fe)}function Cs(){ye!==r&&jT(ye),et=0,M=Pe=z=ye=r}function Gi(){return ye===r?fe:$r(Dd())}function Rs(){var Xn=Dd(),wo=Jt(Xn);if(M=arguments,z=this,Pe=Xn,wo){if(ye===r)return Zt(Pe);if(ot)return jT(ye),ye=Ef(Mr,d),qt(Pe)}return ye===r&&(ye=Ef(Mr,d)),fe}return Rs.cancel=Cs,Rs.flush=Gi,Rs}var JX=br(function(l,d){return ET(l,1,d)}),QX=br(function(l,d,w){return ET(l,Hs(d)||0,w)});function eY(l){return Ta(l,O)}function Fd(l,d){if(typeof l!="function"||d!=null&&typeof d!="function")throw new _r(o);var w=function(){var M=arguments,z=d?d.apply(this,M):M[0],Z=w.cache;if(Z.has(z))return Z.get(z);var fe=l.apply(this,M);return w.cache=Z.set(z,fe)||Z,fe};return w.cache=new(Fd.Cache||Ea),w}Fd.Cache=Ea;function Bd(l){if(typeof l!="function")throw new _r(o);return function(){var d=arguments;switch(d.length){case 0:return!l.call(this);case 1:return!l.call(this,d[0]);case 2:return!l.call(this,d[0],d[1]);case 3:return!l.call(this,d[0],d[1],d[2])}return!l.apply(this,d)}}function tY(l){return OP(2,l)}var rY=G9(function(l,d){d=d.length==1&&ur(d[0])?St(d[0],Di(Yt())):St(xi(d,1),Di(Yt()));var w=d.length;return br(function(M){for(var z=-1,Z=Ci(M.length,w);++z<Z;)M[z]=d[z].call(this,M[z]);return $(l,this,M)})}),am=br(function(l,d){var w=As(d,Hc(am));return Ta(l,I,r,d,w)}),qP=br(function(l,d){var w=As(d,Hc(qP));return Ta(l,q,r,d,w)}),nY=Pa(function(l,d){return Ta(l,P,r,r,r,d)});function iY(l,d){if(typeof l!="function")throw new _r(o);return d=d===r?d:hr(d),br(l,d)}function sY(l,d){if(typeof l!="function")throw new _r(o);return d=d==null?0:li(hr(d),0),br(function(w){var M=w[d],z=iu(w,0,d);return M&&ar(z,M),$(l,this,z)})}function oY(l,d,w){var M=!0,z=!0;if(typeof l!="function")throw new _r(o);return Ln(w)&&(M="leading"in w?!!w.leading:M,z="trailing"in w?!!w.trailing:z),NP(l,d,{leading:M,maxWait:d,trailing:z})}function aY(l){return IP(l,1)}function uY(l,d){return am(jv(d),l)}function cY(){if(!arguments.length)return[];var l=arguments[0];return ur(l)?l:[l]}function lY(l){return $s(l,y)}function fY(l,d){return d=typeof d=="function"?d:r,$s(l,y,d)}function hY(l){return $s(l,h|y)}function dY(l,d){return d=typeof d=="function"?d:r,$s(l,h|y,d)}function pY(l,d){return d==null||ST(l,d,mi(d))}function bo(l,d){return l===d||l!==l&&d!==d}var gY=Od(kv),vY=Od(function(l,d){return l>=d}),Wu=RT(function(){return arguments}())?RT:function(l){return zn(l)&&ir.call(l,"callee")&&!gT.call(l,"callee")},ur=ge.isArray,mY=v?Di(v):A9;function os(l){return l!=null&&zd(l.length)&&!Ra(l)}function Wn(l){return zn(l)&&os(l)}function yY(l){return l===!0||l===!1||zn(l)&&zi(l)==le}var su=MH||ym,_Y=x?Di(x):T9;function bY(l){return zn(l)&&l.nodeType===1&&!Af(l)}function wY(l){if(l==null)return!0;if(os(l)&&(ur(l)||typeof l=="string"||typeof l.splice=="function"||su(l)||Wc(l)||Wu(l)))return!l.length;var d=Ri(l);if(d==L||d==Ce)return!l.size;if(Sf(l))return!qv(l).length;for(var w in l)if(ir.call(l,w))return!1;return!0}function xY(l,d){return bf(l,d)}function SY(l,d,w){w=typeof w=="function"?w:r;var M=w?w(l,d):r;return M===r?bf(l,d,r,w):!!M}function um(l){if(!zn(l))return!1;var d=zi(l);return d==Re||d==Ne||typeof l.message=="string"&&typeof l.name=="string"&&!Af(l)}function EY(l){return typeof l=="number"&&mT(l)}function Ra(l){if(!Ln(l))return!1;var d=zi(l);return d==rt||d==Ve||d==te||d==ue}function DP(l){return typeof l=="number"&&l==hr(l)}function zd(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=j}function Ln(l){var d=typeof l;return l!=null&&(d=="object"||d=="function")}function zn(l){return l!=null&&typeof l=="object"}var FP=C?Di(C):C9;function AY(l,d){return l===d||Nv(l,d,Jv(d))}function TY(l,d,w){return w=typeof w=="function"?w:r,Nv(l,d,Jv(d),w)}function PY(l){return BP(l)&&l!=+l}function CY(l){if(fW(l))throw new Qe(s);return IT(l)}function RY(l){return l===null}function IY(l){return l==null}function BP(l){return typeof l=="number"||zn(l)&&zi(l)==B}function Af(l){if(!zn(l)||zi(l)!=X)return!1;var d=dd(l);if(d===null)return!0;var w=ir.call(d,"constructor")&&d.constructor;return typeof w=="function"&&w instanceof w&&yo.call(w)==TH}var cm=k?Di(k):R9;function OY(l){return DP(l)&&l>=-9007199254740991&&l<=j}var zP=D?Di(D):I9;function Vd(l){return typeof l=="string"||!ur(l)&&zn(l)&&zi(l)==Be}function Ps(l){return typeof l=="symbol"||zn(l)&&zi(l)==Le}var Wc=F?Di(F):O9;function MY(l){return l===r}function kY(l){return zn(l)&&Ri(l)==be}function LY(l){return zn(l)&&zi(l)==je}var NY=Od(Dv),qY=Od(function(l,d){return l<=d});function VP(l){if(!l)return[];if(os(l))return Vd(l)?Fi(l):ss(l);if(hf&&l[hf])return Ho(l[hf]());var d=Ri(l),w=d==L?Bc:d==Ce?xa:Xc;return w(l)}function Ia(l){if(!l)return l===0?l:0;if(l=Hs(l),l===U||l===-1/0){var d=l<0?-1:1;return d*J}return l===l?l:0}function hr(l){var d=Ia(l),w=d%1;return d===d?w?d-w:d:0}function GP(l){return l?$u(hr(l),0,ce):0}function Hs(l){if(typeof l=="number")return l;if(Ps(l))return de;if(Ln(l)){var d=typeof l.valueOf=="function"?l.valueOf():l;l=Ln(d)?d+"":d}if(typeof l!="string")return l===0?l:+l;l=Vs(l);var w=yt.test(l);return w||zt.test(l)?wv(l.slice(2),w?2:8):He.test(l)?de:+l}function $P(l){return Yo(l,as(l))}function DY(l){return l?$u(hr(l),-9007199254740991,j):l===0?l:0}function rn(l){return l==null?"":Ts(l)}var FY=Uc(function(l,d){if(Sf(d)||os(d)){Yo(d,mi(d),l);return}for(var w in d)ir.call(d,w)&&mf(l,w,d[w])}),UP=Uc(function(l,d){Yo(d,as(d),l)}),Gd=Uc(function(l,d,w,M){Yo(d,as(d),l,M)}),BY=Uc(function(l,d,w,M){Yo(d,mi(d),l,M)}),zY=Pa(Iv);function VY(l,d){var w=$c(l);return d==null?w:xT(w,d)}var GY=br(function(l,d){l=wt(l);var w=-1,M=d.length,z=M>2?d[2]:r;for(z&&Vi(d[0],d[1],z)&&(M=1);++w<M;)for(var Z=d[w],fe=as(Z),ye=-1,Pe=fe.length;++ye<Pe;){var et=fe[ye],tt=l[et];(tt===r||bo(tt,ci[et])&&!ir.call(l,et))&&(l[et]=Z[et])}return l}),$Y=br(function(l){return l.push(r,aP),$(jP,r,l)});function UY(l,d){return Uo(l,Yt(d,3),Xo)}function jY(l,d){return Uo(l,Yt(d,3),Mv)}function HY(l,d){return l==null?l:Ov(l,Yt(d,3),as)}function WY(l,d){return l==null?l:PT(l,Yt(d,3),as)}function XY(l,d){return l&&Xo(l,Yt(d,3))}function YY(l,d){return l&&Mv(l,Yt(d,3))}function KY(l){return l==null?[]:Sd(l,mi(l))}function ZY(l){return l==null?[]:Sd(l,as(l))}function lm(l,d,w){var M=l==null?r:Uu(l,d);return M===r?w:M}function JY(l,d){return l!=null&&lP(l,d,w9)}function fm(l,d){return l!=null&&lP(l,d,x9)}var QY=rP(function(l,d,w){d!=null&&typeof d.toString!="function"&&(d=ld.call(d)),l[d]=w},dm(us)),eK=rP(function(l,d,w){d!=null&&typeof d.toString!="function"&&(d=ld.call(d)),ir.call(l,d)?l[d].push(w):l[d]=[w]},Yt),tK=br(_f);function mi(l){return os(l)?bT(l):qv(l)}function as(l){return os(l)?bT(l,!0):M9(l)}function rK(l,d){var w={};return d=Yt(d,3),Xo(l,function(M,z,Z){Aa(w,d(M,z,Z),M)}),w}function nK(l,d){var w={};return d=Yt(d,3),Xo(l,function(M,z,Z){Aa(w,z,d(M,z,Z))}),w}var iK=Uc(function(l,d,w){Ed(l,d,w)}),jP=Uc(function(l,d,w,M){Ed(l,d,w,M)}),sK=Pa(function(l,d){var w={};if(l==null)return w;var M=!1;d=St(d,function(Z){return Z=nu(Z,l),M||(M=Z.length>1),Z}),Yo(l,Kv(l),w),M&&(w=$s(w,h|g|y,Q9));for(var z=d.length;z--;)Gv(w,d[z]);return w});function oK(l,d){return HP(l,Bd(Yt(d)))}var aK=Pa(function(l,d){return l==null?{}:L9(l,d)});function HP(l,d){if(l==null)return{};var w=St(Kv(l),function(M){return[M]});return d=Yt(d),DT(l,w,function(M,z){return d(M,z[0])})}function uK(l,d,w){d=nu(d,l);var M=-1,z=d.length;for(z||(z=1,l=r);++M<z;){var Z=l==null?r:l[Ko(d[M])];Z===r&&(M=z,Z=w),l=Ra(Z)?Z.call(l):Z}return l}function cK(l,d,w){return l==null?l:wf(l,d,w)}function lK(l,d,w,M){return M=typeof M=="function"?M:r,l==null?l:wf(l,d,w,M)}var WP=sP(mi),XP=sP(as);function fK(l,d,w){var M=ur(l),z=M||su(l)||Wc(l);if(d=Yt(d,4),w==null){var Z=l&&l.constructor;z?w=M?new Z:[]:Ln(l)?w=Ra(Z)?$c(dd(l)):{}:w={}}return(z?se:Xo)(l,function(fe,ye,Pe){return d(w,fe,ye,Pe)}),w}function hK(l,d){return l==null?!0:Gv(l,d)}function dK(l,d,w){return l==null?l:GT(l,d,jv(w))}function pK(l,d,w,M){return M=typeof M=="function"?M:r,l==null?l:GT(l,d,jv(w),M)}function Xc(l){return l==null?[]:uf(l,mi(l))}function gK(l){return l==null?[]:uf(l,as(l))}function vK(l,d,w){return w===r&&(w=d,d=r),w!==r&&(w=Hs(w),w=w===w?w:0),d!==r&&(d=Hs(d),d=d===d?d:0),$u(Hs(l),d,w)}function mK(l,d,w){return d=Ia(d),w===r?(w=d,d=0):w=Ia(w),l=Hs(l),S9(l,d,w)}function yK(l,d,w){if(w&&typeof w!="boolean"&&Vi(l,d,w)&&(d=w=r),w===r&&(typeof d=="boolean"?(w=d,d=r):typeof l=="boolean"&&(w=l,l=r)),l===r&&d===r?(l=0,d=1):(l=Ia(l),d===r?(d=l,l=0):d=Ia(d)),l>d){var M=l;l=d,d=M}if(w||l%1||d%1){var z=yT();return Ci(l+z*(d-l+of("1e-"+((z+"").length-1))),d)}return Bv(l,d)}var _K=jc(function(l,d,w){return d=d.toLowerCase(),l+(w?YP(d):d)});function YP(l){return hm(rn(l).toLowerCase())}function KP(l){return l=rn(l),l&&l.replace(jn,Ja).replace(gv,"")}function bK(l,d,w){l=rn(l),d=Ts(d);var M=l.length;w=w===r?M:$u(hr(w),0,M);var z=w;return w-=d.length,w>=0&&l.slice(w,z)==d}function wK(l){return l=rn(l),l&&ei.test(l)?l.replace(pn,Sv):l}function xK(l){return l=rn(l),l&&hi.test(l)?l.replace($n,"\\$&"):l}var SK=jc(function(l,d,w){return l+(w?"-":"")+d.toLowerCase()}),EK=jc(function(l,d,w){return l+(w?" ":"")+d.toLowerCase()}),AK=QT("toLowerCase");function TK(l,d,w){l=rn(l),d=hr(d);var M=d?Wo(l):0;if(!d||M>=d)return l;var z=(d-M)/2;return Id(md(z),w)+l+Id(vd(z),w)}function PK(l,d,w){l=rn(l),d=hr(d);var M=d?Wo(l):0;return d&&M<d?l+Id(d-M,w):l}function CK(l,d,w){l=rn(l),d=hr(d);var M=d?Wo(l):0;return d&&M<d?Id(d-M,w)+l:l}function RK(l,d,w){return w||d==null?d=0:d&&(d=+d),qH(rn(l).replace(Jr,""),d||0)}function IK(l,d,w){return(w?Vi(l,d,w):d===r)?d=1:d=hr(d),zv(rn(l),d)}function OK(){var l=arguments,d=rn(l[0]);return l.length<3?d:d.replace(l[1],l[2])}var MK=jc(function(l,d,w){return l+(w?"_":"")+d.toLowerCase()});function kK(l,d,w){return w&&typeof w!="number"&&Vi(l,d,w)&&(d=w=r),w=w===r?ce:w>>>0,w?(l=rn(l),l&&(typeof d=="string"||d!=null&&!cm(d))&&(d=Ts(d),!d&&is(l))?iu(Fi(l),0,w):l.split(d,w)):[]}var LK=jc(function(l,d,w){return l+(w?" ":"")+hm(d)});function NK(l,d,w){return l=rn(l),w=w==null?0:$u(hr(w),0,l.length),d=Ts(d),l.slice(w,w+d.length)==d}function qK(l,d,w){var M=Y.templateSettings;w&&Vi(l,d,w)&&(d=r),l=rn(l),d=Gd({},d,M,oP);var z=Gd({},d.imports,M.imports,oP),Z=mi(z),fe=uf(z,Z),ye,Pe,et=0,tt=d.interpolate||Mt,ot="__p += '",_t=fr((d.escape||Mt).source+"|"+tt.source+"|"+(tt===zr?Lt:Mt).source+"|"+(d.evaluate||Mt).source+"|$","g"),qt="//# sourceURL="+(ir.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++bv+"]")+`
`;l.replace(_t,function(Jt,Mr,$r,Cs,Gi,Rs){return $r||($r=Cs),ot+=l.slice(et,Rs).replace(en,Ev),Mr&&(ye=!0,ot+=`' +
__e(`+Mr+`) +
'`),Gi&&(Pe=!0,ot+=`';
`+Gi+`;
__p += '`),$r&&(ot+=`' +
((__t = (`+$r+`)) == null ? '' : __t) +
'`),et=Rs+Jt.length,Jt}),ot+=`';
`;var Zt=ir.call(d,"variable")&&d.variable;if(!Zt)ot=`with (obj) {
`+ot+`
}
`;else if(Rt.test(Zt))throw new Qe(a);ot=(Pe?ot.replace(tr,""):ot).replace(Or,"$1").replace(vn,"$1;"),ot="function("+(Zt||"obj")+`) {
`+(Zt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ye?", __e = _.escape":"")+(Pe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ot+`return __p
}`;var gr=JP(function(){return At(Z,qt+"return "+ot).apply(r,fe)});if(gr.source=ot,um(gr))throw gr;return gr}function DK(l){return rn(l).toLowerCase()}function FK(l){return rn(l).toUpperCase()}function BK(l,d,w){if(l=rn(l),l&&(w||d===r))return Vs(l);if(!l||!(d=Ts(d)))return l;var M=Fi(l),z=Fi(d),Z=Yr(M,z),fe=Bu(M,z)+1;return iu(M,Z,fe).join("")}function zK(l,d,w){if(l=rn(l),l&&(w||d===r))return l.slice(0,ud(l)+1);if(!l||!(d=Ts(d)))return l;var M=Fi(l),z=Bu(M,Fi(d))+1;return iu(M,0,z).join("")}function VK(l,d,w){if(l=rn(l),l&&(w||d===r))return l.replace(Jr,"");if(!l||!(d=Ts(d)))return l;var M=Fi(l),z=Yr(M,Fi(d));return iu(M,z).join("")}function GK(l,d){var w=N,M=V;if(Ln(d)){var z="separator"in d?d.separator:z;w="length"in d?hr(d.length):w,M="omission"in d?Ts(d.omission):M}l=rn(l);var Z=l.length;if(is(l)){var fe=Fi(l);Z=fe.length}if(w>=Z)return l;var ye=w-Wo(M);if(ye<1)return M;var Pe=fe?iu(fe,0,ye).join(""):l.slice(0,ye);if(z===r)return Pe+M;if(fe&&(ye+=Pe.length-ye),cm(z)){if(l.slice(ye).search(z)){var et,tt=Pe;for(z.global||(z=fr(z.source,rn(at.exec(z))+"g")),z.lastIndex=0;et=z.exec(tt);)var ot=et.index;Pe=Pe.slice(0,ot===r?ye:ot)}}else if(l.indexOf(Ts(z),ye)!=ye){var _t=Pe.lastIndexOf(z);_t>-1&&(Pe=Pe.slice(0,_t))}return Pe+M}function $K(l){return l=rn(l),l&&Gn.test(l)?l.replace(mn,ff):l}var UK=jc(function(l,d,w){return l+(w?" ":"")+d.toUpperCase()}),hm=QT("toUpperCase");function ZP(l,d,w){return l=rn(l),d=w?r:d,d===r?cf(l)?_e(l):Tr(l):l.match(d)||[]}var JP=br(function(l,d){try{return $(l,r,d)}catch(w){return um(w)?w:new Qe(w)}}),jK=Pa(function(l,d){return se(d,function(w){w=Ko(w),Aa(l,w,om(l[w],l))}),l});function HK(l){var d=l==null?0:l.length,w=Yt();return l=d?St(l,function(M){if(typeof M[1]!="function")throw new _r(o);return[w(M[0]),M[1]]}):[],br(function(M){for(var z=-1;++z<d;){var Z=l[z];if($(Z[0],this,M))return $(Z[1],this,M)}})}function WK(l){return y9($s(l,h))}function dm(l){return function(){return l}}function XK(l,d){return l==null||l!==l?d:l}var YK=tP(),KK=tP(!0);function us(l){return l}function pm(l){return OT(typeof l=="function"?l:$s(l,h))}function ZK(l){return kT($s(l,h))}function JK(l,d){return LT(l,$s(d,h))}var QK=br(function(l,d){return function(w){return _f(w,l,d)}}),eZ=br(function(l,d){return function(w){return _f(l,w,d)}});function gm(l,d,w){var M=mi(d),z=Sd(d,M);w==null&&!(Ln(d)&&(z.length||!M.length))&&(w=d,d=l,l=this,z=Sd(d,mi(d)));var Z=!(Ln(w)&&"chain"in w)||!!w.chain,fe=Ra(l);return se(z,function(ye){var Pe=d[ye];l[ye]=Pe,fe&&(l.prototype[ye]=function(){var et=this.__chain__;if(Z||et){var tt=l(this.__wrapped__),ot=tt.__actions__=ss(this.__actions__);return ot.push({func:Pe,args:arguments,thisArg:l}),tt.__chain__=et,tt}return Pe.apply(l,ar([this.value()],arguments))})}),l}function tZ(){return Mn._===this&&(Mn._=PH),this}function vm(){}function rZ(l){return l=hr(l),br(function(d){return NT(d,l)})}var nZ=Wv(St),iZ=Wv(De),sZ=Wv(kn);function QP(l){return em(l)?wa(Ko(l)):N9(l)}function oZ(l){return function(d){return l==null?r:Uu(l,d)}}var aZ=nP(),uZ=nP(!0);function mm(){return[]}function ym(){return!1}function cZ(){return{}}function lZ(){return""}function fZ(){return!0}function hZ(l,d){if(l=hr(l),l<1||l>j)return[];var w=ce,M=Ci(l,ce);d=Yt(d),l-=ce;for(var z=Du(M,d);++w<l;)d(w);return z}function dZ(l){return ur(l)?St(l,Ko):Ps(l)?[l]:ss(_P(rn(l)))}function pZ(l){var d=++AH;return rn(l)+d}var gZ=Rd(function(l,d){return l+d},0),vZ=Xv("ceil"),mZ=Rd(function(l,d){return l/d},1),yZ=Xv("floor");function _Z(l){return l&&l.length?xd(l,us,kv):r}function bZ(l,d){return l&&l.length?xd(l,Yt(d,2),kv):r}function wZ(l){return Ss(l,us)}function xZ(l,d){return Ss(l,Yt(d,2))}function SZ(l){return l&&l.length?xd(l,us,Dv):r}function EZ(l,d){return l&&l.length?xd(l,Yt(d,2),Dv):r}var AZ=Rd(function(l,d){return l*d},1),TZ=Xv("round"),PZ=Rd(function(l,d){return l-d},0);function CZ(l){return l&&l.length?Pi(l,us):0}function RZ(l,d){return l&&l.length?Pi(l,Yt(d,2)):0}return Y.after=ZX,Y.ary=IP,Y.assign=FY,Y.assignIn=UP,Y.assignInWith=Gd,Y.assignWith=BY,Y.at=zY,Y.before=OP,Y.bind=om,Y.bindAll=jK,Y.bindKey=MP,Y.castArray=cY,Y.chain=PP,Y.chunk=yW,Y.compact=_W,Y.concat=bW,Y.cond=HK,Y.conforms=WK,Y.constant=dm,Y.countBy=CX,Y.create=VY,Y.curry=kP,Y.curryRight=LP,Y.debounce=NP,Y.defaults=GY,Y.defaultsDeep=$Y,Y.defer=JX,Y.delay=QX,Y.difference=wW,Y.differenceBy=xW,Y.differenceWith=SW,Y.drop=EW,Y.dropRight=AW,Y.dropRightWhile=TW,Y.dropWhile=PW,Y.fill=CW,Y.filter=IX,Y.flatMap=kX,Y.flatMapDeep=LX,Y.flatMapDepth=NX,Y.flatten=SP,Y.flattenDeep=RW,Y.flattenDepth=IW,Y.flip=eY,Y.flow=YK,Y.flowRight=KK,Y.fromPairs=OW,Y.functions=KY,Y.functionsIn=ZY,Y.groupBy=qX,Y.initial=kW,Y.intersection=LW,Y.intersectionBy=NW,Y.intersectionWith=qW,Y.invert=QY,Y.invertBy=eK,Y.invokeMap=FX,Y.iteratee=pm,Y.keyBy=BX,Y.keys=mi,Y.keysIn=as,Y.map=qd,Y.mapKeys=rK,Y.mapValues=nK,Y.matches=ZK,Y.matchesProperty=JK,Y.memoize=Fd,Y.merge=iK,Y.mergeWith=jP,Y.method=QK,Y.methodOf=eZ,Y.mixin=gm,Y.negate=Bd,Y.nthArg=rZ,Y.omit=sK,Y.omitBy=oK,Y.once=tY,Y.orderBy=zX,Y.over=nZ,Y.overArgs=rY,Y.overEvery=iZ,Y.overSome=sZ,Y.partial=am,Y.partialRight=qP,Y.partition=VX,Y.pick=aK,Y.pickBy=HP,Y.property=QP,Y.propertyOf=oZ,Y.pull=zW,Y.pullAll=AP,Y.pullAllBy=VW,Y.pullAllWith=GW,Y.pullAt=$W,Y.range=aZ,Y.rangeRight=uZ,Y.rearg=nY,Y.reject=UX,Y.remove=UW,Y.rest=iY,Y.reverse=im,Y.sampleSize=HX,Y.set=cK,Y.setWith=lK,Y.shuffle=WX,Y.slice=jW,Y.sortBy=KX,Y.sortedUniq=JW,Y.sortedUniqBy=QW,Y.split=kK,Y.spread=sY,Y.tail=eX,Y.take=tX,Y.takeRight=rX,Y.takeRightWhile=nX,Y.takeWhile=iX,Y.tap=_X,Y.throttle=oY,Y.thru=Nd,Y.toArray=VP,Y.toPairs=WP,Y.toPairsIn=XP,Y.toPath=dZ,Y.toPlainObject=$P,Y.transform=fK,Y.unary=aY,Y.union=sX,Y.unionBy=oX,Y.unionWith=aX,Y.uniq=uX,Y.uniqBy=cX,Y.uniqWith=lX,Y.unset=hK,Y.unzip=sm,Y.unzipWith=TP,Y.update=dK,Y.updateWith=pK,Y.values=Xc,Y.valuesIn=gK,Y.without=fX,Y.words=ZP,Y.wrap=uY,Y.xor=hX,Y.xorBy=dX,Y.xorWith=pX,Y.zip=gX,Y.zipObject=vX,Y.zipObjectDeep=mX,Y.zipWith=yX,Y.entries=WP,Y.entriesIn=XP,Y.extend=UP,Y.extendWith=Gd,gm(Y,Y),Y.add=gZ,Y.attempt=JP,Y.camelCase=_K,Y.capitalize=YP,Y.ceil=vZ,Y.clamp=vK,Y.clone=lY,Y.cloneDeep=hY,Y.cloneDeepWith=dY,Y.cloneWith=fY,Y.conformsTo=pY,Y.deburr=KP,Y.defaultTo=XK,Y.divide=mZ,Y.endsWith=bK,Y.eq=bo,Y.escape=wK,Y.escapeRegExp=xK,Y.every=RX,Y.find=OX,Y.findIndex=wP,Y.findKey=UY,Y.findLast=MX,Y.findLastIndex=xP,Y.findLastKey=jY,Y.floor=yZ,Y.forEach=CP,Y.forEachRight=RP,Y.forIn=HY,Y.forInRight=WY,Y.forOwn=XY,Y.forOwnRight=YY,Y.get=lm,Y.gt=gY,Y.gte=vY,Y.has=JY,Y.hasIn=fm,Y.head=EP,Y.identity=us,Y.includes=DX,Y.indexOf=MW,Y.inRange=mK,Y.invoke=tK,Y.isArguments=Wu,Y.isArray=ur,Y.isArrayBuffer=mY,Y.isArrayLike=os,Y.isArrayLikeObject=Wn,Y.isBoolean=yY,Y.isBuffer=su,Y.isDate=_Y,Y.isElement=bY,Y.isEmpty=wY,Y.isEqual=xY,Y.isEqualWith=SY,Y.isError=um,Y.isFinite=EY,Y.isFunction=Ra,Y.isInteger=DP,Y.isLength=zd,Y.isMap=FP,Y.isMatch=AY,Y.isMatchWith=TY,Y.isNaN=PY,Y.isNative=CY,Y.isNil=IY,Y.isNull=RY,Y.isNumber=BP,Y.isObject=Ln,Y.isObjectLike=zn,Y.isPlainObject=Af,Y.isRegExp=cm,Y.isSafeInteger=OY,Y.isSet=zP,Y.isString=Vd,Y.isSymbol=Ps,Y.isTypedArray=Wc,Y.isUndefined=MY,Y.isWeakMap=kY,Y.isWeakSet=LY,Y.join=DW,Y.kebabCase=SK,Y.last=js,Y.lastIndexOf=FW,Y.lowerCase=EK,Y.lowerFirst=AK,Y.lt=NY,Y.lte=qY,Y.max=_Z,Y.maxBy=bZ,Y.mean=wZ,Y.meanBy=xZ,Y.min=SZ,Y.minBy=EZ,Y.stubArray=mm,Y.stubFalse=ym,Y.stubObject=cZ,Y.stubString=lZ,Y.stubTrue=fZ,Y.multiply=AZ,Y.nth=BW,Y.noConflict=tZ,Y.noop=vm,Y.now=Dd,Y.pad=TK,Y.padEnd=PK,Y.padStart=CK,Y.parseInt=RK,Y.random=yK,Y.reduce=GX,Y.reduceRight=$X,Y.repeat=IK,Y.replace=OK,Y.result=uK,Y.round=TZ,Y.runInContext=Q,Y.sample=jX,Y.size=XX,Y.snakeCase=MK,Y.some=YX,Y.sortedIndex=HW,Y.sortedIndexBy=WW,Y.sortedIndexOf=XW,Y.sortedLastIndex=YW,Y.sortedLastIndexBy=KW,Y.sortedLastIndexOf=ZW,Y.startCase=LK,Y.startsWith=NK,Y.subtract=PZ,Y.sum=CZ,Y.sumBy=RZ,Y.template=qK,Y.times=hZ,Y.toFinite=Ia,Y.toInteger=hr,Y.toLength=GP,Y.toLower=DK,Y.toNumber=Hs,Y.toSafeInteger=DY,Y.toString=rn,Y.toUpper=FK,Y.trim=BK,Y.trimEnd=zK,Y.trimStart=VK,Y.truncate=GK,Y.unescape=$K,Y.uniqueId=pZ,Y.upperCase=UK,Y.upperFirst=hm,Y.each=CP,Y.eachRight=RP,Y.first=EP,gm(Y,function(){var l={};return Xo(Y,function(d,w){ir.call(Y.prototype,w)||(l[w]=d)}),l}(),{chain:!1}),Y.VERSION=n,se(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){Y[l].placeholder=Y}),se(["drop","take"],function(l,d){qr.prototype[l]=function(w){w=w===r?1:li(hr(w),0);var M=this.__filtered__&&!d?new qr(this):this.clone();return M.__filtered__?M.__takeCount__=Ci(w,M.__takeCount__):M.__views__.push({size:Ci(w,ce),type:l+(M.__dir__<0?"Right":"")}),M},qr.prototype[l+"Right"]=function(w){return this.reverse()[l](w).reverse()}}),se(["filter","map","takeWhile"],function(l,d){var w=d+1,M=w==ee||w==K;qr.prototype[l]=function(z){var Z=this.clone();return Z.__iteratees__.push({iteratee:Yt(z,3),type:w}),Z.__filtered__=Z.__filtered__||M,Z}}),se(["head","last"],function(l,d){var w="take"+(d?"Right":"");qr.prototype[l]=function(){return this[w](1).value()[0]}}),se(["initial","tail"],function(l,d){var w="drop"+(d?"":"Right");qr.prototype[l]=function(){return this.__filtered__?new qr(this):this[w](1)}}),qr.prototype.compact=function(){return this.filter(us)},qr.prototype.find=function(l){return this.filter(l).head()},qr.prototype.findLast=function(l){return this.reverse().find(l)},qr.prototype.invokeMap=br(function(l,d){return typeof l=="function"?new qr(this):this.map(function(w){return _f(w,l,d)})}),qr.prototype.reject=function(l){return this.filter(Bd(Yt(l)))},qr.prototype.slice=function(l,d){l=hr(l);var w=this;return w.__filtered__&&(l>0||d<0)?new qr(w):(l<0?w=w.takeRight(-l):l&&(w=w.drop(l)),d!==r&&(d=hr(d),w=d<0?w.dropRight(-d):w.take(d-l)),w)},qr.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},qr.prototype.toArray=function(){return this.take(ce)},Xo(qr.prototype,function(l,d){var w=/^(?:filter|find|map|reject)|While$/.test(d),M=/^(?:head|last)$/.test(d),z=Y[M?"take"+(d=="last"?"Right":""):d],Z=M||/^find/.test(d);z&&(Y.prototype[d]=function(){var fe=this.__wrapped__,ye=M?[1]:arguments,Pe=fe instanceof qr,et=ye[0],tt=Pe||ur(fe),ot=function(Mr){var $r=z.apply(Y,ar([Mr],ye));return M&&_t?$r[0]:$r};tt&&w&&typeof et=="function"&&et.length!=1&&(Pe=tt=!1);var _t=this.__chain__,qt=!!this.__actions__.length,Zt=Z&&!_t,gr=Pe&&!qt;if(!Z&&tt){fe=gr?fe:new qr(this);var Jt=l.apply(fe,ye);return Jt.__actions__.push({func:Nd,args:[ot],thisArg:r}),new Gs(Jt,_t)}return Zt&&gr?l.apply(this,ye):(Jt=this.thru(ot),Zt?M?Jt.value()[0]:Jt.value():Jt)})}),se(["pop","push","shift","sort","splice","unshift"],function(l){var d=ui[l],w=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",M=/^(?:pop|shift)$/.test(l);Y.prototype[l]=function(){var z=arguments;if(M&&!this.__chain__){var Z=this.value();return d.apply(ur(Z)?Z:[],z)}return this[w](function(fe){return d.apply(ur(fe)?fe:[],z)})}}),Xo(qr.prototype,function(l,d){var w=Y[d];if(w){var M=w.name+"";ir.call(Gc,M)||(Gc[M]=[]),Gc[M].push({name:d,func:w})}}),Gc[Cd(r,S).name]=[{name:"wrapper",func:r}],qr.prototype.clone=$H,qr.prototype.reverse=UH,qr.prototype.value=jH,Y.prototype.at=bX,Y.prototype.chain=wX,Y.prototype.commit=xX,Y.prototype.next=SX,Y.prototype.plant=AX,Y.prototype.reverse=TX,Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=PX,Y.prototype.first=Y.prototype.head,hf&&(Y.prototype[hf]=EX),Y},ke=Oe();go?((go.exports=ke)._=ke,Dc._=ke):Mn._=ke}).call(Fpe)}(Uf,Uf.exports)),Uf.exports}var zpe=Bpe();const An=Dl(zpe);var Vpe=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},Gpe=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},bp;function Xs(e,t,r){return t.map((n,i)=>e(n,r[i]))}function fp(e,t,r,n,i){return t.map((s,o)=>e(s,r[o],n[o],i[o]))}function Jo(e,t,r,n){if(t.length==0)return n==1?1:0;let i=t[t.length-1];n==1?i|=~r:i&=r;for(let s=0;s<t.length-1;s++)i=e(i,t[s]);return i=e(i,i>>>16),i=e(i,i>>>8),i=e(i,i>>>4),i=e(i,i>>>2),i=e(i,i>>>1),i&1}function $pe(e){return e>>5}function ra(e){return e&31}function ll(e,t,r,n,i){const s=e>0&&!(n[t]&1<<e-1)&&i[t]&1<<e-1;s&&ra(e)&&(i[t]|=-1<<e),s&&t+1<r&&i.fill(-1,t+1)}function KA(e,t){const r={};function n(i,s){if(r[i]=s,!(i.length*e>=t)){for(let o=0;o<1<<e;o+=1)n(i+o.toString(1<<e),s<<e|o|o<<16);n(i+"x",s<<e|(1<<e)-1)}}return n("",0),Object.seal(r),r}const Upe=KA(1,8),jpe=KA(3,3),Hpe=KA(4,8);function fj(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000"+r[o].toString(16),u=r[o]^n[o];o++;for(let c=0;c<8&&s<t;c++,s+=4)u&15<<4*c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function hj(e,t,r,n){const i=[];let s=0,o=e;for(;s<t;){const a="00000000000000000000000000000000"+r[o].toString(2),u=r[o]^n[o];o++;for(let c=0;c<32&&s<t;c++,s++)u&1<<c?i.push("x"):i.push(a[a.length-1-c])}return i.reverse().join("")}function yE(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const f=e.slice(Math.max(0,c-2),c);c-=f.length;const h=Hpe[f];ra(a)==0&&u++;const g=(1<<4*f.length)-1;n[u]|=(h>>>16&g)<<a,i[u]|=(h&g)<<a,a+=4*f.length}a<r&&ll(a,u,o,n,i)}function dj(e,t,r,n,i){const o=r+31>>>5;let a=0,u=-1+t;for(let c=e.length;c>0;){const f=e.slice(Math.max(0,c-8),c);c-=f.length;const h=Upe[f];ra(a)==0&&u++;const g=(1<<1*f.length)-1;n[u]|=(h>>>16&g)<<a,i[u]|=(h&g)<<a,a+=1*f.length}a<r&&ll(a,u,o,n,i)}class ZA extends Error{constructor(t){super(t),Object.setPrototypeOf(this,ZA.prototype)}}function yi(e,t){if(!e)throw new ZA("Assertion failed: "+t)}class Je{constructor(t,r,n){this._bits=t,this._avec=r,this._bvec=n}static make(t,r){t=t|0;let n,i;switch(r){case!0:case"1":case 1:n=i=-1;break;case!1:case"0":case-1:case void 0:n=i=0;break;case"x":case 0:n=0,i=-1;break;default:yi(!1,"Vector3vl.make() called with invalid initializer")}const s=(t+31)/32|0;return new Je(t,new Uint32Array(s).fill(n),new Uint32Array(s).fill(i))}static zeros(t){return Je.make(t,-1)}static ones(t){return Je.make(t,1)}static xes(t){return Je.make(t,0)}static fromBool(t,r=1){return Je.make(r,t?1:-1)}static concat(...t){const n=t.reduce((u,c)=>c.bits+u,0)+31>>>5;let i=0,s=-1,o=new Uint32Array(n),a=new Uint32Array(n);for(const u of t)if(u.normalize(),ra(i)==0)o.set(u._avec,s+1),a.set(u._bvec,s+1),i+=u._bits,s+=u._bits+31>>>5;else{for(const c in u._avec){if(o[s]|=u._avec[c]<<i,a[s]|=u._bvec[c]<<i,s++,s==n)break;o[s]=u._avec[c]>>>-i,a[s]=u._bvec[c]>>>-i}i+=u._bits,s+1>i+31>>>5&&s--}return new Je(i,o,a)}static fromIterator(t,r,n){return(r&r-1)==0?Je.fromIteratorPow2(t,r,n):Je.fromIteratorAnySkip(t,r,n)}static fromIteratorAnySkip(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const f of t)ra(s)==0&&o++,a[o]|=(f>>>r&c)<<s,u[o]|=(f&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(f>>>r&c)>>>-s,u[o]=(f&c)>>>-s),s+=r;return s<n&&ll(s,o,i,a,u),new Je(n,a,u)}static fromIteratorPow2(t,r,n){const i=n+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<r)-1;for(const f of t)ra(s)==0&&o++,a[o]|=(f>>>r&c)<<s,u[o]|=(f&c)<<s,s+=r;return s<n&&ll(s,o,i,a,u),new Je(n,a,u)}static fromArray(t){const r=t.length,n=1,i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=(1<<n)-1;for(const f of t){const h=f+1+ +(f>0);ra(s)==0&&o++,a[o]|=(h>>>n&c)<<s,u[o]|=(h&c)<<s,s+=n}return s<r&&ll(s,o,i,a,u),new Je(r,a,u)}static fromBin(t,r){r===void 0&&(r=t.length);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return dj(t,0,r,i,s),new Je(r,i,s)}static fromOct(t,r){r===void 0&&(r=t.length*3);const i=r+31>>>5;let s=0,o=-1,a=new Uint32Array(i),u=new Uint32Array(i);const c=7;for(let f=t.length-1;f>=0;f--){const h=jpe[t[f]];ra(s)==0&&o++,a[o]|=(h>>>16&c)<<s,u[o]|=(h&c)<<s,c<<s>>>s!=c&&(o++,a[o]=(h>>>16&c)>>>-s,u[o]=(h&c)>>>-s),s+=3}return s<r&&ll(s,o,i,a,u),new Je(r,a,u)}static fromHex(t,r){r===void 0&&(r=t.length*4);const n=r+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);return yE(t,0,r,i,s),new Je(r,i,s)}static fromString(t){const n=/^([0-9]*)'?(b[01x]*|o[0-7x]*|h[0-9a-fx]*|d[0-9]*)$/.exec(t);yi(n!=null,"Vector3vl.fromString() Invalid string");const i=n[1].length?Number(n[1]):void 0,s=n[2].slice(1);switch(n[2][0]){case"b":return Je.fromBin(s,i);case"o":return Je.fromOct(s,i);case"h":return Je.fromHex(s,i);case"d":return Je.fromNumber(BigInt(s),i)}}static fromClonable(t){return new Je(t._bits,t._avec,t._bvec)}static fromNumber(t,r){const n=r===void 0?0:r,i=BigInt(t);if(i>=BigInt(0)){let s=i.toString(2);return Je.fromBin("0".repeat(Math.max(0,n-s.length))+s,r)}else{const s=(-i).toString(2).length;let a=(i+(BigInt(1)<<BigInt(s))).toString(2);return Je.fromBin("1".repeat(Math.max(1,n-s))+"0".repeat(s-a.length)+a,r)}}get bits(){return this._bits}get msb(){return this.get(this._bits-1)}get lsb(){return this.get(0)}get(t){const r=ra(t),n=$pe(t),i=this._avec[n]>>>r&1,s=this._bvec[n]>>>r&1;return i+s-1}get isHigh(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>~i==0)&&(n[n.length-1]&t)==t;return r(this._avec)&&r(this._bvec)}get isLow(){if(this._bits==0)return!0;const t=this._lastmask,r=n=>n.slice(0,n.length-1).every(i=>i==0)&&(n[n.length-1]&t)==0;return r(this._avec)&&r(this._bvec)}get isDefined(){if(this._bits==0)return!1;const t=Xs((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]|=~this._lastmask,!t.every(r=>~r==0)}get isFullyDefined(){if(this._bits==0)return!0;const t=Xs((r,n)=>r^n,this._avec,this._bvec);return t[t.length-1]&=this._lastmask,!t.some(r=>!!r)}and(t){return yi(t._bits==this._bits,"Vector3vl.and() called with vectors of different sizes"),new Je(this._bits,Xs((r,n)=>r&n,t._avec,this._avec),Xs((r,n)=>r&n,t._bvec,this._bvec))}or(t){return yi(t._bits==this._bits,"Vector3vl.or() called with vectors of different sizes"),new Je(this._bits,Xs((r,n)=>r|n,t._avec,this._avec),Xs((r,n)=>r|n,t._bvec,this._bvec))}xor(t){return yi(t._bits==this._bits,"Vector3vl.xor() called with vectors of different sizes"),new Je(this._bits,fp((r,n,i,s)=>(r|i)&(n^s),t._avec,t._bvec,this._avec,this._bvec),fp((r,n,i,s)=>r&i^(n|s),t._avec,t._bvec,this._avec,this._bvec))}nand(t){return yi(t._bits==this._bits,"Vector3vl.nand() called with vectors of different sizes"),new Je(this._bits,Xs((r,n)=>~(r&n),t._bvec,this._bvec),Xs((r,n)=>~(r&n),t._avec,this._avec))}nor(t){return yi(t._bits==this._bits,"Vector3vl.nor() called with vectors of different sizes"),new Je(this._bits,Xs((r,n)=>~(r|n),t._bvec,this._bvec),Xs((r,n)=>~(r|n),t._avec,this._avec))}xnor(t){return yi(t._bits==this._bits,"Vector3vl.xnor() called with vectors of different sizes"),new Je(this._bits,fp((r,n,i,s)=>~(r&i^(n|s)),t._avec,t._bvec,this._avec,this._bvec),fp((r,n,i,s)=>~((r|i)&(n^s)),t._avec,t._bvec,this._avec,this._bvec))}not(){return new Je(this._bits,this._bvec.map(t=>~t),this._avec.map(t=>~t))}xmask(){const t=Xs((r,n)=>r^n,this._avec,this._bvec);return new Je(this._bits,t,t)}reduceAnd(){return new Je(1,Uint32Array.of(Jo((t,r)=>t&r,this._avec,this._lastmask,1)),Uint32Array.of(Jo((t,r)=>t&r,this._bvec,this._lastmask,1)))}reduceOr(){return new Je(1,Uint32Array.of(Jo((t,r)=>t|r,this._avec,this._lastmask,0)),Uint32Array.of(Jo((t,r)=>t|r,this._bvec,this._lastmask,0)))}reduceNand(){return new Je(1,Uint32Array.of(~Jo((t,r)=>t&r,this._bvec,this._lastmask,1)),Uint32Array.of(~Jo((t,r)=>t&r,this._avec,this._lastmask,1)))}reduceNor(){return new Je(1,Uint32Array.of(~Jo((t,r)=>t|r,this._bvec,this._lastmask,0)),Uint32Array.of(~Jo((t,r)=>t|r,this._avec,this._lastmask,0)))}reduceXor(){const t=Xs((i,s)=>~i&s,this._avec,this._bvec),r=Jo((i,s)=>i|s,t,this._lastmask,0),n=Jo((i,s)=>i^s,this._avec,this._lastmask,0);return new Je(1,Uint32Array.of(n&~r),Uint32Array.of(n|r))}reduceXnor(){return this.reduceXor().not()}concat(...t){return Je.concat(this,...t)}slice(t,r){if(t===void 0&&(t=0),r===void 0&&(r=this._bits),r>this.bits&&(r=this.bits),t>r&&(r=t),ra(t)==0){const n=this._avec.slice(t>>>5,r+31>>>5),i=this._bvec.slice(t>>>5,r+31>>>5);return new Je(r-t,n,i)}else{const n=r-t+31>>>5,i=new Uint32Array(n),s=new Uint32Array(n);let o=0;i[o]=this._avec[t>>5]>>>t,s[o]=this._bvec[t>>5]>>>t;for(let a=(t>>5)+1;a<=r>>>5&&(i[o]|=this._avec[a]<<-t,s[o]|=this._bvec[a]<<-t,o++,o!=n);a++)i[o]=this._avec[a]>>>t,s[o]=this._bvec[a]>>>t;return new Je(r-t,i,s)}}toIterator(t){return(t&t-1)==0?this.toIteratorPow2(t):this.toIteratorAnySkip(t)}*toIteratorAnySkip(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){let o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const u=r>>-n;o|=(this._avec[i+1]&u)<<-n,a|=(this._bvec[i+1]&u)<<-n}yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r<<n)}}*toIteratorPow2(t){this.normalize();const r=(1<<t)-1;let n=0,i=0,s=r;for(;n<this._bits;){const o=(this._avec[i]&s)>>>n,a=(this._bvec[i]&s)>>>n;yield o<<t|a,s<<=t,n+=t,s==0&&(i++,s=r)}}toArray(){this.normalize();const t=1,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){const a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n,c=a<<t|u;o.push(c-1-+(c>1)),s<<=t,n+=t,s==0&&(i++,s=r)}return o}toBin(){return hj(0,this._bits,this._avec,this._bvec)}toOct(){this.normalize();const t=3,r=(1<<t)-1;let n=0,i=0,s=r,o=[];for(;n<this._bits;){let a=(this._avec[i]&s)>>>n,u=(this._bvec[i]&s)>>>n;if(s>>>n!=r&&i+1!=this._avec.length){const f=r>>-n;a|=(this._avec[i+1]&f)<<-n,u|=(this._bvec[i+1]&f)<<-n}const c=a<<t|u;7&c&~(c>>3)?o.push("x"):o.push((c>>3).toString()),s<<=t,n+=t,s==0&&(i++,s=r<<n)}return o.reverse().join("")}toHex(){return this.normalize(),fj(0,this._bits,this._avec,this._bvec)}toString(){return"Vector3vl "+this.toBin()}toClonable(){return{_bits:this._bits,_avec:this._avec,_bvec:this._bvec}}toNumber(t=!1){return t?this.toNumberSigned():(yi(this.isFullyDefined,"Vector3vl.toNumber() called on a not fully defined vector"),yi(this._bits<32,"Vector3vl.toNumber() called on a too wide vector"),this._bits==0?0:Number.parseInt(this.toHex(),16))}toNumberSigned(){return yi(this.isFullyDefined,"Vector3vl.toNumberSigned() called on a not fully defined vector"),yi(this._bits<32,"Vector3vl.toNumberSigned() called on a too wide vector"),yi(this._bits>0,"Vector3vl.toNumberSigned() called on an empty vector"),this.msb==1?Number.parseInt(this.toHex(),16)-(1<<this._bits):Number.parseInt(this.toHex(),16)}toBigInt(t=!1){return t?this.toBigIntSigned():(yi(this.isFullyDefined,"Vector3vl.toBigInt() called on a not fully defined vector"),this._bits==0?BigInt(0):BigInt("0x"+this.toHex()))}toBigIntSigned(){return yi(this.isFullyDefined,"Vector3vl.toBigIntSigned() called on a not fully defined vector"),yi(this._bits>0,"Vector3vl.toBigIntSigned() called on an empty vector"),this.msb==1?BigInt("0x"+this.toHex())-(BigInt(1)<<BigInt(this._bits)):BigInt("0x"+this.toHex())}eq(t){if(t._bits!=this._bits)return!1;this.normalize(),t.normalize();for(const r in this._avec)if(this._avec[r]!=t._avec[r]||this._bvec[r]!=t._bvec[r])return!1;return!0}normalize(){const t=this._lastmask;this._avec[this._avec.length-1]&=t,this._bvec[this._bvec.length-1]&=t}get _lastmask(){return-1>>>-this.bits}}Je.empty=Je.zeros(0);Je.one=Je.ones(1);Je.zero=Je.zeros(1);Je.x=Je.xes(1);class gl{constructor(t,r,n){n===void 0&&(n=0),this._bits=t|0,this._size=r|0,this._wpc=(t+31)/32|0,this._avec=new Uint32Array(r*this._wpc).fill(n>0?-1:0),this._bvec=new Uint32Array(r*this._wpc).fill(n>=0?-1:0),this._size&&this.set(this._size-1,this.get(this._size-1))}static fromData(t){if(t.length==0)return new gl(0,0);const r=new gl(t[0].bits,t.length);for(const n in t){t[n].normalize(),yi(t[n].bits==r._bits,"Mem3vl.fromData() called with vectors of different sizes");for(let i=0;i<r._wpc;i++){const s=Number(n)*r._wpc+i;r._avec[s]=t[n]._avec[i],r._bvec[s]=t[n]._bvec[i]}}return r}get bits(){return this._bits}get words(){return this._size}get(t){const r=this._wpc*t;return new Je(this._bits,this._avec.slice(r,r+this._wpc),this._bvec.slice(r,r+this._wpc))}set(t,r){yi(r.bits==this._bits,"Mem3vl.set() called with a vector with different bit width than the memory"),r.normalize();for(let n=0;n<this._wpc;n++)this._avec[t*this._wpc+n]=r._avec[n],this._bvec[t*this._wpc+n]=r._bvec[n]}toJSON(){const t=[];let r=[],n,i=0;const s=()=>{if(r.length!=0){if(r.reduce((u,c)=>u+c.length,0)==this._bits){const u=r.pop();r.length>0&&t.push(r.join("")),t.push(u)}else t.push(r.join(""));r=[]}},o=()=>{i!=0&&(i==1?n.length==this._bits?(s(),t.push(n)):r.push(n):(s(),t.push(i),t.push(n)),n=void 0,i=0)},a=u=>{n==u?i++:(o(),n=u,i=1)};for(let u=0;u<this._size;u++){const c=()=>{for(let f=0;f<this._wpc;f++){const h=this._avec[u*this._wpc+f]^this._bvec[u*this._wpc+f];for(let g=0;g<4;g++){const y=255<<g*16,m=h&y;if(m!=y||m!=0)return!1}}return!0};this._bits>0&&c()?a(fj(u*this._wpc,this._bits,this._avec,this._bvec)):a(hj(u*this._wpc,this._bits,this._avec,this._bvec))}return o(),s(),t}static fromJSON(t,r){const n=Math.ceil(t/4);let i=0;const s=c=>c.length==t||c.length==n?1:c.length/n;for(let c=0;c<r.length;c++)typeof r[c]=="string"?i+=s(r[c]):typeof r[c]=="number"&&(i+=r[c]*s(r[c+1]),c++);const o=new gl(t,i,-1);let a=0;const u=c=>{if(c.length==t)dj(c,a,t,o._avec,o._bvec),a+=o._wpc;else if(c.length==n)yE(c,a,t,o._avec,o._bvec),a+=o._wpc;else for(let f=0;f<c.length/n;f++)yE(c.slice(f*n,(f+1)*n),a,t,o._avec,o._bvec),a+=o._wpc};for(let c=0;c<r.length;c++)if(typeof r[c]=="string")u(r[c]);else if(typeof r[c]=="number"){for(const f of Array(r[c]).keys())u(r[c+1]);c++}return o}toArray(){return Array(this._size).fill(0).map((t,r)=>this.get(r))}toHex(){return this.toArray().map(t=>t.toHex())}eq(t){if(t._bits!=this._bits||t._size!=this._size)return!1;for(let r=0;r<this._size;r++)if(!t.get(r).eq(this.get(r)))return!1;return!0}}class Zl{constructor(t){bp.set(this,void 0),this.pattern=t,Vpe(this,bp,RegExp("^(?:"+this.pattern+")$"),"f")}validate(t,r){return Gpe(this,bp,"f").test(t)}}bp=new WeakMap;class Wpe extends Zl{constructor(){super("[0-9a-fx]*"),this.name="hex",this.sort=0}can(t,r){return!0}read(t,r){return Je.fromHex(t,r)}show(t){return t.toHex()}size(t){return Math.ceil(t/4)}}class Xpe extends Zl{constructor(){super("[01x]*"),this.name="bin",this.sort=0}can(t,r){return!0}read(t,r){return Je.fromBin(t,r)}show(t){return t.toBin()}size(t){return t}}class Ype extends Zl{constructor(){super("[0-7x]*"),this.name="oct",this.sort=0}can(t,r){return!0}read(t,r){return Je.fromOct(t,r)}show(t){return t.toOct()}size(t){return Math.ceil(t/3)}}class Kpe extends Zl{constructor(){super("[0-9]*|x")}get name(){return"dec"}get sort(){return 0}can(t,r){return!0}read(t,r){return t=="x"?Je.xes(r):Je.fromNumber(BigInt(t),r)}show(t){return t.isFullyDefined?t.toBigInt().toString():"x"}size(t){return Math.max(1,Math.ceil(t/Math.log2(10)))}}class Zpe extends Zl{constructor(){super("-?[0-9]*|x")}get name(){return"dec2c"}get sort(){return 0}can(t,r){return r>0}read(t,r){return t=="x"?Je.xes(r):Je.fromNumber(BigInt(t),r)}show(t){return t.isFullyDefined?t.toBigIntSigned().toString():"x"}size(t){return 1+Math.ceil(t/Math.log2(10))}}class pj{constructor(){this.displays={},this.addDisplay(new Wpe),this.addDisplay(new Xpe),this.addDisplay(new Ype),this.addDisplay(new Kpe),this.addDisplay(new Zpe)}addDisplay(t){this.displays[t.name]=t}usableDisplays(t,r){const n=[];for(let i of Object.values(this.displays))i.can(t,r)&&n.push(i);return n.sort((i,s)=>i.sort-s.sort?i.sort-s.sort:i.name.localeCompare(s.name)).map(i=>i.name)}show(t,r){return this.displays[t].show(r)}read(t,r,n){return this.displays[t].read(r,n)}pattern(t){return this.displays[t].pattern}validate(t,r,n){return this.displays[t].validate(r,n)}size(t,r){return this.displays[t].size(r)}}const gj={tagName:"circle",attributes:{r:7,fill:"black","fill-opacity":.3,stroke:"black","stroke-width":2,cursor:"move"}},Jpe=Dpe.extend(An.merge({},gj)),Qpe=qpe.extend(An.merge({},gj)),vj=mE.extend({update(){return this.relatedView.isShortWire()?(this.options.distance=this.options.distanceShort||this.options.distance,this.options.secondary&&this.hide()):this.options.distance=this.options.distanceLong||this.options.distance,mE.prototype.update.apply(this,arguments)}}),J5=vj.extend({name:"remove",children:K5.prototype.children,options:K5.prototype.options}),Q5=vj.extend({name:"monitor",children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#001DFF",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"m -2.5,-0.5 a 2,2 0 1 0 4,0 2,2 0 1 0 -4,0 M 1,1 3,3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{action(e){this.notify("link:monitor")}}}),Up={wire:{stroke:"#4B4F6A",x1:0,y1:0,x2:void 0,y2:0},port:{magnet:void 0,r:7,stroke:"black",fill:"white",strokeWidth:2,strokeOpacity:.5},bits:{ref:"port",fill:"black",fontSize:"7pt"},iolabel:{textVerticalAnchor:"middle",fill:"black",fontSize:"8pt"},decor:{stroke:"black",fill:"transparent"}},_n=ps.define("Gate",{propagation:1,label:"",size:{width:80,height:30},inputSignals:{},outputSignals:{},attrs:{".":{magnet:!1},body:{stroke:"black",strokeWidth:2},text:{fontSize:"8pt",fill:"black"},label:{refX:.5,refDy:3,textAnchor:"middle"}},ports:{groups:{in:{position:"left",attrs:An.merge({},Up,{wire:{x2:-25},port:{magnet:"passive",refX:-25},bits:{refDx:1,refY:-3,textAnchor:"start"},iolabel:{refX:5,textAnchor:"start"}})},out:{position:"right",attrs:An.merge({},Up,{wire:{x2:25},port:{magnet:!0,refX:25},bits:{refX:-1,refY:-3,textAnchor:"end"},iolabel:{refX:-5,textAnchor:"end"}})}}},z:1},{operation(){return{}},initialize(){const e=this.get("ports");e.items&&this._preprocessPorts(e.items),ps.prototype.initialize.apply(this,arguments),this.prepare(),this.bindAttrToProp("label/text","label"),this._unsupportedPropChanges.length>0&&this.on(this._unsupportedPropChanges.map(t=>"change:"+t).join(" "),(t,r,n)=>{if(n.init)return;const i=An.intersection(Object.keys(this.changed),this._unsupportedPropChanges);i.forEach(s=>{this.set(s,this.previous(s),{init:!0})}),console.warn('Beta property change support: "'+i+'" changes on '+this.get("type")+" are (currently) not supported.")})},prepare(){},bindAttrToProp(e,t){this.attr(e,this.get(t)),this.on("change:"+t,(r,n)=>this.attr(e,n))},_changeOutputSignals(e){An.chain(this.graph.getConnectedLinks(this,{outbound:!0})).groupBy(t=>t.get("source").port).forEach((t,r)=>t.forEach(n=>n.set("signal",e[r]))).value()},_setInput(e,t){const r=An.clone(this.get("inputSignals"));r[t]=e,this.set("inputSignals",r)},_clearInput(e){const t=this.getPort(e).bits;this._setInput(Je.xes(t),e)},_preprocessPorts(e){this._resetPortsSignals(e);for(const t of e){if(t.attrs={},t.attrs.bits={text:this._getBitsText(t.bits)},t.labelled){const r={text:"portlabel"in t?t.portlabel:t.id};t.polarity===!1&&(r["text-decoration"]="overline"),t.decor&&(console.assert(t.group=="in"),r.refX=10),t.attrs.iolabel=r}t.decor&&(t.attrs.decor={d:t.decor})}},_setPortsBits(e){const t=An.cloneDeep(this.get("ports")),r=[];for(const n in e){const i=e[n],s=t.items.find(function(o){return o.id&&o.id===n});s.bits=i,s.attrs.bits.text=this._getBitsText(i),r.push(s)}this._resetPortsSignals(r),this.set("ports",t),this.graph.getConnectedLinks(this,{outbound:!0}).filter(n=>n.get("source").port in e).forEach(n=>n._changeSource(n.get("source"))),this.graph.getConnectedLinks(this,{inbound:!0}).filter(n=>n.get("target").port in e).forEach(n=>n._changeTarget(n.get("target")))},_getBitsText(e){return e>1?e:""},_resetPortValue(e){return Je.xes(e.bits)},_resetPortsSignals(e){const t={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const r of e)console.assert(r.bits>=0),t[r.dir][r.id]=this._resetPortValue(r);this.set("inputSignals",t.in),this.set("outputSignals",t.out)},_removePortsSignals(e){const t={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const r of e)delete t[r.dir][r.id];this.set("inputSignals",t.in),this.set("outputSignals",t.out)},addPort(e){this.addPorts([e])},addPorts(e){this._preprocessPorts(e),ps.prototype.addPorts.apply(this,arguments)},removePort(e,t){this.removePorts([e])},removePorts(e,t){this._removePortsSignals(e),ps.prototype.removePorts.apply(this,arguments)},_getStackedPosition(e){return function(t,r){const n=e.side||"left",i=e.step||16,s=e.offset||12,o=n=="left"?r.topLeft().x:n=="right"?r.topRight().x:void 0,a=n=="top"?r.topLeft().y:n=="bottom"?r.bottomRight().y:void 0;return o!==void 0?An.map(t,function(u,c){return c+=u.idxOffset||0,pe({x:o,y:c*i+s})}):An.map(t,function(u,c){return c+=u.idxOffset||0,pe({x:c*i+s,y:a})})}},getLayoutSize(){return this.size()},setLayoutPosition(e){this.set("position",{x:e.x,y:e.y})},portMarkup:[{tagName:"line",className:"wire",selector:"wire"},{tagName:"circle",className:"port",selector:"port"},{tagName:"text",className:"bits",selector:"bits"},{tagName:"text",className:"iolabel",selector:"iolabel"},{tagName:"path",className:"decor",selector:"decor"}],markup:[{tagName:"text",className:"label",selector:"label"}],getGateParams(e){return An.cloneDeep(An.pick(this.attributes,this._gateParams.concat(e?this._gateLayoutParams:[])))},_gateParams:["label","type","propagation","source_positions"],_gateLayoutParams:["position"],_unsupportedPropChanges:[],_operationHelpers:[],_presentationParams:[]}),Kt=_i.extend({attrs:{signal:{high:{port:{stroke:"#03c03c"}},low:{port:{stroke:"#fc7c68"}},def:{port:{stroke:"#779ecb"}},undef:{port:{stroke:"#999"}}}},presentationAttributes:_i.addPresentationAttributes({inputSignals:"SIGNAL",outputSignals:"SIGNAL2"}),stopprop(e){e.stopPropagation()},confirmUpdate(e){this.hasFlag(e,"SIGNAL")&&this._updatePortSignals("in"),this.hasFlag(e,"SIGNAL2")&&this._updatePortSignals("out"),_i.prototype.confirmUpdate.apply(this,arguments)},_updatePortSignals(e){const t=e==="in"?this.model.get("inputSignals"):e==="out"?this.model.get("outputSignals"):An.merge({},this.model.get("inputSignals"),this.model.get("outputSignals"));for(const r in t){const n=t[r],i=this.attrs.signal[n.isDefined?n.isHigh?"high":n.isLow?"low":"def":"undef"];this._applyPortAttrs(r,i)}},_applyAttrs(e){for(const t in e){const r=this.selectors[t];this.setNodeAttributes(r,e[t])}},_applyPortAttrs(e,t){if(e in this._portElementsCache)for(const r in t){const n=this._portElementsCache[e].portSelectors[r];this.setNodeAttributes(n,t[r])}},_updatePorts(){_i.prototype._updatePorts.apply(this,arguments),this._updatePortSignals()}}),mj=_p.define("Wire",{attrs:{line:{class:"connection",targetMarker:null},wrapper:{stroke:"red"}},signal:Je.xes(1),bits:1,warning:!1,z:0},{initialize(){_p.prototype.initialize.apply(this,arguments),this.has("netname")&&this.label(0,{markup:[{tagName:"text",selector:"label"}],attrs:{label:{text:this.get("netname"),fill:"black",fontSize:"8pt"}},position:{distance:.5}})},onAdd(){this._changeSource(this.get("source")),this._was_added=!0},remove(){const e=this.get("target"),t=this.graph.getCell(e.id);t&&"port"in e&&t._clearInput(e.port),_p.prototype.remove.apply(this,arguments)},_propagateSignal(e,t){const r=this.getTargetElement();r&&(this.get("warning")?r._clearInput(e.port):r._setInput(t,e.port))},_changeSignal(e){this._propagateSignal(this.get("target"),e)},_changeSource(e){const t=this.getSourceElement();t&&"port"in e?(this.set("bits",t.getPort(e.port).bits),this._checkConnection(),this.set("signal",t.get("outputSignals")[e.port])):this.set("signal",Je.xes(this.get("bits")))},_changeTarget(e){if(this._checkConnection(),"port"in e&&this._propagateSignal(e,this.get("signal")),!this.hasChanged("target"))return;const t=this.previous("target"),r=this.graph.getCell(t.id);r&&"port"in t&&r._clearInput(t.port)},_checkConnection(){const e=this.get("target"),t=this.graph.getCell(e.id);this.set("warning",t&&t.getPort(e.port).bits!==this.get("bits")||!1,{silent:!this._was_added})},getWireParams(e){const t={from:{id:this.get("source").id,port:this.get("source").port},to:{id:this.get("target").id,port:this.get("target").port}};return this.has("netname")&&(t.name=this.get("netname")),e&&this.has("vertices")&&this.get("vertices").length>0&&(t.vertices=An.cloneDeep(this.get("vertices"))),t},getWirePath(){const e=[];for(let t=this.graph.get("subcircuit");t!=null;t=t.graph.get("subcircuit")){if(!t.has("label"))return null;e.push(t.get("label"))}return e.reverse()}}),ege=ji.extend({initFlag:ji.prototype.initFlag.concat(["INIT"]),longWireLength:400,attrs:{signal:{high:{line:{stroke:"#03c03c"}},low:{line:{stroke:"#fc7c68"}},def:{line:{stroke:"#779ecb"}},undef:{line:{stroke:"#999"}}},bits:{bus:{line:{"stroke-width":"4px"}},single:{line:{"stroke-width":"2px"}}},warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}},_wireToolsView:typeof window<"u"?new Cpe({tools:[new Lpe({focusOpacity:.5}),new Jpe,new Qpe,new J5({distanceShort:"75%",distanceLong:"50"}),new J5({distance:"-50",secondary:!0}),new Q5({distanceShort:"25%",distanceLong:"30"}),new Q5({distance:"-30",secondary:!0})]}):null,presentationAttributes:ji.addPresentationAttributes({signal:"SIGNAL",bits:"BITS",warning:"WARNING"}),initialize(){ji.prototype.initialize.apply(this,arguments),this.prevModels={source:null,target:null}},confirmUpdate(e){ji.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"SIGNAL")&&this._updateSignal(),this.hasFlag(e,"BITS")&&this._updateBits(),this.hasFlag(e,"WARNING")&&this._updateWarning()},isShortWire(){return this.getConnectionLength()<this.longWireLength},_updateSignal(){const e=this.model.get("signal"),t=this.attrs.signal[e.isDefined?e.isHigh?"high":e.isLow?"low":"def":"undef"];this._applyAttrs(t)},_updateBits(){const e=this.model.get("bits"),t=this.attrs.bits[e>1?"bus":"single"];this._applyAttrs(t)},_updateWarning(){const e=this.model.get("warning"),t=this.attrs.warning[e?"warn":"none"];this._applyAttrs(t)},_applyAttrs(e){for(const t in e){const r=this.selectors[t];this.setNodeAttributes(r,e[t])}},update(){ji.prototype.update.apply(this,arguments),this._updateSignal(),this._updateBits(),this._updateWarning()},onRemove(){ji.prototype.onRemove.apply(this,arguments),this._removeTooltip()},mouseenter(e){ji.prototype.mouseenter.apply(this,arguments),this.addTools(this._wireToolsView),this._addTooltip({x:e.clientX+5,y:e.clientY+5})},mouseleave(e){ji.prototype.mouseleave.apply(this,arguments),this.removeTools(),this._removeTooltip()},_addTooltip(e){this.model.get("bits")!=1&&(this.wire_hover||(this.wire_hover=It('<div class="wire_hover">').css("left",e.x).css("top",e.y).appendTo(It(document.body)),this._generateTextForTooltip(),this.listenTo(this.model,"change:signal",this._generateTextForTooltip)))},_removeTooltip(){this.wire_hover&&(this.wire_hover.remove(),this.wire_hover=null,this.stopListening(this.model,"change:signal",this._generateTextForTooltip))},_generateTextForTooltip(){if(!this.wire_hover)return;const e=this.model.get("signal"),t=this.model.graph._display3vl,r=["Hex: "+t.show("hex",e)+"<br>","Dec: "+t.show("dec",e)+"<br>","Oct: "+t.show("oct",e)+"<br>","Bin: "+t.show("bin",e)].join("");this.wire_hover.html(r)},onEndModelChange(e,t,r){typeof t=="object"&&t!=null&&t==this.prevModels[e]&&Object.keys(t.changed).length>0&&!("position"in t.changed)||(ji.prototype.onEndModelChange.apply(this,arguments),this.prevModels[e]=t)}}),Dt=_n.define("Box",{attrs:{body:{refWidth:1,refHeight:1},tooltip:{refX:0,refY:-30,height:30}}},{initialize(){_n.prototype.initialize.apply(this,arguments),this.on("change:size",(e,t)=>{t.width>this.tooltipMinWidth?this.attr("tooltip",{refWidth:1,width:null}):this.attr("tooltip",{refWidth:null,width:this.tooltipMinWidth})}),this.trigger("change:size",this,this.prop("size"))},markup:_n.prototype.markup.concat([{tagName:"rect",className:"body",selector:"body"}]),markupZoom:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"a",className:"zoom",textContent:"ð",style:{cursor:"pointer"}}]}]}],tooltipMinWidth:20,decorClock:"M"+[[0,-6],[6,0],[0,6]].map(e=>e.join(" ")).join(" L")}),ni=Kt.extend({_autoResizeBox:!1,render(){Kt.prototype.render.apply(this,arguments),this._autoResizeBox&&!this.model.get("box_resized")&&(this.model.set("box_resized",!0),this.model.prop("size/width",this._calculateBoxWidth()))},_calculateBoxWidth(){const e=Array.from(this.el.querySelectorAll("[port-group=in] > text.iolabel")),t=Array.from(this.el.querySelectorAll("[port-group=out] > text.iolabel")),r=Math.max(...e.map(o=>o.getBBox().width)),n=Math.max(...t.map(o=>o.getBBox().width)),i=o=>o==-1/0?-5:o;return i(r)+i(n)+25}}),cs=Dt.define("NumBase",{numbase:"hex",bits:1},{initialize(){Dt.prototype.initialize.apply(this,arguments),this.on("change:bits",(e,t)=>{this.graph._display3vl.usableDisplays(this.numbaseType,this.get("bits")).includes(this.get("numbase"))||this.set("numbase","hex")})},tooltipMinWidth:70,markupTooltip:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"select",className:"numbase"}]}]}],_gateParams:Dt.prototype._gateParams.concat(["numbase"])}),vu=ni.extend({presentationAttributes:ni.addPresentationAttributes({bits:"BITS",numbase:"NUMBASE"}),_autoResizeBox:!0,events:{"click select.numbase":"stopprop","mousedown select.numbase":"stopprop","touchstart select.numbase":"stopprop","change select.numbase":"_changeNumbase"},_changeNumbase(e){this.model.set("numbase",e.target.value||"bin")},_calculateBoxWidth(){const e=document.createElementNS("http://www.w3.org/2000/svg","text");It(e).text(Array(this.model.get("bits")).fill("0").join("")).attr("class","numvalue").appendTo(this.$el);const t=e.getBBox().width+20;return e.remove(),t},confirmUpdate(e){ni.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"BITS")||this.hasFlag(e,"RENDER"))&&this._makeNumBaseSelector(),this.hasFlag(e,"NUMBASE")&&this._updateNumBaseSelector()},_makeNumBaseSelector(){this.$("select.numbase").empty();const e=this.model.get("numbase"),t=this.model.graph._display3vl;for(const r of t.usableDisplays(this.model.numbaseType,this.model.get("bits")))It("<option>").attr("value",r).prop("selected",r==e).text(r).appendTo(this.$("select.numbase"))},_updateNumBaseSelector(){this.$("select.numbase").val(this.model.get("numbase"))}}),Ao=cs.define("IO",{bits:1,net:"",propagation:0,mode:-1,attrs:{ioname:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontWeight:"bold",fontSize:"10pt"}}},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:this._portDirection,group:this._portDirection,dir:this._portDirection,bits:e}],cs.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{const n={};n[this._portDirection]=r,this._setPortsBits(n),this.get("mode")!=0&&this._checkMode()}),this.bindAttrToProp("text.ioname/text","net")},onAdd(){this._checkMode()},_checkMode(){const e=this.graph&&this.graph.has("subcircuit"),t=this.get("bits"),r=e?0:t==1?1:2;return this.set("mode",r),this.set("box_resized",!1),this.set("markup",r==0?this.markupInSubcircuit:r==1?this.markupSingle:this.markupBus),r},_setPortsBits(e){if(cs.prototype._setPortsBits.apply(this,arguments),this.get("mode")!=0)return;const t=this.graph.get("subcircuit");console.assert(t!=null);const r={};r[this.get("net")]=e[this._portDirection],t._setPortsBits(r)},markupSingle:cs.prototype.markup,markupBus:cs.prototype.markup.concat(cs.prototype.markupTooltip),markupInSubcircuit:cs.prototype.markup.concat([{tagName:"text",className:"ioname",selector:"ioname"}]),_gateParams:cs.prototype._gateParams.concat(["bits","net","order"])}),sa=vu.extend({_calculateBoxWidth(){switch(this.model.get("mode")){case 0:const e=this.selectors.ioname;return e.getAttribute("display")!=="none"?e.getBBox().width+10:20;case 1:return 30;case 2:return vu.prototype._calculateBoxWidth.call(this)}}}),Wh=Ao.define("Input",{attrs:{btnface:{stroke:"black",strokeWidth:2,refX:.2,refY:.2,refHeight:.6,refWidth:.6,cursor:"pointer"},"foreignObject.valinput":{refX:.5,refY:.5,refWidth:-10,refHeight:-10,xAlignment:"middle",yAlignment:"middle"}}},{isInput:!0,_portDirection:"out",_resetPortValue(e){if(e.id=="out"&&e.dir=="out"){const t=this.get("bits");return this.get("mode")==1?Je.zeros(t):Je.xes(t)}else return Ao.prototype._resetPortValue.call(this,e)},_checkMode(){Ao.prototype._checkMode.call(this),this._resetPortsSignals([this.get("ports").items[0]])},setInput(e){this._setInput(e),this.trigger("userChange",this)},toggleInput(){this.setInput(this.get("outputSignals").out.not())},_setInput(e){if(e.bits!=this.get("bits"))throw new Error("setInput: wrong number of bits");this.set("outputSignals",{out:e})},markupSingle:Ao.prototype.markupSingle.concat([{tagName:"rect",className:"btnface",selector:"btnface"}]),markupBus:Ao.prototype.markupBus.concat([{tagName:"foreignObject",className:"valinput",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"text"}}]}]}]),numbaseType:"read"}),JA=sa.extend({attrs:An.merge({button:{high:{btnface:{fill:"black"}},low:{btnface:{fill:"white"}}}},sa.prototype.attrs),confirmUpdate(e){sa.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"SIGNAL2")||this.hasFlag(e,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateButton();break;case 2:this._updateNumEntry();break}},_updateButton(){const e=this.model.get("outputSignals").out,t=this.attrs.button[e.isHigh?"high":"low"];this._applyAttrs(t)},_updateNumEntry(){const e=this.model.graph._display3vl;this.$("input").val(e.show(this.model.get("numbase"),this.model.get("outputSignals").out)),this.$("input").removeClass("invalid")},render(){sa.prototype.render.apply(this,arguments),this._updateView()},events:An.merge({"click .btnface":"_onButton","mousedown .btnface":"stopprop","touchstart .btnface":"stopprop","click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_onNumEntry"},vu.prototype.events),_onButton(){this.model.toggleInput()},_onNumEntry(e){const t=this.model.get("numbase"),r=this.model.get("bits"),n=this.model.graph._display3vl;if(n.validate(t,e.target.value,r)){const i=n.read(t,e.target.value,r);this.model.setInput(i)}else this.$("input").addClass("invalid")}}),yj=Wh,tge=JA,_j=Wh,rge=JA,Xh=Ao.define("Output",{attrs:{led:{refX:.5,refY:.5,refR:.35},value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{isOutput:!0,_portDirection:"in",getOutput(){return this.get("inputSignals").in},markupSingle:Ao.prototype.markupSingle.concat([{tagName:"circle",className:"led",selector:"led"}]),markupBus:Ao.prototype.markupBus.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),numbaseType:"show"}),QA=sa.extend({attrs:An.merge({lamp:{high:{led:{fill:"#03c03c"}},low:{led:{fill:"#fc7c68"}},undef:{led:{fill:"#bfc5c6"}}}},sa.prototype.attrs),confirmUpdate(e){sa.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"SIGNAL")||this.hasFlag(e,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateLamp();break;case 2:this._updateNumDisplay();break}},_updateLamp(){const e=this.model.get("inputSignals").in,t=this.attrs.lamp[e.isHigh?"high":e.isLow?"low":"undef"];this._applyAttrs(t)},_updateNumDisplay(){const e=this.model.graph._display3vl;this.$("text.value tspan").text(e.show(this.model.get("numbase"),this.model.get("inputSignals").in))},render(){sa.prototype.render.apply(this,arguments),this._updateView()}}),bj=Xh,nge=QA,wj=Xh,ige=QA,xj=cs.define("Constant",{constant:"0",propagation:0,attrs:{value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{initialize(){const t=this.get("constant").length;this.set("bits",t),this.get("ports").items=[{id:"out",group:"out",dir:"out",bits:t}],cs.prototype.initialize.apply(this,arguments),this.on("change:constant",(r,n)=>{const i=n.length;this._setPortsBits({out:i}),this.set("bits",i),this.set("constantCache",Je.fromBin(n,i))})},prepare(){const e=this.get("constant"),t=e.length;this.set("constantCache",Je.fromBin(e,t))},operation(){return{out:this.get("constantCache")}},markup:cs.prototype.markup.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),_gateParams:cs.prototype._gateParams.concat(["constant"]),numbaseType:"show"}),sge=vu.extend({presentationAttributes:vu.addPresentationAttributes({constantCache:"CONSTANT"}),confirmUpdate(e){vu.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(e,"CONSTANT")||this.hasFlag(e,"NUMBASE"))&&this._showText()},_showText(){const e=this.model.graph._display3vl;this.$("text.value tspan").text(e.show(this.model.get("numbase"),this.model.get("constantCache")))},update(){vu.prototype.update.apply(this,arguments),this._showText()}}),Sj=Dt.define("Clock",{propagation:100,ports:{items:[{id:"out",group:"out",dir:"out",bits:1}]},size:{width:30,height:30}},{_resetPortValue(e){return e.id=="out"&&e.dir=="out"?Je.zero:Dt.prototype._resetPortValue(e)},operation(){return{out:this.get("outputSignals").out.not(),_clock_hack:!0}},tooltipMinWidth:55,markup:Dt.prototype.markup.concat([{tagName:"path",className:"decor",attributes:{d:"M7.5 7.5 L7.5 22.5 L15 22.5 L15 7.5 L22.5 7.5 L22.5 22.5",stroke:"black"}},{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"number",min:1,step:1}}]}]}]),_unsupportedPropChanges:Dt.prototype._unsupportedPropChanges.concat(["bits"])}),oge=ni.extend({presentationAttributes:ni.addPresentationAttributes({propagation:"SIGNAL"}),events:{"click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_changePropagation","input input":"_changePropagation"},render(e){ni.prototype.render.apply(this,arguments),this.updatePropagation()},confirmUpdate(e){ni.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"SIGNAL")&&this.updatePropagation()},_changePropagation(e){const t=e.target.value,r=String(t)==String(Number(t));r&&this.model.set("propagation",Number(t)||1),this.$("input").toggleClass("invalid",!r)},updatePropagation(){this.$("input").val(this.model.get("propagation"))}}),e4=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SP","DEL"];class age extends Zl{constructor(){super("[ -~Â -Ã¿ï¿½â-â¡]|"+e4.join("|"))}get name(){return"ascii"}get sort(){return 1}can(t,r){return r==7||r==8}read(t,r){if(t.length==1){const n=t.charCodeAt(0);return n==65533?Je.xes(r):n==9249?Je.fromHex("7f",r):n>=9216&&n<=9248?Je.fromHex((n-9216).toString(16),r):Je.fromHex(n.toString(16),r)}else{const n=e4.indexOf(t);return n<0?Je.xes(r):n==33?Je.fromHex("7f",r):Je.fromHex(n.toString(16),r)}}show(t){if(!t.isFullyDefined)return"ï¿½";const r=parseInt(t.toHex(),16);return r<=32?String.fromCharCode(9216+r):r==127?"â¡":r>127&&r<160?"ï¿½":String.fromCharCode(r)}size(t){return 1}}function eT(e,t,r){return'<select name="base">'+e.usableDisplays("read",t).map(i=>'<option value="'+i+'"'+(i==r?' selected="selected"':"")+">"+i+"</option>").join("")+"</select>"}function _E(e,t){for(const r in t)if(!e[r].eq(t[r]))return!1;return!0}const uv="M19 0v32h16c9 0 16-7 16-16S44 0 35 0H20z",Nu="M14.3 0l1.6 2s4.5 5.6 4.5 14s-4.5 14-4.5 14l-1.6 2H28c3.8 0 16.6-.5 25-16h0A28 28 0 0028 0H16.8z",Ej="M18-2v36l2-1 32-17h0L20-1z",uge="M6.8-1.2 10 2.7S14.2 8 14.2 16S10 29.3 10 29.3l-3.2 3.9H10l1.7-2.4s4.8-6 4.8-14.8c0-8.9-4.8-14.8-4.8-14.8l-1.7-2.4z",cv={tagName:"path",selector:"xor_arc",attributes:{fill:"#000",d:uge}},Mc={tagName:"circle",className:"body",selector:"neg_bubble",attributes:{stroke:"#000","stroke-width":"2px",cx:56,cy:16,r:4}};function Ka(e=[]){return{tagName:"g",selector:"body",children:[{tagName:"path",className:"body gate",selector:"gate"}].concat(e)}}const ia=_n.define("GateSVG",{bits:1,size:{width:60,height:32},ports:{groups:{in:{position:{name:"left",args:{dx:30}},attrs:{wire:{x2:-50},port:{refX:-50}},z:-1},out:{position:{name:"right",args:{dx:-30}},attrs:{wire:{x2:50},port:{refX:50}},z:-1}}}},{markup:_n.prototype.markup.concat([Ka()]),_gateParams:_n.prototype._gateParams.concat(["bits"])}),tT=ia.define("Gate11",{},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e},{id:"out",group:"out",dir:"out",bits:e}],ia.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits({in:r,out:r})})}}),kc=ia.define("GateX1",{inputs:2,attrs:{gate:{"vector-effect":"non-scaling-stroke"},xor_arc:{"vector-effect":"non-scaling-stroke"},neg_bubble:{"vector-effect":"non-scaling-stroke"}}},{initialize(){const e=this.get("bits"),t=this.get("inputs"),r=[];for(let i=1;i<=t;i++)r.push({id:"in"+i,group:"in",dir:"in",bits:e});r.push({id:"out",group:"out",dir:"out",bits:e}),this.get("ports").items=r;const n=t/2;this.set("size",{width:60*n,height:32*n}),this.attr("body/transform","translate(-4, 0) scale("+n+")"),this.prop("ports/groups/in/position/args/dx",30*n),this.prop("ports/groups/in/attrs/wire/x2",-30*n-20),this.prop("ports/groups/in/attrs/port/refX",-30*n-20),this.prop("ports/groups/out/position/args/dx",-30*n),this.prop("ports/groups/out/attrs/wire/x2",30*n+20),this.prop("ports/groups/out/attrs/port/refX",30*n+20),ia.prototype.initialize.apply(this,arguments),this.on("change:bits",(i,s)=>{const o=this.get("inputs"),a={out:s};for(let u=1;u<=o;u++)a["in"+u]=s;this._setPortsBits(a)})},operation(e){let t=e.in1;for(let r=2;r<=this.get("inputs");r++)t=this.binoperation(t,e["in"+r]);return{out:this.finoperation(t)}},finoperation(e){return e},_gateParams:ia.prototype._gateParams.concat(["inputs"]),_unsupportedPropChanges:ia.prototype._unsupportedPropChanges.concat(["inputs"]),_operationHelpers:ia.prototype._operationHelpers.concat(["binoperation","finoperation"])}),Su=ia.define("GateReduce",{},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e},{id:"out",group:"out",dir:"out",bits:1}],ia.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits({in:r})})}}),Aj=tT.define("Repeater",{attrs:{gate:{d:Ej}}},{operation(e){return{out:e.in}}}),cge=Kt,Tj=tT.define("Not",{attrs:{gate:{d:Ej}}},{operation(e){return{out:e.in.not()}},markup:_n.prototype.markup.concat([Ka([Mc])])}),lge=Kt,Pj=kc.define("Or",{attrs:{gate:{d:Nu}}},{binoperation(e,t){return e.or(t)}}),fge=Kt,Cj=kc.define("And",{attrs:{gate:{d:uv}}},{binoperation(e,t){return e.and(t)}}),hge=Kt,Rj=kc.define("Nor",{attrs:{gate:{d:Nu}}},{binoperation(e,t){return e.or(t)},finoperation(e){return e.not()},markup:_n.prototype.markup.concat([Ka([Mc])])}),dge=Kt,Ij=kc.define("Nand",{attrs:{gate:{d:uv}}},{binoperation(e,t){return e.and(t)},finoperation(e){return e.not()},markup:_n.prototype.markup.concat([Ka([Mc])])}),pge=Kt,Oj=kc.define("Xor",{attrs:{gate:{d:Nu}}},{binoperation(e,t){return e.xor(t)},markup:_n.prototype.markup.concat([Ka([cv])])}),gge=Kt,Mj=kc.define("Xnor",{attrs:{gate:{d:Nu}}},{binoperation(e,t){return e.xor(t)},finoperation(e){return e.not()},markup:_n.prototype.markup.concat([Ka([cv,Mc])])}),vge=Kt,bE=Su.define("OrReduce",{attrs:{gate:{d:Nu}}},{operation(e){return{out:e.in.reduceOr()}}}),mge=Kt,wE=Su.define("NorReduce",{attrs:{gate:{d:Nu}}},{operation(e){return{out:e.in.reduceNor()}},markup:Su.prototype.markup.concat([Mc])}),yge=Kt,kj=Su.define("AndReduce",{attrs:{gate:{d:uv}}},{operation(e){return{out:e.in.reduceAnd()}}}),_ge=Kt,Lj=Su.define("NandReduce",{attrs:{gate:{d:uv}}},{operation(e){return{out:e.in.reduceNand()}},markup:_n.prototype.markup.concat([Ka([Mc])])}),bge=Kt,Nj=Su.define("XorReduce",{attrs:{gate:{d:Nu}}},{operation(e){return{out:e.in.reduceXor()}},markup:_n.prototype.markup.concat([Ka([cv])])}),wge=Kt,qj=Su.define("XnorReduce",{attrs:{gate:{d:Nu}}},{operation(e){return{out:e.in.reduceXnor()}},markup:_n.prototype.markup.concat([Ka([cv,Mc])])}),xge=Kt;function xE(e){return e<=Number.MAX_SAFE_INTEGER&&e>=-Number.MAX_SAFE_INTEGER}const bi=_n.define("Arith",{size:{width:40,height:40},attrs:{body:{refR:.5,refCx:.5,refCy:.5},oper:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontSize:"12pt"}},ports:{groups:{in:{position:{name:"left",args:{dx:10}},attrs:{wire:{x2:-35},port:{refX:-35}},z:-1},out:{position:{name:"right",args:{dx:-10}},attrs:{wire:{x2:35},port:{refX:35}},z:-1}}}},{markup:_n.prototype.markup.concat([{tagName:"circle",className:"body",selector:"body"},{tagName:"text",className:"oper",selector:"oper"}]),_gateParams:_n.prototype._gateParams.concat(["bits","signed"]),_unsupportedPropChanges:_n.prototype._unsupportedPropChanges.concat(["signed"])}),rT=bi.define("Arith11",{bits:{in:1,out:1},signed:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:e.out}],bi.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})},operation(e){const t=this.get("bits");return e.in.isFullyDefined?{out:Je.fromNumber(this.arithop(e.in.toBigInt(this.get("signed"))),t.out)}:{out:Je.xes(t.out)}},_operationHelpers:bi.prototype._operationHelpers.concat(["arithop"])}),Lc=bi.define("Arith21",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1}},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:e.in1},{id:"in2",group:"in",dir:"in",bits:e.in2},{id:"out",group:"out",dir:"out",bits:e.out}],bi.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})},operation(e){const t=this.get("bits"),r=this.get("signed");return!e.in1.isFullyDefined||!e.in2.isFullyDefined?{out:Je.xes(t.out)}:{out:Je.fromNumber(this.arithop(e.in1.toBigInt(r.in1&&r.in2),e.in2.toBigInt(r.in1&&r.in2)),t.out)}},_operationHelpers:bi.prototype._operationHelpers.concat(["arithop"])});function SE(e,t,r,n,i,s,o){const a=e.get(e.bits-1),u=Je.make(Math.max(0,n-r),o?0:i?a:-1),c=e.concat(u);return(t<0?Je.make(-t,o?0:-1).concat(c):c.slice(t).concat(Je.make(t,o?0:s?c.get(c.bits-1):-1))).slice(0,n)}const nT=bi.define("Shift",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1,out:!1},fillx:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:e.in1},{id:"in2",group:"in",dir:"in",bits:e.in2},{id:"out",group:"out",dir:"out",bits:e.out}],bi.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})},operation(e){const t=this.get("bits"),r=this.get("signed"),n=this.get("fillx");if(!e.in2.isFullyDefined)return{out:Je.xes(t.out)};const i=e.in2.toNumber(r.in2)*this.shiftdir;return{out:SE(e.in1,i,t.in1,t.out,r.in1,r.out,n)}},_gateParams:bi.prototype._gateParams.concat(["fillx"]),_unsupportedPropChanges:bi.prototype._unsupportedPropChanges.concat(["fillx"]),_operationHelpers:bi.prototype._operationHelpers.concat(["shiftdir"])}),vh=bi.define("BaseCompare",{bits:{in1:1,in2:1},signed:{in1:!1,in2:!1}},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:e.in1},{id:"in2",group:"in",dir:"in",bits:e.in2},{id:"out",group:"out",dir:"out",bits:1}],bi.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,r)=>{this._setPortsBits(r)})}}),Yh=vh.define("Compare",{},{operation(e){this.get("bits");const t=this.get("signed");return!e.in1.isFullyDefined||!e.in2.isFullyDefined?{out:Je.xes(1)}:{out:Je.fromBool(this.arithcomp(e.in1.toBigInt(t.in1&&t.in2),e.in2.toBigInt(t.in1&&t.in2)))}},_operationHelpers:vh.prototype._operationHelpers.concat(["arithcomp"])}),iT=vh.define("EqCompare",{},{operation(e){const t=this.get("bits"),r=this.get("signed"),n=t.in1>=t.in2?e.in1:e.in1.concat(Je.make(t.in2-t.in1,r.in1&&r.in2?e.in1.msb:-1)),i=t.in2>=t.in1?e.in2:e.in2.concat(Je.make(t.in1-t.in2,r.in1&&r.in2?e.in2.msb:-1));return{out:this.bincomp(n,i)}},_operationHelpers:vh.prototype._operationHelpers.concat(["bincomp"])}),Dj=rT.define("Negation",{attrs:{oper:{text:"-"}}},{arithop:e=>-e}),Sge=Kt,Fj=rT.define("UnaryPlus",{attrs:{oper:{text:"+"}}},{arithop:e=>e}),Ege=Kt,Bj=Lc.define("Addition",{attrs:{oper:{text:"+"}}},{arithop:(e,t)=>e+t}),Age=Kt,zj=Lc.define("Subtraction",{attrs:{oper:{text:"-"}}},{arithop:(e,t)=>e-t}),Tge=Kt,Vj=Lc.define("Multiplication",{attrs:{oper:{text:"Ã"}}},{arithop:(e,t)=>e*t}),Pge=Kt,Gj=Lc.define("Division",{attrs:{oper:{text:"Ã·"}}},{arithop:(e,t)=>t==0n?e:e/t}),Cge=Kt,$j=Lc.define("Modulo",{attrs:{oper:{text:"%"}}},{arithop:(e,t)=>t==0n?e:e%t}),Rge=Kt,Uj=Lc.define("Power",{attrs:{oper:{text:"^"}}},{arithop:(e,t)=>t>=0n?e**t:e==1n?1n:e==-1n?t%2n?-1n:1n:0n}),Ige=Kt,jj=nT.define("ShiftLeft",{attrs:{oper:{text:"âª"}}},{shiftdir:-1}),Oge=Kt,Hj=nT.define("ShiftRight",{attrs:{oper:{text:"â«"}}},{shiftdir:1}),Mge=Kt,Wj=Yh.define("Lt",{attrs:{oper:{text:"<"}}},{arithcomp:(e,t)=>e<t}),kge=Kt,Xj=Yh.define("Le",{attrs:{oper:{text:"â¤"}}},{arithcomp:(e,t)=>e<=t}),Lge=Kt,Yj=Yh.define("Gt",{attrs:{oper:{text:">"}}},{arithcomp:(e,t)=>e>t}),Nge=Kt,Kj=Yh.define("Ge",{attrs:{oper:{text:"â¥"}}},{arithcomp:(e,t)=>e>=t}),qge=Kt,Zj=iT.define("Eq",{attrs:{oper:{text:"="}}},{bincomp:(e,t)=>e.xnor(t).reduceAnd()}),Dge=Kt,Jj=iT.define("Ne",{attrs:{oper:{text:"â "}}},{bincomp:(e,t)=>e.xor(t).reduceOr()}),Fge=Kt,oa=bi.define("OpConst",{leftOp:!1,constant:0},{initialize(){bi.prototype.initialize.apply(this,arguments);let e=this.get("constant");(typeof e=="string"||e instanceof String)&&(e=BigInt(e),xE(e)&&(e=Number(e)),this.set("constant",e));const t=()=>{const n=30+String(this.get("constant")).length*10;this.prop("size",{width:n,height:n}),this.attr("oper/text",this.get("leftOp")?this.get("constant")+this.operSymbol:this.operSymbol+this.get("constant"))};t(),this.on("change:bits",(r,n)=>{this._setPortsBits(n)}),this.on("change:constant",()=>t()),this.on("change:leftOp",()=>t())},getGateParams(){const e=bi.prototype.getGateParams.apply(this,arguments);return typeof e.constant=="bigint"&&(xE(e.constant)?e.constant=Number(e.constant):e.constant=String(e.constant)),e},_gateParams:bi.prototype._gateParams.concat(["leftOp","constant"])}),Nc=oa.define("ArithConst",{bits:{in:1,out:1},signed:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:e.out}],oa.prototype.initialize.apply(this,arguments)},operation(e){const t=this.get("bits"),r=this.get("signed"),n=this.get("constant");return e.in.isFullyDefined?this.get("leftOp")?{out:Je.fromNumber(this.arithop(BigInt(n),e.in.toBigInt(r.in)),t.out)}:{out:Je.fromNumber(this.arithop(e.in.toBigInt(r.in),BigInt(n)),t.out)}:{out:Je.xes(t.out)}},_operationHelpers:oa.prototype._operationHelpers.concat(["arithop"])}),sT=oa.define("ShiftConst",{bits:{in:1,out:1},signed:{in:!1,out:!1},fillx:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:e.out}],oa.prototype.initialize.apply(this,arguments)},operation(e){const t=this.get("bits"),r=this.get("signed"),n=this.get("fillx"),i=this.get("constant");if(this.get("leftOp")){if(!e.in.isFullyDefined)return{out:Je.xes(t.out)};const s=e.in.toNumber(r.in),o=Je.fromNumber(i);return{out:SE(o,s*this.shiftdir,o.bits,t.out,i<0,r.out,n)}}else return console.assert(xE(i)),{out:SE(e.in,Number(i)*this.shiftdir,t.in,t.out,r.in,r.out,n)}},_gateParams:oa.prototype._gateParams.concat(["fillx"]),_operationHelpers:oa.prototype._operationHelpers.concat(["shiftdir"])}),mh=oa.define("BaseCompareConst",{bits:{in:1},signed:!1},{initialize(){const e=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in},{id:"out",group:"out",dir:"out",bits:1}],oa.prototype.initialize.apply(this,arguments)}}),Kh=mh.define("CompareConst",{},{operation(e){this.get("bits");const t=this.get("signed"),r=this.get("constant");return e.in.isFullyDefined?this.get("leftOp")?{out:Je.fromBool(this.arithcomp(BigInt(r),e.in.toBigInt(t.in)))}:{out:Je.fromBool(this.arithcomp(e.in.toBigInt(t.in),BigInt(r)))}:{out:Je.x}},_operationHelpers:mh.prototype._operationHelpers.concat(["arithcomp"])}),oT=mh.define("EqCompareConst",{},{operation(e){const t=this.get("bits");this.get("signed");const r=this.get("constant");return this.get("leftOp")?{out:this.bincomp(Je.fromNumber(r,t.in),e.in)}:{out:this.bincomp(e.in,Je.fromNumber(r,t.in))}},_operationHelpers:mh.prototype._operationHelpers.concat(["bincomp"])}),Bge=Nc.define("AdditionConst",{},{operSymbol:"+",arithop:(e,t)=>e+t}),zge=Kt,Vge=Nc.define("SubtractionConst",{},{operSymbol:"-",arithop:(e,t)=>e-t}),Gge=Kt,$ge=Nc.define("MultiplicationConst",{},{operSymbol:"Ã",arithop:(e,t)=>e*t}),Uge=Kt,jge=Nc.define("DivisionConst",{},{operSymbol:"Ã·",arithop:(e,t)=>t==0n?e:e/t}),Hge=Kt,Wge=Nc.define("ModuloConst",{},{operSymbol:"%",arithop:(e,t)=>t==0n?e:e%t}),Xge=Kt,Yge=Nc.define("PowerConst",{},{operSymbol:"^",arithop:(e,t)=>t>=0n?e**t:e==1n?1n:e==-1n?t%2n?-1n:1n:0n}),Kge=Kt,Zge=sT.define("ShiftLeftConst",{},{operSymbol:"âª",shiftdir:-1}),Jge=Kt,Qge=sT.define("ShiftRightConst",{},{operSymbol:"â«",shiftdir:1}),eve=Kt,tve=Kh.define("LtConst",{},{operSymbol:"<",arithcomp:(e,t)=>e<t}),rve=Kt,nve=Kh.define("LeConst",{},{operSymbol:"â¤",arithcomp:(e,t)=>e<=t}),ive=Kt,sve=Kh.define("GtConst",{},{operSymbol:">",arithcomp:(e,t)=>e>t}),ove=Kt,ave=Kh.define("GeConst",{},{operSymbol:"â¥",arithcomp:(e,t)=>e>=t}),uve=Kt,cve=oT.define("EqConst",{},{operSymbol:"=",bincomp:(e,t)=>e.xnor(t).reduceAnd()}),lve=Kt,fve=oT.define("NeConst",{},{operSymbol:"â ",bincomp:(e,t)=>e.xor(t).reduceOr()}),hve=Kt,aT=Dt.define("BitExtend",{extend:{input:1,output:1},propagation:0,attrs:{value:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){const e=this.get("extend");console.assert(e.input<=e.output),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.input},{id:"out",group:"out",dir:"out",bits:e.output}],Dt.prototype.initialize.apply(this,arguments),this.on("change:extend",(t,r)=>{this._setPortsBits({in:r.input,out:r.output})})},operation(e){const t=this.get("extend");return{out:e.in.concat(Je.make(t.output-t.input,this._extBit(e.in)))}},markup:Dt.prototype.markup.concat([{tagName:"text",className:"value",selector:"value"}]),_gateParams:Dt.prototype._gateParams.concat(["extend"]),_operationHelpers:Dt.prototype._operationHelpers.concat(["_extBit"])}),uT=ni.extend({_autoResizeBox:!0,_calculateBoxWidth(){return this.el.querySelector("text.value").getBBox().width+10}}),Qj=aT.define("ZeroExtend",{attrs:{value:{text:"zero-extend"}}},{_extBit(e){return-1}}),dve=uT,eH=aT.define("SignExtend",{attrs:{value:{text:"sign-extend"}}},{_extBit(e){return e.get(e.bits-1)}}),pve=uT,tH=Dt.define("BusSlice",{slice:{first:0,count:1,total:2},propagation:0,size:{width:40,height:24}},{initialize(){const e=this.get("slice"),t=e.count==1?e.first:e.first+"-"+(e.first+e.count-1);this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.total},{id:"out",group:"out",dir:"out",bits:e.count,portlabel:t,labelled:!0}],Dt.prototype.initialize.apply(this,arguments),this.on("change:slice",(r,n)=>{this._setPortsBits({in:n.total,out:n.count})})},operation(e){const t=this.get("slice");return{out:e.in.slice(t.first,t.first+t.count)}},_gateParams:Dt.prototype._gateParams.concat(["slice"])}),gve=ni.extend({_autoResizeBox:!0}),cT=Dt.define("BusRegroup",{groups:[1],propagation:0,size:{width:40,height:void 0}},{initialize(){var e=0;const t=[],r=this.get("groups");this.get("size").height=r.length*16+8;for(const[i,s]of r.entries()){const o=e+(s>1?"-"+(e+s-1):"");e+=s,t.push({id:this.group_dir+i,group:this.group_dir,dir:this.group_dir,bits:s,portlabel:o,labelled:!0})}this.set("bits",e);const n=this.group_dir=="out"?"in":"out";t.push({id:n,group:n,dir:n,bits:e}),this.get("ports").items=t,Dt.prototype.initialize.apply(this,arguments)},_gateParams:Dt.prototype._gateParams.concat(["groups"]),_unsupportedPropChanges:Dt.prototype._unsupportedPropChanges.concat(["groups"])}),lT=ni.extend({_autoResizeBox:!0}),rH=cT.define("BusGroup",{},{group_dir:"in",operation(e){const t=[];for(const r of this.get("groups").keys())t.push(e["in"+r]);return{out:Je.concat(...t)}}}),vve=lT,nH=cT.define("BusUngroup",{},{group_dir:"out",operation(e){const t={};let r=0;for(const[n,i]of this.get("groups").entries())t["out"+n]=e.in.slice(r,r+i),r+=i;return t}}),mve=lT,t4=10,yve=10,iH=Dt.define("Subcircuit",{propagation:0,warning:!1,attrs:{wrapper:{refWidth:1,refHeight:1,stroke:"red",strokeWidth:10},type:{refX:.5,refY:-10,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){this.bindAttrToProp("text.type/text","celltype");const e=this.get("graph");console.assert(e instanceof Po),e.set("subcircuit",this);const t=e.getCells().filter(c=>c instanceof Ao),r=t.filter(c=>c instanceof Wh),n=t.filter(c=>c instanceof Xh);function i(c,f){return c.has("order")||f.has("order")?c.get("order")-f.get("order"):c.get("net").localeCompare(f.get("net"))}r.sort(i),n.sort(i);const o={width:80,height:Math.max(r.length,n.length)*16+8},a=[],u={};for(const[c,f]of r.entries())a.push({id:f.get("net"),group:"in",dir:"in",bits:f.get("bits"),labelled:!0});for(const[c,f]of n.entries())a.push({id:f.get("net"),group:"out",dir:"out",bits:f.get("bits"),labelled:!0});for(const c of t)u[c.get("net")]=c.get("id");this.set("size",o),this.set("circuitIOmap",u),this.get("ports").items=a,this.set("warning",e._warnings>0),Dt.prototype.initialize.apply(this,arguments)},_resetPortValue(e){const t=this.get("circuitIOmap"),r=this.get("graph");return e.dir=="in"?r.getCell(t[e.id]).get("outputSignals").out:e.dir=="out"?r.getCell(t[e.id]).get("inputSignals").in:Dt.prototype._resetPortValue.call(this,e)},getLayoutSize(){const e=this.size();return e.height+=yve,e},setLayoutPosition(e){this.set("position",{x:e.x,y:e.y+t4})},getPortsPositions(){const e=Dt.prototype.getPortsPositions.apply(this,arguments),t={};for(const r in e)t[r]={...e[r]},t[r].y=t[r].y+t4;return t},markup:[{tagName:"rect",selector:"wrapper"}].concat(Dt.prototype.markup,[{tagName:"text",className:"type",selector:"type"}],Dt.prototype.markupZoom),_gateParams:Dt.prototype._gateParams.concat(["celltype"]),_unsupportedPropChanges:Dt.prototype._unsupportedPropChanges.concat(["celltype"])}),_ve=ni.extend({attrs:An.merge({},ni.prototype.attrs,{warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}}),_autoResizeBox:!0,presentationAttributes:ni.addPresentationAttributes({warning:"WARNING"}),confirmUpdate(e){ni.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"WARNING")&&this._updateWarning()},_updateWarning(){const e=this.model.get("warning"),t=this.attrs.warning[e?"warn":"none"];this._applyAttrs(t)},update(){ni.prototype.update.apply(this,arguments),this._updateWarning()},events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"zoomInCircuit"},zoomInCircuit(e){return e.stopPropagation(),this.paper.trigger("open:subcircuit",this.model),!1}}),r4=20,bve=30,mu=_n.define("GenMux",{bits:{in:1,sel:1},size:{width:40,height:void 0},ports:{groups:{in2:{position:{name:"top",args:{y:5}},attrs:An.merge({},Up,{wire:{x2:0,y2:-25},port:{magnet:"passive",refY:-25},bits:{refDx:-5,refDy:2,textAnchor:"start"}}),z:-1}}},attrs:{label:{refDy:8}}},{initialize(){const e=this.get("bits"),t=[{id:"sel",group:"in2",dir:"in",bits:e.sel},{id:"out",group:"out",dir:"out",bits:e.in}],r=this.muxInputs(e.sel);this.get("size").height=r.length*16+8;const i="M"+[[2,0],[5,5],[10,-5]].map(o=>o.join(" ")).join(" L");for(const[o,a]of r.entries()){const u={id:"in"+o,group:"in",dir:"in",bits:e.in,decor:i};a&&(u.portlabel=String(a),u.labelled=!0),t.push(u)}this.get("ports").items=t,_n.prototype.initialize.apply(this,arguments);const s=o=>this.attr(["body","points"],[[0,-5],[o.width,5],[o.width,o.height-5],[0,o.height+5]].map(a=>a.join(",")).join(" "));s(this.get("size")),this.on("change:size",(o,a)=>s(a))},operation(e){const t=this.muxInput(e.sel);return t===void 0?{out:Je.xes(this.get("bits").in)}:{out:e["in"+t]}},getLayoutSize(){const e=this.size();return e.height+=bve,e},setLayoutPosition(e){this.set("position",{x:e.x,y:e.y+r4})},getPortsPositions(){const e=_n.prototype.getPortsPositions.apply(this,arguments),t={};for(const r in e)t[r]={...e[r]},t[r].y=t[r].y+r4;return t},markup:_n.prototype.markup.concat([{tagName:"polygon",className:"body",selector:"body"}]),_gateParams:_n.prototype._gateParams.concat(["bits"]),_unsupportedPropChanges:_n.prototype._unsupportedPropChanges.concat(["bits"]),_operationHelpers:_n.prototype._operationHelpers.concat(["muxInput"])}),lv=Kt.extend({initialize(){this.ins=this.model.muxInputs(this.model.get("bits").sel),Kt.prototype.initialize.apply(this,arguments)},confirmUpdate(e){Kt.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(e,"SIGNAL")&&this._updateMux(this.model.get("inputSignals"))},render(){Kt.prototype.render.apply(this,arguments),this._updateMux(this.model.get("inputSignals"))},_updateMux(e){const t=this.model.muxInput(e.sel);for(const r of this.ins.keys())this.$("[port=in"+r+"] path.decor").css("visibility",t==r?"visible":"hidden")}}),sH=mu.define("Mux",{},{muxInputs:e=>Array(1<<e),muxInput:e=>e.isFullyDefined?e.toBigInt().toString():void 0}),wve=lv,oH=mu.define("Mux1Hot",{attrs:{info:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",text:"1Hot",transform:"rotate(90)"}}},{markup:mu.prototype.markup.concat([{tagName:"text",className:"info",selector:"info"}]),muxInputs:e=>Array(e+1),muxInput:e=>{const t=e.toArray();return e.isFullyDefined&&t.filter(r=>r==1).length<=1?String(t.indexOf(1)+1):void 0}}),xve=lv,Sve=mu.define("MuxSparse",{inputs:void 0,default_input:!1},{initialize(){const e=this.get("inputs");for(let t=0;t<e.length;t++)typeof e[t]!="bigint"&&(e[t]=BigInt(e[t]));mu.prototype.initialize.apply(this,arguments)},muxInputs(e){return this.get("default_input")?["*"].concat(this.get("inputs")):this.get("inputs")},muxInput(e){const t=this.get("default_input");if(!e.isFullyDefined)return;const r=this.get("inputs").indexOf(e.toBigInt());return r<0?t?0:void 0:t?r+1:r},_gateParams:mu.prototype._gateParams.concat(["inputs","default_input"]),_unsupportedPropChanges:mu.prototype._unsupportedPropChanges.concat(["inputs","default_input"])}),Eve=lv,aH=Dt.define("Dff",{bits:1,initial:"x",size:{width:80,height:void 0},ports:{groups:{in:{position:Dt.prototype._getStackedPosition({side:"left"})},out:{position:Dt.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const e=this.get("bits");this.get("initial");const t=this.get("polarity")||{},r=[];this.get("no_data")||r.push({id:"in",group:"in",dir:"in",bits:e,portlabel:"D",labelled:!0}),r.push({id:"out",group:"out",dir:"out",bits:e,portlabel:"Q",labelled:!0}),"arst"in t&&!this.get("arst_value")&&this.set("arst_value",Array(e).fill("0").join("")),"srst"in t&&!this.get("srst_value")&&this.set("srst_value",Array(e).fill("0").join(""));let n=1;"aload"in t&&(n+=2,r.push({id:"ain",group:"in",dir:"in",bits:e,portlabel:"AD",labelled:!0}),r.push({id:"aload",group:"in",dir:"in",bits:1,polarity:t.aload,labelled:!0})),"clock"in t&&(n++,r.push({id:"clk",group:"in",dir:"in",bits:1,polarity:t.clock,decor:Dt.prototype.decorClock,labelled:!0})),"set"in t&&(n++,r.push({id:"set",group:"in",dir:"in",bits:e,polarity:t.set,portlabel:"S",labelled:!0})),"clr"in t&&(n++,r.push({id:"clr",group:"in",dir:"in",bits:e,polarity:t.clr,portlabel:"R",labelled:!0})),"srst"in t&&(n++,r.push({id:"srst",group:"in",dir:"in",bits:1,polarity:t.srst,labelled:!0})),"arst"in t&&(n++,r.push({id:"arst",group:"in",dir:"in",bits:1,polarity:t.arst,labelled:!0})),"enable"in t&&(n++,r.push({id:"en",group:"in",dir:"in",bits:1,polarity:t.enable,labelled:!0})),this.get("size").height=n*16+8,this.get("ports").items=r,this.last_clk=0,Dt.prototype.initialize.apply(this,arguments)},_resetPortValue(e){return e.id=="out"&&e.dir=="out"?Je.fromBin(this.get("initial"),e.bits):Dt.prototype._resetPortValue.call(this,e)},operation(e){const t=this.get("polarity"),r=a=>t[a]?1:-1;let n,i,s;const o=a=>({out:i?a.and(s).or(i):a});if("clock"in t&&(n=this.last_clk,this.last_clk=e.clk.get(0)),"arst"in t&&e.arst.get(0)==r("arst"))return{out:Je.fromBin(this.get("arst_value"),this.get("bits"))};if("aload"in t&&e.aload.get(0)==r("aload"))return{out:e.ain};if("set"in t&&(i=t.set?e.set:e.set.not(),s=t.set?e.set.not():e.set),"clr"in t){i=i||Je.zeros(this.get("bits"));const a=t.clr?e.clr.not():e.clr;s=s?a.and(s):a}return"enable"in t&&e.en.get(0)!=r("enable")&&this.get("enable_srst")?o(this.get("outputSignals").out):!("clock"in t)||e.clk.get(0)==r("clock")&&n==-r("clock")?"srst"in t&&e.srst.get(0)==r("srst")?o(Je.fromBin(this.get("srst_value"),this.get("bits"))):"enable"in t&&e.en.get(0)!=r("enable")&&!this.get("enable_srst")?o(this.get("outputSignals").out):this.get("no_data")?o(this.get("outputSignals").out):o(e.in):o(this.get("outputSignals").out)},_gateParams:Dt.prototype._gateParams.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"]),_unsupportedPropChanges:Dt.prototype._unsupportedPropChanges.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"])}),Ave=ni.extend({_autoResizeBox:!0}),uH=Dt.define("Memory",{bits:1,abits:1,rdports:[],wrports:[],words:void 0,offset:0,attrs:{portsplit:{stroke:"black"}},ports:{groups:{in:{position:Dt.prototype._getStackedPosition({side:"left"})},out:{position:Dt.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const e=this.get("bits"),t=this.get("abits");this.get("rdports"),this.get("wrports");let r=0,n=0;const i=[],s=[];for(const[o,a]of this._memrdports())i.push({id:o+"addr",group:"in",dir:"in",bits:t,portlabel:"addr",labelled:!0},{id:o+"data",group:"out",dir:"out",bits:e,portlabel:"data",labelled:!0,args:{idxOffset:n}}),r+=1,"srst_polarity"in a&&(r++,n++,i.push({id:o+"srst",group:"in",dir:"in",bits:1,portlabel:"srst",polarity:a.srst_polarity,labelled:!0})),"arst_polarity"in a&&(r++,n++,i.push({id:o+"arst",group:"in",dir:"in",bits:1,portlabel:"arst",polarity:a.arst_polarity,labelled:!0})),"enable_polarity"in a&&(r++,n++,i.push({id:o+"en",group:"in",dir:"in",bits:1,portlabel:"en",polarity:a.enable_polarity,labelled:!0})),"clock_polarity"in a&&(r++,n++,i.push({id:o+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:a.clock_polarity,decor:Dt.prototype.decorClock,labelled:!0})),s.push(r);for(const[o,a]of this._memwrports())r+=2,i.push({id:o+"data",group:"in",dir:"in",bits:e,portlabel:"data",labelled:!0},{id:o+"addr",group:"in",dir:"in",bits:t,portlabel:"addr",labelled:!0}),"enable_polarity"in a&&(r++,i.push({id:o+"en",group:"in",dir:"in",bits:a.no_bit_enable?1:e,portlabel:"en",polarity:a.enable_polarity,labelled:!0})),"clock_polarity"in a&&(r++,i.push({id:o+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:a.clock_polarity,decor:Dt.prototype.decorClock,labelled:!0})),s.push(r);s.pop(),this.get("size").height=r*16+8,this.get("ports").items=i,Dt.prototype.initialize.apply(this,arguments),this.removeProp("memdata"),this.on("change:size",(o,a)=>{const u=[];for(const c of s)u.push([[0,16*c+4],[a.width,16*c+4]].map(f=>f.join(" ")).join(" L "));this.attr("path.portsplit/d","M "+u.join(" M "))})},_resetPortValue(e){if(e.dir=="out"){const t=/^rd([0-9]+)data$/.exec(e.id),r=t?this.get("rdports")[t[1]]:{};if("init_value"in r)return Je.fromBin(r.init_value,e.bits)}return Dt.prototype._resetPortValue.call(this,e)},prepare(){const e=this.get("bits");var t=this.get("words");const r=this.get("memdata");t||(t=1<<this.get("abits"),this.prop("words",t,{init:!0})),r?this.memdata=gl.fromJSON(e,r):this.memdata=new gl(e,t),console.assert(this.memdata.words==t),this.last_clk={};for(const[n,i]of this._memports())"clock_polarity"in i&&(this.last_clk[n+"clk"]=0)},operation(e){const t=this.get("bits"),r={},n=(m,_)=>m[_+"_polarity"]?1:-1,i=(m,_)=>!("enable_polarity"in _&&!e[m+"en"].toArray().some(b=>b==n(_,"enable"))),s=(m,_)=>{const b=m+"clk";return"clock_polarity"in _?e[b].get(0)==n(_,"clock")&&this.last_clk[b]==-n(_,"clock"):!0},o=m=>m>=0&&m<this.get("words"),a=(m,_)=>{const b=this._calcaddr(e[m+"addr"]);o(b)?r[m+"data"]=this.memdata.get(b):r[m+"data"]=Je.xes(t)},u=(m,_,b,S)=>{if(_.no_bit_enable||!("enable_polarity"in _))return S;const E=_.enable_polarity?e[m+"en"]:e[m+"en"].not();return S.and(E).or(b.and(E.not()))},c=(m,_)=>{a(m);for(const[b,S]of this.get("wrports").entries()){const E="wr"+b,A=(T,I)=>typeof T=="boolean"?T:T[I];"transparent"in _&&A(_.transparent,b)&&s(E,S)&&i(E,S)&&e[m+"addr"]==e[E+"addr"]&&(r[m+"data"]=u(E,S,r[m+"data"],e[E+"data"])),"collision"in _&&A(_.collision,b)&&s(E,S)&&i(E,S)&&e[m+"addr"]==e[E+"addr"]&&(r[m+"data"]=u(E,S,r[m+"data"],Je.xes(t)))}},f=(m,_)=>{const b=this._calcaddr(e[m+"addr"]);if(o(b)){const S=this.memdata.get(b),E=u(m,_,S,e[m+"data"]),A=!S.eq(E);this.memdata.set(b,E),A&&this.trigger("memChange",b,E)}},h=(m,_)=>{e[m+"srst"].get(0)==n(_,"srst")&&(r[m+"data"]="srst_value"in _?Je.fromBin(_.srst_value,t):Je.zeros(t))},g=(m,_)=>{e[m+"arst"].get(0)==n(_,"arst")&&(r[m+"data"]="arst_value"in _?Je.fromBin(_.arst_value,t):Je.zeros(t))},y=(m,_)=>{if("clock_polarity"in _){const b=m+"clk";this.last_clk[b]=e[b].get(0)}};for(const[m,_]of this._memrdports())r[m+"data"]=this.get("outputSignals")[m+"data"],"clock_polarity"in _&&i(m,_)&&s(m,_)&&c(m,_);for(const[m,_]of this._memwrports())i(m,_)&&s(m,_)&&f(m,_);for(const[m,_]of this._memrdports())!("clock_polarity"in _)&&i(m,_)&&a(m);for(const[m,_]of this._memrdports())"srst_polarity"in _&&(i(m,_)||!("enable_srst"in _))&&s(m,_)&&h(m,_),"arst_polarity"in _&&g(m,_);for(const[m,_]of this._memrdports())y(m,_);for(const[m,_]of this._memwrports())y(m,_);return r},_calcaddr(e){return e.isFullyDefined?e.toNumber()-this.get("offset"):-1},*_memrdports(){for(const[e,t]of this.get("rdports").entries())yield["rd"+e,t]},*_memwrports(){for(const[e,t]of this.get("wrports").entries())yield["wr"+e,t]},*_memports(){yield*this._memrdports(),yield*this._memwrports()},markup:Dt.prototype.markup.concat([{tagName:"path",className:"portsplit",selector:"portsplit"}],Dt.prototype.markupZoom),getGateParams(){const e=Dt.prototype.getGateParams.apply(this,arguments);return e.memdata=this.memdata.toJSON(),e},_gateParams:Dt.prototype._gateParams.concat(["bits","abits","rdports","wrports","words","offset"]),_unsupportedPropChanges:Dt.prototype._unsupportedPropChanges.concat(["bits","abits","rdports","wrports","words","offset"]),_operationHelpers:Dt.prototype._operationHelpers.concat(["_memrdports","_memwrports","_memports","_calcaddr"])}),Tve=ni.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(e){e.stopPropagation();const t=this.model,r=t.graph._display3vl,n=It("<div>",{title:"Memory contents: "+t.get("label")}).appendTo("html > body");n.append(It('<div class="btn-toolbar" role="toolbar"><div class="btn-group mr-2" role="group"><button name="prev" type="button" class="btn btn-secondary" title="Previous page">â</button><button name="next" type="button" class="btn btn-secondary" title="Next page">â</button></div><div class="input-group">'+eT(r,t.get("bits"),"hex")+'</div></div><table class="memeditor"></table>'));const i=t.get("words"),s=t.memdata,o=Math.ceil(t.get("abits")/4),a=8;let u,c=0;const f=()=>n.find("select[name=base]").val(),h=E=>{const A=Math.floor((E-c)/u),T=E-c-A*u;return n.find("table tr:nth-child("+(A+1)+") td:nth-child("+(T+2)+") input")},g=E=>{for(const[A,T]of t._memrdports())h(t._calcaddr(E[A+"addr"])).removeClass("isread");for(const[A,T]of t._memwrports())h(t._calcaddr(E[A+"addr"])).removeClass("iswrite")},y=E=>{for(const[A,T]of t._memrdports())h(t._calcaddr(E[A+"addr"])).addClass("isread");for(const[A,T]of t._memwrports())h(t._calcaddr(E[A+"addr"])).addClass("iswrite")},m=()=>{const E=f();n.find("button[name=prev]").prop("disabled",c<=0),n.find("button[name=next]").prop("disabled",c+a*u>=i);let A=n.find("table tr:first-child");const T=t.memdata;for(let I=0;I<a&&!(c+I*u>=i);I++,A=A.next()){const q=(c+I*u).toString(16);let p=A.find("td:first-child");p.text("0".repeat(o-q.length)+q),p=p.next();for(let P=0;P<u&&!(c+I*u+P>=i);P++,p=p.next())p.find("input").val(r.show(E,T.get(c+I*u+P))).removeClass("invalid")}y(t.get("inputSignals"))},_=()=>{const E=f(),A=r.pattern(E),T=r.size(E,t.get("bits"));u=Math.min(i,16,Math.ceil(32/T)),c=Math.max(0,Math.min(i-a*u,c));const I=n.find("table");I.empty();for(let q=0;q<a&&!(c+q*u>=i);q++){const p=It("<tr>");It("<td>").appendTo(p);for(let P=0;P<u&&!(c+q*u+P>=i);P++){const O=It("<td>");It('<input type="text">').attr("size",T).attr("maxlength",T).attr("pattern",A).appendTo(O),O.appendTo(p)}p.appendTo(I)}m()};_(),n.find("select[name=base]").on("change",_),n.find("button[name=prev]").on("click",()=>{g(t.get("inputSignals")),c=Math.max(0,c-a*u),m()}),n.find("button[name=next]").on("click",()=>{g(t.get("inputSignals")),c=Math.min(i-a*u,c+a*u),m()}),n.on("change","input",E=>{const A=f(),T=It(E.target),I=T.closest("td").index()-1,q=T.closest("tr").index(),p=c+q*u+I,P=t.get("bits");if(r.validate(A,E.target.value,P)){const O=r.read(A,E.target.value,P);s.set(p,O),t.trigger("manualMemChange",t,p,O),T.removeClass("invalid")}else T.addClass("invalid")});const b=(E,A)=>{if(E<c||E>c+a*u)return;const T=f(),I=h(E).val(r.show(T,s.get(E))).removeClass("invalid").removeClass("flash");setTimeout(()=>{I.addClass("flash")},10)},S=(E,A)=>{g(t.previous("inputSignals")),y(A)};return t.on("memChange",b),t.on("change:inputSignals",S),this.paper.trigger("open:memorycontent",n,()=>{n.remove(),t.off("memChange",b),t.off("change:inputSignals",S)}),!1}}),cH=Dt.define("FSM",{bits:{in:1,out:1},polarity:{clock:!0},init_state:0,states:1,trans_table:[],size:{width:80,height:3*16+8},ports:{groups:{in:{position:Dt.prototype._getStackedPosition({side:"left"})},out:{position:Dt.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const e=this.get("bits"),t=this.get("polarity"),r=this.get("init_state"),n=this.get("states");this.get("trans_table"),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:e.in,labelled:!0},{id:"clk",group:"in",dir:"in",bits:1,polarity:t.clock,decor:Dt.prototype.decorClock,labelled:!0},{id:"arst",group:"in",dir:"in",bits:1,polarity:t.arst,labelled:!0},{id:"out",group:"out",dir:"out",bits:e.out,labelled:!0}],Dt.prototype.initialize.apply(this,arguments);const i=this.get("current_state");this.fsmgraph=new Po;for(let s=0;s<n;s++){const o=new Ipe({stateNo:s,id:"state"+s,isInit:s==r});o.attr("label/text",String(s)),o.resize(100,50),s==r&&o.attr("body/strokeWidth",3),s==i&&o.attr("body/class","current_state"),o.addTo(this.fsmgraph)}for(const[s,o]of this.transitions)for(const a of o){const u=new _p({id:a.id,ctrlIn:a.ctrlIn,ctrlOut:a.ctrlOut});u.appendLabel({attrs:{text:{text:u.get("ctrlIn").toBin()+"/"+u.get("ctrlOut").toBin()}}}),u.source({id:"state"+s}),u.target({id:"state"+a.stateOut}),u.addTo(this.fsmgraph)}this.listenTo(this,"change:current_state",(s,o)=>{const a=s.previous("current_state");this.fsmgraph.getCell("state"+a).removeAttr("body/class"),this.fsmgraph.getCell("state"+o).attr("body/class","current_state")}),this.listenTo(this,"change:next_trans",(s,o)=>{const a=s.previous("next_trans");if(a){const u=this.fsmgraph.getCell(a);u.removeAttr("line/class"),u.removeAttr("line/targetMarker/class")}o&&this.fsmgraph.getCell(o).attr({line:{class:"next_trans",targetMarker:{class:"next_trans"}}})})},prepare(){const e=this.get("bits");this.transitions=new Map;var t=0;for(const n of this.get("trans_table"))this.transitions.has(n.state_in)||this.transitions.set(n.state_in,[]),this.transitions.get(n.state_in).push({id:"tr"+t,stateOut:n.state_out,ctrlIn:Je.fromBin(n.ctrl_in,e.in),ctrlOut:Je.fromBin(n.ctrl_out,e.out)}),t++;var r=this.get("current_state");r===void 0&&(r=this.get("init_state"),this.set("current_state",r)),this.last_clk=0},operation(e){const t=this.get("bits"),r=this.get("polarity"),n=()=>{const a=this.transitions.get(this.get("current_state"))||[];for(const u of a){const c=u.ctrlIn,f=c.xmask();if(e.in.or(f).eq(c.or(f)))return u}},i=()=>{const a=this.transitions.get(this.get("current_state"))||[],u=e.in.xmask(),c=[];for(const h of a){const g=h.ctrlIn,y=g.xmask().or(u);e.in.or(y).eq(g.or(y))&&c.push(h.ctrlOut)}const f=Je.xes(t.out);if(c.length==0)return f;for(;c.length>1;){const h=c.pop(),g=c[0].xnor(h).or(f);c[0]=c[0].and(g).or(f.and(g.xmask()))}return c[0]},s=a=>r[a]?1:-1;if(e.arst.get(0)==s("arst"))this.set("current_state",this.get("init_state"));else{const a=this.last_clk;if(e.clk.get(0)==s("clock")&&a==-s("clock")){const u=n();this.set("current_state",u?u.stateOut:this.get("init_state"))}}this.last_clk=e.clk.get(0);const o=n();return o?this.set("next_trans",o.id):this.set("next_trans",void 0),{out:i()}},markup:Dt.prototype.markup.concat(Dt.prototype.markupZoom),_gateParams:Dt.prototype._gateParams.concat(["bits","polarity","states","init_state","trans_table"]),_unsupportedPropChanges:Dt.prototype._unsupportedPropChanges.concat(["bits","polarity","states","init_state","trans_table"]),_presentationParams:Dt.prototype._presentationParams.concat(["current_state","next_trans"])}),Pve=ni.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(e){e.stopPropagation();const t=It("<div>",{title:"FSM: "+this.model.get("label")}).appendTo("html > body"),r=It("<div>").appendTo(t),n=this.model.fsmgraph,i=new uj({el:r,model:n});return n.resetCells(n.getCells()),n.get("laid_out")||(gh.layout(n,{dagre:Kue,graphlib:Jue}),n.set("laid_out",!0)),i.listenTo(n,"change:position",s=>{i.fitToContent({padding:30,allowNewOrigin:"any"})}),i.fitToContent({padding:30,allowNewOrigin:"any"}),this.paper.trigger("open:fsm",t,()=>{i.remove(),t.remove()}),!1}}),lu="#03c03c",ka="#3c3c3c",lH=Ao.define("Display7",{bits:8,size:{width:76.5,height:110},attrs:{LEDs:{fill:ka,transform:"translate(1,1),scale(6)"},a:{points:"1, 1  2, 0  8, 0  9, 1  8, 2  2, 2"},b:{points:"9, 1 10, 2 10, 8  9, 9  8, 8  8, 2"},c:{points:"9, 9 10,10 10,16  9,17  8,16  8,10"},d:{points:"9,17  8,18  2,18  1,17  2,16  8,16"},e:{points:"1,17  0,16  0,10  1, 9  2,10  2,16"},f:{points:"1, 9  0, 8  0, 2  1, 1  2, 2  2, 8"},g:{points:"1, 9  2, 8  8, 8  9, 9  8,10  2,10"},dp:{cx:"11.3",cy:"16.9",r:"1.1"},body:{height:"calc(h)",width:"calc(w)",stroke:"#222222",fill:"#333333"}}},{isOutput:!0,_portDirection:"in",bits:8,getOutput(){return this.get("inputSignals").in},markupBus:cs.prototype.markup.concat([{tagName:"rect",selector:"display"},{tagName:"polygon",selector:"a",groupSelector:"LEDs"},{tagName:"polygon",selector:"b",groupSelector:"LEDs"},{tagName:"polygon",selector:"c",groupSelector:"LEDs"},{tagName:"polygon",selector:"d",groupSelector:"LEDs"},{tagName:"polygon",selector:"e",groupSelector:"LEDs"},{tagName:"polygon",selector:"f",groupSelector:"LEDs"},{tagName:"polygon",selector:"g",groupSelector:"LEDs"},{tagName:"circle",selector:"dp",groupSelector:"LEDs"}])}),Cve=sa.extend({_autoResizeBox:!1,confirmUpdate(e){ni.prototype.confirmUpdate.apply(this,arguments),this._updateDisplay()},_updateDisplay(){const e=this.model.getOutput(),t={dp:{fill:e.get(7)===1?lu:ka},a:{fill:e.get(6)===1?lu:ka},b:{fill:e.get(5)===1?lu:ka},c:{fill:e.get(4)===1?lu:ka},d:{fill:e.get(3)===1?lu:ka},e:{fill:e.get(2)===1?lu:ka},f:{fill:e.get(1)===1?lu:ka},g:{fill:e.get(0)===1?lu:ka}};this._applyAttrs(t)}}),Rve=Object.freeze(Object.defineProperty({__proto__:null,Addition:Bj,AdditionConst:Bge,AdditionConstView:zge,AdditionView:Age,And:Cj,AndReduce:kj,AndReduceView:_ge,AndView:hge,Arith:bi,Arith11:rT,Arith21:Lc,ArithConst:Nc,BaseCompare:vh,BaseCompareConst:mh,BitExtend:aT,BitExtendView:uT,Box:Dt,BoxView:ni,BusGroup:rH,BusGroupView:vve,BusRegroup:cT,BusRegroupView:lT,BusSlice:tH,BusSliceView:gve,BusUngroup:nH,BusUngroupView:mve,Button:yj,ButtonView:tge,Clock:Sj,ClockView:oge,Compare:Yh,CompareConst:Kh,Constant:xj,ConstantView:sge,Dff:aH,DffView:Ave,Display7:lH,Display7View:Cve,Division:Gj,DivisionConst:jge,DivisionConstView:Hge,DivisionView:Cge,Eq:Zj,EqCompare:iT,EqCompareConst:oT,EqConst:cve,EqConstView:lve,EqView:Dge,FSM:cH,FSMView:Pve,Gate:_n,Gate11:tT,GateReduce:Su,GateSVG:ia,GateView:Kt,GateX1:kc,Ge:Kj,GeConst:ave,GeConstView:uve,GeView:qge,GenMux:mu,GenMuxView:lv,Gt:Yj,GtConst:sve,GtConstView:ove,GtView:Nge,IO:Ao,IOView:sa,Input:Wh,InputView:JA,Lamp:bj,LampView:nge,Le:Xj,LeConst:nve,LeConstView:ive,LeView:Lge,Lt:Wj,LtConst:tve,LtConstView:rve,LtView:kge,Memory:uH,MemoryView:Tve,Modulo:$j,ModuloConst:Wge,ModuloConstView:Xge,ModuloView:Rge,Multiplication:Vj,MultiplicationConst:$ge,MultiplicationConstView:Uge,MultiplicationView:Pge,Mux:sH,Mux1Hot:oH,Mux1HotView:xve,MuxSparse:Sve,MuxSparseView:Eve,MuxView:wve,Nand:Ij,NandReduce:Lj,NandReduceView:bge,NandView:pge,Ne:Jj,NeConst:fve,NeConstView:hve,NeView:Fge,Negation:Dj,NegationView:Sge,Nor:Rj,NorReduce:wE,NorReduceView:yge,NorView:dge,Not:Tj,NotView:lge,NumBase:cs,NumBaseView:vu,NumDisplay:wj,NumDisplayView:ige,NumEntry:_j,NumEntryView:rge,OpConst:oa,Or:Pj,OrReduce:bE,OrReduceView:mge,OrView:fge,Output:Xh,OutputView:QA,Power:Uj,PowerConst:Yge,PowerConstView:Kge,PowerView:Ige,Repeater:Aj,RepeaterView:cge,Shift:nT,ShiftConst:sT,ShiftLeft:jj,ShiftLeftConst:Zge,ShiftLeftConstView:Jge,ShiftLeftView:Oge,ShiftRight:Hj,ShiftRightConst:Qge,ShiftRightConstView:eve,ShiftRightView:Mge,SignExtend:eH,SignExtendView:pve,Subcircuit:iH,SubcircuitView:_ve,Subtraction:zj,SubtractionConst:Vge,SubtractionConstView:Gge,SubtractionView:Tge,UnaryPlus:Fj,UnaryPlusView:Ege,Wire:mj,WireView:ege,Xnor:Mj,XnorReduce:qj,XnorReduceView:xge,XnorView:vge,Xor:Oj,XorReduce:Nj,XorReduceView:wge,XorView:gge,ZeroExtend:Qj,ZeroExtendView:dve,portGroupAttrs:Up},Symbol.toStringTag,{value:"Module"}));var BS,n4;function Ive(){if(n4)return BS;n4=1;var e=function(r,n){return r<n};function t(r){if(!(this instanceof t))return new t(r);this.array=[],this.size=0,this.compare=r||e}return t.prototype.clone=function(){var r=new t(this.compare);return r.size=this.size,r.array=this.array.slice(0,this.size),r},t.prototype.add=function(r){var n=this.size;this.array[this.size]=r,this.size+=1;for(var i,s;n>0&&(i=n-1>>1,s=this.array[i],!!this.compare(r,s));)this.array[n]=s,n=i;this.array[n]=r},t.prototype.heapify=function(r){this.array=r,this.size=r.length;var n;for(n=this.size>>1;n>=0;n--)this._percolateDown(n)},t.prototype._percolateUp=function(r,n){for(var i=this.array[r],s,o;r>0&&(s=r-1>>1,o=this.array[s],!(!n&&!this.compare(i,o)));)this.array[r]=o,r=s;this.array[r]=i},t.prototype._percolateDown=function(r){for(var n=this.size,i=this.size>>>1,s=this.array[r],o,a,u;r<i&&(o=(r<<1)+1,a=o+1,u=this.array[o],a<n&&this.compare(this.array[a],u)&&(o=a,u=this.array[a]),!!this.compare(u,s));)this.array[r]=u,r=o;this.array[r]=s},t.prototype._removeAt=function(r){if(!(r>this.size-1||r<0))return this._percolateUp(r,!0),this.poll()},t.prototype.remove=function(r){for(var n=0;n<this.size;n++)if(!this.compare(this.array[n],r)&&!this.compare(r,this.array[n]))return this._removeAt(n),!0;return!1},t.prototype.removeOne=function(r){if(typeof r=="function"){for(var n=0;n<this.size;n++)if(r(this.array[n]))return this._removeAt(n)}},t.prototype.removeMany=function(r,n){if(typeof r!="function"||this.size<1)return[];n=n?Math.min(n,this.size):this.size;for(var i=0,s=new Array(n),o=0,a=new Array(this.size);i<n&&!this.isEmpty();){var u=this.poll();r(u)?s[i++]=u:a[o++]=u}s.length=i;for(var c=0;c<o;)this.add(a[c++]);return s},t.prototype.peek=function(){if(this.size!=0)return this.array[0]},t.prototype.poll=function(){if(this.size!=0){var r=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,r}},t.prototype.replaceTop=function(r){if(this.size!=0){var n=this.array[0];return this.array[0]=r,this._percolateDown(0),n}},t.prototype.trim=function(){this.array=this.array.slice(0,this.size)},t.prototype.isEmpty=function(){return this.size===0},t.prototype.forEach=function(r){if(!(this.isEmpty()||typeof r!="function"))for(var n=0,i=this.clone();!i.isEmpty();)r(i.poll(),n++)},t.prototype.kSmallest=function(r){if(this.size==0)return[];r=Math.min(this.size,r);var n=new t(this.compare);const i=Math.min((r>0?Math.pow(2,r-1):0)+1,this.size);n.size=i,n.array=this.array.slice(0,i);for(var s=new Array(r),o=0;o<r;o++)s[o]=n.poll();return s},BS=t,BS}var Ove=Ive();const Mve=Dl(Ove);class fH{constructor(t){this._graph=t}_addGate(t,r){r.get("type")=="Subcircuit"&&this._addGraph(r.get("graph"))}_addLink(t,r){}_addGraph(t){this.listenTo(t,"add",r=>{r.isLink()?this._addLink(t,r):this._addGate(t,r)}),this.listenTo(t,"remove",r=>{r.isLink()?this._removeLink(t,r):this._removeGate(t,r)}),this.listenTo(t,"change:source",(r,n)=>{this._changeLinkSource(t,r,n,r.previous("source"))}),this.listenTo(t,"change:target",(r,n)=>{this._changeLinkTarget(t,r,n,r.previous("target"))}),this.listenTo(t,"change:warning",(r,n)=>{this._changeLinkWarning(t,r,n,r.previous("warning"))});for(const r of t.getElements())this._addGate(t,r);for(const r of t.getLinks())this._addLink(t,r)}_removeGate(t,r){}_removeLink(t,r){}_changeLinkSource(t,r,n,i){}_changeLinkTarget(t,r,n,i){}_changeLinkWarning(t,r,n,i){}}An.extend(fH.prototype,Jn.Events);class kve extends fH{constructor(t,{cells:r}){super(t),this._queue=new Map,this._pq=new Mve,this._tick=0,this._cells=r,this._monitorChecks=new Map,this._alarms=new Map,this._alarmQueue=new Map,this._addGraph(t)}get hasPendingEvents(){return this._queue.size>0}get tick(){return this._tick}shutdown(){this.stopListening()}_updateSubcircuit(t,r,n={}){r||(r=t.get("inputSignals"));const i=t.get("circuitIOmap");for(const[s,o]of Object.entries(r)){if(n[s]&&o.eq(n[s]))continue;const a=t.get("graph").getCell(i[s]);console.assert(a.isInput),a._setInput(o)}}_addGate(t,r){super._addGate(t,r),this._enqueue(r),r instanceof this._cells.Subcircuit&&this._updateSubcircuit(r)}_addGraph(t){this.listenTo(t,"manualMemChange",r=>{this._enqueue(r)}),this.listenTo(t,"change:constantCache",r=>{this._enqueue(r)}),this.listenTo(t,"change:inputSignals",(r,n)=>{const i=r.previous("inputSignals");if(!_E(n,i)){if(r instanceof this._cells.Subcircuit&&this._updateSubcircuit(r,n,i),r instanceof this._cells.Output&&r.get("mode")==0){const s=r.graph.get("subcircuit");if(s!=!0){console.assert(s!=null);const o=r.get("net"),a=An.clone(s.get("outputSignals"));a[o]=r.getOutput(),s.set("outputSignals",a)}}this._enqueue(r)}}),super._addGraph(t)}_enqueue(t){const r=this._tick+t.get("propagation")|0;(()=>{const i=this._queue.get(r);if(i!==void 0)return i;const s=new Map;return this._queue.set(r,s),this._pq.add(r),s})().set(t,t.get("inputSignals"))}updateGatesNext(){const t=this._pq.poll()|0;console.assert(t>=this._tick),this._tick=t;const r=this._queue.get(t);let n=0;for(;r.size;){const[i,s]=r.entries().next().value;if(r.delete(i),i instanceof this._cells.Subcircuit||i instanceof this._cells.Input||i instanceof this._cells.Output||!i.graph)continue;const a=i.operation(s);"_clock_hack"in a&&(delete a._clock_hack,this._enqueue(i)),i.set("outputSignals",a),n++}return this._queue.delete(t),this._tick=t+1|0,this._checkMonitors(),this.trigger("postUpdateGates",t,n),Promise.resolve(n)}updateGates(){if(this._pq.peek()==this._tick)return this.updateGatesNext();{const t=this._tick|0;return this._tick=t+1|0,this._checkMonitors(),this.trigger("postUpdateGates",t,0),Promise.resolve(0)}}synchronize(){return Promise.resolve()}start(){throw new Error("start() not supported")}startFast(){throw new Error("startFast() not supported")}stop(){return Promise.resolve()}get interval(){throw new Error("interval not supported")}set interval(t){throw new Error("interval not supported")}get running(){return!1}observeGraph(t){}unobserveGraph(t){}monitor(t,r,n,{triggerValues:i,stopOnTrigger:s,oneShot:o}){const a=(u,c)=>{const f=c[r];this._monitorChecks.set(a,{gate:u,sig:f,cb:a,callback:n,triggerValues:i,stopOnTrigger:s,oneShot:o})};return t.on("change:outputSignals",a),i==null&&n(this._tick,t.get("outputSignals")[r]),{gate:t,callback:a}}unmonitor(t){t.gate.off("change:outputSignals",t.callback)}alarm(t,r,{stopOnAlarm:n}){console.assert(t>this._tick);const i=()=>{this.unalarm(i),r()};return this._alarms.set(i,{tick:t,stopOnAlarm:n}),this._alarmQueue.has(t)||this._alarmQueue.set(t,new Set),this._alarmQueue.get(t).add(i),this._pq.add(t-1),this._queue.has(t-1)||this._queue.set(t-1,new Map),i}unalarm(t){const{tick:r}=this._alarms.get(t);this._alarmQueue.get(r).delete(t),this._alarmQueue.get(r).size==0&&this._alarmQueue.delete(r),this._alarms.delete(t)}_checkMonitors(){for(const{gate:t,sig:r,cb:n,callback:i,triggerValues:s,stopOnTrigger:o,oneShot:a}of this._monitorChecks.values()){let u=!0;s!=null&&(u=s.some(c=>r.eq(c))),u&&(a&&t.off("change:outputSignals",n),i(this._tick,r)&&o&&this.stop())}if(this._monitorChecks=new Map,this._alarmQueue.get(this._tick)){for(const t of this._alarmQueue.get(this._tick)){const{stopOnAlarm:r}=this._alarms.get(t);t()&&r&&this.stop()}this._alarmQueue.delete(this._tick)}}}function Lve(e){const t={$not:Tj,$and:Cj,$nand:Ij,$or:Pj,$nor:Rj,$xor:Oj,$xnor:Mj,$reduce_and:kj,$reduce_nand:Lj,$reduce_or:bE,$reduce_nor:wE,$reduce_xor:Nj,$reduce_xnor:qj,$reduce_bool:bE,$logic_not:wE,$repeater:Aj,$shl:jj,$shr:Hj,$lt:Wj,$le:Xj,$eq:Zj,$ne:Jj,$gt:Yj,$ge:Kj,$constant:xj,$neg:Dj,$pos:Fj,$add:Bj,$sub:zj,$mul:Vj,$div:Gj,$mod:$j,$pow:Uj,$mux:sH,$pmux:oH,$dff:aH,$mem:uH,$fsm:cH,$clock:Sj,$button:yj,$lamp:bj,$numdisplay:wj,$numentry:_j,$input:Wh,$output:Xh,$busgroup:rH,$busungroup:nH,$busslice:tH,$zeroextend:Qj,$signextend:eH,$display7:lH};return e in t?t[e]:iH}class hH{constructor(t,{cellsNamespace:r={},engine:n=kve,engineOptions:i={}}={}){this._cells=Object.assign(Rve,r),this._display3vl=new pj,this._display3vl.addDisplay(new age),this._graph=this._makeGraph(t,t.subcircuits),i.cells=this._cells,this._engine=new n(this._graph,i),this.makeLabelIndex(),this.listenTo(this._engine,"postUpdateGates",(s,o)=>{this.trigger("postUpdateGates",s,o)})}addDisplay(t){this._display3vl.addDisplay(t),this.trigger("display:add",t)}shutdown(){this.trigger("shutdown"),this.stop(),this._engine.shutdown(),this.stopListening()}hasWarnings(){return this._graph._warnings>0}_makeGraph(t,r,n){n=n||{};const i=new Po;i._display3vl=this._display3vl,i._warnings=0,n.nested&&i.set("subcircuit",!0);const s=a=>{i._warnings+=a,console.assert(i._warnings>=0),i._warnings>0&&this.running&&this.stop();const u=i.get("subcircuit");u==null||u==!0||u.set("warning",i._warnings>0)};this.listenTo(i,"userChange",a=>{this.trigger("userChange",a)}),this.listenTo(i,"change:inputSignals",(a,u)=>{_E(u,a.previous("inputSignals"))||a._changeInputSignals&&a._changeInputSignals(u)}),this.listenTo(i,"change:outputSignals",(a,u)=>{_E(u,a.previous("outputSignals"))||a._changeOutputSignals(u)}),this.listenTo(i,"change:signal",(a,u)=>{a._changeSignal(u)}),this.listenTo(i,"change:source",(a,u)=>{this._labelIndex=null,a._changeSource(u)}),this.listenTo(i,"change:target",(a,u)=>{this._labelIndex=null,a._changeTarget(u)}),this.listenTo(i,"change:warning",(a,u)=>{a.previous("warning")!==u&&s(u?1:-1)}),this.listenTo(i,"add",(a,u,c)=>{this._labelIndex=null,a.onAdd&&a.onAdd(),a.get("warning")&&s(1)}),this.listenTo(i,"remove",(a,u,c)=>{this._labelIndex=null,a.get("warning")&&s(-1)});let o=!1;for(const a in t.devices){const u=t.devices[a];u.position&&(o=!0);const c=u.type in this._cells?this._cells[u.type]:Lve(u.celltype),f=An.clone(u);f.id=a,c==this._cells.Subcircuit&&(f.graph=this._makeGraph(r[u.celltype],r,{nested:!0}));const h=new c(f);i.addCell(h)}for(const a of t.connectors)i.addCell(new this._cells.Wire({source:{id:a.from.id,port:a.from.port,magnet:"port"},target:{id:a.to.id,port:a.to.port,magnet:"port"},netname:a.name,vertices:a.vertices||[],source_positions:a.source_positions||[]}));return o&&i.set("laid_out",!0),i}updateGatesNext(t){return this._engine.updateGatesNext(t)}updateGates(t){return this._engine.updateGates(t)}synchronize(){return this._engine.synchronize()}get hasPendingEvents(){return this._engine.hasPendingEvents}get tick(){return this._engine.tick}start(){if(!this.hasWarnings())return this._engine.start()}startFast(){if(!this.hasWarnings())return this._engine.startFast()}stop(t){return this._engine.stop(t)}get interval(){return this._engine.interval}set interval(t){this._engine.interval=t}get running(){return this._engine.running}getInputCells(){return this._graph.getElements().filter(t=>t.isInput)}getOutputCells(){return this._graph.getElements().filter(t=>t.isOutput)}setInput(t,r){const n=this._graph.getCell(t);if(n.isInput)n.setInput(r);else throw new Error("Invalid call to setInput")}getOutput(t){const r=this._graph.getCell(t);if(r.isOutput)return r.getOutput();throw new Error("Invalid call to getOutput")}makeLabelIndex(){if(this._labelIndex)return this._labelIndex;const t=r=>{const n={wires:{},devices:{},subcircuits:{},inputs:{},outputs:{},graph:r};for(const i of r.getElements()){if(i.has("net")&&(i.isInput&&(n.inputs[i.get("net")]=i),i.isOutput&&(n.outputs[i.get("net")]=i)),!i.has("label"))continue;const s=i.get("label");n.devices[s]=i,i instanceof this._cells.Subcircuit&&(n.subcircuits[s]=t(i.get("graph")))}for(const i of r.getLinks())i.has("netname")&&(n.wires[i.get("netname")]=i);return n};return this._labelIndex=t(this._graph)}getLabelIndex(t=[]){const r=(n,i)=>{if(n==t.length)return i;{const s=i.subcircuits[t[n]];if(s)return r(n+1,s)}};return r(0,this.makeLabelIndex())}findWireByLabel(t,r=[]){return this.getLabelIndex(r).wires[t]}findDeviceByLabel(t,r=[]){return this.getLabelIndex(r).devices[t]}findInputByNet(t){return this.getLabelIndex([]).inputs[t]}findOutputByNet(t){return this.getLabelIndex([]).outputs[t]}toJSON(t=!0){const r={},n=s=>{const o={devices:{},connectors:[]},a=s.get("laid_out");for(const u of s.getElements()){const c=o.devices[u.get("id")]=u.getGateParams(t);a||delete c.position,u instanceof this._cells.Subcircuit&&!r[u.get("celltype")]&&(r[u.get("celltype")]=n(u.get("graph")))}for(const u of s.getLinks())o.connectors.push(u.getWireParams(t));return o},i=n(this._graph);return i.subcircuits=r,i}waitForWire(t,r){return r instanceof Je&&(r=[r]),new Promise(n=>{this.monitorWire(t,(i,s)=>{n(i)},{synchronous:!0,oneShot:!0,stopOnTrigger:!0,triggerValues:r})})}waitFor(t,r,n){return n instanceof Je&&(n=[n]),new Promise(i=>{this.monitor(t,r,(s,o)=>{i(s)},{synchronous:!0,oneShot:!0,stopOnTrigger:!0,triggerValues:n})})}monitorWire(t,r,n={}){const i=t.get("source"),s=t.getSourceElement();return s==null?null:this.monitor(s,i.port,r,n)}monitor(t,r,n,i={}){return this._engine.monitor(t,r,n,i)}unmonitor(t){this._engine.unmonitor(t)}observeGraph(t=[]){this._engine.observeGraph(this.getLabelIndex(t).graph)}unobserveGraph(t=[]){this._engine.observeGraph(this.getLabelIndex(t).graph)}alarm(t,r,n={}){return this._engine.alarm(t,r,n)}unalarm(t){this._engine.unalarm(t)}}An.extend(hH.prototype,Jn.Events);class Nve{constructor(t,r=[]){this._bits=t,this._data=r,r.length==0?this._present=-1:this._present=this._data[this._data.length-1][0]}get bits(){return this._bits}updatePresent(t){this._present=Math.max(this._present,t)}push(t,r){if(console.assert(r.bits==this._bits&&t>=this._present),this._present=t,this._data.length>0){const[n,i]=this._data[this._data.length-1];if(i.eq(r))return;if(console.assert(t>=n),t==n){this._data[this._data.length-1][1]=r;return}}this._data.push([t,r])}getRange(t,r){if(this._data.length==0)return[];const n=a=>{let u=0,c=this._data.length;for(;c>u;){const f=u+c>>1,h=this._data[f][0];if(a==h)return f;a<h?c=f:u=f+1}return u==this._data.length?u-1:u};let i=n(t),s=n(t+r);i>0&&this._data[i][0]>t&&i--,s<this._data.length-1&&this._data[s][0]<t+r&&s++;const o=this._data.slice(i,s+1).map(a=>[a[0],a[1]]);return o[o.length-1][0]<t+r&&this._present>o[o.length-1][0]&&o.push([this._present,o[o.length-1][1]]),o}}const dH={start:0,pixelsPerTick:10,bitColors:["#fc7c68","#999","#03c03c","#779ecb"],gapScale:.2,heightFill:.8,base:"hex",gridWidth:.5,gridColor:"gray",gridStep:1,gridMinDist:10,font:"10px sans-serif",textColor:"black"};Object.freeze(dH);function i4(e,t){var r={};for(const[i,s]of Object.entries(t))r[i]={value:s,writable:!0};return Object.create(e,r)}function pH(e){let t=e.gridStep;for(;t*e.pixelsPerTick<e.gridMinDist;)10*t*e.pixelsPerTick<e.gridMinDist?t*=10:2*t*e.pixelsPerTick>=e.gridMinDist?t*=2:5*t*e.pixelsPerTick>=e.gridMinDist?t*=5:t*=10;return t}function qve(e,t,r,n=new pj){t.clearRect(0,0,t.canvas.width,t.canvas.height);const i=t.canvas.width/r.pixelsPerTick;"present"in r&&e.updatePresent(r.present);const s=e.getRange(r.start,Math.ceil(i)),o=s.map((b,S)=>[b,s[S+1]]);o.pop();const a=b=>(Math.max(Math.min(b,r.start+i),r.start)-r.start)*r.pixelsPerTick,u=.5*t.canvas.height,c=(.5-r.heightFill/2)*t.canvas.height,f=(.5+r.heightFill/2)*t.canvas.height,h=b=>[f,u,c][b+1],g=b=>r.bitColors[b+1],y=b=>r.bitColors[b.isDefined?b.isLow?0:b.isHigh?2:3:1],m=t.createLinearGradient(0,f,0,c);m.addColorStop(0,r.bitColors[0]),m.addColorStop(.5,r.bitColors[1]),m.addColorStop(1,r.bitColors[2]),t.lineWidth=r.gridWidth;const _=pH(r);for(let b=r.start-r.start%_;b<r.start+i;b+=_){const S=a(b);t.beginPath(),t.strokeStyle=r.gridColor,t.moveTo(S,0),t.lineTo(S,t.canvas.height),t.stroke()}t.lineWidth=2;for(const[[b,S],[E,A]]of o){const T=a(b),I=a(E);if(e.bits==1){const q=S.get(0),p=A.get(0),P=h(q),O=h(p),N=g(q);g(p);const V=Math.min(Math.abs(P-O)*r.gapScale,r.pixelsPerTick/2);t.beginPath(),t.strokeStyle=m,t.moveTo(I-V,P),t.lineTo(I,O),t.stroke(),t.beginPath(),t.strokeStyle=N,t.moveTo(T,P),t.lineTo(I-V,P),t.stroke()}else{const q=Math.min(Math.abs(c-f)*r.gapScale,r.pixelsPerTick/2),p=y(S),P=y(A),O=S.isDefined,N=A.isDefined;if(O){t.textAlign="center",t.textBaseline="middle",t.font=r.font,t.fillStyle=r.textColor;const V=n.show(r.base,S);t.measureText(V).width<(I-T-q)*2&&t.fillText(V,(T+I-q)/2,t.canvas.height/2,I-T-q)}!O&&!N?(t.beginPath(),t.strokeStyle=p,t.moveTo(T,u),t.lineTo(I,u),t.stroke()):S.eq(A)?(t.strokeStyle=P,t.beginPath(),t.moveTo(T,c),t.lineTo(I,c),t.stroke(),t.beginPath(),t.moveTo(T,f),t.lineTo(I,f),t.stroke()):(t.strokeStyle=P,N?(t.beginPath(),t.moveTo(I,c),t.lineTo(I-q/2,u),t.lineTo(I,f),t.stroke()):(t.beginPath(),t.moveTo(I,u),t.lineTo(I-q/2,u),t.stroke()),t.strokeStyle=p,O?(t.beginPath(),t.moveTo(T,c),t.lineTo(I-q,c),t.lineTo(I-q/2,u),t.lineTo(I-q,f),t.lineTo(T,f),t.stroke()):(t.beginPath(),t.moveTo(T,u),t.lineTo(I-q/2,u),t.stroke()))}}}var gH=function(){if(typeof Map<"u")return Map;function e(t,r){var n=-1;return t.some(function(i,s){return i[0]===r?(n=s,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(r,n){var i=e(this.__entries__,r);~i?this.__entries__[i][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,i=e(n,r);~i&&n.splice(i,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var i=0,s=this.__entries__;i<s.length;i++){var o=s[i];r.call(n,o[1],o[0])}},t}()}(),EE=typeof window<"u"&&typeof document<"u"&&window.document===document,jp=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Dve=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(jp):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),Fve=2;function Bve(e,t){var r=!1,n=!1,i=0;function s(){r&&(r=!1,e()),n&&a()}function o(){Dve(s)}function a(){var u=Date.now();if(r){if(u-i<Fve)return;n=!0}else r=!0,n=!1,setTimeout(o,t);i=u}return a}var zve=20,Vve=["top","right","bottom","left","width","height","size","weight"],Gve=typeof MutationObserver<"u",$ve=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Bve(this.refresh.bind(this),zve)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!EE||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Gve?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!EE||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,i=Vve.some(function(s){return!!~n.indexOf(s)});i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),vH=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},Pl=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||jp},mH=fv(0,0,0,0);function Hp(e){return parseFloat(e)||0}function s4(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,i){var s=e["border-"+i+"-width"];return n+Hp(s)},0)}function Uve(e){for(var t=["top","right","bottom","left"],r={},n=0,i=t;n<i.length;n++){var s=i[n],o=e["padding-"+s];r[s]=Hp(o)}return r}function jve(e){var t=e.getBBox();return fv(0,0,t.width,t.height)}function Hve(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return mH;var n=Pl(e).getComputedStyle(e),i=Uve(n),s=i.left+i.right,o=i.top+i.bottom,a=Hp(n.width),u=Hp(n.height);if(n.boxSizing==="border-box"&&(Math.round(a+s)!==t&&(a-=s4(n,"left","right")+s),Math.round(u+o)!==r&&(u-=s4(n,"top","bottom")+o)),!Xve(e)){var c=Math.round(a+s)-t,f=Math.round(u+o)-r;Math.abs(c)!==1&&(a-=c),Math.abs(f)!==1&&(u-=f)}return fv(i.left,i.top,a,u)}var Wve=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Pl(e).SVGGraphicsElement}:function(e){return e instanceof Pl(e).SVGElement&&typeof e.getBBox=="function"}}();function Xve(e){return e===Pl(e).document.documentElement}function Yve(e){return EE?Wve(e)?jve(e):Hve(e):mH}function Kve(e){var t=e.x,r=e.y,n=e.width,i=e.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(s.prototype);return vH(o,{x:t,y:r,width:n,height:i,top:r,right:t+n,bottom:i+r,left:t}),o}function fv(e,t,r,n){return{x:e,y:t,width:r,height:n}}var Zve=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=fv(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=Yve(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),Jve=function(){function e(t,r){var n=Kve(r);vH(this,{target:t,contentRect:n})}return e}(),Qve=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new gH,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Pl(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new Zve(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Pl(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new Jve(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),yH=typeof WeakMap<"u"?new WeakMap:new gH,_H=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=$ve.getInstance(),n=new Qve(t,r,this);yH.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){_H.prototype[e]=function(){var t;return(t=yH.get(this))[e].apply(t,arguments)}});var eme=function(){return typeof jp.ResizeObserver<"u"?jp.ResizeObserver:_H}();function vl(e){const t=[e.cid];for(let r=e.graph.get("subcircuit");r!=null;r=r.graph.get("subcircuit"))t.push(r.cid);return t.reverse(),t.join(".")}function tme(e){const t=[];if(e.has("netname"))t.push(e.get("netname"));else{const r=e.source();t.push(r.port);const n=e.graph.getCell(r.id);n.has("label")?t.push(n.get("label")):t.push(r.id)}for(let r=e.graph.get("subcircuit");r!=null;r=r.graph.get("subcircuit"))r.has("label")?t.push(r.get("label")):t.push(r.id);return t.reverse(),t.join(".")}class rme{constructor(t){this._circuit=t,this._wires=new Map,this.listenTo(this._circuit,"new:paper",r=>this.attachTo(r))}attachTo(t){this.listenTo(t,"link:monitor",r=>{this.addWire(r.model)})}addWire(t){const r=vl(t);if(this._wires.has(r))return;const n=new Nve(t.get("bits")),i={wire:t,waveform:n,monitorId:void 0};this._wires.set(r,i),this.trigger("add",t),i.monitorId=this._circuit.monitorWire(t,(s,o)=>{this._handleChange(s,t,o)})}removeWire(t){typeof t=="string"&&(t=this._wires.get(t).wire),this.trigger("remove",t);const r=vl(t);this._circuit.unmonitor(this._wires.get(r).monitorId),this._wires.delete(r)}getWires(){const t=[];for(const r of this._wires.values())t.push(r.wire);return t}getWiresDesc(){return this.getWires().map(t=>{if(t.has("netname"))return{name:t.get("netname"),path:t.getWirePath(),bits:t.get("bits")}}).filter(t=>t!==void 0)}loadWiresDesc(t){for(const r of t){const n=this._circuit.findWireByLabel(r.name,r.path);n&&n.get("bits")==r.bits&&this.addWire(n)}}_handleChange(t,r,n){this._wires.get(vl(r)).waveform.push(t,n),this.trigger("change",r,n)}}An.extend(rme.prototype,Jn.Events);class iye extends Jn.View{initialize(t){this._width=800,this._settings=i4(dH,{start:0,pixelsPerTick:5,gridStep:1}),this._settingsFor=new Map,this._live=!0,this._autoredraw=!1,this._idle=null,this._removeButtonMarkup=t.removeButtonMarkup||'<button type="button" name="remove">â</button>',this._baseSelectorMarkup=t.baseSelectorMarkup||eT,this._bitTriggerMarkup=t.bitTriggerMarkup||'<select name="trigger" title="Trigger"><option value="none"></option><option value="rising">â</option><option value="falling">â</option><option value="risefall">â</option><option value="undef">x</option></select>',this._busTriggerMarkup=t.busTriggerMarkup||'<input type="text" name="trigger" title="Trigger" placeholder="trigger" pattern="[0-9a-fx]*">',this.listenTo(this.model,"add",this._handleAdd),this.listenTo(this.model,"remove",this._handleRemove),this.listenTo(this.model._circuit,"display:add",()=>{this.render()}),this.listenTo(this.model._circuit,"postUpdateGates",f=>{this._live&&(this.start=f-this._width/this._settings.pixelsPerTick),this._settings.present=f,this._idle||(this._idle=requestIdleCallback(()=>{this._drawAll(),this._idle=null},{timeout:100}))}),this.render(),this._resizeObserver=new eme(()=>{this._canvasResize()}),this._resizeObserver.observe(this.el);function r(f){return It(f.target).closest("tr").attr("wireid")}const n=this.model._circuit._display3vl;this.$el.on("click","button[name=remove]",f=>{this.model.removeWire(r(f))}),this.$el.on("input","select[name=base]",f=>{const h=f.target.value,g=this._settingsFor.get(r(f));g.base=h;const m=It(f.target).closest("tr").find("input[name=trigger]");m.attr("pattern",n.pattern(h)),g.trigger.length&&m.val(n.show(h,g.trigger[0])),this.trigger("change")});const i=()=>!0,s=(f,h)=>{const g=this._settingsFor.get(f);if(g.triggerId&&(this.model._circuit.unmonitor(g.triggerId),g.triggerId=null),h.length>0){const y=this.model._wires.get(f).wire;g.triggerId=this.model._circuit.monitorWire(y,i,{triggerValues:h,stopOnTrigger:!0})}g.trigger=h};this.$el.on("input","select[name=trigger]",f=>{const h=r(f);switch(f.target.value){case"rising":s(h,[Je.one]);break;case"falling":s(h,[Je.zero]);break;case"risefall":s(h,[Je.one,Je.zero]);break;case"undef":s(h,[Je.x]);break;default:s(h,[])}}),this.$el.on("change","input[name=trigger]",f=>{const h=r(f),y=this._settingsFor.get(h).base,m=this.model._wires.get(h).waveform.bits;if(f.target.value=="")s(h,[]);else if(n.validate(y,f.target.value,m)){const _=n.read(y,f.target.value,m);s(h,[_]),f.target.value=n.show(y,_)}else s(h,[])}),this.listenTo(this,"change",()=>{this._autoredraw&&this._drawAll()});const o=new Image(0,0);o.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";let a,u;const c=f=>{const h=f.originalEvent.screenX-a;this.start=u-h/this._settings.pixelsPerTick};this.$el.on("dragstart","canvas",f=>{const h=f.originalEvent.dataTransfer;h.setData("text/plain","dragging"),h.setDragImage(o,0,0),a=f.originalEvent.screenX,u=this._settings.start,this.live=!1,It(document).on("dragover",c)}),this.$el.on("dragend","canvas",f=>{It(document).off("dragover",c)}),this.$el.on("wheel","canvas",f=>{f.preventDefault();const h=2**Math.sign(f.originalEvent.deltaY);this.start+=f.originalEvent.offsetX/this._settings.pixelsPerTick*(1-1/h),this.pixelsPerTick*=h})}render(){this.$el.html('<table class="monitor"></table>');for(const t of this.model._wires.values())this.$("table").append(this._handleAdd(t.wire));return this._canvasResize(),this}shutdown(){this.$el.off(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this.stopListening()}get gridStep(){return pH(this._settings)}get autoredraw(){return this._autoredraw}set autoredraw(t){this._autoredraw=t,t&&this._drawAll()}get width(){return this._width}get live(){return this._live}set live(t){this.live!=t&&(this._live=t,this.trigger("change:live",t),this.trigger("change"))}get start(){return this._settings.start}set start(t){this._settings.start!=t&&(this._settings.start=t,this.trigger("change:start",t),this.trigger("change"))}get pixelsPerTick(){return this._settings.pixelsPerTick}set pixelsPerTick(t){this._settings.pixelsPerTick!=t&&(this._settings.pixelsPerTick=t,this.trigger("change:pixelsPerTick",t),this.trigger("change"))}_canvasResize(){this._width=Math.max(this.$el.width()-300,100),this.$("canvas").attr("width",this._width),this.trigger("change:width",this._width),this.trigger("change")}_drawAll(){for(const t of this.model._wires.keys())this._draw(t)}_draw(t){const r=this.model._circuit._display3vl,n=this.$('tr[wireid="'+t+'"]').find("canvas"),i=this.model._wires.get(t).waveform;qve(i,n[0].getContext("2d"),this._settingsFor.get(t),r)}_handleAdd(t){const r=vl(t);this._settingsFor.set(r,i4(this._settings,{base:"hex",trigger:[],triggerId:null})),this.$("table").append(this._createRow(t))}_handleRemove(t){const r=vl(t);this.$('tr[wireid="'+r+'"]').remove();const n=this._settingsFor.get(r);n.triggerId&&this.model._circuit.unmonitor(n.triggerId),this._settingsFor.delete(r)}_createRow(t){const r=vl(t),n=this._settingsFor.get(r),i=this.model._circuit._display3vl,s=t.get("bits")>1?this._baseSelectorMarkup instanceof Function?this._baseSelectorMarkup(i,t.get("bits"),n.base):this._baseSelectorMarkup:"",o=t.get("bits")>1?this._busTriggerMarkup:this._bitTriggerMarkup,a=It('<tr><td class="name"></td><td>'+s+"</td><td>"+o+"</td><td>"+this._removeButtonMarkup+'</td><td><canvas class="wavecanvas" height="30" draggable="true"></canvas></td></tr>');return a.attr("wireid",r),a.children("td").first().text(tme(t)),a}}let nme=0;class sye extends Jn.View{initialize(t){this._idnum=nme++,this._inputPanelMarkup=t.inputPanelMarkup||'<div data-iopanel="input"></div>',this._outputPanelMarkup=t.outputPanelMarkup||'<div data-iopanel="output"></div>',this._baseSelectorMarkup=t.baseSelectorMarkup||eT,this._labelMarkup=t.labelMarkup||"<label></label>",this._buttonMarkup=t.buttonMarkup||'<input type="checkbox">',this._lampMarkup=t.lampMarkup||'<input type="checkbox">',this._rowMarkup=t.rowMarkup||"<div></div>",this._colMarkup=t.colMarkup||"<div></div>",this._inputMarkup=t.inputMarkup||'<input type="text">',this.render(),this.listenTo(this.model._graph,"add",this._handleAdd),this.listenTo(this.model._graph,"remove",this._handleRemove),this.listenTo(this.model,"display:add",()=>{this.render()})}render(){this.$el.html('<form onsubmit="return false">'+this._inputPanelMarkup+this._outputPanelMarkup+"</form>");for(const t of this.model.getInputCells())this._handleAddInput(t);for(const t of this.model.getOutputCells())this._handleAddOutput(t)}shutdown(){this.$el.off(),this.stopListening()}_id(t){return"iopanel-"+t+"-"+this._idnum}_handleAdd(t){t.isInput?this._handleAddInput(t):t.isOutput&&this._handleAddOutput(t)}_addLabel(t,r){return It(this._labelMarkup).appendTo(t).find("label").addBack("label").text(r.get("net")||r.get("label"))}_addLabelFor(t,r){return this._addLabel(t,r).attr("for",this._id(r.id))}_handleAddInput(t){const r=this.model._display3vl,n=It(this._rowMarkup).appendTo(this.$('div[data-iopanel="input"]'));this._addLabelFor(n,t);const i=It(this._colMarkup).appendTo(n);if(t.get("mode")==1){const o=It(this._buttonMarkup).appendTo(i).find("input").addBack("input").attr("id",this._id(t.id)).on("click",u=>{t.setInput(Je.fromBool(u.target.checked))}),a=(u,c)=>{o.prop("checked",c.out.isHigh)};this.listenTo(t,"change:outputSignals",a),a(t,t.get("outputSignals"))}else{const s=It(this._inputMarkup).appendTo(i);let o="hex";It(this._baseSelectorMarkup(r,t.get("bits"),o)).appendTo(i);let a=r.size(o,t.get("bits"));const u=t.get("bits"),c=s.find("input").addBack("input").prop("size",a).prop("maxlength",a).prop("pattern",r.pattern(o)).on("change",h=>{r.validate(o,h.target.value,u)&&t.setInput(r.read(o,h.target.value,u))}),f=(h,g)=>{s.val(r.show(o,g.out))};this.listenTo(t,"change:outputSignals",f),f(t,t.get("outputSignals")),n.on("input","select[name=base]",h=>{o=h.target.value,a=r.size(o,t.get("bits")),c.prop("size",a).prop("maxlength",a).prop("pattern",r.pattern(o)),f(t,t.get("outputSignals"))})}}_handleAddOutput(t){const r=this.model._display3vl,n=It(this._rowMarkup).appendTo(this.$('div[data-iopanel="input"]'));this._addLabel(n,t);const i=It(this._colMarkup).appendTo(n);if(t.get("bits")==1){const o=It(this._lampMarkup).appendTo(i).find("input").addBack("input").prop("disabled",!0),a=(u,c)=>{const f=u.getOutput();o.prop("checked",f.isHigh),o.prop("indeterminate",!f.isDefined)};this.listenTo(t,"change:inputSignals",a),a(t,t.get("inputSignals"))}else{const s=It(this._inputMarkup).appendTo(i);let o="hex";It(this._baseSelectorMarkup(r,t.get("bits"),o)).appendTo(i);const a=r.size(o,t.get("bits")),u=s.find("input").addBack("input").prop("disabled",!0).prop("size",a),c=(f,h)=>{const g=f.getOutput();s.val(r.show(o,g))};this.listenTo(t,"change:inputSignals",c),c(t,t.get("inputSignals")),n.on("input","select[name=base]",f=>{o=f.target.value,u.prop("size",r.size(o,t.get("bits"))),c(t,t.get("inputSignals"))})}}_handleRemove(t){this.stopListening(t)}}uj.sorting.APPROX,new mj;function ime(e){let t=new Array;return Object.keys(e).forEach(r=>{const[n,i,s]=r.split("_");e[r].forEach(([o,a])=>{const u={from:{id:`${i}_${s}`,port:n},name:`${r}-${a}`,to:{id:o,port:a.split("_")[0]}};t.push(u)})}),t}class bH extends hH{constructor(t,r){const n=ime(t.connectors),i={devices:t.devices,connectors:n,subcircuits:t.subcircuits};super(i,r),console.log("CustomHeadlessCircuit Initialized")}}let sme=fa.ones(1),ome=fa.zeros(1),ys=Ke(null),ml=ti(!1);const Cl=()=>R(ml);let Jl=ti(0);const ame=()=>R(Jl);Object.defineProperty(bH.prototype,"running",{get(){return!1}});function ume(e){R(ml)?(console.log("Simulation Stopped"),ys.set(null),we(Jl,0),we(ml,!1)):(console.log("Simulation Started"),we(ml,!0),lt(ys)===null&&(console.log(lt(Zi)),ys.set(new bH(lt(Zi)))),wH(e))}function wH(e){if(R(ml)===!1)return;const t=lt(ys);if(t===null){console.log("impossible");return}t.updateGates(),we(Jl,t.tick,!0),setTimeout(()=>wH(e),e)}function cme(){ys.set(null),we(Jl,0),we(ml,!1)}function lme(e,t){let r=e==null?void 0:e.findWireByLabel(t);return r||(console.warn("Wire not created yet on headless circuit creation or update"),null)}function fme(e){let t;return e.attributes.signal?(e.attributes.signal._avec[0]==e.attributes.signal._bvec[0]?t=e.attributes.signal._avec[0]:t=-1,t):-1}function hme(){if(ys==null){console.log("Circuit is null");return}const e=lt(ys);if(e===null){console.log("impossible");return}e.updateGates(),we(Jl,e.tick,!0)}function dme(){if(ys==null){console.log("Circuit is null");return}const e=lt(ys);if(e===null){console.log("impossible");return}e.updateGatesNext(),we(Jl,e.tick,!0)}function pme(e){let t;if(ys==null){console.log("Circuit is null");return}const r=lt(ys);if(r===null){console.log("impossible");return}t=r.getLabelIndex().devices[e].attributes.outputSignals.out._avec[0],t==1?r.setInput(e,ome):r.setInput(e,sme)}function fT(e){return[...e].find(r=>/^(in\d+|in_|out_)/.test(r))||null}function gme(e,t){const r=(u,c)=>u.startsWith(c),n=u=>r(u,"in"),i=u=>r(u,"out"),s=u=>({isInput:n(u),isOutput:i(u)}),{a1:o,a2:a}={a1:s(e),a2:s(t)};return o.isInput&&a.isOutput?"good_in_to_out":a.isInput&&o.isOutput?"good_out_to_in":o.isInput&&a.isInput?"bad_dual_input":"bad_dual_output"}function vme(e,t){const[r,,]=e.split("_"),n=r.startsWith("out")&&e||t,i=r.startsWith("in")?e:t;return{fromOutputId:n,toInputId:i}}function mme(e,t){const r=(s,o)=>s+"-"+o,{fromOutputId:n,toInputId:i}=vme(e,t);return console.log("adding connection",n,i),Zi.addConnection(n,i),r(n,i)}function yme(e,t){const r=fT(e);if(r===null)return"bad_invalid_drop";const n=[...e].find(o=>o==="linked"),i=gme(t,r);if(i.startsWith("bad"))return i;const s=o=>o.startsWith("in");return n&&s(r)?"bad_input_already_linked":n&&!s(t)?"good_output_multi_wires":`${i}-${r}`}function o4(e,t,r=J0e){const n=yme(t,e);if(n.startsWith("bad"))return n;const i=fT(t),s=mme(e,i);return r(),s}var _me=nr("<div></div>");function bme(e,t){xr(t,!0);let r=ve(t,"io",3,"output");const n=u=>{function c(f){f.preventDefault(),f.stopPropagation(),o4(u,f.target.classList),document.removeEventListener("mousedown",c,!0)}return c};function i(u){const c=n(u);document.addEventListener("mousedown",c,!0)}function s(u){const c=fT(u.target.classList);c!==null&&c===t.anchorId?i(c):o4(t.anchorId,u.target.classList),document.removeEventListener("mouseup",s,!0)}bl(()=>{t.connecting&&document.addEventListener("mouseup",s,!0)});var o=_me();let a;Ht(u=>a=Cn(o,1,`custom_anchor ${r()==="input"&&"input"||"output"} ${t.anchorId??""}`,"svelte-1dytm7c",a,u),[()=>({linked:t.linked,hovering:t.hovering,connecting:t.connecting})]),pr("mousedown",o,u=>{u.preventDefault(),t.linked&&r()==="input"&&!Cl()&&Zi.removeConnection(t.anchorId)},!0),nt(e,o),Sr()}Object.assign(SVGElement.prototype,{setLampColors:wme});function wme([e,t]){const r=this.querySelector("circle"),n=this.querySelector("line");console.assert(r!==null&&n!==null,"likely tried to call custom svg method on the wrong element"),!(r===null||n===null)&&(r.setAttribute("stroke",t),r.setAttribute("fill",e),n.setAttribute("stroke",e))}function xme(e,t){const r=["green","var(--lime-green)"],n=["red","var(--lime-red)"];let s=document.querySelector(`#N-${e} svg.LampSVG`);s!==null&&s.setLampColors(t===1&&r||n)}function Sme(e,t,r){const n="."+e+"_"+t,i=document.querySelector(`${n}`);if(console.assert(i!==null,"could not find Anchor class when setting anchor colors while running"),i===null)return;const s=(h,g)=>h.classList.contains(g),o=h=>s(h,"on"),a=h=>s(h,"off"),u=h=>[a(h),o(h)],[c,f]=u(i);r===1&&c?(i.classList.remove("off"),i.classList.add("on")):r===0&&f?(i.classList.remove("on"),i.classList.add("off")):r===-1?(i.classList.remove("on"),i.classList.remove("off")):!c&&!f&&i.classList.add(r===1?"on":"off")}function Zh(e){return console.assert(e!==null,"A wire was mounted with an empty edgeWrapper binding, maybe it hasn't loaded yet"),e==null?void 0:e.parentElement}function Eme(e){var r;const t=Zh(e);return console.assert(t,"edge Wrapper is not null but edgeWrapper binding has no parentElement"),((r=e==null?void 0:e.parentElement)==null?void 0:r.childNodes)??null}const Ame=e=>{const t=e.indexOf("-")+1,r=e.indexOf("/");return e.substring(t,r)};function xH(e){const t=Eme(e);return t&&Array.from(t).find(n=>n.role==="presentation")||null}function SH(e,t){var i;const r=(i=xH(e))==null?void 0:i.getAttribute("id");if(!r)throw new Error("No ID found on the edgeNode");return[t+"-"+Ame(r),r]}const Tme="http://www.w3.org/2000/svg",Jh=[".handle1",".handle2",".end_point1",".end_point2","#controlPoint1","#controlPoint2"],Si=Jh.map(e=>e.substring(1));function Rl(e,t){const r=document.createElementNS(Tme,e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.setAttribute(n,t[n]);return r}function a4(e,t,r,n="control-line"){return isNaN(e==null?void 0:e.x)||isNaN(e==null?void 0:e.y)||isNaN(t==null?void 0:t.x)||isNaN(t==null?void 0:t.y)?(console.error("Invalid coordinates provided to createHandleLine:",e,t),Rl("line",{class:r+" "+n,x1:"0",y1:"0",x2:"0",y2:"0"})):Rl("line",{class:r+" "+n,x1:e.x.toString(),y1:e.y.toString(),x2:t.x.toString(),y2:t.y.toString()})}function u4(e,t,r=6,n="end-point"){return isNaN(e==null?void 0:e.x)||isNaN(e==null?void 0:e.y)||isNaN(r)?(console.error("Invalid parameters provided to createEndPointCircle:",e,r),Rl("circle",{class:t+" "+n,cx:"0",cy:"0",r:"6"})):Rl("circle",{class:t+" "+n,cx:e.x.toString(),cy:e.y.toString(),r:r.toString()})}function c4(e,t,r=10,n="control-point"){if(isNaN(e==null?void 0:e.x)||isNaN(e==null?void 0:e.y)||isNaN(r))return console.error("Invalid parameters provided to createControlPointCircle:",e,r),Rl("circle",{class:n,cx:"0",cy:"0",r:"6"});const i=Rl("circle",{class:n,id:t,cx:e.x.toString(),cy:e.y.toString(),r:r.toString()});return i.style.touchAction="none",i}function l4(e){if(!e||typeof e!="string"||e.trim()==="")return console.warn("parseCubicBezierD received invalid input:",e),null;let t="";const r=e.indexOf("M");t=e.substring(r+1).replace("C","");const n=t.split(" ").reduce((i,s)=>(s=s.trim(),s!==""&&(s.endsWith(",")&&(s=s.slice(0,-1)),i.push(s)),i),[]);try{const i={p0:{x:parseFloat(n[0]),y:parseFloat(n[1])},p1:{x:parseFloat(n[2]),y:parseFloat(n[3])},p2:{x:parseFloat(n[4]),y:parseFloat(n[5])},p3:{x:parseFloat(n[6]),y:parseFloat(n[7])}};return isNaN(i.p0.x)||isNaN(i.p0.y)||isNaN(i.p1.x)||isNaN(i.p1.y)||isNaN(i.p2.x)||isNaN(i.p2.y)||isNaN(i.p3.x)||isNaN(i.p3.y)?(console.error("Parsed coordinates resulted in NaN:",e,i),null):i}catch(i){return console.error("Error parsing numbers from path data:",e,i),null}}function Pme(e){const t=Zh(e);if(!t)throw new Error("Wire is not god");Jh.forEach(r=>{var i;const n=t.querySelector(r);n&&((i=n.style)==null?void 0:i.display)==="none"&&(n.style.display="")})}function Cme(e){const t=Zh(e);if(!t)throw new Error("Wire is not god");Jh.forEach(r=>{const n=t.querySelector(r);n&&(n.style.display="none")})}function Rme(e){const t=Zh(e);if(!t)throw new Error("Wire is not god");Jh.forEach(r=>{const n=t.querySelector(r);n&&(n.style.display=n.style.display==="none"?"":"none")})}function f4(e,t=""){var A,T,I,q,p,P,O,N,V,W;const r=t!==""&&l4(t)||null;let n=e.getAttribute("d")&&l4(e.getAttribute("d"));if(!n)return console.log("unable to parse path"),null;r&&(r.p0.x-n.p0.x,r.p0.y-n.p0.y,r.p1.x-n.p1.x,r.p1.y-n.p1.y);const i=Zh(e);if(!i)throw new Error("Wire is not god");const s=new Map(Jh.map(G=>[G.substring(1),i.querySelector(G)||null]));let o=new Map([[Si[0],s.get(Si[0])||a4(n.p0,n.p1,"handle1")],[Si[1],s.get(Si[1])||a4(n.p3,n.p2,"handle2")],[Si[2],s.get(Si[2])||u4((r==null?void 0:r.p0)||n.p0,"end_point1")],[Si[3],s.get(Si[3])||u4((r==null?void 0:r.p3)||n.p3,"end_point2")],[Si[4],s.get(Si[4])||c4((r==null?void 0:r.p1)||n.p1,"controlPoint1")],[Si[5],s.get(Si[5])||c4((r==null?void 0:r.p2)||n.p2,"controlPoint2")]]);const a=o.get(Si[2]),u=o.get(Si[4]),c=o.get(Si[5]);if(a){const G=a.getAttribute("cx"),ee=a.getAttribute("cy"),ae=(r==null?void 0:r.p0.x.toString())||n.p0.x.toString(),K=(r==null?void 0:r.p0.y.toString())||n.p0.y.toString();a.setAttribute("cx",ae),a.setAttribute("cy",K);const U=parseFloat(ae)-parseFloat(G||""),j=parseFloat(K)-parseFloat(ee||"");u==null||u.setAttribute("cx",String(parseFloat(u.getAttribute("cx")||"0")+U)),u==null||u.setAttribute("cy",String(parseFloat(u.getAttribute("cy")||"0")+j)),c==null||c.setAttribute("cx",String(parseFloat(c.getAttribute("cx")||"0")+U)),c==null||c.setAttribute("cy",String(parseFloat(c.getAttribute("cy")||"0")+j))}const f=o.get(Si[3]);if(f){const G=f.getAttribute("cx"),ee=f.getAttribute("cy"),ae=(r==null?void 0:r.p3.x.toString())||n.p3.x.toString(),K=(r==null?void 0:r.p3.y.toString())||n.p3.y.toString();f.setAttribute("cx",ae),f.setAttribute("cy",K);const U=parseFloat(ae)-parseFloat(G||""),j=parseFloat(K)-parseFloat(ee||"");u==null||u.setAttribute("cx",String(parseFloat(u.getAttribute("cx")||"0")+U)),u==null||u.setAttribute("cy",String(parseFloat(u.getAttribute("cy")||"0")+j)),c==null||c.setAttribute("cx",String(parseFloat(c.getAttribute("cx")||"0")+U)),c==null||c.setAttribute("cy",String(parseFloat(c.getAttribute("cy")||"0")+j))}for(const G of Si)i.appendChild(o.get(G));let h=null,g={x:0,y:0},y={p0:{x:parseFloat((A=o.get("end_point1"))==null?void 0:A.getAttribute("cx")),y:parseFloat((T=o.get("end_point1"))==null?void 0:T.getAttribute("cy"))},p1:{x:parseFloat((I=o.get("controlPoint1"))==null?void 0:I.getAttribute("cx")),y:parseFloat((q=o.get("controlPoint1"))==null?void 0:q.getAttribute("cy"))},p2:{x:parseFloat((p=o.get("controlPoint2"))==null?void 0:p.getAttribute("cx")),y:parseFloat((P=o.get("controlPoint2"))==null?void 0:P.getAttribute("cy"))},p3:{x:parseFloat((O=o.get("end_point2"))==null?void 0:O.getAttribute("cx")),y:parseFloat((N=o.get("end_point2"))==null?void 0:N.getAttribute("cy"))}};function m(){var ee,ae,K,U,j,J,de,ce;const G=`M ${y.p0.x} ${y.p0.y} C ${y.p1.x} ${y.p1.y}, ${y.p2.x} ${y.p2.y}, ${y.p3.x} ${y.p3.y}`;if(e.setAttribute("d",G),!o.get("handle1")||!o.get("handle2"))return console.warn("no handles on the edge you tried to update"),null;(ee=o.get("handle1"))==null||ee.setAttribute("x1",y.p0.x.toString()),(ae=o.get("handle1"))==null||ae.setAttribute("y1",y.p0.y.toString()),(K=o.get("handle1"))==null||K.setAttribute("x2",y.p1.x.toString()),(U=o.get("handle1"))==null||U.setAttribute("y2",y.p1.y.toString()),(j=o.get("handle2"))==null||j.setAttribute("x1",y.p3.x.toString()),(J=o.get("handle2"))==null||J.setAttribute("y1",y.p3.y.toString()),(de=o.get("handle2"))==null||de.setAttribute("x2",y.p2.x.toString()),(ce=o.get("handle2"))==null||ce.setAttribute("y2",y.p2.y.toString())}function _(G){var U,j,J,de;if(!e)return console.warn("no svg found on get mouse position"),null;const ee=e.getScreenCTM();if(!ee)return{x:0,y:0};const ae=G.clientX??((j=(U=G.touches)==null?void 0:U[0])==null?void 0:j.clientX),K=G.clientY??((de=(J=G.touches)==null?void 0:J[0])==null?void 0:de.clientY);return ae===void 0||K===void 0?(console.warn("Could not get clientX/Y from event:",G),null):{x:(ae-ee.e)/ee.a,y:(K-ee.f)/ee.d}}function b(G){if(G.type==="mousedown"&&G.preventDefault(),G.target.classList.contains("control-point")){h=G.target;const ee=_(G);if(!ee)return;g.x=ee.x-parseFloat(h.getAttribute("cx")),g.y=ee.y-parseFloat(h.getAttribute("cy")),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}),document.addEventListener("mouseup",E),document.addEventListener("touchend",E),document.addEventListener("mouseleave",E)}}function S(G){if(h){G.type==="touchmove"&&G.preventDefault();const ee=_(G);if(!ee)return;const ae=ee.x-g.x,K=ee.y-g.y;h.setAttribute("cx",ae.toString()),h.setAttribute("cy",K.toString()),h.id==="controlPoint1"?(y.p1.x=ae,y.p1.y=K):h.id==="controlPoint2"?(y.p2.x=ae,y.p2.y=K):console.warn("reached error"),m()}}function E(G){h&&(document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S),document.removeEventListener("mouseup",E),document.removeEventListener("touchend",E),document.removeEventListener("mouseleave",E),h=null)}(V=o.get("controlPoint1"))==null||V.addEventListener("mousedown",b),(W=o.get("controlPoint2"))==null||W.addEventListener("mousedown",b),m()}var Ime=(e,t,r)=>{if(R(t)&&R(r))Rme(R(r));else{if(we(t,!0),!R(r))return;Pme(R(r))}},Ome=(e,t,r)=>{e.preventDefault();const n=xH(R(t));!n||!R(t)||(we(r,!1),Cme(R(t)),R(t).setAttribute("d",n.getAttribute("d")),console.warn(n))},Mme=Nn('<path id="bezierCurve" role="presentation"></path>');function kme(e,t){xr(t,!0);let r=ti(null);Ti(()=>{let[s,o]=SH(R(r),t.initAncId);t.monitorWire(s),R(r)&&R(n)&&f4(R(r))}),bl(()=>{if(t.currentPath){if(!R(r)||!R(n))return;f4(R(r),t.currentPath)}});let n=ti(!1);var i=Mme();i.__click=[Ime,n,r],i.__contextmenu=[Ome,r,n],wu(i,s=>we(r,s),()=>R(r)),Ht(()=>{pt(i,"d",t.currentPath),Cn(i,0,DE(t.wireActive===-1?"":t.wireActive===1?"on":"off"),"svelte-15cv7c7")}),nt(e,i),Sr()}hc(["click","contextmenu"]);var Lme=Nn("<path></path>");function Nme(e,t){xr(t,!0);let r=ti(null);Ti(()=>{let[i,s]=SH(R(r),t.initAncId);t.monitorWire(i)});var n=Lme();wu(n,i=>we(r,i),()=>R(r)),Ht(()=>{Cn(n,0,DE(t.wireActive===-1?"hit-area":t.wireActive===1?"hit-area on":"hit-area off"),"svelte-1gi7ewc"),pt(n,"d",t.currentPath)}),nt(e,n),Sr()}function qme(e,t){xr(t,!0);const[r,n]=ii(),i=()=>Ye(ys,"$CircuitEngine",r);let s=ti(-1),o=ti(""),a=ve(t,"wireType",3,"bezier");function u(f,h=g=>we(o,g,!0)){if(!f)return null;h(f);const g=f.includes("cursor");if(g&&console.log("Connecting wire mounted"),g)return null;(i()!==null&&c(i())||(()=>null))()}function c(f,h=g=>we(s,g,!0)){const g=lme(f,R(o));return g===null?void 0:()=>f.monitorWire(g,m=>{var T;const _=fme(g);h(_);const{id:b,port:S,magnet:E}=(T=g.attributes)==null?void 0:T.target;if(!b||!S)return;if(Sme(S,b,_),!(b&&f.getLabelIndex().outputs[b]))return null;xme(b,_)})}ys.subscribe(f=>{if(f===null){we(s,-1);return}(f!==null&&c(f)||(()=>null))()}),XS(e,{children:ME,$$slots:{default:(f,h)=>{const g=ls(()=>h.path);ls(()=>h.destroy),ls(()=>h.hovering);var y=vr(),m=Gt(y);{var _=S=>{kme(S,{get initAncId(){return t.initAncId},get currentPath(){return R(g)},get wireActive(){return R(s)},monitorWire:u})},b=(S,E)=>{{var A=T=>{Nme(T,{get initAncId(){return t.initAncId},get currentPath(){return R(g)},get wireActive(){return R(s)},monitorWire:u})};lr(S,T=>{a()==="step"&&T(A)},E)}};lr(m,S=>{a()==="bezier"?S(_):S(b,!1)})}nt(f,y)}}}),Sr(),n()}var Dme=nr("<div><!></div>");function nc(e,t){xr(t,!0);let r=ve(t,"location",19,()=>["left","top"]),n=ve(t,"offset",19,()=>[]),i="";r()[0]=="left"?r()[1]=="top"?i="in1":r()[1]=="bot"?i="in2":r()[1]=="mid"&&(i="in"):r()[0]=="right"&&(i="out");const s=`${i}_${t.id}`;var o=Dme(),a=$t(o);const u=ls(()=>r()[0]==="left"?"west":"east"),c=ls(()=>t.io==="input"&&!0||!1),f=ls(()=>t.io==="output"&&!0||!1),h=ls(Cl);Ff(a,{id:s,key:s,get direction(){return R(u)},get input(){return R(c)},get output(){return R(f)},get locked(){return R(h)},get connections(){return t.connections},children:ME,$$slots:{default:(g,y)=>{const m=ls(()=>y.linked),_=ls(()=>y.hovering),b=ls(()=>y.connecting);bme(g,{get io(){return t.io},get connecting(){return R(b)},get linked(){return R(m)},anchorId:s,get hovering(){return R(_)}})},edge:(g,y)=>{qme(g,{initAncId:s,slot:"edge"})}}}),Ht(()=>Rr(o,`position:absolute;left: ${n()[0]}%; top: ${n()[1]}%;`)),nt(e,o),Sr()}const Fme="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='500px'%20height='500px'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23000000'%20d='M105%20105v302h151c148%200%20148-302%200-302H105zm-89%2046v18h71v-18H16zm368.8%2096c.2%206%20.2%2012%200%2018H496v-18H384.8zM16%20343v18h71v-18H16z'/%3e%3c/svg%3e",Bme="data:image/svg+xml,%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NAND%20Gate%20Body%20--%3e%3cpath%20fill='%23000000'%20d='M105%20105v302h151c148%200%20148-302%200-302H105z'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='151'%20width='71'%20height='18'%20fill='%23000000'/%3e%3crect%20x='16'%20y='343'%20width='71'%20height='18'%20fill='%23000000'/%3e%3c!--%20Output%20Circle%20(Inverter)%20--%3e%3ccircle%20cx='384'%20cy='256'%20r='25'%20fill='transparent'%20stroke='black'%20stroke-width='18'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='400'%20y='248'%20width='112'%20height='18'%20fill='%23000000'/%3e%3c/svg%3e",zme="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20OR%20Gate%20Body%20with%20Smooth%20Curves%20and%20Proportions%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='12'%20y='160'%20width='100'%20height='18'%20fill='black'/%3e%3crect%20x='12'%20y='340'%20width='100'%20height='18'%20fill='black'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='420'%20y='248'%20width='100'%20height='18'%20fill='black'/%3e%3c/svg%3e",Vme="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NOR%20Gate%20Body%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='160'%20width='100'%20height='18'%20fill='black'/%3e%3crect%20x='16'%20y='340'%20width='100'%20height='18'%20fill='black'/%3e%3c!--%20Inverter%20(NOT%20Circle)%20--%3e%3ccircle%20cx='440'%20cy='256'%20r='25'%20fill='transparent'%20stroke='black'%20stroke-width='18'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='460'%20y='248'%20width='120'%20height='18'%20fill='black'/%3e%3c/svg%3e",Gme="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Additional%20Back%20Curve%20for%20XOR%20--%3e%3cpath%20d='%20M%2080,120%20Q%20140,180%20140,256%20Q%20140,332%2080,392'%20fill='none'%20stroke='black'%20stroke-width='14'/%3e%3c!--%20XOR%20Gate%20Body%20(Same%20as%20OR%20Gate)%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='160'%20width='130'%20height='18'%20fill='black'/%3e%3crect%20x='16'%20y='340'%20width='130'%20height='18'%20fill='black'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='420'%20y='248'%20width='120'%20height='18'%20fill='black'/%3e%3c/svg%3e",$me="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Adjusted%20Back%20Curve%20to%20Intersect%20Input%20Lines%20--%3e%3cpath%20d='%20M%2080,120%20Q%20140,180%20140,256%20Q%20140,332%2080,392'%20fill='none'%20stroke='black'%20stroke-width='14'/%3e%3c!--%20XNOR%20Gate%20Body%20--%3e%3cpath%20d='%20M%20120,120%20L%20220,120%20Q%20360,120%20420,256%20Q%20360,392%20220,392%20L%20120,392%20Q%20180,336%20180,256%20Q%20180,176%20120,120%20Z'%20fill='black'/%3e%3c!--%20Input%20Lines%20--%3e%3crect%20x='16'%20y='160'%20width='130'%20height='18'%20fill='black'/%3e%3crect%20x='16'%20y='340'%20width='130'%20height='18'%20fill='black'/%3e%3c!--%20Inverter%20(NOT%20Circle)%20--%3e%3ccircle%20cx='440'%20cy='256'%20r='25'%20fill='transparent'%20stroke='black'%20stroke-width='12'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='465'%20y='248'%20width='80'%20height='18'%20fill='black'/%3e%3c/svg%3e";var Ume=nr("<img> <!> <!> <!>",1);function jme(e,t){xr(t,!0);const r={in1:[-7.5,68.5],in2:[-7.5,7.5],out:[100,37.58]},n={And:Fme,Nand:Bme,Or:zme,Nor:Vme,Xor:Gme,Xnor:$me};let i=ve(t,"width",3,80),s=ve(t,"height",3,50),o=ve(t,"gateType",3,"And");const a=n[o()];var u=Ume(),c=Gt(u);pt(c,"src",a);var f=xt(c,2);nc(f,{location:["left","bot"],get id(){return t.nodeId},io:"input",get offset(){return r.in2}});var h=xt(f,2);nc(h,{location:["left","top"],get id(){return t.nodeId},io:"input",get offset(){return r.in1}});var g=xt(h,2);NE(g,()=>t.rotation,y=>{nc(y,{location:["right","mid"],get id(){return t.nodeId},io:"output",get offset(){return r.out},get connections(){return lt(Zi).connectors["out_"+t.nodeId]}})}),Ht(()=>{pt(c,"alt",`${o()} logic gate`),pt(c,"width",i()),pt(c,"height",s())}),nt(e,u),Sr()}const Hme="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NOT%20Gate%20Body%20(Triangle)%20--%3e%3cpath%20d='%20M%20120,100%20L%20420,256%20L%20120,412%20Z'%20fill='black'/%3e%3c!--%20Input%20Line%20--%3e%3crect%20x='-20'%20y='248'%20width='115'%20height='18'%20fill='black'/%3e%3c!--%20Inverter%20(NOT%20Circle)%20--%3e%3ccircle%20cx='440'%20cy='256'%20r='30'%20fill='transparent'%20stroke='black'%20stroke-width='18'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='470'%20y='248'%20width='150'%20height='18'%20fill='black'/%3e%3c/svg%3e",Wme="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='100'%20height='60'%20viewBox='10%20100%20490%20312'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20NOT%20Gate%20Body%20(Triangle)%20--%3e%3cpath%20d='%20M%20120,100%20L%20420,256%20L%20120,412%20Z'%20fill='black'/%3e%3c!--%20Input%20Line%20--%3e%3crect%20x='-20'%20y='248'%20width='115'%20height='18'%20fill='black'/%3e%3c!--%20Output%20Line%20--%3e%3crect%20x='400'%20y='248'%20width='150'%20height='18'%20fill='black'/%3e%3c/svg%3e";var Xme=nr("<img> <!> <!>",1);function Yme(e,t){xr(t,!0);const r={in:[-15,38.7],out:[100,38]},n={Not:Hme,Repeater:Wme};let i=ve(t,"width",3,80),s=ve(t,"height",3,50),o=ve(t,"gateType",3,"Not");var a=Xme(),u=Gt(a),c=xt(u,2);nc(c,{location:["left","mid"],get id(){return t.nodeId},io:"input",get offset(){return r.in}});var f=xt(c,2);NE(f,()=>t.rotation,h=>{nc(h,{location:["right","mid"],get id(){return t.nodeId},io:"output",get offset(){return r.out},get connections(){return lt(Zi).connectors["out_"+t.nodeId]}})}),Ht(()=>{pt(u,"src",n[o()]),pt(u,"alt",`${o()} logic gate`),pt(u,"width",i()),pt(u,"height",s())}),nt(e,a),Sr()}var Kme=nr('<div class="button_fix svelte-9i9r2v"><svg width="85" height="65" viewBox="-12 0 95 100" xmlns="http://www.w3.org/2000/svg"><line x1="-50" x2="5" y1="45" y2="45" stroke-width="8"></line><circle cx="50" cy="50" r="45" stroke-width="7"></circle></svg></div> <!>',1);function Zme(e,t){xr(t,!0),ve(t,"width",3,80),ve(t,"height",3,50);const r=[-5,35.43],n=()=>{console.log("hovered");const f=new MouseEvent("mouseenter",{bubbles:!0,cancelable:!1}),h=new MouseEvent("mouseleave",{bubbles:!0,cancelable:!1}),g=document.querySelector(`.in_${t.nodeId}`);if(console.log(t.nodeId),!g)return console.warn("no element of the specified ID"),null;g.dispatchEvent(f),g.dispatchEvent(h)};bl(()=>{(t.rotation||t.rotation===0)&&n()});var i=Kme(),s=Gt(i),o=$t(s);Cn(o,0,"LampSVG");var a=$t(o);pt(a,"stroke","lightgray");var u=xt(a);pt(u,"fill","lightgray"),pt(u,"stroke","gray");var c=xt(s,2);nc(c,{offset:r,location:["left","mid"],get id(){return t.nodeId},io:"input"}),nt(e,i),Sr()}var Jme=Nn('<svg width="75" height="60" viewBox="-2 2 140 95" xmlns="http://www.w3.org/2000/svg"><rect x="0" y="0" width="100" height="100" fill="black" stroke-width="2"></rect><line x1="100" x2="190" y1="50" y2="50" stroke-width="8"></line><circle role="presentation" cx="50" cy="50" r="30" aria-label="input button node toggle" stroke-width="7"></circle></svg><!>',1);function Qme(e,t){xr(t,!0),ve(t,"width",3,80),ve(t,"height",3,50);let r=ti(!1),n=ls(()=>({color:R(r)?"green":"red",outlineColor:R(r)?"var(--lime-green)":"var(--lime-red)"}));const i=[95,40.4];function s(g){g.preventDefault();let y=!1;const m=g.clientX,_=g.clientY,b=5;function S(T){const I=T.clientX-m,q=T.clientY-_;Math.sqrt(I**2+q**2)>b&&(y=!0,A())}function E(){!y&&Cl()&&(console.log(Cl()),we(r,!R(r)),pme(t.nodeId)),A()}function A(){window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",E)}window.addEventListener("mousemove",S),window.addEventListener("mouseup",E)}ys.subscribe(g=>{if(g===null){we(r,!1);return}});var o=Jme(),a=Gt(o),u=$t(a),c=xt(u),f=xt(c),h=xt(a);NE(h,()=>t.rotation,g=>{nc(g,{offset:i,location:["right","mid"],get id(){return t.nodeId},io:"output",get connections(){return lt(Zi).connectors["out_"+t.nodeId]}})}),Ht(()=>{pt(u,"stroke",R(n).outlineColor),pt(c,"stroke",R(n).outlineColor),pt(f,"fill",R(n).color),pt(f,"stroke",R(n).outlineColor)}),pr("mousedown",f,s,!0),nt(e,o),Sr()}const EH={"Logic Gates":{svg:void 0,groupElements:[{name:"And",nodeType:"And",icon:Cte},{name:"Nand",nodeType:"Nand",icon:Lte},{name:"Or",nodeType:"Or",icon:Ite},{name:"Nor",nodeType:"Nor",icon:Ote},{name:"Xor",nodeType:"Xor",icon:Mte},{name:"Xnor",nodeType:"Xnor",icon:kte},{name:"Not",nodeType:"Not",icon:Nte},{name:"Repeater",nodeType:"Repeater",icon:Rte}]},"Input/Output":{svg:void 0,groupElements:[{name:"Lamp",nodeType:"Lamp",icon:qte},{name:"Button",nodeType:"Button",icon:Dte}]},GhostElement:{svg:void 0,groupElements:[]}};function e0e(e){switch(e){case"And":case"Nor":case"Xor":case"Xnor":case"Or":case"Nand":return jme;case"Repeater":case"Not":return Yme;case"Button":return Qme;case"Lamp":return Zme;default:return null}}var t0e=(e,t,r)=>t(R(r),e),r0e=nr('<li class="svelte-aziwse"><button class="gate-button" style="background:none; border:none; padding:0; cursor:pointer;"><img class="svelte-aziwse"></button> </li>'),n0e=nr('<ol class="side_menu_group svelte-aziwse"></ol>');function i0e(e,t){xr(t,!0);let r=ve(t,"zIndex",3,0),n=ve(t,"subMenuHeader",3,"Logic Gates");const i=EH[n()].groupElements;let s=null,o=null;function a(m,_,b){o=document.createElement("div"),o.className="drag-ghost",o.style.position="fixed",o.style.pointerEvents="none",o.style.left=_+"px",o.style.top=b+"px",o.style.zIndex="200",o.style.transform="scale(1.3)";const S=document.createElement("img");S.src=m.icon,S.alt=m.nodeType+"drag gate ghost",S.style.width="82px",S.style.opacity="0.7",o.appendChild(S),document.body.appendChild(o)}function u(m,_){o&&(o.style.left=m+"px",o.style.top=_+"px")}function c(){o&&(o.remove(),o=null)}function f(m,_){_.preventDefault(),s=m,a(m,_.pageX,_.pageY)}function h(m){o&&u(m.pageX,m.pageY)}function g(m){if(m.stopPropagation(),s&&o){const _=document.elementFromPoint(m.clientX,m.clientY);u(m.pageX,m.pageY);const b=document.querySelector(".svelvet-wrapper");if(b==null?void 0:b.contains(_)){const E={...m,gateType:s.nodeType};t.createCanvasDevice(E)}s=null,c(),m.stopPropagation()}}Ti(()=>{document.addEventListener("mousemove",h),document.addEventListener("click",g)}),xh(()=>{document.removeEventListener("mousemove",h),document.removeEventListener("click",g),c()});var y=n0e();ds(y,21,()=>i,gu,(m,_)=>{var b=r0e();b.__mousedown=[t0e,f,_];var S=$t(b),E=$t(S),A=xt(S);Ht(()=>{pt(E,"src",R(_).icon),pt(E,"alt",`${R(_).name??""} logic gate, hand-drawn`),Eu(A,` ${R(_).name??""}`)}),nt(m,b)}),Ht(()=>{Rr(y,`z-index:${r()};`),pt(y,"id",`section_${r()??""}`)}),nt(e,y),Sr()}hc(["mousedown"]);const s0e=""+new URL("line_26-7GG_ennq.svg",import.meta.url).href,o0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20preserveAspectRatio='none'%20id='a'%20data-name='AW'%20xmlns='http://www.w3.org/2000/svg'%20width='500'%20height='27.081'%20viewBox='0%200%20500%2027.081'%3e%3cpath%20id='b'%20data-name='16'%20d='M500,25.653c-.271,.462-.732,.434-1.18,.548-.418,.107-.762,.508-1.277,.879h-22.196c-.256-.224-.609-.535-1.012-.889h-7.665c-.362-.338-.71-.663-1.069-.998h-7.711c-.363-.336-.711-.66-1.076-.998h-8.658c-.498-.437-.823-.963-1.6-.956-4.344,.039-8.688,.019-12.911,.019-.349-.349-.577-.577-.845-.845-1.218-.293-2.5-.073-3.769-.115-1.29-.043-2.584-.01-3.876-.01h-7.267c-1.292,0-2.585,.036-3.876-.01-1.267-.045-2.549,.192-3.758-.121-.274-.274-.502-.502-.784-.784h-28.005c-.379-.333-.732-.644-1.134-.997h-45.514c-.305,.285-.654,.61-1.011,.943h-53.262l-1.063-.992h-118.18c-.251-.251-.479-.479-.708-.708-.129-.08-.251-.214-.387-.228-.319-.034-.645-.011-.968-.011-4.36,0-8.721,.001-13.081-.004-.147,0-.295-.064-.448-.099-.438-.438-.811-.889-1.573-.884-5.006,.036-10.013,.024-15.019,.012-.625-.001-1.267,.129-1.846-.126-.255-.255-.483-.483-.716-.716-.939-.229-1.899-.113-2.85-.114-7.59-.011-15.181-.018-22.771,.012-.774,.003-1.106-.509-1.604-.953h-17.45c-.292,.269-.641,.59-1.009,.929H34.387c-.343-.32-.692-.645-1.055-.984h-11.548c-.393-.35-.746-.663-1.122-.998h-5.724c-.278-.278-.469-.587-.744-.716-.402-.188-.938-.144-1.286-.386-.522-.363-.93-.889-1.387-1.346l-.345-.345c-.923,.165-1.464-.42-1.997-1.03h-.968c-2.05-2.059-4.101-4.118-6.23-6.256-.022-.369-.058-.835-.075-1.301-.034-.93-.106-1.035-1.056-1.154-.334-.042-.612-.094-.829-.465,.284-.322,.579-.658,.876-.995C.607,1.136,.304,.793,0,.451Q.875,0,5.143,0c.244,.192,.491,.38,.728,.579,.123,.103,.23,.227,.369,.366h6.736c.362,.338,.71,.663,1.068,.997h14.493c.364,.337,.713,.66,1.009,.934h16.478c.498-.438,.825-.956,1.6-.955,17.603,.023,35.206,.017,52.809,.022,.307,0,.614,.073,.928,.112,.431,.452,.82,.889,1.579,.871,2.26-.053,4.521-.019,6.782-.019,5.006,0,10.013,.017,15.019-.019,.759-.005,1.142,.431,1.63,.932h12.505c.38,.333,.734,.644,1.137,.998h108.444c.359,.333,.708,.657,1.071,.993h43.567c.357,.333,.705,.658,1.015,.947h3.881c.253-.253,.481-.481,.71-.71,.129-.078,.258-.226,.387-.226,27.764-.01,55.528-.01,83.195-.01,.541,.535,.911,.99,1.674,.987,8.075-.029,16.15-.023,24.224-.01,.785,.001,1.589-.156,2.34,.129,.246,.246,.475,.475,.703,.703,.144,.043,.287,.123,.431,.123,2.745,.007,5.491,.006,8.236,.006s5.491,.03,8.236-.019c.774-.014,1.11,.503,1.606,.952h9.622c.368,.337,.717,.658,1.088,.998h7.707c.356,.333,.705,.659,1.067,.998h7.707c.25,.25,.478,.478,.706,.706,.128,.08,.251,.216,.386,.23,.319,.034,.645,.011,.968,.011,8.236,0,16.473,0,24.709,.004,.148,0,.296,.062,.444,.095,1.256,1.256,2.512,2.512,3.768,3.768,1.374-.003,1.396,.046,1.46,1.249,.017,.322-.015,.647,.007,.969,.029,.428,.425,.7,1.034,.699,.323,0,.646-.005,.969,.002,.155,.003,.309,.03,.466,.047,.491,.678,1.129,1.073,1.992,1.025,2.058,2.058,4.114,4.114,6.166,6.166Z'/%3e%3c/svg%3e",a0e=""+new URL("line_23-6xYtaVUR.svg",import.meta.url).href,u0e=""+new URL("line_24-DEoQpS3B.svg",import.meta.url).href,c0e=""+new URL("line_25-BJNXJfeQ.svg",import.meta.url).href,l0e=""+new URL("line_27-Bg8z01MR.svg",import.meta.url).href,f0e=""+new URL("line_17-DTelLRhX.svg",import.meta.url).href,h0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20preserveAspectRatio='none'%20id='a'%20data-name='AW'%20xmlns='http://www.w3.org/2000/svg'%20width='500'%20height='14.048'%20viewBox='0%200%20500%2014.048'%3e%3cpath%20id='b'%20data-name='20'%20d='M500,11.891c-.491,.804-1.263,1.347-1.881,2.033-.123,.035-.245,.101-.368,.102-1.375,.007-2.751-.032-4.124,.021-.663,.025-.942-.435-1.365-.812h-18.918c-.311-.287-.609-.561-.922-.849h-30.487c-.303-.283-.6-.559-.873-.813h-47.818c-.333,.297-.633,.564-.861,.768h-18.167c-.235-.235-.429-.429-.624-.624-.253-.054-.505-.152-.759-.153-3.42-.01-6.84-.007-10.127-.007-.325,.325-.519,.519-.762,.762-.347,.019-.744,.06-1.143,.06-29.56,.003-59.12,.003-88.68,.003-.138,0-.278-.019-.412,.003-.653,.107-.957-.392-1.398-.828H56.332c-1.237,0-2.476,.022-3.711-.023-.187-.007-.448-.298-.519-.51-.077-.23-.07-.609,.073-.769,.635-.71,1.333-1.365,1.994-2.027h19.006c.43-.625,.988-.935,1.743-.796,.63,.116,1.004-.273,1.355-.691,.804-.252,1.622-.127,2.428-.128,12.374-.009,24.748-.006,37.122-.01,.395,0,.812,.1,1.171-.154,.096-.068,.233-.211,.213-.283-.032-.115-.172-.278-.275-.284-.811-.052-1.625-.097-2.437-.097-13.199-.005-26.398-.004-39.65-.004-.271-.238-.572-.503-.913-.804h-30.452c-.307-.286-.604-.563-.908-.847H19.505c-.307-.285-.603-.562-.912-.849H.37c-.111-.362-.222-.727-.37-1.211C.741,1.461,1.481,.854,2.46,.051H12.864c.218,.192,.519,.457,.861,.758h59.327c.306,.285,.603,.562,.907,.847,4.11,0,8.235,.002,12.359-.012,.098,0,.233-.166,.283-.283,.086-.198-.045-.465-.356-.512-.533-.081-1.085-.036-1.626-.08-.105-.008-.289-.255-.279-.268,.14-.178,.302-.467,.469-.473,1.085-.042,2.172-.022,3.169-.022,.462,.484,.793,.853,1.439,.841,2.336-.041,4.675,.009,7.011-.033,.647-.011,.972,.369,1.433,.841h56.795c.412,0,.83,.041,1.236-.009,.666-.082,.935,.444,1.36,.81h54.397c.308,.286,.605,.561,.914,.847h91.543c.299,.28,.596,.557,.902,.844h44.485c.333,.297,.632,.564,.951,.848h33.767c.665,1.068,1.616,.826,2.549,.656,.195-.194,.389-.389,.583-.583,.122-.037,.244-.108,.366-.108,8.387-.005,16.774-.005,25.229-.005,.263,.225,.566,.483,.928,.793h1.55c.314,.287,.612,.56,.911,.833,.286-.261,.583-.531,.879-.8,4.262,0,8.524,.004,12.786-.008,.302,0,.606,.039,.661,.339,.03,.164-.205,.435-.386,.568-.413,.302-.318,.719-.309,1.111,.002,.104,.138,.258,.245,.297,.241,.087,.5,.146,.756,.164,.943,.065,1.898-.122,2.825,.132,.201,.201,.395,.395,.6,.6,.652,.201,1.335,.091,2.007,.093,5.774,.01,11.549,.017,17.323-.01,.658-.003,.944,.428,1.367,.81h22.215c.312,.286,.611,.559,.926,.849h18.934c.305,.283,.602,.559,.891,.828,.648,.145,1.383-.29,1.95,.339Zm-93.618,.51c-3.829-.031-7.658-.023-11.486-.009-.098,0-.227,.159-.287,.272-.102,.192,.024,.513,.324,.52,1.914,.042,3.828,.021,5.743,.021s3.829,.004,5.743-.012c.099,0,.227-.159,.287-.272,.101-.192-.026-.518-.324-.521Zm14.022,.825c-2.454-.036-4.91-.024-7.364-.008-.098,0-.227,.161-.284,.276-.095,.192,.032,.503,.332,.516,1.226,.051,2.454,.021,3.682,.021s2.455,.006,3.682-.012c.098-.002,.227-.161,.284-.276,.095-.192-.035-.512-.331-.516Z'/%3e%3c/svg%3e",d0e=""+new URL("line_21-BR_oFIB4.svg",import.meta.url).href,p0e=""+new URL("line_29-C9eu5sMJ.svg",import.meta.url).href;var g0e=nr('<li class="svelte-1m2v4mn"><div class="menu_group_section svelte-1m2v4mn"><button class="svelte-1m2v4mn"><span style="margin-left:5%;"> </span></button> <img class="sketch_bar svelte-1m2v4mn"></div> <!></li>'),v0e=nr('<nav class="side_menu noselect svelte-1m2v4mn" aria-label="Side Menu"><div class="side_menu_header svelte-1m2v4mn"><!> <img class="wiggle_bar svelte-1m2v4mn" alt="sketched line bottom border for main app bar"></div> <ul class="svelte-1m2v4mn"></ul></nav>');function m0e(e,t){xr(t,!0);const r={line_15:o0e,line_23:a0e,line_24:u0e,line_25:c0e,line_27:l0e,line_17:f0e,line_19:h0e,line_21:d0e,line_29:p0e},n=EH,i=Object.keys(n),s=[15,23,24,25,27,17,19,21,29];function o(b){return Math.floor(Math.random()*b)+1}let a=localStorage.getItem("randomLineSelectionStore");function u(b){return r[`line_${b}`]}if(a===null){const b=i.map(S=>{const E=o(s.length-1),A=s[E],T=u(A);return n[S].svg=T,s.splice(E,1),A});localStorage.setItem("randomLineSelectionStore",JSON.stringify(b))}else JSON.parse(a).forEach((S,E)=>{const A=i[E],T=u(parseInt(S,10));A!==void 0&&(n[A].svg=T)});let c=xo(Array(i.length).fill(!0));function f(b,S){return b[S]?"transition: max-height .4s ease-in; max-height:405px":"transition: max-height .4s ease-out; max-height:75px"}var h=v0e(),g=$t(h),y=$t(g);Pte(y,{});var m=xt(y,2);pt(m,"src",s0e);var _=xt(g,2);ds(_,21,()=>i,gu,(b,S,E)=>{var A=g0e();pt(A,"id",`menu_group_${E??""}`);var T=$t(A),I=$t(T);I.__mousedown=()=>{c[E]=!c[E]};var q=$t(I),p=$t(q),P=xt(I,2),O=xt(T,2);i0e(O,{get createCanvasDevice(){return t.createCanvasDevice},zIndex:E,get subMenuHeader(){return R(S)}}),Ht(N=>{Rr(A,N),Eu(p,R(S)),pt(P,"src",n[R(S)].svg),pt(P,"alt",`sketched line bottom border for main app bar section ${R(S)??""}`)},[()=>f(c,E)]),nt(b,A)}),nt(e,h),Sr()}hc(["mousedown"]);var y0e=nr("<div><!></div>"),_0e=nr("<div> </div>");function b0e(e,t){xr(t,!0);const r=(c,f=Ls)=>{const h=ls(()=>t.position!==void 0?!1:"cursor");VE(c,{get drop(){return R(h)},get position(){return t.position},editable:!1,get id(){return t.nodeId},children:(g,y)=>{var m=y0e();m.__mousedown=b=>{b.preventDefault();const S=b.clientX,E=b.clientY,A=5;function T(p){const P=p.clientX-S,O=p.clientY-E;Math.sqrt(P**2+O**2)>A&&q()}function I(){var P;console.log("handled");const p=b.target;p?p.nodeName!=="IMG"&&((P=p.parentNode)==null?void 0:P.nodeName)!=="svg"?console.warn('not a part of the node to preform a node action, in this case "rotate" '):we(i,(R(i)+90)%360):console.warn("no event target on node click"),q()}function q(){window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",I)}window.addEventListener("mousemove",T),window.addEventListener("mouseup",I)};var _=$t(m);Yu(_,f,(b,S)=>{S(b,sg({get rotation(){return R(i)},get nodeId(){return t.nodeId}},()=>t.nodeProps))}),Ht(()=>Rr(m,`transform:rotate(${R(i)??""}deg)`)),nt(g,m)},$$slots:{default:!0}})};let n=ls(()=>e0e(t.gateType)),i=ti(0);var s=vr(),o=Gt(s);{var a=c=>{r(c,()=>R(n))},u=c=>{var f=_0e(),h=$t(f);Ht(()=>Eu(h,`Unknown gate type: ${t.gateType??""}`)),nt(c,f)};lr(o,c=>{R(n)?c(a):c(u,!1)})}nt(e,s),Sr()}hc(["mousedown"]);var w0e=Nn('<svg><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M.5 10.29a.7.7 0 0 0 .37.62a.71.71 0 0 0 .73 0l5.08-3.3a.7.7 0 0 0 0-1.18L1.6 3.11a.71.71 0 0 0-.73 0a.7.7 0 0 0-.37.62z"></path><path d="M6.997 10.29a.7.7 0 0 0 .37.62a.71.71 0 0 0 .73 0l5.08-3.3a.7.7 0 0 0 0-1.18l-5.08-3.32a.71.71 0 0 0-.73 0a.7.7 0 0 0-.37.6zM13.5 2.5v9"></path></g></svg>');function x0e(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=w0e();let i;Ht(()=>i=ha(n,i,{viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),nt(e,n)}var S0e=Nn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M1.436 12.33a1.14 1.14 0 0 0 .63 1a1.24 1.24 0 0 0 1.22 0l8.65-5.35a1.11 1.11 0 0 0 0-2L3.286.67a1.24 1.24 0 0 0-1.22 0a1.14 1.14 0 0 0-.63 1z"></path></svg>');function E0e(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=S0e();let i;Ht(()=>i=ha(n,i,{viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),nt(e,n)}var A0e=Nn('<svg><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="m11 9l2-.5l.5 2"></path><path d="M13 8.5A6.76 6.76 0 0 1 7 13h0a6 6 0 0 1-5.64-3.95M3 5l-2 .5l-.5-2"></path><path d="M1 5.5C1.84 3.2 4.42 1 7 1h0a6 6 0 0 1 5.64 4"></path></g></svg>');function T0e(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=A0e();let i;Ht(()=>i=ha(n,i,{viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),nt(e,n)}var P0e=Nn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M4 .5H1.5a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1H4a1 1 0 0 0 1-1v-11a1 1 0 0 0-1-1m8.5 0H10a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h2.5a1 1 0 0 0 1-1v-11a1 1 0 0 0-1-1"></path></svg>');function C0e(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=P0e();let i;Ht(()=>i=ha(n,i,{viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),nt(e,n)}var R0e=Nn('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M13.5.5v13m-13-1.84a1 1 0 0 0 .52.88a1 1 0 0 0 1 0l7.19-4.7a1 1 0 0 0 0-1.68L2 1.5a1 1 0 0 0-1 0a1 1 0 0 0-.52.88Z"></path></svg>');function I0e(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=R0e();let i;Ht(()=>i=ha(n,i,{viewBox:"0 0 14 14",width:"1.2em",height:"1.2em",...r})),nt(e,n)}var O0e=Nn('<svg><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"></path><path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7M7 3v4a1 1 0 0 0 1 1h7"></path></g></svg>');function M0e(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=O0e();let i;Ht(()=>i=ha(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),nt(e,n)}var k0e=Nn('<svg><path fill="currentColor" d="M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zM17 6H7v13h10zM9 17h2V8H9zm4 0h2V8h-2zM7 6v13z"></path></svg>');function L0e(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=k0e();let i;Ht(()=>i=ha(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),nt(e,n)}const AE=(e,t)=>{let r=()=>RJ(t==null?void 0:t(),[]);var n=vr(),i=Gt(n);Yu(i,()=>r().Component,(s,o)=>{o(s,{get style(){return r().styles},get width(){return r().width}})}),nt(e,n)},Nf=(e,t=Ls,r=Ls,n)=>{let i=hn(()=>qZ(n==null?void 0:n(),""));var s=q0e();s.__click=[N0e,r];var o=$t(s);AE(o,t),Ht(()=>Rr(s,R(i))),nt(e,s)};var N0e=(e,t)=>t()(),q0e=nr('<button class="svelte-1qv10mw"><!></button>'),D0e=(e,t)=>t()(),F0e=nr('<button style="display:flex;align-items: center;padding-block:1px;" class="svelte-1qv10mw"><div style="margin-left: -8px"><!></div> <p id="tickNumber" class="svelte-1qv10mw"> </p></button>'),B0e=nr('<div class="menuRunButtons svelte-1qv10mw"><!> <span class="vl svelte-1qv10mw"></span> <!> <span class="vl svelte-1qv10mw"></span> <!> <span class="vl svelte-1qv10mw"></span> <!> <span style="margin-right: 7px" class="vl svelte-1qv10mw"></span> <!> <!></div>');function z0e(e,t){xr(t,!0);const r=(S,E=Ls)=>{var A=F0e();A.__click=[D0e,E];var T=$t(A),I=$t(T);{var q=N=>{AE(N,()=>n.pauseTick)},p=N=>{AE(N,()=>n.playTick)};lr(I,N=>{Cl()?N(q):N(p,!1)})}var P=xt(T,2),O=$t(P);Ht((N,V)=>{Rr(P,N),Eu(O,V)},[()=>Cl()?"border-color:green":"border-color:red",ame]),nt(S,A)},n={playTick:{Component:E0e,styles:"transform:scale(1.8);",width:40},pauseTick:{Component:C0e,styles:"transform:scale(1.8);",width:40},updateGates:{Component:I0e,styles:"transform:scale(2);",width:40},updateGatesNext:{Component:x0e,styles:"transform:scale(2.3);",width:50},resetState:{Component:T0e,styles:"transform:scale(2);",width:40},save:{Component:M0e,styles:"transform:scale(2.4);",width:40},trash:{Component:L0e,styles:"transform:scale(2.69);",width:40}},i=()=>{const S=document.querySelector("#logicap");S&&(S.classList.contains("running")?(S.classList.remove("running"),s()):S.classList.add("running"))};function s(){let S,E;const A=["red","var(--lime-red)"],T=document.querySelectorAll("[id^='N-Lamp']");T!==null&&T.forEach(I=>{S=I.querySelector("circle"),E=I.querySelector("line"),!(S===null||E===null)&&(S.setAttribute("stroke",A[1]),S.setAttribute("fill",A[0]),E.setAttribute("stroke",A[0]))})}function o(S){i(),ume(10)}function a(S){dme()}function u(S){hme()}function c(){wte(),Zi.reset(),t.clearCanvas()}var f=B0e(),h=$t(f);r(h,()=>o);var g=xt(h,4);Nf(g,()=>n.updateGates,()=>u);var y=xt(g,4);Nf(y,()=>n.updateGatesNext,()=>a);var m=xt(y,4);Nf(m,()=>n.resetState,()=>cme);var _=xt(m,4);Nf(_,()=>n.save,()=>ih);var b=xt(_,2);Nf(b,()=>n.trash,()=>c,()=>"margin-left: -6px"),nt(e,f),Sr()}hc(["click"]);const V0e=!1;console.log("IS DEVMODE: "+V0e);function G0e(e=10){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=crypto.getRandomValues(new Uint8Array(e));return Array.from(r,n=>t[n%t.length]).join("")}function $0e(){const e=document==null?void 0:document.querySelector("div.svelvet-graph-wrapper");if(!e)return;const{transform:t}=e.style,r=/scale\((.+)\)/,n=t.match(r);if(!n||!n[1])return console.warn("scale property not found on graph-wrapper"),null;const i=parseFloat(n[1]);if(isNaN(i))throw new Error("Scale value is not a valid integer.");localStorage.setItem("SavedScale",i.toString())}function U0e(){const e=()=>{const t=document.querySelector(".svelvet-wrapper");if(t){const r=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0});t.dispatchEvent(r);const n=new MouseEvent("mouseup",{bubbles:!0,cancelable:!0});t.dispatchEvent(n)}};document.addEventListener("DOMContentLoaded",()=>{e()})}var j0e=Nn('<svg><path fill="currentColor" d="M5 19V5zv-.025zm0 2q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v7q0 .425-.288.713T20 13t-.712-.288T19 12V5H5v14h7q.425 0 .713.288T13 20t-.288.713T12 21zm14.175-1H16q-.425 0-.712-.288T15 19t.288-.712T16 18h3.175l-.9-.9Q18 16.825 18 16.413t.3-.713q.275-.275.7-.275t.7.275l2.6 2.6q.3.3.3.7t-.3.7l-2.6 2.6q-.275.275-.687.288T18.3 22.3q-.275-.275-.275-.7t.275-.7zM11 13v3q0 .425.288.713T12 17t.713-.288T13 16v-3h3q.425 0 .713-.288T17 12t-.288-.712T16 11h-3V8q0-.425-.288-.712T12 7t-.712.288T11 8v3H8q-.425 0-.712.288T7 12t.288.713T8 13z"></path></svg>');function H0e(e,t){const r=da(t,["$$slots","$$events","$$legacy"]);var n=j0e();let i;Ht(()=>i=ha(n,i,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),nt(e,n)}var W0e=async(e,t,r)=>await t(r),X0e=nr('<p class="svelte-a9kq2j"> </p>'),Y0e=(e,t)=>t(),K0e=nr('<div class="tabs svelte-a9kq2j"><!> <button style="border: unset; width: 30px; float: left;background-color:transparent;margin-left:-3px;margin-right: 4px;" class="svelte-a9kq2j"><!></button></div>');function Z0e(e,t){xr(t,!0);const[r,n]=ii(),i=()=>Ye(Zi,"$CircuitStore",r),s=localStorage.getItem("currActiveTab")||"init_circuit";let o=ti(xo(s)),a=xo(localStorage.getItem("activeTabList")&&JSON.parse(localStorage.getItem("activeTabList")||"")||[s]);async function u(_){await ih();const b=localStorage.getItem("circuitStoreSave");if(!b){console.log("empty after trying to save, not possible I don't think");return}localStorage.setItem(_,b)}async function c(_){if(R(o)===_)return null;await u(R(o)),t.clearDeviceData(),Zi.reset();let b=localStorage.getItem(_);b||(b="",localStorage.setItem(_,b)),localStorage.setItem("circuitStoreSave",b),lV(),t.setDeviceData(i().devices),we(o,_,!0),localStorage.setItem("currActiveTab",_)}function f(){const _=a.map(S=>{if(S==="unnamed_circuit")return 0;const E=S.match(/^unnamed_circuit_(\d+)$/);return E?parseInt(E[1]):null}).filter(S=>S!==null).sort((S,E)=>S-E);if(_.length===0||_[0]!==0){a.push("unnamed_circuit"),localStorage.setItem("activeTabList",JSON.stringify(a));return}let b=1;for(const S of _){if(S>b)break;b=S+1}a.push(`unnamed_circuit_${b}`),localStorage.setItem("activeTabList",JSON.stringify(a))}var h=K0e(),g=$t(h);ds(g,16,()=>a,_=>_,(_,b)=>{var S=X0e();S.__click=[W0e,c,b];var E=$t(S);Ht(()=>{Rr(S,R(o)===b?"background-color: pink":""),Eu(E,b)}),nt(_,S)});var y=xt(g,2);y.__click=[Y0e,f];var m=$t(y);H0e(m,{style:"display: block; margin: 0 auto; height: 100%; width: 100%;"}),nt(e,h),Sr(),n()}hc(["click"]);function J0e(){return console.log("CONNECTED IN APP"),null}var Q0e=nr('<main id="logicap" class="svelte-2kmgjz"><!> <!> <!> <!></main>');function eye(e,t){xr(t,!0);const[r,n]=ii(),i=()=>Ye(Zi,"$CircuitStore",r);let s=ti(xo({...i().devices}));const o=()=>we(s,{},!0),a=_=>we(s,_,!0);let u=ti(1);Ti(()=>{we(u,parseFloat(localStorage.getItem("SavedScale")||"1"),!0),lV(),we(s,i().devices,!0),U0e()}),window.addEventListener("beforeunload",()=>{ih(),$0e()});function c(_){const b=_.gateType,S=G0e(),E=Zi.addCircuitDevice(b,S);we(s,E,!0),ih()}var f=Q0e(),h=$t(f);m0e(h,{createCanvasDevice:c});var g=xt(h,2);z0e(g,{clearCanvas:o});var y=xt(g,2);Z0e(y,{clearDeviceData:o,setDeviceData:a});var m=xt(y,2);tte(m,{theme:"LogiCap",get zoom(){return R(u)},editable:!1,disableSelection:!1,edgeStyle:"bezier",controls:!0,children:(_,b)=>{var S=vr(),E=Gt(S);ds(E,17,()=>Object.entries(R(s)),([A,T])=>A,(A,T)=>{let I=()=>R(T)[0],q=()=>R(T)[1];const p=ls(()=>({...q().type&&{gateType:q().type},width:80,height:50}));b0e(A,{get gateType(){return q().type},get position(){return q().position},get nodeId(){return I()},get nodeProps(){return R(p)}})}),nt(_,S)},$$slots:{default:!0,minimap:(_,b)=>{uV(_,{width:100,corner:"NE",slot:"minimap"})},toggle:(_,b)=>{cV(_,{main:"LogiCap",corner:"NW",alt:"LogiCap",slot:"toggle"})}}}),nt(e,f),Sr(),n()}zJ(eye,{target:document.getElementById("app")});export{rye as A,nye as B,ZJ as C,ks as D,wu as E,Eu as F,Ke as G,Ti as H,xh as I,qe as J,Gt as K,we as L,Yc as M,dp as N,Nn as O,Yu as P,pt as Q,ds as R,ve as a,Xr as b,Ht as c,Cn as d,nt as e,Sr as f,kr as g,ii as h,qn as i,lr as j,lt as k,$t as l,xt as m,R as n,hn as o,xr as p,Rr as q,pr as r,Ye as s,nr as t,ro as u,io as v,KQ as w,BJ as x,ic as y,PC as z};
